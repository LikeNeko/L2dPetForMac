/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./Framework/src/cubismdefaultparameterid.ts":
/*!***************************************************!*\
  !*** ./Framework/src/cubismdefaultparameterid.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismDefaultParameterId = void 0;\nexports.CubismDefaultParameterId = Object.freeze({\n    HitAreaPrefix: 'HitArea',\n    HitAreaHead: 'Head',\n    HitAreaBody: 'Body',\n    PartsIdCore: 'Parts01Core',\n    PartsArmPrefix: 'Parts01Arm_',\n    PartsArmLPrefix: 'Parts01ArmL_',\n    PartsArmRPrefix: 'Parts01ArmR_',\n    ParamAngleX: 'ParamAngleX',\n    ParamAngleY: 'ParamAngleY',\n    ParamAngleZ: 'ParamAngleZ',\n    ParamEyeLOpen: 'ParamEyeLOpen',\n    ParamEyeLSmile: 'ParamEyeLSmile',\n    ParamEyeROpen: 'ParamEyeROpen',\n    ParamEyeRSmile: 'ParamEyeRSmile',\n    ParamEyeBallX: 'ParamEyeBallX',\n    ParamEyeBallY: 'ParamEyeBallY',\n    ParamEyeBallForm: 'ParamEyeBallForm',\n    ParamBrowLY: 'ParamBrowLY',\n    ParamBrowRY: 'ParamBrowRY',\n    ParamBrowLX: 'ParamBrowLX',\n    ParamBrowRX: 'ParamBrowRX',\n    ParamBrowLAngle: 'ParamBrowLAngle',\n    ParamBrowRAngle: 'ParamBrowRAngle',\n    ParamBrowLForm: 'ParamBrowLForm',\n    ParamBrowRForm: 'ParamBrowRForm',\n    ParamMouthForm: 'ParamMouthForm',\n    ParamMouthOpenY: 'ParamMouthOpenY',\n    ParamCheek: 'ParamCheek',\n    ParamBodyAngleX: 'ParamBodyAngleX',\n    ParamBodyAngleY: 'ParamBodyAngleY',\n    ParamBodyAngleZ: 'ParamBodyAngleZ',\n    ParamBreath: 'ParamBreath',\n    ParamArmLA: 'ParamArmLA',\n    ParamArmRA: 'ParamArmRA',\n    ParamArmLB: 'ParamArmLB',\n    ParamArmRB: 'ParamArmRB',\n    ParamHandL: 'ParamHandL',\n    ParamHandR: 'ParamHandR',\n    ParamHairFront: 'ParamHairFront',\n    ParamHairSide: 'ParamHairSide',\n    ParamHairBack: 'ParamHairBack',\n    ParamHairFluffy: 'ParamHairFluffy',\n    ParamShoulderY: 'ParamShoulderY',\n    ParamBustX: 'ParamBustX',\n    ParamBustY: 'ParamBustY',\n    ParamBaseX: 'ParamBaseX',\n    ParamBaseY: 'ParamBaseY',\n    ParamNONE: 'NONE:'\n});\nvar $ = __importStar(__webpack_require__(/*! ./cubismdefaultparameterid */ \"./Framework/src/cubismdefaultparameterid.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.HitAreaBody = $.CubismDefaultParameterId.HitAreaBody;\n    Live2DCubismFramework.HitAreaHead = $.CubismDefaultParameterId.HitAreaHead;\n    Live2DCubismFramework.HitAreaPrefix = $.CubismDefaultParameterId.HitAreaPrefix;\n    Live2DCubismFramework.ParamAngleX = $.CubismDefaultParameterId.ParamAngleX;\n    Live2DCubismFramework.ParamAngleY = $.CubismDefaultParameterId.ParamAngleY;\n    Live2DCubismFramework.ParamAngleZ = $.CubismDefaultParameterId.ParamAngleZ;\n    Live2DCubismFramework.ParamArmLA = $.CubismDefaultParameterId.ParamArmLA;\n    Live2DCubismFramework.ParamArmLB = $.CubismDefaultParameterId.ParamArmLB;\n    Live2DCubismFramework.ParamArmRA = $.CubismDefaultParameterId.ParamArmRA;\n    Live2DCubismFramework.ParamArmRB = $.CubismDefaultParameterId.ParamArmRB;\n    Live2DCubismFramework.ParamBaseX = $.CubismDefaultParameterId.ParamBaseX;\n    Live2DCubismFramework.ParamBaseY = $.CubismDefaultParameterId.ParamBaseY;\n    Live2DCubismFramework.ParamBodyAngleX = $.CubismDefaultParameterId.ParamBodyAngleX;\n    Live2DCubismFramework.ParamBodyAngleY = $.CubismDefaultParameterId.ParamBodyAngleY;\n    Live2DCubismFramework.ParamBodyAngleZ = $.CubismDefaultParameterId.ParamBodyAngleZ;\n    Live2DCubismFramework.ParamBreath = $.CubismDefaultParameterId.ParamBreath;\n    Live2DCubismFramework.ParamBrowLAngle = $.CubismDefaultParameterId.ParamBrowLAngle;\n    Live2DCubismFramework.ParamBrowLForm = $.CubismDefaultParameterId.ParamBrowLForm;\n    Live2DCubismFramework.ParamBrowLX = $.CubismDefaultParameterId.ParamBrowLX;\n    Live2DCubismFramework.ParamBrowLY = $.CubismDefaultParameterId.ParamBrowLY;\n    Live2DCubismFramework.ParamBrowRAngle = $.CubismDefaultParameterId.ParamBrowRAngle;\n    Live2DCubismFramework.ParamBrowRForm = $.CubismDefaultParameterId.ParamBrowRForm;\n    Live2DCubismFramework.ParamBrowRX = $.CubismDefaultParameterId.ParamBrowRX;\n    Live2DCubismFramework.ParamBrowRY = $.CubismDefaultParameterId.ParamBrowRY;\n    Live2DCubismFramework.ParamBustX = $.CubismDefaultParameterId.ParamBustX;\n    Live2DCubismFramework.ParamBustY = $.CubismDefaultParameterId.ParamBustY;\n    Live2DCubismFramework.ParamCheek = $.CubismDefaultParameterId.ParamCheek;\n    Live2DCubismFramework.ParamEyeBallForm = $.CubismDefaultParameterId.ParamEyeBallForm;\n    Live2DCubismFramework.ParamEyeBallX = $.CubismDefaultParameterId.ParamEyeBallX;\n    Live2DCubismFramework.ParamEyeBallY = $.CubismDefaultParameterId.ParamEyeBallY;\n    Live2DCubismFramework.ParamEyeLOpen = $.CubismDefaultParameterId.ParamEyeLOpen;\n    Live2DCubismFramework.ParamEyeLSmile = $.CubismDefaultParameterId.ParamEyeLSmile;\n    Live2DCubismFramework.ParamEyeROpen = $.CubismDefaultParameterId.ParamEyeROpen;\n    Live2DCubismFramework.ParamEyeRSmile = $.CubismDefaultParameterId.ParamEyeRSmile;\n    Live2DCubismFramework.ParamHairBack = $.CubismDefaultParameterId.ParamHairBack;\n    Live2DCubismFramework.ParamHairFluffy = $.CubismDefaultParameterId.ParamHairFluffy;\n    Live2DCubismFramework.ParamHairFront = $.CubismDefaultParameterId.ParamHairFront;\n    Live2DCubismFramework.ParamHairSide = $.CubismDefaultParameterId.ParamHairSide;\n    Live2DCubismFramework.ParamHandL = $.CubismDefaultParameterId.ParamHandL;\n    Live2DCubismFramework.ParamHandR = $.CubismDefaultParameterId.ParamHandR;\n    Live2DCubismFramework.ParamMouthForm = $.CubismDefaultParameterId.ParamMouthForm;\n    Live2DCubismFramework.ParamMouthOpenY = $.CubismDefaultParameterId.ParamMouthOpenY;\n    Live2DCubismFramework.ParamNONE = $.CubismDefaultParameterId.ParamNONE;\n    Live2DCubismFramework.ParamShoulderY = $.CubismDefaultParameterId.ParamShoulderY;\n    Live2DCubismFramework.PartsArmLPrefix = $.CubismDefaultParameterId.PartsArmLPrefix;\n    Live2DCubismFramework.PartsArmPrefix = $.CubismDefaultParameterId.PartsArmPrefix;\n    Live2DCubismFramework.PartsArmRPrefix = $.CubismDefaultParameterId.PartsArmRPrefix;\n    Live2DCubismFramework.PartsIdCore = $.CubismDefaultParameterId.PartsIdCore;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2N1YmlzbWRlZmF1bHRwYXJhbWV0ZXJpZC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvY3ViaXNtZGVmYXVsdHBhcmFtZXRlcmlkLnRzPzEyODciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuLyoqXG4gKiBAYnJpZWYg44OR44Op44Oh44O844K/SUTjga7jg4fjg5Xjgqnjg6vjg4jlgKTjgpLkv53mjIHjgZnjgovlrprmlbA8YnI+XG4gKiAgICAgICAgIOODh+ODleOCqeODq+ODiOWApOOBruS7leanmOOBr+S7peS4i+OBruODnuODi+ODpeOCouODq+OBq+WfuuOBpeOBjzxicj5cbiAqICAgICAgICAgaHR0cHM6Ly9kb2NzLmxpdmUyZC5jb20vY3ViaXNtLWVkaXRvci1tYW51YWwvc3RhbmRhcmQtcGFyYW1ldG9yLWxpc3QvXG4gKi9cbmV4cG9ydCBjb25zdCBDdWJpc21EZWZhdWx0UGFyYW1ldGVySWQgPSBPYmplY3QuZnJlZXplPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHtcbiAgLy8g44OR44O844OESURcbiAgSGl0QXJlYVByZWZpeDogJ0hpdEFyZWEnLFxuICBIaXRBcmVhSGVhZDogJ0hlYWQnLFxuICBIaXRBcmVhQm9keTogJ0JvZHknLFxuICBQYXJ0c0lkQ29yZTogJ1BhcnRzMDFDb3JlJyxcbiAgUGFydHNBcm1QcmVmaXg6ICdQYXJ0czAxQXJtXycsXG4gIFBhcnRzQXJtTFByZWZpeDogJ1BhcnRzMDFBcm1MXycsXG4gIFBhcnRzQXJtUlByZWZpeDogJ1BhcnRzMDFBcm1SXycsXG4gIC8vIOODkeODqeODoeODvOOCv0lEXG4gIFBhcmFtQW5nbGVYOiAnUGFyYW1BbmdsZVgnLFxuICBQYXJhbUFuZ2xlWTogJ1BhcmFtQW5nbGVZJyxcbiAgUGFyYW1BbmdsZVo6ICdQYXJhbUFuZ2xlWicsXG4gIFBhcmFtRXllTE9wZW46ICdQYXJhbUV5ZUxPcGVuJyxcbiAgUGFyYW1FeWVMU21pbGU6ICdQYXJhbUV5ZUxTbWlsZScsXG4gIFBhcmFtRXllUk9wZW46ICdQYXJhbUV5ZVJPcGVuJyxcbiAgUGFyYW1FeWVSU21pbGU6ICdQYXJhbUV5ZVJTbWlsZScsXG4gIFBhcmFtRXllQmFsbFg6ICdQYXJhbUV5ZUJhbGxYJyxcbiAgUGFyYW1FeWVCYWxsWTogJ1BhcmFtRXllQmFsbFknLFxuICBQYXJhbUV5ZUJhbGxGb3JtOiAnUGFyYW1FeWVCYWxsRm9ybScsXG4gIFBhcmFtQnJvd0xZOiAnUGFyYW1Ccm93TFknLFxuICBQYXJhbUJyb3dSWTogJ1BhcmFtQnJvd1JZJyxcbiAgUGFyYW1Ccm93TFg6ICdQYXJhbUJyb3dMWCcsXG4gIFBhcmFtQnJvd1JYOiAnUGFyYW1Ccm93UlgnLFxuICBQYXJhbUJyb3dMQW5nbGU6ICdQYXJhbUJyb3dMQW5nbGUnLFxuICBQYXJhbUJyb3dSQW5nbGU6ICdQYXJhbUJyb3dSQW5nbGUnLFxuICBQYXJhbUJyb3dMRm9ybTogJ1BhcmFtQnJvd0xGb3JtJyxcbiAgUGFyYW1Ccm93UkZvcm06ICdQYXJhbUJyb3dSRm9ybScsXG4gIFBhcmFtTW91dGhGb3JtOiAnUGFyYW1Nb3V0aEZvcm0nLFxuICBQYXJhbU1vdXRoT3Blblk6ICdQYXJhbU1vdXRoT3BlblknLFxuICBQYXJhbUNoZWVrOiAnUGFyYW1DaGVlaycsXG4gIFBhcmFtQm9keUFuZ2xlWDogJ1BhcmFtQm9keUFuZ2xlWCcsXG4gIFBhcmFtQm9keUFuZ2xlWTogJ1BhcmFtQm9keUFuZ2xlWScsXG4gIFBhcmFtQm9keUFuZ2xlWjogJ1BhcmFtQm9keUFuZ2xlWicsXG4gIFBhcmFtQnJlYXRoOiAnUGFyYW1CcmVhdGgnLFxuICBQYXJhbUFybUxBOiAnUGFyYW1Bcm1MQScsXG4gIFBhcmFtQXJtUkE6ICdQYXJhbUFybVJBJyxcbiAgUGFyYW1Bcm1MQjogJ1BhcmFtQXJtTEInLFxuICBQYXJhbUFybVJCOiAnUGFyYW1Bcm1SQicsXG4gIFBhcmFtSGFuZEw6ICdQYXJhbUhhbmRMJyxcbiAgUGFyYW1IYW5kUjogJ1BhcmFtSGFuZFInLFxuICBQYXJhbUhhaXJGcm9udDogJ1BhcmFtSGFpckZyb250JyxcbiAgUGFyYW1IYWlyU2lkZTogJ1BhcmFtSGFpclNpZGUnLFxuICBQYXJhbUhhaXJCYWNrOiAnUGFyYW1IYWlyQmFjaycsXG4gIFBhcmFtSGFpckZsdWZmeTogJ1BhcmFtSGFpckZsdWZmeScsXG4gIFBhcmFtU2hvdWxkZXJZOiAnUGFyYW1TaG91bGRlclknLFxuICBQYXJhbUJ1c3RYOiAnUGFyYW1CdXN0WCcsXG4gIFBhcmFtQnVzdFk6ICdQYXJhbUJ1c3RZJyxcbiAgUGFyYW1CYXNlWDogJ1BhcmFtQmFzZVgnLFxuICBQYXJhbUJhc2VZOiAnUGFyYW1CYXNlWScsXG4gIFBhcmFtTk9ORTogJ05PTkU6J1xufSk7XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbWRlZmF1bHRwYXJhbWV0ZXJpZCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgSGl0QXJlYUJvZHkgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5IaXRBcmVhQm9keTtcbiAgZXhwb3J0IGNvbnN0IEhpdEFyZWFIZWFkID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuSGl0QXJlYUhlYWQ7XG4gIGV4cG9ydCBjb25zdCBIaXRBcmVhUHJlZml4ID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuSGl0QXJlYVByZWZpeDtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQW5nbGVYID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1BbmdsZVg7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUFuZ2xlWSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQW5nbGVZO1xuICBleHBvcnQgY29uc3QgUGFyYW1BbmdsZVogPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUFuZ2xlWjtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQXJtTEEgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUFybUxBO1xuICBleHBvcnQgY29uc3QgUGFyYW1Bcm1MQiA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQXJtTEI7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUFybVJBID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1Bcm1SQTtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQXJtUkIgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUFybVJCO1xuICBleHBvcnQgY29uc3QgUGFyYW1CYXNlWCA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQmFzZVg7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUJhc2VZID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1CYXNlWTtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQm9keUFuZ2xlWCA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQm9keUFuZ2xlWDtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQm9keUFuZ2xlWSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQm9keUFuZ2xlWTtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQm9keUFuZ2xlWiA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQm9keUFuZ2xlWjtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQnJlYXRoID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1CcmVhdGg7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUJyb3dMQW5nbGUgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUJyb3dMQW5nbGU7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUJyb3dMRm9ybSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQnJvd0xGb3JtO1xuICBleHBvcnQgY29uc3QgUGFyYW1Ccm93TFggPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUJyb3dMWDtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQnJvd0xZID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1Ccm93TFk7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUJyb3dSQW5nbGUgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUJyb3dSQW5nbGU7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUJyb3dSRm9ybSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQnJvd1JGb3JtO1xuICBleHBvcnQgY29uc3QgUGFyYW1Ccm93UlggPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUJyb3dSWDtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQnJvd1JZID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1Ccm93Ulk7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUJ1c3RYID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1CdXN0WDtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtQnVzdFkgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUJ1c3RZO1xuICBleHBvcnQgY29uc3QgUGFyYW1DaGVlayA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtQ2hlZWs7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUV5ZUJhbGxGb3JtID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1FeWVCYWxsRm9ybTtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtRXllQmFsbFggPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUV5ZUJhbGxYO1xuICBleHBvcnQgY29uc3QgUGFyYW1FeWVCYWxsWSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtRXllQmFsbFk7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUV5ZUxPcGVuID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1FeWVMT3BlbjtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtRXllTFNtaWxlID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1FeWVMU21pbGU7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUV5ZVJPcGVuID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1FeWVST3BlbjtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtRXllUlNtaWxlID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1FeWVSU21pbGU7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUhhaXJCYWNrID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1IYWlyQmFjaztcbiAgZXhwb3J0IGNvbnN0IFBhcmFtSGFpckZsdWZmeSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtSGFpckZsdWZmeTtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtSGFpckZyb250ID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1IYWlyRnJvbnQ7XG4gIGV4cG9ydCBjb25zdCBQYXJhbUhhaXJTaWRlID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1IYWlyU2lkZTtcbiAgZXhwb3J0IGNvbnN0IFBhcmFtSGFuZEwgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUhhbmRMO1xuICBleHBvcnQgY29uc3QgUGFyYW1IYW5kUiA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtSGFuZFI7XG4gIGV4cG9ydCBjb25zdCBQYXJhbU1vdXRoRm9ybSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtTW91dGhGb3JtO1xuICBleHBvcnQgY29uc3QgUGFyYW1Nb3V0aE9wZW5ZID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1Nb3V0aE9wZW5ZO1xuICBleHBvcnQgY29uc3QgUGFyYW1OT05FID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1OT05FO1xuICBleHBvcnQgY29uc3QgUGFyYW1TaG91bGRlclkgPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbVNob3VsZGVyWTtcbiAgZXhwb3J0IGNvbnN0IFBhcnRzQXJtTFByZWZpeCA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcnRzQXJtTFByZWZpeDtcbiAgZXhwb3J0IGNvbnN0IFBhcnRzQXJtUHJlZml4ID0gJC5DdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFydHNBcm1QcmVmaXg7XG4gIGV4cG9ydCBjb25zdCBQYXJ0c0FybVJQcmVmaXggPSAkLkN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJ0c0FybVJQcmVmaXg7XG4gIGV4cG9ydCBjb25zdCBQYXJ0c0lkQ29yZSA9ICQuQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcnRzSWRDb3JlO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBWUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/cubismdefaultparameterid.ts\n");

/***/ }),

/***/ "./Framework/src/cubismframeworkconfig.ts":
/*!************************************************!*\
  !*** ./Framework/src/cubismframeworkconfig.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CSM_LOG_LEVEL = exports.CSM_LOG_LEVEL_OFF = exports.CSM_LOG_LEVEL_ERROR = exports.CSM_LOG_LEVEL_WARNING = exports.CSM_LOG_LEVEL_INFO = exports.CSM_LOG_LEVEL_DEBUG = exports.CSM_LOG_LEVEL_VERBOSE = void 0;\nexports.CSM_LOG_LEVEL_VERBOSE = 0;\nexports.CSM_LOG_LEVEL_DEBUG = 1;\nexports.CSM_LOG_LEVEL_INFO = 2;\nexports.CSM_LOG_LEVEL_WARNING = 3;\nexports.CSM_LOG_LEVEL_ERROR = 4;\nexports.CSM_LOG_LEVEL_OFF = 5;\nexports.CSM_LOG_LEVEL = exports.CSM_LOG_LEVEL_VERBOSE;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2N1YmlzbWZyYW1ld29ya2NvbmZpZy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvY3ViaXNtZnJhbWV3b3JrY29uZmlnLnRzP2U4MGYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gIOODreOCsOWHuuWKm+mWouaVsOOBruioreWumlxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLy0tLS0tLS0tLS0g44Ot44Kw5Ye65Yqb44Os44OZ44OrIOmBuOaKnumgheebriDlrprnvqkgLS0tLS0tLS0tLVxuLy8g6Kmz57Sw44Ot44Kw5Ye65Yqb6Kit5a6aXG5leHBvcnQgY29uc3QgQ1NNX0xPR19MRVZFTF9WRVJCT1NFID0gMDtcbi8vIOODh+ODkOODg+OCsOODreOCsOWHuuWKm+ioreWumlxuZXhwb3J0IGNvbnN0IENTTV9MT0dfTEVWRUxfREVCVUcgPSAxO1xuLy8gSW5mb+ODreOCsOWHuuWKm+ioreWumlxuZXhwb3J0IGNvbnN0IENTTV9MT0dfTEVWRUxfSU5GTyA9IDI7XG4vLyDorablkYrjg63jgrDlh7rlipvoqK3lrppcbmV4cG9ydCBjb25zdCBDU01fTE9HX0xFVkVMX1dBUk5JTkcgPSAzO1xuLy8g44Ko44Op44O844Ot44Kw5Ye65Yqb6Kit5a6aXG5leHBvcnQgY29uc3QgQ1NNX0xPR19MRVZFTF9FUlJPUiA9IDQ7XG4vLyDjg63jgrDlh7rlipvjgqrjg5XoqK3lrppcbmV4cG9ydCBjb25zdCBDU01fTE9HX0xFVkVMX09GRiA9IDU7XG5cbi8qKlxuICog44Ot44Kw5Ye65Yqb44Os44OZ44Or6Kit5a6a44CCXG4gKlxuICog5by35Yi255qE44Gr44Ot44Kw5Ye65Yqb44Os44OZ44Or44KS5aSJ44GI44KL5pmC44Gr5a6a576p44KS5pyJ5Yq544Gr44GZ44KL44CCXG4gKiBDU01fTE9HX0xFVkVMX1ZFUkJPU0Ug772eIENTTV9MT0dfTEVWRUxfT0ZGIOOCkumBuOaKnuOBmeOCi+OAglxuICovXG5leHBvcnQgY29uc3QgQ1NNX0xPR19MRVZFTDogbnVtYmVyID0gQ1NNX0xPR19MRVZFTF9WRVJCT1NFO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFhQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFRQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/cubismframeworkconfig.ts\n");

/***/ }),

/***/ "./Framework/src/cubismmodelsettingjson.ts":
/*!*************************************************!*\
  !*** ./Framework/src/cubismmodelsettingjson.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismModelSettingJson = void 0;\nvar icubismmodelsetting_1 = __webpack_require__(/*! ./icubismmodelsetting */ \"./Framework/src/icubismmodelsetting.ts\");\nvar live2dcubismframework_1 = __webpack_require__(/*! ./live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar csmvector_1 = __webpack_require__(/*! ./type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ./utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nvar Version = 'Version';\nvar FileReferences = 'FileReferences';\nvar Groups = 'Groups';\nvar Layout = 'Layout';\nvar HitAreas = 'HitAreas';\nvar Moc = 'Moc';\nvar Textures = 'Textures';\nvar Physics = 'Physics';\nvar Pose = 'Pose';\nvar Expressions = 'Expressions';\nvar Motions = 'Motions';\nvar UserData = 'UserData';\nvar Name = 'Name';\nvar FilePath = 'File';\nvar Id = 'Id';\nvar Ids = 'Ids';\nvar Target = 'Target';\nvar Idle = 'Idle';\nvar TapBody = 'TapBody';\nvar PinchIn = 'PinchIn';\nvar PinchOut = 'PinchOut';\nvar Shake = 'Shake';\nvar FlickHead = 'FlickHead';\nvar Parameter = 'Parameter';\nvar SoundPath = 'Sound';\nvar FadeInTime = 'FadeInTime';\nvar FadeOutTime = 'FadeOutTime';\nvar CenterX = 'CenterX';\nvar CenterY = 'CenterY';\nvar X = 'X';\nvar Y = 'Y';\nvar Width = 'Width';\nvar Height = 'Height';\nvar LipSync = 'LipSync';\nvar EyeBlink = 'EyeBlink';\nvar InitParameter = 'init_param';\nvar InitPartsVisible = 'init_parts_visible';\nvar Val = 'val';\nvar FrequestNode;\n(function (FrequestNode) {\n    FrequestNode[FrequestNode[\"FrequestNode_Groups\"] = 0] = \"FrequestNode_Groups\";\n    FrequestNode[FrequestNode[\"FrequestNode_Moc\"] = 1] = \"FrequestNode_Moc\";\n    FrequestNode[FrequestNode[\"FrequestNode_Motions\"] = 2] = \"FrequestNode_Motions\";\n    FrequestNode[FrequestNode[\"FrequestNode_Expressions\"] = 3] = \"FrequestNode_Expressions\";\n    FrequestNode[FrequestNode[\"FrequestNode_Textures\"] = 4] = \"FrequestNode_Textures\";\n    FrequestNode[FrequestNode[\"FrequestNode_Physics\"] = 5] = \"FrequestNode_Physics\";\n    FrequestNode[FrequestNode[\"FrequestNode_Pose\"] = 6] = \"FrequestNode_Pose\";\n    FrequestNode[FrequestNode[\"FrequestNode_HitAreas\"] = 7] = \"FrequestNode_HitAreas\";\n})(FrequestNode || (FrequestNode = {}));\nvar CubismModelSettingJson = (function (_super) {\n    __extends(CubismModelSettingJson, _super);\n    function CubismModelSettingJson(buffer, size) {\n        var _this = _super.call(this) || this;\n        _this._json = cubismjson_1.CubismJson.create(buffer, size);\n        if (_this._json) {\n            _this._jsonValue = new csmvector_1.csmVector();\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(Groups));\n            _this._jsonValue.pushBack(_this._json\n                .getRoot()\n                .getValueByString(FileReferences)\n                .getValueByString(Moc));\n            _this._jsonValue.pushBack(_this._json\n                .getRoot()\n                .getValueByString(FileReferences)\n                .getValueByString(Motions));\n            _this._jsonValue.pushBack(_this._json\n                .getRoot()\n                .getValueByString(FileReferences)\n                .getValueByString(Expressions));\n            _this._jsonValue.pushBack(_this._json\n                .getRoot()\n                .getValueByString(FileReferences)\n                .getValueByString(Textures));\n            _this._jsonValue.pushBack(_this._json\n                .getRoot()\n                .getValueByString(FileReferences)\n                .getValueByString(Physics));\n            _this._jsonValue.pushBack(_this._json\n                .getRoot()\n                .getValueByString(FileReferences)\n                .getValueByString(Pose));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(HitAreas));\n        }\n        return _this;\n    }\n    CubismModelSettingJson.prototype.release = function () {\n        cubismjson_1.CubismJson.delete(this._json);\n        this._jsonValue = null;\n    };\n    CubismModelSettingJson.prototype.GetJson = function () {\n        return this._json;\n    };\n    CubismModelSettingJson.prototype.getModelFileName = function () {\n        if (!this.isExistModelFile()) {\n            return '';\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Moc).getRawString();\n    };\n    CubismModelSettingJson.prototype.getTextureCount = function () {\n        if (!this.isExistTextureFiles()) {\n            return 0;\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getSize();\n    };\n    CubismModelSettingJson.prototype.getTextureDirectory = function () {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Textures)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getTextureFileName = function (index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Textures)\n            .getValueByIndex(index)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getHitAreasCount = function () {\n        if (!this.isExistHitAreas()) {\n            return 0;\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getSize();\n    };\n    CubismModelSettingJson.prototype.getHitAreaId = function (index) {\n        return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._jsonValue\n            .at(FrequestNode.FrequestNode_HitAreas)\n            .getValueByIndex(index)\n            .getValueByString(Id)\n            .getRawString());\n    };\n    CubismModelSettingJson.prototype.getHitAreaName = function (index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_HitAreas)\n            .getValueByIndex(index)\n            .getValueByString(Name)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getPhysicsFileName = function () {\n        if (!this.isExistPhysicsFile()) {\n            return '';\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Physics).getRawString();\n    };\n    CubismModelSettingJson.prototype.getPoseFileName = function () {\n        if (!this.isExistPoseFile()) {\n            return '';\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Pose).getRawString();\n    };\n    CubismModelSettingJson.prototype.getExpressionCount = function () {\n        if (!this.isExistExpressionFile()) {\n            return 0;\n        }\n        return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getSize();\n    };\n    CubismModelSettingJson.prototype.getExpressionName = function (index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Expressions)\n            .getValueByIndex(index)\n            .getValueByString(Name)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getExpressionFileName = function (index) {\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Expressions)\n            .getValueByIndex(index)\n            .getValueByString(FilePath)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getMotionGroupCount = function () {\n        if (!this.isExistMotionGroups()) {\n            return 0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getKeys()\n            .getSize();\n    };\n    CubismModelSettingJson.prototype.getMotionGroupName = function (index) {\n        if (!this.isExistMotionGroups()) {\n            return null;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getKeys()\n            .at(index);\n    };\n    CubismModelSettingJson.prototype.getMotionCount = function (groupName) {\n        if (!this.isExistMotionGroupName(groupName)) {\n            return 0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getSize();\n    };\n    CubismModelSettingJson.prototype.getMotionFileName = function (groupName, index) {\n        if (!this.isExistMotionGroupName(groupName)) {\n            return '';\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(FilePath)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getMotionSoundFileName = function (groupName, index) {\n        if (!this.isExistMotionSoundFile(groupName, index)) {\n            return '';\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(SoundPath)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getMotionFadeInTimeValue = function (groupName, index) {\n        if (!this.isExistMotionFadeIn(groupName, index)) {\n            return -1.0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(FadeInTime)\n            .toFloat();\n    };\n    CubismModelSettingJson.prototype.getMotionFadeOutTimeValue = function (groupName, index) {\n        if (!this.isExistMotionFadeOut(groupName, index)) {\n            return -1.0;\n        }\n        return this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(FadeOutTime)\n            .toFloat();\n    };\n    CubismModelSettingJson.prototype.getUserDataFile = function () {\n        if (!this.isExistUserDataFile()) {\n            return '';\n        }\n        return this._json\n            .getRoot()\n            .getValueByString(FileReferences)\n            .getValueByString(UserData)\n            .getRawString();\n    };\n    CubismModelSettingJson.prototype.getLayoutMap = function (outLayoutMap) {\n        var map = this._json\n            .getRoot()\n            .getValueByString(Layout)\n            .getMap();\n        if (map == null) {\n            return false;\n        }\n        var ret = false;\n        for (var ite = map.begin(); ite.notEqual(map.end()); ite.preIncrement()) {\n            outLayoutMap.setValue(ite.ptr().first, ite.ptr().second.toFloat());\n            ret = true;\n        }\n        return ret;\n    };\n    CubismModelSettingJson.prototype.getEyeBlinkParameterCount = function () {\n        if (!this.isExistEyeBlinkParameters()) {\n            return 0;\n        }\n        var num = 0;\n        for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == EyeBlink) {\n                num = refI\n                    .getValueByString(Ids)\n                    .getVector()\n                    .getSize();\n                break;\n            }\n        }\n        return num;\n    };\n    CubismModelSettingJson.prototype.getEyeBlinkParameterId = function (index) {\n        if (!this.isExistEyeBlinkParameters()) {\n            return null;\n        }\n        for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == EyeBlink) {\n                return live2dcubismframework_1.CubismFramework.getIdManager().getId(refI\n                    .getValueByString(Ids)\n                    .getValueByIndex(index)\n                    .getRawString());\n            }\n        }\n        return null;\n    };\n    CubismModelSettingJson.prototype.getLipSyncParameterCount = function () {\n        if (!this.isExistLipSyncParameters()) {\n            return 0;\n        }\n        var num = 0;\n        for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == LipSync) {\n                num = refI\n                    .getValueByString(Ids)\n                    .getVector()\n                    .getSize();\n                break;\n            }\n        }\n        return num;\n    };\n    CubismModelSettingJson.prototype.getLipSyncParameterId = function (index) {\n        if (!this.isExistLipSyncParameters()) {\n            return null;\n        }\n        for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n                continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == LipSync) {\n                return live2dcubismframework_1.CubismFramework.getIdManager().getId(refI\n                    .getValueByString(Ids)\n                    .getValueByIndex(index)\n                    .getRawString());\n            }\n        }\n        return null;\n    };\n    CubismModelSettingJson.prototype.isExistModelFile = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_Moc);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistTextureFiles = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_Textures);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistHitAreas = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_HitAreas);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistPhysicsFile = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_Physics);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistPoseFile = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_Pose);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistExpressionFile = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_Expressions);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistMotionGroups = function () {\n        var node = this._jsonValue.at(FrequestNode.FrequestNode_Motions);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistMotionGroupName = function (groupName) {\n        var node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistMotionSoundFile = function (groupName, index) {\n        var node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(SoundPath);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistMotionFadeIn = function (groupName, index) {\n        var node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(FadeInTime);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistMotionFadeOut = function (groupName, index) {\n        var node = this._jsonValue\n            .at(FrequestNode.FrequestNode_Motions)\n            .getValueByString(groupName)\n            .getValueByIndex(index)\n            .getValueByString(FadeOutTime);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistUserDataFile = function () {\n        var node = this._json\n            .getRoot()\n            .getValueByString(FileReferences)\n            .getValueByString(UserData);\n        return !node.isNull() && !node.isError();\n    };\n    CubismModelSettingJson.prototype.isExistEyeBlinkParameters = function () {\n        if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\n            this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()) {\n            return false;\n        }\n        for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); ++i) {\n            if (this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i)\n                .getValueByString(Name)\n                .getRawString() == EyeBlink) {\n                return true;\n            }\n        }\n        return false;\n    };\n    CubismModelSettingJson.prototype.isExistLipSyncParameters = function () {\n        if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\n            this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()) {\n            return false;\n        }\n        for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); ++i) {\n            if (this._jsonValue\n                .at(FrequestNode.FrequestNode_Groups)\n                .getValueByIndex(i)\n                .getValueByString(Name)\n                .getRawString() == LipSync) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return CubismModelSettingJson;\n}(icubismmodelsetting_1.ICubismModelSetting));\nexports.CubismModelSettingJson = CubismModelSettingJson;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmodelsettingjson */ \"./Framework/src/cubismmodelsettingjson.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelSettingJson = $.CubismModelSettingJson;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2N1YmlzbW1vZGVsc2V0dGluZ2pzb24udHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL2N1YmlzbW1vZGVsc2V0dGluZ2pzb24udHM/M2U2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBJQ3ViaXNtTW9kZWxTZXR0aW5nIH0gZnJvbSAnLi9pY3ViaXNtbW9kZWxzZXR0aW5nJztcbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi9pZC9jdWJpc21pZCc7XG5pbXBvcnQgeyBDdWJpc21GcmFtZXdvcmsgfSBmcm9tICcuL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgeyBjc21NYXAsIGl0ZXJhdG9yIH0gZnJvbSAnLi90eXBlL2NzbW1hcCc7XG5pbXBvcnQgeyBjc21WZWN0b3IgfSBmcm9tICcuL3R5cGUvY3NtdmVjdG9yJztcbmltcG9ydCB7IEN1YmlzbUpzb24sIFZhbHVlIH0gZnJvbSAnLi91dGlscy9jdWJpc21qc29uJztcblxuLyoqXG4gKiBNb2RlbDNKc29u44Gu44Kt44O85paH5a2X5YiXXG4gKi9cblxuLy8gSlNPTiBLZXlzXG5jb25zdCBWZXJzaW9uID0gJ1ZlcnNpb24nO1xuY29uc3QgRmlsZVJlZmVyZW5jZXMgPSAnRmlsZVJlZmVyZW5jZXMnO1xuY29uc3QgR3JvdXBzID0gJ0dyb3Vwcyc7XG5jb25zdCBMYXlvdXQgPSAnTGF5b3V0JztcbmNvbnN0IEhpdEFyZWFzID0gJ0hpdEFyZWFzJztcblxuY29uc3QgTW9jID0gJ01vYyc7XG5jb25zdCBUZXh0dXJlcyA9ICdUZXh0dXJlcyc7XG5jb25zdCBQaHlzaWNzID0gJ1BoeXNpY3MnO1xuY29uc3QgUG9zZSA9ICdQb3NlJztcbmNvbnN0IEV4cHJlc3Npb25zID0gJ0V4cHJlc3Npb25zJztcbmNvbnN0IE1vdGlvbnMgPSAnTW90aW9ucyc7XG5cbmNvbnN0IFVzZXJEYXRhID0gJ1VzZXJEYXRhJztcbmNvbnN0IE5hbWUgPSAnTmFtZSc7XG5jb25zdCBGaWxlUGF0aCA9ICdGaWxlJztcbmNvbnN0IElkID0gJ0lkJztcbmNvbnN0IElkcyA9ICdJZHMnO1xuY29uc3QgVGFyZ2V0ID0gJ1RhcmdldCc7XG5cbi8vIE1vdGlvbnNcbmNvbnN0IElkbGUgPSAnSWRsZSc7XG5jb25zdCBUYXBCb2R5ID0gJ1RhcEJvZHknO1xuY29uc3QgUGluY2hJbiA9ICdQaW5jaEluJztcbmNvbnN0IFBpbmNoT3V0ID0gJ1BpbmNoT3V0JztcbmNvbnN0IFNoYWtlID0gJ1NoYWtlJztcbmNvbnN0IEZsaWNrSGVhZCA9ICdGbGlja0hlYWQnO1xuY29uc3QgUGFyYW1ldGVyID0gJ1BhcmFtZXRlcic7XG5cbmNvbnN0IFNvdW5kUGF0aCA9ICdTb3VuZCc7XG5jb25zdCBGYWRlSW5UaW1lID0gJ0ZhZGVJblRpbWUnO1xuY29uc3QgRmFkZU91dFRpbWUgPSAnRmFkZU91dFRpbWUnO1xuXG4vLyBMYXlvdXRcbmNvbnN0IENlbnRlclggPSAnQ2VudGVyWCc7XG5jb25zdCBDZW50ZXJZID0gJ0NlbnRlclknO1xuY29uc3QgWCA9ICdYJztcbmNvbnN0IFkgPSAnWSc7XG5jb25zdCBXaWR0aCA9ICdXaWR0aCc7XG5jb25zdCBIZWlnaHQgPSAnSGVpZ2h0JztcblxuY29uc3QgTGlwU3luYyA9ICdMaXBTeW5jJztcbmNvbnN0IEV5ZUJsaW5rID0gJ0V5ZUJsaW5rJztcblxuY29uc3QgSW5pdFBhcmFtZXRlciA9ICdpbml0X3BhcmFtJztcbmNvbnN0IEluaXRQYXJ0c1Zpc2libGUgPSAnaW5pdF9wYXJ0c192aXNpYmxlJztcbmNvbnN0IFZhbCA9ICd2YWwnO1xuXG5lbnVtIEZyZXF1ZXN0Tm9kZSB7XG4gIEZyZXF1ZXN0Tm9kZV9Hcm91cHMsIC8vIGdldFJvb3QoKS5nZXRWYWx1ZUJ5U3RyaW5nKEdyb3VwcylcbiAgRnJlcXVlc3ROb2RlX01vYywgLy8gZ2V0Um9vdCgpLmdldFZhbHVlQnlTdHJpbmcoRmlsZVJlZmVyZW5jZXMpLmdldFZhbHVlQnlTdHJpbmcoTW9jKVxuICBGcmVxdWVzdE5vZGVfTW90aW9ucywgLy8gZ2V0Um9vdCgpLmdldFZhbHVlQnlTdHJpbmcoRmlsZVJlZmVyZW5jZXMpLmdldFZhbHVlQnlTdHJpbmcoTW90aW9ucylcbiAgRnJlcXVlc3ROb2RlX0V4cHJlc3Npb25zLCAvLyBnZXRSb290KCkuZ2V0VmFsdWVCeVN0cmluZyhGaWxlUmVmZXJlbmNlcykuZ2V0VmFsdWVCeVN0cmluZyhFeHByZXNzaW9ucylcbiAgRnJlcXVlc3ROb2RlX1RleHR1cmVzLCAvLyBnZXRSb290KCkuZ2V0VmFsdWVCeVN0cmluZyhGaWxlUmVmZXJlbmNlcykuZ2V0VmFsdWVCeVN0cmluZyhUZXh0dXJlcylcbiAgRnJlcXVlc3ROb2RlX1BoeXNpY3MsIC8vIGdldFJvb3QoKS5nZXRWYWx1ZUJ5U3RyaW5nKEZpbGVSZWZlcmVuY2VzKS5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3MpXG4gIEZyZXF1ZXN0Tm9kZV9Qb3NlLCAvLyBnZXRSb290KCkuZ2V0VmFsdWVCeVN0cmluZyhGaWxlUmVmZXJlbmNlcykuZ2V0VmFsdWVCeVN0cmluZyhQb3NlKVxuICBGcmVxdWVzdE5vZGVfSGl0QXJlYXMgLy8gZ2V0Um9vdCgpLmdldFZhbHVlQnlTdHJpbmcoSGl0QXJlYXMpXG59XG5cbi8qKlxuICogTW9kZWwzSnNvbuODkeODvOOCteODvFxuICpcbiAqIG1vZGVsMy5qc29u44OV44Kh44Kk44Or44KS44OR44O844K544GX44Gm5YCk44KS5Y+W5b6X44GZ44KLXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21Nb2RlbFNldHRpbmdKc29uIGV4dGVuZHMgSUN1YmlzbU1vZGVsU2V0dGluZyB7XG4gIC8qKlxuICAgKiDlvJXmlbDku5jjgY3jgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICpcbiAgICogQHBhcmFtIGJ1ZmZlciAgICBNb2RlbDNKc29u44KS44OQ44Kk44OI6YWN5YiX44Go44GX44Gm6Kqt44G/6L6844KT44Gg44OH44O844K/44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplICAgICAgTW9kZWwzSnNvbuOBruODh+ODvOOCv+OCteOCpOOCulxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIHNpemU6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fanNvbiA9IEN1YmlzbUpzb24uY3JlYXRlKGJ1ZmZlciwgc2l6ZSk7XG5cbiAgICBpZiAodGhpcy5fanNvbikge1xuICAgICAgdGhpcy5fanNvblZhbHVlID0gbmV3IGNzbVZlY3RvcjxWYWx1ZT4oKTtcblxuICAgICAgLy8g6aCG55Wq44GvZW51bSBGcmVxdWVzdE5vZGXjgajkuIDoh7TjgZXjgZvjgotcbiAgICAgIHRoaXMuX2pzb25WYWx1ZS5wdXNoQmFjayh0aGlzLl9qc29uLmdldFJvb3QoKS5nZXRWYWx1ZUJ5U3RyaW5nKEdyb3VwcykpO1xuICAgICAgdGhpcy5fanNvblZhbHVlLnB1c2hCYWNrKFxuICAgICAgICB0aGlzLl9qc29uXG4gICAgICAgICAgLmdldFJvb3QoKVxuICAgICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZpbGVSZWZlcmVuY2VzKVxuICAgICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1vYylcbiAgICAgICk7XG4gICAgICB0aGlzLl9qc29uVmFsdWUucHVzaEJhY2soXG4gICAgICAgIHRoaXMuX2pzb25cbiAgICAgICAgICAuZ2V0Um9vdCgpXG4gICAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmlsZVJlZmVyZW5jZXMpXG4gICAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTW90aW9ucylcbiAgICAgICk7XG4gICAgICB0aGlzLl9qc29uVmFsdWUucHVzaEJhY2soXG4gICAgICAgIHRoaXMuX2pzb25cbiAgICAgICAgICAuZ2V0Um9vdCgpXG4gICAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmlsZVJlZmVyZW5jZXMpXG4gICAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRXhwcmVzc2lvbnMpXG4gICAgICApO1xuICAgICAgdGhpcy5fanNvblZhbHVlLnB1c2hCYWNrKFxuICAgICAgICB0aGlzLl9qc29uXG4gICAgICAgICAgLmdldFJvb3QoKVxuICAgICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZpbGVSZWZlcmVuY2VzKVxuICAgICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFRleHR1cmVzKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2pzb25WYWx1ZS5wdXNoQmFjayhcbiAgICAgICAgdGhpcy5fanNvblxuICAgICAgICAgIC5nZXRSb290KClcbiAgICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGaWxlUmVmZXJlbmNlcylcbiAgICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2pzb25WYWx1ZS5wdXNoQmFjayhcbiAgICAgICAgdGhpcy5fanNvblxuICAgICAgICAgIC5nZXRSb290KClcbiAgICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGaWxlUmVmZXJlbmNlcylcbiAgICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQb3NlKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2pzb25WYWx1ZS5wdXNoQmFjayh0aGlzLl9qc29uLmdldFJvb3QoKS5nZXRWYWx1ZUJ5U3RyaW5nKEhpdEFyZWFzKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv+ebuOW9k+OBruWHpueQhlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgQ3ViaXNtSnNvbi5kZWxldGUodGhpcy5fanNvbik7XG5cbiAgICB0aGlzLl9qc29uVmFsdWUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEN1YmlzbUpzb27jgqrjg5bjgrjjgqfjgq/jg4jjgpLlj5blvpfjgZnjgotcbiAgICpcbiAgICogQHJldHVybiBDdWJpc21Kc29uXG4gICAqL1xuICBwdWJsaWMgR2V0SnNvbigpOiBDdWJpc21Kc29uIHtcbiAgICByZXR1cm4gdGhpcy5fanNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2Pjg5XjgqHjgqTjg6vjga7lkI3liY3jgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiBNb2Pjg5XjgqHjgqTjg6vjga7lkI3liY1cbiAgICovXG4gIHB1YmxpYyBnZXRNb2RlbEZpbGVOYW1lKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RNb2RlbEZpbGUoKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfTW9jKS5nZXRSYXdTdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgYzkvb/nlKjjgZnjgovjg4bjgq/jgrnjg4Hjg6Pjga7mlbDjgpLlj5blvpfjgZnjgotcbiAgICog44OG44Kv44K544OB44Oj44Gu5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0VGV4dHVyZUNvdW50KCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RUZXh0dXJlRmlsZXMoKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX1RleHR1cmVzKS5nZXRTaXplKCk7XG4gIH1cblxuICAvKipcbiAgICog44OG44Kv44K544OB44Oj44GM6YWN572u44GV44KM44Gf44OH44Kj44Os44Kv44OI44Oq44Gu5ZCN5YmN44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44OG44Kv44K544OB44Oj44GM6YWN572u44GV44KM44Gf44OH44Kj44Os44Kv44OI44Oq44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0VGV4dHVyZURpcmVjdG9yeSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9qc29uVmFsdWVcbiAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX1RleHR1cmVzKVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBjOS9v+eUqOOBmeOCi+ODhuOCr+OCueODgeODo+OBruWQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44OG44Kv44K544OB44Oj44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0VGV4dHVyZUZpbGVOYW1lKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9qc29uVmFsdWVcbiAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX1RleHR1cmVzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbmRleClcbiAgICAgIC5nZXRSYXdTdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgavoqK3lrprjgZXjgozjgZ/lvZPjgZ/jgorliKTlrprjga7mlbDjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg6Ljg4fjg6vjgavoqK3lrprjgZXjgozjgZ/lvZPjgZ/jgorliKTlrprjga7mlbBcbiAgICovXG4gIHB1YmxpYyBnZXRIaXRBcmVhc0NvdW50KCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RIaXRBcmVhcygpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfSGl0QXJlYXMpLmdldFNpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvZPjgZ/jgorliKTlrprjgavoqK3lrprjgZXjgozjgZ9JROOCkuWPluW+l+OBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44GuaW5kZXhcbiAgICogQHJldHVybiDlvZPjgZ/jgorliKTlrprjgavoqK3lrprjgZXjgozjgZ9JRFxuICAgKi9cbiAgcHVibGljIGdldEhpdEFyZWFJZChpbmRleDogbnVtYmVyKTogQ3ViaXNtSWRIYW5kbGUge1xuICAgIHJldHVybiBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoXG4gICAgICB0aGlzLl9qc29uVmFsdWVcbiAgICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfSGl0QXJlYXMpXG4gICAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoaW5kZXgpXG4gICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKElkKVxuICAgICAgICAuZ2V0UmF3U3RyaW5nKClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOW9k+OBn+OCiuWIpOWumuOBq+ioreWumuOBleOCjOOBn+WQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g5b2T44Gf44KK5Yik5a6a44Gr6Kit5a6a44GV44KM44Gf5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0SGl0QXJlYU5hbWUoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25WYWx1ZVxuICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfSGl0QXJlYXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KGluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTmFtZSlcbiAgICAgIC5nZXRSYXdTdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDniannkIbmvJTnrpfoqK3lrprjg5XjgqHjgqTjg6vjga7lkI3liY3jgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDniannkIbmvJTnrpfoqK3lrprjg5XjgqHjgqTjg6vjga7lkI3liY1cbiAgICovXG4gIHB1YmxpYyBnZXRQaHlzaWNzRmlsZU5hbWUoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuaXNFeGlzdFBoeXNpY3NGaWxlKCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfUGh5c2ljcykuZ2V0UmF3U3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICog44OR44O844OE5YiH44KK5pu/44GI6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmN44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44OR44O844OE5YiH44KK5pu/44GI6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0UG9zZUZpbGVOYW1lKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RQb3NlRmlsZSgpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX1Bvc2UpLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOihqOaDheioreWumuODleOCoeOCpOODq+OBruaVsOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOihqOaDheioreWumuODleOCoeOCpOODq+OBruaVsFxuICAgKi9cbiAgcHVibGljIGdldEV4cHJlc3Npb25Db3VudCgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5pc0V4aXN0RXhwcmVzc2lvbkZpbGUoKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0V4cHJlc3Npb25zKS5nZXRTaXplKCk7XG4gIH1cblxuICAvKipcbiAgICog6KGo5oOF6Kit5a6a44OV44Kh44Kk44Or44KS6K2Y5Yil44GZ44KL5ZCN5YmN77yI5Yil5ZCN77yJ44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBpbmRleCDphY3liJfjga7jgqTjg7Pjg4fjg4Pjgq/jgrnlgKRcbiAgICogQHJldHVybiDooajmg4Xjga7lkI3liY1cbiAgICovXG4gIHB1YmxpYyBnZXRFeHByZXNzaW9uTmFtZShpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlXG4gICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9FeHByZXNzaW9ucylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoaW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhOYW1lKVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOihqOaDheioreWumuODleOCoeOCpOODq+OBruWQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g6KGo5oOF6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0RXhwcmVzc2lvbkZpbGVOYW1lKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9qc29uVmFsdWVcbiAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0V4cHJlc3Npb25zKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZpbGVQYXRoKVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruaVsOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruaVsFxuICAgKi9cbiAgcHVibGljIGdldE1vdGlvbkdyb3VwQ291bnQoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuaXNFeGlzdE1vdGlvbkdyb3VwcygpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlXG4gICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Nb3Rpb25zKVxuICAgICAgLmdldEtleXMoKVxuICAgICAgLmdldFNpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7lkI3liY3jgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruWQjeWJjVxuICAgKi9cbiAgcHVibGljIGdldE1vdGlvbkdyb3VwTmFtZShpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuaXNFeGlzdE1vdGlvbkdyb3VwcygpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlXG4gICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Nb3Rpb25zKVxuICAgICAgLmdldEtleXMoKVxuICAgICAgLmF0KGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjgavlkKvjgb7jgozjgovjg6Ljg7zjgrfjg6fjg7Pjga7mlbDjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7lkI3liY1cbiAgICogQHJldHVybiDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7mlbBcbiAgICovXG4gIHB1YmxpYyBnZXRNb3Rpb25Db3VudChncm91cE5hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RNb3Rpb25Hcm91cE5hbWUoZ3JvdXBOYW1lKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2pzb25WYWx1ZVxuICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfTW90aW9ucylcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKGdyb3VwTmFtZSlcbiAgICAgIC5nZXRTaXplKCk7XG4gIH1cblxuICAvKipcbiAgICog44Kw44Or44O844OX5ZCN44Go44Kk44Oz44OH44OD44Kv44K55YCk44GL44KJ44Oi44O844K344On44Oz44OV44Kh44Kk44Or5ZCN44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBncm91cE5hbWUg44Oi44O844K344On44Oz44Kw44Or44O844OX44Gu5ZCN5YmNXG4gICAqIEBwYXJhbSBpbmRleCAgICAg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44OV44Kh44Kk44Or44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uRmlsZU5hbWUoZ3JvdXBOYW1lOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5pc0V4aXN0TW90aW9uR3JvdXBOYW1lKGdyb3VwTmFtZSkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlXG4gICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Nb3Rpb25zKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoZ3JvdXBOYW1lKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZpbGVQYXRoKVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBq+WvvuW/nOOBmeOCi+OCteOCpuODs+ODieODleOCoeOCpOODq+OBruWQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXBOYW1lIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruWQjeWJjVxuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44K144Km44Oz44OJ44OV44Kh44Kk44Or44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uU291bmRGaWxlTmFtZShncm91cE5hbWU6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RNb3Rpb25Tb3VuZEZpbGUoZ3JvdXBOYW1lLCBpbmRleCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlXG4gICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Nb3Rpb25zKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoZ3JvdXBOYW1lKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFNvdW5kUGF0aClcbiAgICAgIC5nZXRSYXdTdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pplovlp4vmmYLjga7jg5Xjgqfjg7zjg4njgqTjg7Plh6bnkIbmmYLplpPjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7lkI3liY1cbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOODleOCp+ODvOODieOCpOODs+WHpueQhuaZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uRmFkZUluVGltZVZhbHVlKGdyb3VwTmFtZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuaXNFeGlzdE1vdGlvbkZhZGVJbihncm91cE5hbWUsIGluZGV4KSkge1xuICAgICAgcmV0dXJuIC0xLjA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2pzb25WYWx1ZVxuICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfTW90aW9ucylcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKGdyb3VwTmFtZSlcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoaW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGYWRlSW5UaW1lKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7PntYLkuobmmYLjga7jg5Xjgqfjg7zjg4njgqLjgqbjg4jlh6bnkIbmmYLplpPjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7lkI3liY1cbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOODleOCp+ODvOODieOCouOCpuODiOWHpueQhuaZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uRmFkZU91dFRpbWVWYWx1ZShncm91cE5hbWU6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RNb3Rpb25GYWRlT3V0KGdyb3VwTmFtZSwgaW5kZXgpKSB7XG4gICAgICByZXR1cm4gLTEuMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fanNvblZhbHVlXG4gICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Nb3Rpb25zKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoZ3JvdXBOYW1lKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZhZGVPdXRUaW1lKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7jg5XjgqHjgqTjg6vlkI3jgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7jg5XjgqHjgqTjg6vlkI1cbiAgICovXG4gIHB1YmxpYyBnZXRVc2VyRGF0YUZpbGUoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuaXNFeGlzdFVzZXJEYXRhRmlsZSgpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZpbGVSZWZlcmVuY2VzKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVXNlckRhdGEpXG4gICAgICAuZ2V0UmF3U3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICog44Os44Kk44Ki44Km44OI5oOF5aCx44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBvdXRMYXlvdXRNYXAgY3NtTWFw44Kv44Op44K544Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqIEByZXR1cm4gdHJ1ZSDjg6zjgqTjgqLjgqbjg4jmg4XloLHjgYzlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDjg6zjgqTjgqLjgqbjg4jmg4XloLHjgYzlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBnZXRMYXlvdXRNYXAob3V0TGF5b3V0TWFwOiBjc21NYXA8c3RyaW5nLCBudW1iZXI+KTogYm9vbGVhbiB7XG4gICAgLy8g5a2Y5Zyo44GX44Gq44GE6KaB57Sg44Gr44Ki44Kv44K744K544GZ44KL44Go44Ko44Op44O844Gr44Gq44KL44Gf44KBVmFsdWXjgYxudWxs44Gu5aC05ZCI44GvbnVsbOOCkuS7o+WFpeOBmeOCi1xuICAgIGNvbnN0IG1hcDogY3NtTWFwPHN0cmluZywgVmFsdWU+ID0gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTGF5b3V0KVxuICAgICAgLmdldE1hcCgpO1xuXG4gICAgaWYgKG1hcCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IHJldCA9IGZhbHNlO1xuXG4gICAgZm9yIChcbiAgICAgIGNvbnN0IGl0ZTogaXRlcmF0b3I8c3RyaW5nLCBWYWx1ZT4gPSBtYXAuYmVnaW4oKTtcbiAgICAgIGl0ZS5ub3RFcXVhbChtYXAuZW5kKCkpO1xuICAgICAgaXRlLnByZUluY3JlbWVudCgpXG4gICAgKSB7XG4gICAgICBvdXRMYXlvdXRNYXAuc2V0VmFsdWUoaXRlLnB0cigpLmZpcnN0LCBpdGUucHRyKCkuc2Vjb25kLnRvRmxvYXQoKSk7XG4gICAgICByZXQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvKipcbiAgICog55uu44OR44OB44Gr6Zai6YCj5LuY44GR44KJ44KM44Gf44OR44Op44Oh44O844K/44Gu5pWw44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g55uu44OR44OB44Gr6Zai6YCj5LuY44GR44KJ44KM44Gf44OR44Op44Oh44O844K/44Gu5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0RXllQmxpbmtQYXJhbWV0ZXJDb3VudCgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5pc0V4aXN0RXllQmxpbmtQYXJhbWV0ZXJzKCkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGxldCBudW0gPSAwO1xuICAgIGZvciAoXG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBpIDwgdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfR3JvdXBzKS5nZXRTaXplKCk7XG4gICAgICBpKytcbiAgICApIHtcbiAgICAgIGNvbnN0IHJlZkk6IFZhbHVlID0gdGhpcy5fanNvblZhbHVlXG4gICAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0dyb3VwcylcbiAgICAgICAgLmdldFZhbHVlQnlJbmRleChpKTtcbiAgICAgIGlmIChyZWZJLmlzTnVsbCgpIHx8IHJlZkkuaXNFcnJvcigpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVmSS5nZXRWYWx1ZUJ5U3RyaW5nKE5hbWUpLmdldFJhd1N0cmluZygpID09IEV5ZUJsaW5rKSB7XG4gICAgICAgIG51bSA9IHJlZklcbiAgICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhJZHMpXG4gICAgICAgICAgLmdldFZlY3RvcigpXG4gICAgICAgICAgLmdldFNpemUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnm67jg5Hjg4HjgavplqLpgKPku5jjgZHjgonjgozjgZ/jg5Hjg6njg6Hjg7zjgr/jga5JROOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44OR44Op44Oh44O844K/SURcbiAgICovXG4gIHB1YmxpYyBnZXRFeWVCbGlua1BhcmFtZXRlcklkKGluZGV4OiBudW1iZXIpOiBDdWJpc21JZEhhbmRsZSB7XG4gICAgaWYgKCF0aGlzLmlzRXhpc3RFeWVCbGlua1BhcmFtZXRlcnMoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZm9yIChcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGkgPCB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpLmdldFNpemUoKTtcbiAgICAgIGkrK1xuICAgICkge1xuICAgICAgY29uc3QgcmVmSTogVmFsdWUgPSB0aGlzLl9qc29uVmFsdWVcbiAgICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfR3JvdXBzKVxuICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KGkpO1xuICAgICAgaWYgKHJlZkkuaXNOdWxsKCkgfHwgcmVmSS5pc0Vycm9yKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWZJLmdldFZhbHVlQnlTdHJpbmcoTmFtZSkuZ2V0UmF3U3RyaW5nKCkgPT0gRXllQmxpbmspIHtcbiAgICAgICAgcmV0dXJuIEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgICAgICByZWZJXG4gICAgICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhJZHMpXG4gICAgICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KGluZGV4KVxuICAgICAgICAgICAgLmdldFJhd1N0cmluZygpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOODquODg+ODl+OCt+ODs+OCr+OBq+mWoumAo+S7mOOBkeOCieOCjOOBn+ODkeODqeODoeODvOOCv+OBruaVsOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODquODg+ODl+OCt+ODs+OCr+OBq+mWoumAo+S7mOOBkeOCieOCjOOBn+ODkeODqeODoeODvOOCv+OBruaVsFxuICAgKi9cbiAgcHVibGljIGdldExpcFN5bmNQYXJhbWV0ZXJDb3VudCgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5pc0V4aXN0TGlwU3luY1BhcmFtZXRlcnMoKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IG51bSA9IDA7XG4gICAgZm9yIChcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGkgPCB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpLmdldFNpemUoKTtcbiAgICAgIGkrK1xuICAgICkge1xuICAgICAgY29uc3QgcmVmSTogVmFsdWUgPSB0aGlzLl9qc29uVmFsdWVcbiAgICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfR3JvdXBzKVxuICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KGkpO1xuICAgICAgaWYgKHJlZkkuaXNOdWxsKCkgfHwgcmVmSS5pc0Vycm9yKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWZJLmdldFZhbHVlQnlTdHJpbmcoTmFtZSkuZ2V0UmF3U3RyaW5nKCkgPT0gTGlwU3luYykge1xuICAgICAgICBudW0gPSByZWZJXG4gICAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoSWRzKVxuICAgICAgICAgIC5nZXRWZWN0b3IoKVxuICAgICAgICAgIC5nZXRTaXplKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudW07XG4gIH1cblxuICAvKipcbiAgICog44Oq44OD44OX44K344Oz44Kv44Gr6Zai6YCj5LuY44GR44KJ44KM44Gf44OR44Op44Oh44O844K/44Gu5pWw44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBpbmRleCDphY3liJfjga7jgqTjg7Pjg4fjg4Pjgq/jgrnlgKRcbiAgICogQHJldHVybiDjg5Hjg6njg6Hjg7zjgr9JRFxuICAgKi9cbiAgcHVibGljIGdldExpcFN5bmNQYXJhbWV0ZXJJZChpbmRleDogbnVtYmVyKTogQ3ViaXNtSWRIYW5kbGUge1xuICAgIGlmICghdGhpcy5pc0V4aXN0TGlwU3luY1BhcmFtZXRlcnMoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZm9yIChcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGkgPCB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpLmdldFNpemUoKTtcbiAgICAgIGkrK1xuICAgICkge1xuICAgICAgY29uc3QgcmVmSTogVmFsdWUgPSB0aGlzLl9qc29uVmFsdWVcbiAgICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfR3JvdXBzKVxuICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KGkpO1xuICAgICAgaWYgKHJlZkkuaXNOdWxsKCkgfHwgcmVmSS5pc0Vycm9yKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWZJLmdldFZhbHVlQnlTdHJpbmcoTmFtZSkuZ2V0UmF3U3RyaW5nKCkgPT0gTGlwU3luYykge1xuICAgICAgICByZXR1cm4gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpLmdldElkKFxuICAgICAgICAgIHJlZklcbiAgICAgICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKElkcylcbiAgICAgICAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoaW5kZXgpXG4gICAgICAgICAgICAuZ2V0UmF3U3RyaW5nKClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICog44Oi44OH44Or44OV44Kh44Kk44Or44Gu44Kt44O844GM5a2Y5Zyo44GZ44KL44GL44Gp44GG44GL44KS56K66KqN44GZ44KLXG4gICAqIEByZXR1cm4gdHJ1ZSDjgq3jg7zjgYzlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDjgq3jg7zjgYzlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHByaXZhdGUgaXNFeGlzdE1vZGVsRmlsZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBub2RlOiBWYWx1ZSA9IHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX01vYyk7XG4gICAgcmV0dXJuICFub2RlLmlzTnVsbCgpICYmICFub2RlLmlzRXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4bjgq/jgrnjg4Hjg6Pjg5XjgqHjgqTjg6vjga7jgq3jg7zjgYzlrZjlnKjjgZnjgovjgYvjganjgYbjgYvjgpLnorroqo3jgZnjgotcbiAgICogQHJldHVybiB0cnVlIOOCreODvOOBjOWtmOWcqOOBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOOCreODvOOBjOWtmOWcqOOBl+OBquOBhFxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4aXN0VGV4dHVyZUZpbGVzKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vZGU6IFZhbHVlID0gdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfVGV4dHVyZXMpO1xuICAgIHJldHVybiAhbm9kZS5pc051bGwoKSAmJiAhbm9kZS5pc0Vycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICog5b2T44Gf44KK5Yik5a6a44Gu44Kt44O844GM5a2Y5Zyo44GZ44KL44GL44Gp44GG44GL44KS56K66KqN44GZ44KLXG4gICAqIEByZXR1cm4gdHJ1ZSDjgq3jg7zjgYzlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDjgq3jg7zjgYzlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHByaXZhdGUgaXNFeGlzdEhpdEFyZWFzKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vZGU6IFZhbHVlID0gdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfSGl0QXJlYXMpO1xuICAgIHJldHVybiAhbm9kZS5pc051bGwoKSAmJiAhbm9kZS5pc0Vycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICog54mp55CG5ryU566X44OV44Kh44Kk44Or44Gu44Kt44O844GM5a2Y5Zyo44GZ44KL44GL44Gp44GG44GL44KS56K66KqN44GZ44KLXG4gICAqIEByZXR1cm4gdHJ1ZSDjgq3jg7zjgYzlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDjgq3jg7zjgYzlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHByaXZhdGUgaXNFeGlzdFBoeXNpY3NGaWxlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vZGU6IFZhbHVlID0gdGhpcy5fanNvblZhbHVlLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfUGh5c2ljcyk7XG4gICAgcmV0dXJuICFub2RlLmlzTnVsbCgpICYmICFub2RlLmlzRXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg53jg7zjgrroqK3lrprjg5XjgqHjgqTjg6vjga7jgq3jg7zjgYzlrZjlnKjjgZnjgovjgYvjganjgYbjgYvjgpLnorroqo3jgZnjgotcbiAgICogQHJldHVybiB0cnVlIOOCreODvOOBjOWtmOWcqOOBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOOCreODvOOBjOWtmOWcqOOBl+OBquOBhFxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4aXN0UG9zZUZpbGUoKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm9kZTogVmFsdWUgPSB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Qb3NlKTtcbiAgICByZXR1cm4gIW5vZGUuaXNOdWxsKCkgJiYgIW5vZGUuaXNFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOihqOaDheioreWumuODleOCoeOCpOODq+OBruOCreODvOOBjOWtmOWcqOOBmeOCi+OBi+OBqeOBhuOBi+OCkueiuuiqjeOBmeOCi1xuICAgKiBAcmV0dXJuIHRydWUg44Kt44O844GM5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Kt44O844GM5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwcml2YXRlIGlzRXhpc3RFeHByZXNzaW9uRmlsZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBub2RlOiBWYWx1ZSA9IHRoaXMuX2pzb25WYWx1ZS5hdChcbiAgICAgIEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfRXhwcmVzc2lvbnNcbiAgICApO1xuICAgIHJldHVybiAhbm9kZS5pc051bGwoKSAmJiAhbm9kZS5pc0Vycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Kw44Or44O844OX44Gu44Kt44O844GM5a2Y5Zyo44GZ44KL44GL44Gp44GG44GL44KS56K66KqN44GZ44KLXG4gICAqIEByZXR1cm4gdHJ1ZSDjgq3jg7zjgYzlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDjgq3jg7zjgYzlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHByaXZhdGUgaXNFeGlzdE1vdGlvbkdyb3VwcygpOiBib29sZWFuIHtcbiAgICBjb25zdCBub2RlOiBWYWx1ZSA9IHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX01vdGlvbnMpO1xuICAgIHJldHVybiAhbm9kZS5pc051bGwoKSAmJiAhbm9kZS5pc0Vycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICog5byV5pWw44Gn5oyH5a6a44GX44Gf44Oi44O844K344On44Oz44Kw44Or44O844OX44Gu44Kt44O844GM5a2Y5Zyo44GZ44KL44GL44Gp44GG44GL44KS56K66KqN44GZ44KLXG4gICAqIEBwYXJhbSBncm91cE5hbWUgIOOCsOODq+ODvOODl+WQjVxuICAgKiBAcmV0dXJuIHRydWUg44Kt44O844GM5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Kt44O844GM5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwcml2YXRlIGlzRXhpc3RNb3Rpb25Hcm91cE5hbWUoZ3JvdXBOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub2RlOiBWYWx1ZSA9IHRoaXMuX2pzb25WYWx1ZVxuICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfTW90aW9ucylcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKGdyb3VwTmFtZSk7XG4gICAgcmV0dXJuICFub2RlLmlzTnVsbCgpICYmICFub2RlLmlzRXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvJXmlbDjgafmjIflrprjgZfjgZ/jg6Ljg7zjgrfjg6fjg7Pjgavlr77lv5zjgZnjgovjgrXjgqbjg7Pjg4njg5XjgqHjgqTjg6vjga7jgq3jg7zjgYzlrZjlnKjjgZnjgovjgYvjganjgYbjgYvjgpLnorroqo3jgZnjgotcbiAgICogQHBhcmFtIGdyb3VwTmFtZSAg44Kw44Or44O844OX5ZCNXG4gICAqIEBwYXJhbSBpbmRleCDphY3liJfjga7jgqTjg7Pjg4fjg4Pjgq/jgrnlgKRcbiAgICogQHJldHVybiB0cnVlIOOCreODvOOBjOWtmOWcqOOBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOOCreODvOOBjOWtmOWcqOOBl+OBquOBhFxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4aXN0TW90aW9uU291bmRGaWxlKGdyb3VwTmFtZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm9kZTogVmFsdWUgPSB0aGlzLl9qc29uVmFsdWVcbiAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX01vdGlvbnMpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhncm91cE5hbWUpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KGluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoU291bmRQYXRoKTtcbiAgICByZXR1cm4gIW5vZGUuaXNOdWxsKCkgJiYgIW5vZGUuaXNFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leaVsOOBp+aMh+WumuOBl+OBn+ODouODvOOCt+ODp+ODs+OBq+WvvuW/nOOBmeOCi+ODleOCp+ODvOODieOCpOODs+aZgumWk+OBruOCreODvOOBjOWtmOWcqOOBmeOCi+OBi+OBqeOBhuOBi+OCkueiuuiqjeOBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXBOYW1lICDjgrDjg6vjg7zjg5flkI1cbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIHRydWUg44Kt44O844GM5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Kt44O844GM5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwcml2YXRlIGlzRXhpc3RNb3Rpb25GYWRlSW4oZ3JvdXBOYW1lOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBub2RlOiBWYWx1ZSA9IHRoaXMuX2pzb25WYWx1ZVxuICAgICAgLmF0KEZyZXF1ZXN0Tm9kZS5GcmVxdWVzdE5vZGVfTW90aW9ucylcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKGdyb3VwTmFtZSlcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoaW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGYWRlSW5UaW1lKTtcbiAgICByZXR1cm4gIW5vZGUuaXNOdWxsKCkgJiYgIW5vZGUuaXNFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leaVsOOBp+aMh+WumuOBl+OBn+ODouODvOOCt+ODp+ODs+OBq+WvvuW/nOOBmeOCi+ODleOCp+ODvOODieOCouOCpuODiOaZgumWk+OBruOCreODvOOBjOWtmOWcqOOBmeOCi+OBi+OBqeOBhuOBi+OCkueiuuiqjeOBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXBOYW1lICDjgrDjg6vjg7zjg5flkI1cbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIHRydWUg44Kt44O844GM5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Kt44O844GM5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwcml2YXRlIGlzRXhpc3RNb3Rpb25GYWRlT3V0KGdyb3VwTmFtZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm9kZTogVmFsdWUgPSB0aGlzLl9qc29uVmFsdWVcbiAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX01vdGlvbnMpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhncm91cE5hbWUpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KGluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmFkZU91dFRpbWUpO1xuICAgIHJldHVybiAhbm9kZS5pc051bGwoKSAmJiAhbm9kZS5pc0Vycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogVXNlckRhdGHjga7jg5XjgqHjgqTjg6vlkI3jgYzlrZjlnKjjgZnjgovjgYvjganjgYbjgYvjgpLnorroqo3jgZnjgotcbiAgICogQHJldHVybiB0cnVlIOOCreODvOOBjOWtmOWcqOOBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOOCreODvOOBjOWtmOWcqOOBl+OBquOBhFxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4aXN0VXNlckRhdGFGaWxlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vZGU6IFZhbHVlID0gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmlsZVJlZmVyZW5jZXMpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhVc2VyRGF0YSk7XG4gICAgcmV0dXJuICFub2RlLmlzTnVsbCgpICYmICFub2RlLmlzRXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnm67jgbHjgaHjgavlr77lv5zku5jjgZHjgonjgozjgZ/jg5Hjg6njg6Hjg7zjgr/jgYzlrZjlnKjjgZnjgovjgYvjganjgYbjgYvjgpLnorroqo3jgZnjgotcbiAgICogQHJldHVybiB0cnVlIOOCreODvOOBjOWtmOWcqOOBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOOCreODvOOBjOWtmOWcqOOBl+OBquOBhFxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4aXN0RXllQmxpbmtQYXJhbWV0ZXJzKCk6IGJvb2xlYW4ge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0dyb3VwcykuaXNOdWxsKCkgfHxcbiAgICAgIHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0dyb3VwcykuaXNFcnJvcigpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGkgPCB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpLmdldFNpemUoKTtcbiAgICAgICsraVxuICAgICkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLl9qc29uVmFsdWVcbiAgICAgICAgICAuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpXG4gICAgICAgICAgLmdldFZhbHVlQnlJbmRleChpKVxuICAgICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE5hbWUpXG4gICAgICAgICAgLmdldFJhd1N0cmluZygpID09IEV5ZUJsaW5rXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIOODquODg+ODl+OCt+ODs+OCr+OBq+WvvuW/nOS7mOOBkeOCieOCjOOBn+ODkeODqeODoeODvOOCv+OBjOWtmOWcqOOBmeOCi+OBi+OBqeOBhuOBi+OCkueiuuiqjeOBmeOCi1xuICAgKiBAcmV0dXJuIHRydWUg44Kt44O844GM5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Kt44O844GM5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwcml2YXRlIGlzRXhpc3RMaXBTeW5jUGFyYW1ldGVycygpOiBib29sZWFuIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpLmlzTnVsbCgpIHx8XG4gICAgICB0aGlzLl9qc29uVmFsdWUuYXQoRnJlcXVlc3ROb2RlLkZyZXF1ZXN0Tm9kZV9Hcm91cHMpLmlzRXJyb3IoKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKFxuICAgICAgbGV0IGkgPSAwO1xuICAgICAgaSA8IHRoaXMuX2pzb25WYWx1ZS5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0dyb3VwcykuZ2V0U2l6ZSgpO1xuICAgICAgKytpXG4gICAgKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2pzb25WYWx1ZVxuICAgICAgICAgIC5hdChGcmVxdWVzdE5vZGUuRnJlcXVlc3ROb2RlX0dyb3VwcylcbiAgICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KGkpXG4gICAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTmFtZSlcbiAgICAgICAgICAuZ2V0UmF3U3RyaW5nKCkgPT0gTGlwU3luY1xuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIF9qc29uOiBDdWJpc21Kc29uO1xuICBwcml2YXRlIF9qc29uVmFsdWU6IGNzbVZlY3RvcjxWYWx1ZT47XG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbW1vZGVsc2V0dGluZ2pzb24nO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vZGVsU2V0dGluZ0pzb24gPSAkLkN1YmlzbU1vZGVsU2V0dGluZ0pzb247XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vZGVsU2V0dGluZ0pzb24gPSAkLkN1YmlzbU1vZGVsU2V0dGluZ0pzb247XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFFQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQUE7QUFPQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUdBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFsdUJBO0FBcXVCQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/cubismmodelsettingjson.ts\n");

/***/ }),

/***/ "./Framework/src/effect/cubismbreath.ts":
/*!**********************************************!*\
  !*** ./Framework/src/effect/cubismbreath.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.BreathParameterData = exports.CubismBreath = void 0;\nvar CubismBreath = (function () {\n    function CubismBreath() {\n        this._currentTime = 0.0;\n    }\n    CubismBreath.create = function () {\n        return new CubismBreath();\n    };\n    CubismBreath.delete = function (instance) {\n        if (instance != null) {\n            instance = null;\n        }\n    };\n    CubismBreath.prototype.setParameters = function (breathParameters) {\n        this._breathParameters = breathParameters;\n    };\n    CubismBreath.prototype.getParameters = function () {\n        return this._breathParameters;\n    };\n    CubismBreath.prototype.updateParameters = function (model, deltaTimeSeconds) {\n        this._currentTime += deltaTimeSeconds;\n        var t = this._currentTime * 2.0 * 3.14159;\n        for (var i = 0; i < this._breathParameters.getSize(); ++i) {\n            var data = this._breathParameters.at(i);\n            model.addParameterValueById(data.parameterId, data.offset + data.peak * Math.sin(t / data.cycle), data.weight);\n        }\n    };\n    return CubismBreath;\n}());\nexports.CubismBreath = CubismBreath;\nvar BreathParameterData = (function () {\n    function BreathParameterData(parameterId, offset, peak, cycle, weight) {\n        this.parameterId = parameterId == undefined ? null : parameterId;\n        this.offset = offset == undefined ? 0.0 : offset;\n        this.peak = peak == undefined ? 0.0 : peak;\n        this.cycle = cycle == undefined ? 0.0 : cycle;\n        this.weight = weight == undefined ? 0.0 : weight;\n    }\n    return BreathParameterData;\n}());\nexports.BreathParameterData = BreathParameterData;\nvar $ = __importStar(__webpack_require__(/*! ./cubismbreath */ \"./Framework/src/effect/cubismbreath.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.BreathParameterData = $.BreathParameterData;\n    Live2DCubismFramework.CubismBreath = $.CubismBreath;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2VmZmVjdC9jdWJpc21icmVhdGgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL2VmZmVjdC9jdWJpc21icmVhdGgudHM/YWRiZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBDdWJpc21JZEhhbmRsZSB9IGZyb20gJy4uL2lkL2N1YmlzbWlkJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgY3NtVmVjdG9yIH0gZnJvbSAnLi4vdHlwZS9jc212ZWN0b3InO1xuXG4vKipcbiAqIOWRvOWQuOapn+iDvVxuICpcbiAqIOWRvOWQuOapn+iDveOCkuaPkOS+m+OBmeOCi+OAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtQnJlYXRoIHtcbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOBruS9nOaIkFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoKTogQ3ViaXNtQnJlYXRoIHtcbiAgICByZXR1cm4gbmV3IEN1YmlzbUJyZWF0aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOBruegtOajhFxuICAgKiBAcGFyYW0gaW5zdGFuY2Ug5a++6LGh44GuQ3ViaXNtQnJlYXRoXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGRlbGV0ZShpbnN0YW5jZTogQ3ViaXNtQnJlYXRoKTogdm9pZCB7XG4gICAgaWYgKGluc3RhbmNlICE9IG51bGwpIHtcbiAgICAgIGluc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5ZG85ZC444Gu44OR44Op44Oh44O844K/44Gu57SQ44Gl44GRXG4gICAqIEBwYXJhbSBicmVhdGhQYXJhbWV0ZXJzIOWRvOWQuOOCkue0kOOBpeOBkeOBn+OBhOODkeODqeODoeODvOOCv+OBruODquOCueODiFxuICAgKi9cbiAgcHVibGljIHNldFBhcmFtZXRlcnMoYnJlYXRoUGFyYW1ldGVyczogY3NtVmVjdG9yPEJyZWF0aFBhcmFtZXRlckRhdGE+KTogdm9pZCB7XG4gICAgdGhpcy5fYnJlYXRoUGFyYW1ldGVycyA9IGJyZWF0aFBhcmFtZXRlcnM7XG4gIH1cblxuICAvKipcbiAgICog5ZG85ZC444Gr57SQ44Gl44GE44Gm44GE44KL44OR44Op44Oh44O844K/44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g5ZG85ZC444Gr57SQ44Gl44GE44Gm44GE44KL44OR44Op44Oh44O844K/44Gu44Oq44K544OIXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFyYW1ldGVycygpOiBjc21WZWN0b3I8QnJlYXRoUGFyYW1ldGVyRGF0YT4ge1xuICAgIHJldHVybiB0aGlzLl9icmVhdGhQYXJhbWV0ZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBruODkeODqeODoeODvOOCv+OBruabtOaWsFxuICAgKiBAcGFyYW0gbW9kZWwg5a++6LGh44Gu44Oi44OH44OrXG4gICAqIEBwYXJhbSBkZWx0YVRpbWVTZWNvbmRzIOODh+ODq+OCv+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlUGFyYW1ldGVycyhtb2RlbDogQ3ViaXNtTW9kZWwsIGRlbHRhVGltZVNlY29uZHM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N1cnJlbnRUaW1lICs9IGRlbHRhVGltZVNlY29uZHM7XG5cbiAgICBjb25zdCB0OiBudW1iZXIgPSB0aGlzLl9jdXJyZW50VGltZSAqIDIuMCAqIDMuMTQxNTk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2JyZWF0aFBhcmFtZXRlcnMuZ2V0U2l6ZSgpOyArK2kpIHtcbiAgICAgIGNvbnN0IGRhdGE6IEJyZWF0aFBhcmFtZXRlckRhdGEgPSB0aGlzLl9icmVhdGhQYXJhbWV0ZXJzLmF0KGkpO1xuXG4gICAgICBtb2RlbC5hZGRQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gICAgICAgIGRhdGEucGFyYW1ldGVySWQsXG4gICAgICAgIGRhdGEub2Zmc2V0ICsgZGF0YS5wZWFrICogTWF0aC5zaW4odCAvIGRhdGEuY3ljbGUpLFxuICAgICAgICBkYXRhLndlaWdodFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fY3VycmVudFRpbWUgPSAwLjA7XG4gIH1cblxuICBfYnJlYXRoUGFyYW1ldGVyczogY3NtVmVjdG9yPEJyZWF0aFBhcmFtZXRlckRhdGE+OyAvLyDlkbzlkLjjgavjgbLjgoLjgaXjgYTjgabjgYTjgovjg5Hjg6njg6Hjg7zjgr/jga7jg6rjgrnjg4hcbiAgX2N1cnJlbnRUaW1lOiBudW1iZXI7IC8vIOepjeeul+aZgumWk1vnp5JdXG59XG5cbi8qKlxuICog5ZG85ZC444Gu44OR44Op44Oh44O844K/5oOF5aCxXG4gKi9cbmV4cG9ydCBjbGFzcyBCcmVhdGhQYXJhbWV0ZXJEYXRhIHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKiBAcGFyYW0gcGFyYW1ldGVySWQgICDlkbzlkLjjgpLjgbLjgoLjgaXjgZHjgovjg5Hjg6njg6Hjg7zjgr9JRFxuICAgKiBAcGFyYW0gb2Zmc2V0ICAgICAgICDlkbzlkLjjgpLmraPlvKbms6LjgajjgZfjgZ/jgajjgY3jga7jgIHms6Ljga7jgqrjg5Xjgrvjg4Pjg4hcbiAgICogQHBhcmFtIHBlYWsgICAgICAgICAg5ZG85ZC444KS5q2j5bym5rOi44Go44GX44Gf44Go44GN44Gu44CB5rOi44Gu6auY44GVXG4gICAqIEBwYXJhbSBjeWNsZSAgICAgICAgIOWRvOWQuOOCkuato+W8puazouOBqOOBl+OBn+OBqOOBjeOBruOAgeazouOBruWRqOacn1xuICAgKiBAcGFyYW0gd2VpZ2h0ICAgICAgICDjg5Hjg6njg6Hjg7zjgr/jgbjjga7ph43jgb9cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmFtZXRlcklkPzogQ3ViaXNtSWRIYW5kbGUsXG4gICAgb2Zmc2V0PzogbnVtYmVyLFxuICAgIHBlYWs/OiBudW1iZXIsXG4gICAgY3ljbGU/OiBudW1iZXIsXG4gICAgd2VpZ2h0PzogbnVtYmVyXG4gICkge1xuICAgIHRoaXMucGFyYW1ldGVySWQgPSBwYXJhbWV0ZXJJZCA9PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1ldGVySWQ7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQgPT0gdW5kZWZpbmVkID8gMC4wIDogb2Zmc2V0O1xuICAgIHRoaXMucGVhayA9IHBlYWsgPT0gdW5kZWZpbmVkID8gMC4wIDogcGVhaztcbiAgICB0aGlzLmN5Y2xlID0gY3ljbGUgPT0gdW5kZWZpbmVkID8gMC4wIDogY3ljbGU7XG4gICAgdGhpcy53ZWlnaHQgPSB3ZWlnaHQgPT0gdW5kZWZpbmVkID8gMC4wIDogd2VpZ2h0O1xuICB9XG5cbiAgcGFyYW1ldGVySWQ6IEN1YmlzbUlkSGFuZGxlOyAvLyDlkbzlkLjjgpLjgbLjgoLjgaXjgZHjgovjg5Hjg6njg6Hjg7zjgr9JRFxcXG4gIG9mZnNldDogbnVtYmVyOyAvLyDlkbzlkLjjgpLmraPlvKbms6LjgajjgZfjgZ/jgajjgY3jga7jgIHms6Ljga7jgqrjg5Xjgrvjg4Pjg4hcbiAgcGVhazogbnVtYmVyOyAvLyDlkbzlkLjjgpLmraPlvKbms6LjgajjgZfjgZ/jgajjgY3jga7jgIHms6Ljga7pq5jjgZVcbiAgY3ljbGU6IG51bWJlcjsgLy8g5ZG85ZC444KS5q2j5bym5rOi44Go44GX44Gf44Go44GN44Gu44CB5rOi44Gu5ZGo5pyfXG4gIHdlaWdodDogbnVtYmVyOyAvLyDjg5Hjg6njg6Hjg7zjgr/jgbjjga7ph43jgb9cbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtYnJlYXRoJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBCcmVhdGhQYXJhbWV0ZXJEYXRhID0gJC5CcmVhdGhQYXJhbWV0ZXJEYXRhO1xuICBleHBvcnQgdHlwZSBCcmVhdGhQYXJhbWV0ZXJEYXRhID0gJC5CcmVhdGhQYXJhbWV0ZXJEYXRhO1xuICBleHBvcnQgY29uc3QgQ3ViaXNtQnJlYXRoID0gJC5DdWJpc21CcmVhdGg7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbUJyZWF0aCA9ICQuQ3ViaXNtQnJlYXRoO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBMERBO0FBQ0E7QUFDQTtBQXhEQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQVdBO0FBQUE7QUFoRUE7QUFxRUE7QUFTQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQUE7QUE1QkE7QUErQkE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/effect/cubismbreath.ts\n");

/***/ }),

/***/ "./Framework/src/effect/cubismeyeblink.ts":
/*!************************************************!*\
  !*** ./Framework/src/effect/cubismeyeblink.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.EyeState = exports.CubismEyeBlink = void 0;\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar CubismEyeBlink = (function () {\n    function CubismEyeBlink(modelSetting) {\n        this._blinkingState = EyeState.EyeState_First;\n        this._nextBlinkingTime = 0.0;\n        this._stateStartTimeSeconds = 0.0;\n        this._blinkingIntervalSeconds = 4.0;\n        this._closingSeconds = 0.1;\n        this._closedSeconds = 0.05;\n        this._openingSeconds = 0.15;\n        this._userTimeSeconds = 0.0;\n        this._parameterIds = new csmvector_1.csmVector();\n        if (modelSetting == null) {\n            return;\n        }\n        for (var i = 0; i < modelSetting.getEyeBlinkParameterCount(); ++i) {\n            this._parameterIds.pushBack(modelSetting.getEyeBlinkParameterId(i));\n        }\n    }\n    CubismEyeBlink.create = function (modelSetting) {\n        if (modelSetting === void 0) { modelSetting = null; }\n        return new CubismEyeBlink(modelSetting);\n    };\n    CubismEyeBlink.delete = function (eyeBlink) {\n        if (eyeBlink != null) {\n            eyeBlink = null;\n        }\n    };\n    CubismEyeBlink.prototype.setBlinkingInterval = function (blinkingInterval) {\n        this._blinkingIntervalSeconds = blinkingInterval;\n    };\n    CubismEyeBlink.prototype.setBlinkingSetting = function (closing, closed, opening) {\n        this._closingSeconds = closing;\n        this._closedSeconds = closed;\n        this._openingSeconds = opening;\n    };\n    CubismEyeBlink.prototype.setParameterIds = function (parameterIds) {\n        this._parameterIds = parameterIds;\n    };\n    CubismEyeBlink.prototype.getParameterIds = function () {\n        return this._parameterIds;\n    };\n    CubismEyeBlink.prototype.updateParameters = function (model, deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        var parameterValue;\n        var t = 0.0;\n        switch (this._blinkingState) {\n            case EyeState.EyeState_Closing:\n                t =\n                    (this._userTimeSeconds - this._stateStartTimeSeconds) /\n                        this._closingSeconds;\n                if (t >= 1.0) {\n                    t = 1.0;\n                    this._blinkingState = EyeState.EyeState_Closed;\n                    this._stateStartTimeSeconds = this._userTimeSeconds;\n                }\n                parameterValue = 1.0 - t;\n                break;\n            case EyeState.EyeState_Closed:\n                t =\n                    (this._userTimeSeconds - this._stateStartTimeSeconds) /\n                        this._closedSeconds;\n                if (t >= 1.0) {\n                    this._blinkingState = EyeState.EyeState_Opening;\n                    this._stateStartTimeSeconds = this._userTimeSeconds;\n                }\n                parameterValue = 0.0;\n                break;\n            case EyeState.EyeState_Opening:\n                t =\n                    (this._userTimeSeconds - this._stateStartTimeSeconds) /\n                        this._openingSeconds;\n                if (t >= 1.0) {\n                    t = 1.0;\n                    this._blinkingState = EyeState.EyeState_Interval;\n                    this._nextBlinkingTime = this.determinNextBlinkingTiming();\n                }\n                parameterValue = t;\n                break;\n            case EyeState.EyeState_Interval:\n                if (this._nextBlinkingTime < this._userTimeSeconds) {\n                    this._blinkingState = EyeState.EyeState_Closing;\n                    this._stateStartTimeSeconds = this._userTimeSeconds;\n                }\n                parameterValue = 1.0;\n                break;\n            case EyeState.EyeState_First:\n            default:\n                this._blinkingState = EyeState.EyeState_Interval;\n                this._nextBlinkingTime = this.determinNextBlinkingTiming();\n                parameterValue = 1.0;\n                break;\n        }\n        if (!CubismEyeBlink.CloseIfZero) {\n            parameterValue = -parameterValue;\n        }\n        for (var i = 0; i < this._parameterIds.getSize(); ++i) {\n            model.setParameterValueById(this._parameterIds.at(i), parameterValue);\n        }\n    };\n    CubismEyeBlink.prototype.determinNextBlinkingTiming = function () {\n        var r = Math.random();\n        return (this._userTimeSeconds + r * (2.0 * this._blinkingIntervalSeconds - 1.0));\n    };\n    CubismEyeBlink.CloseIfZero = true;\n    return CubismEyeBlink;\n}());\nexports.CubismEyeBlink = CubismEyeBlink;\nvar EyeState;\n(function (EyeState) {\n    EyeState[EyeState[\"EyeState_First\"] = 0] = \"EyeState_First\";\n    EyeState[EyeState[\"EyeState_Interval\"] = 1] = \"EyeState_Interval\";\n    EyeState[EyeState[\"EyeState_Closing\"] = 2] = \"EyeState_Closing\";\n    EyeState[EyeState[\"EyeState_Closed\"] = 3] = \"EyeState_Closed\";\n    EyeState[EyeState[\"EyeState_Opening\"] = 4] = \"EyeState_Opening\";\n})(EyeState = exports.EyeState || (exports.EyeState = {}));\nvar $ = __importStar(__webpack_require__(/*! ./cubismeyeblink */ \"./Framework/src/effect/cubismeyeblink.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismEyeBlink = $.CubismEyeBlink;\n    Live2DCubismFramework.EyeState = $.EyeState;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2VmZmVjdC9jdWJpc21leWVibGluay50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvZWZmZWN0L2N1YmlzbWV5ZWJsaW5rLnRzP2Q4NjMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgSUN1YmlzbU1vZGVsU2V0dGluZyB9IGZyb20gJy4uL2ljdWJpc21tb2RlbHNldHRpbmcnO1xuaW1wb3J0IHsgQ3ViaXNtSWRIYW5kbGUgfSBmcm9tICcuLi9pZC9jdWJpc21pZCc7XG5pbXBvcnQgeyBDdWJpc21Nb2RlbCB9IGZyb20gJy4uL21vZGVsL2N1YmlzbW1vZGVsJztcbmltcG9ydCB7IGNzbVZlY3RvciB9IGZyb20gJy4uL3R5cGUvY3NtdmVjdG9yJztcblxuLyoqXG4gKiDoh6rli5Xjgb7jgbDjgZ/jgY3mqZ/og71cbiAqXG4gKiDoh6rli5Xjgb7jgbDjgZ/jgY3mqZ/og73jgpLmj5DkvpvjgZnjgovjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbUV5ZUJsaW5rIHtcbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkuS9nOaIkOOBmeOCi1xuICAgKiBAcGFyYW0gbW9kZWxTZXR0aW5nIOODouODh+ODq+OBruioreWumuaDheWgsVxuICAgKiBAcmV0dXJuIOS9nOaIkOOBleOCjOOBn+OCpOODs+OCueOCv+ODs+OCuVxuICAgKiBAbm90ZSDlvJXmlbDjgYxOVUxM44Gu5aC05ZCI44CB44OR44Op44Oh44O844K/SUTjgYzoqK3lrprjgZXjgozjgabjgYTjgarjgYTnqbrjga7jgqTjg7Pjgrnjgr/jg7PjgrnjgpLkvZzmiJDjgZnjgovjgIJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlKFxuICAgIG1vZGVsU2V0dGluZzogSUN1YmlzbU1vZGVsU2V0dGluZyA9IG51bGxcbiAgKTogQ3ViaXNtRXllQmxpbmsge1xuICAgIHJldHVybiBuZXcgQ3ViaXNtRXllQmxpbmsobW9kZWxTZXR0aW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7noLTmo4RcbiAgICogQHBhcmFtIGV5ZUJsaW5rIOWvvuixoeOBrkN1YmlzbUV5ZUJsaW5rXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGRlbGV0ZShleWVCbGluazogQ3ViaXNtRXllQmxpbmspOiB2b2lkIHtcbiAgICBpZiAoZXllQmxpbmsgIT0gbnVsbCkge1xuICAgICAgZXllQmxpbmsgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgb7jgbDjgZ/jgY3jga7plpPpmpTjga7oqK3lrppcbiAgICogQHBhcmFtIGJsaW5raW5nSW50ZXJ2YWwg44G+44Gw44Gf44GN44Gu6ZaT6ZqU44Gu5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBzZXRCbGlua2luZ0ludGVydmFsKGJsaW5raW5nSW50ZXJ2YWw6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2JsaW5raW5nSW50ZXJ2YWxTZWNvbmRzID0gYmxpbmtpbmdJbnRlcnZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgb7jgbDjgZ/jgY3jga7jg6Ljg7zjgrfjg6fjg7Pjga7oqbPntLDoqK3lrppcbiAgICogQHBhcmFtIGNsb3NpbmcgICDjgb7jgbbjgZ/jgpLplonjgZjjgovli5XkvZzjga7miYDopoHmmYLplpNb56eSXVxuICAgKiBAcGFyYW0gY2xvc2VkICAgIOOBvuOBtuOBn+OCkumWieOBmOOBpuOBhOOCi+WLleS9nOOBruaJgOimgeaZgumWk1vnp5JdXG4gICAqIEBwYXJhbSBvcGVuaW5nICAg44G+44G244Gf44KS6ZaL44GP5YuV5L2c44Gu5omA6KaB5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBzZXRCbGlua2luZ1NldHRpbmcoXG4gICAgY2xvc2luZzogbnVtYmVyLFxuICAgIGNsb3NlZDogbnVtYmVyLFxuICAgIG9wZW5pbmc6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9jbG9zaW5nU2Vjb25kcyA9IGNsb3Npbmc7XG4gICAgdGhpcy5fY2xvc2VkU2Vjb25kcyA9IGNsb3NlZDtcbiAgICB0aGlzLl9vcGVuaW5nU2Vjb25kcyA9IG9wZW5pbmc7XG4gIH1cblxuICAvKipcbiAgICog44G+44Gw44Gf44GN44GV44Gb44KL44OR44Op44Oh44O844K/SUTjga7jg6rjgrnjg4jjga7oqK3lrppcbiAgICogQHBhcmFtIHBhcmFtZXRlcklkcyDjg5Hjg6njg6Hjg7zjgr/jga5JROOBruODquOCueODiFxuICAgKi9cbiAgcHVibGljIHNldFBhcmFtZXRlcklkcyhwYXJhbWV0ZXJJZHM6IGNzbVZlY3RvcjxDdWJpc21JZEhhbmRsZT4pOiB2b2lkIHtcbiAgICB0aGlzLl9wYXJhbWV0ZXJJZHMgPSBwYXJhbWV0ZXJJZHM7XG4gIH1cblxuICAvKipcbiAgICog44G+44Gw44Gf44GN44GV44Gb44KL44OR44Op44Oh44O844K/SUTjga7jg6rjgrnjg4jjga7lj5blvpdcbiAgICogQHJldHVybiDjg5Hjg6njg6Hjg7zjgr9JROOBruODquOCueODiFxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlcklkcygpOiBjc21WZWN0b3I8Q3ViaXNtSWRIYW5kbGU+IHtcbiAgICByZXR1cm4gdGhpcy5fcGFyYW1ldGVySWRzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBruODkeODqeODoeODvOOCv+OBruabtOaWsFxuICAgKiBAcGFyYW0gbW9kZWwg5a++6LGh44Gu44Oi44OH44OrXG4gICAqIEBwYXJhbSBkZWx0YVRpbWVTZWNvbmRzIOODh+ODq+OCv+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlUGFyYW1ldGVycyhtb2RlbDogQ3ViaXNtTW9kZWwsIGRlbHRhVGltZVNlY29uZHM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3VzZXJUaW1lU2Vjb25kcyArPSBkZWx0YVRpbWVTZWNvbmRzO1xuICAgIGxldCBwYXJhbWV0ZXJWYWx1ZTogbnVtYmVyO1xuICAgIGxldCB0ID0gMC4wO1xuXG4gICAgc3dpdGNoICh0aGlzLl9ibGlua2luZ1N0YXRlKSB7XG4gICAgICBjYXNlIEV5ZVN0YXRlLkV5ZVN0YXRlX0Nsb3Npbmc6XG4gICAgICAgIHQgPVxuICAgICAgICAgICh0aGlzLl91c2VyVGltZVNlY29uZHMgLSB0aGlzLl9zdGF0ZVN0YXJ0VGltZVNlY29uZHMpIC9cbiAgICAgICAgICB0aGlzLl9jbG9zaW5nU2Vjb25kcztcblxuICAgICAgICBpZiAodCA+PSAxLjApIHtcbiAgICAgICAgICB0ID0gMS4wO1xuICAgICAgICAgIHRoaXMuX2JsaW5raW5nU3RhdGUgPSBFeWVTdGF0ZS5FeWVTdGF0ZV9DbG9zZWQ7XG4gICAgICAgICAgdGhpcy5fc3RhdGVTdGFydFRpbWVTZWNvbmRzID0gdGhpcy5fdXNlclRpbWVTZWNvbmRzO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1ldGVyVmFsdWUgPSAxLjAgLSB0O1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeWVTdGF0ZS5FeWVTdGF0ZV9DbG9zZWQ6XG4gICAgICAgIHQgPVxuICAgICAgICAgICh0aGlzLl91c2VyVGltZVNlY29uZHMgLSB0aGlzLl9zdGF0ZVN0YXJ0VGltZVNlY29uZHMpIC9cbiAgICAgICAgICB0aGlzLl9jbG9zZWRTZWNvbmRzO1xuXG4gICAgICAgIGlmICh0ID49IDEuMCkge1xuICAgICAgICAgIHRoaXMuX2JsaW5raW5nU3RhdGUgPSBFeWVTdGF0ZS5FeWVTdGF0ZV9PcGVuaW5nO1xuICAgICAgICAgIHRoaXMuX3N0YXRlU3RhcnRUaW1lU2Vjb25kcyA9IHRoaXMuX3VzZXJUaW1lU2Vjb25kcztcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmFtZXRlclZhbHVlID0gMC4wO1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeWVTdGF0ZS5FeWVTdGF0ZV9PcGVuaW5nOlxuICAgICAgICB0ID1cbiAgICAgICAgICAodGhpcy5fdXNlclRpbWVTZWNvbmRzIC0gdGhpcy5fc3RhdGVTdGFydFRpbWVTZWNvbmRzKSAvXG4gICAgICAgICAgdGhpcy5fb3BlbmluZ1NlY29uZHM7XG5cbiAgICAgICAgaWYgKHQgPj0gMS4wKSB7XG4gICAgICAgICAgdCA9IDEuMDtcbiAgICAgICAgICB0aGlzLl9ibGlua2luZ1N0YXRlID0gRXllU3RhdGUuRXllU3RhdGVfSW50ZXJ2YWw7XG4gICAgICAgICAgdGhpcy5fbmV4dEJsaW5raW5nVGltZSA9IHRoaXMuZGV0ZXJtaW5OZXh0QmxpbmtpbmdUaW1pbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmFtZXRlclZhbHVlID0gdDtcblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXllU3RhdGUuRXllU3RhdGVfSW50ZXJ2YWw6XG4gICAgICAgIGlmICh0aGlzLl9uZXh0QmxpbmtpbmdUaW1lIDwgdGhpcy5fdXNlclRpbWVTZWNvbmRzKSB7XG4gICAgICAgICAgdGhpcy5fYmxpbmtpbmdTdGF0ZSA9IEV5ZVN0YXRlLkV5ZVN0YXRlX0Nsb3Npbmc7XG4gICAgICAgICAgdGhpcy5fc3RhdGVTdGFydFRpbWVTZWNvbmRzID0gdGhpcy5fdXNlclRpbWVTZWNvbmRzO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1ldGVyVmFsdWUgPSAxLjA7XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEV5ZVN0YXRlLkV5ZVN0YXRlX0ZpcnN0OlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5fYmxpbmtpbmdTdGF0ZSA9IEV5ZVN0YXRlLkV5ZVN0YXRlX0ludGVydmFsO1xuICAgICAgICB0aGlzLl9uZXh0QmxpbmtpbmdUaW1lID0gdGhpcy5kZXRlcm1pbk5leHRCbGlua2luZ1RpbWluZygpO1xuXG4gICAgICAgIHBhcmFtZXRlclZhbHVlID0gMS4wO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoIUN1YmlzbUV5ZUJsaW5rLkNsb3NlSWZaZXJvKSB7XG4gICAgICBwYXJhbWV0ZXJWYWx1ZSA9IC1wYXJhbWV0ZXJWYWx1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3BhcmFtZXRlcklkcy5nZXRTaXplKCk7ICsraSkge1xuICAgICAgbW9kZWwuc2V0UGFyYW1ldGVyVmFsdWVCeUlkKHRoaXMuX3BhcmFtZXRlcklkcy5hdChpKSwgcGFyYW1ldGVyVmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICogQHBhcmFtIG1vZGVsU2V0dGluZyDjg6Ljg4fjg6vjga7oqK3lrprmg4XloLFcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihtb2RlbFNldHRpbmc6IElDdWJpc21Nb2RlbFNldHRpbmcpIHtcbiAgICB0aGlzLl9ibGlua2luZ1N0YXRlID0gRXllU3RhdGUuRXllU3RhdGVfRmlyc3Q7XG4gICAgdGhpcy5fbmV4dEJsaW5raW5nVGltZSA9IDAuMDtcbiAgICB0aGlzLl9zdGF0ZVN0YXJ0VGltZVNlY29uZHMgPSAwLjA7XG4gICAgdGhpcy5fYmxpbmtpbmdJbnRlcnZhbFNlY29uZHMgPSA0LjA7XG4gICAgdGhpcy5fY2xvc2luZ1NlY29uZHMgPSAwLjE7XG4gICAgdGhpcy5fY2xvc2VkU2Vjb25kcyA9IDAuMDU7XG4gICAgdGhpcy5fb3BlbmluZ1NlY29uZHMgPSAwLjE1O1xuICAgIHRoaXMuX3VzZXJUaW1lU2Vjb25kcyA9IDAuMDtcbiAgICB0aGlzLl9wYXJhbWV0ZXJJZHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPigpO1xuXG4gICAgaWYgKG1vZGVsU2V0dGluZyA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RlbFNldHRpbmcuZ2V0RXllQmxpbmtQYXJhbWV0ZXJDb3VudCgpOyArK2kpIHtcbiAgICAgIHRoaXMuX3BhcmFtZXRlcklkcy5wdXNoQmFjayhtb2RlbFNldHRpbmcuZ2V0RXllQmxpbmtQYXJhbWV0ZXJJZChpKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOasoeOBrueerOOBjeOBruOCv+OCpOODn+ODs+OCsOOBruaxuuWumlxuICAgKlxuICAgKiBAcmV0dXJuIOasoeOBruOBvuOBsOOBn+OBjeOCkuihjOOBhuaZguWIu1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZGV0ZXJtaW5OZXh0QmxpbmtpbmdUaW1pbmcoKTogbnVtYmVyIHtcbiAgICBjb25zdCByOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl91c2VyVGltZVNlY29uZHMgKyByICogKDIuMCAqIHRoaXMuX2JsaW5raW5nSW50ZXJ2YWxTZWNvbmRzIC0gMS4wKVxuICAgICk7XG4gIH1cblxuICBfYmxpbmtpbmdTdGF0ZTogbnVtYmVyOyAvLyDnj77lnKjjga7nirbmhYtcbiAgX3BhcmFtZXRlcklkczogY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPjsgLy8g5pON5L2c5a++6LGh44Gu44OR44Op44Oh44O844K/44GuSUTjga7jg6rjgrnjg4hcbiAgX25leHRCbGlua2luZ1RpbWU6IG51bWJlcjsgLy8g5qyh44Gu44G+44Gw44Gf44GN44Gu5pmC5Yi7W+enkl1cbiAgX3N0YXRlU3RhcnRUaW1lU2Vjb25kczogbnVtYmVyOyAvLyDnj77lnKjjga7nirbmhYvjgYzplovlp4vjgZfjgZ/mmYLliLtb56eSXVxuICBfYmxpbmtpbmdJbnRlcnZhbFNlY29uZHM6IG51bWJlcjsgLy8g44G+44Gw44Gf44GN44Gu6ZaT6ZqUW+enkl1cbiAgX2Nsb3NpbmdTZWNvbmRzOiBudW1iZXI7IC8vIOOBvuOBtuOBn+OCkumWieOBmOOCi+WLleS9nOOBruaJgOimgeaZgumWk1vnp5JdXG4gIF9jbG9zZWRTZWNvbmRzOiBudW1iZXI7IC8vIOOBvuOBtuOBn+OCkumWieOBmOOBpuOBhOOCi+WLleS9nOOBruaJgOimgeaZgumWk1vnp5JdXG4gIF9vcGVuaW5nU2Vjb25kczogbnVtYmVyOyAvLyDjgb7jgbbjgZ/jgpLplovjgY/li5XkvZzjga7miYDopoHmmYLplpNb56eSXVxuICBfdXNlclRpbWVTZWNvbmRzOiBudW1iZXI7IC8vIOODh+ODq+OCv+aZgumWk+OBruepjeeul+WApFvnp5JdXG5cbiAgLyoqXG4gICAqIElE44Gn5oyH5a6a44GV44KM44Gf55uu44Gu44OR44Op44Oh44O844K/44GM44CBMOOBruOBqOOBjeOBq+mWieOBmOOCi+OBquOCiSB0cnVlIOOAgTHjga7mmYLjgavplonjgZjjgovjgarjgokgZmFsc2Ug44CCXG4gICAqL1xuICBzdGF0aWMgcmVhZG9ubHkgQ2xvc2VJZlplcm86IGJvb2xlYW4gPSB0cnVlO1xufVxuXG4vKipcbiAqIOOBvuOBsOOBn+OBjeOBrueKtuaFi1xuICpcbiAqIOOBvuOBsOOBn+OBjeOBrueKtuaFi+OCkuihqOOBmeWIl+aMmeWei1xuICovXG5leHBvcnQgZW51bSBFeWVTdGF0ZSB7XG4gIEV5ZVN0YXRlX0ZpcnN0ID0gMCwgLy8g5Yid5pyf54q25oWLXG4gIEV5ZVN0YXRlX0ludGVydmFsLCAvLyDjgb7jgbDjgZ/jgY3jgZfjgabjgYTjgarjgYTnirbmhYtcbiAgRXllU3RhdGVfQ2xvc2luZywgLy8g44G+44G244Gf44GM6ZaJ44GY44Gm44GE44GP6YCU5Lit44Gu54q25oWLXG4gIEV5ZVN0YXRlX0Nsb3NlZCwgLy8g44G+44G244Gf44GM6ZaJ44GY44Gm44GE44KL54q25oWLXG4gIEV5ZVN0YXRlX09wZW5pbmcgLy8g44G+44G244Gf44GM6ZaL44GE44Gm44GE44GP6YCU5Lit44Gu54q25oWLXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbWV5ZWJsaW5rJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21FeWVCbGluayA9ICQuQ3ViaXNtRXllQmxpbms7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbUV5ZUJsaW5rID0gJC5DdWJpc21FeWVCbGluaztcbiAgZXhwb3J0IGNvbnN0IEV5ZVN0YXRlID0gJC5FeWVTdGF0ZTtcbiAgZXhwb3J0IHR5cGUgRXllU3RhdGUgPSAkLkV5ZVN0YXRlO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBVUE7QUFPQTtBQWtKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBN0pBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQVFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQStCQTtBQUNBO0FBQ0E7QUFHQTtBQWVBO0FBQ0E7QUFBQTtBQWhNQTtBQXVNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/effect/cubismeyeblink.ts\n");

/***/ }),

/***/ "./Framework/src/effect/cubismpose.ts":
/*!********************************************!*\
  !*** ./Framework/src/effect/cubismpose.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.PartData = exports.CubismPose = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ../utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nvar Epsilon = 0.001;\nvar DefaultFadeInSeconds = 0.5;\nvar FadeIn = 'FadeInTime';\nvar Link = 'Link';\nvar Groups = 'Groups';\nvar Id = 'Id';\nvar CubismPose = (function () {\n    function CubismPose() {\n        this._fadeTimeSeconds = DefaultFadeInSeconds;\n        this._lastModel = null;\n        this._partGroups = new csmvector_1.csmVector();\n        this._partGroupCounts = new csmvector_1.csmVector();\n    }\n    CubismPose.create = function (pose3json, size) {\n        var ret = new CubismPose();\n        var json = cubismjson_1.CubismJson.create(pose3json, size);\n        var root = json.getRoot();\n        if (!root.getValueByString(FadeIn).isNull()) {\n            ret._fadeTimeSeconds = root\n                .getValueByString(FadeIn)\n                .toFloat(DefaultFadeInSeconds);\n            if (ret._fadeTimeSeconds <= 0.0) {\n                ret._fadeTimeSeconds = DefaultFadeInSeconds;\n            }\n        }\n        var poseListInfo = root.getValueByString(Groups);\n        var poseCount = poseListInfo.getSize();\n        for (var poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\n            var idListInfo = poseListInfo.getValueByIndex(poseIndex);\n            var idCount = idListInfo.getSize();\n            var groupCount = 0;\n            for (var groupIndex = 0; groupIndex < idCount; ++groupIndex) {\n                var partInfo = idListInfo.getValueByIndex(groupIndex);\n                var partData = new PartData();\n                var parameterId = live2dcubismframework_1.CubismFramework.getIdManager().getId(partInfo.getValueByString(Id).getRawString());\n                partData.partId = parameterId;\n                if (!partInfo.getValueByString(Link).isNull()) {\n                    var linkListInfo = partInfo.getValueByString(Link);\n                    var linkCount = linkListInfo.getSize();\n                    for (var linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\n                        var linkPart = new PartData();\n                        var linkId = live2dcubismframework_1.CubismFramework.getIdManager().getId(linkListInfo.getValueByIndex(linkIndex).getString());\n                        linkPart.partId = linkId;\n                        partData.link.pushBack(linkPart);\n                    }\n                }\n                ret._partGroups.pushBack(partData.clone());\n                ++groupCount;\n            }\n            ret._partGroupCounts.pushBack(groupCount);\n        }\n        cubismjson_1.CubismJson.delete(json);\n        return ret;\n    };\n    CubismPose.delete = function (pose) {\n        if (pose != null) {\n            pose = null;\n        }\n    };\n    CubismPose.prototype.updateParameters = function (model, deltaTimeSeconds) {\n        if (model != this._lastModel) {\n            this.reset(model);\n        }\n        this._lastModel = model;\n        if (deltaTimeSeconds < 0.0) {\n            deltaTimeSeconds = 0.0;\n        }\n        var beginIndex = 0;\n        for (var i = 0; i < this._partGroupCounts.getSize(); i++) {\n            var partGroupCount = this._partGroupCounts.at(i);\n            this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\n            beginIndex += partGroupCount;\n        }\n        this.copyPartOpacities(model);\n    };\n    CubismPose.prototype.reset = function (model) {\n        var beginIndex = 0;\n        for (var i = 0; i < this._partGroupCounts.getSize(); ++i) {\n            var groupCount = this._partGroupCounts.at(i);\n            for (var j = beginIndex; j < beginIndex + groupCount; ++j) {\n                this._partGroups.at(j).initialize(model);\n                var partsIndex = this._partGroups.at(j).partIndex;\n                var paramIndex = this._partGroups.at(j).parameterIndex;\n                if (partsIndex < 0) {\n                    continue;\n                }\n                model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1.0 : 0.0);\n                model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1.0 : 0.0);\n                for (var k = 0; k < this._partGroups.at(j).link.getSize(); ++k) {\n                    this._partGroups\n                        .at(j)\n                        .link.at(k)\n                        .initialize(model);\n                }\n            }\n            beginIndex += groupCount;\n        }\n    };\n    CubismPose.prototype.copyPartOpacities = function (model) {\n        for (var groupIndex = 0; groupIndex < this._partGroups.getSize(); ++groupIndex) {\n            var partData = this._partGroups.at(groupIndex);\n            if (partData.link.getSize() == 0) {\n                continue;\n            }\n            var partIndex = this._partGroups.at(groupIndex).partIndex;\n            var opacity = model.getPartOpacityByIndex(partIndex);\n            for (var linkIndex = 0; linkIndex < partData.link.getSize(); ++linkIndex) {\n                var linkPart = partData.link.at(linkIndex);\n                var linkPartIndex = linkPart.partIndex;\n                if (linkPartIndex < 0) {\n                    continue;\n                }\n                model.setPartOpacityByIndex(linkPartIndex, opacity);\n            }\n        }\n    };\n    CubismPose.prototype.doFade = function (model, deltaTimeSeconds, beginIndex, partGroupCount) {\n        var visiblePartIndex = -1;\n        var newOpacity = 1.0;\n        var phi = 0.5;\n        var backOpacityThreshold = 0.15;\n        for (var i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n            var partIndex = this._partGroups.at(i).partIndex;\n            var paramIndex = this._partGroups.at(i).parameterIndex;\n            if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\n                if (visiblePartIndex >= 0) {\n                    break;\n                }\n                visiblePartIndex = i;\n                newOpacity = model.getPartOpacityByIndex(partIndex);\n                newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\n                if (newOpacity > 1.0) {\n                    newOpacity = 1.0;\n                }\n            }\n        }\n        if (visiblePartIndex < 0) {\n            visiblePartIndex = 0;\n            newOpacity = 1.0;\n        }\n        for (var i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n            var partsIndex = this._partGroups.at(i).partIndex;\n            if (visiblePartIndex == i) {\n                model.setPartOpacityByIndex(partsIndex, newOpacity);\n            }\n            else {\n                var opacity = model.getPartOpacityByIndex(partsIndex);\n                var a1 = void 0;\n                if (newOpacity < phi) {\n                    a1 = (newOpacity * (phi - 1)) / phi + 1.0;\n                }\n                else {\n                    a1 = ((1 - newOpacity) * phi) / (1.0 - phi);\n                }\n                var backOpacity = (1.0 - a1) * (1.0 - newOpacity);\n                if (backOpacity > backOpacityThreshold) {\n                    a1 = 1.0 - backOpacityThreshold / (1.0 - newOpacity);\n                }\n                if (opacity > a1) {\n                    opacity = a1;\n                }\n                model.setPartOpacityByIndex(partsIndex, opacity);\n            }\n        }\n    };\n    return CubismPose;\n}());\nexports.CubismPose = CubismPose;\nvar PartData = (function () {\n    function PartData(v) {\n        this.parameterIndex = 0;\n        this.partIndex = 0;\n        this.link = new csmvector_1.csmVector();\n        if (v != undefined) {\n            this.partId = v.partId;\n            for (var ite = v.link.begin(); ite.notEqual(v.link.end()); ite.preIncrement()) {\n                this.link.pushBack(ite.ptr().clone());\n            }\n        }\n    }\n    PartData.prototype.assignment = function (v) {\n        this.partId = v.partId;\n        for (var ite = v.link.begin(); ite.notEqual(v.link.end()); ite.preIncrement()) {\n            this.link.pushBack(ite.ptr().clone());\n        }\n        return this;\n    };\n    PartData.prototype.initialize = function (model) {\n        this.parameterIndex = model.getParameterIndex(this.partId);\n        this.partIndex = model.getPartIndex(this.partId);\n        model.setParameterValueByIndex(this.parameterIndex, 1);\n    };\n    PartData.prototype.clone = function () {\n        var clonePartData = new PartData();\n        clonePartData.partId = this.partId;\n        clonePartData.parameterIndex = this.parameterIndex;\n        clonePartData.partIndex = this.partIndex;\n        clonePartData.link = new csmvector_1.csmVector();\n        for (var ite = this.link.begin(); ite.notEqual(this.link.end()); ite.increment()) {\n            clonePartData.link.pushBack(ite.ptr().clone());\n        }\n        return clonePartData;\n    };\n    return PartData;\n}());\nexports.PartData = PartData;\nvar $ = __importStar(__webpack_require__(/*! ./cubismpose */ \"./Framework/src/effect/cubismpose.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPose = $.CubismPose;\n    Live2DCubismFramework.PartData = $.PartData;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2VmZmVjdC9jdWJpc21wb3NlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9lZmZlY3QvY3ViaXNtcG9zZS50cz8wZDY2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgQ3ViaXNtRnJhbWV3b3JrIH0gZnJvbSAnLi4vbGl2ZTJkY3ViaXNtZnJhbWV3b3JrJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgY3NtVmVjdG9yLCBpdGVyYXRvciB9IGZyb20gJy4uL3R5cGUvY3NtdmVjdG9yJztcbmltcG9ydCB7IEN1YmlzbUpzb24sIFZhbHVlIH0gZnJvbSAnLi4vdXRpbHMvY3ViaXNtanNvbic7XG5cbmNvbnN0IEVwc2lsb24gPSAwLjAwMTtcbmNvbnN0IERlZmF1bHRGYWRlSW5TZWNvbmRzID0gMC41O1xuXG4vLyBQb3NlLmpzb27jga7jgr/jgrBcbmNvbnN0IEZhZGVJbiA9ICdGYWRlSW5UaW1lJztcbmNvbnN0IExpbmsgPSAnTGluayc7XG5jb25zdCBHcm91cHMgPSAnR3JvdXBzJztcbmNvbnN0IElkID0gJ0lkJztcblxuLyoqXG4gKiDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqbjga7oqK3lrppcbiAqXG4gKiDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqbjga7nrqHnkIbjgajoqK3lrprjgpLooYzjgYbjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVBvc2Uge1xuICAvKipcbiAgICog44Kk44Oz44K544K/44Oz44K544Gu5L2c5oiQXG4gICAqIEBwYXJhbSBwb3NlM2pzb24gcG9zZTMuanNvbuOBruODh+ODvOOCv1xuICAgKiBAcGFyYW0gc2l6ZSBwb3NlMy5qc29u44Gu44OH44O844K/44Gu44K144Kk44K6W2J5dGVdXG4gICAqIEByZXR1cm4g5L2c5oiQ44GV44KM44Gf44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwb3NlM2pzb246IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpOiBDdWJpc21Qb3NlIHtcbiAgICBjb25zdCByZXQ6IEN1YmlzbVBvc2UgPSBuZXcgQ3ViaXNtUG9zZSgpO1xuICAgIGNvbnN0IGpzb246IEN1YmlzbUpzb24gPSBDdWJpc21Kc29uLmNyZWF0ZShwb3NlM2pzb24sIHNpemUpO1xuICAgIGNvbnN0IHJvb3Q6IFZhbHVlID0ganNvbi5nZXRSb290KCk7XG5cbiAgICAvLyDjg5Xjgqfjg7zjg4nmmYLplpPjga7mjIflrppcbiAgICBpZiAoIXJvb3QuZ2V0VmFsdWVCeVN0cmluZyhGYWRlSW4pLmlzTnVsbCgpKSB7XG4gICAgICByZXQuX2ZhZGVUaW1lU2Vjb25kcyA9IHJvb3RcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmFkZUluKVxuICAgICAgICAudG9GbG9hdChEZWZhdWx0RmFkZUluU2Vjb25kcyk7XG5cbiAgICAgIGlmIChyZXQuX2ZhZGVUaW1lU2Vjb25kcyA8PSAwLjApIHtcbiAgICAgICAgcmV0Ll9mYWRlVGltZVNlY29uZHMgPSBEZWZhdWx0RmFkZUluU2Vjb25kcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg5Hjg7zjg4TjgrDjg6vjg7zjg5dcbiAgICBjb25zdCBwb3NlTGlzdEluZm86IFZhbHVlID0gcm9vdC5nZXRWYWx1ZUJ5U3RyaW5nKEdyb3Vwcyk7XG4gICAgY29uc3QgcG9zZUNvdW50OiBudW1iZXIgPSBwb3NlTGlzdEluZm8uZ2V0U2l6ZSgpO1xuXG4gICAgZm9yIChsZXQgcG9zZUluZGV4ID0gMDsgcG9zZUluZGV4IDwgcG9zZUNvdW50OyArK3Bvc2VJbmRleCkge1xuICAgICAgY29uc3QgaWRMaXN0SW5mbzogVmFsdWUgPSBwb3NlTGlzdEluZm8uZ2V0VmFsdWVCeUluZGV4KHBvc2VJbmRleCk7XG4gICAgICBjb25zdCBpZENvdW50OiBudW1iZXIgPSBpZExpc3RJbmZvLmdldFNpemUoKTtcbiAgICAgIGxldCBncm91cENvdW50ID0gMDtcblxuICAgICAgZm9yIChsZXQgZ3JvdXBJbmRleCA9IDA7IGdyb3VwSW5kZXggPCBpZENvdW50OyArK2dyb3VwSW5kZXgpIHtcbiAgICAgICAgY29uc3QgcGFydEluZm86IFZhbHVlID0gaWRMaXN0SW5mby5nZXRWYWx1ZUJ5SW5kZXgoZ3JvdXBJbmRleCk7XG4gICAgICAgIGNvbnN0IHBhcnREYXRhOiBQYXJ0RGF0YSA9IG5ldyBQYXJ0RGF0YSgpO1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJJZDogQ3ViaXNtSWRIYW5kbGUgPSBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoXG4gICAgICAgICAgcGFydEluZm8uZ2V0VmFsdWVCeVN0cmluZyhJZCkuZ2V0UmF3U3RyaW5nKClcbiAgICAgICAgKTtcblxuICAgICAgICBwYXJ0RGF0YS5wYXJ0SWQgPSBwYXJhbWV0ZXJJZDtcblxuICAgICAgICAvLyDjg6rjg7Pjgq/jgZnjgovjg5Hjg7zjg4Tjga7oqK3lrppcbiAgICAgICAgaWYgKCFwYXJ0SW5mby5nZXRWYWx1ZUJ5U3RyaW5nKExpbmspLmlzTnVsbCgpKSB7XG4gICAgICAgICAgY29uc3QgbGlua0xpc3RJbmZvOiBWYWx1ZSA9IHBhcnRJbmZvLmdldFZhbHVlQnlTdHJpbmcoTGluayk7XG4gICAgICAgICAgY29uc3QgbGlua0NvdW50OiBudW1iZXIgPSBsaW5rTGlzdEluZm8uZ2V0U2l6ZSgpO1xuXG4gICAgICAgICAgZm9yIChsZXQgbGlua0luZGV4ID0gMDsgbGlua0luZGV4IDwgbGlua0NvdW50OyArK2xpbmtJbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbGlua1BhcnQ6IFBhcnREYXRhID0gbmV3IFBhcnREYXRhKCk7XG4gICAgICAgICAgICBjb25zdCBsaW5rSWQ6IEN1YmlzbUlkSGFuZGxlID0gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpLmdldElkKFxuICAgICAgICAgICAgICBsaW5rTGlzdEluZm8uZ2V0VmFsdWVCeUluZGV4KGxpbmtJbmRleCkuZ2V0U3RyaW5nKClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxpbmtQYXJ0LnBhcnRJZCA9IGxpbmtJZDtcblxuICAgICAgICAgICAgcGFydERhdGEubGluay5wdXNoQmFjayhsaW5rUGFydCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0Ll9wYXJ0R3JvdXBzLnB1c2hCYWNrKHBhcnREYXRhLmNsb25lKCkpO1xuXG4gICAgICAgICsrZ3JvdXBDb3VudDtcbiAgICAgIH1cblxuICAgICAgcmV0Ll9wYXJ0R3JvdXBDb3VudHMucHVzaEJhY2soZ3JvdXBDb3VudCk7XG4gICAgfVxuXG4gICAgQ3ViaXNtSnNvbi5kZWxldGUoanNvbik7XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkuegtOajhOOBmeOCi1xuICAgKiBAcGFyYW0gcG9zZSDlr77osaHjga5DdWJpc21Qb3NlXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGRlbGV0ZShwb3NlOiBDdWJpc21Qb3NlKTogdm9pZCB7XG4gICAgaWYgKHBvc2UgIT0gbnVsbCkge1xuICAgICAgcG9zZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBruODkeODqeODoeODvOOCv+OBruabtOaWsFxuICAgKiBAcGFyYW0gbW9kZWwg5a++6LGh44Gu44Oi44OH44OrXG4gICAqIEBwYXJhbSBkZWx0YVRpbWVTZWNvbmRzIOODh+ODq+OCv+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlUGFyYW1ldGVycyhtb2RlbDogQ3ViaXNtTW9kZWwsIGRlbHRhVGltZVNlY29uZHM6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIOWJjeWbnuOBruODouODh+ODq+OBqOWQjOOBmOOBp+OBquOBhOWgtOWQiOOBr+WIneacn+WMluOBjOW/heimgVxuICAgIGlmIChtb2RlbCAhPSB0aGlzLl9sYXN0TW9kZWwpIHtcbiAgICAgIC8vIOODkeODqeODoeODvOOCv+OCpOODs+ODh+ODg+OCr+OCueOBruWIneacn+WMllxuICAgICAgdGhpcy5yZXNldChtb2RlbCk7XG4gICAgfVxuXG4gICAgdGhpcy5fbGFzdE1vZGVsID0gbW9kZWw7XG5cbiAgICAvLyDoqK3lrprjgYvjgonmmYLplpPjgpLlpInmm7TjgZnjgovjgajjgIHntYzpgY7mmYLplpPjgYzjg57jgqTjg4rjgrnjgavjgarjgovkuovjgYzjgYLjgovjga7jgafjgIHntYzpgY7mmYLplpMw44Go44GX44Gm5a++5b+cXG4gICAgaWYgKGRlbHRhVGltZVNlY29uZHMgPCAwLjApIHtcbiAgICAgIGRlbHRhVGltZVNlY29uZHMgPSAwLjA7XG4gICAgfVxuXG4gICAgbGV0IGJlZ2luSW5kZXggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wYXJ0R3JvdXBDb3VudHMuZ2V0U2l6ZSgpOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcnRHcm91cENvdW50OiBudW1iZXIgPSB0aGlzLl9wYXJ0R3JvdXBDb3VudHMuYXQoaSk7XG5cbiAgICAgIHRoaXMuZG9GYWRlKG1vZGVsLCBkZWx0YVRpbWVTZWNvbmRzLCBiZWdpbkluZGV4LCBwYXJ0R3JvdXBDb3VudCk7XG5cbiAgICAgIGJlZ2luSW5kZXggKz0gcGFydEdyb3VwQ291bnQ7XG4gICAgfVxuXG4gICAgdGhpcy5jb3B5UGFydE9wYWNpdGllcyhtb2RlbCk7XG4gIH1cblxuICAvKipcbiAgICog6KGo56S644KS5Yid5pyf5YyWXG4gICAqIEBwYXJhbSBtb2RlbCDlr77osaHjga7jg6Ljg4fjg6tcbiAgICogQG5vdGUg5LiN6YCP5piO5bqm44Gu5Yid5pyf5YCk44GMMOOBp+OBquOBhOODkeODqeODoeODvOOCv+OBr+OAgeS4jemAj+aYjuW6puOCku+8keOBq+ioreWumuOBmeOCi1xuICAgKi9cbiAgcHVibGljIHJlc2V0KG1vZGVsOiBDdWJpc21Nb2RlbCk6IHZvaWQge1xuICAgIGxldCBiZWdpbkluZGV4ID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fcGFydEdyb3VwQ291bnRzLmdldFNpemUoKTsgKytpKSB7XG4gICAgICBjb25zdCBncm91cENvdW50OiBudW1iZXIgPSB0aGlzLl9wYXJ0R3JvdXBDb3VudHMuYXQoaSk7XG5cbiAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IGJlZ2luSW5kZXg7IGogPCBiZWdpbkluZGV4ICsgZ3JvdXBDb3VudDsgKytqKSB7XG4gICAgICAgIHRoaXMuX3BhcnRHcm91cHMuYXQoaikuaW5pdGlhbGl6ZShtb2RlbCk7XG5cbiAgICAgICAgY29uc3QgcGFydHNJbmRleDogbnVtYmVyID0gdGhpcy5fcGFydEdyb3Vwcy5hdChqKS5wYXJ0SW5kZXg7XG4gICAgICAgIGNvbnN0IHBhcmFtSW5kZXg6IG51bWJlciA9IHRoaXMuX3BhcnRHcm91cHMuYXQoaikucGFyYW1ldGVySW5kZXg7XG5cbiAgICAgICAgaWYgKHBhcnRzSW5kZXggPCAwKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBtb2RlbC5zZXRQYXJ0T3BhY2l0eUJ5SW5kZXgocGFydHNJbmRleCwgaiA9PSBiZWdpbkluZGV4ID8gMS4wIDogMC4wKTtcbiAgICAgICAgbW9kZWwuc2V0UGFyYW1ldGVyVmFsdWVCeUluZGV4KHBhcmFtSW5kZXgsIGogPT0gYmVnaW5JbmRleCA/IDEuMCA6IDAuMCk7XG5cbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLl9wYXJ0R3JvdXBzLmF0KGopLmxpbmsuZ2V0U2l6ZSgpOyArK2spIHtcbiAgICAgICAgICB0aGlzLl9wYXJ0R3JvdXBzXG4gICAgICAgICAgICAuYXQoailcbiAgICAgICAgICAgIC5saW5rLmF0KGspXG4gICAgICAgICAgICAuaW5pdGlhbGl6ZShtb2RlbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYmVnaW5JbmRleCArPSBncm91cENvdW50O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqbjgpLjgrPjg5Tjg7xcbiAgICpcbiAgICogQHBhcmFtIG1vZGVsIOWvvuixoeOBruODouODh+ODq1xuICAgKi9cbiAgcHVibGljIGNvcHlQYXJ0T3BhY2l0aWVzKG1vZGVsOiBDdWJpc21Nb2RlbCk6IHZvaWQge1xuICAgIGZvciAoXG4gICAgICBsZXQgZ3JvdXBJbmRleCA9IDA7XG4gICAgICBncm91cEluZGV4IDwgdGhpcy5fcGFydEdyb3Vwcy5nZXRTaXplKCk7XG4gICAgICArK2dyb3VwSW5kZXhcbiAgICApIHtcbiAgICAgIGNvbnN0IHBhcnREYXRhOiBQYXJ0RGF0YSA9IHRoaXMuX3BhcnRHcm91cHMuYXQoZ3JvdXBJbmRleCk7XG5cbiAgICAgIGlmIChwYXJ0RGF0YS5saW5rLmdldFNpemUoKSA9PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlOyAvLyDpgKPli5XjgZnjgovjg5Hjg6njg6Hjg7zjgr/jga/jgarjgYRcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFydEluZGV4OiBudW1iZXIgPSB0aGlzLl9wYXJ0R3JvdXBzLmF0KGdyb3VwSW5kZXgpLnBhcnRJbmRleDtcbiAgICAgIGNvbnN0IG9wYWNpdHk6IG51bWJlciA9IG1vZGVsLmdldFBhcnRPcGFjaXR5QnlJbmRleChwYXJ0SW5kZXgpO1xuXG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgbGlua0luZGV4ID0gMDtcbiAgICAgICAgbGlua0luZGV4IDwgcGFydERhdGEubGluay5nZXRTaXplKCk7XG4gICAgICAgICsrbGlua0luZGV4XG4gICAgICApIHtcbiAgICAgICAgY29uc3QgbGlua1BhcnQ6IFBhcnREYXRhID0gcGFydERhdGEubGluay5hdChsaW5rSW5kZXgpO1xuICAgICAgICBjb25zdCBsaW5rUGFydEluZGV4OiBudW1iZXIgPSBsaW5rUGFydC5wYXJ0SW5kZXg7XG5cbiAgICAgICAgaWYgKGxpbmtQYXJ0SW5kZXggPCAwKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBtb2RlbC5zZXRQYXJ0T3BhY2l0eUJ5SW5kZXgobGlua1BhcnRJbmRleCwgb3BhY2l0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODkeODvOODhOOBruODleOCp+ODvOODieaTjeS9nOOCkuihjOOBhuOAglxuICAgKiBAcGFyYW0gbW9kZWwg5a++6LGh44Gu44Oi44OH44OrXG4gICAqIEBwYXJhbSBkZWx0YVRpbWVTZWNvbmRzIOODh+ODq+OCv+aZgumWk1vnp5JdXG4gICAqIEBwYXJhbSBiZWdpbkluZGV4IOODleOCp+ODvOODieaTjeS9nOOCkuihjOOBhuODkeODvOODhOOCsOODq+ODvOODl+OBruWFiOmgreOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gcGFydEdyb3VwQ291bnQg44OV44Kn44O844OJ5pON5L2c44KS6KGM44GG44OR44O844OE44Kw44Or44O844OX44Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZG9GYWRlKFxuICAgIG1vZGVsOiBDdWJpc21Nb2RlbCxcbiAgICBkZWx0YVRpbWVTZWNvbmRzOiBudW1iZXIsXG4gICAgYmVnaW5JbmRleDogbnVtYmVyLFxuICAgIHBhcnRHcm91cENvdW50OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgbGV0IHZpc2libGVQYXJ0SW5kZXggPSAtMTtcbiAgICBsZXQgbmV3T3BhY2l0eSA9IDEuMDtcblxuICAgIGNvbnN0IHBoaSA9IDAuNTtcbiAgICBjb25zdCBiYWNrT3BhY2l0eVRocmVzaG9sZCA9IDAuMTU7XG5cbiAgICAvLyDnj77lnKjjgIHooajnpLrnirbmhYvjgavjgarjgaPjgabjgYTjgovjg5Hjg7zjg4TjgpLlj5blvpdcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBiZWdpbkluZGV4OyBpIDwgYmVnaW5JbmRleCArIHBhcnRHcm91cENvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IHBhcnRJbmRleDogbnVtYmVyID0gdGhpcy5fcGFydEdyb3Vwcy5hdChpKS5wYXJ0SW5kZXg7XG4gICAgICBjb25zdCBwYXJhbUluZGV4OiBudW1iZXIgPSB0aGlzLl9wYXJ0R3JvdXBzLmF0KGkpLnBhcmFtZXRlckluZGV4O1xuXG4gICAgICBpZiAobW9kZWwuZ2V0UGFyYW1ldGVyVmFsdWVCeUluZGV4KHBhcmFtSW5kZXgpID4gRXBzaWxvbikge1xuICAgICAgICBpZiAodmlzaWJsZVBhcnRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2aXNpYmxlUGFydEluZGV4ID0gaTtcbiAgICAgICAgbmV3T3BhY2l0eSA9IG1vZGVsLmdldFBhcnRPcGFjaXR5QnlJbmRleChwYXJ0SW5kZXgpO1xuXG4gICAgICAgIC8vIOaWsOOBl+OBhOS4jemAj+aYjuW6puOCkuioiOeul1xuICAgICAgICBuZXdPcGFjaXR5ICs9IGRlbHRhVGltZVNlY29uZHMgLyB0aGlzLl9mYWRlVGltZVNlY29uZHM7XG5cbiAgICAgICAgaWYgKG5ld09wYWNpdHkgPiAxLjApIHtcbiAgICAgICAgICBuZXdPcGFjaXR5ID0gMS4wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHZpc2libGVQYXJ0SW5kZXggPCAwKSB7XG4gICAgICB2aXNpYmxlUGFydEluZGV4ID0gMDtcbiAgICAgIG5ld09wYWNpdHkgPSAxLjA7XG4gICAgfVxuXG4gICAgLy8g6KGo56S644OR44O844OE44CB6Z2e6KGo56S644OR44O844OE44Gu5LiN6YCP5piO5bqm44KS6Kit5a6a44GZ44KLXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gYmVnaW5JbmRleDsgaSA8IGJlZ2luSW5kZXggKyBwYXJ0R3JvdXBDb3VudDsgKytpKSB7XG4gICAgICBjb25zdCBwYXJ0c0luZGV4OiBudW1iZXIgPSB0aGlzLl9wYXJ0R3JvdXBzLmF0KGkpLnBhcnRJbmRleDtcblxuICAgICAgLy8g6KGo56S644OR44O844OE44Gu6Kit5a6aXG4gICAgICBpZiAodmlzaWJsZVBhcnRJbmRleCA9PSBpKSB7XG4gICAgICAgIG1vZGVsLnNldFBhcnRPcGFjaXR5QnlJbmRleChwYXJ0c0luZGV4LCBuZXdPcGFjaXR5KTsgLy8g5YWI44Gr6Kit5a6aXG4gICAgICB9XG4gICAgICAvLyDpnZ7ooajnpLrjg5Hjg7zjg4Tjga7oqK3lrppcbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgb3BhY2l0eTogbnVtYmVyID0gbW9kZWwuZ2V0UGFydE9wYWNpdHlCeUluZGV4KHBhcnRzSW5kZXgpO1xuICAgICAgICBsZXQgYTE6IG51bWJlcjsgLy8g6KiI566X44Gr44KI44Gj44Gm5rGC44KB44KJ44KM44KL5LiN6YCP5piO5bqmXG5cbiAgICAgICAgaWYgKG5ld09wYWNpdHkgPCBwaGkpIHtcbiAgICAgICAgICBhMSA9IChuZXdPcGFjaXR5ICogKHBoaSAtIDEpKSAvIHBoaSArIDEuMDsgLy8gKDAsMSksKHBoaSxwaGkp44KS6YCa44KL55u057ea5byPXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYTEgPSAoKDEgLSBuZXdPcGFjaXR5KSAqIHBoaSkgLyAoMS4wIC0gcGhpKTsgLy8gKDEsMCksKHBoaSxwaGkp44KS6YCa44KL55u057ea5byPXG4gICAgICAgIH1cblxuICAgICAgICAvLyDog4zmma/jga7opovjgYjjgovlibLlkIjjgpLliLbpmZDjgZnjgovloLTlkIhcbiAgICAgICAgY29uc3QgYmFja09wYWNpdHk6IG51bWJlciA9ICgxLjAgLSBhMSkgKiAoMS4wIC0gbmV3T3BhY2l0eSk7XG5cbiAgICAgICAgaWYgKGJhY2tPcGFjaXR5ID4gYmFja09wYWNpdHlUaHJlc2hvbGQpIHtcbiAgICAgICAgICBhMSA9IDEuMCAtIGJhY2tPcGFjaXR5VGhyZXNob2xkIC8gKDEuMCAtIG5ld09wYWNpdHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wYWNpdHkgPiBhMSkge1xuICAgICAgICAgIG9wYWNpdHkgPSBhMTsgLy8g6KiI566X44Gu5LiN6YCP5piO5bqm44KI44KK44KC5aSn44GN44GR44KM44Gw77yI5r+D44GR44KM44Gw77yJ5LiN6YCP5piO5bqm44KS5LiK44GS44KLXG4gICAgICAgIH1cblxuICAgICAgICBtb2RlbC5zZXRQYXJ0T3BhY2l0eUJ5SW5kZXgocGFydHNJbmRleCwgb3BhY2l0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2ZhZGVUaW1lU2Vjb25kcyA9IERlZmF1bHRGYWRlSW5TZWNvbmRzO1xuICAgIHRoaXMuX2xhc3RNb2RlbCA9IG51bGw7XG4gICAgdGhpcy5fcGFydEdyb3VwcyA9IG5ldyBjc21WZWN0b3I8UGFydERhdGE+KCk7XG4gICAgdGhpcy5fcGFydEdyb3VwQ291bnRzID0gbmV3IGNzbVZlY3RvcjxudW1iZXI+KCk7XG4gIH1cblxuICBfcGFydEdyb3VwczogY3NtVmVjdG9yPFBhcnREYXRhPjsgLy8g44OR44O844OE44Kw44Or44O844OXXG4gIF9wYXJ0R3JvdXBDb3VudHM6IGNzbVZlY3RvcjxudW1iZXI+OyAvLyDjgZ3jgozjgZ7jgozjga7jg5Hjg7zjg4TjgrDjg6vjg7zjg5fjga7lgIvmlbBcbiAgX2ZhZGVUaW1lU2Vjb25kczogbnVtYmVyOyAvLyDjg5Xjgqfjg7zjg4nmmYLplpNb56eSXVxuICBfbGFzdE1vZGVsOiBDdWJpc21Nb2RlbDsgLy8g5YmN5Zue5pON5L2c44GX44Gf44Oi44OH44OrXG59XG5cbi8qKlxuICog44OR44O844OE44Gr44G+44Gk44KP44KL44OH44O844K/44KS566h55CGXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJ0RGF0YSB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIGNvbnN0cnVjdG9yKHY/OiBQYXJ0RGF0YSkge1xuICAgIHRoaXMucGFyYW1ldGVySW5kZXggPSAwO1xuICAgIHRoaXMucGFydEluZGV4ID0gMDtcbiAgICB0aGlzLmxpbmsgPSBuZXcgY3NtVmVjdG9yPFBhcnREYXRhPigpO1xuXG4gICAgaWYgKHYgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnBhcnRJZCA9IHYucGFydElkO1xuXG4gICAgICBmb3IgKFxuICAgICAgICBjb25zdCBpdGU6IGl0ZXJhdG9yPFBhcnREYXRhPiA9IHYubGluay5iZWdpbigpO1xuICAgICAgICBpdGUubm90RXF1YWwodi5saW5rLmVuZCgpKTtcbiAgICAgICAgaXRlLnByZUluY3JlbWVudCgpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5saW5rLnB1c2hCYWNrKGl0ZS5wdHIoKS5jbG9uZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogPea8lOeul+WtkOOBruOCquODvOODkOODvOODreODvOODiVxuICAgKi9cbiAgcHVibGljIGFzc2lnbm1lbnQodjogUGFydERhdGEpOiBQYXJ0RGF0YSB7XG4gICAgdGhpcy5wYXJ0SWQgPSB2LnBhcnRJZDtcblxuICAgIGZvciAoXG4gICAgICBjb25zdCBpdGU6IGl0ZXJhdG9yPFBhcnREYXRhPiA9IHYubGluay5iZWdpbigpO1xuICAgICAgaXRlLm5vdEVxdWFsKHYubGluay5lbmQoKSk7XG4gICAgICBpdGUucHJlSW5jcmVtZW50KClcbiAgICApIHtcbiAgICAgIHRoaXMubGluay5wdXNoQmFjayhpdGUucHRyKCkuY2xvbmUoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICog5Yid5pyf5YyWXG4gICAqIEBwYXJhbSBtb2RlbCDliJ3mnJ/ljJbjgavkvb/nlKjjgZnjgovjg6Ljg4fjg6tcbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplKG1vZGVsOiBDdWJpc21Nb2RlbCk6IHZvaWQge1xuICAgIHRoaXMucGFyYW1ldGVySW5kZXggPSBtb2RlbC5nZXRQYXJhbWV0ZXJJbmRleCh0aGlzLnBhcnRJZCk7XG4gICAgdGhpcy5wYXJ0SW5kZXggPSBtb2RlbC5nZXRQYXJ0SW5kZXgodGhpcy5wYXJ0SWQpO1xuXG4gICAgbW9kZWwuc2V0UGFyYW1ldGVyVmFsdWVCeUluZGV4KHRoaXMucGFyYW1ldGVySW5kZXgsIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCquODluOCuOOCp+OCr+ODiOOBruOCs+ODlOODvOOCkueUn+aIkOOBmeOCi1xuICAgKi9cbiAgcHVibGljIGNsb25lKCk6IFBhcnREYXRhIHtcbiAgICBjb25zdCBjbG9uZVBhcnREYXRhOiBQYXJ0RGF0YSA9IG5ldyBQYXJ0RGF0YSgpO1xuXG4gICAgY2xvbmVQYXJ0RGF0YS5wYXJ0SWQgPSB0aGlzLnBhcnRJZDtcbiAgICBjbG9uZVBhcnREYXRhLnBhcmFtZXRlckluZGV4ID0gdGhpcy5wYXJhbWV0ZXJJbmRleDtcbiAgICBjbG9uZVBhcnREYXRhLnBhcnRJbmRleCA9IHRoaXMucGFydEluZGV4O1xuICAgIGNsb25lUGFydERhdGEubGluayA9IG5ldyBjc21WZWN0b3I8UGFydERhdGE+KCk7XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGl0ZTogaXRlcmF0b3I8UGFydERhdGE+ID0gdGhpcy5saW5rLmJlZ2luKCk7XG4gICAgICBpdGUubm90RXF1YWwodGhpcy5saW5rLmVuZCgpKTtcbiAgICAgIGl0ZS5pbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgY2xvbmVQYXJ0RGF0YS5saW5rLnB1c2hCYWNrKGl0ZS5wdHIoKS5jbG9uZSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmVQYXJ0RGF0YTtcbiAgfVxuXG4gIHBhcnRJZDogQ3ViaXNtSWRIYW5kbGU7IC8vIOODkeODvOODhElEXG4gIHBhcmFtZXRlckluZGV4OiBudW1iZXI7IC8vIOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICBwYXJ0SW5kZXg6IG51bWJlcjsgLy8g44OR44O844OE44Gu44Kk44Oz44OH44OD44Kv44K5XG4gIGxpbms6IGNzbVZlY3RvcjxQYXJ0RGF0YT47IC8vIOmAo+WLleOBmeOCi+ODkeODqeODoeODvOOCv1xufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jdWJpc21wb3NlJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Qb3NlID0gJC5DdWJpc21Qb3NlO1xuICBleHBvcnQgdHlwZSBDdWJpc21Qb3NlID0gJC5DdWJpc21Qb3NlO1xuICBleHBvcnQgY29uc3QgUGFydERhdGEgPSAkLlBhcnREYXRhO1xuICBleHBvcnQgdHlwZSBQYXJ0RGF0YSA9ICQuUGFydERhdGE7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQThRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1UUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWdCQTtBQUFBO0FBelJBO0FBOFJBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUFBO0FBNUVBO0FBK0VBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/effect/cubismpose.ts\n");

/***/ }),

/***/ "./Framework/src/icubismmodelsetting.ts":
/*!**********************************************!*\
  !*** ./Framework/src/icubismmodelsetting.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.ICubismModelSetting = void 0;\nvar ICubismModelSetting = (function () {\n    function ICubismModelSetting() {\n    }\n    return ICubismModelSetting;\n}());\nexports.ICubismModelSetting = ICubismModelSetting;\nvar $ = __importStar(__webpack_require__(/*! ./icubismmodelsetting */ \"./Framework/src/icubismmodelsetting.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.ICubismModelSetting = $.ICubismModelSetting;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2ljdWJpc21tb2RlbHNldHRpbmcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL2ljdWJpc21tb2RlbHNldHRpbmcudHM/NjQxMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBDdWJpc21JZEhhbmRsZSB9IGZyb20gJy4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgY3NtTWFwIH0gZnJvbSAnLi90eXBlL2NzbW1hcCc7XG5cbi8qKlxuICog44Oi44OH44Or6Kit5a6a5oOF5aCx44KS5Y+W44KK5omx44GG6Zai5pWw44KS5a6j6KiA44GX44Gf57SU57KL5Luu5oOz44Kv44Op44K544CCXG4gKlxuICog44GT44Gu44Kv44Op44K544KS57aZ5om/44GZ44KL44GT44Go44Gn44CB44Oi44OH44Or6Kit5a6a5oOF5aCx44KS5Y+W44KK5omx44GG44Kv44Op44K544Gr44Gq44KL44CCXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJQ3ViaXNtTW9kZWxTZXR0aW5nIHtcbiAgLyoqXG4gICAqIE1vY+ODleOCoeOCpOODq+OBruWQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIE1vY+ODleOCoeOCpOODq+OBruWQjeWJjVxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldE1vZGVsRmlsZU5hbWUoKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgYzkvb/nlKjjgZnjgovjg4bjgq/jgrnjg4Hjg6Pjga7mlbDjgpLlj5blvpfjgZnjgotcbiAgICog44OG44Kv44K544OB44Oj44Gu5pWwXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGV4dHVyZUNvdW50KCk6IG51bWJlcjtcblxuICAvKipcbiAgICog44OG44Kv44K544OB44Oj44GM6YWN572u44GV44KM44Gf44OH44Kj44Os44Kv44OI44Oq44Gu5ZCN5YmN44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44OG44Kv44K544OB44Oj44GM6YWN572u44GV44KM44Gf44OH44Kj44Os44Kv44OI44Oq44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGV4dHVyZURpcmVjdG9yeSgpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBjOS9v+eUqOOBmeOCi+ODhuOCr+OCueODgeODo+OBruWQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44OG44Kv44K544OB44Oj44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGV4dHVyZUZpbGVOYW1lKGluZGV4OiBudW1iZXIpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBq+ioreWumuOBleOCjOOBn+W9k+OBn+OCiuWIpOWumuOBruaVsOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODouODh+ODq+OBq+ioreWumuOBleOCjOOBn+W9k+OBn+OCiuWIpOWumuOBruaVsFxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldEhpdEFyZWFzQ291bnQoKTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiDlvZPjgZ/jgorliKTlrprjgavoqK3lrprjgZXjgozjgZ9JROOCkuWPluW+l+OBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44GuaW5kZXhcbiAgICogQHJldHVybiDlvZPjgZ/jgorliKTlrprjgavoqK3lrprjgZXjgozjgZ9JRFxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldEhpdEFyZWFJZChpbmRleDogbnVtYmVyKTogQ3ViaXNtSWRIYW5kbGU7XG5cbiAgLyoqXG4gICAqIOW9k+OBn+OCiuWIpOWumuOBq+ioreWumuOBleOCjOOBn+WQjeWJjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g5b2T44Gf44KK5Yik5a6a44Gr6Kit5a6a44GV44KM44Gf5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0SGl0QXJlYU5hbWUoaW5kZXg6IG51bWJlcik6IHN0cmluZztcblxuICAvKipcbiAgICog54mp55CG5ryU566X6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmN44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g54mp55CG5ryU566X6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0UGh5c2ljc0ZpbGVOYW1lKCk6IHN0cmluZztcblxuICAvKipcbiAgICog44OR44O844OE5YiH44KK5pu/44GI6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmN44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44OR44O844OE5YiH44KK5pu/44GI6Kit5a6a44OV44Kh44Kk44Or44Gu5ZCN5YmNXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0UG9zZUZpbGVOYW1lKCk6IHN0cmluZztcblxuICAvKipcbiAgICog6KGo5oOF6Kit5a6a44OV44Kh44Kk44Or44Gu5pWw44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g6KGo5oOF6Kit5a6a44OV44Kh44Kk44Or44Gu5pWwXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0RXhwcmVzc2lvbkNvdW50KCk6IG51bWJlcjtcblxuICAvKipcbiAgICog6KGo5oOF6Kit5a6a44OV44Kh44Kk44Or44KS6K2Y5Yil44GZ44KL5ZCN5YmN77yI5Yil5ZCN77yJ44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBpbmRleCDphY3liJfjga7jgqTjg7Pjg4fjg4Pjgq/jgrnlgKRcbiAgICogQHJldHVybiDooajmg4Xjga7lkI3liY1cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRFeHByZXNzaW9uTmFtZShpbmRleDogbnVtYmVyKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiDooajmg4XoqK3lrprjg5XjgqHjgqTjg6vjga7lkI3liY3jgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOihqOaDheioreWumuODleOCoeOCpOODq+OBruWQjeWJjVxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldEV4cHJlc3Npb25GaWxlTmFtZShpbmRleDogbnVtYmVyKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7mlbDjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7mlbBcbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRNb3Rpb25Hcm91cENvdW50KCk6IG51bWJlcjtcblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Kw44Or44O844OX44Gu5ZCN5YmN44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBpbmRleCDphY3liJfjga7jgqTjg7Pjg4fjg4Pjgq/jgrnlgKRcbiAgICogQHJldHVybiDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7lkI3liY1cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRNb3Rpb25Hcm91cE5hbWUoaW5kZXg6IG51bWJlcik6IHN0cmluZztcblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Kw44Or44O844OX44Gr5ZCr44G+44KM44KL44Oi44O844K344On44Oz44Gu5pWw44KS5Y+W5b6X44GZ44KLXG4gICAqIEBwYXJhbSBncm91cE5hbWUg44Oi44O844K344On44Oz44Kw44Or44O844OX44Gu5ZCN5YmNXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Kw44Or44O844OX44Gu5pWwXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0TW90aW9uQ291bnQoZ3JvdXBOYW1lOiBzdHJpbmcpOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIOOCsOODq+ODvOODl+WQjeOBqOOCpOODs+ODh+ODg+OCr+OCueWApOOBi+OCieODouODvOOCt+ODp+ODs+ODleOCoeOCpOODq+WQjeOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXBOYW1lIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruWQjeWJjVxuICAgKiBAcGFyYW0gaW5kZXggICAgIOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+ODleOCoeOCpOODq+OBruWQjeWJjVxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldE1vdGlvbkZpbGVOYW1lKGdyb3VwTmFtZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjgavlr77lv5zjgZnjgovjgrXjgqbjg7Pjg4njg5XjgqHjgqTjg6vjga7lkI3liY3jgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDjg6Ljg7zjgrfjg6fjg7PjgrDjg6vjg7zjg5fjga7lkI3liY1cbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOOCteOCpuODs+ODieODleOCoeOCpOODq+OBruWQjeWJjVxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldE1vdGlvblNvdW5kRmlsZU5hbWUoXG4gICAgZ3JvdXBOYW1lOiBzdHJpbmcsXG4gICAgaW5kZXg6IG51bWJlclxuICApOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+mWi+Wni+aZguOBruODleOCp+ODvOODieOCpOODs+WHpueQhuaZgumWk+OCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXBOYW1lIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruWQjeWJjVxuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Kk44Oz5Yem55CG5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRNb3Rpb25GYWRlSW5UaW1lVmFsdWUoXG4gICAgZ3JvdXBOYW1lOiBzdHJpbmcsXG4gICAgaW5kZXg6IG51bWJlclxuICApOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+e1guS6huaZguOBruODleOCp+ODvOODieOCouOCpuODiOWHpueQhuaZgumWk+OCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXBOYW1lIOODouODvOOCt+ODp+ODs+OCsOODq+ODvOODl+OBruWQjeWJjVxuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Ki44Km44OI5Yem55CG5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRNb3Rpb25GYWRlT3V0VGltZVZhbHVlKFxuICAgIGdyb3VwTmFtZTogc3RyaW5nLFxuICAgIGluZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7jg5XjgqHjgqTjg6vlkI3jgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7jg5XjgqHjgqTjg6vlkI1cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRVc2VyRGF0YUZpbGUoKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiDjg6zjgqTjgqLjgqbjg4jmg4XloLHjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIG91dExheW91dE1hcCBjc21NYXDjgq/jg6njgrnjga7jgqTjg7Pjgrnjgr/jg7PjgrlcbiAgICogQHJldHVybiB0cnVlIOODrOOCpOOCouOCpuODiOaDheWgseOBjOWtmOWcqOOBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOODrOOCpOOCouOCpuODiOaDheWgseOBjOWtmOWcqOOBl+OBquOBhFxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldExheW91dE1hcChvdXRMYXlvdXRNYXA6IGNzbU1hcDxzdHJpbmcsIG51bWJlcj4pOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiDnm67jg5Hjg4HjgavplqLpgKPku5jjgZHjgonjgozjgZ/jg5Hjg6njg6Hjg7zjgr/jga7mlbDjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDnm67jg5Hjg4HjgavplqLpgKPku5jjgZHjgonjgozjgZ/jg5Hjg6njg6Hjg7zjgr/jga7mlbBcbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRFeWVCbGlua1BhcmFtZXRlckNvdW50KCk6IG51bWJlcjtcblxuICAvKipcbiAgICog55uu44OR44OB44Gr6Zai6YCj5LuY44GR44KJ44KM44Gf44OR44Op44Oh44O844K/44GuSUTjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGluZGV4IOmFjeWIl+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv0lEXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0RXllQmxpbmtQYXJhbWV0ZXJJZChpbmRleDogbnVtYmVyKTogQ3ViaXNtSWRIYW5kbGU7XG5cbiAgLyoqXG4gICAqIOODquODg+ODl+OCt+ODs+OCr+OBq+mWoumAo+S7mOOBkeOCieOCjOOBn+ODkeODqeODoeODvOOCv+OBruaVsOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODquODg+ODl+OCt+ODs+OCr+OBq+mWoumAo+S7mOOBkeOCieOCjOOBn+ODkeODqeODoeODvOOCv+OBruaVsFxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGdldExpcFN5bmNQYXJhbWV0ZXJDb3VudCgpOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIOODquODg+ODl+OCt+ODs+OCr+OBq+mWoumAo+S7mOOBkeOCieOCjOOBn+ODkeODqeODoeODvOOCv+OBruaVsOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg6YWN5YiX44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4g44OR44Op44Oh44O844K/SURcbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRMaXBTeW5jUGFyYW1ldGVySWQoaW5kZXg6IG51bWJlcik6IEN1YmlzbUlkSGFuZGxlO1xufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9pY3ViaXNtbW9kZWxzZXR0aW5nJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBJQ3ViaXNtTW9kZWxTZXR0aW5nID0gJC5JQ3ViaXNtTW9kZWxTZXR0aW5nO1xuICBleHBvcnQgdHlwZSBJQ3ViaXNtTW9kZWxTZXR0aW5nID0gJC5JQ3ViaXNtTW9kZWxTZXR0aW5nO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7QUFBQTtBQW1MQTtBQUFBO0FBQUE7QUFuTEE7QUFzTEE7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/icubismmodelsetting.ts\n");

/***/ }),

/***/ "./Framework/src/id/cubismid.ts":
/*!**************************************!*\
  !*** ./Framework/src/id/cubismid.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismId = void 0;\nvar csmstring_1 = __webpack_require__(/*! ../type/csmstring */ \"./Framework/src/type/csmstring.ts\");\nvar CubismId = (function () {\n    function CubismId(id) {\n        if (typeof id === 'string') {\n            this._id = new csmstring_1.csmString(id);\n            return;\n        }\n        this._id = id;\n    }\n    CubismId.prototype.getString = function () {\n        return this._id;\n    };\n    CubismId.prototype.isEqual = function (c) {\n        if (typeof c === 'string') {\n            return this._id.isEqual(c);\n        }\n        else if (c instanceof csmstring_1.csmString) {\n            return this._id.isEqual(c.s);\n        }\n        else if (c instanceof CubismId) {\n            return this._id.isEqual(c._id.s);\n        }\n        return false;\n    };\n    CubismId.prototype.isNotEqual = function (c) {\n        if (typeof c == 'string') {\n            return !this._id.isEqual(c);\n        }\n        else if (c instanceof csmstring_1.csmString) {\n            return !this._id.isEqual(c.s);\n        }\n        else if (c instanceof CubismId) {\n            return !this._id.isEqual(c._id.s);\n        }\n        return false;\n    };\n    return CubismId;\n}());\nexports.CubismId = CubismId;\nvar $ = __importStar(__webpack_require__(/*! ./cubismid */ \"./Framework/src/id/cubismid.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismId = $.CubismId;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2lkL2N1YmlzbWlkLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9pZC9jdWJpc21pZC50cz8xZjE1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IGNzbVN0cmluZyB9IGZyb20gJy4uL3R5cGUvY3Ntc3RyaW5nJztcblxuLyoqXG4gKiDjg5Hjg6njg6Hjg7zjgr/lkI3jg7vjg5Hjg7zjg4TlkI3jg7tEcmF3YWJsZeWQjeOCkuS/neaMgVxuICpcbiAqIOODkeODqeODoeODvOOCv+WQjeODu+ODkeODvOODhOWQjeODu0RyYXdhYmxl5ZCN44KS5L+d5oyB44GZ44KL44Kv44Op44K544CCXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21JZCB7XG4gIC8qKlxuICAgKiBJROWQjeOCkuWPluW+l+OBmeOCi1xuICAgKi9cbiAgcHVibGljIGdldFN0cmluZygpOiBjc21TdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihpZDogc3RyaW5nIHwgY3NtU3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2lkID0gbmV3IGNzbVN0cmluZyhpZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5faWQgPSBpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBpZOOCkuavlOi8g1xuICAgKiBAcGFyYW0gYyDmr5TovIPjgZnjgotpZFxuICAgKiBAcmV0dXJuIOWQjOOBmOOBquOCieOBsHRydWUs55Ww44Gq44Gj44Gm44GE44KM44GwZmFsc2XjgpLov5TjgZlcbiAgICovXG4gIHB1YmxpYyBpc0VxdWFsKGM6IHN0cmluZyB8IGNzbVN0cmluZyB8IEN1YmlzbUlkKTogYm9vbGVhbiB7XG4gICAgaWYgKHR5cGVvZiBjID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRoaXMuX2lkLmlzRXF1YWwoYyk7XG4gICAgfSBlbHNlIGlmIChjIGluc3RhbmNlb2YgY3NtU3RyaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5faWQuaXNFcXVhbChjLnMpO1xuICAgIH0gZWxzZSBpZiAoYyBpbnN0YW5jZW9mIEN1YmlzbUlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5faWQuaXNFcXVhbChjLl9pZC5zKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIGlk44KS5q+U6LyDXG4gICAqIEBwYXJhbSBjIOavlOi8g+OBmeOCi2lkXG4gICAqIEByZXR1cm4g5ZCM44GY44Gq44KJ44GwdHJ1ZSznlbDjgarjgaPjgabjgYTjgozjgbBmYWxzZeOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGlzTm90RXF1YWwoYzogc3RyaW5nIHwgY3NtU3RyaW5nIHwgQ3ViaXNtSWQpOiBib29sZWFuIHtcbiAgICBpZiAodHlwZW9mIGMgPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiAhdGhpcy5faWQuaXNFcXVhbChjKTtcbiAgICB9IGVsc2UgaWYgKGMgaW5zdGFuY2VvZiBjc21TdHJpbmcpIHtcbiAgICAgIHJldHVybiAhdGhpcy5faWQuaXNFcXVhbChjLnMpO1xuICAgIH0gZWxzZSBpZiAoYyBpbnN0YW5jZW9mIEN1YmlzbUlkKSB7XG4gICAgICByZXR1cm4gIXRoaXMuX2lkLmlzRXF1YWwoYy5faWQucyk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX2lkOiBjc21TdHJpbmc7IC8vIElE5ZCNXG59XG5cbmV4cG9ydCBkZWNsYXJlIHR5cGUgQ3ViaXNtSWRIYW5kbGUgPSBDdWJpc21JZDtcblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtaWQnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbUlkID0gJC5DdWJpc21JZDtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtSWQgPSAkLkN1YmlzbUlkO1xuICBleHBvcnQgdHlwZSBDdWJpc21JZEhhbmRsZSA9ICQuQ3ViaXNtSWRIYW5kbGU7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQU9BO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFkQTtBQUNBO0FBQ0E7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQXJEQTtBQTBEQTtBQUVBO0FBQUE7QUFDQTtBQUdBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/id/cubismid.ts\n");

/***/ }),

/***/ "./Framework/src/id/cubismidmanager.ts":
/*!*********************************************!*\
  !*** ./Framework/src/id/cubismidmanager.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismIdManager = void 0;\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismid_1 = __webpack_require__(/*! ./cubismid */ \"./Framework/src/id/cubismid.ts\");\nvar CubismIdManager = (function () {\n    function CubismIdManager() {\n        this._ids = new csmvector_1.csmVector();\n    }\n    CubismIdManager.prototype.release = function () {\n        for (var i = 0; i < this._ids.getSize(); ++i) {\n            this._ids.set(i, void 0);\n        }\n        this._ids = null;\n    };\n    CubismIdManager.prototype.registerIds = function (ids) {\n        for (var i = 0; i < ids.length; i++) {\n            this.registerId(ids[i]);\n        }\n    };\n    CubismIdManager.prototype.registerId = function (id) {\n        var result = null;\n        if ('string' == typeof id) {\n            if ((result = this.findId(id)) != null) {\n                return result;\n            }\n            result = new cubismid_1.CubismId(id);\n            this._ids.pushBack(result);\n        }\n        else {\n            return this.registerId(id.s);\n        }\n        return result;\n    };\n    CubismIdManager.prototype.getId = function (id) {\n        return this.registerId(id);\n    };\n    CubismIdManager.prototype.isExist = function (id) {\n        if ('string' == typeof id) {\n            return this.findId(id) != null;\n        }\n        return this.isExist(id.s);\n    };\n    CubismIdManager.prototype.findId = function (id) {\n        for (var i = 0; i < this._ids.getSize(); ++i) {\n            if (this._ids\n                .at(i)\n                .getString()\n                .isEqual(id)) {\n                return this._ids.at(i);\n            }\n        }\n        return null;\n    };\n    return CubismIdManager;\n}());\nexports.CubismIdManager = CubismIdManager;\nvar $ = __importStar(__webpack_require__(/*! ./cubismidmanager */ \"./Framework/src/id/cubismidmanager.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismIdManager = $.CubismIdManager;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2lkL2N1YmlzbWlkbWFuYWdlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvaWQvY3ViaXNtaWRtYW5hZ2VyLnRzPzZmOWUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgY3NtU3RyaW5nIH0gZnJvbSAnLi4vdHlwZS9jc21zdHJpbmcnO1xuaW1wb3J0IHsgY3NtVmVjdG9yIH0gZnJvbSAnLi4vdHlwZS9jc212ZWN0b3InO1xuaW1wb3J0IHsgQ3ViaXNtSWQgfSBmcm9tICcuL2N1YmlzbWlkJztcblxuLyoqXG4gKiBJROWQjeOBrueuoeeQhlxuICpcbiAqIElE5ZCN44KS566h55CG44GZ44KL44CCXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21JZE1hbmFnZXIge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5faWRzID0gbmV3IGNzbVZlY3RvcjxDdWJpc21JZD4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjgrnjg4jjg6njgq/jgr/nm7jlvZPjga7lh6bnkIZcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5faWRzLmdldFNpemUoKTsgKytpKSB7XG4gICAgICB0aGlzLl9pZHMuc2V0KGksIHZvaWQgMCk7XG4gICAgfVxuICAgIHRoaXMuX2lkcyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogSUTlkI3jgpLjg6rjgrnjg4jjgYvjgonnmbvpjLJcbiAgICpcbiAgICogQHBhcmFtIGlkcyBJROWQjeODquOCueODiFxuICAgKiBAcGFyYW0gY291bnQgSUTjga7lgIvmlbBcbiAgICovXG4gIHB1YmxpYyByZWdpc3RlcklkcyhpZHM6IHN0cmluZ1tdIHwgY3NtU3RyaW5nW10pOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5yZWdpc3RlcklkKGlkc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIElE5ZCN44KS55m76YyyXG4gICAqXG4gICAqIEBwYXJhbSBpZCBJROWQjVxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVySWQoaWQ6IHN0cmluZyB8IGNzbVN0cmluZyk6IEN1YmlzbUlkIHtcbiAgICBsZXQgcmVzdWx0OiBDdWJpc21JZCA9IG51bGw7XG5cbiAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGlkKSB7XG4gICAgICBpZiAoKHJlc3VsdCA9IHRoaXMuZmluZElkKGlkKSkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSBuZXcgQ3ViaXNtSWQoaWQpO1xuICAgICAgdGhpcy5faWRzLnB1c2hCYWNrKHJlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVySWQoaWQucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJROWQjeOBi+OCiUlE44KS5Y+W5b6X44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSBpZCBJROWQjVxuICAgKi9cbiAgcHVibGljIGdldElkKGlkOiBjc21TdHJpbmcgfCBzdHJpbmcpOiBDdWJpc21JZCB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJJZChpZCk7XG4gIH1cblxuICAvKipcbiAgICogSUTlkI3jgYvjgolJROOBrueiuuiqjVxuICAgKlxuICAgKiBAcmV0dXJuIHRydWUg5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNFeGlzdChpZDogY3NtU3RyaW5nIHwgc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmluZElkKGlkKSAhPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pc0V4aXN0KGlkLnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIElE5ZCN44GL44KJSUTjgpLmpJzntKLjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtIGlkIElE5ZCNXG4gICAqIEByZXR1cm4g55m76Yyy44GV44KM44Gm44GE44KLSUTjgILjgarjgZHjgozjgbBOVUxM44CCXG4gICAqL1xuICBwcml2YXRlIGZpbmRJZChpZDogc3RyaW5nKTogQ3ViaXNtSWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5faWRzLmdldFNpemUoKTsgKytpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2lkc1xuICAgICAgICAgIC5hdChpKVxuICAgICAgICAgIC5nZXRTdHJpbmcoKVxuICAgICAgICAgIC5pc0VxdWFsKGlkKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZHMuYXQoaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIF9pZHM6IGNzbVZlY3RvcjxDdWJpc21JZD47IC8vIOeZu+mMsuOBleOCjOOBpuOBhOOCi0lE44Gu44Oq44K544OIXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbWlkbWFuYWdlcic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgQ3ViaXNtSWRNYW5hZ2VyID0gJC5DdWJpc21JZE1hbmFnZXI7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbUlkTWFuYWdlciA9ICQuQ3ViaXNtSWRNYW5hZ2VyO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQU9BO0FBSUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQWhHQTtBQW1HQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/id/cubismidmanager.ts\n");

/***/ }),

/***/ "./Framework/src/live2dcubismframework.ts":
/*!************************************************!*\
  !*** ./Framework/src/live2dcubismframework.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.LogLevel = exports.Option = exports.CubismFramework = exports.csmDelete = exports.Constant = exports.strtod = void 0;\nvar cubismidmanager_1 = __webpack_require__(/*! ./id/cubismidmanager */ \"./Framework/src/id/cubismidmanager.ts\");\nvar cubismrenderer_1 = __webpack_require__(/*! ./rendering/cubismrenderer */ \"./Framework/src/rendering/cubismrenderer.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ./utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ./utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nfunction strtod(s, endPtr) {\n    var index = 0;\n    for (var i = 1;; i++) {\n        var testC = s.slice(i - 1, i);\n        if (testC == 'e' || testC == '-' || testC == 'E') {\n            continue;\n        }\n        var test = s.substring(0, i);\n        var number = Number(test);\n        if (isNaN(number)) {\n            break;\n        }\n        index = i;\n    }\n    var d = parseFloat(s);\n    if (isNaN(d)) {\n        d = NaN;\n    }\n    endPtr[0] = s.slice(index);\n    return d;\n}\nexports.strtod = strtod;\nvar s_isStarted = false;\nvar s_isInitialized = false;\nvar s_option = null;\nvar s_cubismIdManager = null;\nexports.Constant = Object.freeze({\n    vertexOffset: 0,\n    vertexStep: 2\n});\nfunction csmDelete(address) {\n    if (!address) {\n        return;\n    }\n    address = void 0;\n}\nexports.csmDelete = csmDelete;\nvar CubismFramework = (function () {\n    function CubismFramework() {\n    }\n    CubismFramework.startUp = function (option) {\n        if (option === void 0) { option = null; }\n        if (s_isStarted) {\n            cubismdebug_1.CubismLogInfo('CubismFramework.startUp() is already done.');\n            return s_isStarted;\n        }\n        s_option = option;\n        if (s_option != null) {\n            Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\n        }\n        s_isStarted = true;\n        if (s_isStarted) {\n            var version = Live2DCubismCore.Version.csmGetVersion();\n            var major = (version & 0xff000000) >> 24;\n            var minor = (version & 0x00ff0000) >> 16;\n            var patch = version & 0x0000ffff;\n            var versionNumber = version;\n            cubismdebug_1.CubismLogInfo(\"Live2D Cubism Core version: {0}.{1}.{2} ({3})\", ('00' + major).slice(-2), ('00' + minor).slice(-2), ('0000' + patch).slice(-4), versionNumber);\n        }\n        cubismdebug_1.CubismLogInfo('CubismFramework.startUp() is complete.');\n        return s_isStarted;\n    };\n    CubismFramework.cleanUp = function () {\n        s_isStarted = false;\n        s_isInitialized = false;\n        s_option = null;\n        s_cubismIdManager = null;\n    };\n    CubismFramework.initialize = function () {\n        cubismdebug_1.CSM_ASSERT(s_isStarted);\n        if (!s_isStarted) {\n            cubismdebug_1.CubismLogWarning('CubismFramework is not started.');\n            return;\n        }\n        if (s_isInitialized) {\n            cubismdebug_1.CubismLogWarning('CubismFramework.initialize() skipped, already initialized.');\n            return;\n        }\n        cubismjson_1.Value.staticInitializeNotForClientCall();\n        s_cubismIdManager = new cubismidmanager_1.CubismIdManager();\n        s_isInitialized = true;\n        cubismdebug_1.CubismLogInfo('CubismFramework.initialize() is complete.');\n    };\n    CubismFramework.dispose = function () {\n        cubismdebug_1.CSM_ASSERT(s_isStarted);\n        if (!s_isStarted) {\n            cubismdebug_1.CubismLogWarning('CubismFramework is not started.');\n            return;\n        }\n        if (!s_isInitialized) {\n            cubismdebug_1.CubismLogWarning('CubismFramework.dispose() skipped, not initialized.');\n            return;\n        }\n        cubismjson_1.Value.staticReleaseNotForClientCall();\n        s_cubismIdManager.release();\n        s_cubismIdManager = null;\n        cubismrenderer_1.CubismRenderer.staticRelease();\n        s_isInitialized = false;\n        cubismdebug_1.CubismLogInfo('CubismFramework.dispose() is complete.');\n    };\n    CubismFramework.isStarted = function () {\n        return s_isStarted;\n    };\n    CubismFramework.isInitialized = function () {\n        return s_isInitialized;\n    };\n    CubismFramework.coreLogFunction = function (message) {\n        if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\n            return;\n        }\n        Live2DCubismCore.Logging.csmGetLogFunction()(message);\n    };\n    CubismFramework.getLoggingLevel = function () {\n        if (s_option != null) {\n            return s_option.loggingLevel;\n        }\n        return LogLevel.LogLevel_Off;\n    };\n    CubismFramework.getIdManager = function () {\n        return s_cubismIdManager;\n    };\n    return CubismFramework;\n}());\nexports.CubismFramework = CubismFramework;\nvar Option = (function () {\n    function Option() {\n    }\n    return Option;\n}());\nexports.Option = Option;\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"LogLevel_Verbose\"] = 0] = \"LogLevel_Verbose\";\n    LogLevel[LogLevel[\"LogLevel_Debug\"] = 1] = \"LogLevel_Debug\";\n    LogLevel[LogLevel[\"LogLevel_Info\"] = 2] = \"LogLevel_Info\";\n    LogLevel[LogLevel[\"LogLevel_Warning\"] = 3] = \"LogLevel_Warning\";\n    LogLevel[LogLevel[\"LogLevel_Error\"] = 4] = \"LogLevel_Error\";\n    LogLevel[LogLevel[\"LogLevel_Off\"] = 5] = \"LogLevel_Off\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nvar $ = __importStar(__webpack_require__(/*! ./live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.Constant = $.Constant;\n    Live2DCubismFramework.csmDelete = $.csmDelete;\n    Live2DCubismFramework.CubismFramework = $.CubismFramework;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL2xpdmUyZGN1YmlzbWZyYW1ld29yay50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbGl2ZTJkY3ViaXNtZnJhbWV3b3JrLnRzP2M2NGUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtSWRNYW5hZ2VyIH0gZnJvbSAnLi9pZC9jdWJpc21pZG1hbmFnZXInO1xuaW1wb3J0IHsgQ3ViaXNtUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmluZy9jdWJpc21yZW5kZXJlcic7XG5pbXBvcnQge1xuICBDU01fQVNTRVJULFxuICBDdWJpc21Mb2dJbmZvLFxuICBDdWJpc21Mb2dXYXJuaW5nXG59IGZyb20gJy4vdXRpbHMvY3ViaXNtZGVidWcnO1xuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICcuL3V0aWxzL2N1YmlzbWpzb24nO1xuXG5leHBvcnQgZnVuY3Rpb24gc3RydG9kKHM6IHN0cmluZywgZW5kUHRyOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gIGxldCBpbmRleCA9IDA7XG4gIGZvciAobGV0IGkgPSAxOyA7IGkrKykge1xuICAgIGNvbnN0IHRlc3RDOiBzdHJpbmcgPSBzLnNsaWNlKGkgLSAxLCBpKTtcblxuICAgIC8vIOaMh+aVsOODu+ODnuOCpOODiuOCueOBruWPr+iDveaAp+OBjOOBguOCi+OBruOBp+OCueOCreODg+ODl+OBmeOCi1xuICAgIGlmICh0ZXN0QyA9PSAnZScgfHwgdGVzdEMgPT0gJy0nIHx8IHRlc3RDID09ICdFJykge1xuICAgICAgY29udGludWU7XG4gICAgfSAvLyDmloflrZfliJfjga7nr4Tlm7LjgpLluoPjgZLjgabjgYTjgY9cblxuICAgIGNvbnN0IHRlc3Q6IHN0cmluZyA9IHMuc3Vic3RyaW5nKDAsIGkpO1xuICAgIGNvbnN0IG51bWJlciA9IE51bWJlcih0ZXN0KTtcbiAgICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgICAgLy8g5pWw5YCk44Go44GX44Gm6KqN6K2Y44Gn44GN44Gq44GP44Gq44Gj44Gf44Gu44Gn57WC5LqGXG4gICAgICBicmVhaztcbiAgICB9IC8vIOacgOW+jOOBq+aVsOWApOOBqOOBl+OBpuOBp+OBjeOBn2luZGV444KS5qC857SN44GX44Gm44GK44GPXG5cbiAgICBpbmRleCA9IGk7XG4gIH1cbiAgbGV0IGQgPSBwYXJzZUZsb2F0KHMpOyAvLyDjg5Hjg7zjgrnjgZfjgZ/mlbDlgKRcblxuICBpZiAoaXNOYU4oZCkpIHtcbiAgICAvLyDmlbDlgKTjgajjgZfjgaboqo3orZjjgafjgY3jgarjgY/jgarjgaPjgZ/jga7jgafntYLkuoZcbiAgICBkID0gTmFOO1xuICB9XG5cbiAgZW5kUHRyWzBdID0gcy5zbGljZShpbmRleCk7IC8vIOW+jOe2muOBruaWh+Wtl+WIl1xuICByZXR1cm4gZDtcbn1cblxuLy8g44OV44Kh44Kk44Or44K544Kz44O844OX44Gu5aSJ5pWw44KS5Yid5pyf5YyWXG5cbmxldCBzX2lzU3RhcnRlZCA9IGZhbHNlO1xubGV0IHNfaXNJbml0aWFsaXplZCA9IGZhbHNlO1xubGV0IHNfb3B0aW9uOiBPcHRpb24gPSBudWxsO1xubGV0IHNfY3ViaXNtSWRNYW5hZ2VyOiBDdWJpc21JZE1hbmFnZXIgPSBudWxsO1xuXG4vKipcbiAqIEZyYW1ld29ya+WGheOBp+S9v+OBhuWumuaVsOOBruWuo+iogFxuICovXG5leHBvcnQgY29uc3QgQ29uc3RhbnQgPSBPYmplY3QuZnJlZXplPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KHtcbiAgdmVydGV4T2Zmc2V0OiAwLCAvLyDjg6Hjg4Pjgrfjg6XpoILngrnjga7jgqrjg5Xjgrvjg4Pjg4jlgKRcbiAgdmVydGV4U3RlcDogMiAvLyDjg6Hjg4Pjgrfjg6XpoILngrnjga7jgrnjg4bjg4Pjg5flgKRcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gY3NtRGVsZXRlPFQ+KGFkZHJlc3M6IFQpOiB2b2lkIHtcbiAgaWYgKCFhZGRyZXNzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYWRkcmVzcyA9IHZvaWQgMDtcbn1cblxuLyoqXG4gKiBMaXZlMkQgQ3ViaXNtIFNESyBPcmlnaW5hbCBXb3JrZmxvdyBTREvjga7jgqjjg7Pjg4jjg6rjg53jgqTjg7Pjg4hcbiAqIOWIqeeUqOmWi+Wni+aZguOBr0N1YmlzbUZyYW1ld29yay5pbml0aWFsaXplKCnjgpLlkbzjgbPjgIFDdWJpc21GcmFtZXdvcmsuZGlzcG9zZSgp44Gn57WC5LqG44GZ44KL44CCXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21GcmFtZXdvcmsge1xuICAvKipcbiAgICogQ3ViaXNtIEZyYW1ld29ya+OBrkFQSeOCkuS9v+eUqOWPr+iDveOBq+OBmeOCi+OAglxuICAgKiAgQVBJ44KS5a6f6KGM44GZ44KL5YmN44Gr5b+F44Ga44GT44Gu6Zai5pWw44KS5a6f6KGM44GZ44KL44GT44Go44CCXG4gICAqICDkuIDluqbmupblgpnjgYzlrozkuobjgZfjgabku6XpmY3jga/jgIHlho3jgbPlrp/ooYzjgZfjgabjgoLlhoXpg6jlh6bnkIbjgYzjgrnjgq3jg4Pjg5fjgZXjgozjgb7jgZnjgIJcbiAgICpcbiAgICogQHBhcmFtICAgIG9wdGlvbiAgICAgIE9wdGlvbuOCr+ODqeOCueOBruOCpOODs+OCueOCv+ODs+OCuVxuICAgKlxuICAgKiBAcmV0dXJuICAg5rqW5YKZ5Yem55CG44GM5a6M5LqG44GX44Gf44KJdHJ1ZeOBjOi/lOOCiuOBvuOBmeOAglxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzdGFydFVwKG9wdGlvbjogT3B0aW9uID0gbnVsbCk6IGJvb2xlYW4ge1xuICAgIGlmIChzX2lzU3RhcnRlZCkge1xuICAgICAgQ3ViaXNtTG9nSW5mbygnQ3ViaXNtRnJhbWV3b3JrLnN0YXJ0VXAoKSBpcyBhbHJlYWR5IGRvbmUuJyk7XG4gICAgICByZXR1cm4gc19pc1N0YXJ0ZWQ7XG4gICAgfVxuXG4gICAgc19vcHRpb24gPSBvcHRpb247XG5cbiAgICBpZiAoc19vcHRpb24gIT0gbnVsbCkge1xuICAgICAgTGl2ZTJEQ3ViaXNtQ29yZS5Mb2dnaW5nLmNzbVNldExvZ0Z1bmN0aW9uKHNfb3B0aW9uLmxvZ0Z1bmN0aW9uKTtcbiAgICB9XG5cbiAgICBzX2lzU3RhcnRlZCA9IHRydWU7XG5cbiAgICAvLyBMaXZlMkQgQ3ViaXNtIENvcmXjg5Djg7zjgrjjg6fjg7Pmg4XloLHjgpLooajnpLpcbiAgICBpZiAoc19pc1N0YXJ0ZWQpIHtcbiAgICAgIGNvbnN0IHZlcnNpb246IG51bWJlciA9IExpdmUyREN1YmlzbUNvcmUuVmVyc2lvbi5jc21HZXRWZXJzaW9uKCk7XG4gICAgICBjb25zdCBtYWpvcjogbnVtYmVyID0gKHZlcnNpb24gJiAweGZmMDAwMDAwKSA+PiAyNDtcbiAgICAgIGNvbnN0IG1pbm9yOiBudW1iZXIgPSAodmVyc2lvbiAmIDB4MDBmZjAwMDApID4+IDE2O1xuICAgICAgY29uc3QgcGF0Y2g6IG51bWJlciA9IHZlcnNpb24gJiAweDAwMDBmZmZmO1xuICAgICAgY29uc3QgdmVyc2lvbk51bWJlcjogbnVtYmVyID0gdmVyc2lvbjtcblxuICAgICAgQ3ViaXNtTG9nSW5mbyhcbiAgICAgICAgYExpdmUyRCBDdWJpc20gQ29yZSB2ZXJzaW9uOiB7MH0uezF9LnsyfSAoezN9KWAsXG4gICAgICAgICgnMDAnICsgbWFqb3IpLnNsaWNlKC0yKSxcbiAgICAgICAgKCcwMCcgKyBtaW5vcikuc2xpY2UoLTIpLFxuICAgICAgICAoJzAwMDAnICsgcGF0Y2gpLnNsaWNlKC00KSxcbiAgICAgICAgdmVyc2lvbk51bWJlclxuICAgICAgKTtcbiAgICB9XG5cbiAgICBDdWJpc21Mb2dJbmZvKCdDdWJpc21GcmFtZXdvcmsuc3RhcnRVcCgpIGlzIGNvbXBsZXRlLicpO1xuXG4gICAgcmV0dXJuIHNfaXNTdGFydGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0VXAoKeOBp+WIneacn+WMluOBl+OBn0N1YmlzbUZyYW1ld29ya+OBruWQhOODkeODqeODoeODvOOCv+OCkuOCr+ODquOCouOBl+OBvuOBmeOAglxuICAgKiBEaXNwb3NlKCnjgZfjgZ9DdWJpc21GcmFtZXdvcmvjgpLlho3liKnnlKjjgZnjgovpmpvjgavliKnnlKjjgZfjgabjgY/jgaDjgZXjgYTjgIJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY2xlYW5VcCgpOiB2b2lkIHtcbiAgICBzX2lzU3RhcnRlZCA9IGZhbHNlO1xuICAgIHNfaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHNfb3B0aW9uID0gbnVsbDtcbiAgICBzX2N1YmlzbUlkTWFuYWdlciA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ3ViaXNtIEZyYW1ld29ya+WGheOBruODquOCveODvOOCueOCkuWIneacn+WMluOBl+OBpuODouODh+ODq+OCkuihqOekuuWPr+iDveOBqueKtuaFi+OBq+OBl+OBvuOBmeOAgjxicj5cbiAgICogICAgIOWGjeW6pkluaXRpYWxpemUoKeOBmeOCi+OBq+OBr+WFiOOBq0Rpc3Bvc2UoKeOCkuWun+ihjOOBmeOCi+W/heimgeOBjOOBguOCiuOBvuOBmeOAglxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIENTTV9BU1NFUlQoc19pc1N0YXJ0ZWQpO1xuICAgIGlmICghc19pc1N0YXJ0ZWQpIHtcbiAgICAgIEN1YmlzbUxvZ1dhcm5pbmcoJ0N1YmlzbUZyYW1ld29yayBpcyBub3Qgc3RhcnRlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAtLS0gc19pc0luaXRpYWxpemVk44Gr44KI44KL6YCj57aa5Yid5pyf5YyW44Ks44O844OJIC0tLVxuICAgIC8vIOmAo+e2muOBl+OBpuODquOCveODvOOCueeiuuS/neOBjOihjOOCj+OCjOOBquOBhOOCiOOBhuOBq+OBmeOCi+OAglxuICAgIC8vIOWGjeW6pkluaXRpYWxpemUoKeOBmeOCi+OBq+OBr+WFiOOBq0Rpc3Bvc2UoKeOCkuWun+ihjOOBmeOCi+W/heimgeOBjOOBguOCi+OAglxuICAgIGlmIChzX2lzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIEN1YmlzbUxvZ1dhcm5pbmcoXG4gICAgICAgICdDdWJpc21GcmFtZXdvcmsuaW5pdGlhbGl6ZSgpIHNraXBwZWQsIGFscmVhZHkgaW5pdGlhbGl6ZWQuJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLy0tLS0gc3RhdGljIOWIneacn+WMliAtLS0tXG4gICAgVmFsdWUuc3RhdGljSW5pdGlhbGl6ZU5vdEZvckNsaWVudENhbGwoKTtcblxuICAgIHNfY3ViaXNtSWRNYW5hZ2VyID0gbmV3IEN1YmlzbUlkTWFuYWdlcigpO1xuXG4gICAgc19pc0luaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIEN1YmlzbUxvZ0luZm8oJ0N1YmlzbUZyYW1ld29yay5pbml0aWFsaXplKCkgaXMgY29tcGxldGUuJyk7XG4gIH1cblxuICAvKipcbiAgICogQ3ViaXNtIEZyYW1ld29ya+WGheOBruWFqOOBpuOBruODquOCveODvOOCueOCkuino+aUvuOBl+OBvuOBmeOAglxuICAgKiAgICAgIOOBn+OBoOOBl+OAgeWklumDqOOBp+eiuuS/neOBleOCjOOBn+ODquOCveODvOOCueOBq+OBpOOBhOOBpuOBr+ino+aUvuOBl+OBvuOBm+OCk+OAglxuICAgKiAgICAgIOWklumDqOOBp+mBqeWIh+OBq+egtOajhOOBmeOCi+W/heimgeOBjOOBguOCiuOBvuOBmeOAglxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIENTTV9BU1NFUlQoc19pc1N0YXJ0ZWQpO1xuICAgIGlmICghc19pc1N0YXJ0ZWQpIHtcbiAgICAgIEN1YmlzbUxvZ1dhcm5pbmcoJ0N1YmlzbUZyYW1ld29yayBpcyBub3Qgc3RhcnRlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAtLS0gc19pc0luaXRpYWxpemVk44Gr44KI44KL5pyq5Yid5pyf5YyW6Kej5pS+44Ks44O844OJIC0tLVxuICAgIC8vIGRpc3Bvc2UoKeOBmeOCi+OBq+OBr+WFiOOBq2luaXRpYWxpemUoKeOCkuWun+ihjOOBmeOCi+W/heimgeOBjOOBguOCi+OAglxuICAgIGlmICghc19pc0luaXRpYWxpemVkKSB7XG4gICAgICAvLyBmYWxzZS4uLuODquOCveODvOOCueacqueiuuS/neOBruWgtOWQiFxuICAgICAgQ3ViaXNtTG9nV2FybmluZygnQ3ViaXNtRnJhbWV3b3JrLmRpc3Bvc2UoKSBza2lwcGVkLCBub3QgaW5pdGlhbGl6ZWQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgVmFsdWUuc3RhdGljUmVsZWFzZU5vdEZvckNsaWVudENhbGwoKTtcblxuICAgIHNfY3ViaXNtSWRNYW5hZ2VyLnJlbGVhc2UoKTtcbiAgICBzX2N1YmlzbUlkTWFuYWdlciA9IG51bGw7XG5cbiAgICAvLyDjg6zjg7Pjg4Djg6njga7pnZnnmoTjg6rjgr3jg7zjgrnvvIjjgrfjgqfjg7zjg4Djg5fjg63jgrDjg6njg6Dku5bvvInjgpLop6PmlL7jgZnjgotcbiAgICBDdWJpc21SZW5kZXJlci5zdGF0aWNSZWxlYXNlKCk7XG5cbiAgICBzX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIEN1YmlzbUxvZ0luZm8oJ0N1YmlzbUZyYW1ld29yay5kaXNwb3NlKCkgaXMgY29tcGxldGUuJyk7XG4gIH1cblxuICAvKipcbiAgICogQ3ViaXNtIEZyYW1ld29ya+OBrkFQSeOCkuS9v+eUqOOBmeOCi+a6luWCmeOBjOWujOS6huOBl+OBn+OBi+OBqeOBhuOBi1xuICAgKiBAcmV0dXJuIEFQSeOCkuS9v+eUqOOBmeOCi+a6luWCmeOBjOWujOS6huOBl+OBpuOBhOOCjOOBsHRydWXjgYzov5Tjgorjgb7jgZnjgIJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaXNTdGFydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzX2lzU3RhcnRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDdWJpc20gRnJhbWV3b3Jr44Gu44Oq44K944O844K55Yid5pyf5YyW44GM44GZ44Gn44Gr6KGM44KP44KM44Gm44GE44KL44GL44Gp44GG44GLXG4gICAqIEByZXR1cm4g44Oq44K944O844K556K65L+d44GM5a6M5LqG44GX44Gm44GE44KM44GwdHJ1ZeOBjOi/lOOCiuOBvuOBmVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzX2lzSW5pdGlhbGl6ZWQ7XG4gIH1cblxuICAvKipcbiAgICogQ29yZSBBUEnjgavjg5DjgqTjg7Pjg4njgZfjgZ/jg63jgrDplqLmlbDjgpLlrp/ooYzjgZnjgotcbiAgICpcbiAgICogQHByYXJhbSBtZXNzYWdlIOODreOCsOODoeODg+OCu+ODvOOCuFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjb3JlTG9nRnVuY3Rpb24obWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gUmV0dXJuIGlmIGxvZ2dpbmcgbm90IHBvc3NpYmxlLlxuICAgIGlmICghTGl2ZTJEQ3ViaXNtQ29yZS5Mb2dnaW5nLmNzbUdldExvZ0Z1bmN0aW9uKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBMaXZlMkRDdWJpc21Db3JlLkxvZ2dpbmcuY3NtR2V0TG9nRnVuY3Rpb24oKShtZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnj77lnKjjga7jg63jgrDlh7rlipvjg6zjg5njg6voqK3lrprjga7lgKTjgpLov5TjgZnjgIJcbiAgICpcbiAgICogQHJldHVybiAg54++5Zyo44Gu44Ot44Kw5Ye65Yqb44Os44OZ44Or6Kit5a6a44Gu5YCkXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGdldExvZ2dpbmdMZXZlbCgpOiBMb2dMZXZlbCB7XG4gICAgaWYgKHNfb3B0aW9uICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBzX29wdGlvbi5sb2dnaW5nTGV2ZWw7XG4gICAgfVxuICAgIHJldHVybiBMb2dMZXZlbC5Mb2dMZXZlbF9PZmY7XG4gIH1cblxuICAvKipcbiAgICogSUTjg57jg43jg7zjgrjjg6Pjga7jgqTjg7Pjgrnjgr/jg7PjgrnjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiBDdWJpc21NYW5hZ2Vy44Kv44Op44K544Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGdldElkTWFuYWdlcigpOiBDdWJpc21JZE1hbmFnZXIge1xuICAgIHJldHVybiBzX2N1YmlzbUlkTWFuYWdlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDpnZnnmoTjgq/jg6njgrnjgajjgZfjgabkvb/nlKjjgZnjgotcbiAgICog44Kk44Oz44K544K/44Oz44K55YyW44GV44Gb44Gq44GEXG4gICAqL1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbn1cblxuZXhwb3J0IGNsYXNzIE9wdGlvbiB7XG4gIGxvZ0Z1bmN0aW9uOiBMaXZlMkRDdWJpc21Db3JlLmNzbUxvZ0Z1bmN0aW9uOyAvLyDjg63jgrDlh7rlipvjga7plqLmlbDjgqrjg5bjgrjjgqfjgq/jg4hcbiAgbG9nZ2luZ0xldmVsOiBMb2dMZXZlbDsgLy8g44Ot44Kw5Ye65Yqb44Os44OZ44Or44Gu6Kit5a6aXG59XG5cbi8qKlxuICog44Ot44Kw5Ye65Yqb44Gu44Os44OZ44OrXG4gKi9cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgTG9nTGV2ZWxfVmVyYm9zZSA9IDAsIC8vIOips+e0sOODreOCsFxuICBMb2dMZXZlbF9EZWJ1ZywgLy8g44OH44OQ44OD44Kw44Ot44KwXG4gIExvZ0xldmVsX0luZm8sIC8vIEluZm/jg63jgrBcbiAgTG9nTGV2ZWxfV2FybmluZywgLy8g6K2m5ZGK44Ot44KwXG4gIExvZ0xldmVsX0Vycm9yLCAvLyDjgqjjg6njg7zjg63jgrBcbiAgTG9nTGV2ZWxfT2ZmIC8vIOODreOCsOWHuuWKm+eEoeWKuVxufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9saXZlMmRjdWJpc21mcmFtZXdvcmsnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IENvbnN0YW50ID0gJC5Db25zdGFudDtcbiAgZXhwb3J0IGNvbnN0IGNzbURlbGV0ZSA9ICQuY3NtRGVsZXRlO1xuICBleHBvcnQgY29uc3QgQ3ViaXNtRnJhbWV3b3JrID0gJC5DdWJpc21GcmFtZXdvcms7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbUZyYW1ld29yayA9ICQuQ3ViaXNtRnJhbWV3b3JrO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE1QkE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU5BO0FBWUE7QUErS0E7QUFBQTtBQXJLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUFBO0FBaExBO0FBa0xBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFIQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/live2dcubismframework.ts\n");

/***/ }),

/***/ "./Framework/src/math/cubismmath.ts":
/*!******************************************!*\
  !*** ./Framework/src/math/cubismmath.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMath = void 0;\nvar cubismvector2_1 = __webpack_require__(/*! ./cubismvector2 */ \"./Framework/src/math/cubismvector2.ts\");\nvar CubismMath = (function () {\n    function CubismMath() {\n    }\n    CubismMath.range = function (value, min, max) {\n        if (value < min) {\n            value = min;\n        }\n        else if (value > max) {\n            value = max;\n        }\n        return value;\n    };\n    CubismMath.sin = function (x) {\n        return Math.sin(x);\n    };\n    CubismMath.cos = function (x) {\n        return Math.cos(x);\n    };\n    CubismMath.abs = function (x) {\n        return Math.abs(x);\n    };\n    CubismMath.sqrt = function (x) {\n        return Math.sqrt(x);\n    };\n    CubismMath.cbrt = function (x) {\n        if (x === 0) {\n            return x;\n        }\n        var cx = x;\n        var isNegativeNumber = cx < 0;\n        if (isNegativeNumber) {\n            cx = -cx;\n        }\n        var ret;\n        if (cx === Infinity) {\n            ret = Infinity;\n        }\n        else {\n            ret = Math.exp(Math.log(cx) / 3);\n            ret = (cx / (ret * ret) + 2 * ret) / 3;\n        }\n        return isNegativeNumber ? -ret : ret;\n    };\n    CubismMath.getEasingSine = function (value) {\n        if (value < 0.0) {\n            return 0.0;\n        }\n        else if (value > 1.0) {\n            return 1.0;\n        }\n        return 0.5 - 0.5 * this.cos(value * Math.PI);\n    };\n    CubismMath.max = function (left, right) {\n        return left > right ? left : right;\n    };\n    CubismMath.min = function (left, right) {\n        return left > right ? right : left;\n    };\n    CubismMath.degreesToRadian = function (degrees) {\n        return (degrees / 180.0) * Math.PI;\n    };\n    CubismMath.radianToDegrees = function (radian) {\n        return (radian * 180.0) / Math.PI;\n    };\n    CubismMath.directionToRadian = function (from, to) {\n        var q1 = Math.atan2(to.y, to.x);\n        var q2 = Math.atan2(from.y, from.x);\n        var ret = q1 - q2;\n        while (ret < -Math.PI) {\n            ret += Math.PI * 2.0;\n        }\n        while (ret > Math.PI) {\n            ret -= Math.PI * 2.0;\n        }\n        return ret;\n    };\n    CubismMath.directionToDegrees = function (from, to) {\n        var radian = this.directionToRadian(from, to);\n        var degree = this.radianToDegrees(radian);\n        if (to.x - from.x > 0.0) {\n            degree = -degree;\n        }\n        return degree;\n    };\n    CubismMath.radianToDirection = function (totalAngle) {\n        var ret = new cubismvector2_1.CubismVector2();\n        ret.x = this.sin(totalAngle);\n        ret.y = this.cos(totalAngle);\n        return ret;\n    };\n    CubismMath.quadraticEquation = function (a, b, c) {\n        if (this.abs(a) < CubismMath.Epsilon) {\n            if (this.abs(b) < CubismMath.Epsilon) {\n                return -c;\n            }\n            return -c / b;\n        }\n        return -(b + this.sqrt(b * b - 4.0 * a * c)) / (2.0 * a);\n    };\n    CubismMath.cardanoAlgorithmForBezier = function (a, b, c, d) {\n        if (this.sqrt(a) < CubismMath.Epsilon) {\n            return this.range(this.quadraticEquation(b, c, d), 0.0, 1.0);\n        }\n        var ba = b / a;\n        var ca = c / a;\n        var da = d / a;\n        var p = (3.0 * ca - ba * ba) / 3.0;\n        var p3 = p / 3.0;\n        var q = (2.0 * ba * ba * ba - 9.0 * ba * ca + 27.0 * da) / 27.0;\n        var q2 = q / 2.0;\n        var discriminant = q2 * q2 + p3 * p3 * p3;\n        var center = 0.5;\n        var threshold = center + 0.01;\n        if (discriminant < 0.0) {\n            var mp3 = -p / 3.0;\n            var mp33 = mp3 * mp3 * mp3;\n            var r = this.sqrt(mp33);\n            var t = -q / (2.0 * r);\n            var cosphi = this.range(t, -1.0, 1.0);\n            var phi = Math.acos(cosphi);\n            var crtr = this.cbrt(r);\n            var t1 = 2.0 * crtr;\n            var root1_1 = t1 * this.cos(phi / 3.0) - ba / 3.0;\n            if (this.abs(root1_1 - center) < threshold) {\n                return this.range(root1_1, 0.0, 1.0);\n            }\n            var root2 = t1 * this.cos((phi + 2.0 * Math.PI) / 3.0) - ba / 3.0;\n            if (this.abs(root2 - center) < threshold) {\n                return this.range(root2, 0.0, 1.0);\n            }\n            var root3 = t1 * this.cos((phi + 4.0 * Math.PI) / 3.0) - ba / 3.0;\n            return this.range(root3, 0.0, 1.0);\n        }\n        if (discriminant == 0.0) {\n            var u1_1;\n            if (q2 < 0.0) {\n                u1_1 = this.cbrt(-q2);\n            }\n            else {\n                u1_1 = -this.cbrt(q2);\n            }\n            var root1_2 = 2.0 * u1_1 - ba / 3.0;\n            if (this.abs(root1_2 - center) < threshold) {\n                return this.range(root1_2, 0.0, 1.0);\n            }\n            var root2 = -u1_1 - ba / 3.0;\n            return this.range(root2, 0.0, 1.0);\n        }\n        var sd = this.sqrt(discriminant);\n        var u1 = this.cbrt(sd - q2);\n        var v1 = this.cbrt(sd + q2);\n        var root1 = u1 - v1 - ba / 3.0;\n        return this.range(root1, 0.0, 1.0);\n    };\n    CubismMath.Epsilon = 0.00001;\n    return CubismMath;\n}());\nexports.CubismMath = CubismMath;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmath */ \"./Framework/src/math/cubismmath.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMath = $.CubismMath;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtbWF0aC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbWF0aC9jdWJpc21tYXRoLnRzP2Q0ZDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtVmVjdG9yMiB9IGZyb20gJy4vY3ViaXNtdmVjdG9yMic7XG5cbi8qKlxuICog5pWw5YCk6KiI566X44Gq44Gp44Gr5L2/55So44GZ44KL44Om44O844OG44Kj44Oq44OG44Kj44Kv44Op44K5XG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21NYXRoIHtcbiAgc3RhdGljIHJlYWRvbmx5IEVwc2lsb246IG51bWJlciA9IDAuMDAwMDE7XG5cbiAgLyoqXG4gICAqIOesrOS4gOW8leaVsOOBruWApOOCkuacgOWwj+WApOOBqOacgOWkp+WApOOBruevhOWbsuOBq+WPjuOCgeOBn+WApOOCkui/lOOBmVxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUg5Y+O44KB44KJ44KM44KL5YCkXG4gICAqIEBwYXJhbSBtaW4gICDnr4Tlm7Ljga7mnIDlsI/lgKRcbiAgICogQHBhcmFtIG1heCAgIOevhOWbsuOBruacgOWkp+WApFxuICAgKiBAcmV0dXJuIOacgOWwj+WApOOBqOacgOWkp+WApOOBruevhOWbsuOBq+WPjuOCgeOBn+WApFxuICAgKi9cbiAgc3RhdGljIHJhbmdlKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHZhbHVlIDwgbWluKSB7XG4gICAgICB2YWx1ZSA9IG1pbjtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID4gbWF4KSB7XG4gICAgICB2YWx1ZSA9IG1heDtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog44K144Kk44Oz6Zai5pWw44Gu5YCk44KS5rGC44KB44KLXG4gICAqXG4gICAqIEBwYXJhbSB4IOinkuW6puWApO+8iOODqeOCuOOCouODs++8iVxuICAgKiBAcmV0dXJuIOOCteOCpOODs+mWouaVsHNpbih4KeOBruWApFxuICAgKi9cbiAgc3RhdGljIHNpbih4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNpbih4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjgrXjgqTjg7PplqLmlbDjga7lgKTjgpLmsYLjgoHjgotcbiAgICpcbiAgICogQHBhcmFtIHgg6KeS5bqm5YCkKOODqeOCuOOCouODsylcbiAgICogQHJldHVybiDjgrPjgrXjgqTjg7PplqLmlbBjb3MoeCnjga7lgKRcbiAgICovXG4gIHN0YXRpYyBjb3MoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5jb3MoeCk7XG4gIH1cblxuICAvKipcbiAgICog5YCk44Gu57W25a++5YCk44KS5rGC44KB44KLXG4gICAqXG4gICAqIEBwYXJhbSB4IOe1tuWvvuWApOOCkuaxguOCgeOCi+WApFxuICAgKiBAcmV0dXJuIOWApOOBrue1tuWvvuWApFxuICAgKi9cbiAgc3RhdGljIGFicyh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmFicyh4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlubPmlrnmoLko44Or44O844OIKeOCkuaxguOCgeOCi1xuICAgKiBAcGFyYW0geCAtPiDlubPmlrnmoLnjgpLmsYLjgoHjgovlgKRcbiAgICogQHJldHVybiDlgKTjga7lubPmlrnmoLlcbiAgICovXG4gIHN0YXRpYyBzcXJ0KHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnq4vmlrnmoLnjgpLmsYLjgoHjgotcbiAgICogQHBhcmFtIHggLT4g56uL5pa55qC544KS5rGC44KB44KL5YCkXG4gICAqIEByZXR1cm4g5YCk44Gu56uL5pa55qC5XG4gICAqL1xuICBzdGF0aWMgY2JydCh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICh4ID09PSAwKSB7XG4gICAgICByZXR1cm4geDtcbiAgICB9XG5cbiAgICBsZXQgY3g6IG51bWJlciA9IHg7XG4gICAgY29uc3QgaXNOZWdhdGl2ZU51bWJlcjogYm9vbGVhbiA9IGN4IDwgMDtcblxuICAgIGlmIChpc05lZ2F0aXZlTnVtYmVyKSB7XG4gICAgICBjeCA9IC1jeDtcbiAgICB9XG5cbiAgICBsZXQgcmV0OiBudW1iZXI7XG4gICAgaWYgKGN4ID09PSBJbmZpbml0eSkge1xuICAgICAgcmV0ID0gSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldCA9IE1hdGguZXhwKE1hdGgubG9nKGN4KSAvIDMpO1xuICAgICAgcmV0ID0gKGN4IC8gKHJldCAqIHJldCkgKyAyICogcmV0KSAvIDM7XG4gICAgfVxuICAgIHJldHVybiBpc05lZ2F0aXZlTnVtYmVyID8gLXJldCA6IHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqTjg7zjgrjjg7PjgrDlh6bnkIbjgZXjgozjgZ/jgrXjgqTjg7PjgpLmsYLjgoHjgotcbiAgICog44OV44Kn44O844OJ44Kk44Oz44O744Ki44Km44OI5pmC44Gu44Kk44O844K444Oz44Kw44Gr5Yip55So44Gn44GN44KLXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSDjgqTjg7zjgrjjg7PjgrDjgpLooYzjgYblgKRcbiAgICogQHJldHVybiDjgqTjg7zjgrjjg7PjgrDlh6bnkIbjgZXjgozjgZ/jgrXjgqTjg7PlgKRcbiAgICovXG4gIHN0YXRpYyBnZXRFYXNpbmdTaW5lKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICh2YWx1ZSA8IDAuMCkge1xuICAgICAgcmV0dXJuIDAuMDtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID4gMS4wKSB7XG4gICAgICByZXR1cm4gMS4wO1xuICAgIH1cblxuICAgIHJldHVybiAwLjUgLSAwLjUgKiB0aGlzLmNvcyh2YWx1ZSAqIE1hdGguUEkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkp+OBjeOBhOaWueOBruWApOOCkui/lOOBmVxuICAgKlxuICAgKiBAcGFyYW0gbGVmdCDlt6bovrrjga7lgKRcbiAgICogQHBhcmFtIHJpZ2h0IOWPs+i+uuOBruWApFxuICAgKiBAcmV0dXJuIOWkp+OBjeOBhOaWueOBruWApFxuICAgKi9cbiAgc3RhdGljIG1heChsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBsZWZ0ID4gcmlnaHQgPyBsZWZ0IDogcmlnaHQ7XG4gIH1cblxuICAvKipcbiAgICog5bCP44GV44GE5pa544Gu5YCk44KS6L+U44GZXG4gICAqXG4gICAqIEBwYXJhbSBsZWZ0ICDlt6bovrrjga7lgKRcbiAgICogQHBhcmFtIHJpZ2h0IOWPs+i+uuOBruWApFxuICAgKiBAcmV0dXJuIOWwj+OBleOBhOaWueOBruWApFxuICAgKi9cbiAgc3RhdGljIG1pbihsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBsZWZ0ID4gcmlnaHQgPyByaWdodCA6IGxlZnQ7XG4gIH1cblxuICAvKipcbiAgICog6KeS5bqm5YCk44KS44Op44K444Ki44Oz5YCk44Gr5aSJ5o+b44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSBkZWdyZWVzICAg6KeS5bqm5YCkXG4gICAqIEByZXR1cm4g6KeS5bqm5YCk44GL44KJ5aSJ5o+b44GX44Gf44Op44K444Ki44Oz5YCkXG4gICAqL1xuICBzdGF0aWMgZGVncmVlc1RvUmFkaWFuKGRlZ3JlZXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIChkZWdyZWVzIC8gMTgwLjApICogTWF0aC5QSTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6njgrjjgqLjg7PlgKTjgpLop5LluqblgKTjgavlpInmj5vjgZnjgotcbiAgICpcbiAgICogQHBhcmFtIHJhZGlhbiAgICDjg6njgrjjgqLjg7PlgKRcbiAgICogQHJldHVybiDjg6njgrjjgqLjg7PlgKTjgYvjgonlpInmj5vjgZfjgZ/op5LluqblgKRcbiAgICovXG4gIHN0YXRpYyByYWRpYW5Ub0RlZ3JlZXMocmFkaWFuOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAocmFkaWFuICogMTgwLjApIC8gTWF0aC5QSTtcbiAgfVxuXG4gIC8qKlxuICAgKiDvvJLjgaTjga7jg5njgq/jg4jjg6vjgYvjgonjg6njgrjjgqLjg7PlgKTjgpLmsYLjgoHjgotcbiAgICpcbiAgICogQHBhcmFtIGZyb20gIOWni+eCueODmeOCr+ODiOODq1xuICAgKiBAcGFyYW0gdG8gICAg57WC54K544OZ44Kv44OI44OrXG4gICAqIEByZXR1cm4g44Op44K444Ki44Oz5YCk44GL44KJ5rGC44KB44Gf5pa55ZCR44OZ44Kv44OI44OrXG4gICAqL1xuICBzdGF0aWMgZGlyZWN0aW9uVG9SYWRpYW4oZnJvbTogQ3ViaXNtVmVjdG9yMiwgdG86IEN1YmlzbVZlY3RvcjIpOiBudW1iZXIge1xuICAgIGNvbnN0IHExOiBudW1iZXIgPSBNYXRoLmF0YW4yKHRvLnksIHRvLngpO1xuICAgIGNvbnN0IHEyOiBudW1iZXIgPSBNYXRoLmF0YW4yKGZyb20ueSwgZnJvbS54KTtcblxuICAgIGxldCByZXQ6IG51bWJlciA9IHExIC0gcTI7XG5cbiAgICB3aGlsZSAocmV0IDwgLU1hdGguUEkpIHtcbiAgICAgIHJldCArPSBNYXRoLlBJICogMi4wO1xuICAgIH1cblxuICAgIHdoaWxlIChyZXQgPiBNYXRoLlBJKSB7XG4gICAgICByZXQgLT0gTWF0aC5QSSAqIDIuMDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIO+8kuOBpOOBruODmeOCr+ODiOODq+OBi+OCieinkuW6puWApOOCkuaxguOCgeOCi1xuICAgKlxuICAgKiBAcGFyYW0gZnJvbSAg5aeL54K544OZ44Kv44OI44OrXG4gICAqIEBwYXJhbSB0byAgICDntYLngrnjg5njgq/jg4jjg6tcbiAgICogQHJldHVybiDop5LluqblgKTjgYvjgonmsYLjgoHjgZ/mlrnlkJHjg5njgq/jg4jjg6tcbiAgICovXG4gIHN0YXRpYyBkaXJlY3Rpb25Ub0RlZ3JlZXMoZnJvbTogQ3ViaXNtVmVjdG9yMiwgdG86IEN1YmlzbVZlY3RvcjIpOiBudW1iZXIge1xuICAgIGNvbnN0IHJhZGlhbjogbnVtYmVyID0gdGhpcy5kaXJlY3Rpb25Ub1JhZGlhbihmcm9tLCB0byk7XG4gICAgbGV0IGRlZ3JlZTogbnVtYmVyID0gdGhpcy5yYWRpYW5Ub0RlZ3JlZXMocmFkaWFuKTtcblxuICAgIGlmICh0by54IC0gZnJvbS54ID4gMC4wKSB7XG4gICAgICBkZWdyZWUgPSAtZGVncmVlO1xuICAgIH1cblxuICAgIHJldHVybiBkZWdyZWU7XG4gIH1cblxuICAvKipcbiAgICog44Op44K444Ki44Oz5YCk44KS5pa55ZCR44OZ44Kv44OI44Or44Gr5aSJ5o+b44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSB0b3RhbEFuZ2xlICAgIOODqeOCuOOCouODs+WApFxuICAgKiBAcmV0dXJuIOODqeOCuOOCouODs+WApOOBi+OCieWkieaPm+OBl+OBn+aWueWQkeODmeOCr+ODiOODq1xuICAgKi9cblxuICBzdGF0aWMgcmFkaWFuVG9EaXJlY3Rpb24odG90YWxBbmdsZTogbnVtYmVyKTogQ3ViaXNtVmVjdG9yMiB7XG4gICAgY29uc3QgcmV0OiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoKTtcblxuICAgIHJldC54ID0gdGhpcy5zaW4odG90YWxBbmdsZSk7XG4gICAgcmV0LnkgPSB0aGlzLmNvcyh0b3RhbEFuZ2xlKTtcblxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvKipcbiAgICog5LiJ5qyh5pa556iL5byP44Gu5LiJ5qyh6aCF44Gu5L+C5pWw44GMMOOBq+OBquOBo+OBn+OBqOOBjeOBq+ijnOasoOeahOOBq+S6jOasoeaWueeoi+W8j+OBruino+OCkuOCguOBqOOCgeOCi+OAglxuICAgKiBhICogeF4yICsgYiAqIHggKyBjID0gMFxuICAgKlxuICAgKiBAcGFyYW0gICBhIC0+IOS6jOasoemgheOBruS/guaVsOWApFxuICAgKiBAcGFyYW0gICBiIC0+IOS4gOasoemgheOBruS/guaVsOWApFxuICAgKiBAcGFyYW0gICBjIC0+IOWumuaVsOmgheOBruWApFxuICAgKiBAcmV0dXJuICDkuozmrKHmlrnnqIvlvI/jga7op6NcbiAgICovXG4gIHN0YXRpYyBxdWFkcmF0aWNFcXVhdGlvbihhOiBudW1iZXIsIGI6IG51bWJlciwgYzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5hYnMoYSkgPCBDdWJpc21NYXRoLkVwc2lsb24pIHtcbiAgICAgIGlmICh0aGlzLmFicyhiKSA8IEN1YmlzbU1hdGguRXBzaWxvbikge1xuICAgICAgICByZXR1cm4gLWM7XG4gICAgICB9XG4gICAgICByZXR1cm4gLWMgLyBiO1xuICAgIH1cblxuICAgIHJldHVybiAtKGIgKyB0aGlzLnNxcnQoYiAqIGIgLSA0LjAgKiBhICogYykpIC8gKDIuMCAqIGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCq+ODq+ODgOODjuOBruWFrOW8j+OBq+OCiOOBo+OBpuODmeOCuOOCp+OBrnTlgKTjgavoqbLlvZPjgZnjgovvvJPmrKHmlrnnqIvlvI/jga7op6PjgpLmsYLjgoHjgovjgIJcbiAgICog6YeN6Kej44Gr44Gq44Gj44Gf44Go44GN44Gr44GvMC4w772eMS4w44Gu5YCk44Gr44Gq44KL6Kej44KS6L+U44GZ44CCXG4gICAqXG4gICAqIGEgKiB4XjMgKyBiICogeF4yICsgYyAqIHggKyBkID0gMFxuICAgKlxuICAgKiBAcGFyYW0gICBhIC0+IOS4ieasoemgheOBruS/guaVsOWApFxuICAgKiBAcGFyYW0gICBiIC0+IOS6jOasoemgheOBruS/guaVsOWApFxuICAgKiBAcGFyYW0gICBjIC0+IOS4gOasoemgheOBruS/guaVsOWApFxuICAgKiBAcGFyYW0gICBkIC0+IOWumuaVsOmgheOBruWApFxuICAgKiBAcmV0dXJuICAwLjDvvZ4xLjDjga7plpPjgavjgYLjgovop6NcbiAgICovXG4gIHN0YXRpYyBjYXJkYW5vQWxnb3JpdGhtRm9yQmV6aWVyKFxuICAgIGE6IG51bWJlcixcbiAgICBiOiBudW1iZXIsXG4gICAgYzogbnVtYmVyLFxuICAgIGQ6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIGlmICh0aGlzLnNxcnQoYSkgPCBDdWJpc21NYXRoLkVwc2lsb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnJhbmdlKHRoaXMucXVhZHJhdGljRXF1YXRpb24oYiwgYywgZCksIDAuMCwgMS4wKTtcbiAgICB9XG5cbiAgICBjb25zdCBiYTogbnVtYmVyID0gYiAvIGE7XG4gICAgY29uc3QgY2E6IG51bWJlciA9IGMgLyBhO1xuICAgIGNvbnN0IGRhOiBudW1iZXIgPSBkIC8gYTtcblxuICAgIGNvbnN0IHA6IG51bWJlciA9ICgzLjAgKiBjYSAtIGJhICogYmEpIC8gMy4wO1xuICAgIGNvbnN0IHAzOiBudW1iZXIgPSBwIC8gMy4wO1xuICAgIGNvbnN0IHE6IG51bWJlciA9ICgyLjAgKiBiYSAqIGJhICogYmEgLSA5LjAgKiBiYSAqIGNhICsgMjcuMCAqIGRhKSAvIDI3LjA7XG4gICAgY29uc3QgcTI6IG51bWJlciA9IHEgLyAyLjA7XG4gICAgY29uc3QgZGlzY3JpbWluYW50OiBudW1iZXIgPSBxMiAqIHEyICsgcDMgKiBwMyAqIHAzO1xuXG4gICAgY29uc3QgY2VudGVyID0gMC41O1xuICAgIGNvbnN0IHRocmVzaG9sZDogbnVtYmVyID0gY2VudGVyICsgMC4wMTtcblxuICAgIGlmIChkaXNjcmltaW5hbnQgPCAwLjApIHtcbiAgICAgIGNvbnN0IG1wMzogbnVtYmVyID0gLXAgLyAzLjA7XG4gICAgICBjb25zdCBtcDMzOiBudW1iZXIgPSBtcDMgKiBtcDMgKiBtcDM7XG4gICAgICBjb25zdCByOiBudW1iZXIgPSB0aGlzLnNxcnQobXAzMyk7XG4gICAgICBjb25zdCB0OiBudW1iZXIgPSAtcSAvICgyLjAgKiByKTtcbiAgICAgIGNvbnN0IGNvc3BoaTogbnVtYmVyID0gdGhpcy5yYW5nZSh0LCAtMS4wLCAxLjApO1xuICAgICAgY29uc3QgcGhpOiBudW1iZXIgPSBNYXRoLmFjb3MoY29zcGhpKTtcbiAgICAgIGNvbnN0IGNydHI6IG51bWJlciA9IHRoaXMuY2JydChyKTtcbiAgICAgIGNvbnN0IHQxOiBudW1iZXIgPSAyLjAgKiBjcnRyO1xuXG4gICAgICBjb25zdCByb290MTogbnVtYmVyID0gdDEgKiB0aGlzLmNvcyhwaGkgLyAzLjApIC0gYmEgLyAzLjA7XG4gICAgICBpZiAodGhpcy5hYnMocm9vdDEgLSBjZW50ZXIpIDwgdGhyZXNob2xkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlKHJvb3QxLCAwLjAsIDEuMCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJvb3QyOiBudW1iZXIgPVxuICAgICAgICB0MSAqIHRoaXMuY29zKChwaGkgKyAyLjAgKiBNYXRoLlBJKSAvIDMuMCkgLSBiYSAvIDMuMDtcbiAgICAgIGlmICh0aGlzLmFicyhyb290MiAtIGNlbnRlcikgPCB0aHJlc2hvbGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2Uocm9vdDIsIDAuMCwgMS4wKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgcm9vdDM6IG51bWJlciA9XG4gICAgICAgIHQxICogdGhpcy5jb3MoKHBoaSArIDQuMCAqIE1hdGguUEkpIC8gMy4wKSAtIGJhIC8gMy4wO1xuICAgICAgcmV0dXJuIHRoaXMucmFuZ2Uocm9vdDMsIDAuMCwgMS4wKTtcbiAgICB9XG5cbiAgICBpZiAoZGlzY3JpbWluYW50ID09IDAuMCkge1xuICAgICAgbGV0IHUxOiBudW1iZXI7XG4gICAgICBpZiAocTIgPCAwLjApIHtcbiAgICAgICAgdTEgPSB0aGlzLmNicnQoLXEyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHUxID0gLXRoaXMuY2JydChxMik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJvb3QxOiBudW1iZXIgPSAyLjAgKiB1MSAtIGJhIC8gMy4wO1xuICAgICAgaWYgKHRoaXMuYWJzKHJvb3QxIC0gY2VudGVyKSA8IHRocmVzaG9sZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5nZShyb290MSwgMC4wLCAxLjApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByb290MjogbnVtYmVyID0gLXUxIC0gYmEgLyAzLjA7XG4gICAgICByZXR1cm4gdGhpcy5yYW5nZShyb290MiwgMC4wLCAxLjApO1xuICAgIH1cblxuICAgIGNvbnN0IHNkOiBudW1iZXIgPSB0aGlzLnNxcnQoZGlzY3JpbWluYW50KTtcbiAgICBjb25zdCB1MTogbnVtYmVyID0gdGhpcy5jYnJ0KHNkIC0gcTIpO1xuICAgIGNvbnN0IHYxOiBudW1iZXIgPSB0aGlzLmNicnQoc2QgKyBxMik7XG4gICAgY29uc3Qgcm9vdDE6IG51bWJlciA9IHUxIC0gdjEgLSBiYSAvIDMuMDtcbiAgICByZXR1cm4gdGhpcy5yYW5nZShyb290MSwgMC4wLCAxLjApO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbW1hdGgnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1hdGggPSAkLkN1YmlzbU1hdGg7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1hdGggPSAkLkN1YmlzbU1hdGg7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQUtBO0FBd1RBO0FBQUE7QUE3U0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBU0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBY0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsVEE7QUF3VEE7QUFBQTtBQXpUQTtBQTRUQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/math/cubismmath.ts\n");

/***/ }),

/***/ "./Framework/src/math/cubismmatrix44.ts":
/*!**********************************************!*\
  !*** ./Framework/src/math/cubismmatrix44.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMatrix44 = void 0;\nvar CubismMatrix44 = (function () {\n    function CubismMatrix44() {\n        this._tr = new Float32Array(16);\n        this.loadIdentity();\n    }\n    CubismMatrix44.multiply = function (a, b, dst) {\n        var c = new Float32Array([\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0\n        ]);\n        var n = 4;\n        for (var i = 0; i < n; ++i) {\n            for (var j = 0; j < n; ++j) {\n                for (var k = 0; k < n; ++k) {\n                    c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\n                }\n            }\n        }\n        for (var i = 0; i < 16; ++i) {\n            dst[i] = c[i];\n        }\n    };\n    CubismMatrix44.prototype.loadIdentity = function () {\n        var c = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0\n        ]);\n        this.setMatrix(c);\n    };\n    CubismMatrix44.prototype.setMatrix = function (tr) {\n        for (var i = 0; i < 16; ++i) {\n            this._tr[i] = tr[i];\n        }\n    };\n    CubismMatrix44.prototype.getArray = function () {\n        return this._tr;\n    };\n    CubismMatrix44.prototype.getScaleX = function () {\n        return this._tr[0];\n    };\n    CubismMatrix44.prototype.getScaleY = function () {\n        return this._tr[5];\n    };\n    CubismMatrix44.prototype.getTranslateX = function () {\n        return this._tr[12];\n    };\n    CubismMatrix44.prototype.getTranslateY = function () {\n        return this._tr[13];\n    };\n    CubismMatrix44.prototype.transformX = function (src) {\n        return this._tr[0] * src + this._tr[12];\n    };\n    CubismMatrix44.prototype.transformY = function (src) {\n        return this._tr[5] * src + this._tr[13];\n    };\n    CubismMatrix44.prototype.invertTransformX = function (src) {\n        return (src - this._tr[12]) / this._tr[0];\n    };\n    CubismMatrix44.prototype.invertTransformY = function (src) {\n        return (src - this._tr[13]) / this._tr[5];\n    };\n    CubismMatrix44.prototype.translateRelative = function (x, y) {\n        var tr1 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            x,\n            y,\n            0.0,\n            1.0\n        ]);\n        CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    };\n    CubismMatrix44.prototype.translate = function (x, y) {\n        this._tr[12] = x;\n        this._tr[13] = y;\n    };\n    CubismMatrix44.prototype.translateX = function (x) {\n        this._tr[12] = x;\n    };\n    CubismMatrix44.prototype.translateY = function (y) {\n        this._tr[13] = y;\n    };\n    CubismMatrix44.prototype.scaleRelative = function (x, y) {\n        var tr1 = new Float32Array([\n            x,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            y,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0\n        ]);\n        CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    };\n    CubismMatrix44.prototype.scale = function (x, y) {\n        this._tr[0] = x;\n        this._tr[5] = y;\n    };\n    CubismMatrix44.prototype.multiplyByMatrix = function (m) {\n        CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\n    };\n    CubismMatrix44.prototype.clone = function () {\n        var cloneMatrix = new CubismMatrix44();\n        for (var i = 0; i < this._tr.length; i++) {\n            cloneMatrix._tr[i] = this._tr[i];\n        }\n        return cloneMatrix;\n    };\n    return CubismMatrix44;\n}());\nexports.CubismMatrix44 = CubismMatrix44;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMatrix44 = $.CubismMatrix44;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtbWF0cml4NDQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtbWF0cml4NDQudHM/YzZiNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG4vKipcbiAqIDR4NOOBruihjOWIl1xuICpcbiAqIDR4NOihjOWIl+OBruS+v+WIqeOCr+ODqeOCueOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTWF0cml4NDQge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fdHIgPSBuZXcgRmxvYXQzMkFycmF5KDE2KTsgLy8gNCAqIDTjga7jgrXjgqTjgrpcbiAgICB0aGlzLmxvYWRJZGVudGl0eSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPl+OBkeWPluOBo+OBn++8kuOBpOOBruihjOWIl+OBruS5l+eul+OCkuihjOOBhuOAglxuICAgKlxuICAgKiBAcGFyYW0gYSDooYzliJdhXG4gICAqIEBwYXJhbSBiIOihjOWIl2JcbiAgICogQHJldHVybiDkuZfnrpfntZDmnpzjga7ooYzliJdcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbXVsdGlwbHkoXG4gICAgYTogRmxvYXQzMkFycmF5LFxuICAgIGI6IEZsb2F0MzJBcnJheSxcbiAgICBkc3Q6IEZsb2F0MzJBcnJheVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBjOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIDAuMFxuICAgIF0pO1xuXG4gICAgY29uc3QgbiA9IDQ7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBuOyArK2opIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBuOyArK2spIHtcbiAgICAgICAgICBjW2ogKyBpICogNF0gKz0gYVtrICsgaSAqIDRdICogYltqICsgayAqIDRdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBkc3RbaV0gPSBjW2ldO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDljZjkvY3ooYzliJfjgavliJ3mnJ/ljJbjgZnjgotcbiAgICovXG4gIHB1YmxpYyBsb2FkSWRlbnRpdHkoKTogdm9pZCB7XG4gICAgY29uc3QgYzogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjBcbiAgICBdKTtcblxuICAgIHRoaXMuc2V0TWF0cml4KGMpO1xuICB9XG5cbiAgLyoqXG4gICAqIOihjOWIl+OCkuioreWumlxuICAgKlxuICAgKiBAcGFyYW0gdHIgMTblgIvjga7mta7li5XlsI/mlbDngrnmlbDjgafooajjgZXjgozjgos0eDTjga7ooYzliJdcbiAgICovXG4gIHB1YmxpYyBzZXRNYXRyaXgodHI6IEZsb2F0MzJBcnJheSk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgdGhpcy5fdHJbaV0gPSB0cltpXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6KGM5YiX44KS5rWu5YuV5bCP5pWw54K55pWw44Gu6YWN5YiX44Gn5Y+W5b6XXG4gICAqXG4gICAqIEByZXR1cm4gMTblgIvjga7mta7li5XlsI/mlbDngrnmlbDjgafooajjgZXjgozjgos0eDTjga7ooYzliJdcbiAgICovXG4gIHB1YmxpYyBnZXRBcnJheSgpOiBGbG9hdDMyQXJyYXkge1xuICAgIHJldHVybiB0aGlzLl90cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBY6Lu444Gu5ouh5aSn546H44KS5Y+W5b6XXG4gICAqIEByZXR1cm4gWOi7uOOBruaLoeWkp+eOh1xuICAgKi9cbiAgcHVibGljIGdldFNjYWxlWCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl90clswXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBZ6Lu444Gu5ouh5aSn546H44KS5Y+W5b6X44GZ44KLXG4gICAqXG4gICAqIEByZXR1cm4gWei7uOOBruaLoeWkp+eOh1xuICAgKi9cbiAgcHVibGljIGdldFNjYWxlWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl90cls1XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBY6Lu444Gu56e75YuV6YeP44KS5Y+W5b6XXG4gICAqIEByZXR1cm4gWOi7uOOBruenu+WLlemHj1xuICAgKi9cbiAgcHVibGljIGdldFRyYW5zbGF0ZVgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdHJbMTJdO1xuICB9XG5cbiAgLyoqXG4gICAqIFnou7jjga7np7vli5Xph4/jgpLlj5blvpdcbiAgICogQHJldHVybiBZ6Lu444Gu56e75YuV6YePXG4gICAqL1xuICBwdWJsaWMgZ2V0VHJhbnNsYXRlWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl90clsxM107XG4gIH1cblxuICAvKipcbiAgICogWOi7uOOBruWApOOCkuePvuWcqOOBruihjOWIl+OBp+ioiOeul1xuICAgKlxuICAgKiBAcGFyYW0gc3JjIFjou7jjga7lgKRcbiAgICogQHJldHVybiDnj77lnKjjga7ooYzliJfjgafoqIjnrpfjgZXjgozjgZ9Y6Lu444Gu5YCkXG4gICAqL1xuICBwdWJsaWMgdHJhbnNmb3JtWChzcmM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3RyWzBdICogc3JjICsgdGhpcy5fdHJbMTJdO1xuICB9XG5cbiAgLyoqXG4gICAqIFnou7jjga7lgKTjgpLnj77lnKjjga7ooYzliJfjgafoqIjnrpdcbiAgICpcbiAgICogQHBhcmFtIHNyYyBZ6Lu444Gu5YCkXG4gICAqIEByZXR1cm4g54++5Zyo44Gu6KGM5YiX44Gn6KiI566X44GV44KM44GfWei7uOOBruWApFxuICAgKi9cbiAgcHVibGljIHRyYW5zZm9ybVkoc3JjOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl90cls1XSAqIHNyYyArIHRoaXMuX3RyWzEzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBY6Lu444Gu5YCk44KS54++5Zyo44Gu6KGM5YiX44Gn6YCG6KiI566XXG4gICAqL1xuICBwdWJsaWMgaW52ZXJ0VHJhbnNmb3JtWChzcmM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIChzcmMgLSB0aGlzLl90clsxMl0pIC8gdGhpcy5fdHJbMF07XG4gIH1cblxuICAvKipcbiAgICogWei7uOOBruWApOOCkuePvuWcqOOBruihjOWIl+OBp+mAhuioiOeul1xuICAgKi9cbiAgcHVibGljIGludmVydFRyYW5zZm9ybVkoc3JjOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAoc3JjIC0gdGhpcy5fdHJbMTNdKSAvIHRoaXMuX3RyWzVdO1xuICB9XG5cbiAgLyoqXG4gICAqIOePvuWcqOOBruihjOWIl+OBruS9jee9ruOCkui1t+eCueOBq+OBl+OBpuenu+WLlVxuICAgKlxuICAgKiDnj77lnKjjga7ooYzliJfjga7kvY3nva7jgpLotbfngrnjgavjgZfjgabnm7jlr77nmoTjgavnp7vli5XjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtIHggWOi7uOOBruenu+WLlemHj1xuICAgKiBAcGFyYW0geSBZ6Lu444Gu56e75YuV6YePXG4gICAqL1xuICBwdWJsaWMgdHJhbnNsYXRlUmVsYXRpdmUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0cjE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICAwLjAsXG4gICAgICAxLjBcbiAgICBdKTtcblxuICAgIEN1YmlzbU1hdHJpeDQ0Lm11bHRpcGx5KHRyMSwgdGhpcy5fdHIsIHRoaXMuX3RyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnj77lnKjjga7ooYzliJfjga7kvY3nva7jgpLnp7vli5VcbiAgICpcbiAgICog54++5Zyo44Gu6KGM5YiX44Gu5L2N572u44KS5oyH5a6a44GX44Gf5L2N572u44G456e75YuV44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSB4IFjou7jjga7np7vli5Xph49cbiAgICogQHBhcmFtIHkgeei7uOOBruenu+WLlemHj1xuICAgKi9cbiAgcHVibGljIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3RyWzEyXSA9IHg7XG4gICAgdGhpcy5fdHJbMTNdID0geTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnj77lnKjjga7ooYzliJfjga5Y6Lu444Gu5L2N572u44KS5oyH5a6a44GX44Gf5L2N572u44G456e75YuV44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSB4IFjou7jjga7np7vli5Xph49cbiAgICovXG4gIHB1YmxpYyB0cmFuc2xhdGVYKHg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3RyWzEyXSA9IHg7XG4gIH1cblxuICAvKipcbiAgICog54++5Zyo44Gu6KGM5YiX44GuWei7uOOBruS9jee9ruOCkuaMh+WumuOBl+OBn+S9jee9ruOBuOenu+WLleOBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0geSBZ6Lu444Gu56e75YuV6YePXG4gICAqL1xuICBwdWJsaWMgdHJhbnNsYXRlWSh5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl90clsxM10gPSB5O1xuICB9XG5cbiAgLyoqXG4gICAqIOePvuWcqOOBruihjOWIl+OBruaLoeWkp+eOh+OCkuebuOWvvueahOOBq+ioreWumuOBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0geCBY6Lu444Gu5ouh5aSn546HXG4gICAqIEBwYXJhbSB5IFnou7jjga7mi6HlpKfnjodcbiAgICovXG4gIHB1YmxpYyBzY2FsZVJlbGF0aXZlKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgdHIxOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgIHgsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICB5LFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMS4wXG4gICAgXSk7XG5cbiAgICBDdWJpc21NYXRyaXg0NC5tdWx0aXBseSh0cjEsIHRoaXMuX3RyLCB0aGlzLl90cik7XG4gIH1cblxuICAvKipcbiAgICog54++5Zyo44Gu6KGM5YiX44Gu5ouh5aSn546H44KS5oyH5a6a44GX44Gf5YCN546H44Gr6Kit5a6a44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSB4IFjou7jjga7mi6HlpKfnjodcbiAgICogQHBhcmFtIHkgWei7uOOBruaLoeWkp+eOh1xuICAgKi9cbiAgcHVibGljIHNjYWxlKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdHJbMF0gPSB4O1xuICAgIHRoaXMuX3RyWzVdID0geTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnj77lnKjjga7ooYzliJfjgavooYzliJfjgpLkuZfnrpdcbiAgICpcbiAgICogQHBhcmFtIG0g6KGM5YiXXG4gICAqL1xuICBwdWJsaWMgbXVsdGlwbHlCeU1hdHJpeChtOiBDdWJpc21NYXRyaXg0NCk6IHZvaWQge1xuICAgIEN1YmlzbU1hdHJpeDQ0Lm11bHRpcGx5KG0uZ2V0QXJyYXkoKSwgdGhpcy5fdHIsIHRoaXMuX3RyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqrjg5bjgrjjgqfjgq/jg4jjga7jgrPjg5Tjg7zjgpLnlJ/miJDjgZnjgotcbiAgICovXG4gIHB1YmxpYyBjbG9uZSgpOiBDdWJpc21NYXRyaXg0NCB7XG4gICAgY29uc3QgY2xvbmVNYXRyaXg6IEN1YmlzbU1hdHJpeDQ0ID0gbmV3IEN1YmlzbU1hdHJpeDQ0KCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjbG9uZU1hdHJpeC5fdHJbaV0gPSB0aGlzLl90cltpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmVNYXRyaXg7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3RyOiBGbG9hdDMyQXJyYXk7IC8vIDR4NOihjOWIl+ODh+ODvOOCv1xufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jdWJpc21tYXRyaXg0NCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgQ3ViaXNtTWF0cml4NDQgPSAkLkN1YmlzbU1hdHJpeDQ0O1xuICBleHBvcnQgdHlwZSBDdWJpc21NYXRyaXg0NCA9ICQuQ3ViaXNtTWF0cml4NDQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQXJTQTtBQXdTQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/math/cubismmatrix44.ts\n");

/***/ }),

/***/ "./Framework/src/math/cubismmodelmatrix.ts":
/*!*************************************************!*\
  !*** ./Framework/src/math/cubismmodelmatrix.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismModelMatrix = void 0;\nvar cubismmatrix44_1 = __webpack_require__(/*! ./cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\");\nvar CubismModelMatrix = (function (_super) {\n    __extends(CubismModelMatrix, _super);\n    function CubismModelMatrix(w, h) {\n        var _this = _super.call(this) || this;\n        _this._width = w !== undefined ? w : 0.0;\n        _this._height = h !== undefined ? h : 0.0;\n        _this.setHeight(2.0);\n        return _this;\n    }\n    CubismModelMatrix.prototype.setWidth = function (w) {\n        var scaleX = w / this._width;\n        var scaleY = scaleX;\n        this.scale(scaleX, scaleY);\n    };\n    CubismModelMatrix.prototype.setHeight = function (h) {\n        var scaleX = h / this._height;\n        var scaleY = scaleX;\n        this.scale(scaleX, scaleY);\n    };\n    CubismModelMatrix.prototype.setPosition = function (x, y) {\n        this.translate(x, y);\n    };\n    CubismModelMatrix.prototype.setCenterPosition = function (x, y) {\n        this.centerX(x);\n        this.centerY(y);\n    };\n    CubismModelMatrix.prototype.top = function (y) {\n        this.setY(y);\n    };\n    CubismModelMatrix.prototype.bottom = function (y) {\n        var h = this._height * this.getScaleY();\n        this.translateY(y - h);\n    };\n    CubismModelMatrix.prototype.left = function (x) {\n        this.setX(x);\n    };\n    CubismModelMatrix.prototype.right = function (x) {\n        var w = this._width * this.getScaleX();\n        this.translateX(x - w);\n    };\n    CubismModelMatrix.prototype.centerX = function (x) {\n        var w = this._width * this.getScaleX();\n        this.translateX(x - w / 2.0);\n    };\n    CubismModelMatrix.prototype.setX = function (x) {\n        this.translateX(x);\n    };\n    CubismModelMatrix.prototype.centerY = function (y) {\n        var h = this._height * this.getScaleY();\n        this.translateY(y - h / 2.0);\n    };\n    CubismModelMatrix.prototype.setY = function (y) {\n        this.translateY(y);\n    };\n    CubismModelMatrix.prototype.setupFromLayout = function (layout) {\n        var keyWidth = 'width';\n        var keyHeight = 'height';\n        var keyX = 'x';\n        var keyY = 'y';\n        var keyCenterX = 'center_x';\n        var keyCenterY = 'center_y';\n        var keyTop = 'top';\n        var keyBottom = 'bottom';\n        var keyLeft = 'left';\n        var keyRight = 'right';\n        for (var ite = layout.begin(); ite.notEqual(layout.end()); ite.preIncrement()) {\n            var key = ite.ptr().first;\n            var value = ite.ptr().second;\n            if (key == keyWidth) {\n                this.setWidth(value);\n            }\n            else if (key == keyHeight) {\n                this.setHeight(value);\n            }\n        }\n        for (var ite = layout.begin(); ite.notEqual(layout.end()); ite.preIncrement()) {\n            var key = ite.ptr().first;\n            var value = ite.ptr().second;\n            if (key == keyX) {\n                this.setX(value);\n            }\n            else if (key == keyY) {\n                this.setY(value);\n            }\n            else if (key == keyCenterX) {\n                this.centerX(value);\n            }\n            else if (key == keyCenterY) {\n                this.centerY(value);\n            }\n            else if (key == keyTop) {\n                this.top(value);\n            }\n            else if (key == keyBottom) {\n                this.bottom(value);\n            }\n            else if (key == keyLeft) {\n                this.left(value);\n            }\n            else if (key == keyRight) {\n                this.right(value);\n            }\n        }\n    };\n    return CubismModelMatrix;\n}(cubismmatrix44_1.CubismMatrix44));\nexports.CubismModelMatrix = CubismModelMatrix;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmodelmatrix */ \"./Framework/src/math/cubismmodelmatrix.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelMatrix = $.CubismModelMatrix;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtbW9kZWxtYXRyaXgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtbW9kZWxtYXRyaXgudHM/YzA0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBjc21NYXAsIGl0ZXJhdG9yIH0gZnJvbSAnLi4vdHlwZS9jc21tYXAnO1xuaW1wb3J0IHsgQ3ViaXNtTWF0cml4NDQgfSBmcm9tICcuL2N1YmlzbW1hdHJpeDQ0JztcblxuLyoqXG4gKiDjg6Ljg4fjg6vluqfmqJnoqK3lrprnlKjjga40eDTooYzliJdcbiAqXG4gKiDjg6Ljg4fjg6vluqfmqJnoqK3lrprnlKjjga40eDTooYzliJfjgq/jg6njgrlcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vZGVsTWF0cml4IGV4dGVuZHMgQ3ViaXNtTWF0cml4NDQge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqXG4gICAqIEBwYXJhbSB3IOaoquW5hVxuICAgKiBAcGFyYW0gaCDnuKbluYVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHc/OiBudW1iZXIsIGg/OiBudW1iZXIpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fd2lkdGggPSB3ICE9PSB1bmRlZmluZWQgPyB3IDogMC4wO1xuICAgIHRoaXMuX2hlaWdodCA9IGggIT09IHVuZGVmaW5lZCA/IGggOiAwLjA7XG5cbiAgICB0aGlzLnNldEhlaWdodCgyLjApO1xuICB9XG5cbiAgLyoqXG4gICAqIOaoquW5heOCkuioreWumlxuICAgKlxuICAgKiBAcGFyYW0gdyDmqKrluYVcbiAgICovXG4gIHB1YmxpYyBzZXRXaWR0aCh3OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY2FsZVg6IG51bWJlciA9IHcgLyB0aGlzLl93aWR0aDtcbiAgICBjb25zdCBzY2FsZVk6IG51bWJlciA9IHNjYWxlWDtcbiAgICB0aGlzLnNjYWxlKHNjYWxlWCwgc2NhbGVZKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnuKbluYXjgpLoqK3lrppcbiAgICogQHBhcmFtIGgg57im5bmFXG4gICAqL1xuICBwdWJsaWMgc2V0SGVpZ2h0KGg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHNjYWxlWDogbnVtYmVyID0gaCAvIHRoaXMuX2hlaWdodDtcbiAgICBjb25zdCBzY2FsZVk6IG51bWJlciA9IHNjYWxlWDtcbiAgICB0aGlzLnNjYWxlKHNjYWxlWCwgc2NhbGVZKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkvY3nva7jgpLoqK3lrppcbiAgICpcbiAgICogQHBhcmFtIHggWOi7uOOBruS9jee9rlxuICAgKiBAcGFyYW0geSBZ6Lu444Gu5L2N572uXG4gICAqL1xuICBwdWJsaWMgc2V0UG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnRyYW5zbGF0ZSh4LCB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuK3lv4PkvY3nva7jgpLoqK3lrppcbiAgICpcbiAgICogQHBhcmFtIHggWOi7uOOBruS4reW/g+S9jee9rlxuICAgKiBAcGFyYW0geSBZ6Lu444Gu5Lit5b+D5L2N572uXG4gICAqXG4gICAqIEBub3RlIHdpZHRo44GLaGVpZ2h044KS6Kit5a6a44GX44Gf44GC44Go44Gn44Gq44GE44Go44CB5ouh5aSn546H44GM5q2j44GX44GP5Y+W5b6X44Gn44GN44Gq44GE44Gf44KB44Ga44KM44KL44CCXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VudGVyUG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLmNlbnRlclgoeCk7XG4gICAgdGhpcy5jZW50ZXJZKHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOS4iui+uuOBruS9jee9ruOCkuioreWumuOBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0geSDkuIrovrrjga5Z6Lu45L2N572uXG4gICAqL1xuICBwdWJsaWMgdG9wKHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc2V0WSh5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuIvovrrjga7kvY3nva7jgpLoqK3lrprjgZnjgotcbiAgICpcbiAgICogQHBhcmFtIHkg5LiL6L6644GuWei7uOS9jee9rlxuICAgKi9cbiAgcHVibGljIGJvdHRvbSh5OiBudW1iZXIpIHtcbiAgICBjb25zdCBoOiBudW1iZXIgPSB0aGlzLl9oZWlnaHQgKiB0aGlzLmdldFNjYWxlWSgpO1xuXG4gICAgdGhpcy50cmFuc2xhdGVZKHkgLSBoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlt6bovrrjga7kvY3nva7jgpLoqK3lrppcbiAgICpcbiAgICogQHBhcmFtIHgg5bem6L6644GuWOi7uOS9jee9rlxuICAgKi9cbiAgcHVibGljIGxlZnQoeDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zZXRYKHgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPs+i+uuOBruS9jee9ruOCkuioreWumlxuICAgKlxuICAgKiBAcGFyYW0geCDlj7Povrrjga5Y6Lu45L2N572uXG4gICAqL1xuICBwdWJsaWMgcmlnaHQoeDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgdyA9IHRoaXMuX3dpZHRoICogdGhpcy5nZXRTY2FsZVgoKTtcblxuICAgIHRoaXMudHJhbnNsYXRlWCh4IC0gdyk7XG4gIH1cblxuICAvKipcbiAgICogWOi7uOOBruS4reW/g+S9jee9ruOCkuioreWumlxuICAgKlxuICAgKiBAcGFyYW0geCBY6Lu444Gu5Lit5b+D5L2N572uXG4gICAqL1xuICBwdWJsaWMgY2VudGVyWCh4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3ID0gdGhpcy5fd2lkdGggKiB0aGlzLmdldFNjYWxlWCgpO1xuXG4gICAgdGhpcy50cmFuc2xhdGVYKHggLSB3IC8gMi4wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBY6Lu444Gu5L2N572u44KS6Kit5a6aXG4gICAqXG4gICAqIEBwYXJhbSB4IFjou7jjga7kvY3nva5cbiAgICovXG4gIHB1YmxpYyBzZXRYKHg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudHJhbnNsYXRlWCh4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBZ6Lu444Gu5Lit5b+D5L2N572u44KS6Kit5a6aXG4gICAqXG4gICAqIEBwYXJhbSB5IFnou7jjga7kuK3lv4PkvY3nva5cbiAgICovXG4gIHB1YmxpYyBjZW50ZXJZKHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGg6IG51bWJlciA9IHRoaXMuX2hlaWdodCAqIHRoaXMuZ2V0U2NhbGVZKCk7XG5cbiAgICB0aGlzLnRyYW5zbGF0ZVkoeSAtIGggLyAyLjApO1xuICB9XG5cbiAgLyoqXG4gICAqIFnou7jjga7kvY3nva7jgpLoqK3lrprjgZnjgotcbiAgICpcbiAgICogQHBhcmFtIHkgWei7uOOBruS9jee9rlxuICAgKi9cbiAgcHVibGljIHNldFkoeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy50cmFuc2xhdGVZKHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODrOOCpOOCouOCpuODiOaDheWgseOBi+OCieS9jee9ruOCkuioreWumlxuICAgKlxuICAgKiBAcGFyYW0gbGF5b3V0IOODrOOCpOOCouOCpuODiOaDheWgsVxuICAgKi9cbiAgcHVibGljIHNldHVwRnJvbUxheW91dChsYXlvdXQ6IGNzbU1hcDxzdHJpbmcsIG51bWJlcj4pOiB2b2lkIHtcbiAgICBjb25zdCBrZXlXaWR0aCA9ICd3aWR0aCc7XG4gICAgY29uc3Qga2V5SGVpZ2h0ID0gJ2hlaWdodCc7XG4gICAgY29uc3Qga2V5WCA9ICd4JztcbiAgICBjb25zdCBrZXlZID0gJ3knO1xuICAgIGNvbnN0IGtleUNlbnRlclggPSAnY2VudGVyX3gnO1xuICAgIGNvbnN0IGtleUNlbnRlclkgPSAnY2VudGVyX3knO1xuICAgIGNvbnN0IGtleVRvcCA9ICd0b3AnO1xuICAgIGNvbnN0IGtleUJvdHRvbSA9ICdib3R0b20nO1xuICAgIGNvbnN0IGtleUxlZnQgPSAnbGVmdCc7XG4gICAgY29uc3Qga2V5UmlnaHQgPSAncmlnaHQnO1xuXG4gICAgZm9yIChcbiAgICAgIGNvbnN0IGl0ZTogaXRlcmF0b3I8c3RyaW5nLCBudW1iZXI+ID0gbGF5b3V0LmJlZ2luKCk7XG4gICAgICBpdGUubm90RXF1YWwobGF5b3V0LmVuZCgpKTtcbiAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgY29uc3Qga2V5OiBzdHJpbmcgPSBpdGUucHRyKCkuZmlyc3Q7XG4gICAgICBjb25zdCB2YWx1ZTogbnVtYmVyID0gaXRlLnB0cigpLnNlY29uZDtcblxuICAgICAgaWYgKGtleSA9PSBrZXlXaWR0aCkge1xuICAgICAgICB0aGlzLnNldFdpZHRoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09IGtleUhlaWdodCkge1xuICAgICAgICB0aGlzLnNldEhlaWdodCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChcbiAgICAgIGNvbnN0IGl0ZTogaXRlcmF0b3I8c3RyaW5nLCBudW1iZXI+ID0gbGF5b3V0LmJlZ2luKCk7XG4gICAgICBpdGUubm90RXF1YWwobGF5b3V0LmVuZCgpKTtcbiAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgY29uc3Qga2V5OiBzdHJpbmcgPSBpdGUucHRyKCkuZmlyc3Q7XG4gICAgICBjb25zdCB2YWx1ZTogbnVtYmVyID0gaXRlLnB0cigpLnNlY29uZDtcblxuICAgICAgaWYgKGtleSA9PSBrZXlYKSB7XG4gICAgICAgIHRoaXMuc2V0WCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PSBrZXlZKSB7XG4gICAgICAgIHRoaXMuc2V0WSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PSBrZXlDZW50ZXJYKSB7XG4gICAgICAgIHRoaXMuY2VudGVyWCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PSBrZXlDZW50ZXJZKSB7XG4gICAgICAgIHRoaXMuY2VudGVyWSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PSBrZXlUb3ApIHtcbiAgICAgICAgdGhpcy50b3AodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT0ga2V5Qm90dG9tKSB7XG4gICAgICAgIHRoaXMuYm90dG9tKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09IGtleUxlZnQpIHtcbiAgICAgICAgdGhpcy5sZWZ0KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09IGtleVJpZ2h0KSB7XG4gICAgICAgIHRoaXMucmlnaHQodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7IC8vIOaoquW5hVxuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlcjsgLy8g57im5bmFXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbW1vZGVsbWF0cml4Jztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb2RlbE1hdHJpeCA9ICQuQ3ViaXNtTW9kZWxNYXRyaXg7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vZGVsTWF0cml4ID0gJC5DdWJpc21Nb2RlbE1hdHJpeDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQTtBQU9BO0FBQUE7QUFPQTtBQUFBO0FBR0E7QUFDQTtBQUVBOztBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUExTUE7QUE2TUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/math/cubismmodelmatrix.ts\n");

/***/ }),

/***/ "./Framework/src/math/cubismtargetpoint.ts":
/*!*************************************************!*\
  !*** ./Framework/src/math/cubismtargetpoint.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismTargetPoint = void 0;\nvar cubismmath_1 = __webpack_require__(/*! ./cubismmath */ \"./Framework/src/math/cubismmath.ts\");\nvar FrameRate = 30;\nvar Epsilon = 0.01;\nvar CubismTargetPoint = (function () {\n    function CubismTargetPoint() {\n        this._faceTargetX = 0.0;\n        this._faceTargetY = 0.0;\n        this._faceX = 0.0;\n        this._faceY = 0.0;\n        this._faceVX = 0.0;\n        this._faceVY = 0.0;\n        this._lastTimeSeconds = 0.0;\n        this._userTimeSeconds = 0.0;\n    }\n    CubismTargetPoint.prototype.update = function (deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        var faceParamMaxV = 40.0 / 10.0;\n        var maxV = (faceParamMaxV * 1.0) / FrameRate;\n        if (this._lastTimeSeconds == 0.0) {\n            this._lastTimeSeconds = this._userTimeSeconds;\n            return;\n        }\n        var deltaTimeWeight = (this._userTimeSeconds - this._lastTimeSeconds) * FrameRate;\n        this._lastTimeSeconds = this._userTimeSeconds;\n        var timeToMaxSpeed = 0.15;\n        var frameToMaxSpeed = timeToMaxSpeed * FrameRate;\n        var maxA = (deltaTimeWeight * maxV) / frameToMaxSpeed;\n        var dx = this._faceTargetX - this._faceX;\n        var dy = this._faceTargetY - this._faceY;\n        if (cubismmath_1.CubismMath.abs(dx) <= Epsilon && cubismmath_1.CubismMath.abs(dy) <= Epsilon) {\n            return;\n        }\n        var d = cubismmath_1.CubismMath.sqrt(dx * dx + dy * dy);\n        var vx = (maxV * dx) / d;\n        var vy = (maxV * dy) / d;\n        var ax = vx - this._faceVX;\n        var ay = vy - this._faceVY;\n        var a = cubismmath_1.CubismMath.sqrt(ax * ax + ay * ay);\n        if (a < -maxA || a > maxA) {\n            ax *= maxA / a;\n            ay *= maxA / a;\n        }\n        this._faceVX += ax;\n        this._faceVY += ay;\n        {\n            var maxV_1 = 0.5 *\n                (cubismmath_1.CubismMath.sqrt(maxA * maxA + 16.0 * maxA * d - 8.0 * maxA * d) -\n                    maxA);\n            var curV = cubismmath_1.CubismMath.sqrt(this._faceVX * this._faceVX + this._faceVY * this._faceVY);\n            if (curV > maxV_1) {\n                this._faceVX *= maxV_1 / curV;\n                this._faceVY *= maxV_1 / curV;\n            }\n        }\n        this._faceX += this._faceVX;\n        this._faceY += this._faceVY;\n    };\n    CubismTargetPoint.prototype.getX = function () {\n        return this._faceX;\n    };\n    CubismTargetPoint.prototype.getY = function () {\n        return this._faceY;\n    };\n    CubismTargetPoint.prototype.set = function (x, y) {\n        this._faceTargetX = x;\n        this._faceTargetY = y;\n    };\n    return CubismTargetPoint;\n}());\nexports.CubismTargetPoint = CubismTargetPoint;\nvar $ = __importStar(__webpack_require__(/*! ./cubismtargetpoint */ \"./Framework/src/math/cubismtargetpoint.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismTargetPoint = $.CubismTargetPoint;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtdGFyZ2V0cG9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtdGFyZ2V0cG9pbnQudHM/NzBiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBDdWJpc21NYXRoIH0gZnJvbSAnLi9jdWJpc21tYXRoJztcblxuY29uc3QgRnJhbWVSYXRlID0gMzA7XG5jb25zdCBFcHNpbG9uID0gMC4wMTtcblxuLyoqXG4gKiDpoZTjga7lkJHjgY3jga7liLblvqHmqZ/og71cbiAqXG4gKiDpoZTjga7lkJHjgY3jga7liLblvqHmqZ/og73jgpLmj5DkvpvjgZnjgovjgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVRhcmdldFBvaW50IHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2ZhY2VUYXJnZXRYID0gMC4wO1xuICAgIHRoaXMuX2ZhY2VUYXJnZXRZID0gMC4wO1xuICAgIHRoaXMuX2ZhY2VYID0gMC4wO1xuICAgIHRoaXMuX2ZhY2VZID0gMC4wO1xuICAgIHRoaXMuX2ZhY2VWWCA9IDAuMDtcbiAgICB0aGlzLl9mYWNlVlkgPSAwLjA7XG4gICAgdGhpcy5fbGFzdFRpbWVTZWNvbmRzID0gMC4wO1xuICAgIHRoaXMuX3VzZXJUaW1lU2Vjb25kcyA9IDAuMDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDlh6bnkIZcbiAgICovXG4gIHB1YmxpYyB1cGRhdGUoZGVsdGFUaW1lU2Vjb25kczogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8g44OH44Or44K/5pmC6ZaT44KS5Yqg566X44GZ44KLXG4gICAgdGhpcy5fdXNlclRpbWVTZWNvbmRzICs9IGRlbHRhVGltZVNlY29uZHM7XG5cbiAgICAvLyDpppbjgpLkuK3lpK7jgYvjgonlt6blj7PjgavmjK/jgovjgajjgY3jga7lubPlnYfnmoTjgarpgJ/jgZXjga8g56eS6YCf5bqm44CC5Yqg6YCf44O75rib6YCf44KS6ICD5oWu44GX44Gm44CB44Gd44Gu77yS5YCN44KS5pyA6auY6YCf5bqm44Go44GZ44KLXG4gICAgLy8g6aGU44Gu5oyv44KK5YW35ZCI44KS44CB5Lit5aSu77yIMC4w77yJ44GL44KJ44CB5bem5Y+z44Gv77yIKy0xLjDvvInjgajjgZnjgotcbiAgICBjb25zdCBmYWNlUGFyYW1NYXhWOiBudW1iZXIgPSA0MC4wIC8gMTAuMDsgLy8gNy4156eS6ZaT44GrNDDliIbnp7vli5UoNS4zL3NjKVxuICAgIGNvbnN0IG1heFY6IG51bWJlciA9IChmYWNlUGFyYW1NYXhWICogMS4wKSAvIEZyYW1lUmF0ZTsgLy8gMWZyYW1l44GC44Gf44KK44Gr5aSJ5YyW44Gn44GN44KL6YCf5bqm44Gu5LiK6ZmQXG5cbiAgICBpZiAodGhpcy5fbGFzdFRpbWVTZWNvbmRzID09IDAuMCkge1xuICAgICAgdGhpcy5fbGFzdFRpbWVTZWNvbmRzID0gdGhpcy5fdXNlclRpbWVTZWNvbmRzO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbHRhVGltZVdlaWdodDogbnVtYmVyID1cbiAgICAgICh0aGlzLl91c2VyVGltZVNlY29uZHMgLSB0aGlzLl9sYXN0VGltZVNlY29uZHMpICogRnJhbWVSYXRlO1xuICAgIHRoaXMuX2xhc3RUaW1lU2Vjb25kcyA9IHRoaXMuX3VzZXJUaW1lU2Vjb25kcztcblxuICAgIC8vIOacgOmrmOmAn+W6puOBq+OBquOCi+OBvuOBp+OBruaZgumWk+OCklxuICAgIGNvbnN0IHRpbWVUb01heFNwZWVkID0gMC4xNTtcbiAgICBjb25zdCBmcmFtZVRvTWF4U3BlZWQ6IG51bWJlciA9IHRpbWVUb01heFNwZWVkICogRnJhbWVSYXRlOyAvLyBzZWMgKiBmcmFtZS9zZWNcbiAgICBjb25zdCBtYXhBOiBudW1iZXIgPSAoZGVsdGFUaW1lV2VpZ2h0ICogbWF4VikgLyBmcmFtZVRvTWF4U3BlZWQ7IC8vIDFmcmFtZeOBguOBn+OCiuOBruWKoOmAn+W6plxuXG4gICAgLy8g55uu5oyH44GZ5ZCR44GN44Gv44CB77yIZHgsIGR577yJ5pa55ZCR44Gu44OZ44Kv44OI44Or44Go44Gq44KLXG4gICAgY29uc3QgZHg6IG51bWJlciA9IHRoaXMuX2ZhY2VUYXJnZXRYIC0gdGhpcy5fZmFjZVg7XG4gICAgY29uc3QgZHk6IG51bWJlciA9IHRoaXMuX2ZhY2VUYXJnZXRZIC0gdGhpcy5fZmFjZVk7XG5cbiAgICBpZiAoQ3ViaXNtTWF0aC5hYnMoZHgpIDw9IEVwc2lsb24gJiYgQ3ViaXNtTWF0aC5hYnMoZHkpIDw9IEVwc2lsb24pIHtcbiAgICAgIHJldHVybjsgLy8g5aSJ5YyW44Gq44GXXG4gICAgfVxuXG4gICAgLy8g6YCf5bqm44Gu5pyA5aSn44KI44KK44KC5aSn44GN44GE5aC05ZCI44Gv44CB6YCf5bqm44KS6JC944Go44GZXG4gICAgY29uc3QgZDogbnVtYmVyID0gQ3ViaXNtTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgIC8vIOmAsuihjOaWueWQkeOBruacgOWkp+mAn+W6puODmeOCr+ODiOODq1xuICAgIGNvbnN0IHZ4OiBudW1iZXIgPSAobWF4ViAqIGR4KSAvIGQ7XG4gICAgY29uc3Qgdnk6IG51bWJlciA9IChtYXhWICogZHkpIC8gZDtcblxuICAgIC8vIOePvuWcqOOBrumAn+W6puOBi+OCieOAgeaWsOimj+mAn+W6puOBuOOBruWkieWMlu+8iOWKoOmAn+W6pu+8ieOCkuaxguOCgeOCi1xuICAgIGxldCBheDogbnVtYmVyID0gdnggLSB0aGlzLl9mYWNlVlg7XG4gICAgbGV0IGF5OiBudW1iZXIgPSB2eSAtIHRoaXMuX2ZhY2VWWTtcblxuICAgIGNvbnN0IGE6IG51bWJlciA9IEN1YmlzbU1hdGguc3FydChheCAqIGF4ICsgYXkgKiBheSk7XG5cbiAgICAvLyDliqDpgJ/jga7jgajjgY1cbiAgICBpZiAoYSA8IC1tYXhBIHx8IGEgPiBtYXhBKSB7XG4gICAgICBheCAqPSBtYXhBIC8gYTtcbiAgICAgIGF5ICo9IG1heEEgLyBhO1xuICAgIH1cblxuICAgIC8vIOWKoOmAn+W6puOCkuWFg+OBrumAn+W6puOBq+i2s+OBl+OBpuOAgeaWsOmAn+W6puOBqOOBmeOCi1xuICAgIHRoaXMuX2ZhY2VWWCArPSBheDtcbiAgICB0aGlzLl9mYWNlVlkgKz0gYXk7XG5cbiAgICAvLyDmjqXov5Hnm67moIfmlrnlkJHml7blubPmu5Hlh4/pgJ/nmoTlpITnkIZcbiAgICAvLyDlnKjorr7lrprnmoTliqDpgJ/luqbkuIvog73lpJ/lgZznlZnnmoTot53nprvlkozpgJ/luqbnmoTlhbPns7vvvIxcbiAgICAvLyDorqHnrpfnjrDlnKjlj6/ku6Xph4flj5bnmoTmnIDpq5jpgJ/luqbvvIzotoXov4fmnIDpq5jpgJ/luqbml7bmlL7mhaLpgJ/luqZcbiAgICAvLyDigLvmnKzmnaXvvIzkurrnsbvlj6/ku6XpgJrov4fogozogonlipvph4/mnaXosIPmlbTlipvph48o5Yqg6YCf5bqmKe+8jOaJgOS7peiHqueUseW6puabtOmrmO+8jOS9huWPquaYr+eugOWNleeahOWkhOeQhuiAjOW3slxuICAgIHtcbiAgICAgIC8vIOWKoOmAn+W6puOAgemAn+W6puOAgei3nembouOBrumWouS/guW8j+OAglxuICAgICAgLy8gICAgICAgICAgICAyICA2ICAgICAgICAgICAyICAgICAgICAgICAgICAgM1xuICAgICAgLy8gICAgICBzcXJ0KGEgIHQgICsgMTYgYSBoIHQgIC0gOCBhIGgpIC0gYSB0XG4gICAgICAvLyB2ID0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgNCB0ICAtIDJcbiAgICAgIC8vICh0PTEpXG4gICAgICAvLyBcdOWcqOaXtuWIu3TvvIzpooTlhYjlsIbliqDpgJ/luqblkozpgJ/luqborr7lrprkuLoxNjAo5bin546H77yM5peg5Y2V5L2NKVxuICAgICAgLy8gXHTlm6DkuLrogIPomZHkuobvvIzmiYDku6Xlj6/ku6XlsIZ0ID0gMeWIoOmZpCjigLvmnKrpqozor4EpXG5cbiAgICAgIGNvbnN0IG1heFY6IG51bWJlciA9XG4gICAgICAgIDAuNSAqXG4gICAgICAgIChDdWJpc21NYXRoLnNxcnQobWF4QSAqIG1heEEgKyAxNi4wICogbWF4QSAqIGQgLSA4LjAgKiBtYXhBICogZCkgLVxuICAgICAgICAgIG1heEEpO1xuICAgICAgY29uc3QgY3VyVjogbnVtYmVyID0gQ3ViaXNtTWF0aC5zcXJ0KFxuICAgICAgICB0aGlzLl9mYWNlVlggKiB0aGlzLl9mYWNlVlggKyB0aGlzLl9mYWNlVlkgKiB0aGlzLl9mYWNlVllcbiAgICAgICk7XG5cbiAgICAgIGlmIChjdXJWID4gbWF4Vikge1xuICAgICAgICAvLyDnj77lnKjjga7pgJ/luqYgPiDmnIDpq5jpgJ/luqbjga7jgajjgY3jgIHmnIDpq5jpgJ/luqbjgb7jgafmuJvpgJ9cbiAgICAgICAgdGhpcy5fZmFjZVZYICo9IG1heFYgLyBjdXJWO1xuICAgICAgICB0aGlzLl9mYWNlVlkgKj0gbWF4ViAvIGN1clY7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fZmFjZVggKz0gdGhpcy5fZmFjZVZYO1xuICAgIHRoaXMuX2ZhY2VZICs9IHRoaXMuX2ZhY2VWWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBY6Lu444Gu6aGU44Gu5ZCR44GN44Gu5YCk44KS5Y+W5b6XXG4gICAqXG4gICAqIEByZXR1cm4gWOi7uOOBrumhlOOBruWQkeOBjeOBruWApO+8iC0xLjAgfiAxLjDvvIlcbiAgICovXG4gIHB1YmxpYyBnZXRYKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2ZhY2VYO1xuICB9XG5cbiAgLyoqXG4gICAqIFnou7jjga7poZTjga7lkJHjgY3jga7lgKTjgpLlj5blvpdcbiAgICpcbiAgICogQHJldHVybiBZ6Lu444Gu6aGU44Gu5ZCR44GN44Gu5YCk77yILTEuMCB+IDEuMO+8iVxuICAgKi9cbiAgcHVibGljIGdldFkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZmFjZVk7XG4gIH1cblxuICAvKipcbiAgICog6aGU44Gu5ZCR44GN44Gu55uu5qiZ5YCk44KS6Kit5a6aXG4gICAqXG4gICAqIEBwYXJhbSB4IFjou7jjga7poZTjga7lkJHjgY3jga7lgKTvvIgtMS4wIH4gMS4w77yJXG4gICAqIEBwYXJhbSB5IFnou7jjga7poZTjga7lkJHjgY3jga7lgKTvvIgtMS4wIH4gMS4w77yJXG4gICAqL1xuICBwdWJsaWMgc2V0KHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZmFjZVRhcmdldFggPSB4O1xuICAgIHRoaXMuX2ZhY2VUYXJnZXRZID0geTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZhY2VUYXJnZXRYOiBudW1iZXI7IC8vIOmhlOOBruWQkeOBjeOBrljnm67mqJnlgKTvvIjjgZPjga7lgKTjgavov5HjgaXjgYTjgabjgYTjgY/vvIlcbiAgcHJpdmF0ZSBfZmFjZVRhcmdldFk6IG51bWJlcjsgLy8g6aGU44Gu5ZCR44GN44GuWeebruaomeWApO+8iOOBk+OBruWApOOBq+i/keOBpeOBhOOBpuOBhOOBj++8iVxuICBwcml2YXRlIF9mYWNlWDogbnVtYmVyOyAvLyDpoZTjga7lkJHjgY1Y77yILTEuMCB+IDEuMO+8iVxuICBwcml2YXRlIF9mYWNlWTogbnVtYmVyOyAvLyDpoZTjga7lkJHjgY1Z77yILTEuMCB+IDEuMO+8iVxuICBwcml2YXRlIF9mYWNlVlg6IG51bWJlcjsgLy8g6aGU44Gu5ZCR44GN44Gu5aSJ5YyW6YCf5bqmWFxuICBwcml2YXRlIF9mYWNlVlk6IG51bWJlcjsgLy8g6aGU44Gu5ZCR44GN44Gu5aSJ5YyW6YCf5bqmWVxuICBwcml2YXRlIF9sYXN0VGltZVNlY29uZHM6IG51bWJlcjsgLy8g5pyA5b6M44Gu5a6f6KGM5pmC6ZaTW+enkl1cbiAgcHJpdmF0ZSBfdXNlclRpbWVTZWNvbmRzOiBudW1iZXI7IC8vIOODh+ODq+OCv+aZgumWk+OBruepjeeul+WApFvnp5JdXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbXRhcmdldHBvaW50Jztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21UYXJnZXRQb2ludCA9ICQuQ3ViaXNtVGFyZ2V0UG9pbnQ7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVRhcmdldFBvaW50ID0gJC5DdWJpc21UYXJnZXRQb2ludDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9BO0FBRUE7QUFDQTtBQU9BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFNQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFBQTtBQS9JQTtBQWtKQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/math/cubismtargetpoint.ts\n");

/***/ }),

/***/ "./Framework/src/math/cubismvector2.ts":
/*!*********************************************!*\
  !*** ./Framework/src/math/cubismvector2.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismVector2 = void 0;\nvar CubismVector2 = (function () {\n    function CubismVector2(x, y) {\n        this.x = x;\n        this.y = y;\n        this.x = x == undefined ? 0.0 : x;\n        this.y = y == undefined ? 0.0 : y;\n    }\n    CubismVector2.prototype.add = function (vector2) {\n        var ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x + vector2.x;\n        ret.y = this.y + vector2.y;\n        return ret;\n    };\n    CubismVector2.prototype.substract = function (vector2) {\n        var ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x - vector2.x;\n        ret.y = this.y - vector2.y;\n        return ret;\n    };\n    CubismVector2.prototype.multiply = function (vector2) {\n        var ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x * vector2.x;\n        ret.y = this.y * vector2.y;\n        return ret;\n    };\n    CubismVector2.prototype.multiplyByScaler = function (scalar) {\n        return this.multiply(new CubismVector2(scalar, scalar));\n    };\n    CubismVector2.prototype.division = function (vector2) {\n        var ret = new CubismVector2(0.0, 0.0);\n        ret.x = this.x / vector2.x;\n        ret.y = this.y / vector2.y;\n        return ret;\n    };\n    CubismVector2.prototype.divisionByScalar = function (scalar) {\n        return this.division(new CubismVector2(scalar, scalar));\n    };\n    CubismVector2.prototype.getLength = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    CubismVector2.prototype.getDistanceWith = function (a) {\n        return Math.sqrt((this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y));\n    };\n    CubismVector2.prototype.dot = function (a) {\n        return this.x * a.x + this.y * a.y;\n    };\n    CubismVector2.prototype.normalize = function () {\n        var length = Math.pow(this.x * this.x + this.y * this.y, 0.5);\n        this.x = this.x / length;\n        this.y = this.y / length;\n    };\n    CubismVector2.prototype.isEqual = function (rhs) {\n        return this.x == rhs.x && this.y == rhs.y;\n    };\n    CubismVector2.prototype.isNotEqual = function (rhs) {\n        return !this.isEqual(rhs);\n    };\n    return CubismVector2;\n}());\nexports.CubismVector2 = CubismVector2;\nvar $ = __importStar(__webpack_require__(/*! ./cubismvector2 */ \"./Framework/src/math/cubismvector2.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismVector2 = $.CubismVector2;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtdmVjdG9yMi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbWF0aC9jdWJpc212ZWN0b3IyLnRzP2RiMDgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuLyoqXG4gKiAy5qyh5YWD44OZ44Kv44OI44Or5Z6LXG4gKlxuICogMuasoeWFg+ODmeOCr+ODiOODq+Wei+OBruapn+iDveOCkuaPkOS+m+OBmeOCi+OAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtVmVjdG9yMiB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgeD86IG51bWJlciwgcHVibGljIHk/OiBudW1iZXIpIHtcbiAgICB0aGlzLnggPSB4ID09IHVuZGVmaW5lZCA/IDAuMCA6IHg7XG5cbiAgICB0aGlzLnkgPSB5ID09IHVuZGVmaW5lZCA/IDAuMCA6IHk7XG4gIH1cblxuICAvKipcbiAgICog44OZ44Kv44OI44Or44Gu5Yqg566XXG4gICAqXG4gICAqIEBwYXJhbSB2ZWN0b3IyIOWKoOeul+OBmeOCi+ODmeOCr+ODiOODq+WApFxuICAgKiBAcmV0dXJuIOWKoOeul+e1kOaenCDjg5njgq/jg4jjg6vlgKRcbiAgICovXG4gIHB1YmxpYyBhZGQodmVjdG9yMjogQ3ViaXNtVmVjdG9yMik6IEN1YmlzbVZlY3RvcjIge1xuICAgIGNvbnN0IHJldDogQ3ViaXNtVmVjdG9yMiA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgMC4wKTtcbiAgICByZXQueCA9IHRoaXMueCArIHZlY3RvcjIueDtcbiAgICByZXQueSA9IHRoaXMueSArIHZlY3RvcjIueTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIOODmeOCr+ODiOODq+OBrua4m+eul1xuICAgKlxuICAgKiBAcGFyYW0gdmVjdG9yMiDmuJvnrpfjgZnjgovjg5njgq/jg4jjg6vlgKRcbiAgICogQHJldHVybiDmuJvnrpfntZDmnpwg44OZ44Kv44OI44Or5YCkXG4gICAqL1xuICBwdWJsaWMgc3Vic3RyYWN0KHZlY3RvcjI6IEN1YmlzbVZlY3RvcjIpOiBDdWJpc21WZWN0b3IyIHtcbiAgICBjb25zdCByZXQ6IEN1YmlzbVZlY3RvcjIgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLjAsIDAuMCk7XG4gICAgcmV0LnggPSB0aGlzLnggLSB2ZWN0b3IyLng7XG4gICAgcmV0LnkgPSB0aGlzLnkgLSB2ZWN0b3IyLnk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5njgq/jg4jjg6vjga7kuZfnrpdcbiAgICpcbiAgICogQHBhcmFtIHZlY3RvcjIg5LmX566X44GZ44KL44OZ44Kv44OI44Or5YCkXG4gICAqIEByZXR1cm4g5LmX566X57WQ5p6cIOODmeOCr+ODiOODq+WApFxuICAgKi9cbiAgcHVibGljIG11bHRpcGx5KHZlY3RvcjI6IEN1YmlzbVZlY3RvcjIpOiBDdWJpc21WZWN0b3IyIHtcbiAgICBjb25zdCByZXQ6IEN1YmlzbVZlY3RvcjIgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLjAsIDAuMCk7XG4gICAgcmV0LnggPSB0aGlzLnggKiB2ZWN0b3IyLng7XG4gICAgcmV0LnkgPSB0aGlzLnkgKiB2ZWN0b3IyLnk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5njgq/jg4jjg6vjga7kuZfnrpco44K544Kr44Op44O8KVxuICAgKlxuICAgKiBAcGFyYW0gc2NhbGFyIOS5l+eul+OBmeOCi+OCueOCq+ODqeODvOWApFxuICAgKiBAcmV0dXJuIOS5l+eul+e1kOaenCDjg5njgq/jg4jjg6vlgKRcbiAgICovXG4gIHB1YmxpYyBtdWx0aXBseUJ5U2NhbGVyKHNjYWxhcjogbnVtYmVyKTogQ3ViaXNtVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHkobmV3IEN1YmlzbVZlY3RvcjIoc2NhbGFyLCBzY2FsYXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5njgq/jg4jjg6vjga7pmaTnrpdcbiAgICpcbiAgICogQHBhcmFtIHZlY3RvcjIg6Zmk566X44GZ44KL44OZ44Kv44OI44Or5YCkXG4gICAqIEByZXR1cm4g6Zmk566X57WQ5p6cIOODmeOCr+ODiOODq+WApFxuICAgKi9cbiAgcHVibGljIGRpdmlzaW9uKHZlY3RvcjI6IEN1YmlzbVZlY3RvcjIpOiBDdWJpc21WZWN0b3IyIHtcbiAgICBjb25zdCByZXQ6IEN1YmlzbVZlY3RvcjIgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLjAsIDAuMCk7XG4gICAgcmV0LnggPSB0aGlzLnggLyB2ZWN0b3IyLng7XG4gICAgcmV0LnkgPSB0aGlzLnkgLyB2ZWN0b3IyLnk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5njgq/jg4jjg6vjga7pmaTnrpco44K544Kr44Op44O8KVxuICAgKlxuICAgKiBAcGFyYW0gc2NhbGFyIOmZpOeul+OBmeOCi+OCueOCq+ODqeODvOWApFxuICAgKiBAcmV0dXJuIOmZpOeul+e1kOaenCDjg5njgq/jg4jjg6vlgKRcbiAgICovXG4gIHB1YmxpYyBkaXZpc2lvbkJ5U2NhbGFyKHNjYWxhcjogbnVtYmVyKTogQ3ViaXNtVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuZGl2aXNpb24obmV3IEN1YmlzbVZlY3RvcjIoc2NhbGFyLCBzY2FsYXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5njgq/jg4jjg6vjga7plbfjgZXjgpLlj5blvpfjgZnjgotcbiAgICpcbiAgICogQHJldHVybiDjg5njgq/jg4jjg6vjga7plbfjgZVcbiAgICovXG4gIHB1YmxpYyBnZXRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG4gIH1cblxuICAvKipcbiAgICog44OZ44Kv44OI44Or44Gu6Led6Zui44Gu5Y+W5b6XXG4gICAqXG4gICAqIEBwYXJhbSBhIOeCuVxuICAgKiBAcmV0dXJuIOODmeOCr+ODiOODq+OBrui3nembolxuICAgKi9cbiAgcHVibGljIGdldERpc3RhbmNlV2l0aChhOiBDdWJpc21WZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KFxuICAgICAgKHRoaXMueCAtIGEueCkgKiAodGhpcy54IC0gYS54KSArICh0aGlzLnkgLSBhLnkpICogKHRoaXMueSAtIGEueSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOODieODg+ODiOepjeOBruioiOeul1xuICAgKlxuICAgKiBAcGFyYW0gYSDlgKRcbiAgICogQHJldHVybiDntZDmnpxcbiAgICovXG4gIHB1YmxpYyBkb3QoYTogQ3ViaXNtVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMueCAqIGEueCArIHRoaXMueSAqIGEueTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmraPopo/ljJbjga7pgannlKhcbiAgICovXG4gIHB1YmxpYyBub3JtYWxpemUoKTogdm9pZCB7XG4gICAgY29uc3QgbGVuZ3RoOiBudW1iZXIgPSBNYXRoLnBvdyh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnksIDAuNSk7XG5cbiAgICB0aGlzLnggPSB0aGlzLnggLyBsZW5ndGg7XG4gICAgdGhpcy55ID0gdGhpcy55IC8gbGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIOetieOBl+OBleOBrueiuuiqje+8iOetieOBl+OBhOOBi++8n++8iVxuICAgKlxuICAgKiDlgKTjgYznrYnjgZfjgYTjgYvvvJ9cbiAgICpcbiAgICogQHBhcmFtIHJocyDnorroqo3jgZnjgovlgKRcbiAgICogQHJldHVybiB0cnVlIOWApOOBr+etieOBl+OBhFxuICAgKiBAcmV0dXJuIGZhbHNlIOWApOOBr+etieOBl+OBj+OBquOBhFxuICAgKi9cbiAgcHVibGljIGlzRXF1YWwocmhzOiBDdWJpc21WZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMueCA9PSByaHMueCAmJiB0aGlzLnkgPT0gcmhzLnk7XG4gIH1cblxuICAvKipcbiAgICog562J44GX44GV44Gu56K66KqN77yI562J44GX44GP44Gq44GE44GL77yf77yJXG4gICAqXG4gICAqIOWApOOBjOetieOBl+OBj+OBquOBhOOBi++8n1xuICAgKlxuICAgKiBAcGFyYW0gcmhzIOeiuuiqjeOBmeOCi+WApFxuICAgKiBAcmV0dXJuIHRydWUg5YCk44Gv562J44GX44GP44Gq44GEXG4gICAqIEByZXR1cm4gZmFsc2Ug5YCk44Gv562J44GX44GEXG4gICAqL1xuICBwdWJsaWMgaXNOb3RFcXVhbChyaHM6IEN1YmlzbVZlY3RvcjIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuaXNFcXVhbChyaHMpO1xuICB9XG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbXZlY3RvcjInO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVZlY3RvcjIgPSAkLkN1YmlzbVZlY3RvcjI7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVZlY3RvcjIgPSAkLkN1YmlzbVZlY3RvcjI7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFHQTtBQVFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBcEpBO0FBdUpBO0FBRUE7QUFBQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Framework/src/math/cubismvector2.ts\n");

/***/ }),

/***/ "./Framework/src/math/cubismviewmatrix.ts":
/*!************************************************!*\
  !*** ./Framework/src/math/cubismviewmatrix.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismViewMatrix = void 0;\nvar cubismmatrix44_1 = __webpack_require__(/*! ./cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\");\nvar CubismViewMatrix = (function (_super) {\n    __extends(CubismViewMatrix, _super);\n    function CubismViewMatrix() {\n        var _this = _super.call(this) || this;\n        _this._screenLeft = 0.0;\n        _this._screenRight = 0.0;\n        _this._screenTop = 0.0;\n        _this._screenBottom = 0.0;\n        _this._maxLeft = 0.0;\n        _this._maxRight = 0.0;\n        _this._maxTop = 0.0;\n        _this._maxBottom = 0.0;\n        _this._maxScale = 0.0;\n        _this._minScale = 0.0;\n        return _this;\n    }\n    CubismViewMatrix.prototype.adjustTranslate = function (x, y) {\n        if (this._tr[0] * this._maxLeft + (this._tr[12] + x) > this._screenLeft) {\n            x = this._screenLeft - this._tr[0] * this._maxLeft - this._tr[12];\n        }\n        if (this._tr[0] * this._maxRight + (this._tr[12] + x) < this._screenRight) {\n            x = this._screenRight - this._tr[0] * this._maxRight - this._tr[12];\n        }\n        if (this._tr[5] * this._maxTop + (this._tr[13] + y) < this._screenTop) {\n            y = this._screenTop - this._tr[5] * this._maxTop - this._tr[13];\n        }\n        if (this._tr[5] * this._maxBottom + (this._tr[13] + y) >\n            this._screenBottom) {\n            y = this._screenBottom - this._tr[5] * this._maxBottom - this._tr[13];\n        }\n        var tr1 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            x,\n            y,\n            0.0,\n            1.0\n        ]);\n        cubismmatrix44_1.CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    };\n    CubismViewMatrix.prototype.adjustScale = function (cx, cy, scale) {\n        var maxScale = this.getMaxScale();\n        var minScale = this.getMinScale();\n        var targetScale = scale * this._tr[0];\n        if (targetScale < minScale) {\n            if (this._tr[0] > 0.0) {\n                scale = minScale / this._tr[0];\n            }\n        }\n        else if (targetScale > maxScale) {\n            if (this._tr[0] > 0.0) {\n                scale = maxScale / this._tr[0];\n            }\n        }\n        var tr1 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            cx,\n            cy,\n            0.0,\n            1.0\n        ]);\n        var tr2 = new Float32Array([\n            scale,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            scale,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0\n        ]);\n        var tr3 = new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            -cx,\n            -cy,\n            0.0,\n            1.0\n        ]);\n        cubismmatrix44_1.CubismMatrix44.multiply(tr3, this._tr, this._tr);\n        cubismmatrix44_1.CubismMatrix44.multiply(tr2, this._tr, this._tr);\n        cubismmatrix44_1.CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    };\n    CubismViewMatrix.prototype.setScreenRect = function (left, right, bottom, top) {\n        this._screenLeft = left;\n        this._screenRight = right;\n        this._screenBottom = bottom;\n        this._screenTop = top;\n    };\n    CubismViewMatrix.prototype.setMaxScreenRect = function (left, right, bottom, top) {\n        this._maxLeft = left;\n        this._maxRight = right;\n        this._maxTop = top;\n        this._maxBottom = bottom;\n    };\n    CubismViewMatrix.prototype.setMaxScale = function (maxScale) {\n        this._maxScale = maxScale;\n    };\n    CubismViewMatrix.prototype.setMinScale = function (minScale) {\n        this._minScale = minScale;\n    };\n    CubismViewMatrix.prototype.getMaxScale = function () {\n        return this._maxScale;\n    };\n    CubismViewMatrix.prototype.getMinScale = function () {\n        return this._minScale;\n    };\n    CubismViewMatrix.prototype.isMaxScale = function () {\n        return this.getScaleX() >= this._maxScale;\n    };\n    CubismViewMatrix.prototype.isMinScale = function () {\n        return this.getScaleX() <= this._minScale;\n    };\n    CubismViewMatrix.prototype.getScreenLeft = function () {\n        return this._screenLeft;\n    };\n    CubismViewMatrix.prototype.getScreenRight = function () {\n        return this._screenRight;\n    };\n    CubismViewMatrix.prototype.getScreenBottom = function () {\n        return this._screenBottom;\n    };\n    CubismViewMatrix.prototype.getScreenTop = function () {\n        return this._screenTop;\n    };\n    CubismViewMatrix.prototype.getMaxLeft = function () {\n        return this._maxLeft;\n    };\n    CubismViewMatrix.prototype.getMaxRight = function () {\n        return this._maxRight;\n    };\n    CubismViewMatrix.prototype.getMaxBottom = function () {\n        return this._maxBottom;\n    };\n    CubismViewMatrix.prototype.getMaxTop = function () {\n        return this._maxTop;\n    };\n    return CubismViewMatrix;\n}(cubismmatrix44_1.CubismMatrix44));\nexports.CubismViewMatrix = CubismViewMatrix;\nvar $ = __importStar(__webpack_require__(/*! ./cubismviewmatrix */ \"./Framework/src/math/cubismviewmatrix.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismViewMatrix = $.CubismViewMatrix;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21hdGgvY3ViaXNtdmlld21hdHJpeC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbWF0aC9jdWJpc212aWV3bWF0cml4LnRzP2UwMGUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtTWF0cml4NDQgfSBmcm9tICcuL2N1YmlzbW1hdHJpeDQ0JztcblxuLyoqXG4gKiDjgqvjg6Hjg6njga7kvY3nva7lpInmm7Tjgavkvb/jgYbjgajkvr/liKnjgao0eDTooYzliJdcbiAqXG4gKiDjgqvjg6Hjg6njga7kvY3nva7lpInmm7Tjgavkvb/jgYbjgajkvr/liKnjgao0eDTooYzliJfjga7jgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVZpZXdNYXRyaXggZXh0ZW5kcyBDdWJpc21NYXRyaXg0NCB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3NjcmVlbkxlZnQgPSAwLjA7XG4gICAgdGhpcy5fc2NyZWVuUmlnaHQgPSAwLjA7XG4gICAgdGhpcy5fc2NyZWVuVG9wID0gMC4wO1xuICAgIHRoaXMuX3NjcmVlbkJvdHRvbSA9IDAuMDtcbiAgICB0aGlzLl9tYXhMZWZ0ID0gMC4wO1xuICAgIHRoaXMuX21heFJpZ2h0ID0gMC4wO1xuICAgIHRoaXMuX21heFRvcCA9IDAuMDtcbiAgICB0aGlzLl9tYXhCb3R0b20gPSAwLjA7XG4gICAgdGhpcy5fbWF4U2NhbGUgPSAwLjA7XG4gICAgdGhpcy5fbWluU2NhbGUgPSAwLjA7XG4gIH1cblxuICAvKipcbiAgICog56e75YuV44KS6Kq/5pW0XG4gICAqXG4gICAqIEBwYXJhbSB4IFjou7jjga7np7vli5Xph49cbiAgICogQHBhcmFtIHkgWei7uOOBruenu+WLlemHj1xuICAgKi9cbiAgcHVibGljIGFkanVzdFRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl90clswXSAqIHRoaXMuX21heExlZnQgKyAodGhpcy5fdHJbMTJdICsgeCkgPiB0aGlzLl9zY3JlZW5MZWZ0KSB7XG4gICAgICB4ID0gdGhpcy5fc2NyZWVuTGVmdCAtIHRoaXMuX3RyWzBdICogdGhpcy5fbWF4TGVmdCAtIHRoaXMuX3RyWzEyXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdHJbMF0gKiB0aGlzLl9tYXhSaWdodCArICh0aGlzLl90clsxMl0gKyB4KSA8IHRoaXMuX3NjcmVlblJpZ2h0KSB7XG4gICAgICB4ID0gdGhpcy5fc2NyZWVuUmlnaHQgLSB0aGlzLl90clswXSAqIHRoaXMuX21heFJpZ2h0IC0gdGhpcy5fdHJbMTJdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl90cls1XSAqIHRoaXMuX21heFRvcCArICh0aGlzLl90clsxM10gKyB5KSA8IHRoaXMuX3NjcmVlblRvcCkge1xuICAgICAgeSA9IHRoaXMuX3NjcmVlblRvcCAtIHRoaXMuX3RyWzVdICogdGhpcy5fbWF4VG9wIC0gdGhpcy5fdHJbMTNdO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuX3RyWzVdICogdGhpcy5fbWF4Qm90dG9tICsgKHRoaXMuX3RyWzEzXSArIHkpID5cbiAgICAgIHRoaXMuX3NjcmVlbkJvdHRvbVxuICAgICkge1xuICAgICAgeSA9IHRoaXMuX3NjcmVlbkJvdHRvbSAtIHRoaXMuX3RyWzVdICogdGhpcy5fbWF4Qm90dG9tIC0gdGhpcy5fdHJbMTNdO1xuICAgIH1cblxuICAgIGNvbnN0IHRyMTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIDAuMCxcbiAgICAgIDEuMFxuICAgIF0pO1xuXG4gICAgQ3ViaXNtTWF0cml4NDQubXVsdGlwbHkodHIxLCB0aGlzLl90ciwgdGhpcy5fdHIpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaLoeWkp+eOh+OCkuiqv+aVtFxuICAgKlxuICAgKiBAcGFyYW0gY3gg5ouh5aSn44KS6KGM44GGWOi7uOOBruS4reW/g+S9jee9rlxuICAgKiBAcGFyYW0gY3kg5ouh5aSn44KS6KGM44GGWei7uOOBruS4reW/g+S9jee9rlxuICAgKiBAcGFyYW0gc2NhbGUg5ouh5aSn546HXG4gICAqL1xuICBwdWJsaWMgYWRqdXN0U2NhbGUoY3g6IG51bWJlciwgY3k6IG51bWJlciwgc2NhbGU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG1heFNjYWxlOiBudW1iZXIgPSB0aGlzLmdldE1heFNjYWxlKCk7XG4gICAgY29uc3QgbWluU2NhbGU6IG51bWJlciA9IHRoaXMuZ2V0TWluU2NhbGUoKTtcblxuICAgIGNvbnN0IHRhcmdldFNjYWxlID0gc2NhbGUgKiB0aGlzLl90clswXTtcblxuICAgIGlmICh0YXJnZXRTY2FsZSA8IG1pblNjYWxlKSB7XG4gICAgICBpZiAodGhpcy5fdHJbMF0gPiAwLjApIHtcbiAgICAgICAgc2NhbGUgPSBtaW5TY2FsZSAvIHRoaXMuX3RyWzBdO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGFyZ2V0U2NhbGUgPiBtYXhTY2FsZSkge1xuICAgICAgaWYgKHRoaXMuX3RyWzBdID4gMC4wKSB7XG4gICAgICAgIHNjYWxlID0gbWF4U2NhbGUgLyB0aGlzLl90clswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0cjE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMS4wLFxuICAgICAgMC4wLFxuICAgICAgY3gsXG4gICAgICBjeSxcbiAgICAgIDAuMCxcbiAgICAgIDEuMFxuICAgIF0pO1xuXG4gICAgY29uc3QgdHIyOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgIHNjYWxlLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgc2NhbGUsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjBcbiAgICBdKTtcblxuICAgIGNvbnN0IHRyMzogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICAxLjAsXG4gICAgICAwLjAsXG4gICAgICAtY3gsXG4gICAgICAtY3ksXG4gICAgICAwLjAsXG4gICAgICAxLjBcbiAgICBdKTtcblxuICAgIEN1YmlzbU1hdHJpeDQ0Lm11bHRpcGx5KHRyMywgdGhpcy5fdHIsIHRoaXMuX3RyKTtcbiAgICBDdWJpc21NYXRyaXg0NC5tdWx0aXBseSh0cjIsIHRoaXMuX3RyLCB0aGlzLl90cik7XG4gICAgQ3ViaXNtTWF0cml4NDQubXVsdGlwbHkodHIxLCB0aGlzLl90ciwgdGhpcy5fdHIpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+ODkOOCpOOCueOBq+WvvuW/nOOBmeOCi+irlueQhuW6p+mkiueUn+OBruevhOWbsuOBruioreWumlxuICAgKlxuICAgKiBAcGFyYW0gbGVmdCAgICAgIOW3pui+uuOBrljou7jjga7kvY3nva5cbiAgICogQHBhcmFtIHJpZ2h0ICAgICDlj7Povrrjga5Y6Lu444Gu5L2N572uXG4gICAqIEBwYXJhbSBib3R0b20gICAg5LiL6L6644GuWei7uOOBruS9jee9rlxuICAgKiBAcGFyYW0gdG9wICAgICAgIOS4iui+uuOBrlnou7jjga7kvY3nva5cbiAgICovXG4gIHB1YmxpYyBzZXRTY3JlZW5SZWN0KFxuICAgIGxlZnQ6IG51bWJlcixcbiAgICByaWdodDogbnVtYmVyLFxuICAgIGJvdHRvbTogbnVtYmVyLFxuICAgIHRvcDogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIHRoaXMuX3NjcmVlbkxlZnQgPSBsZWZ0O1xuICAgIHRoaXMuX3NjcmVlblJpZ2h0ID0gcmlnaHQ7XG4gICAgdGhpcy5fc2NyZWVuQm90dG9tID0gYm90dG9tO1xuICAgIHRoaXMuX3NjcmVlblRvcCA9IHRvcDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjg5DjgqTjgrnjgavlr77lv5zjgZnjgovoq5bnkIbluqfmqJnkuIrjga7np7vli5Xlj6/og73nr4Tlm7Ljga7oqK3lrppcbiAgICogQHBhcmFtIGxlZnQgICAgICDlt6bovrrjga5Y6Lu444Gu5L2N572uXG4gICAqIEBwYXJhbSByaWdodCAgICAg5Y+z6L6644GuWOi7uOOBruS9jee9rlxuICAgKiBAcGFyYW0gYm90dG9tICAgIOS4i+i+uuOBrlnou7jjga7kvY3nva5cbiAgICogQHBhcmFtIHRvcCAgICAgICDkuIrovrrjga5Z6Lu444Gu5L2N572uXG4gICAqL1xuICBwdWJsaWMgc2V0TWF4U2NyZWVuUmVjdChcbiAgICBsZWZ0OiBudW1iZXIsXG4gICAgcmlnaHQ6IG51bWJlcixcbiAgICBib3R0b206IG51bWJlcixcbiAgICB0b3A6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9tYXhMZWZ0ID0gbGVmdDtcbiAgICB0aGlzLl9tYXhSaWdodCA9IHJpZ2h0O1xuICAgIHRoaXMuX21heFRvcCA9IHRvcDtcbiAgICB0aGlzLl9tYXhCb3R0b20gPSBib3R0b207XG4gIH1cblxuICAvKipcbiAgICog5pyA5aSn5ouh5aSn546H44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBtYXhTY2FsZSDmnIDlpKfmi6HlpKfnjodcbiAgICovXG4gIHB1YmxpYyBzZXRNYXhTY2FsZShtYXhTY2FsZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbWF4U2NhbGUgPSBtYXhTY2FsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmnIDlsI/mi6HlpKfnjofjga7oqK3lrppcbiAgICogQHBhcmFtIG1pblNjYWxlIOacgOWwj+aLoeWkp+eOh1xuICAgKi9cbiAgcHVibGljIHNldE1pblNjYWxlKG1pblNjYWxlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9taW5TY2FsZSA9IG1pblNjYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIOacgOWkp+aLoeWkp+eOh+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOacgOWkp+aLoeWkp+eOh1xuICAgKi9cbiAgcHVibGljIGdldE1heFNjYWxlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heFNjYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIOacgOWwj+aLoeWkp+eOh+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOacgOWwj+aLoeWkp+eOh1xuICAgKi9cbiAgcHVibGljIGdldE1pblNjYWxlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21pblNjYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIOaLoeWkp+eOh+OBjOacgOWkp+OBq+OBquOBo+OBpuOBhOOCi+OBi+OCkueiuuiqjeOBmeOCi1xuICAgKlxuICAgKiBAcmV0dXJuIHRydWUg5ouh5aSn546H44Gv5pyA5aSnXG4gICAqIEByZXR1cm4gZmFsc2Ug5ouh5aSn546H44Gv5pyA5aSn44Gn44Gv44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNNYXhTY2FsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTY2FsZVgoKSA+PSB0aGlzLl9tYXhTY2FsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmi6HlpKfnjofjgYzmnIDlsI/jgavjgarjgaPjgabjgYTjgovjgYvjgpLnorroqo3jgZnjgotcbiAgICpcbiAgICogQHJldHVybiB0cnVlIOaLoeWkp+eOh+OBr+acgOWwj1xuICAgKiBAcmV0dXJuIGZhbHNlIOaLoeWkp+eOh+OBr+acgOWwj+OBp+OBr+OBquOBhFxuICAgKi9cbiAgcHVibGljIGlzTWluU2NhbGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2NhbGVYKCkgPD0gdGhpcy5fbWluU2NhbGU7XG4gIH1cblxuICAvKipcbiAgICog44OH44OQ44Kk44K544Gr5a++5b+c44GZ44KL6KuW55CG5bqn5qiZ44Gu5bem6L6644Gu77y46Lu45L2N572u44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44OH44OQ44Kk44K544Gr5a++5b+c44GZ44KL6KuW55CG5bqn5qiZ44Gu5bem6L6644GuWOi7uOS9jee9rlxuICAgKi9cbiAgcHVibGljIGdldFNjcmVlbkxlZnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyZWVuTGVmdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjg5DjgqTjgrnjgavlr77lv5zjgZnjgovoq5bnkIbluqfmqJnjga7lj7Povrrjga7vvLjou7jkvY3nva7jgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg4fjg5DjgqTjgrnjgavlr77lv5zjgZnjgovoq5bnkIbluqfmqJnjga7lj7Povrrjga5Y6Lu45L2N572uXG4gICAqL1xuICBwdWJsaWMgZ2V0U2NyZWVuUmlnaHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyZWVuUmlnaHQ7XG4gIH1cblxuICAvKipcbiAgICog44OH44OQ44Kk44K544Gr5a++5b+c44GZ44KL6KuW55CG5bqn5qiZ44Gu5LiL6L6644GuWei7uOS9jee9ruOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODh+ODkOOCpOOCueOBq+WvvuW/nOOBmeOCi+irlueQhuW6p+aomeOBruS4i+i+uuOBrlnou7jkvY3nva5cbiAgICovXG4gIHB1YmxpYyBnZXRTY3JlZW5Cb3R0b20oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyZWVuQm90dG9tO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+ODkOOCpOOCueOBq+WvvuW/nOOBmeOCi+irlueQhuW6p+aomeOBruS4iui+uuOBrlnou7jkvY3nva7jgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg4fjg5DjgqTjgrnjgavlr77lv5zjgZnjgovoq5bnkIbluqfmqJnjga7kuIrovrrjga5Z6Lu45L2N572uXG4gICAqL1xuICBwdWJsaWMgZ2V0U2NyZWVuVG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3NjcmVlblRvcDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlt6bovrrjga5Y6Lu45L2N572u44Gu5pyA5aSn5YCk44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g5bem6L6644GuWOi7uOS9jee9ruOBruacgOWkp+WApFxuICAgKi9cbiAgcHVibGljIGdldE1heExlZnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4TGVmdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlj7Povrrjga5Y6Lu45L2N572u44Gu5pyA5aSn5YCk44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g5Y+z6L6644GuWOi7uOS9jee9ruOBruacgOWkp+WApFxuICAgKi9cbiAgcHVibGljIGdldE1heFJpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heFJpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIOS4i+i+uuOBrlnou7jkvY3nva7jga7mnIDlpKflgKTjga7lj5blvpdcbiAgICogQHJldHVybiDkuIvovrrjga5Z6Lu45L2N572u44Gu5pyA5aSn5YCkXG4gICAqL1xuICBwdWJsaWMgZ2V0TWF4Qm90dG9tKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heEJvdHRvbTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuIrovrrjga5Z6Lu45L2N572u44Gu5pyA5aSn5YCk44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g5LiK6L6644GuWei7uOS9jee9ruOBruacgOWkp+WApFxuICAgKi9cbiAgcHVibGljIGdldE1heFRvcCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXhUb3A7XG4gIH1cblxuICBwcml2YXRlIF9zY3JlZW5MZWZ0OiBudW1iZXI7IC8vIOODh+ODkOOCpOOCueOBq+WvvuW/nOOBmeOCi+irlueQhuW6p+aomeS4iuOBruevhOWbsu+8iOW3pui+uljou7jkvY3nva7vvIlcbiAgcHJpdmF0ZSBfc2NyZWVuUmlnaHQ6IG51bWJlcjsgLy8g44OH44OQ44Kk44K544Gr5a++5b+c44GZ44KL6KuW55CG5bqn5qiZ5LiK44Gu56+E5Zuy77yI5Y+z6L66WOi7uOS9jee9ru+8iVxuICBwcml2YXRlIF9zY3JlZW5Ub3A6IG51bWJlcjsgLy8g44OH44OQ44Kk44K544Gr5a++5b+c44GZ44KL6KuW55CG5bqn5qiZ5LiK44Gu56+E5Zuy77yI5LiK6L66Wei7uOS9jee9ru+8iVxuICBwcml2YXRlIF9zY3JlZW5Cb3R0b206IG51bWJlcjsgLy8g44OH44OQ44Kk44K544Gr5a++5b+c44GZ44KL6KuW55CG5bqn5qiZ5LiK44Gu56+E5Zuy77yI5LiL6L66Wei7uOS9jee9ru+8iVxuICBwcml2YXRlIF9tYXhMZWZ0OiBudW1iZXI7IC8vIOirlueQhuW6p+aomeS4iuOBruenu+WLleWPr+iDveevhOWbsu+8iOW3pui+uljou7jkvY3nva7vvIlcbiAgcHJpdmF0ZSBfbWF4UmlnaHQ6IG51bWJlcjsgLy8g6KuW55CG5bqn5qiZ5LiK44Gu56e75YuV5Y+v6IO956+E5Zuy77yI5Y+z6L66WOi7uOS9jee9ru+8iVxuICBwcml2YXRlIF9tYXhUb3A6IG51bWJlcjsgLy8g6KuW55CG5bqn5qiZ5LiK44Gu56e75YuV5Y+v6IO956+E5Zuy77yI5LiK6L66Wei7uOS9jee9ru+8iVxuICBwcml2YXRlIF9tYXhCb3R0b206IG51bWJlcjsgLy8g6KuW55CG5bqn5qiZ5LiK44Gu56e75YuV5Y+v6IO956+E5Zuy77yI5LiL6L66Wei7uOS9jee9ru+8iVxuICBwcml2YXRlIF9tYXhTY2FsZTogbnVtYmVyOyAvLyDmi6HlpKfnjofjga7mnIDlpKflgKRcbiAgcHJpdmF0ZSBfbWluU2NhbGU6IG51bWJlcjsgLy8g5ouh5aSn546H44Gu5pyA5bCP5YCkXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbXZpZXdtYXRyaXgnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVZpZXdNYXRyaXggPSAkLkN1YmlzbVZpZXdNYXRyaXg7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVZpZXdNYXRyaXggPSAkLkN1YmlzbVZpZXdNYXRyaXg7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFPQTtBQUFBO0FBSUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFZQTtBQUFBO0FBNVRBO0FBK1RBO0FBRUE7QUFBQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Framework/src/math/cubismviewmatrix.ts\n");

/***/ }),

/***/ "./Framework/src/model/cubismmoc.ts":
/*!******************************************!*\
  !*** ./Framework/src/model/cubismmoc.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMoc = void 0;\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar cubismmodel_1 = __webpack_require__(/*! ./cubismmodel */ \"./Framework/src/model/cubismmodel.ts\");\nvar CubismMoc = (function () {\n    function CubismMoc(moc) {\n        this._moc = moc;\n        this._modelCount = 0;\n    }\n    CubismMoc.create = function (mocBytes) {\n        var cubismMoc = null;\n        var moc = Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\n        if (moc) {\n            cubismMoc = new CubismMoc(moc);\n        }\n        return cubismMoc;\n    };\n    CubismMoc.delete = function (moc) {\n        moc._moc._release();\n        moc._moc = null;\n        moc = null;\n    };\n    CubismMoc.prototype.createModel = function () {\n        var cubismModel = null;\n        var model = Live2DCubismCore.Model.fromMoc(this._moc);\n        if (model) {\n            cubismModel = new cubismmodel_1.CubismModel(model);\n            cubismModel.initialize();\n            ++this._modelCount;\n        }\n        return cubismModel;\n    };\n    CubismMoc.prototype.deleteModel = function (model) {\n        if (model != null) {\n            model.release();\n            model = null;\n            --this._modelCount;\n        }\n    };\n    CubismMoc.prototype.release = function () {\n        cubismdebug_1.CSM_ASSERT(this._modelCount == 0);\n        this._moc._release();\n        this._moc = null;\n    };\n    return CubismMoc;\n}());\nexports.CubismMoc = CubismMoc;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmoc */ \"./Framework/src/model/cubismmoc.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMoc = $.CubismMoc;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vZGVsL2N1YmlzbW1vYy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbW9kZWwvY3ViaXNtbW9jLnRzPzdlNDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ1NNX0FTU0VSVCB9IGZyb20gJy4uL3V0aWxzL2N1YmlzbWRlYnVnJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi9jdWJpc21tb2RlbCc7XG5cbi8qKlxuICogTW9j44OH44O844K/44Gu566h55CGXG4gKlxuICogTW9j44OH44O844K/44Gu566h55CG44KS6KGM44GG44Kv44Op44K544CCXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21Nb2Mge1xuICAvKipcbiAgICogTW9j44OH44O844K/44Gu5L2c5oiQXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShtb2NCeXRlczogQXJyYXlCdWZmZXIpOiBDdWJpc21Nb2Mge1xuICAgIGxldCBjdWJpc21Nb2M6IEN1YmlzbU1vYyA9IG51bGw7XG4gICAgY29uc3QgbW9jOiBMaXZlMkRDdWJpc21Db3JlLk1vYyA9IExpdmUyREN1YmlzbUNvcmUuTW9jLmZyb21BcnJheUJ1ZmZlcihcbiAgICAgIG1vY0J5dGVzXG4gICAgKTtcblxuICAgIGlmIChtb2MpIHtcbiAgICAgIGN1YmlzbU1vYyA9IG5ldyBDdWJpc21Nb2MobW9jKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3ViaXNtTW9jO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY+ODh+ODvOOCv+OCkuWJiumZpFxuICAgKlxuICAgKiBNb2Pjg4fjg7zjgr/jgpLliYrpmaTjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlKG1vYzogQ3ViaXNtTW9jKTogdm9pZCB7XG4gICAgbW9jLl9tb2MuX3JlbGVhc2UoKTtcbiAgICBtb2MuX21vYyA9IG51bGw7XG4gICAgbW9jID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgpLkvZzmiJDjgZnjgotcbiAgICpcbiAgICogQHJldHVybiBNb2Pjg4fjg7zjgr/jgYvjgonkvZzmiJDjgZXjgozjgZ/jg6Ljg4fjg6tcbiAgICovXG4gIGNyZWF0ZU1vZGVsKCk6IEN1YmlzbU1vZGVsIHtcbiAgICBsZXQgY3ViaXNtTW9kZWw6IEN1YmlzbU1vZGVsID0gbnVsbDtcblxuICAgIGNvbnN0IG1vZGVsOiBMaXZlMkRDdWJpc21Db3JlLk1vZGVsID0gTGl2ZTJEQ3ViaXNtQ29yZS5Nb2RlbC5mcm9tTW9jKFxuICAgICAgdGhpcy5fbW9jXG4gICAgKTtcblxuICAgIGlmIChtb2RlbCkge1xuICAgICAgY3ViaXNtTW9kZWwgPSBuZXcgQ3ViaXNtTW9kZWwobW9kZWwpO1xuICAgICAgY3ViaXNtTW9kZWwuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICArK3RoaXMuX21vZGVsQ291bnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1YmlzbU1vZGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OCkuWJiumZpOOBmeOCi1xuICAgKi9cbiAgZGVsZXRlTW9kZWwobW9kZWw6IEN1YmlzbU1vZGVsKTogdm9pZCB7XG4gICAgaWYgKG1vZGVsICE9IG51bGwpIHtcbiAgICAgIG1vZGVsLnJlbGVhc2UoKTtcbiAgICAgIG1vZGVsID0gbnVsbDtcbiAgICAgIC0tdGhpcy5fbW9kZWxDb3VudDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKG1vYzogTGl2ZTJEQ3ViaXNtQ29yZS5Nb2MpIHtcbiAgICB0aGlzLl9tb2MgPSBtb2M7XG4gICAgdGhpcy5fbW9kZWxDb3VudCA9IDA7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBDU01fQVNTRVJUKHRoaXMuX21vZGVsQ291bnQgPT0gMCk7XG5cbiAgICB0aGlzLl9tb2MuX3JlbGVhc2UoKTtcbiAgICB0aGlzLl9tb2MgPSBudWxsO1xuICB9XG5cbiAgX21vYzogTGl2ZTJEQ3ViaXNtQ29yZS5Nb2M7IC8vIE1vY+ODh+ODvOOCv1xuICBfbW9kZWxDb3VudDogbnVtYmVyOyAvLyBNb2Pjg4fjg7zjgr/jgYvjgonkvZzjgonjgozjgZ/jg6Ljg4fjg6vjga7lgIvmlbBcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtbW9jJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb2MgPSAkLkN1YmlzbU1vYztcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW9jID0gJC5DdWJpc21Nb2M7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQUNBO0FBT0E7QUFnRUE7QUFDQTtBQUNBO0FBQ0E7QUEvREE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFqRkE7QUFvRkE7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/model/cubismmoc.ts\n");

/***/ }),

/***/ "./Framework/src/model/cubismmodel.ts":
/*!********************************************!*\
  !*** ./Framework/src/model/cubismmodel.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismModel = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismrenderer_1 = __webpack_require__(/*! ../rendering/cubismrenderer */ \"./Framework/src/rendering/cubismrenderer.ts\");\nvar csmmap_1 = __webpack_require__(/*! ../type/csmmap */ \"./Framework/src/type/csmmap.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar CubismModel = (function () {\n    function CubismModel(model) {\n        this._model = model;\n        this._parameterValues = null;\n        this._parameterMaximumValues = null;\n        this._parameterMinimumValues = null;\n        this._partOpacities = null;\n        this._savedParameters = new csmvector_1.csmVector();\n        this._parameterIds = new csmvector_1.csmVector();\n        this._drawableIds = new csmvector_1.csmVector();\n        this._partIds = new csmvector_1.csmVector();\n        this._notExistPartId = new csmmap_1.csmMap();\n        this._notExistParameterId = new csmmap_1.csmMap();\n        this._notExistParameterValues = new csmmap_1.csmMap();\n        this._notExistPartOpacities = new csmmap_1.csmMap();\n    }\n    CubismModel.prototype.update = function () {\n        this._model.update();\n        this._model.drawables.resetDynamicFlags();\n    };\n    CubismModel.prototype.getCanvasWidth = function () {\n        if (this._model == null) {\n            return 0.0;\n        }\n        return (this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit);\n    };\n    CubismModel.prototype.getCanvasHeight = function () {\n        if (this._model == null) {\n            return 0.0;\n        }\n        return (this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit);\n    };\n    CubismModel.prototype.saveParameters = function () {\n        var parameterCount = this._model.parameters.count;\n        var savedParameterCount = this._savedParameters.getSize();\n        for (var i = 0; i < parameterCount; ++i) {\n            if (i < savedParameterCount) {\n                this._savedParameters.set(i, this._parameterValues[i]);\n            }\n            else {\n                this._savedParameters.pushBack(this._parameterValues[i]);\n            }\n        }\n    };\n    CubismModel.prototype.getModel = function () {\n        return this._model;\n    };\n    CubismModel.prototype.getPartIndex = function (partId) {\n        var partIndex;\n        var partCount = this._model.parts.count;\n        for (partIndex = 0; partIndex < partCount; ++partIndex) {\n            if (partId == this._partIds.at(partIndex)) {\n                return partIndex;\n            }\n        }\n        if (this._notExistPartId.isExist(partId)) {\n            return this._notExistPartId.getValue(partId);\n        }\n        partIndex = partCount + this._notExistPartId.getSize();\n        this._notExistPartId.setValue(partId, partIndex);\n        this._notExistPartOpacities.appendKey(partIndex);\n        return partIndex;\n    };\n    CubismModel.prototype.getPartCount = function () {\n        var partCount = this._model.parts.count;\n        return partCount;\n    };\n    CubismModel.prototype.setPartOpacityByIndex = function (partIndex, opacity) {\n        if (this._notExistPartOpacities.isExist(partIndex)) {\n            this._notExistPartOpacities.setValue(partIndex, opacity);\n            return;\n        }\n        cubismdebug_1.CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n        this._partOpacities[partIndex] = opacity;\n    };\n    CubismModel.prototype.setPartOpacityById = function (partId, opacity) {\n        var index = this.getPartIndex(partId);\n        if (index < 0) {\n            return;\n        }\n        this.setPartOpacityByIndex(index, opacity);\n    };\n    CubismModel.prototype.getPartOpacityByIndex = function (partIndex) {\n        if (this._notExistPartOpacities.isExist(partIndex)) {\n            return this._notExistPartOpacities.getValue(partIndex);\n        }\n        cubismdebug_1.CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n        return this._partOpacities[partIndex];\n    };\n    CubismModel.prototype.getPartOpacityById = function (partId) {\n        var index = this.getPartIndex(partId);\n        if (index < 0) {\n            return 0;\n        }\n        return this.getPartOpacityByIndex(index);\n    };\n    CubismModel.prototype.getParameterIndex = function (parameterId) {\n        var parameterIndex;\n        var idCount = this._model.parameters.count;\n        for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\n            if (parameterId != this._parameterIds.at(parameterIndex)) {\n                continue;\n            }\n            return parameterIndex;\n        }\n        if (this._notExistParameterId.isExist(parameterId)) {\n            return this._notExistParameterId.getValue(parameterId);\n        }\n        parameterIndex =\n            this._model.parameters.count + this._notExistParameterId.getSize();\n        this._notExistParameterId.setValue(parameterId, parameterIndex);\n        this._notExistParameterValues.appendKey(parameterIndex);\n        return parameterIndex;\n    };\n    CubismModel.prototype.getParameterCount = function () {\n        return this._model.parameters.count;\n    };\n    CubismModel.prototype.getParameterMaximumValue = function (parameterIndex) {\n        return this._model.parameters.maximumValues[parameterIndex];\n    };\n    CubismModel.prototype.getParameterMinimumValue = function (parameterIndex) {\n        return this._model.parameters.minimumValues[parameterIndex];\n    };\n    CubismModel.prototype.getParameterDefaultValue = function (parameterIndex) {\n        return this._model.parameters.defaultValues[parameterIndex];\n    };\n    CubismModel.prototype.getParameterValueByIndex = function (parameterIndex) {\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            return this._notExistParameterValues.getValue(parameterIndex);\n        }\n        cubismdebug_1.CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        return this._parameterValues[parameterIndex];\n    };\n    CubismModel.prototype.getParameterValueById = function (parameterId) {\n        var parameterIndex = this.getParameterIndex(parameterId);\n        return this.getParameterValueByIndex(parameterIndex);\n    };\n    CubismModel.prototype.setParameterValueByIndex = function (parameterIndex, value, weight) {\n        if (weight === void 0) { weight = 1.0; }\n        if (this._notExistParameterValues.isExist(parameterIndex)) {\n            this._notExistParameterValues.setValue(parameterIndex, weight == 1\n                ? value\n                : this._notExistParameterValues.getValue(parameterIndex) *\n                    (1 - weight) +\n                    value * weight);\n            return;\n        }\n        cubismdebug_1.CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n        if (this._model.parameters.maximumValues[parameterIndex] < value) {\n            value = this._model.parameters.maximumValues[parameterIndex];\n        }\n        if (this._model.parameters.minimumValues[parameterIndex] > value) {\n            value = this._model.parameters.minimumValues[parameterIndex];\n        }\n        this._parameterValues[parameterIndex] =\n            weight == 1\n                ? value\n                : (this._parameterValues[parameterIndex] =\n                    this._parameterValues[parameterIndex] * (1 - weight) +\n                        value * weight);\n    };\n    CubismModel.prototype.setParameterValueById = function (parameterId, value, weight) {\n        if (weight === void 0) { weight = 1.0; }\n        var index = this.getParameterIndex(parameterId);\n        this.setParameterValueByIndex(index, value, weight);\n    };\n    CubismModel.prototype.addParameterValueByIndex = function (parameterIndex, value, weight) {\n        if (weight === void 0) { weight = 1.0; }\n        this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) + value * weight);\n    };\n    CubismModel.prototype.addParameterValueById = function (parameterId, value, weight) {\n        if (weight === void 0) { weight = 1.0; }\n        var index = this.getParameterIndex(parameterId);\n        this.addParameterValueByIndex(index, value, weight);\n    };\n    CubismModel.prototype.multiplyParameterValueById = function (parameterId, value, weight) {\n        if (weight === void 0) { weight = 1.0; }\n        var index = this.getParameterIndex(parameterId);\n        this.multiplyParameterValueByIndex(index, value, weight);\n    };\n    CubismModel.prototype.multiplyParameterValueByIndex = function (parameterIndex, value, weight) {\n        if (weight === void 0) { weight = 1.0; }\n        this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) *\n            (1.0 + (value - 1.0) * weight));\n    };\n    CubismModel.prototype.getDrawableIndex = function (drawableId) {\n        var drawableCount = this._model.drawables.count;\n        for (var drawableIndex = 0; drawableIndex < drawableCount; ++drawableIndex) {\n            if (this._drawableIds.at(drawableIndex) == drawableId) {\n                return drawableIndex;\n            }\n        }\n        return -1;\n    };\n    CubismModel.prototype.getDrawableCount = function () {\n        var drawableCount = this._model.drawables.count;\n        return drawableCount;\n    };\n    CubismModel.prototype.getDrawableId = function (drawableIndex) {\n        var parameterIds = this._model.drawables.ids;\n        return live2dcubismframework_1.CubismFramework.getIdManager().getId(parameterIds[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableRenderOrders = function () {\n        var renderOrders = this._model.drawables.renderOrders;\n        return renderOrders;\n    };\n    CubismModel.prototype.getDrawableTextureIndices = function (drawableIndex) {\n        var textureIndices = this._model.drawables.textureIndices;\n        return textureIndices[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableDynamicFlagVertexPositionsDidChange = function (drawableIndex) {\n        var dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(dynamicFlags[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableVertexIndexCount = function (drawableIndex) {\n        var indexCounts = this._model.drawables.indexCounts;\n        return indexCounts[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableVertexCount = function (drawableIndex) {\n        var vertexCounts = this._model.drawables.vertexCounts;\n        return vertexCounts[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableVertices = function (drawableIndex) {\n        return this.getDrawableVertexPositions(drawableIndex);\n    };\n    CubismModel.prototype.getDrawableVertexIndices = function (drawableIndex) {\n        var indicesArray = this._model.drawables.indices;\n        return indicesArray[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableVertexPositions = function (drawableIndex) {\n        var verticesArray = this._model.drawables.vertexPositions;\n        return verticesArray[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableVertexUvs = function (drawableIndex) {\n        var uvsArray = this._model.drawables.vertexUvs;\n        return uvsArray[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableOpacity = function (drawableIndex) {\n        var opacities = this._model.drawables.opacities;\n        return opacities[drawableIndex];\n    };\n    CubismModel.prototype.getDrawableCulling = function (drawableIndex) {\n        var constantFlags = this._model.drawables.constantFlags;\n        return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(constantFlags[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableBlendMode = function (drawableIndex) {\n        var constantFlags = this._model.drawables.constantFlags;\n        return Live2DCubismCore.Utils.hasBlendAdditiveBit(constantFlags[drawableIndex])\n            ? cubismrenderer_1.CubismBlendMode.CubismBlendMode_Additive\n            : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(constantFlags[drawableIndex])\n                ? cubismrenderer_1.CubismBlendMode.CubismBlendMode_Multiplicative\n                : cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal;\n    };\n    CubismModel.prototype.getDrawableInvertedMaskBit = function (drawableIndex) {\n        var constantFlags = this._model.drawables.constantFlags;\n        return Live2DCubismCore.Utils.hasIsInvertedMaskBit(constantFlags[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableMasks = function () {\n        var masks = this._model.drawables.masks;\n        return masks;\n    };\n    CubismModel.prototype.getDrawableMaskCounts = function () {\n        var maskCounts = this._model.drawables.maskCounts;\n        return maskCounts;\n    };\n    CubismModel.prototype.isUsingMasking = function () {\n        for (var d = 0; d < this._model.drawables.count; ++d) {\n            if (this._model.drawables.maskCounts[d] <= 0) {\n                continue;\n            }\n            return true;\n        }\n        return false;\n    };\n    CubismModel.prototype.getDrawableDynamicFlagIsVisible = function (drawableIndex) {\n        var dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableDynamicFlagVisibilityDidChange = function (drawableIndex) {\n        var dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(dynamicFlags[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableDynamicFlagOpacityDidChange = function (drawableIndex) {\n        var dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasOpacityDidChangeBit(dynamicFlags[drawableIndex]);\n    };\n    CubismModel.prototype.getDrawableDynamicFlagRenderOrderDidChange = function (drawableIndex) {\n        var dynamicFlags = this._model.drawables.dynamicFlags;\n        return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(dynamicFlags[drawableIndex]);\n    };\n    CubismModel.prototype.loadParameters = function () {\n        var parameterCount = this._model.parameters.count;\n        var savedParameterCount = this._savedParameters.getSize();\n        if (parameterCount > savedParameterCount) {\n            parameterCount = savedParameterCount;\n        }\n        for (var i = 0; i < parameterCount; ++i) {\n            this._parameterValues[i] = this._savedParameters.at(i);\n        }\n    };\n    CubismModel.prototype.initialize = function () {\n        cubismdebug_1.CSM_ASSERT(this._model);\n        this._parameterValues = this._model.parameters.values;\n        this._partOpacities = this._model.parts.opacities;\n        this._parameterMaximumValues = this._model.parameters.maximumValues;\n        this._parameterMinimumValues = this._model.parameters.minimumValues;\n        {\n            var parameterIds = this._model.parameters.ids;\n            var parameterCount = this._model.parameters.count;\n            this._parameterIds.prepareCapacity(parameterCount);\n            for (var i = 0; i < parameterCount; ++i) {\n                this._parameterIds.pushBack(live2dcubismframework_1.CubismFramework.getIdManager().getId(parameterIds[i]));\n            }\n        }\n        {\n            var partIds = this._model.parts.ids;\n            var partCount = this._model.parts.count;\n            this._partIds.prepareCapacity(partCount);\n            for (var i = 0; i < partCount; ++i) {\n                this._partIds.pushBack(live2dcubismframework_1.CubismFramework.getIdManager().getId(partIds[i]));\n            }\n        }\n        {\n            var drawableIds = this._model.drawables.ids;\n            var drawableCount = this._model.drawables.count;\n            this._drawableIds.prepareCapacity(drawableCount);\n            for (var i = 0; i < drawableCount; ++i) {\n                this._drawableIds.pushBack(live2dcubismframework_1.CubismFramework.getIdManager().getId(drawableIds[i]));\n            }\n        }\n    };\n    CubismModel.prototype.release = function () {\n        this._model.release();\n        this._model = null;\n    };\n    return CubismModel;\n}());\nexports.CubismModel = CubismModel;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmodel */ \"./Framework/src/model/cubismmodel.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModel = $.CubismModel;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vZGVsL2N1YmlzbW1vZGVsLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb2RlbC9jdWJpc21tb2RlbC50cz85MzU0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgQ3ViaXNtRnJhbWV3b3JrIH0gZnJvbSAnLi4vbGl2ZTJkY3ViaXNtZnJhbWV3b3JrJztcbmltcG9ydCB7IEN1YmlzbUJsZW5kTW9kZSB9IGZyb20gJy4uL3JlbmRlcmluZy9jdWJpc21yZW5kZXJlcic7XG5pbXBvcnQgeyBjc21NYXAgfSBmcm9tICcuLi90eXBlL2NzbW1hcCc7XG5pbXBvcnQgeyBjc21WZWN0b3IgfSBmcm9tICcuLi90eXBlL2NzbXZlY3Rvcic7XG5pbXBvcnQgeyBDU01fQVNTRVJUIH0gZnJvbSAnLi4vdXRpbHMvY3ViaXNtZGVidWcnO1xuXG4vKipcbiAqIOODouODh+ODq1xuICpcbiAqIE1vY+ODh+ODvOOCv+OBi+OCieeUn+aIkOOBleOCjOOCi+ODouODh+ODq+OBruOCr+ODqeOCueOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTW9kZWwge1xuICAvKipcbiAgICog44Oi44OH44Or44Gu44OR44Op44Oh44O844K/44Gu5pu05pawXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBtb2RlbFxuICAgIHRoaXMuX21vZGVsLnVwZGF0ZSgpO1xuXG4gICAgdGhpcy5fbW9kZWwuZHJhd2FibGVzLnJlc2V0RHluYW1pY0ZsYWdzKCk7XG4gIH1cblxuICAvKipcbiAgICog44Kt44Oj44Oz44OQ44K544Gu5bmF44KS5Y+W5b6X44GZ44KLXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2FudmFzV2lkdGgoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5fbW9kZWwgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIDAuMDtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fbW9kZWwuY2FudmFzaW5mby5DYW52YXNXaWR0aCAvIHRoaXMuX21vZGVsLmNhbnZhc2luZm8uUGl4ZWxzUGVyVW5pdFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog44Kt44Oj44Oz44OQ44K544Gu6auY44GV44KS5Y+W5b6X44GZ44KLXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2FudmFzSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuX21vZGVsID09IG51bGwpIHtcbiAgICAgIHJldHVybiAwLjA7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX21vZGVsLmNhbnZhc2luZm8uQ2FudmFzSGVpZ2h0IC8gdGhpcy5fbW9kZWwuY2FudmFzaW5mby5QaXhlbHNQZXJVbml0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jgpLkv53lrZjjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzYXZlUGFyYW1ldGVycygpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJhbWV0ZXJDb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5jb3VudDtcbiAgICBjb25zdCBzYXZlZFBhcmFtZXRlckNvdW50OiBudW1iZXIgPSB0aGlzLl9zYXZlZFBhcmFtZXRlcnMuZ2V0U2l6ZSgpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbWV0ZXJDb3VudDsgKytpKSB7XG4gICAgICBpZiAoaSA8IHNhdmVkUGFyYW1ldGVyQ291bnQpIHtcbiAgICAgICAgdGhpcy5fc2F2ZWRQYXJhbWV0ZXJzLnNldChpLCB0aGlzLl9wYXJhbWV0ZXJWYWx1ZXNbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2F2ZWRQYXJhbWV0ZXJzLnB1c2hCYWNrKHRoaXMuX3BhcmFtZXRlclZhbHVlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OCkuWPluW+l1xuICAgKi9cbiAgcHVibGljIGdldE1vZGVsKCk6IExpdmUyREN1YmlzbUNvcmUuTW9kZWwge1xuICAgIHJldHVybiB0aGlzLl9tb2RlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjg4Tjga7jgqTjg7Pjg4fjg4Pjgq/jgrnjgpLlj5blvpdcbiAgICogQHBhcmFtIHBhcnRJZCDjg5Hjg7zjg4Tjga5JRFxuICAgKiBAcmV0dXJuIOODkeODvOODhOOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKi9cbiAgcHVibGljIGdldFBhcnRJbmRleChwYXJ0SWQ6IEN1YmlzbUlkSGFuZGxlKTogbnVtYmVyIHtcbiAgICBsZXQgcGFydEluZGV4OiBudW1iZXI7XG4gICAgY29uc3QgcGFydENvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbC5wYXJ0cy5jb3VudDtcblxuICAgIGZvciAocGFydEluZGV4ID0gMDsgcGFydEluZGV4IDwgcGFydENvdW50OyArK3BhcnRJbmRleCkge1xuICAgICAgaWYgKHBhcnRJZCA9PSB0aGlzLl9wYXJ0SWRzLmF0KHBhcnRJbmRleCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnRJbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg6Ljg4fjg6vjgavlrZjlnKjjgZfjgabjgYTjgarjgYTloLTlkIjjgIHpnZ7lrZjlnKjjg5Hjg7zjg4RJROODquOCueODiOWGheOBq+OBguOCi+OBi+OCkuaknOe0ouOBl+OAgeOBneOBruOCpOODs+ODh+ODg+OCr+OCueOCkui/lOOBmVxuICAgIGlmICh0aGlzLl9ub3RFeGlzdFBhcnRJZC5pc0V4aXN0KHBhcnRJZCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ub3RFeGlzdFBhcnRJZC5nZXRWYWx1ZShwYXJ0SWQpO1xuICAgIH1cblxuICAgIC8vIOmdnuWtmOWcqOODkeODvOODhElE44Oq44K544OI44Gr44Gq44GE5aC05ZCI44CB5paw44GX44GP6KaB57Sg44KS6L+95Yqg44GZ44KLXG4gICAgcGFydEluZGV4ID0gcGFydENvdW50ICsgdGhpcy5fbm90RXhpc3RQYXJ0SWQuZ2V0U2l6ZSgpO1xuICAgIHRoaXMuX25vdEV4aXN0UGFydElkLnNldFZhbHVlKHBhcnRJZCwgcGFydEluZGV4KTtcbiAgICB0aGlzLl9ub3RFeGlzdFBhcnRPcGFjaXRpZXMuYXBwZW5kS2V5KHBhcnRJbmRleCk7XG5cbiAgICByZXR1cm4gcGFydEluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeODvOODhOOBruWAi+aVsOOBruWPluW+l1xuICAgKiBAcmV0dXJuIOODkeODvOODhOOBruWAi+aVsFxuICAgKi9cbiAgcHVibGljIGdldFBhcnRDb3VudCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHBhcnRDb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWwucGFydHMuY291bnQ7XG4gICAgcmV0dXJuIHBhcnRDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqbjga7oqK3lrpooSW5kZXgpXG4gICAqIEBwYXJhbSBwYXJ0SW5kZXgg44OR44O844OE44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSBvcGFjaXR5IOS4jemAj+aYjuW6plxuICAgKi9cbiAgcHVibGljIHNldFBhcnRPcGFjaXR5QnlJbmRleChwYXJ0SW5kZXg6IG51bWJlciwgb3BhY2l0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX25vdEV4aXN0UGFydE9wYWNpdGllcy5pc0V4aXN0KHBhcnRJbmRleCkpIHtcbiAgICAgIHRoaXMuX25vdEV4aXN0UGFydE9wYWNpdGllcy5zZXRWYWx1ZShwYXJ0SW5kZXgsIG9wYWNpdHkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOOCpOODs+ODh+ODg+OCr+OCueOBruevhOWbsuWGheaknOefpVxuICAgIENTTV9BU1NFUlQoMCA8PSBwYXJ0SW5kZXggJiYgcGFydEluZGV4IDwgdGhpcy5nZXRQYXJ0Q291bnQoKSk7XG5cbiAgICB0aGlzLl9wYXJ0T3BhY2l0aWVzW3BhcnRJbmRleF0gPSBvcGFjaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeODvOODhOOBruS4jemAj+aYjuW6puOBruioreWumihJZClcbiAgICogQHBhcmFtIHBhcnRJZCDjg5Hjg7zjg4Tjga5JRFxuICAgKiBAcGFyYW0gb3BhY2l0eSDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqZcbiAgICovXG4gIHB1YmxpYyBzZXRQYXJ0T3BhY2l0eUJ5SWQocGFydElkOiBDdWJpc21JZEhhbmRsZSwgb3BhY2l0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8g6auY6YCf5YyW44Gu44Gf44KB44GrUGFydEluZGV444KS5Y+W5b6X44Gn44GN44KL5qmf5qeL44Gr44Gq44Gj44Gm44GE44KL44GM44CB5aSW6YOo44GL44KJ44Gu6Kit5a6a44Gu5pmC44Gv5ZG844Gz5Ye644GX6aC75bqm44GM5L2O44GE44Gf44KB5LiN6KaBXG4gICAgY29uc3QgaW5kZXg6IG51bWJlciA9IHRoaXMuZ2V0UGFydEluZGV4KHBhcnRJZCk7XG5cbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICByZXR1cm47IC8vIOODkeODvOODhOOBjOOBquOBhOOBruOBp+OCueOCreODg+ODl1xuICAgIH1cblxuICAgIHRoaXMuc2V0UGFydE9wYWNpdHlCeUluZGV4KGluZGV4LCBvcGFjaXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqbjga7lj5blvpcoaW5kZXgpXG4gICAqIEBwYXJhbSBwYXJ0SW5kZXgg44OR44O844OE44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g44OR44O844OE44Gu5LiN6YCP5piO5bqmXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFydE9wYWNpdHlCeUluZGV4KHBhcnRJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5fbm90RXhpc3RQYXJ0T3BhY2l0aWVzLmlzRXhpc3QocGFydEluZGV4KSkge1xuICAgICAgLy8g44Oi44OH44Or44Gr5a2Y5Zyo44GX44Gq44GE44OR44O844OESUTjga7loLTlkIjjgIHpnZ7lrZjlnKjjg5Hjg7zjg4Tjg6rjgrnjg4jjgYvjgonkuI3pgI/mmI7luqbjgpLov5TjgZnjgIJcbiAgICAgIHJldHVybiB0aGlzLl9ub3RFeGlzdFBhcnRPcGFjaXRpZXMuZ2V0VmFsdWUocGFydEluZGV4KTtcbiAgICB9XG5cbiAgICAvLyDjgqTjg7Pjg4fjg4Pjgq/jgrnjga7nr4Tlm7LlhoXmpJznn6VcbiAgICBDU01fQVNTRVJUKDAgPD0gcGFydEluZGV4ICYmIHBhcnRJbmRleCA8IHRoaXMuZ2V0UGFydENvdW50KCkpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3BhcnRPcGFjaXRpZXNbcGFydEluZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjg4Tjga7kuI3pgI/mmI7luqbjga7lj5blvpcoaWQpXG4gICAqIEBwYXJhbSBwYXJ0SWQg44OR44O844OE44Gu77yp772EXG4gICAqIEByZXR1cm4g44OR44O844OE44Gu5LiN6YCP5piO5bqmXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFydE9wYWNpdHlCeUlkKHBhcnRJZDogQ3ViaXNtSWRIYW5kbGUpOiBudW1iZXIge1xuICAgIC8vIOmrmOmAn+WMluOBruOBn+OCgeOBq1BhcnRJbmRleOOCkuWPluW+l+OBp+OBjeOCi+apn+ani+OBq+OBquOBo+OBpuOBhOOCi+OBjOOAgeWklumDqOOBi+OCieOBruioreWumuOBruaZguOBr+WRvOOBs+WHuuOBl+mgu+W6puOBjOS9juOBhOOBn+OCgeS4jeimgVxuICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSB0aGlzLmdldFBhcnRJbmRleChwYXJ0SWQpO1xuXG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuIDA7IC8vIOODkeODvOODhOOBjOeEoeOBhOOBruOBp+OCueOCreODg+ODl1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdldFBhcnRPcGFjaXR5QnlJbmRleChpbmRleCk7XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gu44Kk44Oz44OH44OD44Kv44K544Gu5Y+W5b6XXG4gICAqIEBwYXJhbSDjg5Hjg6njg6Hjg7zjgr9JRFxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlckluZGV4KHBhcmFtZXRlcklkOiBDdWJpc21JZEhhbmRsZSk6IG51bWJlciB7XG4gICAgbGV0IHBhcmFtZXRlckluZGV4OiBudW1iZXI7XG4gICAgY29uc3QgaWRDb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5jb3VudDtcblxuICAgIGZvciAocGFyYW1ldGVySW5kZXggPSAwOyBwYXJhbWV0ZXJJbmRleCA8IGlkQ291bnQ7ICsrcGFyYW1ldGVySW5kZXgpIHtcbiAgICAgIGlmIChwYXJhbWV0ZXJJZCAhPSB0aGlzLl9wYXJhbWV0ZXJJZHMuYXQocGFyYW1ldGVySW5kZXgpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyYW1ldGVySW5kZXg7XG4gICAgfVxuXG4gICAgLy8g44Oi44OH44Or44Gr5a2Y5Zyo44GX44Gm44GE44Gq44GE5aC05ZCI44CB6Z2e5a2Y5Zyo44OR44Op44Oh44O844K/SUTjg6rjgrnjg4jlhoXjgpLmpJzntKLjgZfjgIHjgZ3jga7jgqTjg7Pjg4fjg4Pjgq/jgrnjgpLov5TjgZlcbiAgICBpZiAodGhpcy5fbm90RXhpc3RQYXJhbWV0ZXJJZC5pc0V4aXN0KHBhcmFtZXRlcklkKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX25vdEV4aXN0UGFyYW1ldGVySWQuZ2V0VmFsdWUocGFyYW1ldGVySWQpO1xuICAgIH1cblxuICAgIC8vIOmdnuWtmOWcqOODkeODqeODoeODvOOCv0lE44Oq44K544OI44Gr44Gq44GE5aC05ZCI5paw44GX44GP6KaB57Sg44KS6L+95Yqg44GZ44KLXG4gICAgcGFyYW1ldGVySW5kZXggPVxuICAgICAgdGhpcy5fbW9kZWwucGFyYW1ldGVycy5jb3VudCArIHRoaXMuX25vdEV4aXN0UGFyYW1ldGVySWQuZ2V0U2l6ZSgpO1xuXG4gICAgdGhpcy5fbm90RXhpc3RQYXJhbWV0ZXJJZC5zZXRWYWx1ZShwYXJhbWV0ZXJJZCwgcGFyYW1ldGVySW5kZXgpO1xuICAgIHRoaXMuX25vdEV4aXN0UGFyYW1ldGVyVmFsdWVzLmFwcGVuZEtleShwYXJhbWV0ZXJJbmRleCk7XG5cbiAgICByZXR1cm4gcGFyYW1ldGVySW5kZXg7XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gu5YCL5pWw44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44OR44Op44Oh44O844K/44Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFyYW1ldGVyQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5jb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jga7mnIDlpKflgKTjga7lj5blvpdcbiAgICogQHBhcmFtIHBhcmFtZXRlckluZGV4IOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv+OBruacgOWkp+WApFxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlck1heGltdW1WYWx1ZShwYXJhbWV0ZXJJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5tYXhpbXVtVmFsdWVzW3BhcmFtZXRlckluZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jga7mnIDlsI/lgKTjga7lj5blvpdcbiAgICogQHBhcmFtIHBhcmFtZXRlckluZGV4IOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv+OBruacgOWwj+WApFxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlck1pbmltdW1WYWx1ZShwYXJhbWV0ZXJJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5taW5pbXVtVmFsdWVzW3BhcmFtZXRlckluZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jga7jg4fjg5Xjgqnjg6vjg4jlgKTjga7lj5blvpdcbiAgICogQHBhcmFtIHBhcmFtZXRlckluZGV4IOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv+OBruODh+ODleOCqeODq+ODiOWApFxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZShwYXJhbWV0ZXJJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5kZWZhdWx0VmFsdWVzW3BhcmFtZXRlckluZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jga7lgKTjga7lj5blvpdcbiAgICogQHBhcmFtIHBhcmFtZXRlckluZGV4ICAgIOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv+OBruWApFxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlclZhbHVlQnlJbmRleChwYXJhbWV0ZXJJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5fbm90RXhpc3RQYXJhbWV0ZXJWYWx1ZXMuaXNFeGlzdChwYXJhbWV0ZXJJbmRleCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ub3RFeGlzdFBhcmFtZXRlclZhbHVlcy5nZXRWYWx1ZShwYXJhbWV0ZXJJbmRleCk7XG4gICAgfVxuXG4gICAgLy8g44Kk44Oz44OH44OD44Kv44K544Gu56+E5Zuy5YaF5qSc55+lXG4gICAgQ1NNX0FTU0VSVChcbiAgICAgIDAgPD0gcGFyYW1ldGVySW5kZXggJiYgcGFyYW1ldGVySW5kZXggPCB0aGlzLmdldFBhcmFtZXRlckNvdW50KClcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuX3BhcmFtZXRlclZhbHVlc1twYXJhbWV0ZXJJbmRleF07XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gu5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJJZCAgICDjg5Hjg6njg6Hjg7zjgr/jga5JRFxuICAgKiBAcmV0dXJuIOODkeODqeODoeODvOOCv+OBruWApFxuICAgKi9cbiAgcHVibGljIGdldFBhcmFtZXRlclZhbHVlQnlJZChwYXJhbWV0ZXJJZDogQ3ViaXNtSWRIYW5kbGUpOiBudW1iZXIge1xuICAgIC8vIOmrmOmAn+WMluOBruOBn+OCgeOBq3BhcmFtZXRlckluZGV444KS5Y+W5b6X44Gn44GN44KL5qmf5qeL44Gr44Gq44Gj44Gm44GE44KL44GM44CB5aSW6YOo44GL44KJ44Gu6Kit5a6a44Gu5pmC44Gv5ZG844Gz5Ye644GX6aC75bqm44GM5L2O44GE44Gf44KB5LiN6KaBXG4gICAgY29uc3QgcGFyYW1ldGVySW5kZXg6IG51bWJlciA9IHRoaXMuZ2V0UGFyYW1ldGVySW5kZXgocGFyYW1ldGVySWQpO1xuICAgIHJldHVybiB0aGlzLmdldFBhcmFtZXRlclZhbHVlQnlJbmRleChwYXJhbWV0ZXJJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gu5YCk44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJJbmRleCDjg5Hjg6njg6Hjg7zjgr/jga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIHZhbHVlIOODkeODqeODoeODvOOCv+OBruWApFxuICAgKiBAcGFyYW0gd2VpZ2h0IOmHjeOBv1xuICAgKi9cbiAgcHVibGljIHNldFBhcmFtZXRlclZhbHVlQnlJbmRleChcbiAgICBwYXJhbWV0ZXJJbmRleDogbnVtYmVyLFxuICAgIHZhbHVlOiBudW1iZXIsXG4gICAgd2VpZ2h0ID0gMS4wXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9ub3RFeGlzdFBhcmFtZXRlclZhbHVlcy5pc0V4aXN0KHBhcmFtZXRlckluZGV4KSkge1xuICAgICAgdGhpcy5fbm90RXhpc3RQYXJhbWV0ZXJWYWx1ZXMuc2V0VmFsdWUoXG4gICAgICAgIHBhcmFtZXRlckluZGV4LFxuICAgICAgICB3ZWlnaHQgPT0gMVxuICAgICAgICAgID8gdmFsdWVcbiAgICAgICAgICA6IHRoaXMuX25vdEV4aXN0UGFyYW1ldGVyVmFsdWVzLmdldFZhbHVlKHBhcmFtZXRlckluZGV4KSAqXG4gICAgICAgICAgICAgICgxIC0gd2VpZ2h0KSArXG4gICAgICAgICAgICAgIHZhbHVlICogd2VpZ2h0XG4gICAgICApO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g44Kk44Oz44OH44OD44Kv44K544Gu56+E5Zuy5YaF5qSc55+lXG4gICAgQ1NNX0FTU0VSVChcbiAgICAgIDAgPD0gcGFyYW1ldGVySW5kZXggJiYgcGFyYW1ldGVySW5kZXggPCB0aGlzLmdldFBhcmFtZXRlckNvdW50KClcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX21vZGVsLnBhcmFtZXRlcnMubWF4aW11bVZhbHVlc1twYXJhbWV0ZXJJbmRleF0gPCB2YWx1ZSkge1xuICAgICAgdmFsdWUgPSB0aGlzLl9tb2RlbC5wYXJhbWV0ZXJzLm1heGltdW1WYWx1ZXNbcGFyYW1ldGVySW5kZXhdO1xuICAgIH1cbiAgICBpZiAodGhpcy5fbW9kZWwucGFyYW1ldGVycy5taW5pbXVtVmFsdWVzW3BhcmFtZXRlckluZGV4XSA+IHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuX21vZGVsLnBhcmFtZXRlcnMubWluaW11bVZhbHVlc1twYXJhbWV0ZXJJbmRleF07XG4gICAgfVxuXG4gICAgdGhpcy5fcGFyYW1ldGVyVmFsdWVzW3BhcmFtZXRlckluZGV4XSA9XG4gICAgICB3ZWlnaHQgPT0gMVxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogKHRoaXMuX3BhcmFtZXRlclZhbHVlc1twYXJhbWV0ZXJJbmRleF0gPVxuICAgICAgICAgICAgdGhpcy5fcGFyYW1ldGVyVmFsdWVzW3BhcmFtZXRlckluZGV4XSAqICgxIC0gd2VpZ2h0KSArXG4gICAgICAgICAgICB2YWx1ZSAqIHdlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gu5YCk44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJJZCDjg5Hjg6njg6Hjg7zjgr/jga5JRFxuICAgKiBAcGFyYW0gdmFsdWUg44OR44Op44Oh44O844K/44Gu5YCkXG4gICAqIEBwYXJhbSB3ZWlnaHQg6YeN44G/XG4gICAqL1xuICBwdWJsaWMgc2V0UGFyYW1ldGVyVmFsdWVCeUlkKFxuICAgIHBhcmFtZXRlcklkOiBDdWJpc21JZEhhbmRsZSxcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIHdlaWdodCA9IDEuMFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleDogbnVtYmVyID0gdGhpcy5nZXRQYXJhbWV0ZXJJbmRleChwYXJhbWV0ZXJJZCk7XG4gICAgdGhpcy5zZXRQYXJhbWV0ZXJWYWx1ZUJ5SW5kZXgoaW5kZXgsIHZhbHVlLCB3ZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeODqeODoeODvOOCv+OBruWApOOBruWKoOeulyhpbmRleClcbiAgICogQHBhcmFtIHBhcmFtZXRlckluZGV4IOODkeODqeODoeODvOOCv+OCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gdmFsdWUg5Yqg566X44GZ44KL5YCkXG4gICAqIEBwYXJhbSB3ZWlnaHQg6YeN44G/XG4gICAqL1xuICBwdWJsaWMgYWRkUGFyYW1ldGVyVmFsdWVCeUluZGV4KFxuICAgIHBhcmFtZXRlckluZGV4OiBudW1iZXIsXG4gICAgdmFsdWU6IG51bWJlcixcbiAgICB3ZWlnaHQgPSAxLjBcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5zZXRQYXJhbWV0ZXJWYWx1ZUJ5SW5kZXgoXG4gICAgICBwYXJhbWV0ZXJJbmRleCxcbiAgICAgIHRoaXMuZ2V0UGFyYW1ldGVyVmFsdWVCeUluZGV4KHBhcmFtZXRlckluZGV4KSArIHZhbHVlICogd2VpZ2h0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jga7lgKTjga7liqDnrpcoaWQpXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJJZCDjg5Hjg6njg6Hjg7zjgr/vvKnvvKRcbiAgICogQHBhcmFtIHZhbHVlIOWKoOeul+OBmeOCi+WApFxuICAgKiBAcGFyYW0gd2VpZ2h0IOmHjeOBv1xuICAgKi9cbiAgcHVibGljIGFkZFBhcmFtZXRlclZhbHVlQnlJZChcbiAgICBwYXJhbWV0ZXJJZDogYW55LFxuICAgIHZhbHVlOiBudW1iZXIsXG4gICAgd2VpZ2h0ID0gMS4wXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSB0aGlzLmdldFBhcmFtZXRlckluZGV4KHBhcmFtZXRlcklkKTtcbiAgICB0aGlzLmFkZFBhcmFtZXRlclZhbHVlQnlJbmRleChpbmRleCwgdmFsdWUsIHdlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gu5YCk44Gu5LmX566XXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJJZCDjg5Hjg6njg6Hjg7zjgr/jga5JRFxuICAgKiBAcGFyYW0gdmFsdWUg5LmX566X44GZ44KL5YCkXG4gICAqIEBwYXJhbSB3ZWlnaHQg6YeN44G/XG4gICAqL1xuICBwdWJsaWMgbXVsdGlwbHlQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gICAgcGFyYW1ldGVySWQ6IEN1YmlzbUlkSGFuZGxlLFxuICAgIHZhbHVlOiBudW1iZXIsXG4gICAgd2VpZ2h0ID0gMS4wXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSB0aGlzLmdldFBhcmFtZXRlckluZGV4KHBhcmFtZXRlcklkKTtcbiAgICB0aGlzLm11bHRpcGx5UGFyYW1ldGVyVmFsdWVCeUluZGV4KGluZGV4LCB2YWx1ZSwgd2VpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg6njg6Hjg7zjgr/jga7lgKTjga7kuZfnrpdcbiAgICogQHBhcmFtIHBhcmFtZXRlckluZGV4IOODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gdmFsdWUg5LmX566X44GZ44KL5YCkXG4gICAqIEBwYXJhbSB3ZWlnaHQg6YeN44G/XG4gICAqL1xuICBwdWJsaWMgbXVsdGlwbHlQYXJhbWV0ZXJWYWx1ZUJ5SW5kZXgoXG4gICAgcGFyYW1ldGVySW5kZXg6IG51bWJlcixcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIHdlaWdodCA9IDEuMFxuICApOiB2b2lkIHtcbiAgICB0aGlzLnNldFBhcmFtZXRlclZhbHVlQnlJbmRleChcbiAgICAgIHBhcmFtZXRlckluZGV4LFxuICAgICAgdGhpcy5nZXRQYXJhbWV0ZXJWYWx1ZUJ5SW5kZXgocGFyYW1ldGVySW5kZXgpICpcbiAgICAgICAgKDEuMCArICh2YWx1ZSAtIDEuMCkgKiB3ZWlnaHQpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCueOBruWPluW+l1xuICAgKiBAcGFyYW0gZHJhd2FibGVJZCBEcmF3YWJsZeOBrklEXG4gICAqIEByZXR1cm4gRHJhd2FibGXjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZUluZGV4KGRyYXdhYmxlSWQ6IEN1YmlzbUlkSGFuZGxlKTogbnVtYmVyIHtcbiAgICBjb25zdCBkcmF3YWJsZUNvdW50ID0gdGhpcy5fbW9kZWwuZHJhd2FibGVzLmNvdW50O1xuXG4gICAgZm9yIChcbiAgICAgIGxldCBkcmF3YWJsZUluZGV4ID0gMDtcbiAgICAgIGRyYXdhYmxlSW5kZXggPCBkcmF3YWJsZUNvdW50O1xuICAgICAgKytkcmF3YWJsZUluZGV4XG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5fZHJhd2FibGVJZHMuYXQoZHJhd2FibGVJbmRleCkgPT0gZHJhd2FibGVJZCkge1xuICAgICAgICByZXR1cm4gZHJhd2FibGVJbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga7lgIvmlbDjga7lj5blvpdcbiAgICogQHJldHVybiBkcmF3YWJsZeOBruWAi+aVsFxuICAgKi9cbiAgcHVibGljIGdldERyYXdhYmxlQ291bnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBkcmF3YWJsZUNvdW50ID0gdGhpcy5fbW9kZWwuZHJhd2FibGVzLmNvdW50O1xuICAgIHJldHVybiBkcmF3YWJsZUNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44GuSUTjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGRyYXdhYmxlSW5kZXggRHJhd2FibGXjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiBkcmF3YWJsZeOBrklEXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVJZChkcmF3YWJsZUluZGV4OiBudW1iZXIpOiBDdWJpc21JZEhhbmRsZSB7XG4gICAgY29uc3QgcGFyYW1ldGVySWRzOiBzdHJpbmdbXSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5pZHM7XG4gICAgcmV0dXJuIEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChwYXJhbWV0ZXJJZHNbZHJhd2FibGVJbmRleF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu5o+P55S76aCG44Oq44K544OI44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4gRHJhd2FibGXjga7mj4/nlLvpoIbjg6rjgrnjg4hcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZVJlbmRlck9yZGVycygpOiBJbnQzMkFycmF5IHtcbiAgICBjb25zdCByZW5kZXJPcmRlcnM6IEludDMyQXJyYXkgPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMucmVuZGVyT3JkZXJzO1xuICAgIHJldHVybiByZW5kZXJPcmRlcnM7XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga7jg4bjgq/jgrnjg4Hjg6PjgqTjg7Pjg4fjg4Pjgq/jgrnjg6rjgrnjg4jjga7lj5blvpdcbiAgICogQHBhcmFtIGRyYXdhYmxlSW5kZXggRHJhd2FibGXjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiBkcmF3YWJsZeOBruODhuOCr+OCueODgeODo+OCpOODs+ODh+ODg+OCr+OCueODquOCueODiFxuICAgKi9cbiAgcHVibGljIGdldERyYXdhYmxlVGV4dHVyZUluZGljZXMoZHJhd2FibGVJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCB0ZXh0dXJlSW5kaWNlczogSW50MzJBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy50ZXh0dXJlSW5kaWNlcztcbiAgICByZXR1cm4gdGV4dHVyZUluZGljZXNbZHJhd2FibGVJbmRleF07XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga5WZXJ0ZXhQb3NpdGlvbnPjga7lpInljJbmg4XloLHjga7lj5blvpdcbiAgICpcbiAgICog55u06L+R44GuQ3ViaXNtTW9kZWwudXBkYXRl6Zai5pWw44GnRHJhd2FibGXjga7poILngrnmg4XloLHjgYzlpInljJbjgZfjgZ/jgYvjgpLlj5blvpfjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtICAgZHJhd2FibGVJbmRleCAgIERyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR2YWwgIHRydWUgICAgRHJhd2FibGXjga7poILngrnmg4XloLHjgYznm7Tov5Hjga5DdWJpc21Nb2RlbC51cGRhdGXplqLmlbDjgaflpInljJbjgZfjgZ9cbiAgICogQHJldHZhbCAgZmFsc2UgICBEcmF3YWJsZeOBrumggueCueaDheWgseOBjOebtOi/keOBrkN1YmlzbU1vZGVsLnVwZGF0ZemWouaVsOOBp+WkieWMluOBl+OBpuOBhOOBquOBhFxuICAgKi9cbiAgcHVibGljIGdldERyYXdhYmxlRHluYW1pY0ZsYWdWZXJ0ZXhQb3NpdGlvbnNEaWRDaGFuZ2UoXG4gICAgZHJhd2FibGVJbmRleDogbnVtYmVyXG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGR5bmFtaWNGbGFnczogVWludDhBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5keW5hbWljRmxhZ3M7XG4gICAgcmV0dXJuIExpdmUyREN1YmlzbUNvcmUuVXRpbHMuaGFzVmVydGV4UG9zaXRpb25zRGlkQ2hhbmdlQml0KFxuICAgICAgZHluYW1pY0ZsYWdzW2RyYXdhYmxlSW5kZXhdXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3YWJsZeOBrumggueCueOCpOODs+ODh+ODg+OCr+OCueOBruWAi+aVsOOBruWPluW+l1xuICAgKiBAcGFyYW0gZHJhd2FibGVJbmRleCBEcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIGRyYXdhYmxl44Gu6aCC54K544Kk44Oz44OH44OD44Kv44K544Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVWZXJ0ZXhJbmRleENvdW50KGRyYXdhYmxlSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgaW5kZXhDb3VudHM6IEludDMyQXJyYXkgPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMuaW5kZXhDb3VudHM7XG4gICAgcmV0dXJuIGluZGV4Q291bnRzW2RyYXdhYmxlSW5kZXhdO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu6aCC54K544Gu5YCL5pWw44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBkcmF3YWJsZUluZGV4IERyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gZHJhd2FibGXjga7poILngrnjga7lgIvmlbBcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZVZlcnRleENvdW50KGRyYXdhYmxlSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgdmVydGV4Q291bnRzID0gdGhpcy5fbW9kZWwuZHJhd2FibGVzLnZlcnRleENvdW50cztcbiAgICByZXR1cm4gdmVydGV4Q291bnRzW2RyYXdhYmxlSW5kZXhdO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu6aCC54K544Oq44K544OI44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBkcmF3YWJsZUluZGV4IGRyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gZHJhd2FibGXjga7poILngrnjg6rjgrnjg4hcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZVZlcnRpY2VzKGRyYXdhYmxlSW5kZXg6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RHJhd2FibGVWZXJ0ZXhQb3NpdGlvbnMoZHJhd2FibGVJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga7poILngrnjgqTjg7Pjg4fjg4Pjgq/jgrnjg6rjgrnjg4jjga7lj5blvpdcbiAgICogQHBhcmFtIGRyYXJhYmxlSW5kZXggRHJhd2FibGXjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiBkcmF3YWJsZeOBrumggueCueOCpOODs+ODh+ODg+OCr+OCueODquOCueODiFxuICAgKi9cbiAgcHVibGljIGdldERyYXdhYmxlVmVydGV4SW5kaWNlcyhkcmF3YWJsZUluZGV4OiBudW1iZXIpOiBVaW50MTZBcnJheSB7XG4gICAgY29uc3QgaW5kaWNlc0FycmF5OiBVaW50MTZBcnJheVtdID0gdGhpcy5fbW9kZWwuZHJhd2FibGVzLmluZGljZXM7XG4gICAgcmV0dXJuIGluZGljZXNBcnJheVtkcmF3YWJsZUluZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3YWJsZeOBrumggueCueODquOCueODiOOBruWPluW+l1xuICAgKiBAcGFyYW0gZHJhd2FibGVJbmRleCBEcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIGRyYXdhYmxl44Gu6aCC54K544Oq44K544OIXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVWZXJ0ZXhQb3NpdGlvbnMoZHJhd2FibGVJbmRleDogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgICBjb25zdCB2ZXJ0aWNlc0FycmF5OiBGbG9hdDMyQXJyYXlbXSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy52ZXJ0ZXhQb3NpdGlvbnM7XG4gICAgcmV0dXJuIHZlcnRpY2VzQXJyYXlbZHJhd2FibGVJbmRleF07XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga7poILngrnjga5VVuODquOCueODiOOBruWPluW+l1xuICAgKiBAcGFyYW0gZHJhd2FibGVJbmRleCBEcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIGRyYXdhYmxl44Gu6aCC54K5VVbjg6rjgrnjg4hcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZVZlcnRleFV2cyhkcmF3YWJsZUluZGV4OiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICAgIGNvbnN0IHV2c0FycmF5OiBGbG9hdDMyQXJyYXlbXSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy52ZXJ0ZXhVdnM7XG4gICAgcmV0dXJuIHV2c0FycmF5W2RyYXdhYmxlSW5kZXhdO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu5LiN6YCP5piO5bqm44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBkcmF3YWJsZUluZGV4IERyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gZHJhd2FibGXjga7kuI3pgI/mmI7luqZcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZU9wYWNpdHkoZHJhd2FibGVJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBvcGFjaXRpZXM6IEZsb2F0MzJBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5vcGFjaXRpZXM7XG4gICAgcmV0dXJuIG9wYWNpdGllc1tkcmF3YWJsZUluZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3YWJsZeOBruOCq+ODquODs+OCsOaDheWgseOBruWPluW+l1xuICAgKiBAcGFyYW0gZHJhd2FibGVJbmRleCBEcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIGRyYXdhYmxl44Gu44Kr44Oq44Oz44Kw5oOF5aCxXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVDdWxsaW5nKGRyYXdhYmxlSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNvbnN0YW50RmxhZ3MgPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMuY29uc3RhbnRGbGFncztcblxuICAgIHJldHVybiAhTGl2ZTJEQ3ViaXNtQ29yZS5VdGlscy5oYXNJc0RvdWJsZVNpZGVkQml0KFxuICAgICAgY29uc3RhbnRGbGFnc1tkcmF3YWJsZUluZGV4XVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga7jg5bjg6zjg7Pjg4njg6Ljg7zjg4njgpLlj5blvpdcbiAgICogQHBhcmFtIGRyYXdhYmxlSW5kZXggRHJhd2FibGXjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiBkcmF3YWJsZeOBruODluODrOODs+ODieODouODvOODiVxuICAgKi9cbiAgcHVibGljIGdldERyYXdhYmxlQmxlbmRNb2RlKGRyYXdhYmxlSW5kZXg6IG51bWJlcik6IEN1YmlzbUJsZW5kTW9kZSB7XG4gICAgY29uc3QgY29uc3RhbnRGbGFncyA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5jb25zdGFudEZsYWdzO1xuXG4gICAgcmV0dXJuIExpdmUyREN1YmlzbUNvcmUuVXRpbHMuaGFzQmxlbmRBZGRpdGl2ZUJpdChcbiAgICAgIGNvbnN0YW50RmxhZ3NbZHJhd2FibGVJbmRleF1cbiAgICApXG4gICAgICA/IEN1YmlzbUJsZW5kTW9kZS5DdWJpc21CbGVuZE1vZGVfQWRkaXRpdmVcbiAgICAgIDogTGl2ZTJEQ3ViaXNtQ29yZS5VdGlscy5oYXNCbGVuZE11bHRpcGxpY2F0aXZlQml0KFxuICAgICAgICAgIGNvbnN0YW50RmxhZ3NbZHJhd2FibGVJbmRleF1cbiAgICAgICAgKVxuICAgICAgPyBDdWJpc21CbGVuZE1vZGUuQ3ViaXNtQmxlbmRNb2RlX011bHRpcGxpY2F0aXZlXG4gICAgICA6IEN1YmlzbUJsZW5kTW9kZS5DdWJpc21CbGVuZE1vZGVfTm9ybWFsO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu44Oe44K544Kv44Gu5Y+N6Lui5L2/55So44Gu5Y+W5b6XXG4gICAqXG4gICAqIERyYXdhYmxl44Gu44Oe44K544Kv5L2/55So5pmC44Gu5Y+N6Lui6Kit5a6a44KS5Y+W5b6X44GZ44KL44CCXG4gICAqIOODnuOCueOCr+OCkuS9v+eUqOOBl+OBquOBhOWgtOWQiOOBr+eEoeimluOBleOCjOOCi+OAglxuICAgKlxuICAgKiBAcGFyYW0gZHJhd2FibGVJbmRleCBEcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIERyYXdhYmxl44Gu5Y+N6Lui6Kit5a6aXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVJbnZlcnRlZE1hc2tCaXQoZHJhd2FibGVJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29uc3RhbnRGbGFnczogVWludDhBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5jb25zdGFudEZsYWdzO1xuXG4gICAgcmV0dXJuIExpdmUyREN1YmlzbUNvcmUuVXRpbHMuaGFzSXNJbnZlcnRlZE1hc2tCaXQoXG4gICAgICBjb25zdGFudEZsYWdzW2RyYXdhYmxlSW5kZXhdXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3YWJsZeOBruOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+ODquOCueODiOOBruWPluW+l1xuICAgKiBAcmV0dXJuIERyYXdhYmxl44Gu44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Oq44K544OIXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVNYXNrcygpOiBJbnQzMkFycmF5W10ge1xuICAgIGNvbnN0IG1hc2tzOiBJbnQzMkFycmF5W10gPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMubWFza3M7XG4gICAgcmV0dXJuIG1hc2tzO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gu5YCL5pWw44Oq44K544OI44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4gRHJhd2FibGXjga7jgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jga7lgIvmlbDjg6rjgrnjg4hcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZU1hc2tDb3VudHMoKTogSW50MzJBcnJheSB7XG4gICAgY29uc3QgbWFza0NvdW50czogSW50MzJBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5tYXNrQ291bnRzO1xuICAgIHJldHVybiBtYXNrQ291bnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBruS9v+eUqOeKtuaFi1xuICAgKlxuICAgKiBAcmV0dXJuIHRydWUg44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44KS5L2/55So44GX44Gm44GE44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44KS5L2/55So44GX44Gm44GE44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNVc2luZ01hc2tpbmcoKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgZCA9IDA7IGQgPCB0aGlzLl9tb2RlbC5kcmF3YWJsZXMuY291bnQ7ICsrZCkge1xuICAgICAgaWYgKHRoaXMuX21vZGVsLmRyYXdhYmxlcy5tYXNrQ291bnRzW2RdIDw9IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu6KGo56S65oOF5aCx44KS5Y+W5b6X44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSBkcmF3YWJsZUluZGV4IERyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gdHJ1ZSBEcmF3YWJsZeOBjOihqOekulxuICAgKiBAcmV0dXJuIGZhbHNlIERyYXdhYmxl44GM6Z2e6KGo56S6XG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVEeW5hbWljRmxhZ0lzVmlzaWJsZShkcmF3YWJsZUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBkeW5hbWljRmxhZ3M6IFVpbnQ4QXJyYXkgPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMuZHluYW1pY0ZsYWdzO1xuICAgIHJldHVybiBMaXZlMkRDdWJpc21Db3JlLlV0aWxzLmhhc0lzVmlzaWJsZUJpdChkeW5hbWljRmxhZ3NbZHJhd2FibGVJbmRleF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44GuRHJhd09yZGVy44Gu5aSJ5YyW5oOF5aCx44Gu5Y+W5b6XXG4gICAqXG4gICAqIOebtOi/keOBrkN1YmlzbU1vZGVsLnVwZGF0ZemWouaVsOOBp2RyYXdhYmxl44GuZHJhd09yZGVy44GM5aSJ5YyW44GX44Gf44GL44KS5Y+W5b6X44GZ44KL44CCXG4gICAqIGRyYXdPcmRlcuOBr2FydE1lc2jkuIrjgafmjIflrprjgZnjgosw44GL44KJMTAwMOOBruaDheWgsVxuICAgKiBAcGFyYW0gZHJhd2FibGVJbmRleCBkcmF3YWJsZeOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIHRydWUgZHJhd2FibGXjga7kuI3pgI/mmI7luqbjgYznm7Tov5Hjga5DdWJpc21Nb2RlbC51cGRhdGXplqLmlbDjgaflpInljJbjgZfjgZ9cbiAgICogQHJldHVybiBmYWxzZSBkcmF3YWJsZeOBruS4jemAj+aYjuW6puOBjOebtOi/keOBrkN1YmlzbU1vZGVsLnVwZGF0ZemWouaVsOOBp+WkieWMluOBl+OBpuOBhOOCi1xuICAgKi9cbiAgcHVibGljIGdldERyYXdhYmxlRHluYW1pY0ZsYWdWaXNpYmlsaXR5RGlkQ2hhbmdlKFxuICAgIGRyYXdhYmxlSW5kZXg6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICBjb25zdCBkeW5hbWljRmxhZ3M6IFVpbnQ4QXJyYXkgPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMuZHluYW1pY0ZsYWdzO1xuICAgIHJldHVybiBMaXZlMkRDdWJpc21Db3JlLlV0aWxzLmhhc1Zpc2liaWxpdHlEaWRDaGFuZ2VCaXQoXG4gICAgICBkeW5hbWljRmxhZ3NbZHJhd2FibGVJbmRleF1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdhYmxl44Gu5LiN6YCP5piO5bqm44Gu5aSJ5YyW5oOF5aCx44Gu5Y+W5b6XXG4gICAqXG4gICAqIOebtOi/keOBrkN1YmlzbU1vZGVsLnVwZGF0ZemWouaVsOOBp2RyYXdhYmxl44Gu5LiN6YCP5piO5bqm44GM5aSJ5YyW44GX44Gf44GL44KS5Y+W5b6X44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSBkcmF3YWJsZUluZGV4IGRyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gdHJ1ZSBEcmF3YWJsZeOBruS4jemAj+aYjuW6puOBjOebtOi/keOBrkN1YmlzbU1vZGVsLnVwZGF0ZemWouaVsOOBp+WkieWMluOBl+OBn1xuICAgKiBAcmV0dXJuIGZhbHNlIERyYXdhYmxl44Gu5LiN6YCP5piO5bqm44GM55u06L+R44GuQ3ViaXNtTW9kZWwudXBkYXRl6Zai5pWw44Gn5aSJ5YyW44GX44Gm44Gq44GEXG4gICAqL1xuICBwdWJsaWMgZ2V0RHJhd2FibGVEeW5hbWljRmxhZ09wYWNpdHlEaWRDaGFuZ2UoXG4gICAgZHJhd2FibGVJbmRleDogbnVtYmVyXG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGR5bmFtaWNGbGFnczogVWludDhBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5keW5hbWljRmxhZ3M7XG4gICAgcmV0dXJuIExpdmUyREN1YmlzbUNvcmUuVXRpbHMuaGFzT3BhY2l0eURpZENoYW5nZUJpdChcbiAgICAgIGR5bmFtaWNGbGFnc1tkcmF3YWJsZUluZGV4XVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRHJhd2FibGXjga7mj4/nlLvpoIbluo/jga7lpInljJbmg4XloLHjga7lj5blvpdcbiAgICpcbiAgICog55u06L+R44GuQ3ViaXNtTW9kZWwudXBkYXRl6Zai5pWw44GnRHJhd2FibGXjga7mj4/nlLvjga7poIbluo/jgYzlpInljJbjgZfjgZ/jgYvjgpLlj5blvpfjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtIGRyYXdhYmxlSW5kZXggRHJhd2FibGXjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiB0cnVlIERyYXdhYmxl44Gu5o+P55S744Gu6aCG5bqP44GM55u06L+R44GuQ3ViaXNtTW9kZWwudXBkYXRl6Zai5pWw44Gn5aSJ5YyW44GX44GfXG4gICAqIEByZXR1cm4gZmFsc2UgRHJhd2FibGXjga7mj4/nlLvjga7poIbluo/jgYznm7Tov5Hjga5DdWJpc21Nb2RlbC51cGRhdGXplqLmlbDjgaflpInljJbjgZfjgabjgarjgYRcbiAgICovXG4gIHB1YmxpYyBnZXREcmF3YWJsZUR5bmFtaWNGbGFnUmVuZGVyT3JkZXJEaWRDaGFuZ2UoXG4gICAgZHJhd2FibGVJbmRleDogbnVtYmVyXG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGR5bmFtaWNGbGFnczogVWludDhBcnJheSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5keW5hbWljRmxhZ3M7XG4gICAgcmV0dXJuIExpdmUyREN1YmlzbUNvcmUuVXRpbHMuaGFzUmVuZGVyT3JkZXJEaWRDaGFuZ2VCaXQoXG4gICAgICBkeW5hbWljRmxhZ3NbZHJhd2FibGVJbmRleF1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOS/neWtmOOBleOCjOOBn+ODkeODqeODoeODvOOCv+OBruiqreOBv+i+vOOBv1xuICAgKi9cbiAgcHVibGljIGxvYWRQYXJhbWV0ZXJzKCk6IHZvaWQge1xuICAgIGxldCBwYXJhbWV0ZXJDb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5jb3VudDtcbiAgICBjb25zdCBzYXZlZFBhcmFtZXRlckNvdW50OiBudW1iZXIgPSB0aGlzLl9zYXZlZFBhcmFtZXRlcnMuZ2V0U2l6ZSgpO1xuXG4gICAgaWYgKHBhcmFtZXRlckNvdW50ID4gc2F2ZWRQYXJhbWV0ZXJDb3VudCkge1xuICAgICAgcGFyYW1ldGVyQ291bnQgPSBzYXZlZFBhcmFtZXRlckNvdW50O1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1ldGVyQ291bnQ7ICsraSkge1xuICAgICAgdGhpcy5fcGFyYW1ldGVyVmFsdWVzW2ldID0gdGhpcy5fc2F2ZWRQYXJhbWV0ZXJzLmF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3mnJ/ljJbjgZnjgotcbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIENTTV9BU1NFUlQodGhpcy5fbW9kZWwpO1xuXG4gICAgdGhpcy5fcGFyYW1ldGVyVmFsdWVzID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy52YWx1ZXM7XG4gICAgdGhpcy5fcGFydE9wYWNpdGllcyA9IHRoaXMuX21vZGVsLnBhcnRzLm9wYWNpdGllcztcbiAgICB0aGlzLl9wYXJhbWV0ZXJNYXhpbXVtVmFsdWVzID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5tYXhpbXVtVmFsdWVzO1xuICAgIHRoaXMuX3BhcmFtZXRlck1pbmltdW1WYWx1ZXMgPSB0aGlzLl9tb2RlbC5wYXJhbWV0ZXJzLm1pbmltdW1WYWx1ZXM7XG5cbiAgICB7XG4gICAgICBjb25zdCBwYXJhbWV0ZXJJZHM6IHN0cmluZ1tdID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5pZHM7XG4gICAgICBjb25zdCBwYXJhbWV0ZXJDb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWwucGFyYW1ldGVycy5jb3VudDtcblxuICAgICAgdGhpcy5fcGFyYW1ldGVySWRzLnByZXBhcmVDYXBhY2l0eShwYXJhbWV0ZXJDb3VudCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtZXRlckNvdW50OyArK2kpIHtcbiAgICAgICAgdGhpcy5fcGFyYW1ldGVySWRzLnB1c2hCYWNrKFxuICAgICAgICAgIEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChwYXJhbWV0ZXJJZHNbaV0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAge1xuICAgICAgY29uc3QgcGFydElkczogc3RyaW5nW10gPSB0aGlzLl9tb2RlbC5wYXJ0cy5pZHM7XG4gICAgICBjb25zdCBwYXJ0Q291bnQ6IG51bWJlciA9IHRoaXMuX21vZGVsLnBhcnRzLmNvdW50O1xuXG4gICAgICB0aGlzLl9wYXJ0SWRzLnByZXBhcmVDYXBhY2l0eShwYXJ0Q291bnQpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0Q291bnQ7ICsraSkge1xuICAgICAgICB0aGlzLl9wYXJ0SWRzLnB1c2hCYWNrKFxuICAgICAgICAgIEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChwYXJ0SWRzW2ldKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHtcbiAgICAgIGNvbnN0IGRyYXdhYmxlSWRzOiBzdHJpbmdbXSA9IHRoaXMuX21vZGVsLmRyYXdhYmxlcy5pZHM7XG4gICAgICBjb25zdCBkcmF3YWJsZUNvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbC5kcmF3YWJsZXMuY291bnQ7XG5cbiAgICAgIHRoaXMuX2RyYXdhYmxlSWRzLnByZXBhcmVDYXBhY2l0eShkcmF3YWJsZUNvdW50KTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHJhd2FibGVDb3VudDsgKytpKSB7XG4gICAgICAgIHRoaXMuX2RyYXdhYmxlSWRzLnB1c2hCYWNrKFxuICAgICAgICAgIEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChkcmF3YWJsZUlkc1tpXSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqIEBwYXJhbSBtb2RlbCDjg6Ljg4fjg6tcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihtb2RlbDogTGl2ZTJEQ3ViaXNtQ29yZS5Nb2RlbCkge1xuICAgIHRoaXMuX21vZGVsID0gbW9kZWw7XG4gICAgdGhpcy5fcGFyYW1ldGVyVmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wYXJhbWV0ZXJNYXhpbXVtVmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wYXJhbWV0ZXJNaW5pbXVtVmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wYXJ0T3BhY2l0aWVzID0gbnVsbDtcbiAgICB0aGlzLl9zYXZlZFBhcmFtZXRlcnMgPSBuZXcgY3NtVmVjdG9yPG51bWJlcj4oKTtcbiAgICB0aGlzLl9wYXJhbWV0ZXJJZHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPigpO1xuICAgIHRoaXMuX2RyYXdhYmxlSWRzID0gbmV3IGNzbVZlY3RvcjxDdWJpc21JZEhhbmRsZT4oKTtcbiAgICB0aGlzLl9wYXJ0SWRzID0gbmV3IGNzbVZlY3RvcjxDdWJpc21JZEhhbmRsZT4oKTtcblxuICAgIHRoaXMuX25vdEV4aXN0UGFydElkID0gbmV3IGNzbU1hcDxDdWJpc21JZEhhbmRsZSwgbnVtYmVyPigpO1xuICAgIHRoaXMuX25vdEV4aXN0UGFyYW1ldGVySWQgPSBuZXcgY3NtTWFwPEN1YmlzbUlkSGFuZGxlLCBudW1iZXI+KCk7XG4gICAgdGhpcy5fbm90RXhpc3RQYXJhbWV0ZXJWYWx1ZXMgPSBuZXcgY3NtTWFwPG51bWJlciwgbnVtYmVyPigpO1xuICAgIHRoaXMuX25vdEV4aXN0UGFydE9wYWNpdGllcyA9IG5ldyBjc21NYXA8bnVtYmVyLCBudW1iZXI+KCk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5yZWxlYXNlKCk7XG4gICAgdGhpcy5fbW9kZWwgPSBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBfbm90RXhpc3RQYXJ0T3BhY2l0aWVzOiBjc21NYXA8bnVtYmVyLCBudW1iZXI+OyAvLyDpnZ7njrDmnInpg6jku7bnmoTkuI3pgI/mmI7luqbliJfooahcbiAgcHJpdmF0ZSBfbm90RXhpc3RQYXJ0SWQ6IGNzbU1hcDxDdWJpc21JZEhhbmRsZSwgbnVtYmVyPjsgLy8g5a2Y5Zyo44GX44Gm44GE44Gq44GE44OR44O844OESUTjga7jg6rjgrnjg4hcblxuICBwcml2YXRlIF9ub3RFeGlzdFBhcmFtZXRlclZhbHVlczogY3NtTWFwPG51bWJlciwgbnVtYmVyPjsgLy8g57y65aSx5Y+C5pWw5YC855qE5YiX6KGoXG4gIHByaXZhdGUgX25vdEV4aXN0UGFyYW1ldGVySWQ6IGNzbU1hcDxDdWJpc21JZEhhbmRsZSwgbnVtYmVyPjsgLy8g57y65bCR5Y+C5pWwaWTliJfooahcblxuICBwcml2YXRlIF9zYXZlZFBhcmFtZXRlcnM6IGNzbVZlY3RvcjxudW1iZXI+OyAvLyDkv53lrZjjgZXjgozjgZ/jg5Hjg6njg6Hjg7zjgr9cblxuICBwcml2YXRlIF9tb2RlbDogTGl2ZTJEQ3ViaXNtQ29yZS5Nb2RlbDsgLy8g44Oi44OH44OrXG5cbiAgcHJpdmF0ZSBfcGFyYW1ldGVyVmFsdWVzOiBGbG9hdDMyQXJyYXk7IC8vIOODkeODqeODoeODvOOCv+OBruWApOOBruODquOCueODiFxuICBwcml2YXRlIF9wYXJhbWV0ZXJNYXhpbXVtVmFsdWVzOiBGbG9hdDMyQXJyYXk7IC8vIOODkeODqeODoeODvOOCv+OBruacgOWkp+WApOOBruODquOCueODiFxuICBwcml2YXRlIF9wYXJhbWV0ZXJNaW5pbXVtVmFsdWVzOiBGbG9hdDMyQXJyYXk7IC8vIOODkeODqeODoeODvOOCv+OBruacgOWwj+WApOOBruODquOCueODiFxuXG4gIHByaXZhdGUgX3BhcnRPcGFjaXRpZXM6IEZsb2F0MzJBcnJheTsgLy8g44OR44O844OE44Gu5LiN6YCP5piO5bqm44Gu44Oq44K544OIXG5cbiAgcHJpdmF0ZSBfcGFyYW1ldGVySWRzOiBjc21WZWN0b3I8Q3ViaXNtSWRIYW5kbGU+O1xuICBwcml2YXRlIF9wYXJ0SWRzOiBjc21WZWN0b3I8Q3ViaXNtSWRIYW5kbGU+O1xuICBwcml2YXRlIF9kcmF3YWJsZUlkczogY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPjtcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtbW9kZWwnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vZGVsID0gJC5DdWJpc21Nb2RlbDtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW9kZWwgPSAkLkN1YmlzbU1vZGVsO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBMHVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFydkJBO0FBRUE7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFPQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBT0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBR0E7QUFFQTtBQUlBO0FBUUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUdBO0FBRUE7QUFHQTtBQUVBO0FBT0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUdBO0FBQ0E7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUdBO0FBT0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFFQTtBQUdBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFHQTtBQUNBO0FBR0E7QUFXQTtBQUdBO0FBQ0E7QUFHQTtBQVdBO0FBR0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQTBCQTtBQUNBO0FBQ0E7QUFDQTtBQXFCQTtBQUFBO0FBdHhCQTtBQXl4QkE7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/model/cubismmodel.ts\n");

/***/ }),

/***/ "./Framework/src/model/cubismmodeluserdata.ts":
/*!****************************************************!*\
  !*** ./Framework/src/model/cubismmodeluserdata.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismModelUserData = exports.CubismModelUserDataNode = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar csmstring_1 = __webpack_require__(/*! ../type/csmstring */ \"./Framework/src/type/csmstring.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismmodeluserdatajson_1 = __webpack_require__(/*! ./cubismmodeluserdatajson */ \"./Framework/src/model/cubismmodeluserdatajson.ts\");\nvar ArtMesh = 'ArtMesh';\nvar CubismModelUserDataNode = (function () {\n    function CubismModelUserDataNode() {\n    }\n    return CubismModelUserDataNode;\n}());\nexports.CubismModelUserDataNode = CubismModelUserDataNode;\nvar CubismModelUserData = (function () {\n    function CubismModelUserData() {\n        this._userDataNodes = new csmvector_1.csmVector();\n        this._artMeshUserDataNode = new csmvector_1.csmVector();\n    }\n    CubismModelUserData.create = function (buffer, size) {\n        var ret = new CubismModelUserData();\n        ret.parseUserData(buffer, size);\n        return ret;\n    };\n    CubismModelUserData.delete = function (modelUserData) {\n        if (modelUserData != null) {\n            modelUserData.release();\n            modelUserData = null;\n        }\n    };\n    CubismModelUserData.prototype.getArtMeshUserDatas = function () {\n        return this._artMeshUserDataNode;\n    };\n    CubismModelUserData.prototype.parseUserData = function (buffer, size) {\n        var json = new cubismmodeluserdatajson_1.CubismModelUserDataJson(buffer, size);\n        var typeOfArtMesh = live2dcubismframework_1.CubismFramework.getIdManager().getId(ArtMesh);\n        var nodeCount = json.getUserDataCount();\n        for (var i = 0; i < nodeCount; i++) {\n            var addNode = new CubismModelUserDataNode();\n            addNode.targetId = json.getUserDataId(i);\n            addNode.targetType = live2dcubismframework_1.CubismFramework.getIdManager().getId(json.getUserDataTargetType(i));\n            addNode.value = new csmstring_1.csmString(json.getUserDataValue(i));\n            this._userDataNodes.pushBack(addNode);\n            if (addNode.targetType == typeOfArtMesh) {\n                this._artMeshUserDataNode.pushBack(addNode);\n            }\n        }\n        json.release();\n        json = void 0;\n    };\n    CubismModelUserData.prototype.release = function () {\n        for (var i = 0; i < this._userDataNodes.getSize(); ++i) {\n            this._userDataNodes.set(i, null);\n        }\n        this._userDataNodes = null;\n    };\n    return CubismModelUserData;\n}());\nexports.CubismModelUserData = CubismModelUserData;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmodeluserdata */ \"./Framework/src/model/cubismmodeluserdata.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelUserData = $.CubismModelUserData;\n    Live2DCubismFramework.CubismModelUserDataNode = $.CubismModelUserDataNode;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vZGVsL2N1YmlzbW1vZGVsdXNlcmRhdGEudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL21vZGVsL2N1YmlzbW1vZGVsdXNlcmRhdGEudHM/OTU1MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBDdWJpc21JZEhhbmRsZSB9IGZyb20gJy4uL2lkL2N1YmlzbWlkJztcbmltcG9ydCB7IEN1YmlzbUZyYW1ld29yayB9IGZyb20gJy4uL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgeyBjc21TdHJpbmcgfSBmcm9tICcuLi90eXBlL2NzbXN0cmluZyc7XG5pbXBvcnQgeyBjc21WZWN0b3IgfSBmcm9tICcuLi90eXBlL2NzbXZlY3Rvcic7XG5pbXBvcnQgeyBDdWJpc21Nb2RlbFVzZXJEYXRhSnNvbiB9IGZyb20gJy4vY3ViaXNtbW9kZWx1c2VyZGF0YWpzb24nO1xuXG5jb25zdCBBcnRNZXNoID0gJ0FydE1lc2gnO1xuXG4vKipcbiAqIOODpuODvOOCtuODvOODh+ODvOOCv+OCpOODs+OCv+ODvOODleOCp+ODvOOCuVxuICpcbiAqIEpzb27jgYvjgonoqq3jgb/ovrzjgpPjgaDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jgpLoqJjpjLLjgZfjgabjgYrjgY/jgZ/jgoHjga7mp4vpgKDkvZNcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vZGVsVXNlckRhdGFOb2RlIHtcbiAgdGFyZ2V0VHlwZTogQ3ViaXNtSWRIYW5kbGU7IC8vIOODpuODvOOCtuODvOODh+ODvOOCv+OCv+ODvOOCsuODg+ODiOOCv+OCpOODl1xuICB0YXJnZXRJZDogQ3ViaXNtSWRIYW5kbGU7IC8vIOODpuODvOOCtuODvOODh+ODvOOCv+OCv+ODvOOCsuODg+ODiOOBrklEXG4gIHZhbHVlOiBjc21TdHJpbmc7IC8vIOODpuODvOOCtuODvOODh+ODvOOCv1xufVxuXG4vKipcbiAqIOODpuODvOOCtuODh+ODvOOCv+OBrueuoeeQhuOCr+ODqeOCuVxuICpcbiAqIOODpuODvOOCtuODh+ODvOOCv+OCkuODreODvOODieOAgeeuoeeQhuOAgeaknOe0ouOCpOODs+OCv+ODvOODleOCp+OCpOOCueOAgeino+aUvuOBvuOBp+OCkuihjOOBhuOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTW9kZWxVc2VyRGF0YSB7XG4gIC8qKlxuICAgKiDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7kvZzmiJBcbiAgICpcbiAgICogQHBhcmFtIGJ1ZmZlciAgICB1c2VyZGF0YTMuanNvbuOBjOiqreOBv+i+vOOBvuOCjOOBpuOBhOOCi+ODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gc2l6ZSAgICAgIOODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKiBAcmV0dXJuIOS9nOaIkOOBleOCjOOBn+OCpOODs+OCueOCv+ODs+OCuVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoYnVmZmVyOiBBcnJheUJ1ZmZlciwgc2l6ZTogbnVtYmVyKTogQ3ViaXNtTW9kZWxVc2VyRGF0YSB7XG4gICAgY29uc3QgcmV0OiBDdWJpc21Nb2RlbFVzZXJEYXRhID0gbmV3IEN1YmlzbU1vZGVsVXNlckRhdGEoKTtcblxuICAgIHJldC5wYXJzZVVzZXJEYXRhKGJ1ZmZlciwgc2l6ZSk7XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkuegtOajhOOBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0gbW9kZWxVc2VyRGF0YSDnoLTmo4TjgZnjgovjgqTjg7Pjgrnjgr/jg7PjgrlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlKG1vZGVsVXNlckRhdGE6IEN1YmlzbU1vZGVsVXNlckRhdGEpOiB2b2lkIHtcbiAgICBpZiAobW9kZWxVc2VyRGF0YSAhPSBudWxsKSB7XG4gICAgICBtb2RlbFVzZXJEYXRhLnJlbGVhc2UoKTtcbiAgICAgIG1vZGVsVXNlckRhdGEgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcnRNZXNo44Gu44Om44O844K244O844OH44O844K/44Gu44Oq44K544OI44Gu5Y+W5b6XXG4gICAqXG4gICAqIEByZXR1cm4g44Om44O844K244O844OH44O844K/44Oq44K544OIXG4gICAqL1xuICBwdWJsaWMgZ2V0QXJ0TWVzaFVzZXJEYXRhcygpOiBjc21WZWN0b3I8Q3ViaXNtTW9kZWxVc2VyRGF0YU5vZGU+IHtcbiAgICByZXR1cm4gdGhpcy5fYXJ0TWVzaFVzZXJEYXRhTm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiB1c2VyZGF0YTMuanNvbuOBruODkeODvOOCuVxuICAgKlxuICAgKiBAcGFyYW0gYnVmZmVyICAgIHVzZXJkYXRhMy5qc29u44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplICAgICAg44OQ44OD44OV44Kh44Gu44K144Kk44K6XG4gICAqL1xuICBwdWJsaWMgcGFyc2VVc2VyRGF0YShidWZmZXI6IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQganNvbjogQ3ViaXNtTW9kZWxVc2VyRGF0YUpzb24gPSBuZXcgQ3ViaXNtTW9kZWxVc2VyRGF0YUpzb24oXG4gICAgICBidWZmZXIsXG4gICAgICBzaXplXG4gICAgKTtcblxuICAgIGNvbnN0IHR5cGVPZkFydE1lc2ggPSBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoQXJ0TWVzaCk7XG4gICAgY29uc3Qgbm9kZUNvdW50OiBudW1iZXIgPSBqc29uLmdldFVzZXJEYXRhQ291bnQoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IGFkZE5vZGU6IEN1YmlzbU1vZGVsVXNlckRhdGFOb2RlID0gbmV3IEN1YmlzbU1vZGVsVXNlckRhdGFOb2RlKCk7XG5cbiAgICAgIGFkZE5vZGUudGFyZ2V0SWQgPSBqc29uLmdldFVzZXJEYXRhSWQoaSk7XG4gICAgICBhZGROb2RlLnRhcmdldFR5cGUgPSBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoXG4gICAgICAgIGpzb24uZ2V0VXNlckRhdGFUYXJnZXRUeXBlKGkpXG4gICAgICApO1xuICAgICAgYWRkTm9kZS52YWx1ZSA9IG5ldyBjc21TdHJpbmcoanNvbi5nZXRVc2VyRGF0YVZhbHVlKGkpKTtcbiAgICAgIHRoaXMuX3VzZXJEYXRhTm9kZXMucHVzaEJhY2soYWRkTm9kZSk7XG5cbiAgICAgIGlmIChhZGROb2RlLnRhcmdldFR5cGUgPT0gdHlwZU9mQXJ0TWVzaCkge1xuICAgICAgICB0aGlzLl9hcnRNZXNoVXNlckRhdGFOb2RlLnB1c2hCYWNrKGFkZE5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGpzb24ucmVsZWFzZSgpO1xuICAgIGpzb24gPSB2b2lkIDA7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fdXNlckRhdGFOb2RlcyA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtTW9kZWxVc2VyRGF0YU5vZGU+KCk7XG4gICAgdGhpcy5fYXJ0TWVzaFVzZXJEYXRhTm9kZSA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtTW9kZWxVc2VyRGF0YU5vZGU+KCk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqXG4gICAqIOODpuODvOOCtuODvOODh+ODvOOCv+ani+mAoOS9k+mFjeWIl+OCkuino+aUvuOBmeOCi1xuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl91c2VyRGF0YU5vZGVzLmdldFNpemUoKTsgKytpKSB7XG4gICAgICB0aGlzLl91c2VyRGF0YU5vZGVzLnNldChpLCBudWxsKTtcbiAgICB9XG5cbiAgICB0aGlzLl91c2VyRGF0YU5vZGVzID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgX3VzZXJEYXRhTm9kZXM6IGNzbVZlY3RvcjxDdWJpc21Nb2RlbFVzZXJEYXRhTm9kZT47IC8vIOODpuODvOOCtuODvOODh+ODvOOCv+ani+mAoOS9k+mFjeWIl1xuICBwcml2YXRlIF9hcnRNZXNoVXNlckRhdGFOb2RlOiBjc21WZWN0b3I8Q3ViaXNtTW9kZWxVc2VyRGF0YU5vZGU+OyAvLyDplrLopqfjg6rjgrnjg4jjga7kv53mjIFcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtbW9kZWx1c2VyZGF0YSc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgQ3ViaXNtTW9kZWxVc2VyRGF0YSA9ICQuQ3ViaXNtTW9kZWxVc2VyRGF0YTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW9kZWxVc2VyRGF0YSA9ICQuQ3ViaXNtTW9kZWxVc2VyRGF0YTtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vZGVsVXNlckRhdGFOb2RlID0gJC5DdWJpc21Nb2RlbFVzZXJEYXRhTm9kZTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW9kZWxVc2VyRGF0YU5vZGUgPSAkLkN1YmlzbU1vZGVsVXNlckRhdGFOb2RlO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFKQTtBQVdBO0FBMEVBO0FBQ0E7QUFDQTtBQUNBO0FBckVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFBQTtBQTlGQTtBQWlHQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Framework/src/model/cubismmodeluserdata.ts\n");

/***/ }),

/***/ "./Framework/src/model/cubismmodeluserdatajson.ts":
/*!********************************************************!*\
  !*** ./Framework/src/model/cubismmodeluserdatajson.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismModelUserDataJson = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ../utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nvar Meta = 'Meta';\nvar UserDataCount = 'UserDataCount';\nvar TotalUserDataSize = 'TotalUserDataSize';\nvar UserData = 'UserData';\nvar Target = 'Target';\nvar Id = 'Id';\nvar Value = 'Value';\nvar CubismModelUserDataJson = (function () {\n    function CubismModelUserDataJson(buffer, size) {\n        this._json = cubismjson_1.CubismJson.create(buffer, size);\n    }\n    CubismModelUserDataJson.prototype.release = function () {\n        cubismjson_1.CubismJson.delete(this._json);\n    };\n    CubismModelUserDataJson.prototype.getUserDataCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(UserDataCount)\n            .toInt();\n    };\n    CubismModelUserDataJson.prototype.getTotalUserDataSize = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalUserDataSize)\n            .toInt();\n    };\n    CubismModelUserDataJson.prototype.getUserDataTargetType = function (i) {\n        return this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(i)\n            .getValueByString(Target)\n            .getRawString();\n    };\n    CubismModelUserDataJson.prototype.getUserDataId = function (i) {\n        return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(i)\n            .getValueByString(Id)\n            .getRawString());\n    };\n    CubismModelUserDataJson.prototype.getUserDataValue = function (i) {\n        return this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(i)\n            .getValueByString(Value)\n            .getRawString();\n    };\n    return CubismModelUserDataJson;\n}());\nexports.CubismModelUserDataJson = CubismModelUserDataJson;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmodeluserdatajson */ \"./Framework/src/model/cubismmodeluserdatajson.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismModelUserDataJson = $.CubismModelUserDataJson;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vZGVsL2N1YmlzbW1vZGVsdXNlcmRhdGFqc29uLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb2RlbC9jdWJpc21tb2RlbHVzZXJkYXRhanNvbi50cz82MWE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgQ3ViaXNtRnJhbWV3b3JrIH0gZnJvbSAnLi4vbGl2ZTJkY3ViaXNtZnJhbWV3b3JrJztcbmltcG9ydCB7IEN1YmlzbUpzb24gfSBmcm9tICcuLi91dGlscy9jdWJpc21qc29uJztcblxuY29uc3QgTWV0YSA9ICdNZXRhJztcbmNvbnN0IFVzZXJEYXRhQ291bnQgPSAnVXNlckRhdGFDb3VudCc7XG5jb25zdCBUb3RhbFVzZXJEYXRhU2l6ZSA9ICdUb3RhbFVzZXJEYXRhU2l6ZSc7XG5jb25zdCBVc2VyRGF0YSA9ICdVc2VyRGF0YSc7XG5jb25zdCBUYXJnZXQgPSAnVGFyZ2V0JztcbmNvbnN0IElkID0gJ0lkJztcbmNvbnN0IFZhbHVlID0gJ1ZhbHVlJztcblxuZXhwb3J0IGNsYXNzIEN1YmlzbU1vZGVsVXNlckRhdGFKc29uIHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKiBAcGFyYW0gYnVmZmVyICAgIHVzZXJkYXRhMy5qc29u44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplICAgICAg44OQ44OD44OV44Kh44Gu44K144Kk44K6XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoYnVmZmVyOiBBcnJheUJ1ZmZlciwgc2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fanNvbiA9IEN1YmlzbUpzb24uY3JlYXRlKGJ1ZmZlciwgc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBDdWJpc21Kc29uLmRlbGV0ZSh0aGlzLl9qc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/lgIvmlbDjga7lj5blvpdcbiAgICogQHJldHVybiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7lgIvmlbBcbiAgICovXG4gIHB1YmxpYyBnZXRVc2VyRGF0YUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhVc2VyRGF0YUNvdW50KVxuICAgICAgLnRvSW50KCk7XG4gIH1cblxuICAvKipcbiAgICog44Om44O844K244O844OH44O844K/57eP5paH5a2X5YiX5pWw44Gu5Y+W5b6XXG4gICAqXG4gICAqIEByZXR1cm4g44Om44O844K244O844OH44O844K/57eP5paH5a2X5YiX5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0VG90YWxVc2VyRGF0YVNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWV0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFRvdGFsVXNlckRhdGFTaXplKVxuICAgICAgLnRvSW50KCk7XG4gIH1cblxuICAvKipcbiAgICog44Om44O844K244O844OH44O844K/44Gu44K/44Kk44OX44Gu5Y+W5b6XXG4gICAqXG4gICAqIEByZXR1cm4g44Om44O844K244O844OH44O844K/44Gu44K/44Kk44OXXG4gICAqL1xuICBwdWJsaWMgZ2V0VXNlckRhdGFUYXJnZXRUeXBlKGk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFVzZXJEYXRhKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVGFyZ2V0KVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODpuODvOOCtuODvOODh+ODvOOCv+OBruOCv+ODvOOCsuODg+ODiElE44Gu5Y+W5b6XXG4gICAqXG4gICAqIEBwYXJhbSBpIOOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOODpuODvOOCtuODvOODh+ODvOOCv+OCv+ODvOOCsuODg+ODiElEXG4gICAqL1xuICBwdWJsaWMgZ2V0VXNlckRhdGFJZChpOiBudW1iZXIpOiBDdWJpc21JZEhhbmRsZSB7XG4gICAgcmV0dXJuIEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgIHRoaXMuX2pzb25cbiAgICAgICAgLmdldFJvb3QoKVxuICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhVc2VyRGF0YSlcbiAgICAgICAgLmdldFZhbHVlQnlJbmRleChpKVxuICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhJZClcbiAgICAgICAgLmdldFJhd1N0cmluZygpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7mloflrZfliJfjga7lj5blvpdcbiAgICpcbiAgICogQHBhcmFtIGkg44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g44Om44O844K244O844OH44O844K/XG4gICAqL1xuICBwdWJsaWMgZ2V0VXNlckRhdGFWYWx1ZShpOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhVc2VyRGF0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoaSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFZhbHVlKVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfanNvbjogQ3ViaXNtSnNvbjtcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtbW9kZWx1c2VyZGF0YWpzb24nO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vZGVsVXNlckRhdGFKc29uID0gJC5DdWJpc21Nb2RlbFVzZXJEYXRhSnNvbjtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW9kZWxVc2VyRGF0YUpzb24gPSAkLkN1YmlzbU1vZGVsVXNlckRhdGFKc29uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQXpGQTtBQTRGQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/model/cubismmodeluserdatajson.ts\n");

/***/ }),

/***/ "./Framework/src/model/cubismusermodel.ts":
/*!************************************************!*\
  !*** ./Framework/src/model/cubismusermodel.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismUserModel = void 0;\nvar cubismbreath_1 = __webpack_require__(/*! ../effect/cubismbreath */ \"./Framework/src/effect/cubismbreath.ts\");\nvar cubismeyeblink_1 = __webpack_require__(/*! ../effect/cubismeyeblink */ \"./Framework/src/effect/cubismeyeblink.ts\");\nvar cubismpose_1 = __webpack_require__(/*! ../effect/cubismpose */ \"./Framework/src/effect/cubismpose.ts\");\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismmodelmatrix_1 = __webpack_require__(/*! ../math/cubismmodelmatrix */ \"./Framework/src/math/cubismmodelmatrix.ts\");\nvar cubismtargetpoint_1 = __webpack_require__(/*! ../math/cubismtargetpoint */ \"./Framework/src/math/cubismtargetpoint.ts\");\nvar cubismexpressionmotion_1 = __webpack_require__(/*! ../motion/cubismexpressionmotion */ \"./Framework/src/motion/cubismexpressionmotion.ts\");\nvar cubismmotion_1 = __webpack_require__(/*! ../motion/cubismmotion */ \"./Framework/src/motion/cubismmotion.ts\");\nvar cubismmotionmanager_1 = __webpack_require__(/*! ../motion/cubismmotionmanager */ \"./Framework/src/motion/cubismmotionmanager.ts\");\nvar cubismphysics_1 = __webpack_require__(/*! ../physics/cubismphysics */ \"./Framework/src/physics/cubismphysics.ts\");\nvar cubismrenderer_webgl_1 = __webpack_require__(/*! ../rendering/cubismrenderer_webgl */ \"./Framework/src/rendering/cubismrenderer_webgl.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar cubismmoc_1 = __webpack_require__(/*! ./cubismmoc */ \"./Framework/src/model/cubismmoc.ts\");\nvar cubismmodeluserdata_1 = __webpack_require__(/*! ./cubismmodeluserdata */ \"./Framework/src/model/cubismmodeluserdata.ts\");\nvar CubismUserModel = (function () {\n    function CubismUserModel() {\n        this.loadMotion = function (buffer, size, name, onFinishedMotionHandler) { return cubismmotion_1.CubismMotion.create(buffer, size, onFinishedMotionHandler); };\n        this._moc = null;\n        this._model = null;\n        this._motionManager = null;\n        this._expressionManager = null;\n        this._eyeBlink = null;\n        this._breath = null;\n        this._modelMatrix = null;\n        this._pose = null;\n        this._dragManager = null;\n        this._physics = null;\n        this._modelUserData = null;\n        this._initialized = false;\n        this._updating = false;\n        this._opacity = 1.0;\n        this._lipsync = true;\n        this._lastLipSyncValue = 0.0;\n        this._dragX = 0.0;\n        this._dragY = 0.0;\n        this._accelerationX = 0.0;\n        this._accelerationY = 0.0;\n        this._accelerationZ = 0.0;\n        this._debugMode = false;\n        this._renderer = null;\n        this._motionManager = new cubismmotionmanager_1.CubismMotionManager();\n        this._motionManager.setEventCallback(CubismUserModel.cubismDefaultMotionEventCallback, this);\n        this._expressionManager = new cubismmotionmanager_1.CubismMotionManager();\n        this._dragManager = new cubismtargetpoint_1.CubismTargetPoint();\n    }\n    CubismUserModel.prototype.isInitialized = function () {\n        return this._initialized;\n    };\n    CubismUserModel.prototype.setInitialized = function (v) {\n        this._initialized = v;\n    };\n    CubismUserModel.prototype.isUpdating = function () {\n        return this._updating;\n    };\n    CubismUserModel.prototype.setUpdating = function (v) {\n        this._updating = v;\n    };\n    CubismUserModel.prototype.setDragging = function (x, y) {\n        this._dragManager.set(x, y);\n    };\n    CubismUserModel.prototype.setAcceleration = function (x, y, z) {\n        this._accelerationX = x;\n        this._accelerationY = y;\n        this._accelerationZ = z;\n    };\n    CubismUserModel.prototype.getModelMatrix = function () {\n        return this._modelMatrix;\n    };\n    CubismUserModel.prototype.setOpacity = function (a) {\n        this._opacity = a;\n    };\n    CubismUserModel.prototype.getOpacity = function () {\n        return this._opacity;\n    };\n    CubismUserModel.prototype.loadModel = function (buffer) {\n        this._moc = cubismmoc_1.CubismMoc.create(buffer);\n        this._model = this._moc.createModel();\n        this._model.saveParameters();\n        if (this._moc == null || this._model == null) {\n            cubismdebug_1.CubismLogError('Failed to CreateModel().');\n            return;\n        }\n        this._modelMatrix = new cubismmodelmatrix_1.CubismModelMatrix(this._model.getCanvasWidth(), this._model.getCanvasHeight());\n    };\n    CubismUserModel.prototype.loadExpression = function (buffer, size, name) {\n        return cubismexpressionmotion_1.CubismExpressionMotion.create(buffer, size);\n    };\n    CubismUserModel.prototype.loadPose = function (buffer, size) {\n        this._pose = cubismpose_1.CubismPose.create(buffer, size);\n    };\n    CubismUserModel.prototype.loadUserData = function (buffer, size) {\n        this._modelUserData = cubismmodeluserdata_1.CubismModelUserData.create(buffer, size);\n    };\n    CubismUserModel.prototype.loadPhysics = function (buffer, size) {\n        this._physics = cubismphysics_1.CubismPhysics.create(buffer, size);\n    };\n    CubismUserModel.prototype.isHit = function (drawableId, pointX, pointY) {\n        var drawIndex = this._model.getDrawableIndex(drawableId);\n        if (drawIndex < 0) {\n            return false;\n        }\n        var count = this._model.getDrawableVertexCount(drawIndex);\n        var vertices = this._model.getDrawableVertices(drawIndex);\n        var left = vertices[0];\n        var right = vertices[0];\n        var top = vertices[1];\n        var bottom = vertices[1];\n        for (var j = 1; j < count; ++j) {\n            var x = vertices[live2dcubismframework_1.Constant.vertexOffset + j * live2dcubismframework_1.Constant.vertexStep];\n            var y = vertices[live2dcubismframework_1.Constant.vertexOffset + j * live2dcubismframework_1.Constant.vertexStep + 1];\n            if (x < left) {\n                left = x;\n            }\n            if (x > right) {\n                right = x;\n            }\n            if (y < top) {\n                top = y;\n            }\n            if (y > bottom) {\n                bottom = y;\n            }\n        }\n        var tx = this._modelMatrix.invertTransformX(pointX);\n        var ty = this._modelMatrix.invertTransformY(pointY);\n        return left <= tx && tx <= right && top <= ty && ty <= bottom;\n    };\n    CubismUserModel.prototype.getModel = function () {\n        return this._model;\n    };\n    CubismUserModel.prototype.getRenderer = function () {\n        return this._renderer;\n    };\n    CubismUserModel.prototype.createRenderer = function () {\n        if (this._renderer) {\n            this.deleteRenderer();\n        }\n        this._renderer = new cubismrenderer_webgl_1.CubismRenderer_WebGL();\n        this._renderer.initialize(this._model);\n    };\n    CubismUserModel.prototype.deleteRenderer = function () {\n        if (this._renderer != null) {\n            this._renderer.release();\n            this._renderer = null;\n        }\n    };\n    CubismUserModel.prototype.motionEventFired = function (eventValue) {\n        cubismdebug_1.CubismLogInfo('{0}', eventValue.s);\n    };\n    CubismUserModel.cubismDefaultMotionEventCallback = function (caller, eventValue, customData) {\n        var model = customData;\n        if (model != null) {\n            model.motionEventFired(eventValue);\n        }\n    };\n    CubismUserModel.prototype.release = function () {\n        if (this._motionManager != null) {\n            this._motionManager.release();\n            this._motionManager = null;\n        }\n        if (this._expressionManager != null) {\n            this._expressionManager.release();\n            this._expressionManager = null;\n        }\n        if (this._moc != null) {\n            this._moc.deleteModel(this._model);\n            this._moc.release();\n            this._moc = null;\n        }\n        this._modelMatrix = null;\n        cubismpose_1.CubismPose.delete(this._pose);\n        cubismeyeblink_1.CubismEyeBlink.delete(this._eyeBlink);\n        cubismbreath_1.CubismBreath.delete(this._breath);\n        this._dragManager = null;\n        cubismphysics_1.CubismPhysics.delete(this._physics);\n        cubismmodeluserdata_1.CubismModelUserData.delete(this._modelUserData);\n        this.deleteRenderer();\n    };\n    return CubismUserModel;\n}());\nexports.CubismUserModel = CubismUserModel;\nvar $ = __importStar(__webpack_require__(/*! ./cubismusermodel */ \"./Framework/src/model/cubismusermodel.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismUserModel = $.CubismUserModel;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vZGVsL2N1YmlzbXVzZXJtb2RlbC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbW9kZWwvY3ViaXNtdXNlcm1vZGVsLnRzPzIwOWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtQnJlYXRoIH0gZnJvbSAnLi4vZWZmZWN0L2N1YmlzbWJyZWF0aCc7XG5pbXBvcnQgeyBDdWJpc21FeWVCbGluayB9IGZyb20gJy4uL2VmZmVjdC9jdWJpc21leWVibGluayc7XG5pbXBvcnQgeyBDdWJpc21Qb3NlIH0gZnJvbSAnLi4vZWZmZWN0L2N1YmlzbXBvc2UnO1xuaW1wb3J0IHsgQ3ViaXNtSWRIYW5kbGUgfSBmcm9tICcuLi9pZC9jdWJpc21pZCc7XG5pbXBvcnQgeyBDb25zdGFudCB9IGZyb20gJy4uL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgeyBDdWJpc21Nb2RlbE1hdHJpeCB9IGZyb20gJy4uL21hdGgvY3ViaXNtbW9kZWxtYXRyaXgnO1xuaW1wb3J0IHsgQ3ViaXNtVGFyZ2V0UG9pbnQgfSBmcm9tICcuLi9tYXRoL2N1YmlzbXRhcmdldHBvaW50JztcbmltcG9ydCB7IEFDdWJpc21Nb3Rpb24sIEZpbmlzaGVkTW90aW9uQ2FsbGJhY2sgfSBmcm9tICcuLi9tb3Rpb24vYWN1YmlzbW1vdGlvbic7XG5pbXBvcnQgeyBDdWJpc21FeHByZXNzaW9uTW90aW9uIH0gZnJvbSAnLi4vbW90aW9uL2N1YmlzbWV4cHJlc3Npb25tb3Rpb24nO1xuaW1wb3J0IHsgQ3ViaXNtTW90aW9uIH0gZnJvbSAnLi4vbW90aW9uL2N1YmlzbW1vdGlvbic7XG5pbXBvcnQgeyBDdWJpc21Nb3Rpb25NYW5hZ2VyIH0gZnJvbSAnLi4vbW90aW9uL2N1YmlzbW1vdGlvbm1hbmFnZXInO1xuaW1wb3J0IHsgQ3ViaXNtTW90aW9uUXVldWVNYW5hZ2VyIH0gZnJvbSAnLi4vbW90aW9uL2N1YmlzbW1vdGlvbnF1ZXVlbWFuYWdlcic7XG5pbXBvcnQgeyBDdWJpc21QaHlzaWNzIH0gZnJvbSAnLi4vcGh5c2ljcy9jdWJpc21waHlzaWNzJztcbmltcG9ydCB7IEN1YmlzbVJlbmRlcmVyX1dlYkdMIH0gZnJvbSAnLi4vcmVuZGVyaW5nL2N1YmlzbXJlbmRlcmVyX3dlYmdsJztcbmltcG9ydCB7IGNzbVN0cmluZyB9IGZyb20gJy4uL3R5cGUvY3Ntc3RyaW5nJztcbmltcG9ydCB7IEN1YmlzbUxvZ0Vycm9yLCBDdWJpc21Mb2dJbmZvIH0gZnJvbSAnLi4vdXRpbHMvY3ViaXNtZGVidWcnO1xuaW1wb3J0IHsgQ3ViaXNtTW9jIH0gZnJvbSAnLi9jdWJpc21tb2MnO1xuaW1wb3J0IHsgQ3ViaXNtTW9kZWwgfSBmcm9tICcuL2N1YmlzbW1vZGVsJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsVXNlckRhdGEgfSBmcm9tICcuL2N1YmlzbW1vZGVsdXNlcmRhdGEnO1xuXG4vKipcbiAqIOODpuODvOOCtuODvOOBjOWun+mam+OBq+S9v+eUqOOBmeOCi+ODouODh+ODq1xuICpcbiAqIOODpuODvOOCtuODvOOBjOWun+mam+OBq+S9v+eUqOOBmeOCi+ODouODh+ODq+OBruWfuuW6leOCr+ODqeOCueOAguOBk+OCjOOCkue2meaJv+OBl+OBpuODpuODvOOCtuODvOOBjOWun+ijheOBmeOCi+OAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtVXNlck1vZGVsIHtcbiAgLyoqXG4gICAqIOWIneacn+WMlueKtuaFi+OBruWPluW+l1xuICAgKlxuICAgKiDliJ3mnJ/ljJbjgZXjgozjgabjgYTjgovnirbmhYvjgYvvvJ9cbiAgICpcbiAgICogQHJldHVybiB0cnVlICAgICDliJ3mnJ/ljJbjgZXjgozjgabjgYTjgotcbiAgICogQHJldHVybiBmYWxzZSAgICDliJ3mnJ/ljJbjgZXjgozjgabjgYTjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXplZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3mnJ/ljJbnirbmhYvjga7oqK3lrppcbiAgICpcbiAgICog5Yid5pyf5YyW54q25oWL44KS6Kit5a6a44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSB2IOWIneacn+WMlueKtuaFi1xuICAgKi9cbiAgcHVibGljIHNldEluaXRpYWxpemVkKHY6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IHY7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw54q25oWL44Gu5Y+W5b6XXG4gICAqXG4gICAqIOabtOaWsOOBleOCjOOBpuOBhOOCi+eKtuaFi+OBi++8n1xuICAgKlxuICAgKiBAcmV0dXJuIHRydWUgICAgIOabtOaWsOOBleOCjOOBpuOBhOOCi1xuICAgKiBAcmV0dXJuIGZhbHNlICAgIOabtOaWsOOBleOCjOOBpuOBhOOBquOBhFxuICAgKi9cbiAgcHVibGljIGlzVXBkYXRpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3VwZGF0aW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOeKtuaFi+OBruioreWumlxuICAgKlxuICAgKiDmm7TmlrDnirbmhYvjgpLoqK3lrprjgZnjgotcbiAgICpcbiAgICogQHBhcmFtIHYg5pu05paw54q25oWLXG4gICAqL1xuICBwdWJsaWMgc2V0VXBkYXRpbmcodjogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0aW5nID0gdjtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg57jgqbjgrnjg4njg6njg4PjgrDmg4XloLHjga7oqK3lrppcbiAgICogQHBhcmFtIOODieODqeODg+OCsOOBl+OBpuOBhOOCi+OCq+ODvOOCveODq+OBrljkvY3nva5cbiAgICogQHBhcmFtIOODieODqeODg+OCsOOBl+OBpuOBhOOCi+OCq+ODvOOCveODq+OBrlnkvY3nva5cbiAgICovXG4gIHB1YmxpYyBzZXREcmFnZ2luZyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RyYWdNYW5hZ2VyLnNldCh4LCB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliqDpgJ/luqbjga7mg4XloLHjgpLoqK3lrprjgZnjgotcbiAgICogQHBhcmFtIHggWOi7uOaWueWQkeOBruWKoOmAn+W6plxuICAgKiBAcGFyYW0geSBZ6Lu45pa55ZCR44Gu5Yqg6YCf5bqmXG4gICAqIEBwYXJhbSB6IFrou7jmlrnlkJHjga7liqDpgJ/luqZcbiAgICovXG4gIHB1YmxpYyBzZXRBY2NlbGVyYXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2FjY2VsZXJhdGlvblggPSB4O1xuICAgIHRoaXMuX2FjY2VsZXJhdGlvblkgPSB5O1xuICAgIHRoaXMuX2FjY2VsZXJhdGlvblogPSB6O1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+ihjOWIl+OCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODouODh+ODq+ihjOWIl1xuICAgKi9cbiAgcHVibGljIGdldE1vZGVsTWF0cml4KCk6IEN1YmlzbU1vZGVsTWF0cml4IHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZWxNYXRyaXg7XG4gIH1cblxuICAvKipcbiAgICog5LiN6YCP5piO5bqm44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBhIOS4jemAj+aYjuW6plxuICAgKi9cbiAgcHVibGljIHNldE9wYWNpdHkoYTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fb3BhY2l0eSA9IGE7XG4gIH1cblxuICAvKipcbiAgICog5LiN6YCP5piO5bqm44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g5LiN6YCP5piO5bqmXG4gICAqL1xuICBwdWJsaWMgZ2V0T3BhY2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9vcGFjaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+ODh+ODvOOCv+OCkuiqreOBv+i+vOOCgFxuICAgKlxuICAgKiBAcGFyYW0gYnVmZmVyICAgIG1vYzPjg5XjgqHjgqTjg6vjgYzoqq3jgb/ovrzjgb7jgozjgabjgYTjgovjg5Djg4Pjg5XjgqFcbiAgICovXG4gIHB1YmxpYyBsb2FkTW9kZWwoYnVmZmVyOiBBcnJheUJ1ZmZlcikge1xuICAgIHRoaXMuX21vYyA9IEN1YmlzbU1vYy5jcmVhdGUoYnVmZmVyKTtcbiAgICB0aGlzLl9tb2RlbCA9IHRoaXMuX21vYy5jcmVhdGVNb2RlbCgpO1xuICAgIHRoaXMuX21vZGVsLnNhdmVQYXJhbWV0ZXJzKCk7XG5cbiAgICBpZiAodGhpcy5fbW9jID09IG51bGwgfHwgdGhpcy5fbW9kZWwgPT0gbnVsbCkge1xuICAgICAgQ3ViaXNtTG9nRXJyb3IoJ0ZhaWxlZCB0byBDcmVhdGVNb2RlbCgpLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX21vZGVsTWF0cml4ID0gbmV3IEN1YmlzbU1vZGVsTWF0cml4KFxuICAgICAgdGhpcy5fbW9kZWwuZ2V0Q2FudmFzV2lkdGgoKSxcbiAgICAgIHRoaXMuX21vZGVsLmdldENhbnZhc0hlaWdodCgpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjg4fjg7zjgr/jgpLoqq3jgb/ovrzjgoBcbiAgICogQHBhcmFtIGJ1ZmZlciBtb3Rpb24zLmpzb27jg5XjgqHjgqTjg6vjgYzoqq3jgb/ovrzjgb7jgozjgabjgYTjgovjg5Djg4Pjg5XjgqFcbiAgICogQHBhcmFtIHNpemUg44OQ44OD44OV44Kh44Gu44K144Kk44K6XG4gICAqIEBwYXJhbSBuYW1lIOODouODvOOCt+ODp+ODs+OBruWQjeWJjVxuICAgKiBAcGFyYW0gb25GaW5pc2hlZE1vdGlvbkhhbmRsZXIg44Oi44O844K344On44Oz5YaN55Sf57WC5LqG5pmC44Gr5ZG844Gz5Ye644GV44KM44KL44Kz44O844Or44OQ44OD44Kv6Zai5pWwXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Kv44Op44K5XG4gICAqL1xuICBwdWJsaWMgbG9hZE1vdGlvbiA9IChcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgIHNpemU6IG51bWJlcixcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgb25GaW5pc2hlZE1vdGlvbkhhbmRsZXI/OiBGaW5pc2hlZE1vdGlvbkNhbGxiYWNrXG4gICkgPT4gQ3ViaXNtTW90aW9uLmNyZWF0ZShidWZmZXIsIHNpemUsIG9uRmluaXNoZWRNb3Rpb25IYW5kbGVyKTtcblxuICAvKipcbiAgICog6KGo5oOF44OH44O844K/44Gu6Kqt44G/6L6844G/XG4gICAqIEBwYXJhbSBidWZmZXIgZXhw44OV44Kh44Kk44Or44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplIOODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKiBAcGFyYW0gbmFtZSDooajmg4Xjga7lkI3liY1cbiAgICovXG4gIHB1YmxpYyBsb2FkRXhwcmVzc2lvbihcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgIHNpemU6IG51bWJlcixcbiAgICBuYW1lOiBzdHJpbmdcbiAgKTogQUN1YmlzbU1vdGlvbiB7XG4gICAgcmV0dXJuIEN1YmlzbUV4cHJlc3Npb25Nb3Rpb24uY3JlYXRlKGJ1ZmZlciwgc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICog44Od44O844K644OH44O844K/44Gu6Kqt44G/6L6844G/XG4gICAqIEBwYXJhbSBidWZmZXIgcG9zZTMuanNvbuOBjOiqreOBv+i+vOOBvuOCjOOBpuOBhOOCi+ODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gc2l6ZSDjg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrpcbiAgICovXG4gIHB1YmxpYyBsb2FkUG9zZShidWZmZXI6IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9wb3NlID0gQ3ViaXNtUG9zZS5jcmVhdGUoYnVmZmVyLCBzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgavku5jlsZ7jgZnjgovjg6bjg7zjgrbjg7zjg4fjg7zjgr/jgpLoqq3jgb/ovrzjgoBcbiAgICogQHBhcmFtIGJ1ZmZlciB1c2VyZGF0YTMuanNvbuOBjOiqreOBv+i+vOOBvuOCjOOBpuOBhOOCi+ODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gc2l6ZSDjg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrpcbiAgICovXG4gIHB1YmxpYyBsb2FkVXNlckRhdGEoYnVmZmVyOiBBcnJheUJ1ZmZlciwgc2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWxVc2VyRGF0YSA9IEN1YmlzbU1vZGVsVXNlckRhdGEuY3JlYXRlKGJ1ZmZlciwgc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICog54mp55CG5ryU566X44OH44O844K/44Gu6Kqt44G/6L6844G/XG4gICAqIEBwYXJhbSBidWZmZXIgIHBoeXNpY3MzLmpzb27jgYzoqq3jgb/ovrzjgb7jgozjgabjgYTjgovjg5Djg4Pjg5XjgqFcbiAgICogQHBhcmFtIHNpemUgICAg44OQ44OD44OV44Kh44Gu44K144Kk44K6XG4gICAqL1xuICBwdWJsaWMgbG9hZFBoeXNpY3MoYnVmZmVyOiBBcnJheUJ1ZmZlciwgc2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcGh5c2ljcyA9IEN1YmlzbVBoeXNpY3MuY3JlYXRlKGJ1ZmZlciwgc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICog5b2T44Gf44KK5Yik5a6a44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBkcmF3YWJsZUlkIOaknOiovOOBl+OBn+OBhERyYXdhYmxl44GuSURcbiAgICogQHBhcmFtIHBvaW50WCBY5L2N572uXG4gICAqIEBwYXJhbSBwb2ludFkgWeS9jee9rlxuICAgKiBAcmV0dXJuIHRydWUg44OS44OD44OI44GX44Gm44GE44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44OS44OD44OI44GX44Gm44GE44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNIaXQoXG4gICAgZHJhd2FibGVJZDogQ3ViaXNtSWRIYW5kbGUsXG4gICAgcG9pbnRYOiBudW1iZXIsXG4gICAgcG9pbnRZOiBudW1iZXJcbiAgKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZHJhd0luZGV4OiBudW1iZXIgPSB0aGlzLl9tb2RlbC5nZXREcmF3YWJsZUluZGV4KGRyYXdhYmxlSWQpO1xuXG4gICAgaWYgKGRyYXdJbmRleCA8IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8g5a2Y5Zyo44GX44Gq44GE5aC05ZCI44GvZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBjb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWwuZ2V0RHJhd2FibGVWZXJ0ZXhDb3VudChkcmF3SW5kZXgpO1xuICAgIGNvbnN0IHZlcnRpY2VzOiBGbG9hdDMyQXJyYXkgPSB0aGlzLl9tb2RlbC5nZXREcmF3YWJsZVZlcnRpY2VzKGRyYXdJbmRleCk7XG5cbiAgICBsZXQgbGVmdDogbnVtYmVyID0gdmVydGljZXNbMF07XG4gICAgbGV0IHJpZ2h0OiBudW1iZXIgPSB2ZXJ0aWNlc1swXTtcbiAgICBsZXQgdG9wOiBudW1iZXIgPSB2ZXJ0aWNlc1sxXTtcbiAgICBsZXQgYm90dG9tOiBudW1iZXIgPSB2ZXJ0aWNlc1sxXTtcblxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY291bnQ7ICsraikge1xuICAgICAgY29uc3QgeCA9IHZlcnRpY2VzW0NvbnN0YW50LnZlcnRleE9mZnNldCArIGogKiBDb25zdGFudC52ZXJ0ZXhTdGVwXTtcbiAgICAgIGNvbnN0IHkgPSB2ZXJ0aWNlc1tDb25zdGFudC52ZXJ0ZXhPZmZzZXQgKyBqICogQ29uc3RhbnQudmVydGV4U3RlcCArIDFdO1xuXG4gICAgICBpZiAoeCA8IGxlZnQpIHtcbiAgICAgICAgbGVmdCA9IHg7IC8vIE1pbiB4XG4gICAgICB9XG5cbiAgICAgIGlmICh4ID4gcmlnaHQpIHtcbiAgICAgICAgcmlnaHQgPSB4OyAvLyBNYXggeFxuICAgICAgfVxuXG4gICAgICBpZiAoeSA8IHRvcCkge1xuICAgICAgICB0b3AgPSB5OyAvLyBNaW4geVxuICAgICAgfVxuXG4gICAgICBpZiAoeSA+IGJvdHRvbSkge1xuICAgICAgICBib3R0b20gPSB5OyAvLyBNYXggeVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHR4OiBudW1iZXIgPSB0aGlzLl9tb2RlbE1hdHJpeC5pbnZlcnRUcmFuc2Zvcm1YKHBvaW50WCk7XG4gICAgY29uc3QgdHk6IG51bWJlciA9IHRoaXMuX21vZGVsTWF0cml4LmludmVydFRyYW5zZm9ybVkocG9pbnRZKTtcblxuICAgIHJldHVybiBsZWZ0IDw9IHR4ICYmIHR4IDw9IHJpZ2h0ICYmIHRvcCA8PSB0eSAmJiB0eSA8PSBib3R0b207XG4gIH1cblxuICAvKipcbiAgICog44Oi44OH44Or44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44Oi44OH44OrXG4gICAqL1xuICBwdWJsaWMgZ2V0TW9kZWwoKTogQ3ViaXNtTW9kZWwge1xuICAgIHJldHVybiB0aGlzLl9tb2RlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6zjg7Pjg4Djg6njga7lj5blvpdcbiAgICogQHJldHVybiDjg6zjg7Pjg4Djg6lcbiAgICovXG4gIHB1YmxpYyBnZXRSZW5kZXJlcigpOiBDdWJpc21SZW5kZXJlcl9XZWJHTCB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIOODrOODs+ODgOODqeOCkuS9nOaIkOOBl+OBpuWIneacn+WMluOCkuWun+ihjOOBmeOCi1xuICAgKi9cbiAgcHVibGljIGNyZWF0ZVJlbmRlcmVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9yZW5kZXJlcikge1xuICAgICAgdGhpcy5kZWxldGVSZW5kZXJlcigpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlbmRlcmVyID0gbmV3IEN1YmlzbVJlbmRlcmVyX1dlYkdMKCk7XG4gICAgdGhpcy5fcmVuZGVyZXIuaW5pdGlhbGl6ZSh0aGlzLl9tb2RlbCk7XG4gIH1cblxuICAvKipcbiAgICog44Os44Oz44OA44Op44Gu6Kej5pS+XG4gICAqL1xuICBwdWJsaWMgZGVsZXRlUmVuZGVyZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3JlbmRlcmVyICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnJlbGVhc2UoKTtcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kk44OZ44Oz44OI55m654Gr5pmC44Gu5qiZ5rqW5Yem55CGXG4gICAqXG4gICAqIEV2ZW5044GM5YaN55Sf5Yem55CG5pmC44Gr44GC44Gj44Gf5aC05ZCI44Gu5Yem55CG44KS44GZ44KL44CCXG4gICAqIOe2meaJv+OBp+S4iuabuOOBjeOBmeOCi+OBk+OBqOOCkuaDs+WumuOBl+OBpuOBhOOCi+OAglxuICAgKiDkuIrmm7jjgY3jgZfjgarjgYTloLTlkIjjga/jg63jgrDlh7rlipvjgpLjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtIGV2ZW50VmFsdWUg55m654Gr44GX44Gf44Kk44OZ44Oz44OI44Gu5paH5a2X5YiX44OH44O844K/XG4gICAqL1xuICBwdWJsaWMgbW90aW9uRXZlbnRGaXJlZChldmVudFZhbHVlOiBjc21TdHJpbmcpOiB2b2lkIHtcbiAgICBDdWJpc21Mb2dJbmZvKCd7MH0nLCBldmVudFZhbHVlLnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODmeODs+ODiOeUqOOBruOCs+ODvOODq+ODkOODg+OCr1xuICAgKlxuICAgKiBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXLjgavjgqTjg5njg7Pjg4jnlKjjgavnmbvpjLLjgZnjgovjgZ/jgoHjga5DYWxsYmFja+OAglxuICAgKiBDdWJpc21Vc2VyTW9kZWzjga7ntpnmib/lhYjjga5FdmVudEZpcmVk44KS5ZG844G244CCXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsZXIg55m654Gr44GX44Gf44Kk44OZ44Oz44OI44KS566h55CG44GX44Gm44GE44Gf44Oi44O844K344On44Oz44Oe44ON44O844K444Oj44O844CB5q+U6LyD55SoXG4gICAqIEBwYXJhbSBldmVudFZhbHVlIOeZuueBq+OBl+OBn+OCpOODmeODs+ODiOOBruaWh+Wtl+WIl+ODh+ODvOOCv1xuICAgKiBAcGFyYW0gY3VzdG9tRGF0YSBDdWJpc21Vc2VyTW9kZWzjgpLntpnmib/jgZfjgZ/jgqTjg7Pjgrnjgr/jg7PjgrnjgpLmg7PlrppcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3ViaXNtRGVmYXVsdE1vdGlvbkV2ZW50Q2FsbGJhY2soXG4gICAgY2FsbGVyOiBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXIsXG4gICAgZXZlbnRWYWx1ZTogY3NtU3RyaW5nLFxuICAgIGN1c3RvbURhdGE6IEN1YmlzbVVzZXJNb2RlbFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBtb2RlbDogQ3ViaXNtVXNlck1vZGVsID0gY3VzdG9tRGF0YTtcblxuICAgIGlmIChtb2RlbCAhPSBudWxsKSB7XG4gICAgICBtb2RlbC5tb3Rpb25FdmVudEZpcmVkKGV2ZW50VmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyDlkITlpInmlbDliJ3mnJ/ljJZcbiAgICB0aGlzLl9tb2MgPSBudWxsO1xuICAgIHRoaXMuX21vZGVsID0gbnVsbDtcbiAgICB0aGlzLl9tb3Rpb25NYW5hZ2VyID0gbnVsbDtcbiAgICB0aGlzLl9leHByZXNzaW9uTWFuYWdlciA9IG51bGw7XG4gICAgdGhpcy5fZXllQmxpbmsgPSBudWxsO1xuICAgIHRoaXMuX2JyZWF0aCA9IG51bGw7XG4gICAgdGhpcy5fbW9kZWxNYXRyaXggPSBudWxsO1xuICAgIHRoaXMuX3Bvc2UgPSBudWxsO1xuICAgIHRoaXMuX2RyYWdNYW5hZ2VyID0gbnVsbDtcbiAgICB0aGlzLl9waHlzaWNzID0gbnVsbDtcbiAgICB0aGlzLl9tb2RlbFVzZXJEYXRhID0gbnVsbDtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHRoaXMuX3VwZGF0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fb3BhY2l0eSA9IDEuMDtcbiAgICB0aGlzLl9saXBzeW5jID0gdHJ1ZTtcbiAgICB0aGlzLl9sYXN0TGlwU3luY1ZhbHVlID0gMC4wO1xuICAgIHRoaXMuX2RyYWdYID0gMC4wO1xuICAgIHRoaXMuX2RyYWdZID0gMC4wO1xuICAgIHRoaXMuX2FjY2VsZXJhdGlvblggPSAwLjA7XG4gICAgdGhpcy5fYWNjZWxlcmF0aW9uWSA9IDAuMDtcbiAgICB0aGlzLl9hY2NlbGVyYXRpb25aID0gMC4wO1xuICAgIHRoaXMuX2RlYnVnTW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcblxuICAgIC8vIOODouODvOOCt+ODp+ODs+ODnuODjeODvOOCuOODo+ODvOOCkuS9nOaIkFxuICAgIHRoaXMuX21vdGlvbk1hbmFnZXIgPSBuZXcgQ3ViaXNtTW90aW9uTWFuYWdlcigpO1xuICAgIHRoaXMuX21vdGlvbk1hbmFnZXIuc2V0RXZlbnRDYWxsYmFjayhcbiAgICAgIEN1YmlzbVVzZXJNb2RlbC5jdWJpc21EZWZhdWx0TW90aW9uRXZlbnRDYWxsYmFjayxcbiAgICAgIHRoaXNcbiAgICApO1xuXG4gICAgLy8g6KGo5oOF44Oe44ON44O844K444Oj44O844KS5L2c5oiQXG4gICAgdGhpcy5fZXhwcmVzc2lvbk1hbmFnZXIgPSBuZXcgQ3ViaXNtTW90aW9uTWFuYWdlcigpO1xuXG4gICAgLy8g44OJ44Op44OD44Kw44Gr44KI44KL44Ki44OL44Oh44O844K344On44OzXG4gICAgdGhpcy5fZHJhZ01hbmFnZXIgPSBuZXcgQ3ViaXNtVGFyZ2V0UG9pbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjgrnjg4jjg6njgq/jgr/jgavnm7jlvZPjgZnjgovlh6bnkIZcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCkge1xuICAgIGlmICh0aGlzLl9tb3Rpb25NYW5hZ2VyICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX21vdGlvbk1hbmFnZXIucmVsZWFzZSgpO1xuICAgICAgdGhpcy5fbW90aW9uTWFuYWdlciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V4cHJlc3Npb25NYW5hZ2VyICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2V4cHJlc3Npb25NYW5hZ2VyLnJlbGVhc2UoKTtcbiAgICAgIHRoaXMuX2V4cHJlc3Npb25NYW5hZ2VyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbW9jICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX21vYy5kZWxldGVNb2RlbCh0aGlzLl9tb2RlbCk7XG4gICAgICB0aGlzLl9tb2MucmVsZWFzZSgpO1xuICAgICAgdGhpcy5fbW9jID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLl9tb2RlbE1hdHJpeCA9IG51bGw7XG5cbiAgICBDdWJpc21Qb3NlLmRlbGV0ZSh0aGlzLl9wb3NlKTtcbiAgICBDdWJpc21FeWVCbGluay5kZWxldGUodGhpcy5fZXllQmxpbmspO1xuICAgIEN1YmlzbUJyZWF0aC5kZWxldGUodGhpcy5fYnJlYXRoKTtcblxuICAgIHRoaXMuX2RyYWdNYW5hZ2VyID0gbnVsbDtcblxuICAgIEN1YmlzbVBoeXNpY3MuZGVsZXRlKHRoaXMuX3BoeXNpY3MpO1xuICAgIEN1YmlzbU1vZGVsVXNlckRhdGEuZGVsZXRlKHRoaXMuX21vZGVsVXNlckRhdGEpO1xuXG4gICAgdGhpcy5kZWxldGVSZW5kZXJlcigpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9tb2M6IEN1YmlzbU1vYzsgLy8gTW9j44OH44O844K/XG4gIHByb3RlY3RlZCBfbW9kZWw6IEN1YmlzbU1vZGVsOyAvLyBNb2RlbOOCpOODs+OCueOCv+ODs+OCuVxuXG4gIHByb3RlY3RlZCBfbW90aW9uTWFuYWdlcjogQ3ViaXNtTW90aW9uTWFuYWdlcjsgLy8g44Oi44O844K344On44Oz566h55CGXG4gIHByb3RlY3RlZCBfZXhwcmVzc2lvbk1hbmFnZXI6IEN1YmlzbU1vdGlvbk1hbmFnZXI7IC8vIOihqOaDheeuoeeQhlxuICBwcm90ZWN0ZWQgX2V5ZUJsaW5rOiBDdWJpc21FeWVCbGluazsgLy8g6Ieq5YuV44G+44Gw44Gf44GNXG4gIHByb3RlY3RlZCBfYnJlYXRoOiBDdWJpc21CcmVhdGg7IC8vIOWRvOWQuFxuICBwcm90ZWN0ZWQgX21vZGVsTWF0cml4OiBDdWJpc21Nb2RlbE1hdHJpeDsgLy8g44Oi44OH44Or6KGM5YiXXG4gIHByb3RlY3RlZCBfcG9zZTogQ3ViaXNtUG9zZTsgLy8g44Od44O844K6566h55CGXG4gIHByb3RlY3RlZCBfZHJhZ01hbmFnZXI6IEN1YmlzbVRhcmdldFBvaW50OyAvLyDjg57jgqbjgrnjg4njg6njg4PjgrBcbiAgcHJvdGVjdGVkIF9waHlzaWNzOiBDdWJpc21QaHlzaWNzOyAvLyDniannkIbmvJTnrpdcbiAgcHJvdGVjdGVkIF9tb2RlbFVzZXJEYXRhOiBDdWJpc21Nb2RlbFVzZXJEYXRhOyAvLyDjg6bjg7zjgrbjg7zjg4fjg7zjgr9cblxuICBwcm90ZWN0ZWQgX2luaXRpYWxpemVkOiBib29sZWFuOyAvLyDliJ3mnJ/ljJbjgZXjgozjgZ/jgYvjganjgYbjgYtcbiAgcHJvdGVjdGVkIF91cGRhdGluZzogYm9vbGVhbjsgLy8g5pu05paw44GV44KM44Gf44GL44Gp44GG44GLXG4gIHByb3RlY3RlZCBfb3BhY2l0eTogbnVtYmVyOyAvLyDkuI3pgI/mmI7luqZcbiAgcHJvdGVjdGVkIF9saXBzeW5jOiBib29sZWFuOyAvLyDjg6rjg4Pjg5fjgrfjg7Pjgq/jgZnjgovjgYvjganjgYbjgYtcbiAgcHJvdGVjdGVkIF9sYXN0TGlwU3luY1ZhbHVlOiBudW1iZXI7IC8v5pyA5ZCO55qE5a+55Y+j5Z6L5o6n5Yi25ZywXG4gIHByb3RlY3RlZCBfZHJhZ1g6IG51bWJlcjsgLy8g6byg5qCH5ouW5Yqo55qEWOS9jee9rlxuICBwcm90ZWN0ZWQgX2RyYWdZOiBudW1iZXI7IC8vIOm8oOagh+aLluWKqOeahFnkvY3nva5cbiAgcHJvdGVjdGVkIF9hY2NlbGVyYXRpb25YOiBudW1iZXI7IC8vIFjou7jmlrnlkJHjga7liqDpgJ/luqZcbiAgcHJvdGVjdGVkIF9hY2NlbGVyYXRpb25ZOiBudW1iZXI7IC8vIFnou7jmlrnlkJHjga7liqDpgJ/luqZcbiAgcHJvdGVjdGVkIF9hY2NlbGVyYXRpb25aOiBudW1iZXI7IC8vIFrou7jmlrnlkJHjga7liqDpgJ/luqZcbiAgcHJvdGVjdGVkIF9kZWJ1Z01vZGU6IGJvb2xlYW47IC8vIOODh+ODkOODg+OCsOODouODvOODieOBi+OBqeOBhuOBi1xuXG4gIHByaXZhdGUgX3JlbmRlcmVyOiBDdWJpc21SZW5kZXJlcl9XZWJHTDsgLy8g44Os44Oz44OA44OpXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbXVzZXJtb2RlbCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgQ3ViaXNtVXNlck1vZGVsID0gJC5DdWJpc21Vc2VyTW9kZWw7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVVzZXJNb2RlbCA9ICQuQ3ViaXNtVXNlck1vZGVsO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU9BO0FBMlNBO0FBbExBO0FBb0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBTUE7QUFHQTtBQUNBO0FBeFVBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQXVCQTtBQUtBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFVQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBWUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBZ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUE0QkE7QUFBQTtBQS9ZQTtBQWtaQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/model/cubismusermodel.ts\n");

/***/ }),

/***/ "./Framework/src/motion/acubismmotion.ts":
/*!***********************************************!*\
  !*** ./Framework/src/motion/acubismmotion.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.ACubismMotion = void 0;\nvar cubismmath_1 = __webpack_require__(/*! ../math/cubismmath */ \"./Framework/src/math/cubismmath.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar ACubismMotion = (function () {\n    function ACubismMotion() {\n        var _this = this;\n        this.setFinishedMotionHandler = function (onFinishedMotionHandler) { return (_this._onFinishedMotion = onFinishedMotionHandler); };\n        this.getFinishedMotionHandler = function () { return _this._onFinishedMotion; };\n        this._fadeInSeconds = -1.0;\n        this._fadeOutSeconds = -1.0;\n        this._weight = 1.0;\n        this._offsetSeconds = 0.0;\n        this._firedEventValues = new csmvector_1.csmVector();\n    }\n    ACubismMotion.delete = function (motion) {\n        motion.release();\n        motion = null;\n    };\n    ACubismMotion.prototype.release = function () {\n        this._weight = 0.0;\n    };\n    ACubismMotion.prototype.updateParameters = function (model, motionQueueEntry, userTimeSeconds) {\n        if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\n            return;\n        }\n        if (!motionQueueEntry.isStarted()) {\n            motionQueueEntry.setIsStarted(true);\n            motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds);\n            motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n            var duration = this.getDuration();\n            if (motionQueueEntry.getEndTime() < 0) {\n                motionQueueEntry.setEndTime(duration <= 0 ? -1 : motionQueueEntry.getStartTime() + duration);\n            }\n        }\n        var fadeWeight = this._weight;\n        var fadeIn = this._fadeInSeconds == 0.0\n            ? 1.0\n            : cubismmath_1.CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                this._fadeInSeconds);\n        var fadeOut = this._fadeOutSeconds == 0.0 || motionQueueEntry.getEndTime() < 0.0\n            ? 1.0\n            : cubismmath_1.CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) /\n                this._fadeOutSeconds);\n        fadeWeight = fadeWeight * fadeIn * fadeOut;\n        motionQueueEntry.setState(userTimeSeconds, fadeWeight);\n        cubismdebug_1.CSM_ASSERT(0.0 <= fadeWeight && fadeWeight <= 1.0);\n        this.doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry);\n        if (motionQueueEntry.getEndTime() > 0 &&\n            motionQueueEntry.getEndTime() < userTimeSeconds) {\n            motionQueueEntry.setIsFinished(true);\n        }\n    };\n    ACubismMotion.prototype.setFadeInTime = function (fadeInSeconds) {\n        this._fadeInSeconds = fadeInSeconds;\n    };\n    ACubismMotion.prototype.setFadeOutTime = function (fadeOutSeconds) {\n        this._fadeOutSeconds = fadeOutSeconds;\n    };\n    ACubismMotion.prototype.getFadeOutTime = function () {\n        return this._fadeOutSeconds;\n    };\n    ACubismMotion.prototype.getFadeInTime = function () {\n        return this._fadeInSeconds;\n    };\n    ACubismMotion.prototype.setWeight = function (weight) {\n        this._weight = weight;\n    };\n    ACubismMotion.prototype.getWeight = function () {\n        return this._weight;\n    };\n    ACubismMotion.prototype.getDuration = function () {\n        return -1.0;\n    };\n    ACubismMotion.prototype.getLoopDuration = function () {\n        return -1.0;\n    };\n    ACubismMotion.prototype.setOffsetTime = function (offsetSeconds) {\n        this._offsetSeconds = offsetSeconds;\n    };\n    ACubismMotion.prototype.getFiredEvent = function (beforeCheckTimeSeconds, motionTimeSeconds) {\n        return this._firedEventValues;\n    };\n    return ACubismMotion;\n}());\nexports.ACubismMotion = ACubismMotion;\nvar $ = __importStar(__webpack_require__(/*! ./acubismmotion */ \"./Framework/src/motion/acubismmotion.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.ACubismMotion = $.ACubismMotion;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9hY3ViaXNtbW90aW9uLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb3Rpb24vYWN1YmlzbW1vdGlvbi50cz8zOWEwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbU1hdGggfSBmcm9tICcuLi9tYXRoL2N1YmlzbW1hdGgnO1xuaW1wb3J0IHsgQ3ViaXNtTW9kZWwgfSBmcm9tICcuLi9tb2RlbC9jdWJpc21tb2RlbCc7XG5pbXBvcnQgeyBjc21TdHJpbmcgfSBmcm9tICcuLi90eXBlL2NzbXN0cmluZyc7XG5pbXBvcnQgeyBjc21WZWN0b3IgfSBmcm9tICcuLi90eXBlL2NzbXZlY3Rvcic7XG5pbXBvcnQgeyBDU01fQVNTRVJUIH0gZnJvbSAnLi4vdXRpbHMvY3ViaXNtZGVidWcnO1xuaW1wb3J0IHsgQ3ViaXNtTW90aW9uUXVldWVFbnRyeSB9IGZyb20gJy4vY3ViaXNtbW90aW9ucXVldWVlbnRyeSc7XG5cbi8qKiDjg6Ljg7zjgrfjg6fjg7Plho3nlJ/ntYLkuobjgrPjg7zjg6vjg5Djg4Pjgq/plqLmlbDlrprnvqkgKi9cbmV4cG9ydCB0eXBlIEZpbmlzaGVkTW90aW9uQ2FsbGJhY2sgPSAoc2VsZjogQUN1YmlzbU1vdGlvbikgPT4gdm9pZDtcblxuLyoqXG4gKiDjg6Ljg7zjgrfjg6fjg7Pjga7mir3osaHln7rlupXjgq/jg6njgrlcbiAqXG4gKiDjg6Ljg7zjgrfjg6fjg7Pjga7mir3osaHln7rlupXjgq/jg6njgrnjgIJNb3Rpb25RdWV1ZU1hbmFnZXLjgavjgojjgaPjgabjg6Ljg7zjgrfjg6fjg7Pjga7lho3nlJ/jgpLnrqHnkIbjgZnjgovjgIJcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFDdWJpc21Nb3Rpb24ge1xuICAvKipcbiAgICog44Kk44Oz44K544K/44Oz44K544Gu56C05qOEXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGRlbGV0ZShtb3Rpb246IEFDdWJpc21Nb3Rpb24pOiB2b2lkIHtcbiAgICBtb3Rpb24ucmVsZWFzZSgpO1xuICAgIG1vdGlvbiA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fZmFkZUluU2Vjb25kcyA9IC0xLjA7XG4gICAgdGhpcy5fZmFkZU91dFNlY29uZHMgPSAtMS4wO1xuICAgIHRoaXMuX3dlaWdodCA9IDEuMDtcbiAgICB0aGlzLl9vZmZzZXRTZWNvbmRzID0gMC4wOyAvLyDlho3nlJ/jga7plovlp4vmmYLliLtcbiAgICB0aGlzLl9maXJlZEV2ZW50VmFsdWVzID0gbmV3IGNzbVZlY3Rvcjxjc21TdHJpbmc+KCk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICB0aGlzLl93ZWlnaHQgPSAwLjA7XG4gIH1cblxuICAvKipcbiAgICog44Oi44OH44Or44Gu44OR44Op44Oh44O844K/XG4gICAqIEBwYXJhbSBtb2RlbCDlr77osaHjga7jg6Ljg4fjg6tcbiAgICogQHBhcmFtIG1vdGlvblF1ZXVlRW50cnkgQ3ViaXNtTW90aW9uUXVldWVNYW5hZ2Vy44Gn566h55CG44GV44KM44Gm44GE44KL44Oi44O844K344On44OzXG4gICAqIEBwYXJhbSB1c2VyVGltZVNlY29uZHMg44OH44Or44K/5pmC6ZaT44Gu56mN566X5YCkW+enkl1cbiAgICovXG4gIHB1YmxpYyB1cGRhdGVQYXJhbWV0ZXJzKFxuICAgIG1vZGVsOiBDdWJpc21Nb2RlbCxcbiAgICBtb3Rpb25RdWV1ZUVudHJ5OiBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5LFxuICAgIHVzZXJUaW1lU2Vjb25kczogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIGlmICghbW90aW9uUXVldWVFbnRyeS5pc0F2YWlsYWJsZSgpIHx8IG1vdGlvblF1ZXVlRW50cnkuaXNGaW5pc2hlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFtb3Rpb25RdWV1ZUVudHJ5LmlzU3RhcnRlZCgpKSB7XG4gICAgICBtb3Rpb25RdWV1ZUVudHJ5LnNldElzU3RhcnRlZCh0cnVlKTtcbiAgICAgIG1vdGlvblF1ZXVlRW50cnkuc2V0U3RhcnRUaW1lKHVzZXJUaW1lU2Vjb25kcyAtIHRoaXMuX29mZnNldFNlY29uZHMpOyAvLyDjg6Ljg7zjgrfjg6fjg7Pjga7plovlp4vmmYLliLvjgpLoqJjpjLJcbiAgICAgIG1vdGlvblF1ZXVlRW50cnkuc2V0RmFkZUluU3RhcnRUaW1lKHVzZXJUaW1lU2Vjb25kcyk7IC8vIOODleOCp+ODvOODieOCpOODs+OBrumWi+Wni+aZguWIu1xuXG4gICAgICBjb25zdCBkdXJhdGlvbjogbnVtYmVyID0gdGhpcy5nZXREdXJhdGlvbigpO1xuXG4gICAgICBpZiAobW90aW9uUXVldWVFbnRyeS5nZXRFbmRUaW1lKCkgPCAwKSB7XG4gICAgICAgIC8vIOmWi+Wni+OBl+OBpuOBhOOBquOBhOOBhuOBoeOBq+e1guS6huioreWumuOBl+OBpuOBhOOCi+WgtOWQiOOBjOOBguOCi+OAglxuICAgICAgICBtb3Rpb25RdWV1ZUVudHJ5LnNldEVuZFRpbWUoXG4gICAgICAgICAgZHVyYXRpb24gPD0gMCA/IC0xIDogbW90aW9uUXVldWVFbnRyeS5nZXRTdGFydFRpbWUoKSArIGR1cmF0aW9uXG4gICAgICAgICk7XG4gICAgICAgIC8vIGR1cmF0aW9uID09IC0xIOOBruWgtOWQiOOBr+ODq+ODvOODl+OBmeOCi1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBmYWRlV2VpZ2h0OiBudW1iZXIgPSB0aGlzLl93ZWlnaHQ7IC8vIOePvuWcqOOBruWApOOBqOaOm+OBkeWQiOOCj+OBm+OCi+WJsuWQiFxuXG4gICAgLy8tLS0tIOODleOCp+ODvOODieOCpOODs+ODu+OCouOCpuODiOOBruWHpueQhiAtLS0tXG4gICAgLy8g5Y2Y57SU44Gq44K144Kk44Oz6Zai5pWw44Gn44Kk44O844K444Oz44Kw44GZ44KLXG4gICAgY29uc3QgZmFkZUluOiBudW1iZXIgPVxuICAgICAgdGhpcy5fZmFkZUluU2Vjb25kcyA9PSAwLjBcbiAgICAgICAgPyAxLjBcbiAgICAgICAgOiBDdWJpc21NYXRoLmdldEVhc2luZ1NpbmUoXG4gICAgICAgICAgICAodXNlclRpbWVTZWNvbmRzIC0gbW90aW9uUXVldWVFbnRyeS5nZXRGYWRlSW5TdGFydFRpbWUoKSkgL1xuICAgICAgICAgICAgICB0aGlzLl9mYWRlSW5TZWNvbmRzXG4gICAgICAgICAgKTtcblxuICAgIGNvbnN0IGZhZGVPdXQ6IG51bWJlciA9XG4gICAgICB0aGlzLl9mYWRlT3V0U2Vjb25kcyA9PSAwLjAgfHwgbW90aW9uUXVldWVFbnRyeS5nZXRFbmRUaW1lKCkgPCAwLjBcbiAgICAgICAgPyAxLjBcbiAgICAgICAgOiBDdWJpc21NYXRoLmdldEVhc2luZ1NpbmUoXG4gICAgICAgICAgICAobW90aW9uUXVldWVFbnRyeS5nZXRFbmRUaW1lKCkgLSB1c2VyVGltZVNlY29uZHMpIC9cbiAgICAgICAgICAgICAgdGhpcy5fZmFkZU91dFNlY29uZHNcbiAgICAgICAgICApO1xuXG4gICAgZmFkZVdlaWdodCA9IGZhZGVXZWlnaHQgKiBmYWRlSW4gKiBmYWRlT3V0O1xuXG4gICAgbW90aW9uUXVldWVFbnRyeS5zZXRTdGF0ZSh1c2VyVGltZVNlY29uZHMsIGZhZGVXZWlnaHQpO1xuXG4gICAgQ1NNX0FTU0VSVCgwLjAgPD0gZmFkZVdlaWdodCAmJiBmYWRlV2VpZ2h0IDw9IDEuMCk7XG5cbiAgICAvLy0tLS0g5YWo44Gm44Gu44OR44Op44Oh44O844K/SUTjgpLjg6vjg7zjg5fjgZnjgosgLS0tLVxuICAgIHRoaXMuZG9VcGRhdGVQYXJhbWV0ZXJzKFxuICAgICAgbW9kZWwsXG4gICAgICB1c2VyVGltZVNlY29uZHMsXG4gICAgICBmYWRlV2VpZ2h0LFxuICAgICAgbW90aW9uUXVldWVFbnRyeVxuICAgICk7XG5cbiAgICAvLyDlvozlh6bnkIZcbiAgICAvLyDntYLkuobmmYLliLvjgpLpgY7jgY7jgZ/jgonntYLkuobjg5Xjg6njgrDjgpLnq4vjgabjgosoQ3ViaXNtTW90aW9uUXVldWVNYW5hZ2VyKVxuICAgIGlmIChcbiAgICAgIG1vdGlvblF1ZXVlRW50cnkuZ2V0RW5kVGltZSgpID4gMCAmJlxuICAgICAgbW90aW9uUXVldWVFbnRyeS5nZXRFbmRUaW1lKCkgPCB1c2VyVGltZVNlY29uZHNcbiAgICApIHtcbiAgICAgIG1vdGlvblF1ZXVlRW50cnkuc2V0SXNGaW5pc2hlZCh0cnVlKTsgLy8g57WC5LqGXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODleOCp+ODvOODieOCpOODs+OBruaZgumWk+OCkuioreWumuOBmeOCi1xuICAgKiBAcGFyYW0gZmFkZUluU2Vjb25kcyDjg5Xjgqfjg7zjg4njgqTjg7PjgavjgYvjgYvjgovmmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIHNldEZhZGVJblRpbWUoZmFkZUluU2Vjb25kczogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZmFkZUluU2Vjb25kcyA9IGZhZGVJblNlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Ki44Km44OI44Gu5pmC6ZaT44KS6Kit5a6a44GZ44KLXG4gICAqIEBwYXJhbSBmYWRlT3V0U2Vjb25kcyDjg5Xjgqfjg7zjg4njgqLjgqbjg4jjgavjgYvjgYvjgovmmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIHNldEZhZGVPdXRUaW1lKGZhZGVPdXRTZWNvbmRzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9mYWRlT3V0U2Vjb25kcyA9IGZhZGVPdXRTZWNvbmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODleOCp+ODvOODieOCouOCpuODiOOBq+OBi+OBi+OCi+aZgumWk+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOODleOCp+ODvOODieOCouOCpuODiOOBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0RmFkZU91dFRpbWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZmFkZU91dFNlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Kk44Oz44Gr44GL44GL44KL5pmC6ZaT44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Kk44Oz44Gr44GL44GL44KL5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRGYWRlSW5UaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2ZhZGVJblNlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz6YGp55So44Gu6YeN44G/44Gu6Kit5a6aXG4gICAqIEBwYXJhbSB3ZWlnaHQg6YeN44G/77yIMC4wIC0gMS4w77yJXG4gICAqL1xuICBwdWJsaWMgc2V0V2VpZ2h0KHdlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fd2VpZ2h0ID0gd2VpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+mBqeeUqOOBrumHjeOBv+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOmHjeOBv++8iDAuMCAtIDEuMO+8iVxuICAgKi9cbiAgcHVibGljIGdldFdlaWdodCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl93ZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu6ZW344GV44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Gu6ZW344GVW+enkl1cbiAgICpcbiAgICogQG5vdGUg44Or44O844OX44Gu5pmC44Gv44CMLTHjgI3jgIJcbiAgICogICAgICAg44Or44O844OX44Gn44Gq44GE5aC05ZCI44Gv44CB44Kq44O844OQ44O844Op44Kk44OJ44GZ44KL44CCXG4gICAqICAgICAgIOato+OBruWApOOBruaZguOBr+WPluW+l+OBleOCjOOCi+aZgumWk+OBp+e1guS6huOBmeOCi+OAglxuICAgKiAgICAgICDjgIwtMeOAjeOBruaZguOBr+WklumDqOOBi+OCieWBnOatouWRveS7pOOBjOOBquOBhOmZkOOCiue1guOCj+OCieOBquOBhOWHpueQhuOBqOOBquOCi+OAglxuICAgKi9cbiAgcHVibGljIGdldER1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIC0xLjA7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu44Or44O844OXMeWbnuWIhuOBrumVt+OBleOBruWPluW+l1xuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+OBruODq+ODvOODl+S4gOWbnuWIhuOBrumVt+OBlVvnp5JdXG4gICAqXG4gICAqIEBub3RlIOODq+ODvOODl+OBl+OBquOBhOWgtOWQiOOBr+OAgWdldER1cmF0aW9uKCnjgajlkIzjgZjlgKTjgpLov5TjgZlcbiAgICogICAgICAg44Or44O844OX5LiA5Zue5YiG44Gu6ZW344GV44GM5a6a576p44Gn44GN44Gq44GE5aC05ZCIKOODl+ODreOCsOODqeODoOeahOOBq+WLleOBjee2muOBkeOCi+OCteODluOCr+ODqeOCueOBquOBqSnjga7loLTlkIjjga/jgIwtMeOAjeOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldExvb3BEdXJhdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiAtMS4wO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+WGjeeUn+OBrumWi+Wni+aZguWIu+OBruioreWumlxuICAgKiBAcGFyYW0gb2Zmc2V0U2Vjb25kcyDjg6Ljg7zjgrfjg6fjg7Plho3nlJ/jga7plovlp4vmmYLliLtb56eSXVxuICAgKi9cbiAgcHVibGljIHNldE9mZnNldFRpbWUob2Zmc2V0U2Vjb25kczogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fb2Zmc2V0U2Vjb25kcyA9IG9mZnNldFNlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog44Oi44OH44Or44Gu44OR44Op44Oh44O844K/5pu05pawXG4gICAqXG4gICAqIOOCpOODmeODs+ODiOeZuueBq+OBruODgeOCp+ODg+OCr+OAglxuICAgKiDlhaXlipvjgZnjgovmmYLplpPjga/lkbzjgbDjgozjgovjg6Ljg7zjgrfjg6fjg7Pjgr/jgqTjg5/jg7PjgrDjgpLvvJDjgajjgZfjgZ/np5LmlbDjgafooYzjgYbjgIJcbiAgICpcbiAgICogQHBhcmFtIGJlZm9yZUNoZWNrVGltZVNlY29uZHMg5YmN5Zue44Gu44Kk44OZ44Oz44OI44OB44Kn44OD44Kv5pmC6ZaTW+enkl1cbiAgICogQHBhcmFtIG1vdGlvblRpbWVTZWNvbmRzIOS7iuWbnuOBruWGjeeUn+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0RmlyZWRFdmVudChcbiAgICBiZWZvcmVDaGVja1RpbWVTZWNvbmRzOiBudW1iZXIsXG4gICAgbW90aW9uVGltZVNlY29uZHM6IG51bWJlclxuICApOiBjc21WZWN0b3I8Y3NtU3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcmVkRXZlbnRWYWx1ZXM7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44KS5pu05paw44GX44Gm44CB44Oi44OH44Or44Gr44OR44Op44Oh44O844K/5YCk44KS5Y+N5pig44GZ44KLXG4gICAqIEBwYXJhbSBtb2RlbCDlr77osaHjga7jg6Ljg4fjg6tcbiAgICogQHBhcmFtIHVzZXJUaW1lU2Vjb25kcyDjg4fjg6vjgr/mmYLplpPjga7nqY3nrpflgKRb56eSXVxuICAgKiBAcGFyYW0gd2VpZ2h0IOODouODvOOCt+ODp+ODs+OBrumHjeOBv1xuICAgKiBAcGFyYW0gbW90aW9uUXVldWVFbnRyeSBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXLjgafnrqHnkIbjgZXjgozjgabjgYTjgovjg6Ljg7zjgrfjg6fjg7NcbiAgICogQHJldHVybiB0cnVlIOODouODh+ODq+OBuOODkeODqeODoeODvOOCv+WApOOBruWPjeaYoOOBguOCilxuICAgKiBAcmV0dXJuIGZhbHNlIOODouODh+ODq+OBuOOBruODkeODqeODoeODvOOCv+WApOOBruWPjeaYoOOBquOBl++8iOODouODvOOCt+ODp+ODs+OBruWkieWMluOBquOBl++8iVxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGRvVXBkYXRlUGFyYW1ldGVycyhcbiAgICBtb2RlbDogQ3ViaXNtTW9kZWwsXG4gICAgdXNlclRpbWVTZWNvbmRzOiBudW1iZXIsXG4gICAgd2VpZ2h0OiBudW1iZXIsXG4gICAgbW90aW9uUXVldWVFbnRyeTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeVxuICApOiB2b2lkO1xuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Plho3nlJ/ntYLkuobjgrPjg7zjg6vjg5Djg4Pjgq/jga7nmbvpjLJcbiAgICpcbiAgICog44Oi44O844K344On44Oz5YaN55Sf57WC5LqG44Kz44O844Or44OQ44OD44Kv44KS55m76Yyy44GZ44KL44CCXG4gICAqIGlzRmluaXNoZWTjg5Xjg6njgrDjgpLoqK3lrprjgZnjgovjgr/jgqTjg5/jg7PjgrDjgaflkbzjgbPlh7rjgZXjgozjgovjgIJcbiAgICog5Lul5LiL44Gu54q25oWL44Gu6Zqb44Gr44Gv5ZG844Gz5Ye644GV44KM44Gq44GEOlxuICAgKiAgIDEuIOWGjeeUn+S4reOBruODouODvOOCt+ODp+ODs+OBjOOAjOODq+ODvOODl+OAjeOBqOOBl+OBpuioreWumuOBleOCjOOBpuOBhOOCi+OBqOOBjVxuICAgKiAgIDIuIOOCs+ODvOODq+ODkOODg+OCr+OBjOeZu+mMsuOBleOCjOOBpuOBhOOBquOBhOaZglxuICAgKlxuICAgKiBAcGFyYW0gb25GaW5pc2hlZE1vdGlvbkhhbmRsZXIg44Oi44O844K344On44Oz5YaN55Sf57WC5LqG44Kz44O844Or44OQ44OD44Kv6Zai5pWwXG4gICAqL1xuICBwdWJsaWMgc2V0RmluaXNoZWRNb3Rpb25IYW5kbGVyID0gKFxuICAgIG9uRmluaXNoZWRNb3Rpb25IYW5kbGVyOiBGaW5pc2hlZE1vdGlvbkNhbGxiYWNrXG4gICkgPT4gKHRoaXMuX29uRmluaXNoZWRNb3Rpb24gPSBvbkZpbmlzaGVkTW90aW9uSGFuZGxlcik7XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+WGjeeUn+e1guS6huOCs+ODvOODq+ODkOODg+OCr+OBruWPluW+l1xuICAgKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Plho3nlJ/ntYLkuobjgrPjg7zjg6vjg5Djg4Pjgq/jgpLlj5blvpfjgZnjgovjgIJcbiAgICpcbiAgICogQHJldHVybiDnmbvpjLLjgZXjgozjgabjgYTjgovjg6Ljg7zjgrfjg6fjg7Plho3nlJ/ntYLkuobjgrPjg7zjg6vjg5Djg4Pjgq/plqLmlbBcbiAgICovXG4gIHB1YmxpYyBnZXRGaW5pc2hlZE1vdGlvbkhhbmRsZXIgPSAoKSA9PiB0aGlzLl9vbkZpbmlzaGVkTW90aW9uO1xuXG4gIHB1YmxpYyBfZmFkZUluU2Vjb25kczogbnVtYmVyOyAvLyDjg5Xjgqfjg7zjg4njgqTjg7PjgavjgYvjgYvjgovmmYLplpNb56eSXVxuICBwdWJsaWMgX2ZhZGVPdXRTZWNvbmRzOiBudW1iZXI7IC8vIOODleOCp+ODvOODieOCouOCpuODiOOBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG4gIHB1YmxpYyBfd2VpZ2h0OiBudW1iZXI7IC8vIOODouODvOOCt+ODp+ODs+OBrumHjeOBv1xuICBwdWJsaWMgX29mZnNldFNlY29uZHM6IG51bWJlcjsgLy8g44Oi44O844K344On44Oz5YaN55Sf44Gu6ZaL5aeL5pmC6ZaTW+enkl1cblxuICBwdWJsaWMgX2ZpcmVkRXZlbnRWYWx1ZXM6IGNzbVZlY3Rvcjxjc21TdHJpbmc+O1xuXG4gIC8vIOODouODvOOCt+ODp+ODs+WGjeeUn+e1guS6huOCs+ODvOODq+ODkOODg+OCr+mWouaVsFxuICBwdWJsaWMgX29uRmluaXNoZWRNb3Rpb24/OiBGaW5pc2hlZE1vdGlvbkNhbGxiYWNrO1xufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9hY3ViaXNtbW90aW9uJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBBQ3ViaXNtTW90aW9uID0gJC5BQ3ViaXNtTW90aW9uO1xuICBleHBvcnQgdHlwZSBBQ3ViaXNtTW90aW9uID0gJC5BQ3ViaXNtTW90aW9uO1xuICBleHBvcnQgdHlwZSBGaW5pc2hlZE1vdGlvbkNhbGxiYWNrID0gJC5GaW5pc2hlZE1vdGlvbkNhbGxiYWNrO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFHQTtBQUNBO0FBV0E7QUFZQTtBQUFBO0FBcU5BO0FBV0E7QUEvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBUUE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFHQTtBQVNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFXQTtBQUlBO0FBQ0E7QUFtREE7QUFBQTtBQXZQQTtBQTBQQTtBQUVBO0FBQUE7QUFDQTtBQUdBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/motion/acubismmotion.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismexpressionmotion.ts":
/*!********************************************************!*\
  !*** ./Framework/src/motion/cubismexpressionmotion.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.ExpressionParameter = exports.ExpressionBlendType = exports.CubismExpressionMotion = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ../utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nvar acubismmotion_1 = __webpack_require__(/*! ./acubismmotion */ \"./Framework/src/motion/acubismmotion.ts\");\nvar ExpressionKeyFadeIn = 'FadeInTime';\nvar ExpressionKeyFadeOut = 'FadeOutTime';\nvar ExpressionKeyParameters = 'Parameters';\nvar ExpressionKeyId = 'Id';\nvar ExpressionKeyValue = 'Value';\nvar ExpressionKeyBlend = 'Blend';\nvar BlendValueAdd = 'Add';\nvar BlendValueMultiply = 'Multiply';\nvar BlendValueOverwrite = 'Overwrite';\nvar DefaultFadeTime = 1.0;\nvar CubismExpressionMotion = (function (_super) {\n    __extends(CubismExpressionMotion, _super);\n    function CubismExpressionMotion() {\n        var _this = _super.call(this) || this;\n        _this._parameters = new csmvector_1.csmVector();\n        return _this;\n    }\n    CubismExpressionMotion.create = function (buffer, size) {\n        var expression = new CubismExpressionMotion();\n        var json = cubismjson_1.CubismJson.create(buffer, size);\n        var root = json.getRoot();\n        expression.setFadeInTime(root.getValueByString(ExpressionKeyFadeIn).toFloat(DefaultFadeTime));\n        expression.setFadeOutTime(root.getValueByString(ExpressionKeyFadeOut).toFloat(DefaultFadeTime));\n        var parameterCount = root\n            .getValueByString(ExpressionKeyParameters)\n            .getSize();\n        expression._parameters.prepareCapacity(parameterCount);\n        for (var i = 0; i < parameterCount; ++i) {\n            var param = root\n                .getValueByString(ExpressionKeyParameters)\n                .getValueByIndex(i);\n            var parameterId = live2dcubismframework_1.CubismFramework.getIdManager().getId(param.getValueByString(ExpressionKeyId).getRawString());\n            var value = param\n                .getValueByString(ExpressionKeyValue)\n                .toFloat();\n            var blendType = void 0;\n            if (param.getValueByString(ExpressionKeyBlend).isNull() ||\n                param.getValueByString(ExpressionKeyBlend).getString() == BlendValueAdd) {\n                blendType = ExpressionBlendType.ExpressionBlendType_Add;\n            }\n            else if (param.getValueByString(ExpressionKeyBlend).getString() ==\n                BlendValueMultiply) {\n                blendType = ExpressionBlendType.ExpressionBlendType_Multiply;\n            }\n            else if (param.getValueByString(ExpressionKeyBlend).getString() ==\n                BlendValueOverwrite) {\n                blendType = ExpressionBlendType.ExpressionBlendType_Overwrite;\n            }\n            else {\n                blendType = ExpressionBlendType.ExpressionBlendType_Add;\n            }\n            var item = new ExpressionParameter();\n            item.parameterId = parameterId;\n            item.blendType = blendType;\n            item.value = value;\n            expression._parameters.pushBack(item);\n        }\n        cubismjson_1.CubismJson.delete(json);\n        return expression;\n    };\n    CubismExpressionMotion.prototype.doUpdateParameters = function (model, userTimeSeconds, weight, motionQueueEntry) {\n        for (var i = 0; i < this._parameters.getSize(); ++i) {\n            var parameter = this._parameters.at(i);\n            switch (parameter.blendType) {\n                case ExpressionBlendType.ExpressionBlendType_Add: {\n                    model.addParameterValueById(parameter.parameterId, parameter.value, weight);\n                    break;\n                }\n                case ExpressionBlendType.ExpressionBlendType_Multiply: {\n                    model.multiplyParameterValueById(parameter.parameterId, parameter.value, weight);\n                    break;\n                }\n                case ExpressionBlendType.ExpressionBlendType_Overwrite: {\n                    model.setParameterValueById(parameter.parameterId, parameter.value, weight);\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n    };\n    return CubismExpressionMotion;\n}(acubismmotion_1.ACubismMotion));\nexports.CubismExpressionMotion = CubismExpressionMotion;\nvar ExpressionBlendType;\n(function (ExpressionBlendType) {\n    ExpressionBlendType[ExpressionBlendType[\"ExpressionBlendType_Add\"] = 0] = \"ExpressionBlendType_Add\";\n    ExpressionBlendType[ExpressionBlendType[\"ExpressionBlendType_Multiply\"] = 1] = \"ExpressionBlendType_Multiply\";\n    ExpressionBlendType[ExpressionBlendType[\"ExpressionBlendType_Overwrite\"] = 2] = \"ExpressionBlendType_Overwrite\";\n})(ExpressionBlendType = exports.ExpressionBlendType || (exports.ExpressionBlendType = {}));\nvar ExpressionParameter = (function () {\n    function ExpressionParameter() {\n    }\n    return ExpressionParameter;\n}());\nexports.ExpressionParameter = ExpressionParameter;\nvar $ = __importStar(__webpack_require__(/*! ./cubismexpressionmotion */ \"./Framework/src/motion/cubismexpressionmotion.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismExpressionMotion = $.CubismExpressionMotion;\n    Live2DCubismFramework.ExpressionBlendType = $.ExpressionBlendType;\n    Live2DCubismFramework.ExpressionParameter = $.ExpressionParameter;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21leHByZXNzaW9ubW90aW9uLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb3Rpb24vY3ViaXNtZXhwcmVzc2lvbm1vdGlvbi50cz84NWE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgQ3ViaXNtRnJhbWV3b3JrIH0gZnJvbSAnLi4vbGl2ZTJkY3ViaXNtZnJhbWV3b3JrJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgY3NtVmVjdG9yIH0gZnJvbSAnLi4vdHlwZS9jc212ZWN0b3InO1xuaW1wb3J0IHsgQ3ViaXNtSnNvbiwgVmFsdWUgfSBmcm9tICcuLi91dGlscy9jdWJpc21qc29uJztcbmltcG9ydCB7IEFDdWJpc21Nb3Rpb24gfSBmcm9tICcuL2FjdWJpc21tb3Rpb24nO1xuaW1wb3J0IHsgQ3ViaXNtTW90aW9uUXVldWVFbnRyeSB9IGZyb20gJy4vY3ViaXNtbW90aW9ucXVldWVlbnRyeSc7XG5cbi8vIGV4cDMuanNvbuOBruOCreODvOOBqOODh+ODleOCqeODq+ODiFxuY29uc3QgRXhwcmVzc2lvbktleUZhZGVJbiA9ICdGYWRlSW5UaW1lJztcbmNvbnN0IEV4cHJlc3Npb25LZXlGYWRlT3V0ID0gJ0ZhZGVPdXRUaW1lJztcbmNvbnN0IEV4cHJlc3Npb25LZXlQYXJhbWV0ZXJzID0gJ1BhcmFtZXRlcnMnO1xuY29uc3QgRXhwcmVzc2lvbktleUlkID0gJ0lkJztcbmNvbnN0IEV4cHJlc3Npb25LZXlWYWx1ZSA9ICdWYWx1ZSc7XG5jb25zdCBFeHByZXNzaW9uS2V5QmxlbmQgPSAnQmxlbmQnO1xuY29uc3QgQmxlbmRWYWx1ZUFkZCA9ICdBZGQnO1xuY29uc3QgQmxlbmRWYWx1ZU11bHRpcGx5ID0gJ011bHRpcGx5JztcbmNvbnN0IEJsZW5kVmFsdWVPdmVyd3JpdGUgPSAnT3ZlcndyaXRlJztcbmNvbnN0IERlZmF1bHRGYWRlVGltZSA9IDEuMDtcblxuLyoqXG4gKiDooajmg4Xjga7jg6Ljg7zjgrfjg6fjg7NcbiAqXG4gKiDooajmg4Xjga7jg6Ljg7zjgrfjg6fjg7Pjgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbUV4cHJlc3Npb25Nb3Rpb24gZXh0ZW5kcyBBQ3ViaXNtTW90aW9uIHtcbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkuS9nOaIkOOBmeOCi+OAglxuICAgKiBAcGFyYW0gYnVmZmVyIGV4cOODleOCoeOCpOODq+OBjOiqreOBv+i+vOOBvuOCjOOBpuOBhOOCi+ODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gc2l6ZSDjg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrpcbiAgICogQHJldHVybiDkvZzmiJDjgZXjgozjgZ/jgqTjg7Pjgrnjgr/jg7PjgrlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlKFxuICAgIGJ1ZmZlcjogQXJyYXlCdWZmZXIsXG4gICAgc2l6ZTogbnVtYmVyXG4gICk6IEN1YmlzbUV4cHJlc3Npb25Nb3Rpb24ge1xuICAgIGNvbnN0IGV4cHJlc3Npb246IEN1YmlzbUV4cHJlc3Npb25Nb3Rpb24gPSBuZXcgQ3ViaXNtRXhwcmVzc2lvbk1vdGlvbigpO1xuXG4gICAgY29uc3QganNvbjogQ3ViaXNtSnNvbiA9IEN1YmlzbUpzb24uY3JlYXRlKGJ1ZmZlciwgc2l6ZSk7XG4gICAgY29uc3Qgcm9vdDogVmFsdWUgPSBqc29uLmdldFJvb3QoKTtcblxuICAgIGV4cHJlc3Npb24uc2V0RmFkZUluVGltZShcbiAgICAgIHJvb3QuZ2V0VmFsdWVCeVN0cmluZyhFeHByZXNzaW9uS2V5RmFkZUluKS50b0Zsb2F0KERlZmF1bHRGYWRlVGltZSlcbiAgICApOyAvLyDjg5Xjgqfjg7zjg4njgqTjg7NcbiAgICBleHByZXNzaW9uLnNldEZhZGVPdXRUaW1lKFxuICAgICAgcm9vdC5nZXRWYWx1ZUJ5U3RyaW5nKEV4cHJlc3Npb25LZXlGYWRlT3V0KS50b0Zsb2F0KERlZmF1bHRGYWRlVGltZSlcbiAgICApOyAvLyDjg5Xjgqfjg7zjg4njgqLjgqbjg4hcblxuICAgIC8vIOWQhOODkeODqeODoeODvOOCv+OBq+OBpOOBhOOBplxuICAgIGNvbnN0IHBhcmFtZXRlckNvdW50ID0gcm9vdFxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRXhwcmVzc2lvbktleVBhcmFtZXRlcnMpXG4gICAgICAuZ2V0U2l6ZSgpO1xuICAgIGV4cHJlc3Npb24uX3BhcmFtZXRlcnMucHJlcGFyZUNhcGFjaXR5KHBhcmFtZXRlckNvdW50KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1ldGVyQ291bnQ7ICsraSkge1xuICAgICAgY29uc3QgcGFyYW06IFZhbHVlID0gcm9vdFxuICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhFeHByZXNzaW9uS2V5UGFyYW1ldGVycylcbiAgICAgICAgLmdldFZhbHVlQnlJbmRleChpKTtcbiAgICAgIGNvbnN0IHBhcmFtZXRlcklkOiBDdWJpc21JZEhhbmRsZSA9IEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgICAgcGFyYW0uZ2V0VmFsdWVCeVN0cmluZyhFeHByZXNzaW9uS2V5SWQpLmdldFJhd1N0cmluZygpXG4gICAgICApOyAvLyDjg5Hjg6njg6Hjg7zjgr9JRFxuXG4gICAgICBjb25zdCB2YWx1ZTogbnVtYmVyID0gcGFyYW1cbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRXhwcmVzc2lvbktleVZhbHVlKVxuICAgICAgICAudG9GbG9hdCgpOyAvLyDlgKRcblxuICAgICAgLy8g6KiI566X5pa55rOV44Gu6Kit5a6aXG4gICAgICBsZXQgYmxlbmRUeXBlOiBFeHByZXNzaW9uQmxlbmRUeXBlO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHBhcmFtLmdldFZhbHVlQnlTdHJpbmcoRXhwcmVzc2lvbktleUJsZW5kKS5pc051bGwoKSB8fFxuICAgICAgICBwYXJhbS5nZXRWYWx1ZUJ5U3RyaW5nKEV4cHJlc3Npb25LZXlCbGVuZCkuZ2V0U3RyaW5nKCkgPT0gQmxlbmRWYWx1ZUFkZFxuICAgICAgKSB7XG4gICAgICAgIGJsZW5kVHlwZSA9IEV4cHJlc3Npb25CbGVuZFR5cGUuRXhwcmVzc2lvbkJsZW5kVHlwZV9BZGQ7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBwYXJhbS5nZXRWYWx1ZUJ5U3RyaW5nKEV4cHJlc3Npb25LZXlCbGVuZCkuZ2V0U3RyaW5nKCkgPT1cbiAgICAgICAgQmxlbmRWYWx1ZU11bHRpcGx5XG4gICAgICApIHtcbiAgICAgICAgYmxlbmRUeXBlID0gRXhwcmVzc2lvbkJsZW5kVHlwZS5FeHByZXNzaW9uQmxlbmRUeXBlX011bHRpcGx5O1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcGFyYW0uZ2V0VmFsdWVCeVN0cmluZyhFeHByZXNzaW9uS2V5QmxlbmQpLmdldFN0cmluZygpID09XG4gICAgICAgIEJsZW5kVmFsdWVPdmVyd3JpdGVcbiAgICAgICkge1xuICAgICAgICBibGVuZFR5cGUgPSBFeHByZXNzaW9uQmxlbmRUeXBlLkV4cHJlc3Npb25CbGVuZFR5cGVfT3ZlcndyaXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g44Gd44Gu5LuWIOS7leanmOOBq+OBquOBhOWApOOCkuioreWumuOBl+OBn+aZguOBr+WKoOeul+ODouODvOODieOBq+OBmeOCi+OBk+OBqOOBp+W+qeaXp1xuICAgICAgICBibGVuZFR5cGUgPSBFeHByZXNzaW9uQmxlbmRUeXBlLkV4cHJlc3Npb25CbGVuZFR5cGVfQWRkO1xuICAgICAgfVxuXG4gICAgICAvLyDoqK3lrprjgqrjg5bjgrjjgqfjgq/jg4jjgpLkvZzmiJDjgZfjgabjg6rjgrnjg4jjgavov73liqDjgZnjgotcbiAgICAgIGNvbnN0IGl0ZW06IEV4cHJlc3Npb25QYXJhbWV0ZXIgPSBuZXcgRXhwcmVzc2lvblBhcmFtZXRlcigpO1xuXG4gICAgICBpdGVtLnBhcmFtZXRlcklkID0gcGFyYW1ldGVySWQ7XG4gICAgICBpdGVtLmJsZW5kVHlwZSA9IGJsZW5kVHlwZTtcbiAgICAgIGl0ZW0udmFsdWUgPSB2YWx1ZTtcblxuICAgICAgZXhwcmVzc2lvbi5fcGFyYW1ldGVycy5wdXNoQmFjayhpdGVtKTtcbiAgICB9XG5cbiAgICBDdWJpc21Kc29uLmRlbGV0ZShqc29uKTsgLy8gSlNPTuODh+ODvOOCv+OBr+S4jeimgeOBq+OBquOBo+OBn+OCieWJiumZpOOBmeOCi1xuICAgIHJldHVybiBleHByZXNzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBruODkeODqeODoeODvOOCv+OBruabtOaWsOOBruWun+ihjFxuICAgKiBAcGFyYW0gbW9kZWwg5a++6LGh44Gu44Oi44OH44OrXG4gICAqIEBwYXJhbSB1c2VyVGltZVNlY29uZHMg44OH44Or44K/5pmC6ZaT44Gu56mN566X5YCkW+enkl1cbiAgICogQHBhcmFtIHdlaWdodCDjg6Ljg7zjgrfjg6fjg7Pjga7ph43jgb9cbiAgICogQHBhcmFtIG1vdGlvblF1ZXVlRW50cnkgQ3ViaXNtTW90aW9uUXVldWVNYW5hZ2Vy44Gn566h55CG44GV44KM44Gm44GE44KL44Oi44O844K344On44OzXG4gICAqL1xuICBwdWJsaWMgZG9VcGRhdGVQYXJhbWV0ZXJzKFxuICAgIG1vZGVsOiBDdWJpc21Nb2RlbCxcbiAgICB1c2VyVGltZVNlY29uZHM6IG51bWJlcixcbiAgICB3ZWlnaHQ6IG51bWJlcixcbiAgICBtb3Rpb25RdWV1ZUVudHJ5OiBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5XG4gICk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fcGFyYW1ldGVycy5nZXRTaXplKCk7ICsraSkge1xuICAgICAgY29uc3QgcGFyYW1ldGVyOiBFeHByZXNzaW9uUGFyYW1ldGVyID0gdGhpcy5fcGFyYW1ldGVycy5hdChpKTtcblxuICAgICAgc3dpdGNoIChwYXJhbWV0ZXIuYmxlbmRUeXBlKSB7XG4gICAgICAgIGNhc2UgRXhwcmVzc2lvbkJsZW5kVHlwZS5FeHByZXNzaW9uQmxlbmRUeXBlX0FkZDoge1xuICAgICAgICAgIG1vZGVsLmFkZFBhcmFtZXRlclZhbHVlQnlJZChcbiAgICAgICAgICAgIHBhcmFtZXRlci5wYXJhbWV0ZXJJZCxcbiAgICAgICAgICAgIHBhcmFtZXRlci52YWx1ZSxcbiAgICAgICAgICAgIHdlaWdodFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBFeHByZXNzaW9uQmxlbmRUeXBlLkV4cHJlc3Npb25CbGVuZFR5cGVfTXVsdGlwbHk6IHtcbiAgICAgICAgICBtb2RlbC5tdWx0aXBseVBhcmFtZXRlclZhbHVlQnlJZChcbiAgICAgICAgICAgIHBhcmFtZXRlci5wYXJhbWV0ZXJJZCxcbiAgICAgICAgICAgIHBhcmFtZXRlci52YWx1ZSxcbiAgICAgICAgICAgIHdlaWdodFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBFeHByZXNzaW9uQmxlbmRUeXBlLkV4cHJlc3Npb25CbGVuZFR5cGVfT3ZlcndyaXRlOiB7XG4gICAgICAgICAgbW9kZWwuc2V0UGFyYW1ldGVyVmFsdWVCeUlkKFxuICAgICAgICAgICAgcGFyYW1ldGVyLnBhcmFtZXRlcklkLFxuICAgICAgICAgICAgcGFyYW1ldGVyLnZhbHVlLFxuICAgICAgICAgICAgd2VpZ2h0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIOS7leanmOOBq+OBquOBhOWApOOCkuioreWumuOBl+OBn+aZguOBr+OBmeOBp+OBq+WKoOeul+ODouODvOODieOBq+OBquOBo+OBpuOBhOOCi1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9wYXJhbWV0ZXJzID0gbmV3IGNzbVZlY3RvcjxFeHByZXNzaW9uUGFyYW1ldGVyPigpO1xuICB9XG5cbiAgX3BhcmFtZXRlcnM6IGNzbVZlY3RvcjxFeHByZXNzaW9uUGFyYW1ldGVyPjsgLy8g6KGo5oOF44Gu44OR44Op44Oh44O844K/5oOF5aCx44Oq44K544OIXG59XG5cbi8qKlxuICog6KGo5oOF44OR44Op44Oh44O844K/5YCk44Gu6KiI566X5pa55byPXG4gKi9cbmV4cG9ydCBlbnVtIEV4cHJlc3Npb25CbGVuZFR5cGUge1xuICBFeHByZXNzaW9uQmxlbmRUeXBlX0FkZCA9IDAsIC8vIOWKoOeul1xuICBFeHByZXNzaW9uQmxlbmRUeXBlX011bHRpcGx5ID0gMSwgLy8g5LmX566XXG4gIEV4cHJlc3Npb25CbGVuZFR5cGVfT3ZlcndyaXRlID0gMiAvLyDkuIrmm7jjgY1cbn1cblxuLyoqXG4gKiDooajmg4Xjga7jg5Hjg6njg6Hjg7zjgr/mg4XloLFcbiAqL1xuZXhwb3J0IGNsYXNzIEV4cHJlc3Npb25QYXJhbWV0ZXIge1xuICBwYXJhbWV0ZXJJZDogQ3ViaXNtSWRIYW5kbGU7IC8vIOODkeODqeODoeODvOOCv0lEXG4gIGJsZW5kVHlwZTogRXhwcmVzc2lvbkJsZW5kVHlwZTsgLy8g44OR44Op44Oh44O844K/44Gu5ryU566X56iu6aGeXG4gIHZhbHVlOiBudW1iZXI7IC8vIOWApFxufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jdWJpc21leHByZXNzaW9ubW90aW9uJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21FeHByZXNzaW9uTW90aW9uID0gJC5DdWJpc21FeHByZXNzaW9uTW90aW9uO1xuICBleHBvcnQgdHlwZSBDdWJpc21FeHByZXNzaW9uTW90aW9uID0gJC5DdWJpc21FeHByZXNzaW9uTW90aW9uO1xuICBleHBvcnQgY29uc3QgRXhwcmVzc2lvbkJsZW5kVHlwZSA9ICQuRXhwcmVzc2lvbkJsZW5kVHlwZTtcbiAgZXhwb3J0IHR5cGUgRXhwcmVzc2lvbkJsZW5kVHlwZSA9ICQuRXhwcmVzc2lvbkJsZW5kVHlwZTtcbiAgZXhwb3J0IGNvbnN0IEV4cHJlc3Npb25QYXJhbWV0ZXIgPSAkLkV4cHJlc3Npb25QYXJhbWV0ZXI7XG4gIGV4cG9ydCB0eXBlIEV4cHJlc3Npb25QYXJhbWV0ZXIgPSAkLkV4cHJlc3Npb25QYXJhbWV0ZXI7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQUE7QUFpSUE7QUFBQTtBQUdBOztBQUNBO0FBOUhBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBU0E7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFBQTtBQXhJQTtBQTZJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBSkE7QUFPQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismexpressionmotion.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismmotion.ts":
/*!**********************************************!*\
  !*** ./Framework/src/motion/cubismmotion.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMotion = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismmath_1 = __webpack_require__(/*! ../math/cubismmath */ \"./Framework/src/math/cubismmath.ts\");\nvar csmstring_1 = __webpack_require__(/*! ../type/csmstring */ \"./Framework/src/type/csmstring.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar acubismmotion_1 = __webpack_require__(/*! ./acubismmotion */ \"./Framework/src/motion/acubismmotion.ts\");\nvar cubismmotioninternal_1 = __webpack_require__(/*! ./cubismmotioninternal */ \"./Framework/src/motion/cubismmotioninternal.ts\");\nvar cubismmotionjson_1 = __webpack_require__(/*! ./cubismmotionjson */ \"./Framework/src/motion/cubismmotionjson.ts\");\nvar EffectNameEyeBlink = 'EyeBlink';\nvar EffectNameLipSync = 'LipSync';\nvar TargetNameModel = 'Model';\nvar TargetNameParameter = 'Parameter';\nvar TargetNamePartOpacity = 'PartOpacity';\nvar UseOldBeziersCurveMotion = false;\nfunction lerpPoints(a, b, t) {\n    var result = new cubismmotioninternal_1.CubismMotionPoint();\n    result.time = a.time + (b.time - a.time) * t;\n    result.value = a.value + (b.value - a.value) * t;\n    return result;\n}\nfunction linearEvaluate(points, time) {\n    var t = (time - points[0].time) / (points[1].time - points[0].time);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n    return points[0].value + (points[1].value - points[0].value) * t;\n}\nfunction bezierEvaluate(points, time) {\n    var t = (time - points[0].time) / (points[3].time - points[0].time);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n    var p01 = lerpPoints(points[0], points[1], t);\n    var p12 = lerpPoints(points[1], points[2], t);\n    var p23 = lerpPoints(points[2], points[3], t);\n    var p012 = lerpPoints(p01, p12, t);\n    var p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n}\nfunction bezierEvaluateBinarySearch(points, time) {\n    var x_error = 0.01;\n    var x = time;\n    var x1 = points[0].time;\n    var x2 = points[3].time;\n    var cx1 = points[1].time;\n    var cx2 = points[2].time;\n    var ta = 0.0;\n    var tb = 1.0;\n    var t = 0.0;\n    var i = 0;\n    for (var var33 = true; i < 20; ++i) {\n        if (x < x1 + x_error) {\n            t = ta;\n            break;\n        }\n        if (x2 - x_error < x) {\n            t = tb;\n            break;\n        }\n        var centerx = (cx1 + cx2) * 0.5;\n        cx1 = (x1 + cx1) * 0.5;\n        cx2 = (x2 + cx2) * 0.5;\n        var ctrlx12 = (cx1 + centerx) * 0.5;\n        var ctrlx21 = (cx2 + centerx) * 0.5;\n        centerx = (ctrlx12 + ctrlx21) * 0.5;\n        if (x < centerx) {\n            tb = (ta + tb) * 0.5;\n            if (centerx - x_error < x) {\n                t = tb;\n                break;\n            }\n            x2 = centerx;\n            cx2 = ctrlx12;\n        }\n        else {\n            ta = (ta + tb) * 0.5;\n            if (x < centerx + x_error) {\n                t = ta;\n                break;\n            }\n            x1 = centerx;\n            cx1 = ctrlx21;\n        }\n    }\n    if (i == 20) {\n        t = (ta + tb) * 0.5;\n    }\n    if (t < 0.0) {\n        t = 0.0;\n    }\n    if (t > 1.0) {\n        t = 1.0;\n    }\n    var p01 = lerpPoints(points[0], points[1], t);\n    var p12 = lerpPoints(points[1], points[2], t);\n    var p23 = lerpPoints(points[2], points[3], t);\n    var p012 = lerpPoints(p01, p12, t);\n    var p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n}\nfunction bezierEvaluateCardanoInterpretation(points, time) {\n    var x = time;\n    var x1 = points[0].time;\n    var x2 = points[3].time;\n    var cx1 = points[1].time;\n    var cx2 = points[2].time;\n    var a = x2 - 3.0 * cx2 + 3.0 * cx1 - x1;\n    var b = 3.0 * cx2 - 6.0 * cx1 + 3.0 * x1;\n    var c = 3.0 * cx1 - 3.0 * x1;\n    var d = x1 - x;\n    var t = cubismmath_1.CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\n    var p01 = lerpPoints(points[0], points[1], t);\n    var p12 = lerpPoints(points[1], points[2], t);\n    var p23 = lerpPoints(points[2], points[3], t);\n    var p012 = lerpPoints(p01, p12, t);\n    var p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n}\nfunction steppedEvaluate(points, time) {\n    return points[0].value;\n}\nfunction inverseSteppedEvaluate(points, time) {\n    return points[1].value;\n}\nfunction evaluateCurve(motionData, index, time) {\n    var curve = motionData.curves.at(index);\n    var target = -1;\n    var totalSegmentCount = curve.baseSegmentIndex + curve.segmentCount;\n    var pointPosition = 0;\n    for (var i = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\n        pointPosition =\n            motionData.segments.at(i).basePointIndex +\n                (motionData.segments.at(i).segmentType ==\n                    cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Bezier\n                    ? 3\n                    : 1);\n        if (motionData.points.at(pointPosition).time > time) {\n            target = i;\n            break;\n        }\n    }\n    if (target == -1) {\n        return motionData.points.at(pointPosition).value;\n    }\n    var segment = motionData.segments.at(target);\n    return segment.evaluate(motionData.points.get(segment.basePointIndex), time);\n}\nvar CubismMotion = (function (_super) {\n    __extends(CubismMotion, _super);\n    function CubismMotion() {\n        var _this = _super.call(this) || this;\n        _this._sourceFrameRate = 30.0;\n        _this._loopDurationSeconds = -1.0;\n        _this._isLoop = false;\n        _this._isLoopFadeIn = true;\n        _this._lastWeight = 0.0;\n        _this._motionData = null;\n        _this._modelCurveIdEyeBlink = null;\n        _this._modelCurveIdLipSync = null;\n        _this._eyeBlinkParameterIds = null;\n        _this._lipSyncParameterIds = null;\n        return _this;\n    }\n    CubismMotion.create = function (buffer, size, onFinishedMotionHandler) {\n        var ret = new CubismMotion();\n        ret.parse(buffer, size);\n        ret._sourceFrameRate = ret._motionData.fps;\n        ret._loopDurationSeconds = ret._motionData.duration;\n        ret._onFinishedMotion = onFinishedMotionHandler;\n        return ret;\n    };\n    CubismMotion.prototype.doUpdateParameters = function (model, userTimeSeconds, fadeWeight, motionQueueEntry) {\n        if (this._modelCurveIdEyeBlink == null) {\n            this._modelCurveIdEyeBlink = live2dcubismframework_1.CubismFramework.getIdManager().getId(EffectNameEyeBlink);\n        }\n        if (this._modelCurveIdLipSync == null) {\n            this._modelCurveIdLipSync = live2dcubismframework_1.CubismFramework.getIdManager().getId(EffectNameLipSync);\n        }\n        var timeOffsetSeconds = userTimeSeconds - motionQueueEntry.getStartTime();\n        if (timeOffsetSeconds < 0.0) {\n            timeOffsetSeconds = 0.0;\n        }\n        var lipSyncValue = Number.MAX_VALUE;\n        var eyeBlinkValue = Number.MAX_VALUE;\n        var MaxTargetSize = 64;\n        var lipSyncFlags = 0;\n        var eyeBlinkFlags = 0;\n        if (this._eyeBlinkParameterIds.getSize() > MaxTargetSize) {\n            cubismdebug_1.CubismLogDebug('too many eye blink targets : {0}', this._eyeBlinkParameterIds.getSize());\n        }\n        if (this._lipSyncParameterIds.getSize() > MaxTargetSize) {\n            cubismdebug_1.CubismLogDebug('too many lip sync targets : {0}', this._lipSyncParameterIds.getSize());\n        }\n        var tmpFadeIn = this._fadeInSeconds <= 0.0\n            ? 1.0\n            : cubismmath_1.CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                this._fadeInSeconds);\n        var tmpFadeOut = this._fadeOutSeconds <= 0.0 || motionQueueEntry.getEndTime() < 0.0\n            ? 1.0\n            : cubismmath_1.CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) /\n                this._fadeOutSeconds);\n        var value;\n        var c, parameterIndex;\n        var time = timeOffsetSeconds;\n        if (this._isLoop) {\n            while (time > this._motionData.duration) {\n                time -= this._motionData.duration;\n            }\n        }\n        var curves = this._motionData.curves;\n        for (c = 0; c < this._motionData.curveCount &&\n            curves.at(c).type ==\n                cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model; ++c) {\n            value = evaluateCurve(this._motionData, c, time);\n            if (curves.at(c).id == this._modelCurveIdEyeBlink) {\n                eyeBlinkValue = value;\n            }\n            else if (curves.at(c).id == this._modelCurveIdLipSync) {\n                lipSyncValue = value;\n            }\n        }\n        var parameterMotionCurveCount = 0;\n        for (; c < this._motionData.curveCount &&\n            curves.at(c).type ==\n                cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter; ++c) {\n            parameterMotionCurveCount++;\n            parameterIndex = model.getParameterIndex(curves.at(c).id);\n            if (parameterIndex == -1) {\n                continue;\n            }\n            var sourceValue = model.getParameterValueByIndex(parameterIndex);\n            value = evaluateCurve(this._motionData, c, time);\n            if (eyeBlinkValue != Number.MAX_VALUE) {\n                for (var i = 0; i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                    if (this._eyeBlinkParameterIds.at(i) == curves.at(c).id) {\n                        value *= eyeBlinkValue;\n                        eyeBlinkFlags |= 1 << i;\n                        break;\n                    }\n                }\n            }\n            if (lipSyncValue != Number.MAX_VALUE) {\n                for (var i = 0; i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                    if (this._lipSyncParameterIds.at(i) == curves.at(c).id) {\n                        value += lipSyncValue;\n                        lipSyncFlags |= 1 << i;\n                        break;\n                    }\n                }\n            }\n            var v = void 0;\n            if (curves.at(c).fadeInTime < 0.0 && curves.at(c).fadeOutTime < 0.0) {\n                v = sourceValue + (value - sourceValue) * fadeWeight;\n            }\n            else {\n                var fin = void 0;\n                var fout = void 0;\n                if (curves.at(c).fadeInTime < 0.0) {\n                    fin = tmpFadeIn;\n                }\n                else {\n                    fin =\n                        curves.at(c).fadeInTime == 0.0\n                            ? 1.0\n                            : cubismmath_1.CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                                curves.at(c).fadeInTime);\n                }\n                if (curves.at(c).fadeOutTime < 0.0) {\n                    fout = tmpFadeOut;\n                }\n                else {\n                    fout =\n                        curves.at(c).fadeOutTime == 0.0 ||\n                            motionQueueEntry.getEndTime() < 0.0\n                            ? 1.0\n                            : cubismmath_1.CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) /\n                                curves.at(c).fadeOutTime);\n                }\n                var paramWeight = this._weight * fin * fout;\n                v = sourceValue + (value - sourceValue) * paramWeight;\n            }\n            model.setParameterValueByIndex(parameterIndex, v, 1.0);\n        }\n        {\n            if (eyeBlinkValue != Number.MAX_VALUE) {\n                for (var i = 0; i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                    var sourceValue = model.getParameterValueById(this._eyeBlinkParameterIds.at(i));\n                    if ((eyeBlinkFlags >> i) & 0x01) {\n                        continue;\n                    }\n                    var v = sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\n                    model.setParameterValueById(this._eyeBlinkParameterIds.at(i), v);\n                }\n            }\n            if (lipSyncValue != Number.MAX_VALUE) {\n                for (var i = 0; i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                    var sourceValue = model.getParameterValueById(this._lipSyncParameterIds.at(i));\n                    if ((lipSyncFlags >> i) & 0x01) {\n                        continue;\n                    }\n                    var v = sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\n                    model.setParameterValueById(this._lipSyncParameterIds.at(i), v);\n                }\n            }\n        }\n        for (; c < this._motionData.curveCount &&\n            curves.at(c).type ==\n                cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity; ++c) {\n            parameterIndex = model.getParameterIndex(curves.at(c).id);\n            if (parameterIndex == -1) {\n                continue;\n            }\n            value = evaluateCurve(this._motionData, c, time);\n            model.setParameterValueByIndex(parameterIndex, value);\n        }\n        if (timeOffsetSeconds >= this._motionData.duration) {\n            if (this._isLoop) {\n                motionQueueEntry.setStartTime(userTimeSeconds);\n                if (this._isLoopFadeIn) {\n                    motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n                }\n            }\n            else {\n                if (this._onFinishedMotion) {\n                    this._onFinishedMotion(this);\n                }\n                motionQueueEntry.setIsFinished(true);\n            }\n        }\n        this._lastWeight = fadeWeight;\n    };\n    CubismMotion.prototype.setIsLoop = function (loop) {\n        this._isLoop = loop;\n    };\n    CubismMotion.prototype.isLoop = function () {\n        return this._isLoop;\n    };\n    CubismMotion.prototype.setIsLoopFadeIn = function (loopFadeIn) {\n        this._isLoopFadeIn = loopFadeIn;\n    };\n    CubismMotion.prototype.isLoopFadeIn = function () {\n        return this._isLoopFadeIn;\n    };\n    CubismMotion.prototype.getDuration = function () {\n        return this._isLoop ? -1.0 : this._loopDurationSeconds;\n    };\n    CubismMotion.prototype.getLoopDuration = function () {\n        return this._loopDurationSeconds;\n    };\n    CubismMotion.prototype.setParameterFadeInTime = function (parameterId, value) {\n        var curves = this._motionData.curves;\n        for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                curves.at(i).fadeInTime = value;\n                return;\n            }\n        }\n    };\n    CubismMotion.prototype.setParameterFadeOutTime = function (parameterId, value) {\n        var curves = this._motionData.curves;\n        for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                curves.at(i).fadeOutTime = value;\n                return;\n            }\n        }\n    };\n    CubismMotion.prototype.getParameterFadeInTime = function (parameterId) {\n        var curves = this._motionData.curves;\n        for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                return curves.at(i).fadeInTime;\n            }\n        }\n        return -1;\n    };\n    CubismMotion.prototype.getParameterFadeOutTime = function (parameterId) {\n        var curves = this._motionData.curves;\n        for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n                return curves.at(i).fadeOutTime;\n            }\n        }\n        return -1;\n    };\n    CubismMotion.prototype.setEffectIds = function (eyeBlinkParameterIds, lipSyncParameterIds) {\n        this._eyeBlinkParameterIds = eyeBlinkParameterIds;\n        this._lipSyncParameterIds = lipSyncParameterIds;\n    };\n    CubismMotion.prototype.release = function () {\n        this._motionData = void 0;\n        this._motionData = null;\n    };\n    CubismMotion.prototype.parse = function (motionJson, size) {\n        this._motionData = new cubismmotioninternal_1.CubismMotionData();\n        var json = new cubismmotionjson_1.CubismMotionJson(motionJson, size);\n        this._motionData.duration = json.getMotionDuration();\n        this._motionData.loop = json.isMotionLoop();\n        this._motionData.curveCount = json.getMotionCurveCount();\n        this._motionData.fps = json.getMotionFps();\n        this._motionData.eventCount = json.getEventCount();\n        var areBeziersRestructed = json.getEvaluationOptionFlag(cubismmotionjson_1.EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted);\n        if (json.isExistMotionFadeInTime()) {\n            this._fadeInSeconds =\n                json.getMotionFadeInTime() < 0.0 ? 1.0 : json.getMotionFadeInTime();\n        }\n        else {\n            this._fadeInSeconds = 1.0;\n        }\n        if (json.isExistMotionFadeOutTime()) {\n            this._fadeOutSeconds =\n                json.getMotionFadeOutTime() < 0.0 ? 1.0 : json.getMotionFadeOutTime();\n        }\n        else {\n            this._fadeOutSeconds = 1.0;\n        }\n        this._motionData.curves.updateSize(this._motionData.curveCount, cubismmotioninternal_1.CubismMotionCurve, true);\n        this._motionData.segments.updateSize(json.getMotionTotalSegmentCount(), cubismmotioninternal_1.CubismMotionSegment, true);\n        this._motionData.points.updateSize(json.getMotionTotalPointCount(), cubismmotioninternal_1.CubismMotionPoint, true);\n        this._motionData.events.updateSize(this._motionData.eventCount, cubismmotioninternal_1.CubismMotionEvent, true);\n        var totalPointCount = 0;\n        var totalSegmentCount = 0;\n        for (var curveCount = 0; curveCount < this._motionData.curveCount; ++curveCount) {\n            if (json.getMotionCurveTarget(curveCount) == TargetNameModel) {\n                this._motionData.curves.at(curveCount).type =\n                    cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n            }\n            else if (json.getMotionCurveTarget(curveCount) == TargetNameParameter) {\n                this._motionData.curves.at(curveCount).type =\n                    cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n            }\n            else if (json.getMotionCurveTarget(curveCount) == TargetNamePartOpacity) {\n                this._motionData.curves.at(curveCount).type =\n                    cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n            }\n            else {\n                cubismdebug_1.CubismLogWarning('Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!');\n            }\n            this._motionData.curves.at(curveCount).id = json.getMotionCurveId(curveCount);\n            this._motionData.curves.at(curveCount).baseSegmentIndex = totalSegmentCount;\n            this._motionData.curves.at(curveCount).fadeInTime = json.isExistMotionCurveFadeInTime(curveCount)\n                ? json.getMotionCurveFadeInTime(curveCount)\n                : -1.0;\n            this._motionData.curves.at(curveCount).fadeOutTime = json.isExistMotionCurveFadeOutTime(curveCount)\n                ? json.getMotionCurveFadeOutTime(curveCount)\n                : -1.0;\n            for (var segmentPosition = 0; segmentPosition < json.getMotionCurveSegmentCount(curveCount);) {\n                if (segmentPosition == 0) {\n                    this._motionData.segments.at(totalSegmentCount).basePointIndex = totalPointCount;\n                    this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition);\n                    this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                    totalPointCount += 1;\n                    segmentPosition += 2;\n                }\n                else {\n                    this._motionData.segments.at(totalSegmentCount).basePointIndex =\n                        totalPointCount - 1;\n                }\n                var segment = json.getMotionCurveSegment(curveCount, segmentPosition);\n                switch (segment) {\n                    case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Linear: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Linear;\n                        this._motionData.segments.at(totalSegmentCount).evaluate = linearEvaluate;\n                        this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        totalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    }\n                    case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Bezier: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\n                        if (areBeziersRestructed || UseOldBeziersCurveMotion) {\n                            this._motionData.segments.at(totalSegmentCount).evaluate = bezierEvaluate;\n                        }\n                        else {\n                            this._motionData.segments.at(totalSegmentCount).evaluate = bezierEvaluateCardanoInterpretation;\n                        }\n                        this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        this._motionData.points.at(totalPointCount + 1).time = json.getMotionCurveSegment(curveCount, segmentPosition + 3);\n                        this._motionData.points.at(totalPointCount + 1).value = json.getMotionCurveSegment(curveCount, segmentPosition + 4);\n                        this._motionData.points.at(totalPointCount + 2).time = json.getMotionCurveSegment(curveCount, segmentPosition + 5);\n                        this._motionData.points.at(totalPointCount + 2).value = json.getMotionCurveSegment(curveCount, segmentPosition + 6);\n                        totalPointCount += 3;\n                        segmentPosition += 7;\n                        break;\n                    }\n                    case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Stepped: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\n                        this._motionData.segments.at(totalSegmentCount).evaluate = steppedEvaluate;\n                        this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        totalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    }\n                    case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped: {\n                        this._motionData.segments.at(totalSegmentCount).segmentType =\n                            cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\n                        this._motionData.segments.at(totalSegmentCount).evaluate = inverseSteppedEvaluate;\n                        this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                        this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                        totalPointCount += 1;\n                        segmentPosition += 3;\n                        break;\n                    }\n                    default: {\n                        cubismdebug_1.CSM_ASSERT(0);\n                        break;\n                    }\n                }\n                ++this._motionData.curves.at(curveCount).segmentCount;\n                ++totalSegmentCount;\n            }\n        }\n        for (var userdatacount = 0; userdatacount < json.getEventCount(); ++userdatacount) {\n            this._motionData.events.at(userdatacount).fireTime = json.getEventTime(userdatacount);\n            this._motionData.events.at(userdatacount).value = json.getEventValue(userdatacount);\n        }\n        json.release();\n        json = void 0;\n        json = null;\n    };\n    CubismMotion.prototype.getFiredEvent = function (beforeCheckTimeSeconds, motionTimeSeconds) {\n        this._firedEventValues.updateSize(0);\n        for (var u = 0; u < this._motionData.eventCount; ++u) {\n            if (this._motionData.events.at(u).fireTime > beforeCheckTimeSeconds &&\n                this._motionData.events.at(u).fireTime <= motionTimeSeconds) {\n                this._firedEventValues.pushBack(new csmstring_1.csmString(this._motionData.events.at(u).value.s));\n            }\n        }\n        return this._firedEventValues;\n    };\n    return CubismMotion;\n}(acubismmotion_1.ACubismMotion));\nexports.CubismMotion = CubismMotion;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmotion */ \"./Framework/src/motion/cubismmotion.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotion = $.CubismMotion;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb24udHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb24udHM/ZmFmZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBDdWJpc21JZEhhbmRsZSB9IGZyb20gJy4uL2lkL2N1YmlzbWlkJztcbmltcG9ydCB7IEN1YmlzbUZyYW1ld29yayB9IGZyb20gJy4uL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgeyBDdWJpc21NYXRoIH0gZnJvbSAnLi4vbWF0aC9jdWJpc21tYXRoJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgY3NtU3RyaW5nIH0gZnJvbSAnLi4vdHlwZS9jc21zdHJpbmcnO1xuaW1wb3J0IHsgY3NtVmVjdG9yIH0gZnJvbSAnLi4vdHlwZS9jc212ZWN0b3InO1xuaW1wb3J0IHtcbiAgQ1NNX0FTU0VSVCxcbiAgQ3ViaXNtTG9nRGVidWcsXG4gIEN1YmlzbUxvZ1dhcm5pbmdcbn0gZnJvbSAnLi4vdXRpbHMvY3ViaXNtZGVidWcnO1xuaW1wb3J0IHsgQUN1YmlzbU1vdGlvbiwgRmluaXNoZWRNb3Rpb25DYWxsYmFjayB9IGZyb20gJy4vYWN1YmlzbW1vdGlvbic7XG5pbXBvcnQge1xuICBDdWJpc21Nb3Rpb25DdXJ2ZSxcbiAgQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXQsXG4gIEN1YmlzbU1vdGlvbkRhdGEsXG4gIEN1YmlzbU1vdGlvbkV2ZW50LFxuICBDdWJpc21Nb3Rpb25Qb2ludCxcbiAgQ3ViaXNtTW90aW9uU2VnbWVudCxcbiAgQ3ViaXNtTW90aW9uU2VnbWVudFR5cGVcbn0gZnJvbSAnLi9jdWJpc21tb3Rpb25pbnRlcm5hbCc7XG5pbXBvcnQgeyBDdWJpc21Nb3Rpb25Kc29uLCBFdmFsdWF0aW9uT3B0aW9uRmxhZyB9IGZyb20gJy4vY3ViaXNtbW90aW9uanNvbic7XG5pbXBvcnQgeyBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5IH0gZnJvbSAnLi9jdWJpc21tb3Rpb25xdWV1ZWVudHJ5JztcblxuY29uc3QgRWZmZWN0TmFtZUV5ZUJsaW5rID0gJ0V5ZUJsaW5rJztcbmNvbnN0IEVmZmVjdE5hbWVMaXBTeW5jID0gJ0xpcFN5bmMnO1xuY29uc3QgVGFyZ2V0TmFtZU1vZGVsID0gJ01vZGVsJztcbmNvbnN0IFRhcmdldE5hbWVQYXJhbWV0ZXIgPSAnUGFyYW1ldGVyJztcbmNvbnN0IFRhcmdldE5hbWVQYXJ0T3BhY2l0eSA9ICdQYXJ0T3BhY2l0eSc7XG5cbi8qKlxuICogQ3ViaXNtIFNESyBSMiDku6XliY3jga7jg6Ljg7zjgrfjg6fjg7PjgpLlho3nj77jgZXjgZvjgovjgarjgokgdHJ1ZSDjgIHjgqLjg4vjg6Hjg7zjgr/jga7jg6Ljg7zjgrfjg6fjg7PjgpLmraPjgZfjgY/lho3nj77jgZnjgovjgarjgokgZmFsc2Ug44CCXG4gKi9cbmNvbnN0IFVzZU9sZEJlemllcnNDdXJ2ZU1vdGlvbiA9IGZhbHNlO1xuXG5mdW5jdGlvbiBsZXJwUG9pbnRzKFxuICBhOiBDdWJpc21Nb3Rpb25Qb2ludCxcbiAgYjogQ3ViaXNtTW90aW9uUG9pbnQsXG4gIHQ6IG51bWJlclxuKTogQ3ViaXNtTW90aW9uUG9pbnQge1xuICBjb25zdCByZXN1bHQ6IEN1YmlzbU1vdGlvblBvaW50ID0gbmV3IEN1YmlzbU1vdGlvblBvaW50KCk7XG5cbiAgcmVzdWx0LnRpbWUgPSBhLnRpbWUgKyAoYi50aW1lIC0gYS50aW1lKSAqIHQ7XG4gIHJlc3VsdC52YWx1ZSA9IGEudmFsdWUgKyAoYi52YWx1ZSAtIGEudmFsdWUpICogdDtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBsaW5lYXJFdmFsdWF0ZShwb2ludHM6IEN1YmlzbU1vdGlvblBvaW50W10sIHRpbWU6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCB0OiBudW1iZXIgPSAodGltZSAtIHBvaW50c1swXS50aW1lKSAvIChwb2ludHNbMV0udGltZSAtIHBvaW50c1swXS50aW1lKTtcblxuICBpZiAodCA8IDAuMCkge1xuICAgIHQgPSAwLjA7XG4gIH1cblxuICByZXR1cm4gcG9pbnRzWzBdLnZhbHVlICsgKHBvaW50c1sxXS52YWx1ZSAtIHBvaW50c1swXS52YWx1ZSkgKiB0O1xufVxuXG5mdW5jdGlvbiBiZXppZXJFdmFsdWF0ZShwb2ludHM6IEN1YmlzbU1vdGlvblBvaW50W10sIHRpbWU6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCB0OiBudW1iZXIgPSAodGltZSAtIHBvaW50c1swXS50aW1lKSAvIChwb2ludHNbM10udGltZSAtIHBvaW50c1swXS50aW1lKTtcblxuICBpZiAodCA8IDAuMCkge1xuICAgIHQgPSAwLjA7XG4gIH1cblxuICBjb25zdCBwMDE6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwb2ludHNbMF0sIHBvaW50c1sxXSwgdCk7XG4gIGNvbnN0IHAxMjogQ3ViaXNtTW90aW9uUG9pbnQgPSBsZXJwUG9pbnRzKHBvaW50c1sxXSwgcG9pbnRzWzJdLCB0KTtcbiAgY29uc3QgcDIzOiBDdWJpc21Nb3Rpb25Qb2ludCA9IGxlcnBQb2ludHMocG9pbnRzWzJdLCBwb2ludHNbM10sIHQpO1xuXG4gIGNvbnN0IHAwMTI6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwMDEsIHAxMiwgdCk7XG4gIGNvbnN0IHAxMjM6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwMTIsIHAyMywgdCk7XG5cbiAgcmV0dXJuIGxlcnBQb2ludHMocDAxMiwgcDEyMywgdCkudmFsdWU7XG59XG5cbmZ1bmN0aW9uIGJlemllckV2YWx1YXRlQmluYXJ5U2VhcmNoKFxuICBwb2ludHM6IEN1YmlzbU1vdGlvblBvaW50W10sXG4gIHRpbWU6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgY29uc3QgeF9lcnJvciA9IDAuMDE7XG5cbiAgY29uc3QgeDogbnVtYmVyID0gdGltZTtcbiAgbGV0IHgxOiBudW1iZXIgPSBwb2ludHNbMF0udGltZTtcbiAgbGV0IHgyOiBudW1iZXIgPSBwb2ludHNbM10udGltZTtcbiAgbGV0IGN4MTogbnVtYmVyID0gcG9pbnRzWzFdLnRpbWU7XG4gIGxldCBjeDI6IG51bWJlciA9IHBvaW50c1syXS50aW1lO1xuXG4gIGxldCB0YSA9IDAuMDtcbiAgbGV0IHRiID0gMS4wO1xuICBsZXQgdCA9IDAuMDtcbiAgbGV0IGkgPSAwO1xuXG4gIGZvciAobGV0IHZhcjMzID0gdHJ1ZTsgaSA8IDIwOyArK2kpIHtcbiAgICBpZiAoeCA8IHgxICsgeF9lcnJvcikge1xuICAgICAgdCA9IHRhO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHgyIC0geF9lcnJvciA8IHgpIHtcbiAgICAgIHQgPSB0YjtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGxldCBjZW50ZXJ4OiBudW1iZXIgPSAoY3gxICsgY3gyKSAqIDAuNTtcbiAgICBjeDEgPSAoeDEgKyBjeDEpICogMC41O1xuICAgIGN4MiA9ICh4MiArIGN4MikgKiAwLjU7XG4gICAgY29uc3QgY3RybHgxMjogbnVtYmVyID0gKGN4MSArIGNlbnRlcngpICogMC41O1xuICAgIGNvbnN0IGN0cmx4MjE6IG51bWJlciA9IChjeDIgKyBjZW50ZXJ4KSAqIDAuNTtcbiAgICBjZW50ZXJ4ID0gKGN0cmx4MTIgKyBjdHJseDIxKSAqIDAuNTtcbiAgICBpZiAoeCA8IGNlbnRlcngpIHtcbiAgICAgIHRiID0gKHRhICsgdGIpICogMC41O1xuICAgICAgaWYgKGNlbnRlcnggLSB4X2Vycm9yIDwgeCkge1xuICAgICAgICB0ID0gdGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB4MiA9IGNlbnRlcng7XG4gICAgICBjeDIgPSBjdHJseDEyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YSA9ICh0YSArIHRiKSAqIDAuNTtcbiAgICAgIGlmICh4IDwgY2VudGVyeCArIHhfZXJyb3IpIHtcbiAgICAgICAgdCA9IHRhO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgeDEgPSBjZW50ZXJ4O1xuICAgICAgY3gxID0gY3RybHgyMTtcbiAgICB9XG4gIH1cblxuICBpZiAoaSA9PSAyMCkge1xuICAgIHQgPSAodGEgKyB0YikgKiAwLjU7XG4gIH1cblxuICBpZiAodCA8IDAuMCkge1xuICAgIHQgPSAwLjA7XG4gIH1cbiAgaWYgKHQgPiAxLjApIHtcbiAgICB0ID0gMS4wO1xuICB9XG5cbiAgY29uc3QgcDAxOiBDdWJpc21Nb3Rpb25Qb2ludCA9IGxlcnBQb2ludHMocG9pbnRzWzBdLCBwb2ludHNbMV0sIHQpO1xuICBjb25zdCBwMTI6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwb2ludHNbMV0sIHBvaW50c1syXSwgdCk7XG4gIGNvbnN0IHAyMzogQ3ViaXNtTW90aW9uUG9pbnQgPSBsZXJwUG9pbnRzKHBvaW50c1syXSwgcG9pbnRzWzNdLCB0KTtcblxuICBjb25zdCBwMDEyOiBDdWJpc21Nb3Rpb25Qb2ludCA9IGxlcnBQb2ludHMocDAxLCBwMTIsIHQpO1xuICBjb25zdCBwMTIzOiBDdWJpc21Nb3Rpb25Qb2ludCA9IGxlcnBQb2ludHMocDEyLCBwMjMsIHQpO1xuXG4gIHJldHVybiBsZXJwUG9pbnRzKHAwMTIsIHAxMjMsIHQpLnZhbHVlO1xufVxuXG5mdW5jdGlvbiBiZXppZXJFdmFsdWF0ZUNhcmRhbm9JbnRlcnByZXRhdGlvbihcbiAgcG9pbnRzOiBDdWJpc21Nb3Rpb25Qb2ludFtdLFxuICB0aW1lOiBudW1iZXJcbik6IG51bWJlciB7XG4gIGNvbnN0IHg6IG51bWJlciA9IHRpbWU7XG4gIGNvbnN0IHgxOiBudW1iZXIgPSBwb2ludHNbMF0udGltZTtcbiAgY29uc3QgeDI6IG51bWJlciA9IHBvaW50c1szXS50aW1lO1xuICBjb25zdCBjeDE6IG51bWJlciA9IHBvaW50c1sxXS50aW1lO1xuICBjb25zdCBjeDI6IG51bWJlciA9IHBvaW50c1syXS50aW1lO1xuXG4gIGNvbnN0IGE6IG51bWJlciA9IHgyIC0gMy4wICogY3gyICsgMy4wICogY3gxIC0geDE7XG4gIGNvbnN0IGI6IG51bWJlciA9IDMuMCAqIGN4MiAtIDYuMCAqIGN4MSArIDMuMCAqIHgxO1xuICBjb25zdCBjOiBudW1iZXIgPSAzLjAgKiBjeDEgLSAzLjAgKiB4MTtcbiAgY29uc3QgZDogbnVtYmVyID0geDEgLSB4O1xuXG4gIGNvbnN0IHQ6IG51bWJlciA9IEN1YmlzbU1hdGguY2FyZGFub0FsZ29yaXRobUZvckJlemllcihhLCBiLCBjLCBkKTtcblxuICBjb25zdCBwMDE6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwb2ludHNbMF0sIHBvaW50c1sxXSwgdCk7XG4gIGNvbnN0IHAxMjogQ3ViaXNtTW90aW9uUG9pbnQgPSBsZXJwUG9pbnRzKHBvaW50c1sxXSwgcG9pbnRzWzJdLCB0KTtcbiAgY29uc3QgcDIzOiBDdWJpc21Nb3Rpb25Qb2ludCA9IGxlcnBQb2ludHMocG9pbnRzWzJdLCBwb2ludHNbM10sIHQpO1xuXG4gIGNvbnN0IHAwMTI6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwMDEsIHAxMiwgdCk7XG4gIGNvbnN0IHAxMjM6IEN1YmlzbU1vdGlvblBvaW50ID0gbGVycFBvaW50cyhwMTIsIHAyMywgdCk7XG5cbiAgcmV0dXJuIGxlcnBQb2ludHMocDAxMiwgcDEyMywgdCkudmFsdWU7XG59XG5cbmZ1bmN0aW9uIHN0ZXBwZWRFdmFsdWF0ZShwb2ludHM6IEN1YmlzbU1vdGlvblBvaW50W10sIHRpbWU6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBwb2ludHNbMF0udmFsdWU7XG59XG5cbmZ1bmN0aW9uIGludmVyc2VTdGVwcGVkRXZhbHVhdGUoXG4gIHBvaW50czogQ3ViaXNtTW90aW9uUG9pbnRbXSxcbiAgdGltZTogbnVtYmVyXG4pOiBudW1iZXIge1xuICByZXR1cm4gcG9pbnRzWzFdLnZhbHVlO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUN1cnZlKFxuICBtb3Rpb25EYXRhOiBDdWJpc21Nb3Rpb25EYXRhLFxuICBpbmRleDogbnVtYmVyLFxuICB0aW1lOiBudW1iZXJcbik6IG51bWJlciB7XG4gIC8vIEZpbmQgc2VnbWVudCB0byBldmFsdWF0ZS5cbiAgY29uc3QgY3VydmU6IEN1YmlzbU1vdGlvbkN1cnZlID0gbW90aW9uRGF0YS5jdXJ2ZXMuYXQoaW5kZXgpO1xuXG4gIGxldCB0YXJnZXQgPSAtMTtcbiAgY29uc3QgdG90YWxTZWdtZW50Q291bnQ6IG51bWJlciA9IGN1cnZlLmJhc2VTZWdtZW50SW5kZXggKyBjdXJ2ZS5zZWdtZW50Q291bnQ7XG4gIGxldCBwb2ludFBvc2l0aW9uID0gMDtcbiAgZm9yIChsZXQgaTogbnVtYmVyID0gY3VydmUuYmFzZVNlZ21lbnRJbmRleDsgaSA8IHRvdGFsU2VnbWVudENvdW50OyArK2kpIHtcbiAgICAvLyBHZXQgZmlyc3QgcG9pbnQgb2YgbmV4dCBzZWdtZW50LlxuICAgIHBvaW50UG9zaXRpb24gPVxuICAgICAgbW90aW9uRGF0YS5zZWdtZW50cy5hdChpKS5iYXNlUG9pbnRJbmRleCArXG4gICAgICAobW90aW9uRGF0YS5zZWdtZW50cy5hdChpKS5zZWdtZW50VHlwZSA9PVxuICAgICAgQ3ViaXNtTW90aW9uU2VnbWVudFR5cGUuQ3ViaXNtTW90aW9uU2VnbWVudFR5cGVfQmV6aWVyXG4gICAgICAgID8gM1xuICAgICAgICA6IDEpO1xuXG4gICAgLy8gQnJlYWsgaWYgdGltZSBsaWVzIHdpdGhpbiBjdXJyZW50IHNlZ21lbnQuXG4gICAgaWYgKG1vdGlvbkRhdGEucG9pbnRzLmF0KHBvaW50UG9zaXRpb24pLnRpbWUgPiB0aW1lKSB7XG4gICAgICB0YXJnZXQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRhcmdldCA9PSAtMSkge1xuICAgIHJldHVybiBtb3Rpb25EYXRhLnBvaW50cy5hdChwb2ludFBvc2l0aW9uKS52YWx1ZTtcbiAgfVxuXG4gIGNvbnN0IHNlZ21lbnQ6IEN1YmlzbU1vdGlvblNlZ21lbnQgPSBtb3Rpb25EYXRhLnNlZ21lbnRzLmF0KHRhcmdldCk7XG5cbiAgcmV0dXJuIHNlZ21lbnQuZXZhbHVhdGUobW90aW9uRGF0YS5wb2ludHMuZ2V0KHNlZ21lbnQuYmFzZVBvaW50SW5kZXgpLCB0aW1lKTtcbn1cblxuLyoqXG4gKiDjg6Ljg7zjgrfjg6fjg7Pjgq/jg6njgrlcbiAqXG4gKiDjg6Ljg7zjgrfjg6fjg7Pjga7jgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vdGlvbiBleHRlbmRzIEFDdWJpc21Nb3Rpb24ge1xuICAvKipcbiAgICog44Kk44Oz44K544K/44Oz44K544KS5L2c5oiQ44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSBidWZmZXIgbW90aW9uMy5qc29u44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplIOODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKiBAcGFyYW0gb25GaW5pc2hlZE1vdGlvbkhhbmRsZXIg44Oi44O844K344On44Oz5YaN55Sf57WC5LqG5pmC44Gr5ZG844Gz5Ye644GV44KM44KL44Kz44O844Or44OQ44OD44Kv6Zai5pWwXG4gICAqIEByZXR1cm4g5L2c5oiQ44GV44KM44Gf44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgIHNpemU6IG51bWJlcixcbiAgICBvbkZpbmlzaGVkTW90aW9uSGFuZGxlcj86IEZpbmlzaGVkTW90aW9uQ2FsbGJhY2tcbiAgKTogQ3ViaXNtTW90aW9uIHtcbiAgICBjb25zdCByZXQgPSBuZXcgQ3ViaXNtTW90aW9uKCk7XG5cbiAgICByZXQucGFyc2UoYnVmZmVyLCBzaXplKTtcbiAgICByZXQuX3NvdXJjZUZyYW1lUmF0ZSA9IHJldC5fbW90aW9uRGF0YS5mcHM7XG4gICAgcmV0Ll9sb29wRHVyYXRpb25TZWNvbmRzID0gcmV0Ll9tb3Rpb25EYXRhLmR1cmF0aW9uO1xuICAgIHJldC5fb25GaW5pc2hlZE1vdGlvbiA9IG9uRmluaXNoZWRNb3Rpb25IYW5kbGVyO1xuXG4gICAgLy8gTk9URTogRWRpdG9y44Gn44Gv44Or44O844OX44GC44KK44Gu44Oi44O844K344On44Oz5pu444GN5Ye644GX44Gv6Z2e5a++5b+cXG4gICAgLy8gcmV0LT5fbG9vcCA9IChyZXQtPl9tb3Rpb25EYXRhLT5Mb29wID4gMCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjga7jg5Hjg6njg6Hjg7zjgr/jga7mm7TmlrDjga7lrp/ooYxcbiAgICogQHBhcmFtIG1vZGVsICAgICAgICAgICAgIOWvvuixoeOBruODouODh+ODq1xuICAgKiBAcGFyYW0gdXNlclRpbWVTZWNvbmRzICAg54++5Zyo44Gu5pmC5Yi7W+enkl1cbiAgICogQHBhcmFtIGZhZGVXZWlnaHQgICAgICAgIOODouODvOOCt+ODp+ODs+OBrumHjeOBv1xuICAgKiBAcGFyYW0gbW90aW9uUXVldWVFbnRyeSAgQ3ViaXNtTW90aW9uUXVldWVNYW5hZ2Vy44Gn566h55CG44GV44KM44Gm44GE44KL44Oi44O844K344On44OzXG4gICAqL1xuICBwdWJsaWMgZG9VcGRhdGVQYXJhbWV0ZXJzKFxuICAgIG1vZGVsOiBDdWJpc21Nb2RlbCxcbiAgICB1c2VyVGltZVNlY29uZHM6IG51bWJlcixcbiAgICBmYWRlV2VpZ2h0OiBudW1iZXIsXG4gICAgbW90aW9uUXVldWVFbnRyeTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeVxuICApOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbW9kZWxDdXJ2ZUlkRXllQmxpbmsgPT0gbnVsbCkge1xuICAgICAgdGhpcy5fbW9kZWxDdXJ2ZUlkRXllQmxpbmsgPSBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoXG4gICAgICAgIEVmZmVjdE5hbWVFeWVCbGlua1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbW9kZWxDdXJ2ZUlkTGlwU3luYyA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9tb2RlbEN1cnZlSWRMaXBTeW5jID0gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpLmdldElkKFxuICAgICAgICBFZmZlY3ROYW1lTGlwU3luY1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgdGltZU9mZnNldFNlY29uZHM6IG51bWJlciA9XG4gICAgICB1c2VyVGltZVNlY29uZHMgLSBtb3Rpb25RdWV1ZUVudHJ5LmdldFN0YXJ0VGltZSgpO1xuXG4gICAgaWYgKHRpbWVPZmZzZXRTZWNvbmRzIDwgMC4wKSB7XG4gICAgICB0aW1lT2Zmc2V0U2Vjb25kcyA9IDAuMDsgLy8g44Ko44Op44O85Zue6YG/XG4gICAgfVxuXG4gICAgbGV0IGxpcFN5bmNWYWx1ZTogbnVtYmVyID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBsZXQgZXllQmxpbmtWYWx1ZTogbnVtYmVyID0gTnVtYmVyLk1BWF9WQUxVRTtcblxuICAgIC8v44G+44Gw44Gf44GN44CB44Oq44OD44OX44K344Oz44Kv44Gu44GG44Gh44Oi44O844K344On44Oz44Gu6YGp55So44KS5qSc5Ye644GZ44KL44Gf44KB44Gu44OT44OD44OI77yIbWF4RmxhZ0NvdW505YCL44G+44GnXG4gICAgY29uc3QgTWF4VGFyZ2V0U2l6ZSA9IDY0O1xuICAgIGxldCBsaXBTeW5jRmxhZ3MgPSAwO1xuICAgIGxldCBleWVCbGlua0ZsYWdzID0gMDtcblxuICAgIC8v556s44GN44CB44Oq44OD44OX44K344Oz44Kv44Gu44K/44O844Ky44OD44OI5pWw44GM5LiK6ZmQ44KS6LaF44GI44Gm44GE44KL5aC05ZCIXG4gICAgaWYgKHRoaXMuX2V5ZUJsaW5rUGFyYW1ldGVySWRzLmdldFNpemUoKSA+IE1heFRhcmdldFNpemUpIHtcbiAgICAgIEN1YmlzbUxvZ0RlYnVnKFxuICAgICAgICAndG9vIG1hbnkgZXllIGJsaW5rIHRhcmdldHMgOiB7MH0nLFxuICAgICAgICB0aGlzLl9leWVCbGlua1BhcmFtZXRlcklkcy5nZXRTaXplKClcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9saXBTeW5jUGFyYW1ldGVySWRzLmdldFNpemUoKSA+IE1heFRhcmdldFNpemUpIHtcbiAgICAgIEN1YmlzbUxvZ0RlYnVnKFxuICAgICAgICAndG9vIG1hbnkgbGlwIHN5bmMgdGFyZ2V0cyA6IHswfScsXG4gICAgICAgIHRoaXMuX2xpcFN5bmNQYXJhbWV0ZXJJZHMuZ2V0U2l6ZSgpXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHRtcEZhZGVJbjogbnVtYmVyID1cbiAgICAgIHRoaXMuX2ZhZGVJblNlY29uZHMgPD0gMC4wXG4gICAgICAgID8gMS4wXG4gICAgICAgIDogQ3ViaXNtTWF0aC5nZXRFYXNpbmdTaW5lKFxuICAgICAgICAgICAgKHVzZXJUaW1lU2Vjb25kcyAtIG1vdGlvblF1ZXVlRW50cnkuZ2V0RmFkZUluU3RhcnRUaW1lKCkpIC9cbiAgICAgICAgICAgICAgdGhpcy5fZmFkZUluU2Vjb25kc1xuICAgICAgICAgICk7XG5cbiAgICBjb25zdCB0bXBGYWRlT3V0OiBudW1iZXIgPVxuICAgICAgdGhpcy5fZmFkZU91dFNlY29uZHMgPD0gMC4wIHx8IG1vdGlvblF1ZXVlRW50cnkuZ2V0RW5kVGltZSgpIDwgMC4wXG4gICAgICAgID8gMS4wXG4gICAgICAgIDogQ3ViaXNtTWF0aC5nZXRFYXNpbmdTaW5lKFxuICAgICAgICAgICAgKG1vdGlvblF1ZXVlRW50cnkuZ2V0RW5kVGltZSgpIC0gdXNlclRpbWVTZWNvbmRzKSAvXG4gICAgICAgICAgICAgIHRoaXMuX2ZhZGVPdXRTZWNvbmRzXG4gICAgICAgICAgKTtcbiAgICBsZXQgdmFsdWU6IG51bWJlcjtcbiAgICBsZXQgYzogbnVtYmVyLCBwYXJhbWV0ZXJJbmRleDogbnVtYmVyO1xuXG4gICAgLy8gJ1JlcGVhdCcgdGltZSBhcyBuZWNlc3NhcnkuXG4gICAgbGV0IHRpbWU6IG51bWJlciA9IHRpbWVPZmZzZXRTZWNvbmRzO1xuXG4gICAgaWYgKHRoaXMuX2lzTG9vcCkge1xuICAgICAgd2hpbGUgKHRpbWUgPiB0aGlzLl9tb3Rpb25EYXRhLmR1cmF0aW9uKSB7XG4gICAgICAgIHRpbWUgLT0gdGhpcy5fbW90aW9uRGF0YS5kdXJhdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjdXJ2ZXM6IGNzbVZlY3RvcjxDdWJpc21Nb3Rpb25DdXJ2ZT4gPSB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcztcblxuICAgIC8vIEV2YWx1YXRlIG1vZGVsIGN1cnZlcy5cbiAgICBmb3IgKFxuICAgICAgYyA9IDA7XG4gICAgICBjIDwgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50ICYmXG4gICAgICBjdXJ2ZXMuYXQoYykudHlwZSA9PVxuICAgICAgICBDdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldC5DdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldF9Nb2RlbDtcbiAgICAgICsrY1xuICAgICkge1xuICAgICAgLy8gRXZhbHVhdGUgY3VydmUgYW5kIGNhbGwgaGFuZGxlci5cbiAgICAgIHZhbHVlID0gZXZhbHVhdGVDdXJ2ZSh0aGlzLl9tb3Rpb25EYXRhLCBjLCB0aW1lKTtcblxuICAgICAgaWYgKGN1cnZlcy5hdChjKS5pZCA9PSB0aGlzLl9tb2RlbEN1cnZlSWRFeWVCbGluaykge1xuICAgICAgICBleWVCbGlua1ZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGN1cnZlcy5hdChjKS5pZCA9PSB0aGlzLl9tb2RlbEN1cnZlSWRMaXBTeW5jKSB7XG4gICAgICAgIGxpcFN5bmNWYWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBwYXJhbWV0ZXJNb3Rpb25DdXJ2ZUNvdW50ID0gMDtcblxuICAgIGZvciAoXG4gICAgICA7XG4gICAgICBjIDwgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50ICYmXG4gICAgICBjdXJ2ZXMuYXQoYykudHlwZSA9PVxuICAgICAgICBDdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldC5DdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldF9QYXJhbWV0ZXI7XG4gICAgICArK2NcbiAgICApIHtcbiAgICAgIHBhcmFtZXRlck1vdGlvbkN1cnZlQ291bnQrKztcblxuICAgICAgLy8gRmluZCBwYXJhbWV0ZXIgaW5kZXguXG4gICAgICBwYXJhbWV0ZXJJbmRleCA9IG1vZGVsLmdldFBhcmFtZXRlckluZGV4KGN1cnZlcy5hdChjKS5pZCk7XG5cbiAgICAgIC8vIFNraXAgY3VydmUgZXZhbHVhdGlvbiBpZiBubyB2YWx1ZSBpbiBzaW5rLlxuICAgICAgaWYgKHBhcmFtZXRlckluZGV4ID09IC0xKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzb3VyY2VWYWx1ZTogbnVtYmVyID0gbW9kZWwuZ2V0UGFyYW1ldGVyVmFsdWVCeUluZGV4KFxuICAgICAgICBwYXJhbWV0ZXJJbmRleFxuICAgICAgKTtcblxuICAgICAgLy8gRXZhbHVhdGUgY3VydmUgYW5kIGFwcGx5IHZhbHVlLlxuICAgICAgdmFsdWUgPSBldmFsdWF0ZUN1cnZlKHRoaXMuX21vdGlvbkRhdGEsIGMsIHRpbWUpO1xuXG4gICAgICBpZiAoZXllQmxpbmtWYWx1ZSAhPSBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgIGkgPCB0aGlzLl9leWVCbGlua1BhcmFtZXRlcklkcy5nZXRTaXplKCkgJiYgaSA8IE1heFRhcmdldFNpemU7XG4gICAgICAgICAgKytpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0aGlzLl9leWVCbGlua1BhcmFtZXRlcklkcy5hdChpKSA9PSBjdXJ2ZXMuYXQoYykuaWQpIHtcbiAgICAgICAgICAgIHZhbHVlICo9IGV5ZUJsaW5rVmFsdWU7XG4gICAgICAgICAgICBleWVCbGlua0ZsYWdzIHw9IDEgPDwgaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobGlwU3luY1ZhbHVlICE9IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgaSA8IHRoaXMuX2xpcFN5bmNQYXJhbWV0ZXJJZHMuZ2V0U2l6ZSgpICYmIGkgPCBNYXhUYXJnZXRTaXplO1xuICAgICAgICAgICsraVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodGhpcy5fbGlwU3luY1BhcmFtZXRlcklkcy5hdChpKSA9PSBjdXJ2ZXMuYXQoYykuaWQpIHtcbiAgICAgICAgICAgIHZhbHVlICs9IGxpcFN5bmNWYWx1ZTtcbiAgICAgICAgICAgIGxpcFN5bmNGbGFncyB8PSAxIDw8IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IHY6IG51bWJlcjtcblxuICAgICAgLy8g44OR44Op44Oh44O844K/44GU44Go44Gu44OV44Kn44O844OJXG4gICAgICBpZiAoY3VydmVzLmF0KGMpLmZhZGVJblRpbWUgPCAwLjAgJiYgY3VydmVzLmF0KGMpLmZhZGVPdXRUaW1lIDwgMC4wKSB7XG4gICAgICAgIC8vIOODouODvOOCt+ODp+ODs+OBruODleOCp+ODvOODieOCkumBqeeUqFxuICAgICAgICB2ID0gc291cmNlVmFsdWUgKyAodmFsdWUgLSBzb3VyY2VWYWx1ZSkgKiBmYWRlV2VpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g44OR44Op44Oh44O844K/44Gr5a++44GX44Gm44OV44Kn44O844OJ44Kk44Oz44GL44OV44Kn44O844OJ44Ki44Km44OI44GM6Kit5a6a44GX44Gm44GC44KL5aC05ZCI44Gv44Gd44Gh44KJ44KS6YGp55SoXG4gICAgICAgIGxldCBmaW46IG51bWJlcjtcbiAgICAgICAgbGV0IGZvdXQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoY3VydmVzLmF0KGMpLmZhZGVJblRpbWUgPCAwLjApIHtcbiAgICAgICAgICBmaW4gPSB0bXBGYWRlSW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmluID1cbiAgICAgICAgICAgIGN1cnZlcy5hdChjKS5mYWRlSW5UaW1lID09IDAuMFxuICAgICAgICAgICAgICA/IDEuMFxuICAgICAgICAgICAgICA6IEN1YmlzbU1hdGguZ2V0RWFzaW5nU2luZShcbiAgICAgICAgICAgICAgICAgICh1c2VyVGltZVNlY29uZHMgLSBtb3Rpb25RdWV1ZUVudHJ5LmdldEZhZGVJblN0YXJ0VGltZSgpKSAvXG4gICAgICAgICAgICAgICAgICAgIGN1cnZlcy5hdChjKS5mYWRlSW5UaW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJ2ZXMuYXQoYykuZmFkZU91dFRpbWUgPCAwLjApIHtcbiAgICAgICAgICBmb3V0ID0gdG1wRmFkZU91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3V0ID1cbiAgICAgICAgICAgIGN1cnZlcy5hdChjKS5mYWRlT3V0VGltZSA9PSAwLjAgfHxcbiAgICAgICAgICAgIG1vdGlvblF1ZXVlRW50cnkuZ2V0RW5kVGltZSgpIDwgMC4wXG4gICAgICAgICAgICAgID8gMS4wXG4gICAgICAgICAgICAgIDogQ3ViaXNtTWF0aC5nZXRFYXNpbmdTaW5lKFxuICAgICAgICAgICAgICAgICAgKG1vdGlvblF1ZXVlRW50cnkuZ2V0RW5kVGltZSgpIC0gdXNlclRpbWVTZWNvbmRzKSAvXG4gICAgICAgICAgICAgICAgICAgIGN1cnZlcy5hdChjKS5mYWRlT3V0VGltZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJhbVdlaWdodDogbnVtYmVyID0gdGhpcy5fd2VpZ2h0ICogZmluICogZm91dDtcblxuICAgICAgICAvLyDjg5Hjg6njg6Hjg7zjgr/jgZTjgajjga7jg5Xjgqfjg7zjg4njgpLpgannlKhcbiAgICAgICAgdiA9IHNvdXJjZVZhbHVlICsgKHZhbHVlIC0gc291cmNlVmFsdWUpICogcGFyYW1XZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIG1vZGVsLnNldFBhcmFtZXRlclZhbHVlQnlJbmRleChwYXJhbWV0ZXJJbmRleCwgdiwgMS4wKTtcbiAgICB9XG5cbiAgICB7XG4gICAgICBpZiAoZXllQmxpbmtWYWx1ZSAhPSBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgIGkgPCB0aGlzLl9leWVCbGlua1BhcmFtZXRlcklkcy5nZXRTaXplKCkgJiYgaSA8IE1heFRhcmdldFNpemU7XG4gICAgICAgICAgKytpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZVZhbHVlOiBudW1iZXIgPSBtb2RlbC5nZXRQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gICAgICAgICAgICB0aGlzLl9leWVCbGlua1BhcmFtZXRlcklkcy5hdChpKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyDjg6Ljg7zjgrfjg6fjg7Pjgafjga7kuIrmm7jjgY3jgYzjgYLjgaPjgZ/mmYLjgavjga/jgb7jgbDjgZ/jgY3jga/pgannlKjjgZfjgarjgYRcbiAgICAgICAgICBpZiAoKGV5ZUJsaW5rRmxhZ3MgPj4gaSkgJiAweDAxKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB2OiBudW1iZXIgPVxuICAgICAgICAgICAgc291cmNlVmFsdWUgKyAoZXllQmxpbmtWYWx1ZSAtIHNvdXJjZVZhbHVlKSAqIGZhZGVXZWlnaHQ7XG5cbiAgICAgICAgICBtb2RlbC5zZXRQYXJhbWV0ZXJWYWx1ZUJ5SWQodGhpcy5fZXllQmxpbmtQYXJhbWV0ZXJJZHMuYXQoaSksIHYpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChsaXBTeW5jVmFsdWUgIT0gTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICBpIDwgdGhpcy5fbGlwU3luY1BhcmFtZXRlcklkcy5nZXRTaXplKCkgJiYgaSA8IE1heFRhcmdldFNpemU7XG4gICAgICAgICAgKytpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZVZhbHVlOiBudW1iZXIgPSBtb2RlbC5nZXRQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gICAgICAgICAgICB0aGlzLl9saXBTeW5jUGFyYW1ldGVySWRzLmF0KGkpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIOODouODvOOCt+ODp+ODs+OBp+OBruS4iuabuOOBjeOBjOOBguOBo+OBn+aZguOBq+OBr+ODquODg+ODl+OCt+ODs+OCr+OBr+mBqeeUqOOBl+OBquOBhFxuICAgICAgICAgIGlmICgobGlwU3luY0ZsYWdzID4+IGkpICYgMHgwMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdjogbnVtYmVyID1cbiAgICAgICAgICAgIHNvdXJjZVZhbHVlICsgKGxpcFN5bmNWYWx1ZSAtIHNvdXJjZVZhbHVlKSAqIGZhZGVXZWlnaHQ7XG5cbiAgICAgICAgICBtb2RlbC5zZXRQYXJhbWV0ZXJWYWx1ZUJ5SWQodGhpcy5fbGlwU3luY1BhcmFtZXRlcklkcy5hdChpKSwgdik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKFxuICAgICAgO1xuICAgICAgYyA8IHRoaXMuX21vdGlvbkRhdGEuY3VydmVDb3VudCAmJlxuICAgICAgY3VydmVzLmF0KGMpLnR5cGUgPT1cbiAgICAgICAgQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXQuQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXRfUGFydE9wYWNpdHk7XG4gICAgICArK2NcbiAgICApIHtcbiAgICAgIC8vIEZpbmQgcGFyYW1ldGVyIGluZGV4LlxuICAgICAgcGFyYW1ldGVySW5kZXggPSBtb2RlbC5nZXRQYXJhbWV0ZXJJbmRleChjdXJ2ZXMuYXQoYykuaWQpO1xuXG4gICAgICAvLyBTa2lwIGN1cnZlIGV2YWx1YXRpb24gaWYgbm8gdmFsdWUgaW4gc2luay5cbiAgICAgIGlmIChwYXJhbWV0ZXJJbmRleCA9PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gRXZhbHVhdGUgY3VydmUgYW5kIGFwcGx5IHZhbHVlLlxuICAgICAgdmFsdWUgPSBldmFsdWF0ZUN1cnZlKHRoaXMuX21vdGlvbkRhdGEsIGMsIHRpbWUpO1xuXG4gICAgICBtb2RlbC5zZXRQYXJhbWV0ZXJWYWx1ZUJ5SW5kZXgocGFyYW1ldGVySW5kZXgsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodGltZU9mZnNldFNlY29uZHMgPj0gdGhpcy5fbW90aW9uRGF0YS5kdXJhdGlvbikge1xuICAgICAgaWYgKHRoaXMuX2lzTG9vcCkge1xuICAgICAgICBtb3Rpb25RdWV1ZUVudHJ5LnNldFN0YXJ0VGltZSh1c2VyVGltZVNlY29uZHMpOyAvLyDmnIDliJ3jga7nirbmhYvjgbhcbiAgICAgICAgaWYgKHRoaXMuX2lzTG9vcEZhZGVJbikge1xuICAgICAgICAgIC8vIOODq+ODvOODl+WGheOBp+ODq+ODvOODl+eUqOODleOCp+ODvOODieOCpOODs+OBjOacieWKueOBruaZguOBr+OAgeODleOCp+ODvOODieOCpOODs+ioreWumuOBl+ebtOOBl1xuICAgICAgICAgIG1vdGlvblF1ZXVlRW50cnkuc2V0RmFkZUluU3RhcnRUaW1lKHVzZXJUaW1lU2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9vbkZpbmlzaGVkTW90aW9uKSB7XG4gICAgICAgICAgdGhpcy5fb25GaW5pc2hlZE1vdGlvbih0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdGlvblF1ZXVlRW50cnkuc2V0SXNGaW5pc2hlZCh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbGFzdFdlaWdodCA9IGZhZGVXZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICog44Or44O844OX5oOF5aCx44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBsb29wIOODq+ODvOODl+aDheWgsVxuICAgKi9cbiAgcHVibGljIHNldElzTG9vcChsb29wOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5faXNMb29wID0gbG9vcDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6vjg7zjg5fmg4XloLHjga7lj5blvpdcbiAgICogQHJldHVybiB0cnVlIOODq+ODvOODl+OBmeOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOODq+ODvOODl+OBl+OBquOBhFxuICAgKi9cbiAgcHVibGljIGlzTG9vcCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNMb29wO1xuICB9XG5cbiAgLyoqXG4gICAqIOODq+ODvOODl+aZguOBruODleOCp+ODvOODieOCpOODs+aDheWgseOBruioreWumlxuICAgKiBAcGFyYW0gbG9vcEZhZGVJbiAg44Or44O844OX5pmC44Gu44OV44Kn44O844OJ44Kk44Oz5oOF5aCxXG4gICAqL1xuICBwdWJsaWMgc2V0SXNMb29wRmFkZUluKGxvb3BGYWRlSW46IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9pc0xvb3BGYWRlSW4gPSBsb29wRmFkZUluO1xuICB9XG5cbiAgLyoqXG4gICAqIOODq+ODvOODl+aZguOBruODleOCp+ODvOODieOCpOODs+aDheWgseOBruWPluW+l1xuICAgKlxuICAgKiBAcmV0dXJuICB0cnVlICAgIOOBmeOCi1xuICAgKiBAcmV0dXJuICBmYWxzZSAgIOOBl+OBquOBhFxuICAgKi9cbiAgcHVibGljIGlzTG9vcEZhZGVJbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNMb29wRmFkZUluO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBrumVt+OBleOCkuWPluW+l+OBmeOCi+OAglxuICAgKlxuICAgKiBAcmV0dXJuICDjg6Ljg7zjgrfjg6fjg7Pjga7plbfjgZVb56eSXVxuICAgKi9cbiAgcHVibGljIGdldER1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2lzTG9vcCA/IC0xLjAgOiB0aGlzLl9sb29wRHVyYXRpb25TZWNvbmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruODq+ODvOODl+aZguOBrumVt+OBleOCkuWPluW+l+OBmeOCi+OAglxuICAgKlxuICAgKiBAcmV0dXJuICDjg6Ljg7zjgrfjg6fjg7Pjga7jg6vjg7zjg5fmmYLjga7plbfjgZVb56eSXVxuICAgKi9cbiAgcHVibGljIGdldExvb3BEdXJhdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sb29wRHVyYXRpb25TZWNvbmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeODqeODoeODvOOCv+OBq+WvvuOBmeOCi+ODleOCp+ODvOODieOCpOODs+OBruaZgumWk+OCkuioreWumuOBmeOCi+OAglxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1ldGVySWQgICAgIOODkeODqeODoeODvOOCv0lEXG4gICAqIEBwYXJhbSB2YWx1ZSAgICAgICAgICAg44OV44Kn44O844OJ44Kk44Oz44Gr44GL44GL44KL5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBzZXRQYXJhbWV0ZXJGYWRlSW5UaW1lKFxuICAgIHBhcmFtZXRlcklkOiBDdWJpc21JZEhhbmRsZSxcbiAgICB2YWx1ZTogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnZlczogY3NtVmVjdG9yPEN1YmlzbU1vdGlvbkN1cnZlPiA9IHRoaXMuX21vdGlvbkRhdGEuY3VydmVzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlQ291bnQ7ICsraSkge1xuICAgICAgaWYgKHBhcmFtZXRlcklkID09IGN1cnZlcy5hdChpKS5pZCkge1xuICAgICAgICBjdXJ2ZXMuYXQoaSkuZmFkZUluVGltZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODkeODqeODoeODvOOCv+OBq+WvvuOBmeOCi+ODleOCp+ODvOODieOCouOCpuODiOOBruaZgumWk+OBruioreWumlxuICAgKiBAcGFyYW0gcGFyYW1ldGVySWQgICAgIOODkeODqeODoeODvOOCv0lEXG4gICAqIEBwYXJhbSB2YWx1ZSAgICAgICAgICAg44OV44Kn44O844OJ44Ki44Km44OI44Gr44GL44GL44KL5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBzZXRQYXJhbWV0ZXJGYWRlT3V0VGltZShcbiAgICBwYXJhbWV0ZXJJZDogQ3ViaXNtSWRIYW5kbGUsXG4gICAgdmFsdWU6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICBjb25zdCBjdXJ2ZXM6IGNzbVZlY3RvcjxDdWJpc21Nb3Rpb25DdXJ2ZT4gPSB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50OyArK2kpIHtcbiAgICAgIGlmIChwYXJhbWV0ZXJJZCA9PSBjdXJ2ZXMuYXQoaSkuaWQpIHtcbiAgICAgICAgY3VydmVzLmF0KGkpLmZhZGVPdXRUaW1lID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44OR44Op44Oh44O844K/44Gr5a++44GZ44KL44OV44Kn44O844OJ44Kk44Oz44Gu5pmC6ZaT44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSAgICBwYXJhbWV0ZXJJZCAgICAg44OR44Op44Oh44O844K/SURcbiAgICogQHJldHVybiAgIOODleOCp+ODvOODieOCpOODs+OBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFyYW1ldGVyRmFkZUluVGltZShwYXJhbWV0ZXJJZDogQ3ViaXNtSWRIYW5kbGUpOiBudW1iZXIge1xuICAgIGNvbnN0IGN1cnZlczogY3NtVmVjdG9yPEN1YmlzbU1vdGlvbkN1cnZlPiA9IHRoaXMuX21vdGlvbkRhdGEuY3VydmVzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlQ291bnQ7ICsraSkge1xuICAgICAgaWYgKHBhcmFtZXRlcklkID09IGN1cnZlcy5hdChpKS5pZCkge1xuICAgICAgICByZXR1cm4gY3VydmVzLmF0KGkpLmZhZGVJblRpbWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeODqeODoeODvOOCv+OBq+WvvuOBmeOCi+ODleOCp+ODvOODieOCouOCpuODiOOBruaZgumWk+OCkuWPluW+l1xuICAgKlxuICAgKiBAcGFyYW0gICBwYXJhbWV0ZXJJZCAgICAg44OR44Op44Oh44O844K/SURcbiAgICogQHJldHVybiAgIOODleOCp+ODvOODieOCouOCpuODiOOBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFyYW1ldGVyRmFkZU91dFRpbWUocGFyYW1ldGVySWQ6IEN1YmlzbUlkSGFuZGxlKTogbnVtYmVyIHtcbiAgICBjb25zdCBjdXJ2ZXM6IGNzbVZlY3RvcjxDdWJpc21Nb3Rpb25DdXJ2ZT4gPSB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50OyArK2kpIHtcbiAgICAgIGlmIChwYXJhbWV0ZXJJZCA9PSBjdXJ2ZXMuYXQoaSkuaWQpIHtcbiAgICAgICAgcmV0dXJuIGN1cnZlcy5hdChpKS5mYWRlT3V0VGltZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICog6Ieq5YuV44Ko44OV44Kn44Kv44OI44GM44GL44GL44Gj44Gm44GE44KL44OR44Op44Oh44O844K/SUTjg6rjgrnjg4jjga7oqK3lrppcbiAgICogQHBhcmFtIGV5ZUJsaW5rUGFyYW1ldGVySWRzICAgIOiHquWLleOBvuOBsOOBn+OBjeOBjOOBi+OBi+OBo+OBpuOBhOOCi+ODkeODqeODoeODvOOCv0lE44Gu44Oq44K544OIXG4gICAqIEBwYXJhbSBsaXBTeW5jUGFyYW1ldGVySWRzICAgICDjg6rjg4Pjg5fjgrfjg7Pjgq/jgYzjgYvjgYvjgaPjgabjgYTjgovjg5Hjg6njg6Hjg7zjgr9JROOBruODquOCueODiFxuICAgKi9cbiAgcHVibGljIHNldEVmZmVjdElkcyhcbiAgICBleWVCbGlua1BhcmFtZXRlcklkczogY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPixcbiAgICBsaXBTeW5jUGFyYW1ldGVySWRzOiBjc21WZWN0b3I8Q3ViaXNtSWRIYW5kbGU+XG4gICk6IHZvaWQge1xuICAgIHRoaXMuX2V5ZUJsaW5rUGFyYW1ldGVySWRzID0gZXllQmxpbmtQYXJhbWV0ZXJJZHM7XG4gICAgdGhpcy5fbGlwU3luY1BhcmFtZXRlcklkcyA9IGxpcFN5bmNQYXJhbWV0ZXJJZHM7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zb3VyY2VGcmFtZVJhdGUgPSAzMC4wO1xuICAgIHRoaXMuX2xvb3BEdXJhdGlvblNlY29uZHMgPSAtMS4wO1xuICAgIHRoaXMuX2lzTG9vcCA9IGZhbHNlOyAvLyB0cnVl44GL44KJIGZhbHNlIOOBuOODh+ODleOCqeODq+ODiOOCkuWkieabtFxuICAgIHRoaXMuX2lzTG9vcEZhZGVJbiA9IHRydWU7IC8vIOODq+ODvOODl+aZguOBq+ODleOCp+ODvOODieOCpOODs+OBjOacieWKueOBi+OBqeOBhuOBi+OBruODleODqeOCsFxuICAgIHRoaXMuX2xhc3RXZWlnaHQgPSAwLjA7XG4gICAgdGhpcy5fbW90aW9uRGF0YSA9IG51bGw7XG4gICAgdGhpcy5fbW9kZWxDdXJ2ZUlkRXllQmxpbmsgPSBudWxsO1xuICAgIHRoaXMuX21vZGVsQ3VydmVJZExpcFN5bmMgPSBudWxsO1xuICAgIHRoaXMuX2V5ZUJsaW5rUGFyYW1ldGVySWRzID0gbnVsbDtcbiAgICB0aGlzLl9saXBTeW5jUGFyYW1ldGVySWRzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjgrnjg4jjg6njgq/jgr/nm7jlvZPjga7lh6bnkIZcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIHRoaXMuX21vdGlvbkRhdGEgPSB2b2lkIDA7XG4gICAgdGhpcy5fbW90aW9uRGF0YSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogbW90aW9uMy5qc29u44KS44OR44O844K544GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSBtb3Rpb25Kc29uICBtb3Rpb24zLmpzb27jgYzoqq3jgb/ovrzjgb7jgozjgabjgYTjgovjg5Djg4Pjg5XjgqFcbiAgICogQHBhcmFtIHNpemUgICAgICAgIOODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKi9cbiAgcHVibGljIHBhcnNlKG1vdGlvbkpzb246IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9tb3Rpb25EYXRhID0gbmV3IEN1YmlzbU1vdGlvbkRhdGEoKTtcblxuICAgIGxldCBqc29uOiBDdWJpc21Nb3Rpb25Kc29uID0gbmV3IEN1YmlzbU1vdGlvbkpzb24obW90aW9uSnNvbiwgc2l6ZSk7XG5cbiAgICB0aGlzLl9tb3Rpb25EYXRhLmR1cmF0aW9uID0ganNvbi5nZXRNb3Rpb25EdXJhdGlvbigpO1xuICAgIHRoaXMuX21vdGlvbkRhdGEubG9vcCA9IGpzb24uaXNNb3Rpb25Mb29wKCk7XG4gICAgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50ID0ganNvbi5nZXRNb3Rpb25DdXJ2ZUNvdW50KCk7XG4gICAgdGhpcy5fbW90aW9uRGF0YS5mcHMgPSBqc29uLmdldE1vdGlvbkZwcygpO1xuICAgIHRoaXMuX21vdGlvbkRhdGEuZXZlbnRDb3VudCA9IGpzb24uZ2V0RXZlbnRDb3VudCgpO1xuXG4gICAgY29uc3QgYXJlQmV6aWVyc1Jlc3RydWN0ZWQ6IGJvb2xlYW4gPSBqc29uLmdldEV2YWx1YXRpb25PcHRpb25GbGFnKFxuICAgICAgRXZhbHVhdGlvbk9wdGlvbkZsYWcuRXZhbHVhdGlvbk9wdGlvbkZsYWdfQXJlQmV6aWVyc1Jpc3RyaWN0ZWRcbiAgICApO1xuXG4gICAgaWYgKGpzb24uaXNFeGlzdE1vdGlvbkZhZGVJblRpbWUoKSkge1xuICAgICAgdGhpcy5fZmFkZUluU2Vjb25kcyA9XG4gICAgICAgIGpzb24uZ2V0TW90aW9uRmFkZUluVGltZSgpIDwgMC4wID8gMS4wIDoganNvbi5nZXRNb3Rpb25GYWRlSW5UaW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZhZGVJblNlY29uZHMgPSAxLjA7XG4gICAgfVxuXG4gICAgaWYgKGpzb24uaXNFeGlzdE1vdGlvbkZhZGVPdXRUaW1lKCkpIHtcbiAgICAgIHRoaXMuX2ZhZGVPdXRTZWNvbmRzID1cbiAgICAgICAganNvbi5nZXRNb3Rpb25GYWRlT3V0VGltZSgpIDwgMC4wID8gMS4wIDoganNvbi5nZXRNb3Rpb25GYWRlT3V0VGltZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9mYWRlT3V0U2Vjb25kcyA9IDEuMDtcbiAgICB9XG5cbiAgICB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcy51cGRhdGVTaXplKFxuICAgICAgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50LFxuICAgICAgQ3ViaXNtTW90aW9uQ3VydmUsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICB0aGlzLl9tb3Rpb25EYXRhLnNlZ21lbnRzLnVwZGF0ZVNpemUoXG4gICAgICBqc29uLmdldE1vdGlvblRvdGFsU2VnbWVudENvdW50KCksXG4gICAgICBDdWJpc21Nb3Rpb25TZWdtZW50LFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5fbW90aW9uRGF0YS5wb2ludHMudXBkYXRlU2l6ZShcbiAgICAgIGpzb24uZ2V0TW90aW9uVG90YWxQb2ludENvdW50KCksXG4gICAgICBDdWJpc21Nb3Rpb25Qb2ludCxcbiAgICAgIHRydWVcbiAgICApO1xuICAgIHRoaXMuX21vdGlvbkRhdGEuZXZlbnRzLnVwZGF0ZVNpemUoXG4gICAgICB0aGlzLl9tb3Rpb25EYXRhLmV2ZW50Q291bnQsXG4gICAgICBDdWJpc21Nb3Rpb25FdmVudCxcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgbGV0IHRvdGFsUG9pbnRDb3VudCA9IDA7XG4gICAgbGV0IHRvdGFsU2VnbWVudENvdW50ID0gMDtcblxuICAgIC8vIEN1cnZlc1xuICAgIGZvciAoXG4gICAgICBsZXQgY3VydmVDb3VudCA9IDA7XG4gICAgICBjdXJ2ZUNvdW50IDwgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZUNvdW50O1xuICAgICAgKytjdXJ2ZUNvdW50XG4gICAgKSB7XG4gICAgICBpZiAoanNvbi5nZXRNb3Rpb25DdXJ2ZVRhcmdldChjdXJ2ZUNvdW50KSA9PSBUYXJnZXROYW1lTW9kZWwpIHtcbiAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5jdXJ2ZXMuYXQoY3VydmVDb3VudCkudHlwZSA9XG4gICAgICAgICAgQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXQuQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXRfTW9kZWw7XG4gICAgICB9IGVsc2UgaWYgKGpzb24uZ2V0TW90aW9uQ3VydmVUYXJnZXQoY3VydmVDb3VudCkgPT0gVGFyZ2V0TmFtZVBhcmFtZXRlcikge1xuICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcy5hdChjdXJ2ZUNvdW50KS50eXBlID1cbiAgICAgICAgICBDdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldC5DdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldF9QYXJhbWV0ZXI7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBqc29uLmdldE1vdGlvbkN1cnZlVGFyZ2V0KGN1cnZlQ291bnQpID09IFRhcmdldE5hbWVQYXJ0T3BhY2l0eVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX21vdGlvbkRhdGEuY3VydmVzLmF0KGN1cnZlQ291bnQpLnR5cGUgPVxuICAgICAgICAgIEN1YmlzbU1vdGlvbkN1cnZlVGFyZ2V0LkN1YmlzbU1vdGlvbkN1cnZlVGFyZ2V0X1BhcnRPcGFjaXR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ3ViaXNtTG9nV2FybmluZyhcbiAgICAgICAgICAnV2FybmluZyA6IFVuYWJsZSB0byBnZXQgc2VnbWVudCB0eXBlIGZyb20gQ3VydmUhIFRoZSBudW1iZXIgb2YgXCJDdXJ2ZUNvdW50XCIgbWF5IGJlIGluY29ycmVjdCEnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21vdGlvbkRhdGEuY3VydmVzLmF0KGN1cnZlQ291bnQpLmlkID0ganNvbi5nZXRNb3Rpb25DdXJ2ZUlkKFxuICAgICAgICBjdXJ2ZUNvdW50XG4gICAgICApO1xuXG4gICAgICB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcy5hdChcbiAgICAgICAgY3VydmVDb3VudFxuICAgICAgKS5iYXNlU2VnbWVudEluZGV4ID0gdG90YWxTZWdtZW50Q291bnQ7XG5cbiAgICAgIHRoaXMuX21vdGlvbkRhdGEuY3VydmVzLmF0KFxuICAgICAgICBjdXJ2ZUNvdW50XG4gICAgICApLmZhZGVJblRpbWUgPSBqc29uLmlzRXhpc3RNb3Rpb25DdXJ2ZUZhZGVJblRpbWUoY3VydmVDb3VudClcbiAgICAgICAgPyBqc29uLmdldE1vdGlvbkN1cnZlRmFkZUluVGltZShjdXJ2ZUNvdW50KVxuICAgICAgICA6IC0xLjA7XG4gICAgICB0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcy5hdChcbiAgICAgICAgY3VydmVDb3VudFxuICAgICAgKS5mYWRlT3V0VGltZSA9IGpzb24uaXNFeGlzdE1vdGlvbkN1cnZlRmFkZU91dFRpbWUoY3VydmVDb3VudClcbiAgICAgICAgPyBqc29uLmdldE1vdGlvbkN1cnZlRmFkZU91dFRpbWUoY3VydmVDb3VudClcbiAgICAgICAgOiAtMS4wO1xuXG4gICAgICAvLyBTZWdtZW50c1xuICAgICAgZm9yIChcbiAgICAgICAgbGV0IHNlZ21lbnRQb3NpdGlvbiA9IDA7XG4gICAgICAgIHNlZ21lbnRQb3NpdGlvbiA8IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50Q291bnQoY3VydmVDb3VudCk7XG5cbiAgICAgICkge1xuICAgICAgICBpZiAoc2VnbWVudFBvc2l0aW9uID09IDApIHtcbiAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnNlZ21lbnRzLmF0KFxuICAgICAgICAgICAgdG90YWxTZWdtZW50Q291bnRcbiAgICAgICAgICApLmJhc2VQb2ludEluZGV4ID0gdG90YWxQb2ludENvdW50O1xuXG4gICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5wb2ludHMuYXQoXG4gICAgICAgICAgICB0b3RhbFBvaW50Q291bnRcbiAgICAgICAgICApLnRpbWUgPSBqc29uLmdldE1vdGlvbkN1cnZlU2VnbWVudChjdXJ2ZUNvdW50LCBzZWdtZW50UG9zaXRpb24pO1xuICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEucG9pbnRzLmF0KFxuICAgICAgICAgICAgdG90YWxQb2ludENvdW50XG4gICAgICAgICAgKS52YWx1ZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KGN1cnZlQ291bnQsIHNlZ21lbnRQb3NpdGlvbiArIDEpO1xuXG4gICAgICAgICAgdG90YWxQb2ludENvdW50ICs9IDE7XG4gICAgICAgICAgc2VnbWVudFBvc2l0aW9uICs9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5zZWdtZW50cy5hdCh0b3RhbFNlZ21lbnRDb3VudCkuYmFzZVBvaW50SW5kZXggPVxuICAgICAgICAgICAgdG90YWxQb2ludENvdW50IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlZ21lbnQ6IG51bWJlciA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgIGN1cnZlQ291bnQsXG4gICAgICAgICAgc2VnbWVudFBvc2l0aW9uXG4gICAgICAgICk7XG4gICAgICAgIHN3aXRjaCAoc2VnbWVudCkge1xuICAgICAgICAgIGNhc2UgQ3ViaXNtTW90aW9uU2VnbWVudFR5cGUuQ3ViaXNtTW90aW9uU2VnbWVudFR5cGVfTGluZWFyOiB7XG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnNlZ21lbnRzLmF0KHRvdGFsU2VnbWVudENvdW50KS5zZWdtZW50VHlwZSA9XG4gICAgICAgICAgICAgIEN1YmlzbU1vdGlvblNlZ21lbnRUeXBlLkN1YmlzbU1vdGlvblNlZ21lbnRUeXBlX0xpbmVhcjtcbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEuc2VnbWVudHMuYXQoXG4gICAgICAgICAgICAgIHRvdGFsU2VnbWVudENvdW50XG4gICAgICAgICAgICApLmV2YWx1YXRlID0gbGluZWFyRXZhbHVhdGU7XG5cbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEucG9pbnRzLmF0KFxuICAgICAgICAgICAgICB0b3RhbFBvaW50Q291bnRcbiAgICAgICAgICAgICkudGltZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgICAgICBjdXJ2ZUNvdW50LFxuICAgICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKyAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5wb2ludHMuYXQoXG4gICAgICAgICAgICAgIHRvdGFsUG9pbnRDb3VudFxuICAgICAgICAgICAgKS52YWx1ZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgICAgICBjdXJ2ZUNvdW50LFxuICAgICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKyAyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0b3RhbFBvaW50Q291bnQgKz0gMTtcbiAgICAgICAgICAgIHNlZ21lbnRQb3NpdGlvbiArPSAzO1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZS5DdWJpc21Nb3Rpb25TZWdtZW50VHlwZV9CZXppZXI6IHtcbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEuc2VnbWVudHMuYXQodG90YWxTZWdtZW50Q291bnQpLnNlZ21lbnRUeXBlID1cbiAgICAgICAgICAgICAgQ3ViaXNtTW90aW9uU2VnbWVudFR5cGUuQ3ViaXNtTW90aW9uU2VnbWVudFR5cGVfQmV6aWVyO1xuXG4gICAgICAgICAgICBpZiAoYXJlQmV6aWVyc1Jlc3RydWN0ZWQgfHwgVXNlT2xkQmV6aWVyc0N1cnZlTW90aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEuc2VnbWVudHMuYXQoXG4gICAgICAgICAgICAgICAgdG90YWxTZWdtZW50Q291bnRcbiAgICAgICAgICAgICAgKS5ldmFsdWF0ZSA9IGJlemllckV2YWx1YXRlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5zZWdtZW50cy5hdChcbiAgICAgICAgICAgICAgICB0b3RhbFNlZ21lbnRDb3VudFxuICAgICAgICAgICAgICApLmV2YWx1YXRlID0gYmV6aWVyRXZhbHVhdGVDYXJkYW5vSW50ZXJwcmV0YXRpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEucG9pbnRzLmF0KFxuICAgICAgICAgICAgICB0b3RhbFBvaW50Q291bnRcbiAgICAgICAgICAgICkudGltZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgICAgICBjdXJ2ZUNvdW50LFxuICAgICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKyAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5wb2ludHMuYXQoXG4gICAgICAgICAgICAgIHRvdGFsUG9pbnRDb3VudFxuICAgICAgICAgICAgKS52YWx1ZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgICAgICBjdXJ2ZUNvdW50LFxuICAgICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKyAyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnBvaW50cy5hdChcbiAgICAgICAgICAgICAgdG90YWxQb2ludENvdW50ICsgMVxuICAgICAgICAgICAgKS50aW1lID0ganNvbi5nZXRNb3Rpb25DdXJ2ZVNlZ21lbnQoXG4gICAgICAgICAgICAgIGN1cnZlQ291bnQsXG4gICAgICAgICAgICAgIHNlZ21lbnRQb3NpdGlvbiArIDNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnBvaW50cy5hdChcbiAgICAgICAgICAgICAgdG90YWxQb2ludENvdW50ICsgMVxuICAgICAgICAgICAgKS52YWx1ZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgICAgICBjdXJ2ZUNvdW50LFxuICAgICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKyA0XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnBvaW50cy5hdChcbiAgICAgICAgICAgICAgdG90YWxQb2ludENvdW50ICsgMlxuICAgICAgICAgICAgKS50aW1lID0ganNvbi5nZXRNb3Rpb25DdXJ2ZVNlZ21lbnQoXG4gICAgICAgICAgICAgIGN1cnZlQ291bnQsXG4gICAgICAgICAgICAgIHNlZ21lbnRQb3NpdGlvbiArIDVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnBvaW50cy5hdChcbiAgICAgICAgICAgICAgdG90YWxQb2ludENvdW50ICsgMlxuICAgICAgICAgICAgKS52YWx1ZSA9IGpzb24uZ2V0TW90aW9uQ3VydmVTZWdtZW50KFxuICAgICAgICAgICAgICBjdXJ2ZUNvdW50LFxuICAgICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKyA2XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0b3RhbFBvaW50Q291bnQgKz0gMztcbiAgICAgICAgICAgIHNlZ21lbnRQb3NpdGlvbiArPSA3O1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIEN1YmlzbU1vdGlvblNlZ21lbnRUeXBlLkN1YmlzbU1vdGlvblNlZ21lbnRUeXBlX1N0ZXBwZWQ6IHtcbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEuc2VnbWVudHMuYXQodG90YWxTZWdtZW50Q291bnQpLnNlZ21lbnRUeXBlID1cbiAgICAgICAgICAgICAgQ3ViaXNtTW90aW9uU2VnbWVudFR5cGUuQ3ViaXNtTW90aW9uU2VnbWVudFR5cGVfU3RlcHBlZDtcbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEuc2VnbWVudHMuYXQoXG4gICAgICAgICAgICAgIHRvdGFsU2VnbWVudENvdW50XG4gICAgICAgICAgICApLmV2YWx1YXRlID0gc3RlcHBlZEV2YWx1YXRlO1xuXG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnBvaW50cy5hdChcbiAgICAgICAgICAgICAgdG90YWxQb2ludENvdW50XG4gICAgICAgICAgICApLnRpbWUgPSBqc29uLmdldE1vdGlvbkN1cnZlU2VnbWVudChcbiAgICAgICAgICAgICAgY3VydmVDb3VudCxcbiAgICAgICAgICAgICAgc2VnbWVudFBvc2l0aW9uICsgMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEucG9pbnRzLmF0KFxuICAgICAgICAgICAgICB0b3RhbFBvaW50Q291bnRcbiAgICAgICAgICAgICkudmFsdWUgPSBqc29uLmdldE1vdGlvbkN1cnZlU2VnbWVudChcbiAgICAgICAgICAgICAgY3VydmVDb3VudCxcbiAgICAgICAgICAgICAgc2VnbWVudFBvc2l0aW9uICsgMlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdG90YWxQb2ludENvdW50ICs9IDE7XG4gICAgICAgICAgICBzZWdtZW50UG9zaXRpb24gKz0gMztcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZS5DdWJpc21Nb3Rpb25TZWdtZW50VHlwZV9JbnZlcnNlU3RlcHBlZDoge1xuICAgICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5zZWdtZW50cy5hdCh0b3RhbFNlZ21lbnRDb3VudCkuc2VnbWVudFR5cGUgPVxuICAgICAgICAgICAgICBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZS5DdWJpc21Nb3Rpb25TZWdtZW50VHlwZV9JbnZlcnNlU3RlcHBlZDtcbiAgICAgICAgICAgIHRoaXMuX21vdGlvbkRhdGEuc2VnbWVudHMuYXQoXG4gICAgICAgICAgICAgIHRvdGFsU2VnbWVudENvdW50XG4gICAgICAgICAgICApLmV2YWx1YXRlID0gaW52ZXJzZVN0ZXBwZWRFdmFsdWF0ZTtcblxuICAgICAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5wb2ludHMuYXQoXG4gICAgICAgICAgICAgIHRvdGFsUG9pbnRDb3VudFxuICAgICAgICAgICAgKS50aW1lID0ganNvbi5nZXRNb3Rpb25DdXJ2ZVNlZ21lbnQoXG4gICAgICAgICAgICAgIGN1cnZlQ291bnQsXG4gICAgICAgICAgICAgIHNlZ21lbnRQb3NpdGlvbiArIDFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLnBvaW50cy5hdChcbiAgICAgICAgICAgICAgdG90YWxQb2ludENvdW50XG4gICAgICAgICAgICApLnZhbHVlID0ganNvbi5nZXRNb3Rpb25DdXJ2ZVNlZ21lbnQoXG4gICAgICAgICAgICAgIGN1cnZlQ291bnQsXG4gICAgICAgICAgICAgIHNlZ21lbnRQb3NpdGlvbiArIDJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRvdGFsUG9pbnRDb3VudCArPSAxO1xuICAgICAgICAgICAgc2VnbWVudFBvc2l0aW9uICs9IDM7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBDU01fQVNTRVJUKDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgKyt0aGlzLl9tb3Rpb25EYXRhLmN1cnZlcy5hdChjdXJ2ZUNvdW50KS5zZWdtZW50Q291bnQ7XG4gICAgICAgICsrdG90YWxTZWdtZW50Q291bnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChcbiAgICAgIGxldCB1c2VyZGF0YWNvdW50ID0gMDtcbiAgICAgIHVzZXJkYXRhY291bnQgPCBqc29uLmdldEV2ZW50Q291bnQoKTtcbiAgICAgICsrdXNlcmRhdGFjb3VudFxuICAgICkge1xuICAgICAgdGhpcy5fbW90aW9uRGF0YS5ldmVudHMuYXQodXNlcmRhdGFjb3VudCkuZmlyZVRpbWUgPSBqc29uLmdldEV2ZW50VGltZShcbiAgICAgICAgdXNlcmRhdGFjb3VudFxuICAgICAgKTtcbiAgICAgIHRoaXMuX21vdGlvbkRhdGEuZXZlbnRzLmF0KHVzZXJkYXRhY291bnQpLnZhbHVlID0ganNvbi5nZXRFdmVudFZhbHVlKFxuICAgICAgICB1c2VyZGF0YWNvdW50XG4gICAgICApO1xuICAgIH1cblxuICAgIGpzb24ucmVsZWFzZSgpO1xuICAgIGpzb24gPSB2b2lkIDA7XG4gICAganNvbiA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICog44Oi44OH44Or44Gu44OR44Op44Oh44O844K/5pu05pawXG4gICAqXG4gICAqIOOCpOODmeODs+ODiOeZuueBq+OBruODgeOCp+ODg+OCr+OAglxuICAgKiDlhaXlipvjgZnjgovmmYLplpPjga/lkbzjgbDjgozjgovjg6Ljg7zjgrfjg6fjg7Pjgr/jgqTjg5/jg7PjgrDjgpLvvJDjgajjgZfjgZ/np5LmlbDjgafooYzjgYbjgIJcbiAgICpcbiAgICogQHBhcmFtIGJlZm9yZUNoZWNrVGltZVNlY29uZHMgICDliY3lm57jga7jgqTjg5njg7Pjg4jjg4Hjgqfjg4Pjgq/mmYLplpNb56eSXVxuICAgKiBAcGFyYW0gbW90aW9uVGltZVNlY29uZHMgICAgICAgIOS7iuWbnuOBruWGjeeUn+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0RmlyZWRFdmVudChcbiAgICBiZWZvcmVDaGVja1RpbWVTZWNvbmRzOiBudW1iZXIsXG4gICAgbW90aW9uVGltZVNlY29uZHM6IG51bWJlclxuICApOiBjc21WZWN0b3I8Y3NtU3RyaW5nPiB7XG4gICAgdGhpcy5fZmlyZWRFdmVudFZhbHVlcy51cGRhdGVTaXplKDApO1xuXG4gICAgLy8g44Kk44OZ44Oz44OI44Gu55m654Gr44OB44Kn44OD44KvXG4gICAgZm9yIChsZXQgdSA9IDA7IHUgPCB0aGlzLl9tb3Rpb25EYXRhLmV2ZW50Q291bnQ7ICsrdSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLl9tb3Rpb25EYXRhLmV2ZW50cy5hdCh1KS5maXJlVGltZSA+IGJlZm9yZUNoZWNrVGltZVNlY29uZHMgJiZcbiAgICAgICAgdGhpcy5fbW90aW9uRGF0YS5ldmVudHMuYXQodSkuZmlyZVRpbWUgPD0gbW90aW9uVGltZVNlY29uZHNcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9maXJlZEV2ZW50VmFsdWVzLnB1c2hCYWNrKFxuICAgICAgICAgIG5ldyBjc21TdHJpbmcodGhpcy5fbW90aW9uRGF0YS5ldmVudHMuYXQodSkudmFsdWUucylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZmlyZWRFdmVudFZhbHVlcztcbiAgfVxuXG4gIHB1YmxpYyBfc291cmNlRnJhbWVSYXRlOiBudW1iZXI7IC8vIOODreODvOODieOBl+OBn+ODleOCoeOCpOODq+OBrkZQU+OAguiomOi/sOOBjOeEoeOBkeOCjOOBsOODh+ODleOCqeODq+ODiOWApDE1ZnBz44Go44Gq44KLXG4gIHB1YmxpYyBfbG9vcER1cmF0aW9uU2Vjb25kczogbnVtYmVyOyAvLyBtdG7jg5XjgqHjgqTjg6vjgaflrprnvqnjgZXjgozjgovkuIDpgKPjga7jg6Ljg7zjgrfjg6fjg7Pjga7plbfjgZVcbiAgcHVibGljIF9pc0xvb3A6IGJvb2xlYW47IC8vIOODq+ODvOODl+OBmeOCi+OBiz9cbiAgcHVibGljIF9pc0xvb3BGYWRlSW46IGJvb2xlYW47IC8vIOODq+ODvOODl+aZguOBq+ODleOCp+ODvOODieOCpOODs+OBjOacieWKueOBi+OBqeOBhuOBi+OBruODleODqeOCsOOAguWIneacn+WApOOBp+OBr+acieWKueOAglxuICBwdWJsaWMgX2xhc3RXZWlnaHQ6IG51bWJlcjsgLy8g5pyA5b6M44Gr6Kit5a6a44GV44KM44Gf6YeN44G/XG5cbiAgcHVibGljIF9tb3Rpb25EYXRhOiBDdWJpc21Nb3Rpb25EYXRhOyAvLyDlrp/pmpvjga7jg6Ljg7zjgrfjg6fjg7Pjg4fjg7zjgr/mnKzkvZNcblxuICBwdWJsaWMgX2V5ZUJsaW5rUGFyYW1ldGVySWRzOiBjc21WZWN0b3I8Q3ViaXNtSWRIYW5kbGU+OyAvLyDoh6rli5Xjgb7jgbDjgZ/jgY3jgpLpgannlKjjgZnjgovjg5Hjg6njg6Hjg7zjgr9JROODj+ODs+ODieODq+OBruODquOCueODiOOAgiAg44Oi44OH44Or77yI44Oi44OH44Or44K744OD44OG44Kj44Oz44Kw77yJ44Go44OR44Op44Oh44O844K/44KS5a++5b+c5LuY44GR44KL44CCXG4gIHB1YmxpYyBfbGlwU3luY1BhcmFtZXRlcklkczogY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPjsgLy8g44Oq44OD44OX44K344Oz44Kv44KS6YGp55So44GZ44KL44OR44Op44Oh44O844K/SUTjg4/jg7Pjg4njg6vjga7jg6rjgrnjg4jjgIIgIOODouODh+ODq++8iOODouODh+ODq+OCu+ODg+ODhuOCo+ODs+OCsO+8ieOBqOODkeODqeODoeODvOOCv+OCkuWvvuW/nOS7mOOBkeOCi+OAglxuXG4gIHB1YmxpYyBfbW9kZWxDdXJ2ZUlkRXllQmxpbms6IEN1YmlzbUlkSGFuZGxlOyAvLyDjg6Ljg4fjg6vjgYzmjIHjgaToh6rli5Xjgb7jgbDjgZ/jgY3nlKjjg5Hjg6njg6Hjg7zjgr9JROOBruODj+ODs+ODieODq+OAgiAg44Oi44OH44Or44Go44Oi44O844K344On44Oz44KS5a++5b+c5LuY44GR44KL44CCXG4gIHB1YmxpYyBfbW9kZWxDdXJ2ZUlkTGlwU3luYzogQ3ViaXNtSWRIYW5kbGU7IC8vIOODouODh+ODq+OBjOaMgeOBpOODquODg+ODl+OCt+ODs+OCr+eUqOODkeODqeODoeODvOOCv0lE44Gu44OP44Oz44OJ44Or44CCICDjg6Ljg4fjg6vjgajjg6Ljg7zjgrfjg6fjg7PjgpLlr77lv5zku5jjgZHjgovjgIJcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtbW90aW9uJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb3Rpb24gPSAkLkN1YmlzbU1vdGlvbjtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW90aW9uID0gJC5DdWJpc21Nb3Rpb247XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBU0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU9BO0FBQUE7QUFzY0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBemNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFTQTtBQU1BO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVFBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBSUE7QUFDQTtBQUNBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFLQTtBQUtBO0FBTUE7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFJQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUlBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTUE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBTUE7QUFPQTtBQU1BO0FBT0E7QUFNQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU1BO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTUE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUlBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQWVBO0FBQUE7QUE5eUJBO0FBaXpCQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismmotion.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismmotioninternal.ts":
/*!******************************************************!*\
  !*** ./Framework/src/motion/cubismmotioninternal.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMotionData = exports.CubismMotionEvent = exports.CubismMotionCurve = exports.CubismMotionSegment = exports.CubismMotionPoint = exports.CubismMotionSegmentType = exports.CubismMotionCurveTarget = void 0;\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar CubismMotionCurveTarget;\n(function (CubismMotionCurveTarget) {\n    CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_Model\"] = 0] = \"CubismMotionCurveTarget_Model\";\n    CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_Parameter\"] = 1] = \"CubismMotionCurveTarget_Parameter\";\n    CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_PartOpacity\"] = 2] = \"CubismMotionCurveTarget_PartOpacity\";\n})(CubismMotionCurveTarget = exports.CubismMotionCurveTarget || (exports.CubismMotionCurveTarget = {}));\nvar CubismMotionSegmentType;\n(function (CubismMotionSegmentType) {\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Linear\"] = 0] = \"CubismMotionSegmentType_Linear\";\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Bezier\"] = 1] = \"CubismMotionSegmentType_Bezier\";\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Stepped\"] = 2] = \"CubismMotionSegmentType_Stepped\";\n    CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_InverseStepped\"] = 3] = \"CubismMotionSegmentType_InverseStepped\";\n})(CubismMotionSegmentType = exports.CubismMotionSegmentType || (exports.CubismMotionSegmentType = {}));\nvar CubismMotionPoint = (function () {\n    function CubismMotionPoint() {\n        this.time = 0.0;\n        this.value = 0.0;\n    }\n    return CubismMotionPoint;\n}());\nexports.CubismMotionPoint = CubismMotionPoint;\nvar CubismMotionSegment = (function () {\n    function CubismMotionSegment() {\n        this.evaluate = null;\n        this.basePointIndex = 0;\n        this.segmentType = 0;\n    }\n    return CubismMotionSegment;\n}());\nexports.CubismMotionSegment = CubismMotionSegment;\nvar CubismMotionCurve = (function () {\n    function CubismMotionCurve() {\n        this.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n        this.segmentCount = 0;\n        this.baseSegmentIndex = 0;\n        this.fadeInTime = 0.0;\n        this.fadeOutTime = 0.0;\n    }\n    return CubismMotionCurve;\n}());\nexports.CubismMotionCurve = CubismMotionCurve;\nvar CubismMotionEvent = (function () {\n    function CubismMotionEvent() {\n        this.fireTime = 0.0;\n    }\n    return CubismMotionEvent;\n}());\nexports.CubismMotionEvent = CubismMotionEvent;\nvar CubismMotionData = (function () {\n    function CubismMotionData() {\n        this.duration = 0.0;\n        this.loop = false;\n        this.curveCount = 0;\n        this.eventCount = 0;\n        this.fps = 0.0;\n        this.curves = new csmvector_1.csmVector();\n        this.segments = new csmvector_1.csmVector();\n        this.points = new csmvector_1.csmVector();\n        this.events = new csmvector_1.csmVector();\n    }\n    return CubismMotionData;\n}());\nexports.CubismMotionData = CubismMotionData;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmotioninternal */ \"./Framework/src/motion/cubismmotioninternal.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionCurve = $.CubismMotionCurve;\n    Live2DCubismFramework.CubismMotionCurveTarget = $.CubismMotionCurveTarget;\n    Live2DCubismFramework.CubismMotionData = $.CubismMotionData;\n    Live2DCubismFramework.CubismMotionEvent = $.CubismMotionEvent;\n    Live2DCubismFramework.CubismMotionPoint = $.CubismMotionPoint;\n    Live2DCubismFramework.CubismMotionSegment = $.CubismMotionSegment;\n    Live2DCubismFramework.CubismMotionSegmentType = $.CubismMotionSegmentType;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb25pbnRlcm5hbC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvbW90aW9uL2N1YmlzbW1vdGlvbmludGVybmFsLnRzP2U2ZGUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtSWRIYW5kbGUgfSBmcm9tICcuLi9pZC9jdWJpc21pZCc7XG5pbXBvcnQgeyBjc21TdHJpbmcgfSBmcm9tICcuLi90eXBlL2NzbXN0cmluZyc7XG5pbXBvcnQgeyBjc21WZWN0b3IgfSBmcm9tICcuLi90eXBlL2NzbXZlY3Rvcic7XG5cbi8qKlxuICogQGJyaWVmIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBrueorumhnlxuICpcbiAqIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBrueorumhnuOAglxuICovXG5leHBvcnQgZW51bSBDdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldCB7XG4gIEN1YmlzbU1vdGlvbkN1cnZlVGFyZ2V0X01vZGVsLCAvLyDjg6Ljg4fjg6vjgavlr77jgZfjgaZcbiAgQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXRfUGFyYW1ldGVyLCAvLyDjg5Hjg6njg6Hjg7zjgr/jgavlr77jgZfjgaZcbiAgQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXRfUGFydE9wYWNpdHkgLy8g44OR44O844OE44Gu5LiN6YCP5piO5bqm44Gr5a++44GX44GmXG59XG5cbi8qKlxuICogQGJyaWVmIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBruOCu+OCsOODoeODs+ODiOOBrueorumhnlxuICpcbiAqIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBruOCu+OCsOODoeODs+ODiOOBrueorumhnuOAglxuICovXG5leHBvcnQgZW51bSBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZSB7XG4gIEN1YmlzbU1vdGlvblNlZ21lbnRUeXBlX0xpbmVhciA9IDAsIC8vIOODquODi+OColxuICBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZV9CZXppZXIgPSAxLCAvLyDjg5njgrjjgqfmm7Lnt5pcbiAgQ3ViaXNtTW90aW9uU2VnbWVudFR5cGVfU3RlcHBlZCA9IDIsIC8vIOOCueODhuODg+ODl1xuICBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZV9JbnZlcnNlU3RlcHBlZCA9IDMgLy8g44Kk44Oz44OQ44O844K544K544OG44OD44OXXG59XG5cbi8qKlxuICogQGJyaWVmIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBruWItuW+oeeCuVxuICpcbiAqIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBruWItuW+oeeCueOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTW90aW9uUG9pbnQge1xuICB0aW1lID0gMC4wOyAvLyDmmYLplpNb56eSXVxuICB2YWx1ZSA9IDAuMDsgLy8g5YCkXG59XG5cbi8qKlxuICog44Oi44O844K344On44Oz44Kr44O844OW44Gu44K744Kw44Oh44Oz44OI44Gu6KmV5L6h6Zai5pWwXG4gKlxuICogQHBhcmFtICAgcG9pbnRzICAgICAg44Oi44O844K344On44Oz44Kr44O844OW44Gu5Yi25b6h54K544Oq44K544OIXG4gKiBAcGFyYW0gICB0aW1lICAgICAgICDoqZXkvqHjgZnjgovmmYLplpNb56eSXVxuICovXG5leHBvcnQgaW50ZXJmYWNlIGNzbU1vdGlvblNlZ21lbnRFdmFsdWF0aW9uRnVuY3Rpb24ge1xuICAocG9pbnRzOiBDdWJpc21Nb3Rpb25Qb2ludFtdLCB0aW1lOiBudW1iZXIpOiBudW1iZXI7XG59XG5cbi8qKlxuICogQGJyaWVmIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBruOCu+OCsOODoeODs+ODiFxuICpcbiAqIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOBruOCu+OCsOODoeODs+ODiOOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTW90aW9uU2VnbWVudCB7XG4gIC8qKlxuICAgKiBAYnJpZWYg44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv+OAglxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXZhbHVhdGUgPSBudWxsO1xuICAgIHRoaXMuYmFzZVBvaW50SW5kZXggPSAwO1xuICAgIHRoaXMuc2VnbWVudFR5cGUgPSAwO1xuICB9XG5cbiAgZXZhbHVhdGU6IGNzbU1vdGlvblNlZ21lbnRFdmFsdWF0aW9uRnVuY3Rpb247IC8vIOS9v+eUqOOBmeOCi+ipleS+oemWouaVsFxuICBiYXNlUG9pbnRJbmRleDogbnVtYmVyOyAvLyDmnIDliJ3jga7jgrvjgrDjg6Hjg7Pjg4jjgbjjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgc2VnbWVudFR5cGU6IG51bWJlcjsgLy8g44K744Kw44Oh44Oz44OI44Gu56iu6aGeXG59XG5cbi8qKlxuICogQGJyaWVmIOODouODvOOCt+ODp+ODs+OCq+ODvOODllxuICpcbiAqIOODouODvOOCt+ODp+ODs+OCq+ODvOODluOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTW90aW9uQ3VydmUge1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50eXBlID0gQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXQuQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXRfTW9kZWw7XG4gICAgdGhpcy5zZWdtZW50Q291bnQgPSAwO1xuICAgIHRoaXMuYmFzZVNlZ21lbnRJbmRleCA9IDA7XG4gICAgdGhpcy5mYWRlSW5UaW1lID0gMC4wO1xuICAgIHRoaXMuZmFkZU91dFRpbWUgPSAwLjA7XG4gIH1cblxuICB0eXBlOiBDdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldDsgLy8g44Kr44O844OW44Gu56iu6aGeXG4gIGlkOiBDdWJpc21JZEhhbmRsZTsgLy8g44Kr44O844OW44GuSURcbiAgc2VnbWVudENvdW50OiBudW1iZXI7IC8vIOOCu+OCsOODoeODs+ODiOOBruWAi+aVsFxuICBiYXNlU2VnbWVudEluZGV4OiBudW1iZXI7IC8vIOacgOWIneOBruOCu+OCsOODoeODs+ODiOOBruOCpOODs+ODh+ODg+OCr+OCuVxuICBmYWRlSW5UaW1lOiBudW1iZXI7IC8vIOODleOCp+ODvOODieOCpOODs+OBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG4gIGZhZGVPdXRUaW1lOiBudW1iZXI7IC8vIOODleOCp+ODvOODieOCouOCpuODiOOBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG59XG5cbi8qKlxuICog44Kk44OZ44Oz44OI44CCXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21Nb3Rpb25FdmVudCB7XG4gIGZpcmVUaW1lID0gMC4wO1xuICB2YWx1ZTogY3NtU3RyaW5nO1xufVxuXG4vKipcbiAqIEBicmllZiDjg6Ljg7zjgrfjg6fjg7Pjg4fjg7zjgr9cbiAqXG4gKiDjg6Ljg7zjgrfjg6fjg7Pjg4fjg7zjgr/jgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vdGlvbkRhdGEge1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kdXJhdGlvbiA9IDAuMDtcbiAgICB0aGlzLmxvb3AgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnZlQ291bnQgPSAwO1xuICAgIHRoaXMuZXZlbnRDb3VudCA9IDA7XG4gICAgdGhpcy5mcHMgPSAwLjA7XG5cbiAgICB0aGlzLmN1cnZlcyA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtTW90aW9uQ3VydmU+KCk7XG4gICAgdGhpcy5zZWdtZW50cyA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtTW90aW9uU2VnbWVudD4oKTtcbiAgICB0aGlzLnBvaW50cyA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtTW90aW9uUG9pbnQ+KCk7XG4gICAgdGhpcy5ldmVudHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbU1vdGlvbkV2ZW50PigpO1xuICB9XG5cbiAgZHVyYXRpb246IG51bWJlcjsgLy8g44Oi44O844K344On44Oz44Gu6ZW344GVW+enkl1cbiAgbG9vcDogYm9vbGVhbjsgLy8g44Or44O844OX44GZ44KL44GL44Gp44GG44GLXG4gIGN1cnZlQ291bnQ6IG51bWJlcjsgLy8g44Kr44O844OW44Gu5YCL5pWwXG4gIGV2ZW50Q291bnQ6IG51bWJlcjsgLy8gVXNlckRhdGHjga7lgIvmlbBcbiAgZnBzOiBudW1iZXI7IC8vIOODleODrOODvOODoOODrOODvOODiFxuICBjdXJ2ZXM6IGNzbVZlY3RvcjxDdWJpc21Nb3Rpb25DdXJ2ZT47IC8vIOOCq+ODvOODluOBruODquOCueODiFxuICBzZWdtZW50czogY3NtVmVjdG9yPEN1YmlzbU1vdGlvblNlZ21lbnQ+OyAvLyDjgrvjgrDjg6Hjg7Pjg4jjga7jg6rjgrnjg4hcbiAgcG9pbnRzOiBjc21WZWN0b3I8Q3ViaXNtTW90aW9uUG9pbnQ+OyAvLyDjg53jgqTjg7Pjg4jjga7jg6rjgrnjg4hcbiAgZXZlbnRzOiBjc21WZWN0b3I8Q3ViaXNtTW90aW9uRXZlbnQ+OyAvLyDjgqTjg5njg7Pjg4jjga7jg6rjgrnjg4hcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtbW90aW9uaW50ZXJuYWwnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vdGlvbkN1cnZlID0gJC5DdWJpc21Nb3Rpb25DdXJ2ZTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW90aW9uQ3VydmUgPSAkLkN1YmlzbU1vdGlvbkN1cnZlO1xuICBleHBvcnQgY29uc3QgQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXQgPSAkLkN1YmlzbU1vdGlvbkN1cnZlVGFyZ2V0O1xuICBleHBvcnQgdHlwZSBDdWJpc21Nb3Rpb25DdXJ2ZVRhcmdldCA9ICQuQ3ViaXNtTW90aW9uQ3VydmVUYXJnZXQ7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb3Rpb25EYXRhID0gJC5DdWJpc21Nb3Rpb25EYXRhO1xuICBleHBvcnQgdHlwZSBDdWJpc21Nb3Rpb25EYXRhID0gJC5DdWJpc21Nb3Rpb25EYXRhO1xuICBleHBvcnQgY29uc3QgQ3ViaXNtTW90aW9uRXZlbnQgPSAkLkN1YmlzbU1vdGlvbkV2ZW50O1xuICBleHBvcnQgdHlwZSBDdWJpc21Nb3Rpb25FdmVudCA9ICQuQ3ViaXNtTW90aW9uRXZlbnQ7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb3Rpb25Qb2ludCA9ICQuQ3ViaXNtTW90aW9uUG9pbnQ7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vdGlvblBvaW50ID0gJC5DdWJpc21Nb3Rpb25Qb2ludDtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vdGlvblNlZ21lbnQgPSAkLkN1YmlzbU1vdGlvblNlZ21lbnQ7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vdGlvblNlZ21lbnQgPSAkLkN1YmlzbU1vdGlvblNlZ21lbnQ7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb3Rpb25TZWdtZW50VHlwZSA9ICQuQ3ViaXNtTW90aW9uU2VnbWVudFR5cGU7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vdGlvblNlZ21lbnRUeXBlID0gJC5DdWJpc21Nb3Rpb25TZWdtZW50VHlwZTtcbiAgZXhwb3J0IHR5cGUgY3NtTW90aW9uU2VnbWVudEV2YWx1YXRpb25GdW5jdGlvbiA9ICQuY3NtTW90aW9uU2VnbWVudEV2YWx1YXRpb25GdW5jdGlvbjtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVNBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBb0JBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFmQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFBQTtBQWZBO0FBb0JBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFBQTtBQXZCQTtBQTBCQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUdBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismmotioninternal.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismmotionjson.ts":
/*!**************************************************!*\
  !*** ./Framework/src/motion/cubismmotionjson.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.EvaluationOptionFlag = exports.CubismMotionJson = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar csmstring_1 = __webpack_require__(/*! ../type/csmstring */ \"./Framework/src/type/csmstring.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ../utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nvar Meta = 'Meta';\nvar Duration = 'Duration';\nvar Loop = 'Loop';\nvar AreBeziersRestricted = 'AreBeziersRestricted';\nvar CurveCount = 'CurveCount';\nvar Fps = 'Fps';\nvar TotalSegmentCount = 'TotalSegmentCount';\nvar TotalPointCount = 'TotalPointCount';\nvar Curves = 'Curves';\nvar Target = 'Target';\nvar Id = 'Id';\nvar FadeInTime = 'FadeInTime';\nvar FadeOutTime = 'FadeOutTime';\nvar Segments = 'Segments';\nvar UserData = 'UserData';\nvar UserDataCount = 'UserDataCount';\nvar TotalUserDataSize = 'TotalUserDataSize';\nvar Time = 'Time';\nvar Value = 'Value';\nvar CubismMotionJson = (function () {\n    function CubismMotionJson(buffer, size) {\n        this._json = cubismjson_1.CubismJson.create(buffer, size);\n    }\n    CubismMotionJson.prototype.release = function () {\n        cubismjson_1.CubismJson.delete(this._json);\n    };\n    CubismMotionJson.prototype.getMotionDuration = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Duration)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.isMotionLoop = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Loop)\n            .toBoolean();\n    };\n    CubismMotionJson.prototype.getEvaluationOptionFlag = function (flagType) {\n        if (EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType) {\n            return this._json\n                .getRoot()\n                .getValueByString(Meta)\n                .getValueByString(AreBeziersRestricted)\n                .toBoolean();\n        }\n        return false;\n    };\n    CubismMotionJson.prototype.getMotionCurveCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(CurveCount)\n            .toInt();\n    };\n    CubismMotionJson.prototype.getMotionFps = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(Fps)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getMotionTotalSegmentCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalSegmentCount)\n            .toInt();\n    };\n    CubismMotionJson.prototype.getMotionTotalPointCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalPointCount)\n            .toInt();\n    };\n    CubismMotionJson.prototype.isExistMotionFadeInTime = function () {\n        return !this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeInTime)\n            .isNull();\n    };\n    CubismMotionJson.prototype.isExistMotionFadeOutTime = function () {\n        return !this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeOutTime)\n            .isNull();\n    };\n    CubismMotionJson.prototype.getMotionFadeInTime = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeInTime)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getMotionFadeOutTime = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(FadeOutTime)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getMotionCurveTarget = function (curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Target)\n            .getRawString();\n    };\n    CubismMotionJson.prototype.getMotionCurveId = function (curveIndex) {\n        return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Id)\n            .getRawString());\n    };\n    CubismMotionJson.prototype.isExistMotionCurveFadeInTime = function (curveIndex) {\n        return !this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeInTime)\n            .isNull();\n    };\n    CubismMotionJson.prototype.isExistMotionCurveFadeOutTime = function (curveIndex) {\n        return !this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeOutTime)\n            .isNull();\n    };\n    CubismMotionJson.prototype.getMotionCurveFadeInTime = function (curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeInTime)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getMotionCurveFadeOutTime = function (curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(FadeOutTime)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getMotionCurveSegmentCount = function (curveIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Segments)\n            .getVector()\n            .getSize();\n    };\n    CubismMotionJson.prototype.getMotionCurveSegment = function (curveIndex, segmentIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(Curves)\n            .getValueByIndex(curveIndex)\n            .getValueByString(Segments)\n            .getValueByIndex(segmentIndex)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getEventCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(UserDataCount)\n            .toInt();\n    };\n    CubismMotionJson.prototype.getTotalEventValueSize = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalUserDataSize)\n            .toInt();\n    };\n    CubismMotionJson.prototype.getEventTime = function (userDataIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(userDataIndex)\n            .getValueByString(Time)\n            .toFloat();\n    };\n    CubismMotionJson.prototype.getEventValue = function (userDataIndex) {\n        return new csmstring_1.csmString(this._json\n            .getRoot()\n            .getValueByString(UserData)\n            .getValueByIndex(userDataIndex)\n            .getValueByString(Value)\n            .getRawString());\n    };\n    return CubismMotionJson;\n}());\nexports.CubismMotionJson = CubismMotionJson;\nvar EvaluationOptionFlag;\n(function (EvaluationOptionFlag) {\n    EvaluationOptionFlag[EvaluationOptionFlag[\"EvaluationOptionFlag_AreBeziersRistricted\"] = 0] = \"EvaluationOptionFlag_AreBeziersRistricted\";\n})(EvaluationOptionFlag = exports.EvaluationOptionFlag || (exports.EvaluationOptionFlag = {}));\nvar $ = __importStar(__webpack_require__(/*! ./cubismmotionjson */ \"./Framework/src/motion/cubismmotionjson.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionJson = $.CubismMotionJson;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb25qc29uLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb3Rpb24vY3ViaXNtbW90aW9uanNvbi50cz8zZjhkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgQ3ViaXNtRnJhbWV3b3JrIH0gZnJvbSAnLi4vbGl2ZTJkY3ViaXNtZnJhbWV3b3JrJztcbmltcG9ydCB7IGNzbVN0cmluZyB9IGZyb20gJy4uL3R5cGUvY3Ntc3RyaW5nJztcbmltcG9ydCB7IEN1YmlzbUpzb24gfSBmcm9tICcuLi91dGlscy9jdWJpc21qc29uJztcblxuLy8gSlNPTiBrZXlzXG5jb25zdCBNZXRhID0gJ01ldGEnO1xuY29uc3QgRHVyYXRpb24gPSAnRHVyYXRpb24nO1xuY29uc3QgTG9vcCA9ICdMb29wJztcbmNvbnN0IEFyZUJlemllcnNSZXN0cmljdGVkID0gJ0FyZUJlemllcnNSZXN0cmljdGVkJztcbmNvbnN0IEN1cnZlQ291bnQgPSAnQ3VydmVDb3VudCc7XG5jb25zdCBGcHMgPSAnRnBzJztcbmNvbnN0IFRvdGFsU2VnbWVudENvdW50ID0gJ1RvdGFsU2VnbWVudENvdW50JztcbmNvbnN0IFRvdGFsUG9pbnRDb3VudCA9ICdUb3RhbFBvaW50Q291bnQnO1xuY29uc3QgQ3VydmVzID0gJ0N1cnZlcyc7XG5jb25zdCBUYXJnZXQgPSAnVGFyZ2V0JztcbmNvbnN0IElkID0gJ0lkJztcbmNvbnN0IEZhZGVJblRpbWUgPSAnRmFkZUluVGltZSc7XG5jb25zdCBGYWRlT3V0VGltZSA9ICdGYWRlT3V0VGltZSc7XG5jb25zdCBTZWdtZW50cyA9ICdTZWdtZW50cyc7XG5jb25zdCBVc2VyRGF0YSA9ICdVc2VyRGF0YSc7XG5jb25zdCBVc2VyRGF0YUNvdW50ID0gJ1VzZXJEYXRhQ291bnQnO1xuY29uc3QgVG90YWxVc2VyRGF0YVNpemUgPSAnVG90YWxVc2VyRGF0YVNpemUnO1xuY29uc3QgVGltZSA9ICdUaW1lJztcbmNvbnN0IFZhbHVlID0gJ1ZhbHVlJztcblxuLyoqXG4gKiBtb3Rpb24zLmpzb27jga7jgrPjg7Pjg4bjg4rjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vdGlvbkpzb24ge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqIEBwYXJhbSBidWZmZXIgbW90aW9uMy5qc29u44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplIOODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIHNpemU6IG51bWJlcikge1xuICAgIHRoaXMuX2pzb24gPSBDdWJpc21Kc29uLmNyZWF0ZShidWZmZXIsIHNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv+ebuOW9k+OBruWHpueQhlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgQ3ViaXNtSnNvbi5kZWxldGUodGhpcy5fanNvbik7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu6ZW344GV44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Gu6ZW344GVW+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRNb3Rpb25EdXJhdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRHVyYXRpb24pXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruODq+ODvOODl+aDheWgseOBruWPluW+l1xuICAgKiBAcmV0dXJuIHRydWUg44Or44O844OX44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug44Or44O844OX44GX44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNNb3Rpb25Mb29wKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTG9vcClcbiAgICAgIC50b0Jvb2xlYW4oKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFdmFsdWF0aW9uT3B0aW9uRmxhZyhmbGFnVHlwZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKFxuICAgICAgRXZhbHVhdGlvbk9wdGlvbkZsYWcuRXZhbHVhdGlvbk9wdGlvbkZsYWdfQXJlQmV6aWVyc1Jpc3RyaWN0ZWQgPT0gZmxhZ1R5cGVcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAgIC5nZXRSb290KClcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWV0YSlcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQXJlQmV6aWVyc1Jlc3RyaWN0ZWQpXG4gICAgICAgIC50b0Jvb2xlYW4oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Kr44O844OW44Gu5YCL5pWw44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Kr44O844OW44Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uQ3VydmVDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQ3VydmVDb3VudClcbiAgICAgIC50b0ludCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruODleODrOODvOODoOODrOODvOODiOOBruWPluW+l1xuICAgKiBAcmV0dXJuIOODleODrOODvOODoOODrOODvOODiFtGUFNdXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uRnBzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGcHMpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruOCu+OCsOODoeODs+ODiOOBrue3j+WQiOioiOOBruWPluW+l1xuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+OBruOCu+OCsOODoeODs+ODiOOBruWPluW+l1xuICAgKi9cbiAgcHVibGljIGdldE1vdGlvblRvdGFsU2VnbWVudENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhUb3RhbFNlZ21lbnRDb3VudClcbiAgICAgIC50b0ludCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruOCq+ODvOODluOBruWItuW+oeW6l+OBrue3j+WQiOioiOOBruWPluW+l1xuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+OBruOCq+ODvOODluOBruWItuW+oeeCueOBrue3j+WQiOioiFxuICAgKi9cbiAgcHVibGljIGdldE1vdGlvblRvdGFsUG9pbnRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVG90YWxQb2ludENvdW50KVxuICAgICAgLnRvSW50KCk7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu44OV44Kn44O844OJ44Kk44Oz5pmC6ZaT44Gu5a2Y5ZyoXG4gICAqIEByZXR1cm4gdHJ1ZSDlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc0V4aXN0TW90aW9uRmFkZUluVGltZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGYWRlSW5UaW1lKVxuICAgICAgLmlzTnVsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruODleOCp+ODvOODieOCouOCpuODiOaZgumWk+OBruWtmOWcqFxuICAgKiBAcmV0dXJuIHRydWUg5a2Y5Zyo44GZ44KLXG4gICAqIEByZXR1cm4gZmFsc2Ug5a2Y5Zyo44GX44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNFeGlzdE1vdGlvbkZhZGVPdXRUaW1lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWV0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZhZGVPdXRUaW1lKVxuICAgICAgLmlzTnVsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruODleOCp+ODvOODieOCpOODs+aZgumWk+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOODleOCp+ODvOODieOCpOODs+aZgumWk1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uRmFkZUluVGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmFkZUluVGltZSlcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaT44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRNb3Rpb25GYWRlT3V0VGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmFkZU91dFRpbWUpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruOCq+ODvOODluOBrueorumhnuOBruWPluW+l1xuICAgKiBAcGFyYW0gY3VydmVJbmRleCDjgqvjg7zjg5bjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDjgqvjg7zjg5bjga7nqK7poZ5cbiAgICovXG4gIHB1YmxpYyBnZXRNb3Rpb25DdXJ2ZVRhcmdldChjdXJ2ZUluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhDdXJ2ZXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KGN1cnZlSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhUYXJnZXQpXG4gICAgICAuZ2V0UmF3U3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu44Kr44O844OW44GuSUTjga7lj5blvpdcbiAgICogQHBhcmFtIGN1cnZlSW5kZXgg44Kr44O844OW44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g44Kr44O844OW44GuSURcbiAgICovXG4gIHB1YmxpYyBnZXRNb3Rpb25DdXJ2ZUlkKGN1cnZlSW5kZXg6IG51bWJlcik6IEN1YmlzbUlkSGFuZGxlIHtcbiAgICByZXR1cm4gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpLmdldElkKFxuICAgICAgdGhpcy5fanNvblxuICAgICAgICAuZ2V0Um9vdCgpXG4gICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEN1cnZlcylcbiAgICAgICAgLmdldFZhbHVlQnlJbmRleChjdXJ2ZUluZGV4KVxuICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhJZClcbiAgICAgICAgLmdldFJhd1N0cmluZygpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7jgqvjg7zjg5bjga7jg5Xjgqfjg7zjg4njgqTjg7PmmYLplpPjga7lrZjlnKhcbiAgICogQHBhcmFtIGN1cnZlSW5kZXgg44Kr44O844OW44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gdHJ1ZSDlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc0V4aXN0TW90aW9uQ3VydmVGYWRlSW5UaW1lKGN1cnZlSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQ3VydmVzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChjdXJ2ZUluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRmFkZUluVGltZSlcbiAgICAgIC5pc051bGwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7jgqvjg7zjg5bjga7jg5Xjgqfjg7zjg4njgqLjgqbjg4jmmYLplpPjga7lrZjlnKhcbiAgICogQHBhcmFtIGN1cnZlSW5kZXgg44Kr44O844OW44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4gdHJ1ZSDlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc0V4aXN0TW90aW9uQ3VydmVGYWRlT3V0VGltZShjdXJ2ZUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEN1cnZlcylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoY3VydmVJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZhZGVPdXRUaW1lKVxuICAgICAgLmlzTnVsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBruOCq+ODvOODluOBruODleOCp+ODvOODieOCpOODs+aZgumWk+OBruWPluW+l1xuICAgKiBAcGFyYW0gY3VydmVJbmRleCDjgqvjg7zjg5bjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDjg5Xjgqfjg7zjg4njgqTjg7PmmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIGdldE1vdGlvbkN1cnZlRmFkZUluVGltZShjdXJ2ZUluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhDdXJ2ZXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KGN1cnZlSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhGYWRlSW5UaW1lKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7jgqvjg7zjg5bjga7jg5Xjgqfjg7zjg4njgqLjgqbjg4jmmYLplpPjga7lj5blvpdcbiAgICogQHBhcmFtIGN1cnZlSW5kZXgg44Kr44O844OW44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRNb3Rpb25DdXJ2ZUZhZGVPdXRUaW1lKGN1cnZlSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEN1cnZlcylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgoY3VydmVJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEZhZGVPdXRUaW1lKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7jgqvjg7zjg5bjga7jgrvjgrDjg6Hjg7Pjg4jjga7lgIvmlbDjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGN1cnZlSW5kZXgg44Kr44O844OW44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Gu44Kr44O844OW44Gu44K744Kw44Oh44Oz44OI44Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0TW90aW9uQ3VydmVTZWdtZW50Q291bnQoY3VydmVJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQ3VydmVzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChjdXJ2ZUluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoU2VnbWVudHMpXG4gICAgICAuZ2V0VmVjdG9yKClcbiAgICAgIC5nZXRTaXplKCk7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu44Kr44O844OW44Gu44K744Kw44Oh44Oz44OI44Gu5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBjdXJ2ZUluZGV4IOOCq+ODvOODluOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gc2VnbWVudEluZGV4IOOCu+OCsOODoeODs+ODiOOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOOCu+OCsOODoeODs+ODiOOBruWApFxuICAgKi9cbiAgcHVibGljIGdldE1vdGlvbkN1cnZlU2VnbWVudChcbiAgICBjdXJ2ZUluZGV4OiBudW1iZXIsXG4gICAgc2VnbWVudEluZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQ3VydmVzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChjdXJ2ZUluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoU2VnbWVudHMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHNlZ21lbnRJbmRleClcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog44Kk44OZ44Oz44OI44Gu5YCL5pWw44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44Kk44OZ44Oz44OI44Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0RXZlbnRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVXNlckRhdGFDb3VudClcbiAgICAgIC50b0ludCgpO1xuICB9XG5cbiAgLyoqXG4gICAqICDjgqTjg5njg7Pjg4jjga7nt4/mloflrZfmlbDjga7lj5blvpdcbiAgICogQHJldHVybiDjgqTjg5njg7Pjg4jjga7nt4/mloflrZfmlbBcbiAgICovXG4gIHB1YmxpYyBnZXRUb3RhbEV2ZW50VmFsdWVTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhUb3RhbFVzZXJEYXRhU2l6ZSlcbiAgICAgIC50b0ludCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODmeODs+ODiOOBruaZgumWk+OBruWPluW+l1xuICAgKiBAcGFyYW0gdXNlckRhdGFJbmRleCDjgqTjg5njg7Pjg4jjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDjgqTjg5njg7Pjg4jjga7mmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIGdldEV2ZW50VGltZSh1c2VyRGF0YUluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhVc2VyRGF0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgodXNlckRhdGFJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFRpbWUpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODmeODs+ODiOOBruWPluW+l1xuICAgKiBAcGFyYW0gdXNlckRhdGFJbmRleCDjgqTjg5njg7Pjg4jjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDjgqTjg5njg7Pjg4jjga7mloflrZfliJdcbiAgICovXG4gIHB1YmxpYyBnZXRFdmVudFZhbHVlKHVzZXJEYXRhSW5kZXg6IG51bWJlcik6IGNzbVN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBjc21TdHJpbmcoXG4gICAgICB0aGlzLl9qc29uXG4gICAgICAgIC5nZXRSb290KClcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVXNlckRhdGEpXG4gICAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgodXNlckRhdGFJbmRleClcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVmFsdWUpXG4gICAgICAgIC5nZXRSYXdTdHJpbmcoKVxuICAgICk7XG4gIH1cblxuICBfanNvbjogQ3ViaXNtSnNvbjsgLy8gbW90aW9uMy5qc29u44Gu44OH44O844K/XG59XG5cbi8qKlxuICogQGJyaWVmIOODmeOCuOOCp+OCq+ODvOODluOBruino+mHiOaWueazleOBruODleODqeOCsOOCv+OCpOODl1xuICovXG5leHBvcnQgZW51bSBFdmFsdWF0aW9uT3B0aW9uRmxhZyB7XG4gIEV2YWx1YXRpb25PcHRpb25GbGFnX0FyZUJlemllcnNSaXN0cmljdGVkID0gMCAvLy88IOODmeOCuOOCp+ODj+ODs+ODieODq+OBruimj+WItueKtuaFi1xufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jdWJpc21tb3Rpb25qc29uJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21Nb3Rpb25Kc29uID0gJC5DdWJpc21Nb3Rpb25Kc29uO1xuICBleHBvcnQgdHlwZSBDdWJpc21Nb3Rpb25Kc29uID0gJC5DdWJpc21Nb3Rpb25Kc29uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQU1BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBM1VBO0FBZ1ZBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismmotionjson.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismmotionmanager.ts":
/*!*****************************************************!*\
  !*** ./Framework/src/motion/cubismmotionmanager.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMotionManager = void 0;\nvar cubismmotionqueuemanager_1 = __webpack_require__(/*! ./cubismmotionqueuemanager */ \"./Framework/src/motion/cubismmotionqueuemanager.ts\");\nvar CubismMotionManager = (function (_super) {\n    __extends(CubismMotionManager, _super);\n    function CubismMotionManager() {\n        var _this = _super.call(this) || this;\n        _this._currentPriority = 0;\n        _this._reservePriority = 0;\n        return _this;\n    }\n    CubismMotionManager.prototype.getCurrentPriority = function () {\n        return this._currentPriority;\n    };\n    CubismMotionManager.prototype.getReservePriority = function () {\n        return this._reservePriority;\n    };\n    CubismMotionManager.prototype.setReservePriority = function (val) {\n        this._reservePriority = val;\n    };\n    CubismMotionManager.prototype.startMotionPriority = function (motion, autoDelete, priority) {\n        if (priority == this._reservePriority) {\n            this._reservePriority = 0;\n        }\n        this._currentPriority = priority;\n        return _super.prototype.startMotion.call(this, motion, autoDelete, this._userTimeSeconds);\n    };\n    CubismMotionManager.prototype.updateMotion = function (model, deltaTimeSeconds) {\n        this._userTimeSeconds += deltaTimeSeconds;\n        var updated = _super.prototype.doUpdateMotion.call(this, model, this._userTimeSeconds);\n        if (this.isFinished()) {\n            this._currentPriority = 0;\n        }\n        return updated;\n    };\n    CubismMotionManager.prototype.reserveMotion = function (priority) {\n        if (priority <= this._reservePriority ||\n            priority <= this._currentPriority) {\n            return false;\n        }\n        this._reservePriority = priority;\n        return true;\n    };\n    return CubismMotionManager;\n}(cubismmotionqueuemanager_1.CubismMotionQueueManager));\nexports.CubismMotionManager = CubismMotionManager;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmotionmanager */ \"./Framework/src/motion/cubismmotionmanager.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionManager = $.CubismMotionManager;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb25tYW5hZ2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb3Rpb24vY3ViaXNtbW90aW9ubWFuYWdlci50cz81ZmE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgQUN1YmlzbU1vdGlvbiB9IGZyb20gJy4vYWN1YmlzbW1vdGlvbic7XG5pbXBvcnQge1xuICBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5SGFuZGxlLFxuICBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXJcbn0gZnJvbSAnLi9jdWJpc21tb3Rpb25xdWV1ZW1hbmFnZXInO1xuXG4vKipcbiAqIOODouODvOOCt+ODp+ODs+OBrueuoeeQhlxuICpcbiAqIOODouODvOOCt+ODp+ODs+OBrueuoeeQhuOCkuihjOOBhuOCr+ODqeOCuVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtTW90aW9uTWFuYWdlciBleHRlbmRzIEN1YmlzbU1vdGlvblF1ZXVlTWFuYWdlciB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2N1cnJlbnRQcmlvcml0eSA9IDA7XG4gICAgdGhpcy5fcmVzZXJ2ZVByaW9yaXR5ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlho3nlJ/kuK3jga7jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqbjga7lj5blvpdcbiAgICogQHJldHVybiAg44Oi44O844K344On44Oz44Gu5YSq5YWI5bqmXG4gICAqL1xuICBwdWJsaWMgZ2V0Q3VycmVudFByaW9yaXR5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRQcmlvcml0eTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuojntITkuK3jga7jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqbjgpLlj5blvpfjgZnjgovjgIJcbiAgICogQHJldHVybiAg44Oi44O844K344On44Oz44Gu5YSq5YWI5bqmXG4gICAqL1xuICBwdWJsaWMgZ2V0UmVzZXJ2ZVByaW9yaXR5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc2VydmVQcmlvcml0eTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuojntITkuK3jga7jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqbjgpLoqK3lrprjgZnjgovjgIJcbiAgICogQHBhcmFtICAgdmFsICAgICDlhKrlhYjluqZcbiAgICovXG4gIHB1YmxpYyBzZXRSZXNlcnZlUHJpb3JpdHkodmFsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXNlcnZlUHJpb3JpdHkgPSB2YWw7XG4gIH1cblxuICAvKipcbiAgICog5YSq5YWI5bqm44KS6Kit5a6a44GX44Gm44Oi44O844K344On44Oz44KS6ZaL5aeL44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSBtb3Rpb24gICAgICAgICAg44Oi44O844K344On44OzXG4gICAqIEBwYXJhbSBhdXRvRGVsZXRlICAgICAg5YaN55Sf44GM54up54yf44GX44Gf44Oi44O844K344On44Oz44Gu44Kk44Oz44K544K/44Oz44K544KS5YmK6Zmk44GZ44KL44Gq44KJdHJ1ZVxuICAgKiBAcGFyYW0gcHJpb3JpdHkgICAgICAgIOWEquWFiOW6plxuICAgKiBAcmV0dXJuICAgICAgICAgICAgICAgIOmWi+Wni+OBl+OBn+ODouODvOOCt+ODp+ODs+OBruitmOWIpeeVquWPt+OCkui/lOOBmeOAguWAi+WIpeOBruODouODvOOCt+ODp+ODs+OBjOe1guS6huOBl+OBn+OBi+WQpuOBi+OCkuWIpOWumuOBmeOCi0lzRmluaXNoZWQoKeOBruW8leaVsOOBp+S9v+eUqOOBmeOCi+OAgumWi+Wni+OBp+OBjeOBquOBhOaZguOBr+OAjC0x44CNXG4gICAqL1xuICBwdWJsaWMgc3RhcnRNb3Rpb25Qcmlvcml0eShcbiAgICBtb3Rpb246IEFDdWJpc21Nb3Rpb24sXG4gICAgYXV0b0RlbGV0ZTogYm9vbGVhbixcbiAgICBwcmlvcml0eTogbnVtYmVyXG4gICk6IEN1YmlzbU1vdGlvblF1ZXVlRW50cnlIYW5kbGUge1xuICAgIGlmIChwcmlvcml0eSA9PSB0aGlzLl9yZXNlcnZlUHJpb3JpdHkpIHtcbiAgICAgIHRoaXMuX3Jlc2VydmVQcmlvcml0eSA9IDA7IC8vIOS6iOe0hOOCkuino+mZpFxuICAgIH1cblxuICAgIHRoaXMuX2N1cnJlbnRQcmlvcml0eSA9IHByaW9yaXR5OyAvLyDlho3nlJ/kuK3jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqbjgpLoqK3lrppcblxuICAgIHJldHVybiBzdXBlci5zdGFydE1vdGlvbihtb3Rpb24sIGF1dG9EZWxldGUsIHRoaXMuX3VzZXJUaW1lU2Vjb25kcyk7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44KS5pu05paw44GX44Gm44CB44Oi44OH44Or44Gr44OR44Op44Oh44O844K/5YCk44KS5Y+N5pig44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSBtb2RlbCAgIOWvvuixoeOBruODouODh+ODq1xuICAgKiBAcGFyYW0gZGVsdGFUaW1lU2Vjb25kcyAgICDjg4fjg6vjgr/mmYLplpNb56eSXVxuICAgKiBAcmV0dXJuICB0cnVlICAgIOabtOaWsOOBleOCjOOBpuOBhOOCi1xuICAgKiBAcmV0dXJuICBmYWxzZSAgIOabtOaWsOOBleOCjOOBpuOBhOOBquOBhFxuICAgKi9cbiAgcHVibGljIHVwZGF0ZU1vdGlvbihtb2RlbDogQ3ViaXNtTW9kZWwsIGRlbHRhVGltZVNlY29uZHM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3VzZXJUaW1lU2Vjb25kcyArPSBkZWx0YVRpbWVTZWNvbmRzO1xuXG4gICAgY29uc3QgdXBkYXRlZDogYm9vbGVhbiA9IHN1cGVyLmRvVXBkYXRlTW90aW9uKG1vZGVsLCB0aGlzLl91c2VyVGltZVNlY29uZHMpO1xuXG4gICAgaWYgKHRoaXMuaXNGaW5pc2hlZCgpKSB7XG4gICAgICB0aGlzLl9jdXJyZW50UHJpb3JpdHkgPSAwOyAvLyDlho3nlJ/kuK3jga7jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqbjgpLop6PpmaRcbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7PjgpLkuojntITjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtICAgcHJpb3JpdHkgICAg5YSq5YWI5bqmXG4gICAqIEByZXR1cm4gIHRydWUgICAg5LqI57SE44Gn44GN44GfXG4gICAqIEByZXR1cm4gIGZhbHNlICAg5LqI57SE44Gn44GN44Gq44GL44Gj44GfXG4gICAqL1xuICBwdWJsaWMgcmVzZXJ2ZU1vdGlvbihwcmlvcml0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKFxuICAgICAgcHJpb3JpdHkgPD0gdGhpcy5fcmVzZXJ2ZVByaW9yaXR5IHx8XG4gICAgICBwcmlvcml0eSA8PSB0aGlzLl9jdXJyZW50UHJpb3JpdHlcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXNlcnZlUHJpb3JpdHkgPSBwcmlvcml0eTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgX2N1cnJlbnRQcmlvcml0eTogbnVtYmVyOyAvLyDnj77lnKjlho3nlJ/kuK3jga7jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqZcbiAgX3Jlc2VydmVQcmlvcml0eTogbnVtYmVyOyAvLyDlho3nlJ/kuojlrprjga7jg6Ljg7zjgrfjg6fjg7Pjga7lhKrlhYjluqbjgILlho3nlJ/kuK3jga8w44Gr44Gq44KL44CC44Oi44O844K344On44Oz44OV44Kh44Kk44Or44KS5Yil44K544Os44OD44OJ44Gn6Kqt44G/6L6844KA44Go44GN44Gu5qmf6IO944CCXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbW1vdGlvbm1hbmFnZXInO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vdGlvbk1hbmFnZXIgPSAkLkN1YmlzbU1vdGlvbk1hbmFnZXI7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vdGlvbk1hbmFnZXIgPSAkLkN1YmlzbU1vdGlvbk1hbmFnZXI7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU0E7QUFVQTtBQUFBO0FBSUE7QUFBQTtBQUVBO0FBQ0E7O0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFVQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQVVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFBQTtBQWxHQTtBQXFHQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismmotionmanager.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismmotionqueueentry.ts":
/*!********************************************************!*\
  !*** ./Framework/src/motion/cubismmotionqueueentry.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismMotionQueueEntry = void 0;\nvar acubismmotion_1 = __webpack_require__(/*! ./acubismmotion */ \"./Framework/src/motion/acubismmotion.ts\");\nvar CubismMotionQueueEntry = (function () {\n    function CubismMotionQueueEntry() {\n        this._autoDelete = false;\n        this._motion = null;\n        this._available = true;\n        this._finished = false;\n        this._started = false;\n        this._startTimeSeconds = -1.0;\n        this._fadeInStartTimeSeconds = 0.0;\n        this._endTimeSeconds = -1.0;\n        this._stateTimeSeconds = 0.0;\n        this._stateWeight = 0.0;\n        this._lastEventCheckSeconds = 0.0;\n        this._motionQueueEntryHandle = this;\n        this._fadeOutSeconds = 0.0;\n        this._isTriggeredFadeOut = false;\n    }\n    CubismMotionQueueEntry.prototype.release = function () {\n        if (this._autoDelete && this._motion) {\n            acubismmotion_1.ACubismMotion.delete(this._motion);\n        }\n    };\n    CubismMotionQueueEntry.prototype.setFadeOut = function (fadeOutSeconds) {\n        this._fadeOutSeconds = fadeOutSeconds;\n        this._isTriggeredFadeOut = true;\n    };\n    CubismMotionQueueEntry.prototype.startFadeOut = function (fadeOutSeconds, userTimeSeconds) {\n        var newEndTimeSeconds = userTimeSeconds + fadeOutSeconds;\n        this._isTriggeredFadeOut = true;\n        if (this._endTimeSeconds < 0.0 ||\n            newEndTimeSeconds < this._endTimeSeconds) {\n            this._endTimeSeconds = newEndTimeSeconds;\n        }\n    };\n    CubismMotionQueueEntry.prototype.isFinished = function () {\n        return this._finished;\n    };\n    CubismMotionQueueEntry.prototype.isStarted = function () {\n        return this._started;\n    };\n    CubismMotionQueueEntry.prototype.getStartTime = function () {\n        return this._startTimeSeconds;\n    };\n    CubismMotionQueueEntry.prototype.getFadeInStartTime = function () {\n        return this._fadeInStartTimeSeconds;\n    };\n    CubismMotionQueueEntry.prototype.getEndTime = function () {\n        return this._endTimeSeconds;\n    };\n    CubismMotionQueueEntry.prototype.setStartTime = function (startTime) {\n        this._startTimeSeconds = startTime;\n    };\n    CubismMotionQueueEntry.prototype.setFadeInStartTime = function (startTime) {\n        this._fadeInStartTimeSeconds = startTime;\n    };\n    CubismMotionQueueEntry.prototype.setEndTime = function (endTime) {\n        this._endTimeSeconds = endTime;\n    };\n    CubismMotionQueueEntry.prototype.setIsFinished = function (f) {\n        this._finished = f;\n    };\n    CubismMotionQueueEntry.prototype.setIsStarted = function (f) {\n        this._started = f;\n    };\n    CubismMotionQueueEntry.prototype.isAvailable = function () {\n        return this._available;\n    };\n    CubismMotionQueueEntry.prototype.setIsAvailable = function (v) {\n        this._available = v;\n    };\n    CubismMotionQueueEntry.prototype.setState = function (timeSeconds, weight) {\n        this._stateTimeSeconds = timeSeconds;\n        this._stateWeight = weight;\n    };\n    CubismMotionQueueEntry.prototype.getStateTime = function () {\n        return this._stateTimeSeconds;\n    };\n    CubismMotionQueueEntry.prototype.getStateWeight = function () {\n        return this._stateWeight;\n    };\n    CubismMotionQueueEntry.prototype.getLastCheckEventSeconds = function () {\n        return this._lastEventCheckSeconds;\n    };\n    CubismMotionQueueEntry.prototype.setLastCheckEventSeconds = function (checkSeconds) {\n        this._lastEventCheckSeconds = checkSeconds;\n    };\n    CubismMotionQueueEntry.prototype.isTriggeredFadeOut = function () {\n        return this._isTriggeredFadeOut;\n    };\n    CubismMotionQueueEntry.prototype.getFadeOutSeconds = function () {\n        return this._fadeOutSeconds;\n    };\n    return CubismMotionQueueEntry;\n}());\nexports.CubismMotionQueueEntry = CubismMotionQueueEntry;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmotionqueueentry */ \"./Framework/src/motion/cubismmotionqueueentry.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionQueueEntry = $.CubismMotionQueueEntry;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb25xdWV1ZWVudHJ5LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9tb3Rpb24vY3ViaXNtbW90aW9ucXVldWVlbnRyeS50cz9hOTFlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEFDdWJpc21Nb3Rpb24gfSBmcm9tICcuL2FjdWJpc21tb3Rpb24nO1xuaW1wb3J0IHsgQ3ViaXNtTW90aW9uUXVldWVFbnRyeUhhbmRsZSB9IGZyb20gJy4vY3ViaXNtbW90aW9ucXVldWVtYW5hZ2VyJztcblxuLyoqXG4gKiBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXLjgaflho3nlJ/jgZfjgabjgYTjgovlkITjg6Ljg7zjgrfjg6fjg7Pjga7nrqHnkIbjgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vdGlvblF1ZXVlRW50cnkge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fYXV0b0RlbGV0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX21vdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICB0aGlzLl9maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdGFydFRpbWVTZWNvbmRzID0gLTEuMDtcbiAgICB0aGlzLl9mYWRlSW5TdGFydFRpbWVTZWNvbmRzID0gMC4wO1xuICAgIHRoaXMuX2VuZFRpbWVTZWNvbmRzID0gLTEuMDtcbiAgICB0aGlzLl9zdGF0ZVRpbWVTZWNvbmRzID0gMC4wO1xuICAgIHRoaXMuX3N0YXRlV2VpZ2h0ID0gMC4wO1xuICAgIHRoaXMuX2xhc3RFdmVudENoZWNrU2Vjb25kcyA9IDAuMDtcbiAgICB0aGlzLl9tb3Rpb25RdWV1ZUVudHJ5SGFuZGxlID0gdGhpcztcbiAgICB0aGlzLl9mYWRlT3V0U2Vjb25kcyA9IDAuMDtcbiAgICB0aGlzLl9pc1RyaWdnZXJlZEZhZGVPdXQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjgrnjg4jjg6njgq/jgr/nm7jlvZPjga7lh6bnkIZcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hdXRvRGVsZXRlICYmIHRoaXMuX21vdGlvbikge1xuICAgICAgQUN1YmlzbU1vdGlvbi5kZWxldGUodGhpcy5fbW90aW9uKTsgLy9cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaT44Go6ZaL5aeL5Yik5a6a44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBmYWRlT3V0U2Vjb25kcyDjg5Xjgqfjg7zjg4njgqLjgqbjg4jjgavjgYvjgYvjgovmmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIHNldEZhZGVPdXQoZmFkZU91dFNlY29uZHM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2ZhZGVPdXRTZWNvbmRzID0gZmFkZU91dFNlY29uZHM7XG4gICAgdGhpcy5faXNUcmlnZ2VyZWRGYWRlT3V0ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Xjgqfjg7zjg4njgqLjgqbjg4jjga7plovlp4tcbiAgICogQHBhcmFtIGZhZGVPdXRTZWNvbmRzIOODleOCp+ODvOODieOCouOCpuODiOOBq+OBi+OBi+OCi+aZgumWk1vnp5JdXG4gICAqIEBwYXJhbSB1c2VyVGltZVNlY29uZHMg44OH44Or44K/5pmC6ZaT44Gu56mN566X5YCkW+enkl1cbiAgICovXG4gIHB1YmxpYyBzdGFydEZhZGVPdXQoZmFkZU91dFNlY29uZHM6IG51bWJlciwgdXNlclRpbWVTZWNvbmRzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBuZXdFbmRUaW1lU2Vjb25kczogbnVtYmVyID0gdXNlclRpbWVTZWNvbmRzICsgZmFkZU91dFNlY29uZHM7XG4gICAgdGhpcy5faXNUcmlnZ2VyZWRGYWRlT3V0ID0gdHJ1ZTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuX2VuZFRpbWVTZWNvbmRzIDwgMC4wIHx8XG4gICAgICBuZXdFbmRUaW1lU2Vjb25kcyA8IHRoaXMuX2VuZFRpbWVTZWNvbmRzXG4gICAgKSB7XG4gICAgICB0aGlzLl9lbmRUaW1lU2Vjb25kcyA9IG5ld0VuZFRpbWVTZWNvbmRzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7ntYLkuobjga7norroqo1cbiAgICpcbiAgICogQHJldHVybiB0cnVlIOODouODvOOCt+ODp+ODs+OBjOe1guS6huOBl+OBn1xuICAgKiBAcmV0dXJuIGZhbHNlIOe1guS6huOBl+OBpuOBhOOBquOBhFxuICAgKi9cbiAgcHVibGljIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbmlzaGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBrumWi+Wni+OBrueiuuiqjVxuICAgKiBAcmV0dXJuIHRydWUg44Oi44O844K344On44Oz44GM6ZaL5aeL44GX44GfXG4gICAqIEByZXR1cm4gZmFsc2Ug6ZaL5aeL44GX44Gm44GE44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNTdGFydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zdGFydGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBrumWi+Wni+aZguWIu+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOODouODvOOCt+ODp+ODs+OBrumWi+Wni+aZguWIu1vnp5JdXG4gICAqL1xuICBwdWJsaWMgZ2V0U3RhcnRUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXJ0VGltZVNlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Kk44Oz44Gu6ZaL5aeL5pmC5Yi744Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Kk44Oz44Gu6ZaL5aeL5pmC5Yi7W+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRGYWRlSW5TdGFydFRpbWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZmFkZUluU3RhcnRUaW1lU2Vjb25kcztcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Xjgqfjg7zjg4njgqTjg7Pjga7ntYLkuobmmYLliLvjga7lj5blvpdcbiAgICogQHJldHVybiDjg5Xjgqfjg7zjg4njgqTjg7Pjga7ntYLkuobmmYLliLvjga7lj5blvpdcbiAgICovXG4gIHB1YmxpYyBnZXRFbmRUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2VuZFRpbWVTZWNvbmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBrumWi+Wni+aZguWIu+OBruioreWumlxuICAgKiBAcGFyYW0gc3RhcnRUaW1lIOODouODvOOCt+ODp+ODs+OBrumWi+Wni+aZguWIu1xuICAgKi9cbiAgcHVibGljIHNldFN0YXJ0VGltZShzdGFydFRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3N0YXJ0VGltZVNlY29uZHMgPSBzdGFydFRpbWU7XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Kk44Oz44Gu6ZaL5aeL5pmC5Yi744Gu6Kit5a6aXG4gICAqIEBwYXJhbSBzdGFydFRpbWUg44OV44Kn44O844OJ44Kk44Oz44Gu6ZaL5aeL5pmC5Yi7W+enkl1cbiAgICovXG4gIHB1YmxpYyBzZXRGYWRlSW5TdGFydFRpbWUoc3RhcnRUaW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9mYWRlSW5TdGFydFRpbWVTZWNvbmRzID0gc3RhcnRUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOODleOCp+ODvOODieOCpOODs+OBrue1guS6huaZguWIu+OBruioreWumlxuICAgKiBAcGFyYW0gZW5kVGltZSDjg5Xjgqfjg7zjg4njgqTjg7Pjga7ntYLkuobmmYLliLtb56eSXVxuICAgKi9cbiAgcHVibGljIHNldEVuZFRpbWUoZW5kVGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZW5kVGltZVNlY29uZHMgPSBlbmRUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OBrue1guS6huOBruioreWumlxuICAgKiBAcGFyYW0gZiB0cnVl44Gq44KJ44Oi44O844K344On44Oz44Gu57WC5LqGXG4gICAqL1xuICBwdWJsaWMgc2V0SXNGaW5pc2hlZChmOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fZmluaXNoZWQgPSBmO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+mWi+Wni+OBruioreWumlxuICAgKiBAcGFyYW0gZiB0cnVl44Gq44KJ44Oi44O844K344On44Oz44Gu6ZaL5aeLXG4gICAqL1xuICBwdWJsaWMgc2V0SXNTdGFydGVkKGY6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9zdGFydGVkID0gZjtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7mnInlirnmgKfjga7norroqo1cbiAgICogQHJldHVybiB0cnVlIOODouODvOOCt+ODp+ODs+OBr+acieWKuVxuICAgKiBAcmV0dXJuIGZhbHNlIOODouODvOOCt+ODp+ODs+OBr+eEoeWKuVxuICAgKi9cbiAgcHVibGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hdmFpbGFibGU7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu5pyJ5Yq55oCn44Gu6Kit5a6aXG4gICAqIEBwYXJhbSB2IHRydWXjgarjgonjg6Ljg7zjgrfjg6fjg7Pjga/mnInlirlcbiAgICovXG4gIHB1YmxpYyBzZXRJc0F2YWlsYWJsZSh2OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fYXZhaWxhYmxlID0gdjtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7nirbmhYvjga7oqK3lrppcbiAgICogQHBhcmFtIHRpbWVTZWNvbmRzIOePvuWcqOaZguWIu1vnp5JdXG4gICAqIEBwYXJhbSB3ZWlnaHQg44Oi44O844K344On44Oz5bC+6YeN44G/XG4gICAqL1xuICBwdWJsaWMgc2V0U3RhdGUodGltZVNlY29uZHM6IG51bWJlciwgd2VpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGF0ZVRpbWVTZWNvbmRzID0gdGltZVNlY29uZHM7XG4gICAgdGhpcy5fc3RhdGVXZWlnaHQgPSB3ZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44Gu54++5Zyo5pmC5Yi744Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44Oi44O844K344On44Oz44Gu54++5Zyo5pmC5Yi7W+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRTdGF0ZVRpbWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGVUaW1lU2Vjb25kcztcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg7zjgrfjg6fjg7Pjga7ph43jgb/jga7lj5blvpdcbiAgICogQHJldHVybiDjg6Ljg7zjgrfjg6fjg7Pjga7ph43jgb9cbiAgICovXG4gIHB1YmxpYyBnZXRTdGF0ZVdlaWdodCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZVdlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmnIDlvozjgavjgqTjg5njg7Pjg4jjga7nmbrngavjgpLjg4Hjgqfjg4Pjgq/jgZfjgZ/mmYLplpPjgpLlj5blvpdcbiAgICpcbiAgICogQHJldHVybiDmnIDlvozjgavjgqTjg5njg7Pjg4jjga7nmbrngavjgpLjg4Hjgqfjg4Pjgq/jgZfjgZ/mmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIGdldExhc3RDaGVja0V2ZW50U2Vjb25kcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sYXN0RXZlbnRDaGVja1NlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog5pyA5b6M44Gr44Kk44OZ44Oz44OI44KS44OB44Kn44OD44Kv44GX44Gf5pmC6ZaT44KS6Kit5a6aXG4gICAqIEBwYXJhbSBjaGVja1NlY29uZHMg5pyA5b6M44Gr44Kk44OZ44Oz44OI44KS44OB44Kn44OD44Kv44GX44Gf5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBzZXRMYXN0Q2hlY2tFdmVudFNlY29uZHMoY2hlY2tTZWNvbmRzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9sYXN0RXZlbnRDaGVja1NlY29uZHMgPSBjaGVja1NlY29uZHM7XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Ki44Km44OI6ZaL5aeL5Yik5a6a44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Ki44Km44OI6ZaL5aeL44GZ44KL44GL44Gp44GG44GLXG4gICAqL1xuICBwdWJsaWMgaXNUcmlnZ2VyZWRGYWRlT3V0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc1RyaWdnZXJlZEZhZGVPdXQ7XG4gIH1cblxuICAvKipcbiAgICog44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaT44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaTW+enkl1cbiAgICovXG4gIHB1YmxpYyBnZXRGYWRlT3V0U2Vjb25kcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9mYWRlT3V0U2Vjb25kcztcbiAgfVxuXG4gIF9hdXRvRGVsZXRlOiBib29sZWFuOyAvLyDoh6rli5XliYrpmaRcbiAgX21vdGlvbjogQUN1YmlzbU1vdGlvbjsgLy8g44Oi44O844K344On44OzXG5cbiAgX2F2YWlsYWJsZTogYm9vbGVhbjsgLy8g5pyJ5Yq55YyW44OV44Op44KwXG4gIF9maW5pc2hlZDogYm9vbGVhbjsgLy8g57WC5LqG44OV44Op44KwXG4gIF9zdGFydGVkOiBib29sZWFuOyAvLyDplovlp4vjg5Xjg6njgrBcbiAgX3N0YXJ0VGltZVNlY29uZHM6IG51bWJlcjsgLy8g44Oi44O844K344On44Oz5YaN55Sf6ZaL5aeL5pmC5Yi7W+enkl1cbiAgX2ZhZGVJblN0YXJ0VGltZVNlY29uZHM6IG51bWJlcjsgLy8g44OV44Kn44O844OJ44Kk44Oz6ZaL5aeL5pmC5Yi777yI44Or44O844OX44Gu5pmC44Gv5Yid5Zue44Gu44G/77yJW+enkl1cbiAgX2VuZFRpbWVTZWNvbmRzOiBudW1iZXI7IC8vIOe1guS6huS6iOWumuaZguWIu1vnp5JdXG4gIF9zdGF0ZVRpbWVTZWNvbmRzOiBudW1iZXI7IC8vIOaZguWIu+OBrueKtuaFi1vnp5JdXG4gIF9zdGF0ZVdlaWdodDogbnVtYmVyOyAvLyDph43jgb/jga7nirbmhYtcbiAgX2xhc3RFdmVudENoZWNrU2Vjb25kczogbnVtYmVyOyAvLyDmnIDntYLjga5Nb3Rpb27lgbTjga7jg4Hjgqfjg4Pjgq/jgZfjgZ/mmYLplpNcbiAgcHJpdmF0ZSBfZmFkZU91dFNlY29uZHM6IG51bWJlcjsgLy8g44OV44Kn44O844OJ44Ki44Km44OI5pmC6ZaTW+enkl1cbiAgcHJpdmF0ZSBfaXNUcmlnZ2VyZWRGYWRlT3V0OiBib29sZWFuOyAvLyDjg5Xjgqfjg7zjg4njgqLjgqbjg4jplovlp4vjg5Xjg6njgrBcblxuICBfbW90aW9uUXVldWVFbnRyeUhhbmRsZTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeUhhbmRsZTsgLy8g44Kk44Oz44K544K/44Oz44K544GU44Go44Gr5LiA5oSP44Gu5YCk44KS5oyB44Gk6K2Y5Yil55Wq5Y+3XG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbW1vdGlvbnF1ZXVlZW50cnknO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vdGlvblF1ZXVlRW50cnkgPSAkLkN1YmlzbU1vdGlvblF1ZXVlRW50cnk7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbU1vdGlvblF1ZXVlRW50cnkgPSAkLkN1YmlzbU1vdGlvblF1ZXVlRW50cnk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQU1BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFrQkE7QUFBQTtBQXZPQTtBQTBPQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismmotionqueueentry.ts\n");

/***/ }),

/***/ "./Framework/src/motion/cubismmotionqueuemanager.ts":
/*!**********************************************************!*\
  !*** ./Framework/src/motion/cubismmotionqueuemanager.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.InvalidMotionQueueEntryHandleValue = exports.CubismMotionQueueManager = void 0;\nvar cubismmotionqueueentry_1 = __webpack_require__(/*! ./cubismmotionqueueentry */ \"./Framework/src/motion/cubismmotionqueueentry.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar CubismMotionQueueManager = (function () {\n    function CubismMotionQueueManager() {\n        this._userTimeSeconds = 0.0;\n        this._eventCallBack = null;\n        this._eventCustomData = null;\n        this._motions = new csmvector_1.csmVector();\n    }\n    CubismMotionQueueManager.prototype.release = function () {\n        for (var i = 0; i < this._motions.getSize(); ++i) {\n            if (this._motions.at(i)) {\n                this._motions.at(i).release();\n                this._motions.set(i, null);\n            }\n        }\n        this._motions = null;\n    };\n    CubismMotionQueueManager.prototype.startMotion = function (motion, autoDelete, userTimeSeconds) {\n        if (motion == null) {\n            return exports.InvalidMotionQueueEntryHandleValue;\n        }\n        var motionQueueEntry = null;\n        for (var i = 0; i < this._motions.getSize(); ++i) {\n            motionQueueEntry = this._motions.at(i);\n            if (motionQueueEntry == null) {\n                continue;\n            }\n            motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime());\n        }\n        motionQueueEntry = new cubismmotionqueueentry_1.CubismMotionQueueEntry();\n        motionQueueEntry._autoDelete = autoDelete;\n        motionQueueEntry._motion = motion;\n        this._motions.pushBack(motionQueueEntry);\n        return motionQueueEntry._motionQueueEntryHandle;\n    };\n    CubismMotionQueueManager.prototype.isFinished = function () {\n        for (var ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            var motion = motionQueueEntry._motion;\n            if (motion == null) {\n                motionQueueEntry.release();\n                motionQueueEntry = null;\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            if (!motionQueueEntry.isFinished()) {\n                return false;\n            }\n            else {\n                ite.preIncrement();\n            }\n        }\n        return true;\n    };\n    CubismMotionQueueManager.prototype.isFinishedByHandle = function (motionQueueEntryNumber) {\n        for (var ite = this._motions.begin(); ite.notEqual(this._motions.end()); ite.increment()) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                continue;\n            }\n            if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber &&\n                !motionQueueEntry.isFinished()) {\n                return false;\n            }\n        }\n        return true;\n    };\n    CubismMotionQueueManager.prototype.stopAllMotions = function () {\n        for (var ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            motionQueueEntry.release();\n            motionQueueEntry = null;\n            ite = this._motions.erase(ite);\n        }\n    };\n    CubismMotionQueueManager.prototype.getCubismMotionQueueEntry = function (motionQueueEntryNumber) {\n        for (var ite = this._motions.begin(); ite.notEqual(this._motions.end()); ite.preIncrement()) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                continue;\n            }\n            if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber) {\n                return motionQueueEntry;\n            }\n        }\n        return null;\n    };\n    CubismMotionQueueManager.prototype.setEventCallback = function (callback, customData) {\n        if (customData === void 0) { customData = null; }\n        this._eventCallBack = callback;\n        this._eventCustomData = customData;\n    };\n    CubismMotionQueueManager.prototype.doUpdateMotion = function (model, userTimeSeconds) {\n        var updated = false;\n        for (var ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            var motion = motionQueueEntry._motion;\n            if (motion == null) {\n                motionQueueEntry.release();\n                motionQueueEntry = null;\n                ite = this._motions.erase(ite);\n                continue;\n            }\n            motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\n            updated = true;\n            var firedList = motion.getFiredEvent(motionQueueEntry.getLastCheckEventSeconds() -\n                motionQueueEntry.getStartTime(), userTimeSeconds - motionQueueEntry.getStartTime());\n            for (var i = 0; i < firedList.getSize(); ++i) {\n                this._eventCallBack(this, firedList.at(i), this._eventCustomData);\n            }\n            motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\n            if (motionQueueEntry.isFinished()) {\n                motionQueueEntry.release();\n                motionQueueEntry = null;\n                ite = this._motions.erase(ite);\n            }\n            else {\n                if (motionQueueEntry.isTriggeredFadeOut()) {\n                    motionQueueEntry.startFadeOut(motionQueueEntry.getFadeOutSeconds(), userTimeSeconds);\n                }\n                ite.preIncrement();\n            }\n        }\n        return updated;\n    };\n    return CubismMotionQueueManager;\n}());\nexports.CubismMotionQueueManager = CubismMotionQueueManager;\nexports.InvalidMotionQueueEntryHandleValue = -1;\nvar $ = __importStar(__webpack_require__(/*! ./cubismmotionqueuemanager */ \"./Framework/src/motion/cubismmotionqueuemanager.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismMotionQueueManager = $.CubismMotionQueueManager;\n    Live2DCubismFramework.InvalidMotionQueueEntryHandleValue = $.InvalidMotionQueueEntryHandleValue;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb25xdWV1ZW1hbmFnZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL21vdGlvbi9jdWJpc21tb3Rpb25xdWV1ZW1hbmFnZXIudHM/ZTU4NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBBQ3ViaXNtTW90aW9uIH0gZnJvbSAnLi9hY3ViaXNtbW90aW9uJztcbmltcG9ydCB7IEN1YmlzbU1vdGlvblF1ZXVlRW50cnkgfSBmcm9tICcuL2N1YmlzbW1vdGlvbnF1ZXVlZW50cnknO1xuaW1wb3J0IHsgY3NtVmVjdG9yLCBpdGVyYXRvciB9IGZyb20gJy4uL3R5cGUvY3NtdmVjdG9yJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgY3NtU3RyaW5nIH0gZnJvbSAnLi4vdHlwZS9jc21zdHJpbmcnO1xuXG4vKipcbiAqIOODouODvOOCt+ODp+ODs+WGjeeUn+OBrueuoeeQhlxuICpcbiAqIOODouODvOOCt+ODp+ODs+WGjeeUn+OBrueuoeeQhueUqOOCr+ODqeOCueOAgkN1YmlzbU1vdGlvbuODouODvOOCt+ODp+ODs+OBquOBqUFDdWJpc21Nb3Rpb27jga7jgrXjg5bjgq/jg6njgrnjgpLlho3nlJ/jgZnjgovjgZ/jgoHjgavkvb/nlKjjgZnjgovjgIJcbiAqXG4gKiBAbm90ZSDlho3nlJ/kuK3jgavliKXjga7jg6Ljg7zjgrfjg6fjg7PjgYwgU3RhcnRNb3Rpb24oKeOBleOCjOOBn+WgtOWQiOOBr+OAgeaWsOOBl+OBhOODouODvOOCt+ODp+ODs+OBq+a7keOCieOBi+OBq+WkieWMluOBl+aXp+ODouODvOOCt+ODp+ODs+OBr+S4reaWreOBmeOCi+OAglxuICogICAgICAg6KGo5oOF55So44Oi44O844K344On44Oz44CB5L2T55So44Oi44O844K344On44Oz44Gq44Gp44KS5YiG44GR44Gm44Oi44O844K344On44Oz5YyW44GX44Gf5aC05ZCI44Gq44Gp44CBXG4gKiAgICAgICDopIfmlbDjga7jg6Ljg7zjgrfjg6fjg7PjgpLlkIzmmYLjgavlho3nlJ/jgZXjgZvjgovloLTlkIjjga/jgIHopIfmlbDjga5DdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXLjgqTjg7Pjgrnjgr/jg7PjgrnjgpLkvb/nlKjjgZnjgovjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbU1vdGlvblF1ZXVlTWFuYWdlciB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl91c2VyVGltZVNlY29uZHMgPSAwLjA7XG4gICAgdGhpcy5fZXZlbnRDYWxsQmFjayA9IG51bGw7XG4gICAgdGhpcy5fZXZlbnRDdXN0b21EYXRhID0gbnVsbDtcbiAgICB0aGlzLl9tb3Rpb25zID0gbmV3IGNzbVZlY3RvcjxDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5PigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9tb3Rpb25zLmdldFNpemUoKTsgKytpKSB7XG4gICAgICBpZiAodGhpcy5fbW90aW9ucy5hdChpKSkge1xuICAgICAgICB0aGlzLl9tb3Rpb25zLmF0KGkpLnJlbGVhc2UoKTtcbiAgICAgICAgdGhpcy5fbW90aW9ucy5zZXQoaSwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbW90aW9ucyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICog5oyH5a6a44GX44Gf44Oi44O844K344On44Oz44Gu6ZaL5aeLXG4gICAqXG4gICAqIOaMh+WumuOBl+OBn+ODouODvOOCt+ODp+ODs+OCkumWi+Wni+OBmeOCi+OAguWQjOOBmOOCv+OCpOODl+OBruODouODvOOCt+ODp+ODs+OBjOaXouOBq+OBguOCi+WgtOWQiOOBr+OAgeaXouWtmOOBruODouODvOOCt+ODp+ODs+OBq+e1guS6huODleODqeOCsOOCkueri+OBpuOAgeODleOCp+ODvOODieOCouOCpuODiOOCkumWi+Wni+OBleOBm+OCi+OAglxuICAgKlxuICAgKiBAcGFyYW0gICBtb3Rpb24gICAgICAgICAg6ZaL5aeL44GZ44KL44Oi44O844K344On44OzXG4gICAqIEBwYXJhbSAgIGF1dG9EZWxldGUgICAgICDlho3nlJ/jgYzntYLkuobjgZfjgZ/jg6Ljg7zjgrfjg6fjg7Pjga7jgqTjg7Pjgrnjgr/jg7PjgrnjgpLliYrpmaTjgZnjgovjgarjgokgdHJ1ZVxuICAgKiBAcGFyYW0gICB1c2VyVGltZVNlY29uZHMg44OH44Or44K/5pmC6ZaT44Gu56mN566X5YCkW+enkl1cbiAgICogQHJldHVybiAgICAgICAgICAgICAgICAgICAgICDplovlp4vjgZfjgZ/jg6Ljg7zjgrfjg6fjg7Pjga7orZjliKXnlarlj7fjgpLov5TjgZnjgILlgIvliKXjga7jg6Ljg7zjgrfjg6fjg7PjgYzntYLkuobjgZfjgZ/jgYvlkKbjgYvjgpLliKTlrprjgZnjgotJc0ZpbmlzaGVkKCnjga7lvJXmlbDjgafkvb/nlKjjgZnjgovjgILplovlp4vjgafjgY3jgarjgYTmmYLjga/jgIwtMeOAjVxuICAgKi9cbiAgcHVibGljIHN0YXJ0TW90aW9uKFxuICAgIG1vdGlvbjogQUN1YmlzbU1vdGlvbixcbiAgICBhdXRvRGVsZXRlOiBib29sZWFuLFxuICAgIHVzZXJUaW1lU2Vjb25kczogbnVtYmVyXG4gICk6IEN1YmlzbU1vdGlvblF1ZXVlRW50cnlIYW5kbGUge1xuICAgIGlmIChtb3Rpb24gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIEludmFsaWRNb3Rpb25RdWV1ZUVudHJ5SGFuZGxlVmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IG1vdGlvblF1ZXVlRW50cnk6IEN1YmlzbU1vdGlvblF1ZXVlRW50cnkgPSBudWxsO1xuXG4gICAgLy8g5pei44Gr44Oi44O844K344On44Oz44GM44GC44KM44Gw57WC5LqG44OV44Op44Kw44KS56uL44Gm44KLXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9tb3Rpb25zLmdldFNpemUoKTsgKytpKSB7XG4gICAgICBtb3Rpb25RdWV1ZUVudHJ5ID0gdGhpcy5fbW90aW9ucy5hdChpKTtcbiAgICAgIGlmIChtb3Rpb25RdWV1ZUVudHJ5ID09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG1vdGlvblF1ZXVlRW50cnkuc2V0RmFkZU91dChtb3Rpb25RdWV1ZUVudHJ5Ll9tb3Rpb24uZ2V0RmFkZU91dFRpbWUoKSk7IC8vIOODleOCp+ODvOODieOCouOCpuODiOioreWumlxuICAgIH1cblxuICAgIG1vdGlvblF1ZXVlRW50cnkgPSBuZXcgQ3ViaXNtTW90aW9uUXVldWVFbnRyeSgpOyAvLyDntYLkuobmmYLjgavnoLTmo4TjgZnjgotcbiAgICBtb3Rpb25RdWV1ZUVudHJ5Ll9hdXRvRGVsZXRlID0gYXV0b0RlbGV0ZTtcbiAgICBtb3Rpb25RdWV1ZUVudHJ5Ll9tb3Rpb24gPSBtb3Rpb247XG5cbiAgICB0aGlzLl9tb3Rpb25zLnB1c2hCYWNrKG1vdGlvblF1ZXVlRW50cnkpO1xuXG4gICAgcmV0dXJuIG1vdGlvblF1ZXVlRW50cnkuX21vdGlvblF1ZXVlRW50cnlIYW5kbGU7XG4gIH1cblxuICAvKipcbiAgICog5YWo44Gm44Gu44Oi44O844K344On44Oz44Gu57WC5LqG44Gu56K66KqNXG4gICAqIEByZXR1cm4gdHJ1ZSDlhajjgabntYLkuobjgZfjgabjgYTjgotcbiAgICogQHJldHVybiBmYWxzZSDntYLkuobjgZfjgabjgYTjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIC8vIC0tLS0tLS0g5Yem55CG44KS6KGM44GGIC0tLS0tLS1cbiAgICAvLyDml6Ljgavjg6Ljg7zjgrfjg6fjg7PjgYzjgYLjgozjgbDntYLkuobjg5Xjg6njgrDjgpLnq4vjgabjgotcblxuICAgIGZvciAoXG4gICAgICBsZXQgaXRlOiBpdGVyYXRvcjxDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5PiA9IHRoaXMuX21vdGlvbnMuYmVnaW4oKTtcbiAgICAgIGl0ZS5ub3RFcXVhbCh0aGlzLl9tb3Rpb25zLmVuZCgpKTtcblxuICAgICkge1xuICAgICAgbGV0IG1vdGlvblF1ZXVlRW50cnk6IEN1YmlzbU1vdGlvblF1ZXVlRW50cnkgPSBpdGUucHRyKCk7XG5cbiAgICAgIGlmIChtb3Rpb25RdWV1ZUVudHJ5ID09IG51bGwpIHtcbiAgICAgICAgaXRlID0gdGhpcy5fbW90aW9ucy5lcmFzZShpdGUpOyAvLyDliYrpmaRcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vdGlvbjogQUN1YmlzbU1vdGlvbiA9IG1vdGlvblF1ZXVlRW50cnkuX21vdGlvbjtcblxuICAgICAgaWYgKG1vdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIG1vdGlvblF1ZXVlRW50cnkucmVsZWFzZSgpO1xuICAgICAgICBtb3Rpb25RdWV1ZUVudHJ5ID0gbnVsbDtcbiAgICAgICAgaXRlID0gdGhpcy5fbW90aW9ucy5lcmFzZShpdGUpOyAvLyDliYrpmaRcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIC0tLS0tIOe1guS6hua4iOOBv+OBruWHpueQhuOBjOOBguOCjOOBsOWJiumZpOOBmeOCiyAtLS0tLS1cbiAgICAgIGlmICghbW90aW9uUXVldWVFbnRyeS5pc0ZpbmlzaGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlLnByZUluY3JlbWVudCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOaMh+WumuOBl+OBn+ODouODvOOCt+ODp+ODs+OBrue1guS6huOBrueiuuiqjVxuICAgKiBAcGFyYW0gbW90aW9uUXVldWVFbnRyeU51bWJlciDjg6Ljg7zjgrfjg6fjg7Pjga7orZjliKXnlarlj7dcbiAgICogQHJldHVybiB0cnVlIOWFqOOBpue1guS6huOBl+OBpuOBhOOCi1xuICAgKiBAcmV0dXJuIGZhbHNlIOe1guS6huOBl+OBpuOBhOOBquOBhFxuICAgKi9cbiAgcHVibGljIGlzRmluaXNoZWRCeUhhbmRsZShcbiAgICBtb3Rpb25RdWV1ZUVudHJ5TnVtYmVyOiBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5SGFuZGxlXG4gICk6IGJvb2xlYW4ge1xuICAgIGZvciAoXG4gICAgICBsZXQgaXRlOiBpdGVyYXRvcjxDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5PiA9IHRoaXMuX21vdGlvbnMuYmVnaW4oKTtcbiAgICAgIGl0ZS5ub3RFcXVhbCh0aGlzLl9tb3Rpb25zLmVuZCgpKTtcbiAgICAgIGl0ZS5pbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgY29uc3QgbW90aW9uUXVldWVFbnRyeTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeSA9IGl0ZS5wdHIoKTtcblxuICAgICAgaWYgKG1vdGlvblF1ZXVlRW50cnkgPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBtb3Rpb25RdWV1ZUVudHJ5Ll9tb3Rpb25RdWV1ZUVudHJ5SGFuZGxlID09IG1vdGlvblF1ZXVlRW50cnlOdW1iZXIgJiZcbiAgICAgICAgIW1vdGlvblF1ZXVlRW50cnkuaXNGaW5pc2hlZCgpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhajjgabjga7jg6Ljg7zjgrfjg6fjg7PjgpLlgZzmraLjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzdG9wQWxsTW90aW9ucygpOiB2b2lkIHtcbiAgICAvLyAtLS0tLS0tIOWHpueQhuOCkuihjOOBhiAtLS0tLS0tXG4gICAgLy8g5pei44Gr44Oi44O844K344On44Oz44GM44GC44KM44Gw57WC5LqG44OV44Op44Kw44KS56uL44Gm44KLXG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGl0ZTogaXRlcmF0b3I8Q3ViaXNtTW90aW9uUXVldWVFbnRyeT4gPSB0aGlzLl9tb3Rpb25zLmJlZ2luKCk7XG4gICAgICBpdGUubm90RXF1YWwodGhpcy5fbW90aW9ucy5lbmQoKSk7XG5cbiAgICApIHtcbiAgICAgIGxldCBtb3Rpb25RdWV1ZUVudHJ5OiBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5ID0gaXRlLnB0cigpO1xuXG4gICAgICBpZiAobW90aW9uUXVldWVFbnRyeSA9PSBudWxsKSB7XG4gICAgICAgIGl0ZSA9IHRoaXMuX21vdGlvbnMuZXJhc2UoaXRlKTtcblxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gLS0tLS0g57WC5LqG5riI44G/44Gu5Yem55CG44GM44GC44KM44Gw5YmK6Zmk44GZ44KLIC0tLS0tLVxuICAgICAgbW90aW9uUXVldWVFbnRyeS5yZWxlYXNlKCk7XG4gICAgICBtb3Rpb25RdWV1ZUVudHJ5ID0gbnVsbDtcbiAgICAgIGl0ZSA9IHRoaXMuX21vdGlvbnMuZXJhc2UoaXRlKTsgLy8g5YmK6ZmkXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAgICAgKiDmjIflrprjgZfjgZ9DdWJpc21Nb3Rpb25RdWV1ZUVudHJ544Gu5Y+W5b6XXG5cbiAgICAgICAgKiBAcGFyYW0gICBtb3Rpb25RdWV1ZUVudHJ5TnVtYmVyICDjg6Ljg7zjgrfjg6fjg7Pjga7orZjliKXnlarlj7dcbiAgICAgICAgKiBAcmV0dXJuICDmjIflrprjgZfjgZ9DdWJpc21Nb3Rpb25RdWV1ZUVudHJ5XG4gICAgICAgICogQHJldHVybiAgbnVsbCAgIOimi+OBpOOBi+OCieOBquOBi+OBo+OBn1xuICAgICAgICAqL1xuICBwdWJsaWMgZ2V0Q3ViaXNtTW90aW9uUXVldWVFbnRyeShcbiAgICBtb3Rpb25RdWV1ZUVudHJ5TnVtYmVyOiBhbnlcbiAgKTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeSB7XG4gICAgLy8tLS0tLS0tIOWHpueQhuOCkuihjOOBhiAtLS0tLS0tXG4gICAgZm9yIChcbiAgICAgIGxldCBpdGU6IGl0ZXJhdG9yPEN1YmlzbU1vdGlvblF1ZXVlRW50cnk+ID0gdGhpcy5fbW90aW9ucy5iZWdpbigpO1xuICAgICAgaXRlLm5vdEVxdWFsKHRoaXMuX21vdGlvbnMuZW5kKCkpO1xuICAgICAgaXRlLnByZUluY3JlbWVudCgpXG4gICAgKSB7XG4gICAgICBjb25zdCBtb3Rpb25RdWV1ZUVudHJ5OiBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5ID0gaXRlLnB0cigpO1xuXG4gICAgICBpZiAobW90aW9uUXVldWVFbnRyeSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobW90aW9uUXVldWVFbnRyeS5fbW90aW9uUXVldWVFbnRyeUhhbmRsZSA9PSBtb3Rpb25RdWV1ZUVudHJ5TnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBtb3Rpb25RdWV1ZUVudHJ5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODmeODs+ODiOOCkuWPl+OBkeWPluOCi0NhbGxiYWNr44Gu55m76YyyXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayDjgrPjg7zjg6vjg5Djg4Pjgq/plqLmlbBcbiAgICogQHBhcmFtIGN1c3RvbURhdGEg44Kz44O844Or44OQ44OD44Kv44Gr6L+U44GV44KM44KL44OH44O844K/XG4gICAqL1xuICBwdWJsaWMgc2V0RXZlbnRDYWxsYmFjayhcbiAgICBjYWxsYmFjazogQ3ViaXNtTW90aW9uRXZlbnRGdW5jdGlvbixcbiAgICBjdXN0b21EYXRhOiBhbnkgPSBudWxsXG4gICk6IHZvaWQge1xuICAgIHRoaXMuX2V2ZW50Q2FsbEJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLl9ldmVudEN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODvOOCt+ODp+ODs+OCkuabtOaWsOOBl+OBpuOAgeODouODh+ODq+OBq+ODkeODqeODoeODvOOCv+WApOOCkuWPjeaYoOOBmeOCi+OAglxuICAgKlxuICAgKiBAcGFyYW0gICBtb2RlbCAgIOWvvuixoeOBruODouODh+ODq1xuICAgKiBAcGFyYW0gICB1c2VyVGltZVNlY29uZHMgICDjg4fjg6vjgr/mmYLplpPjga7nqY3nrpflgKRb56eSXVxuICAgKiBAcmV0dXJuICB0cnVlICAgIOODouODh+ODq+OBuOODkeODqeODoeODvOOCv+WApOOBruWPjeaYoOOBguOCilxuICAgKiBAcmV0dXJuICBmYWxzZSAgIOODouODh+ODq+OBuOODkeODqeODoeODvOOCv+WApOOBruWPjeaYoOOBquOBlyjjg6Ljg7zjgrfjg6fjg7Pjga7lpInljJbjgarjgZcpXG4gICAqL1xuICBwdWJsaWMgZG9VcGRhdGVNb3Rpb24obW9kZWw6IEN1YmlzbU1vZGVsLCB1c2VyVGltZVNlY29uZHM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGxldCB1cGRhdGVkID0gZmFsc2U7XG5cbiAgICAvLyAtLS0tLS0tIOWHpueQhuOCkuihjOOBhiAtLS0tLS0tLVxuICAgIC8vIOaXouOBq+ODouODvOOCt+ODp+ODs+OBjOOBguOCjOOBsOe1guS6huODleODqeOCsOOCkueri+OBpuOCi1xuXG4gICAgZm9yIChcbiAgICAgIGxldCBpdGU6IGl0ZXJhdG9yPEN1YmlzbU1vdGlvblF1ZXVlRW50cnk+ID0gdGhpcy5fbW90aW9ucy5iZWdpbigpO1xuICAgICAgaXRlLm5vdEVxdWFsKHRoaXMuX21vdGlvbnMuZW5kKCkpO1xuXG4gICAgKSB7XG4gICAgICBsZXQgbW90aW9uUXVldWVFbnRyeTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeSA9IGl0ZS5wdHIoKTtcblxuICAgICAgaWYgKG1vdGlvblF1ZXVlRW50cnkgPT0gbnVsbCkge1xuICAgICAgICBpdGUgPSB0aGlzLl9tb3Rpb25zLmVyYXNlKGl0ZSk7IC8vIOWJiumZpFxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbW90aW9uOiBBQ3ViaXNtTW90aW9uID0gbW90aW9uUXVldWVFbnRyeS5fbW90aW9uO1xuXG4gICAgICBpZiAobW90aW9uID09IG51bGwpIHtcbiAgICAgICAgbW90aW9uUXVldWVFbnRyeS5yZWxlYXNlKCk7XG4gICAgICAgIG1vdGlvblF1ZXVlRW50cnkgPSBudWxsO1xuICAgICAgICBpdGUgPSB0aGlzLl9tb3Rpb25zLmVyYXNlKGl0ZSk7IC8vIOWJiumZpFxuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyAtLS0tLS0g5YCk44KS5Y+N5pig44GZ44KLIC0tLS0tLVxuICAgICAgbW90aW9uLnVwZGF0ZVBhcmFtZXRlcnMobW9kZWwsIG1vdGlvblF1ZXVlRW50cnksIHVzZXJUaW1lU2Vjb25kcyk7XG4gICAgICB1cGRhdGVkID0gdHJ1ZTtcblxuICAgICAgLy8gLS0tLS0tIOODpuODvOOCtuODiOODquOCrOODvOOCpOODmeODs+ODiOOCkuaknOafu+OBmeOCiyAtLS0tXG4gICAgICBjb25zdCBmaXJlZExpc3Q6IGNzbVZlY3Rvcjxjc21TdHJpbmc+ID0gbW90aW9uLmdldEZpcmVkRXZlbnQoXG4gICAgICAgIG1vdGlvblF1ZXVlRW50cnkuZ2V0TGFzdENoZWNrRXZlbnRTZWNvbmRzKCkgLVxuICAgICAgICAgIG1vdGlvblF1ZXVlRW50cnkuZ2V0U3RhcnRUaW1lKCksXG4gICAgICAgIHVzZXJUaW1lU2Vjb25kcyAtIG1vdGlvblF1ZXVlRW50cnkuZ2V0U3RhcnRUaW1lKClcbiAgICAgICk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlyZWRMaXN0LmdldFNpemUoKTsgKytpKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50Q2FsbEJhY2sodGhpcywgZmlyZWRMaXN0LmF0KGkpLCB0aGlzLl9ldmVudEN1c3RvbURhdGEpO1xuICAgICAgfVxuXG4gICAgICBtb3Rpb25RdWV1ZUVudHJ5LnNldExhc3RDaGVja0V2ZW50U2Vjb25kcyh1c2VyVGltZVNlY29uZHMpO1xuXG4gICAgICAvLyAtLS0tLS0g57WC5LqG5riI44G/44Gu5Yem55CG44GM44GC44KM44Gw5YmK6Zmk44GZ44KLIC0tLS0tLVxuICAgICAgaWYgKG1vdGlvblF1ZXVlRW50cnkuaXNGaW5pc2hlZCgpKSB7XG4gICAgICAgIG1vdGlvblF1ZXVlRW50cnkucmVsZWFzZSgpO1xuICAgICAgICBtb3Rpb25RdWV1ZUVudHJ5ID0gbnVsbDtcbiAgICAgICAgaXRlID0gdGhpcy5fbW90aW9ucy5lcmFzZShpdGUpOyAvLyDliYrpmaRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChtb3Rpb25RdWV1ZUVudHJ5LmlzVHJpZ2dlcmVkRmFkZU91dCgpKSB7XG4gICAgICAgICAgbW90aW9uUXVldWVFbnRyeS5zdGFydEZhZGVPdXQoXG4gICAgICAgICAgICBtb3Rpb25RdWV1ZUVudHJ5LmdldEZhZGVPdXRTZWNvbmRzKCksXG4gICAgICAgICAgICB1c2VyVGltZVNlY29uZHNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuICBfdXNlclRpbWVTZWNvbmRzOiBudW1iZXI7IC8vIOODh+ODq+OCv+aZgumWk+OBruepjeeul+WApFvnp5JdXG5cbiAgX21vdGlvbnM6IGNzbVZlY3RvcjxDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5PjsgLy8g44Oi44O844K344On44OzXG4gIF9ldmVudENhbGxCYWNrOiBDdWJpc21Nb3Rpb25FdmVudEZ1bmN0aW9uOyAvLyDjgrPjg7zjg6vjg5Djg4Pjgq/plqLmlbBcbiAgX2V2ZW50Q3VzdG9tRGF0YTogYW55OyAvLyDjgrPjg7zjg6vjg5Djg4Pjgq/jgavmiLvjgZXjgozjgovjg4fjg7zjgr9cbn1cblxuLyoqXG4gKiDjgqTjg5njg7Pjg4jjga7jgrPjg7zjg6vjg5Djg4Pjgq/plqLmlbDjgpLlrprnvqlcbiAqXG4gKiDjgqTjg5njg7Pjg4jjga7jgrPjg7zjg6vjg5Djg4Pjgq/jgavnmbvpjLLjgafjgY3jgovplqLmlbDjga7lnovmg4XloLFcbiAqIEBwYXJhbSBjYWxsZXIgICAgICAgIOeZuueBq+OBl+OBn+OCpOODmeODs+ODiOOCkuWGjeeUn+OBleOBm+OBn0N1YmlzbU1vdGlvblF1ZXVlTWFuYWdlclxuICogQHBhcmFtIGV2ZW50VmFsdWUgICAg55m654Gr44GX44Gf44Kk44OZ44Oz44OI44Gu5paH5a2X5YiX44OH44O844K/XG4gKiBAcGFyYW0gY3VzdG9tRGF0YSAgIOOCs+ODvOODq+ODkOODg+OCr+OBq+i/lOOBleOCjOOCi+eZu+mMsuaZguOBq+aMh+WumuOBleOCjOOBn+ODh+ODvOOCv1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEN1YmlzbU1vdGlvbkV2ZW50RnVuY3Rpb24ge1xuICAoXG4gICAgY2FsbGVyOiBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXIsXG4gICAgZXZlbnRWYWx1ZTogY3NtU3RyaW5nLFxuICAgIGN1c3RvbURhdGE6IGFueVxuICApOiB2b2lkO1xufVxuXG4vKipcbiAqIOODouODvOOCt+ODp+ODs+OBruitmOWIpeeVquWPt1xuICpcbiAqIOODouODvOOCt+ODp+ODs+OBruitmOWIpeeVquWPt+OBruWumue+qVxuICovXG5leHBvcnQgZGVjbGFyZSB0eXBlIEN1YmlzbU1vdGlvblF1ZXVlRW50cnlIYW5kbGUgPSBhbnk7XG5leHBvcnQgY29uc3QgSW52YWxpZE1vdGlvblF1ZXVlRW50cnlIYW5kbGVWYWx1ZTogQ3ViaXNtTW90aW9uUXVldWVFbnRyeUhhbmRsZSA9IC0xO1xuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jdWJpc21tb3Rpb25xdWV1ZW1hbmFnZXInO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbU1vdGlvblF1ZXVlTWFuYWdlciA9ICQuQ3ViaXNtTW90aW9uUXVldWVNYW5hZ2VyO1xuICBleHBvcnQgdHlwZSBDdWJpc21Nb3Rpb25RdWV1ZU1hbmFnZXIgPSAkLkN1YmlzbU1vdGlvblF1ZXVlTWFuYWdlcjtcbiAgZXhwb3J0IGNvbnN0IEludmFsaWRNb3Rpb25RdWV1ZUVudHJ5SGFuZGxlVmFsdWUgPVxuICAgICQuSW52YWxpZE1vdGlvblF1ZXVlRW50cnlIYW5kbGVWYWx1ZTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW90aW9uUXVldWVFbnRyeUhhbmRsZSA9ICQuQ3ViaXNtTW90aW9uUXVldWVFbnRyeUhhbmRsZTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtTW90aW9uRXZlbnRGdW5jdGlvbiA9ICQuQ3ViaXNtTW90aW9uRXZlbnRGdW5jdGlvbjtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFhQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVlBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU9BO0FBSUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUdBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSUE7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBSUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBS0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQUE7QUEzUkE7QUFtVEE7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBSUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Framework/src/motion/cubismmotionqueuemanager.ts\n");

/***/ }),

/***/ "./Framework/src/physics/cubismphysics.ts":
/*!************************************************!*\
  !*** ./Framework/src/physics/cubismphysics.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.Options = exports.CubismPhysics = void 0;\nvar cubismmath_1 = __webpack_require__(/*! ../math/cubismmath */ \"./Framework/src/math/cubismmath.ts\");\nvar cubismvector2_1 = __webpack_require__(/*! ../math/cubismvector2 */ \"./Framework/src/math/cubismvector2.ts\");\nvar cubismphysicsinternal_1 = __webpack_require__(/*! ./cubismphysicsinternal */ \"./Framework/src/physics/cubismphysicsinternal.ts\");\nvar cubismphysicsjson_1 = __webpack_require__(/*! ./cubismphysicsjson */ \"./Framework/src/physics/cubismphysicsjson.ts\");\nvar PhysicsTypeTagX = 'X';\nvar PhysicsTypeTagY = 'Y';\nvar PhysicsTypeTagAngle = 'Angle';\nvar AirResistance = 5.0;\nvar MaximumWeight = 100.0;\nvar MovementThreshold = 0.001;\nvar CubismPhysics = (function () {\n    function CubismPhysics() {\n        this._physicsRig = null;\n        this._options = new Options();\n        this._options.gravity.y = -1.0;\n        this._options.gravity.x = 0;\n        this._options.wind.x = 0;\n        this._options.wind.y = 0;\n    }\n    CubismPhysics.create = function (buffer, size) {\n        var ret = new CubismPhysics();\n        ret.parse(buffer, size);\n        ret._physicsRig.gravity.y = 0;\n        return ret;\n    };\n    CubismPhysics.delete = function (physics) {\n        if (physics != null) {\n            physics.release();\n            physics = null;\n        }\n    };\n    CubismPhysics.prototype.evaluate = function (model, deltaTimeSeconds) {\n        var totalAngle;\n        var weight;\n        var radAngle;\n        var outputValue;\n        var totalTranslation = new cubismvector2_1.CubismVector2();\n        var currentSetting;\n        var currentInput;\n        var currentOutput;\n        var currentParticles;\n        var parameterValue;\n        var parameterMaximumValue;\n        var parameterMinimumValue;\n        var parameterDefaultValue;\n        parameterValue = model.getModel().parameters.values;\n        parameterMaximumValue = model.getModel().parameters.maximumValues;\n        parameterMinimumValue = model.getModel().parameters.minimumValues;\n        parameterDefaultValue = model.getModel().parameters.defaultValues;\n        for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            totalAngle = { angle: 0.0 };\n            totalTranslation.x = 0.0;\n            totalTranslation.y = 0.0;\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            currentInput = this._physicsRig.inputs.get(currentSetting.baseInputIndex);\n            currentOutput = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n            currentParticles = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n            for (var i = 0; i < currentSetting.inputCount; ++i) {\n                weight = currentInput[i].weight / MaximumWeight;\n                if (currentInput[i].sourceParameterIndex == -1) {\n                    currentInput[i].sourceParameterIndex = model.getParameterIndex(currentInput[i].source.id);\n                }\n                currentInput[i].getNormalizedParameterValue(totalTranslation, totalAngle, parameterValue[currentInput[i].sourceParameterIndex], parameterMinimumValue[currentInput[i].sourceParameterIndex], parameterMaximumValue[currentInput[i].sourceParameterIndex], parameterDefaultValue[currentInput[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInput[i].reflect, weight);\n            }\n            radAngle = cubismmath_1.CubismMath.degreesToRadian(-totalAngle.angle);\n            totalTranslation.x =\n                totalTranslation.x * cubismmath_1.CubismMath.cos(radAngle) -\n                    totalTranslation.y * cubismmath_1.CubismMath.sin(radAngle);\n            totalTranslation.y =\n                totalTranslation.x * cubismmath_1.CubismMath.sin(radAngle) +\n                    totalTranslation.y * cubismmath_1.CubismMath.cos(radAngle);\n            updateParticles(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum, deltaTimeSeconds, AirResistance);\n            for (var i = 0; i < currentSetting.outputCount; ++i) {\n                var particleIndex = currentOutput[i].vertexIndex;\n                if (particleIndex < 1 ||\n                    particleIndex >= currentSetting.particleCount) {\n                    break;\n                }\n                if (currentOutput[i].destinationParameterIndex == -1) {\n                    currentOutput[i].destinationParameterIndex = model.getParameterIndex(currentOutput[i].destination.id);\n                }\n                var translation = new cubismvector2_1.CubismVector2();\n                translation.x =\n                    currentParticles[particleIndex].position.x -\n                        currentParticles[particleIndex - 1].position.x;\n                translation.y =\n                    currentParticles[particleIndex].position.y -\n                        currentParticles[particleIndex - 1].position.y;\n                outputValue = currentOutput[i].getValue(translation, currentParticles, particleIndex, currentOutput[i].reflect, this._options.gravity);\n                var destinationParameterIndex = currentOutput[i].destinationParameterIndex;\n                var outParameterValue = !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\n                    ? JSON.parse(JSON.stringify(parameterValue.subarray(destinationParameterIndex)))\n                    : parameterValue.slice(destinationParameterIndex);\n                updateOutputParameterValue(outParameterValue, parameterMinimumValue[destinationParameterIndex], parameterMaximumValue[destinationParameterIndex], outputValue, currentOutput[i]);\n                for (var offset = destinationParameterIndex, outParamIndex = 0; offset < parameterValue.length; offset++, outParamIndex++) {\n                    parameterValue[offset] = outParameterValue[outParamIndex];\n                }\n            }\n        }\n    };\n    CubismPhysics.prototype.setOptions = function (options) {\n        this._options = options;\n    };\n    CubismPhysics.prototype.getOption = function () {\n        return this._options;\n    };\n    CubismPhysics.prototype.release = function () {\n        this._physicsRig = void 0;\n        this._physicsRig = null;\n    };\n    CubismPhysics.prototype.parse = function (physicsJson, size) {\n        this._physicsRig = new cubismphysicsinternal_1.CubismPhysicsRig();\n        var json = new cubismphysicsjson_1.CubismPhysicsJson(physicsJson, size);\n        this._physicsRig.gravity = json.getGravity();\n        this._physicsRig.wind = json.getWind();\n        this._physicsRig.subRigCount = json.getSubRigCount();\n        this._physicsRig.settings.updateSize(this._physicsRig.subRigCount, cubismphysicsinternal_1.CubismPhysicsSubRig, true);\n        this._physicsRig.inputs.updateSize(json.getTotalInputCount(), cubismphysicsinternal_1.CubismPhysicsInput, true);\n        this._physicsRig.outputs.updateSize(json.getTotalOutputCount(), cubismphysicsinternal_1.CubismPhysicsOutput, true);\n        this._physicsRig.particles.updateSize(json.getVertexCount(), cubismphysicsinternal_1.CubismPhysicsParticle, true);\n        var inputIndex = 0, outputIndex = 0, particleIndex = 0;\n        for (var i = 0; i < this._physicsRig.settings.getSize(); ++i) {\n            this._physicsRig.settings.at(i).normalizationPosition.minimum = json.getNormalizationPositionMinimumValue(i);\n            this._physicsRig.settings.at(i).normalizationPosition.maximum = json.getNormalizationPositionMaximumValue(i);\n            this._physicsRig.settings.at(i).normalizationPosition.defalut = json.getNormalizationPositionDefaultValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.minimum = json.getNormalizationAngleMinimumValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.maximum = json.getNormalizationAngleMaximumValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.defalut = json.getNormalizationAngleDefaultValue(i);\n            this._physicsRig.settings.at(i).inputCount = json.getInputCount(i);\n            this._physicsRig.settings.at(i).baseInputIndex = inputIndex;\n            for (var j = 0; j < this._physicsRig.settings.at(i).inputCount; ++j) {\n                this._physicsRig.inputs.at(inputIndex + j).sourceParameterIndex = -1;\n                this._physicsRig.inputs.at(inputIndex + j).weight = json.getInputWeight(i, j);\n                this._physicsRig.inputs.at(inputIndex + j).reflect = json.getInputReflect(i, j);\n                if (json.getInputType(i, j) == PhysicsTypeTagX) {\n                    this._physicsRig.inputs.at(inputIndex + j).type =\n                        cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_X;\n                    this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue = getInputTranslationXFromNormalizedParameterValue;\n                }\n                else if (json.getInputType(i, j) == PhysicsTypeTagY) {\n                    this._physicsRig.inputs.at(inputIndex + j).type =\n                        cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Y;\n                    this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue = getInputTranslationYFromNormalizedParamterValue;\n                }\n                else if (json.getInputType(i, j) == PhysicsTypeTagAngle) {\n                    this._physicsRig.inputs.at(inputIndex + j).type =\n                        cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Angle;\n                    this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue = getInputAngleFromNormalizedParameterValue;\n                }\n                this._physicsRig.inputs.at(inputIndex + j).source.targetType =\n                    cubismphysicsinternal_1.CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n                this._physicsRig.inputs.at(inputIndex + j).source.id = json.getInputSourceId(i, j);\n            }\n            inputIndex += this._physicsRig.settings.at(i).inputCount;\n            this._physicsRig.settings.at(i).outputCount = json.getOutputCount(i);\n            this._physicsRig.settings.at(i).baseOutputIndex = outputIndex;\n            for (var j = 0; j < this._physicsRig.settings.at(i).outputCount; ++j) {\n                this._physicsRig.outputs.at(outputIndex + j).destinationParameterIndex = -1;\n                this._physicsRig.outputs.at(outputIndex + j).vertexIndex = json.getOutputVertexIndex(i, j);\n                this._physicsRig.outputs.at(outputIndex + j).angleScale = json.getOutputAngleScale(i, j);\n                this._physicsRig.outputs.at(outputIndex + j).weight = json.getOutputWeight(i, j);\n                this._physicsRig.outputs.at(outputIndex + j).destination.targetType =\n                    cubismphysicsinternal_1.CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n                this._physicsRig.outputs.at(outputIndex + j).destination.id = json.getOutputDestinationId(i, j);\n                if (json.getOutputType(i, j) == PhysicsTypeTagX) {\n                    this._physicsRig.outputs.at(outputIndex + j).type =\n                        cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_X;\n                    this._physicsRig.outputs.at(outputIndex + j).getValue = getOutputTranslationX;\n                    this._physicsRig.outputs.at(outputIndex + j).getScale = getOutputScaleTranslationX;\n                }\n                else if (json.getOutputType(i, j) == PhysicsTypeTagY) {\n                    this._physicsRig.outputs.at(outputIndex + j).type =\n                        cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Y;\n                    this._physicsRig.outputs.at(outputIndex + j).getValue = getOutputTranslationY;\n                    this._physicsRig.outputs.at(outputIndex + j).getScale = getOutputScaleTranslationY;\n                }\n                else if (json.getOutputType(i, j) == PhysicsTypeTagAngle) {\n                    this._physicsRig.outputs.at(outputIndex + j).type =\n                        cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Angle;\n                    this._physicsRig.outputs.at(outputIndex + j).getValue = getOutputAngle;\n                    this._physicsRig.outputs.at(outputIndex + j).getScale = getOutputScaleAngle;\n                }\n                this._physicsRig.outputs.at(outputIndex + j).reflect = json.getOutputReflect(i, j);\n            }\n            outputIndex += this._physicsRig.settings.at(i).outputCount;\n            this._physicsRig.settings.at(i).particleCount = json.getParticleCount(i);\n            this._physicsRig.settings.at(i).baseParticleIndex = particleIndex;\n            for (var j = 0; j < this._physicsRig.settings.at(i).particleCount; ++j) {\n                this._physicsRig.particles.at(particleIndex + j).mobility = json.getParticleMobility(i, j);\n                this._physicsRig.particles.at(particleIndex + j).delay = json.getParticleDelay(i, j);\n                this._physicsRig.particles.at(particleIndex + j).acceleration = json.getParticleAcceleration(i, j);\n                this._physicsRig.particles.at(particleIndex + j).radius = json.getParticleRadius(i, j);\n                this._physicsRig.particles.at(particleIndex + j).position = json.getParticlePosition(i, j);\n            }\n            particleIndex += this._physicsRig.settings.at(i).particleCount;\n        }\n        this.initialize();\n        json.release();\n        json = void 0;\n        json = null;\n    };\n    CubismPhysics.prototype.initialize = function () {\n        var strand;\n        var currentSetting;\n        var radius;\n        for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            strand = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n            strand[0].initialPosition = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            strand[0].lastPosition = new cubismvector2_1.CubismVector2(strand[0].initialPosition.x, strand[0].initialPosition.y);\n            strand[0].lastGravity = new cubismvector2_1.CubismVector2(0.0, -1.0);\n            strand[0].lastGravity.y *= -1.0;\n            strand[0].velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            strand[0].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            for (var i = 1; i < currentSetting.particleCount; ++i) {\n                radius = new cubismvector2_1.CubismVector2(0.0, 0.0);\n                radius.y = strand[i].radius;\n                strand[i].initialPosition = new cubismvector2_1.CubismVector2(strand[i - 1].initialPosition.x + radius.x, strand[i - 1].initialPosition.y + radius.y);\n                strand[i].position = new cubismvector2_1.CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n                strand[i].lastPosition = new cubismvector2_1.CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n                strand[i].lastGravity = new cubismvector2_1.CubismVector2(0.0, -1.0);\n                strand[i].lastGravity.y *= -1.0;\n                strand[i].velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n                strand[i].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            }\n        }\n    };\n    return CubismPhysics;\n}());\nexports.CubismPhysics = CubismPhysics;\nvar Options = (function () {\n    function Options() {\n        this.gravity = new cubismvector2_1.CubismVector2(0, 0);\n        this.wind = new cubismvector2_1.CubismVector2(0, 0);\n    }\n    return Options;\n}());\nexports.Options = Options;\nfunction sign(value) {\n    var ret = 0;\n    if (value > 0.0) {\n        ret = 1;\n    }\n    else if (value < 0.0) {\n        ret = -1;\n    }\n    return ret;\n}\nfunction getInputTranslationXFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n    targetTranslation.x +=\n        normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n}\nfunction getInputTranslationYFromNormalizedParamterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n    targetTranslation.y +=\n        normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n}\nfunction getInputAngleFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizaitionPosition, normalizationAngle, isInverted, weight) {\n    targetAngle.angle +=\n        normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationAngle.minimum, normalizationAngle.maximum, normalizationAngle.defalut, isInverted) * weight;\n}\nfunction getOutputTranslationX(translation, particles, particleIndex, isInverted, parentGravity) {\n    var outputValue = translation.x;\n    if (isInverted) {\n        outputValue *= -1.0;\n    }\n    return outputValue;\n}\nfunction getOutputTranslationY(translation, particles, particleIndex, isInverted, parentGravity) {\n    var outputValue = translation.y;\n    if (isInverted) {\n        outputValue *= -1.0;\n    }\n    return outputValue;\n}\nfunction getOutputAngle(translation, particles, particleIndex, isInverted, parentGravity) {\n    var outputValue;\n    if (particleIndex >= 2) {\n        parentGravity = particles[particleIndex - 1].position.substract(particles[particleIndex - 2].position);\n    }\n    else {\n        parentGravity = parentGravity.multiplyByScaler(-1.0);\n    }\n    outputValue = cubismmath_1.CubismMath.directionToRadian(parentGravity, translation);\n    if (isInverted) {\n        outputValue *= -1.0;\n    }\n    return outputValue;\n}\nfunction getRangeValue(min, max) {\n    var maxValue = cubismmath_1.CubismMath.max(min, max);\n    var minValue = cubismmath_1.CubismMath.min(min, max);\n    return cubismmath_1.CubismMath.abs(maxValue - minValue);\n}\nfunction getDefaultValue(min, max) {\n    var minValue = cubismmath_1.CubismMath.min(min, max);\n    return minValue + getRangeValue(min, max) / 2.0;\n}\nfunction getOutputScaleTranslationX(translationScale, angleScale) {\n    return JSON.parse(JSON.stringify(translationScale.x));\n}\nfunction getOutputScaleTranslationY(translationScale, angleScale) {\n    return JSON.parse(JSON.stringify(translationScale.y));\n}\nfunction getOutputScaleAngle(translationScale, angleScale) {\n    return JSON.parse(JSON.stringify(angleScale));\n}\nfunction updateParticles(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue, deltaTimeSeconds, airResistance) {\n    var totalRadian;\n    var delay;\n    var radian;\n    var currentGravity;\n    var direction = new cubismvector2_1.CubismVector2(0.0, 0.0);\n    var velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n    var force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n    var newDirection = new cubismvector2_1.CubismVector2(0.0, 0.0);\n    strand[0].position = new cubismvector2_1.CubismVector2(totalTranslation.x, totalTranslation.y);\n    totalRadian = cubismmath_1.CubismMath.degreesToRadian(totalAngle);\n    currentGravity = cubismmath_1.CubismMath.radianToDirection(totalRadian);\n    currentGravity.normalize();\n    for (var i = 1; i < strandCount; ++i) {\n        strand[i].force = currentGravity\n            .multiplyByScaler(strand[i].acceleration)\n            .add(windDirection);\n        strand[i].lastPosition = new cubismvector2_1.CubismVector2(strand[i].position.x, strand[i].position.y);\n        delay = strand[i].delay * deltaTimeSeconds * 30.0;\n        direction = strand[i].position.substract(strand[i - 1].position);\n        radian =\n            cubismmath_1.CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) /\n                airResistance;\n        direction.x =\n            cubismmath_1.CubismMath.cos(radian) * direction.x -\n                direction.y * cubismmath_1.CubismMath.sin(radian);\n        direction.y =\n            cubismmath_1.CubismMath.sin(radian) * direction.x +\n                direction.y * cubismmath_1.CubismMath.cos(radian);\n        strand[i].position = strand[i - 1].position.add(direction);\n        velocity = strand[i].velocity.multiplyByScaler(delay);\n        force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\n        strand[i].position = strand[i].position.add(velocity).add(force);\n        newDirection = strand[i].position.substract(strand[i - 1].position);\n        newDirection.normalize();\n        strand[i].position = strand[i - 1].position.add(newDirection.multiplyByScaler(strand[i].radius));\n        if (cubismmath_1.CubismMath.abs(strand[i].position.x) < thresholdValue) {\n            strand[i].position.x = 0.0;\n        }\n        if (delay != 0.0) {\n            strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\n            strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\n            strand[i].velocity = strand[i].velocity.multiplyByScaler(strand[i].mobility);\n        }\n        strand[i].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n        strand[i].lastGravity = new cubismvector2_1.CubismVector2(currentGravity.x, currentGravity.y);\n    }\n}\nfunction updateOutputParameterValue(parameterValue, parameterValueMinimum, parameterValueMaximum, translation, output) {\n    var outputScale;\n    var value;\n    var weight;\n    outputScale = output.getScale(output.translationScale, output.angleScale);\n    value = translation * outputScale;\n    if (value < parameterValueMinimum) {\n        if (value < output.valueBelowMinimum) {\n            output.valueBelowMinimum = value;\n        }\n        value = parameterValueMinimum;\n    }\n    else if (value > parameterValueMaximum) {\n        if (value > output.valueExceededMaximum) {\n            output.valueExceededMaximum = value;\n        }\n        value = parameterValueMaximum;\n    }\n    weight = output.weight / MaximumWeight;\n    if (weight >= 1.0) {\n        parameterValue[0] = value;\n    }\n    else {\n        value = parameterValue[0] * (1.0 - weight) + value * weight;\n        parameterValue[0] = value;\n    }\n}\nfunction normalizeParameterValue(value, parameterMinimum, parameterMaximum, parameterDefault, normalizedMinimum, normalizedMaximum, normalizedDefault, isInverted) {\n    var result = 0.0;\n    var maxValue = cubismmath_1.CubismMath.max(parameterMaximum, parameterMinimum);\n    if (maxValue < value) {\n        value = maxValue;\n    }\n    var minValue = cubismmath_1.CubismMath.min(parameterMaximum, parameterMinimum);\n    if (minValue > value) {\n        value = minValue;\n    }\n    var minNormValue = cubismmath_1.CubismMath.min(normalizedMinimum, normalizedMaximum);\n    var maxNormValue = cubismmath_1.CubismMath.max(normalizedMinimum, normalizedMaximum);\n    var middleNormValue = normalizedDefault;\n    var middleValue = getDefaultValue(minValue, maxValue);\n    var paramValue = value - middleValue;\n    switch (sign(paramValue)) {\n        case 1: {\n            var nLength = maxNormValue - middleNormValue;\n            var pLength = maxValue - middleValue;\n            if (pLength != 0.0) {\n                result = paramValue * (nLength / pLength);\n                result += middleNormValue;\n            }\n            break;\n        }\n        case -1: {\n            var nLength = minNormValue - middleNormValue;\n            var pLength = minValue - middleValue;\n            if (pLength != 0.0) {\n                result = paramValue * (nLength / pLength);\n                result += middleNormValue;\n            }\n            break;\n        }\n        case 0: {\n            result = middleNormValue;\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n    return isInverted ? result : result * -1.0;\n}\nvar $ = __importStar(__webpack_require__(/*! ./cubismphysics */ \"./Framework/src/physics/cubismphysics.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPhysics = $.CubismPhysics;\n    Live2DCubismFramework.Options = $.Options;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3BoeXNpY3MvY3ViaXNtcGh5c2ljcy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvcGh5c2ljcy9jdWJpc21waHlzaWNzLnRzP2VmODgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtTWF0aCB9IGZyb20gJy4uL21hdGgvY3ViaXNtbWF0aCc7XG5pbXBvcnQgeyBDdWJpc21WZWN0b3IyIH0gZnJvbSAnLi4vbWF0aC9jdWJpc212ZWN0b3IyJztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHtcbiAgQ3ViaXNtUGh5c2ljc0lucHV0LFxuICBDdWJpc21QaHlzaWNzTm9ybWFsaXphdGlvbixcbiAgQ3ViaXNtUGh5c2ljc091dHB1dCxcbiAgQ3ViaXNtUGh5c2ljc1BhcnRpY2xlLFxuICBDdWJpc21QaHlzaWNzUmlnLFxuICBDdWJpc21QaHlzaWNzU291cmNlLFxuICBDdWJpc21QaHlzaWNzU3ViUmlnLFxuICBDdWJpc21QaHlzaWNzVGFyZ2V0VHlwZVxufSBmcm9tICcuL2N1YmlzbXBoeXNpY3NpbnRlcm5hbCc7XG5pbXBvcnQgeyBDdWJpc21QaHlzaWNzSnNvbiB9IGZyb20gJy4vY3ViaXNtcGh5c2ljc2pzb24nO1xuXG4vLyBwaHlzaWNzIHR5cGVzIHRhZ3MuXG5jb25zdCBQaHlzaWNzVHlwZVRhZ1ggPSAnWCc7XG5jb25zdCBQaHlzaWNzVHlwZVRhZ1kgPSAnWSc7XG5jb25zdCBQaHlzaWNzVHlwZVRhZ0FuZ2xlID0gJ0FuZ2xlJztcblxuLy8gQ29uc3RhbnQgb2YgYWlyIHJlc2lzdGFuY2UuXG5jb25zdCBBaXJSZXNpc3RhbmNlID0gNS4wO1xuXG4vLyBDb25zdGFudCBvZiBtYXhpbXVtIHdlaWdodCBvZiBpbnB1dCBhbmQgb3V0cHV0IHJhdGlvLlxuY29uc3QgTWF4aW11bVdlaWdodCA9IDEwMC4wO1xuXG4vLyBDb25zdGFudCBvZiB0aHJlc2hvbGQgb2YgbW92ZW1lbnQuXG5jb25zdCBNb3ZlbWVudFRocmVzaG9sZCA9IDAuMDAxO1xuXG4vKipcbiAqIOeJqeeQhua8lOeul+OCr+ODqeOCuVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtUGh5c2ljcyB7XG4gIC8qKlxuICAgKiDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7kvZzmiJBcbiAgICogQHBhcmFtIGJ1ZmZlciAgICBwaHlzaWNzMy5qc29u44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplICAgICAg44OQ44OD44OV44Kh44Gu44K144Kk44K6XG4gICAqIEByZXR1cm4g5L2c5oiQ44GV44KM44Gf44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShidWZmZXI6IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpOiBDdWJpc21QaHlzaWNzIHtcbiAgICBjb25zdCByZXQ6IEN1YmlzbVBoeXNpY3MgPSBuZXcgQ3ViaXNtUGh5c2ljcygpO1xuXG4gICAgcmV0LnBhcnNlKGJ1ZmZlciwgc2l6ZSk7XG4gICAgcmV0Ll9waHlzaWNzUmlnLmdyYXZpdHkueSA9IDA7XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkuegtOajhOOBmeOCi1xuICAgKiBAcGFyYW0gcGh5c2ljcyDnoLTmo4TjgZnjgovjgqTjg7Pjgrnjgr/jg7PjgrlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlKHBoeXNpY3M6IEN1YmlzbVBoeXNpY3MpOiB2b2lkIHtcbiAgICBpZiAocGh5c2ljcyAhPSBudWxsKSB7XG4gICAgICBwaHlzaWNzLnJlbGVhc2UoKTtcbiAgICAgIHBoeXNpY3MgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDniannkIbmvJTnrpfjga7oqZXkvqFcbiAgICogQHBhcmFtIG1vZGVsIOeJqeeQhua8lOeul+OBrue1kOaenOOCkumBqeeUqOOBmeOCi+ODouODh+ODq1xuICAgKiBAcGFyYW0gZGVsdGFUaW1lU2Vjb25kcyDjg4fjg6vjgr/mmYLplpNb56eSXVxuICAgKi9cbiAgcHVibGljIGV2YWx1YXRlKG1vZGVsOiBDdWJpc21Nb2RlbCwgZGVsdGFUaW1lU2Vjb25kczogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IHRvdGFsQW5nbGU6IHsgYW5nbGU6IG51bWJlciB9O1xuICAgIGxldCB3ZWlnaHQ6IG51bWJlcjtcbiAgICBsZXQgcmFkQW5nbGU6IG51bWJlcjtcbiAgICBsZXQgb3V0cHV0VmFsdWU6IG51bWJlcjtcbiAgICBjb25zdCB0b3RhbFRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoKTtcbiAgICBsZXQgY3VycmVudFNldHRpbmc6IEN1YmlzbVBoeXNpY3NTdWJSaWc7XG4gICAgbGV0IGN1cnJlbnRJbnB1dDogQ3ViaXNtUGh5c2ljc0lucHV0W107XG4gICAgbGV0IGN1cnJlbnRPdXRwdXQ6IEN1YmlzbVBoeXNpY3NPdXRwdXRbXTtcbiAgICBsZXQgY3VycmVudFBhcnRpY2xlczogQ3ViaXNtUGh5c2ljc1BhcnRpY2xlW107XG5cbiAgICBsZXQgcGFyYW1ldGVyVmFsdWU6IEZsb2F0MzJBcnJheTtcbiAgICBsZXQgcGFyYW1ldGVyTWF4aW11bVZhbHVlOiBGbG9hdDMyQXJyYXk7XG4gICAgbGV0IHBhcmFtZXRlck1pbmltdW1WYWx1ZTogRmxvYXQzMkFycmF5O1xuICAgIGxldCBwYXJhbWV0ZXJEZWZhdWx0VmFsdWU6IEZsb2F0MzJBcnJheTtcblxuICAgIHBhcmFtZXRlclZhbHVlID0gbW9kZWwuZ2V0TW9kZWwoKS5wYXJhbWV0ZXJzLnZhbHVlcztcbiAgICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWUgPSBtb2RlbC5nZXRNb2RlbCgpLnBhcmFtZXRlcnMubWF4aW11bVZhbHVlcztcbiAgICBwYXJhbWV0ZXJNaW5pbXVtVmFsdWUgPSBtb2RlbC5nZXRNb2RlbCgpLnBhcmFtZXRlcnMubWluaW11bVZhbHVlcztcbiAgICBwYXJhbWV0ZXJEZWZhdWx0VmFsdWUgPSBtb2RlbC5nZXRNb2RlbCgpLnBhcmFtZXRlcnMuZGVmYXVsdFZhbHVlcztcblxuICAgIGZvciAoXG4gICAgICBsZXQgc2V0dGluZ0luZGV4ID0gMDtcbiAgICAgIHNldHRpbmdJbmRleCA8IHRoaXMuX3BoeXNpY3NSaWcuc3ViUmlnQ291bnQ7XG4gICAgICArK3NldHRpbmdJbmRleFxuICAgICkge1xuICAgICAgdG90YWxBbmdsZSA9IHsgYW5nbGU6IDAuMCB9O1xuICAgICAgdG90YWxUcmFuc2xhdGlvbi54ID0gMC4wO1xuICAgICAgdG90YWxUcmFuc2xhdGlvbi55ID0gMC4wO1xuICAgICAgY3VycmVudFNldHRpbmcgPSB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KHNldHRpbmdJbmRleCk7XG4gICAgICBjdXJyZW50SW5wdXQgPSB0aGlzLl9waHlzaWNzUmlnLmlucHV0cy5nZXQoY3VycmVudFNldHRpbmcuYmFzZUlucHV0SW5kZXgpO1xuICAgICAgY3VycmVudE91dHB1dCA9IHRoaXMuX3BoeXNpY3NSaWcub3V0cHV0cy5nZXQoXG4gICAgICAgIGN1cnJlbnRTZXR0aW5nLmJhc2VPdXRwdXRJbmRleFxuICAgICAgKTtcbiAgICAgIGN1cnJlbnRQYXJ0aWNsZXMgPSB0aGlzLl9waHlzaWNzUmlnLnBhcnRpY2xlcy5nZXQoXG4gICAgICAgIGN1cnJlbnRTZXR0aW5nLmJhc2VQYXJ0aWNsZUluZGV4XG4gICAgICApO1xuXG4gICAgICAvLyBMb2FkIGlucHV0IHBhcmFtZXRlcnNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFNldHRpbmcuaW5wdXRDb3VudDsgKytpKSB7XG4gICAgICAgIHdlaWdodCA9IGN1cnJlbnRJbnB1dFtpXS53ZWlnaHQgLyBNYXhpbXVtV2VpZ2h0O1xuXG4gICAgICAgIGlmIChjdXJyZW50SW5wdXRbaV0uc291cmNlUGFyYW1ldGVySW5kZXggPT0gLTEpIHtcbiAgICAgICAgICBjdXJyZW50SW5wdXRbaV0uc291cmNlUGFyYW1ldGVySW5kZXggPSBtb2RlbC5nZXRQYXJhbWV0ZXJJbmRleChcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dFtpXS5zb3VyY2UuaWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudElucHV0W2ldLmdldE5vcm1hbGl6ZWRQYXJhbWV0ZXJWYWx1ZShcbiAgICAgICAgICB0b3RhbFRyYW5zbGF0aW9uLFxuICAgICAgICAgIHRvdGFsQW5nbGUsXG4gICAgICAgICAgcGFyYW1ldGVyVmFsdWVbY3VycmVudElucHV0W2ldLnNvdXJjZVBhcmFtZXRlckluZGV4XSxcbiAgICAgICAgICBwYXJhbWV0ZXJNaW5pbXVtVmFsdWVbY3VycmVudElucHV0W2ldLnNvdXJjZVBhcmFtZXRlckluZGV4XSxcbiAgICAgICAgICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWVbY3VycmVudElucHV0W2ldLnNvdXJjZVBhcmFtZXRlckluZGV4XSxcbiAgICAgICAgICBwYXJhbWV0ZXJEZWZhdWx0VmFsdWVbY3VycmVudElucHV0W2ldLnNvdXJjZVBhcmFtZXRlckluZGV4XSxcbiAgICAgICAgICBjdXJyZW50U2V0dGluZy5ub3JtYWxpemF0aW9uUG9zaXRpb24sXG4gICAgICAgICAgY3VycmVudFNldHRpbmcubm9ybWFsaXphdGlvbkFuZ2xlLFxuICAgICAgICAgIGN1cnJlbnRJbnB1dFtpXS5yZWZsZWN0LFxuICAgICAgICAgIHdlaWdodFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByYWRBbmdsZSA9IEN1YmlzbU1hdGguZGVncmVlc1RvUmFkaWFuKC10b3RhbEFuZ2xlLmFuZ2xlKTtcblxuICAgICAgdG90YWxUcmFuc2xhdGlvbi54ID1cbiAgICAgICAgdG90YWxUcmFuc2xhdGlvbi54ICogQ3ViaXNtTWF0aC5jb3MocmFkQW5nbGUpIC1cbiAgICAgICAgdG90YWxUcmFuc2xhdGlvbi55ICogQ3ViaXNtTWF0aC5zaW4ocmFkQW5nbGUpO1xuICAgICAgdG90YWxUcmFuc2xhdGlvbi55ID1cbiAgICAgICAgdG90YWxUcmFuc2xhdGlvbi54ICogQ3ViaXNtTWF0aC5zaW4ocmFkQW5nbGUpICtcbiAgICAgICAgdG90YWxUcmFuc2xhdGlvbi55ICogQ3ViaXNtTWF0aC5jb3MocmFkQW5nbGUpO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgcGFydGljbGVzIHBvc2l0aW9uLlxuICAgICAgdXBkYXRlUGFydGljbGVzKFxuICAgICAgICBjdXJyZW50UGFydGljbGVzLFxuICAgICAgICBjdXJyZW50U2V0dGluZy5wYXJ0aWNsZUNvdW50LFxuICAgICAgICB0b3RhbFRyYW5zbGF0aW9uLFxuICAgICAgICB0b3RhbEFuZ2xlLmFuZ2xlLFxuICAgICAgICB0aGlzLl9vcHRpb25zLndpbmQsXG4gICAgICAgIE1vdmVtZW50VGhyZXNob2xkICogY3VycmVudFNldHRpbmcubm9ybWFsaXphdGlvblBvc2l0aW9uLm1heGltdW0sXG4gICAgICAgIGRlbHRhVGltZVNlY29uZHMsXG4gICAgICAgIEFpclJlc2lzdGFuY2VcbiAgICAgICk7XG5cbiAgICAgIC8vIFVwZGF0ZSBvdXRwdXQgcGFyYW1ldGVycy5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFNldHRpbmcub3V0cHV0Q291bnQ7ICsraSkge1xuICAgICAgICBjb25zdCBwYXJ0aWNsZUluZGV4ID0gY3VycmVudE91dHB1dFtpXS52ZXJ0ZXhJbmRleDtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFydGljbGVJbmRleCA8IDEgfHxcbiAgICAgICAgICBwYXJ0aWNsZUluZGV4ID49IGN1cnJlbnRTZXR0aW5nLnBhcnRpY2xlQ291bnRcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudE91dHB1dFtpXS5kZXN0aW5hdGlvblBhcmFtZXRlckluZGV4ID09IC0xKSB7XG4gICAgICAgICAgY3VycmVudE91dHB1dFtpXS5kZXN0aW5hdGlvblBhcmFtZXRlckluZGV4ID0gbW9kZWwuZ2V0UGFyYW1ldGVySW5kZXgoXG4gICAgICAgICAgICBjdXJyZW50T3V0cHV0W2ldLmRlc3RpbmF0aW9uLmlkXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoKTtcbiAgICAgICAgdHJhbnNsYXRpb24ueCA9XG4gICAgICAgICAgY3VycmVudFBhcnRpY2xlc1twYXJ0aWNsZUluZGV4XS5wb3NpdGlvbi54IC1cbiAgICAgICAgICBjdXJyZW50UGFydGljbGVzW3BhcnRpY2xlSW5kZXggLSAxXS5wb3NpdGlvbi54O1xuICAgICAgICB0cmFuc2xhdGlvbi55ID1cbiAgICAgICAgICBjdXJyZW50UGFydGljbGVzW3BhcnRpY2xlSW5kZXhdLnBvc2l0aW9uLnkgLVxuICAgICAgICAgIGN1cnJlbnRQYXJ0aWNsZXNbcGFydGljbGVJbmRleCAtIDFdLnBvc2l0aW9uLnk7XG5cbiAgICAgICAgb3V0cHV0VmFsdWUgPSBjdXJyZW50T3V0cHV0W2ldLmdldFZhbHVlKFxuICAgICAgICAgIHRyYW5zbGF0aW9uLFxuICAgICAgICAgIGN1cnJlbnRQYXJ0aWNsZXMsXG4gICAgICAgICAgcGFydGljbGVJbmRleCxcbiAgICAgICAgICBjdXJyZW50T3V0cHV0W2ldLnJlZmxlY3QsXG4gICAgICAgICAgdGhpcy5fb3B0aW9ucy5ncmF2aXR5XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZGVzdGluYXRpb25QYXJhbWV0ZXJJbmRleDogbnVtYmVyID1cbiAgICAgICAgICBjdXJyZW50T3V0cHV0W2ldLmRlc3RpbmF0aW9uUGFyYW1ldGVySW5kZXg7XG4gICAgICAgIGNvbnN0IG91dFBhcmFtZXRlclZhbHVlOiBGbG9hdDMyQXJyYXkgPVxuICAgICAgICAgICFGbG9hdDMyQXJyYXkucHJvdG90eXBlLnNsaWNlICYmICdzdWJhcnJheScgaW4gRmxvYXQzMkFycmF5LnByb3RvdHlwZVxuICAgICAgICAgICAgPyBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyVmFsdWUuc3ViYXJyYXkoZGVzdGluYXRpb25QYXJhbWV0ZXJJbmRleClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICkgLy8g5YCk5rih44GX44GZ44KL44Gf44KB44CBSlNPTi5wYXJzZSwgSlNPTi5zdHJpbmdpZnlcbiAgICAgICAgICAgIDogcGFyYW1ldGVyVmFsdWUuc2xpY2UoZGVzdGluYXRpb25QYXJhbWV0ZXJJbmRleCk7XG5cbiAgICAgICAgdXBkYXRlT3V0cHV0UGFyYW1ldGVyVmFsdWUoXG4gICAgICAgICAgb3V0UGFyYW1ldGVyVmFsdWUsXG4gICAgICAgICAgcGFyYW1ldGVyTWluaW11bVZhbHVlW2Rlc3RpbmF0aW9uUGFyYW1ldGVySW5kZXhdLFxuICAgICAgICAgIHBhcmFtZXRlck1heGltdW1WYWx1ZVtkZXN0aW5hdGlvblBhcmFtZXRlckluZGV4XSxcbiAgICAgICAgICBvdXRwdXRWYWx1ZSxcbiAgICAgICAgICBjdXJyZW50T3V0cHV0W2ldXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8g5YCk44KS5Y+N5pigXG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IG9mZnNldDogbnVtYmVyID0gZGVzdGluYXRpb25QYXJhbWV0ZXJJbmRleCwgb3V0UGFyYW1JbmRleCA9IDA7XG4gICAgICAgICAgb2Zmc2V0IDwgcGFyYW1ldGVyVmFsdWUubGVuZ3RoO1xuICAgICAgICAgIG9mZnNldCsrLCBvdXRQYXJhbUluZGV4KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgcGFyYW1ldGVyVmFsdWVbb2Zmc2V0XSA9IG91dFBhcmFtZXRlclZhbHVlW291dFBhcmFtSW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCquODl+OCt+ODp+ODs+OBruioreWumlxuICAgKiBAcGFyYW0gb3B0aW9ucyDjgqrjg5fjgrfjg6fjg7NcbiAgICovXG4gIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6IE9wdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqrjg5fjgrfjg6fjg7Pjga7lj5blvpdcbiAgICogQHJldHVybiDjgqrjg5fjgrfjg6fjg7NcbiAgICovXG4gIHB1YmxpYyBnZXRPcHRpb24oKTogT3B0aW9ucyB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fcGh5c2ljc1JpZyA9IG51bGw7XG5cbiAgICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gICAgdGhpcy5fb3B0aW9ucyA9IG5ldyBPcHRpb25zKCk7XG4gICAgdGhpcy5fb3B0aW9ucy5ncmF2aXR5LnkgPSAtMS4wO1xuICAgIHRoaXMuX29wdGlvbnMuZ3Jhdml0eS54ID0gMDtcbiAgICB0aGlzLl9vcHRpb25zLndpbmQueCA9IDA7XG4gICAgdGhpcy5fb3B0aW9ucy53aW5kLnkgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv+ebuOW9k+OBruWHpueQhlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fcGh5c2ljc1JpZyA9IHZvaWQgMDtcbiAgICB0aGlzLl9waHlzaWNzUmlnID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBwaHlzaWNzMy5qc29u44KS44OR44O844K544GZ44KL44CCXG4gICAqIEBwYXJhbSBwaHlzaWNzSnNvbiBwaHlzaWNzMy5qc29u44GM6Kqt44G/6L6844G+44KM44Gm44GE44KL44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSBzaXplIOODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKi9cbiAgcHVibGljIHBhcnNlKHBoeXNpY3NKc29uOiBBcnJheUJ1ZmZlciwgc2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcGh5c2ljc1JpZyA9IG5ldyBDdWJpc21QaHlzaWNzUmlnKCk7XG5cbiAgICBsZXQganNvbjogQ3ViaXNtUGh5c2ljc0pzb24gPSBuZXcgQ3ViaXNtUGh5c2ljc0pzb24ocGh5c2ljc0pzb24sIHNpemUpO1xuXG4gICAgdGhpcy5fcGh5c2ljc1JpZy5ncmF2aXR5ID0ganNvbi5nZXRHcmF2aXR5KCk7XG4gICAgdGhpcy5fcGh5c2ljc1JpZy53aW5kID0ganNvbi5nZXRXaW5kKCk7XG4gICAgdGhpcy5fcGh5c2ljc1JpZy5zdWJSaWdDb3VudCA9IGpzb24uZ2V0U3ViUmlnQ291bnQoKTtcblxuICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MudXBkYXRlU2l6ZShcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc3ViUmlnQ291bnQsXG4gICAgICBDdWJpc21QaHlzaWNzU3ViUmlnLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5fcGh5c2ljc1JpZy5pbnB1dHMudXBkYXRlU2l6ZShcbiAgICAgIGpzb24uZ2V0VG90YWxJbnB1dENvdW50KCksXG4gICAgICBDdWJpc21QaHlzaWNzSW5wdXQsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMudXBkYXRlU2l6ZShcbiAgICAgIGpzb24uZ2V0VG90YWxPdXRwdXRDb3VudCgpLFxuICAgICAgQ3ViaXNtUGh5c2ljc091dHB1dCxcbiAgICAgIHRydWVcbiAgICApO1xuICAgIHRoaXMuX3BoeXNpY3NSaWcucGFydGljbGVzLnVwZGF0ZVNpemUoXG4gICAgICBqc29uLmdldFZlcnRleENvdW50KCksXG4gICAgICBDdWJpc21QaHlzaWNzUGFydGljbGUsXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGxldCBpbnB1dEluZGV4ID0gMCxcbiAgICAgIG91dHB1dEluZGV4ID0gMCxcbiAgICAgIHBhcnRpY2xlSW5kZXggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmdldFNpemUoKTsgKytpKSB7XG4gICAgICB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KFxuICAgICAgICBpXG4gICAgICApLm5vcm1hbGl6YXRpb25Qb3NpdGlvbi5taW5pbXVtID0ganNvbi5nZXROb3JtYWxpemF0aW9uUG9zaXRpb25NaW5pbXVtVmFsdWUoXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgICB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KFxuICAgICAgICBpXG4gICAgICApLm5vcm1hbGl6YXRpb25Qb3NpdGlvbi5tYXhpbXVtID0ganNvbi5nZXROb3JtYWxpemF0aW9uUG9zaXRpb25NYXhpbXVtVmFsdWUoXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgICB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KFxuICAgICAgICBpXG4gICAgICApLm5vcm1hbGl6YXRpb25Qb3NpdGlvbi5kZWZhbHV0ID0ganNvbi5nZXROb3JtYWxpemF0aW9uUG9zaXRpb25EZWZhdWx0VmFsdWUoXG4gICAgICAgIGlcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoXG4gICAgICAgIGlcbiAgICAgICkubm9ybWFsaXphdGlvbkFuZ2xlLm1pbmltdW0gPSBqc29uLmdldE5vcm1hbGl6YXRpb25BbmdsZU1pbmltdW1WYWx1ZShpKTtcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoXG4gICAgICAgIGlcbiAgICAgICkubm9ybWFsaXphdGlvbkFuZ2xlLm1heGltdW0gPSBqc29uLmdldE5vcm1hbGl6YXRpb25BbmdsZU1heGltdW1WYWx1ZShpKTtcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoXG4gICAgICAgIGlcbiAgICAgICkubm9ybWFsaXphdGlvbkFuZ2xlLmRlZmFsdXQgPSBqc29uLmdldE5vcm1hbGl6YXRpb25BbmdsZURlZmF1bHRWYWx1ZShpKTtcblxuICAgICAgLy8gSW5wdXRcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkuaW5wdXRDb3VudCA9IGpzb24uZ2V0SW5wdXRDb3VudChpKTtcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkuYmFzZUlucHV0SW5kZXggPSBpbnB1dEluZGV4O1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkuaW5wdXRDb3VudDsgKytqKSB7XG4gICAgICAgIHRoaXMuX3BoeXNpY3NSaWcuaW5wdXRzLmF0KGlucHV0SW5kZXggKyBqKS5zb3VyY2VQYXJhbWV0ZXJJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLl9waHlzaWNzUmlnLmlucHV0cy5hdChpbnB1dEluZGV4ICsgaikud2VpZ2h0ID0ganNvbi5nZXRJbnB1dFdlaWdodChcbiAgICAgICAgICBpLFxuICAgICAgICAgIGpcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5pbnB1dHMuYXQoXG4gICAgICAgICAgaW5wdXRJbmRleCArIGpcbiAgICAgICAgKS5yZWZsZWN0ID0ganNvbi5nZXRJbnB1dFJlZmxlY3QoaSwgaik7XG5cbiAgICAgICAgaWYgKGpzb24uZ2V0SW5wdXRUeXBlKGksIGopID09IFBoeXNpY3NUeXBlVGFnWCkge1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcuaW5wdXRzLmF0KGlucHV0SW5kZXggKyBqKS50eXBlID1cbiAgICAgICAgICAgIEN1YmlzbVBoeXNpY3NTb3VyY2UuQ3ViaXNtUGh5c2ljc1NvdXJjZV9YO1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcuaW5wdXRzLmF0KFxuICAgICAgICAgICAgaW5wdXRJbmRleCArIGpcbiAgICAgICAgICApLmdldE5vcm1hbGl6ZWRQYXJhbWV0ZXJWYWx1ZSA9IGdldElucHV0VHJhbnNsYXRpb25YRnJvbU5vcm1hbGl6ZWRQYXJhbWV0ZXJWYWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChqc29uLmdldElucHV0VHlwZShpLCBqKSA9PSBQaHlzaWNzVHlwZVRhZ1kpIHtcbiAgICAgICAgICB0aGlzLl9waHlzaWNzUmlnLmlucHV0cy5hdChpbnB1dEluZGV4ICsgaikudHlwZSA9XG4gICAgICAgICAgICBDdWJpc21QaHlzaWNzU291cmNlLkN1YmlzbVBoeXNpY3NTb3VyY2VfWTtcbiAgICAgICAgICB0aGlzLl9waHlzaWNzUmlnLmlucHV0cy5hdChcbiAgICAgICAgICAgIGlucHV0SW5kZXggKyBqXG4gICAgICAgICAgKS5nZXROb3JtYWxpemVkUGFyYW1ldGVyVmFsdWUgPSBnZXRJbnB1dFRyYW5zbGF0aW9uWUZyb21Ob3JtYWxpemVkUGFyYW10ZXJWYWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChqc29uLmdldElucHV0VHlwZShpLCBqKSA9PSBQaHlzaWNzVHlwZVRhZ0FuZ2xlKSB7XG4gICAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5pbnB1dHMuYXQoaW5wdXRJbmRleCArIGopLnR5cGUgPVxuICAgICAgICAgICAgQ3ViaXNtUGh5c2ljc1NvdXJjZS5DdWJpc21QaHlzaWNzU291cmNlX0FuZ2xlO1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcuaW5wdXRzLmF0KFxuICAgICAgICAgICAgaW5wdXRJbmRleCArIGpcbiAgICAgICAgICApLmdldE5vcm1hbGl6ZWRQYXJhbWV0ZXJWYWx1ZSA9IGdldElucHV0QW5nbGVGcm9tTm9ybWFsaXplZFBhcmFtZXRlclZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5pbnB1dHMuYXQoaW5wdXRJbmRleCArIGopLnNvdXJjZS50YXJnZXRUeXBlID1cbiAgICAgICAgICBDdWJpc21QaHlzaWNzVGFyZ2V0VHlwZS5DdWJpc21QaHlzaWNzVGFyZ2V0VHlwZV9QYXJhbWV0ZXI7XG4gICAgICAgIHRoaXMuX3BoeXNpY3NSaWcuaW5wdXRzLmF0KFxuICAgICAgICAgIGlucHV0SW5kZXggKyBqXG4gICAgICAgICkuc291cmNlLmlkID0ganNvbi5nZXRJbnB1dFNvdXJjZUlkKGksIGopO1xuICAgICAgfVxuICAgICAgaW5wdXRJbmRleCArPSB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KGkpLmlucHV0Q291bnQ7XG5cbiAgICAgIC8vIE91dHB1dFxuICAgICAgdGhpcy5fcGh5c2ljc1JpZy5zZXR0aW5ncy5hdChpKS5vdXRwdXRDb3VudCA9IGpzb24uZ2V0T3V0cHV0Q291bnQoaSk7XG4gICAgICB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KGkpLmJhc2VPdXRwdXRJbmRleCA9IG91dHB1dEluZGV4O1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkub3V0cHV0Q291bnQ7ICsraikge1xuICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQoXG4gICAgICAgICAgb3V0cHV0SW5kZXggKyBqXG4gICAgICAgICkuZGVzdGluYXRpb25QYXJhbWV0ZXJJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQoXG4gICAgICAgICAgb3V0cHV0SW5kZXggKyBqXG4gICAgICAgICkudmVydGV4SW5kZXggPSBqc29uLmdldE91dHB1dFZlcnRleEluZGV4KGksIGopO1xuICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQoXG4gICAgICAgICAgb3V0cHV0SW5kZXggKyBqXG4gICAgICAgICkuYW5nbGVTY2FsZSA9IGpzb24uZ2V0T3V0cHV0QW5nbGVTY2FsZShpLCBqKTtcbiAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5vdXRwdXRzLmF0KFxuICAgICAgICAgIG91dHB1dEluZGV4ICsgalxuICAgICAgICApLndlaWdodCA9IGpzb24uZ2V0T3V0cHV0V2VpZ2h0KGksIGopO1xuICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQob3V0cHV0SW5kZXggKyBqKS5kZXN0aW5hdGlvbi50YXJnZXRUeXBlID1cbiAgICAgICAgICBDdWJpc21QaHlzaWNzVGFyZ2V0VHlwZS5DdWJpc21QaHlzaWNzVGFyZ2V0VHlwZV9QYXJhbWV0ZXI7XG5cbiAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5vdXRwdXRzLmF0KFxuICAgICAgICAgIG91dHB1dEluZGV4ICsgalxuICAgICAgICApLmRlc3RpbmF0aW9uLmlkID0ganNvbi5nZXRPdXRwdXREZXN0aW5hdGlvbklkKGksIGopO1xuXG4gICAgICAgIGlmIChqc29uLmdldE91dHB1dFR5cGUoaSwgaikgPT0gUGh5c2ljc1R5cGVUYWdYKSB7XG4gICAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5vdXRwdXRzLmF0KG91dHB1dEluZGV4ICsgaikudHlwZSA9XG4gICAgICAgICAgICBDdWJpc21QaHlzaWNzU291cmNlLkN1YmlzbVBoeXNpY3NTb3VyY2VfWDtcbiAgICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQoXG4gICAgICAgICAgICBvdXRwdXRJbmRleCArIGpcbiAgICAgICAgICApLmdldFZhbHVlID0gZ2V0T3V0cHV0VHJhbnNsYXRpb25YO1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcub3V0cHV0cy5hdChcbiAgICAgICAgICAgIG91dHB1dEluZGV4ICsgalxuICAgICAgICAgICkuZ2V0U2NhbGUgPSBnZXRPdXRwdXRTY2FsZVRyYW5zbGF0aW9uWDtcbiAgICAgICAgfSBlbHNlIGlmIChqc29uLmdldE91dHB1dFR5cGUoaSwgaikgPT0gUGh5c2ljc1R5cGVUYWdZKSB7XG4gICAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5vdXRwdXRzLmF0KG91dHB1dEluZGV4ICsgaikudHlwZSA9XG4gICAgICAgICAgICBDdWJpc21QaHlzaWNzU291cmNlLkN1YmlzbVBoeXNpY3NTb3VyY2VfWTtcbiAgICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQoXG4gICAgICAgICAgICBvdXRwdXRJbmRleCArIGpcbiAgICAgICAgICApLmdldFZhbHVlID0gZ2V0T3V0cHV0VHJhbnNsYXRpb25ZO1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcub3V0cHV0cy5hdChcbiAgICAgICAgICAgIG91dHB1dEluZGV4ICsgalxuICAgICAgICAgICkuZ2V0U2NhbGUgPSBnZXRPdXRwdXRTY2FsZVRyYW5zbGF0aW9uWTtcbiAgICAgICAgfSBlbHNlIGlmIChqc29uLmdldE91dHB1dFR5cGUoaSwgaikgPT0gUGh5c2ljc1R5cGVUYWdBbmdsZSkge1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcub3V0cHV0cy5hdChvdXRwdXRJbmRleCArIGopLnR5cGUgPVxuICAgICAgICAgICAgQ3ViaXNtUGh5c2ljc1NvdXJjZS5DdWJpc21QaHlzaWNzU291cmNlX0FuZ2xlO1xuICAgICAgICAgIHRoaXMuX3BoeXNpY3NSaWcub3V0cHV0cy5hdChcbiAgICAgICAgICAgIG91dHB1dEluZGV4ICsgalxuICAgICAgICAgICkuZ2V0VmFsdWUgPSBnZXRPdXRwdXRBbmdsZTtcbiAgICAgICAgICB0aGlzLl9waHlzaWNzUmlnLm91dHB1dHMuYXQoXG4gICAgICAgICAgICBvdXRwdXRJbmRleCArIGpcbiAgICAgICAgICApLmdldFNjYWxlID0gZ2V0T3V0cHV0U2NhbGVBbmdsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BoeXNpY3NSaWcub3V0cHV0cy5hdChcbiAgICAgICAgICBvdXRwdXRJbmRleCArIGpcbiAgICAgICAgKS5yZWZsZWN0ID0ganNvbi5nZXRPdXRwdXRSZWZsZWN0KGksIGopO1xuICAgICAgfVxuICAgICAgb3V0cHV0SW5kZXggKz0gdGhpcy5fcGh5c2ljc1JpZy5zZXR0aW5ncy5hdChpKS5vdXRwdXRDb3VudDtcblxuICAgICAgLy8gUGFydGljbGVcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkucGFydGljbGVDb3VudCA9IGpzb24uZ2V0UGFydGljbGVDb3VudChpKTtcbiAgICAgIHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkuYmFzZVBhcnRpY2xlSW5kZXggPSBwYXJ0aWNsZUluZGV4O1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkucGFydGljbGVDb3VudDsgKytqKSB7XG4gICAgICAgIHRoaXMuX3BoeXNpY3NSaWcucGFydGljbGVzLmF0KFxuICAgICAgICAgIHBhcnRpY2xlSW5kZXggKyBqXG4gICAgICAgICkubW9iaWxpdHkgPSBqc29uLmdldFBhcnRpY2xlTW9iaWxpdHkoaSwgaik7XG4gICAgICAgIHRoaXMuX3BoeXNpY3NSaWcucGFydGljbGVzLmF0KFxuICAgICAgICAgIHBhcnRpY2xlSW5kZXggKyBqXG4gICAgICAgICkuZGVsYXkgPSBqc29uLmdldFBhcnRpY2xlRGVsYXkoaSwgaik7XG4gICAgICAgIHRoaXMuX3BoeXNpY3NSaWcucGFydGljbGVzLmF0KFxuICAgICAgICAgIHBhcnRpY2xlSW5kZXggKyBqXG4gICAgICAgICkuYWNjZWxlcmF0aW9uID0ganNvbi5nZXRQYXJ0aWNsZUFjY2VsZXJhdGlvbihpLCBqKTtcbiAgICAgICAgdGhpcy5fcGh5c2ljc1JpZy5wYXJ0aWNsZXMuYXQoXG4gICAgICAgICAgcGFydGljbGVJbmRleCArIGpcbiAgICAgICAgKS5yYWRpdXMgPSBqc29uLmdldFBhcnRpY2xlUmFkaXVzKGksIGopO1xuICAgICAgICB0aGlzLl9waHlzaWNzUmlnLnBhcnRpY2xlcy5hdChcbiAgICAgICAgICBwYXJ0aWNsZUluZGV4ICsgalxuICAgICAgICApLnBvc2l0aW9uID0ganNvbi5nZXRQYXJ0aWNsZVBvc2l0aW9uKGksIGopO1xuICAgICAgfVxuXG4gICAgICBwYXJ0aWNsZUluZGV4ICs9IHRoaXMuX3BoeXNpY3NSaWcuc2V0dGluZ3MuYXQoaSkucGFydGljbGVDb3VudDtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRpYWxpemUoKTtcblxuICAgIGpzb24ucmVsZWFzZSgpO1xuICAgIGpzb24gPSB2b2lkIDA7XG4gICAganNvbiA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICog5Yid5pyf5YyW44GZ44KLXG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBsZXQgc3RyYW5kOiBDdWJpc21QaHlzaWNzUGFydGljbGVbXTtcbiAgICBsZXQgY3VycmVudFNldHRpbmc6IEN1YmlzbVBoeXNpY3NTdWJSaWc7XG4gICAgbGV0IHJhZGl1czogQ3ViaXNtVmVjdG9yMjtcblxuICAgIGZvciAoXG4gICAgICBsZXQgc2V0dGluZ0luZGV4ID0gMDtcbiAgICAgIHNldHRpbmdJbmRleCA8IHRoaXMuX3BoeXNpY3NSaWcuc3ViUmlnQ291bnQ7XG4gICAgICArK3NldHRpbmdJbmRleFxuICAgICkge1xuICAgICAgY3VycmVudFNldHRpbmcgPSB0aGlzLl9waHlzaWNzUmlnLnNldHRpbmdzLmF0KHNldHRpbmdJbmRleCk7XG4gICAgICBzdHJhbmQgPSB0aGlzLl9waHlzaWNzUmlnLnBhcnRpY2xlcy5nZXQoY3VycmVudFNldHRpbmcuYmFzZVBhcnRpY2xlSW5kZXgpO1xuXG4gICAgICAvLyBJbml0aWFsaXplIHRoZSB0b3Agb2YgcGFydGljbGUuXG4gICAgICBzdHJhbmRbMF0uaW5pdGlhbFBvc2l0aW9uID0gbmV3IEN1YmlzbVZlY3RvcjIoMC4wLCAwLjApO1xuICAgICAgc3RyYW5kWzBdLmxhc3RQb3NpdGlvbiA9IG5ldyBDdWJpc21WZWN0b3IyKFxuICAgICAgICBzdHJhbmRbMF0uaW5pdGlhbFBvc2l0aW9uLngsXG4gICAgICAgIHN0cmFuZFswXS5pbml0aWFsUG9zaXRpb24ueVxuICAgICAgKTtcbiAgICAgIHN0cmFuZFswXS5sYXN0R3Jhdml0eSA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgLTEuMCk7XG4gICAgICBzdHJhbmRbMF0ubGFzdEdyYXZpdHkueSAqPSAtMS4wO1xuICAgICAgc3RyYW5kWzBdLnZlbG9jaXR5ID0gbmV3IEN1YmlzbVZlY3RvcjIoMC4wLCAwLjApO1xuICAgICAgc3RyYW5kWzBdLmZvcmNlID0gbmV3IEN1YmlzbVZlY3RvcjIoMC4wLCAwLjApO1xuXG4gICAgICAvLyBJbml0aWFsaXplIHBhcml0Y2xlcy5cbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY3VycmVudFNldHRpbmcucGFydGljbGVDb3VudDsgKytpKSB7XG4gICAgICAgIHJhZGl1cyA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgMC4wKTtcbiAgICAgICAgcmFkaXVzLnkgPSBzdHJhbmRbaV0ucmFkaXVzO1xuICAgICAgICBzdHJhbmRbaV0uaW5pdGlhbFBvc2l0aW9uID0gbmV3IEN1YmlzbVZlY3RvcjIoXG4gICAgICAgICAgc3RyYW5kW2kgLSAxXS5pbml0aWFsUG9zaXRpb24ueCArIHJhZGl1cy54LFxuICAgICAgICAgIHN0cmFuZFtpIC0gMV0uaW5pdGlhbFBvc2l0aW9uLnkgKyByYWRpdXMueVxuICAgICAgICApO1xuICAgICAgICBzdHJhbmRbaV0ucG9zaXRpb24gPSBuZXcgQ3ViaXNtVmVjdG9yMihcbiAgICAgICAgICBzdHJhbmRbaV0uaW5pdGlhbFBvc2l0aW9uLngsXG4gICAgICAgICAgc3RyYW5kW2ldLmluaXRpYWxQb3NpdGlvbi55XG4gICAgICAgICk7XG4gICAgICAgIHN0cmFuZFtpXS5sYXN0UG9zaXRpb24gPSBuZXcgQ3ViaXNtVmVjdG9yMihcbiAgICAgICAgICBzdHJhbmRbaV0uaW5pdGlhbFBvc2l0aW9uLngsXG4gICAgICAgICAgc3RyYW5kW2ldLmluaXRpYWxQb3NpdGlvbi55XG4gICAgICAgICk7XG4gICAgICAgIHN0cmFuZFtpXS5sYXN0R3Jhdml0eSA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgLTEuMCk7XG4gICAgICAgIHN0cmFuZFtpXS5sYXN0R3Jhdml0eS55ICo9IC0xLjA7XG4gICAgICAgIHN0cmFuZFtpXS52ZWxvY2l0eSA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgMC4wKTtcbiAgICAgICAgc3RyYW5kW2ldLmZvcmNlID0gbmV3IEN1YmlzbVZlY3RvcjIoMC4wLCAwLjApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9waHlzaWNzUmlnOiBDdWJpc21QaHlzaWNzUmlnOyAvLyDniannkIbmvJTnrpfjga7jg4fjg7zjgr9cbiAgX29wdGlvbnM6IE9wdGlvbnM7IC8vIOOCquODl+OCt+ODp+ODs1xufVxuXG4vKipcbiAqIOeJqeeQhua8lOeul+OBruOCquODl+OCt+ODp+ODs1xuICovXG5leHBvcnQgY2xhc3MgT3B0aW9ucyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ3Jhdml0eSA9IG5ldyBDdWJpc21WZWN0b3IyKDAsIDApO1xuICAgIHRoaXMud2luZCA9IG5ldyBDdWJpc21WZWN0b3IyKDAsIDApO1xuICB9XG5cbiAgZ3Jhdml0eTogQ3ViaXNtVmVjdG9yMjsgLy8g6YeN5Yqb5pa55ZCRXG4gIHdpbmQ6IEN1YmlzbVZlY3RvcjI7IC8vIOmiqOOBruaWueWQkVxufVxuXG4vKipcbiAqIEdldHMgc2lnbi5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgRXZhbHVhdGlvbiB0YXJnZXQgdmFsdWUuXG4gKlxuICogQHJldHVybiBTaWduIG9mIHZhbHVlLlxuICovXG5mdW5jdGlvbiBzaWduKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICBsZXQgcmV0ID0gMDtcblxuICBpZiAodmFsdWUgPiAwLjApIHtcbiAgICByZXQgPSAxO1xuICB9IGVsc2UgaWYgKHZhbHVlIDwgMC4wKSB7XG4gICAgcmV0ID0gLTE7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBnZXRJbnB1dFRyYW5zbGF0aW9uWEZyb21Ob3JtYWxpemVkUGFyYW1ldGVyVmFsdWUoXG4gIHRhcmdldFRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyLFxuICB0YXJnZXRBbmdsZTogeyBhbmdsZTogbnVtYmVyIH0sXG4gIHZhbHVlOiBudW1iZXIsXG4gIHBhcmFtZXRlck1pbmltdW1WYWx1ZTogbnVtYmVyLFxuICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWU6IG51bWJlcixcbiAgcGFyYW1ldGVyRGVmYXVsdFZhbHVlOiBudW1iZXIsXG4gIG5vcm1hbGl6YXRpb25Qb3NpdGlvbjogQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24sXG4gIG5vcm1hbGl6YXRpb25BbmdsZTogQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24sXG4gIGlzSW52ZXJ0ZWQ6IGJvb2xlYW4sXG4gIHdlaWdodDogbnVtYmVyXG4pOiB2b2lkIHtcbiAgdGFyZ2V0VHJhbnNsYXRpb24ueCArPVxuICAgIG5vcm1hbGl6ZVBhcmFtZXRlclZhbHVlKFxuICAgICAgdmFsdWUsXG4gICAgICBwYXJhbWV0ZXJNaW5pbXVtVmFsdWUsXG4gICAgICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWUsXG4gICAgICBwYXJhbWV0ZXJEZWZhdWx0VmFsdWUsXG4gICAgICBub3JtYWxpemF0aW9uUG9zaXRpb24ubWluaW11bSxcbiAgICAgIG5vcm1hbGl6YXRpb25Qb3NpdGlvbi5tYXhpbXVtLFxuICAgICAgbm9ybWFsaXphdGlvblBvc2l0aW9uLmRlZmFsdXQsXG4gICAgICBpc0ludmVydGVkXG4gICAgKSAqIHdlaWdodDtcbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRUcmFuc2xhdGlvbllGcm9tTm9ybWFsaXplZFBhcmFtdGVyVmFsdWUoXG4gIHRhcmdldFRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyLFxuICB0YXJnZXRBbmdsZTogeyBhbmdsZTogbnVtYmVyIH0sXG4gIHZhbHVlOiBudW1iZXIsXG4gIHBhcmFtZXRlck1pbmltdW1WYWx1ZTogbnVtYmVyLFxuICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWU6IG51bWJlcixcbiAgcGFyYW1ldGVyRGVmYXVsdFZhbHVlOiBudW1iZXIsXG4gIG5vcm1hbGl6YXRpb25Qb3NpdGlvbjogQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24sXG4gIG5vcm1hbGl6YXRpb25BbmdsZTogQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24sXG4gIGlzSW52ZXJ0ZWQ6IGJvb2xlYW4sXG4gIHdlaWdodDogbnVtYmVyXG4pOiB2b2lkIHtcbiAgdGFyZ2V0VHJhbnNsYXRpb24ueSArPVxuICAgIG5vcm1hbGl6ZVBhcmFtZXRlclZhbHVlKFxuICAgICAgdmFsdWUsXG4gICAgICBwYXJhbWV0ZXJNaW5pbXVtVmFsdWUsXG4gICAgICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWUsXG4gICAgICBwYXJhbWV0ZXJEZWZhdWx0VmFsdWUsXG4gICAgICBub3JtYWxpemF0aW9uUG9zaXRpb24ubWluaW11bSxcbiAgICAgIG5vcm1hbGl6YXRpb25Qb3NpdGlvbi5tYXhpbXVtLFxuICAgICAgbm9ybWFsaXphdGlvblBvc2l0aW9uLmRlZmFsdXQsXG4gICAgICBpc0ludmVydGVkXG4gICAgKSAqIHdlaWdodDtcbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRBbmdsZUZyb21Ob3JtYWxpemVkUGFyYW1ldGVyVmFsdWUoXG4gIHRhcmdldFRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyLFxuICB0YXJnZXRBbmdsZTogeyBhbmdsZTogbnVtYmVyIH0sXG4gIHZhbHVlOiBudW1iZXIsXG4gIHBhcmFtZXRlck1pbmltdW1WYWx1ZTogbnVtYmVyLFxuICBwYXJhbWV0ZXJNYXhpbXVtVmFsdWU6IG51bWJlcixcbiAgcGFyYW1ldGVyRGVmYXVsdFZhbHVlOiBudW1iZXIsXG4gIG5vcm1hbGl6YWl0aW9uUG9zaXRpb246IEN1YmlzbVBoeXNpY3NOb3JtYWxpemF0aW9uLFxuICBub3JtYWxpemF0aW9uQW5nbGU6IEN1YmlzbVBoeXNpY3NOb3JtYWxpemF0aW9uLFxuICBpc0ludmVydGVkOiBib29sZWFuLFxuICB3ZWlnaHQ6IG51bWJlclxuKTogdm9pZCB7XG4gIHRhcmdldEFuZ2xlLmFuZ2xlICs9XG4gICAgbm9ybWFsaXplUGFyYW1ldGVyVmFsdWUoXG4gICAgICB2YWx1ZSxcbiAgICAgIHBhcmFtZXRlck1pbmltdW1WYWx1ZSxcbiAgICAgIHBhcmFtZXRlck1heGltdW1WYWx1ZSxcbiAgICAgIHBhcmFtZXRlckRlZmF1bHRWYWx1ZSxcbiAgICAgIG5vcm1hbGl6YXRpb25BbmdsZS5taW5pbXVtLFxuICAgICAgbm9ybWFsaXphdGlvbkFuZ2xlLm1heGltdW0sXG4gICAgICBub3JtYWxpemF0aW9uQW5nbGUuZGVmYWx1dCxcbiAgICAgIGlzSW52ZXJ0ZWRcbiAgICApICogd2VpZ2h0O1xufVxuXG5mdW5jdGlvbiBnZXRPdXRwdXRUcmFuc2xhdGlvblgoXG4gIHRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyLFxuICBwYXJ0aWNsZXM6IEN1YmlzbVBoeXNpY3NQYXJ0aWNsZVtdLFxuICBwYXJ0aWNsZUluZGV4OiBudW1iZXIsXG4gIGlzSW52ZXJ0ZWQ6IGJvb2xlYW4sXG4gIHBhcmVudEdyYXZpdHk6IEN1YmlzbVZlY3RvcjJcbik6IG51bWJlciB7XG4gIGxldCBvdXRwdXRWYWx1ZTogbnVtYmVyID0gdHJhbnNsYXRpb24ueDtcblxuICBpZiAoaXNJbnZlcnRlZCkge1xuICAgIG91dHB1dFZhbHVlICo9IC0xLjA7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0VmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldE91dHB1dFRyYW5zbGF0aW9uWShcbiAgdHJhbnNsYXRpb246IEN1YmlzbVZlY3RvcjIsXG4gIHBhcnRpY2xlczogQ3ViaXNtUGh5c2ljc1BhcnRpY2xlW10sXG4gIHBhcnRpY2xlSW5kZXg6IG51bWJlcixcbiAgaXNJbnZlcnRlZDogYm9vbGVhbixcbiAgcGFyZW50R3Jhdml0eTogQ3ViaXNtVmVjdG9yMlxuKTogbnVtYmVyIHtcbiAgbGV0IG91dHB1dFZhbHVlOiBudW1iZXIgPSB0cmFuc2xhdGlvbi55O1xuXG4gIGlmIChpc0ludmVydGVkKSB7XG4gICAgb3V0cHV0VmFsdWUgKj0gLTEuMDtcbiAgfVxuICByZXR1cm4gb3V0cHV0VmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldE91dHB1dEFuZ2xlKFxuICB0cmFuc2xhdGlvbjogQ3ViaXNtVmVjdG9yMixcbiAgcGFydGljbGVzOiBDdWJpc21QaHlzaWNzUGFydGljbGVbXSxcbiAgcGFydGljbGVJbmRleDogbnVtYmVyLFxuICBpc0ludmVydGVkOiBib29sZWFuLFxuICBwYXJlbnRHcmF2aXR5OiBDdWJpc21WZWN0b3IyXG4pOiBudW1iZXIge1xuICBsZXQgb3V0cHV0VmFsdWU6IG51bWJlcjtcblxuICBpZiAocGFydGljbGVJbmRleCA+PSAyKSB7XG4gICAgcGFyZW50R3Jhdml0eSA9IHBhcnRpY2xlc1twYXJ0aWNsZUluZGV4IC0gMV0ucG9zaXRpb24uc3Vic3RyYWN0KFxuICAgICAgcGFydGljbGVzW3BhcnRpY2xlSW5kZXggLSAyXS5wb3NpdGlvblxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcGFyZW50R3Jhdml0eSA9IHBhcmVudEdyYXZpdHkubXVsdGlwbHlCeVNjYWxlcigtMS4wKTtcbiAgfVxuXG4gIG91dHB1dFZhbHVlID0gQ3ViaXNtTWF0aC5kaXJlY3Rpb25Ub1JhZGlhbihwYXJlbnRHcmF2aXR5LCB0cmFuc2xhdGlvbik7XG5cbiAgaWYgKGlzSW52ZXJ0ZWQpIHtcbiAgICBvdXRwdXRWYWx1ZSAqPSAtMS4wO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dFZhbHVlO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5nZVZhbHVlKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gIGNvbnN0IG1heFZhbHVlOiBudW1iZXIgPSBDdWJpc21NYXRoLm1heChtaW4sIG1heCk7XG4gIGNvbnN0IG1pblZhbHVlOiBudW1iZXIgPSBDdWJpc21NYXRoLm1pbihtaW4sIG1heCk7XG5cbiAgcmV0dXJuIEN1YmlzbU1hdGguYWJzKG1heFZhbHVlIC0gbWluVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0VmFsdWUobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgbWluVmFsdWU6IG51bWJlciA9IEN1YmlzbU1hdGgubWluKG1pbiwgbWF4KTtcbiAgcmV0dXJuIG1pblZhbHVlICsgZ2V0UmFuZ2VWYWx1ZShtaW4sIG1heCkgLyAyLjA7XG59XG5cbmZ1bmN0aW9uIGdldE91dHB1dFNjYWxlVHJhbnNsYXRpb25YKFxuICB0cmFuc2xhdGlvblNjYWxlOiBDdWJpc21WZWN0b3IyLFxuICBhbmdsZVNjYWxlOiBudW1iZXJcbik6IG51bWJlciB7XG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRyYW5zbGF0aW9uU2NhbGUueCkpO1xufVxuXG5mdW5jdGlvbiBnZXRPdXRwdXRTY2FsZVRyYW5zbGF0aW9uWShcbiAgdHJhbnNsYXRpb25TY2FsZTogQ3ViaXNtVmVjdG9yMixcbiAgYW5nbGVTY2FsZTogbnVtYmVyXG4pOiBudW1iZXIge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0cmFuc2xhdGlvblNjYWxlLnkpKTtcbn1cblxuZnVuY3Rpb24gZ2V0T3V0cHV0U2NhbGVBbmdsZShcbiAgdHJhbnNsYXRpb25TY2FsZTogQ3ViaXNtVmVjdG9yMixcbiAgYW5nbGVTY2FsZTogbnVtYmVyXG4pOiBudW1iZXIge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhbmdsZVNjYWxlKSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyBwYXJ0aWNsZXMuXG4gKlxuICogQHBhcmFtIHN0cmFuZCAgICAgICAgICAgICAgICBUYXJnZXQgYXJyYXkgb2YgcGFydGljbGUuXG4gKiBAcGFyYW0gc3RyYW5kQ291bnQgICAgICAgICAgIENvdW50IG9mIHBhcnRpY2xlLlxuICogQHBhcmFtIHRvdGFsVHJhbnNsYXRpb24gICAgICBUb3RhbCB0cmFuc2xhdGlvbiB2YWx1ZS5cbiAqIEBwYXJhbSB0b3RhbEFuZ2xlICAgICAgICAgICAgVG90YWwgYW5nbGUuXG4gKiBAcGFyYW0gd2luZERpcmVjdGlvbiAgICAgICAgIERpcmVjdGlvbiBvZiBXaW5kLlxuICogQHBhcmFtIHRocmVzaG9sZFZhbHVlICAgICAgICBUaHJlc2hvbGQgb2YgbW92ZW1lbnQuXG4gKiBAcGFyYW0gZGVsdGFUaW1lU2Vjb25kcyAgICAgIERlbHRhIHRpbWUuXG4gKiBAcGFyYW0gYWlyUmVzaXN0YW5jZSAgICAgICAgIEFpciByZXNpc3RhbmNlLlxuICovXG5mdW5jdGlvbiB1cGRhdGVQYXJ0aWNsZXMoXG4gIHN0cmFuZDogQ3ViaXNtUGh5c2ljc1BhcnRpY2xlW10sXG4gIHN0cmFuZENvdW50OiBudW1iZXIsXG4gIHRvdGFsVHJhbnNsYXRpb246IEN1YmlzbVZlY3RvcjIsXG4gIHRvdGFsQW5nbGU6IG51bWJlcixcbiAgd2luZERpcmVjdGlvbjogQ3ViaXNtVmVjdG9yMixcbiAgdGhyZXNob2xkVmFsdWU6IG51bWJlcixcbiAgZGVsdGFUaW1lU2Vjb25kczogbnVtYmVyLFxuICBhaXJSZXNpc3RhbmNlOiBudW1iZXJcbikge1xuICBsZXQgdG90YWxSYWRpYW46IG51bWJlcjtcbiAgbGV0IGRlbGF5OiBudW1iZXI7XG4gIGxldCByYWRpYW46IG51bWJlcjtcbiAgbGV0IGN1cnJlbnRHcmF2aXR5OiBDdWJpc21WZWN0b3IyO1xuICBsZXQgZGlyZWN0aW9uOiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoMC4wLCAwLjApO1xuICBsZXQgdmVsb2NpdHk6IEN1YmlzbVZlY3RvcjIgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLjAsIDAuMCk7XG4gIGxldCBmb3JjZTogQ3ViaXNtVmVjdG9yMiA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgMC4wKTtcbiAgbGV0IG5ld0RpcmVjdGlvbjogQ3ViaXNtVmVjdG9yMiA9IG5ldyBDdWJpc21WZWN0b3IyKDAuMCwgMC4wKTtcblxuICBzdHJhbmRbMF0ucG9zaXRpb24gPSBuZXcgQ3ViaXNtVmVjdG9yMihcbiAgICB0b3RhbFRyYW5zbGF0aW9uLngsXG4gICAgdG90YWxUcmFuc2xhdGlvbi55XG4gICk7XG5cbiAgdG90YWxSYWRpYW4gPSBDdWJpc21NYXRoLmRlZ3JlZXNUb1JhZGlhbih0b3RhbEFuZ2xlKTtcbiAgY3VycmVudEdyYXZpdHkgPSBDdWJpc21NYXRoLnJhZGlhblRvRGlyZWN0aW9uKHRvdGFsUmFkaWFuKTtcbiAgY3VycmVudEdyYXZpdHkubm9ybWFsaXplKCk7XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBzdHJhbmRDb3VudDsgKytpKSB7XG4gICAgc3RyYW5kW2ldLmZvcmNlID0gY3VycmVudEdyYXZpdHlcbiAgICAgIC5tdWx0aXBseUJ5U2NhbGVyKHN0cmFuZFtpXS5hY2NlbGVyYXRpb24pXG4gICAgICAuYWRkKHdpbmREaXJlY3Rpb24pO1xuXG4gICAgc3RyYW5kW2ldLmxhc3RQb3NpdGlvbiA9IG5ldyBDdWJpc21WZWN0b3IyKFxuICAgICAgc3RyYW5kW2ldLnBvc2l0aW9uLngsXG4gICAgICBzdHJhbmRbaV0ucG9zaXRpb24ueVxuICAgICk7XG5cbiAgICBkZWxheSA9IHN0cmFuZFtpXS5kZWxheSAqIGRlbHRhVGltZVNlY29uZHMgKiAzMC4wO1xuXG4gICAgZGlyZWN0aW9uID0gc3RyYW5kW2ldLnBvc2l0aW9uLnN1YnN0cmFjdChzdHJhbmRbaSAtIDFdLnBvc2l0aW9uKTtcblxuICAgIHJhZGlhbiA9XG4gICAgICBDdWJpc21NYXRoLmRpcmVjdGlvblRvUmFkaWFuKHN0cmFuZFtpXS5sYXN0R3Jhdml0eSwgY3VycmVudEdyYXZpdHkpIC9cbiAgICAgIGFpclJlc2lzdGFuY2U7XG5cbiAgICBkaXJlY3Rpb24ueCA9XG4gICAgICBDdWJpc21NYXRoLmNvcyhyYWRpYW4pICogZGlyZWN0aW9uLnggLVxuICAgICAgZGlyZWN0aW9uLnkgKiBDdWJpc21NYXRoLnNpbihyYWRpYW4pO1xuICAgIGRpcmVjdGlvbi55ID1cbiAgICAgIEN1YmlzbU1hdGguc2luKHJhZGlhbikgKiBkaXJlY3Rpb24ueCArXG4gICAgICBkaXJlY3Rpb24ueSAqIEN1YmlzbU1hdGguY29zKHJhZGlhbik7XG5cbiAgICBzdHJhbmRbaV0ucG9zaXRpb24gPSBzdHJhbmRbaSAtIDFdLnBvc2l0aW9uLmFkZChkaXJlY3Rpb24pO1xuXG4gICAgdmVsb2NpdHkgPSBzdHJhbmRbaV0udmVsb2NpdHkubXVsdGlwbHlCeVNjYWxlcihkZWxheSk7XG4gICAgZm9yY2UgPSBzdHJhbmRbaV0uZm9yY2UubXVsdGlwbHlCeVNjYWxlcihkZWxheSkubXVsdGlwbHlCeVNjYWxlcihkZWxheSk7XG5cbiAgICBzdHJhbmRbaV0ucG9zaXRpb24gPSBzdHJhbmRbaV0ucG9zaXRpb24uYWRkKHZlbG9jaXR5KS5hZGQoZm9yY2UpO1xuXG4gICAgbmV3RGlyZWN0aW9uID0gc3RyYW5kW2ldLnBvc2l0aW9uLnN1YnN0cmFjdChzdHJhbmRbaSAtIDFdLnBvc2l0aW9uKTtcbiAgICBuZXdEaXJlY3Rpb24ubm9ybWFsaXplKCk7XG5cbiAgICBzdHJhbmRbaV0ucG9zaXRpb24gPSBzdHJhbmRbaSAtIDFdLnBvc2l0aW9uLmFkZChcbiAgICAgIG5ld0RpcmVjdGlvbi5tdWx0aXBseUJ5U2NhbGVyKHN0cmFuZFtpXS5yYWRpdXMpXG4gICAgKTtcblxuICAgIGlmIChDdWJpc21NYXRoLmFicyhzdHJhbmRbaV0ucG9zaXRpb24ueCkgPCB0aHJlc2hvbGRWYWx1ZSkge1xuICAgICAgc3RyYW5kW2ldLnBvc2l0aW9uLnggPSAwLjA7XG4gICAgfVxuXG4gICAgaWYgKGRlbGF5ICE9IDAuMCkge1xuICAgICAgc3RyYW5kW2ldLnZlbG9jaXR5ID0gc3RyYW5kW2ldLnBvc2l0aW9uLnN1YnN0cmFjdChzdHJhbmRbaV0ubGFzdFBvc2l0aW9uKTtcbiAgICAgIHN0cmFuZFtpXS52ZWxvY2l0eSA9IHN0cmFuZFtpXS52ZWxvY2l0eS5kaXZpc2lvbkJ5U2NhbGFyKGRlbGF5KTtcbiAgICAgIHN0cmFuZFtpXS52ZWxvY2l0eSA9IHN0cmFuZFtpXS52ZWxvY2l0eS5tdWx0aXBseUJ5U2NhbGVyKFxuICAgICAgICBzdHJhbmRbaV0ubW9iaWxpdHlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3RyYW5kW2ldLmZvcmNlID0gbmV3IEN1YmlzbVZlY3RvcjIoMC4wLCAwLjApO1xuICAgIHN0cmFuZFtpXS5sYXN0R3Jhdml0eSA9IG5ldyBDdWJpc21WZWN0b3IyKFxuICAgICAgY3VycmVudEdyYXZpdHkueCxcbiAgICAgIGN1cnJlbnRHcmF2aXR5LnlcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlcyBvdXRwdXQgcGFyYW1ldGVyIHZhbHVlLlxuICogQHBhcmFtIHBhcmFtZXRlclZhbHVlICAgICAgICAgICAgVGFyZ2V0IHBhcmFtZXRlciB2YWx1ZS5cbiAqIEBwYXJhbSBwYXJhbWV0ZXJWYWx1ZU1pbmltdW0gICAgIE1pbmltdW0gb2YgcGFyYW1ldGVyIHZhbHVlLlxuICogQHBhcmFtIHBhcmFtZXRlclZhbHVlTWF4aW11bSAgICAgTWF4aW11bSBvZiBwYXJhbWV0ZXIgdmFsdWUuXG4gKiBAcGFyYW0gdHJhbnNsYXRpb24gICAgICAgICAgICAgICBUcmFuc2xhdGlvbiB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlT3V0cHV0UGFyYW1ldGVyVmFsdWUoXG4gIHBhcmFtZXRlclZhbHVlOiBGbG9hdDMyQXJyYXksXG4gIHBhcmFtZXRlclZhbHVlTWluaW11bTogbnVtYmVyLFxuICBwYXJhbWV0ZXJWYWx1ZU1heGltdW06IG51bWJlcixcbiAgdHJhbnNsYXRpb246IG51bWJlcixcbiAgb3V0cHV0OiBDdWJpc21QaHlzaWNzT3V0cHV0XG4pOiB2b2lkIHtcbiAgbGV0IG91dHB1dFNjYWxlOiBudW1iZXI7XG4gIGxldCB2YWx1ZTogbnVtYmVyO1xuICBsZXQgd2VpZ2h0OiBudW1iZXI7XG5cbiAgb3V0cHV0U2NhbGUgPSBvdXRwdXQuZ2V0U2NhbGUob3V0cHV0LnRyYW5zbGF0aW9uU2NhbGUsIG91dHB1dC5hbmdsZVNjYWxlKTtcblxuICB2YWx1ZSA9IHRyYW5zbGF0aW9uICogb3V0cHV0U2NhbGU7XG5cbiAgaWYgKHZhbHVlIDwgcGFyYW1ldGVyVmFsdWVNaW5pbXVtKSB7XG4gICAgaWYgKHZhbHVlIDwgb3V0cHV0LnZhbHVlQmVsb3dNaW5pbXVtKSB7XG4gICAgICBvdXRwdXQudmFsdWVCZWxvd01pbmltdW0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICB2YWx1ZSA9IHBhcmFtZXRlclZhbHVlTWluaW11bTtcbiAgfSBlbHNlIGlmICh2YWx1ZSA+IHBhcmFtZXRlclZhbHVlTWF4aW11bSkge1xuICAgIGlmICh2YWx1ZSA+IG91dHB1dC52YWx1ZUV4Y2VlZGVkTWF4aW11bSkge1xuICAgICAgb3V0cHV0LnZhbHVlRXhjZWVkZWRNYXhpbXVtID0gdmFsdWU7XG4gICAgfVxuXG4gICAgdmFsdWUgPSBwYXJhbWV0ZXJWYWx1ZU1heGltdW07XG4gIH1cblxuICB3ZWlnaHQgPSBvdXRwdXQud2VpZ2h0IC8gTWF4aW11bVdlaWdodDtcblxuICBpZiAod2VpZ2h0ID49IDEuMCkge1xuICAgIHBhcmFtZXRlclZhbHVlWzBdID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBwYXJhbWV0ZXJWYWx1ZVswXSAqICgxLjAgLSB3ZWlnaHQpICsgdmFsdWUgKiB3ZWlnaHQ7XG4gICAgcGFyYW1ldGVyVmFsdWVbMF0gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVQYXJhbWV0ZXJWYWx1ZShcbiAgdmFsdWU6IG51bWJlcixcbiAgcGFyYW1ldGVyTWluaW11bTogbnVtYmVyLFxuICBwYXJhbWV0ZXJNYXhpbXVtOiBudW1iZXIsXG4gIHBhcmFtZXRlckRlZmF1bHQ6IG51bWJlcixcbiAgbm9ybWFsaXplZE1pbmltdW06IG51bWJlcixcbiAgbm9ybWFsaXplZE1heGltdW06IG51bWJlcixcbiAgbm9ybWFsaXplZERlZmF1bHQ6IG51bWJlcixcbiAgaXNJbnZlcnRlZDogYm9vbGVhblxuKSB7XG4gIGxldCByZXN1bHQgPSAwLjA7XG5cbiAgY29uc3QgbWF4VmFsdWU6IG51bWJlciA9IEN1YmlzbU1hdGgubWF4KHBhcmFtZXRlck1heGltdW0sIHBhcmFtZXRlck1pbmltdW0pO1xuXG4gIGlmIChtYXhWYWx1ZSA8IHZhbHVlKSB7XG4gICAgdmFsdWUgPSBtYXhWYWx1ZTtcbiAgfVxuXG4gIGNvbnN0IG1pblZhbHVlOiBudW1iZXIgPSBDdWJpc21NYXRoLm1pbihwYXJhbWV0ZXJNYXhpbXVtLCBwYXJhbWV0ZXJNaW5pbXVtKTtcblxuICBpZiAobWluVmFsdWUgPiB2YWx1ZSkge1xuICAgIHZhbHVlID0gbWluVmFsdWU7XG4gIH1cblxuICBjb25zdCBtaW5Ob3JtVmFsdWU6IG51bWJlciA9IEN1YmlzbU1hdGgubWluKFxuICAgIG5vcm1hbGl6ZWRNaW5pbXVtLFxuICAgIG5vcm1hbGl6ZWRNYXhpbXVtXG4gICk7XG4gIGNvbnN0IG1heE5vcm1WYWx1ZTogbnVtYmVyID0gQ3ViaXNtTWF0aC5tYXgoXG4gICAgbm9ybWFsaXplZE1pbmltdW0sXG4gICAgbm9ybWFsaXplZE1heGltdW1cbiAgKTtcbiAgY29uc3QgbWlkZGxlTm9ybVZhbHVlOiBudW1iZXIgPSBub3JtYWxpemVkRGVmYXVsdDtcblxuICBjb25zdCBtaWRkbGVWYWx1ZTogbnVtYmVyID0gZ2V0RGVmYXVsdFZhbHVlKG1pblZhbHVlLCBtYXhWYWx1ZSk7XG4gIGNvbnN0IHBhcmFtVmFsdWU6IG51bWJlciA9IHZhbHVlIC0gbWlkZGxlVmFsdWU7XG5cbiAgc3dpdGNoIChzaWduKHBhcmFtVmFsdWUpKSB7XG4gICAgY2FzZSAxOiB7XG4gICAgICBjb25zdCBuTGVuZ3RoOiBudW1iZXIgPSBtYXhOb3JtVmFsdWUgLSBtaWRkbGVOb3JtVmFsdWU7XG4gICAgICBjb25zdCBwTGVuZ3RoOiBudW1iZXIgPSBtYXhWYWx1ZSAtIG1pZGRsZVZhbHVlO1xuXG4gICAgICBpZiAocExlbmd0aCAhPSAwLjApIHtcbiAgICAgICAgcmVzdWx0ID0gcGFyYW1WYWx1ZSAqIChuTGVuZ3RoIC8gcExlbmd0aCk7XG4gICAgICAgIHJlc3VsdCArPSBtaWRkbGVOb3JtVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIC0xOiB7XG4gICAgICBjb25zdCBuTGVuZ3RoOiBudW1iZXIgPSBtaW5Ob3JtVmFsdWUgLSBtaWRkbGVOb3JtVmFsdWU7XG4gICAgICBjb25zdCBwTGVuZ3RoOiBudW1iZXIgPSBtaW5WYWx1ZSAtIG1pZGRsZVZhbHVlO1xuXG4gICAgICBpZiAocExlbmd0aCAhPSAwLjApIHtcbiAgICAgICAgcmVzdWx0ID0gcGFyYW1WYWx1ZSAqIChuTGVuZ3RoIC8gcExlbmd0aCk7XG4gICAgICAgIHJlc3VsdCArPSBtaWRkbGVOb3JtVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIDA6IHtcbiAgICAgIHJlc3VsdCA9IG1pZGRsZU5vcm1WYWx1ZTtcblxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpc0ludmVydGVkID8gcmVzdWx0IDogcmVzdWx0ICogLTEuMDtcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtcGh5c2ljcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgQ3ViaXNtUGh5c2ljcyA9ICQuQ3ViaXNtUGh5c2ljcztcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUGh5c2ljcyA9ICQuQ3ViaXNtUGh5c2ljcztcbiAgZXhwb3J0IGNvbnN0IE9wdGlvbnMgPSAkLk9wdGlvbnM7XG4gIGV4cG9ydCB0eXBlIE9wdGlvbnMgPSAkLk9wdGlvbnM7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQUNBO0FBRUE7QUFVQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUtBO0FBc01BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4TUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQVlBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVlBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUVBO0FBRUE7QUFLQTtBQUVBO0FBU0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUtBO0FBS0E7QUFNQTtBQUlBO0FBQ0E7QUFLQTtBQUtBO0FBTUE7QUFHQTtBQUdBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQXJkQTtBQTBkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQVJBO0FBaUJBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFZQTtBQUNBO0FBVUE7QUFFQTtBQVlBO0FBQ0E7QUFVQTtBQUVBO0FBWUE7QUFDQTtBQVVBO0FBRUE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFjQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFTQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/physics/cubismphysics.ts\n");

/***/ }),

/***/ "./Framework/src/physics/cubismphysicsinternal.ts":
/*!********************************************************!*\
  !*** ./Framework/src/physics/cubismphysicsinternal.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismPhysicsRig = exports.CubismPhysicsOutput = exports.CubismPhysicsInput = exports.CubismPhysicsSubRig = exports.CubismPhysicsParticle = exports.CubismPhysicsNormalization = exports.CubismPhysicsParameter = exports.PhysicsJsonEffectiveForces = exports.CubismPhysicsSource = exports.CubismPhysicsTargetType = void 0;\nvar cubismvector2_1 = __webpack_require__(/*! ../math/cubismvector2 */ \"./Framework/src/math/cubismvector2.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar CubismPhysicsTargetType;\n(function (CubismPhysicsTargetType) {\n    CubismPhysicsTargetType[CubismPhysicsTargetType[\"CubismPhysicsTargetType_Parameter\"] = 0] = \"CubismPhysicsTargetType_Parameter\";\n})(CubismPhysicsTargetType = exports.CubismPhysicsTargetType || (exports.CubismPhysicsTargetType = {}));\nvar CubismPhysicsSource;\n(function (CubismPhysicsSource) {\n    CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_X\"] = 0] = \"CubismPhysicsSource_X\";\n    CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_Y\"] = 1] = \"CubismPhysicsSource_Y\";\n    CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_Angle\"] = 2] = \"CubismPhysicsSource_Angle\";\n})(CubismPhysicsSource = exports.CubismPhysicsSource || (exports.CubismPhysicsSource = {}));\nvar PhysicsJsonEffectiveForces = (function () {\n    function PhysicsJsonEffectiveForces() {\n        this.gravity = new cubismvector2_1.CubismVector2(0, 0);\n        this.wind = new cubismvector2_1.CubismVector2(0, 0);\n    }\n    return PhysicsJsonEffectiveForces;\n}());\nexports.PhysicsJsonEffectiveForces = PhysicsJsonEffectiveForces;\nvar CubismPhysicsParameter = (function () {\n    function CubismPhysicsParameter() {\n    }\n    return CubismPhysicsParameter;\n}());\nexports.CubismPhysicsParameter = CubismPhysicsParameter;\nvar CubismPhysicsNormalization = (function () {\n    function CubismPhysicsNormalization() {\n    }\n    return CubismPhysicsNormalization;\n}());\nexports.CubismPhysicsNormalization = CubismPhysicsNormalization;\nvar CubismPhysicsParticle = (function () {\n    function CubismPhysicsParticle() {\n        this.initialPosition = new cubismvector2_1.CubismVector2(0, 0);\n        this.position = new cubismvector2_1.CubismVector2(0, 0);\n        this.lastPosition = new cubismvector2_1.CubismVector2(0, 0);\n        this.lastGravity = new cubismvector2_1.CubismVector2(0, 0);\n        this.force = new cubismvector2_1.CubismVector2(0, 0);\n        this.velocity = new cubismvector2_1.CubismVector2(0, 0);\n    }\n    return CubismPhysicsParticle;\n}());\nexports.CubismPhysicsParticle = CubismPhysicsParticle;\nvar CubismPhysicsSubRig = (function () {\n    function CubismPhysicsSubRig() {\n        this.normalizationPosition = new CubismPhysicsNormalization();\n        this.normalizationAngle = new CubismPhysicsNormalization();\n    }\n    return CubismPhysicsSubRig;\n}());\nexports.CubismPhysicsSubRig = CubismPhysicsSubRig;\nvar CubismPhysicsInput = (function () {\n    function CubismPhysicsInput() {\n        this.source = new CubismPhysicsParameter();\n    }\n    return CubismPhysicsInput;\n}());\nexports.CubismPhysicsInput = CubismPhysicsInput;\nvar CubismPhysicsOutput = (function () {\n    function CubismPhysicsOutput() {\n        this.destination = new CubismPhysicsParameter();\n        this.translationScale = new cubismvector2_1.CubismVector2(0, 0);\n    }\n    return CubismPhysicsOutput;\n}());\nexports.CubismPhysicsOutput = CubismPhysicsOutput;\nvar CubismPhysicsRig = (function () {\n    function CubismPhysicsRig() {\n        this.settings = new csmvector_1.csmVector();\n        this.inputs = new csmvector_1.csmVector();\n        this.outputs = new csmvector_1.csmVector();\n        this.particles = new csmvector_1.csmVector();\n        this.gravity = new cubismvector2_1.CubismVector2(0, 0);\n        this.wind = new cubismvector2_1.CubismVector2(0, 0);\n    }\n    return CubismPhysicsRig;\n}());\nexports.CubismPhysicsRig = CubismPhysicsRig;\nvar $ = __importStar(__webpack_require__(/*! ./cubismphysicsinternal */ \"./Framework/src/physics/cubismphysicsinternal.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPhysicsInput = $.CubismPhysicsInput;\n    Live2DCubismFramework.CubismPhysicsNormalization = $.CubismPhysicsNormalization;\n    Live2DCubismFramework.CubismPhysicsOutput = $.CubismPhysicsOutput;\n    Live2DCubismFramework.CubismPhysicsParameter = $.CubismPhysicsParameter;\n    Live2DCubismFramework.CubismPhysicsParticle = $.CubismPhysicsParticle;\n    Live2DCubismFramework.CubismPhysicsRig = $.CubismPhysicsRig;\n    Live2DCubismFramework.CubismPhysicsSource = $.CubismPhysicsSource;\n    Live2DCubismFramework.CubismPhysicsSubRig = $.CubismPhysicsSubRig;\n    Live2DCubismFramework.CubismPhysicsTargetType = $.CubismPhysicsTargetType;\n    Live2DCubismFramework.PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3BoeXNpY3MvY3ViaXNtcGh5c2ljc2ludGVybmFsLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy9waHlzaWNzL2N1YmlzbXBoeXNpY3NpbnRlcm5hbC50cz84ZjM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUlkSGFuZGxlIH0gZnJvbSAnLi4vaWQvY3ViaXNtaWQnO1xuaW1wb3J0IHsgQ3ViaXNtVmVjdG9yMiB9IGZyb20gJy4uL21hdGgvY3ViaXNtdmVjdG9yMic7XG5pbXBvcnQgeyBjc21WZWN0b3IgfSBmcm9tICcuLi90eXBlL2NzbXZlY3Rvcic7XG5cbi8qKlxuICog54mp55CG5ryU566X44Gu6YGp55So5YWI44Gu56iu6aGeXG4gKi9cbmV4cG9ydCBlbnVtIEN1YmlzbVBoeXNpY3NUYXJnZXRUeXBlIHtcbiAgQ3ViaXNtUGh5c2ljc1RhcmdldFR5cGVfUGFyYW1ldGVyIC8vIOODkeODqeODoeODvOOCv+OBq+WvvuOBl+OBpumBqeeUqFxufVxuXG4vKipcbiAqIOeJqeeQhua8lOeul+OBruWFpeWKm+OBrueorumhnlxuICovXG5leHBvcnQgZW51bSBDdWJpc21QaHlzaWNzU291cmNlIHtcbiAgQ3ViaXNtUGh5c2ljc1NvdXJjZV9YLCAvLyBY6Lu444Gu5L2N572u44GL44KJXG4gIEN1YmlzbVBoeXNpY3NTb3VyY2VfWSwgLy8gWei7uOOBruS9jee9ruOBi+OCiVxuICBDdWJpc21QaHlzaWNzU291cmNlX0FuZ2xlIC8vIOinkuW6puOBi+OCiVxufVxuXG4vKipcbiAqIEBicmllZiDniannkIbmvJTnrpfjgafkvb/nlKjjgZnjgovlpJbpg6jjga7liptcbiAqXG4gKiDniannkIbmvJTnrpfjgafkvb/nlKjjgZnjgovlpJbpg6jjga7lipvjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIFBoeXNpY3NKc29uRWZmZWN0aXZlRm9yY2VzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ncmF2aXR5ID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gICAgdGhpcy53aW5kID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gIH1cbiAgZ3Jhdml0eTogQ3ViaXNtVmVjdG9yMjsgLy8g6YeN5YqbXG4gIHdpbmQ6IEN1YmlzbVZlY3RvcjI7IC8vIOmiqFxufVxuXG4vKipcbiAqIOeJqeeQhua8lOeul+OBruODkeODqeODoeODvOOCv+aDheWgsVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtUGh5c2ljc1BhcmFtZXRlciB7XG4gIGlkOiBDdWJpc21JZEhhbmRsZTsgLy8g44OR44Op44Oh44O844K/XG4gIHRhcmdldFR5cGU6IEN1YmlzbVBoeXNpY3NUYXJnZXRUeXBlOyAvLyDpgannlKjlhYjjga7nqK7poZ5cbn1cblxuLyoqXG4gKiDniannkIbmvJTnrpfjga7mraPopo/ljJbmg4XloLFcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVBoeXNpY3NOb3JtYWxpemF0aW9uIHtcbiAgbWluaW11bTogbnVtYmVyOyAvLyDmnIDlpKflgKRcbiAgbWF4aW11bTogbnVtYmVyOyAvLyDmnIDlsI/lgKRcbiAgZGVmYWx1dDogbnVtYmVyOyAvLyDjg4fjg5Xjgqnjg6vjg4jlgKRcbn1cblxuLyoqXG4gKiDniannkIbmvJTnrpfjga7mvJTnrpflp5Tkvb/nlKjjgZnjgovniannkIbngrnjga7mg4XloLFcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVBoeXNpY3NQYXJ0aWNsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbFBvc2l0aW9uID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBDdWJpc21WZWN0b3IyKDAsIDApO1xuICAgIHRoaXMubGFzdFBvc2l0aW9uID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gICAgdGhpcy5sYXN0R3Jhdml0eSA9IG5ldyBDdWJpc21WZWN0b3IyKDAsIDApO1xuICAgIHRoaXMuZm9yY2UgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLCAwKTtcbiAgICB0aGlzLnZlbG9jaXR5ID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gIH1cblxuICBpbml0aWFsUG9zaXRpb246IEN1YmlzbVZlY3RvcjI7IC8vIOWIneacn+S9jee9rlxuICBtb2JpbGl0eTogbnVtYmVyOyAvLyDli5XjgY3jgoTjgZnjgZVcbiAgZGVsYXk6IG51bWJlcjsgLy8g6YGF44KMXG4gIGFjY2VsZXJhdGlvbjogbnVtYmVyOyAvLyDliqDpgJ/luqZcbiAgcmFkaXVzOiBudW1iZXI7IC8vIOi3nembolxuICBwb3NpdGlvbjogQ3ViaXNtVmVjdG9yMjsgLy8g54++5Zyo44Gu5L2N572uXG4gIGxhc3RQb3NpdGlvbjogQ3ViaXNtVmVjdG9yMjsgLy8g5pyA5b6M44Gu5L2N572uXG4gIGxhc3RHcmF2aXR5OiBDdWJpc21WZWN0b3IyOyAvLyDmnIDlvozjga7ph43liptcbiAgZm9yY2U6IEN1YmlzbVZlY3RvcjI7IC8vIOePvuWcqOOBi+OBi+OBo+OBpuOBhOOCi+WKm1xuICB2ZWxvY2l0eTogQ3ViaXNtVmVjdG9yMjsgLy8g54++5Zyo44Gu6YCf5bqmXG59XG5cbi8qKlxuICog54mp55CG5ryU566X44Gu54mp55CG54K544Gu566h55CGXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21QaHlzaWNzU3ViUmlnIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ub3JtYWxpemF0aW9uUG9zaXRpb24gPSBuZXcgQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24oKTtcbiAgICB0aGlzLm5vcm1hbGl6YXRpb25BbmdsZSA9IG5ldyBDdWJpc21QaHlzaWNzTm9ybWFsaXphdGlvbigpO1xuICB9XG4gIGlucHV0Q291bnQ6IG51bWJlcjsgLy8g5YWl5Yqb44Gu5YCL5pWwXG4gIG91dHB1dENvdW50OiBudW1iZXI7IC8vIOWHuuWKm+OBruWAi+aVsFxuICBwYXJ0aWNsZUNvdW50OiBudW1iZXI7IC8vIOeJqeeQhueCueOBruWAi+aVsFxuICBiYXNlSW5wdXRJbmRleDogbnVtYmVyOyAvLyDlhaXlipvjga7mnIDliJ3jga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgYmFzZU91dHB1dEluZGV4OiBudW1iZXI7IC8vIOWHuuWKm+OBruacgOWIneOBruOCpOODs+ODh+ODg+OCr+OCuVxuICBiYXNlUGFydGljbGVJbmRleDogbnVtYmVyOyAvLyDniannkIbngrnjga7mnIDliJ3jga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgbm9ybWFsaXphdGlvblBvc2l0aW9uOiBDdWJpc21QaHlzaWNzTm9ybWFsaXphdGlvbjsgLy8g5q2j6KaP5YyW44GV44KM44Gf5L2N572uXG4gIG5vcm1hbGl6YXRpb25BbmdsZTogQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb247IC8vIOato+imj+WMluOBleOCjOOBn+inkuW6plxufVxuXG4vKipcbiAqIOato+imj+WMluOBleOCjOOBn+ODkeODqeODoeODvOOCv+OBruWPluW+l+mWouaVsOOBruWuo+iogFxuICogQHBhcmFtIHRhcmdldFRyYW5zbGF0aW9uICAgICAvLyDmvJTnrpfntZDmnpzjga7np7vli5XlgKRcbiAqIEBwYXJhbSB0YXJnZXRBbmdsZSAgICAgICAgICAgLy8g5ryU566X57WQ5p6c44Gu6KeS5bqmXG4gKiBAcGFyYW0gdmFsdWUgICAgICAgICAgICAgICAgIC8vIOODkeODqeODoeODvOOCv+OBruWApFxuICogQHBhcmFtIHBhcmFtZXRlck1pbmltdW5WYWx1ZSAvLyDjg5Hjg6njg6Hjg7zjgr/jga7mnIDlsI/lgKRcbiAqIEBwYXJhbSBwYXJhbWV0ZXJNYXhpbXVtVmFsdWUgLy8g44OR44Op44Oh44O844K/44Gu5pyA5aSn5YCkXG4gKiBAcGFyYW0gcGFyYW1ldGVyRGVmYXVsdFZhbHVlIC8vIOODkeODqeODoeODvOOCv+OBruODh+ODleOCqeODq+ODiOWApFxuICogQHBhcmFtIG5vcm1hbGl6YXRpb25Qb3NpdGlvbiAvLyDmraPopo/ljJbjgZXjgozjgZ/kvY3nva5cbiAqIEBwYXJhbSBub3JtYWxpemF0aW9uQW5nbGUgICAgLy8g5q2j6KaP5YyW44GV44KM44Gf6KeS5bqmXG4gKiBAcGFyYW0gaXNJbnZlcnRlZCAgICAgICAgICAgIC8vIOWApOOBjOWPjei7ouOBleOCjOOBpuOBhOOCi+OBi++8n1xuICogQHBhcmFtIHdlaWdodCAgICAgICAgICAgICAgICAvLyDph43jgb9cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBub3JtYWxpemVkUGh5c2ljc1BhcmFtZXRlclZhbHVlR2V0dGVyIHtcbiAgKFxuICAgIHRhcmdldFRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyLFxuICAgIHRhcmdldEFuZ2xlOiB7IGFuZ2xlOiBudW1iZXIgfSxcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIHBhcmFtZXRlck1pbmltdW5WYWx1ZTogbnVtYmVyLFxuICAgIHBhcmFtZXRlck1heGltdW1WYWx1ZTogbnVtYmVyLFxuICAgIHBhcmFtZXRlckRlZmF1bHRWYWx1ZTogbnVtYmVyLFxuICAgIG5vcm1hbGl6YXRpb25Qb3NpdGlvbjogQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24sXG4gICAgbm9ybWFsaXphdGlvbkFuZ2xlOiBDdWJpc21QaHlzaWNzTm9ybWFsaXphdGlvbixcbiAgICBpc0ludmVydGVkOiBib29sZWFuLFxuICAgIHdlaWdodDogbnVtYmVyXG4gICk6IHZvaWQ7XG59XG5cbi8qKlxuICog54mp55CG5ryU566X44Gu5YCk44Gu5Y+W5b6X6Zai5pWw44Gu5a6j6KiAXG4gKiBAcGFyYW0gdHJhbnNsYXRpb24g56e75YuV5YCkXG4gKiBAcGFyYW0gcGFydGljbGVzIOeJqeeQhueCueOBruODquOCueODiFxuICogQHBhcmFtIGlzSW52ZXJ0ZWQg5YCk44GM5Y+N5pig44GV44KM44Gm44GE44KL44GLXG4gKiBAcGFyYW0gcGFyZW50R3Jhdml0eSDph43liptcbiAqIEByZXR1cm4g5YCkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgcGh5c2ljc1ZhbHVlR2V0dGVyIHtcbiAgKFxuICAgIHRyYW5zbGF0aW9uOiBDdWJpc21WZWN0b3IyLFxuICAgIHBhcnRpY2xlczogQ3ViaXNtUGh5c2ljc1BhcnRpY2xlW10sXG4gICAgcGFydGljbGVJbmRleDogbnVtYmVyLFxuICAgIGlzSW52ZXJ0ZWQ6IGJvb2xlYW4sXG4gICAgcGFyZW50R3Jhdml0eTogQ3ViaXNtVmVjdG9yMlxuICApOiBudW1iZXI7XG59XG5cbi8qKlxuICog54mp55CG5ryU566X44Gu44K544Kx44O844Or44Gu5Y+W5b6X6Zai5pWw44Gu5a6j6KiAXG4gKiBAcGFyYW0gdHJhbnNsYXRpb25TY2FsZSDnp7vli5XlgKTjga7jgrnjgrHjg7zjg6tcbiAqIEBwYXJhbSBhbmdsZVNjYWxlICAgIOinkuW6puOBruOCueOCseODvOODq1xuICogQHJldHVybiDjgrnjgrHjg7zjg6vlgKRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBwaHlzaWNzU2NhbGVHZXR0ZXIge1xuICAodHJhbnNsYXRpb25TY2FsZTogQ3ViaXNtVmVjdG9yMiwgYW5nbGVTY2FsZTogbnVtYmVyKTogbnVtYmVyO1xufVxuXG4vKipcbiAqIOeJqeeQhua8lOeul+OBruWFpeWKm+aDheWgsVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtUGh5c2ljc0lucHV0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zb3VyY2UgPSBuZXcgQ3ViaXNtUGh5c2ljc1BhcmFtZXRlcigpO1xuICB9XG4gIHNvdXJjZTogQ3ViaXNtUGh5c2ljc1BhcmFtZXRlcjsgLy8g5YWl5Yqb5YWD44Gu44OR44Op44Oh44O844K/XG4gIHNvdXJjZVBhcmFtZXRlckluZGV4OiBudW1iZXI7IC8vIOWFpeWKm+WFg+OBruODkeODqeODoeODvOOCv+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICB3ZWlnaHQ6IG51bWJlcjsgLy8g6YeN44G/XG4gIHR5cGU6IG51bWJlcjsgLy8g5YWl5Yqb44Gu56iu6aGeXG4gIHJlZmxlY3Q6IGJvb2xlYW47IC8vIOWApOOBjOWPjei7ouOBleOCjOOBpuOBhOOCi+OBi+OBqeOBhuOBi1xuICBnZXROb3JtYWxpemVkUGFyYW1ldGVyVmFsdWU6IG5vcm1hbGl6ZWRQaHlzaWNzUGFyYW1ldGVyVmFsdWVHZXR0ZXI7IC8vIOato+imj+WMluOBleOCjOOBn+ODkeODqeODoeODvOOCv+WApOOBruWPluW+l+mWouaVsFxufVxuXG4vKipcbiAqIEBicmllZiDniannkIbmvJTnrpfjga7lh7rlipvmg4XloLFcbiAqXG4gKiDniannkIbmvJTnrpfjga7lh7rlipvmg4XloLHjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVBoeXNpY3NPdXRwdXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IEN1YmlzbVBoeXNpY3NQYXJhbWV0ZXIoKTtcbiAgICB0aGlzLnRyYW5zbGF0aW9uU2NhbGUgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLCAwKTtcbiAgfVxuXG4gIGRlc3RpbmF0aW9uOiBDdWJpc21QaHlzaWNzUGFyYW1ldGVyOyAvLyDlh7rlipvlhYjjga7jg5Hjg6njg6Hjg7zjgr9cbiAgZGVzdGluYXRpb25QYXJhbWV0ZXJJbmRleDogbnVtYmVyOyAvLyDlh7rlipvlhYjjga7jg5Hjg6njg6Hjg7zjgr/jga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgdmVydGV4SW5kZXg6IG51bWJlcjsgLy8g5oyv44KK5a2Q44Gu44Kk44Oz44OH44OD44Kv44K5XG4gIHRyYW5zbGF0aW9uU2NhbGU6IEN1YmlzbVZlY3RvcjI7IC8vIOenu+WLleWApOOBruOCueOCseODvOODq1xuICBhbmdsZVNjYWxlOiBudW1iZXI7IC8vIOinkuW6puOBruOCueOCseODvOODq1xuICB3ZWlnaHQ6IG51bWJlcjsgLy8g6YeN44G/XG4gIHR5cGU6IEN1YmlzbVBoeXNpY3NTb3VyY2U7IC8vIOWHuuWKm+OBrueorumhnlxuICByZWZsZWN0OiBib29sZWFuOyAvLyDlgKTjgYzlj43ou6LjgZXjgozjgabjgYTjgovjgYvjganjgYbjgYtcbiAgdmFsdWVCZWxvd01pbmltdW06IG51bWJlcjsgLy8g5pyA5bCP5YCk44KS5LiL5Zue44Gj44Gf5pmC44Gu5YCkXG4gIHZhbHVlRXhjZWVkZWRNYXhpbXVtOiBudW1iZXI7IC8vIOacgOWkp+WApOOCkuOBk+OBiOOBn+aZguOBruWApFxuICBnZXRWYWx1ZTogcGh5c2ljc1ZhbHVlR2V0dGVyOyAvLyDniannkIbmvJTnrpfjga7lgKTjga7lj5blvpfplqLmlbBcbiAgZ2V0U2NhbGU6IHBoeXNpY3NTY2FsZUdldHRlcjsgLy8g54mp55CG5ryU566X44Gu44K544Kx44O844Or5YCk44Gu5Y+W5b6X6Zai5pWwXG59XG5cbi8qKlxuICogQGJyaWVmIOeJqeeQhua8lOeul+OBruODh+ODvOOCv1xuICpcbiAqIOeJqeeQhua8lOeul+OBruODh+ODvOOCv+OAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtUGh5c2ljc1JpZyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbVBoeXNpY3NTdWJSaWc+KCk7XG4gICAgdGhpcy5pbnB1dHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbVBoeXNpY3NJbnB1dD4oKTtcbiAgICB0aGlzLm91dHB1dHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbVBoeXNpY3NPdXRwdXQ+KCk7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbVBoeXNpY3NQYXJ0aWNsZT4oKTtcbiAgICB0aGlzLmdyYXZpdHkgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLCAwKTtcbiAgICB0aGlzLndpbmQgPSBuZXcgQ3ViaXNtVmVjdG9yMigwLCAwKTtcbiAgfVxuXG4gIHN1YlJpZ0NvdW50OiBudW1iZXI7IC8vIOeJqeeQhua8lOeul+OBrueJqeeQhueCueOBruWAi+aVsFxuICBzZXR0aW5nczogY3NtVmVjdG9yPEN1YmlzbVBoeXNpY3NTdWJSaWc+OyAvLyDniannkIbmvJTnrpfjga7niannkIbngrnjga7nrqHnkIbjga7jg6rjgrnjg4hcbiAgaW5wdXRzOiBjc21WZWN0b3I8Q3ViaXNtUGh5c2ljc0lucHV0PjsgLy8g54mp55CG5ryU566X44Gu5YWl5Yqb44Gu44Oq44K544OIXG4gIG91dHB1dHM6IGNzbVZlY3RvcjxDdWJpc21QaHlzaWNzT3V0cHV0PjsgLy8g54mp55CG5ryU566X44Gu5Ye65Yqb44Gu44Oq44K544OIXG4gIHBhcnRpY2xlczogY3NtVmVjdG9yPEN1YmlzbVBoeXNpY3NQYXJ0aWNsZT47IC8vIOeJqeeQhua8lOeul+OBrueJqeeQhueCueOBruODquOCueODiFxuICBncmF2aXR5OiBDdWJpc21WZWN0b3IyOyAvLyDph43liptcbiAgd2luZDogQ3ViaXNtVmVjdG9yMjsgLy8g6aKoXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbXBoeXNpY3NpbnRlcm5hbCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgQ3ViaXNtUGh5c2ljc0lucHV0ID0gJC5DdWJpc21QaHlzaWNzSW5wdXQ7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVBoeXNpY3NJbnB1dCA9ICQuQ3ViaXNtUGh5c2ljc0lucHV0O1xuICBleHBvcnQgY29uc3QgQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb24gPSAkLkN1YmlzbVBoeXNpY3NOb3JtYWxpemF0aW9uO1xuICBleHBvcnQgdHlwZSBDdWJpc21QaHlzaWNzTm9ybWFsaXphdGlvbiA9ICQuQ3ViaXNtUGh5c2ljc05vcm1hbGl6YXRpb247XG4gIGV4cG9ydCBjb25zdCBDdWJpc21QaHlzaWNzT3V0cHV0ID0gJC5DdWJpc21QaHlzaWNzT3V0cHV0O1xuICBleHBvcnQgdHlwZSBDdWJpc21QaHlzaWNzT3V0cHV0ID0gJC5DdWJpc21QaHlzaWNzT3V0cHV0O1xuICBleHBvcnQgY29uc3QgQ3ViaXNtUGh5c2ljc1BhcmFtZXRlciA9ICQuQ3ViaXNtUGh5c2ljc1BhcmFtZXRlcjtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUGh5c2ljc1BhcmFtZXRlciA9ICQuQ3ViaXNtUGh5c2ljc1BhcmFtZXRlcjtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVBoeXNpY3NQYXJ0aWNsZSA9ICQuQ3ViaXNtUGh5c2ljc1BhcnRpY2xlO1xuICBleHBvcnQgdHlwZSBDdWJpc21QaHlzaWNzUGFydGljbGUgPSAkLkN1YmlzbVBoeXNpY3NQYXJ0aWNsZTtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVBoeXNpY3NSaWcgPSAkLkN1YmlzbVBoeXNpY3NSaWc7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVBoeXNpY3NSaWcgPSAkLkN1YmlzbVBoeXNpY3NSaWc7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21QaHlzaWNzU291cmNlID0gJC5DdWJpc21QaHlzaWNzU291cmNlO1xuICBleHBvcnQgdHlwZSBDdWJpc21QaHlzaWNzU291cmNlID0gJC5DdWJpc21QaHlzaWNzU291cmNlO1xuICBleHBvcnQgY29uc3QgQ3ViaXNtUGh5c2ljc1N1YlJpZyA9ICQuQ3ViaXNtUGh5c2ljc1N1YlJpZztcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUGh5c2ljc1N1YlJpZyA9ICQuQ3ViaXNtUGh5c2ljc1N1YlJpZztcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVBoeXNpY3NUYXJnZXRUeXBlID0gJC5DdWJpc21QaHlzaWNzVGFyZ2V0VHlwZTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUGh5c2ljc1RhcmdldFR5cGUgPSAkLkN1YmlzbVBoeXNpY3NUYXJnZXRUeXBlO1xuICBleHBvcnQgY29uc3QgUGh5c2ljc0pzb25FZmZlY3RpdmVGb3JjZXMgPSAkLlBoeXNpY3NKc29uRWZmZWN0aXZlRm9yY2VzO1xuICBleHBvcnQgdHlwZSBQaHlzaWNzSnNvbkVmZmVjdGl2ZUZvcmNlcyA9ICQuUGh5c2ljc0pzb25FZmZlY3RpdmVGb3JjZXM7XG4gIGV4cG9ydCB0eXBlIG5vcm1hbGl6ZWRQaHlzaWNzUGFyYW1ldGVyVmFsdWVHZXR0ZXIgPSAkLm5vcm1hbGl6ZWRQaHlzaWNzUGFyYW1ldGVyVmFsdWVHZXR0ZXI7XG4gIGV4cG9ydCB0eXBlIHBoeXNpY3NTY2FsZUdldHRlciA9ICQucGh5c2ljc1NjYWxlR2V0dGVyO1xuICBleHBvcnQgdHlwZSBwaHlzaWNzVmFsdWVHZXR0ZXIgPSAkLnBoeXNpY3NWYWx1ZUdldHRlcjtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBUEE7QUFZQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBSEE7QUFRQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBSkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTtBQUFBO0FBcEJBO0FBeUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUFBO0FBYkE7QUEwRUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUFBO0FBVkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQUE7QUFsQkE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFBQTtBQWpCQTtBQW9CQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUtBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/physics/cubismphysicsinternal.ts\n");

/***/ }),

/***/ "./Framework/src/physics/cubismphysicsjson.ts":
/*!****************************************************!*\
  !*** ./Framework/src/physics/cubismphysicsjson.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismPhysicsJson = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismvector2_1 = __webpack_require__(/*! ../math/cubismvector2 */ \"./Framework/src/math/cubismvector2.ts\");\nvar cubismjson_1 = __webpack_require__(/*! ../utils/cubismjson */ \"./Framework/src/utils/cubismjson.ts\");\nvar Position = 'Position';\nvar X = 'X';\nvar Y = 'Y';\nvar Angle = 'Angle';\nvar Type = 'Type';\nvar Id = 'Id';\nvar Meta = 'Meta';\nvar EffectiveForces = 'EffectiveForces';\nvar TotalInputCount = 'TotalInputCount';\nvar TotalOutputCount = 'TotalOutputCount';\nvar PhysicsSettingCount = 'PhysicsSettingCount';\nvar Gravity = 'Gravity';\nvar Wind = 'Wind';\nvar VertexCount = 'VertexCount';\nvar PhysicsSettings = 'PhysicsSettings';\nvar Normalization = 'Normalization';\nvar Minimum = 'Minimum';\nvar Maximum = 'Maximum';\nvar Default = 'Default';\nvar Reflect = 'Reflect';\nvar Weight = 'Weight';\nvar Input = 'Input';\nvar Source = 'Source';\nvar Output = 'Output';\nvar Scale = 'Scale';\nvar VertexIndex = 'VertexIndex';\nvar Destination = 'Destination';\nvar Vertices = 'Vertices';\nvar Mobility = 'Mobility';\nvar Delay = 'Delay';\nvar Radius = 'Radius';\nvar Acceleration = 'Acceleration';\nvar CubismPhysicsJson = (function () {\n    function CubismPhysicsJson(buffer, size) {\n        this._json = cubismjson_1.CubismJson.create(buffer, size);\n    }\n    CubismPhysicsJson.prototype.release = function () {\n        cubismjson_1.CubismJson.delete(this._json);\n    };\n    CubismPhysicsJson.prototype.getGravity = function () {\n        var ret = new cubismvector2_1.CubismVector2(0, 0);\n        ret.x = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Gravity)\n            .getValueByString(X)\n            .toFloat();\n        ret.y = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Gravity)\n            .getValueByString(Y)\n            .toFloat();\n        return ret;\n    };\n    CubismPhysicsJson.prototype.getWind = function () {\n        var ret = new cubismvector2_1.CubismVector2(0, 0);\n        ret.x = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Wind)\n            .getValueByString(X)\n            .toFloat();\n        ret.y = this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(EffectiveForces)\n            .getValueByString(Wind)\n            .getValueByString(Y)\n            .toFloat();\n        return ret;\n    };\n    CubismPhysicsJson.prototype.getSubRigCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(PhysicsSettingCount)\n            .toInt();\n    };\n    CubismPhysicsJson.prototype.getTotalInputCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalInputCount)\n            .toInt();\n    };\n    CubismPhysicsJson.prototype.getTotalOutputCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(TotalOutputCount)\n            .toInt();\n    };\n    CubismPhysicsJson.prototype.getVertexCount = function () {\n        return this._json\n            .getRoot()\n            .getValueByString(Meta)\n            .getValueByString(VertexCount)\n            .toInt();\n    };\n    CubismPhysicsJson.prototype.getNormalizationPositionMinimumValue = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Position)\n            .getValueByString(Minimum)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getNormalizationPositionMaximumValue = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Position)\n            .getValueByString(Maximum)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getNormalizationPositionDefaultValue = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Position)\n            .getValueByString(Default)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getNormalizationAngleMinimumValue = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Angle)\n            .getValueByString(Minimum)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getNormalizationAngleMaximumValue = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Angle)\n            .getValueByString(Maximum)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getNormalizationAngleDefaultValue = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Normalization)\n            .getValueByString(Angle)\n            .getValueByString(Default)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getInputCount = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getVector()\n            .getSize();\n    };\n    CubismPhysicsJson.prototype.getInputWeight = function (physicsSettingIndex, inputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Weight)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getInputReflect = function (physicsSettingIndex, inputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Reflect)\n            .toBoolean();\n    };\n    CubismPhysicsJson.prototype.getInputType = function (physicsSettingIndex, inputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Type)\n            .getRawString();\n    };\n    CubismPhysicsJson.prototype.getInputSourceId = function (physicsSettingIndex, inputIndex) {\n        return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Input)\n            .getValueByIndex(inputIndex)\n            .getValueByString(Source)\n            .getValueByString(Id)\n            .getRawString());\n    };\n    CubismPhysicsJson.prototype.getOutputCount = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getVector()\n            .getSize();\n    };\n    CubismPhysicsJson.prototype.getOutputVertexIndex = function (physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(VertexIndex)\n            .toInt();\n    };\n    CubismPhysicsJson.prototype.getOutputAngleScale = function (physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Scale)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getOutputWeight = function (physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Weight)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getOutputDestinationId = function (physicsSettingIndex, outputIndex) {\n        return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Destination)\n            .getValueByString(Id)\n            .getRawString());\n    };\n    CubismPhysicsJson.prototype.getOutputType = function (physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Type)\n            .getRawString();\n    };\n    CubismPhysicsJson.prototype.getOutputReflect = function (physicsSettingIndex, outputIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Output)\n            .getValueByIndex(outputIndex)\n            .getValueByString(Reflect)\n            .toBoolean();\n    };\n    CubismPhysicsJson.prototype.getParticleCount = function (physicsSettingIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getVector()\n            .getSize();\n    };\n    CubismPhysicsJson.prototype.getParticleMobility = function (physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Mobility)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getParticleDelay = function (physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Delay)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getParticleAcceleration = function (physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Acceleration)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getParticleRadius = function (physicsSettingIndex, vertexIndex) {\n        return this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Radius)\n            .toFloat();\n    };\n    CubismPhysicsJson.prototype.getParticlePosition = function (physicsSettingIndex, vertexIndex) {\n        var ret = new cubismvector2_1.CubismVector2(0, 0);\n        ret.x = this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Position)\n            .getValueByString(X)\n            .toFloat();\n        ret.y = this._json\n            .getRoot()\n            .getValueByString(PhysicsSettings)\n            .getValueByIndex(physicsSettingIndex)\n            .getValueByString(Vertices)\n            .getValueByIndex(vertexIndex)\n            .getValueByString(Position)\n            .getValueByString(Y)\n            .toFloat();\n        return ret;\n    };\n    return CubismPhysicsJson;\n}());\nexports.CubismPhysicsJson = CubismPhysicsJson;\nvar $ = __importStar(__webpack_require__(/*! ./cubismphysicsjson */ \"./Framework/src/physics/cubismphysicsjson.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismPhysicsJson = $.CubismPhysicsJson;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3BoeXNpY3MvY3ViaXNtcGh5c2ljc2pzb24udHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL3BoeXNpY3MvY3ViaXNtcGh5c2ljc2pzb24udHM/MzAyOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBDdWJpc21JZEhhbmRsZSB9IGZyb20gJy4uL2lkL2N1YmlzbWlkJztcbmltcG9ydCB7IEN1YmlzbUZyYW1ld29yayB9IGZyb20gJy4uL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgeyBDdWJpc21WZWN0b3IyIH0gZnJvbSAnLi4vbWF0aC9jdWJpc212ZWN0b3IyJztcbmltcG9ydCB7IEN1YmlzbUpzb24gfSBmcm9tICcuLi91dGlscy9jdWJpc21qc29uJztcblxuLy8gSlNPTiBrZXlzXG5jb25zdCBQb3NpdGlvbiA9ICdQb3NpdGlvbic7XG5jb25zdCBYID0gJ1gnO1xuY29uc3QgWSA9ICdZJztcbmNvbnN0IEFuZ2xlID0gJ0FuZ2xlJztcbmNvbnN0IFR5cGUgPSAnVHlwZSc7XG5jb25zdCBJZCA9ICdJZCc7XG5cbi8vIE1ldGFcbmNvbnN0IE1ldGEgPSAnTWV0YSc7XG5jb25zdCBFZmZlY3RpdmVGb3JjZXMgPSAnRWZmZWN0aXZlRm9yY2VzJztcbmNvbnN0IFRvdGFsSW5wdXRDb3VudCA9ICdUb3RhbElucHV0Q291bnQnO1xuY29uc3QgVG90YWxPdXRwdXRDb3VudCA9ICdUb3RhbE91dHB1dENvdW50JztcbmNvbnN0IFBoeXNpY3NTZXR0aW5nQ291bnQgPSAnUGh5c2ljc1NldHRpbmdDb3VudCc7XG5jb25zdCBHcmF2aXR5ID0gJ0dyYXZpdHknO1xuY29uc3QgV2luZCA9ICdXaW5kJztcbmNvbnN0IFZlcnRleENvdW50ID0gJ1ZlcnRleENvdW50JztcblxuLy8gUGh5c2ljc1NldHRpbmdzXG5jb25zdCBQaHlzaWNzU2V0dGluZ3MgPSAnUGh5c2ljc1NldHRpbmdzJztcbmNvbnN0IE5vcm1hbGl6YXRpb24gPSAnTm9ybWFsaXphdGlvbic7XG5jb25zdCBNaW5pbXVtID0gJ01pbmltdW0nO1xuY29uc3QgTWF4aW11bSA9ICdNYXhpbXVtJztcbmNvbnN0IERlZmF1bHQgPSAnRGVmYXVsdCc7XG5jb25zdCBSZWZsZWN0ID0gJ1JlZmxlY3QnO1xuY29uc3QgV2VpZ2h0ID0gJ1dlaWdodCc7XG5cbi8vIElucHV0XG5jb25zdCBJbnB1dCA9ICdJbnB1dCc7XG5jb25zdCBTb3VyY2UgPSAnU291cmNlJztcblxuLy8gT3V0cHV0XG5jb25zdCBPdXRwdXQgPSAnT3V0cHV0JztcbmNvbnN0IFNjYWxlID0gJ1NjYWxlJztcbmNvbnN0IFZlcnRleEluZGV4ID0gJ1ZlcnRleEluZGV4JztcbmNvbnN0IERlc3RpbmF0aW9uID0gJ0Rlc3RpbmF0aW9uJztcblxuLy8gUGFydGljbGVcbmNvbnN0IFZlcnRpY2VzID0gJ1ZlcnRpY2VzJztcbmNvbnN0IE1vYmlsaXR5ID0gJ01vYmlsaXR5JztcbmNvbnN0IERlbGF5ID0gJ0RlbGF5JztcbmNvbnN0IFJhZGl1cyA9ICdSYWRpdXMnO1xuY29uc3QgQWNjZWxlcmF0aW9uID0gJ0FjY2VsZXJhdGlvbic7XG5cbi8qKlxuICogcGh5c2ljczMuanNvbuOBruOCs+ODs+ODhuODiuOAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtUGh5c2ljc0pzb24ge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqIEBwYXJhbSBidWZmZXIgcGh5c2ljczMuanNvbuOBjOiqreOBv+i+vOOBvuOCjOOBpuOBhOOCi+ODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gc2l6ZSDjg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrpcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihidWZmZXI6IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLl9qc29uID0gQ3ViaXNtSnNvbi5jcmVhdGUoYnVmZmVyLCBzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjgrnjg4jjg6njgq/jgr/nm7jlvZPjga7lh6bnkIZcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIEN1YmlzbUpzb24uZGVsZXRlKHRoaXMuX2pzb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIOmHjeWKm+OBruWPluW+l1xuICAgKiBAcmV0dXJuIOmHjeWKm1xuICAgKi9cbiAgcHVibGljIGdldEdyYXZpdHkoKTogQ3ViaXNtVmVjdG9yMiB7XG4gICAgY29uc3QgcmV0OiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gICAgcmV0LnggPSB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRWZmZWN0aXZlRm9yY2VzKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoR3Jhdml0eSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFgpXG4gICAgICAudG9GbG9hdCgpO1xuICAgIHJldC55ID0gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWV0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEVmZmVjdGl2ZUZvcmNlcylcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEdyYXZpdHkpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhZKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIOmiqOOBruWPluW+l1xuICAgKiBAcmV0dXJuIOmiqFxuICAgKi9cbiAgcHVibGljIGdldFdpbmQoKTogQ3ViaXNtVmVjdG9yMiB7XG4gICAgY29uc3QgcmV0OiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gICAgcmV0LnggPSB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNZXRhKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRWZmZWN0aXZlRm9yY2VzKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoV2luZClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFgpXG4gICAgICAudG9GbG9hdCgpO1xuICAgIHJldC55ID0gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWV0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEVmZmVjdGl2ZUZvcmNlcylcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFdpbmQpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhZKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIOeJqeeQhuW6l+OBrueuoeeQhuOBruWAi+aVsOOBruWPluW+l1xuICAgKiBAcmV0dXJuIOeJqeeQhuW6l+OBrueuoeeQhuOBruWAi+aVsFxuICAgKi9cbiAgcHVibGljIGdldFN1YlJpZ0NvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzU2V0dGluZ0NvdW50KVxuICAgICAgLnRvSW50KCk7XG4gIH1cblxuICAvKipcbiAgICog5YWl5Yqb44Gu57eP5ZCI6KiI44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g5YWl5Yqb44Gu57eP5ZCI6KiIXG4gICAqL1xuICBwdWJsaWMgZ2V0VG90YWxJbnB1dENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhUb3RhbElucHV0Q291bnQpXG4gICAgICAudG9JbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlh7rlipvjga7nt4/lkIjoqIjjga7lj5blvpdcbiAgICogQHJldHVybiDlh7rlipvjga7nt4/lkIjoqIhcbiAgICovXG4gIHB1YmxpYyBnZXRUb3RhbE91dHB1dENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE1ldGEpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhUb3RhbE91dHB1dENvdW50KVxuICAgICAgLnRvSW50KCk7XG4gIH1cblxuICAvKipcbiAgICog54mp55CG54K544Gu5YCL5pWw44Gu5Y+W5b6XXG4gICAqIEByZXR1cm4g54mp55CG54K544Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0VmVydGV4Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWV0YSlcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFZlcnRleENvdW50KVxuICAgICAgLnRvSW50KCk7XG4gIH1cblxuICAvKipcbiAgICog5q2j6KaP5YyW44GV44KM44Gf5L2N572u44Gu5pyA5bCP5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOato+imj+WMluOBleOCjOOBn+S9jee9ruOBruacgOWwj+WApFxuICAgKi9cbiAgcHVibGljIGdldE5vcm1hbGl6YXRpb25Qb3NpdGlvbk1pbmltdW1WYWx1ZShcbiAgICBwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTm9ybWFsaXphdGlvbilcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBvc2l0aW9uKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWluaW11bSlcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog5q2j6KaP5YyW44GV44KM44Gf5L2N572u44Gu5pyA5aSn5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOato+imj+WMluOBleOCjOOBn+S9jee9ruOBruacgOWkp+WApFxuICAgKi9cbiAgcHVibGljIGdldE5vcm1hbGl6YXRpb25Qb3NpdGlvbk1heGltdW1WYWx1ZShcbiAgICBwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTm9ybWFsaXphdGlvbilcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBvc2l0aW9uKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWF4aW11bSlcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog5q2j6KaP5YyW44GV44KM44Gf5L2N572u44Gu44OH44OV44Kp44Or44OI5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOato+imj+WMluOBleOCjOOBn+S9jee9ruOBruODh+ODleOCqeODq+ODiOWApFxuICAgKi9cbiAgcHVibGljIGdldE5vcm1hbGl6YXRpb25Qb3NpdGlvbkRlZmF1bHRWYWx1ZShcbiAgICBwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTm9ybWFsaXphdGlvbilcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBvc2l0aW9uKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRGVmYXVsdClcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog5q2j6KaP5YyW44GV44KM44Gf6KeS5bqm44Gu5pyA5bCP5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOato+imj+WMluOBleOCjOOBn+inkuW6puOBruacgOWwj+WApFxuICAgKi9cbiAgcHVibGljIGdldE5vcm1hbGl6YXRpb25BbmdsZU1pbmltdW1WYWx1ZShcbiAgICBwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTm9ybWFsaXphdGlvbilcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEFuZ2xlKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTWluaW11bSlcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog5q2j6KaP5YyW44GV44KM44Gf6KeS5bqm44Gu5pyA5aSn5YCk44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4XG4gICAqIEByZXR1cm4g5q2j6KaP5YyW44GV44KM44Gf6KeS5bqm44Gu5pyA5aSn5YCkXG4gICAqL1xuICBwdWJsaWMgZ2V0Tm9ybWFsaXphdGlvbkFuZ2xlTWF4aW11bVZhbHVlKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzU2V0dGluZ3MpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHBoeXNpY3NTZXR0aW5nSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhOb3JtYWxpemF0aW9uKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQW5nbGUpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhNYXhpbXVtKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmraPopo/ljJbjgZXjgozjgZ/op5Lluqbjga7jg4fjg5Xjgqnjg6vjg4jlgKTjga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g5q2j6KaP5YyW44GV44KM44Gf6KeS5bqm44Gu44OH44OV44Kp44Or44OI5YCkXG4gICAqL1xuICBwdWJsaWMgZ2V0Tm9ybWFsaXphdGlvbkFuZ2xlRGVmYXVsdFZhbHVlKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzU2V0dGluZ3MpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHBoeXNpY3NTZXR0aW5nSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhOb3JtYWxpemF0aW9uKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoQW5nbGUpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhEZWZhdWx0KVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhaXlipvjga7lgIvmlbDjga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g5YWl5Yqb44Gu5YCL5pWwXG4gICAqL1xuICBwdWJsaWMgZ2V0SW5wdXRDb3VudChwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzU2V0dGluZ3MpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHBoeXNpY3NTZXR0aW5nSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhJbnB1dClcbiAgICAgIC5nZXRWZWN0b3IoKVxuICAgICAgLmdldFNpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhaXlipvjga7ph43jgb/jga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSBpbnB1dEluZGV4IOWFpeWKm+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOWFpeWKm+OBrumHjeOBv1xuICAgKi9cbiAgcHVibGljIGdldElucHV0V2VpZ2h0KFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBpbnB1dEluZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoSW5wdXQpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KGlucHV0SW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhXZWlnaHQpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWFpeWKm+OBruWPjei7ouOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfjga7oqK3lrprjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIGlucHV0SW5kZXgg5YWl5Yqb44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g5YWl5Yqb44Gu5Y+N6LuiXG4gICAqL1xuICBwdWJsaWMgZ2V0SW5wdXRSZWZsZWN0KFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBpbnB1dEluZGV4OiBudW1iZXJcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKElucHV0KVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbnB1dEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUmVmbGVjdClcbiAgICAgIC50b0Jvb2xlYW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhaXlipvjga7nqK7poZ7jga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSBpbnB1dEluZGV4IOWFpeWKm+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOWFpeWKm+OBrueorumhnlxuICAgKi9cbiAgcHVibGljIGdldElucHV0VHlwZShwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXIsIGlucHV0SW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKElucHV0KVxuICAgICAgLmdldFZhbHVlQnlJbmRleChpbnB1dEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVHlwZSlcbiAgICAgIC5nZXRSYXdTdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhaXlipvlhYPjga5JROOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfjga7oqK3lrprjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIGlucHV0SW5kZXgg5YWl5Yqb44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g5YWl5Yqb5YWD44GuSURcbiAgICovXG4gIHB1YmxpYyBnZXRJbnB1dFNvdXJjZUlkKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBpbnB1dEluZGV4OiBudW1iZXJcbiAgKTogQ3ViaXNtSWRIYW5kbGUge1xuICAgIHJldHVybiBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoXG4gICAgICB0aGlzLl9qc29uXG4gICAgICAgIC5nZXRSb290KClcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KHBoeXNpY3NTZXR0aW5nSW5kZXgpXG4gICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKElucHV0KVxuICAgICAgICAuZ2V0VmFsdWVCeUluZGV4KGlucHV0SW5kZXgpXG4gICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFNvdXJjZSlcbiAgICAgICAgLmdldFZhbHVlQnlTdHJpbmcoSWQpXG4gICAgICAgIC5nZXRSYXdTdHJpbmcoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5Ye65Yqb44Gu5YCL5pWw44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOWHuuWKm+OBruWAi+aVsFxuICAgKi9cbiAgcHVibGljIGdldE91dHB1dENvdW50KHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE91dHB1dClcbiAgICAgIC5nZXRWZWN0b3IoKVxuICAgICAgLmdldFNpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlh7rlipvjga7niannkIbngrnjga7jgqTjg7Pjg4fjg4Pjgq/jgrnjga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSBvdXRwdXRJbmRleCDlh7rlipvjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDlh7rlipvjga7niannkIbngrnjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICovXG4gIHB1YmxpYyBnZXRPdXRwdXRWZXJ0ZXhJbmRleChcbiAgICBwaHlzaWNzU2V0dGluZ0luZGV4OiBudW1iZXIsXG4gICAgb3V0cHV0SW5kZXg6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzU2V0dGluZ3MpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHBoeXNpY3NTZXR0aW5nSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhPdXRwdXQpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KG91dHB1dEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVmVydGV4SW5kZXgpXG4gICAgICAudG9JbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlh7rlipvjga7op5Lluqbjga7jgrnjgrHjg7zjg6vjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSBvdXRwdXRJbmRleCDlh7rlipvjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDlh7rlipvjga7op5Lluqbjga7jgrnjgrHjg7zjg6tcbiAgICovXG4gIHB1YmxpYyBnZXRPdXRwdXRBbmdsZVNjYWxlKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBvdXRwdXRJbmRleDogbnVtYmVyXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE91dHB1dClcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgob3V0cHV0SW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhTY2FsZSlcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog5Ye65Yqb44Gu6YeN44G/44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gb3V0cHV0SW5kZXgg5Ye65Yqb44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g5Ye65Yqb44Gu6YeN44G/XG4gICAqL1xuICBwdWJsaWMgZ2V0T3V0cHV0V2VpZ2h0KFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBvdXRwdXRJbmRleDogbnVtYmVyXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE91dHB1dClcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgob3V0cHV0SW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhXZWlnaHQpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWHuuWKm+WFiOOBrklE44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gb3V0cHV0SW5kZXgg5Ye65Yqb44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g5Ye65Yqb5YWI44GuSURcbiAgICovXG4gIHB1YmxpYyBnZXRPdXRwdXREZXN0aW5hdGlvbklkKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBvdXRwdXRJbmRleDogbnVtYmVyXG4gICk6IEN1YmlzbUlkSGFuZGxlIHtcbiAgICByZXR1cm4gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpLmdldElkKFxuICAgICAgdGhpcy5fanNvblxuICAgICAgICAuZ2V0Um9vdCgpXG4gICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhPdXRwdXQpXG4gICAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgob3V0cHV0SW5kZXgpXG4gICAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKERlc3RpbmF0aW9uKVxuICAgICAgICAuZ2V0VmFsdWVCeVN0cmluZyhJZClcbiAgICAgICAgLmdldFJhd1N0cmluZygpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlh7rlipvjga7nqK7poZ7jga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSBvdXRwdXRJbmRleCDlh7rlipvjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDlh7rlipvjga7nqK7poZ5cbiAgICovXG4gIHB1YmxpYyBnZXRPdXRwdXRUeXBlKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICBvdXRwdXRJbmRleDogbnVtYmVyXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE91dHB1dClcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgob3V0cHV0SW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhUeXBlKVxuICAgICAgLmdldFJhd1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWHuuWKm+OBruWPjei7ouOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIG91dHB1dEluZGV4IOWHuuWKm+OBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOWHuuWKm+OBruWPjei7olxuICAgKi9cbiAgcHVibGljIGdldE91dHB1dFJlZmxlY3QoXG4gICAgcGh5c2ljc1NldHRpbmdJbmRleDogbnVtYmVyLFxuICAgIG91dHB1dEluZGV4OiBudW1iZXJcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKE91dHB1dClcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgob3V0cHV0SW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhSZWZsZWN0KVxuICAgICAgLnRvQm9vbGVhbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOeJqeeQhueCueOBruWAi+aVsOOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfnlLfoqK3lrprjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHJldHVybiDniannkIbngrnjga7lgIvmlbBcbiAgICovXG4gIHB1YmxpYyBnZXRQYXJ0aWNsZUNvdW50KHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFZlcnRpY2VzKVxuICAgICAgLmdldFZlY3RvcigpXG4gICAgICAuZ2V0U2l6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOeJqeeQhueCueOBruWLleOBjeOChOOBmeOBleOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfjga7oqK3lrprjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIHZlcnRleEluZGV4IOeJqeeQhueCueOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOeJqeeQhueCueOBruWLleOBjeOChOOBmeOBlVxuICAgKi9cbiAgcHVibGljIGdldFBhcnRpY2xlTW9iaWxpdHkoXG4gICAgcGh5c2ljc1NldHRpbmdJbmRleDogbnVtYmVyLFxuICAgIHZlcnRleEluZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVmVydGljZXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHZlcnRleEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoTW9iaWxpdHkpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOeJqeeQhueCueOBrumBheOCjOOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfjga7oqK3lrprjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIHZlcnRleEluZGV4IOeJqeeQhueCueOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOeJqeeQhueCueOBrumBheOCjFxuICAgKi9cbiAgcHVibGljIGdldFBhcnRpY2xlRGVsYXkoXG4gICAgcGh5c2ljc1NldHRpbmdJbmRleDogbnVtYmVyLFxuICAgIHZlcnRleEluZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVmVydGljZXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHZlcnRleEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoRGVsYXkpXG4gICAgICAudG9GbG9hdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOeJqeeQhueCueOBruWKoOmAn+W6puOBruWPluW+l1xuICAgKiBAcGFyYW0gcGh5c2ljc1NldHRpbmdJbmRleCDniannkIbmvJTnrpfjga7oqK3lrppcbiAgICogQHBhcmFtIHZlcnRleEluZGV4IOeJqeeQhueCueOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOeJqeeQhueCueOBruWKoOmAn+W6plxuICAgKi9cbiAgcHVibGljIGdldFBhcnRpY2xlQWNjZWxlcmF0aW9uKFxuICAgIHBoeXNpY3NTZXR0aW5nSW5kZXg6IG51bWJlcixcbiAgICB2ZXJ0ZXhJbmRleDogbnVtYmVyXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pzb25cbiAgICAgIC5nZXRSb290KClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFBoeXNpY3NTZXR0aW5ncylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgocGh5c2ljc1NldHRpbmdJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFZlcnRpY2VzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleCh2ZXJ0ZXhJbmRleClcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKEFjY2VsZXJhdGlvbilcbiAgICAgIC50b0Zsb2F0KCk7XG4gIH1cblxuICAvKipcbiAgICog54mp55CG54K544Gu6Led6Zui44Gu5Y+W5b6XXG4gICAqIEBwYXJhbSBwaHlzaWNzU2V0dGluZ0luZGV4IOeJqeeQhua8lOeul+OBruioreWumuOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcGFyYW0gdmVydGV4SW5kZXgg54mp55CG54K544Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEByZXR1cm4g54mp55CG54K544Gu6Led6ZuiXG4gICAqL1xuICBwdWJsaWMgZ2V0UGFydGljbGVSYWRpdXMoXG4gICAgcGh5c2ljc1NldHRpbmdJbmRleDogbnVtYmVyLFxuICAgIHZlcnRleEluZGV4OiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVmVydGljZXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHZlcnRleEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUmFkaXVzKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDniannkIbngrnjga7kvY3nva7jga7lj5blvpdcbiAgICogQHBhcmFtIHBoeXNpY3NTZXR0aW5nSW5kZXgg54mp55CG5ryU566X44Gu6Kit5a6a44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqIEBwYXJhbSB2ZXJ0ZXhJbmRlIOeJqeeQhueCueOBruOCpOODs+ODh+ODg+OCr+OCuVxuICAgKiBAcmV0dXJuIOeJqeeQhueCueOBruS9jee9rlxuICAgKi9cbiAgcHVibGljIGdldFBhcnRpY2xlUG9zaXRpb24oXG4gICAgcGh5c2ljc1NldHRpbmdJbmRleDogbnVtYmVyLFxuICAgIHZlcnRleEluZGV4OiBudW1iZXJcbiAgKTogQ3ViaXNtVmVjdG9yMiB7XG4gICAgY29uc3QgcmV0OiBDdWJpc21WZWN0b3IyID0gbmV3IEN1YmlzbVZlY3RvcjIoMCwgMCk7XG4gICAgcmV0LnggPSB0aGlzLl9qc29uXG4gICAgICAuZ2V0Um9vdCgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQaHlzaWNzU2V0dGluZ3MpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHBoeXNpY3NTZXR0aW5nSW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhWZXJ0aWNlcylcbiAgICAgIC5nZXRWYWx1ZUJ5SW5kZXgodmVydGV4SW5kZXgpXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhQb3NpdGlvbilcbiAgICAgIC5nZXRWYWx1ZUJ5U3RyaW5nKFgpXG4gICAgICAudG9GbG9hdCgpO1xuICAgIHJldC55ID0gdGhpcy5fanNvblxuICAgICAgLmdldFJvb3QoKVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUGh5c2ljc1NldHRpbmdzKVxuICAgICAgLmdldFZhbHVlQnlJbmRleChwaHlzaWNzU2V0dGluZ0luZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoVmVydGljZXMpXG4gICAgICAuZ2V0VmFsdWVCeUluZGV4KHZlcnRleEluZGV4KVxuICAgICAgLmdldFZhbHVlQnlTdHJpbmcoUG9zaXRpb24pXG4gICAgICAuZ2V0VmFsdWVCeVN0cmluZyhZKVxuICAgICAgLnRvRmxvYXQoKTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgX2pzb246IEN1YmlzbUpzb247IC8vIHBoeXNpY3MzLmpzb27jg4fjg7zjgr9cbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtcGh5c2ljc2pzb24nO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVBoeXNpY3NKc29uID0gJC5DdWJpc21QaHlzaWNzSnNvbjtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUGh5c2ljc0pzb24gPSAkLkN1YmlzbVBoeXNpY3NKc29uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQXBrQkE7QUF1a0JBO0FBRUE7QUFBQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Framework/src/physics/cubismphysicsjson.ts\n");

/***/ }),

/***/ "./Framework/src/rendering/cubismrenderer.ts":
/*!***************************************************!*\
  !*** ./Framework/src/rendering/cubismrenderer.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismTextureColor = exports.CubismBlendMode = exports.CubismRenderer = void 0;\nvar cubismmatrix44_1 = __webpack_require__(/*! ../math/cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\");\nvar CubismRenderer = (function () {\n    function CubismRenderer() {\n        this._isCulling = false;\n        this._isPremultipliedAlpha = false;\n        this._anisortopy = 0.0;\n        this._model = null;\n        this._modelColor = new CubismTextureColor();\n        this._mvpMatrix4x4 = new cubismmatrix44_1.CubismMatrix44();\n        this._mvpMatrix4x4.loadIdentity();\n    }\n    CubismRenderer.create = function () {\n        return null;\n    };\n    CubismRenderer.delete = function (renderer) {\n        renderer = null;\n    };\n    CubismRenderer.prototype.initialize = function (model) {\n        this._model = model;\n    };\n    CubismRenderer.prototype.drawModel = function () {\n        if (this.getModel() == null)\n            return;\n        this.doDrawModel();\n    };\n    CubismRenderer.prototype.setMvpMatrix = function (matrix44) {\n        this._mvpMatrix4x4.setMatrix(matrix44.getArray());\n    };\n    CubismRenderer.prototype.getMvpMatrix = function () {\n        return this._mvpMatrix4x4;\n    };\n    CubismRenderer.prototype.setModelColor = function (red, green, blue, alpha) {\n        if (red < 0.0) {\n            red = 0.0;\n        }\n        else if (red > 1.0) {\n            red = 1.0;\n        }\n        if (green < 0.0) {\n            green = 0.0;\n        }\n        else if (green > 1.0) {\n            green = 1.0;\n        }\n        if (blue < 0.0) {\n            blue = 0.0;\n        }\n        else if (blue > 1.0) {\n            blue = 1.0;\n        }\n        if (alpha < 0.0) {\n            alpha = 0.0;\n        }\n        else if (alpha > 1.0) {\n            alpha = 1.0;\n        }\n        this._modelColor.R = red;\n        this._modelColor.G = green;\n        this._modelColor.B = blue;\n        this._modelColor.A = alpha;\n    };\n    CubismRenderer.prototype.getModelColor = function () {\n        return JSON.parse(JSON.stringify(this._modelColor));\n    };\n    CubismRenderer.prototype.setIsPremultipliedAlpha = function (enable) {\n        this._isPremultipliedAlpha = enable;\n    };\n    CubismRenderer.prototype.isPremultipliedAlpha = function () {\n        return this._isPremultipliedAlpha;\n    };\n    CubismRenderer.prototype.setIsCulling = function (culling) {\n        this._isCulling = culling;\n    };\n    CubismRenderer.prototype.isCulling = function () {\n        return this._isCulling;\n    };\n    CubismRenderer.prototype.setAnisotropy = function (n) {\n        this._anisortopy = n;\n    };\n    CubismRenderer.prototype.getAnisotropy = function () {\n        return this._anisortopy;\n    };\n    CubismRenderer.prototype.getModel = function () {\n        return this._model;\n    };\n    return CubismRenderer;\n}());\nexports.CubismRenderer = CubismRenderer;\nvar CubismBlendMode;\n(function (CubismBlendMode) {\n    CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Normal\"] = 0] = \"CubismBlendMode_Normal\";\n    CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Additive\"] = 1] = \"CubismBlendMode_Additive\";\n    CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Multiplicative\"] = 2] = \"CubismBlendMode_Multiplicative\";\n})(CubismBlendMode = exports.CubismBlendMode || (exports.CubismBlendMode = {}));\nvar CubismTextureColor = (function () {\n    function CubismTextureColor() {\n        this.R = 1.0;\n        this.G = 1.0;\n        this.B = 1.0;\n        this.A = 1.0;\n    }\n    return CubismTextureColor;\n}());\nexports.CubismTextureColor = CubismTextureColor;\nvar $ = __importStar(__webpack_require__(/*! ./cubismrenderer */ \"./Framework/src/rendering/cubismrenderer.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismBlendMode = $.CubismBlendMode;\n    Live2DCubismFramework.CubismRenderer = $.CubismRenderer;\n    Live2DCubismFramework.CubismTextureColor = $.CubismTextureColor;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3JlbmRlcmluZy9jdWJpc21yZW5kZXJlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvcmVuZGVyaW5nL2N1YmlzbXJlbmRlcmVyLnRzPzdmZmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ3ViaXNtTWF0cml4NDQgfSBmcm9tICcuLi9tYXRoL2N1YmlzbW1hdHJpeDQ0JztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuXG4vKipcbiAqIOODouODh+ODq+aPj+eUu+OCkuWHpueQhuOBmeOCi+ODrOODs+ODgOODqVxuICpcbiAqIOOCteODluOCr+ODqeOCueOBq+eSsOWig+S+neWtmOOBruaPj+eUu+WRveS7pOOCkuiomOi/sOOBmeOCi+OAglxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ3ViaXNtUmVuZGVyZXIge1xuICAvKipcbiAgICog44Os44Oz44OA44Op44Gu44Kk44Oz44K544K/44Oz44K544KS55Sf5oiQ44GX44Gm5Y+W5b6X44GZ44KLXG4gICAqXG4gICAqIEByZXR1cm4g44Os44Oz44OA44Op44Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZSgpOiBDdWJpc21SZW5kZXJlciB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICog44Os44Oz44OA44Op44Gu44Kk44Oz44K544K/44Oz44K544KS6Kej5pS+44GZ44KLXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGRlbGV0ZShyZW5kZXJlcjogQ3ViaXNtUmVuZGVyZXIpOiB2b2lkIHtcbiAgICByZW5kZXJlciA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICog44Os44Oz44OA44Op44Gu5Yid5pyf5YyW5Yem55CG44KS5a6f6KGM44GZ44KLXG4gICAqIOW8leaVsOOBq+a4oeOBl+OBn+ODouODh+ODq+OBi+OCieODrOODs+ODgOODqeOBruWIneacn+WMluWHpueQhuOBq+W/heimgeOBquaDheWgseOCkuWPluOCiuWHuuOBmeOBk+OBqOOBjOOBp+OBjeOCi1xuICAgKiBAcGFyYW0gbW9kZWwg44Oi44OH44Or44Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZShtb2RlbDogQ3ViaXNtTW9kZWwpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbCA9IG1vZGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OCkuaPj+eUu+OBmeOCi1xuICAgKi9cbiAgcHVibGljIGRyYXdNb2RlbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5nZXRNb2RlbCgpID09IG51bGwpIHJldHVybjtcblxuICAgIHRoaXMuZG9EcmF3TW9kZWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RlbC1WaWV3LVByb2plY3Rpb24g6KGM5YiX44KS44K744OD44OI44GZ44KLXG4gICAqIOmFjeWIl+OBr+ikh+ijveOBleOCjOOCi+OBruOBp+OAgeWFg+OBrumFjeWIl+OBr+WkluOBp+egtOajhOOBl+OBpuiJr+OBhFxuICAgKiBAcGFyYW0gbWF0cml4NDQgTW9kZWwtVmlldy1Qcm9qZWN0aW9uIOihjOWIl1xuICAgKi9cbiAgcHVibGljIHNldE12cE1hdHJpeChtYXRyaXg0NDogQ3ViaXNtTWF0cml4NDQpOiB2b2lkIHtcbiAgICB0aGlzLl9tdnBNYXRyaXg0eDQuc2V0TWF0cml4KG1hdHJpeDQ0LmdldEFycmF5KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGVsLVZpZXctUHJvamVjdGlvbiDooYzliJfjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiBNb2RlbC1WaWV3LVByb2plY3Rpb24g6KGM5YiXXG4gICAqL1xuICBwdWJsaWMgZ2V0TXZwTWF0cml4KCk6IEN1YmlzbU1hdHJpeDQ0IHtcbiAgICByZXR1cm4gdGhpcy5fbXZwTWF0cml4NHg0O1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBruiJsuOCkuOCu+ODg+ODiOOBmeOCi1xuICAgKiDlkIToibIwLjB+MS4w44Gu6ZaT44Gn5oyH5a6a44GZ44KL77yIMS4w44GM5qiZ5rqW44Gu54q25oWL77yJXG4gICAqIEBwYXJhbSByZWQg6LWk44OB44Oj44Oz44ON44Or44Gu5YCkXG4gICAqIEBwYXJhbSBncmVlbiDnt5Hjg4Hjg6Pjg7Pjg43jg6vjga7lgKRcbiAgICogQHBhcmFtIGJsdWUg6Z2S44OB44Oj44Oz44ON44Or44Gu5YCkXG4gICAqIEBwYXJhbSBhbHBoYSDOseODgeODo+ODs+ODjeODq+OBruWApFxuICAgKi9cbiAgcHVibGljIHNldE1vZGVsQ29sb3IoXG4gICAgcmVkOiBudW1iZXIsXG4gICAgZ3JlZW46IG51bWJlcixcbiAgICBibHVlOiBudW1iZXIsXG4gICAgYWxwaGE6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICBpZiAocmVkIDwgMC4wKSB7XG4gICAgICByZWQgPSAwLjA7XG4gICAgfSBlbHNlIGlmIChyZWQgPiAxLjApIHtcbiAgICAgIHJlZCA9IDEuMDtcbiAgICB9XG5cbiAgICBpZiAoZ3JlZW4gPCAwLjApIHtcbiAgICAgIGdyZWVuID0gMC4wO1xuICAgIH0gZWxzZSBpZiAoZ3JlZW4gPiAxLjApIHtcbiAgICAgIGdyZWVuID0gMS4wO1xuICAgIH1cblxuICAgIGlmIChibHVlIDwgMC4wKSB7XG4gICAgICBibHVlID0gMC4wO1xuICAgIH0gZWxzZSBpZiAoYmx1ZSA+IDEuMCkge1xuICAgICAgYmx1ZSA9IDEuMDtcbiAgICB9XG5cbiAgICBpZiAoYWxwaGEgPCAwLjApIHtcbiAgICAgIGFscGhhID0gMC4wO1xuICAgIH0gZWxzZSBpZiAoYWxwaGEgPiAxLjApIHtcbiAgICAgIGFscGhhID0gMS4wO1xuICAgIH1cblxuICAgIHRoaXMuX21vZGVsQ29sb3IuUiA9IHJlZDtcbiAgICB0aGlzLl9tb2RlbENvbG9yLkcgPSBncmVlbjtcbiAgICB0aGlzLl9tb2RlbENvbG9yLkIgPSBibHVlO1xuICAgIHRoaXMuX21vZGVsQ29sb3IuQSA9IGFscGhhO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OBruiJsuOCkuWPluW+l+OBmeOCi1xuICAgKiDlkIToibIwLjB+MS4w44Gu6ZaT44Gn5oyH5a6a44GZ44KLKDEuMOOBjOaomea6luOBrueKtuaFiylcbiAgICpcbiAgICogQHJldHVybiBSR0JB44Gu44Kr44Op44O85oOF5aCxXG4gICAqL1xuICBwdWJsaWMgZ2V0TW9kZWxDb2xvcigpOiBDdWJpc21UZXh0dXJlQ29sb3Ige1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuX21vZGVsQ29sb3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuZfnrpfmuIjjgb/OseOBruacieWKueODu+eEoeWKueOCkuOCu+ODg+ODiOOBmeOCi1xuICAgKiDmnInlirnjgavjgZnjgovjgarjgol0cnVl44CB54Sh5Yq544Gr44GZ44KL44Gq44KJZmFsc2XjgpLjgrvjg4Pjg4jjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzZXRJc1ByZW11bHRpcGxpZWRBbHBoYShlbmFibGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9pc1ByZW11bHRpcGxpZWRBbHBoYSA9IGVuYWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkuZfnrpfmuIjjgb/OseOBruacieWKueODu+eEoeWKueOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIHRydWUg5LmX566X5riI44G/44GuzrHmnInlirlcbiAgICogQHJldHVybiBmYWxzZSDkuZfnrpfmuIjjgb/jga7OseeEoeWKuVxuICAgKi9cbiAgcHVibGljIGlzUHJlbXVsdGlwbGllZEFscGhhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc1ByZW11bHRpcGxpZWRBbHBoYTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqvjg6rjg7PjgrDvvIjniYfpnaLmj4/nlLvvvInjga7mnInlirnjg7vnhKHlirnjgpLjgrvjg4Pjg4jjgZnjgovjgIJcbiAgICog5pyJ5Yq544Gr44GZ44KL44Gq44KJdHJ1ZeOAgeeEoeWKueOBq+OBmeOCi+OBquOCiWZhbHNl44KS44K744OD44OI44GZ44KLXG4gICAqL1xuICBwdWJsaWMgc2V0SXNDdWxsaW5nKGN1bGxpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9pc0N1bGxpbmcgPSBjdWxsaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCq+ODquODs+OCsO+8iOeJh+mdouaPj+eUu++8ieOBruacieWKueODu+eEoeWKueOCkuWPluW+l+OBmeOCi+OAglxuICAgKiBAcmV0dXJuIHRydWUg44Kr44Oq44Oz44Kw5pyJ5Yq5XG4gICAqIEByZXR1cm4gZmFsc2Ug44Kr44Oq44Oz44Kw54Sh5Yq5XG4gICAqL1xuICBwdWJsaWMgaXNDdWxsaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc0N1bGxpbmc7XG4gIH1cblxuICAvKipcbiAgICog44OG44Kv44K544OB44Oj44Gu55Ww5pa55oCn44OV44Kj44Or44K/44Oq44Oz44Kw44Gu44OR44Op44Oh44O844K/44KS44K744OD44OI44GZ44KLXG4gICAqIOODkeODqeODoeODvOOCv+WApOOBruW9semfv+W6puOBr+ODrOODs+ODgOODqeOBruWun+ijheOBq+S+neWtmOOBmeOCi1xuICAgKiBAcGFyYW0gbiDjg5Hjg6njg6Hjg7zjgr/jga7lgKRcbiAgICovXG4gIHB1YmxpYyBzZXRBbmlzb3Ryb3B5KG46IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2FuaXNvcnRvcHkgPSBuO1xuICB9XG5cbiAgLyoqXG4gICAqIOODhuOCr+OCueODgeODo+OBrueVsOaWueaAp+ODleOCo+ODq+OCv+ODquODs+OCsOOBruODkeODqeODoeODvOOCv+OCkuOCu+ODg+ODiOOBmeOCi1xuICAgKiBAcmV0dXJuIOeVsOaWueaAp+ODleOCo+ODq+OCv+ODquODs+OCsOOBruODkeODqeODoeODvOOCv1xuICAgKi9cbiAgcHVibGljIGdldEFuaXNvdHJvcHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYW5pc29ydG9weTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6zjg7Pjg4Djg6rjg7PjgrDjgZnjgovjg6Ljg4fjg6vjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg6zjg7Pjg4Djg6rjg7PjgrDjgZnjgovjg6Ljg4fjg6tcbiAgICovXG4gIHB1YmxpYyBnZXRNb2RlbCgpOiBDdWJpc21Nb2RlbCB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2lzQ3VsbGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX2lzUHJlbXVsdGlwbGllZEFscGhhID0gZmFsc2U7XG4gICAgdGhpcy5fYW5pc29ydG9weSA9IDAuMDtcbiAgICB0aGlzLl9tb2RlbCA9IG51bGw7XG4gICAgdGhpcy5fbW9kZWxDb2xvciA9IG5ldyBDdWJpc21UZXh0dXJlQ29sb3IoKTtcblxuICAgIC8vIOWNmOS9jeihjOWIl+OBq+WIneacn+WMllxuICAgIHRoaXMuX212cE1hdHJpeDR4NCA9IG5ldyBDdWJpc21NYXRyaXg0NCgpO1xuICAgIHRoaXMuX212cE1hdHJpeDR4NC5sb2FkSWRlbnRpdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vmj4/nlLvjga7lrp/oo4VcbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBkb0RyYXdNb2RlbCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiDmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jvvIjjgqLjg7zjg4jjg6Hjg4Pjgrfjg6XvvInjgpLmj4/nlLvjgZnjgotcbiAgICog44Od44Oq44K044Oz44Oh44OD44K344Ol44Go44OG44Kv44K544OB44Oj55Wq5Y+344KS44K744OD44OI44Gn5rih44GZ44CCXG4gICAqIEBwYXJhbSB0ZXh0dXJlTm8g5o+P55S744GZ44KL44OG44Kv44K544OB44Oj55Wq5Y+3XG4gICAqIEBwYXJhbSBpbmRleENvdW50IOaPj+eUu+OCquODluOCuOOCp+OCr+ODiOOBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgKiBAcGFyYW0gdmVydGV4Q291bnQg44Od44Oq44K044Oz44Oh44OD44K344Ol44Gu6aCC54K55pWwXG4gICAqIEBwYXJhbSBpbmRleEFycmF5IOODneODquOCtOODs+ODoeODg+OCt+ODpemggueCueOBruOCpOODs+ODh+ODg+OCr+OCuemFjeWIl1xuICAgKiBAcGFyYW0gdmVydGV4QXJyYXkg44Od44Oq44K044Oz44Oh44OD44K344Ol44Gu6aCC54K56YWN5YiXXG4gICAqIEBwYXJhbSB1dkFycmF5IHV26YWN5YiXXG4gICAqIEBwYXJhbSBvcGFjaXR5IOS4jemAj+aYjuW6plxuICAgKiBAcGFyYW0gY29sb3JCbGVuZE1vZGUg44Kr44Op44O844OW44Os44Oz44OH44Kj44Oz44Kw44Gu44K/44Kk44OXXG4gICAqIEBwYXJhbSBpbnZlcnRlZE1hc2sg44Oe44K544Kv5L2/55So5pmC44Gu44Oe44K544Kv44Gu5Y+N6Lui5L2/55SoXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZHJhd01lc2goXG4gICAgdGV4dHVyZU5vOiBudW1iZXIsXG4gICAgaW5kZXhDb3VudDogbnVtYmVyLFxuICAgIHZlcnRleENvdW50OiBudW1iZXIsXG4gICAgaW5kZXhBcnJheTogVWludDE2QXJyYXksXG4gICAgdmVydGV4QXJyYXk6IEZsb2F0MzJBcnJheSxcbiAgICB1dkFycmF5OiBGbG9hdDMyQXJyYXksXG4gICAgb3BhY2l0eTogbnVtYmVyLFxuICAgIGNvbG9yQmxlbmRNb2RlOiBDdWJpc21CbGVuZE1vZGUsXG4gICAgaW52ZXJ0ZWRNYXNrOiBib29sZWFuXG4gICk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIOODrOODs+ODgOODqeOBjOS/neaMgeOBmeOCi+mdmeeahOOBquODquOCveODvOOCueOCkumWi+aUvuOBmeOCi1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzdGF0aWNSZWxlYXNlOiBGdW5jdGlvbjtcblxuICBwcm90ZWN0ZWQgX212cE1hdHJpeDR4NDogQ3ViaXNtTWF0cml4NDQ7IC8vIE1vZGVsLVZpZXctUHJvamVjdGlvbiDooYzliJdcbiAgcHJvdGVjdGVkIF9tb2RlbENvbG9yOiBDdWJpc21UZXh0dXJlQ29sb3I7IC8vIOODouODh+ODq+iHquS9k+OBruOCq+ODqeODvO+8iFJHQkHvvIlcbiAgcHJvdGVjdGVkIF9pc0N1bGxpbmc6IGJvb2xlYW47IC8vIOOCq+ODquODs+OCsOOBjOacieWKueOBquOCiXRydWVcbiAgcHJvdGVjdGVkIF9pc1ByZW11bHRpcGxpZWRBbHBoYTogYm9vbGVhbjsgLy8g5LmX566X5riI44G/zrHjgarjgol0cnVlXG4gIHByb3RlY3RlZCBfYW5pc29ydG9weTogYW55OyAvLyDjg4bjgq/jgrnjg4Hjg6Pjga7nlbDmlrnmgKfjg5XjgqPjg6vjgr/jg6rjg7PjgrDjga7jg5Hjg6njg6Hjg7zjgr9cbiAgcHJvdGVjdGVkIF9tb2RlbDogQ3ViaXNtTW9kZWw7IC8vIOODrOODs+ODgOODquODs+OCsOWvvuixoeOBruODouODh+ODq1xufVxuXG5leHBvcnQgZW51bSBDdWJpc21CbGVuZE1vZGUge1xuICBDdWJpc21CbGVuZE1vZGVfTm9ybWFsID0gMCwgLy8g6YCa5bi4XG4gIEN1YmlzbUJsZW5kTW9kZV9BZGRpdGl2ZSA9IDEsIC8vIOWKoOeul1xuICBDdWJpc21CbGVuZE1vZGVfTXVsdGlwbGljYXRpdmUgPSAyIC8vIOS5l+eul1xufVxuXG4vKipcbiAqIOODhuOCr+OCueODgeODo+OBruiJsuOCklJHQkHjgafmibHjgYbjgZ/jgoHjga7jgq/jg6njgrlcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVRleHR1cmVDb2xvciB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuUiA9IDEuMDtcbiAgICB0aGlzLkcgPSAxLjA7XG4gICAgdGhpcy5CID0gMS4wO1xuICAgIHRoaXMuQSA9IDEuMDtcbiAgfVxuXG4gIFI6IG51bWJlcjsgLy8g6LWk44OB44Oj44Oz44ON44OrXG4gIEc6IG51bWJlcjsgLy8g57eR44OB44Oj44Oz44ON44OrXG4gIEI6IG51bWJlcjsgLy8g6Z2S44OB44Oj44Oz44ON44OrXG4gIEE6IG51bWJlcjsgLy8gzrHjg4Hjg6Pjg7Pjg43jg6tcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtcmVuZGVyZXInO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbUJsZW5kTW9kZSA9ICQuQ3ViaXNtQmxlbmRNb2RlO1xuICBleHBvcnQgdHlwZSBDdWJpc21CbGVuZE1vZGUgPSAkLkN1YmlzbUJsZW5kTW9kZTtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVJlbmRlcmVyID0gJC5DdWJpc21SZW5kZXJlcjtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUmVuZGVyZXIgPSAkLkN1YmlzbVJlbmRlcmVyO1xuICBleHBvcnQgY29uc3QgQ3ViaXNtVGV4dHVyZUNvbG9yID0gJC5DdWJpc21UZXh0dXJlQ29sb3I7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVRleHR1cmVDb2xvciA9ICQuQ3ViaXNtVGV4dHVyZUNvbG9yO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFRQTtBQXdLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUE1S0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQVVBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQTBEQTtBQUFBO0FBN05BO0FBK05BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQWZBO0FBa0JBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/rendering/cubismrenderer.ts\n");

/***/ }),

/***/ "./Framework/src/rendering/cubismrenderer_webgl.ts":
/*!*********************************************************!*\
  !*** ./Framework/src/rendering/cubismrenderer_webgl.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismRenderer_WebGL = exports.fragmentShaderSrcMaskInvertedPremultipliedAlpha = exports.fragmentShaderSrcMaskPremultipliedAlpha = exports.fragmentShaderSrcPremultipliedAlpha = exports.vertexShaderSrcMasked = exports.vertexShaderSrc = exports.fragmentShaderSrcsetupMask = exports.vertexShaderSrcSetupMask = exports.ShaderNames = exports.CubismShaderSet = exports.CubismShader_WebGL = exports.CubismClippingContext = exports.CubismRenderTextureResource = exports.CubismClippingManager_WebGL = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismmatrix44_1 = __webpack_require__(/*! ../math/cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\");\nvar csmmap_1 = __webpack_require__(/*! ../type/csmmap */ \"./Framework/src/type/csmmap.ts\");\nvar csmrectf_1 = __webpack_require__(/*! ../type/csmrectf */ \"./Framework/src/type/csmrectf.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar cubismrenderer_1 = __webpack_require__(/*! ./cubismrenderer */ \"./Framework/src/rendering/cubismrenderer.ts\");\nvar ColorChannelCount = 4;\nvar shaderCount = 10;\nvar s_instance;\nvar s_viewport;\nvar s_fbo;\nvar CubismClippingManager_WebGL = (function () {\n    function CubismClippingManager_WebGL() {\n        this._maskRenderTexture = null;\n        this._colorBuffer = null;\n        this._currentFrameNo = 0;\n        this._clippingMaskBufferSize = 256;\n        this._clippingContextListForMask = new csmvector_1.csmVector();\n        this._clippingContextListForDraw = new csmvector_1.csmVector();\n        this._channelColors = new csmvector_1.csmVector();\n        this._tmpBoundsOnModel = new csmrectf_1.csmRect();\n        this._tmpMatrix = new cubismmatrix44_1.CubismMatrix44();\n        this._tmpMatrixForMask = new cubismmatrix44_1.CubismMatrix44();\n        this._tmpMatrixForDraw = new cubismmatrix44_1.CubismMatrix44();\n        this._maskTexture = null;\n        var tmp = new cubismrenderer_1.CubismTextureColor();\n        tmp.R = 1.0;\n        tmp.G = 0.0;\n        tmp.B = 0.0;\n        tmp.A = 0.0;\n        this._channelColors.pushBack(tmp);\n        tmp = new cubismrenderer_1.CubismTextureColor();\n        tmp.R = 0.0;\n        tmp.G = 1.0;\n        tmp.B = 0.0;\n        tmp.A = 0.0;\n        this._channelColors.pushBack(tmp);\n        tmp = new cubismrenderer_1.CubismTextureColor();\n        tmp.R = 0.0;\n        tmp.G = 0.0;\n        tmp.B = 1.0;\n        tmp.A = 0.0;\n        this._channelColors.pushBack(tmp);\n        tmp = new cubismrenderer_1.CubismTextureColor();\n        tmp.R = 0.0;\n        tmp.G = 0.0;\n        tmp.B = 0.0;\n        tmp.A = 1.0;\n        this._channelColors.pushBack(tmp);\n    }\n    CubismClippingManager_WebGL.prototype.getChannelFlagAsColor = function (channelNo) {\n        return this._channelColors.at(channelNo);\n    };\n    CubismClippingManager_WebGL.prototype.getMaskRenderTexture = function () {\n        var ret = 0;\n        if (this._maskTexture && this._maskTexture.texture != 0) {\n            this._maskTexture.frameNo = this._currentFrameNo;\n            ret = this._maskTexture.texture;\n        }\n        if (ret == 0) {\n            var size = this._clippingMaskBufferSize;\n            this._colorBuffer = this.gl.createTexture();\n            this.gl.bindTexture(this.gl.TEXTURE_2D, this._colorBuffer);\n            this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, size, size, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n            this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n            this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n            this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n            this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n            ret = this.gl.createFramebuffer();\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, ret);\n            this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._colorBuffer, 0);\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n            this._maskTexture = new CubismRenderTextureResource(this._currentFrameNo, ret);\n        }\n        return ret;\n    };\n    CubismClippingManager_WebGL.prototype.setGL = function (gl) {\n        this.gl = gl;\n    };\n    CubismClippingManager_WebGL.prototype.calcClippedDrawTotalBounds = function (model, clippingContext) {\n        var clippedDrawTotalMinX = Number.MAX_VALUE;\n        var clippedDrawTotalMinY = Number.MAX_VALUE;\n        var clippedDrawTotalMaxX = Number.MIN_VALUE;\n        var clippedDrawTotalMaxY = Number.MIN_VALUE;\n        var clippedDrawCount = clippingContext._clippedDrawableIndexList.length;\n        for (var clippedDrawableIndex = 0; clippedDrawableIndex < clippedDrawCount; clippedDrawableIndex++) {\n            var drawableIndex = clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\n            var drawableVertexCount = model.getDrawableVertexCount(drawableIndex);\n            var drawableVertexes = model.getDrawableVertices(drawableIndex);\n            var minX = Number.MAX_VALUE;\n            var minY = Number.MAX_VALUE;\n            var maxX = Number.MIN_VALUE;\n            var maxY = Number.MIN_VALUE;\n            var loop = drawableVertexCount * live2dcubismframework_1.Constant.vertexStep;\n            for (var pi = live2dcubismframework_1.Constant.vertexOffset; pi < loop; pi += live2dcubismframework_1.Constant.vertexStep) {\n                var x = drawableVertexes[pi];\n                var y = drawableVertexes[pi + 1];\n                if (x < minX) {\n                    minX = x;\n                }\n                if (x > maxX) {\n                    maxX = x;\n                }\n                if (y < minY) {\n                    minY = y;\n                }\n                if (y > maxY) {\n                    maxY = y;\n                }\n            }\n            if (minX == Number.MAX_VALUE) {\n                continue;\n            }\n            if (minX < clippedDrawTotalMinX) {\n                clippedDrawTotalMinX = minX;\n            }\n            if (minY < clippedDrawTotalMinY) {\n                clippedDrawTotalMinY = minY;\n            }\n            if (maxX > clippedDrawTotalMaxX) {\n                clippedDrawTotalMaxX = maxX;\n            }\n            if (maxY > clippedDrawTotalMaxY) {\n                clippedDrawTotalMaxY = maxY;\n            }\n            if (clippedDrawTotalMinX == Number.MAX_VALUE) {\n                clippingContext._allClippedDrawRect.x = 0.0;\n                clippingContext._allClippedDrawRect.y = 0.0;\n                clippingContext._allClippedDrawRect.width = 0.0;\n                clippingContext._allClippedDrawRect.height = 0.0;\n                clippingContext._isUsing = false;\n            }\n            else {\n                clippingContext._isUsing = true;\n                var w = clippedDrawTotalMaxX - clippedDrawTotalMinX;\n                var h = clippedDrawTotalMaxY - clippedDrawTotalMinY;\n                clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\n                clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\n                clippingContext._allClippedDrawRect.width = w;\n                clippingContext._allClippedDrawRect.height = h;\n            }\n        }\n    };\n    CubismClippingManager_WebGL.prototype.release = function () {\n        for (var i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n            if (this._clippingContextListForMask.at(i)) {\n                this._clippingContextListForMask.at(i).release();\n                this._clippingContextListForMask.set(i, void 0);\n            }\n            this._clippingContextListForMask.set(i, null);\n        }\n        this._clippingContextListForMask = null;\n        for (var i = 0; i < this._clippingContextListForDraw.getSize(); i++) {\n            this._clippingContextListForDraw.set(i, null);\n        }\n        this._clippingContextListForDraw = null;\n        if (this._maskTexture) {\n            this.gl.deleteFramebuffer(this._maskTexture.texture);\n            this._maskTexture = null;\n        }\n        for (var i = 0; i < this._channelColors.getSize(); i++) {\n            this._channelColors.set(i, null);\n        }\n        this._channelColors = null;\n        this.gl.deleteTexture(this._colorBuffer);\n        this._colorBuffer = null;\n    };\n    CubismClippingManager_WebGL.prototype.initialize = function (model, drawableCount, drawableMasks, drawableMaskCounts) {\n        for (var i = 0; i < drawableCount; i++) {\n            if (drawableMaskCounts[i] <= 0) {\n                this._clippingContextListForDraw.pushBack(null);\n                continue;\n            }\n            var clippingContext = this.findSameClip(drawableMasks[i], drawableMaskCounts[i]);\n            if (clippingContext == null) {\n                clippingContext = new CubismClippingContext(this, drawableMasks[i], drawableMaskCounts[i]);\n                this._clippingContextListForMask.pushBack(clippingContext);\n            }\n            clippingContext.addClippedDrawable(i);\n            this._clippingContextListForDraw.pushBack(clippingContext);\n        }\n    };\n    CubismClippingManager_WebGL.prototype.setupClippingContext = function (model, renderer) {\n        this._currentFrameNo++;\n        var usingClipCount = 0;\n        for (var clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n            var cc = this._clippingContextListForMask.at(clipIndex);\n            this.calcClippedDrawTotalBounds(model, cc);\n            if (cc._isUsing) {\n                usingClipCount++;\n            }\n        }\n        if (usingClipCount > 0) {\n            this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize);\n            this._maskRenderTexture = this.getMaskRenderTexture();\n            var modelToWorldF = renderer.getMvpMatrix();\n            renderer.preDraw();\n            this.setupLayoutBounds(usingClipCount);\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTexture);\n            this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n            for (var clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n                var clipContext = this._clippingContextListForMask.at(clipIndex);\n                var allClipedDrawRect = clipContext._allClippedDrawRect;\n                var layoutBoundsOnTex01 = clipContext._layoutBounds;\n                var MARGIN = 0.05;\n                this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n                this._tmpBoundsOnModel.expand(allClipedDrawRect.width * MARGIN, allClipedDrawRect.height * MARGIN);\n                var scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n                var scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n                {\n                    this._tmpMatrix.loadIdentity();\n                    {\n                        this._tmpMatrix.translateRelative(-1.0, -1.0);\n                        this._tmpMatrix.scaleRelative(2.0, 2.0);\n                    }\n                    {\n                        this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n                        this._tmpMatrix.scaleRelative(scaleX, scaleY);\n                        this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n                    }\n                    this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n                }\n                {\n                    this._tmpMatrix.loadIdentity();\n                    {\n                        this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n                        this._tmpMatrix.scaleRelative(scaleX, scaleY);\n                        this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n                    }\n                    this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n                }\n                clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n                clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n                var clipDrawCount = clipContext._clippingIdCount;\n                for (var i = 0; i < clipDrawCount; i++) {\n                    var clipDrawIndex = clipContext._clippingIdList[i];\n                    if (!model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n                        continue;\n                    }\n                    renderer.setIsCulling(model.getDrawableCulling(clipDrawIndex) != false);\n                    renderer.setClippingContextBufferForMask(clipContext);\n                    renderer.drawMesh(model.getDrawableTextureIndices(clipDrawIndex), model.getDrawableVertexIndexCount(clipDrawIndex), model.getDrawableVertexCount(clipDrawIndex), model.getDrawableVertexIndices(clipDrawIndex), model.getDrawableVertices(clipDrawIndex), model.getDrawableVertexUvs(clipDrawIndex), model.getDrawableOpacity(clipDrawIndex), cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal, false);\n                }\n            }\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n            renderer.setClippingContextBufferForMask(null);\n            this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n        }\n    };\n    CubismClippingManager_WebGL.prototype.findSameClip = function (drawableMasks, drawableMaskCounts) {\n        for (var i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n            var clippingContext = this._clippingContextListForMask.at(i);\n            var count = clippingContext._clippingIdCount;\n            if (count != drawableMaskCounts) {\n                continue;\n            }\n            var sameCount = 0;\n            for (var j = 0; j < count; j++) {\n                var clipId = clippingContext._clippingIdList[j];\n                for (var k = 0; k < count; k++) {\n                    if (drawableMasks[k] == clipId) {\n                        sameCount++;\n                        break;\n                    }\n                }\n            }\n            if (sameCount == count) {\n                return clippingContext;\n            }\n        }\n        return null;\n    };\n    CubismClippingManager_WebGL.prototype.setupLayoutBounds = function (usingClipCount) {\n        var div = usingClipCount / ColorChannelCount;\n        var mod = usingClipCount % ColorChannelCount;\n        div = ~~div;\n        mod = ~~mod;\n        var curClipIndex = 0;\n        for (var channelNo = 0; channelNo < ColorChannelCount; channelNo++) {\n            var layoutCount = div + (channelNo < mod ? 1 : 0);\n            if (layoutCount == 0) {\n            }\n            else if (layoutCount == 1) {\n                var clipContext = this._clippingContextListForMask.at(curClipIndex++);\n                clipContext._layoutChannelNo = channelNo;\n                clipContext._layoutBounds.x = 0.0;\n                clipContext._layoutBounds.y = 0.0;\n                clipContext._layoutBounds.width = 1.0;\n                clipContext._layoutBounds.height = 1.0;\n            }\n            else if (layoutCount == 2) {\n                for (var i = 0; i < layoutCount; i++) {\n                    var xpos = i % 2;\n                    xpos = ~~xpos;\n                    var cc = this._clippingContextListForMask.at(curClipIndex++);\n                    cc._layoutChannelNo = channelNo;\n                    cc._layoutBounds.x = xpos * 0.5;\n                    cc._layoutBounds.y = 0.0;\n                    cc._layoutBounds.width = 0.5;\n                    cc._layoutBounds.height = 1.0;\n                }\n            }\n            else if (layoutCount <= 4) {\n                for (var i = 0; i < layoutCount; i++) {\n                    var xpos = i % 2;\n                    var ypos = i / 2;\n                    xpos = ~~xpos;\n                    ypos = ~~ypos;\n                    var cc = this._clippingContextListForMask.at(curClipIndex++);\n                    cc._layoutChannelNo = channelNo;\n                    cc._layoutBounds.x = xpos * 0.5;\n                    cc._layoutBounds.y = ypos * 0.5;\n                    cc._layoutBounds.width = 0.5;\n                    cc._layoutBounds.height = 0.5;\n                }\n            }\n            else if (layoutCount <= 9) {\n                for (var i = 0; i < layoutCount; i++) {\n                    var xpos = i % 3;\n                    var ypos = i / 3;\n                    xpos = ~~xpos;\n                    ypos = ~~ypos;\n                    var cc = this._clippingContextListForMask.at(curClipIndex++);\n                    cc._layoutChannelNo = channelNo;\n                    cc._layoutBounds.x = xpos / 3.0;\n                    cc._layoutBounds.y = ypos / 3.0;\n                    cc._layoutBounds.width = 1.0 / 3.0;\n                    cc._layoutBounds.height = 1.0 / 3.0;\n                }\n            }\n            else {\n                cubismdebug_1.CubismLogError('not supported mask count : {0}', layoutCount);\n            }\n        }\n    };\n    CubismClippingManager_WebGL.prototype.getColorBuffer = function () {\n        return this._colorBuffer;\n    };\n    CubismClippingManager_WebGL.prototype.getClippingContextListForDraw = function () {\n        return this._clippingContextListForDraw;\n    };\n    CubismClippingManager_WebGL.prototype.setClippingMaskBufferSize = function (size) {\n        this._clippingMaskBufferSize = size;\n    };\n    CubismClippingManager_WebGL.prototype.getClippingMaskBufferSize = function () {\n        return this._clippingMaskBufferSize;\n    };\n    return CubismClippingManager_WebGL;\n}());\nexports.CubismClippingManager_WebGL = CubismClippingManager_WebGL;\nvar CubismRenderTextureResource = (function () {\n    function CubismRenderTextureResource(frameNo, texture) {\n        this.frameNo = frameNo;\n        this.texture = texture;\n    }\n    return CubismRenderTextureResource;\n}());\nexports.CubismRenderTextureResource = CubismRenderTextureResource;\nvar CubismClippingContext = (function () {\n    function CubismClippingContext(manager, clippingDrawableIndices, clipCount) {\n        this._owner = manager;\n        this._clippingIdList = clippingDrawableIndices;\n        this._clippingIdCount = clipCount;\n        this._allClippedDrawRect = new csmrectf_1.csmRect();\n        this._layoutBounds = new csmrectf_1.csmRect();\n        this._clippedDrawableIndexList = [];\n        this._matrixForMask = new cubismmatrix44_1.CubismMatrix44();\n        this._matrixForDraw = new cubismmatrix44_1.CubismMatrix44();\n    }\n    CubismClippingContext.prototype.release = function () {\n        if (this._layoutBounds != null) {\n            this._layoutBounds = null;\n        }\n        if (this._allClippedDrawRect != null) {\n            this._allClippedDrawRect = null;\n        }\n        if (this._clippedDrawableIndexList != null) {\n            this._clippedDrawableIndexList = null;\n        }\n    };\n    CubismClippingContext.prototype.addClippedDrawable = function (drawableIndex) {\n        this._clippedDrawableIndexList.push(drawableIndex);\n    };\n    CubismClippingContext.prototype.getClippingManager = function () {\n        return this._owner;\n    };\n    CubismClippingContext.prototype.setGl = function (gl) {\n        this._owner.setGL(gl);\n    };\n    return CubismClippingContext;\n}());\nexports.CubismClippingContext = CubismClippingContext;\nvar CubismShader_WebGL = (function () {\n    function CubismShader_WebGL() {\n        this._shaderSets = new csmvector_1.csmVector();\n    }\n    CubismShader_WebGL.getInstance = function () {\n        if (s_instance == null) {\n            s_instance = new CubismShader_WebGL();\n            return s_instance;\n        }\n        return s_instance;\n    };\n    CubismShader_WebGL.deleteInstance = function () {\n        if (s_instance) {\n            s_instance.release();\n            s_instance = null;\n        }\n    };\n    CubismShader_WebGL.prototype.release = function () {\n        this.releaseShaderProgram();\n    };\n    CubismShader_WebGL.prototype.setupShaderProgram = function (renderer, textureId, vertexCount, vertexArray, indexArray, uvArray, bufferData, opacity, colorBlendMode, baseColor, isPremultipliedAlpha, matrix4x4, invertedMask) {\n        if (!isPremultipliedAlpha) {\n            cubismdebug_1.CubismLogError('NoPremultipliedAlpha is not allowed');\n        }\n        if (this._shaderSets.getSize() == 0) {\n            this.generateShaders();\n        }\n        var SRC_COLOR;\n        var DST_COLOR;\n        var SRC_ALPHA;\n        var DST_ALPHA;\n        if (renderer.getClippingContextBufferForMask() != null) {\n            var shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_SetupMask);\n            this.gl.useProgram(shaderSet.shaderProgram);\n            this.gl.activeTexture(this.gl.TEXTURE0);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n            this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n            if (bufferData.vertex == null) {\n                bufferData.vertex = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n            if (bufferData.uv == null) {\n                bufferData.uv = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n            var channelNo = renderer.getClippingContextBufferForMask()\n                ._layoutChannelNo;\n            var colorChannel = renderer\n                .getClippingContextBufferForMask()\n                .getClippingManager()\n                .getChannelFlagAsColor(channelNo);\n            this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n            this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, renderer.getClippingContextBufferForMask()._matrixForMask.getArray());\n            var rect = renderer.getClippingContextBufferForMask()\n                ._layoutBounds;\n            this.gl.uniform4f(shaderSet.uniformBaseColorLocation, rect.x * 2.0 - 1.0, rect.y * 2.0 - 1.0, rect.getRight() * 2.0 - 1.0, rect.getBottom() * 2.0 - 1.0);\n            SRC_COLOR = this.gl.ZERO;\n            DST_COLOR = this.gl.ONE_MINUS_SRC_COLOR;\n            SRC_ALPHA = this.gl.ZERO;\n            DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n        }\n        else {\n            var masked = renderer.getClippingContextBufferForDraw() != null;\n            var offset = masked ? (invertedMask ? 2 : 1) : 0;\n            var shaderSet = new CubismShaderSet();\n            switch (colorBlendMode) {\n                case cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal:\n                default:\n                    shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset);\n                    SRC_COLOR = this.gl.ONE;\n                    DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n                    SRC_ALPHA = this.gl.ONE;\n                    DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n                    break;\n                case cubismrenderer_1.CubismBlendMode.CubismBlendMode_Additive:\n                    shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_AddPremultipliedAlpha + offset);\n                    SRC_COLOR = this.gl.ONE;\n                    DST_COLOR = this.gl.ONE;\n                    SRC_ALPHA = this.gl.ZERO;\n                    DST_ALPHA = this.gl.ONE;\n                    break;\n                case cubismrenderer_1.CubismBlendMode.CubismBlendMode_Multiplicative:\n                    shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_MultPremultipliedAlpha + offset);\n                    SRC_COLOR = this.gl.DST_COLOR;\n                    DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n                    SRC_ALPHA = this.gl.ZERO;\n                    DST_ALPHA = this.gl.ONE;\n                    break;\n            }\n            this.gl.useProgram(shaderSet.shaderProgram);\n            if (bufferData.vertex == null) {\n                bufferData.vertex = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n            if (bufferData.uv == null) {\n                bufferData.uv = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n            if (masked) {\n                this.gl.activeTexture(this.gl.TEXTURE1);\n                var tex = renderer\n                    .getClippingContextBufferForDraw()\n                    .getClippingManager()\n                    .getColorBuffer();\n                this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\n                this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\n                this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, renderer.getClippingContextBufferForDraw()._matrixForDraw.getArray());\n                var channelNo = renderer.getClippingContextBufferForDraw()\n                    ._layoutChannelNo;\n                var colorChannel = renderer\n                    .getClippingContextBufferForDraw()\n                    .getClippingManager()\n                    .getChannelFlagAsColor(channelNo);\n                this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n            }\n            this.gl.activeTexture(this.gl.TEXTURE0);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n            this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n            this.gl.uniformMatrix4fv(shaderSet.uniformMatrixLocation, false, matrix4x4.getArray());\n            this.gl.uniform4f(shaderSet.uniformBaseColorLocation, baseColor.R, baseColor.G, baseColor.B, baseColor.A);\n        }\n        if (bufferData.index == null) {\n            bufferData.index = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, bufferData.index);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.blendFuncSeparate(SRC_COLOR, DST_COLOR, SRC_ALPHA, DST_ALPHA);\n    };\n    CubismShader_WebGL.prototype.releaseShaderProgram = function () {\n        for (var i = 0; i < this._shaderSets.getSize(); i++) {\n            this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram);\n            this._shaderSets.at(i).shaderProgram = 0;\n            this._shaderSets.set(i, void 0);\n            this._shaderSets.set(i, null);\n        }\n    };\n    CubismShader_WebGL.prototype.generateShaders = function () {\n        for (var i = 0; i < shaderCount; i++) {\n            this._shaderSets.pushBack(new CubismShaderSet());\n        }\n        this._shaderSets.at(0).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrcSetupMask, exports.fragmentShaderSrcsetupMask);\n        this._shaderSets.at(1).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrc, exports.fragmentShaderSrcPremultipliedAlpha);\n        this._shaderSets.at(2).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrcMasked, exports.fragmentShaderSrcMaskPremultipliedAlpha);\n        this._shaderSets.at(3).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrcMasked, exports.fragmentShaderSrcMaskInvertedPremultipliedAlpha);\n        this._shaderSets.at(4).shaderProgram = this._shaderSets.at(1).shaderProgram;\n        this._shaderSets.at(5).shaderProgram = this._shaderSets.at(2).shaderProgram;\n        this._shaderSets.at(6).shaderProgram = this._shaderSets.at(3).shaderProgram;\n        this._shaderSets.at(7).shaderProgram = this._shaderSets.at(1).shaderProgram;\n        this._shaderSets.at(8).shaderProgram = this._shaderSets.at(2).shaderProgram;\n        this._shaderSets.at(9).shaderProgram = this._shaderSets.at(3).shaderProgram;\n        this._shaderSets.at(0).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram, 'a_position');\n        this._shaderSets.at(0).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(0).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 's_texture0');\n        this._shaderSets.at(0).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(0).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(0).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(1).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram, 'a_position');\n        this._shaderSets.at(1).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(1).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 's_texture0');\n        this._shaderSets.at(1).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_matrix');\n        this._shaderSets.at(1).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(2).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram, 'a_position');\n        this._shaderSets.at(2).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(2).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 's_texture0');\n        this._shaderSets.at(2).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 's_texture1');\n        this._shaderSets.at(2).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_matrix');\n        this._shaderSets.at(2).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(2).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(2).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(3).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram, 'a_position');\n        this._shaderSets.at(3).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(3).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 's_texture0');\n        this._shaderSets.at(3).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 's_texture1');\n        this._shaderSets.at(3).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_matrix');\n        this._shaderSets.at(3).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(3).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(3).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(4).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram, 'a_position');\n        this._shaderSets.at(4).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(4).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 's_texture0');\n        this._shaderSets.at(4).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_matrix');\n        this._shaderSets.at(4).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(5).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram, 'a_position');\n        this._shaderSets.at(5).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(5).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 's_texture0');\n        this._shaderSets.at(5).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 's_texture1');\n        this._shaderSets.at(5).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_matrix');\n        this._shaderSets.at(5).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(5).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(5).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(6).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram, 'a_position');\n        this._shaderSets.at(6).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(6).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 's_texture0');\n        this._shaderSets.at(6).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 's_texture1');\n        this._shaderSets.at(6).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_matrix');\n        this._shaderSets.at(6).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(6).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(6).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(7).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram, 'a_position');\n        this._shaderSets.at(7).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(7).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 's_texture0');\n        this._shaderSets.at(7).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_matrix');\n        this._shaderSets.at(7).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(8).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram, 'a_position');\n        this._shaderSets.at(8).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(8).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 's_texture0');\n        this._shaderSets.at(8).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 's_texture1');\n        this._shaderSets.at(8).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_matrix');\n        this._shaderSets.at(8).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(8).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(8).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_baseColor');\n        this._shaderSets.at(9).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram, 'a_position');\n        this._shaderSets.at(9).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram, 'a_texCoord');\n        this._shaderSets.at(9).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 's_texture0');\n        this._shaderSets.at(9).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 's_texture1');\n        this._shaderSets.at(9).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_matrix');\n        this._shaderSets.at(9).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_clipMatrix');\n        this._shaderSets.at(9).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_channelFlag');\n        this._shaderSets.at(9).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_baseColor');\n    };\n    CubismShader_WebGL.prototype.loadShaderProgram = function (vertexShaderSource, fragmentShaderSource) {\n        var shaderProgram = this.gl.createProgram();\n        var vertShader = this.compileShaderSource(this.gl.VERTEX_SHADER, vertexShaderSource);\n        if (!vertShader) {\n            cubismdebug_1.CubismLogError('Vertex shader compile error!');\n            return 0;\n        }\n        var fragShader = this.compileShaderSource(this.gl.FRAGMENT_SHADER, fragmentShaderSource);\n        if (!fragShader) {\n            cubismdebug_1.CubismLogError('Vertex shader compile error!');\n            return 0;\n        }\n        this.gl.attachShader(shaderProgram, vertShader);\n        this.gl.attachShader(shaderProgram, fragShader);\n        this.gl.linkProgram(shaderProgram);\n        var linkStatus = this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS);\n        if (!linkStatus) {\n            cubismdebug_1.CubismLogError('Failed to link program: {0}', shaderProgram);\n            this.gl.deleteShader(vertShader);\n            vertShader = 0;\n            this.gl.deleteShader(fragShader);\n            fragShader = 0;\n            if (shaderProgram) {\n                this.gl.deleteProgram(shaderProgram);\n                shaderProgram = 0;\n            }\n            return 0;\n        }\n        this.gl.deleteShader(vertShader);\n        this.gl.deleteShader(fragShader);\n        return shaderProgram;\n    };\n    CubismShader_WebGL.prototype.compileShaderSource = function (shaderType, shaderSource) {\n        var source = shaderSource;\n        var shader = this.gl.createShader(shaderType);\n        this.gl.shaderSource(shader, source);\n        this.gl.compileShader(shader);\n        if (!shader) {\n            var log = this.gl.getShaderInfoLog(shader);\n            cubismdebug_1.CubismLogError('Shader compile log: {0} ', log);\n        }\n        var status = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n        if (!status) {\n            this.gl.deleteShader(shader);\n            return null;\n        }\n        return shader;\n    };\n    CubismShader_WebGL.prototype.setGl = function (gl) {\n        this.gl = gl;\n    };\n    return CubismShader_WebGL;\n}());\nexports.CubismShader_WebGL = CubismShader_WebGL;\nvar CubismShaderSet = (function () {\n    function CubismShaderSet() {\n    }\n    return CubismShaderSet;\n}());\nexports.CubismShaderSet = CubismShaderSet;\nvar ShaderNames;\n(function (ShaderNames) {\n    ShaderNames[ShaderNames[\"ShaderNames_SetupMask\"] = 0] = \"ShaderNames_SetupMask\";\n    ShaderNames[ShaderNames[\"ShaderNames_NormalPremultipliedAlpha\"] = 1] = \"ShaderNames_NormalPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_NormalMaskedPremultipliedAlpha\"] = 2] = \"ShaderNames_NormalMaskedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\"] = 3] = \"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_AddPremultipliedAlpha\"] = 4] = \"ShaderNames_AddPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_AddMaskedPremultipliedAlpha\"] = 5] = \"ShaderNames_AddMaskedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_AddMaskedPremultipliedAlphaInverted\"] = 6] = \"ShaderNames_AddMaskedPremultipliedAlphaInverted\";\n    ShaderNames[ShaderNames[\"ShaderNames_MultPremultipliedAlpha\"] = 7] = \"ShaderNames_MultPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_MultMaskedPremultipliedAlpha\"] = 8] = \"ShaderNames_MultMaskedPremultipliedAlpha\";\n    ShaderNames[ShaderNames[\"ShaderNames_MultMaskedPremultipliedAlphaInverted\"] = 9] = \"ShaderNames_MultMaskedPremultipliedAlphaInverted\";\n})(ShaderNames = exports.ShaderNames || (exports.ShaderNames = {}));\nexports.vertexShaderSrcSetupMask = 'attribute vec4     a_position;' +\n    'attribute vec2     a_texCoord;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_myPos;' +\n    'uniform mat4       u_clipMatrix;' +\n    'void main()' +\n    '{' +\n    '   gl_Position = u_clipMatrix * a_position;' +\n    '   v_myPos = u_clipMatrix * a_position;' +\n    '   v_texCoord = a_texCoord;' +\n    '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n    '}';\nexports.fragmentShaderSrcsetupMask = 'precision mediump float;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_myPos;' +\n    'uniform vec4       u_baseColor;' +\n    'uniform vec4       u_channelFlag;' +\n    'uniform sampler2D  s_texture0;' +\n    'void main()' +\n    '{' +\n    '   float isInside = ' +\n    '       step(u_baseColor.x, v_myPos.x/v_myPos.w)' +\n    '       * step(u_baseColor.y, v_myPos.y/v_myPos.w)' +\n    '       * step(v_myPos.x/v_myPos.w, u_baseColor.z)' +\n    '       * step(v_myPos.y/v_myPos.w, u_baseColor.w);' +\n    '   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;' +\n    '}';\nexports.vertexShaderSrc = 'attribute vec4     a_position;' +\n    'attribute vec2     a_texCoord;' +\n    'varying vec2       v_texCoord;' +\n    'uniform mat4       u_matrix;' +\n    'void main()' +\n    '{' +\n    '   gl_Position = u_matrix * a_position;' +\n    '   v_texCoord = a_texCoord;' +\n    '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n    '}';\nexports.vertexShaderSrcMasked = 'attribute vec4     a_position;' +\n    'attribute vec2     a_texCoord;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_clipPos;' +\n    'uniform mat4       u_matrix;' +\n    'uniform mat4       u_clipMatrix;' +\n    'void main()' +\n    '{' +\n    '   gl_Position = u_matrix * a_position;' +\n    '   v_clipPos = u_clipMatrix * a_position;' +\n    '   v_texCoord = a_texCoord;' +\n    '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n    '}';\nexports.fragmentShaderSrcPremultipliedAlpha = 'precision mediump float;' +\n    'varying vec2       v_texCoord;' +\n    'uniform vec4       u_baseColor;' +\n    'uniform sampler2D  s_texture0;' +\n    'void main()' +\n    '{' +\n    '   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;' +\n    '}';\nexports.fragmentShaderSrcMaskPremultipliedAlpha = 'precision mediump float;' +\n    'varying vec2       v_texCoord;' +\n    'varying vec4       v_clipPos;' +\n    'uniform vec4       u_baseColor;' +\n    'uniform vec4       u_channelFlag;' +\n    'uniform sampler2D  s_texture0;' +\n    'uniform sampler2D  s_texture1;' +\n    'void main()' +\n    '{' +\n    '   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;' +\n    '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\n    '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\n    '   col_formask = col_formask * maskVal;' +\n    '   gl_FragColor = col_formask;' +\n    '}';\nexports.fragmentShaderSrcMaskInvertedPremultipliedAlpha = 'precision mediump float;' +\n    'varying vec2 v_texCoord;' +\n    'varying vec4 v_clipPos;' +\n    'uniform sampler2D s_texture0;' +\n    'uniform sampler2D s_texture1;' +\n    'uniform vec4 u_channelFlag;' +\n    'uniform vec4 u_baseColor;' +\n    'void main()' +\n    '{' +\n    'vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;' +\n    'vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\n    'float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\n    'col_formask = col_formask * (1.0 - maskVal);' +\n    'gl_FragColor = col_formask;' +\n    '}';\nvar CubismRenderer_WebGL = (function (_super) {\n    __extends(CubismRenderer_WebGL, _super);\n    function CubismRenderer_WebGL() {\n        var _this = _super.call(this) || this;\n        _this._clippingContextBufferForMask = null;\n        _this._clippingContextBufferForDraw = null;\n        _this._clippingManager = new CubismClippingManager_WebGL();\n        _this.firstDraw = true;\n        _this._textures = new csmmap_1.csmMap();\n        _this._sortedDrawableIndexList = new csmvector_1.csmVector();\n        _this._bufferData = {\n            vertex: WebGLBuffer = null,\n            uv: WebGLBuffer = null,\n            index: WebGLBuffer = null\n        };\n        _this._textures.prepareCapacity(32, true);\n        return _this;\n    }\n    CubismRenderer_WebGL.prototype.initialize = function (model) {\n        if (model.isUsingMasking()) {\n            this._clippingManager = new CubismClippingManager_WebGL();\n            this._clippingManager.initialize(model, model.getDrawableCount(), model.getDrawableMasks(), model.getDrawableMaskCounts());\n        }\n        this._sortedDrawableIndexList.resize(model.getDrawableCount(), 0);\n        _super.prototype.initialize.call(this, model);\n    };\n    CubismRenderer_WebGL.prototype.bindTexture = function (modelTextureNo, glTexture) {\n        this._textures.setValue(modelTextureNo, glTexture);\n    };\n    CubismRenderer_WebGL.prototype.getBindedTextures = function () {\n        return this._textures;\n    };\n    CubismRenderer_WebGL.prototype.setClippingMaskBufferSize = function (size) {\n        this._clippingManager.release();\n        this._clippingManager = void 0;\n        this._clippingManager = null;\n        this._clippingManager = new CubismClippingManager_WebGL();\n        this._clippingManager.setClippingMaskBufferSize(size);\n        this._clippingManager.initialize(this.getModel(), this.getModel().getDrawableCount(), this.getModel().getDrawableMasks(), this.getModel().getDrawableMaskCounts());\n    };\n    CubismRenderer_WebGL.prototype.getClippingMaskBufferSize = function () {\n        return this._clippingManager.getClippingMaskBufferSize();\n    };\n    CubismRenderer_WebGL.prototype.release = function () {\n        this._clippingManager.release();\n        this._clippingManager = void 0;\n        this._clippingManager = null;\n        this.gl.deleteBuffer(this._bufferData.vertex);\n        this._bufferData.vertex = null;\n        this.gl.deleteBuffer(this._bufferData.uv);\n        this._bufferData.uv = null;\n        this.gl.deleteBuffer(this._bufferData.index);\n        this._bufferData.index = null;\n        this._bufferData = null;\n        this._textures = null;\n    };\n    CubismRenderer_WebGL.prototype.doDrawModel = function () {\n        if (this._clippingManager != null) {\n            this.preDraw();\n            this._clippingManager.setupClippingContext(this.getModel(), this);\n        }\n        this.preDraw();\n        var drawableCount = this.getModel().getDrawableCount();\n        var renderOrder = this.getModel().getDrawableRenderOrders();\n        for (var i = 0; i < drawableCount; ++i) {\n            var order = renderOrder[i];\n            this._sortedDrawableIndexList.set(order, i);\n        }\n        for (var i = 0; i < drawableCount; ++i) {\n            var drawableIndex = this._sortedDrawableIndexList.at(i);\n            if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\n                continue;\n            }\n            this.setClippingContextBufferForDraw(this._clippingManager != null\n                ? this._clippingManager\n                    .getClippingContextListForDraw()\n                    .at(drawableIndex)\n                : null);\n            this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\n            this.drawMesh(this.getModel().getDrawableTextureIndices(drawableIndex), this.getModel().getDrawableVertexIndexCount(drawableIndex), this.getModel().getDrawableVertexCount(drawableIndex), this.getModel().getDrawableVertexIndices(drawableIndex), this.getModel().getDrawableVertices(drawableIndex), this.getModel().getDrawableVertexUvs(drawableIndex), this.getModel().getDrawableOpacity(drawableIndex), this.getModel().getDrawableBlendMode(drawableIndex), this.getModel().getDrawableInvertedMaskBit(drawableIndex));\n        }\n    };\n    CubismRenderer_WebGL.prototype.drawMesh = function (textureNo, indexCount, vertexCount, indexArray, vertexArray, uvArray, opacity, colorBlendMode, invertedMask) {\n        if (this.isCulling()) {\n            this.gl.enable(this.gl.CULL_FACE);\n        }\n        else {\n            this.gl.disable(this.gl.CULL_FACE);\n        }\n        this.gl.frontFace(this.gl.CCW);\n        var modelColorRGBA = this.getModelColor();\n        if (this.getClippingContextBufferForMask() == null) {\n            modelColorRGBA.A *= opacity;\n            if (this.isPremultipliedAlpha()) {\n                modelColorRGBA.R *= modelColorRGBA.A;\n                modelColorRGBA.G *= modelColorRGBA.A;\n                modelColorRGBA.B *= modelColorRGBA.A;\n            }\n        }\n        var drawtexture;\n        if (this._textures.getValue(textureNo) != null) {\n            drawtexture = this._textures.getValue(textureNo);\n        }\n        else {\n            drawtexture = null;\n        }\n        CubismShader_WebGL.getInstance().setupShaderProgram(this, drawtexture, vertexCount, vertexArray, indexArray, uvArray, this._bufferData, opacity, colorBlendMode, modelColorRGBA, this.isPremultipliedAlpha(), this.getMvpMatrix(), invertedMask);\n        this.gl.drawElements(this.gl.TRIANGLES, indexCount, this.gl.UNSIGNED_SHORT, 0);\n        this.gl.useProgram(null);\n        this.setClippingContextBufferForDraw(null);\n        this.setClippingContextBufferForMask(null);\n    };\n    CubismRenderer_WebGL.doStaticRelease = function () {\n        CubismShader_WebGL.deleteInstance();\n    };\n    CubismRenderer_WebGL.prototype.setRenderState = function (fbo, viewport) {\n        s_fbo = fbo;\n        s_viewport = viewport;\n    };\n    CubismRenderer_WebGL.prototype.preDraw = function () {\n        if (this.firstDraw) {\n            this.firstDraw = false;\n            this._anisortopy =\n                this.gl.getExtension('EXT_texture_filter_anisotropic') ||\n                    this.gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic') ||\n                    this.gl.getExtension('MOZ_EXT_texture_filter_anisotropic');\n        }\n        this.gl.disable(this.gl.SCISSOR_TEST);\n        this.gl.disable(this.gl.STENCIL_TEST);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.frontFace(this.gl.CW);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.colorMask(true, true, true, true);\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n    };\n    CubismRenderer_WebGL.prototype.setClippingContextBufferForMask = function (clip) {\n        this._clippingContextBufferForMask = clip;\n    };\n    CubismRenderer_WebGL.prototype.getClippingContextBufferForMask = function () {\n        return this._clippingContextBufferForMask;\n    };\n    CubismRenderer_WebGL.prototype.setClippingContextBufferForDraw = function (clip) {\n        this._clippingContextBufferForDraw = clip;\n    };\n    CubismRenderer_WebGL.prototype.getClippingContextBufferForDraw = function () {\n        return this._clippingContextBufferForDraw;\n    };\n    CubismRenderer_WebGL.prototype.startUp = function (gl) {\n        this.gl = gl;\n        this._clippingManager.setGL(gl);\n        CubismShader_WebGL.getInstance().setGl(gl);\n    };\n    return CubismRenderer_WebGL;\n}(cubismrenderer_1.CubismRenderer));\nexports.CubismRenderer_WebGL = CubismRenderer_WebGL;\ncubismrenderer_1.CubismRenderer.staticRelease = function () {\n    CubismRenderer_WebGL.doStaticRelease();\n};\nvar $ = __importStar(__webpack_require__(/*! ./cubismrenderer_webgl */ \"./Framework/src/rendering/cubismrenderer_webgl.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismClippingContext = $.CubismClippingContext;\n    Live2DCubismFramework.CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\n    Live2DCubismFramework.CubismRenderTextureResource = $.CubismRenderTextureResource;\n    Live2DCubismFramework.CubismRenderer_WebGL = $.CubismRenderer_WebGL;\n    Live2DCubismFramework.CubismShaderSet = $.CubismShaderSet;\n    Live2DCubismFramework.CubismShader_WebGL = $.CubismShader_WebGL;\n    Live2DCubismFramework.ShaderNames = $.ShaderNames;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3JlbmRlcmluZy9jdWJpc21yZW5kZXJlcl93ZWJnbC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0ZyYW1ld29yay9zcmMvcmVuZGVyaW5nL2N1YmlzbXJlbmRlcmVyX3dlYmdsLnRzP2VhMWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgQ29uc3RhbnQgfSBmcm9tICcuLi9saXZlMmRjdWJpc21mcmFtZXdvcmsnO1xuaW1wb3J0IHsgQ3ViaXNtTWF0cml4NDQgfSBmcm9tICcuLi9tYXRoL2N1YmlzbW1hdHJpeDQ0JztcbmltcG9ydCB7IEN1YmlzbU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvY3ViaXNtbW9kZWwnO1xuaW1wb3J0IHsgY3NtTWFwIH0gZnJvbSAnLi4vdHlwZS9jc21tYXAnO1xuaW1wb3J0IHsgY3NtUmVjdCB9IGZyb20gJy4uL3R5cGUvY3NtcmVjdGYnO1xuaW1wb3J0IHsgY3NtVmVjdG9yIH0gZnJvbSAnLi4vdHlwZS9jc212ZWN0b3InO1xuaW1wb3J0IHsgQ3ViaXNtTG9nRXJyb3IgfSBmcm9tICcuLi91dGlscy9jdWJpc21kZWJ1Zyc7XG5pbXBvcnQge1xuICBDdWJpc21CbGVuZE1vZGUsXG4gIEN1YmlzbVJlbmRlcmVyLFxuICBDdWJpc21UZXh0dXJlQ29sb3Jcbn0gZnJvbSAnLi9jdWJpc21yZW5kZXJlcic7XG5cbmNvbnN0IENvbG9yQ2hhbm5lbENvdW50ID0gNDsgLy8g5a6f6aiT5pmC44GrMeODgeODo+ODs+ODjeODq+OBruWgtOWQiOOBrzHjgIFSR0LjgaDjgZHjga7loLTlkIjjga8z44CB44Ki44Or44OV44Kh44KC5ZCr44KB44KL5aC05ZCI44GvNFxuXG5jb25zdCBzaGFkZXJDb3VudCA9IDEwOyAvLyDjgrfjgqfjg7zjg4Djg7zjga7mlbAgPSDjg57jgrnjgq/nlJ/miJDnlKggKyAo6YCa5bi455SoICsg5Yqg566XICsg5LmX566XKSAqICjjg57jgrnjgq/nhKHjga7kuZfnrpfmuIjjgqLjg6vjg5XjgqHlr77lv5zniYggKyDjg57jgrnjgq/mnInjga7kuZfnrpfmuIjjgqLjg6vjg5XjgqHlr77lv5zniYggKyDjg57jgrnjgq/mnInlj43ou6Ljga7kuZfnrpfmuIjjgqLjg6vjg5XjgqHlr77lv5zniYgpXG5sZXQgc19pbnN0YW5jZTogQ3ViaXNtU2hhZGVyX1dlYkdMO1xubGV0IHNfdmlld3BvcnQ6IG51bWJlcltdO1xubGV0IHNfZmJvOiBXZWJHTEZyYW1lYnVmZmVyO1xuXG4vKipcbiAqIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBruWHpueQhuOCkuWun+ihjOOBmeOCi+OCr+ODqeOCuVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtQ2xpcHBpbmdNYW5hZ2VyX1dlYkdMIHtcbiAgLyoqXG4gICAqIOOCq+ODqeODvOODgeODo+ODs+ODjeODq++8iFJHQkHvvInjga7jg5Xjg6njgrDjgpLlj5blvpfjgZnjgotcbiAgICogQHBhcmFtIGNoYW5uZWxObyDjgqvjg6njg7zjg4Hjg6Pjg7Pjg43jg6vvvIhSR0JB77yJ44Gu55Wq5Y+377yIMDpSLCAxOkcsIDI6QiwgMzpB77yJXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2hhbm5lbEZsYWdBc0NvbG9yKGNoYW5uZWxObzogbnVtYmVyKTogQ3ViaXNtVGV4dHVyZUNvbG9yIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhbm5lbENvbG9ycy5hdChjaGFubmVsTm8pO1xuICB9XG5cbiAgLyoqXG4gICAqIOODhuODs+ODneODqeODquOBruODrOODs+ODgOODvOODhuOCr+OCueODgeODo+OBruOCouODieODrOOCueOCkuWPluW+l+OBmeOCi1xuICAgKiBGcmFtZUJ1ZmZlck9iamVjdOOBjOWtmOWcqOOBl+OBquOBhOWgtOWQiOOAgeaWsOOBl+OBj+eUn+aIkOOBmeOCi1xuICAgKlxuICAgKiBAcmV0dXJuIOODrOODs+ODgOODvOODhuOCr+OCueODgeODo+OBruOCouODieODrOOCuVxuICAgKi9cbiAgcHVibGljIGdldE1hc2tSZW5kZXJUZXh0dXJlKCk6IFdlYkdMRnJhbWVidWZmZXIge1xuICAgIGxldCByZXQ6IFdlYkdMRnJhbWVidWZmZXIgPSAwO1xuXG4gICAgLy8g44OG44Oz44Od44Op44Oq44GuUmVuZGVyVGV4dHVyZeOCkuWPluW+l+OBmeOCi1xuICAgIGlmICh0aGlzLl9tYXNrVGV4dHVyZSAmJiB0aGlzLl9tYXNrVGV4dHVyZS50ZXh0dXJlICE9IDApIHtcbiAgICAgIC8vIOWJjeWbnuS9v+OBo+OBn+OCguOBruOCkui/lOOBmVxuICAgICAgdGhpcy5fbWFza1RleHR1cmUuZnJhbWVObyA9IHRoaXMuX2N1cnJlbnRGcmFtZU5vO1xuICAgICAgcmV0ID0gdGhpcy5fbWFza1RleHR1cmUudGV4dHVyZTtcbiAgICB9XG5cbiAgICBpZiAocmV0ID09IDApIHtcbiAgICAgIC8vIEZyYW1lQnVmZmVyT2JqZWN044GM5a2Y5Zyo44GX44Gq44GE5aC05ZCI44CB5paw44GX44GP55Sf5oiQ44GZ44KLXG5cbiAgICAgIC8vIOOCr+ODquODg+ODlOODs+OCsOODkOODg+ODleOCoeOCteOCpOOCuuOCkuWPluW+l1xuICAgICAgY29uc3Qgc2l6ZTogbnVtYmVyID0gdGhpcy5fY2xpcHBpbmdNYXNrQnVmZmVyU2l6ZTtcblxuICAgICAgdGhpcy5fY29sb3JCdWZmZXIgPSB0aGlzLmdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICAgIHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELCB0aGlzLl9jb2xvckJ1ZmZlcik7XG4gICAgICB0aGlzLmdsLnRleEltYWdlMkQoXG4gICAgICAgIHRoaXMuZ2wuVEVYVFVSRV8yRCxcbiAgICAgICAgMCxcbiAgICAgICAgdGhpcy5nbC5SR0JBLFxuICAgICAgICBzaXplLFxuICAgICAgICBzaXplLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLmdsLlJHQkEsXG4gICAgICAgIHRoaXMuZ2wuVU5TSUdORURfQllURSxcbiAgICAgICAgbnVsbFxuICAgICAgKTtcbiAgICAgIHRoaXMuZ2wudGV4UGFyYW1ldGVyaShcbiAgICAgICAgdGhpcy5nbC5URVhUVVJFXzJELFxuICAgICAgICB0aGlzLmdsLlRFWFRVUkVfV1JBUF9TLFxuICAgICAgICB0aGlzLmdsLkNMQU1QX1RPX0VER0VcbiAgICAgICk7XG4gICAgICB0aGlzLmdsLnRleFBhcmFtZXRlcmkoXG4gICAgICAgIHRoaXMuZ2wuVEVYVFVSRV8yRCxcbiAgICAgICAgdGhpcy5nbC5URVhUVVJFX1dSQVBfVCxcbiAgICAgICAgdGhpcy5nbC5DTEFNUF9UT19FREdFXG4gICAgICApO1xuICAgICAgdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKFxuICAgICAgICB0aGlzLmdsLlRFWFRVUkVfMkQsXG4gICAgICAgIHRoaXMuZ2wuVEVYVFVSRV9NSU5fRklMVEVSLFxuICAgICAgICB0aGlzLmdsLkxJTkVBUlxuICAgICAgKTtcbiAgICAgIHRoaXMuZ2wudGV4UGFyYW1ldGVyaShcbiAgICAgICAgdGhpcy5nbC5URVhUVVJFXzJELFxuICAgICAgICB0aGlzLmdsLlRFWFRVUkVfTUFHX0ZJTFRFUixcbiAgICAgICAgdGhpcy5nbC5MSU5FQVJcbiAgICAgICk7XG4gICAgICB0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG5cbiAgICAgIHJldCA9IHRoaXMuZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICAgIHRoaXMuZ2wuYmluZEZyYW1lYnVmZmVyKHRoaXMuZ2wuRlJBTUVCVUZGRVIsIHJldCk7XG4gICAgICB0aGlzLmdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgICB0aGlzLmdsLkZSQU1FQlVGRkVSLFxuICAgICAgICB0aGlzLmdsLkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgICB0aGlzLmdsLlRFWFRVUkVfMkQsXG4gICAgICAgIHRoaXMuX2NvbG9yQnVmZmVyLFxuICAgICAgICAwXG4gICAgICApO1xuICAgICAgdGhpcy5nbC5iaW5kRnJhbWVidWZmZXIodGhpcy5nbC5GUkFNRUJVRkZFUiwgc19mYm8pO1xuXG4gICAgICB0aGlzLl9tYXNrVGV4dHVyZSA9IG5ldyBDdWJpc21SZW5kZXJUZXh0dXJlUmVzb3VyY2UoXG4gICAgICAgIHRoaXMuX2N1cnJlbnRGcmFtZU5vLFxuICAgICAgICByZXRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBXZWJHTOODrOODs+ODgOODquODs+OCsOOCs+ODs+ODhuOCreOCueODiOOCkuioreWumuOBmeOCi1xuICAgKiBAcGFyYW0gZ2wgV2ViR0zjg6zjg7Pjg4Djg6rjg7PjgrDjgrPjg7Pjg4bjgq3jgrnjg4hcbiAgICovXG4gIHB1YmxpYyBzZXRHTChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XG4gICAgdGhpcy5nbCA9IGdsO1xuICB9XG5cbiAgLyoqXG4gICAqIOODnuOCueOCr+OBleOCjOOCi+aPj+eUu+OCquODluOCuOOCp+OCr+ODiOe+pOWFqOS9k+OCkuWbsuOCgOefqeW9ou+8iOODouODh+ODq+W6p+aomeezu++8ieOCkuioiOeul+OBmeOCi1xuICAgKiBAcGFyYW0gbW9kZWwg44Oi44OH44Or44Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqIEBwYXJhbSBjbGlwcGluZ0NvbnRleHQg44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gu44Kz44Oz44OG44Kt44K544OIXG4gICAqL1xuICBwdWJsaWMgY2FsY0NsaXBwZWREcmF3VG90YWxCb3VuZHMoXG4gICAgbW9kZWw6IEN1YmlzbU1vZGVsLFxuICAgIGNsaXBwaW5nQ29udGV4dDogQ3ViaXNtQ2xpcHBpbmdDb250ZXh0XG4gICk6IHZvaWQge1xuICAgIC8vIOiiq+OCr+ODquODg+ODlOODs+OCsOODnuOCueOCr++8iOODnuOCueOCr+OBleOCjOOCi+aPj+eUu+OCquODluOCuOOCp+OCr+ODiO+8ieOBruWFqOS9k+OBruefqeW9olxuICAgIGxldCBjbGlwcGVkRHJhd1RvdGFsTWluWDogbnVtYmVyID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBsZXQgY2xpcHBlZERyYXdUb3RhbE1pblk6IG51bWJlciA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgbGV0IGNsaXBwZWREcmF3VG90YWxNYXhYOiBudW1iZXIgPSBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgIGxldCBjbGlwcGVkRHJhd1RvdGFsTWF4WTogbnVtYmVyID0gTnVtYmVyLk1JTl9WQUxVRTtcblxuICAgIC8vIOOBk+OBruODnuOCueOCr+OBjOWun+mam+OBq+W/heimgeOBi+WIpOWumuOBmeOCi1xuICAgIC8vIOOBk+OBruOCr+ODquODg+ODlOODs+OCsOOCkuWIqeeUqOOBmeOCi+OAjOaPj+eUu+OCquODluOCuOOCp+OCr+ODiOOAjeOBjOOBsuOBqOOBpOOBp+OCguS9v+eUqOWPr+iDveOBp+OBguOCjOOBsOODnuOCueOCr+OCkueUn+aIkOOBmeOCi+W/heimgeOBjOOBguOCi1xuICAgIGNvbnN0IGNsaXBwZWREcmF3Q291bnQ6IG51bWJlciA9XG4gICAgICBjbGlwcGluZ0NvbnRleHQuX2NsaXBwZWREcmF3YWJsZUluZGV4TGlzdC5sZW5ndGg7XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGNsaXBwZWREcmF3YWJsZUluZGV4ID0gMDtcbiAgICAgIGNsaXBwZWREcmF3YWJsZUluZGV4IDwgY2xpcHBlZERyYXdDb3VudDtcbiAgICAgIGNsaXBwZWREcmF3YWJsZUluZGV4KytcbiAgICApIHtcbiAgICAgIC8vIOODnuOCueOCr+OCkuS9v+eUqOOBmeOCi+aPj+eUu+OCquODluOCuOOCp+OCr+ODiOOBruaPj+eUu+OBleOCjOOCi+efqeW9ouOCkuaxguOCgeOCi1xuICAgICAgY29uc3QgZHJhd2FibGVJbmRleDogbnVtYmVyID1cbiAgICAgICAgY2xpcHBpbmdDb250ZXh0Ll9jbGlwcGVkRHJhd2FibGVJbmRleExpc3RbY2xpcHBlZERyYXdhYmxlSW5kZXhdO1xuXG4gICAgICBjb25zdCBkcmF3YWJsZVZlcnRleENvdW50OiBudW1iZXIgPSBtb2RlbC5nZXREcmF3YWJsZVZlcnRleENvdW50KFxuICAgICAgICBkcmF3YWJsZUluZGV4XG4gICAgICApO1xuICAgICAgY29uc3QgZHJhd2FibGVWZXJ0ZXhlczogRmxvYXQzMkFycmF5ID0gbW9kZWwuZ2V0RHJhd2FibGVWZXJ0aWNlcyhcbiAgICAgICAgZHJhd2FibGVJbmRleFxuICAgICAgKTtcblxuICAgICAgbGV0IG1pblg6IG51bWJlciA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICBsZXQgbWluWTogbnVtYmVyID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgIGxldCBtYXhYOiBudW1iZXIgPSBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgICAgbGV0IG1heFk6IG51bWJlciA9IE51bWJlci5NSU5fVkFMVUU7XG5cbiAgICAgIGNvbnN0IGxvb3A6IG51bWJlciA9IGRyYXdhYmxlVmVydGV4Q291bnQgKiBDb25zdGFudC52ZXJ0ZXhTdGVwO1xuICAgICAgZm9yIChcbiAgICAgICAgbGV0IHBpOiBudW1iZXIgPSBDb25zdGFudC52ZXJ0ZXhPZmZzZXQ7XG4gICAgICAgIHBpIDwgbG9vcDtcbiAgICAgICAgcGkgKz0gQ29uc3RhbnQudmVydGV4U3RlcFxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHg6IG51bWJlciA9IGRyYXdhYmxlVmVydGV4ZXNbcGldO1xuICAgICAgICBjb25zdCB5OiBudW1iZXIgPSBkcmF3YWJsZVZlcnRleGVzW3BpICsgMV07XG5cbiAgICAgICAgaWYgKHggPCBtaW5YKSB7XG4gICAgICAgICAgbWluWCA9IHg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHggPiBtYXhYKSB7XG4gICAgICAgICAgbWF4WCA9IHg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkgPCBtaW5ZKSB7XG4gICAgICAgICAgbWluWSA9IHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkgPiBtYXhZKSB7XG4gICAgICAgICAgbWF4WSA9IHk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5pyJ5Yq544Gq54K544GM5LiA44Gk44KC5Y+W44KM44Gq44GL44Gj44Gf44Gu44Gn44K544Kt44OD44OXXG4gICAgICBpZiAobWluWCA9PSBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyDlhajkvZPjga7nn6nlvaLjgavlj43mmKBcbiAgICAgIGlmIChtaW5YIDwgY2xpcHBlZERyYXdUb3RhbE1pblgpIHtcbiAgICAgICAgY2xpcHBlZERyYXdUb3RhbE1pblggPSBtaW5YO1xuICAgICAgfVxuICAgICAgaWYgKG1pblkgPCBjbGlwcGVkRHJhd1RvdGFsTWluWSkge1xuICAgICAgICBjbGlwcGVkRHJhd1RvdGFsTWluWSA9IG1pblk7XG4gICAgICB9XG4gICAgICBpZiAobWF4WCA+IGNsaXBwZWREcmF3VG90YWxNYXhYKSB7XG4gICAgICAgIGNsaXBwZWREcmF3VG90YWxNYXhYID0gbWF4WDtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhZID4gY2xpcHBlZERyYXdUb3RhbE1heFkpIHtcbiAgICAgICAgY2xpcHBlZERyYXdUb3RhbE1heFkgPSBtYXhZO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2xpcHBlZERyYXdUb3RhbE1pblggPT0gTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICBjbGlwcGluZ0NvbnRleHQuX2FsbENsaXBwZWREcmF3UmVjdC54ID0gMC4wO1xuICAgICAgICBjbGlwcGluZ0NvbnRleHQuX2FsbENsaXBwZWREcmF3UmVjdC55ID0gMC4wO1xuICAgICAgICBjbGlwcGluZ0NvbnRleHQuX2FsbENsaXBwZWREcmF3UmVjdC53aWR0aCA9IDAuMDtcbiAgICAgICAgY2xpcHBpbmdDb250ZXh0Ll9hbGxDbGlwcGVkRHJhd1JlY3QuaGVpZ2h0ID0gMC4wO1xuICAgICAgICBjbGlwcGluZ0NvbnRleHQuX2lzVXNpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaXBwaW5nQ29udGV4dC5faXNVc2luZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHc6IG51bWJlciA9IGNsaXBwZWREcmF3VG90YWxNYXhYIC0gY2xpcHBlZERyYXdUb3RhbE1pblg7XG4gICAgICAgIGNvbnN0IGg6IG51bWJlciA9IGNsaXBwZWREcmF3VG90YWxNYXhZIC0gY2xpcHBlZERyYXdUb3RhbE1pblk7XG4gICAgICAgIGNsaXBwaW5nQ29udGV4dC5fYWxsQ2xpcHBlZERyYXdSZWN0LnggPSBjbGlwcGVkRHJhd1RvdGFsTWluWDtcbiAgICAgICAgY2xpcHBpbmdDb250ZXh0Ll9hbGxDbGlwcGVkRHJhd1JlY3QueSA9IGNsaXBwZWREcmF3VG90YWxNaW5ZO1xuICAgICAgICBjbGlwcGluZ0NvbnRleHQuX2FsbENsaXBwZWREcmF3UmVjdC53aWR0aCA9IHc7XG4gICAgICAgIGNsaXBwaW5nQ29udGV4dC5fYWxsQ2xpcHBlZERyYXdSZWN0LmhlaWdodCA9IGg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX21hc2tSZW5kZXJUZXh0dXJlID0gbnVsbDtcbiAgICB0aGlzLl9jb2xvckJ1ZmZlciA9IG51bGw7XG4gICAgdGhpcy5fY3VycmVudEZyYW1lTm8gPSAwO1xuICAgIHRoaXMuX2NsaXBwaW5nTWFza0J1ZmZlclNpemUgPSAyNTY7XG4gICAgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2sgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbUNsaXBwaW5nQ29udGV4dD4oKTtcbiAgICB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yRHJhdyA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtQ2xpcHBpbmdDb250ZXh0PigpO1xuICAgIHRoaXMuX2NoYW5uZWxDb2xvcnMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbVRleHR1cmVDb2xvcj4oKTtcbiAgICB0aGlzLl90bXBCb3VuZHNPbk1vZGVsID0gbmV3IGNzbVJlY3QoKTtcbiAgICB0aGlzLl90bXBNYXRyaXggPSBuZXcgQ3ViaXNtTWF0cml4NDQoKTtcbiAgICB0aGlzLl90bXBNYXRyaXhGb3JNYXNrID0gbmV3IEN1YmlzbU1hdHJpeDQ0KCk7XG4gICAgdGhpcy5fdG1wTWF0cml4Rm9yRHJhdyA9IG5ldyBDdWJpc21NYXRyaXg0NCgpO1xuICAgIHRoaXMuX21hc2tUZXh0dXJlID0gbnVsbDtcblxuICAgIGxldCB0bXA6IEN1YmlzbVRleHR1cmVDb2xvciA9IG5ldyBDdWJpc21UZXh0dXJlQ29sb3IoKTtcbiAgICB0bXAuUiA9IDEuMDtcbiAgICB0bXAuRyA9IDAuMDtcbiAgICB0bXAuQiA9IDAuMDtcbiAgICB0bXAuQSA9IDAuMDtcbiAgICB0aGlzLl9jaGFubmVsQ29sb3JzLnB1c2hCYWNrKHRtcCk7XG5cbiAgICB0bXAgPSBuZXcgQ3ViaXNtVGV4dHVyZUNvbG9yKCk7XG4gICAgdG1wLlIgPSAwLjA7XG4gICAgdG1wLkcgPSAxLjA7XG4gICAgdG1wLkIgPSAwLjA7XG4gICAgdG1wLkEgPSAwLjA7XG4gICAgdGhpcy5fY2hhbm5lbENvbG9ycy5wdXNoQmFjayh0bXApO1xuXG4gICAgdG1wID0gbmV3IEN1YmlzbVRleHR1cmVDb2xvcigpO1xuICAgIHRtcC5SID0gMC4wO1xuICAgIHRtcC5HID0gMC4wO1xuICAgIHRtcC5CID0gMS4wO1xuICAgIHRtcC5BID0gMC4wO1xuICAgIHRoaXMuX2NoYW5uZWxDb2xvcnMucHVzaEJhY2sodG1wKTtcblxuICAgIHRtcCA9IG5ldyBDdWJpc21UZXh0dXJlQ29sb3IoKTtcbiAgICB0bXAuUiA9IDAuMDtcbiAgICB0bXAuRyA9IDAuMDtcbiAgICB0bXAuQiA9IDAuMDtcbiAgICB0bXAuQSA9IDEuMDtcbiAgICB0aGlzLl9jaGFubmVsQ29sb3JzLnB1c2hCYWNrKHRtcCk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NsaXBwaW5nQ29udGV4dExpc3RGb3JNYXNrLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2suYXQoaSkpIHtcbiAgICAgICAgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2suYXQoaSkucmVsZWFzZSgpO1xuICAgICAgICB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yTWFzay5zZXQoaSwgdm9pZCAwKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NsaXBwaW5nQ29udGV4dExpc3RGb3JNYXNrLnNldChpLCBudWxsKTtcbiAgICB9XG4gICAgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2sgPSBudWxsO1xuXG4gICAgLy8gX2NsaXBwaW5nQ29udGV4dExpc3RGb3JEcmF344GvX2NsaXBwaW5nQ29udGV4dExpc3RGb3JNYXNr44Gr44GC44KL44Kk44Oz44K544K/44Oz44K544KS5oyH44GX44Gm44GE44KL44CC5LiK6KiY44Gu5Yem55CG44Gr44KI44KK6KaB57Sg44GU44Go44GuREVMRVRF44Gv5LiN6KaB44CCXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yRHJhdy5nZXRTaXplKCk7IGkrKykge1xuICAgICAgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvckRyYXcuc2V0KGksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yRHJhdyA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5fbWFza1RleHR1cmUpIHtcbiAgICAgIHRoaXMuZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5fbWFza1RleHR1cmUudGV4dHVyZSk7XG4gICAgICB0aGlzLl9tYXNrVGV4dHVyZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ29sb3JzLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICB0aGlzLl9jaGFubmVsQ29sb3JzLnNldChpLCBudWxsKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jaGFubmVsQ29sb3JzID0gbnVsbDtcblxuICAgIC8vIOODhuOCr+OCueODgeODo+ino+aUvlxuICAgIHRoaXMuZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLl9jb2xvckJ1ZmZlcik7XG4gICAgdGhpcy5fY29sb3JCdWZmZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOODnuODjeODvOOCuOODo+OBruWIneacn+WMluWHpueQhlxuICAgKiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jgpLkvb/jgYbmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjga7nmbvpjLLjgpLooYzjgYZcbiAgICogQHBhcmFtIG1vZGVsIOODouODh+ODq+OBruOCpOODs+OCueOCv+ODs+OCuVxuICAgKiBAcGFyYW0gZHJhd2FibGVDb3VudCDmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjga7mlbBcbiAgICogQHBhcmFtIGRyYXdhYmxlTWFza3Mg5o+P55S744Kq44OW44K444Kn44Kv44OI44KS44Oe44K544Kv44GZ44KL5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu44Kk44Oz44OH44OD44Kv44K544Gu44Oq44K544OIXG4gICAqIEBwYXJhbSBkcmF3YWJsZUNvdW50cyDmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjgpLjg57jgrnjgq/jgZnjgovmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjga7mlbBcbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplKFxuICAgIG1vZGVsOiBDdWJpc21Nb2RlbCxcbiAgICBkcmF3YWJsZUNvdW50OiBudW1iZXIsXG4gICAgZHJhd2FibGVNYXNrczogSW50MzJBcnJheVtdLFxuICAgIGRyYXdhYmxlTWFza0NvdW50czogSW50MzJBcnJheVxuICApOiB2b2lkIHtcbiAgICAvLyDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jgpLkvb/jgYbmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjgpLjgZnjgbnjgabnmbvpjLLjgZnjgotcbiAgICAvLyDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jga/jgIHpgJrluLjmlbDlgIvnqIvluqbjgavpmZDlrprjgZfjgabkvb/jgYbjgoLjga7jgajjgZnjgotcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRyYXdhYmxlQ291bnQ7IGkrKykge1xuICAgICAgaWYgKGRyYXdhYmxlTWFza0NvdW50c1tpXSA8PSAwKSB7XG4gICAgICAgIC8vIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBjOS9v+eUqOOBleOCjOOBpuOBhOOBquOBhOOCouODvOODiOODoeODg+OCt+ODpe+8iOWkmuOBj+OBruWgtOWQiOS9v+eUqOOBl+OBquOBhO+8iVxuICAgICAgICB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yRHJhdy5wdXNoQmFjayhudWxsKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIOaXouOBq+OBguOCi0NsaXBDb250ZXh044Go5ZCM44GY44GL44OB44Kn44OD44Kv44GZ44KLXG4gICAgICBsZXQgY2xpcHBpbmdDb250ZXh0OiBDdWJpc21DbGlwcGluZ0NvbnRleHQgPSB0aGlzLmZpbmRTYW1lQ2xpcChcbiAgICAgICAgZHJhd2FibGVNYXNrc1tpXSxcbiAgICAgICAgZHJhd2FibGVNYXNrQ291bnRzW2ldXG4gICAgICApO1xuICAgICAgaWYgKGNsaXBwaW5nQ29udGV4dCA9PSBudWxsKSB7XG4gICAgICAgIC8vIOWQjOS4gOOBruODnuOCueOCr+OBjOWtmOWcqOOBl+OBpuOBhOOBquOBhOWgtOWQiOOBr+eUn+aIkOOBmeOCi1xuICAgICAgICBjbGlwcGluZ0NvbnRleHQgPSBuZXcgQ3ViaXNtQ2xpcHBpbmdDb250ZXh0KFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgZHJhd2FibGVNYXNrc1tpXSxcbiAgICAgICAgICBkcmF3YWJsZU1hc2tDb3VudHNbaV1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2sucHVzaEJhY2soY2xpcHBpbmdDb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgY2xpcHBpbmdDb250ZXh0LmFkZENsaXBwZWREcmF3YWJsZShpKTtcblxuICAgICAgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvckRyYXcucHVzaEJhY2soY2xpcHBpbmdDb250ZXh0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kv44Oq44OD44OU44Oz44Kw44Kz44Oz44OG44Kt44K544OI44KS5L2c5oiQ44GZ44KL44CC44Oi44OH44Or5o+P55S75pmC44Gr5a6f6KGM44GZ44KL44CCXG4gICAqIEBwYXJhbSBtb2RlbCDjg6Ljg4fjg6vjga7jgqTjg7Pjgrnjgr/jg7PjgrlcbiAgICogQHBhcmFtIHJlbmRlcmVyIOODrOODs+ODgOODqeOBruOCpOODs+OCueOCv+ODs+OCuVxuICAgKi9cbiAgcHVibGljIHNldHVwQ2xpcHBpbmdDb250ZXh0KFxuICAgIG1vZGVsOiBDdWJpc21Nb2RlbCxcbiAgICByZW5kZXJlcjogQ3ViaXNtUmVuZGVyZXJfV2ViR0xcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fY3VycmVudEZyYW1lTm8rKztcblxuICAgIC8vIOWFqOOBpuOBruOCr+ODquODg+ODlOODs+OCsOOCkueUqOaEj+OBmeOCi1xuICAgIC8vIOWQjOOBmOOCr+ODquODg+ODl++8iOikh+aVsOOBruWgtOWQiOOBr+OBvuOBqOOCgeOBpuS4gOOBpOOBruOCr+ODquODg+ODl++8ieOCkuS9v+OBhuWgtOWQiOOBrzHluqbjgaDjgZHoqK3lrprjgZnjgotcbiAgICBsZXQgdXNpbmdDbGlwQ291bnQgPSAwO1xuICAgIGZvciAoXG4gICAgICBsZXQgY2xpcEluZGV4ID0gMDtcbiAgICAgIGNsaXBJbmRleCA8IHRoaXMuX2NsaXBwaW5nQ29udGV4dExpc3RGb3JNYXNrLmdldFNpemUoKTtcbiAgICAgIGNsaXBJbmRleCsrXG4gICAgKSB7XG4gICAgICAvLyAx44Gk44Gu44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gr6Zai44GX44GmXG4gICAgICBjb25zdCBjYzogQ3ViaXNtQ2xpcHBpbmdDb250ZXh0ID0gdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2suYXQoXG4gICAgICAgIGNsaXBJbmRleFxuICAgICAgKTtcblxuICAgICAgLy8g44GT44Gu44Kv44Oq44OD44OX44KS5Yip55So44GZ44KL5o+P55S744Kq44OW44K444Kn44Kv44OI576k5YWo5L2T44KS5Zuy44KA55+p5b2i44KS6KiI566XXG4gICAgICB0aGlzLmNhbGNDbGlwcGVkRHJhd1RvdGFsQm91bmRzKG1vZGVsLCBjYyk7XG5cbiAgICAgIGlmIChjYy5faXNVc2luZykge1xuICAgICAgICB1c2luZ0NsaXBDb3VudCsrOyAvLyDkvb/nlKjkuK3jgajjgZfjgabjgqvjgqbjg7Pjg4hcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg57jgrnjgq/kvZzmiJDlh6bnkIZcbiAgICBpZiAodXNpbmdDbGlwQ291bnQgPiAwKSB7XG4gICAgICAvLyDnlJ/miJDjgZfjgZ9GcmFtZUJ1ZmZlcuOBqOWQjOOBmOOCteOCpOOCuuOBp+ODk+ODpeODvOODneODvOODiOOCkuioreWumlxuICAgICAgdGhpcy5nbC52aWV3cG9ydChcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgdGhpcy5fY2xpcHBpbmdNYXNrQnVmZmVyU2l6ZSxcbiAgICAgICAgdGhpcy5fY2xpcHBpbmdNYXNrQnVmZmVyU2l6ZVxuICAgICAgKTtcblxuICAgICAgLy8g44Oe44K544Kv44KSYWN0aXZl44Gr44GZ44KLXG4gICAgICB0aGlzLl9tYXNrUmVuZGVyVGV4dHVyZSA9IHRoaXMuZ2V0TWFza1JlbmRlclRleHR1cmUoKTtcblxuICAgICAgLy8g44Oi44OH44Or5o+P55S75pmC44GrRHJhd01lc2hOb3fjgavmuKHjgZXjgozjgovlpInmj5so44Oi44OH44OrdG/jg6/jg7zjg6vjg4nluqfmqJnlpInmj5spXG4gICAgICBjb25zdCBtb2RlbFRvV29ybGRGOiBDdWJpc21NYXRyaXg0NCA9IHJlbmRlcmVyLmdldE12cE1hdHJpeCgpO1xuXG4gICAgICByZW5kZXJlci5wcmVEcmF3KCk7IC8vIOODkOODg+ODleOCoeOCkuOCr+ODquOCouOBmeOCi1xuXG4gICAgICAvLyDlkITjg57jgrnjgq/jga7jg6zjgqTjgqLjgqbjg4jjgpLmsbrlrprjgZfjgabjgYTjgY9cbiAgICAgIHRoaXMuc2V0dXBMYXlvdXRCb3VuZHModXNpbmdDbGlwQ291bnQpO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tIOODnuOCueOCr+aPj+eUu+WHpueQhiAtLS0tLS0tLS0tXG4gICAgICAvLyDjg57jgrnjgq/nlKhSZW5kZXJUZXh0dXJl44KSYWN0aXZl44Gr44K744OD44OIXG4gICAgICB0aGlzLmdsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLmdsLkZSQU1FQlVGRkVSLCB0aGlzLl9tYXNrUmVuZGVyVGV4dHVyZSk7XG5cbiAgICAgIC8vIOODnuOCueOCr+OCkuOCr+ODquOCouOBmeOCi1xuICAgICAgLy8gKOS7ruS7leanmCkgMeOBjOeEoeWKue+8iOaPj+OBi+OCjOOBquOBhO+8iemgmOWfn+OAgTDjgYzmnInlirnvvIjmj4/jgYvjgozjgovvvInpoJjln5/jgILvvIjjgrfjgqfjg7zjg4Djg7xDZCpDc+OBpzDjgavov5HjgYTlgKTjgpLjgYvjgZHjgabjg57jgrnjgq/jgpLkvZzjgovjgIIx44KS44GL44GR44KL44Go5L2V44KC6LW344GT44KJ44Gq44GE77yJXG4gICAgICB0aGlzLmdsLmNsZWFyQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKTtcbiAgICAgIHRoaXMuZ2wuY2xlYXIodGhpcy5nbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuICAgICAgLy8g5a6f6Zqb44Gr44Oe44K544Kv44KS55Sf5oiQ44GZ44KLXG4gICAgICAvLyDlhajjgabjga7jg57jgrnjgq/jgpLjganjga7jgojjgYbjgavjg6zjgqTjgqLjgqbjg4jjgZfjgabmj4/jgY/jgYvjgpLmsbrlrprjgZfjgIFDbGlwQ29udGV4dCwgQ2xpcHBlZERyYXdDb250ZXh044Gr6KiY5oa244GZ44KLXG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgY2xpcEluZGV4ID0gMDtcbiAgICAgICAgY2xpcEluZGV4IDwgdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2suZ2V0U2l6ZSgpO1xuICAgICAgICBjbGlwSW5kZXgrK1xuICAgICAgKSB7XG4gICAgICAgIC8vIC0tLSDlrp/pmpvjgasx44Gk44Gu44Oe44K544Kv44KS5o+P44GPIC0tLVxuICAgICAgICBjb25zdCBjbGlwQ29udGV4dDogQ3ViaXNtQ2xpcHBpbmdDb250ZXh0ID0gdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2suYXQoXG4gICAgICAgICAgY2xpcEluZGV4XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGFsbENsaXBlZERyYXdSZWN0OiBjc21SZWN0ID0gY2xpcENvbnRleHQuX2FsbENsaXBwZWREcmF3UmVjdDsgLy8g44GT44Gu44Oe44K544Kv44KS5L2/44GG44CB44GZ44G544Gm44Gu5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu6KuW55CG5bqn5qiZ5LiK44Gu5Zuy44G/55+p5b2iXG4gICAgICAgIGNvbnN0IGxheW91dEJvdW5kc09uVGV4MDE6IGNzbVJlY3QgPSBjbGlwQ29udGV4dC5fbGF5b3V0Qm91bmRzOyAvLyDjgZPjga7kuK3jgavjg57jgrnjgq/jgpLlj47jgoHjgotcblxuICAgICAgICAvLyDjg6Ljg4fjg6vluqfmqJnkuIrjga7nn6nlvaLjgpLjgIHpganlrpzjg57jg7zjgrjjg7PjgpLku5jjgZHjgabkvb/jgYZcbiAgICAgICAgY29uc3QgTUFSR0lOID0gMC4wNTtcbiAgICAgICAgdGhpcy5fdG1wQm91bmRzT25Nb2RlbC5zZXRSZWN0KGFsbENsaXBlZERyYXdSZWN0KTtcbiAgICAgICAgdGhpcy5fdG1wQm91bmRzT25Nb2RlbC5leHBhbmQoXG4gICAgICAgICAgYWxsQ2xpcGVkRHJhd1JlY3Qud2lkdGggKiBNQVJHSU4sXG4gICAgICAgICAgYWxsQ2xpcGVkRHJhd1JlY3QuaGVpZ2h0ICogTUFSR0lOXG4gICAgICAgICk7XG4gICAgICAgIC8vIyMjIyMjIyMjIyDmnKzmnaXjga/libLjgorlvZPjgabjgonjgozjgZ/poJjln5/jga7lhajkvZPjgpLkvb/jgo/jgZrlv4XopoHmnIDkvY7pmZDjga7jgrXjgqTjgrrjgYzjgojjgYRcblxuICAgICAgICAvLyDjgrfjgqfjg7zjg4DnlKjjga7oqIjnrpflvI/jgpLmsYLjgoHjgovjgILlm57ou6LjgpLogIPmha7jgZfjgarjgYTloLTlkIjjga/ku6XkuIvjga7jgajjgYrjgopcbiAgICAgICAgLy8gbW92ZVBlcmlvZCcgPSBtb3ZlUGVyaW9kICogc2NhbGVYICsgb2ZmWFx0XHQgIFtbIG1vdmVQZXJpb2QnID0gKG1vdmVQZXJpb2QgLSB0bXBCb3VuZHNPbk1vZGVsLm1vdmVQZXJpb2QpKnNjYWxlICsgbGF5b3V0Qm91bmRzT25UZXgwMS5tb3ZlUGVyaW9kIF1dXG4gICAgICAgIGNvbnN0IHNjYWxlWDogbnVtYmVyID1cbiAgICAgICAgICBsYXlvdXRCb3VuZHNPblRleDAxLndpZHRoIC8gdGhpcy5fdG1wQm91bmRzT25Nb2RlbC53aWR0aDtcbiAgICAgICAgY29uc3Qgc2NhbGVZOiBudW1iZXIgPVxuICAgICAgICAgIGxheW91dEJvdW5kc09uVGV4MDEuaGVpZ2h0IC8gdGhpcy5fdG1wQm91bmRzT25Nb2RlbC5oZWlnaHQ7XG5cbiAgICAgICAgLy8g44Oe44K544Kv55Sf5oiQ5pmC44Gr5L2/44GG6KGM5YiX44KS5rGC44KB44KLXG4gICAgICAgIHtcbiAgICAgICAgICAvLyDjgrfjgqfjg7zjg4DjgavmuKHjgZnooYzliJfjgpLmsYLjgoHjgosgPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8IOimgeacgOmBqeWMlu+8iOmAhumghuOBq+ioiOeul+OBmeOCjOOBsOOCt+ODs+ODl+ODq+OBq+OBp+OBjeOCi++8iVxuICAgICAgICAgIHRoaXMuX3RtcE1hdHJpeC5sb2FkSWRlbnRpdHkoKTtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyBsYXlvdXQwLi4xIOOCkiAtMS4uMeOBq+WkieaPm1xuICAgICAgICAgICAgdGhpcy5fdG1wTWF0cml4LnRyYW5zbGF0ZVJlbGF0aXZlKC0xLjAsIC0xLjApO1xuICAgICAgICAgICAgdGhpcy5fdG1wTWF0cml4LnNjYWxlUmVsYXRpdmUoMi4wLCAyLjApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyB2aWV3IHRvIGxheW91dDAuLjFcbiAgICAgICAgICAgIHRoaXMuX3RtcE1hdHJpeC50cmFuc2xhdGVSZWxhdGl2ZShcbiAgICAgICAgICAgICAgbGF5b3V0Qm91bmRzT25UZXgwMS54LFxuICAgICAgICAgICAgICBsYXlvdXRCb3VuZHNPblRleDAxLnlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl90bXBNYXRyaXguc2NhbGVSZWxhdGl2ZShzY2FsZVgsIHNjYWxlWSk7IC8vIG5ldyA9IFt0cmFuc2xhdGVdW3NjYWxlXVxuICAgICAgICAgICAgdGhpcy5fdG1wTWF0cml4LnRyYW5zbGF0ZVJlbGF0aXZlKFxuICAgICAgICAgICAgICAtdGhpcy5fdG1wQm91bmRzT25Nb2RlbC54LFxuICAgICAgICAgICAgICAtdGhpcy5fdG1wQm91bmRzT25Nb2RlbC55XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gbmV3ID0gW3RyYW5zbGF0ZV1bc2NhbGVdW3RyYW5zbGF0ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gdG1wTWF0cml4Rm9yTWFza+OBjOioiOeul+e1kOaenFxuICAgICAgICAgIHRoaXMuX3RtcE1hdHJpeEZvck1hc2suc2V0TWF0cml4KHRoaXMuX3RtcE1hdHJpeC5nZXRBcnJheSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tIGRyYXfmmYLjga4gbWFzayDlj4LnhafnlKjooYzliJfjgpLoqIjnrpdcbiAgICAgICAge1xuICAgICAgICAgIC8vIOOCt+OCp+ODvOODgOOBq+a4oeOBmeihjOWIl+OCkuaxguOCgeOCiyA8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwg6KaB5pyA6YGp5YyW77yI6YCG6aCG44Gr6KiI566X44GZ44KM44Gw44K344Oz44OX44Or44Gr44Gn44GN44KL77yJXG4gICAgICAgICAgdGhpcy5fdG1wTWF0cml4LmxvYWRJZGVudGl0eSgpO1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3RtcE1hdHJpeC50cmFuc2xhdGVSZWxhdGl2ZShcbiAgICAgICAgICAgICAgbGF5b3V0Qm91bmRzT25UZXgwMS54LFxuICAgICAgICAgICAgICBsYXlvdXRCb3VuZHNPblRleDAxLnlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl90bXBNYXRyaXguc2NhbGVSZWxhdGl2ZShzY2FsZVgsIHNjYWxlWSk7IC8vIG5ldyA9IFt0cmFuc2xhdGVdW3NjYWxlXVxuICAgICAgICAgICAgdGhpcy5fdG1wTWF0cml4LnRyYW5zbGF0ZVJlbGF0aXZlKFxuICAgICAgICAgICAgICAtdGhpcy5fdG1wQm91bmRzT25Nb2RlbC54LFxuICAgICAgICAgICAgICAtdGhpcy5fdG1wQm91bmRzT25Nb2RlbC55XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gbmV3ID0gW3RyYW5zbGF0ZV1bc2NhbGVdW3RyYW5zbGF0ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fdG1wTWF0cml4Rm9yRHJhdy5zZXRNYXRyaXgodGhpcy5fdG1wTWF0cml4LmdldEFycmF5KCkpO1xuICAgICAgICB9XG4gICAgICAgIGNsaXBDb250ZXh0Ll9tYXRyaXhGb3JNYXNrLnNldE1hdHJpeCh0aGlzLl90bXBNYXRyaXhGb3JNYXNrLmdldEFycmF5KCkpO1xuICAgICAgICBjbGlwQ29udGV4dC5fbWF0cml4Rm9yRHJhdy5zZXRNYXRyaXgodGhpcy5fdG1wTWF0cml4Rm9yRHJhdy5nZXRBcnJheSgpKTtcblxuICAgICAgICBjb25zdCBjbGlwRHJhd0NvdW50OiBudW1iZXIgPSBjbGlwQ29udGV4dC5fY2xpcHBpbmdJZENvdW50O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsaXBEcmF3Q291bnQ7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNsaXBEcmF3SW5kZXg6IG51bWJlciA9IGNsaXBDb250ZXh0Ll9jbGlwcGluZ0lkTGlzdFtpXTtcblxuICAgICAgICAgIC8vIOmggueCueaDheWgseOBjOabtOaWsOOBleOCjOOBpuOBiuOCieOBmuOAgeS/oemgvOaAp+OBjOOBquOBhOWgtOWQiOOBr+aPj+eUu+OCkuODkeOCueOBmeOCi1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICFtb2RlbC5nZXREcmF3YWJsZUR5bmFtaWNGbGFnVmVydGV4UG9zaXRpb25zRGlkQ2hhbmdlKGNsaXBEcmF3SW5kZXgpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZW5kZXJlci5zZXRJc0N1bGxpbmcoXG4gICAgICAgICAgICBtb2RlbC5nZXREcmF3YWJsZUN1bGxpbmcoY2xpcERyYXdJbmRleCkgIT0gZmFsc2VcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8g5LuK5Zue5bCC55So44Gu5aSJ5o+b44KS6YGp55So44GX44Gm5o+P44GPXG4gICAgICAgICAgLy8g44OB44Oj44Oz44ON44Or44KC5YiH44KK5pu/44GI44KL5b+F6KaB44GM44GC44KLKEEsUixHLEIpXG4gICAgICAgICAgcmVuZGVyZXIuc2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzayhjbGlwQ29udGV4dCk7XG4gICAgICAgICAgcmVuZGVyZXIuZHJhd01lc2goXG4gICAgICAgICAgICBtb2RlbC5nZXREcmF3YWJsZVRleHR1cmVJbmRpY2VzKGNsaXBEcmF3SW5kZXgpLFxuICAgICAgICAgICAgbW9kZWwuZ2V0RHJhd2FibGVWZXJ0ZXhJbmRleENvdW50KGNsaXBEcmF3SW5kZXgpLFxuICAgICAgICAgICAgbW9kZWwuZ2V0RHJhd2FibGVWZXJ0ZXhDb3VudChjbGlwRHJhd0luZGV4KSxcbiAgICAgICAgICAgIG1vZGVsLmdldERyYXdhYmxlVmVydGV4SW5kaWNlcyhjbGlwRHJhd0luZGV4KSxcbiAgICAgICAgICAgIG1vZGVsLmdldERyYXdhYmxlVmVydGljZXMoY2xpcERyYXdJbmRleCksXG4gICAgICAgICAgICBtb2RlbC5nZXREcmF3YWJsZVZlcnRleFV2cyhjbGlwRHJhd0luZGV4KSxcbiAgICAgICAgICAgIG1vZGVsLmdldERyYXdhYmxlT3BhY2l0eShjbGlwRHJhd0luZGV4KSxcbiAgICAgICAgICAgIEN1YmlzbUJsZW5kTW9kZS5DdWJpc21CbGVuZE1vZGVfTm9ybWFsLCAvLyDjgq/jg6rjg4Pjg5Tjg7PjgrDjga/pgJrluLjmj4/nlLvjgpLlvLfliLZcbiAgICAgICAgICAgIGZhbHNlIC8vIOODnuOCueOCr+eUn+aIkOaZguOBr+OCr+ODquODg+ODlOODs+OCsOOBruWPjei7ouS9v+eUqOOBr+WFqOOBj+mWouS/guOBjOOBquOBhFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gLS0tIOW+jOWHpueQhiAtLS1cbiAgICAgIHRoaXMuZ2wuYmluZEZyYW1lYnVmZmVyKHRoaXMuZ2wuRlJBTUVCVUZGRVIsIHNfZmJvKTsgLy8g5o+P55S75a++6LGh44KS5oi744GZXG4gICAgICByZW5kZXJlci5zZXRDbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JNYXNrKG51bGwpO1xuXG4gICAgICB0aGlzLmdsLnZpZXdwb3J0KFxuICAgICAgICBzX3ZpZXdwb3J0WzBdLFxuICAgICAgICBzX3ZpZXdwb3J0WzFdLFxuICAgICAgICBzX3ZpZXdwb3J0WzJdLFxuICAgICAgICBzX3ZpZXdwb3J0WzNdXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDml6Ljgavjg57jgrnjgq/jgpLkvZzjgaPjgabjgYTjgovjgYvjgpLnorroqo1cbiAgICog5L2c44Gj44Gm44GE44KL5qeY44Gn44GC44KM44Gw6Kmy5b2T44GZ44KL44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gu44Kk44Oz44K544K/44Oz44K544KS6L+U44GZXG4gICAqIOS9nOOBo+OBpuOBhOOBquOBkeOCjOOBsE5VTEzjgpLov5TjgZlcbiAgICogQHBhcmFtIGRyYXdhYmxlTWFza3Mg5o+P55S744Kq44OW44K444Kn44Kv44OI44KS44Oe44K544Kv44GZ44KL5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu44Oq44K544OIXG4gICAqIEBwYXJhbSBkcmF3YWJsZU1hc2tDb3VudHMg5o+P55S744Kq44OW44K444Kn44Kv44OI44KS44Oe44K544Kv44GZ44KL5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu5pWwXG4gICAqIEByZXR1cm4g6Kmy5b2T44GZ44KL44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44GM5a2Y5Zyo44GZ44KM44Gw44Kk44Oz44K544K/44Oz44K544KS6L+U44GX44CB44Gq44GR44KM44GwTlVMTOOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGZpbmRTYW1lQ2xpcChcbiAgICBkcmF3YWJsZU1hc2tzOiBJbnQzMkFycmF5LFxuICAgIGRyYXdhYmxlTWFza0NvdW50czogbnVtYmVyXG4gICk6IEN1YmlzbUNsaXBwaW5nQ29udGV4dCB7XG4gICAgLy8g5L2c5oiQ5riI44G/Q2xpcHBpbmdDb250ZXh044Go5LiA6Ie044GZ44KL44GL56K66KqNXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yTWFzay5nZXRTaXplKCk7IGkrKykge1xuICAgICAgY29uc3QgY2xpcHBpbmdDb250ZXh0OiBDdWJpc21DbGlwcGluZ0NvbnRleHQgPSB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yTWFzay5hdChcbiAgICAgICAgaVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvdW50OiBudW1iZXIgPSBjbGlwcGluZ0NvbnRleHQuX2NsaXBwaW5nSWRDb3VudDtcblxuICAgICAgLy8g5YCL5pWw44GM6YGV44GG5aC05ZCI44Gv5Yil54mpXG4gICAgICBpZiAoY291bnQgIT0gZHJhd2FibGVNYXNrQ291bnRzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgc2FtZUNvdW50ID0gMDtcblxuICAgICAgLy8g5ZCM44GYSUTjgpLmjIHjgaTjgYvnorroqo3jgILphY3liJfjga7mlbDjgYzlkIzjgZjjgarjga7jgafjgIHkuIDoh7TjgZfjgZ/lgIvmlbDjgYzlkIzjgZjjgarjgonlkIzjgZjnianjgpLmjIHjgaTjgajjgZnjgotcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY291bnQ7IGorKykge1xuICAgICAgICBjb25zdCBjbGlwSWQ6IG51bWJlciA9IGNsaXBwaW5nQ29udGV4dC5fY2xpcHBpbmdJZExpc3Rbal07XG5cbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb3VudDsgaysrKSB7XG4gICAgICAgICAgaWYgKGRyYXdhYmxlTWFza3Nba10gPT0gY2xpcElkKSB7XG4gICAgICAgICAgICBzYW1lQ291bnQrKztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2FtZUNvdW50ID09IGNvdW50KSB7XG4gICAgICAgIHJldHVybiBjbGlwcGluZ0NvbnRleHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7IC8vIOimi+OBpOOBi+OCieOBquOBi+OBo+OBn1xuICB9XG5cbiAgLyoqXG4gICAqIOOCr+ODquODg+ODlOODs+OCsOOCs+ODs+ODhuOCreOCueODiOOCkumFjee9ruOBmeOCi+ODrOOCpOOCouOCpuODiFxuICAgKiDkuIDjgaTjga7jg6zjg7Pjg4Djg7zjg4bjgq/jgrnjg4Hjg6PjgpLmpbXlipvjgYTjgaPjgbHjgYTjgavkvb/jgaPjgabjg57jgrnjgq/jgpLjg6zjgqTjgqLjgqbjg4jjgZnjgotcbiAgICog44Oe44K544Kv44Kw44Or44O844OX44Gu5pWw44GMNOS7peS4i+OBquOCiVJHQkHlkITjg4Hjg6Pjg7Pjg43jg6vjgavkuIDjgaTjgZrjgaTjg57jgrnjgq/jgpLphY3nva7jgZfjgIE15Lul5LiKNuS7peS4i+OBquOCiVJHQkHjgpIyLDIsMSwx44Go6YWN572u44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSB1c2luZ0NsaXBDb3VudCDphY3nva7jgZnjgovjgq/jg6rjg4Pjg5Tjg7PjgrDjgrPjg7Pjg4bjgq3jgrnjg4jjga7mlbBcbiAgICovXG4gIHB1YmxpYyBzZXR1cExheW91dEJvdW5kcyh1c2luZ0NsaXBDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8g44Gy44Go44Gk44GuUmVuZGVyVGV4dHVyZeOCkualteWKm+OBhOOBo+OBseOBhOOBq+S9v+OBo+OBpuODnuOCueOCr+OCkuODrOOCpOOCouOCpuODiOOBmeOCi1xuICAgIC8vIOODnuOCueOCr+OCsOODq+ODvOODl+OBruaVsOOBjDTku6XkuIvjgarjgolSR0JB5ZCE44OB44Oj44Oz44ON44Or44GrMeOBpOOBmuOBpOODnuOCueOCr+OCkumFjee9ruOBl+OAgTXku6XkuIo25Lul5LiL44Gq44KJUkdCQeOCkjIsMiwxLDHjgajphY3nva7jgZnjgotcblxuICAgIC8vIFJHQkHjgpLpoIbnlarjgavkvb/jgaPjgabjgYTjgY9cbiAgICBsZXQgZGl2OiBudW1iZXIgPSB1c2luZ0NsaXBDb3VudCAvIENvbG9yQ2hhbm5lbENvdW50OyAvLyAx44OB44Oj44Oz44ON44Or44Gr6YWN572u44GZ44KL5Z+65pys44Gu44Oe44K544KvXG4gICAgbGV0IG1vZDogbnVtYmVyID0gdXNpbmdDbGlwQ291bnQgJSBDb2xvckNoYW5uZWxDb3VudDsgLy8g5L2Z44KK44CB44GT44Gu55Wq5Y+344Gu44OB44Oj44Oz44ON44Or44G+44Gn44Gr5LiA44Gk44Ga44Gk6YWN5YiG44GZ44KLXG5cbiAgICAvLyDlsI/mlbDngrnjga/liIfjgormjajjgabjgotcbiAgICBkaXYgPSB+fmRpdjtcbiAgICBtb2QgPSB+fm1vZDtcblxuICAgIC8vIFJHQkHjgZ3jgozjgZ7jgozjga7jg4Hjg6Pjg7Pjg43jg6vjgpLnlKjmhI/jgZfjgabjgYTjgY/vvIgwOlIsIDE6RywgMjpCLCAzOkHvvIlcbiAgICBsZXQgY3VyQ2xpcEluZGV4ID0gMDsgLy8g6aCG55Wq44Gr6Kit5a6a44GX44Gm44GE44GPXG5cbiAgICBmb3IgKGxldCBjaGFubmVsTm8gPSAwOyBjaGFubmVsTm8gPCBDb2xvckNoYW5uZWxDb3VudDsgY2hhbm5lbE5vKyspIHtcbiAgICAgIC8vIOOBk+OBruODgeODo+ODs+ODjeODq+OBq+ODrOOCpOOCouOCpuODiOOBmeOCi+aVsFxuICAgICAgY29uc3QgbGF5b3V0Q291bnQ6IG51bWJlciA9IGRpdiArIChjaGFubmVsTm8gPCBtb2QgPyAxIDogMCk7XG5cbiAgICAgIC8vIOWIhuWJsuaWueazleOCkuaxuuWumuOBmeOCi1xuICAgICAgaWYgKGxheW91dENvdW50ID09IDApIHtcbiAgICAgICAgLy8g5L2V44KC44GX44Gq44GEXG4gICAgICB9IGVsc2UgaWYgKGxheW91dENvdW50ID09IDEpIHtcbiAgICAgICAgLy8g5YWo44Gm44KS44Gd44Gu44G+44G+5L2/44GGXG4gICAgICAgIGNvbnN0IGNsaXBDb250ZXh0OiBDdWJpc21DbGlwcGluZ0NvbnRleHQgPSB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yTWFzay5hdChcbiAgICAgICAgICBjdXJDbGlwSW5kZXgrK1xuICAgICAgICApO1xuICAgICAgICBjbGlwQ29udGV4dC5fbGF5b3V0Q2hhbm5lbE5vID0gY2hhbm5lbE5vO1xuICAgICAgICBjbGlwQ29udGV4dC5fbGF5b3V0Qm91bmRzLnggPSAwLjA7XG4gICAgICAgIGNsaXBDb250ZXh0Ll9sYXlvdXRCb3VuZHMueSA9IDAuMDtcbiAgICAgICAgY2xpcENvbnRleHQuX2xheW91dEJvdW5kcy53aWR0aCA9IDEuMDtcbiAgICAgICAgY2xpcENvbnRleHQuX2xheW91dEJvdW5kcy5oZWlnaHQgPSAxLjA7XG4gICAgICB9IGVsc2UgaWYgKGxheW91dENvdW50ID09IDIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXlvdXRDb3VudDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHhwb3M6IG51bWJlciA9IGkgJSAyO1xuXG4gICAgICAgICAgLy8g5bCP5pWw54K544Gv5YiH44KK5o2o44Gm44KLXG4gICAgICAgICAgeHBvcyA9IH5+eHBvcztcblxuICAgICAgICAgIGNvbnN0IGNjOiBDdWJpc21DbGlwcGluZ0NvbnRleHQgPSB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yTWFzay5hdChcbiAgICAgICAgICAgIGN1ckNsaXBJbmRleCsrXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjYy5fbGF5b3V0Q2hhbm5lbE5vID0gY2hhbm5lbE5vO1xuXG4gICAgICAgICAgY2MuX2xheW91dEJvdW5kcy54ID0geHBvcyAqIDAuNTtcbiAgICAgICAgICBjYy5fbGF5b3V0Qm91bmRzLnkgPSAwLjA7XG4gICAgICAgICAgY2MuX2xheW91dEJvdW5kcy53aWR0aCA9IDAuNTtcbiAgICAgICAgICBjYy5fbGF5b3V0Qm91bmRzLmhlaWdodCA9IDEuMDtcbiAgICAgICAgICAvLyBVVuOCkjLjgaTjgavliIbop6PjgZfjgabkvb/jgYZcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChsYXlvdXRDb3VudCA8PSA0KSB7XG4gICAgICAgIC8vIDTliIblibLjgZfjgabkvb/jgYZcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXlvdXRDb3VudDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHhwb3M6IG51bWJlciA9IGkgJSAyO1xuICAgICAgICAgIGxldCB5cG9zOiBudW1iZXIgPSBpIC8gMjtcblxuICAgICAgICAgIC8vIOWwj+aVsOeCueOBr+WIh+OCiuaNqOOBpuOCi1xuICAgICAgICAgIHhwb3MgPSB+fnhwb3M7XG4gICAgICAgICAgeXBvcyA9IH5+eXBvcztcblxuICAgICAgICAgIGNvbnN0IGNjID0gdGhpcy5fY2xpcHBpbmdDb250ZXh0TGlzdEZvck1hc2suYXQoY3VyQ2xpcEluZGV4KyspO1xuICAgICAgICAgIGNjLl9sYXlvdXRDaGFubmVsTm8gPSBjaGFubmVsTm87XG5cbiAgICAgICAgICBjYy5fbGF5b3V0Qm91bmRzLnggPSB4cG9zICogMC41O1xuICAgICAgICAgIGNjLl9sYXlvdXRCb3VuZHMueSA9IHlwb3MgKiAwLjU7XG4gICAgICAgICAgY2MuX2xheW91dEJvdW5kcy53aWR0aCA9IDAuNTtcbiAgICAgICAgICBjYy5fbGF5b3V0Qm91bmRzLmhlaWdodCA9IDAuNTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChsYXlvdXRDb3VudCA8PSA5KSB7XG4gICAgICAgIC8vIDnliIblibLjgZfjgabkvb/jgYZcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXlvdXRDb3VudDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHhwb3MgPSBpICUgMztcbiAgICAgICAgICBsZXQgeXBvcyA9IGkgLyAzO1xuXG4gICAgICAgICAgLy8g5bCP5pWw54K544Gv5YiH44KK5o2o44Gm44KLXG4gICAgICAgICAgeHBvcyA9IH5+eHBvcztcbiAgICAgICAgICB5cG9zID0gfn55cG9zO1xuXG4gICAgICAgICAgY29uc3QgY2M6IEN1YmlzbUNsaXBwaW5nQ29udGV4dCA9IHRoaXMuX2NsaXBwaW5nQ29udGV4dExpc3RGb3JNYXNrLmF0KFxuICAgICAgICAgICAgY3VyQ2xpcEluZGV4KytcbiAgICAgICAgICApO1xuICAgICAgICAgIGNjLl9sYXlvdXRDaGFubmVsTm8gPSBjaGFubmVsTm87XG5cbiAgICAgICAgICBjYy5fbGF5b3V0Qm91bmRzLnggPSB4cG9zIC8gMy4wO1xuICAgICAgICAgIGNjLl9sYXlvdXRCb3VuZHMueSA9IHlwb3MgLyAzLjA7XG4gICAgICAgICAgY2MuX2xheW91dEJvdW5kcy53aWR0aCA9IDEuMCAvIDMuMDtcbiAgICAgICAgICBjYy5fbGF5b3V0Qm91bmRzLmhlaWdodCA9IDEuMCAvIDMuMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ3ViaXNtTG9nRXJyb3IoJ25vdCBzdXBwb3J0ZWQgbWFzayBjb3VudCA6IHswfScsIGxheW91dENvdW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kr44Op44O844OQ44OD44OV44Kh44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g44Kr44Op44O844OQ44OD44OV44KhXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29sb3JCdWZmZXIoKTogV2ViR0xUZXh0dXJlIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3JCdWZmZXI7XG4gIH1cblxuICAvKipcbiAgICog55S76Z2i5o+P55S744Gr5L2/55So44GZ44KL44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gu44Oq44K544OI44KS5Y+W5b6X44GZ44KLXG4gICAqIEByZXR1cm4g55S76Z2i5o+P55S744Gr5L2/55So44GZ44KL44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gu44Oq44K544OIXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2xpcHBpbmdDb250ZXh0TGlzdEZvckRyYXcoKTogY3NtVmVjdG9yPEN1YmlzbUNsaXBwaW5nQ29udGV4dD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGlwcGluZ0NvbnRleHRMaXN0Rm9yRHJhdztcbiAgfVxuXG4gIC8qKlxuICAgKiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrrjgpLoqK3lrprjgZnjgotcbiAgICogQHBhcmFtIHNpemUg44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44OQ44OD44OV44Kh44Gu44K144Kk44K6XG4gICAqL1xuICBwdWJsaWMgc2V0Q2xpcHBpbmdNYXNrQnVmZmVyU2l6ZShzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGlwcGluZ01hc2tCdWZmZXJTaXplID0gc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrrjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrpcbiAgICovXG4gIHB1YmxpYyBnZXRDbGlwcGluZ01hc2tCdWZmZXJTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaXBwaW5nTWFza0J1ZmZlclNpemU7XG4gIH1cblxuICBwdWJsaWMgX21hc2tSZW5kZXJUZXh0dXJlOiBXZWJHTEZyYW1lYnVmZmVyOyAvLyDjg57jgrnjgq/nlKjjg6zjg7Pjg4Djg7zjg4bjgq/jgrnjg4Hjg6Pjga7jgqLjg4njg6zjgrlcbiAgcHVibGljIF9jb2xvckJ1ZmZlcjogV2ViR0xUZXh0dXJlOyAvLyDjg57jgrnjgq/nlKjjgqvjg6njg7zjg5Djg4Pjg5XjgqHjg7zjga7jgqLjg4njg6zjgrlcbiAgcHVibGljIF9jdXJyZW50RnJhbWVObzogbnVtYmVyOyAvLyDjg57jgrnjgq/jg4bjgq/jgrnjg4Hjg6PjgavkuI7jgYjjgovjg5Xjg6zjg7zjg6Dnlarlj7dcblxuICBwdWJsaWMgX2NoYW5uZWxDb2xvcnM6IGNzbVZlY3RvcjxDdWJpc21UZXh0dXJlQ29sb3I+O1xuICBwdWJsaWMgX21hc2tUZXh0dXJlOiBDdWJpc21SZW5kZXJUZXh0dXJlUmVzb3VyY2U7IC8vIOODnuOCueOCr+eUqOOBruODhuOCr+OCueODgeODo+ODquOCveODvOOCueOBruODquOCueODiFxuICBwdWJsaWMgX2NsaXBwaW5nQ29udGV4dExpc3RGb3JNYXNrOiBjc21WZWN0b3I8Q3ViaXNtQ2xpcHBpbmdDb250ZXh0PjsgLy8g44Oe44K544Kv55So44Kv44Oq44OD44OU44Oz44Kw44Kz44Oz44OG44Kt44K544OI44Gu44Oq44K544OIXG4gIHB1YmxpYyBfY2xpcHBpbmdDb250ZXh0TGlzdEZvckRyYXc6IGNzbVZlY3RvcjxDdWJpc21DbGlwcGluZ0NvbnRleHQ+OyAvLyDmj4/nlLvnlKjjgq/jg6rjg4Pjg5Tjg7PjgrDjgrPjg7Pjg4bjgq3jgrnjg4jjga7jg6rjgrnjg4hcbiAgcHVibGljIF9jbGlwcGluZ01hc2tCdWZmZXJTaXplOiBudW1iZXI7IC8vIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBruODkOODg+ODleOCoeOCteOCpOOCuu+8iOWIneacn+WApDoyNTbvvIlcblxuICBwcml2YXRlIF90bXBNYXRyaXg6IEN1YmlzbU1hdHJpeDQ0OyAvLyDjg57jgrnjgq/oqIjnrpfnlKjjga7ooYzliJdcbiAgcHJpdmF0ZSBfdG1wTWF0cml4Rm9yTWFzazogQ3ViaXNtTWF0cml4NDQ7IC8vIOODnuOCueOCr+ioiOeul+eUqOOBruihjOWIl1xuICBwcml2YXRlIF90bXBNYXRyaXhGb3JEcmF3OiBDdWJpc21NYXRyaXg0NDsgLy8g44Oe44K544Kv6KiI566X55So44Gu6KGM5YiXXG4gIHByaXZhdGUgX3RtcEJvdW5kc09uTW9kZWw6IGNzbVJlY3Q7IC8vIOODnuOCueOCr+mFjee9ruioiOeul+eUqOOBruefqeW9olxuXG4gIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7IC8vIFdlYkdM44Os44Oz44OA44Oq44Oz44Kw44Kz44Oz44OG44Kt44K544OIXG59XG5cbi8qKlxuICog44Os44Oz44OA44O844OG44Kv44K544OB44Oj44Gu44Oq44K944O844K544KS5a6a576p44GZ44KL5qeL6YCg5L2TXG4gKiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jgafkvb/nlKjjgZnjgotcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVJlbmRlclRleHR1cmVSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiDlvJXmlbDku5jjgY3jgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICogQHBhcmFtIGZyYW1lTm8g44Os44Oz44OA44Op44O844Gu44OV44Os44O844Og55Wq5Y+3XG4gICAqIEBwYXJhbSB0ZXh0dXJlIOODhuOCr+OCueODgeODo+OBruOCouODieODrOOCuVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKGZyYW1lTm86IG51bWJlciwgdGV4dHVyZTogV2ViR0xGcmFtZWJ1ZmZlcikge1xuICAgIHRoaXMuZnJhbWVObyA9IGZyYW1lTm87XG4gICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcbiAgfVxuXG4gIHB1YmxpYyBmcmFtZU5vOiBudW1iZXI7IC8vIOODrOODs+ODgOODqeOBruODleODrOODvOODoOeVquWPt1xuICBwdWJsaWMgdGV4dHVyZTogV2ViR0xGcmFtZWJ1ZmZlcjsgLy8g44OG44Kv44K544OB44Oj44Gu44Ki44OJ44Os44K5XG59XG5cbi8qKlxuICog44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44Gu44Kz44Oz44OG44Kt44K544OIXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21DbGlwcGluZ0NvbnRleHQge1xuICAvKipcbiAgICog5byV5pWw5LuY44GN44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgbWFuYWdlcjogQ3ViaXNtQ2xpcHBpbmdNYW5hZ2VyX1dlYkdMLFxuICAgIGNsaXBwaW5nRHJhd2FibGVJbmRpY2VzOiBJbnQzMkFycmF5LFxuICAgIGNsaXBDb3VudDogbnVtYmVyXG4gICkge1xuICAgIHRoaXMuX293bmVyID0gbWFuYWdlcjtcblxuICAgIC8vIOOCr+ODquODg+ODl+OBl+OBpuOBhOOCi++8iO+8neODnuOCueOCr+eUqOOBru+8iURyYXdhYmxl44Gu44Kk44Oz44OH44OD44Kv44K544Oq44K544OIXG4gICAgdGhpcy5fY2xpcHBpbmdJZExpc3QgPSBjbGlwcGluZ0RyYXdhYmxlSW5kaWNlcztcblxuICAgIC8vIOODnuOCueOCr+OBruaVsFxuICAgIHRoaXMuX2NsaXBwaW5nSWRDb3VudCA9IGNsaXBDb3VudDtcblxuICAgIHRoaXMuX2FsbENsaXBwZWREcmF3UmVjdCA9IG5ldyBjc21SZWN0KCk7XG4gICAgdGhpcy5fbGF5b3V0Qm91bmRzID0gbmV3IGNzbVJlY3QoKTtcblxuICAgIHRoaXMuX2NsaXBwZWREcmF3YWJsZUluZGV4TGlzdCA9IFtdO1xuXG4gICAgdGhpcy5fbWF0cml4Rm9yTWFzayA9IG5ldyBDdWJpc21NYXRyaXg0NCgpO1xuICAgIHRoaXMuX21hdHJpeEZvckRyYXcgPSBuZXcgQ3ViaXNtTWF0cml4NDQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjgrnjg4jjg6njgq/jgr/nm7jlvZPjga7lh6bnkIZcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sYXlvdXRCb3VuZHMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fbGF5b3V0Qm91bmRzID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWxsQ2xpcHBlZERyYXdSZWN0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2FsbENsaXBwZWREcmF3UmVjdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NsaXBwZWREcmF3YWJsZUluZGV4TGlzdCAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9jbGlwcGVkRHJhd2FibGVJbmRleExpc3QgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgZPjga7jg57jgrnjgq/jgavjgq/jg6rjg4Pjg5fjgZXjgozjgovmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjgpLov73liqDjgZnjgotcbiAgICpcbiAgICogQHBhcmFtIGRyYXdhYmxlSW5kZXgg44Kv44Oq44OD44OU44Oz44Kw5a++6LGh44Gr6L+95Yqg44GZ44KL5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu44Kk44Oz44OH44OD44Kv44K5XG4gICAqL1xuICBwdWJsaWMgYWRkQ2xpcHBlZERyYXdhYmxlKGRyYXdhYmxlSW5kZXg6IG51bWJlcikge1xuICAgIHRoaXMuX2NsaXBwZWREcmF3YWJsZUluZGV4TGlzdC5wdXNoKGRyYXdhYmxlSW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOBk+OBruODnuOCueOCr+OCkueuoeeQhuOBmeOCi+ODnuODjeODvOOCuOODo+OBruOCpOODs+OCueOCv+ODs+OCueOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOOCr+ODquODg+ODlOODs+OCsOODnuODjeODvOOCuOODo+OBruOCpOODs+OCueOCv+ODs+OCuVxuICAgKi9cbiAgcHVibGljIGdldENsaXBwaW5nTWFuYWdlcigpOiBDdWJpc21DbGlwcGluZ01hbmFnZXJfV2ViR0wge1xuICAgIHJldHVybiB0aGlzLl9vd25lcjtcbiAgfVxuXG4gIHB1YmxpYyBzZXRHbChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XG4gICAgdGhpcy5fb3duZXIuc2V0R0woZ2wpO1xuICB9XG5cbiAgcHVibGljIF9pc1VzaW5nOiBib29sZWFuOyAvLyDnj77lnKjjga7mj4/nlLvnirbmhYvjgafjg57jgrnjgq/jga7mupblgpnjgYzlv4XopoHjgarjgol0cnVlXG4gIHB1YmxpYyByZWFkb25seSBfY2xpcHBpbmdJZExpc3Q6IEludDMyQXJyYXk7IC8vIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBrklE44Oq44K544OIXG4gIHB1YmxpYyBfY2xpcHBpbmdJZENvdW50OiBudW1iZXI7IC8vIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBruaVsFxuICBwdWJsaWMgX2xheW91dENoYW5uZWxObzogbnVtYmVyOyAvLyBSR0JB44Gu44GE44Ga44KM44Gu44OB44Oj44Oz44ON44Or44Gr44GT44Gu44Kv44Oq44OD44OX44KS6YWN572u44GZ44KL44GL77yIMDpSLCAxOkcsIDI6QiwgMzpB77yJXG4gIHB1YmxpYyBfbGF5b3V0Qm91bmRzOiBjc21SZWN0OyAvLyDjg57jgrnjgq/nlKjjg4Hjg6Pjg7Pjg43jg6vjga7jganjga7poJjln5/jgavjg57jgrnjgq/jgpLlhaXjgozjgovjgYvvvIhWaWV35bqn5qiZLTF+MSwgVVbjga8wfjHjgavnm7TjgZnvvIlcbiAgcHVibGljIF9hbGxDbGlwcGVkRHJhd1JlY3Q6IGNzbVJlY3Q7IC8vIOOBk+OBruOCr+ODquODg+ODlOODs+OCsOOBp+OAgeOCr+ODquODg+ODlOODs+OCsOOBleOCjOOCi+OBmeOBueOBpuOBruaPj+eUu+OCquODluOCuOOCp+OCr+ODiOOBruWbsuOBv+efqeW9ou+8iOavjuWbnuabtOaWsO+8iVxuICBwdWJsaWMgX21hdHJpeEZvck1hc2s6IEN1YmlzbU1hdHJpeDQ0OyAvLyDjg57jgrnjgq/jga7kvY3nva7oqIjnrpfntZDmnpzjgpLkv53mjIHjgZnjgovooYzliJdcbiAgcHVibGljIF9tYXRyaXhGb3JEcmF3OiBDdWJpc21NYXRyaXg0NDsgLy8g5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu5L2N572u6KiI566X57WQ5p6c44KS5L+d5oyB44GZ44KL6KGM5YiXXG4gIHB1YmxpYyBfY2xpcHBlZERyYXdhYmxlSW5kZXhMaXN0OiBudW1iZXJbXTsgLy8g44GT44Gu44Oe44K544Kv44Gr44Kv44Oq44OD44OX44GV44KM44KL5o+P55S744Kq44OW44K444Kn44Kv44OI44Gu44Oq44K544OIXG5cbiAgcHJpdmF0ZSBfb3duZXI6IEN1YmlzbUNsaXBwaW5nTWFuYWdlcl9XZWJHTDsgLy8g44GT44Gu44Oe44K544Kv44KS566h55CG44GX44Gm44GE44KL44Oe44ON44O844K444Oj44Gu44Kk44Oz44K544K/44Oz44K5XG59XG5cbi8qKlxuICogV2ViR0znlKjjga7jgrfjgqfjg7zjg4Djg7zjg5fjg63jgrDjg6njg6DjgpLnlJ/miJDjg7vnoLTmo4TjgZnjgovjgq/jg6njgrlcbiAqIOOCt+ODs+OCsOODq+ODiOODs+OBquOCr+ODqeOCueOBp+OBguOCiuOAgUN1YmlzbVNoYWRlcl9XZWJHTC5nZXRJbnN0YW5jZeOBi+OCieOCouOCr+OCu+OCueOBmeOCi+OAglxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtU2hhZGVyX1dlYkdMIHtcbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkuWPluW+l+OBmeOCi++8iOOCt+ODs+OCsOODq+ODiOODs++8iVxuICAgKiBAcmV0dXJuIOOCpOODs+OCueOCv+ODs+OCuVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBDdWJpc21TaGFkZXJfV2ViR0wge1xuICAgIGlmIChzX2luc3RhbmNlID09IG51bGwpIHtcbiAgICAgIHNfaW5zdGFuY2UgPSBuZXcgQ3ViaXNtU2hhZGVyX1dlYkdMKCk7XG5cbiAgICAgIHJldHVybiBzX2luc3RhbmNlO1xuICAgIH1cbiAgICByZXR1cm4gc19pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLplovmlL7jgZnjgovvvIjjgrfjg7PjgrDjg6vjg4jjg7PvvIlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlSW5zdGFuY2UoKTogdm9pZCB7XG4gICAgaWYgKHNfaW5zdGFuY2UpIHtcbiAgICAgIHNfaW5zdGFuY2UucmVsZWFzZSgpO1xuICAgICAgc19pbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHByaXZhdGXjgarjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2hhZGVyU2V0cyA9IG5ldyBjc21WZWN0b3I8Q3ViaXNtU2hhZGVyU2V0PigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv+ebuOW9k+OBruWHpueQhlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgdGhpcy5yZWxlYXNlU2hhZGVyUHJvZ3JhbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCt+OCp+ODvOODgOODvOODl+ODreOCsOODqeODoOOBruS4gOmAo+OBruOCu+ODg+ODiOOCouODg+ODl+OCkuWun+ihjOOBmeOCi1xuICAgKiBAcGFyYW0gcmVuZGVyZXIg44Os44Oz44OA44Op44Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqIEBwYXJhbSB0ZXh0dXJlSWQgR1BV44Gu44OG44Kv44K544OB44OjSURcbiAgICogQHBhcmFtIHZlcnRleENvdW50IOODneODquOCtOODs+ODoeODg+OCt+ODpeOBrumggueCueaVsFxuICAgKiBAcGFyYW0gdmVydGV4QXJyYXkg44Od44Oq44K044Oz44Oh44OD44K344Ol44Gu6aCC54K56YWN5YiXXG4gICAqIEBwYXJhbSBpbmRleEFycmF5IOOCpOODs+ODh+ODg+OCr+OCueODkOODg+ODleOCoeOBrumggueCuemFjeWIl1xuICAgKiBAcGFyYW0gdXZBcnJheSB1dumFjeWIl1xuICAgKiBAcGFyYW0gb3BhY2l0eSDkuI3pgI/mmI7luqZcbiAgICogQHBhcmFtIGNvbG9yQmxlbmRNb2RlIOOCq+ODqeODvOODluODrOODs+ODh+OCo+ODs+OCsOOBruOCv+OCpOODl1xuICAgKiBAcGFyYW0gYmFzZUNvbG9yIOODmeODvOOCueOCq+ODqeODvFxuICAgKiBAcGFyYW0gaXNQcmVtdWx0aXBsaWVkQWxwaGEg5LmX566X5riI44G/44Ki44Or44OV44Kh44GL44Gp44GG44GLXG4gICAqIEBwYXJhbSBtYXRyaXg0eDQgTW9kZWwtVmlldy1Qcm9qZWN0aW9u6KGM5YiXXG4gICAqIEBwYXJhbSBpbnZlcnRlZE1hc2sg44Oe44K544Kv44KS5Y+N6Lui44GX44Gm5L2/55So44GZ44KL44OV44Op44KwXG4gICAqL1xuICBwdWJsaWMgc2V0dXBTaGFkZXJQcm9ncmFtKFxuICAgIHJlbmRlcmVyOiBDdWJpc21SZW5kZXJlcl9XZWJHTCxcbiAgICB0ZXh0dXJlSWQ6IFdlYkdMVGV4dHVyZSxcbiAgICB2ZXJ0ZXhDb3VudDogbnVtYmVyLFxuICAgIHZlcnRleEFycmF5OiBGbG9hdDMyQXJyYXksXG4gICAgaW5kZXhBcnJheTogVWludDE2QXJyYXksXG4gICAgdXZBcnJheTogRmxvYXQzMkFycmF5LFxuICAgIGJ1ZmZlckRhdGE6IHtcbiAgICAgIHZlcnRleDogV2ViR0xCdWZmZXI7XG4gICAgICB1djogV2ViR0xCdWZmZXI7XG4gICAgICBpbmRleDogV2ViR0xCdWZmZXI7XG4gICAgfSxcbiAgICBvcGFjaXR5OiBudW1iZXIsXG4gICAgY29sb3JCbGVuZE1vZGU6IEN1YmlzbUJsZW5kTW9kZSxcbiAgICBiYXNlQ29sb3I6IEN1YmlzbVRleHR1cmVDb2xvcixcbiAgICBpc1ByZW11bHRpcGxpZWRBbHBoYTogYm9vbGVhbixcbiAgICBtYXRyaXg0eDQ6IEN1YmlzbU1hdHJpeDQ0LFxuICAgIGludmVydGVkTWFzazogYm9vbGVhblxuICApOiB2b2lkIHtcbiAgICBpZiAoIWlzUHJlbXVsdGlwbGllZEFscGhhKSB7XG4gICAgICBDdWJpc21Mb2dFcnJvcignTm9QcmVtdWx0aXBsaWVkQWxwaGEgaXMgbm90IGFsbG93ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2hhZGVyU2V0cy5nZXRTaXplKCkgPT0gMCkge1xuICAgICAgdGhpcy5nZW5lcmF0ZVNoYWRlcnMoKTtcbiAgICB9XG5cbiAgICAvLyBCbGVuZGluZ1xuICAgIGxldCBTUkNfQ09MT1I6IG51bWJlcjtcbiAgICBsZXQgRFNUX0NPTE9SOiBudW1iZXI7XG4gICAgbGV0IFNSQ19BTFBIQTogbnVtYmVyO1xuICAgIGxldCBEU1RfQUxQSEE6IG51bWJlcjtcblxuICAgIGlmIChyZW5kZXJlci5nZXRDbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JNYXNrKCkgIT0gbnVsbCkge1xuICAgICAgLy8g44Oe44K544Kv55Sf5oiQ5pmCXG4gICAgICBjb25zdCBzaGFkZXJTZXQ6IEN1YmlzbVNoYWRlclNldCA9IHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAgIFNoYWRlck5hbWVzLlNoYWRlck5hbWVzX1NldHVwTWFza1xuICAgICAgKTtcbiAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbShzaGFkZXJTZXQuc2hhZGVyUHJvZ3JhbSk7XG5cbiAgICAgIC8vIOODhuOCr+OCueODgeODo+ioreWumlxuICAgICAgdGhpcy5nbC5hY3RpdmVUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRTApO1xuICAgICAgdGhpcy5nbC5iaW5kVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkVfMkQsIHRleHR1cmVJZCk7XG4gICAgICB0aGlzLmdsLnVuaWZvcm0xaShzaGFkZXJTZXQuc2FtcGxlclRleHR1cmUwTG9jYXRpb24sIDApO1xuXG4gICAgICAvLyDpoILngrnphY3liJfjga7oqK3lrpooVkJPKVxuICAgICAgaWYgKGJ1ZmZlckRhdGEudmVydGV4ID09IG51bGwpIHtcbiAgICAgICAgYnVmZmVyRGF0YS52ZXJ0ZXggPSB0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJEYXRhLnZlcnRleCk7XG4gICAgICB0aGlzLmdsLmJ1ZmZlckRhdGEoXG4gICAgICAgIHRoaXMuZ2wuQVJSQVlfQlVGRkVSLFxuICAgICAgICB2ZXJ0ZXhBcnJheSxcbiAgICAgICAgdGhpcy5nbC5EWU5BTUlDX0RSQVdcbiAgICAgICk7XG4gICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNoYWRlclNldC5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uKTtcbiAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcihcbiAgICAgICAgc2hhZGVyU2V0LmF0dHJpYnV0ZVBvc2l0aW9uTG9jYXRpb24sXG4gICAgICAgIDIsXG4gICAgICAgIHRoaXMuZ2wuRkxPQVQsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgICApO1xuXG4gICAgICAvLyDjg4bjgq/jgrnjg4Hjg6PpoILngrnjga7oqK3lrppcbiAgICAgIGlmIChidWZmZXJEYXRhLnV2ID09IG51bGwpIHtcbiAgICAgICAgYnVmZmVyRGF0YS51diA9IHRoaXMuZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlckRhdGEudXYpO1xuICAgICAgdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLCB1dkFycmF5LCB0aGlzLmdsLkRZTkFNSUNfRFJBVyk7XG4gICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNoYWRlclNldC5hdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uKTtcbiAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcihcbiAgICAgICAgc2hhZGVyU2V0LmF0dHJpYnV0ZVRleENvb3JkTG9jYXRpb24sXG4gICAgICAgIDIsXG4gICAgICAgIHRoaXMuZ2wuRkxPQVQsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgICApO1xuXG4gICAgICAvLyDjg4Hjg6Pjg7Pjg43jg6tcbiAgICAgIGNvbnN0IGNoYW5uZWxObzogbnVtYmVyID0gcmVuZGVyZXIuZ2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzaygpXG4gICAgICAgIC5fbGF5b3V0Q2hhbm5lbE5vO1xuICAgICAgY29uc3QgY29sb3JDaGFubmVsOiBDdWJpc21UZXh0dXJlQ29sb3IgPSByZW5kZXJlclxuICAgICAgICAuZ2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzaygpXG4gICAgICAgIC5nZXRDbGlwcGluZ01hbmFnZXIoKVxuICAgICAgICAuZ2V0Q2hhbm5lbEZsYWdBc0NvbG9yKGNoYW5uZWxObyk7XG4gICAgICB0aGlzLmdsLnVuaWZvcm00ZihcbiAgICAgICAgc2hhZGVyU2V0LnVuaWZvcm1DaGFubmVsRmxhZ0xvY2F0aW9uLFxuICAgICAgICBjb2xvckNoYW5uZWwuUixcbiAgICAgICAgY29sb3JDaGFubmVsLkcsXG4gICAgICAgIGNvbG9yQ2hhbm5lbC5CLFxuICAgICAgICBjb2xvckNoYW5uZWwuQVxuICAgICAgKTtcblxuICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KFxuICAgICAgICBzaGFkZXJTZXQudW5pZm9ybUNsaXBNYXRyaXhMb2NhdGlvbixcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHJlbmRlcmVyLmdldENsaXBwaW5nQ29udGV4dEJ1ZmZlckZvck1hc2soKS5fbWF0cml4Rm9yTWFzay5nZXRBcnJheSgpXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZWN0OiBjc21SZWN0ID0gcmVuZGVyZXIuZ2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzaygpXG4gICAgICAgIC5fbGF5b3V0Qm91bmRzO1xuXG4gICAgICB0aGlzLmdsLnVuaWZvcm00ZihcbiAgICAgICAgc2hhZGVyU2V0LnVuaWZvcm1CYXNlQ29sb3JMb2NhdGlvbixcbiAgICAgICAgcmVjdC54ICogMi4wIC0gMS4wLFxuICAgICAgICByZWN0LnkgKiAyLjAgLSAxLjAsXG4gICAgICAgIHJlY3QuZ2V0UmlnaHQoKSAqIDIuMCAtIDEuMCxcbiAgICAgICAgcmVjdC5nZXRCb3R0b20oKSAqIDIuMCAtIDEuMFxuICAgICAgKTtcblxuICAgICAgU1JDX0NPTE9SID0gdGhpcy5nbC5aRVJPO1xuICAgICAgRFNUX0NPTE9SID0gdGhpcy5nbC5PTkVfTUlOVVNfU1JDX0NPTE9SO1xuICAgICAgU1JDX0FMUEhBID0gdGhpcy5nbC5aRVJPO1xuICAgICAgRFNUX0FMUEhBID0gdGhpcy5nbC5PTkVfTUlOVVNfU1JDX0FMUEhBO1xuICAgIH0gLy8g44Oe44K544Kv55Sf5oiQ5Lul5aSW44Gu5aC05ZCIXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBtYXNrZWQ6IGJvb2xlYW4gPVxuICAgICAgICByZW5kZXJlci5nZXRDbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JEcmF3KCkgIT0gbnVsbDsgLy8g44GT44Gu5o+P55S744Kq44OW44K444Kn44Kv44OI44Gv44Oe44K544Kv5a++6LGh44GLXG4gICAgICBjb25zdCBvZmZzZXQ6IG51bWJlciA9IG1hc2tlZCA/IChpbnZlcnRlZE1hc2sgPyAyIDogMSkgOiAwO1xuXG4gICAgICBsZXQgc2hhZGVyU2V0OiBDdWJpc21TaGFkZXJTZXQgPSBuZXcgQ3ViaXNtU2hhZGVyU2V0KCk7XG5cbiAgICAgIHN3aXRjaCAoY29sb3JCbGVuZE1vZGUpIHtcbiAgICAgICAgY2FzZSBDdWJpc21CbGVuZE1vZGUuQ3ViaXNtQmxlbmRNb2RlX05vcm1hbDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzaGFkZXJTZXQgPSB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgICAgICAgU2hhZGVyTmFtZXMuU2hhZGVyTmFtZXNfTm9ybWFsUHJlbXVsdGlwbGllZEFscGhhICsgb2Zmc2V0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBTUkNfQ09MT1IgPSB0aGlzLmdsLk9ORTtcbiAgICAgICAgICBEU1RfQ09MT1IgPSB0aGlzLmdsLk9ORV9NSU5VU19TUkNfQUxQSEE7XG4gICAgICAgICAgU1JDX0FMUEhBID0gdGhpcy5nbC5PTkU7XG4gICAgICAgICAgRFNUX0FMUEhBID0gdGhpcy5nbC5PTkVfTUlOVVNfU1JDX0FMUEhBO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ3ViaXNtQmxlbmRNb2RlLkN1YmlzbUJsZW5kTW9kZV9BZGRpdGl2ZTpcbiAgICAgICAgICBzaGFkZXJTZXQgPSB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgICAgICAgU2hhZGVyTmFtZXMuU2hhZGVyTmFtZXNfQWRkUHJlbXVsdGlwbGllZEFscGhhICsgb2Zmc2V0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBTUkNfQ09MT1IgPSB0aGlzLmdsLk9ORTtcbiAgICAgICAgICBEU1RfQ09MT1IgPSB0aGlzLmdsLk9ORTtcbiAgICAgICAgICBTUkNfQUxQSEEgPSB0aGlzLmdsLlpFUk87XG4gICAgICAgICAgRFNUX0FMUEhBID0gdGhpcy5nbC5PTkU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDdWJpc21CbGVuZE1vZGUuQ3ViaXNtQmxlbmRNb2RlX011bHRpcGxpY2F0aXZlOlxuICAgICAgICAgIHNoYWRlclNldCA9IHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAgICAgICBTaGFkZXJOYW1lcy5TaGFkZXJOYW1lc19NdWx0UHJlbXVsdGlwbGllZEFscGhhICsgb2Zmc2V0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBTUkNfQ09MT1IgPSB0aGlzLmdsLkRTVF9DT0xPUjtcbiAgICAgICAgICBEU1RfQ09MT1IgPSB0aGlzLmdsLk9ORV9NSU5VU19TUkNfQUxQSEE7XG4gICAgICAgICAgU1JDX0FMUEhBID0gdGhpcy5nbC5aRVJPO1xuICAgICAgICAgIERTVF9BTFBIQSA9IHRoaXMuZ2wuT05FO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmdsLnVzZVByb2dyYW0oc2hhZGVyU2V0LnNoYWRlclByb2dyYW0pO1xuXG4gICAgICAvLyDpoILngrnphY3liJfjga7oqK3lrppcbiAgICAgIGlmIChidWZmZXJEYXRhLnZlcnRleCA9PSBudWxsKSB7XG4gICAgICAgIGJ1ZmZlckRhdGEudmVydGV4ID0gdGhpcy5nbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyRGF0YS52ZXJ0ZXgpO1xuICAgICAgdGhpcy5nbC5idWZmZXJEYXRhKFxuICAgICAgICB0aGlzLmdsLkFSUkFZX0JVRkZFUixcbiAgICAgICAgdmVydGV4QXJyYXksXG4gICAgICAgIHRoaXMuZ2wuRFlOQU1JQ19EUkFXXG4gICAgICApO1xuICAgICAgdGhpcy5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJTZXQuYXR0cmlidXRlUG9zaXRpb25Mb2NhdGlvbik7XG4gICAgICB0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgIHNoYWRlclNldC5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uLFxuICAgICAgICAyLFxuICAgICAgICB0aGlzLmdsLkZMT0FULFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgICAgKTtcblxuICAgICAgLy8g44OG44Kv44K544OB44Oj6aCC54K544Gu6Kit5a6aXG4gICAgICBpZiAoYnVmZmVyRGF0YS51diA9PSBudWxsKSB7XG4gICAgICAgIGJ1ZmZlckRhdGEudXYgPSB0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJEYXRhLnV2KTtcbiAgICAgIHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkFSUkFZX0JVRkZFUiwgdXZBcnJheSwgdGhpcy5nbC5EWU5BTUlDX0RSQVcpO1xuICAgICAgdGhpcy5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJTZXQuYXR0cmlidXRlVGV4Q29vcmRMb2NhdGlvbik7XG4gICAgICB0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgIHNoYWRlclNldC5hdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uLFxuICAgICAgICAyLFxuICAgICAgICB0aGlzLmdsLkZMT0FULFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgICAgKTtcblxuICAgICAgaWYgKG1hc2tlZCkge1xuICAgICAgICB0aGlzLmdsLmFjdGl2ZVRleHR1cmUodGhpcy5nbC5URVhUVVJFMSk7XG4gICAgICAgIGNvbnN0IHRleDogV2ViR0xUZXh0dXJlID0gcmVuZGVyZXJcbiAgICAgICAgICAuZ2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yRHJhdygpXG4gICAgICAgICAgLmdldENsaXBwaW5nTWFuYWdlcigpXG4gICAgICAgICAgLmdldENvbG9yQnVmZmVyKCk7XG4gICAgICAgIHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELCB0ZXgpO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm0xaShzaGFkZXJTZXQuc2FtcGxlclRleHR1cmUxTG9jYXRpb24sIDEpO1xuXG4gICAgICAgIC8vIHZpZXfluqfmqJnjgpJDbGlwcGluZ0NvbnRleHTjga7luqfmqJnjgavlpInmj5vjgZnjgovjgZ/jgoHjga7ooYzliJfjgpLoqK3lrppcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KFxuICAgICAgICAgIHNoYWRlclNldC51bmlmb3JtQ2xpcE1hdHJpeExvY2F0aW9uLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHJlbmRlcmVyLmdldENsaXBwaW5nQ29udGV4dEJ1ZmZlckZvckRyYXcoKS5fbWF0cml4Rm9yRHJhdy5nZXRBcnJheSgpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8g5L2/55So44GZ44KL44Kr44Op44O844OB44Oj44Oz44ON44Or44KS6Kit5a6aXG4gICAgICAgIGNvbnN0IGNoYW5uZWxObzogbnVtYmVyID0gcmVuZGVyZXIuZ2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yRHJhdygpXG4gICAgICAgICAgLl9sYXlvdXRDaGFubmVsTm87XG4gICAgICAgIGNvbnN0IGNvbG9yQ2hhbm5lbDogQ3ViaXNtVGV4dHVyZUNvbG9yID0gcmVuZGVyZXJcbiAgICAgICAgICAuZ2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yRHJhdygpXG4gICAgICAgICAgLmdldENsaXBwaW5nTWFuYWdlcigpXG4gICAgICAgICAgLmdldENoYW5uZWxGbGFnQXNDb2xvcihjaGFubmVsTm8pO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm00ZihcbiAgICAgICAgICBzaGFkZXJTZXQudW5pZm9ybUNoYW5uZWxGbGFnTG9jYXRpb24sXG4gICAgICAgICAgY29sb3JDaGFubmVsLlIsXG4gICAgICAgICAgY29sb3JDaGFubmVsLkcsXG4gICAgICAgICAgY29sb3JDaGFubmVsLkIsXG4gICAgICAgICAgY29sb3JDaGFubmVsLkFcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8g44OG44Kv44K544OB44Oj6Kit5a6aXG4gICAgICB0aGlzLmdsLmFjdGl2ZVRleHR1cmUodGhpcy5nbC5URVhUVVJFMCk7XG4gICAgICB0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZUlkKTtcbiAgICAgIHRoaXMuZ2wudW5pZm9ybTFpKHNoYWRlclNldC5zYW1wbGVyVGV4dHVyZTBMb2NhdGlvbiwgMCk7XG5cbiAgICAgIC8vIOW6p+aomeWkieaPm1xuICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KFxuICAgICAgICBzaGFkZXJTZXQudW5pZm9ybU1hdHJpeExvY2F0aW9uLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgbWF0cml4NHg0LmdldEFycmF5KClcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZ2wudW5pZm9ybTRmKFxuICAgICAgICBzaGFkZXJTZXQudW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uLFxuICAgICAgICBiYXNlQ29sb3IuUixcbiAgICAgICAgYmFzZUNvbG9yLkcsXG4gICAgICAgIGJhc2VDb2xvci5CLFxuICAgICAgICBiYXNlQ29sb3IuQVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJQk/jgpLkvZzmiJDjgZfjgIHjg4fjg7zjgr/jgpLou6LpgIFcbiAgICBpZiAoYnVmZmVyRGF0YS5pbmRleCA9PSBudWxsKSB7XG4gICAgICBidWZmZXJEYXRhLmluZGV4ID0gdGhpcy5nbC5jcmVhdGVCdWZmZXIoKTtcbiAgICB9XG4gICAgdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGJ1ZmZlckRhdGEuaW5kZXgpO1xuICAgIHRoaXMuZ2wuYnVmZmVyRGF0YShcbiAgICAgIHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsXG4gICAgICBpbmRleEFycmF5LFxuICAgICAgdGhpcy5nbC5EWU5BTUlDX0RSQVdcbiAgICApO1xuICAgIHRoaXMuZ2wuYmxlbmRGdW5jU2VwYXJhdGUoU1JDX0NPTE9SLCBEU1RfQ09MT1IsIFNSQ19BTFBIQSwgRFNUX0FMUEhBKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrfjgqfjg7zjg4Djg7zjg5fjg63jgrDjg6njg6DjgpLop6PmlL7jgZnjgotcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlU2hhZGVyUHJvZ3JhbSgpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3NoYWRlclNldHMuZ2V0U2l6ZSgpOyBpKyspIHtcbiAgICAgIHRoaXMuZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLl9zaGFkZXJTZXRzLmF0KGkpLnNoYWRlclByb2dyYW0pO1xuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdChpKS5zaGFkZXJQcm9ncmFtID0gMDtcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuc2V0KGksIHZvaWQgMCk7XG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLnNldChpLCBudWxsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44K344Kn44O844OA44O844OX44Ot44Kw44Op44Og44KS5Yid5pyf5YyW44GZ44KLXG4gICAqIEBwYXJhbSB2ZXJ0U2hhZGVyU3JjIOmggueCueOCt+OCp+ODvOODgOOBruOCveODvOOCuVxuICAgKiBAcGFyYW0gZnJhZ1NoYWRlclNyYyDjg5Xjg6njgrDjg6Hjg7Pjg4jjgrfjgqfjg7zjg4Djga7jgr3jg7zjgrlcbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZVNoYWRlcnMoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGFkZXJDb3VudDsgaSsrKSB7XG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLnB1c2hCYWNrKG5ldyBDdWJpc21TaGFkZXJTZXQoKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgwKS5zaGFkZXJQcm9ncmFtID0gdGhpcy5sb2FkU2hhZGVyUHJvZ3JhbShcbiAgICAgIHZlcnRleFNoYWRlclNyY1NldHVwTWFzayxcbiAgICAgIGZyYWdtZW50U2hhZGVyU3Jjc2V0dXBNYXNrXG4gICAgKTtcblxuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMSkuc2hhZGVyUHJvZ3JhbSA9IHRoaXMubG9hZFNoYWRlclByb2dyYW0oXG4gICAgICB2ZXJ0ZXhTaGFkZXJTcmMsXG4gICAgICBmcmFnbWVudFNoYWRlclNyY1ByZW11bHRpcGxpZWRBbHBoYVxuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgyKS5zaGFkZXJQcm9ncmFtID0gdGhpcy5sb2FkU2hhZGVyUHJvZ3JhbShcbiAgICAgIHZlcnRleFNoYWRlclNyY01hc2tlZCxcbiAgICAgIGZyYWdtZW50U2hhZGVyU3JjTWFza1ByZW11bHRpcGxpZWRBbHBoYVxuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgzKS5zaGFkZXJQcm9ncmFtID0gdGhpcy5sb2FkU2hhZGVyUHJvZ3JhbShcbiAgICAgIHZlcnRleFNoYWRlclNyY01hc2tlZCxcbiAgICAgIGZyYWdtZW50U2hhZGVyU3JjTWFza0ludmVydGVkUHJlbXVsdGlwbGllZEFscGhhXG4gICAgKTtcblxuICAgIC8vIOWKoOeul+OCgumAmuW4uOOBqOWQjOOBmOOCt+OCp+ODvOODgOODvOOCkuWIqeeUqOOBmeOCi1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNCkuc2hhZGVyUHJvZ3JhbSA9IHRoaXMuX3NoYWRlclNldHMuYXQoMSkuc2hhZGVyUHJvZ3JhbTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDUpLnNoYWRlclByb2dyYW0gPSB0aGlzLl9zaGFkZXJTZXRzLmF0KDIpLnNoYWRlclByb2dyYW07XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg2KS5zaGFkZXJQcm9ncmFtID0gdGhpcy5fc2hhZGVyU2V0cy5hdCgzKS5zaGFkZXJQcm9ncmFtO1xuXG4gICAgLy8g5LmX566X44KC6YCa5bi444Go5ZCM44GY44K344Kn44O844OA44O844KS5Yip55So44GZ44KLXG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg3KS5zaGFkZXJQcm9ncmFtID0gdGhpcy5fc2hhZGVyU2V0cy5hdCgxKS5zaGFkZXJQcm9ncmFtO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOCkuc2hhZGVyUHJvZ3JhbSA9IHRoaXMuX3NoYWRlclNldHMuYXQoMikuc2hhZGVyUHJvZ3JhbTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDkpLnNoYWRlclByb2dyYW0gPSB0aGlzLl9zaGFkZXJTZXRzLmF0KDMpLnNoYWRlclByb2dyYW07XG5cbiAgICAvLyBTZXR1cE1hc2tcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgMFxuICAgICkuYXR0cmlidXRlUG9zaXRpb25Mb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDApLnNoYWRlclByb2dyYW0sXG4gICAgICAnYV9wb3NpdGlvbidcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAwXG4gICAgKS5hdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMCkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3RleENvb3JkJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgwKS5zYW1wbGVyVGV4dHVyZTBMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgwKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3NfdGV4dHVyZTAnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgMFxuICAgICkudW5pZm9ybUNsaXBNYXRyaXhMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgwKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfY2xpcE1hdHJpeCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAwXG4gICAgKS51bmlmb3JtQ2hhbm5lbEZsYWdMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgwKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfY2hhbm5lbEZsYWcnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgMFxuICAgICkudW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDApLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9iYXNlQ29sb3InXG4gICAgKTtcblxuICAgIC8vIOmAmuW4uO+8iFByZW11bHRpcGxpZWRBbHBoYe+8iVxuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAxXG4gICAgKS5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3Bvc2l0aW9uJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDFcbiAgICApLmF0dHJpYnV0ZVRleENvb3JkTG9jYXRpb24gPSB0aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgxKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ2FfdGV4Q29vcmQnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDEpLnNhbXBsZXJUZXh0dXJlMExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDEpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMSkudW5pZm9ybU1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDEpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9tYXRyaXgnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgMVxuICAgICkudW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDEpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9iYXNlQ29sb3InXG4gICAgKTtcblxuICAgIC8vIOmAmuW4uO+8iOOCr+ODquODg+ODlOODs+OCsOOAgVByZW11bHRpcGxpZWRBbHBoYe+8iVxuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAyXG4gICAgKS5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3Bvc2l0aW9uJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDJcbiAgICApLmF0dHJpYnV0ZVRleENvb3JkTG9jYXRpb24gPSB0aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgyKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ2FfdGV4Q29vcmQnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDIpLnNhbXBsZXJUZXh0dXJlMExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDIpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMikuc2FtcGxlclRleHR1cmUxTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdzX3RleHR1cmUxJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgyKS51bmlmb3JtTWF0cml4TG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X21hdHJpeCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAyXG4gICAgKS51bmlmb3JtQ2xpcE1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDIpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9jbGlwTWF0cml4J1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDJcbiAgICApLnVuaWZvcm1DaGFubmVsRmxhZ0xvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDIpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9jaGFubmVsRmxhZydcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAyXG4gICAgKS51bmlmb3JtQmFzZUNvbG9yTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X2Jhc2VDb2xvcidcbiAgICApO1xuXG4gICAgLy8g6YCa5bi477yI44Kv44Oq44OD44OU44Oz44Kw44O75Y+N6LuiLCBQcmVtdWx0aXBsaWVkQWxwaGHvvIlcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgM1xuICAgICkuYXR0cmlidXRlUG9zaXRpb25Mb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDMpLnNoYWRlclByb2dyYW0sXG4gICAgICAnYV9wb3NpdGlvbidcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAzXG4gICAgKS5hdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMykuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3RleENvb3JkJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgzKS5zYW1wbGVyVGV4dHVyZTBMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgzKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3NfdGV4dHVyZTAnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDMpLnNhbXBsZXJUZXh0dXJlMUxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDMpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMSdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoMykudW5pZm9ybU1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDMpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9tYXRyaXgnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgM1xuICAgICkudW5pZm9ybUNsaXBNYXRyaXhMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgzKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfY2xpcE1hdHJpeCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICAzXG4gICAgKS51bmlmb3JtQ2hhbm5lbEZsYWdMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCgzKS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfY2hhbm5lbEZsYWcnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgM1xuICAgICkudW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDMpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9iYXNlQ29sb3InXG4gICAgKTtcblxuICAgIC8vIOWKoOeul++8iFByZW11bHRpcGxpZWRBbHBoYe+8iVxuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA0XG4gICAgKS5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNCkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3Bvc2l0aW9uJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDRcbiAgICApLmF0dHJpYnV0ZVRleENvb3JkTG9jYXRpb24gPSB0aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg0KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ2FfdGV4Q29vcmQnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDQpLnNhbXBsZXJUZXh0dXJlMExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDQpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNCkudW5pZm9ybU1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDQpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9tYXRyaXgnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgNFxuICAgICkudW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDQpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9iYXNlQ29sb3InXG4gICAgKTtcblxuICAgIC8vIOWKoOeul++8iOOCr+ODquODg+ODlOODs+OCsOOAgVByZW11bHRpcGxpZWRBbHBoYe+8iVxuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA1XG4gICAgKS5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3Bvc2l0aW9uJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDVcbiAgICApLmF0dHJpYnV0ZVRleENvb3JkTG9jYXRpb24gPSB0aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg1KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ2FfdGV4Q29vcmQnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDUpLnNhbXBsZXJUZXh0dXJlMExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDUpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNSkuc2FtcGxlclRleHR1cmUxTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdzX3RleHR1cmUxJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg1KS51bmlmb3JtTWF0cml4TG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X21hdHJpeCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA1XG4gICAgKS51bmlmb3JtQ2xpcE1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDUpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9jbGlwTWF0cml4J1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDVcbiAgICApLnVuaWZvcm1DaGFubmVsRmxhZ0xvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDUpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9jaGFubmVsRmxhZydcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA1XG4gICAgKS51bmlmb3JtQmFzZUNvbG9yTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X2Jhc2VDb2xvcidcbiAgICApO1xuXG4gICAgLy8g5Yqg566X77yI44Kv44Oq44OD44OU44Oz44Kw44O75Y+N6Lui44CBUHJlbXVsdGlwbGllZEFscGhh77yJXG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDZcbiAgICApLmF0dHJpYnV0ZVBvc2l0aW9uTG9jYXRpb24gPSB0aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg2KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ2FfcG9zaXRpb24nXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgNlxuICAgICkuYXR0cmlidXRlVGV4Q29vcmRMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDYpLnNoYWRlclByb2dyYW0sXG4gICAgICAnYV90ZXhDb29yZCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNikuc2FtcGxlclRleHR1cmUwTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdzX3RleHR1cmUwJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg2KS5zYW1wbGVyVGV4dHVyZTFMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg2KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3NfdGV4dHVyZTEnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDYpLnVuaWZvcm1NYXRyaXhMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg2KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfbWF0cml4J1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDZcbiAgICApLnVuaWZvcm1DbGlwTWF0cml4TG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X2NsaXBNYXRyaXgnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgNlxuICAgICkudW5pZm9ybUNoYW5uZWxGbGFnTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNikuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X2NoYW5uZWxGbGFnJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDZcbiAgICApLnVuaWZvcm1CYXNlQ29sb3JMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg2KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfYmFzZUNvbG9yJ1xuICAgICk7XG5cbiAgICAvLyDkuZfnrpfvvIhQcmVtdWx0aXBsaWVkQWxwaGHvvIlcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgN1xuICAgICkuYXR0cmlidXRlUG9zaXRpb25Mb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDcpLnNoYWRlclByb2dyYW0sXG4gICAgICAnYV9wb3NpdGlvbidcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA3XG4gICAgKS5hdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoNykuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3RleENvb3JkJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg3KS5zYW1wbGVyVGV4dHVyZTBMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg3KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3NfdGV4dHVyZTAnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDcpLnVuaWZvcm1NYXRyaXhMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg3KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfbWF0cml4J1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDdcbiAgICApLnVuaWZvcm1CYXNlQ29sb3JMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg3KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfYmFzZUNvbG9yJ1xuICAgICk7XG5cbiAgICAvLyDkuZfnrpfvvIjjgq/jg6rjg4Pjg5Tjg7PjgrDjgIFQcmVtdWx0aXBsaWVkQWxwaGHvvIlcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgOFxuICAgICkuYXR0cmlidXRlUG9zaXRpb25Mb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDgpLnNoYWRlclByb2dyYW0sXG4gICAgICAnYV9wb3NpdGlvbidcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA4XG4gICAgKS5hdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOCkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3RleENvb3JkJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg4KS5zYW1wbGVyVGV4dHVyZTBMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg4KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3NfdGV4dHVyZTAnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDgpLnNhbXBsZXJUZXh0dXJlMUxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDgpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMSdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOCkudW5pZm9ybU1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDgpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9tYXRyaXgnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgOFxuICAgICkudW5pZm9ybUNsaXBNYXRyaXhMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg4KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfY2xpcE1hdHJpeCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA4XG4gICAgKS51bmlmb3JtQ2hhbm5lbEZsYWdMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg4KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ3VfY2hhbm5lbEZsYWcnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KFxuICAgICAgOFxuICAgICkudW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDgpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9iYXNlQ29sb3InXG4gICAgKTtcblxuICAgIC8vIOS5l+eul++8iOOCr+ODquODg+ODlOODs+OCsOODu+WPjei7ouOAgVByZW11bHRpcGxpZWRBbHBoYe+8iVxuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA5XG4gICAgKS5hdHRyaWJ1dGVQb3NpdGlvbkxvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdhX3Bvc2l0aW9uJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDlcbiAgICApLmF0dHJpYnV0ZVRleENvb3JkTG9jYXRpb24gPSB0aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKFxuICAgICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg5KS5zaGFkZXJQcm9ncmFtLFxuICAgICAgJ2FfdGV4Q29vcmQnXG4gICAgKTtcbiAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDkpLnNhbXBsZXJUZXh0dXJlMExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDkpLnNoYWRlclByb2dyYW0sXG4gICAgICAnc190ZXh0dXJlMCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOSkuc2FtcGxlclRleHR1cmUxTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICdzX3RleHR1cmUxJ1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdCg5KS51bmlmb3JtTWF0cml4TG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X21hdHJpeCdcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA5XG4gICAgKS51bmlmb3JtQ2xpcE1hdHJpeExvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDkpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9jbGlwTWF0cml4J1xuICAgICk7XG4gICAgdGhpcy5fc2hhZGVyU2V0cy5hdChcbiAgICAgIDlcbiAgICApLnVuaWZvcm1DaGFubmVsRmxhZ0xvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24oXG4gICAgICB0aGlzLl9zaGFkZXJTZXRzLmF0KDkpLnNoYWRlclByb2dyYW0sXG4gICAgICAndV9jaGFubmVsRmxhZydcbiAgICApO1xuICAgIHRoaXMuX3NoYWRlclNldHMuYXQoXG4gICAgICA5XG4gICAgKS51bmlmb3JtQmFzZUNvbG9yTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihcbiAgICAgIHRoaXMuX3NoYWRlclNldHMuYXQoOSkuc2hhZGVyUHJvZ3JhbSxcbiAgICAgICd1X2Jhc2VDb2xvcidcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCt+OCp+ODvOODgOODl+ODreOCsOODqeODoOOCkuODreODvOODieOBl+OBpuOCouODieODrOOCueOCkui/lOOBmVxuICAgKiBAcGFyYW0gdmVydGV4U2hhZGVyU291cmNlICAgIOmggueCueOCt+OCp+ODvOODgOOBruOCveODvOOCuVxuICAgKiBAcGFyYW0gZnJhZ21lbnRTaGFkZXJTb3VyY2UgIOODleODqeOCsOODoeODs+ODiOOCt+OCp+ODvOODgOOBruOCveODvOOCuVxuICAgKiBAcmV0dXJuIOOCt+OCp+ODvOODgOODl+ODreOCsOODqeODoOOBruOCouODieODrOOCuVxuICAgKi9cbiAgcHVibGljIGxvYWRTaGFkZXJQcm9ncmFtKFxuICAgIHZlcnRleFNoYWRlclNvdXJjZTogc3RyaW5nLFxuICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmdcbiAgKTogV2ViR0xQcm9ncmFtIHtcbiAgICAvLyBDcmVhdGUgU2hhZGVyIFByb2dyYW1cbiAgICBsZXQgc2hhZGVyUHJvZ3JhbTogV2ViR0xQcm9ncmFtID0gdGhpcy5nbC5jcmVhdGVQcm9ncmFtKCk7XG5cbiAgICBsZXQgdmVydFNoYWRlciA9IHRoaXMuY29tcGlsZVNoYWRlclNvdXJjZShcbiAgICAgIHRoaXMuZ2wuVkVSVEVYX1NIQURFUixcbiAgICAgIHZlcnRleFNoYWRlclNvdXJjZVxuICAgICk7XG5cbiAgICBpZiAoIXZlcnRTaGFkZXIpIHtcbiAgICAgIEN1YmlzbUxvZ0Vycm9yKCdWZXJ0ZXggc2hhZGVyIGNvbXBpbGUgZXJyb3IhJyk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgZnJhZ1NoYWRlciA9IHRoaXMuY29tcGlsZVNoYWRlclNvdXJjZShcbiAgICAgIHRoaXMuZ2wuRlJBR01FTlRfU0hBREVSLFxuICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2VcbiAgICApO1xuICAgIGlmICghZnJhZ1NoYWRlcikge1xuICAgICAgQ3ViaXNtTG9nRXJyb3IoJ1ZlcnRleCBzaGFkZXIgY29tcGlsZSBlcnJvciEnKTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIEF0dGFjaCB2ZXJ0ZXggc2hhZGVyIHRvIHByb2dyYW1cbiAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCB2ZXJ0U2hhZGVyKTtcblxuICAgIC8vIEF0dGFjaCBmcmFnbWVudCBzaGFkZXIgdG8gcHJvZ3JhbVxuICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdTaGFkZXIpO1xuXG4gICAgLy8gbGluayBwcm9ncmFtXG4gICAgdGhpcy5nbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcbiAgICBjb25zdCBsaW5rU3RhdHVzID0gdGhpcy5nbC5nZXRQcm9ncmFtUGFyYW1ldGVyKFxuICAgICAgc2hhZGVyUHJvZ3JhbSxcbiAgICAgIHRoaXMuZ2wuTElOS19TVEFUVVNcbiAgICApO1xuXG4gICAgLy8g44Oq44Oz44Kv44Gr5aSx5pWX44GX44Gf44KJ44K344Kn44O844OA44O844KS5YmK6ZmkXG4gICAgaWYgKCFsaW5rU3RhdHVzKSB7XG4gICAgICBDdWJpc21Mb2dFcnJvcignRmFpbGVkIHRvIGxpbmsgcHJvZ3JhbTogezB9Jywgc2hhZGVyUHJvZ3JhbSk7XG5cbiAgICAgIHRoaXMuZ2wuZGVsZXRlU2hhZGVyKHZlcnRTaGFkZXIpO1xuICAgICAgdmVydFNoYWRlciA9IDA7XG5cbiAgICAgIHRoaXMuZ2wuZGVsZXRlU2hhZGVyKGZyYWdTaGFkZXIpO1xuICAgICAgZnJhZ1NoYWRlciA9IDA7XG5cbiAgICAgIGlmIChzaGFkZXJQcm9ncmFtKSB7XG4gICAgICAgIHRoaXMuZ2wuZGVsZXRlUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgc2hhZGVyUHJvZ3JhbSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIFJlbGVhc2UgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXJzLlxuICAgIHRoaXMuZ2wuZGVsZXRlU2hhZGVyKHZlcnRTaGFkZXIpO1xuICAgIHRoaXMuZ2wuZGVsZXRlU2hhZGVyKGZyYWdTaGFkZXIpO1xuXG4gICAgcmV0dXJuIHNoYWRlclByb2dyYW07XG4gIH1cblxuICAvKipcbiAgICog44K344Kn44O844OA44O844OX44Ot44Kw44Op44Og44KS44Kz44Oz44OR44Kk44Or44GZ44KLXG4gICAqIEBwYXJhbSBzaGFkZXJUeXBlIOOCt+OCp+ODvOODgOOCv+OCpOODlyhWZXJ0ZXgvRnJhZ21lbnQpXG4gICAqIEBwYXJhbSBzaGFkZXJTb3VyY2Ug44K344Kn44O844OA44K944O844K544Kz44O844OJXG4gICAqXG4gICAqIEByZXR1cm4g44Kz44Oz44OR44Kk44Or44GV44KM44Gf44K344Kn44O844OA44O844OX44Ot44Kw44Op44OgXG4gICAqL1xuICBwdWJsaWMgY29tcGlsZVNoYWRlclNvdXJjZShcbiAgICBzaGFkZXJUeXBlOiBHTGVudW0sXG4gICAgc2hhZGVyU291cmNlOiBzdHJpbmdcbiAgKTogV2ViR0xQcm9ncmFtIHtcbiAgICBjb25zdCBzb3VyY2U6IHN0cmluZyA9IHNoYWRlclNvdXJjZTtcblxuICAgIGNvbnN0IHNoYWRlcjogV2ViR0xQcm9ncmFtID0gdGhpcy5nbC5jcmVhdGVTaGFkZXIoc2hhZGVyVHlwZSk7XG4gICAgdGhpcy5nbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgIHRoaXMuZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gICAgaWYgKCFzaGFkZXIpIHtcbiAgICAgIGNvbnN0IGxvZzogc3RyaW5nID0gdGhpcy5nbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XG4gICAgICBDdWJpc21Mb2dFcnJvcignU2hhZGVyIGNvbXBpbGUgbG9nOiB7MH0gJywgbG9nKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0dXM6IGFueSA9IHRoaXMuZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKFxuICAgICAgc2hhZGVyLFxuICAgICAgdGhpcy5nbC5DT01QSUxFX1NUQVRVU1xuICAgICk7XG4gICAgaWYgKCFzdGF0dXMpIHtcbiAgICAgIHRoaXMuZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hhZGVyO1xuICB9XG5cbiAgcHVibGljIHNldEdsKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcbiAgICB0aGlzLmdsID0gZ2w7XG4gIH1cblxuICBfc2hhZGVyU2V0czogY3NtVmVjdG9yPEN1YmlzbVNoYWRlclNldD47IC8vIOODreODvOODieOBl+OBn+OCt+OCp+ODvOODgOODvOODl+ODreOCsOODqeODoOOCkuS/neaMgeOBmeOCi+WkieaVsFxuICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0OyAvLyB3ZWJnbOOCs+ODs+ODhuOCreOCueODiFxufVxuXG4vKipcbiAqIEN1YmlzbVNoYWRlcl9XZWJHTOOBruOCpOODs+ODiuODvOOCr+ODqeOCuVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtU2hhZGVyU2V0IHtcbiAgc2hhZGVyUHJvZ3JhbTogV2ViR0xQcm9ncmFtOyAvLyDjgrfjgqfjg7zjg4Djg7zjg5fjg63jgrDjg6njg6Djga7jgqLjg4njg6zjgrlcbiAgYXR0cmlidXRlUG9zaXRpb25Mb2NhdGlvbjogR0x1aW50OyAvLyDjgrfjgqfjg7zjg4Djg7zjg5fjg63jgrDjg6njg6DjgavmuKHjgZnlpInmlbDjga7jgqLjg4njg6zjgrnvvIhQb3NpdGlvbu+8iVxuICBhdHRyaWJ1dGVUZXhDb29yZExvY2F0aW9uOiBHTHVpbnQ7IC8vIOOCt+OCp+ODvOODgOODvOODl+ODreOCsOODqeODoOOBq+a4oeOBmeWkieaVsOOBruOCouODieODrOOCue+8iFRleENvb3Jk77yJXG4gIHVuaWZvcm1NYXRyaXhMb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb247IC8vIOOCt+OCp+ODvOODgOODvOODl+ODreOCsOODqeODoOOBq+a4oeOBmeWkieaVsOOBruOCouODieODrOOCue+8iE1hdHJpeO+8iVxuICB1bmlmb3JtQ2xpcE1hdHJpeExvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjsgLy8g44K344Kn44O844OA44O844OX44Ot44Kw44Op44Og44Gr5rih44GZ5aSJ5pWw44Gu44Ki44OJ44Os44K577yIQ2xpcE1hdHJpeO+8iVxuICBzYW1wbGVyVGV4dHVyZTBMb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb247IC8vIOOCt+OCp+ODvOODgOODvOODl+ODreOCsOODqeODoOOBq+a4oeOBmeWkieaVsOOBruOCouODieODrOOCue+8iFRleHR1cmUw77yJXG4gIHNhbXBsZXJUZXh0dXJlMUxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjsgLy8g44K344Kn44O844OA44O844OX44Ot44Kw44Op44Og44Gr5rih44GZ5aSJ5pWw44Gu44Ki44OJ44Os44K577yIVGV4dHVyZTHvvIlcbiAgdW5pZm9ybUJhc2VDb2xvckxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjsgLy8g44K344Kn44O844OA44O844OX44Ot44Kw44Op44Og44Gr5rih44GZ5aSJ5pWw44Gu44Ki44OJ44Os44K577yIQmFzZUNvbG9y77yJXG4gIHVuaWZvcm1DaGFubmVsRmxhZ0xvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjsgLy8g44K344Kn44O844OA44O844OX44Ot44Kw44Op44Og44Gr5rih44GZ5aSJ5pWw44Gu44Ki44OJ44Os44K577yIQ2hhbm5lbEZsYWfvvIlcbn1cblxuZXhwb3J0IGVudW0gU2hhZGVyTmFtZXMge1xuICAvLyBTZXR1cE1hc2tcbiAgU2hhZGVyTmFtZXNfU2V0dXBNYXNrLFxuXG4gIC8vIE5vcm1hbFxuICBTaGFkZXJOYW1lc19Ob3JtYWxQcmVtdWx0aXBsaWVkQWxwaGEsXG4gIFNoYWRlck5hbWVzX05vcm1hbE1hc2tlZFByZW11bHRpcGxpZWRBbHBoYSxcbiAgU2hhZGVyTmFtZXNfTm9tcmFsTWFza2VkSW52ZXJ0ZWRQcmVtdWx0aXBsaWVkQWxwaGEsXG5cbiAgLy8gQWRkXG4gIFNoYWRlck5hbWVzX0FkZFByZW11bHRpcGxpZWRBbHBoYSxcbiAgU2hhZGVyTmFtZXNfQWRkTWFza2VkUHJlbXVsdGlwbGllZEFscGhhLFxuICBTaGFkZXJOYW1lc19BZGRNYXNrZWRQcmVtdWx0aXBsaWVkQWxwaGFJbnZlcnRlZCxcblxuICAvLyBNdWx0XG4gIFNoYWRlck5hbWVzX011bHRQcmVtdWx0aXBsaWVkQWxwaGEsXG4gIFNoYWRlck5hbWVzX011bHRNYXNrZWRQcmVtdWx0aXBsaWVkQWxwaGEsXG4gIFNoYWRlck5hbWVzX011bHRNYXNrZWRQcmVtdWx0aXBsaWVkQWxwaGFJbnZlcnRlZFxufVxuXG5leHBvcnQgY29uc3QgdmVydGV4U2hhZGVyU3JjU2V0dXBNYXNrID1cbiAgJ2F0dHJpYnV0ZSB2ZWM0ICAgICBhX3Bvc2l0aW9uOycgK1xuICAnYXR0cmlidXRlIHZlYzIgICAgIGFfdGV4Q29vcmQ7JyArXG4gICd2YXJ5aW5nIHZlYzIgICAgICAgdl90ZXhDb29yZDsnICtcbiAgJ3ZhcnlpbmcgdmVjNCAgICAgICB2X215UG9zOycgK1xuICAndW5pZm9ybSBtYXQ0ICAgICAgIHVfY2xpcE1hdHJpeDsnICtcbiAgJ3ZvaWQgbWFpbigpJyArXG4gICd7JyArXG4gICcgICBnbF9Qb3NpdGlvbiA9IHVfY2xpcE1hdHJpeCAqIGFfcG9zaXRpb247JyArXG4gICcgICB2X215UG9zID0gdV9jbGlwTWF0cml4ICogYV9wb3NpdGlvbjsnICtcbiAgJyAgIHZfdGV4Q29vcmQgPSBhX3RleENvb3JkOycgK1xuICAnICAgdl90ZXhDb29yZC55ID0gMS4wIC0gdl90ZXhDb29yZC55OycgK1xuICAnfSc7XG5leHBvcnQgY29uc3QgZnJhZ21lbnRTaGFkZXJTcmNzZXR1cE1hc2sgPVxuICAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JyArXG4gICd2YXJ5aW5nIHZlYzIgICAgICAgdl90ZXhDb29yZDsnICtcbiAgJ3ZhcnlpbmcgdmVjNCAgICAgICB2X215UG9zOycgK1xuICAndW5pZm9ybSB2ZWM0ICAgICAgIHVfYmFzZUNvbG9yOycgK1xuICAndW5pZm9ybSB2ZWM0ICAgICAgIHVfY2hhbm5lbEZsYWc7JyArXG4gICd1bmlmb3JtIHNhbXBsZXIyRCAgc190ZXh0dXJlMDsnICtcbiAgJ3ZvaWQgbWFpbigpJyArXG4gICd7JyArXG4gICcgICBmbG9hdCBpc0luc2lkZSA9ICcgK1xuICAnICAgICAgIHN0ZXAodV9iYXNlQ29sb3IueCwgdl9teVBvcy54L3ZfbXlQb3MudyknICtcbiAgJyAgICAgICAqIHN0ZXAodV9iYXNlQ29sb3IueSwgdl9teVBvcy55L3ZfbXlQb3MudyknICtcbiAgJyAgICAgICAqIHN0ZXAodl9teVBvcy54L3ZfbXlQb3MudywgdV9iYXNlQ29sb3IueiknICtcbiAgJyAgICAgICAqIHN0ZXAodl9teVBvcy55L3ZfbXlQb3MudywgdV9iYXNlQ29sb3Iudyk7JyArXG4gICcgICBnbF9GcmFnQ29sb3IgPSB1X2NoYW5uZWxGbGFnICogdGV4dHVyZTJEKHNfdGV4dHVyZTAsIHZfdGV4Q29vcmQpLmEgKiBpc0luc2lkZTsnICtcbiAgJ30nO1xuXG4vLy0tLS0tIOODkOODvOODhuODg+OCr+OCueOCt+OCp+ODvOODgOODl+ODreOCsOODqeODoCAtLS0tLVxuLy8gTm9ybWFsICYgQWRkICYgTXVsdCDlhbHpgJpcbmV4cG9ydCBjb25zdCB2ZXJ0ZXhTaGFkZXJTcmMgPVxuICAnYXR0cmlidXRlIHZlYzQgICAgIGFfcG9zaXRpb247JyArIC8vdi52ZXJ0ZXhcbiAgJ2F0dHJpYnV0ZSB2ZWMyICAgICBhX3RleENvb3JkOycgKyAvL3YudGV4Y29vcmRcbiAgJ3ZhcnlpbmcgdmVjMiAgICAgICB2X3RleENvb3JkOycgKyAvL3YyZi50ZXhjb29yZFxuICAndW5pZm9ybSBtYXQ0ICAgICAgIHVfbWF0cml4OycgK1xuICAndm9pZCBtYWluKCknICtcbiAgJ3snICtcbiAgJyAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiBhX3Bvc2l0aW9uOycgK1xuICAnICAgdl90ZXhDb29yZCA9IGFfdGV4Q29vcmQ7JyArXG4gICcgICB2X3RleENvb3JkLnkgPSAxLjAgLSB2X3RleENvb3JkLnk7JyArXG4gICd9JztcblxuLy8gTm9ybWFsICYgQWRkICYgTXVsdCDlhbHpgJrvvIjjgq/jg6rjg4Pjg5Tjg7PjgrDjgZXjgozjgZ/jgoLjga7jga7mj4/nlLvnlKjvvIlcbmV4cG9ydCBjb25zdCB2ZXJ0ZXhTaGFkZXJTcmNNYXNrZWQgPVxuICAnYXR0cmlidXRlIHZlYzQgICAgIGFfcG9zaXRpb247JyArXG4gICdhdHRyaWJ1dGUgdmVjMiAgICAgYV90ZXhDb29yZDsnICtcbiAgJ3ZhcnlpbmcgdmVjMiAgICAgICB2X3RleENvb3JkOycgK1xuICAndmFyeWluZyB2ZWM0ICAgICAgIHZfY2xpcFBvczsnICtcbiAgJ3VuaWZvcm0gbWF0NCAgICAgICB1X21hdHJpeDsnICtcbiAgJ3VuaWZvcm0gbWF0NCAgICAgICB1X2NsaXBNYXRyaXg7JyArXG4gICd2b2lkIG1haW4oKScgK1xuICAneycgK1xuICAnICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIGFfcG9zaXRpb247JyArXG4gICcgICB2X2NsaXBQb3MgPSB1X2NsaXBNYXRyaXggKiBhX3Bvc2l0aW9uOycgK1xuICAnICAgdl90ZXhDb29yZCA9IGFfdGV4Q29vcmQ7JyArXG4gICcgICB2X3RleENvb3JkLnkgPSAxLjAgLSB2X3RleENvb3JkLnk7JyArXG4gICd9JztcblxuLy8tLS0tLSDjg5Xjg6njgrDjg6Hjg7Pjg4jjgrfjgqfjg7zjg4Djg5fjg63jgrDjg6njg6AgLS0tLS1cbi8vIE5vcm1hbCAmIEFkZCAmIE11bHQg5YWx6YCaIO+8iFByZW11bHRpcGxpZWRBbHBoYe+8iVxuZXhwb3J0IGNvbnN0IGZyYWdtZW50U2hhZGVyU3JjUHJlbXVsdGlwbGllZEFscGhhID1cbiAgJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycgK1xuICAndmFyeWluZyB2ZWMyICAgICAgIHZfdGV4Q29vcmQ7JyArIC8vdjJmLnRleGNvb3JkXG4gICd1bmlmb3JtIHZlYzQgICAgICAgdV9iYXNlQ29sb3I7JyArXG4gICd1bmlmb3JtIHNhbXBsZXIyRCAgc190ZXh0dXJlMDsnICsgLy9fTWFpblRleFxuICAndm9pZCBtYWluKCknICtcbiAgJ3snICtcbiAgJyAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChzX3RleHR1cmUwICwgdl90ZXhDb29yZCkgKiB1X2Jhc2VDb2xvcjsnICtcbiAgJ30nO1xuXG4vLyBOb3JtYWwg77yI44Kv44Oq44OD44OU44Oz44Kw44GV44KM44Gf44KC44Gu44Gu5o+P55S755So44CBUHJlbXVsdGlwbGllZEFscGhh5YW855So77yJXG5leHBvcnQgY29uc3QgZnJhZ21lbnRTaGFkZXJTcmNNYXNrUHJlbXVsdGlwbGllZEFscGhhID1cbiAgJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycgK1xuICAndmFyeWluZyB2ZWMyICAgICAgIHZfdGV4Q29vcmQ7JyArXG4gICd2YXJ5aW5nIHZlYzQgICAgICAgdl9jbGlwUG9zOycgK1xuICAndW5pZm9ybSB2ZWM0ICAgICAgIHVfYmFzZUNvbG9yOycgK1xuICAndW5pZm9ybSB2ZWM0ICAgICAgIHVfY2hhbm5lbEZsYWc7JyArXG4gICd1bmlmb3JtIHNhbXBsZXIyRCAgc190ZXh0dXJlMDsnICtcbiAgJ3VuaWZvcm0gc2FtcGxlcjJEICBzX3RleHR1cmUxOycgK1xuICAndm9pZCBtYWluKCknICtcbiAgJ3snICtcbiAgJyAgIHZlYzQgY29sX2Zvcm1hc2sgPSB0ZXh0dXJlMkQoc190ZXh0dXJlMCAsIHZfdGV4Q29vcmQpICogdV9iYXNlQ29sb3I7JyArXG4gICcgICB2ZWM0IGNsaXBNYXNrID0gKDEuMCAtIHRleHR1cmUyRChzX3RleHR1cmUxLCB2X2NsaXBQb3MueHkgLyB2X2NsaXBQb3MudykpICogdV9jaGFubmVsRmxhZzsnICtcbiAgJyAgIGZsb2F0IG1hc2tWYWwgPSBjbGlwTWFzay5yICsgY2xpcE1hc2suZyArIGNsaXBNYXNrLmIgKyBjbGlwTWFzay5hOycgK1xuICAnICAgY29sX2Zvcm1hc2sgPSBjb2xfZm9ybWFzayAqIG1hc2tWYWw7JyArXG4gICcgICBnbF9GcmFnQ29sb3IgPSBjb2xfZm9ybWFzazsnICtcbiAgJ30nO1xuXG4vLyBOb3JtYWwgJiBBZGQgJiBNdWx0IOWFsemAmu+8iOOCr+ODquODg+ODlOODs+OCsOOBleOCjOOBpuWPjei7ouS9v+eUqOOBruaPj+eUu+eUqOOAgVByZW11bHRpcGxpZWRBbHBoYeOBruWgtOWQiO+8iVxuZXhwb3J0IGNvbnN0IGZyYWdtZW50U2hhZGVyU3JjTWFza0ludmVydGVkUHJlbXVsdGlwbGllZEFscGhhID1cbiAgJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycgK1xuICAndmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7JyArXG4gICd2YXJ5aW5nIHZlYzQgdl9jbGlwUG9zOycgK1xuICAndW5pZm9ybSBzYW1wbGVyMkQgc190ZXh0dXJlMDsnICtcbiAgJ3VuaWZvcm0gc2FtcGxlcjJEIHNfdGV4dHVyZTE7JyArXG4gICd1bmlmb3JtIHZlYzQgdV9jaGFubmVsRmxhZzsnICtcbiAgJ3VuaWZvcm0gdmVjNCB1X2Jhc2VDb2xvcjsnICtcbiAgJ3ZvaWQgbWFpbigpJyArXG4gICd7JyArXG4gICd2ZWM0IGNvbF9mb3JtYXNrID0gdGV4dHVyZTJEKHNfdGV4dHVyZTAsIHZfdGV4Q29vcmQpICogdV9iYXNlQ29sb3I7JyArXG4gICd2ZWM0IGNsaXBNYXNrID0gKDEuMCAtIHRleHR1cmUyRChzX3RleHR1cmUxLCB2X2NsaXBQb3MueHkgLyB2X2NsaXBQb3MudykpICogdV9jaGFubmVsRmxhZzsnICtcbiAgJ2Zsb2F0IG1hc2tWYWwgPSBjbGlwTWFzay5yICsgY2xpcE1hc2suZyArIGNsaXBNYXNrLmIgKyBjbGlwTWFzay5hOycgK1xuICAnY29sX2Zvcm1hc2sgPSBjb2xfZm9ybWFzayAqICgxLjAgLSBtYXNrVmFsKTsnICtcbiAgJ2dsX0ZyYWdDb2xvciA9IGNvbF9mb3JtYXNrOycgK1xuICAnfSc7XG5cbi8qKlxuICogV2ViR0znlKjjga7mj4/nlLvlkb3ku6TjgpLlrp/oo4XjgZfjgZ/jgq/jg6njgrlcbiAqL1xuZXhwb3J0IGNsYXNzIEN1YmlzbVJlbmRlcmVyX1dlYkdMIGV4dGVuZHMgQ3ViaXNtUmVuZGVyZXIge1xuICAvKipcbiAgICog44Os44Oz44OA44Op44Gu5Yid5pyf5YyW5Yem55CG44KS5a6f6KGM44GZ44KLXG4gICAqIOW8leaVsOOBq+a4oeOBl+OBn+ODouODh+ODq+OBi+OCieODrOODs+ODgOODqeOBruWIneacn+WMluWHpueQhuOBq+W/heimgeOBquaDheWgseOCkuWPluOCiuWHuuOBmeOBk+OBqOOBjOOBp+OBjeOCi1xuICAgKlxuICAgKiBAcGFyYW0gbW9kZWwg44Oi44OH44Or44Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZShtb2RlbDogQ3ViaXNtTW9kZWwpOiB2b2lkIHtcbiAgICBpZiAobW9kZWwuaXNVc2luZ01hc2tpbmcoKSkge1xuICAgICAgdGhpcy5fY2xpcHBpbmdNYW5hZ2VyID0gbmV3IEN1YmlzbUNsaXBwaW5nTWFuYWdlcl9XZWJHTCgpOyAvLyDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg7vjg5Djg4Pjg5XjgqHliY3lh6bnkIbmlrnlvI/jgpLliJ3mnJ/ljJZcbiAgICAgIHRoaXMuX2NsaXBwaW5nTWFuYWdlci5pbml0aWFsaXplKFxuICAgICAgICBtb2RlbCxcbiAgICAgICAgbW9kZWwuZ2V0RHJhd2FibGVDb3VudCgpLFxuICAgICAgICBtb2RlbC5nZXREcmF3YWJsZU1hc2tzKCksXG4gICAgICAgIG1vZGVsLmdldERyYXdhYmxlTWFza0NvdW50cygpXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX3NvcnRlZERyYXdhYmxlSW5kZXhMaXN0LnJlc2l6ZShtb2RlbC5nZXREcmF3YWJsZUNvdW50KCksIDApO1xuXG4gICAgc3VwZXIuaW5pdGlhbGl6ZShtb2RlbCk7IC8vIOimquOCr+ODqeOCueOBruWHpueQhuOCkuWRvOOBtlxuICB9XG5cbiAgLyoqXG4gICAqIFdlYkdM44OG44Kv44K544OB44Oj44Gu44OQ44Kk44Oz44OJ5Yem55CGXG4gICAqIEN1YmlzbVJlbmRlcmVy44Gr44OG44Kv44K544OB44Oj44KS6Kit5a6a44GX44CBQ3ViaXNtUmVuZGVyZXLlhoXjgafjgZ3jga7nlLvlg4/jgpLlj4LnhafjgZnjgovjgZ/jgoHjga5JbmRleOWApOOCkuaIu+OCiuWApOOBqOOBmeOCi1xuICAgKiBAcGFyYW0gbW9kZWxUZXh0dXJlTm8g44K744OD44OI44GZ44KL44Oi44OH44Or44OG44Kv44K544OB44Oj44Gu55Wq5Y+3XG4gICAqIEBwYXJhbSBnbFRleHR1cmVObyBXZWJHTOODhuOCr+OCueODgeODo+OBrueVquWPt1xuICAgKi9cbiAgcHVibGljIGJpbmRUZXh0dXJlKG1vZGVsVGV4dHVyZU5vOiBudW1iZXIsIGdsVGV4dHVyZTogV2ViR0xUZXh0dXJlKTogdm9pZCB7XG4gICAgdGhpcy5fdGV4dHVyZXMuc2V0VmFsdWUobW9kZWxUZXh0dXJlTm8sIGdsVGV4dHVyZSk7XG4gIH1cblxuICAvKipcbiAgICogV2ViR0zjgavjg5DjgqTjg7Pjg4njgZXjgozjgZ/jg4bjgq/jgrnjg4Hjg6Pjga7jg6rjgrnjg4jjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg4bjgq/jgrnjg4Hjg6Pjga7jg6rjgrnjg4hcbiAgICovXG4gIHB1YmxpYyBnZXRCaW5kZWRUZXh0dXJlcygpOiBjc21NYXA8bnVtYmVyLCBXZWJHTFRleHR1cmU+IHtcbiAgICByZXR1cm4gdGhpcy5fdGV4dHVyZXM7XG4gIH1cblxuICAvKipcbiAgICog44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44OQ44OD44OV44Kh44Gu44K144Kk44K644KS6Kit5a6a44GZ44KLXG4gICAqIOODnuOCueOCr+eUqOOBrkZyYW1lQnVmZmVy44KS56C05qOE44CB5YaN5L2c5oiQ44GZ44KL54K65Yem55CG44Kz44K544OI44Gv6auY44GEXG4gICAqIEBwYXJhbSBzaXplIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+ODkOODg+ODleOCoeOBruOCteOCpOOCulxuICAgKi9cbiAgcHVibGljIHNldENsaXBwaW5nTWFza0J1ZmZlclNpemUoc2l6ZTogbnVtYmVyKSB7XG4gICAgLy8gRnJhbWVCdWZmZXLjga7jgrXjgqTjgrrjgpLlpInmm7TjgZnjgovjgZ/jgoHjgavjgqTjg7Pjgrnjgr/jg7PjgrnjgpLnoLTmo4Tjg7vlho3kvZzmiJDjgZnjgotcbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIucmVsZWFzZSgpO1xuICAgIHRoaXMuX2NsaXBwaW5nTWFuYWdlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIgPSBudWxsO1xuXG4gICAgdGhpcy5fY2xpcHBpbmdNYW5hZ2VyID0gbmV3IEN1YmlzbUNsaXBwaW5nTWFuYWdlcl9XZWJHTCgpO1xuXG4gICAgdGhpcy5fY2xpcHBpbmdNYW5hZ2VyLnNldENsaXBwaW5nTWFza0J1ZmZlclNpemUoc2l6ZSk7XG5cbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIuaW5pdGlhbGl6ZShcbiAgICAgIHRoaXMuZ2V0TW9kZWwoKSxcbiAgICAgIHRoaXMuZ2V0TW9kZWwoKS5nZXREcmF3YWJsZUNvdW50KCksXG4gICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVNYXNrcygpLFxuICAgICAgdGhpcy5nZXRNb2RlbCgpLmdldERyYXdhYmxlTWFza0NvdW50cygpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrrjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg5Djg4Pjg5XjgqHjga7jgrXjgqTjgrpcbiAgICovXG4gIHB1YmxpYyBnZXRDbGlwcGluZ01hc2tCdWZmZXJTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaXBwaW5nTWFuYWdlci5nZXRDbGlwcGluZ01hc2tCdWZmZXJTaXplKCk7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JNYXNrID0gbnVsbDtcbiAgICB0aGlzLl9jbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JEcmF3ID0gbnVsbDtcbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIgPSBuZXcgQ3ViaXNtQ2xpcHBpbmdNYW5hZ2VyX1dlYkdMKCk7XG4gICAgdGhpcy5maXJzdERyYXcgPSB0cnVlO1xuICAgIHRoaXMuX3RleHR1cmVzID0gbmV3IGNzbU1hcDxudW1iZXIsIG51bWJlcj4oKTtcbiAgICB0aGlzLl9zb3J0ZWREcmF3YWJsZUluZGV4TGlzdCA9IG5ldyBjc21WZWN0b3I8bnVtYmVyPigpO1xuICAgIHRoaXMuX2J1ZmZlckRhdGEgPSB7XG4gICAgICB2ZXJ0ZXg6IFdlYkdMQnVmZmVyID0gbnVsbCxcbiAgICAgIHV2OiBXZWJHTEJ1ZmZlciA9IG51bGwsXG4gICAgICBpbmRleDogV2ViR0xCdWZmZXIgPSBudWxsXG4gICAgfTtcblxuICAgIC8vIOODhuOCr+OCueODgeODo+WvvuW/nOODnuODg+ODl+OBruWuuemHj+OCkueiuuS/neOBl+OBpuOBiuOBj1xuICAgIHRoaXMuX3RleHR1cmVzLnByZXBhcmVDYXBhY2l0eSgzMiwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIucmVsZWFzZSgpO1xuICAgIHRoaXMuX2NsaXBwaW5nTWFuYWdlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIgPSBudWxsO1xuXG4gICAgdGhpcy5nbC5kZWxldGVCdWZmZXIodGhpcy5fYnVmZmVyRGF0YS52ZXJ0ZXgpO1xuICAgIHRoaXMuX2J1ZmZlckRhdGEudmVydGV4ID0gbnVsbDtcbiAgICB0aGlzLmdsLmRlbGV0ZUJ1ZmZlcih0aGlzLl9idWZmZXJEYXRhLnV2KTtcbiAgICB0aGlzLl9idWZmZXJEYXRhLnV2ID0gbnVsbDtcbiAgICB0aGlzLmdsLmRlbGV0ZUJ1ZmZlcih0aGlzLl9idWZmZXJEYXRhLmluZGV4KTtcbiAgICB0aGlzLl9idWZmZXJEYXRhLmluZGV4ID0gbnVsbDtcbiAgICB0aGlzLl9idWZmZXJEYXRhID0gbnVsbDtcblxuICAgIHRoaXMuX3RleHR1cmVzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgpLmj4/nlLvjgZnjgovlrp/pmpvjga7lh6bnkIZcbiAgICovXG4gIHB1YmxpYyBkb0RyYXdNb2RlbCgpOiB2b2lkIHtcbiAgICAvLy0tLS0tLS0tLS0tLSDjgq/jg6rjg4Pjg5Tjg7PjgrDjg57jgrnjgq/jg7vjg5Djg4Pjg5XjgqHliY3lh6bnkIbmlrnlvI/jga7loLTlkIggLS0tLS0tLS0tLS0tXG4gICAgaWYgKHRoaXMuX2NsaXBwaW5nTWFuYWdlciAhPSBudWxsKSB7XG4gICAgICB0aGlzLnByZURyYXcoKTtcbiAgICAgIHRoaXMuX2NsaXBwaW5nTWFuYWdlci5zZXR1cENsaXBwaW5nQ29udGV4dCh0aGlzLmdldE1vZGVsKCksIHRoaXMpO1xuICAgIH1cblxuICAgIC8vIOS4iuiomOOCr+ODquODg+ODlOODs+OCsOWHpueQhuWGheOBp+OCguS4gOW6plByZURyYXfjgpLlkbzjgbbjga7jgafms6jmhI8hIVxuICAgIHRoaXMucHJlRHJhdygpO1xuXG4gICAgY29uc3QgZHJhd2FibGVDb3VudDogbnVtYmVyID0gdGhpcy5nZXRNb2RlbCgpLmdldERyYXdhYmxlQ291bnQoKTtcbiAgICBjb25zdCByZW5kZXJPcmRlcjogSW50MzJBcnJheSA9IHRoaXMuZ2V0TW9kZWwoKS5nZXREcmF3YWJsZVJlbmRlck9yZGVycygpO1xuXG4gICAgLy8g44Kk44Oz44OH44OD44Kv44K544KS5o+P55S76aCG44Gn44K944O844OIXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcmF3YWJsZUNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IG9yZGVyOiBudW1iZXIgPSByZW5kZXJPcmRlcltpXTtcbiAgICAgIHRoaXMuX3NvcnRlZERyYXdhYmxlSW5kZXhMaXN0LnNldChvcmRlciwgaSk7XG4gICAgfVxuXG4gICAgLy8g5o+P55S7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcmF3YWJsZUNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGRyYXdhYmxlSW5kZXg6IG51bWJlciA9IHRoaXMuX3NvcnRlZERyYXdhYmxlSW5kZXhMaXN0LmF0KGkpO1xuXG4gICAgICAvLyBEcmF3YWJsZeOBjOihqOekuueKtuaFi+OBp+OBquOBkeOCjOOBsOWHpueQhuOCkuODkeOCueOBmeOCi1xuICAgICAgaWYgKCF0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVEeW5hbWljRmxhZ0lzVmlzaWJsZShkcmF3YWJsZUluZGV4KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8g44Kv44Oq44OD44OU44Oz44Kw44Oe44K544Kv44KS44K744OD44OI44GZ44KLXG4gICAgICB0aGlzLnNldENsaXBwaW5nQ29udGV4dEJ1ZmZlckZvckRyYXcoXG4gICAgICAgIHRoaXMuX2NsaXBwaW5nTWFuYWdlciAhPSBudWxsXG4gICAgICAgICAgPyB0aGlzLl9jbGlwcGluZ01hbmFnZXJcbiAgICAgICAgICAgICAgLmdldENsaXBwaW5nQ29udGV4dExpc3RGb3JEcmF3KClcbiAgICAgICAgICAgICAgLmF0KGRyYXdhYmxlSW5kZXgpXG4gICAgICAgICAgOiBudWxsXG4gICAgICApO1xuXG4gICAgICB0aGlzLnNldElzQ3VsbGluZyh0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVDdWxsaW5nKGRyYXdhYmxlSW5kZXgpKTtcblxuICAgICAgdGhpcy5kcmF3TWVzaChcbiAgICAgICAgdGhpcy5nZXRNb2RlbCgpLmdldERyYXdhYmxlVGV4dHVyZUluZGljZXMoZHJhd2FibGVJbmRleCksXG4gICAgICAgIHRoaXMuZ2V0TW9kZWwoKS5nZXREcmF3YWJsZVZlcnRleEluZGV4Q291bnQoZHJhd2FibGVJbmRleCksXG4gICAgICAgIHRoaXMuZ2V0TW9kZWwoKS5nZXREcmF3YWJsZVZlcnRleENvdW50KGRyYXdhYmxlSW5kZXgpLFxuICAgICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVWZXJ0ZXhJbmRpY2VzKGRyYXdhYmxlSW5kZXgpLFxuICAgICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVWZXJ0aWNlcyhkcmF3YWJsZUluZGV4KSxcbiAgICAgICAgdGhpcy5nZXRNb2RlbCgpLmdldERyYXdhYmxlVmVydGV4VXZzKGRyYXdhYmxlSW5kZXgpLFxuICAgICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVPcGFjaXR5KGRyYXdhYmxlSW5kZXgpLFxuICAgICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RHJhd2FibGVCbGVuZE1vZGUoZHJhd2FibGVJbmRleCksXG4gICAgICAgIHRoaXMuZ2V0TW9kZWwoKS5nZXREcmF3YWJsZUludmVydGVkTWFza0JpdChkcmF3YWJsZUluZGV4KVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogW+OCquODvOODkOODvOODqeOCpOODiV1cbiAgICog5o+P55S744Kq44OW44K444Kn44Kv44OI77yI44Ki44O844OI44Oh44OD44K344Ol77yJ44KS5o+P55S744GZ44KL44CCXG4gICAqIOODneODquOCtOODs+ODoeODg+OCt+ODpeOBqOODhuOCr+OCueODgeODo+eVquWPt+OCkuOCu+ODg+ODiOOBp+a4oeOBmeOAglxuICAgKiBAcGFyYW0gdGV4dHVyZU5vIOaPj+eUu+OBmeOCi+ODhuOCr+OCueODgeODo+eVquWPt1xuICAgKiBAcGFyYW0gaW5kZXhDb3VudCDmj4/nlLvjgqrjg5bjgrjjgqfjgq/jg4jjga7jgqTjg7Pjg4fjg4Pjgq/jgrnlgKRcbiAgICogQHBhcmFtIHZlcnRleENvdW50IOODneODquOCtOODs+ODoeODg+OCt+ODpeOBrumggueCueaVsFxuICAgKiBAcGFyYW0gaW5kZXhBcnJheSDjg53jg6rjgrTjg7Pjg6Hjg4Pjgrfjg6Xjga7jgqTjg7Pjg4fjg4Pjgq/jgrnphY3liJdcbiAgICogQHBhcmFtIHZlcnRleEFycmF5IOODneODquOCtOODs+ODoeODg+OCt+ODpeOBrumggueCuemFjeWIl1xuICAgKiBAcGFyYW0gdXZBcnJheSB1dumFjeWIl1xuICAgKiBAcGFyYW0gb3BhY2l0eSDkuI3pgI/mmI7luqZcbiAgICogQHBhcmFtIGNvbG9yQmxlbmRNb2RlIOOCq+ODqeODvOWQiOaIkOOCv+OCpOODl1xuICAgKiBAcGFyYW0gaW52ZXJ0ZWRNYXNrIOODnuOCueOCr+S9v+eUqOaZguOBruODnuOCueOCr+OBruWPjei7ouS9v+eUqFxuICAgKi9cbiAgcHVibGljIGRyYXdNZXNoKFxuICAgIHRleHR1cmVObzogbnVtYmVyLFxuICAgIGluZGV4Q291bnQ6IG51bWJlcixcbiAgICB2ZXJ0ZXhDb3VudDogbnVtYmVyLFxuICAgIGluZGV4QXJyYXk6IFVpbnQxNkFycmF5LFxuICAgIHZlcnRleEFycmF5OiBGbG9hdDMyQXJyYXksXG4gICAgdXZBcnJheTogRmxvYXQzMkFycmF5LFxuICAgIG9wYWNpdHk6IG51bWJlcixcbiAgICBjb2xvckJsZW5kTW9kZTogQ3ViaXNtQmxlbmRNb2RlLFxuICAgIGludmVydGVkTWFzazogYm9vbGVhblxuICApOiB2b2lkIHtcbiAgICAvLyDoo4/pnaLmj4/nlLvjga7mnInlirnjg7vnhKHlirlcbiAgICBpZiAodGhpcy5pc0N1bGxpbmcoKSkge1xuICAgICAgdGhpcy5nbC5lbmFibGUodGhpcy5nbC5DVUxMX0ZBQ0UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdsLmRpc2FibGUodGhpcy5nbC5DVUxMX0ZBQ0UpO1xuICAgIH1cblxuICAgIHRoaXMuZ2wuZnJvbnRGYWNlKHRoaXMuZ2wuQ0NXKTsgLy8gQ3ViaXNtIFNESyBPcGVuR0zjga/jg57jgrnjgq/jg7vjgqLjg7zjg4jjg6Hjg4Pjgrfjg6XlhbHjgatDQ1fjgYzooajpnaJcblxuICAgIGNvbnN0IG1vZGVsQ29sb3JSR0JBOiBDdWJpc21UZXh0dXJlQ29sb3IgPSB0aGlzLmdldE1vZGVsQ29sb3IoKTtcblxuICAgIGlmICh0aGlzLmdldENsaXBwaW5nQ29udGV4dEJ1ZmZlckZvck1hc2soKSA9PSBudWxsKSB7XG4gICAgICAvLyDjg57jgrnjgq/nlJ/miJDmmYLku6XlpJZcbiAgICAgIG1vZGVsQ29sb3JSR0JBLkEgKj0gb3BhY2l0eTtcbiAgICAgIGlmICh0aGlzLmlzUHJlbXVsdGlwbGllZEFscGhhKCkpIHtcbiAgICAgICAgbW9kZWxDb2xvclJHQkEuUiAqPSBtb2RlbENvbG9yUkdCQS5BO1xuICAgICAgICBtb2RlbENvbG9yUkdCQS5HICo9IG1vZGVsQ29sb3JSR0JBLkE7XG4gICAgICAgIG1vZGVsQ29sb3JSR0JBLkIgKj0gbW9kZWxDb2xvclJHQkEuQTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZHJhd3RleHR1cmU6IFdlYkdMVGV4dHVyZTsgLy8g44K344Kn44O844OA44Gr5rih44GZ44OG44Kv44K544OB44OjXG5cbiAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjg57jg4Pjg5fjgYvjgonjg5DjgqTjg7Pjg4nmuIjjgb/jg4bjgq/jgrnjg4Hjg6PvvKnvvKTjgpLlj5blvpdcbiAgICAvLyDjg5DjgqTjg7Pjg4njgZXjgozjgabjgYTjgarjgZHjgozjgbDjg4Djg5/jg7zjga7jg4bjgq/jgrnjg4Hjg6NJROOCkuOCu+ODg+ODiOOBmeOCi1xuICAgIGlmICh0aGlzLl90ZXh0dXJlcy5nZXRWYWx1ZSh0ZXh0dXJlTm8pICE9IG51bGwpIHtcbiAgICAgIGRyYXd0ZXh0dXJlID0gdGhpcy5fdGV4dHVyZXMuZ2V0VmFsdWUodGV4dHVyZU5vKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJhd3RleHR1cmUgPSBudWxsO1xuICAgIH1cblxuICAgIEN1YmlzbVNoYWRlcl9XZWJHTC5nZXRJbnN0YW5jZSgpLnNldHVwU2hhZGVyUHJvZ3JhbShcbiAgICAgIHRoaXMsXG4gICAgICBkcmF3dGV4dHVyZSxcbiAgICAgIHZlcnRleENvdW50LFxuICAgICAgdmVydGV4QXJyYXksXG4gICAgICBpbmRleEFycmF5LFxuICAgICAgdXZBcnJheSxcbiAgICAgIHRoaXMuX2J1ZmZlckRhdGEsXG4gICAgICBvcGFjaXR5LFxuICAgICAgY29sb3JCbGVuZE1vZGUsXG4gICAgICBtb2RlbENvbG9yUkdCQSxcbiAgICAgIHRoaXMuaXNQcmVtdWx0aXBsaWVkQWxwaGEoKSxcbiAgICAgIHRoaXMuZ2V0TXZwTWF0cml4KCksXG4gICAgICBpbnZlcnRlZE1hc2tcbiAgICApO1xuXG4gICAgLy8g44Od44Oq44K044Oz44Oh44OD44K344Ol44KS5o+P55S744GZ44KLXG4gICAgdGhpcy5nbC5kcmF3RWxlbWVudHMoXG4gICAgICB0aGlzLmdsLlRSSUFOR0xFUyxcbiAgICAgIGluZGV4Q291bnQsXG4gICAgICB0aGlzLmdsLlVOU0lHTkVEX1NIT1JULFxuICAgICAgMFxuICAgICk7XG5cbiAgICAvLyDlvozlh6bnkIZcbiAgICB0aGlzLmdsLnVzZVByb2dyYW0obnVsbCk7XG4gICAgdGhpcy5zZXRDbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JEcmF3KG51bGwpO1xuICAgIHRoaXMuc2V0Q2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzayhudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6zjg7Pjg4Djg6njgYzkv53mjIHjgZnjgovpnZnnmoTjgarjg6rjgr3jg7zjgrnjgpLop6PmlL7jgZnjgotcbiAgICogV2ViR0zjga7pnZnnmoTjgarjgrfjgqfjg7zjg4Djg7zjg5fjg63jgrDjg6njg6DjgpLop6PmlL7jgZnjgotcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZG9TdGF0aWNSZWxlYXNlKCk6IHZvaWQge1xuICAgIEN1YmlzbVNoYWRlcl9XZWJHTC5kZWxldGVJbnN0YW5jZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODrOODs+ODgOODvOOCueODhuODvOODiOOCkuioreWumuOBmeOCi1xuICAgKiBAcGFyYW0gZmJvIOOCouODl+ODquOCseODvOOCt+ODp+ODs+WBtOOBp+aMh+WumuOBl+OBpuOBhOOCi+ODleODrOODvOODoOODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gdmlld3BvcnQg44OT44Ol44O844Od44O844OIXG4gICAqL1xuICBwdWJsaWMgc2V0UmVuZGVyU3RhdGUoZmJvOiBXZWJHTEZyYW1lYnVmZmVyLCB2aWV3cG9ydDogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBzX2ZibyA9IGZibztcbiAgICBzX3ZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gIH1cblxuICAvKipcbiAgICog5o+P55S76ZaL5aeL5pmC44Gu6L+95Yqg5Yem55CGXG4gICAqIOODouODh+ODq+OCkuaPj+eUu+OBmeOCi+WJjeOBq+OCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+OBq+W/heimgeOBquWHpueQhuOCkuWun+ijheOBl+OBpuOBhOOCi1xuICAgKi9cbiAgcHVibGljIHByZURyYXcoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmlyc3REcmF3KSB7XG4gICAgICB0aGlzLmZpcnN0RHJhdyA9IGZhbHNlO1xuXG4gICAgICAvLyDmi6HlvLXmqZ/og73jgpLmnInlirnjgavjgZnjgotcbiAgICAgIHRoaXMuX2FuaXNvcnRvcHkgPVxuICAgICAgICB0aGlzLmdsLmdldEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJykgfHxcbiAgICAgICAgdGhpcy5nbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKSB8fFxuICAgICAgICB0aGlzLmdsLmdldEV4dGVuc2lvbignTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO1xuICAgIH1cblxuICAgIHRoaXMuZ2wuZGlzYWJsZSh0aGlzLmdsLlNDSVNTT1JfVEVTVCk7XG4gICAgdGhpcy5nbC5kaXNhYmxlKHRoaXMuZ2wuU1RFTkNJTF9URVNUKTtcbiAgICB0aGlzLmdsLmRpc2FibGUodGhpcy5nbC5ERVBUSF9URVNUKTtcblxuICAgIC8vIOOCq+ODquODs+OCsO+8iDEuMGJldGEz77yJXG4gICAgdGhpcy5nbC5mcm9udEZhY2UodGhpcy5nbC5DVyk7XG5cbiAgICB0aGlzLmdsLmVuYWJsZSh0aGlzLmdsLkJMRU5EKTtcbiAgICB0aGlzLmdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcblxuICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7IC8vIOWJjeOBq+ODkOODg+ODleOCoeOBjOODkOOCpOODs+ODieOBleOCjOOBpuOBhOOBn+OCieegtOajhOOBmeOCi+W/heimgeOBjOOBguOCi1xuICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg57jgrnjgq/jg4bjgq/jgrnjg4Hjg6Pjgavmj4/nlLvjgZnjgovjgq/jg6rjg4Pjg5Tjg7PjgrDjgrPjg7Pjg4bjgq3jgrnjg4jjgpLjgrvjg4Pjg4jjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzZXRDbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JNYXNrKGNsaXA6IEN1YmlzbUNsaXBwaW5nQ29udGV4dCkge1xuICAgIHRoaXMuX2NsaXBwaW5nQ29udGV4dEJ1ZmZlckZvck1hc2sgPSBjbGlwO1xuICB9XG5cbiAgLyoqXG4gICAqIOODnuOCueOCr+ODhuOCr+OCueODgeODo+OBq+aPj+eUu+OBmeOCi+OCr+ODquODg+ODlOODs+OCsOOCs+ODs+ODhuOCreOCueODiOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOODnuOCueOCr+ODhuOCr+OCueODgeODo+OBq+aPj+eUu+OBmeOCi+OCr+ODquODg+ODlOODs+OCsOOCs+ODs+ODhuOCreOCueODiFxuICAgKi9cbiAgcHVibGljIGdldENsaXBwaW5nQ29udGV4dEJ1ZmZlckZvck1hc2soKTogQ3ViaXNtQ2xpcHBpbmdDb250ZXh0IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzaztcbiAgfVxuXG4gIC8qKlxuICAgKiDnlLvpnaLkuIrjgavmj4/nlLvjgZnjgovjgq/jg6rjg4Pjg5Tjg7PjgrDjgrPjg7Pjg4bjgq3jgrnjg4jjgpLjgrvjg4Pjg4jjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzZXRDbGlwcGluZ0NvbnRleHRCdWZmZXJGb3JEcmF3KGNsaXA6IEN1YmlzbUNsaXBwaW5nQ29udGV4dCk6IHZvaWQge1xuICAgIHRoaXMuX2NsaXBwaW5nQ29udGV4dEJ1ZmZlckZvckRyYXcgPSBjbGlwO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUu+mdouS4iuOBq+aPj+eUu+OBmeOCi+OCr+ODquODg+ODlOODs+OCsOOCs+ODs+ODhuOCreOCueODiOOCkuWPluW+l+OBmeOCi1xuICAgKiBAcmV0dXJuIOeUu+mdouS4iuOBq+aPj+eUu+OBmeOCi+OCr+ODquODg+ODlOODs+OCsOOCs+ODs+ODhuOCreOCueODiFxuICAgKi9cbiAgcHVibGljIGdldENsaXBwaW5nQ29udGV4dEJ1ZmZlckZvckRyYXcoKTogQ3ViaXNtQ2xpcHBpbmdDb250ZXh0IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yRHJhdztcbiAgfVxuXG4gIC8qKlxuICAgKiBnbOOBruioreWumlxuICAgKi9cbiAgcHVibGljIHN0YXJ0VXAoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCk6IHZvaWQge1xuICAgIHRoaXMuZ2wgPSBnbDtcbiAgICB0aGlzLl9jbGlwcGluZ01hbmFnZXIuc2V0R0woZ2wpO1xuICAgIEN1YmlzbVNoYWRlcl9XZWJHTC5nZXRJbnN0YW5jZSgpLnNldEdsKGdsKTtcbiAgfVxuXG4gIF90ZXh0dXJlczogY3NtTWFwPG51bWJlciwgV2ViR0xUZXh0dXJlPjsgLy8g44Oi44OH44Or44GM5Y+C54Wn44GZ44KL44OG44Kv44K544OB44Oj44Go44Os44Oz44OA44Op44Gn44OQ44Kk44Oz44OJ44GX44Gm44GE44KL44OG44Kv44K544OB44Oj44Go44Gu44Oe44OD44OXXG4gIF9zb3J0ZWREcmF3YWJsZUluZGV4TGlzdDogY3NtVmVjdG9yPG51bWJlcj47IC8vIOaPj+eUu+OCquODluOCuOOCp+OCr+ODiOOBruOCpOODs+ODh+ODg+OCr+OCueOCkuaPj+eUu+mghuOBq+S4puOBueOBn+ODquOCueODiFxuICBfY2xpcHBpbmdNYW5hZ2VyOiBDdWJpc21DbGlwcGluZ01hbmFnZXJfV2ViR0w7IC8vIOOCr+ODquODg+ODlOODs+OCsOODnuOCueOCr+euoeeQhuOCquODluOCuOOCp+OCr+ODiFxuICBfY2xpcHBpbmdDb250ZXh0QnVmZmVyRm9yTWFzazogQ3ViaXNtQ2xpcHBpbmdDb250ZXh0OyAvLyDjg57jgrnjgq/jg4bjgq/jgrnjg4Hjg6Pjgavmj4/nlLvjgZnjgovjgZ/jgoHjga7jgq/jg6rjg4Pjg5Tjg7PjgrDjgrPjg7Pjg4bjgq3jgrnjg4hcbiAgX2NsaXBwaW5nQ29udGV4dEJ1ZmZlckZvckRyYXc6IEN1YmlzbUNsaXBwaW5nQ29udGV4dDsgLy8g55S76Z2i5LiK5o+P55S744GZ44KL44Gf44KB44Gu44Kv44Oq44OD44OU44Oz44Kw44Kz44Oz44OG44Kt44K544OIXG4gIGZpcnN0RHJhdzogYm9vbGVhbjtcbiAgX2J1ZmZlckRhdGE6IHtcbiAgICB2ZXJ0ZXg6IFdlYkdMQnVmZmVyO1xuICAgIHV2OiBXZWJHTEJ1ZmZlcjtcbiAgICBpbmRleDogV2ViR0xCdWZmZXI7XG4gIH07IC8vIOmggueCueODkOODg+ODleOCoeODh+ODvOOCv1xuICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0OyAvLyB3ZWJnbOOCs+ODs+ODhuOCreOCueODiFxufVxuXG4vKipcbiAqIOODrOODs+ODgOODqeOBjOS/neaMgeOBmeOCi+mdmeeahOOBquODquOCveODvOOCueOCkumWi+aUvuOBmeOCi1xuICovXG5DdWJpc21SZW5kZXJlci5zdGF0aWNSZWxlYXNlID0gKCk6IHZvaWQgPT4ge1xuICBDdWJpc21SZW5kZXJlcl9XZWJHTC5kb1N0YXRpY1JlbGVhc2UoKTtcbn07XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbXJlbmRlcmVyX3dlYmdsJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21DbGlwcGluZ0NvbnRleHQgPSAkLkN1YmlzbUNsaXBwaW5nQ29udGV4dDtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtQ2xpcHBpbmdDb250ZXh0ID0gJC5DdWJpc21DbGlwcGluZ0NvbnRleHQ7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21DbGlwcGluZ01hbmFnZXJfV2ViR0wgPSAkLkN1YmlzbUNsaXBwaW5nTWFuYWdlcl9XZWJHTDtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtQ2xpcHBpbmdNYW5hZ2VyX1dlYkdMID0gJC5DdWJpc21DbGlwcGluZ01hbmFnZXJfV2ViR0w7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21SZW5kZXJUZXh0dXJlUmVzb3VyY2UgPSAkLkN1YmlzbVJlbmRlclRleHR1cmVSZXNvdXJjZTtcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtUmVuZGVyVGV4dHVyZVJlc291cmNlID0gJC5DdWJpc21SZW5kZXJUZXh0dXJlUmVzb3VyY2U7XG4gIGV4cG9ydCBjb25zdCBDdWJpc21SZW5kZXJlcl9XZWJHTCA9ICQuQ3ViaXNtUmVuZGVyZXJfV2ViR0w7XG4gIGV4cG9ydCB0eXBlIEN1YmlzbVJlbmRlcmVyX1dlYkdMID0gJC5DdWJpc21SZW5kZXJlcl9XZWJHTDtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVNoYWRlclNldCA9ICQuQ3ViaXNtU2hhZGVyU2V0O1xuICBleHBvcnQgdHlwZSBDdWJpc21TaGFkZXJTZXQgPSAkLkN1YmlzbVNoYWRlclNldDtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbVNoYWRlcl9XZWJHTCA9ICQuQ3ViaXNtU2hhZGVyX1dlYkdMO1xuICBleHBvcnQgdHlwZSBDdWJpc21TaGFkZXJfV2ViR0wgPSAkLkN1YmlzbVNoYWRlcl9XZWJHTDtcbiAgZXhwb3J0IGNvbnN0IFNoYWRlck5hbWVzID0gJC5TaGFkZXJOYW1lcztcbiAgZXhwb3J0IHR5cGUgU2hhZGVyTmFtZXMgPSAkLlNoYWRlck5hbWVzO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBc01BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExT0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQVdBO0FBS0E7QUFLQTtBQUtBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFNQTtBQUdBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBVUE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUVBO0FBS0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBT0E7QUFJQTtBQUlBO0FBQ0E7QUFNQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBUUE7QUFHQTtBQUVBO0FBR0E7QUFJQTtBQUlBO0FBQ0E7QUFJQTtBQU1BO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVFBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFXQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQVVBO0FBS0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFrQkE7QUFBQTtBQTNyQkE7QUFpc0JBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBYkE7QUFrQkE7QUFJQTtBQUtBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFhQTtBQUFBO0FBM0VBO0FBaUZBO0FBMkJBO0FBQ0E7QUFDQTtBQXhCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQWlCQTtBQW1CQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBTUE7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTUE7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUlBO0FBSUE7QUFNQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQU1BO0FBTUE7QUFJQTtBQU1BO0FBTUE7QUFRQTtBQU1BO0FBTUE7QUFJQTtBQUlBO0FBUUE7QUFNQTtBQU1BO0FBSUE7QUFJQTtBQUlBO0FBTUE7QUFNQTtBQVFBO0FBTUE7QUFNQTtBQUlBO0FBSUE7QUFJQTtBQU1BO0FBTUE7QUFRQTtBQU1BO0FBTUE7QUFJQTtBQUlBO0FBUUE7QUFNQTtBQU1BO0FBSUE7QUFJQTtBQUlBO0FBTUE7QUFNQTtBQVFBO0FBTUE7QUFNQTtBQUlBO0FBSUE7QUFJQTtBQU1BO0FBTUE7QUFRQTtBQU1BO0FBTUE7QUFJQTtBQUlBO0FBUUE7QUFNQTtBQU1BO0FBSUE7QUFJQTtBQUlBO0FBTUE7QUFNQTtBQVFBO0FBTUE7QUFNQTtBQUlBO0FBSUE7QUFJQTtBQU1BO0FBTUE7QUFNQTtBQVFBO0FBS0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUE1MUJBO0FBaTJCQTtBQUFBO0FBVUE7QUFBQTtBQUFBO0FBVkE7QUFZQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQTJFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOztBQUNBO0FBcEZBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQU1BO0FBTUE7QUFDQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBV0E7QUFDQTtBQWdCQTtBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQWlCQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQUE7QUFoV0E7QUFxV0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/rendering/cubismrenderer_webgl.ts\n");

/***/ }),

/***/ "./Framework/src/type/csmmap.ts":
/*!**************************************!*\
  !*** ./Framework/src/type/csmmap.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.iterator = exports.csmMap = exports.csmPair = void 0;\nvar cubismdebug_1 = __webpack_require__(/*! ../utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar csmPair = (function () {\n    function csmPair(key, value) {\n        this.first = key == undefined ? null : key;\n        this.second = value == undefined ? null : value;\n    }\n    return csmPair;\n}());\nexports.csmPair = csmPair;\nvar csmMap = (function () {\n    function csmMap(size) {\n        if (size != undefined) {\n            if (size < 1) {\n                this._keyValues = [];\n                this._dummyValue = null;\n                this._size = 0;\n            }\n            else {\n                this._keyValues = new Array(size);\n                this._size = size;\n            }\n        }\n        else {\n            this._keyValues = [];\n            this._dummyValue = null;\n            this._size = 0;\n        }\n    }\n    csmMap.prototype.release = function () {\n        this.clear();\n    };\n    csmMap.prototype.appendKey = function (key) {\n        this.prepareCapacity(this._size + 1, false);\n        this._keyValues[this._size] = new csmPair(key);\n        this._size += 1;\n    };\n    csmMap.prototype.getValue = function (key) {\n        var found = -1;\n        for (var i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                found = i;\n                break;\n            }\n        }\n        if (found >= 0) {\n            return this._keyValues[found].second;\n        }\n        else {\n            this.appendKey(key);\n            return this._keyValues[this._size - 1].second;\n        }\n    };\n    csmMap.prototype.setValue = function (key, value) {\n        var found = -1;\n        for (var i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                found = i;\n                break;\n            }\n        }\n        if (found >= 0) {\n            this._keyValues[found].second = value;\n        }\n        else {\n            this.appendKey(key);\n            this._keyValues[this._size - 1].second = value;\n        }\n    };\n    csmMap.prototype.isExist = function (key) {\n        for (var i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    csmMap.prototype.clear = function () {\n        this._keyValues = void 0;\n        this._keyValues = null;\n        this._keyValues = [];\n        this._size = 0;\n    };\n    csmMap.prototype.getSize = function () {\n        return this._size;\n    };\n    csmMap.prototype.prepareCapacity = function (newSize, fitToSize) {\n        if (newSize > this._keyValues.length) {\n            if (this._keyValues.length == 0) {\n                if (!fitToSize && newSize < csmMap.DefaultSize)\n                    newSize = csmMap.DefaultSize;\n                this._keyValues.length = newSize;\n            }\n            else {\n                if (!fitToSize && newSize < this._keyValues.length * 2)\n                    newSize = this._keyValues.length * 2;\n                this._keyValues.length = newSize;\n            }\n        }\n    };\n    csmMap.prototype.begin = function () {\n        var ite = new iterator(this, 0);\n        return ite;\n    };\n    csmMap.prototype.end = function () {\n        var ite = new iterator(this, this._size);\n        return ite;\n    };\n    csmMap.prototype.erase = function (ite) {\n        var index = ite._index;\n        if (index < 0 || this._size <= index) {\n            return ite;\n        }\n        this._keyValues.splice(index, 1);\n        --this._size;\n        var ite2 = new iterator(this, index);\n        return ite2;\n    };\n    csmMap.prototype.dumpAsInt = function () {\n        for (var i = 0; i < this._size; i++) {\n            cubismdebug_1.CubismLogDebug('{0} ,', this._keyValues[i]);\n            cubismdebug_1.CubismLogDebug('\\n');\n        }\n    };\n    csmMap.DefaultSize = 10;\n    return csmMap;\n}());\nexports.csmMap = csmMap;\nvar iterator = (function () {\n    function iterator(v, idx) {\n        this._map = v != undefined ? v : new csmMap();\n        this._index = idx != undefined ? idx : 0;\n    }\n    iterator.prototype.set = function (ite) {\n        this._index = ite._index;\n        this._map = ite._map;\n        return this;\n    };\n    iterator.prototype.preIncrement = function () {\n        ++this._index;\n        return this;\n    };\n    iterator.prototype.preDecrement = function () {\n        --this._index;\n        return this;\n    };\n    iterator.prototype.increment = function () {\n        var iteold = new iterator(this._map, this._index++);\n        return iteold;\n    };\n    iterator.prototype.decrement = function () {\n        var iteold = new iterator(this._map, this._index);\n        this._map = iteold._map;\n        this._index = iteold._index;\n        return this;\n    };\n    iterator.prototype.ptr = function () {\n        return this._map._keyValues[this._index];\n    };\n    iterator.prototype.notEqual = function (ite) {\n        return this._index != ite._index || this._map != ite._map;\n    };\n    return iterator;\n}());\nexports.iterator = iterator;\nvar $ = __importStar(__webpack_require__(/*! ./csmmap */ \"./Framework/src/type/csmmap.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmMap = $.csmMap;\n    Live2DCubismFramework.csmPair = $.csmPair;\n    Live2DCubismFramework.iterator = $.iterator;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3R5cGUvY3NtbWFwLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy90eXBlL2NzbW1hcC50cz80YzQwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IEN1YmlzbUxvZ0RlYnVnIH0gZnJvbSAnLi4vdXRpbHMvY3ViaXNtZGVidWcnO1xuXG4vKipcbiAqIEtleS1WYWx1ZeOBruODmuOCouOCkuWumue+qeOBmeOCi+OCr+ODqeOCuVxuICogY3NtTWFw44Kv44Op44K544Gu5YaF6YOo44OH44O844K/44Gn5L2/55So44GZ44KL44CCXG4gKi9cbmV4cG9ydCBjbGFzcyBjc21QYWlyPF9LZXlULCBfVmFsVD4ge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqIEBwYXJhbSBrZXkgS2V544Go44GX44Gm44K744OD44OI44GZ44KL5YCkXG4gICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZeOBqOOBl+OBpuOCu+ODg+ODiOOBmeOCi+WApFxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKGtleT86IF9LZXlULCB2YWx1ZT86IF9WYWxUKSB7XG4gICAgdGhpcy5maXJzdCA9IGtleSA9PSB1bmRlZmluZWQgPyBudWxsIDoga2V5O1xuXG4gICAgdGhpcy5zZWNvbmQgPSB2YWx1ZSA9PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZmlyc3Q6IF9LZXlUOyAvLyBrZXnjgajjgZfjgabnlKjjgYTjgovlpInmlbBcbiAgcHVibGljIHNlY29uZDogX1ZhbFQ7IC8vIHZhbHVl44Go44GX44Gm55So44GE44KL5aSJ5pWwXG59XG5cbi8qKlxuICog44Oe44OD44OX5Z6LXG4gKi9cbmV4cG9ydCBjbGFzcyBjc21NYXA8X0tleVQsIF9WYWxUPiB7XG4gIC8qKlxuICAgKiDlvJXmlbDku5jjgY3jgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICogQHBhcmFtIHNpemUg5Yid5pyf5YyW5pmC54K544Gn56K65L+d44GZ44KL44K144Kk44K6XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3Ioc2l6ZT86IG51bWJlcikge1xuICAgIGlmIChzaXplICE9IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHNpemUgPCAxKSB7XG4gICAgICAgIHRoaXMuX2tleVZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLl9kdW1teVZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc2l6ZSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9rZXlWYWx1ZXMgPSBuZXcgQXJyYXkoc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NpemUgPSBzaXplO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9rZXlWYWx1ZXMgPSBbXTtcbiAgICAgIHRoaXMuX2R1bW15VmFsdWUgPSBudWxsO1xuICAgICAgdGhpcy5fc2l6ZSA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKSB7XG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCreODvOOCkui/veWKoOOBmeOCi1xuICAgKiBAcGFyYW0ga2V5IOaWsOOBn+OBq+i/veWKoOOBmeOCi+OCreODvFxuICAgKi9cbiAgcHVibGljIGFwcGVuZEtleShrZXk6IF9LZXlUKTogdm9pZCB7XG4gICAgLy8g5paw44GX44GPS2V5L1ZhbHVl44Gu44Oa44Ki44KS5L2c44KLXG4gICAgdGhpcy5wcmVwYXJlQ2FwYWNpdHkodGhpcy5fc2l6ZSArIDEsIGZhbHNlKTsgLy8gMeOBpOS7peS4iuWFpeOCi+mamemWk+OCkuS9nOOCi1xuICAgIC8vIOaWsOOBl+OBhGtleS92YWx1ZeOBruOCpOODs+ODh+ODg+OCr+OCueOBr19zaXplXG5cbiAgICB0aGlzLl9rZXlWYWx1ZXNbdGhpcy5fc2l6ZV0gPSBuZXcgY3NtUGFpcjxfS2V5VCwgX1ZhbFQ+KGtleSk7XG4gICAgdGhpcy5fc2l6ZSArPSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+Wtl+a8lOeul+WtkFtrZXld44Gu44Kq44O844OQ44O844Ot44O844OJKGdldClcbiAgICogQHBhcmFtIGtleSDmt7vlrZfjgYvjgonnibnlrprjgZXjgozjgotWYWx1ZeWApFxuICAgKi9cbiAgcHVibGljIGdldFZhbHVlKGtleTogX0tleVQpOiBfVmFsVCB7XG4gICAgbGV0IGZvdW5kID0gLTE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3NpemU7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2tleVZhbHVlc1tpXS5maXJzdCA9PSBrZXkpIHtcbiAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZm91bmQgPj0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2tleVZhbHVlc1tmb3VuZF0uc2Vjb25kO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcGVuZEtleShrZXkpOyAvLyDmlrDopo/jgq3jg7zjgpLov73liqBcbiAgICAgIHJldHVybiB0aGlzLl9rZXlWYWx1ZXNbdGhpcy5fc2l6ZSAtIDFdLnNlY29uZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5re75a2X5ryU566X5a2QW2tleV3jga7jgqrjg7zjg5Djg7zjg63jg7zjg4koc2V0KVxuICAgKiBAcGFyYW0ga2V5IOa3u+Wtl+OBi+OCieeJueWumuOBleOCjOOCi1ZhbHVl5YCkXG4gICAqIEBwYXJhbSB2YWx1ZSDku6PlhaXjgZnjgotWYWx1ZeWApFxuICAgKi9cbiAgcHVibGljIHNldFZhbHVlKGtleTogX0tleVQsIHZhbHVlOiBfVmFsVCk6IHZvaWQge1xuICAgIGxldCBmb3VuZCA9IC0xO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9zaXplOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9rZXlWYWx1ZXNbaV0uZmlyc3QgPT0ga2V5KSB7XG4gICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZvdW5kID49IDApIHtcbiAgICAgIHRoaXMuX2tleVZhbHVlc1tmb3VuZF0uc2Vjb25kID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwZW5kS2V5KGtleSk7IC8vIOaWsOimj+OCreODvOOCkui/veWKoFxuICAgICAgdGhpcy5fa2V5VmFsdWVzW3RoaXMuX3NpemUgLSAxXS5zZWNvbmQgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5byV5pWw44Gn5rih44GX44GfS2V544KS5oyB44Gk6KaB57Sg44GM5a2Y5Zyo44GZ44KL44GLXG4gICAqIEBwYXJhbSBrZXkg5a2Y5Zyo44KS56K66KqN44GZ44KLa2V5XG4gICAqIEByZXR1cm4gdHJ1ZSDlvJXmlbDjgafmuKHjgZfjgZ9rZXnjgpLmjIHjgaTopoHntKDjgYzlrZjlnKjjgZnjgotcbiAgICogQHJldHVybiBmYWxzZSDlvJXmlbDjgafmuKHjgZfjgZ9rZXnjgpLmjIHjgaTopoHntKDjgYzlrZjlnKjjgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc0V4aXN0KGtleTogX0tleVQpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3NpemU7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2tleVZhbHVlc1tpXS5maXJzdCA9PSBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBrZXlWYWx1ZeOBruODneOCpOODs+OCv+OCkuWFqOOBpuino+aUvuOBmeOCi1xuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX2tleVZhbHVlcyA9IHZvaWQgMDtcbiAgICB0aGlzLl9rZXlWYWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX2tleVZhbHVlcyA9IFtdO1xuXG4gICAgdGhpcy5fc2l6ZSA9IDA7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44OG44OK44Gu44K144Kk44K644KS5Y+W5b6X44GZ44KLXG4gICAqXG4gICAqIEByZXR1cm4g44Kz44Oz44OG44OK44Gu44K144Kk44K6XG4gICAqL1xuICBwdWJsaWMgZ2V0U2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9zaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+ODhuODiuOBruOCreODo+ODkeOCt+ODhuOCo+OCkueiuuS/neOBmeOCi1xuICAgKiBAcGFyYW0gbmV3U2l6ZSDmlrDjgZ/jgarjgq3jg6Pjg5Hjgrfjg4bjgqPjgILlvJXmlbDjga7lgKTjgYznj77lnKjjga7jgrXjgqTjgrrmnKrmuoDjga7loLTlkIjjga/kvZXjgoLjgZfjgarjgYTjgIJcbiAgICogQHBhcmFtIGZpdFRvU2l6ZSB0cnVl44Gq44KJ5oyH5a6a44GX44Gf44K144Kk44K644Gr5ZCI44KP44Gb44KL44CCZmFsc2XjgarjgonjgrXjgqTjgrrjgpIy5YCN56K65L+d44GX44Gm44GK44GP44CCXG4gICAqL1xuICBwdWJsaWMgcHJlcGFyZUNhcGFjaXR5KG5ld1NpemU6IG51bWJlciwgZml0VG9TaXplOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKG5ld1NpemUgPiB0aGlzLl9rZXlWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fa2V5VmFsdWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGlmICghZml0VG9TaXplICYmIG5ld1NpemUgPCBjc21NYXAuRGVmYXVsdFNpemUpXG4gICAgICAgICAgbmV3U2l6ZSA9IGNzbU1hcC5EZWZhdWx0U2l6ZTtcbiAgICAgICAgdGhpcy5fa2V5VmFsdWVzLmxlbmd0aCA9IG5ld1NpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWZpdFRvU2l6ZSAmJiBuZXdTaXplIDwgdGhpcy5fa2V5VmFsdWVzLmxlbmd0aCAqIDIpXG4gICAgICAgICAgbmV3U2l6ZSA9IHRoaXMuX2tleVZhbHVlcy5sZW5ndGggKiAyO1xuICAgICAgICB0aGlzLl9rZXlWYWx1ZXMubGVuZ3RoID0gbmV3U2l6ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44OG44OK44Gu5YWI6aCt6KaB57Sg44KS6L+U44GZXG4gICAqL1xuICBwdWJsaWMgYmVnaW4oKTogaXRlcmF0b3I8X0tleVQsIF9WYWxUPiB7XG4gICAgY29uc3QgaXRlOiBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+ID0gbmV3IGl0ZXJhdG9yPF9LZXlULCBfVmFsVD4odGhpcywgMCk7XG4gICAgcmV0dXJuIGl0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjga7ntYLnq6/opoHntKDjgpLov5TjgZlcbiAgICovXG4gIHB1YmxpYyBlbmQoKTogaXRlcmF0b3I8X0tleVQsIF9WYWxUPiB7XG4gICAgY29uc3QgaXRlOiBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+ID0gbmV3IGl0ZXJhdG9yPF9LZXlULCBfVmFsVD4oXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5fc2l6ZVxuICAgICk7IC8vIOe1guS6hlxuICAgIHJldHVybiBpdGU7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44OG44OK44GL44KJ6KaB57Sg44KS5YmK6Zmk44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSBpdGUg5YmK6Zmk44GZ44KL6KaB57SgXG4gICAqL1xuICBwdWJsaWMgZXJhc2UoaXRlOiBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+KTogaXRlcmF0b3I8X0tleVQsIF9WYWxUPiB7XG4gICAgY29uc3QgaW5kZXg6IG51bWJlciA9IGl0ZS5faW5kZXg7XG4gICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLl9zaXplIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gaXRlOyAvLyDliYrpmaTnr4Tlm7LlpJZcbiAgICB9XG5cbiAgICAvLyDliYrpmaRcbiAgICB0aGlzLl9rZXlWYWx1ZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAtLXRoaXMuX3NpemU7XG5cbiAgICBjb25zdCBpdGUyOiBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+ID0gbmV3IGl0ZXJhdG9yPF9LZXlULCBfVmFsVD4oXG4gICAgICB0aGlzLFxuICAgICAgaW5kZXhcbiAgICApOyAvLyDntYLkuoZcbiAgICByZXR1cm4gaXRlMjtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjga7lgKTjgpIzMuODk+ODg+ODiOespuWPt+S7mOOBjeaVtOaVsOWei+OBp+ODgOODs+ODl+OBmeOCi1xuICAgKi9cbiAgcHVibGljIGR1bXBBc0ludCgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3NpemU7IGkrKykge1xuICAgICAgQ3ViaXNtTG9nRGVidWcoJ3swfSAsJywgdGhpcy5fa2V5VmFsdWVzW2ldKTtcbiAgICAgIEN1YmlzbUxvZ0RlYnVnKCdcXG4nKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlZmF1bHRTaXplID0gMTA7IC8vIOOCs+ODs+ODhuODiuOBruWIneacn+WMluOBruODh+ODleOCqeODq+ODiOOCteOCpOOCulxuICBwdWJsaWMgX2tleVZhbHVlczogY3NtUGFpcjxfS2V5VCwgX1ZhbFQ+W107IC8vIGtleS12YWx1ZeODmuOCouOBrumFjeWIl1xuICBwdWJsaWMgX2R1bW15VmFsdWU6IF9WYWxUOyAvLyDnqbrjga7lgKTjgpLov5TjgZnngrrjga7jg4Djg5/jg7xcbiAgcHVibGljIF9zaXplOiBudW1iZXI7IC8vIOOCs+ODs+ODhuODiuOBruimgee0oOaVsFxufVxuXG4vKipcbiAqIGNzbU1hcDxUPuOBruOCpOODhuODrOODvOOCv1xuICovXG5leHBvcnQgY2xhc3MgaXRlcmF0b3I8X0tleVQsIF9WYWxUPiB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIGNvbnN0cnVjdG9yKHY/OiBjc21NYXA8X0tleVQsIF9WYWxUPiwgaWR4PzogbnVtYmVyKSB7XG4gICAgdGhpcy5fbWFwID0gdiAhPSB1bmRlZmluZWQgPyB2IDogbmV3IGNzbU1hcDxfS2V5VCwgX1ZhbFQ+KCk7XG5cbiAgICB0aGlzLl9pbmRleCA9IGlkeCAhPSB1bmRlZmluZWQgPyBpZHggOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqID3mvJTnrpflrZDjga7jgqrjg7zjg5Djg7zjg63jg7zjg4lcbiAgICovXG4gIHB1YmxpYyBzZXQoaXRlOiBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+KTogaXRlcmF0b3I8X0tleVQsIF9WYWxUPiB7XG4gICAgdGhpcy5faW5kZXggPSBpdGUuX2luZGV4O1xuICAgIHRoaXMuX21hcCA9IGl0ZS5fbWFwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIOWJjee9ruOBjSsr5ryU566X5a2Q44Gu44Kq44O844OQ44O844Ot44O844OJXG4gICAqL1xuICBwdWJsaWMgcHJlSW5jcmVtZW50KCk6IGl0ZXJhdG9yPF9LZXlULCBfVmFsVD4ge1xuICAgICsrdGhpcy5faW5kZXg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICog5YmN572u44GNLS3mvJTnrpflrZDjga7jgqrjg7zjg5Djg7zjg63jg7zjg4lcbiAgICovXG4gIHB1YmxpYyBwcmVEZWNyZW1lbnQoKTogaXRlcmF0b3I8X0tleVQsIF9WYWxUPiB7XG4gICAgLS10aGlzLl9pbmRleDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiDlvoznva7jgY0rK+a8lOeul+WtkOOBruOCquODvOODkOODvOODreODvOODiVxuICAgKi9cbiAgcHVibGljIGluY3JlbWVudCgpOiBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+IHtcbiAgICBjb25zdCBpdGVvbGQgPSBuZXcgaXRlcmF0b3I8X0tleVQsIF9WYWxUPih0aGlzLl9tYXAsIHRoaXMuX2luZGV4KyspOyAvLyDlj6TjgYTlgKTjgpLkv53lrZhcbiAgICByZXR1cm4gaXRlb2xkO1xuICB9XG5cbiAgLyoqXG4gICAqIOW+jOe9ruOBjS0t5ryU566X5a2Q44Gu44Kq44O844OQ44O844Ot44O844OJXG4gICAqL1xuICBwdWJsaWMgZGVjcmVtZW50KCk6IGl0ZXJhdG9yPF9LZXlULCBfVmFsVD4ge1xuICAgIGNvbnN0IGl0ZW9sZCA9IG5ldyBpdGVyYXRvcjxfS2V5VCwgX1ZhbFQ+KHRoaXMuX21hcCwgdGhpcy5faW5kZXgpOyAvLyDlj6TjgYTlgKTjgpLkv53lrZhcbiAgICB0aGlzLl9tYXAgPSBpdGVvbGQuX21hcDtcbiAgICB0aGlzLl9pbmRleCA9IGl0ZW9sZC5faW5kZXg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogKua8lOeul+WtkOOBruOCquODvOODkOODvOODreODvOODiVxuICAgKi9cbiAgcHVibGljIHB0cigpOiBjc21QYWlyPF9LZXlULCBfVmFsVD4ge1xuICAgIHJldHVybiB0aGlzLl9tYXAuX2tleVZhbHVlc1t0aGlzLl9pbmRleF07XG4gIH1cblxuICAvKipcbiAgICogIT3mvJTnrpdcbiAgICovXG4gIHB1YmxpYyBub3RFcXVhbChpdGU6IGl0ZXJhdG9yPF9LZXlULCBfVmFsVD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faW5kZXggIT0gaXRlLl9pbmRleCB8fCB0aGlzLl9tYXAgIT0gaXRlLl9tYXA7XG4gIH1cblxuICBfaW5kZXg6IG51bWJlcjsgLy8g44Kz44Oz44OG44OK44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gIF9tYXA6IGNzbU1hcDxfS2V5VCwgX1ZhbFQ+OyAvLyDjgrPjg7Pjg4bjg4pcbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3NtbWFwJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdmUyREN1YmlzbUZyYW1ld29yayB7XG4gIGV4cG9ydCBjb25zdCBjc21NYXAgPSAkLmNzbU1hcDtcbiAgZXhwb3J0IHR5cGUgY3NtTWFwPEssIFY+ID0gJC5jc21NYXA8SywgVj47XG4gIGV4cG9ydCBjb25zdCBjc21QYWlyID0gJC5jc21QYWlyO1xuICBleHBvcnQgdHlwZSBjc21QYWlyPEssIFY+ID0gJC5jc21QYWlyPEssIFY+O1xuICBleHBvcnQgY29uc3QgaXRlcmF0b3IgPSAkLml0ZXJhdG9yO1xuICBleHBvcnQgdHlwZSBpdGVyYXRvcjxLLCBWPiA9ICQuaXRlcmF0b3I8SywgVj47XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQU1BO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUFBO0FBZEE7QUFtQkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFNQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBSUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUFBO0FBcE1BO0FBeU1BO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQXJFQTtBQXdFQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/type/csmmap.ts\n");

/***/ }),

/***/ "./Framework/src/type/csmrectf.ts":
/*!****************************************!*\
  !*** ./Framework/src/type/csmrectf.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.csmRect = void 0;\nvar csmRect = (function () {\n    function csmRect(x, y, w, h) {\n        this.x = x;\n        this.y = y;\n        this.width = w;\n        this.height = h;\n    }\n    csmRect.prototype.getCenterX = function () {\n        return this.x + 0.5 * this.width;\n    };\n    csmRect.prototype.getCenterY = function () {\n        return this.y + 0.5 * this.height;\n    };\n    csmRect.prototype.getRight = function () {\n        return this.x + this.width;\n    };\n    csmRect.prototype.getBottom = function () {\n        return this.y + this.height;\n    };\n    csmRect.prototype.setRect = function (r) {\n        this.x = r.x;\n        this.y = r.y;\n        this.width = r.width;\n        this.height = r.height;\n    };\n    csmRect.prototype.expand = function (w, h) {\n        this.x -= w;\n        this.y -= h;\n        this.width += w * 2.0;\n        this.height += h * 2.0;\n    };\n    return csmRect;\n}());\nexports.csmRect = csmRect;\nvar $ = __importStar(__webpack_require__(/*! ./csmrectf */ \"./Framework/src/type/csmrectf.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmRect = $.csmRect;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3R5cGUvY3NtcmVjdGYudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL3R5cGUvY3NtcmVjdGYudHM/M2M5MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG4vKipcbiAqIOefqeW9ouW9oueKtu+8iOW6p+aomeODu+mVt+OBleOBr2Zsb2F05YCk77yJ44KS5a6a576p44GZ44KL44Kv44Op44K5XG4gKi9cbmV4cG9ydCBjbGFzcyBjc21SZWN0IHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKiBAcGFyYW0geCDlt6bnq69Y5bqn5qiZXG4gICAqIEBwYXJhbSB5IOS4iuerr1nluqfmqJlcbiAgICogQHBhcmFtIHcg5bmFXG4gICAqIEBwYXJhbSBoIOmrmOOBlVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKHg/OiBudW1iZXIsIHk/OiBudW1iZXIsIHc/OiBudW1iZXIsIGg/OiBudW1iZXIpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy53aWR0aCA9IHc7XG4gICAgdGhpcy5oZWlnaHQgPSBoO1xuICB9XG5cbiAgLyoqXG4gICAqIOefqeW9ouS4reWkruOBrljluqfmqJnjgpLlj5blvpfjgZnjgotcbiAgICovXG4gIHB1YmxpYyBnZXRDZW50ZXJYKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMueCArIDAuNSAqIHRoaXMud2lkdGg7XG4gIH1cblxuICAvKipcbiAgICog55+p5b2i5Lit5aSu44GuWeW6p+aomeOCkuWPluW+l+OBmeOCi1xuICAgKi9cbiAgcHVibGljIGdldENlbnRlclkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy55ICsgMC41ICogdGhpcy5oZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICog5Y+z5YG044GuWOW6p+aomeOCkuWPluW+l+OBmeOCi1xuICAgKi9cbiAgcHVibGljIGdldFJpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMueCArIHRoaXMud2lkdGg7XG4gIH1cblxuICAvKipcbiAgICog5LiL56uv44GuWeW6p+aomeOCkuWPluW+l+OBmeOCi1xuICAgKi9cbiAgcHVibGljIGdldEJvdHRvbSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLmhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiDnn6nlvaLjgavlgKTjgpLjgrvjg4Pjg4jjgZnjgotcbiAgICogQHBhcmFtIHIg55+p5b2i44Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc2V0UmVjdChyOiBjc21SZWN0KTogdm9pZCB7XG4gICAgdGhpcy54ID0gci54O1xuICAgIHRoaXMueSA9IHIueTtcbiAgICB0aGlzLndpZHRoID0gci53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHIuaGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIOefqeW9ouS4reWkruOCkui7uOOBq+OBl+OBpue4puaoquOCkuaLoee4ruOBmeOCi1xuICAgKiBAcGFyYW0gdyDluYXmlrnlkJHjgavmi6HnuK7jgZnjgovph49cbiAgICogQHBhcmFtIGgg6auY44GV5pa55ZCR44Gr5ouh57iu44GZ44KL6YePXG4gICAqL1xuICBwdWJsaWMgZXhwYW5kKHc6IG51bWJlciwgaDogbnVtYmVyKSB7XG4gICAgdGhpcy54IC09IHc7XG4gICAgdGhpcy55IC09IGg7XG4gICAgdGhpcy53aWR0aCArPSB3ICogMi4wO1xuICAgIHRoaXMuaGVpZ2h0ICs9IGggKiAyLjA7XG4gIH1cblxuICBwdWJsaWMgeDogbnVtYmVyOyAvLyDlt6bnq69Y5bqn5qiZXG4gIHB1YmxpYyB5OiBudW1iZXI7IC8vIOS4iuerr1nluqfmqJlcbiAgcHVibGljIHdpZHRoOiBudW1iZXI7IC8vIOW5hVxuICBwdWJsaWMgaGVpZ2h0OiBudW1iZXI7IC8vIOmrmOOBlVxufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jc21yZWN0Zic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgY3NtUmVjdCA9ICQuY3NtUmVjdDtcbiAgZXhwb3J0IHR5cGUgY3NtUmVjdCA9ICQuY3NtUmVjdDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQXRFQTtBQXlFQTtBQUVBO0FBQUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/type/csmrectf.ts\n");

/***/ }),

/***/ "./Framework/src/type/csmstring.ts":
/*!*****************************************!*\
  !*** ./Framework/src/type/csmstring.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.csmString = void 0;\nvar csmString = (function () {\n    function csmString(s) {\n        this.s = s;\n    }\n    csmString.prototype.append = function (c, length) {\n        this.s += length !== undefined ? c.substr(0, length) : c;\n        return this;\n    };\n    csmString.prototype.expansion = function (length, v) {\n        for (var i = 0; i < length; i++) {\n            this.append(v);\n        }\n        return this;\n    };\n    csmString.prototype.getBytes = function () {\n        return encodeURIComponent(this.s).replace(/%../g, 'x').length;\n    };\n    csmString.prototype.getLength = function () {\n        return this.s.length;\n    };\n    csmString.prototype.isLess = function (s) {\n        return this.s < s.s;\n    };\n    csmString.prototype.isGreat = function (s) {\n        return this.s > s.s;\n    };\n    csmString.prototype.isEqual = function (s) {\n        return this.s == s;\n    };\n    csmString.prototype.isEmpty = function () {\n        return this.s.length == 0;\n    };\n    return csmString;\n}());\nexports.csmString = csmString;\nvar $ = __importStar(__webpack_require__(/*! ./csmstring */ \"./Framework/src/type/csmstring.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmString = $.csmString;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3R5cGUvY3Ntc3RyaW5nLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy90eXBlL2NzbXN0cmluZy50cz9iNTllIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbi8qKlxuICog5paH5a2X5YiX44Kv44Op44K544CCXG4gKi9cbmV4cG9ydCBjbGFzcyBjc21TdHJpbmcge1xuICAvKipcbiAgICog5paH5a2X5YiX44KS5b6M5pa544Gr6L+95Yqg44GZ44KLXG4gICAqXG4gICAqIEBwYXJhbSBjIOi/veWKoOOBmeOCi+aWh+Wtl+WIl1xuICAgKiBAcmV0dXJuIOabtOaWsOOBleOCjOOBn+aWh+Wtl+WIl1xuICAgKi9cbiAgcHVibGljIGFwcGVuZChjOiBzdHJpbmcsIGxlbmd0aD86IG51bWJlcik6IGNzbVN0cmluZyB7XG4gICAgdGhpcy5zICs9IGxlbmd0aCAhPT0gdW5kZWZpbmVkID8gYy5zdWJzdHIoMCwgbGVuZ3RoKSA6IGM7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiDmloflrZfjgrXjgqTjgrrjgpLmi6HlvLXjgZfjgabmloflrZfjgpLln4vjgoHjgotcbiAgICogQHBhcmFtIGxlbmd0aCAgICDmi6HlvLXjgZnjgovmloflrZfmlbBcbiAgICogQHBhcmFtIHYgICAgICAgICDln4vjgoHjgovmloflrZdcbiAgICogQHJldHVybiDmm7TmlrDjgZXjgozjgZ/mloflrZfliJdcbiAgICovXG4gIHB1YmxpYyBleHBhbnNpb24obGVuZ3RoOiBudW1iZXIsIHY6IHN0cmluZyk6IGNzbVN0cmluZyB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hcHBlbmQodik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICog5paH5a2X5YiX44Gu6ZW344GV44KS44OQ44Kk44OI5pWw44Gn5Y+W5b6X44GZ44KLXG4gICAqL1xuICBwdWJsaWMgZ2V0Qnl0ZXMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucykucmVwbGFjZSgvJS4uL2csICd4JykubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIOaWh+Wtl+WIl+OBrumVt+OBleOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIOaWh+Wtl+WIl+avlOi8gyA8XG4gICAqIEBwYXJhbSBzIOavlOi8g+OBmeOCi+aWh+Wtl+WIl1xuICAgKiBAcmV0dXJuIHRydWU6ICAgIOavlOi8g+OBmeOCi+aWh+Wtl+WIl+OCiOOCiuWwj+OBleOBhFxuICAgKiBAcmV0dXJuIGZhbHNlOiAgIOavlOi8g+OBmeOCi+aWh+Wtl+WIl+OCiOOCiuWkp+OBjeOBhFxuICAgKi9cbiAgcHVibGljIGlzTGVzcyhzOiBjc21TdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zIDwgcy5zO1xuICB9XG5cbiAgLyoqXG4gICAqIOaWh+Wtl+WIl+avlOi8gyA+XG4gICAqIEBwYXJhbSBzIOavlOi8g+OBmeOCi+aWh+Wtl+WIl1xuICAgKiBAcmV0dXJuIHRydWU6ICAgIOavlOi8g+OBmeOCi+aWh+Wtl+WIl+OCiOOCiuWkp+OBjeOBhFxuICAgKiBAcmV0dXJuIGZhbHNlOiAgIOavlOi8g+OBmeOCi+aWh+Wtl+WIl+OCiOOCiuWwj+OBleOBhFxuICAgKi9cbiAgcHVibGljIGlzR3JlYXQoczogY3NtU3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucyA+IHMucztcbiAgfVxuXG4gIC8qKlxuICAgKiDmloflrZfliJfmr5TovIMgPT1cbiAgICogQHBhcmFtIHMg5q+U6LyD44GZ44KL5paH5a2X5YiXXG4gICAqIEByZXR1cm4gdHJ1ZTogICAg5q+U6LyD44GZ44KL5paH5a2X5YiX44Go562J44GX44GEXG4gICAqIEByZXR1cm4gZmFsc2U6ICAg5q+U6LyD44GZ44KL5paH5a2X5YiX44Go55Ww44Gq44KLXG4gICAqL1xuICBwdWJsaWMgaXNFcXVhbChzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zID09IHM7XG4gIH1cblxuICAvKipcbiAgICog5paH5a2X5YiX44GM56m644GL44Gp44GG44GLXG4gICAqIEByZXR1cm4gdHJ1ZTog56m644Gu5paH5a2X5YiXXG4gICAqIEByZXR1cm4gZmFsc2U6IOWApOOBjOioreWumuOBleOCjOOBpuOBhOOCi1xuICAgKi9cbiAgcHVibGljIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucy5sZW5ndGggPT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvJXmlbDku5jjgY3jgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihzOiBzdHJpbmcpIHtcbiAgICB0aGlzLnMgPSBzO1xuICB9XG5cbiAgczogc3RyaW5nO1xufVxuXG4vLyBOYW1lc3BhY2UgZGVmaW5pdGlvbiBmb3IgY29tcGF0aWJpbGl0eS5cbmltcG9ydCAqIGFzICQgZnJvbSAnLi9jc21zdHJpbmcnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IGNzbVN0cmluZyA9ICQuY3NtU3RyaW5nO1xuICBleHBvcnQgdHlwZSBjc21TdHJpbmcgPSAkLmNzbVN0cmluZztcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBO0FBbUZBO0FBQ0E7QUFDQTtBQTlFQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVVBO0FBQUE7QUF4RkE7QUEyRkE7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/type/csmstring.ts\n");

/***/ }),

/***/ "./Framework/src/type/csmvector.ts":
/*!*****************************************!*\
  !*** ./Framework/src/type/csmvector.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.iterator = exports.csmVector = void 0;\nvar csmVector = (function () {\n    function csmVector(initialCapacity) {\n        if (initialCapacity === void 0) { initialCapacity = 0; }\n        if (initialCapacity < 1) {\n            this._ptr = [];\n            this._capacity = 0;\n            this._size = 0;\n        }\n        else {\n            this._ptr = new Array(initialCapacity);\n            this._capacity = initialCapacity;\n            this._size = 0;\n        }\n    }\n    csmVector.prototype.at = function (index) {\n        return this._ptr[index];\n    };\n    csmVector.prototype.set = function (index, value) {\n        this._ptr[index] = value;\n    };\n    csmVector.prototype.get = function (offset) {\n        if (offset === void 0) { offset = 0; }\n        var ret = new Array();\n        for (var i = offset; i < this._size; i++) {\n            ret.push(this._ptr[i]);\n        }\n        return ret;\n    };\n    csmVector.prototype.pushBack = function (value) {\n        if (this._size >= this._capacity) {\n            this.prepareCapacity(this._capacity == 0 ? csmVector.s_defaultSize : this._capacity * 2);\n        }\n        this._ptr[this._size++] = value;\n    };\n    csmVector.prototype.clear = function () {\n        this._ptr.length = 0;\n        this._size = 0;\n    };\n    csmVector.prototype.getSize = function () {\n        return this._size;\n    };\n    csmVector.prototype.assign = function (newSize, value) {\n        var curSize = this._size;\n        if (curSize < newSize) {\n            this.prepareCapacity(newSize);\n        }\n        for (var i = 0; i < newSize; i++) {\n            this._ptr[i] = value;\n        }\n        this._size = newSize;\n    };\n    csmVector.prototype.resize = function (newSize, value) {\n        if (value === void 0) { value = null; }\n        this.updateSize(newSize, value, true);\n    };\n    csmVector.prototype.updateSize = function (newSize, value, callPlacementNew) {\n        if (value === void 0) { value = null; }\n        if (callPlacementNew === void 0) { callPlacementNew = true; }\n        var curSize = this._size;\n        if (curSize < newSize) {\n            this.prepareCapacity(newSize);\n            if (callPlacementNew) {\n                for (var i = this._size; i < newSize; i++) {\n                    if (typeof value == 'function') {\n                        this._ptr[i] = JSON.parse(JSON.stringify(new value()));\n                    }\n                    else {\n                        this._ptr[i] = value;\n                    }\n                }\n            }\n            else {\n                for (var i = this._size; i < newSize; i++) {\n                    this._ptr[i] = value;\n                }\n            }\n        }\n        else {\n            var sub = this._size - newSize;\n            this._ptr.splice(this._size - sub, sub);\n        }\n        this._size = newSize;\n    };\n    csmVector.prototype.insert = function (position, begin, end) {\n        var dstSi = position._index;\n        var srcSi = begin._index;\n        var srcEi = end._index;\n        var addCount = srcEi - srcSi;\n        this.prepareCapacity(this._size + addCount);\n        var addSize = this._size - dstSi;\n        if (addSize > 0) {\n            for (var i = 0; i < addSize; i++) {\n                this._ptr.splice(dstSi + i, 0, null);\n            }\n        }\n        for (var i = srcSi; i < srcEi; i++, dstSi++) {\n            this._ptr[dstSi] = begin._vector._ptr[i];\n        }\n        this._size = this._size + addCount;\n    };\n    csmVector.prototype.remove = function (index) {\n        if (index < 0 || this._size <= index) {\n            return false;\n        }\n        this._ptr.splice(index, 1);\n        --this._size;\n        return true;\n    };\n    csmVector.prototype.erase = function (ite) {\n        var index = ite._index;\n        if (index < 0 || this._size <= index) {\n            return ite;\n        }\n        this._ptr.splice(index, 1);\n        --this._size;\n        var ite2 = new iterator(this, index);\n        return ite2;\n    };\n    csmVector.prototype.prepareCapacity = function (newSize) {\n        if (newSize > this._capacity) {\n            if (this._capacity == 0) {\n                this._ptr = new Array(newSize);\n                this._capacity = newSize;\n            }\n            else {\n                this._ptr.length = newSize;\n                this._capacity = newSize;\n            }\n        }\n    };\n    csmVector.prototype.begin = function () {\n        var ite = this._size == 0 ? this.end() : new iterator(this, 0);\n        return ite;\n    };\n    csmVector.prototype.end = function () {\n        var ite = new iterator(this, this._size);\n        return ite;\n    };\n    csmVector.prototype.getOffset = function (offset) {\n        var newVector = new csmVector();\n        newVector._ptr = this.get(offset);\n        newVector._size = this.get(offset).length;\n        newVector._capacity = this.get(offset).length;\n        return newVector;\n    };\n    csmVector.s_defaultSize = 10;\n    return csmVector;\n}());\nexports.csmVector = csmVector;\nvar iterator = (function () {\n    function iterator(v, index) {\n        this._vector = v != undefined ? v : null;\n        this._index = index != undefined ? index : 0;\n    }\n    iterator.prototype.set = function (ite) {\n        this._index = ite._index;\n        this._vector = ite._vector;\n        return this;\n    };\n    iterator.prototype.preIncrement = function () {\n        ++this._index;\n        return this;\n    };\n    iterator.prototype.preDecrement = function () {\n        --this._index;\n        return this;\n    };\n    iterator.prototype.increment = function () {\n        var iteold = new iterator(this._vector, this._index++);\n        return iteold;\n    };\n    iterator.prototype.decrement = function () {\n        var iteold = new iterator(this._vector, this._index--);\n        return iteold;\n    };\n    iterator.prototype.ptr = function () {\n        return this._vector._ptr[this._index];\n    };\n    iterator.prototype.substitution = function (ite) {\n        this._index = ite._index;\n        this._vector = ite._vector;\n        return this;\n    };\n    iterator.prototype.notEqual = function (ite) {\n        return this._index != ite._index || this._vector != ite._vector;\n    };\n    return iterator;\n}());\nexports.iterator = iterator;\nvar $ = __importStar(__webpack_require__(/*! ./csmvector */ \"./Framework/src/type/csmvector.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.csmVector = $.csmVector;\n    Live2DCubismFramework.iterator = $.iterator;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3R5cGUvY3NtdmVjdG9yLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy90eXBlL2NzbXZlY3Rvci50cz83NjkwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbi8qKlxuICog44OZ44Kv44K/44O85Z6L77yI5Y+v5aSJ6YWN5YiX5Z6L77yJXG4gKi9cbmV4cG9ydCBjbGFzcyBjc21WZWN0b3I8VD4ge1xuICAvKipcbiAgICog5byV5pWw5LuY44GN44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqIEBwYXJhbSBpbmlpdGFsQ2FwYWNpdHkg5Yid5pyf5YyW5b6M44Gu44Kt44Oj44OR44K344OG44Kj44CC44OH44O844K/44K144Kk44K644GvX2NhcGFjaXR5ICogc2l6ZW9mKFQpXG4gICAqIEBwYXJhbSB6ZXJvQ2xlYXIgdHJ1ZeOBquOCieWIneacn+WMluaZguOBq+eiuuS/neOBl+OBn+mgmOWfn+OCkjDjgafln4vjgoHjgotcbiAgICovXG4gIGNvbnN0cnVjdG9yKGluaXRpYWxDYXBhY2l0eSA9IDApIHtcbiAgICBpZiAoaW5pdGlhbENhcGFjaXR5IDwgMSkge1xuICAgICAgdGhpcy5fcHRyID0gW107XG4gICAgICB0aGlzLl9jYXBhY2l0eSA9IDA7XG4gICAgICB0aGlzLl9zaXplID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcHRyID0gbmV3IEFycmF5KGluaXRpYWxDYXBhY2l0eSk7XG4gICAgICB0aGlzLl9jYXBhY2l0eSA9IGluaXRpYWxDYXBhY2l0eTtcbiAgICAgIHRoaXMuX3NpemUgPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgqTjg7Pjg4fjg4Pjgq/jgrnjgafmjIflrprjgZfjgZ/opoHntKDjgpLov5TjgZlcbiAgICovXG4gIHB1YmxpYyBhdChpbmRleDogbnVtYmVyKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuX3B0cltpbmRleF07XG4gIH1cblxuICAvKipcbiAgICog6KaB57Sg44KS44K744OD44OIXG4gICAqIEBwYXJhbSBpbmRleCDopoHntKDjgpLjgrvjg4Pjg4jjgZnjgovjgqTjg7Pjg4fjg4Pjgq/jgrlcbiAgICogQHBhcmFtIHZhbHVlIOOCu+ODg+ODiOOBmeOCi+imgee0oFxuICAgKi9cbiAgcHVibGljIHNldChpbmRleDogbnVtYmVyLCB2YWx1ZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX3B0cltpbmRleF0gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjgpLlj5blvpfjgZnjgotcbiAgICovXG4gIHB1YmxpYyBnZXQob2Zmc2V0ID0gMCk6IFRbXSB7XG4gICAgY29uc3QgcmV0OiBUW10gPSBuZXcgQXJyYXk8VD4oKTtcbiAgICBmb3IgKGxldCBpID0gb2Zmc2V0OyBpIDwgdGhpcy5fc2l6ZTsgaSsrKSB7XG4gICAgICByZXQucHVzaCh0aGlzLl9wdHJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIHB1c2hCYWNr5Yem55CG44CB44Kz44Oz44OG44OK44Gr5paw44Gf44Gq6KaB57Sg44KS6L+95Yqg44GZ44KLXG4gICAqIEBwYXJhbSB2YWx1ZSBQdXNoQmFja+WHpueQhuOBp+i/veWKoOOBmeOCi+WApFxuICAgKi9cbiAgcHVibGljIHB1c2hCYWNrKHZhbHVlOiBUKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NpemUgPj0gdGhpcy5fY2FwYWNpdHkpIHtcbiAgICAgIHRoaXMucHJlcGFyZUNhcGFjaXR5KFxuICAgICAgICB0aGlzLl9jYXBhY2l0eSA9PSAwID8gY3NtVmVjdG9yLnNfZGVmYXVsdFNpemUgOiB0aGlzLl9jYXBhY2l0eSAqIDJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fcHRyW3RoaXMuX3NpemUrK10gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjga7lhajopoHntKDjgpLop6PmlL7jgZnjgotcbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9wdHIubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zaXplID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjga7opoHntKDmlbDjgpLov5TjgZlcbiAgICogQHJldHVybiDjgrPjg7Pjg4bjg4rjga7opoHntKDmlbBcbiAgICovXG4gIHB1YmxpYyBnZXRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cblxuICAvKipcbiAgICog44Kz44Oz44OG44OK44Gu5YWo6KaB57Sg44Gr5a++44GX44Gm5Luj5YWl5Yem55CG44KS6KGM44GGXG4gICAqIEBwYXJhbSBuZXdTaXplIOS7o+WFpeWHpueQhuW+jOOBruOCteOCpOOCulxuICAgKiBAcGFyYW0gdmFsdWUg6KaB57Sg44Gr5Luj5YWl44GZ44KL5YCkXG4gICAqL1xuICBwdWJsaWMgYXNzaWduKG5ld1NpemU6IG51bWJlciwgdmFsdWU6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJTaXplID0gdGhpcy5fc2l6ZTtcblxuICAgIGlmIChjdXJTaXplIDwgbmV3U2l6ZSkge1xuICAgICAgdGhpcy5wcmVwYXJlQ2FwYWNpdHkobmV3U2l6ZSk7IC8vIGNhcGFjaXR55pu05pawXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTaXplOyBpKyspIHtcbiAgICAgIHRoaXMuX3B0cltpXSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHRoaXMuX3NpemUgPSBuZXdTaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCteOCpOOCuuWkieabtFxuICAgKi9cbiAgcHVibGljIHJlc2l6ZShuZXdTaXplOiBudW1iZXIsIHZhbHVlOiBUID0gbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU2l6ZShuZXdTaXplLCB2YWx1ZSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICog44K144Kk44K65aSJ5pu0XG4gICAqL1xuICBwdWJsaWMgdXBkYXRlU2l6ZShcbiAgICBuZXdTaXplOiBudW1iZXIsXG4gICAgdmFsdWU6IGFueSA9IG51bGwsXG4gICAgY2FsbFBsYWNlbWVudE5ldyA9IHRydWVcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgY3VyU2l6ZTogbnVtYmVyID0gdGhpcy5fc2l6ZTtcblxuICAgIGlmIChjdXJTaXplIDwgbmV3U2l6ZSkge1xuICAgICAgdGhpcy5wcmVwYXJlQ2FwYWNpdHkobmV3U2l6ZSk7IC8vIGNhcGFjaXR55pu05pawXG5cbiAgICAgIGlmIChjYWxsUGxhY2VtZW50TmV3KSB7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IHRoaXMuX3NpemU7IGkgPCBuZXdTaXplOyBpKyspIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIG5ld1xuICAgICAgICAgICAgdGhpcy5fcHRyW2ldID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuZXcgdmFsdWUoKSkpO1xuICAgICAgICAgIH0gLy8g44OX44Oq44Of44OG44Kj44OW5Z6L44Gq44Gu44Gn5YCk5rih44GXXG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wdHJbaV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IHRoaXMuX3NpemU7IGkgPCBuZXdTaXplOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9wdHJbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBuZXdTaXplIDw9IHRoaXMuX3NpemVcbiAgICAgIC8vLS0tXG4gICAgICBjb25zdCBzdWIgPSB0aGlzLl9zaXplIC0gbmV3U2l6ZTtcbiAgICAgIHRoaXMuX3B0ci5zcGxpY2UodGhpcy5fc2l6ZSAtIHN1Yiwgc3ViKTsgLy8g5LiN6KaB44Gq44Gu44Gn56C05qOE44GZ44KLXG4gICAgfVxuICAgIHRoaXMuX3NpemUgPSBuZXdTaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+ODhuODiuOBq+OCs+ODs+ODhuODiuimgee0oOOCkuaMv+WFpeOBmeOCi1xuICAgKiBAcGFyYW0gcG9zaXRpb24g5oy/5YWl44GZ44KL5L2N572uXG4gICAqIEBwYXJhbSBiZWdpbiDmjL/lhaXjgZnjgovjgrPjg7Pjg4bjg4rjga7plovlp4vkvY3nva5cbiAgICogQHBhcmFtIGVuZCDmjL/lhaXjgZnjgovjgrPjg7Pjg4bjg4rjga7ntYLnq6/kvY3nva5cbiAgICovXG4gIHB1YmxpYyBpbnNlcnQoXG4gICAgcG9zaXRpb246IGl0ZXJhdG9yPFQ+LFxuICAgIGJlZ2luOiBpdGVyYXRvcjxUPixcbiAgICBlbmQ6IGl0ZXJhdG9yPFQ+XG4gICk6IHZvaWQge1xuICAgIGxldCBkc3RTaTogbnVtYmVyID0gcG9zaXRpb24uX2luZGV4O1xuICAgIGNvbnN0IHNyY1NpOiBudW1iZXIgPSBiZWdpbi5faW5kZXg7XG4gICAgY29uc3Qgc3JjRWk6IG51bWJlciA9IGVuZC5faW5kZXg7XG5cbiAgICBjb25zdCBhZGRDb3VudDogbnVtYmVyID0gc3JjRWkgLSBzcmNTaTtcblxuICAgIHRoaXMucHJlcGFyZUNhcGFjaXR5KHRoaXMuX3NpemUgKyBhZGRDb3VudCk7XG5cbiAgICAvLyDmjL/lhaXnlKjjga7ml6LlrZjjg4fjg7zjgr/jgpLjgrfjg5Xjg4jjgZfjgabpmpnplpPjgpLkvZzjgotcbiAgICBjb25zdCBhZGRTaXplID0gdGhpcy5fc2l6ZSAtIGRzdFNpO1xuICAgIGlmIChhZGRTaXplID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRTaXplOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcHRyLnNwbGljZShkc3RTaSArIGksIDAsIG51bGwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IHNyY1NpOyBpIDwgc3JjRWk7IGkrKywgZHN0U2krKykge1xuICAgICAgdGhpcy5fcHRyW2RzdFNpXSA9IGJlZ2luLl92ZWN0b3IuX3B0cltpXTtcbiAgICB9XG5cbiAgICB0aGlzLl9zaXplID0gdGhpcy5fc2l6ZSArIGFkZENvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+ODhuODiuOBi+OCieOCpOODs+ODh+ODg+OCr+OCueOBp+aMh+WumuOBl+OBn+imgee0oOOCkuWJiumZpOOBmeOCi1xuICAgKiBAcGFyYW0gaW5kZXgg44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAqIEByZXR1cm4gdHJ1ZSDliYrpmaTlrp/ooYxcbiAgICogQHJldHVybiBmYWxzZSDliYrpmaTnr4Tlm7LlpJZcbiAgICovXG4gIHB1YmxpYyByZW1vdmUoaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmIChpbmRleCA8IDAgfHwgdGhpcy5fc2l6ZSA8PSBpbmRleCkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyDliYrpmaTnr4Tlm7LlpJZcbiAgICB9XG5cbiAgICB0aGlzLl9wdHIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAtLXRoaXMuX3NpemU7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjgYvjgonopoHntKDjgpLliYrpmaTjgZfjgabku5bjga7opoHntKDjgpLjgrfjg5Xjg4jjgZnjgotcbiAgICogQHBhcmFtIGl0ZSDliYrpmaTjgZnjgovopoHntKBcbiAgICovXG4gIHB1YmxpYyBlcmFzZShpdGU6IGl0ZXJhdG9yPFQ+KTogaXRlcmF0b3I8VD4ge1xuICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSBpdGUuX2luZGV4O1xuICAgIGlmIChpbmRleCA8IDAgfHwgdGhpcy5fc2l6ZSA8PSBpbmRleCkge1xuICAgICAgcmV0dXJuIGl0ZTsgLy8g5YmK6Zmk56+E5Zuy5aSWXG4gICAgfVxuXG4gICAgLy8g5YmK6ZmkXG4gICAgdGhpcy5fcHRyLnNwbGljZShpbmRleCwgMSk7XG4gICAgLS10aGlzLl9zaXplO1xuXG4gICAgY29uc3QgaXRlMjogaXRlcmF0b3I8VD4gPSBuZXcgaXRlcmF0b3I8VD4odGhpcywgaW5kZXgpOyAvLyDntYLkuoZcbiAgICByZXR1cm4gaXRlMjtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjga7jgq3jg6Pjg5Hjgrfjg4bjgqPjgpLnorrkv53jgZnjgotcbiAgICogQHBhcmFtIG5ld1NpemUg5paw44Gf44Gq44Kt44Oj44OR44K344OG44Kj44CC5byV5pWw44Gu5YCk44GM54++5Zyo44Gu44K144Kk44K65pyq5rqA44Gu5aC05ZCI44Gv5L2V44KC44GX44Gq44GELlxuICAgKi9cbiAgcHVibGljIHByZXBhcmVDYXBhY2l0eShuZXdTaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAobmV3U2l6ZSA+IHRoaXMuX2NhcGFjaXR5KSB7XG4gICAgICBpZiAodGhpcy5fY2FwYWNpdHkgPT0gMCkge1xuICAgICAgICB0aGlzLl9wdHIgPSBuZXcgQXJyYXkobmV3U2l6ZSk7XG4gICAgICAgIHRoaXMuX2NhcGFjaXR5ID0gbmV3U2l6ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3B0ci5sZW5ndGggPSBuZXdTaXplO1xuICAgICAgICB0aGlzLl9jYXBhY2l0eSA9IG5ld1NpemU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+ODhuODiuOBruWFiOmgreimgee0oOOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGJlZ2luKCk6IGl0ZXJhdG9yPFQ+IHtcbiAgICBjb25zdCBpdGU6IGl0ZXJhdG9yPFQ+ID1cbiAgICAgIHRoaXMuX3NpemUgPT0gMCA/IHRoaXMuZW5kKCkgOiBuZXcgaXRlcmF0b3I8VD4odGhpcywgMCk7XG4gICAgcmV0dXJuIGl0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjg4bjg4rjga7ntYLnq6/opoHntKDjgpLov5TjgZlcbiAgICovXG4gIHB1YmxpYyBlbmQoKTogaXRlcmF0b3I8VD4ge1xuICAgIGNvbnN0IGl0ZTogaXRlcmF0b3I8VD4gPSBuZXcgaXRlcmF0b3I8VD4odGhpcywgdGhpcy5fc2l6ZSk7XG4gICAgcmV0dXJuIGl0ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPZmZzZXQob2Zmc2V0OiBudW1iZXIpOiBjc21WZWN0b3I8VD4ge1xuICAgIGNvbnN0IG5ld1ZlY3RvciA9IG5ldyBjc21WZWN0b3I8VD4oKTtcbiAgICBuZXdWZWN0b3IuX3B0ciA9IHRoaXMuZ2V0KG9mZnNldCk7XG4gICAgbmV3VmVjdG9yLl9zaXplID0gdGhpcy5nZXQob2Zmc2V0KS5sZW5ndGg7XG4gICAgbmV3VmVjdG9yLl9jYXBhY2l0eSA9IHRoaXMuZ2V0KG9mZnNldCkubGVuZ3RoO1xuXG4gICAgcmV0dXJuIG5ld1ZlY3RvcjtcbiAgfVxuXG4gIF9wdHI6IFRbXTsgLy8g44Kz44Oz44OG44OK44Gu5YWI6aCt44Ki44OJ44Os44K5XG4gIF9zaXplOiBudW1iZXI7IC8vIOOCs+ODs+ODhuODiuOBruimgee0oOaVsFxuICBfY2FwYWNpdHk6IG51bWJlcjsgLy8g44Kz44Oz44OG44OK44Gu44Kt44Oj44OR44K344OG44KjXG5cbiAgc3RhdGljIHJlYWRvbmx5IHNfZGVmYXVsdFNpemUgPSAxMDsgLy8g44Kz44Oz44OG44OK5Yid5pyf5YyW44Gu44OH44OV44Kp44Or44OI44K144Kk44K6XG59XG5cbmV4cG9ydCBjbGFzcyBpdGVyYXRvcjxUPiB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih2PzogY3NtVmVjdG9yPFQ+LCBpbmRleD86IG51bWJlcikge1xuICAgIHRoaXMuX3ZlY3RvciA9IHYgIT0gdW5kZWZpbmVkID8gdiA6IG51bGw7XG4gICAgdGhpcy5faW5kZXggPSBpbmRleCAhPSB1bmRlZmluZWQgPyBpbmRleCA6IDA7XG4gIH1cblxuICAvKipcbiAgICog5Luj5YWlXG4gICAqL1xuICBwdWJsaWMgc2V0KGl0ZTogaXRlcmF0b3I8VD4pOiBpdGVyYXRvcjxUPiB7XG4gICAgdGhpcy5faW5kZXggPSBpdGUuX2luZGV4O1xuICAgIHRoaXMuX3ZlY3RvciA9IGl0ZS5fdmVjdG9yO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIOWJjee9ruOBjSsr5ryU566XXG4gICAqL1xuICBwdWJsaWMgcHJlSW5jcmVtZW50KCk6IGl0ZXJhdG9yPFQ+IHtcbiAgICArK3RoaXMuX2luZGV4O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIOWJjee9ruOBjS0t5ryU566XXG4gICAqL1xuICBwdWJsaWMgcHJlRGVjcmVtZW50KCk6IGl0ZXJhdG9yPFQ+IHtcbiAgICAtLXRoaXMuX2luZGV4O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIOW+jOe9ruOBjSsr5ryU566X5a2QXG4gICAqL1xuICBwdWJsaWMgaW5jcmVtZW50KCk6IGl0ZXJhdG9yPFQ+IHtcbiAgICBjb25zdCBpdGVvbGQgPSBuZXcgaXRlcmF0b3I8VD4odGhpcy5fdmVjdG9yLCB0aGlzLl9pbmRleCsrKTsgLy8g5Y+k44GE5YCk44KS5L+d5a2YXG4gICAgcmV0dXJuIGl0ZW9sZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvoznva7jgY0tLea8lOeul+WtkFxuICAgKi9cbiAgcHVibGljIGRlY3JlbWVudCgpOiBpdGVyYXRvcjxUPiB7XG4gICAgY29uc3QgaXRlb2xkID0gbmV3IGl0ZXJhdG9yPFQ+KHRoaXMuX3ZlY3RvciwgdGhpcy5faW5kZXgtLSk7IC8vIOWPpOOBhOWApOOCkuS/neWtmFxuICAgIHJldHVybiBpdGVvbGQ7XG4gIH1cblxuICAvKipcbiAgICogcHRyXG4gICAqL1xuICBwdWJsaWMgcHRyKCk6IFQge1xuICAgIHJldHVybiB0aGlzLl92ZWN0b3IuX3B0clt0aGlzLl9pbmRleF07XG4gIH1cblxuICAvKipcbiAgICogPea8lOeul+WtkOOBruOCquODvOODkOODvOODreODvOODiVxuICAgKi9cbiAgcHVibGljIHN1YnN0aXR1dGlvbihpdGU6IGl0ZXJhdG9yPFQ+KTogaXRlcmF0b3I8VD4ge1xuICAgIHRoaXMuX2luZGV4ID0gaXRlLl9pbmRleDtcbiAgICB0aGlzLl92ZWN0b3IgPSBpdGUuX3ZlY3RvcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiAhPea8lOeul+WtkOOBruOCquODvOODkOODvOODreODvOODiVxuICAgKi9cbiAgcHVibGljIG5vdEVxdWFsKGl0ZTogaXRlcmF0b3I8VD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faW5kZXggIT0gaXRlLl9pbmRleCB8fCB0aGlzLl92ZWN0b3IgIT0gaXRlLl92ZWN0b3I7XG4gIH1cblxuICBfaW5kZXg6IG51bWJlcjsgLy8g44Kz44Oz44OG44OK44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gIF92ZWN0b3I6IGNzbVZlY3RvcjxUPjsgLy8g44Kz44Oz44OG44OKXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2NzbXZlY3Rvcic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBMaXZlMkRDdWJpc21GcmFtZXdvcmsge1xuICBleHBvcnQgY29uc3QgY3NtVmVjdG9yID0gJC5jc21WZWN0b3I7XG4gIGV4cG9ydCB0eXBlIGNzbVZlY3RvcjxUPiA9ICQuY3NtVmVjdG9yPFQ+O1xuICBleHBvcnQgY29uc3QgaXRlcmF0b3IgPSAkLml0ZXJhdG9yO1xuICBleHBvcnQgdHlwZSBpdGVyYXRvcjxUPiA9ICQuaXRlcmF0b3I8VD47XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQTlQQTtBQWdRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUEzRUE7QUE4RUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/type/csmvector.ts\n");

/***/ }),

/***/ "./Framework/src/utils/cubismdebug.ts":
/*!********************************************!*\
  !*** ./Framework/src/utils/cubismdebug.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.CubismDebug = exports.CubismLogError = exports.CubismLogWarning = exports.CubismLogInfo = exports.CubismLogDebug = exports.CubismLogVerbose = exports.CSM_ASSERT = exports.CubismLogPrintIn = exports.CubismLogPrint = void 0;\nvar cubismframeworkconfig_1 = __webpack_require__(/*! ../cubismframeworkconfig */ \"./Framework/src/cubismframeworkconfig.ts\");\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nexports.CubismLogPrint = function (level, fmt, args) {\n    CubismDebug.print(level, '[CSM]' + fmt, args);\n};\nexports.CubismLogPrintIn = function (level, fmt, args) {\n    exports.CubismLogPrint(level, fmt + '\\n', args);\n};\nexports.CSM_ASSERT = function (expr) {\n    console.assert(expr);\n};\nif (cubismframeworkconfig_1.CSM_LOG_LEVEL <= cubismframeworkconfig_1.CSM_LOG_LEVEL_VERBOSE) {\n    exports.CubismLogVerbose = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Verbose, '[V]' + fmt, args);\n    };\n    exports.CubismLogDebug = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n    };\n    exports.CubismLogInfo = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Info, '[I]' + fmt, args);\n    };\n    exports.CubismLogWarning = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    exports.CubismLogError = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_DEBUG) {\n    exports.CubismLogDebug = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n    };\n    exports.CubismLogInfo = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Info, '[I]' + fmt, args);\n    };\n    exports.CubismLogWarning = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    exports.CubismLogError = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_INFO) {\n    exports.CubismLogInfo = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Info, '[I]' + fmt, args);\n    };\n    exports.CubismLogWarning = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    exports.CubismLogError = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_WARNING) {\n    exports.CubismLogWarning = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n    };\n    exports.CubismLogError = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nelse if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_ERROR) {\n    exports.CubismLogError = function (fmt) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        exports.CubismLogPrintIn(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n    };\n}\nvar CubismDebug = (function () {\n    function CubismDebug() {\n    }\n    CubismDebug.print = function (logLevel, format, args) {\n        if (logLevel < live2dcubismframework_1.CubismFramework.getLoggingLevel()) {\n            return;\n        }\n        var logPrint = live2dcubismframework_1.CubismFramework.coreLogFunction;\n        if (!logPrint)\n            return;\n        var buffer = format.replace(/\\{(\\d+)\\}/g, function (m, k) {\n            return args[k];\n        });\n        logPrint(buffer);\n    };\n    CubismDebug.dumpBytes = function (logLevel, data, length) {\n        for (var i = 0; i < length; i++) {\n            if (i % 16 == 0 && i > 0)\n                this.print(logLevel, '\\n');\n            else if (i % 8 == 0 && i > 0)\n                this.print(logLevel, '  ');\n            this.print(logLevel, '{0} ', [data[i] & 0xff]);\n        }\n        this.print(logLevel, '\\n');\n    };\n    return CubismDebug;\n}());\nexports.CubismDebug = CubismDebug;\nvar $ = __importStar(__webpack_require__(/*! ./cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismDebug = $.CubismDebug;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3V0aWxzL2N1YmlzbWRlYnVnLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vRnJhbWV3b3JrL3NyYy91dGlscy9jdWJpc21kZWJ1Zy50cz9mMGVlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7XG4gIENTTV9MT0dfTEVWRUwsXG4gIENTTV9MT0dfTEVWRUxfREVCVUcsXG4gIENTTV9MT0dfTEVWRUxfRVJST1IsXG4gIENTTV9MT0dfTEVWRUxfSU5GTyxcbiAgQ1NNX0xPR19MRVZFTF9WRVJCT1NFLFxuICBDU01fTE9HX0xFVkVMX1dBUk5JTkdcbn0gZnJvbSAnLi4vY3ViaXNtZnJhbWV3b3JrY29uZmlnJztcbmltcG9ydCB7IEN1YmlzbUZyYW1ld29yaywgTG9nTGV2ZWwgfSBmcm9tICcuLi9saXZlMmRjdWJpc21mcmFtZXdvcmsnO1xuXG5leHBvcnQgY29uc3QgQ3ViaXNtTG9nUHJpbnQgPSAobGV2ZWw6IExvZ0xldmVsLCBmbXQ6IHN0cmluZywgYXJnczogYW55W10pID0+IHtcbiAgQ3ViaXNtRGVidWcucHJpbnQobGV2ZWwsICdbQ1NNXScgKyBmbXQsIGFyZ3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IEN1YmlzbUxvZ1ByaW50SW4gPSAobGV2ZWw6IExvZ0xldmVsLCBmbXQ6IHN0cmluZywgYXJnczogYW55W10pID0+IHtcbiAgQ3ViaXNtTG9nUHJpbnQobGV2ZWwsIGZtdCArICdcXG4nLCBhcmdzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBDU01fQVNTRVJUID0gKGV4cHI6IGFueSkgPT4ge1xuICBjb25zb2xlLmFzc2VydChleHByKTtcbn07XG5cbmV4cG9ydCBsZXQgQ3ViaXNtTG9nVmVyYm9zZTogKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcbmV4cG9ydCBsZXQgQ3ViaXNtTG9nRGVidWc6IChmbXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5leHBvcnQgbGV0IEN1YmlzbUxvZ0luZm86IChmbXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5leHBvcnQgbGV0IEN1YmlzbUxvZ1dhcm5pbmc6IChmbXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5leHBvcnQgbGV0IEN1YmlzbUxvZ0Vycm9yOiAoZm10OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuXG5pZiAoQ1NNX0xPR19MRVZFTCA8PSBDU01fTE9HX0xFVkVMX1ZFUkJPU0UpIHtcbiAgQ3ViaXNtTG9nVmVyYm9zZSA9IChmbXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHtcbiAgICBDdWJpc21Mb2dQcmludEluKExvZ0xldmVsLkxvZ0xldmVsX1ZlcmJvc2UsICdbVl0nICsgZm10LCBhcmdzKTtcbiAgfTtcblxuICBDdWJpc21Mb2dEZWJ1ZyA9IChmbXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHtcbiAgICBDdWJpc21Mb2dQcmludEluKExvZ0xldmVsLkxvZ0xldmVsX0RlYnVnLCAnW0RdJyArIGZtdCwgYXJncyk7XG4gIH07XG5cbiAgQ3ViaXNtTG9nSW5mbyA9IChmbXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHtcbiAgICBDdWJpc21Mb2dQcmludEluKExvZ0xldmVsLkxvZ0xldmVsX0luZm8sICdbSV0nICsgZm10LCBhcmdzKTtcbiAgfTtcblxuICBDdWJpc21Mb2dXYXJuaW5nID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfV2FybmluZywgJ1tXXScgKyBmbXQsIGFyZ3MpO1xuICB9O1xuXG4gIEN1YmlzbUxvZ0Vycm9yID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfRXJyb3IsICdbRV0nICsgZm10LCBhcmdzKTtcbiAgfTtcbn0gZWxzZSBpZiAoQ1NNX0xPR19MRVZFTCA9PSBDU01fTE9HX0xFVkVMX0RFQlVHKSB7XG4gIEN1YmlzbUxvZ0RlYnVnID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfRGVidWcsICdbRF0nICsgZm10LCBhcmdzKTtcbiAgfTtcblxuICBDdWJpc21Mb2dJbmZvID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfSW5mbywgJ1tJXScgKyBmbXQsIGFyZ3MpO1xuICB9O1xuXG4gIEN1YmlzbUxvZ1dhcm5pbmcgPSAoZm10OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgQ3ViaXNtTG9nUHJpbnRJbihMb2dMZXZlbC5Mb2dMZXZlbF9XYXJuaW5nLCAnW1ddJyArIGZtdCwgYXJncyk7XG4gIH07XG5cbiAgQ3ViaXNtTG9nRXJyb3IgPSAoZm10OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgQ3ViaXNtTG9nUHJpbnRJbihMb2dMZXZlbC5Mb2dMZXZlbF9FcnJvciwgJ1tFXScgKyBmbXQsIGFyZ3MpO1xuICB9O1xufSBlbHNlIGlmIChDU01fTE9HX0xFVkVMID09IENTTV9MT0dfTEVWRUxfSU5GTykge1xuICBDdWJpc21Mb2dJbmZvID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfSW5mbywgJ1tJXScgKyBmbXQsIGFyZ3MpO1xuICB9O1xuXG4gIEN1YmlzbUxvZ1dhcm5pbmcgPSAoZm10OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgQ3ViaXNtTG9nUHJpbnRJbihMb2dMZXZlbC5Mb2dMZXZlbF9XYXJuaW5nLCAnW1ddJyArIGZtdCwgYXJncyk7XG4gIH07XG5cbiAgQ3ViaXNtTG9nRXJyb3IgPSAoZm10OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgQ3ViaXNtTG9nUHJpbnRJbihMb2dMZXZlbC5Mb2dMZXZlbF9FcnJvciwgJ1tFXScgKyBmbXQsIGFyZ3MpO1xuICB9O1xufSBlbHNlIGlmIChDU01fTE9HX0xFVkVMID09IENTTV9MT0dfTEVWRUxfV0FSTklORykge1xuICBDdWJpc21Mb2dXYXJuaW5nID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfV2FybmluZywgJ1tXXScgKyBmbXQsIGFyZ3MpO1xuICB9O1xuXG4gIEN1YmlzbUxvZ0Vycm9yID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfRXJyb3IsICdbRV0nICsgZm10LCBhcmdzKTtcbiAgfTtcbn0gZWxzZSBpZiAoQ1NNX0xPR19MRVZFTCA9PSBDU01fTE9HX0xFVkVMX0VSUk9SKSB7XG4gIEN1YmlzbUxvZ0Vycm9yID0gKGZtdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIEN1YmlzbUxvZ1ByaW50SW4oTG9nTGV2ZWwuTG9nTGV2ZWxfRXJyb3IsICdbRV0nICsgZm10LCBhcmdzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiDjg4fjg5Djg4PjgrDnlKjjga7jg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrnjgIJcbiAqIOODreOCsOOBruWHuuWKm+OAgeODkOOCpOODiOOBruODgOODs+ODl+OBquOBqVxuICovXG5leHBvcnQgY2xhc3MgQ3ViaXNtRGVidWcge1xuICAvKipcbiAgICog44Ot44Kw44KS5Ye65Yqb44GZ44KL44CC56ys5LiA5byV5pWw44Gr44Ot44Kw44Os44OZ44Or44KS6Kit5a6a44GZ44KL44CCXG4gICAqIEN1YmlzbUZyYW1ld29yay5pbml0aWFsaXplKCnmmYLjgavjgqrjg5fjgrfjg6fjg7PjgafoqK3lrprjgZXjgozjgZ/jg63jgrDlh7rlipvjg6zjg5njg6vjgpLkuIvlm57jgovloLTlkIjjga/jg63jgrDjgavlh7rjgZXjgarjgYTjgIJcbiAgICpcbiAgICogQHBhcmFtIGxvZ0xldmVsIOODreOCsOODrOODmeODq+OBruioreWumlxuICAgKiBAcGFyYW0gZm9ybWF0IOabuOW8j+S7mOOBjeaWh+Wtl+WIl1xuICAgKiBAcGFyYW0gYXJncyDlj6/lpInplbflvJXmlbBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJpbnQobG9nTGV2ZWw6IExvZ0xldmVsLCBmb3JtYXQ6IHN0cmluZywgYXJncz86IGFueVtdKTogdm9pZCB7XG4gICAgLy8g44Kq44OX44K344On44Oz44Gn6Kit5a6a44GV44KM44Gf44Ot44Kw5Ye65Yqb44Os44OZ44Or44KS5LiL5Zue44KL5aC05ZCI44Gv44Ot44Kw44Gr5Ye644GV44Gq44GEXG4gICAgaWYgKGxvZ0xldmVsIDwgQ3ViaXNtRnJhbWV3b3JrLmdldExvZ2dpbmdMZXZlbCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbG9nUHJpbnQ6IExpdmUyREN1YmlzbUNvcmUuY3NtTG9nRnVuY3Rpb24gPVxuICAgICAgQ3ViaXNtRnJhbWV3b3JrLmNvcmVMb2dGdW5jdGlvbjtcblxuICAgIGlmICghbG9nUHJpbnQpIHJldHVybjtcblxuICAgIGNvbnN0IGJ1ZmZlcjogc3RyaW5nID0gZm9ybWF0LnJlcGxhY2UoL1xceyhcXGQrKVxcfS9nLCAobSwgaykgPT4ge1xuICAgICAgcmV0dXJuIGFyZ3Nba107XG4gICAgfSk7XG4gICAgbG9nUHJpbnQoYnVmZmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjg7zjgr/jgYvjgonmjIflrprjgZfjgZ/plbfjgZXjgaDjgZHjg4Djg7Pjg5flh7rlipvjgZnjgovjgIJcbiAgICogQ3ViaXNtRnJhbWV3b3JrLmluaXRpYWxpemUoKeaZguOBq+OCquODl+OCt+ODp+ODs+OBp+ioreWumuOBleOCjOOBn+ODreOCsOWHuuWKm+ODrOODmeODq+OCkuS4i+WbnuOCi+WgtOWQiOOBr+ODreOCsOOBq+WHuuOBleOBquOBhOOAglxuICAgKlxuICAgKiBAcGFyYW0gbG9nTGV2ZWwg44Ot44Kw44Os44OZ44Or44Gu6Kit5a6aXG4gICAqIEBwYXJhbSBkYXRhIOODgOODs+ODl+OBmeOCi+ODh+ODvOOCv1xuICAgKiBAcGFyYW0gbGVuZ3RoIOODgOODs+ODl+OBmeOCi+mVt+OBlVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBkdW1wQnl0ZXMoXG4gICAgbG9nTGV2ZWw6IExvZ0xldmVsLFxuICAgIGRhdGE6IFVpbnQ4QXJyYXksXG4gICAgbGVuZ3RoOiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgJSAxNiA9PSAwICYmIGkgPiAwKSB0aGlzLnByaW50KGxvZ0xldmVsLCAnXFxuJyk7XG4gICAgICBlbHNlIGlmIChpICUgOCA9PSAwICYmIGkgPiAwKSB0aGlzLnByaW50KGxvZ0xldmVsLCAnICAnKTtcbiAgICAgIHRoaXMucHJpbnQobG9nTGV2ZWwsICd7MH0gJywgW2RhdGFbaV0gJiAweGZmXSk7XG4gICAgfVxuXG4gICAgdGhpcy5wcmludChsb2dMZXZlbCwgJ1xcbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIHByaXZhdGUg44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbn1cblxuLy8gTmFtZXNwYWNlIGRlZmluaXRpb24gZm9yIGNvbXBhdGliaWxpdHkuXG5pbXBvcnQgKiBhcyAkIGZyb20gJy4vY3ViaXNtZGVidWcnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbURlYnVnID0gJC5DdWJpc21EZWJ1ZztcbiAgZXhwb3J0IHR5cGUgQ3ViaXNtRGVidWcgPSAkLkN1YmlzbURlYnVnO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFtREE7QUFBQTtBQTFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQUE7QUFwREE7QUF1REE7QUFFQTtBQUFBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Framework/src/utils/cubismdebug.ts\n");

/***/ }),

/***/ "./Framework/src/utils/cubismjson.ts":
/*!*******************************************!*\
  !*** ./Framework/src/utils/cubismjson.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Live2DCubismFramework = exports.JsonMap = exports.JsonArray = exports.JsonNullvalue = exports.JsonError = exports.JsonString = exports.JsonBoolean = exports.JsonFloat = exports.CubismJson = exports.Value = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! ../live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar csmmap_1 = __webpack_require__(/*! ../type/csmmap */ \"./Framework/src/type/csmmap.ts\");\nvar csmstring_1 = __webpack_require__(/*! ../type/csmstring */ \"./Framework/src/type/csmstring.ts\");\nvar csmvector_1 = __webpack_require__(/*! ../type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! ./cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar CSM_JSON_ERROR_TYPE_MISMATCH = 'Error: type mismatch';\nvar CSM_JSON_ERROR_INDEX_OF_BOUNDS = 'Error: index out of bounds';\nvar Value = (function () {\n    function Value() {\n    }\n    Value.prototype.getRawString = function (defaultValue, indent) {\n        return this.getString(defaultValue, indent);\n    };\n    Value.prototype.toInt = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = 0; }\n        return defaultValue;\n    };\n    Value.prototype.toFloat = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = 0; }\n        return defaultValue;\n    };\n    Value.prototype.toBoolean = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = false; }\n        return defaultValue;\n    };\n    Value.prototype.getSize = function () {\n        return 0;\n    };\n    Value.prototype.getArray = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = null; }\n        return defaultValue;\n    };\n    Value.prototype.getVector = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = new csmvector_1.csmVector(); }\n        return defaultValue;\n    };\n    Value.prototype.getMap = function (defaultValue) {\n        return defaultValue;\n    };\n    Value.prototype.getValueByIndex = function (index) {\n        return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    };\n    Value.prototype.getValueByString = function (s) {\n        return Value.nullValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    };\n    Value.prototype.getKeys = function () {\n        return Value.s_dummyKeys;\n    };\n    Value.prototype.isError = function () {\n        return false;\n    };\n    Value.prototype.isNull = function () {\n        return false;\n    };\n    Value.prototype.isBool = function () {\n        return false;\n    };\n    Value.prototype.isFloat = function () {\n        return false;\n    };\n    Value.prototype.isString = function () {\n        return false;\n    };\n    Value.prototype.isArray = function () {\n        return false;\n    };\n    Value.prototype.isMap = function () {\n        return false;\n    };\n    Value.prototype.equals = function (value) {\n        return false;\n    };\n    Value.prototype.isStatic = function () {\n        return false;\n    };\n    Value.prototype.setErrorNotForClientCall = function (errorStr) {\n        return JsonError.errorValue;\n    };\n    Value.staticInitializeNotForClientCall = function () {\n        JsonBoolean.trueValue = new JsonBoolean(true);\n        JsonBoolean.falseValue = new JsonBoolean(false);\n        Value.errorValue = new JsonError('ERROR', true);\n        Value.nullValue = new JsonNullvalue();\n        Value.s_dummyKeys = new csmvector_1.csmVector();\n    };\n    Value.staticReleaseNotForClientCall = function () {\n        JsonBoolean.trueValue = null;\n        JsonBoolean.falseValue = null;\n        Value.errorValue = null;\n        Value.nullValue = null;\n        Value.s_dummyKeys = null;\n    };\n    return Value;\n}());\nexports.Value = Value;\nvar CubismJson = (function () {\n    function CubismJson(buffer, length) {\n        this._error = null;\n        this._lineCount = 0;\n        this._root = null;\n        if (buffer != undefined) {\n            this.parseBytes(buffer, length);\n        }\n    }\n    CubismJson.create = function (buffer, size) {\n        var json = new CubismJson();\n        var succeeded = json.parseBytes(buffer, size);\n        if (!succeeded) {\n            CubismJson.delete(json);\n            return null;\n        }\n        else {\n            return json;\n        }\n    };\n    CubismJson.delete = function (instance) {\n        instance = null;\n    };\n    CubismJson.prototype.getRoot = function () {\n        return this._root;\n    };\n    CubismJson.prototype.arrayBufferToString = function (buffer) {\n        var uint8Array = new Uint8Array(buffer);\n        var str = '';\n        for (var i = 0, len = uint8Array.length; i < len; ++i) {\n            str += '%' + this.pad(uint8Array[i].toString(16));\n        }\n        str = decodeURIComponent(str);\n        return str;\n    };\n    CubismJson.prototype.pad = function (n) {\n        return n.length < 2 ? '0' + n : n;\n    };\n    CubismJson.prototype.parseBytes = function (buffer, size) {\n        var endPos = new Array(1);\n        var decodeBuffer = this.arrayBufferToString(buffer);\n        this._root = this.parseValue(decodeBuffer, size, 0, endPos);\n        if (this._error) {\n            var strbuf = '\\0';\n            strbuf = 'Json parse error : @line ' + (this._lineCount + 1) + '\\n';\n            this._root = new JsonString(strbuf);\n            cubismdebug_1.CubismLogInfo('{0}', this._root.getRawString());\n            return false;\n        }\n        else if (this._root == null) {\n            this._root = new JsonError(new csmstring_1.csmString(this._error), false);\n            return false;\n        }\n        return true;\n    };\n    CubismJson.prototype.getParseError = function () {\n        return this._error;\n    };\n    CubismJson.prototype.checkEndOfFile = function () {\n        return this._root.getArray()[1].equals('EOF');\n    };\n    CubismJson.prototype.parseValue = function (buffer, length, begin, outEndPos) {\n        if (this._error)\n            return null;\n        var o = null;\n        var i = begin;\n        var f;\n        for (; i < length; i++) {\n            var c = buffer[i];\n            switch (c) {\n                case '-':\n                case '.':\n                case '0':\n                case '1':\n                case '2':\n                case '3':\n                case '4':\n                case '5':\n                case '6':\n                case '7':\n                case '8':\n                case '9': {\n                    var afterString = new Array(1);\n                    f = live2dcubismframework_1.strtod(buffer.slice(i), afterString);\n                    outEndPos[0] = buffer.indexOf(afterString[0]);\n                    return new JsonFloat(f);\n                }\n                case '\"':\n                    return new JsonString(this.parseString(buffer, length, i + 1, outEndPos));\n                case '[':\n                    o = this.parseArray(buffer, length, i + 1, outEndPos);\n                    return o;\n                case '{':\n                    o = this.parseObject(buffer, length, i + 1, outEndPos);\n                    return o;\n                case 'n':\n                    if (i + 3 < length) {\n                        o = new JsonNullvalue();\n                        outEndPos[0] = i + 4;\n                    }\n                    else {\n                        this._error = 'parse null';\n                    }\n                    return o;\n                case 't':\n                    if (i + 3 < length) {\n                        o = JsonBoolean.trueValue;\n                        outEndPos[0] = i + 4;\n                    }\n                    else {\n                        this._error = 'parse true';\n                    }\n                    return o;\n                case 'f':\n                    if (i + 4 < length) {\n                        o = JsonBoolean.falseValue;\n                        outEndPos[0] = i + 5;\n                    }\n                    else {\n                        this._error = \"illegal ',' position\";\n                    }\n                    return o;\n                case ',':\n                    this._error = \"illegal ',' position\";\n                    return null;\n                case ']':\n                    outEndPos[0] = i;\n                    return null;\n                case '\\n':\n                    this._lineCount++;\n                case ' ':\n                case '\\t':\n                case '\\r':\n                default:\n                    break;\n            }\n        }\n        this._error = 'illegal end of value';\n        return null;\n    };\n    CubismJson.prototype.parseString = function (string, length, begin, outEndPos) {\n        if (this._error)\n            return null;\n        var i = begin;\n        var c, c2;\n        var ret = new csmstring_1.csmString('');\n        var bufStart = begin;\n        for (; i < length; i++) {\n            c = string[i];\n            switch (c) {\n                case '\"': {\n                    outEndPos[0] = i + 1;\n                    ret.append(string.slice(bufStart), i - bufStart);\n                    return ret.s;\n                }\n                case '//': {\n                    i++;\n                    if (i - 1 > bufStart) {\n                        ret.append(string.slice(bufStart), i - bufStart);\n                    }\n                    bufStart = i + 1;\n                    if (i < length) {\n                        c2 = string[i];\n                        switch (c2) {\n                            case '\\\\':\n                                ret.expansion(1, '\\\\');\n                                break;\n                            case '\"':\n                                ret.expansion(1, '\"');\n                                break;\n                            case '/':\n                                ret.expansion(1, '/');\n                                break;\n                            case 'b':\n                                ret.expansion(1, '\\b');\n                                break;\n                            case 'f':\n                                ret.expansion(1, '\\f');\n                                break;\n                            case 'n':\n                                ret.expansion(1, '\\n');\n                                break;\n                            case 'r':\n                                ret.expansion(1, '\\r');\n                                break;\n                            case 't':\n                                ret.expansion(1, '\\t');\n                                break;\n                            case 'u':\n                                this._error = 'parse string/unicord escape not supported';\n                                break;\n                            default:\n                                break;\n                        }\n                    }\n                    else {\n                        this._error = 'parse string/escape error';\n                    }\n                }\n                default: {\n                    break;\n                }\n            }\n        }\n        this._error = 'parse string/illegal end';\n        return null;\n    };\n    CubismJson.prototype.parseObject = function (buffer, length, begin, outEndPos) {\n        if (this._error)\n            return null;\n        var ret = new JsonMap();\n        var key = '';\n        var i = begin;\n        var c = '';\n        var localRetEndPos2 = Array(1);\n        var ok = false;\n        for (; i < length; i++) {\n            FOR_LOOP: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case '\"':\n                        key = this.parseString(buffer, length, i + 1, localRetEndPos2);\n                        if (this._error) {\n                            return null;\n                        }\n                        i = localRetEndPos2[0];\n                        ok = true;\n                        break FOR_LOOP;\n                    case '}':\n                        outEndPos[0] = i + 1;\n                        return ret;\n                    case ':':\n                        this._error = \"illegal ':' position\";\n                        break;\n                    case '\\n':\n                        this._lineCount++;\n                    default:\n                        break;\n                }\n            }\n            if (!ok) {\n                this._error = 'key not found';\n                return null;\n            }\n            ok = false;\n            FOR_LOOP2: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case ':':\n                        ok = true;\n                        i++;\n                        break FOR_LOOP2;\n                    case '}':\n                        this._error = \"illegal '}' position\";\n                        break;\n                    case '\\n':\n                        this._lineCount++;\n                    default:\n                        break;\n                }\n            }\n            if (!ok) {\n                this._error = \"':' not found\";\n                return null;\n            }\n            var value = this.parseValue(buffer, length, i, localRetEndPos2);\n            if (this._error) {\n                return null;\n            }\n            i = localRetEndPos2[0];\n            ret.put(key, value);\n            FOR_LOOP3: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case ',':\n                        break FOR_LOOP3;\n                    case '}':\n                        outEndPos[0] = i + 1;\n                        return ret;\n                    case '\\n':\n                        this._lineCount++;\n                    default:\n                        break;\n                }\n            }\n        }\n        this._error = 'illegal end of perseObject';\n        return null;\n    };\n    CubismJson.prototype.parseArray = function (buffer, length, begin, outEndPos) {\n        if (this._error)\n            return null;\n        var ret = new JsonArray();\n        var i = begin;\n        var c;\n        var localRetEndpos2 = new Array(1);\n        for (; i < length; i++) {\n            var value = this.parseValue(buffer, length, i, localRetEndpos2);\n            if (this._error) {\n                return null;\n            }\n            i = localRetEndpos2[0];\n            if (value) {\n                ret.add(value);\n            }\n            FOR_LOOP: for (; i < length; i++) {\n                c = buffer[i];\n                switch (c) {\n                    case ',':\n                        break FOR_LOOP;\n                    case ']':\n                        outEndPos[0] = i + 1;\n                        return ret;\n                    case '\\n':\n                        ++this._lineCount;\n                    default:\n                        break;\n                }\n            }\n        }\n        ret = void 0;\n        this._error = 'illegal end of parseObject';\n        return null;\n    };\n    return CubismJson;\n}());\nexports.CubismJson = CubismJson;\nvar JsonFloat = (function (_super) {\n    __extends(JsonFloat, _super);\n    function JsonFloat(v) {\n        var _this = _super.call(this) || this;\n        _this._value = v;\n        return _this;\n    }\n    JsonFloat.prototype.isFloat = function () {\n        return true;\n    };\n    JsonFloat.prototype.getString = function (defaultValue, indent) {\n        var strbuf = '\\0';\n        this._value = parseFloat(strbuf);\n        this._stringBuffer = strbuf;\n        return this._stringBuffer;\n    };\n    JsonFloat.prototype.toInt = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = 0; }\n        return parseInt(this._value.toString());\n    };\n    JsonFloat.prototype.toFloat = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = 0.0; }\n        return this._value;\n    };\n    JsonFloat.prototype.equals = function (value) {\n        if ('number' === typeof value) {\n            if (Math.round(value)) {\n                return false;\n            }\n            else {\n                return value == this._value;\n            }\n        }\n        return false;\n    };\n    return JsonFloat;\n}(Value));\nexports.JsonFloat = JsonFloat;\nvar JsonBoolean = (function (_super) {\n    __extends(JsonBoolean, _super);\n    function JsonBoolean(v) {\n        var _this = _super.call(this) || this;\n        _this._boolValue = v;\n        return _this;\n    }\n    JsonBoolean.prototype.isBool = function () {\n        return true;\n    };\n    JsonBoolean.prototype.toBoolean = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = false; }\n        return this._boolValue;\n    };\n    JsonBoolean.prototype.getString = function (defaultValue, indent) {\n        this._stringBuffer = this._boolValue ? 'true' : 'false';\n        return this._stringBuffer;\n    };\n    JsonBoolean.prototype.equals = function (value) {\n        if ('boolean' === typeof value) {\n            return value == this._boolValue;\n        }\n        return false;\n    };\n    JsonBoolean.prototype.isStatic = function () {\n        return true;\n    };\n    return JsonBoolean;\n}(Value));\nexports.JsonBoolean = JsonBoolean;\nvar JsonString = (function (_super) {\n    __extends(JsonString, _super);\n    function JsonString(s) {\n        var _this = _super.call(this) || this;\n        if ('string' === typeof s) {\n            _this._stringBuffer = s;\n        }\n        if (s instanceof csmstring_1.csmString) {\n            _this._stringBuffer = s.s;\n        }\n        return _this;\n    }\n    JsonString.prototype.isString = function () {\n        return true;\n    };\n    JsonString.prototype.getString = function (defaultValue, indent) {\n        return this._stringBuffer;\n    };\n    JsonString.prototype.equals = function (value) {\n        if ('string' === typeof value) {\n            return this._stringBuffer == value;\n        }\n        if (value instanceof csmstring_1.csmString) {\n            return this._stringBuffer == value.s;\n        }\n        return false;\n    };\n    return JsonString;\n}(Value));\nexports.JsonString = JsonString;\nvar JsonError = (function (_super) {\n    __extends(JsonError, _super);\n    function JsonError(s, isStatic) {\n        var _this = this;\n        if ('string' === typeof s) {\n            _this = _super.call(this, s) || this;\n        }\n        else {\n            _this = _super.call(this, s) || this;\n        }\n        _this._isStatic = isStatic;\n        return _this;\n    }\n    JsonError.prototype.isStatic = function () {\n        return this._isStatic;\n    };\n    JsonError.prototype.setErrorNotForClientCall = function (s) {\n        this._stringBuffer = s;\n        return this;\n    };\n    JsonError.prototype.isError = function () {\n        return true;\n    };\n    return JsonError;\n}(JsonString));\nexports.JsonError = JsonError;\nvar JsonNullvalue = (function (_super) {\n    __extends(JsonNullvalue, _super);\n    function JsonNullvalue() {\n        var _this = _super.call(this) || this;\n        _this._stringBuffer = 'NullValue';\n        return _this;\n    }\n    JsonNullvalue.prototype.isNull = function () {\n        return true;\n    };\n    JsonNullvalue.prototype.getString = function (defaultValue, indent) {\n        return this._stringBuffer;\n    };\n    JsonNullvalue.prototype.isStatic = function () {\n        return true;\n    };\n    JsonNullvalue.prototype.setErrorNotForClientCall = function (s) {\n        this._stringBuffer = s;\n        return JsonError.nullValue;\n    };\n    return JsonNullvalue;\n}(Value));\nexports.JsonNullvalue = JsonNullvalue;\nvar JsonArray = (function (_super) {\n    __extends(JsonArray, _super);\n    function JsonArray() {\n        var _this = _super.call(this) || this;\n        _this._array = new csmvector_1.csmVector();\n        return _this;\n    }\n    JsonArray.prototype.release = function () {\n        for (var ite = this._array.begin(); ite.notEqual(this._array.end()); ite.preIncrement()) {\n            var v = ite.ptr();\n            if (v && !v.isStatic()) {\n                v = void 0;\n                v = null;\n            }\n        }\n    };\n    JsonArray.prototype.isArray = function () {\n        return true;\n    };\n    JsonArray.prototype.getValueByIndex = function (index) {\n        if (index < 0 || this._array.getSize() <= index) {\n            return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_INDEX_OF_BOUNDS);\n        }\n        var v = this._array.at(index);\n        if (v == null) {\n            return Value.nullValue;\n        }\n        return v;\n    };\n    JsonArray.prototype.getValueByString = function (s) {\n        return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    };\n    JsonArray.prototype.getString = function (defaultValue, indent) {\n        var stringBuffer = indent + '[\\n';\n        for (var ite = this._array.begin(); ite.notEqual(this._array.end()); ite.increment()) {\n            var v = ite.ptr();\n            this._stringBuffer += indent + '' + v.getString(indent + ' ') + '\\n';\n        }\n        this._stringBuffer = stringBuffer + indent + ']\\n';\n        return this._stringBuffer;\n    };\n    JsonArray.prototype.add = function (v) {\n        this._array.pushBack(v);\n    };\n    JsonArray.prototype.getVector = function (defaultValue) {\n        if (defaultValue === void 0) { defaultValue = null; }\n        return this._array;\n    };\n    JsonArray.prototype.getSize = function () {\n        return this._array.getSize();\n    };\n    return JsonArray;\n}(Value));\nexports.JsonArray = JsonArray;\nvar JsonMap = (function (_super) {\n    __extends(JsonMap, _super);\n    function JsonMap() {\n        var _this = _super.call(this) || this;\n        _this._map = new csmmap_1.csmMap();\n        return _this;\n    }\n    JsonMap.prototype.release = function () {\n        var ite = this._map.begin();\n        while (ite.notEqual(this._map.end())) {\n            var v = ite.ptr().second;\n            if (v && !v.isStatic()) {\n                v = void 0;\n                v = null;\n            }\n            ite.preIncrement();\n        }\n    };\n    JsonMap.prototype.isMap = function () {\n        return true;\n    };\n    JsonMap.prototype.getValueByString = function (s) {\n        if (s instanceof csmstring_1.csmString) {\n            var ret = this._map.getValue(s.s);\n            if (ret == null) {\n                return Value.nullValue;\n            }\n            return ret;\n        }\n        for (var iter = this._map.begin(); iter.notEqual(this._map.end()); iter.preIncrement()) {\n            if (iter.ptr().first == s) {\n                if (iter.ptr().second == null) {\n                    return Value.nullValue;\n                }\n                return iter.ptr().second;\n            }\n        }\n        return Value.nullValue;\n    };\n    JsonMap.prototype.getValueByIndex = function (index) {\n        return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n    };\n    JsonMap.prototype.getString = function (defaultValue, indent) {\n        this._stringBuffer = indent + '{\\n';\n        var ite = this._map.begin();\n        while (ite.notEqual(this._map.end())) {\n            var key = ite.ptr().first;\n            var v = ite.ptr().second;\n            this._stringBuffer +=\n                indent + ' ' + key + ' : ' + v.getString(indent + '   ') + ' \\n';\n            ite.preIncrement();\n        }\n        this._stringBuffer += indent + '}\\n';\n        return this._stringBuffer;\n    };\n    JsonMap.prototype.getMap = function (defaultValue) {\n        return this._map;\n    };\n    JsonMap.prototype.put = function (key, v) {\n        this._map.setValue(key, v);\n    };\n    JsonMap.prototype.getKeys = function () {\n        if (!this._keys) {\n            this._keys = new csmvector_1.csmVector();\n            var ite = this._map.begin();\n            while (ite.notEqual(this._map.end())) {\n                var key = ite.ptr().first;\n                this._keys.pushBack(key);\n                ite.preIncrement();\n            }\n        }\n        return this._keys;\n    };\n    JsonMap.prototype.getSize = function () {\n        return this._keys.getSize();\n    };\n    return JsonMap;\n}(Value));\nexports.JsonMap = JsonMap;\nvar $ = __importStar(__webpack_require__(/*! ./cubismjson */ \"./Framework/src/utils/cubismjson.ts\"));\nvar Live2DCubismFramework;\n(function (Live2DCubismFramework) {\n    Live2DCubismFramework.CubismJson = $.CubismJson;\n    Live2DCubismFramework.JsonArray = $.JsonArray;\n    Live2DCubismFramework.JsonBoolean = $.JsonBoolean;\n    Live2DCubismFramework.JsonError = $.JsonError;\n    Live2DCubismFramework.JsonFloat = $.JsonFloat;\n    Live2DCubismFramework.JsonMap = $.JsonMap;\n    Live2DCubismFramework.JsonNullvalue = $.JsonNullvalue;\n    Live2DCubismFramework.JsonString = $.JsonString;\n    Live2DCubismFramework.Value = $.Value;\n})(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9GcmFtZXdvcmsvc3JjL3V0aWxzL2N1YmlzbWpzb24udHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9GcmFtZXdvcmsvc3JjL3V0aWxzL2N1YmlzbWpzb24udHM/YjE5NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQgeyBzdHJ0b2QgfSBmcm9tICcuLi9saXZlMmRjdWJpc21mcmFtZXdvcmsnO1xuaW1wb3J0IHsgY3NtTWFwLCBpdGVyYXRvciBhcyBjc21NYXBfaXRlcmF0b3IgfSBmcm9tICcuLi90eXBlL2NzbW1hcCc7XG5pbXBvcnQgeyBjc21TdHJpbmcgfSBmcm9tICcuLi90eXBlL2NzbXN0cmluZyc7XG5pbXBvcnQgeyBjc21WZWN0b3IsIGl0ZXJhdG9yIGFzIGNzbVZlY3Rvcl9pdGVyYXRvciB9IGZyb20gJy4uL3R5cGUvY3NtdmVjdG9yJztcbmltcG9ydCB7IEN1YmlzbUxvZ0luZm8gfSBmcm9tICcuL2N1YmlzbWRlYnVnJztcblxuLy8gU3RhdGljSW5pdGlhbGl6ZU5vdEZvckNsaWVudENhbGwoKeOBp+WIneacn+WMluOBmeOCi1xuY29uc3QgQ1NNX0pTT05fRVJST1JfVFlQRV9NSVNNQVRDSCA9ICdFcnJvcjogdHlwZSBtaXNtYXRjaCc7XG5jb25zdCBDU01fSlNPTl9FUlJPUl9JTkRFWF9PRl9CT1VORFMgPSAnRXJyb3I6IGluZGV4IG91dCBvZiBib3VuZHMnO1xuXG4vKipcbiAqIOODkeODvOOCueOBl+OBn0pTT07jgqjjg6zjg6Hjg7Pjg4jjga7opoHntKDjga7ln7rlupXjgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFZhbHVlIHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICog6KaB57Sg44KS5paH5a2X5YiX5Z6L44Gn6L+U44GZKGNzbVN0cmluZ+WeiylcbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRTdHJpbmcoZGVmYXVsdFZhbHVlPzogc3RyaW5nLCBpbmRlbnQ/OiBzdHJpbmcpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuaWh+Wtl+WIl+Wei+OBp+i/lOOBmShzdHJpbmcpXG4gICAqL1xuICBwdWJsaWMgZ2V0UmF3U3RyaW5nKGRlZmF1bHRWYWx1ZT86IHN0cmluZywgaW5kZW50Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdHJpbmcoZGVmYXVsdFZhbHVlLCBpbmRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuaVsOWApOWei+OBp+i/lOOBmShudW1iZXIpXG4gICAqL1xuICBwdWJsaWMgdG9JbnQoZGVmYXVsdFZhbHVlID0gMCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpLmlbDlgKTlnovjgafov5TjgZkobnVtYmVyKVxuICAgKi9cbiAgcHVibGljIHRvRmxvYXQoZGVmYXVsdFZhbHVlID0gMCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpLnnJ/lgb3lgKTjgafov5TjgZkoYm9vbGVhbilcbiAgICovXG4gIHB1YmxpYyB0b0Jvb2xlYW4oZGVmYXVsdFZhbHVlID0gZmFsc2UpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCteOCpOOCuuOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpLphY3liJfjgafov5TjgZkoVmFsdWVbXSlcbiAgICovXG4gIHB1YmxpYyBnZXRBcnJheShkZWZhdWx0VmFsdWU6IFZhbHVlW10gPSBudWxsKTogVmFsdWVbXSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpLjgrPjg7Pjg4bjg4rjgafov5TjgZkoYXJyYXkpXG4gICAqL1xuICBwdWJsaWMgZ2V0VmVjdG9yKGRlZmF1bHRWYWx1ZSA9IG5ldyBjc21WZWN0b3I8VmFsdWU+KCkpOiBjc21WZWN0b3I8VmFsdWU+IHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuODnuODg+ODl+OBp+i/lOOBmShjc21NYXA8Y3NtU3RyaW5nLCBWYWx1ZT4pXG4gICAqL1xuICBwdWJsaWMgZ2V0TWFwKGRlZmF1bHRWYWx1ZT86IGNzbU1hcDxzdHJpbmcsIFZhbHVlPik6IGNzbU1hcDxzdHJpbmcsIFZhbHVlPiB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmt7vlrZfmvJTnrpflrZBbaW5kZXhdXG4gICAqL1xuICBwdWJsaWMgZ2V0VmFsdWVCeUluZGV4KGluZGV4OiBudW1iZXIpOiBWYWx1ZSB7XG4gICAgcmV0dXJuIFZhbHVlLmVycm9yVmFsdWUuc2V0RXJyb3JOb3RGb3JDbGllbnRDYWxsKFxuICAgICAgQ1NNX0pTT05fRVJST1JfVFlQRV9NSVNNQVRDSFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5re75a2X5ryU566X5a2QW3N0cmluZyB8IGNzbVN0cmluZ11cbiAgICovXG4gIHB1YmxpYyBnZXRWYWx1ZUJ5U3RyaW5nKHM6IHN0cmluZyB8IGNzbVN0cmluZyk6IFZhbHVlIHtcbiAgICByZXR1cm4gVmFsdWUubnVsbFZhbHVlLnNldEVycm9yTm90Rm9yQ2xpZW50Q2FsbChcbiAgICAgIENTTV9KU09OX0VSUk9SX1RZUEVfTUlTTUFUQ0hcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOODnuODg+ODl+OBruOCreODvOS4gOimp+OCkuOCs+ODs+ODhuODiuOBp+i/lOOBmVxuICAgKlxuICAgKiBAcmV0dXJuIOODnuODg+ODl+OBruOCreODvOOBruS4gOimp1xuICAgKi9cbiAgcHVibGljIGdldEtleXMoKTogY3NtVmVjdG9yPHN0cmluZz4ge1xuICAgIHJldHVybiBWYWx1ZS5zX2R1bW15S2V5cztcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjOOCqOODqeODvOWApOOBquOCiXRydWVcbiAgICovXG4gIHB1YmxpYyBpc0Vycm9yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjG51bGzjgarjgol0cnVlXG4gICAqL1xuICBwdWJsaWMgaXNOdWxsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjOecn+WBveWApOOBquOCiXRydWVcbiAgICovXG4gIHB1YmxpYyBpc0Jvb2woKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVl44Gu56iu6aGe44GM5pWw5YCk5Z6L44Gq44KJdHJ1ZVxuICAgKi9cbiAgcHVibGljIGlzRmxvYXQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVl44Gu56iu6aGe44GM5paH5a2X5YiX44Gq44KJdHJ1ZVxuICAgKi9cbiAgcHVibGljIGlzU3RyaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjOmFjeWIl+OBquOCiXRydWVcbiAgICovXG4gIHB1YmxpYyBpc0FycmF5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjOODnuODg+ODl+Wei+OBquOCiXRydWVcbiAgICovXG4gIHB1YmxpYyBpc01hcCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICog5byV5pWw44Gu5YCk44Go562J44GX44GR44KM44GwdHJ1ZVxuICAgKi9cbiAgcHVibGljIGVxdWFscyh2YWx1ZTogY3NtU3RyaW5nKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogYm9vbGVhbik6IGJvb2xlYW47XG4gIHB1YmxpYyBlcXVhbHModmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBruWApOOBjOmdmeeahOOBquOCiXRydWXjgIHpnZnnmoTjgarjgonop6PmlL7jgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc1N0YXRpYygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogVmFsdWXjgavjgqjjg6njg7zlgKTjgpLjgrvjg4Pjg4jjgZnjgotcbiAgICovXG4gIHB1YmxpYyBzZXRFcnJvck5vdEZvckNsaWVudENhbGwoZXJyb3JTdHI6IHN0cmluZyk6IFZhbHVlIHtcbiAgICByZXR1cm4gSnNvbkVycm9yLmVycm9yVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog5Yid5pyf5YyW55So44Oh44K944OD44OJXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHN0YXRpY0luaXRpYWxpemVOb3RGb3JDbGllbnRDYWxsKCk6IHZvaWQge1xuICAgIEpzb25Cb29sZWFuLnRydWVWYWx1ZSA9IG5ldyBKc29uQm9vbGVhbih0cnVlKTtcbiAgICBKc29uQm9vbGVhbi5mYWxzZVZhbHVlID0gbmV3IEpzb25Cb29sZWFuKGZhbHNlKTtcbiAgICBWYWx1ZS5lcnJvclZhbHVlID0gbmV3IEpzb25FcnJvcignRVJST1InLCB0cnVlKTtcbiAgICBWYWx1ZS5udWxsVmFsdWUgPSBuZXcgSnNvbk51bGx2YWx1ZSgpO1xuICAgIFZhbHVlLnNfZHVtbXlLZXlzID0gbmV3IGNzbVZlY3RvcjxzdHJpbmc+KCk7XG4gIH1cblxuICAvKipcbiAgICog44Oq44Oq44O844K555So44Oh44K944OD44OJXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHN0YXRpY1JlbGVhc2VOb3RGb3JDbGllbnRDYWxsKCk6IHZvaWQge1xuICAgIEpzb25Cb29sZWFuLnRydWVWYWx1ZSA9IG51bGw7XG4gICAgSnNvbkJvb2xlYW4uZmFsc2VWYWx1ZSA9IG51bGw7XG4gICAgVmFsdWUuZXJyb3JWYWx1ZSA9IG51bGw7XG4gICAgVmFsdWUubnVsbFZhbHVlID0gbnVsbDtcbiAgICBWYWx1ZS5zX2R1bW15S2V5cyA9IG51bGw7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3N0cmluZ0J1ZmZlcjogc3RyaW5nOyAvLyDmloflrZfliJfjg5Djg4Pjg5XjgqFcblxuICBwcml2YXRlIHN0YXRpYyBzX2R1bW15S2V5czogY3NtVmVjdG9yPHN0cmluZz47IC8vIOODgOODn+ODvOOCreODvFxuXG4gIHB1YmxpYyBzdGF0aWMgZXJyb3JWYWx1ZTogVmFsdWU7IC8vIOS4gOaZgueahOOBqui/lOOCiuWApOOBqOOBl+OBpui/lOOBmeOCqOODqeODvOOAgiBDdWJpc21GcmFtZXdvcms6OkRpc3Bvc2XjgZnjgovjgb7jgafjga9kZWxldGXjgZfjgarjgYRcbiAgcHVibGljIHN0YXRpYyBudWxsVmFsdWU6IFZhbHVlOyAvLyDkuIDmmYLnmoTjgarov5TjgorlgKTjgajjgZfjgabov5TjgZlOVUxM44CCICAgQ3ViaXNtRnJhbWV3b3JrOjpEaXNwb3Nl44GZ44KL44G+44Gn44GvZGVsZXRl44GX44Gq44GEXG59XG5cbi8qKlxuICogQXNjaWnmloflrZfjga7jgb/lr77lv5zjgZfjgZ/mnIDlsI/pmZDjga7ou73ph49KU09O44OR44O844K144CCXG4gKiDku5Xmp5jjga9KU09O44Gu44K144OW44K744OD44OI44Go44Gq44KL44CCXG4gKiDoqK3lrprjg5XjgqHjgqTjg6sobW9kZWwzLmpzb24p44Gq44Gp44Gu44Ot44O844OJ55SoXG4gKlxuICogW+acquWvvuW/nOmgheebrl1cbiAqIOODu+aXpeacrOiqnuOBquOBqeOBrumdnkFTQ0lJ5paH5a2XXG4gKiDjg7tl44Gr44KI44KL5oyH5pWw6KGo54++XG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJpc21Kc29uIHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKGJ1ZmZlcj86IEFycmF5QnVmZmVyLCBsZW5ndGg/OiBudW1iZXIpIHtcbiAgICB0aGlzLl9lcnJvciA9IG51bGw7XG4gICAgdGhpcy5fbGluZUNvdW50ID0gMDtcbiAgICB0aGlzLl9yb290ID0gbnVsbDtcblxuICAgIGlmIChidWZmZXIgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnBhcnNlQnl0ZXMoYnVmZmVyLCBsZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjg5DjgqTjg4jjg4fjg7zjgr/jgYvjgonnm7TmjqXjg63jg7zjg4njgZfjgabjg5Hjg7zjgrnjgZnjgotcbiAgICpcbiAgICogQHBhcmFtIGJ1ZmZlciDjg5Djg4Pjg5XjgqFcbiAgICogQHBhcmFtIHNpemUg44OQ44OD44OV44Kh44K144Kk44K6XG4gICAqIEByZXR1cm4gQ3ViaXNtSnNvbuOCr+ODqeOCueOBruOCpOODs+OCueOCv+ODs+OCueOAguWkseaVl+OBl+OBn+OCiU5VTExcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIHNpemU6IG51bWJlcikge1xuICAgIGNvbnN0IGpzb24gPSBuZXcgQ3ViaXNtSnNvbigpO1xuICAgIGNvbnN0IHN1Y2NlZWRlZDogYm9vbGVhbiA9IGpzb24ucGFyc2VCeXRlcyhidWZmZXIsIHNpemUpO1xuXG4gICAgaWYgKCFzdWNjZWVkZWQpIHtcbiAgICAgIEN1YmlzbUpzb24uZGVsZXRlKGpzb24pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjgrnjgZfjgZ9KU09O44Kq44OW44K444Kn44Kv44OI44Gu6Kej5pS+5Yem55CGXG4gICAqXG4gICAqIEBwYXJhbSBpbnN0YW5jZSBDdWJpc21Kc29u44Kv44Op44K544Gu44Kk44Oz44K544K/44Oz44K5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGRlbGV0ZShpbnN0YW5jZTogQ3ViaXNtSnNvbikge1xuICAgIGluc3RhbmNlID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Hjg7zjgrnjgZfjgZ9KU09O44Gu44Or44O844OI6KaB57Sg44KS6L+U44GZXG4gICAqL1xuICBwdWJsaWMgZ2V0Um9vdCgpOiBWYWx1ZSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3Q7XG4gIH1cblxuICAvKipcbiAgICogIFVuaWNvZGXjga7jg5DjgqTjg4rjg6rjgpJTdHJpbmfjgavlpInmj5tcbiAgICpcbiAgICogQHBhcmFtIGJ1ZmZlciDlpInmj5vjgZnjgovjg5DjgqTjg4rjg6rjg4fjg7zjgr9cbiAgICogQHJldHVybiDlpInmj5vlvozjga7mloflrZfliJdcbiAgICovXG4gIHB1YmxpYyBhcnJheUJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVpbnQ4QXJyYXk6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIGxldCBzdHIgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW46IG51bWJlciA9IHVpbnQ4QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHN0ciArPSAnJScgKyB0aGlzLnBhZCh1aW50OEFycmF5W2ldLnRvU3RyaW5nKDE2KSk7XG4gICAgfVxuXG4gICAgc3RyID0gZGVjb2RlVVJJQ29tcG9uZW50KHN0cik7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqjjg7PjgrPjg7zjg4njgIHjg5Hjg4fjgqPjg7PjgrBcbiAgICovXG4gIHByaXZhdGUgcGFkKG46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG4ubGVuZ3RoIDwgMiA/ICcwJyArIG4gOiBuO1xuICB9XG5cbiAgLyoqXG4gICAqIEpTT07jga7jg5Hjg7zjgrnjgpLlrp/ooYzjgZnjgotcbiAgICogQHBhcmFtIGJ1ZmZlciAgICDjg5Hjg7zjgrnlr77osaHjga7jg4fjg7zjgr/jg5DjgqTjg4hcbiAgICogQHBhcmFtIHNpemUgICAgICDjg4fjg7zjgr/jg5DjgqTjg4jjga7jgrXjgqTjgrpcbiAgICogcmV0dXJuIHRydWUgOiDmiJDlip9cbiAgICogcmV0dXJuIGZhbHNlOiDlpLHmlZdcbiAgICovXG4gIHB1YmxpYyBwYXJzZUJ5dGVzKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIHNpemU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGVuZFBvczogbnVtYmVyW10gPSBuZXcgQXJyYXkoMSk7IC8vIOWPgueFp+a4oeOBl+OBq+OBmeOCi+OBn+OCgemFjeWIl1xuICAgIGNvbnN0IGRlY29kZUJ1ZmZlcjogc3RyaW5nID0gdGhpcy5hcnJheUJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcik7XG4gICAgdGhpcy5fcm9vdCA9IHRoaXMucGFyc2VWYWx1ZShkZWNvZGVCdWZmZXIsIHNpemUsIDAsIGVuZFBvcyk7XG5cbiAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgIGxldCBzdHJidWYgPSAnXFwwJztcbiAgICAgIHN0cmJ1ZiA9ICdKc29uIHBhcnNlIGVycm9yIDogQGxpbmUgJyArICh0aGlzLl9saW5lQ291bnQgKyAxKSArICdcXG4nO1xuICAgICAgdGhpcy5fcm9vdCA9IG5ldyBKc29uU3RyaW5nKHN0cmJ1Zik7XG5cbiAgICAgIEN1YmlzbUxvZ0luZm8oJ3swfScsIHRoaXMuX3Jvb3QuZ2V0UmF3U3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fcm9vdCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9yb290ID0gbmV3IEpzb25FcnJvcihuZXcgY3NtU3RyaW5nKHRoaXMuX2Vycm9yKSwgZmFsc2UpOyAvLyByb29044Gv6Kej5pS+44GV44KM44KL44Gu44Gn44Ko44Op44O844Kq44OW44K444Kn44Kv44OI44KS5Yil6YCU5L2c5oiQ44GZ44KLXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeODvOOCueaZguOBruOCqOODqeODvOWApOOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldFBhcnNlRXJyb3IoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICog44Or44O844OI6KaB57Sg44Gu5qyh44Gu6KaB57Sg44GM44OV44Kh44Kk44Or44Gu57WC56uv44Gg44Gj44Gf44KJdHJ1ZeOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGNoZWNrRW5kT2ZGaWxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9yb290LmdldEFycmF5KClbMV0uZXF1YWxzKCdFT0YnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBKU09O44Ko44Os44Oh44Oz44OI44GL44KJVmFsdWUoZmxvYXQsU3RyaW5nLFZhbHVlKixBcnJheSxudWxsLHRydWUsZmFsc2Up44KS44OR44O844K544GZ44KLXG4gICAqIOOCqOODrOODoeODs+ODiOOBruabuOW8j+OBq+W/nOOBmOOBpuWGhemDqOOBp1BhcnNlU3RyaW5nKCksIFBhcnNlT2JqZWN0KCksIFBhcnNlQXJyYXkoKeOCkuWRvOOBtlxuICAgKlxuICAgKiBAcGFyYW0gICBidWZmZXIgICAgICBKU09O44Ko44Os44Oh44Oz44OI44Gu44OQ44OD44OV44KhXG4gICAqIEBwYXJhbSAgIGxlbmd0aCAgICAgIOODkeODvOOCueOBmeOCi+mVt+OBlVxuICAgKiBAcGFyYW0gICBiZWdpbiAgICAgICDjg5Hjg7zjgrnjgpLplovlp4vjgZnjgovkvY3nva5cbiAgICogQHBhcmFtICAgb3V0RW5kUG9zICAg44OR44O844K557WC5LqG5pmC44Gu5L2N572uXG4gICAqIEByZXR1cm4gICAgICDjg5Hjg7zjgrnjgYvjgonlj5blvpfjgZfjgZ9WYWx1ZeOCquODluOCuOOCp+OCr+ODiFxuICAgKi9cbiAgcHJvdGVjdGVkIHBhcnNlVmFsdWUoXG4gICAgYnVmZmVyOiBzdHJpbmcsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgYmVnaW46IG51bWJlcixcbiAgICBvdXRFbmRQb3M6IG51bWJlcltdXG4gICkge1xuICAgIGlmICh0aGlzLl9lcnJvcikgcmV0dXJuIG51bGw7XG5cbiAgICBsZXQgbzogVmFsdWUgPSBudWxsO1xuICAgIGxldCBpOiBudW1iZXIgPSBiZWdpbjtcbiAgICBsZXQgZjogbnVtYmVyO1xuXG4gICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYzogc3RyaW5nID0gYnVmZmVyW2ldO1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgJy0nOlxuICAgICAgICBjYXNlICcuJzpcbiAgICAgICAgY2FzZSAnMCc6XG4gICAgICAgIGNhc2UgJzEnOlxuICAgICAgICBjYXNlICcyJzpcbiAgICAgICAgY2FzZSAnMyc6XG4gICAgICAgIGNhc2UgJzQnOlxuICAgICAgICBjYXNlICc1JzpcbiAgICAgICAgY2FzZSAnNic6XG4gICAgICAgIGNhc2UgJzcnOlxuICAgICAgICBjYXNlICc4JzpcbiAgICAgICAgY2FzZSAnOSc6IHtcbiAgICAgICAgICBjb25zdCBhZnRlclN0cmluZzogc3RyaW5nW10gPSBuZXcgQXJyYXkoMSk7IC8vIOWPgueFp+a4oeOBl+OBq+OBmeOCi+OBn+OCgVxuICAgICAgICAgIGYgPSBzdHJ0b2QoYnVmZmVyLnNsaWNlKGkpLCBhZnRlclN0cmluZyk7XG4gICAgICAgICAgb3V0RW5kUG9zWzBdID0gYnVmZmVyLmluZGV4T2YoYWZ0ZXJTdHJpbmdbMF0pO1xuICAgICAgICAgIHJldHVybiBuZXcgSnNvbkZsb2F0KGYpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1wiJzpcbiAgICAgICAgICByZXR1cm4gbmV3IEpzb25TdHJpbmcoXG4gICAgICAgICAgICB0aGlzLnBhcnNlU3RyaW5nKGJ1ZmZlciwgbGVuZ3RoLCBpICsgMSwgb3V0RW5kUG9zKVxuICAgICAgICAgICk7IC8vIFxcXCLjga7mrKHjga7mloflrZfjgYvjgolcbiAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgbyA9IHRoaXMucGFyc2VBcnJheShidWZmZXIsIGxlbmd0aCwgaSArIDEsIG91dEVuZFBvcyk7XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIGNhc2UgJ3snOlxuICAgICAgICAgIG8gPSB0aGlzLnBhcnNlT2JqZWN0KGJ1ZmZlciwgbGVuZ3RoLCBpICsgMSwgb3V0RW5kUG9zKTtcbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgY2FzZSAnbic6IC8vIG51bGzku6XlpJbjgavjgarjgYRcbiAgICAgICAgICBpZiAoaSArIDMgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIG8gPSBuZXcgSnNvbk51bGx2YWx1ZSgpOyAvLyDop6PmlL7jgafjgY3jgovjgojjgYbjgavjgZnjgotcbiAgICAgICAgICAgIG91dEVuZFBvc1swXSA9IGkgKyA0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lcnJvciA9ICdwYXJzZSBudWxsJztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIGNhc2UgJ3QnOiAvLyB0cnVl5Lul5aSW44Gr44Gq44GEXG4gICAgICAgICAgaWYgKGkgKyAzIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBvID0gSnNvbkJvb2xlYW4udHJ1ZVZhbHVlO1xuICAgICAgICAgICAgb3V0RW5kUG9zWzBdID0gaSArIDQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gJ3BhcnNlIHRydWUnO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgY2FzZSAnZic6IC8vIGZhbHNl5Lul5aSW44Gr44Gq44GEXG4gICAgICAgICAgaWYgKGkgKyA0IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBvID0gSnNvbkJvb2xlYW4uZmFsc2VWYWx1ZTtcbiAgICAgICAgICAgIG91dEVuZFBvc1swXSA9IGkgKyA1O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lcnJvciA9IFwiaWxsZWdhbCAnLCcgcG9zaXRpb25cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIGNhc2UgJywnOiAvLyBBcnJheSBzZXBhcmF0b3JcbiAgICAgICAgICB0aGlzLl9lcnJvciA9IFwiaWxsZWdhbCAnLCcgcG9zaXRpb25cIjtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY2FzZSAnXSc6IC8vIOS4jeato+OBqu+9neOBoOOBjOOCueOCreODg+ODl+OBmeOCi+OAgumFjeWIl+OBruacgOW+jOOBq+S4jeimgeOBqiAsIOOBjOOBguOCi+OBqOaAneOCj+OCjOOCi1xuICAgICAgICAgIG91dEVuZFBvc1swXSA9IGk7IC8vIOWQjOOBmOaWh+Wtl+OCkuWGjeWHpueQhlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjYXNlICdcXG4nOlxuICAgICAgICAgIHRoaXMuX2xpbmVDb3VudCsrO1xuICAgICAgICBjYXNlICcgJzpcbiAgICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgY2FzZSAnXFxyJzpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyDjgrnjgq3jg4Pjg5dcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9lcnJvciA9ICdpbGxlZ2FsIGVuZCBvZiB2YWx1ZSc7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICog5qyh44Gu44CMXCLjgI3jgb7jgafjga7mloflrZfliJfjgpLjg5Hjg7zjgrnjgZnjgovjgIJcbiAgICpcbiAgICogQHBhcmFtICAgc3RyaW5nICAtPiAg44OR44O844K55a++6LGh44Gu5paH5a2X5YiXXG4gICAqIEBwYXJhbSAgIGxlbmd0aCAgLT4gIOODkeODvOOCueOBmeOCi+mVt+OBlVxuICAgKiBAcGFyYW0gICBiZWdpbiAgIC0+ICDjg5Hjg7zjgrnjgpLplovlp4vjgZnjgovkvY3nva5cbiAgICogQHBhcmFtICBvdXRFbmRQb3MgICAtPiAg44OR44O844K557WC5LqG5pmC44Gu5L2N572uXG4gICAqIEByZXR1cm4gICAgICDjg5Hjg7zjgrnjgZfjgZ/mlodG5a2X5YiX6KaB57SgXG4gICAqL1xuICBwcm90ZWN0ZWQgcGFyc2VTdHJpbmcoXG4gICAgc3RyaW5nOiBzdHJpbmcsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgYmVnaW46IG51bWJlcixcbiAgICBvdXRFbmRQb3M6IG51bWJlcltdXG4gICk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuX2Vycm9yKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBpID0gYmVnaW47XG4gICAgbGV0IGM6IHN0cmluZywgYzI6IHN0cmluZztcbiAgICBjb25zdCByZXQ6IGNzbVN0cmluZyA9IG5ldyBjc21TdHJpbmcoJycpO1xuICAgIGxldCBidWZTdGFydDogbnVtYmVyID0gYmVnaW47IC8vIHNidWbjgavnmbvpjLLjgZXjgozjgabjgYTjgarjgYTmloflrZfjga7plovlp4vkvY3nva5cblxuICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGMgPSBzdHJpbmdbaV07XG5cbiAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICBjYXNlICdcIic6IHtcbiAgICAgICAgICAvLyDntYLnq6/jga7igJ3jgIHjgqjjgrnjgrHjg7zjg5fmloflrZfjga/liKXjgavlh6bnkIbjgZXjgozjgovjga7jgafjgZPjgZPjgavmnaXjgarjgYRcbiAgICAgICAgICBvdXRFbmRQb3NbMF0gPSBpICsgMTsgLy8g4oCd44Gu5qyh44Gu5paH5a2XXG4gICAgICAgICAgcmV0LmFwcGVuZChzdHJpbmcuc2xpY2UoYnVmU3RhcnQpLCBpIC0gYnVmU3RhcnQpOyAvLyDliY3jga7mloflrZfjgb7jgafjgpLnmbvpjLLjgZnjgotcbiAgICAgICAgICByZXR1cm4gcmV0LnM7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnLy8nOiB7XG4gICAgICAgICAgLy8g44Ko44K544Kx44O844OX44Gu5aC05ZCIXG4gICAgICAgICAgaSsrOyAvLyDvvJLmloflrZfjgpLjgrvjg4Pjg4jjgafmibHjgYZcblxuICAgICAgICAgIGlmIChpIC0gMSA+IGJ1ZlN0YXJ0KSB7XG4gICAgICAgICAgICByZXQuYXBwZW5kKHN0cmluZy5zbGljZShidWZTdGFydCksIGkgLSBidWZTdGFydCk7IC8vIOWJjeOBruaWh+Wtl+OBvuOBp+OCkueZu+mMsuOBmeOCi1xuICAgICAgICAgIH1cbiAgICAgICAgICBidWZTdGFydCA9IGkgKyAxOyAvLyDjgqjjgrnjgrHjg7zjg5fvvIjvvJLmloflrZcp44Gu5qyh44Gu5paH5a2X44GL44KJXG5cbiAgICAgICAgICBpZiAoaSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgYzIgPSBzdHJpbmdbaV07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoYzIpIHtcbiAgICAgICAgICAgICAgY2FzZSAnXFxcXCc6XG4gICAgICAgICAgICAgICAgcmV0LmV4cGFuc2lvbigxLCAnXFxcXCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdcIic6XG4gICAgICAgICAgICAgICAgcmV0LmV4cGFuc2lvbigxLCAnXCInKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnLyc6XG4gICAgICAgICAgICAgICAgcmV0LmV4cGFuc2lvbigxLCAnLycpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdiJzpcbiAgICAgICAgICAgICAgICByZXQuZXhwYW5zaW9uKDEsICdcXGInKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgICAgcmV0LmV4cGFuc2lvbigxLCAnXFxmJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ24nOlxuICAgICAgICAgICAgICAgIHJldC5leHBhbnNpb24oMSwgJ1xcbicpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdyJzpcbiAgICAgICAgICAgICAgICByZXQuZXhwYW5zaW9uKDEsICdcXHInKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgcmV0LmV4cGFuc2lvbigxLCAnXFx0Jyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ3UnOlxuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gJ3BhcnNlIHN0cmluZy91bmljb3JkIGVzY2FwZSBub3Qgc3VwcG9ydGVkJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IgPSAncGFyc2Ugc3RyaW5nL2VzY2FwZSBlcnJvcic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2Vycm9yID0gJ3BhcnNlIHN0cmluZy9pbGxlZ2FsIGVuZCc7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogSlNPTuOBruOCquODluOCuOOCp+OCr+ODiOOCqOODrOODoeODs+ODiOOCkuODkeODvOOCueOBl+OBplZhbHVl44Kq44OW44K444Kn44Kv44OI44KS6L+U44GZXG4gICAqXG4gICAqIEBwYXJhbSBidWZmZXIgICAgSlNPTuOCqOODrOODoeODs+ODiOOBruODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gbGVuZ3RoICAgIOODkeODvOOCueOBmeOCi+mVt+OBlVxuICAgKiBAcGFyYW0gYmVnaW4gICAgIOODkeODvOOCueOCkumWi+Wni+OBmeOCi+S9jee9rlxuICAgKiBAcGFyYW0gb3V0RW5kUG9zIOODkeODvOOCuee1guS6huaZguOBruS9jee9rlxuICAgKiBAcmV0dXJuIOODkeODvOOCueOBi+OCieWPluW+l+OBl+OBn1ZhbHVl44Kq44OW44K444Kn44Kv44OIXG4gICAqL1xuICBwcm90ZWN0ZWQgcGFyc2VPYmplY3QoXG4gICAgYnVmZmVyOiBzdHJpbmcsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgYmVnaW46IG51bWJlcixcbiAgICBvdXRFbmRQb3M6IG51bWJlcltdXG4gICk6IFZhbHVlIHtcbiAgICBpZiAodGhpcy5fZXJyb3IpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHJldDogSnNvbk1hcCA9IG5ldyBKc29uTWFwKCk7XG5cbiAgICAvLyBLZXk6IFZhbHVlXG4gICAgbGV0IGtleSA9ICcnO1xuICAgIGxldCBpOiBudW1iZXIgPSBiZWdpbjtcbiAgICBsZXQgYyA9ICcnO1xuICAgIGNvbnN0IGxvY2FsUmV0RW5kUG9zMjogbnVtYmVyW10gPSBBcnJheSgxKTtcbiAgICBsZXQgb2sgPSBmYWxzZTtcblxuICAgIC8vICwg44GM57aa44GP6ZmQ44KK44Or44O844OXXG4gICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgRk9SX0xPT1A6IGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYyA9IGJ1ZmZlcltpXTtcblxuICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICBjYXNlICdcIic6XG4gICAgICAgICAgICBrZXkgPSB0aGlzLnBhcnNlU3RyaW5nKGJ1ZmZlciwgbGVuZ3RoLCBpICsgMSwgbG9jYWxSZXRFbmRQb3MyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcikge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaSA9IGxvY2FsUmV0RW5kUG9zMlswXTtcbiAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrIEZPUl9MT09QOyAvLy0tIGxvb3DjgYvjgonlh7rjgotcbiAgICAgICAgICBjYXNlICd9JzogLy8g6ZaJ44GY44Kr44OD44KzXG4gICAgICAgICAgICBvdXRFbmRQb3NbMF0gPSBpICsgMTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7IC8vIOepulxuICAgICAgICAgIGNhc2UgJzonOlxuICAgICAgICAgICAgdGhpcy5fZXJyb3IgPSBcImlsbGVnYWwgJzonIHBvc2l0aW9uXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdcXG4nOlxuICAgICAgICAgICAgdGhpcy5fbGluZUNvdW50Kys7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrOyAvLyDjgrnjgq3jg4Pjg5fjgZnjgovmloflrZdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFvaykge1xuICAgICAgICB0aGlzLl9lcnJvciA9ICdrZXkgbm90IGZvdW5kJztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIG9rID0gZmFsc2U7XG5cbiAgICAgIC8vIDog44KS44OB44Kn44OD44KvXG4gICAgICBGT1JfTE9PUDI6IGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYyA9IGJ1ZmZlcltpXTtcblxuICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICBjYXNlICc6JzpcbiAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGJyZWFrIEZPUl9MT09QMjtcbiAgICAgICAgICBjYXNlICd9JzpcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gXCJpbGxlZ2FsICd9JyBwb3NpdGlvblwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgICAgIHRoaXMuX2xpbmVDb3VudCsrO1xuICAgICAgICAgIC8vIGNhc2UgJyAnOiBjYXNlICdcXHQnIDogY2FzZSAnXFxyJzpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7IC8vIOOCueOCreODg+ODl+OBmeOCi+aWh+Wtl1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghb2spIHtcbiAgICAgICAgdGhpcy5fZXJyb3IgPSBcIic6JyBub3QgZm91bmRcIjtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIOWApOOCkuODgeOCp+ODg+OCr1xuICAgICAgY29uc3QgdmFsdWU6IFZhbHVlID0gdGhpcy5wYXJzZVZhbHVlKGJ1ZmZlciwgbGVuZ3RoLCBpLCBsb2NhbFJldEVuZFBvczIpO1xuICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpID0gbG9jYWxSZXRFbmRQb3MyWzBdO1xuXG4gICAgICAvLyByZXQucHV0KGtleSwgdmFsdWUpO1xuICAgICAgcmV0LnB1dChrZXksIHZhbHVlKTtcblxuICAgICAgRk9SX0xPT1AzOiBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGMgPSBidWZmZXJbaV07XG5cbiAgICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgICAgY2FzZSAnLCc6XG4gICAgICAgICAgICBicmVhayBGT1JfTE9PUDM7XG4gICAgICAgICAgY2FzZSAnfSc6XG4gICAgICAgICAgICBvdXRFbmRQb3NbMF0gPSBpICsgMTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7IC8vIOato+W4uOe1guS6hlxuICAgICAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgICAgICB0aGlzLl9saW5lQ291bnQrKztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7IC8vIOOCueOCreODg+ODl1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fZXJyb3IgPSAnaWxsZWdhbCBlbmQgb2YgcGVyc2VPYmplY3QnO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOasoeOBruOAjFwi44CN44G+44Gn44Gu5paH5a2X5YiX44KS44OR44O844K544GZ44KL44CCXG4gICAqIEBwYXJhbSBidWZmZXIgICAgSlNPTuOCqOODrOODoeODs+ODiOOBruODkOODg+ODleOCoVxuICAgKiBAcGFyYW0gbGVuZ3RoICAgIOODkeODvOOCueOBmeOCi+mVt+OBlVxuICAgKiBAcGFyYW0gYmVnaW4gICAgIOODkeODvOOCueOCkumWi+Wni+OBmeOCi+S9jee9rlxuICAgKiBAcGFyYW0gb3V0RW5kUG9zIOODkeODvOOCuee1guS6huaZguOBruS9jee9rlxuICAgKiBAcmV0dXJuIOODkeODvOOCueOBi+OCieWPluW+l+OBl+OBn1ZhbHVl44Kq44OW44K444Kn44Kv44OIXG4gICAqL1xuICBwcm90ZWN0ZWQgcGFyc2VBcnJheShcbiAgICBidWZmZXI6IHN0cmluZyxcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBiZWdpbjogbnVtYmVyLFxuICAgIG91dEVuZFBvczogbnVtYmVyW11cbiAgKTogVmFsdWUge1xuICAgIGlmICh0aGlzLl9lcnJvcikgcmV0dXJuIG51bGw7XG4gICAgbGV0IHJldDogSnNvbkFycmF5ID0gbmV3IEpzb25BcnJheSgpO1xuXG4gICAgLy8ga2V5IDogdmFsdWVcbiAgICBsZXQgaTogbnVtYmVyID0gYmVnaW47XG4gICAgbGV0IGM6IHN0cmluZztcbiAgICBjb25zdCBsb2NhbFJldEVuZHBvczI6IG51bWJlcltdID0gbmV3IEFycmF5KDEpO1xuXG4gICAgLy8gLCDjgYzntprjgY/pmZDjgorjg6vjg7zjg5dcbiAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyA6IOOCkuODgeOCp+ODg+OCr1xuICAgICAgY29uc3QgdmFsdWU6IFZhbHVlID0gdGhpcy5wYXJzZVZhbHVlKGJ1ZmZlciwgbGVuZ3RoLCBpLCBsb2NhbFJldEVuZHBvczIpO1xuXG4gICAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpID0gbG9jYWxSZXRFbmRwb3MyWzBdO1xuXG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgcmV0LmFkZCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZPUl9MT09QMzpcbiAgICAgIC8vIGJvb2xlYW4gYnJlYWtmbGFnID0gZmFsc2U7XG4gICAgICBGT1JfTE9PUDogZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjID0gYnVmZmVyW2ldO1xuXG4gICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgIGNhc2UgJywnOlxuICAgICAgICAgICAgLy8gYnJlYWtmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIGJyZWFrOyAvLyDmrKHjga5LRVksIFZBbFVF44G4XG4gICAgICAgICAgICBicmVhayBGT1JfTE9PUDtcbiAgICAgICAgICBjYXNlICddJzpcbiAgICAgICAgICAgIG91dEVuZFBvc1swXSA9IGkgKyAxO1xuICAgICAgICAgICAgcmV0dXJuIHJldDsgLy8g57WC5LqGXG4gICAgICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgICAgICsrdGhpcy5fbGluZUNvdW50O1xuICAgICAgICAgIC8vY2FzZSAnICc6IGNhc2UgJ1xcdCc6IGNhc2UgJ1xccic6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrOyAvLyDjgrnjgq3jg4Pjg5dcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldCA9IHZvaWQgMDtcbiAgICB0aGlzLl9lcnJvciA9ICdpbGxlZ2FsIGVuZCBvZiBwYXJzZU9iamVjdCc7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBfZXJyb3I6IHN0cmluZzsgLy8g44OR44O844K55pmC44Gu44Ko44Op44O8XG4gIF9saW5lQ291bnQ6IG51bWJlcjsgLy8g44Ko44Op44O85aCx5ZGK44Gr55So44GE44KL6KGM5pWw44Kr44Km44Oz44OIXG4gIF9yb290OiBWYWx1ZTsgLy8g44OR44O844K544GV44KM44Gf44Or44O844OI6KaB57SgXG59XG5cbi8qKlxuICog44OR44O844K544GX44GfSlNPTuOBruimgee0oOOCkmZsb2F05YCk44Go44GX44Gm5omx44GGXG4gKi9cbmV4cG9ydCBjbGFzcyBKc29uRmxvYXQgZXh0ZW5kcyBWYWx1ZSB7XG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIGNvbnN0cnVjdG9yKHY6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl92YWx1ZSA9IHY7XG4gIH1cblxuICAvKipcbiAgICogVmFsdWXjga7nqK7poZ7jgYzmlbDlgKTlnovjgarjgol0cnVlXG4gICAqL1xuICBwdWJsaWMgaXNGbG9hdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpLmloflrZfliJfjgafov5TjgZkoY3NtU3RyaW5n5Z6LKVxuICAgKi9cbiAgcHVibGljIGdldFN0cmluZyhkZWZhdWx0VmFsdWU6IHN0cmluZywgaW5kZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHN0cmJ1ZiA9ICdcXDAnO1xuICAgIHRoaXMuX3ZhbHVlID0gcGFyc2VGbG9hdChzdHJidWYpO1xuICAgIHRoaXMuX3N0cmluZ0J1ZmZlciA9IHN0cmJ1ZjtcblxuICAgIHJldHVybiB0aGlzLl9zdHJpbmdCdWZmZXI7XG4gIH1cblxuICAvKipcbiAgICog6KaB57Sg44KS5pWw5YCk5Z6L44Gn6L+U44GZKG51bWJlcilcbiAgICovXG4gIHB1YmxpYyB0b0ludChkZWZhdWx0VmFsdWUgPSAwKTogbnVtYmVyIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5fdmFsdWUudG9TdHJpbmcoKSk7XG4gIH1cblxuICAvKipcbiAgICog6KaB57Sg44KS5pWw5YCk5Z6L44Gn6L+U44GZKG51bWJlcilcbiAgICovXG4gIHB1YmxpYyB0b0Zsb2F0KGRlZmF1bHRWYWx1ZSA9IDAuMCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leaVsOOBruWApOOBqOetieOBl+OBkeOCjOOBsHRydWVcbiAgICovXG4gIHB1YmxpYyBlcXVhbHModmFsdWU6IGNzbVN0cmluZyk6IGJvb2xlYW47XG4gIHB1YmxpYyBlcXVhbHModmFsdWU6IHN0cmluZyk6IGJvb2xlYW47XG4gIHB1YmxpYyBlcXVhbHModmFsdWU6IG51bWJlcik6IGJvb2xlYW47XG4gIHB1YmxpYyBlcXVhbHModmFsdWU6IGJvb2xlYW4pOiBib29sZWFuO1xuICBwdWJsaWMgZXF1YWxzKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiB2YWx1ZSkge1xuICAgICAgLy8gaW50XG4gICAgICBpZiAoTWF0aC5yb3VuZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gZmxvYXRcbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT0gdGhpcy5fdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX3ZhbHVlOiBudW1iZXI7IC8vIEpTT07opoHntKDjga7lgKRcbn1cblxuLyoqXG4gKiDjg5Hjg7zjgrnjgZfjgZ9KU09O44Gu6KaB57Sg44KS55yf5YG95YCk44Go44GX44Gm5omx44GGXG4gKi9cbmV4cG9ydCBjbGFzcyBKc29uQm9vbGVhbiBleHRlbmRzIFZhbHVlIHtcbiAgLyoqXG4gICAqIFZhbHVl44Gu56iu6aGe44GM55yf5YG95YCk44Gq44KJdHJ1ZVxuICAgKi9cbiAgcHVibGljIGlzQm9vbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpLnnJ/lgb3lgKTjgafov5TjgZkoYm9vbGVhbilcbiAgICovXG4gIHB1YmxpYyB0b0Jvb2xlYW4oZGVmYXVsdFZhbHVlID0gZmFsc2UpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fYm9vbFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuaWh+Wtl+WIl+OBp+i/lOOBmShjc21TdHJpbmflnospXG4gICAqL1xuICBwdWJsaWMgZ2V0U3RyaW5nKGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBpbmRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdGhpcy5fc3RyaW5nQnVmZmVyID0gdGhpcy5fYm9vbFZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJztcblxuICAgIHJldHVybiB0aGlzLl9zdHJpbmdCdWZmZXI7XG4gIH1cblxuICAvKipcbiAgICog5byV5pWw44Gu5YCk44Go562J44GX44GR44KM44GwdHJ1ZVxuICAgKi9cbiAgcHVibGljIGVxdWFscyh2YWx1ZTogY3NtU3RyaW5nKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogYm9vbGVhbik6IGJvb2xlYW47XG4gIHB1YmxpYyBlcXVhbHModmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIGlmICgnYm9vbGVhbicgPT09IHR5cGVvZiB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09IHRoaXMuX2Jvb2xWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVl44Gu5YCk44GM6Z2Z55qE44Gq44KJdHJ1ZSwg6Z2Z55qE44Gq44KJ6Kej5pS+44GX44Gq44GEXG4gICAqL1xuICBwdWJsaWMgaXNTdGF0aWMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICog5byV5pWw5LuY44GN44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IodjogYm9vbGVhbikge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9ib29sVmFsdWUgPSB2O1xuICB9XG5cbiAgc3RhdGljIHRydWVWYWx1ZTogSnNvbkJvb2xlYW47IC8vIHRydWVcbiAgc3RhdGljIGZhbHNlVmFsdWU6IEpzb25Cb29sZWFuOyAvLyBmYWxzZVxuXG4gIHByaXZhdGUgX2Jvb2xWYWx1ZTogYm9vbGVhbjsgLy8gSlNPTuimgee0oOOBruWApFxufVxuXG4vKipcbiAqIOODkeODvOOCueOBl+OBn0pTT07jga7opoHntKDjgpLmloflrZfliJfjgajjgZfjgabmibHjgYZcbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25TdHJpbmcgZXh0ZW5kcyBWYWx1ZSB7XG4gIC8qKlxuICAgKiDlvJXmlbDku5jjgY3jgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihzOiBzdHJpbmcpO1xuICBwdWJsaWMgY29uc3RydWN0b3IoczogY3NtU3RyaW5nKTtcbiAgcHVibGljIGNvbnN0cnVjdG9yKHM6IGFueSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBzKSB7XG4gICAgICB0aGlzLl9zdHJpbmdCdWZmZXIgPSBzO1xuICAgIH1cblxuICAgIGlmIChzIGluc3RhbmNlb2YgY3NtU3RyaW5nKSB7XG4gICAgICB0aGlzLl9zdHJpbmdCdWZmZXIgPSBzLnM7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVl44Gu56iu6aGe44GM5paH5a2X5YiX44Gq44KJdHJ1ZVxuICAgKi9cbiAgcHVibGljIGlzU3RyaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuaWh+Wtl+WIl+OBp+i/lOOBmShjc21TdHJpbmflnospXG4gICAqL1xuICBwdWJsaWMgZ2V0U3RyaW5nKGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBpbmRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmluZ0J1ZmZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvJXmlbDjga7lgKTjgajnrYnjgZfjgZHjgozjgbB0cnVlXG4gICAqL1xuICBwdWJsaWMgZXF1YWxzKHZhbHVlOiBjc21TdHJpbmcpOiBib29sZWFuO1xuICBwdWJsaWMgZXF1YWxzKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuO1xuICBwdWJsaWMgZXF1YWxzKHZhbHVlOiBudW1iZXIpOiBib29sZWFuO1xuICBwdWJsaWMgZXF1YWxzKHZhbHVlOiBib29sZWFuKTogYm9vbGVhbjtcbiAgcHVibGljIGVxdWFscyh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdHJpbmdCdWZmZXIgPT0gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgY3NtU3RyaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RyaW5nQnVmZmVyID09IHZhbHVlLnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogSlNPTuODkeODvOOCueaZguOBruOCqOODqeODvOe1kOaenOOAguaWh+Wtl+WIl+Wei+OBruOCiOOBhuOBq+OBteOCi+OBvuOBhlxuICovXG5leHBvcnQgY2xhc3MgSnNvbkVycm9yIGV4dGVuZHMgSnNvblN0cmluZyB7XG4gIC8qKlxuICAgKiBWYWx1ZeOBruWApOOBjOmdmeeahOOBquOCiXRydWXjgIHpnZnnmoTjgarjgonop6PmlL7jgZfjgarjgYRcbiAgICovXG4gIHB1YmxpYyBpc1N0YXRpYygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNTdGF0aWM7XG4gIH1cblxuICAvKipcbiAgICog44Ko44Op44O85oOF5aCx44KS44K744OD44OI44GZ44KLXG4gICAqL1xuICBwdWJsaWMgc2V0RXJyb3JOb3RGb3JDbGllbnRDYWxsKHM6IHN0cmluZyk6IFZhbHVlIHtcbiAgICB0aGlzLl9zdHJpbmdCdWZmZXIgPSBzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leaVsOS7mOOBjeOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKHM6IGNzbVN0cmluZyB8IHN0cmluZywgaXNTdGF0aWM6IGJvb2xlYW4pIHtcbiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBzKSB7XG4gICAgICBzdXBlcihzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIocyk7XG4gICAgfVxuICAgIHRoaXMuX2lzU3RhdGljID0gaXNTdGF0aWM7XG4gIH1cblxuICAvKipcbiAgICogVmFsdWXjga7nqK7poZ7jgYzjgqjjg6njg7zlgKTjgarjgol0cnVlXG4gICAqL1xuICBwdWJsaWMgaXNFcnJvcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfaXNTdGF0aWM6IGJvb2xlYW47IC8vIOmdmeeahOOBqlZhbHVl44GL44Gp44GG44GLXG59XG5cbi8qKlxuICog44OR44O844K544GX44GfSlNPTuOBruimgee0oOOCkk5VTEzlgKTjgajjgZfjgabmjIHjgaRcbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25OdWxsdmFsdWUgZXh0ZW5kcyBWYWx1ZSB7XG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjE5VTEzlgKTjgarjgol0cnVlXG4gICAqL1xuICBwdWJsaWMgaXNOdWxsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuaWh+Wtl+WIl+OBp+i/lOOBmShjc21TdHJpbmflnospXG4gICAqL1xuICBwdWJsaWMgZ2V0U3RyaW5nKGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBpbmRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmluZ0J1ZmZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBruWApOOBjOmdmeeahOOBquOCiXRydWUsIOmdmeeahOOBquOCieino+aUvuOBl+OBquOBhFxuICAgKi9cbiAgcHVibGljIGlzU3RhdGljKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVl44Gr44Ko44Op44O85YCk44KS44K744OD44OI44GZ44KLXG4gICAqL1xuICBwdWJsaWMgc2V0RXJyb3JOb3RGb3JDbGllbnRDYWxsKHM6IHN0cmluZyk6IFZhbHVlIHtcbiAgICB0aGlzLl9zdHJpbmdCdWZmZXIgPSBzO1xuICAgIHJldHVybiBKc29uRXJyb3IubnVsbFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9zdHJpbmdCdWZmZXIgPSAnTnVsbFZhbHVlJztcbiAgfVxufVxuXG4vKipcbiAqIOODkeODvOOCueOBl+OBn0pTT07jga7opoHntKDjgpLphY3liJfjgajjgZfjgabmjIHjgaRcbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25BcnJheSBleHRlbmRzIFZhbHVlIHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fYXJyYXkgPSBuZXcgY3NtVmVjdG9yPFZhbHVlPigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+OCueODiOODqeOCr+OCv+ebuOW9k+OBruWHpueQhlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgZm9yIChcbiAgICAgIGxldCBpdGU6IGNzbVZlY3Rvcl9pdGVyYXRvcjxWYWx1ZT4gPSB0aGlzLl9hcnJheS5iZWdpbigpO1xuICAgICAgaXRlLm5vdEVxdWFsKHRoaXMuX2FycmF5LmVuZCgpKTtcbiAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgbGV0IHY6IFZhbHVlID0gaXRlLnB0cigpO1xuXG4gICAgICBpZiAodiAmJiAhdi5pc1N0YXRpYygpKSB7XG4gICAgICAgIHYgPSB2b2lkIDA7XG4gICAgICAgIHYgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZeOBrueorumhnuOBjOmFjeWIl+OBquOCiXRydWVcbiAgICovXG4gIHB1YmxpYyBpc0FycmF5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+Wtl+a8lOeul+WtkFtpbmRleF1cbiAgICovXG4gIHB1YmxpYyBnZXRWYWx1ZUJ5SW5kZXgoaW5kZXg6IG51bWJlcik6IFZhbHVlIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2FycmF5LmdldFNpemUoKSA8PSBpbmRleCkge1xuICAgICAgcmV0dXJuIFZhbHVlLmVycm9yVmFsdWUuc2V0RXJyb3JOb3RGb3JDbGllbnRDYWxsKFxuICAgICAgICBDU01fSlNPTl9FUlJPUl9JTkRFWF9PRl9CT1VORFNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdjogVmFsdWUgPSB0aGlzLl9hcnJheS5hdChpbmRleCk7XG5cbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gVmFsdWUubnVsbFZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2O1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+Wtl+a8lOeul+WtkFtzdHJpbmcgfCBjc21TdHJpbmddXG4gICAqL1xuICBwdWJsaWMgZ2V0VmFsdWVCeVN0cmluZyhzOiBzdHJpbmcgfCBjc21TdHJpbmcpOiBWYWx1ZSB7XG4gICAgcmV0dXJuIFZhbHVlLmVycm9yVmFsdWUuc2V0RXJyb3JOb3RGb3JDbGllbnRDYWxsKFxuICAgICAgQ1NNX0pTT05fRVJST1JfVFlQRV9NSVNNQVRDSFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog6KaB57Sg44KS5paH5a2X5YiX44Gn6L+U44GZKGNzbVN0cmluZ+WeiylcbiAgICovXG4gIHB1YmxpYyBnZXRTdHJpbmcoZGVmYXVsdFZhbHVlOiBzdHJpbmcsIGluZGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdHJpbmdCdWZmZXI6IHN0cmluZyA9IGluZGVudCArICdbXFxuJztcblxuICAgIGZvciAoXG4gICAgICBsZXQgaXRlOiBjc21WZWN0b3JfaXRlcmF0b3I8VmFsdWU+ID0gdGhpcy5fYXJyYXkuYmVnaW4oKTtcbiAgICAgIGl0ZS5ub3RFcXVhbCh0aGlzLl9hcnJheS5lbmQoKSk7XG4gICAgICBpdGUuaW5jcmVtZW50KClcbiAgICApIHtcbiAgICAgIGNvbnN0IHY6IFZhbHVlID0gaXRlLnB0cigpO1xuICAgICAgdGhpcy5fc3RyaW5nQnVmZmVyICs9IGluZGVudCArICcnICsgdi5nZXRTdHJpbmcoaW5kZW50ICsgJyAnKSArICdcXG4nO1xuICAgIH1cblxuICAgIHRoaXMuX3N0cmluZ0J1ZmZlciA9IHN0cmluZ0J1ZmZlciArIGluZGVudCArICddXFxuJztcblxuICAgIHJldHVybiB0aGlzLl9zdHJpbmdCdWZmZXI7XG4gIH1cblxuICAvKipcbiAgICog6YWN5YiX6KaB57Sg44KS6L+95Yqg44GZ44KLXG4gICAqIEBwYXJhbSB2IOi/veWKoOOBmeOCi+imgee0oFxuICAgKi9cbiAgcHVibGljIGFkZCh2OiBWYWx1ZSk6IHZvaWQge1xuICAgIHRoaXMuX2FycmF5LnB1c2hCYWNrKHYpO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuOCs+ODs+ODhuODiuOBp+i/lOOBmShjc21WZWN0b3I8VmFsdWU+KVxuICAgKi9cbiAgcHVibGljIGdldFZlY3RvcihkZWZhdWx0VmFsdWU6IGNzbVZlY3RvcjxWYWx1ZT4gPSBudWxsKTogY3NtVmVjdG9yPFZhbHVlPiB7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5O1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOBruaVsOOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXkuZ2V0U2l6ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfYXJyYXk6IGNzbVZlY3RvcjxWYWx1ZT47IC8vIEpTT07opoHntKDjga7lgKRcbn1cblxuLyoqXG4gKiDjg5Hjg7zjgrnjgZfjgZ9KU09O44Gu6KaB57Sg44KS44Oe44OD44OX44Go44GX44Gm5oyB44GkXG4gKi9cbmV4cG9ydCBjbGFzcyBKc29uTWFwIGV4dGVuZHMgVmFsdWUge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9tYXAgPSBuZXcgY3NtTWFwPHN0cmluZywgVmFsdWU+KCk7XG4gIH1cblxuICAvKipcbiAgICog44OH44K544OI44Op44Kv44K/55u45b2T44Gu5Yem55CGXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBpdGU6IGNzbU1hcF9pdGVyYXRvcjxzdHJpbmcsIFZhbHVlPiA9IHRoaXMuX21hcC5iZWdpbigpO1xuXG4gICAgd2hpbGUgKGl0ZS5ub3RFcXVhbCh0aGlzLl9tYXAuZW5kKCkpKSB7XG4gICAgICBsZXQgdjogVmFsdWUgPSBpdGUucHRyKCkuc2Vjb25kO1xuXG4gICAgICBpZiAodiAmJiAhdi5pc1N0YXRpYygpKSB7XG4gICAgICAgIHYgPSB2b2lkIDA7XG4gICAgICAgIHYgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpdGUucHJlSW5jcmVtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVl44Gu5YCk44GMTWFw5Z6L44Gq44KJdHJ1ZVxuICAgKi9cbiAgcHVibGljIGlzTWFwKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+Wtl+a8lOeul+WtkFtzdHJpbmcgfCBjc21TdHJpbmddXG4gICAqL1xuICBwdWJsaWMgZ2V0VmFsdWVCeVN0cmluZyhzOiBzdHJpbmcgfCBjc21TdHJpbmcpOiBWYWx1ZSB7XG4gICAgaWYgKHMgaW5zdGFuY2VvZiBjc21TdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJldDogVmFsdWUgPSB0aGlzLl9tYXAuZ2V0VmFsdWUocy5zKTtcbiAgICAgIGlmIChyZXQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gVmFsdWUubnVsbFZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGl0ZXI6IGNzbU1hcF9pdGVyYXRvcjxzdHJpbmcsIFZhbHVlPiA9IHRoaXMuX21hcC5iZWdpbigpO1xuICAgICAgaXRlci5ub3RFcXVhbCh0aGlzLl9tYXAuZW5kKCkpO1xuICAgICAgaXRlci5wcmVJbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgaWYgKGl0ZXIucHRyKCkuZmlyc3QgPT0gcykge1xuICAgICAgICBpZiAoaXRlci5wdHIoKS5zZWNvbmQgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBWYWx1ZS5udWxsVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZXIucHRyKCkuc2Vjb25kO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBWYWx1ZS5udWxsVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog5re75a2X5ryU566X5a2QW2luZGV4XVxuICAgKi9cbiAgcHVibGljIGdldFZhbHVlQnlJbmRleChpbmRleDogbnVtYmVyKTogVmFsdWUge1xuICAgIHJldHVybiBWYWx1ZS5lcnJvclZhbHVlLnNldEVycm9yTm90Rm9yQ2xpZW50Q2FsbChcbiAgICAgIENTTV9KU09OX0VSUk9SX1RZUEVfTUlTTUFUQ0hcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOimgee0oOOCkuaWh+Wtl+WIl+OBp+i/lOOBmShjc21TdHJpbmflnospXG4gICAqL1xuICBwdWJsaWMgZ2V0U3RyaW5nKGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBpbmRlbnQ6IHN0cmluZykge1xuICAgIHRoaXMuX3N0cmluZ0J1ZmZlciA9IGluZGVudCArICd7XFxuJztcblxuICAgIGNvbnN0IGl0ZTogY3NtTWFwX2l0ZXJhdG9yPHN0cmluZywgVmFsdWU+ID0gdGhpcy5fbWFwLmJlZ2luKCk7XG4gICAgd2hpbGUgKGl0ZS5ub3RFcXVhbCh0aGlzLl9tYXAuZW5kKCkpKSB7XG4gICAgICBjb25zdCBrZXkgPSBpdGUucHRyKCkuZmlyc3Q7XG4gICAgICBjb25zdCB2OiBWYWx1ZSA9IGl0ZS5wdHIoKS5zZWNvbmQ7XG5cbiAgICAgIHRoaXMuX3N0cmluZ0J1ZmZlciArPVxuICAgICAgICBpbmRlbnQgKyAnICcgKyBrZXkgKyAnIDogJyArIHYuZ2V0U3RyaW5nKGluZGVudCArICcgICAnKSArICcgXFxuJztcbiAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zdHJpbmdCdWZmZXIgKz0gaW5kZW50ICsgJ31cXG4nO1xuXG4gICAgcmV0dXJuIHRoaXMuX3N0cmluZ0J1ZmZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDopoHntKDjgpJNYXDlnovjgafov5TjgZlcbiAgICovXG4gIHB1YmxpYyBnZXRNYXAoZGVmYXVsdFZhbHVlPzogY3NtTWFwPHN0cmluZywgVmFsdWU+KTogY3NtTWFwPHN0cmluZywgVmFsdWU+IHtcbiAgICByZXR1cm4gdGhpcy5fbWFwO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcOOBq+imgee0oOOCkui/veWKoOOBmeOCi1xuICAgKi9cbiAgcHVibGljIHB1dChrZXk6IHN0cmluZywgdjogVmFsdWUpOiB2b2lkIHtcbiAgICB0aGlzLl9tYXAuc2V0VmFsdWUoa2V5LCB2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXDjgYvjgonjgq3jg7zjga7jg6rjgrnjg4jjgpLlj5blvpfjgZnjgotcbiAgICovXG4gIHB1YmxpYyBnZXRLZXlzKCk6IGNzbVZlY3RvcjxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuX2tleXMpIHtcbiAgICAgIHRoaXMuX2tleXMgPSBuZXcgY3NtVmVjdG9yPHN0cmluZz4oKTtcblxuICAgICAgY29uc3QgaXRlOiBjc21NYXBfaXRlcmF0b3I8c3RyaW5nLCBWYWx1ZT4gPSB0aGlzLl9tYXAuYmVnaW4oKTtcblxuICAgICAgd2hpbGUgKGl0ZS5ub3RFcXVhbCh0aGlzLl9tYXAuZW5kKCkpKSB7XG4gICAgICAgIGNvbnN0IGtleTogc3RyaW5nID0gaXRlLnB0cigpLmZpcnN0O1xuICAgICAgICB0aGlzLl9rZXlzLnB1c2hCYWNrKGtleSk7XG4gICAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2tleXM7XG4gIH1cblxuICAvKipcbiAgICogTWFw44Gu6KaB57Sg5pWw44KS5Y+W5b6X44GZ44KLXG4gICAqL1xuICBwdWJsaWMgZ2V0U2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9rZXlzLmdldFNpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX21hcDogY3NtTWFwPHN0cmluZywgVmFsdWU+OyAvLyBKU09O6KaB57Sg44Gu5YCkXG4gIHByaXZhdGUgX2tleXM6IGNzbVZlY3RvcjxzdHJpbmc+OyAvLyBKU09O6KaB57Sg44Gu5YCkXG59XG5cbi8vIE5hbWVzcGFjZSBkZWZpbml0aW9uIGZvciBjb21wYXRpYmlsaXR5LlxuaW1wb3J0ICogYXMgJCBmcm9tICcuL2N1YmlzbWpzb24nO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIHtcbiAgZXhwb3J0IGNvbnN0IEN1YmlzbUpzb24gPSAkLkN1YmlzbUpzb247XG4gIGV4cG9ydCB0eXBlIEN1YmlzbUpzb24gPSAkLkN1YmlzbUpzb247XG4gIGV4cG9ydCBjb25zdCBKc29uQXJyYXkgPSAkLkpzb25BcnJheTtcbiAgZXhwb3J0IHR5cGUgSnNvbkFycmF5ID0gJC5Kc29uQXJyYXk7XG4gIGV4cG9ydCBjb25zdCBKc29uQm9vbGVhbiA9ICQuSnNvbkJvb2xlYW47XG4gIGV4cG9ydCB0eXBlIEpzb25Cb29sZWFuID0gJC5Kc29uQm9vbGVhbjtcbiAgZXhwb3J0IGNvbnN0IEpzb25FcnJvciA9ICQuSnNvbkVycm9yO1xuICBleHBvcnQgdHlwZSBKc29uRXJyb3IgPSAkLkpzb25FcnJvcjtcbiAgZXhwb3J0IGNvbnN0IEpzb25GbG9hdCA9ICQuSnNvbkZsb2F0O1xuICBleHBvcnQgdHlwZSBKc29uRmxvYXQgPSAkLkpzb25GbG9hdDtcbiAgZXhwb3J0IGNvbnN0IEpzb25NYXAgPSAkLkpzb25NYXA7XG4gIGV4cG9ydCB0eXBlIEpzb25NYXAgPSAkLkpzb25NYXA7XG4gIGV4cG9ydCBjb25zdCBKc29uTnVsbHZhbHVlID0gJC5Kc29uTnVsbHZhbHVlO1xuICBleHBvcnQgdHlwZSBKc29uTnVsbHZhbHVlID0gJC5Kc29uTnVsbHZhbHVlO1xuICBleHBvcnQgY29uc3QgSnNvblN0cmluZyA9ICQuSnNvblN0cmluZztcbiAgZXhwb3J0IHR5cGUgSnNvblN0cmluZyA9ICQuSnNvblN0cmluZztcbiAgZXhwb3J0IGNvbnN0IFZhbHVlID0gJC5WYWx1ZTtcbiAgZXhwb3J0IHR5cGUgVmFsdWUgPSAkLlZhbHVlO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFJQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUFBO0FBcE1BO0FBK01BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBWUE7QUFNQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFXQTtBQU1BO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVdBO0FBTUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBVUE7QUFNQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFsZUE7QUF1ZUE7QUFBQTtBQUlBO0FBQUE7QUFHQTs7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQWhFQTtBQXFFQTtBQUFBO0FBZ0RBO0FBQUE7QUFHQTs7QUFDQTtBQWhEQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBZUE7QUFBQTtBQTFEQTtBQStEQTtBQUFBO0FBTUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFsREE7QUF1REE7QUFBQTtBQW1CQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUF0QkE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFpQkE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQXBDQTtBQXlDQTtBQUFBO0FBaUNBO0FBQUE7QUFHQTs7QUFDQTtBQWpDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQUE7QUF0Q0E7QUEyQ0E7QUFBQTtBQUlBO0FBQUE7QUFFQTs7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBekdBO0FBOEdBO0FBQUE7QUFJQTtBQUFBO0FBRUE7O0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBcklBO0FBd0lBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Framework/src/utils/cubismjson.ts\n");

/***/ }),

/***/ "./node_modules/whatwg-fetch/fetch.js":
/*!********************************************!*\
  !*** ./node_modules/whatwg-fetch/fetch.js ***!
  \********************************************/
/*! exports provided: Headers, Request, Response, DOMException, fetch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Headers\", function() { return Headers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Request\", function() { return Request; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Response\", function() { return Response; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOMException\", function() { return DOMException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetch\", function() { return fetch; });\nvar support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nfunction Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nfunction Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nfunction Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nvar DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nfunction fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2hhdHdnLWZldGNoL2ZldGNoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3doYXR3Zy1mZXRjaC9mZXRjaC5qcz82ZDkzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzdXBwb3J0ID0ge1xuICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICBibG9iOlxuICAgICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmXG4gICAgJ0Jsb2InIGluIHNlbGYgJiZcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbn1cblxuZnVuY3Rpb24gaXNEYXRhVmlldyhvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG59XG5cbmlmIChzdXBwb3J0LmFycmF5QnVmZmVyKSB7XG4gIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICBdXG5cbiAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID1cbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcgfHxcbiAgICBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gIH1cbiAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgfVxuICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5mdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBpdGVyYXRvclxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpdGVyYXRvclxufVxuXG5leHBvcnQgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gIHRoaXMubWFwID0ge31cblxuICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgIH0sIHRoaXMpXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoZWFkZXJzKSkge1xuICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHRoaXMuYXBwZW5kKGhlYWRlclswXSwgaGVhZGVyWzFdKVxuICAgIH0sIHRoaXMpXG4gIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICB9LCB0aGlzKVxuICB9XG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdXG4gIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSArICcsICcgKyB2YWx1ZSA6IHZhbHVlXG59XG5cbkhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgcmV0dXJuIHRoaXMuaGFzKG5hbWUpID8gdGhpcy5tYXBbbmFtZV0gOiBudWxsXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICBmb3IgKHZhciBuYW1lIGluIHRoaXMubWFwKSB7XG4gICAgaWYgKHRoaXMubWFwLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKVxuICAgIH1cbiAgfVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpdGVtcyA9IFtdXG4gIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgIGl0ZW1zLnB1c2gobmFtZSlcbiAgfSlcbiAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaXRlbXMucHVzaCh2YWx1ZSlcbiAgfSlcbiAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpdGVtcyA9IFtdXG4gIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgIGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSlcbiAgfSlcbiAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxufVxuXG5pZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllc1xufVxuXG5mdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gIGlmIChib2R5LmJvZHlVc2VkKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICB9XG4gIGJvZHkuYm9keVVzZWQgPSB0cnVlXG59XG5cbmZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICB9XG4gICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICByZXR1cm4gcHJvbWlzZVxufVxuXG5mdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgcmV0dXJuIHByb21pc2Vcbn1cblxuZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyQXNUZXh0KGJ1Zikge1xuICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZilcbiAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3W2ldKVxuICB9XG4gIHJldHVybiBjaGFycy5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBidWZmZXJDbG9uZShidWYpIHtcbiAgaWYgKGJ1Zi5zbGljZSkge1xuICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zi5ieXRlTGVuZ3RoKVxuICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpXG4gICAgcmV0dXJuIHZpZXcuYnVmZmVyXG4gIH1cbn1cblxuZnVuY3Rpb24gQm9keSgpIHtcbiAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG4gICAgaWYgKCFib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keS5idWZmZXIpXG4gICAgICAvLyBJRSAxMC0xMSBjYW4ndCBoYW5kbGUgYSBEYXRhVmlldyBib2R5LlxuICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJvZHkpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBjb25zdW1lZCh0aGlzKSB8fCBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZWFkQXJyYXlCdWZmZXJBc1RleHQodGhpcy5fYm9keUFycmF5QnVmZmVyKSlcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG4gICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgIH1cbiAgfVxuXG4gIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbnZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICByZXR1cm4gbWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEgPyB1cGNhc2VkIDogbWV0aG9kXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cbiAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICB9XG4gICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2RcbiAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgdGhpcy5zaWduYWwgPSBpbnB1dC5zaWduYWxcbiAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLnVybCA9IFN0cmluZyhpbnB1dClcbiAgfVxuXG4gIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ3NhbWUtb3JpZ2luJ1xuICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gIH1cbiAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICB0aGlzLnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsIHx8IHRoaXMuc2lnbmFsXG4gIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cbiAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgfVxuICB0aGlzLl9pbml0Qm9keShib2R5KVxufVxuXG5SZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcywge2JvZHk6IHRoaXMuX2JvZHlJbml0fSlcbn1cblxuZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICBib2R5XG4gICAgLnRyaW0oKVxuICAgIC5zcGxpdCgnJicpXG4gICAgLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgIGlmIChieXRlcykge1xuICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG4gICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuICAgICAgfVxuICAgIH0pXG4gIHJldHVybiBmb3JtXG59XG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKVxuICAvLyBSZXBsYWNlIGluc3RhbmNlcyBvZiBcXHJcXG4gYW5kIFxcbiBmb2xsb3dlZCBieSBhdCBsZWFzdCBvbmUgc3BhY2Ugb3IgaG9yaXpvbnRhbCB0YWIgd2l0aCBhIHNwYWNlXG4gIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4yXG4gIHZhciBwcmVQcm9jZXNzZWRIZWFkZXJzID0gcmF3SGVhZGVycy5yZXBsYWNlKC9cXHI/XFxuW1xcdCBdKy9nLCAnICcpXG4gIHByZVByb2Nlc3NlZEhlYWRlcnMuc3BsaXQoL1xccj9cXG4vKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6JylcbiAgICB2YXIga2V5ID0gcGFydHMuc2hpZnQoKS50cmltKClcbiAgICBpZiAoa2V5KSB7XG4gICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5qb2luKCc6JykudHJpbSgpXG4gICAgICBoZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIGhlYWRlcnNcbn1cblxuQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG5leHBvcnQgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9XG4gIH1cblxuICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1cyA9PT0gdW5kZWZpbmVkID8gMjAwIDogb3B0aW9ucy5zdGF0dXNcbiAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSydcbiAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxufVxuXG5Cb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG5SZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgdXJsOiB0aGlzLnVybFxuICB9KVxufVxuXG5SZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICByZXR1cm4gcmVzcG9uc2Vcbn1cblxudmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cblJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgfVxuXG4gIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxufVxuXG5leHBvcnQgdmFyIERPTUV4Y2VwdGlvbiA9IHNlbGYuRE9NRXhjZXB0aW9uXG50cnkge1xuICBuZXcgRE9NRXhjZXB0aW9uKClcbn0gY2F0Y2ggKGVycikge1xuICBET01FeGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB2YXIgZXJyb3IgPSBFcnJvcihtZXNzYWdlKVxuICAgIHRoaXMuc3RhY2sgPSBlcnJvci5zdGFja1xuICB9XG4gIERPTUV4Y2VwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSlcbiAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERPTUV4Y2VwdGlvblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2goaW5wdXQsIGluaXQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG5cbiAgICBpZiAocmVxdWVzdC5zaWduYWwgJiYgcmVxdWVzdC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydGVkJywgJ0Fib3J0RXJyb3InKSlcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgIGZ1bmN0aW9uIGFib3J0WGhyKCkge1xuICAgICAgeGhyLmFib3J0KClcbiAgICB9XG5cbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXJsID0gJ3Jlc3BvbnNlVVJMJyBpbiB4aHIgPyB4aHIucmVzcG9uc2VVUkwgOiBvcHRpb25zLmhlYWRlcnMuZ2V0KCdYLVJlcXVlc3QtVVJMJylcbiAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICB9XG5cbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICB9XG5cbiAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgIH1cblxuICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpXG4gICAgfVxuXG4gICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXG4gICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICB9XG5cbiAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgfSlcblxuICAgIGlmIChyZXF1ZXN0LnNpZ25hbCkge1xuICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocilcblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBET05FIChzdWNjZXNzIG9yIGZhaWx1cmUpXG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICB9KVxufVxuXG5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcblxuaWYgKCFzZWxmLmZldGNoKSB7XG4gIHNlbGYuZmV0Y2ggPSBmZXRjaFxuICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG4gIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3RcbiAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/whatwg-fetch/fetch.js\n");

/***/ }),

/***/ "./src/box2d/collision/b2_broad_phase.ts":
/*!***********************************************!*\
  !*** ./src/box2d/collision/b2_broad_phase.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2BroadPhase = exports.b2Pair = void 0;\nvar b2_dynamic_tree_1 = __webpack_require__(/*! ./b2_dynamic_tree */ \"./src/box2d/collision/b2_dynamic_tree.ts\");\nvar b2Pair = (function () {\n    function b2Pair(proxyA, proxyB) {\n        this.proxyA = proxyA;\n        this.proxyB = proxyB;\n    }\n    return b2Pair;\n}());\nexports.b2Pair = b2Pair;\nvar b2BroadPhase = (function () {\n    function b2BroadPhase() {\n        this.m_tree = new b2_dynamic_tree_1.b2DynamicTree();\n        this.m_proxyCount = 0;\n        this.m_moveCount = 0;\n        this.m_moveBuffer = [];\n        this.m_pairCount = 0;\n        this.m_pairBuffer = [];\n    }\n    b2BroadPhase.prototype.CreateProxy = function (aabb, userData) {\n        var proxy = this.m_tree.CreateProxy(aabb, userData);\n        ++this.m_proxyCount;\n        this.BufferMove(proxy);\n        return proxy;\n    };\n    b2BroadPhase.prototype.DestroyProxy = function (proxy) {\n        this.UnBufferMove(proxy);\n        --this.m_proxyCount;\n        this.m_tree.DestroyProxy(proxy);\n    };\n    b2BroadPhase.prototype.MoveProxy = function (proxy, aabb, displacement) {\n        var buffer = this.m_tree.MoveProxy(proxy, aabb, displacement);\n        if (buffer) {\n            this.BufferMove(proxy);\n        }\n    };\n    b2BroadPhase.prototype.TouchProxy = function (proxy) {\n        this.BufferMove(proxy);\n    };\n    b2BroadPhase.prototype.GetProxyCount = function () {\n        return this.m_proxyCount;\n    };\n    b2BroadPhase.prototype.UpdatePairs = function (callback) {\n        var _this = this;\n        this.m_pairCount = 0;\n        var _loop_1 = function (i) {\n            var queryProxy = this_1.m_moveBuffer[i];\n            if (queryProxy === null) {\n                return \"continue\";\n            }\n            var fatAABB = queryProxy.aabb;\n            this_1.m_tree.Query(fatAABB, function (proxy) {\n                if (proxy.m_id === queryProxy.m_id) {\n                    return true;\n                }\n                var moved = proxy.moved;\n                if (moved && proxy.m_id > queryProxy.m_id) {\n                    return true;\n                }\n                var proxyA;\n                var proxyB;\n                if (proxy.m_id < queryProxy.m_id) {\n                    proxyA = proxy;\n                    proxyB = queryProxy;\n                }\n                else {\n                    proxyA = queryProxy;\n                    proxyB = proxy;\n                }\n                if (_this.m_pairCount === _this.m_pairBuffer.length) {\n                    _this.m_pairBuffer[_this.m_pairCount] = new b2Pair(proxyA, proxyB);\n                }\n                else {\n                    var pair = _this.m_pairBuffer[_this.m_pairCount];\n                    pair.proxyA = proxyA;\n                    pair.proxyB = proxyB;\n                }\n                ++_this.m_pairCount;\n                return true;\n            });\n        };\n        var this_1 = this;\n        for (var i = 0; i < this.m_moveCount; ++i) {\n            _loop_1(i);\n        }\n        for (var i = 0; i < this.m_pairCount; ++i) {\n            var primaryPair = this.m_pairBuffer[i];\n            var userDataA = primaryPair.proxyA.userData;\n            var userDataB = primaryPair.proxyB.userData;\n            callback(userDataA, userDataB);\n        }\n        for (var i = 0; i < this.m_moveCount; ++i) {\n            var proxy = this.m_moveBuffer[i];\n            if (proxy === null) {\n                continue;\n            }\n            proxy.moved = false;\n        }\n        this.m_moveCount = 0;\n    };\n    b2BroadPhase.prototype.Query = function (aabb, callback) {\n        this.m_tree.Query(aabb, callback);\n    };\n    b2BroadPhase.prototype.QueryPoint = function (point, callback) {\n        this.m_tree.QueryPoint(point, callback);\n    };\n    b2BroadPhase.prototype.RayCast = function (input, callback) {\n        this.m_tree.RayCast(input, callback);\n    };\n    b2BroadPhase.prototype.GetTreeHeight = function () {\n        return this.m_tree.GetHeight();\n    };\n    b2BroadPhase.prototype.GetTreeBalance = function () {\n        return this.m_tree.GetMaxBalance();\n    };\n    b2BroadPhase.prototype.GetTreeQuality = function () {\n        return this.m_tree.GetAreaRatio();\n    };\n    b2BroadPhase.prototype.ShiftOrigin = function (newOrigin) {\n        this.m_tree.ShiftOrigin(newOrigin);\n    };\n    b2BroadPhase.prototype.BufferMove = function (proxy) {\n        this.m_moveBuffer[this.m_moveCount] = proxy;\n        ++this.m_moveCount;\n    };\n    b2BroadPhase.prototype.UnBufferMove = function (proxy) {\n        for (var i = 0; i < this.m_moveCount; ++i) {\n            if (this.m_moveBuffer[i] === proxy) {\n                this.m_moveBuffer[i] = null;\n            }\n        }\n    };\n    return b2BroadPhase;\n}());\nexports.b2BroadPhase = b2BroadPhase;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2Jyb2FkX3BoYXNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbGxpc2lvbi9iMl9icm9hZF9waGFzZS50cz9iZWE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5pbXBvcnQgeyBiMlZlYzIsIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkFBQkIsIGIyUmF5Q2FzdElucHV0IH0gZnJvbSBcIi4vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMlRyZWVOb2RlLCBiMkR5bmFtaWNUcmVlIH0gZnJvbSBcIi4vYjJfZHluYW1pY190cmVlXCI7XG5cbmV4cG9ydCBjbGFzcyBiMlBhaXI8VD4ge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcHJveHlBOiBiMlRyZWVOb2RlPFQ+LCBwdWJsaWMgcHJveHlCOiBiMlRyZWVOb2RlPFQ+KSB7IH1cbn1cblxuLy8vIFRoZSBicm9hZC1waGFzZSBpcyB1c2VkIGZvciBjb21wdXRpbmcgcGFpcnMgYW5kIHBlcmZvcm1pbmcgdm9sdW1lIHF1ZXJpZXMgYW5kIHJheSBjYXN0cy5cbi8vLyBUaGlzIGJyb2FkLXBoYXNlIGRvZXMgbm90IHBlcnNpc3QgcGFpcnMuIEluc3RlYWQsIHRoaXMgcmVwb3J0cyBwb3RlbnRpYWxseSBuZXcgcGFpcnMuXG4vLy8gSXQgaXMgdXAgdG8gdGhlIGNsaWVudCB0byBjb25zdW1lIHRoZSBuZXcgcGFpcnMgYW5kIHRvIHRyYWNrIHN1YnNlcXVlbnQgb3ZlcmxhcC5cbmV4cG9ydCBjbGFzcyBiMkJyb2FkUGhhc2U8VD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgbV90cmVlOiBiMkR5bmFtaWNUcmVlPFQ+ID0gbmV3IGIyRHluYW1pY1RyZWU8VD4oKTtcbiAgcHVibGljIG1fcHJveHlDb3VudDogbnVtYmVyID0gMDtcbiAgLy8gcHVibGljIG1fbW92ZUNhcGFjaXR5OiBudW1iZXIgPSAxNjtcbiAgcHVibGljIG1fbW92ZUNvdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9tb3ZlQnVmZmVyOiBBcnJheTxiMlRyZWVOb2RlPFQ+IHwgbnVsbD4gPSBbXTtcbiAgLy8gcHVibGljIG1fcGFpckNhcGFjaXR5OiBudW1iZXIgPSAxNjtcbiAgcHVibGljIG1fcGFpckNvdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9wYWlyQnVmZmVyOiBBcnJheTxiMlBhaXI8VD4+ID0gW107XG4gIC8vIHB1YmxpYyBtX3F1ZXJ5UHJveHlJZDogbnVtYmVyID0gMDtcblxuICAvLy8gQ3JlYXRlIGEgcHJveHkgd2l0aCBhbiBpbml0aWFsIEFBQkIuIFBhaXJzIGFyZSBub3QgcmVwb3J0ZWQgdW50aWxcbiAgLy8vIFVwZGF0ZVBhaXJzIGlzIGNhbGxlZC5cbiAgcHVibGljIENyZWF0ZVByb3h5KGFhYmI6IGIyQUFCQiwgdXNlckRhdGE6IFQpOiBiMlRyZWVOb2RlPFQ+IHtcbiAgICBjb25zdCBwcm94eTogYjJUcmVlTm9kZTxUPiA9IHRoaXMubV90cmVlLkNyZWF0ZVByb3h5KGFhYmIsIHVzZXJEYXRhKTtcbiAgICArK3RoaXMubV9wcm94eUNvdW50O1xuICAgIHRoaXMuQnVmZmVyTW92ZShwcm94eSk7XG4gICAgcmV0dXJuIHByb3h5O1xuICB9XG5cbiAgLy8vIERlc3Ryb3kgYSBwcm94eS4gSXQgaXMgdXAgdG8gdGhlIGNsaWVudCB0byByZW1vdmUgYW55IHBhaXJzLlxuICBwdWJsaWMgRGVzdHJveVByb3h5KHByb3h5OiBiMlRyZWVOb2RlPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5VbkJ1ZmZlck1vdmUocHJveHkpO1xuICAgIC0tdGhpcy5tX3Byb3h5Q291bnQ7XG4gICAgdGhpcy5tX3RyZWUuRGVzdHJveVByb3h5KHByb3h5KTtcbiAgfVxuXG4gIC8vLyBDYWxsIE1vdmVQcm94eSBhcyBtYW55IHRpbWVzIGFzIHlvdSBsaWtlLCB0aGVuIHdoZW4geW91IGFyZSBkb25lXG4gIC8vLyBjYWxsIFVwZGF0ZVBhaXJzIHRvIGZpbmFsaXplZCB0aGUgcHJveHkgcGFpcnMgKGZvciB5b3VyIHRpbWUgc3RlcCkuXG4gIHB1YmxpYyBNb3ZlUHJveHkocHJveHk6IGIyVHJlZU5vZGU8VD4sIGFhYmI6IGIyQUFCQiwgZGlzcGxhY2VtZW50OiBiMlZlYzIpOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXI6IGJvb2xlYW4gPSB0aGlzLm1fdHJlZS5Nb3ZlUHJveHkocHJveHksIGFhYmIsIGRpc3BsYWNlbWVudCk7XG4gICAgaWYgKGJ1ZmZlcikge1xuICAgICAgdGhpcy5CdWZmZXJNb3ZlKHByb3h5KTtcbiAgICB9XG4gIH1cblxuICAvLy8gQ2FsbCB0byB0cmlnZ2VyIGEgcmUtcHJvY2Vzc2luZyBvZiBpdCdzIHBhaXJzIG9uIHRoZSBuZXh0IGNhbGwgdG8gVXBkYXRlUGFpcnMuXG4gIHB1YmxpYyBUb3VjaFByb3h5KHByb3h5OiBiMlRyZWVOb2RlPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5CdWZmZXJNb3ZlKHByb3h5KTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGZhdCBBQUJCIGZvciBhIHByb3h5LlxuICAvLyBwdWJsaWMgR2V0RmF0QUFCQihwcm94eTogYjJUcmVlTm9kZTxUPik6IGIyQUFCQiB7XG4gIC8vICAgcmV0dXJuIHRoaXMubV90cmVlLkdldEZhdEFBQkIocHJveHkpO1xuICAvLyB9XG5cbiAgLy8vIEdldCB1c2VyIGRhdGEgZnJvbSBhIHByb3h5LiBSZXR1cm5zIE5VTEwgaWYgdGhlIGlkIGlzIGludmFsaWQuXG4gIC8vIHB1YmxpYyBHZXRVc2VyRGF0YShwcm94eTogYjJUcmVlTm9kZTxUPik6IFQge1xuICAvLyAgIHJldHVybiB0aGlzLm1fdHJlZS5HZXRVc2VyRGF0YShwcm94eSk7XG4gIC8vIH1cblxuICAvLy8gVGVzdCBvdmVybGFwIG9mIGZhdCBBQUJCcy5cbiAgLy8gcHVibGljIFRlc3RPdmVybGFwKHByb3h5QTogYjJUcmVlTm9kZTxUPiwgcHJveHlCOiBiMlRyZWVOb2RlPFQ+KTogYm9vbGVhbiB7XG4gIC8vICAgY29uc3QgYWFiYkE6IGIyQUFCQiA9IHRoaXMubV90cmVlLkdldEZhdEFBQkIocHJveHlBKTtcbiAgLy8gICBjb25zdCBhYWJiQjogYjJBQUJCID0gdGhpcy5tX3RyZWUuR2V0RmF0QUFCQihwcm94eUIpO1xuICAvLyAgIHJldHVybiBiMlRlc3RPdmVybGFwQUFCQihhYWJiQSwgYWFiYkIpO1xuICAvLyB9XG5cbiAgLy8vIEdldCB0aGUgbnVtYmVyIG9mIHByb3hpZXMuXG4gIHB1YmxpYyBHZXRQcm94eUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9wcm94eUNvdW50O1xuICB9XG5cbiAgLy8vIFVwZGF0ZSB0aGUgcGFpcnMuIFRoaXMgcmVzdWx0cyBpbiBwYWlyIGNhbGxiYWNrcy4gVGhpcyBjYW4gb25seSBhZGQgcGFpcnMuXG4gIHB1YmxpYyBVcGRhdGVQYWlycyhjYWxsYmFjazogKGE6IFQsIGI6IFQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAvLyBSZXNldCBwYWlyIGJ1ZmZlclxuICAgIHRoaXMubV9wYWlyQ291bnQgPSAwO1xuXG4gICAgLy8gUGVyZm9ybSB0cmVlIHF1ZXJpZXMgZm9yIGFsbCBtb3ZpbmcgcHJveGllcy5cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX21vdmVDb3VudDsgKytpKSB7XG4gICAgICBjb25zdCBxdWVyeVByb3h5OiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHRoaXMubV9tb3ZlQnVmZmVyW2ldO1xuICAgICAgaWYgKHF1ZXJ5UHJveHkgPT09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoaXMgaXMgY2FsbGVkIGZyb20gYjIuRHluYW1pY1RyZWU6OlF1ZXJ5IHdoZW4gd2UgYXJlIGdhdGhlcmluZyBwYWlycy5cbiAgICAgIC8vIGJvb2xlYW4gYjJCcm9hZFBoYXNlOjpRdWVyeUNhbGxiYWNrKGludDMyIHByb3h5SWQpO1xuXG4gICAgICAvLyBXZSBoYXZlIHRvIHF1ZXJ5IHRoZSB0cmVlIHdpdGggdGhlIGZhdCBBQUJCIHNvIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IGZhaWwgdG8gY3JlYXRlIGEgcGFpciB0aGF0IG1heSB0b3VjaCBsYXRlci5cbiAgICAgIGNvbnN0IGZhdEFBQkI6IGIyQUFCQiA9IHF1ZXJ5UHJveHkuYWFiYjsgLy8gdGhpcy5tX3RyZWUuR2V0RmF0QUFCQihxdWVyeVByb3h5KTtcblxuICAgICAgLy8gUXVlcnkgdHJlZSwgY3JlYXRlIHBhaXJzIGFuZCBhZGQgdGhlbSBwYWlyIGJ1ZmZlci5cbiAgICAgIHRoaXMubV90cmVlLlF1ZXJ5KGZhdEFBQkIsIChwcm94eTogYjJUcmVlTm9kZTxUPik6IGJvb2xlYW4gPT4ge1xuICAgICAgICAvLyBBIHByb3h5IGNhbm5vdCBmb3JtIGEgcGFpciB3aXRoIGl0c2VsZi5cbiAgICAgICAgaWYgKHByb3h5Lm1faWQgPT09IHF1ZXJ5UHJveHkubV9pZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbW92ZWQ6IGJvb2xlYW4gPSBwcm94eS5tb3ZlZDsgLy8gdGhpcy5tX3RyZWUuV2FzTW92ZWQocHJveHkpO1xuICAgICAgICBpZiAobW92ZWQgJiYgcHJveHkubV9pZCA+IHF1ZXJ5UHJveHkubV9pZCkge1xuICAgICAgICAgIC8vIEJvdGggcHJveGllcyBhcmUgbW92aW5nLiBBdm9pZCBkdXBsaWNhdGUgcGFpcnMuXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zdCBwcm94eUEgPSBwcm94eSA8IHF1ZXJ5UHJveHkgPyBwcm94eSA6IHF1ZXJ5UHJveHk7XG4gICAgICAgIC8vIGNvbnN0IHByb3h5QiA9IHByb3h5ID49IHF1ZXJ5UHJveHkgPyBwcm94eSA6IHF1ZXJ5UHJveHk7XG4gICAgICAgIGxldCBwcm94eUE6IGIyVHJlZU5vZGU8VD47XG4gICAgICAgIGxldCBwcm94eUI6IGIyVHJlZU5vZGU8VD47XG4gICAgICAgIGlmIChwcm94eS5tX2lkIDwgcXVlcnlQcm94eS5tX2lkKSB7XG4gICAgICAgICAgcHJveHlBID0gcHJveHk7XG4gICAgICAgICAgcHJveHlCID0gcXVlcnlQcm94eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm94eUEgPSBxdWVyeVByb3h5O1xuICAgICAgICAgIHByb3h5QiA9IHByb3h5O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR3JvdyB0aGUgcGFpciBidWZmZXIgYXMgbmVlZGVkLlxuICAgICAgICBpZiAodGhpcy5tX3BhaXJDb3VudCA9PT0gdGhpcy5tX3BhaXJCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5tX3BhaXJCdWZmZXJbdGhpcy5tX3BhaXJDb3VudF0gPSBuZXcgYjJQYWlyKHByb3h5QSwgcHJveHlCKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBwYWlyOiBiMlBhaXI8VD4gPSB0aGlzLm1fcGFpckJ1ZmZlclt0aGlzLm1fcGFpckNvdW50XTtcbiAgICAgICAgICBwYWlyLnByb3h5QSA9IHByb3h5QTtcbiAgICAgICAgICBwYWlyLnByb3h5QiA9IHByb3h5QjtcbiAgICAgICAgfVxuXG4gICAgICAgICsrdGhpcy5tX3BhaXJDb3VudDtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNlbmQgcGFpcnMgdG8gY2FsbGVyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fcGFpckNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IHByaW1hcnlQYWlyOiBiMlBhaXI8VD4gPSB0aGlzLm1fcGFpckJ1ZmZlcltpXTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhQTogVCA9IHByaW1hcnlQYWlyLnByb3h5QS51c2VyRGF0YTsgLy8gdGhpcy5tX3RyZWUuR2V0VXNlckRhdGEocHJpbWFyeVBhaXIucHJveHlBKTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhQjogVCA9IHByaW1hcnlQYWlyLnByb3h5Qi51c2VyRGF0YTsgLy8gdGhpcy5tX3RyZWUuR2V0VXNlckRhdGEocHJpbWFyeVBhaXIucHJveHlCKTtcblxuICAgICAgY2FsbGJhY2sodXNlckRhdGFBLCB1c2VyRGF0YUIpO1xuICB9XG5cbiAgICAvLyBDbGVhciBtb3ZlIGZsYWdzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fbW92ZUNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IHByb3h5OiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHRoaXMubV9tb3ZlQnVmZmVyW2ldO1xuICAgICAgaWYgKHByb3h5ID09PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBwcm94eS5tb3ZlZCA9IGZhbHNlOyAvLyB0aGlzLm1fdHJlZS5DbGVhck1vdmVkKHByb3h5KTtcbiAgICB9XG5cbiAgICAvLyBSZXNldCBtb3ZlIGJ1ZmZlclxuICAgIHRoaXMubV9tb3ZlQ291bnQgPSAwO1xuICB9XG5cbiAgLy8vIFF1ZXJ5IGFuIEFBQkIgZm9yIG92ZXJsYXBwaW5nIHByb3hpZXMuIFRoZSBjYWxsYmFjayBjbGFzc1xuICAvLy8gaXMgY2FsbGVkIGZvciBlYWNoIHByb3h5IHRoYXQgb3ZlcmxhcHMgdGhlIHN1cHBsaWVkIEFBQkIuXG4gIHB1YmxpYyBRdWVyeShhYWJiOiBiMkFBQkIsIGNhbGxiYWNrOiAobm9kZTogYjJUcmVlTm9kZTxUPikgPT4gYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMubV90cmVlLlF1ZXJ5KGFhYmIsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHB1YmxpYyBRdWVyeVBvaW50KHBvaW50OiBYWSwgY2FsbGJhY2s6IChub2RlOiBiMlRyZWVOb2RlPFQ+KSA9PiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5tX3RyZWUuUXVlcnlQb2ludChwb2ludCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLy8vIFJheS1jYXN0IGFnYWluc3QgdGhlIHByb3hpZXMgaW4gdGhlIHRyZWUuIFRoaXMgcmVsaWVzIG9uIHRoZSBjYWxsYmFja1xuICAvLy8gdG8gcGVyZm9ybSBhIGV4YWN0IHJheS1jYXN0IGluIHRoZSBjYXNlIHdlcmUgdGhlIHByb3h5IGNvbnRhaW5zIGEgc2hhcGUuXG4gIC8vLyBUaGUgY2FsbGJhY2sgYWxzbyBwZXJmb3JtcyB0aGUgYW55IGNvbGxpc2lvbiBmaWx0ZXJpbmcuIFRoaXMgaGFzIHBlcmZvcm1hbmNlXG4gIC8vLyByb3VnaGx5IGVxdWFsIHRvIGsgKiBsb2cobiksIHdoZXJlIGsgaXMgdGhlIG51bWJlciBvZiBjb2xsaXNpb25zIGFuZCBuIGlzIHRoZVxuICAvLy8gbnVtYmVyIG9mIHByb3hpZXMgaW4gdGhlIHRyZWUuXG4gIC8vLyBAcGFyYW0gaW5wdXQgdGhlIHJheS1jYXN0IGlucHV0IGRhdGEuIFRoZSByYXkgZXh0ZW5kcyBmcm9tIHAxIHRvIHAxICsgbWF4RnJhY3Rpb24gKiAocDIgLSBwMSkuXG4gIC8vLyBAcGFyYW0gY2FsbGJhY2sgYSBjYWxsYmFjayBjbGFzcyB0aGF0IGlzIGNhbGxlZCBmb3IgZWFjaCBwcm94eSB0aGF0IGlzIGhpdCBieSB0aGUgcmF5LlxuICBwdWJsaWMgUmF5Q2FzdChpbnB1dDogYjJSYXlDYXN0SW5wdXQsIGNhbGxiYWNrOiAoaW5wdXQ6IGIyUmF5Q2FzdElucHV0LCBub2RlOiBiMlRyZWVOb2RlPFQ+KSA9PiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fdHJlZS5SYXlDYXN0KGlucHV0LCBjYWxsYmFjayk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBoZWlnaHQgb2YgdGhlIGVtYmVkZGVkIHRyZWUuXG4gIHB1YmxpYyBHZXRUcmVlSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV90cmVlLkdldEhlaWdodCgpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgYmFsYW5jZSBvZiB0aGUgZW1iZWRkZWQgdHJlZS5cbiAgcHVibGljIEdldFRyZWVCYWxhbmNlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV90cmVlLkdldE1heEJhbGFuY2UoKTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHF1YWxpdHkgbWV0cmljIG9mIHRoZSBlbWJlZGRlZCB0cmVlLlxuICBwdWJsaWMgR2V0VHJlZVF1YWxpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX3RyZWUuR2V0QXJlYVJhdGlvKCk7XG4gIH1cblxuICAvLy8gU2hpZnQgdGhlIHdvcmxkIG9yaWdpbi4gVXNlZnVsIGZvciBsYXJnZSB3b3JsZHMuXG4gIC8vLyBUaGUgc2hpZnQgZm9ybXVsYSBpczogcG9zaXRpb24gLT0gbmV3T3JpZ2luXG4gIC8vLyBAcGFyYW0gbmV3T3JpZ2luIHRoZSBuZXcgb3JpZ2luIHdpdGggcmVzcGVjdCB0byB0aGUgb2xkIG9yaWdpblxuICBwdWJsaWMgU2hpZnRPcmlnaW4obmV3T3JpZ2luOiBYWSk6IHZvaWQge1xuICAgIHRoaXMubV90cmVlLlNoaWZ0T3JpZ2luKG5ld09yaWdpbik7XG4gIH1cblxuICBwdWJsaWMgQnVmZmVyTW92ZShwcm94eTogYjJUcmVlTm9kZTxUPik6IHZvaWQge1xuICAgIHRoaXMubV9tb3ZlQnVmZmVyW3RoaXMubV9tb3ZlQ291bnRdID0gcHJveHk7XG4gICAgKyt0aGlzLm1fbW92ZUNvdW50O1xuICB9XG5cbiAgcHVibGljIFVuQnVmZmVyTW92ZShwcm94eTogYjJUcmVlTm9kZTxUPik6IHZvaWQge1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fbW92ZUNvdW50OyArK2kpIHtcbiAgICAgIGlmICh0aGlzLm1fbW92ZUJ1ZmZlcltpXSA9PT0gcHJveHkpIHtcbiAgICAgICAgdGhpcy5tX21vdmVCdWZmZXJbaV0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFvQkE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUZBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQWdNQTtBQTNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQU9BO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTs7O0FBbERBO0FBQUE7QUFtREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXhNQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_broad_phase.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_collide_circle.ts":
/*!**************************************************!*\
  !*** ./src/box2d/collision/b2_collide_circle.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2CollidePolygonAndCircle = exports.b2CollideCircles = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ./b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2CollideCircles_s_pA = new b2_math_1.b2Vec2();\nvar b2CollideCircles_s_pB = new b2_math_1.b2Vec2();\nfunction b2CollideCircles(manifold, circleA, xfA, circleB, xfB) {\n    manifold.pointCount = 0;\n    var pA = b2_math_1.b2Transform.MulXV(xfA, circleA.m_p, b2CollideCircles_s_pA);\n    var pB = b2_math_1.b2Transform.MulXV(xfB, circleB.m_p, b2CollideCircles_s_pB);\n    var distSqr = b2_math_1.b2Vec2.DistanceSquaredVV(pA, pB);\n    var radius = circleA.m_radius + circleB.m_radius;\n    if (distSqr > radius * radius) {\n        return;\n    }\n    manifold.type = b2_collision_1.b2ManifoldType.e_circles;\n    manifold.localPoint.Copy(circleA.m_p);\n    manifold.localNormal.SetZero();\n    manifold.pointCount = 1;\n    manifold.points[0].localPoint.Copy(circleB.m_p);\n    manifold.points[0].id.key = 0;\n}\nexports.b2CollideCircles = b2CollideCircles;\nvar b2CollidePolygonAndCircle_s_c = new b2_math_1.b2Vec2();\nvar b2CollidePolygonAndCircle_s_cLocal = new b2_math_1.b2Vec2();\nvar b2CollidePolygonAndCircle_s_faceCenter = new b2_math_1.b2Vec2();\nfunction b2CollidePolygonAndCircle(manifold, polygonA, xfA, circleB, xfB) {\n    manifold.pointCount = 0;\n    var c = b2_math_1.b2Transform.MulXV(xfB, circleB.m_p, b2CollidePolygonAndCircle_s_c);\n    var cLocal = b2_math_1.b2Transform.MulTXV(xfA, c, b2CollidePolygonAndCircle_s_cLocal);\n    var normalIndex = 0;\n    var separation = (-b2_settings_1.b2_maxFloat);\n    var radius = polygonA.m_radius + circleB.m_radius;\n    var vertexCount = polygonA.m_count;\n    var vertices = polygonA.m_vertices;\n    var normals = polygonA.m_normals;\n    for (var i = 0; i < vertexCount; ++i) {\n        var s = b2_math_1.b2Vec2.DotVV(normals[i], b2_math_1.b2Vec2.SubVV(cLocal, vertices[i], b2_math_1.b2Vec2.s_t0));\n        if (s > radius) {\n            return;\n        }\n        if (s > separation) {\n            separation = s;\n            normalIndex = i;\n        }\n    }\n    var vertIndex1 = normalIndex;\n    var vertIndex2 = (vertIndex1 + 1) % vertexCount;\n    var v1 = vertices[vertIndex1];\n    var v2 = vertices[vertIndex2];\n    if (separation < b2_settings_1.b2_epsilon) {\n        manifold.pointCount = 1;\n        manifold.type = b2_collision_1.b2ManifoldType.e_faceA;\n        manifold.localNormal.Copy(normals[normalIndex]);\n        b2_math_1.b2Vec2.MidVV(v1, v2, manifold.localPoint);\n        manifold.points[0].localPoint.Copy(circleB.m_p);\n        manifold.points[0].id.key = 0;\n        return;\n    }\n    var u1 = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(cLocal, v1, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(v2, v1, b2_math_1.b2Vec2.s_t1));\n    var u2 = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(cLocal, v2, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(v1, v2, b2_math_1.b2Vec2.s_t1));\n    if (u1 <= 0) {\n        if (b2_math_1.b2Vec2.DistanceSquaredVV(cLocal, v1) > radius * radius) {\n            return;\n        }\n        manifold.pointCount = 1;\n        manifold.type = b2_collision_1.b2ManifoldType.e_faceA;\n        b2_math_1.b2Vec2.SubVV(cLocal, v1, manifold.localNormal).SelfNormalize();\n        manifold.localPoint.Copy(v1);\n        manifold.points[0].localPoint.Copy(circleB.m_p);\n        manifold.points[0].id.key = 0;\n    }\n    else if (u2 <= 0) {\n        if (b2_math_1.b2Vec2.DistanceSquaredVV(cLocal, v2) > radius * radius) {\n            return;\n        }\n        manifold.pointCount = 1;\n        manifold.type = b2_collision_1.b2ManifoldType.e_faceA;\n        b2_math_1.b2Vec2.SubVV(cLocal, v2, manifold.localNormal).SelfNormalize();\n        manifold.localPoint.Copy(v2);\n        manifold.points[0].localPoint.Copy(circleB.m_p);\n        manifold.points[0].id.key = 0;\n    }\n    else {\n        var faceCenter = b2_math_1.b2Vec2.MidVV(v1, v2, b2CollidePolygonAndCircle_s_faceCenter);\n        var separation_1 = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(cLocal, faceCenter, b2_math_1.b2Vec2.s_t1), normals[vertIndex1]);\n        if (separation_1 > radius) {\n            return;\n        }\n        manifold.pointCount = 1;\n        manifold.type = b2_collision_1.b2ManifoldType.e_faceA;\n        manifold.localNormal.Copy(normals[vertIndex1]).SelfNormalize();\n        manifold.localPoint.Copy(faceCenter);\n        manifold.points[0].localPoint.Copy(circleB.m_p);\n        manifold.points[0].id.key = 0;\n    }\n}\nexports.b2CollidePolygonAndCircle = b2CollidePolygonAndCircle;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2NvbGxpZGVfY2lyY2xlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbGxpc2lvbi9iMl9jb2xsaWRlX2NpcmNsZS50cz9kZDBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGIyX21heEZsb2F0LCBiMl9lcHNpbG9uIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJWZWMyLCBiMlRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCwgYjJNYW5pZm9sZFR5cGUgfSBmcm9tIFwiLi9iMl9jb2xsaXNpb25cIjtcbmltcG9ydCB7IGIyQ2lyY2xlU2hhcGUgfSBmcm9tIFwiLi9iMl9jaXJjbGVfc2hhcGVcIjtcbmltcG9ydCB7IGIyUG9seWdvblNoYXBlIH0gZnJvbSBcIi4vYjJfcG9seWdvbl9zaGFwZVwiO1xuXG5jb25zdCBiMkNvbGxpZGVDaXJjbGVzX3NfcEE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyQ29sbGlkZUNpcmNsZXNfc19wQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuZXhwb3J0IGZ1bmN0aW9uIGIyQ29sbGlkZUNpcmNsZXMobWFuaWZvbGQ6IGIyTWFuaWZvbGQsIGNpcmNsZUE6IGIyQ2lyY2xlU2hhcGUsIHhmQTogYjJUcmFuc2Zvcm0sIGNpcmNsZUI6IGIyQ2lyY2xlU2hhcGUsIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDA7XG5cbiAgY29uc3QgcEE6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgY2lyY2xlQS5tX3AsIGIyQ29sbGlkZUNpcmNsZXNfc19wQSk7XG4gIGNvbnN0IHBCOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIGNpcmNsZUIubV9wLCBiMkNvbGxpZGVDaXJjbGVzX3NfcEIpO1xuXG4gIGNvbnN0IGRpc3RTcXI6IG51bWJlciA9IGIyVmVjMi5EaXN0YW5jZVNxdWFyZWRWVihwQSwgcEIpO1xuICBjb25zdCByYWRpdXM6IG51bWJlciA9IGNpcmNsZUEubV9yYWRpdXMgKyBjaXJjbGVCLm1fcmFkaXVzO1xuICBpZiAoZGlzdFNxciA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG1hbmlmb2xkLnR5cGUgPSBiMk1hbmlmb2xkVHlwZS5lX2NpcmNsZXM7XG4gIG1hbmlmb2xkLmxvY2FsUG9pbnQuQ29weShjaXJjbGVBLm1fcCk7XG4gIG1hbmlmb2xkLmxvY2FsTm9ybWFsLlNldFplcm8oKTtcbiAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG5cbiAgbWFuaWZvbGQucG9pbnRzWzBdLmxvY2FsUG9pbnQuQ29weShjaXJjbGVCLm1fcCk7XG4gIG1hbmlmb2xkLnBvaW50c1swXS5pZC5rZXkgPSAwO1xufVxuXG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlX3NfYzogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbkFuZENpcmNsZV9zX2NMb2NhbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbkFuZENpcmNsZV9zX2ZhY2VDZW50ZXI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmV4cG9ydCBmdW5jdGlvbiBiMkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlKG1hbmlmb2xkOiBiMk1hbmlmb2xkLCBwb2x5Z29uQTogYjJQb2x5Z29uU2hhcGUsIHhmQTogYjJUcmFuc2Zvcm0sIGNpcmNsZUI6IGIyQ2lyY2xlU2hhcGUsIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDA7XG5cbiAgLy8gQ29tcHV0ZSBjaXJjbGUgcG9zaXRpb24gaW4gdGhlIGZyYW1lIG9mIHRoZSBwb2x5Z29uLlxuICBjb25zdCBjOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIGNpcmNsZUIubV9wLCBiMkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlX3NfYyk7XG4gIGNvbnN0IGNMb2NhbDogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsVFhWKHhmQSwgYywgYjJDb2xsaWRlUG9seWdvbkFuZENpcmNsZV9zX2NMb2NhbCk7XG5cbiAgLy8gRmluZCB0aGUgbWluIHNlcGFyYXRpbmcgZWRnZS5cbiAgbGV0IG5vcm1hbEluZGV4OiBudW1iZXIgPSAwO1xuICBsZXQgc2VwYXJhdGlvbjogbnVtYmVyID0gKC1iMl9tYXhGbG9hdCk7XG4gIGNvbnN0IHJhZGl1czogbnVtYmVyID0gcG9seWdvbkEubV9yYWRpdXMgKyBjaXJjbGVCLm1fcmFkaXVzO1xuICBjb25zdCB2ZXJ0ZXhDb3VudDogbnVtYmVyID0gcG9seWdvbkEubV9jb3VudDtcbiAgY29uc3QgdmVydGljZXM6IGIyVmVjMltdID0gcG9seWdvbkEubV92ZXJ0aWNlcztcbiAgY29uc3Qgbm9ybWFsczogYjJWZWMyW10gPSBwb2x5Z29uQS5tX25vcm1hbHM7XG5cbiAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHZlcnRleENvdW50OyArK2kpIHtcbiAgICBjb25zdCBzOiBudW1iZXIgPSBiMlZlYzIuRG90VlYobm9ybWFsc1tpXSwgYjJWZWMyLlN1YlZWKGNMb2NhbCwgdmVydGljZXNbaV0sIGIyVmVjMi5zX3QwKSk7XG5cbiAgICBpZiAocyA+IHJhZGl1cykge1xuICAgICAgLy8gRWFybHkgb3V0LlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzID4gc2VwYXJhdGlvbikge1xuICAgICAgc2VwYXJhdGlvbiA9IHM7XG4gICAgICBub3JtYWxJbmRleCA9IGk7XG4gICAgfVxuICB9XG5cbiAgLy8gVmVydGljZXMgdGhhdCBzdWJ0ZW5kIHRoZSBpbmNpZGVudCBmYWNlLlxuICBjb25zdCB2ZXJ0SW5kZXgxOiBudW1iZXIgPSBub3JtYWxJbmRleDtcbiAgY29uc3QgdmVydEluZGV4MjogbnVtYmVyID0gKHZlcnRJbmRleDEgKyAxKSAlIHZlcnRleENvdW50O1xuICBjb25zdCB2MTogYjJWZWMyID0gdmVydGljZXNbdmVydEluZGV4MV07XG4gIGNvbnN0IHYyOiBiMlZlYzIgPSB2ZXJ0aWNlc1t2ZXJ0SW5kZXgyXTtcblxuICAvLyBJZiB0aGUgY2VudGVyIGlzIGluc2lkZSB0aGUgcG9seWdvbiAuLi5cbiAgaWYgKHNlcGFyYXRpb24gPCBiMl9lcHNpbG9uKSB7XG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG4gICAgbWFuaWZvbGQudHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfZmFjZUE7XG4gICAgbWFuaWZvbGQubG9jYWxOb3JtYWwuQ29weShub3JtYWxzW25vcm1hbEluZGV4XSk7XG4gICAgYjJWZWMyLk1pZFZWKHYxLCB2MiwgbWFuaWZvbGQubG9jYWxQb2ludCk7XG4gICAgbWFuaWZvbGQucG9pbnRzWzBdLmxvY2FsUG9pbnQuQ29weShjaXJjbGVCLm1fcCk7XG4gICAgbWFuaWZvbGQucG9pbnRzWzBdLmlkLmtleSA9IDA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSBiYXJ5Y2VudHJpYyBjb29yZGluYXRlc1xuICBjb25zdCB1MTogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihjTG9jYWwsIHYxLCBiMlZlYzIuc190MCksIGIyVmVjMi5TdWJWVih2MiwgdjEsIGIyVmVjMi5zX3QxKSk7XG4gIGNvbnN0IHUyOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKGNMb2NhbCwgdjIsIGIyVmVjMi5zX3QwKSwgYjJWZWMyLlN1YlZWKHYxLCB2MiwgYjJWZWMyLnNfdDEpKTtcbiAgaWYgKHUxIDw9IDApIHtcbiAgICBpZiAoYjJWZWMyLkRpc3RhbmNlU3F1YXJlZFZWKGNMb2NhbCwgdjEpID4gcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG4gICAgbWFuaWZvbGQudHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfZmFjZUE7XG4gICAgYjJWZWMyLlN1YlZWKGNMb2NhbCwgdjEsIG1hbmlmb2xkLmxvY2FsTm9ybWFsKS5TZWxmTm9ybWFsaXplKCk7XG4gICAgbWFuaWZvbGQubG9jYWxQb2ludC5Db3B5KHYxKTtcbiAgICBtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludC5Db3B5KGNpcmNsZUIubV9wKTtcbiAgICBtYW5pZm9sZC5wb2ludHNbMF0uaWQua2V5ID0gMDtcbiAgfSBlbHNlIGlmICh1MiA8PSAwKSB7XG4gICAgaWYgKGIyVmVjMi5EaXN0YW5jZVNxdWFyZWRWVihjTG9jYWwsIHYyKSA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSAxO1xuICAgIG1hbmlmb2xkLnR5cGUgPSBiMk1hbmlmb2xkVHlwZS5lX2ZhY2VBO1xuICAgIGIyVmVjMi5TdWJWVihjTG9jYWwsIHYyLCBtYW5pZm9sZC5sb2NhbE5vcm1hbCkuU2VsZk5vcm1hbGl6ZSgpO1xuICAgIG1hbmlmb2xkLmxvY2FsUG9pbnQuQ29weSh2Mik7XG4gICAgbWFuaWZvbGQucG9pbnRzWzBdLmxvY2FsUG9pbnQuQ29weShjaXJjbGVCLm1fcCk7XG4gICAgbWFuaWZvbGQucG9pbnRzWzBdLmlkLmtleSA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZmFjZUNlbnRlcjogYjJWZWMyID0gYjJWZWMyLk1pZFZWKHYxLCB2MiwgYjJDb2xsaWRlUG9seWdvbkFuZENpcmNsZV9zX2ZhY2VDZW50ZXIpO1xuICAgIGNvbnN0IHNlcGFyYXRpb24gPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKGNMb2NhbCwgZmFjZUNlbnRlciwgYjJWZWMyLnNfdDEpLCBub3JtYWxzW3ZlcnRJbmRleDFdKTtcbiAgICBpZiAoc2VwYXJhdGlvbiA+IHJhZGl1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSAxO1xuICAgIG1hbmlmb2xkLnR5cGUgPSBiMk1hbmlmb2xkVHlwZS5lX2ZhY2VBO1xuICAgIG1hbmlmb2xkLmxvY2FsTm9ybWFsLkNvcHkobm9ybWFsc1t2ZXJ0SW5kZXgxXSkuU2VsZk5vcm1hbGl6ZSgpO1xuICAgIG1hbmlmb2xkLmxvY2FsUG9pbnQuQ29weShmYWNlQ2VudGVyKTtcbiAgICBtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludC5Db3B5KGNpcmNsZUIubV9wKTtcbiAgICBtYW5pZm9sZC5wb2ludHNbMF0uaWQua2V5ID0gMDtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFuQkE7QUFxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJGQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_collide_circle.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_collide_edge.ts":
/*!************************************************!*\
  !*** ./src/box2d/collision/b2_collide_edge.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2CollideEdgeAndPolygon = exports.b2CollideEdgeAndCircle = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ./b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_collision_2 = __webpack_require__(/*! ./b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2CollideEdgeAndCircle_s_Q = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_e = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_d = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_e1 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_e2 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_P = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_n = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndCircle_s_id = new b2_collision_1.b2ContactID();\nfunction b2CollideEdgeAndCircle(manifold, edgeA, xfA, circleB, xfB) {\n    manifold.pointCount = 0;\n    var Q = b2_math_1.b2Transform.MulTXV(xfA, b2_math_1.b2Transform.MulXV(xfB, circleB.m_p, b2_math_1.b2Vec2.s_t0), b2CollideEdgeAndCircle_s_Q);\n    var A = edgeA.m_vertex1;\n    var B = edgeA.m_vertex2;\n    var e = b2_math_1.b2Vec2.SubVV(B, A, b2CollideEdgeAndCircle_s_e);\n    var n = b2CollideEdgeAndCircle_s_n.Set(e.y, -e.x);\n    var offset = b2_math_1.b2Vec2.DotVV(n, b2_math_1.b2Vec2.SubVV(Q, A, b2_math_1.b2Vec2.s_t0));\n    var oneSided = edgeA.m_oneSided;\n    if (oneSided && offset < 0.0) {\n        return;\n    }\n    var u = b2_math_1.b2Vec2.DotVV(e, b2_math_1.b2Vec2.SubVV(B, Q, b2_math_1.b2Vec2.s_t0));\n    var v = b2_math_1.b2Vec2.DotVV(e, b2_math_1.b2Vec2.SubVV(Q, A, b2_math_1.b2Vec2.s_t0));\n    var radius = edgeA.m_radius + circleB.m_radius;\n    var id = b2CollideEdgeAndCircle_s_id;\n    id.cf.indexB = 0;\n    id.cf.typeB = b2_collision_1.b2ContactFeatureType.e_vertex;\n    if (v <= 0) {\n        var P_1 = A;\n        var d_1 = b2_math_1.b2Vec2.SubVV(Q, P_1, b2CollideEdgeAndCircle_s_d);\n        var dd_1 = b2_math_1.b2Vec2.DotVV(d_1, d_1);\n        if (dd_1 > radius * radius) {\n            return;\n        }\n        if (edgeA.m_oneSided) {\n            var A1 = edgeA.m_vertex0;\n            var B1 = A;\n            var e1 = b2_math_1.b2Vec2.SubVV(B1, A1, b2CollideEdgeAndCircle_s_e1);\n            var u1 = b2_math_1.b2Vec2.DotVV(e1, b2_math_1.b2Vec2.SubVV(B1, Q, b2_math_1.b2Vec2.s_t0));\n            if (u1 > 0) {\n                return;\n            }\n        }\n        id.cf.indexA = 0;\n        id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_vertex;\n        manifold.pointCount = 1;\n        manifold.type = b2_collision_2.b2ManifoldType.e_circles;\n        manifold.localNormal.SetZero();\n        manifold.localPoint.Copy(P_1);\n        manifold.points[0].id.Copy(id);\n        manifold.points[0].localPoint.Copy(circleB.m_p);\n        return;\n    }\n    if (u <= 0) {\n        var P_2 = B;\n        var d_2 = b2_math_1.b2Vec2.SubVV(Q, P_2, b2CollideEdgeAndCircle_s_d);\n        var dd_2 = b2_math_1.b2Vec2.DotVV(d_2, d_2);\n        if (dd_2 > radius * radius) {\n            return;\n        }\n        if (edgeA.m_oneSided) {\n            var B2 = edgeA.m_vertex3;\n            var A2 = B;\n            var e2 = b2_math_1.b2Vec2.SubVV(B2, A2, b2CollideEdgeAndCircle_s_e2);\n            var v2 = b2_math_1.b2Vec2.DotVV(e2, b2_math_1.b2Vec2.SubVV(Q, A2, b2_math_1.b2Vec2.s_t0));\n            if (v2 > 0) {\n                return;\n            }\n        }\n        id.cf.indexA = 1;\n        id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_vertex;\n        manifold.pointCount = 1;\n        manifold.type = b2_collision_2.b2ManifoldType.e_circles;\n        manifold.localNormal.SetZero();\n        manifold.localPoint.Copy(P_2);\n        manifold.points[0].id.Copy(id);\n        manifold.points[0].localPoint.Copy(circleB.m_p);\n        return;\n    }\n    var den = b2_math_1.b2Vec2.DotVV(e, e);\n    var P = b2CollideEdgeAndCircle_s_P;\n    P.x = (1 / den) * (u * A.x + v * B.x);\n    P.y = (1 / den) * (u * A.y + v * B.y);\n    var d = b2_math_1.b2Vec2.SubVV(Q, P, b2CollideEdgeAndCircle_s_d);\n    var dd = b2_math_1.b2Vec2.DotVV(d, d);\n    if (dd > radius * radius) {\n        return;\n    }\n    if (offset < 0) {\n        n.Set(-n.x, -n.y);\n    }\n    n.Normalize();\n    id.cf.indexA = 0;\n    id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_face;\n    manifold.pointCount = 1;\n    manifold.type = b2_collision_2.b2ManifoldType.e_faceA;\n    manifold.localNormal.Copy(n);\n    manifold.localPoint.Copy(A);\n    manifold.points[0].id.Copy(id);\n    manifold.points[0].localPoint.Copy(circleB.m_p);\n}\nexports.b2CollideEdgeAndCircle = b2CollideEdgeAndCircle;\nvar b2EPAxisType;\n(function (b2EPAxisType) {\n    b2EPAxisType[b2EPAxisType[\"e_unknown\"] = 0] = \"e_unknown\";\n    b2EPAxisType[b2EPAxisType[\"e_edgeA\"] = 1] = \"e_edgeA\";\n    b2EPAxisType[b2EPAxisType[\"e_edgeB\"] = 2] = \"e_edgeB\";\n})(b2EPAxisType || (b2EPAxisType = {}));\nvar b2EPAxis = (function () {\n    function b2EPAxis() {\n        this.normal = new b2_math_1.b2Vec2();\n        this.type = b2EPAxisType.e_unknown;\n        this.index = 0;\n        this.separation = 0;\n    }\n    return b2EPAxis;\n}());\nvar b2TempPolygon = (function () {\n    function b2TempPolygon() {\n        this.vertices = [];\n        this.normals = [];\n        this.count = 0;\n    }\n    return b2TempPolygon;\n}());\nvar b2ReferenceFace = (function () {\n    function b2ReferenceFace() {\n        this.i1 = 0;\n        this.i2 = 0;\n        this.v1 = new b2_math_1.b2Vec2();\n        this.v2 = new b2_math_1.b2Vec2();\n        this.normal = new b2_math_1.b2Vec2();\n        this.sideNormal1 = new b2_math_1.b2Vec2();\n        this.sideOffset1 = 0;\n        this.sideNormal2 = new b2_math_1.b2Vec2();\n        this.sideOffset2 = 0;\n    }\n    return b2ReferenceFace;\n}());\nvar b2ComputeEdgeSeparation_s_axis = new b2EPAxis();\nvar b2ComputeEdgeSeparation_s_axes = [new b2_math_1.b2Vec2(), new b2_math_1.b2Vec2()];\nfunction b2ComputeEdgeSeparation(polygonB, v1, normal1) {\n    var axis = b2ComputeEdgeSeparation_s_axis;\n    axis.type = b2EPAxisType.e_edgeA;\n    axis.index = -1;\n    axis.separation = -Number.MAX_VALUE;\n    axis.normal.SetZero();\n    var axes = b2ComputeEdgeSeparation_s_axes;\n    axes[0].Copy(normal1);\n    axes[1].Copy(normal1).SelfNeg();\n    for (var j = 0; j < 2; ++j) {\n        var sj = Number.MAX_VALUE;\n        for (var i = 0; i < polygonB.count; ++i) {\n            var si = b2_math_1.b2Vec2.DotVV(axes[j], b2_math_1.b2Vec2.SubVV(polygonB.vertices[i], v1, b2_math_1.b2Vec2.s_t0));\n            if (si < sj) {\n                sj = si;\n            }\n        }\n        if (sj > axis.separation) {\n            axis.index = j;\n            axis.separation = sj;\n            axis.normal.Copy(axes[j]);\n        }\n    }\n    return axis;\n}\nvar b2ComputePolygonSeparation_s_axis = new b2EPAxis();\nvar b2ComputePolygonSeparation_s_n = new b2_math_1.b2Vec2();\nfunction b2ComputePolygonSeparation(polygonB, v1, v2) {\n    var axis = b2ComputePolygonSeparation_s_axis;\n    axis.type = b2EPAxisType.e_unknown;\n    axis.index = -1;\n    axis.separation = -Number.MAX_VALUE;\n    axis.normal.SetZero();\n    for (var i = 0; i < polygonB.count; ++i) {\n        var n = b2_math_1.b2Vec2.NegV(polygonB.normals[i], b2ComputePolygonSeparation_s_n);\n        var s1 = b2_math_1.b2Vec2.DotVV(n, b2_math_1.b2Vec2.SubVV(polygonB.vertices[i], v1, b2_math_1.b2Vec2.s_t0));\n        var s2 = b2_math_1.b2Vec2.DotVV(n, b2_math_1.b2Vec2.SubVV(polygonB.vertices[i], v2, b2_math_1.b2Vec2.s_t0));\n        var s = b2_math_1.b2Min(s1, s2);\n        if (s > axis.separation) {\n            axis.type = b2EPAxisType.e_edgeB;\n            axis.index = i;\n            axis.separation = s;\n            axis.normal.Copy(n);\n        }\n    }\n    return axis;\n}\nvar b2CollideEdgeAndPolygon_s_xf = new b2_math_1.b2Transform();\nvar b2CollideEdgeAndPolygon_s_centroidB = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_edge1 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_normal1 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_edge0 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_normal0 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_edge2 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_normal2 = new b2_math_1.b2Vec2();\nvar b2CollideEdgeAndPolygon_s_tempPolygonB = new b2TempPolygon();\nvar b2CollideEdgeAndPolygon_s_ref = new b2ReferenceFace();\nvar b2CollideEdgeAndPolygon_s_clipPoints = [new b2_collision_2.b2ClipVertex(), new b2_collision_2.b2ClipVertex()];\nvar b2CollideEdgeAndPolygon_s_clipPoints1 = [new b2_collision_2.b2ClipVertex(), new b2_collision_2.b2ClipVertex()];\nvar b2CollideEdgeAndPolygon_s_clipPoints2 = [new b2_collision_2.b2ClipVertex(), new b2_collision_2.b2ClipVertex()];\nfunction b2CollideEdgeAndPolygon(manifold, edgeA, xfA, polygonB, xfB) {\n    manifold.pointCount = 0;\n    var xf = b2_math_1.b2Transform.MulTXX(xfA, xfB, b2CollideEdgeAndPolygon_s_xf);\n    var centroidB = b2_math_1.b2Transform.MulXV(xf, polygonB.m_centroid, b2CollideEdgeAndPolygon_s_centroidB);\n    var v1 = edgeA.m_vertex1;\n    var v2 = edgeA.m_vertex2;\n    var edge1 = b2_math_1.b2Vec2.SubVV(v2, v1, b2CollideEdgeAndPolygon_s_edge1);\n    edge1.Normalize();\n    var normal1 = b2CollideEdgeAndPolygon_s_normal1.Set(edge1.y, -edge1.x);\n    var offset1 = b2_math_1.b2Vec2.DotVV(normal1, b2_math_1.b2Vec2.SubVV(centroidB, v1, b2_math_1.b2Vec2.s_t0));\n    var oneSided = edgeA.m_oneSided;\n    if (oneSided && offset1 < 0.0) {\n        return;\n    }\n    var tempPolygonB = b2CollideEdgeAndPolygon_s_tempPolygonB;\n    tempPolygonB.count = polygonB.m_count;\n    for (var i = 0; i < polygonB.m_count; ++i) {\n        if (tempPolygonB.vertices.length <= i) {\n            tempPolygonB.vertices.push(new b2_math_1.b2Vec2());\n        }\n        if (tempPolygonB.normals.length <= i) {\n            tempPolygonB.normals.push(new b2_math_1.b2Vec2());\n        }\n        b2_math_1.b2Transform.MulXV(xf, polygonB.m_vertices[i], tempPolygonB.vertices[i]);\n        b2_math_1.b2Rot.MulRV(xf.q, polygonB.m_normals[i], tempPolygonB.normals[i]);\n    }\n    var radius = polygonB.m_radius + edgeA.m_radius;\n    var edgeAxis = b2ComputeEdgeSeparation(tempPolygonB, v1, normal1);\n    if (edgeAxis.separation > radius) {\n        return;\n    }\n    var polygonAxis = b2ComputePolygonSeparation(tempPolygonB, v1, v2);\n    if (polygonAxis.separation > radius) {\n        return;\n    }\n    var k_relativeTol = 0.98;\n    var k_absoluteTol = 0.001;\n    var primaryAxis;\n    if (polygonAxis.separation - radius > k_relativeTol * (edgeAxis.separation - radius) + k_absoluteTol) {\n        primaryAxis = polygonAxis;\n    }\n    else {\n        primaryAxis = edgeAxis;\n    }\n    if (oneSided) {\n        var edge0 = b2_math_1.b2Vec2.SubVV(v1, edgeA.m_vertex0, b2CollideEdgeAndPolygon_s_edge0);\n        edge0.Normalize();\n        var normal0 = b2CollideEdgeAndPolygon_s_normal0.Set(edge0.y, -edge0.x);\n        var convex1 = b2_math_1.b2Vec2.CrossVV(edge0, edge1) >= 0.0;\n        var edge2 = b2_math_1.b2Vec2.SubVV(edgeA.m_vertex3, v2, b2CollideEdgeAndPolygon_s_edge2);\n        edge2.Normalize();\n        var normal2 = b2CollideEdgeAndPolygon_s_normal2.Set(edge2.y, -edge2.x);\n        var convex2 = b2_math_1.b2Vec2.CrossVV(edge1, edge2) >= 0.0;\n        var sinTol = 0.1;\n        var side1 = b2_math_1.b2Vec2.DotVV(primaryAxis.normal, edge1) <= 0.0;\n        if (side1) {\n            if (convex1) {\n                if (b2_math_1.b2Vec2.CrossVV(primaryAxis.normal, normal0) > sinTol) {\n                    return;\n                }\n            }\n            else {\n                primaryAxis = edgeAxis;\n            }\n        }\n        else {\n            if (convex2) {\n                if (b2_math_1.b2Vec2.CrossVV(normal2, primaryAxis.normal) > sinTol) {\n                    return;\n                }\n            }\n            else {\n                primaryAxis = edgeAxis;\n            }\n        }\n    }\n    var clipPoints = b2CollideEdgeAndPolygon_s_clipPoints;\n    var ref = b2CollideEdgeAndPolygon_s_ref;\n    if (primaryAxis.type === b2EPAxisType.e_edgeA) {\n        manifold.type = b2_collision_2.b2ManifoldType.e_faceA;\n        var bestIndex = 0;\n        var bestValue = b2_math_1.b2Vec2.DotVV(primaryAxis.normal, tempPolygonB.normals[0]);\n        for (var i = 1; i < tempPolygonB.count; ++i) {\n            var value = b2_math_1.b2Vec2.DotVV(primaryAxis.normal, tempPolygonB.normals[i]);\n            if (value < bestValue) {\n                bestValue = value;\n                bestIndex = i;\n            }\n        }\n        var i1 = bestIndex;\n        var i2 = i1 + 1 < tempPolygonB.count ? i1 + 1 : 0;\n        clipPoints[0].v.Copy(tempPolygonB.vertices[i1]);\n        clipPoints[0].id.cf.indexA = 0;\n        clipPoints[0].id.cf.indexB = i1;\n        clipPoints[0].id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_face;\n        clipPoints[0].id.cf.typeB = b2_collision_1.b2ContactFeatureType.e_vertex;\n        clipPoints[1].v.Copy(tempPolygonB.vertices[i2]);\n        clipPoints[1].id.cf.indexA = 0;\n        clipPoints[1].id.cf.indexB = i2;\n        clipPoints[1].id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_face;\n        clipPoints[1].id.cf.typeB = b2_collision_1.b2ContactFeatureType.e_vertex;\n        ref.i1 = 0;\n        ref.i2 = 1;\n        ref.v1.Copy(v1);\n        ref.v2.Copy(v2);\n        ref.normal.Copy(primaryAxis.normal);\n        ref.sideNormal1.Copy(edge1).SelfNeg();\n        ref.sideNormal2.Copy(edge1);\n    }\n    else {\n        manifold.type = b2_collision_2.b2ManifoldType.e_faceB;\n        clipPoints[0].v.Copy(v2);\n        clipPoints[0].id.cf.indexA = 1;\n        clipPoints[0].id.cf.indexB = primaryAxis.index;\n        clipPoints[0].id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_vertex;\n        clipPoints[0].id.cf.typeB = b2_collision_1.b2ContactFeatureType.e_face;\n        clipPoints[1].v.Copy(v1);\n        clipPoints[1].id.cf.indexA = 0;\n        clipPoints[1].id.cf.indexB = primaryAxis.index;\n        clipPoints[1].id.cf.typeA = b2_collision_1.b2ContactFeatureType.e_vertex;\n        clipPoints[1].id.cf.typeB = b2_collision_1.b2ContactFeatureType.e_face;\n        ref.i1 = primaryAxis.index;\n        ref.i2 = ref.i1 + 1 < tempPolygonB.count ? ref.i1 + 1 : 0;\n        ref.v1.Copy(tempPolygonB.vertices[ref.i1]);\n        ref.v2.Copy(tempPolygonB.vertices[ref.i2]);\n        ref.normal.Copy(tempPolygonB.normals[ref.i1]);\n        ref.sideNormal1.Set(ref.normal.y, -ref.normal.x);\n        ref.sideNormal2.Copy(ref.sideNormal1).SelfNeg();\n    }\n    ref.sideOffset1 = b2_math_1.b2Vec2.DotVV(ref.sideNormal1, ref.v1);\n    ref.sideOffset2 = b2_math_1.b2Vec2.DotVV(ref.sideNormal2, ref.v2);\n    var clipPoints1 = b2CollideEdgeAndPolygon_s_clipPoints1;\n    var clipPoints2 = b2CollideEdgeAndPolygon_s_clipPoints2;\n    var np;\n    np = b2_collision_2.b2ClipSegmentToLine(clipPoints1, clipPoints, ref.sideNormal1, ref.sideOffset1, ref.i1);\n    if (np < b2_settings_1.b2_maxManifoldPoints) {\n        return;\n    }\n    np = b2_collision_2.b2ClipSegmentToLine(clipPoints2, clipPoints1, ref.sideNormal2, ref.sideOffset2, ref.i2);\n    if (np < b2_settings_1.b2_maxManifoldPoints) {\n        return;\n    }\n    if (primaryAxis.type === b2EPAxisType.e_edgeA) {\n        manifold.localNormal.Copy(ref.normal);\n        manifold.localPoint.Copy(ref.v1);\n    }\n    else {\n        manifold.localNormal.Copy(polygonB.m_normals[ref.i1]);\n        manifold.localPoint.Copy(polygonB.m_vertices[ref.i1]);\n    }\n    var pointCount = 0;\n    for (var i = 0; i < b2_settings_1.b2_maxManifoldPoints; ++i) {\n        var separation = b2_math_1.b2Vec2.DotVV(ref.normal, b2_math_1.b2Vec2.SubVV(clipPoints2[i].v, ref.v1, b2_math_1.b2Vec2.s_t0));\n        if (separation <= radius) {\n            var cp = manifold.points[pointCount];\n            if (primaryAxis.type === b2EPAxisType.e_edgeA) {\n                b2_math_1.b2Transform.MulTXV(xf, clipPoints2[i].v, cp.localPoint);\n                cp.id.Copy(clipPoints2[i].id);\n            }\n            else {\n                cp.localPoint.Copy(clipPoints2[i].v);\n                cp.id.cf.typeA = clipPoints2[i].id.cf.typeB;\n                cp.id.cf.typeB = clipPoints2[i].id.cf.typeA;\n                cp.id.cf.indexA = clipPoints2[i].id.cf.indexB;\n                cp.id.cf.indexB = clipPoints2[i].id.cf.indexA;\n            }\n            ++pointCount;\n        }\n    }\n    manifold.pointCount = pointCount;\n}\nexports.b2CollideEdgeAndPolygon = b2CollideEdgeAndPolygon;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2NvbGxpZGVfZWRnZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9jb2xsaXNpb24vYjJfY29sbGlkZV9lZGdlLnRzPzJiNjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfbWF4TWFuaWZvbGRQb2ludHMgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMk1pbiwgYjJWZWMyLCBiMlJvdCwgYjJUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQ29udGFjdEZlYXR1cmVUeXBlLCBiMkNvbnRhY3RJRCB9IGZyb20gXCIuL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCwgYjJNYW5pZm9sZFR5cGUsIGIyTWFuaWZvbGRQb2ludCwgYjJDbGlwVmVydGV4LCBiMkNsaXBTZWdtZW50VG9MaW5lIH0gZnJvbSBcIi4vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMkNpcmNsZVNoYXBlIH0gZnJvbSBcIi4vYjJfY2lyY2xlX3NoYXBlXCI7XG5pbXBvcnQgeyBiMlBvbHlnb25TaGFwZSB9IGZyb20gXCIuL2IyX3BvbHlnb25fc2hhcGVcIjtcbmltcG9ydCB7IGIyRWRnZVNoYXBlIH0gZnJvbSBcIi4vYjJfZWRnZV9zaGFwZVwiO1xuXG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfUTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX2U6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGVfc19kOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfZTE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGVfc19lMjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX1A6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGVfc19uOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfaWQ6IGIyQ29udGFjdElEID0gbmV3IGIyQ29udGFjdElEKCk7XG5leHBvcnQgZnVuY3Rpb24gYjJDb2xsaWRlRWRnZUFuZENpcmNsZShtYW5pZm9sZDogYjJNYW5pZm9sZCwgZWRnZUE6IGIyRWRnZVNoYXBlLCB4ZkE6IGIyVHJhbnNmb3JtLCBjaXJjbGVCOiBiMkNpcmNsZVNoYXBlLCB4ZkI6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gIG1hbmlmb2xkLnBvaW50Q291bnQgPSAwO1xuXG4gIC8vIENvbXB1dGUgY2lyY2xlIGluIGZyYW1lIG9mIGVkZ2VcbiAgY29uc3QgUTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsVFhWKHhmQSwgYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCBjaXJjbGVCLm1fcCwgYjJWZWMyLnNfdDApLCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfUSk7XG5cbiAgY29uc3QgQTogYjJWZWMyID0gZWRnZUEubV92ZXJ0ZXgxO1xuICBjb25zdCBCOiBiMlZlYzIgPSBlZGdlQS5tX3ZlcnRleDI7XG4gIGNvbnN0IGU6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihCLCBBLCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfZSk7XG5cbiAgLy8gTm9ybWFsIHBvaW50cyB0byB0aGUgcmlnaHQgZm9yIGEgQ0NXIHdpbmRpbmdcbiAgLy8gYjJWZWMyIG4oZS55LCAtZS54KTtcbiAgLy8gY29uc3QgbjogYjJWZWMyID0gYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX24uU2V0KC1lLnksIGUueCk7XG4gIGNvbnN0IG46IGIyVmVjMiA9IGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGVfc19uLlNldChlLnksIC1lLngpO1xuICAvLyBmbG9hdCBvZmZzZXQgPSBiMkRvdChuLCBRIC0gQSk7XG4gIGNvbnN0IG9mZnNldDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG4sIGIyVmVjMi5TdWJWVihRLCBBLCBiMlZlYzIuc190MCkpO1xuXG4gIGNvbnN0IG9uZVNpZGVkOiBib29sZWFuID0gZWRnZUEubV9vbmVTaWRlZDtcbiAgaWYgKG9uZVNpZGVkICYmIG9mZnNldCA8IDAuMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEJhcnljZW50cmljIGNvb3JkaW5hdGVzXG4gIGNvbnN0IHU6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihlLCBiMlZlYzIuU3ViVlYoQiwgUSwgYjJWZWMyLnNfdDApKTtcbiAgY29uc3QgdjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGUsIGIyVmVjMi5TdWJWVihRLCBBLCBiMlZlYzIuc190MCkpO1xuXG4gIGNvbnN0IHJhZGl1czogbnVtYmVyID0gZWRnZUEubV9yYWRpdXMgKyBjaXJjbGVCLm1fcmFkaXVzO1xuXG4gIC8vIGNvbnN0IGNmOiBiMkNvbnRhY3RGZWF0dXJlID0gbmV3IGIyQ29udGFjdEZlYXR1cmUoKTtcbiAgY29uc3QgaWQ6IGIyQ29udGFjdElEID0gYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX2lkO1xuICBpZC5jZi5pbmRleEIgPSAwO1xuICBpZC5jZi50eXBlQiA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4O1xuXG4gIC8vIFJlZ2lvbiBBXG4gIGlmICh2IDw9IDApIHtcbiAgICBjb25zdCBQOiBiMlZlYzIgPSBBO1xuICAgIGNvbnN0IGQ6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihRLCBQLCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfZCk7XG4gICAgY29uc3QgZGQ6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihkLCBkKTtcbiAgICBpZiAoZGQgPiByYWRpdXMgKiByYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJcyB0aGVyZSBhbiBlZGdlIGNvbm5lY3RlZCB0byBBP1xuICAgIGlmIChlZGdlQS5tX29uZVNpZGVkKSB7XG4gICAgICBjb25zdCBBMTogYjJWZWMyID0gZWRnZUEubV92ZXJ0ZXgwO1xuICAgICAgY29uc3QgQjE6IGIyVmVjMiA9IEE7XG4gICAgICBjb25zdCBlMTogYjJWZWMyID0gYjJWZWMyLlN1YlZWKEIxLCBBMSwgYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX2UxKTtcbiAgICAgIGNvbnN0IHUxOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZTEsIGIyVmVjMi5TdWJWVihCMSwgUSwgYjJWZWMyLnNfdDApKTtcblxuICAgICAgLy8gSXMgdGhlIGNpcmNsZSBpbiBSZWdpb24gQUIgb2YgdGhlIHByZXZpb3VzIGVkZ2U/XG4gICAgICBpZiAodTEgPiAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZC5jZi5pbmRleEEgPSAwO1xuICAgIGlkLmNmLnR5cGVBID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXg7XG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG4gICAgbWFuaWZvbGQudHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfY2lyY2xlcztcbiAgICBtYW5pZm9sZC5sb2NhbE5vcm1hbC5TZXRaZXJvKCk7XG4gICAgbWFuaWZvbGQubG9jYWxQb2ludC5Db3B5KFApO1xuICAgIG1hbmlmb2xkLnBvaW50c1swXS5pZC5Db3B5KGlkKTtcbiAgICAvLyBtYW5pZm9sZC5wb2ludHNbMF0uaWQua2V5ID0gMDtcbiAgICAvLyBtYW5pZm9sZC5wb2ludHNbMF0uaWQuY2YgPSBjZjtcbiAgICBtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludC5Db3B5KGNpcmNsZUIubV9wKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBSZWdpb24gQlxuICBpZiAodSA8PSAwKSB7XG4gICAgY29uc3QgUDogYjJWZWMyID0gQjtcbiAgICBjb25zdCBkOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYoUSwgUCwgYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX2QpO1xuICAgIGNvbnN0IGRkOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZCwgZCk7XG4gICAgaWYgKGRkID4gcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSXMgdGhlcmUgYW4gZWRnZSBjb25uZWN0ZWQgdG8gQj9cbiAgICBpZiAoZWRnZUEubV9vbmVTaWRlZCkge1xuICAgICAgY29uc3QgQjI6IGIyVmVjMiA9IGVkZ2VBLm1fdmVydGV4MztcbiAgICAgIGNvbnN0IEEyOiBiMlZlYzIgPSBCO1xuICAgICAgY29uc3QgZTI6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihCMiwgQTIsIGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGVfc19lMik7XG4gICAgICBjb25zdCB2MjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGUyLCBiMlZlYzIuU3ViVlYoUSwgQTIsIGIyVmVjMi5zX3QwKSk7XG5cbiAgICAgIC8vIElzIHRoZSBjaXJjbGUgaW4gUmVnaW9uIEFCIG9mIHRoZSBuZXh0IGVkZ2U/XG4gICAgICBpZiAodjIgPiAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZC5jZi5pbmRleEEgPSAxO1xuICAgIGlkLmNmLnR5cGVBID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXg7XG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG4gICAgbWFuaWZvbGQudHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfY2lyY2xlcztcbiAgICBtYW5pZm9sZC5sb2NhbE5vcm1hbC5TZXRaZXJvKCk7XG4gICAgbWFuaWZvbGQubG9jYWxQb2ludC5Db3B5KFApO1xuICAgIG1hbmlmb2xkLnBvaW50c1swXS5pZC5Db3B5KGlkKTtcbiAgICAvLyBtYW5pZm9sZC5wb2ludHNbMF0uaWQua2V5ID0gMDtcbiAgICAvLyBtYW5pZm9sZC5wb2ludHNbMF0uaWQuY2YgPSBjZjtcbiAgICBtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludC5Db3B5KGNpcmNsZUIubV9wKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBSZWdpb24gQUJcbiAgY29uc3QgZGVuOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZSwgZSk7XG4gIC8vIERFQlVHOiBiMkFzc2VydChkZW4gPiAwKTtcbiAgY29uc3QgUDogYjJWZWMyID0gYjJDb2xsaWRlRWRnZUFuZENpcmNsZV9zX1A7XG4gIFAueCA9ICgxIC8gZGVuKSAqICh1ICogQS54ICsgdiAqIEIueCk7XG4gIFAueSA9ICgxIC8gZGVuKSAqICh1ICogQS55ICsgdiAqIEIueSk7XG4gIGNvbnN0IGQ6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihRLCBQLCBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlX3NfZCk7XG4gIGNvbnN0IGRkOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZCwgZCk7XG4gIGlmIChkZCA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgbi5TZXQoLW4ueCwgLW4ueSk7XG4gIH1cbiAgbi5Ob3JtYWxpemUoKTtcblxuICBpZC5jZi5pbmRleEEgPSAwO1xuICBpZC5jZi50eXBlQSA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfZmFjZTtcbiAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG4gIG1hbmlmb2xkLnR5cGUgPSBiMk1hbmlmb2xkVHlwZS5lX2ZhY2VBO1xuICBtYW5pZm9sZC5sb2NhbE5vcm1hbC5Db3B5KG4pO1xuICBtYW5pZm9sZC5sb2NhbFBvaW50LkNvcHkoQSk7XG4gIG1hbmlmb2xkLnBvaW50c1swXS5pZC5Db3B5KGlkKTtcbiAgLy8gbWFuaWZvbGQucG9pbnRzWzBdLmlkLmtleSA9IDA7XG4gIC8vIG1hbmlmb2xkLnBvaW50c1swXS5pZC5jZiA9IGNmO1xuICBtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludC5Db3B5KGNpcmNsZUIubV9wKTtcbn1cblxuZW51bSBiMkVQQXhpc1R5cGUge1xuICBlX3Vua25vd24gPSAwLFxuICBlX2VkZ2VBID0gMSxcbiAgZV9lZGdlQiA9IDIsXG59XG5cbmNsYXNzIGIyRVBBeGlzIHtcbiAgcHVibGljIG5vcm1hbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgdHlwZTogYjJFUEF4aXNUeXBlID0gYjJFUEF4aXNUeXBlLmVfdW5rbm93bjtcbiAgcHVibGljIGluZGV4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc2VwYXJhdGlvbjogbnVtYmVyID0gMDtcbn1cblxuY2xhc3MgYjJUZW1wUG9seWdvbiB7XG4gIHB1YmxpYyB2ZXJ0aWNlczogYjJWZWMyW10gPSBbXTtcbiAgcHVibGljIG5vcm1hbHM6IGIyVmVjMltdID0gW107XG4gIHB1YmxpYyBjb3VudDogbnVtYmVyID0gMDtcbn1cblxuY2xhc3MgYjJSZWZlcmVuY2VGYWNlIHtcbiAgcHVibGljIGkxOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgaTI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSB2MTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgdjI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG5vcm1hbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgc2lkZU5vcm1hbDE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHNpZGVPZmZzZXQxOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgc2lkZU5vcm1hbDI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHNpZGVPZmZzZXQyOiBudW1iZXIgPSAwO1xufVxuXG4vLyBzdGF0aWMgYjJFUEF4aXMgYjJDb21wdXRlRWRnZVNlcGFyYXRpb24oY29uc3QgYjJUZW1wUG9seWdvbiYgcG9seWdvbkIsIGNvbnN0IGIyVmVjMiYgdjEsIGNvbnN0IGIyVmVjMiYgbm9ybWFsMSlcbmNvbnN0IGIyQ29tcHV0ZUVkZ2VTZXBhcmF0aW9uX3NfYXhpcyA9IG5ldyBiMkVQQXhpcygpO1xuY29uc3QgYjJDb21wdXRlRWRnZVNlcGFyYXRpb25fc19heGVzOiBbIGIyVmVjMiwgYjJWZWMyIF0gPSBbIG5ldyBiMlZlYzIoKSwgbmV3IGIyVmVjMigpIF07XG5mdW5jdGlvbiBiMkNvbXB1dGVFZGdlU2VwYXJhdGlvbihwb2x5Z29uQjogUmVhZG9ubHk8YjJUZW1wUG9seWdvbj4sIHYxOiBSZWFkb25seTxiMlZlYzI+LCBub3JtYWwxOiBSZWFkb25seTxiMlZlYzI+KTogYjJFUEF4aXMge1xuICAvLyBiMkVQQXhpcyBheGlzO1xuICBjb25zdCBheGlzOiBiMkVQQXhpcyA9IGIyQ29tcHV0ZUVkZ2VTZXBhcmF0aW9uX3NfYXhpcztcbiAgYXhpcy50eXBlID0gYjJFUEF4aXNUeXBlLmVfZWRnZUE7XG4gIGF4aXMuaW5kZXggPSAtMTtcbiAgYXhpcy5zZXBhcmF0aW9uID0gLU51bWJlci5NQVhfVkFMVUU7IC8vIC1GTFRfTUFYO1xuICBheGlzLm5vcm1hbC5TZXRaZXJvKCk7XG5cbiAgLy8gYjJWZWMyIGF4ZXNbMl0gPSB7IG5vcm1hbDEsIC1ub3JtYWwxIH07XG4gIGNvbnN0IGF4ZXM6IFtiMlZlYzIsIGIyVmVjMl0gPSBiMkNvbXB1dGVFZGdlU2VwYXJhdGlvbl9zX2F4ZXM7XG4gIGF4ZXNbMF0uQ29weShub3JtYWwxKTtcbiAgYXhlc1sxXS5Db3B5KG5vcm1hbDEpLlNlbGZOZWcoKTtcblxuICAvLyBGaW5kIGF4aXMgd2l0aCBsZWFzdCBvdmVybGFwIChtaW4tbWF4IHByb2JsZW0pXG4gIGZvciAobGV0IGogPSAwOyBqIDwgMjsgKytqKSB7XG4gICAgbGV0IHNqOiBudW1iZXIgPSBOdW1iZXIuTUFYX1ZBTFVFOyAvLyBGTFRfTUFYO1xuXG4gICAgLy8gRmluZCBkZWVwZXN0IHBvbHlnb24gdmVydGV4IGFsb25nIGF4aXMgalxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWdvbkIuY291bnQ7ICsraSkge1xuICAgICAgLy8gZmxvYXQgc2kgPSBiMkRvdChheGVzW2pdLCBwb2x5Z29uQi52ZXJ0aWNlc1tpXSAtIHYxKTtcbiAgICAgIGNvbnN0IHNpOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoYXhlc1tqXSwgYjJWZWMyLlN1YlZWKHBvbHlnb25CLnZlcnRpY2VzW2ldLCB2MSwgYjJWZWMyLnNfdDApKTtcbiAgICAgIGlmIChzaSA8IHNqKSB7XG4gICAgICAgIHNqID0gc2k7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNqID4gYXhpcy5zZXBhcmF0aW9uKSB7XG4gICAgICBheGlzLmluZGV4ID0gajtcbiAgICAgIGF4aXMuc2VwYXJhdGlvbiA9IHNqO1xuICAgICAgYXhpcy5ub3JtYWwuQ29weShheGVzW2pdKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXhpcztcbn1cblxuLy8gc3RhdGljIGIyRVBBeGlzIGIyQ29tcHV0ZVBvbHlnb25TZXBhcmF0aW9uKGNvbnN0IGIyVGVtcFBvbHlnb24mIHBvbHlnb25CLCBjb25zdCBiMlZlYzImIHYxLCBjb25zdCBiMlZlYzImIHYyKVxuY29uc3QgYjJDb21wdXRlUG9seWdvblNlcGFyYXRpb25fc19heGlzID0gbmV3IGIyRVBBeGlzKCk7XG5jb25zdCBiMkNvbXB1dGVQb2x5Z29uU2VwYXJhdGlvbl9zX24gPSBuZXcgYjJWZWMyKCk7XG5mdW5jdGlvbiBiMkNvbXB1dGVQb2x5Z29uU2VwYXJhdGlvbihwb2x5Z29uQjogUmVhZG9ubHk8YjJUZW1wUG9seWdvbj4sIHYxOiBSZWFkb25seTxiMlZlYzI+LCB2MjogUmVhZG9ubHk8YjJWZWMyPik6IGIyRVBBeGlzIHtcbiAgY29uc3QgYXhpczogYjJFUEF4aXMgPSBiMkNvbXB1dGVQb2x5Z29uU2VwYXJhdGlvbl9zX2F4aXM7XG4gIGF4aXMudHlwZSA9IGIyRVBBeGlzVHlwZS5lX3Vua25vd247XG4gIGF4aXMuaW5kZXggPSAtMTtcbiAgYXhpcy5zZXBhcmF0aW9uID0gLU51bWJlci5NQVhfVkFMVUU7IC8vIC1GTFRfTUFYO1xuICBheGlzLm5vcm1hbC5TZXRaZXJvKCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2x5Z29uQi5jb3VudDsgKytpKSB7XG4gICAgLy8gYjJWZWMyIG4gPSAtcG9seWdvbkIubm9ybWFsc1tpXTtcbiAgICBjb25zdCBuOiBiMlZlYzIgPSBiMlZlYzIuTmVnVihwb2x5Z29uQi5ub3JtYWxzW2ldLCBiMkNvbXB1dGVQb2x5Z29uU2VwYXJhdGlvbl9zX24pO1xuXG4gICAgLy8gZmxvYXQgczEgPSBiMkRvdChuLCBwb2x5Z29uQi52ZXJ0aWNlc1tpXSAtIHYxKTtcbiAgICBjb25zdCBzMTogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG4sIGIyVmVjMi5TdWJWVihwb2x5Z29uQi52ZXJ0aWNlc1tpXSwgdjEsIGIyVmVjMi5zX3QwKSk7XG4gICAgLy8gZmxvYXQgczIgPSBiMkRvdChuLCBwb2x5Z29uQi52ZXJ0aWNlc1tpXSAtIHYyKTtcbiAgICBjb25zdCBzMjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG4sIGIyVmVjMi5TdWJWVihwb2x5Z29uQi52ZXJ0aWNlc1tpXSwgdjIsIGIyVmVjMi5zX3QwKSk7XG4gICAgLy8gZmxvYXQgcyA9IGIyTWluKHMxLCBzMik7XG4gICAgY29uc3QgczogbnVtYmVyID0gYjJNaW4oczEsIHMyKTtcblxuICAgIGlmIChzID4gYXhpcy5zZXBhcmF0aW9uKSB7XG4gICAgICBheGlzLnR5cGUgPSBiMkVQQXhpc1R5cGUuZV9lZGdlQjtcbiAgICAgIGF4aXMuaW5kZXggPSBpO1xuICAgICAgYXhpcy5zZXBhcmF0aW9uID0gcztcbiAgICAgIGF4aXMubm9ybWFsLkNvcHkobik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGF4aXM7XG59XG5cbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uX3NfeGYgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uX3NfY2VudHJvaWRCID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19lZGdlMSA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uX3Nfbm9ybWFsMSA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uX3NfZWRnZTAgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX25vcm1hbDAgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX2VkZ2UyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19ub3JtYWwyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc190ZW1wUG9seWdvbkIgPSBuZXcgYjJUZW1wUG9seWdvbigpO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19yZWYgPSBuZXcgYjJSZWZlcmVuY2VGYWNlKCk7XG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX2NsaXBQb2ludHM6IFtiMkNsaXBWZXJ0ZXgsIGIyQ2xpcFZlcnRleF0gPSBbIG5ldyBiMkNsaXBWZXJ0ZXgoKSwgbmV3IGIyQ2xpcFZlcnRleCgpIF07XG5jb25zdCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX2NsaXBQb2ludHMxOiBbYjJDbGlwVmVydGV4LCBiMkNsaXBWZXJ0ZXhdID0gWyBuZXcgYjJDbGlwVmVydGV4KCksIG5ldyBiMkNsaXBWZXJ0ZXgoKSBdO1xuY29uc3QgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19jbGlwUG9pbnRzMjogW2IyQ2xpcFZlcnRleCwgYjJDbGlwVmVydGV4XSA9IFsgbmV3IGIyQ2xpcFZlcnRleCgpLCBuZXcgYjJDbGlwVmVydGV4KCkgXTtcbmV4cG9ydCBmdW5jdGlvbiBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbihtYW5pZm9sZDogYjJNYW5pZm9sZCwgZWRnZUE6IGIyRWRnZVNoYXBlLCB4ZkE6IGIyVHJhbnNmb3JtLCBwb2x5Z29uQjogYjJQb2x5Z29uU2hhcGUsIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDA7XG5cbiAgLy8gYjJUcmFuc2Zvcm0geGYgPSBiMk11bFQoeGZBLCB4ZkIpO1xuICBjb25zdCB4ZiA9IGIyVHJhbnNmb3JtLk11bFRYWCh4ZkEsIHhmQiwgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc194Zik7XG5cbiAgLy8gYjJWZWMyIGNlbnRyb2lkQiA9IGIyTXVsKHhmLCBwb2x5Z29uQi5tX2NlbnRyb2lkKTtcbiAgY29uc3QgY2VudHJvaWRCOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZiwgcG9seWdvbkIubV9jZW50cm9pZCwgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19jZW50cm9pZEIpO1xuXG4gIC8vIGIyVmVjMiB2MSA9IGVkZ2VBLm1fdmVydGV4MTtcbiAgY29uc3QgdjE6IGIyVmVjMiA9IGVkZ2VBLm1fdmVydGV4MTtcbiAgLy8gYjJWZWMyIHYyID0gZWRnZUEubV92ZXJ0ZXgyO1xuICBjb25zdCB2MjogYjJWZWMyID0gZWRnZUEubV92ZXJ0ZXgyO1xuXG4gIC8vIGIyVmVjMiBlZGdlMSA9IHYyIC0gdjE7XG4gIGNvbnN0IGVkZ2UxOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodjIsIHYxLCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX2VkZ2UxKTtcbiAgZWRnZTEuTm9ybWFsaXplKCk7XG5cbiAgLy8gTm9ybWFsIHBvaW50cyB0byB0aGUgcmlnaHQgZm9yIGEgQ0NXIHdpbmRpbmdcbiAgLy8gYjJWZWMyIG5vcm1hbDEoZWRnZTEueSwgLWVkZ2UxLngpO1xuICBjb25zdCBub3JtYWwxID0gYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19ub3JtYWwxLlNldChlZGdlMS55LCAtZWRnZTEueCk7XG4gIC8vIGZsb2F0IG9mZnNldDEgPSBiMkRvdChub3JtYWwxLCBjZW50cm9pZEIgLSB2MSk7XG4gIGNvbnN0IG9mZnNldDE6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihub3JtYWwxLCBiMlZlYzIuU3ViVlYoY2VudHJvaWRCLCB2MSwgYjJWZWMyLnNfdDApKTtcblxuICBjb25zdCBvbmVTaWRlZDogYm9vbGVhbiA9IGVkZ2VBLm1fb25lU2lkZWQ7XG4gIGlmIChvbmVTaWRlZCAmJiBvZmZzZXQxIDwgMC4wKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gR2V0IHBvbHlnb25CIGluIGZyYW1lQVxuICAvLyBiMlRlbXBQb2x5Z29uIHRlbXBQb2x5Z29uQjtcbiAgY29uc3QgdGVtcFBvbHlnb25COiBiMlRlbXBQb2x5Z29uID0gYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc190ZW1wUG9seWdvbkI7XG4gIHRlbXBQb2x5Z29uQi5jb3VudCA9IHBvbHlnb25CLm1fY291bnQ7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWdvbkIubV9jb3VudDsgKytpKSB7XG4gICAgaWYgKHRlbXBQb2x5Z29uQi52ZXJ0aWNlcy5sZW5ndGggPD0gaSkgeyB0ZW1wUG9seWdvbkIudmVydGljZXMucHVzaChuZXcgYjJWZWMyKCkpOyB9XG4gICAgaWYgKHRlbXBQb2x5Z29uQi5ub3JtYWxzLmxlbmd0aCA8PSBpKSB7IHRlbXBQb2x5Z29uQi5ub3JtYWxzLnB1c2gobmV3IGIyVmVjMigpKTsgfVxuICAgIC8vIHRlbXBQb2x5Z29uQi52ZXJ0aWNlc1tpXSA9IGIyTXVsKHhmLCBwb2x5Z29uQi5tX3ZlcnRpY2VzW2ldKTtcbiAgICBiMlRyYW5zZm9ybS5NdWxYVih4ZiwgcG9seWdvbkIubV92ZXJ0aWNlc1tpXSwgdGVtcFBvbHlnb25CLnZlcnRpY2VzW2ldKTtcbiAgICAvLyB0ZW1wUG9seWdvbkIubm9ybWFsc1tpXSA9IGIyTXVsKHhmLnEsIHBvbHlnb25CLm1fbm9ybWFsc1tpXSk7XG4gICAgYjJSb3QuTXVsUlYoeGYucSwgcG9seWdvbkIubV9ub3JtYWxzW2ldLCB0ZW1wUG9seWdvbkIubm9ybWFsc1tpXSk7XG4gIH1cblxuICBjb25zdCByYWRpdXM6IG51bWJlciA9IHBvbHlnb25CLm1fcmFkaXVzICsgZWRnZUEubV9yYWRpdXM7XG5cbiAgLy8gYjJFUEF4aXMgZWRnZUF4aXMgPSBiMkNvbXB1dGVFZGdlU2VwYXJhdGlvbih0ZW1wUG9seWdvbkIsIHYxLCBub3JtYWwxKTtcbiAgY29uc3QgZWRnZUF4aXM6IGIyRVBBeGlzID0gYjJDb21wdXRlRWRnZVNlcGFyYXRpb24odGVtcFBvbHlnb25CLCB2MSwgbm9ybWFsMSk7XG4gIGlmIChlZGdlQXhpcy5zZXBhcmF0aW9uID4gcmFkaXVzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gYjJFUEF4aXMgcG9seWdvbkF4aXMgPSBiMkNvbXB1dGVQb2x5Z29uU2VwYXJhdGlvbih0ZWRnZTAueSwgLWVkZ2UwLnhlbXBQb2x5Z29uQiwgdjEsIHYyKTtcbiAgY29uc3QgcG9seWdvbkF4aXM6IGIyRVBBeGlzID0gYjJDb21wdXRlUG9seWdvblNlcGFyYXRpb24odGVtcFBvbHlnb25CLCB2MSwgdjIpO1xuICBpZiAocG9seWdvbkF4aXMuc2VwYXJhdGlvbiA+IHJhZGl1cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFVzZSBoeXN0ZXJlc2lzIGZvciBqaXR0ZXIgcmVkdWN0aW9uLlxuICBjb25zdCBrX3JlbGF0aXZlVG9sOiBudW1iZXIgPSAwLjk4O1xuICBjb25zdCBrX2Fic29sdXRlVG9sOiBudW1iZXIgPSAwLjAwMTtcblxuICAvLyBiMkVQQXhpcyBwcmltYXJ5QXhpcztcbiAgbGV0IHByaW1hcnlBeGlzOiBiMkVQQXhpcztcbiAgaWYgKHBvbHlnb25BeGlzLnNlcGFyYXRpb24gLSByYWRpdXMgPiBrX3JlbGF0aXZlVG9sICogKGVkZ2VBeGlzLnNlcGFyYXRpb24gLSByYWRpdXMpICsga19hYnNvbHV0ZVRvbCkge1xuICAgIHByaW1hcnlBeGlzID0gcG9seWdvbkF4aXM7XG4gIH0gZWxzZSB7XG4gICAgcHJpbWFyeUF4aXMgPSBlZGdlQXhpcztcbiAgfVxuXG4gIGlmIChvbmVTaWRlZCkge1xuICAgIC8vIFNtb290aCBjb2xsaXNpb25cbiAgICAvLyBTZWUgaHR0cHM6Ly9ib3gyZC5vcmcvcG9zdHMvMjAyMC8wNi9naG9zdC1jb2xsaXNpb25zL1xuXG4gICAgLy8gYjJWZWMyIGVkZ2UwID0gdjEgLSBlZGdlQS5tX3ZlcnRleDA7XG4gICAgY29uc3QgZWRnZTA6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVih2MSwgZWRnZUEubV92ZXJ0ZXgwLCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX2VkZ2UwKTtcbiAgICBlZGdlMC5Ob3JtYWxpemUoKTtcbiAgICAvLyBiMlZlYzIgbm9ybWFsMChlZGdlMC55LCAtZWRnZTAueCk7XG4gICAgY29uc3Qgbm9ybWFsMDogYjJWZWMyID0gYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19ub3JtYWwwLlNldChlZGdlMC55LCAtZWRnZTAueCk7XG4gICAgY29uc3QgY29udmV4MTogYm9vbGVhbiA9IGIyVmVjMi5Dcm9zc1ZWKGVkZ2UwLCBlZGdlMSkgPj0gMC4wO1xuXG4gICAgLy8gYjJWZWMyIGVkZ2UyID0gZWRnZUEubV92ZXJ0ZXgzIC0gdjI7XG4gICAgY29uc3QgZWRnZTI6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihlZGdlQS5tX3ZlcnRleDMsIHYyLCBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbl9zX2VkZ2UyKTtcbiAgICBlZGdlMi5Ob3JtYWxpemUoKTtcbiAgICAvLyBiMlZlYzIgbm9ybWFsMihlZGdlMi55LCAtZWRnZTIueCk7XG4gICAgY29uc3Qgbm9ybWFsMjogYjJWZWMyID0gYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19ub3JtYWwyLlNldChlZGdlMi55LCAtZWRnZTIueCk7XG4gICAgY29uc3QgY29udmV4MjogYm9vbGVhbiA9IGIyVmVjMi5Dcm9zc1ZWKGVkZ2UxLCBlZGdlMikgPj0gMC4wO1xuXG4gICAgY29uc3Qgc2luVG9sOiBudW1iZXIgPSAwLjE7XG4gICAgY29uc3Qgc2lkZTE6IGJvb2xlYW4gPSBiMlZlYzIuRG90VlYocHJpbWFyeUF4aXMubm9ybWFsLCBlZGdlMSkgPD0gMC4wO1xuXG4gICAgLy8gQ2hlY2sgR2F1c3MgTWFwXG4gICAgaWYgKHNpZGUxKSB7XG4gICAgICBpZiAoY29udmV4MSkge1xuICAgICAgICBpZiAoYjJWZWMyLkNyb3NzVlYocHJpbWFyeUF4aXMubm9ybWFsLCBub3JtYWwwKSA+IHNpblRvbCkge1xuICAgICAgICAgIC8vIFNraXAgcmVnaW9uXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRtaXQgcmVnaW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbmFwIHJlZ2lvblxuICAgICAgICBwcmltYXJ5QXhpcyA9IGVkZ2VBeGlzO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY29udmV4Mikge1xuICAgICAgICBpZiAoYjJWZWMyLkNyb3NzVlYobm9ybWFsMiwgcHJpbWFyeUF4aXMubm9ybWFsKSA+IHNpblRvbCkge1xuICAgICAgICAgIC8vIFNraXAgcmVnaW9uXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRtaXQgcmVnaW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbmFwIHJlZ2lvblxuICAgICAgICBwcmltYXJ5QXhpcyA9IGVkZ2VBeGlzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGIyQ2xpcFZlcnRleCBjbGlwUG9pbnRzWzJdO1xuICBjb25zdCBjbGlwUG9pbnRzOiBbYjJDbGlwVmVydGV4LCBiMkNsaXBWZXJ0ZXhdID0gYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19jbGlwUG9pbnRzO1xuICAvLyBiMlJlZmVyZW5jZUZhY2UgcmVmO1xuICBjb25zdCByZWY6IGIyUmVmZXJlbmNlRmFjZSA9IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uX3NfcmVmO1xuICBpZiAocHJpbWFyeUF4aXMudHlwZSA9PT0gYjJFUEF4aXNUeXBlLmVfZWRnZUEpIHtcbiAgICBtYW5pZm9sZC50eXBlID0gYjJNYW5pZm9sZFR5cGUuZV9mYWNlQTtcblxuICAgIC8vIFNlYXJjaCBmb3IgdGhlIHBvbHlnb24gbm9ybWFsIHRoYXQgaXMgbW9zdCBhbnRpLXBhcmFsbGVsIHRvIHRoZSBlZGdlIG5vcm1hbC5cbiAgICBsZXQgYmVzdEluZGV4OiBudW1iZXIgPSAwO1xuICAgIGxldCBiZXN0VmFsdWU6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihwcmltYXJ5QXhpcy5ub3JtYWwsIHRlbXBQb2x5Z29uQi5ub3JtYWxzWzBdKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRlbXBQb2x5Z29uQi5jb3VudDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZTogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHByaW1hcnlBeGlzLm5vcm1hbCwgdGVtcFBvbHlnb25CLm5vcm1hbHNbaV0pO1xuICAgICAgaWYgKHZhbHVlIDwgYmVzdFZhbHVlKSB7XG4gICAgICAgIGJlc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGkxOiBudW1iZXIgPSBiZXN0SW5kZXg7XG4gICAgY29uc3QgaTI6IG51bWJlciA9IGkxICsgMSA8IHRlbXBQb2x5Z29uQi5jb3VudCA/IGkxICsgMSA6IDA7XG5cbiAgICBjbGlwUG9pbnRzWzBdLnYuQ29weSh0ZW1wUG9seWdvbkIudmVydGljZXNbaTFdKTtcbiAgICBjbGlwUG9pbnRzWzBdLmlkLmNmLmluZGV4QSA9IDA7XG4gICAgY2xpcFBvaW50c1swXS5pZC5jZi5pbmRleEIgPSBpMTtcbiAgICBjbGlwUG9pbnRzWzBdLmlkLmNmLnR5cGVBID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV9mYWNlO1xuICAgIGNsaXBQb2ludHNbMF0uaWQuY2YudHlwZUIgPSBiMkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleDtcblxuICAgIGNsaXBQb2ludHNbMV0udi5Db3B5KHRlbXBQb2x5Z29uQi52ZXJ0aWNlc1tpMl0pO1xuICAgIGNsaXBQb2ludHNbMV0uaWQuY2YuaW5kZXhBID0gMDtcbiAgICBjbGlwUG9pbnRzWzFdLmlkLmNmLmluZGV4QiA9IGkyO1xuICAgIGNsaXBQb2ludHNbMV0uaWQuY2YudHlwZUEgPSBiMkNvbnRhY3RGZWF0dXJlVHlwZS5lX2ZhY2U7XG4gICAgY2xpcFBvaW50c1sxXS5pZC5jZi50eXBlQiA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4O1xuXG4gICAgcmVmLmkxID0gMDtcbiAgICByZWYuaTIgPSAxO1xuICAgIHJlZi52MS5Db3B5KHYxKTtcbiAgICByZWYudjIuQ29weSh2Mik7XG4gICAgcmVmLm5vcm1hbC5Db3B5KHByaW1hcnlBeGlzLm5vcm1hbCk7XG4gICAgcmVmLnNpZGVOb3JtYWwxLkNvcHkoZWRnZTEpLlNlbGZOZWcoKTsgLy8gcmVmLnNpZGVOb3JtYWwxID0gLWVkZ2UxO1xuICAgIHJlZi5zaWRlTm9ybWFsMi5Db3B5KGVkZ2UxKTtcbiAgfSBlbHNlIHtcbiAgICBtYW5pZm9sZC50eXBlID0gYjJNYW5pZm9sZFR5cGUuZV9mYWNlQjtcblxuICAgIGNsaXBQb2ludHNbMF0udi5Db3B5KHYyKTtcbiAgICBjbGlwUG9pbnRzWzBdLmlkLmNmLmluZGV4QSA9IDE7XG4gICAgY2xpcFBvaW50c1swXS5pZC5jZi5pbmRleEIgPSBwcmltYXJ5QXhpcy5pbmRleDtcbiAgICBjbGlwUG9pbnRzWzBdLmlkLmNmLnR5cGVBID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXg7XG4gICAgY2xpcFBvaW50c1swXS5pZC5jZi50eXBlQiA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfZmFjZTtcblxuICAgIGNsaXBQb2ludHNbMV0udi5Db3B5KHYxKTtcbiAgICBjbGlwUG9pbnRzWzFdLmlkLmNmLmluZGV4QSA9IDA7XG4gICAgY2xpcFBvaW50c1sxXS5pZC5jZi5pbmRleEIgPSBwcmltYXJ5QXhpcy5pbmRleDtcbiAgICBjbGlwUG9pbnRzWzFdLmlkLmNmLnR5cGVBID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXg7XG4gICAgY2xpcFBvaW50c1sxXS5pZC5jZi50eXBlQiA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfZmFjZTtcblxuICAgIHJlZi5pMSA9IHByaW1hcnlBeGlzLmluZGV4O1xuICAgIHJlZi5pMiA9IHJlZi5pMSArIDEgPCB0ZW1wUG9seWdvbkIuY291bnQgPyByZWYuaTEgKyAxIDogMDtcbiAgICByZWYudjEuQ29weSh0ZW1wUG9seWdvbkIudmVydGljZXNbcmVmLmkxXSk7XG4gICAgcmVmLnYyLkNvcHkodGVtcFBvbHlnb25CLnZlcnRpY2VzW3JlZi5pMl0pO1xuICAgIHJlZi5ub3JtYWwuQ29weSh0ZW1wUG9seWdvbkIubm9ybWFsc1tyZWYuaTFdKTtcblxuICAgIC8vIENDVyB3aW5kaW5nXG4gICAgcmVmLnNpZGVOb3JtYWwxLlNldChyZWYubm9ybWFsLnksIC1yZWYubm9ybWFsLngpO1xuICAgIHJlZi5zaWRlTm9ybWFsMi5Db3B5KHJlZi5zaWRlTm9ybWFsMSkuU2VsZk5lZygpOyAvLyByZWYuc2lkZU5vcm1hbDIgPSAtcmVmLnNpZGVOb3JtYWwxO1xuICB9XG5cbiAgcmVmLnNpZGVPZmZzZXQxID0gYjJWZWMyLkRvdFZWKHJlZi5zaWRlTm9ybWFsMSwgcmVmLnYxKTtcbiAgcmVmLnNpZGVPZmZzZXQyID0gYjJWZWMyLkRvdFZWKHJlZi5zaWRlTm9ybWFsMiwgcmVmLnYyKTtcblxuICAvLyBDbGlwIGluY2lkZW50IGVkZ2UgYWdhaW5zdCByZWZlcmVuY2UgZmFjZSBzaWRlIHBsYW5lc1xuICAvLyBiMkNsaXBWZXJ0ZXggY2xpcFBvaW50czFbMl07XG4gIGNvbnN0IGNsaXBQb2ludHMxOiBbYjJDbGlwVmVydGV4LCBiMkNsaXBWZXJ0ZXhdID0gYjJDb2xsaWRlRWRnZUFuZFBvbHlnb25fc19jbGlwUG9pbnRzMTsgLy8gW25ldyBiMkNsaXBWZXJ0ZXgoKSwgbmV3IGIyQ2xpcFZlcnRleCgpXTtcbiAgLy8gYjJDbGlwVmVydGV4IGNsaXBQb2ludHMyWzJdO1xuICBjb25zdCBjbGlwUG9pbnRzMjogW2IyQ2xpcFZlcnRleCwgYjJDbGlwVmVydGV4XSA9IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uX3NfY2xpcFBvaW50czI7IC8vIFtuZXcgYjJDbGlwVmVydGV4KCksIG5ldyBiMkNsaXBWZXJ0ZXgoKV07XG4gIC8vIGludDMyIG5wO1xuICBsZXQgbnA6IG51bWJlcjtcblxuICAvLyBDbGlwIHRvIHNpZGUgMVxuICBucCA9IGIyQ2xpcFNlZ21lbnRUb0xpbmUoY2xpcFBvaW50czEsIGNsaXBQb2ludHMsIHJlZi5zaWRlTm9ybWFsMSwgcmVmLnNpZGVPZmZzZXQxLCByZWYuaTEpO1xuXG4gIGlmIChucCA8IGIyX21heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ2xpcCB0byBzaWRlIDJcbiAgbnAgPSBiMkNsaXBTZWdtZW50VG9MaW5lKGNsaXBQb2ludHMyLCBjbGlwUG9pbnRzMSwgcmVmLnNpZGVOb3JtYWwyLCByZWYuc2lkZU9mZnNldDIsIHJlZi5pMik7XG5cbiAgaWYgKG5wIDwgYjJfbWF4TWFuaWZvbGRQb2ludHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBOb3cgY2xpcFBvaW50czIgY29udGFpbnMgdGhlIGNsaXBwZWQgcG9pbnRzLlxuICBpZiAocHJpbWFyeUF4aXMudHlwZSA9PT0gYjJFUEF4aXNUeXBlLmVfZWRnZUEpIHtcbiAgICBtYW5pZm9sZC5sb2NhbE5vcm1hbC5Db3B5KHJlZi5ub3JtYWwpO1xuICAgIG1hbmlmb2xkLmxvY2FsUG9pbnQuQ29weShyZWYudjEpO1xuICB9IGVsc2Uge1xuICAgIG1hbmlmb2xkLmxvY2FsTm9ybWFsLkNvcHkocG9seWdvbkIubV9ub3JtYWxzW3JlZi5pMV0pO1xuICAgIG1hbmlmb2xkLmxvY2FsUG9pbnQuQ29weShwb2x5Z29uQi5tX3ZlcnRpY2VzW3JlZi5pMV0pO1xuICB9XG5cbiAgbGV0IHBvaW50Q291bnQgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGIyX21heE1hbmlmb2xkUG9pbnRzOyArK2kpIHtcbiAgICBjb25zdCBzZXBhcmF0aW9uOiBudW1iZXIgPSBiMlZlYzIuRG90VlYocmVmLm5vcm1hbCwgYjJWZWMyLlN1YlZWKGNsaXBQb2ludHMyW2ldLnYsIHJlZi52MSwgYjJWZWMyLnNfdDApKTtcblxuICAgIGlmIChzZXBhcmF0aW9uIDw9IHJhZGl1cykge1xuICAgICAgY29uc3QgY3A6IGIyTWFuaWZvbGRQb2ludCA9IG1hbmlmb2xkLnBvaW50c1twb2ludENvdW50XTtcblxuICAgICAgaWYgKHByaW1hcnlBeGlzLnR5cGUgPT09IGIyRVBBeGlzVHlwZS5lX2VkZ2VBKSB7XG4gICAgICAgIGIyVHJhbnNmb3JtLk11bFRYVih4ZiwgY2xpcFBvaW50czJbaV0udiwgY3AubG9jYWxQb2ludCk7IC8vIGNwLmxvY2FsUG9pbnQgPSBiMk11bFQoeGYsIGNsaXBQb2ludHMyW2ldLnYpO1xuICAgICAgICBjcC5pZC5Db3B5KGNsaXBQb2ludHMyW2ldLmlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNwLmxvY2FsUG9pbnQuQ29weShjbGlwUG9pbnRzMltpXS52KTtcbiAgICAgICAgY3AuaWQuY2YudHlwZUEgPSBjbGlwUG9pbnRzMltpXS5pZC5jZi50eXBlQjtcbiAgICAgICAgY3AuaWQuY2YudHlwZUIgPSBjbGlwUG9pbnRzMltpXS5pZC5jZi50eXBlQTtcbiAgICAgICAgY3AuaWQuY2YuaW5kZXhBID0gY2xpcFBvaW50czJbaV0uaWQuY2YuaW5kZXhCO1xuICAgICAgICBjcC5pZC5jZi5pbmRleEIgPSBjbGlwUG9pbnRzMltpXS5pZC5jZi5pbmRleEE7XG4gICAgICB9XG5cbiAgICAgICsrcG9pbnRDb3VudDtcbiAgICB9XG4gIH1cblxuICBtYW5pZm9sZC5wb2ludENvdW50ID0gcG9pbnRDb3VudDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQWxJQTtBQW9JQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFoUEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_collide_edge.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_collide_polygon.ts":
/*!***************************************************!*\
  !*** ./src/box2d/collision/b2_collide_polygon.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2CollidePolygons = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ./b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2FindMaxSeparation_s_xf = new b2_math_1.b2Transform();\nvar b2FindMaxSeparation_s_n = new b2_math_1.b2Vec2();\nvar b2FindMaxSeparation_s_v1 = new b2_math_1.b2Vec2();\nfunction b2FindMaxSeparation(edgeIndex, poly1, xf1, poly2, xf2) {\n    var count1 = poly1.m_count;\n    var count2 = poly2.m_count;\n    var n1s = poly1.m_normals;\n    var v1s = poly1.m_vertices;\n    var v2s = poly2.m_vertices;\n    var xf = b2_math_1.b2Transform.MulTXX(xf2, xf1, b2FindMaxSeparation_s_xf);\n    var bestIndex = 0;\n    var maxSeparation = -b2_settings_1.b2_maxFloat;\n    for (var i = 0; i < count1; ++i) {\n        var n = b2_math_1.b2Rot.MulRV(xf.q, n1s[i], b2FindMaxSeparation_s_n);\n        var v1 = b2_math_1.b2Transform.MulXV(xf, v1s[i], b2FindMaxSeparation_s_v1);\n        var si = b2_settings_1.b2_maxFloat;\n        for (var j = 0; j < count2; ++j) {\n            var sij = b2_math_1.b2Vec2.DotVV(n, b2_math_1.b2Vec2.SubVV(v2s[j], v1, b2_math_1.b2Vec2.s_t0));\n            if (sij < si) {\n                si = sij;\n            }\n        }\n        if (si > maxSeparation) {\n            maxSeparation = si;\n            bestIndex = i;\n        }\n    }\n    edgeIndex[0] = bestIndex;\n    return maxSeparation;\n}\nvar b2FindIncidentEdge_s_normal1 = new b2_math_1.b2Vec2();\nfunction b2FindIncidentEdge(c, poly1, xf1, edge1, poly2, xf2) {\n    var normals1 = poly1.m_normals;\n    var count2 = poly2.m_count;\n    var vertices2 = poly2.m_vertices;\n    var normals2 = poly2.m_normals;\n    var normal1 = b2_math_1.b2Rot.MulTRV(xf2.q, b2_math_1.b2Rot.MulRV(xf1.q, normals1[edge1], b2_math_1.b2Vec2.s_t0), b2FindIncidentEdge_s_normal1);\n    var index = 0;\n    var minDot = b2_settings_1.b2_maxFloat;\n    for (var i = 0; i < count2; ++i) {\n        var dot = b2_math_1.b2Vec2.DotVV(normal1, normals2[i]);\n        if (dot < minDot) {\n            minDot = dot;\n            index = i;\n        }\n    }\n    var i1 = index;\n    var i2 = i1 + 1 < count2 ? i1 + 1 : 0;\n    var c0 = c[0];\n    b2_math_1.b2Transform.MulXV(xf2, vertices2[i1], c0.v);\n    var cf0 = c0.id.cf;\n    cf0.indexA = edge1;\n    cf0.indexB = i1;\n    cf0.typeA = b2_collision_1.b2ContactFeatureType.e_face;\n    cf0.typeB = b2_collision_1.b2ContactFeatureType.e_vertex;\n    var c1 = c[1];\n    b2_math_1.b2Transform.MulXV(xf2, vertices2[i2], c1.v);\n    var cf1 = c1.id.cf;\n    cf1.indexA = edge1;\n    cf1.indexB = i2;\n    cf1.typeA = b2_collision_1.b2ContactFeatureType.e_face;\n    cf1.typeB = b2_collision_1.b2ContactFeatureType.e_vertex;\n}\nvar b2CollidePolygons_s_incidentEdge = [new b2_collision_1.b2ClipVertex(), new b2_collision_1.b2ClipVertex()];\nvar b2CollidePolygons_s_clipPoints1 = [new b2_collision_1.b2ClipVertex(), new b2_collision_1.b2ClipVertex()];\nvar b2CollidePolygons_s_clipPoints2 = [new b2_collision_1.b2ClipVertex(), new b2_collision_1.b2ClipVertex()];\nvar b2CollidePolygons_s_edgeA = [0];\nvar b2CollidePolygons_s_edgeB = [0];\nvar b2CollidePolygons_s_localTangent = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_localNormal = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_planePoint = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_normal = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_tangent = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_ntangent = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_v11 = new b2_math_1.b2Vec2();\nvar b2CollidePolygons_s_v12 = new b2_math_1.b2Vec2();\nfunction b2CollidePolygons(manifold, polyA, xfA, polyB, xfB) {\n    manifold.pointCount = 0;\n    var totalRadius = polyA.m_radius + polyB.m_radius;\n    var edgeA = b2CollidePolygons_s_edgeA;\n    edgeA[0] = 0;\n    var separationA = b2FindMaxSeparation(edgeA, polyA, xfA, polyB, xfB);\n    if (separationA > totalRadius) {\n        return;\n    }\n    var edgeB = b2CollidePolygons_s_edgeB;\n    edgeB[0] = 0;\n    var separationB = b2FindMaxSeparation(edgeB, polyB, xfB, polyA, xfA);\n    if (separationB > totalRadius) {\n        return;\n    }\n    var poly1;\n    var poly2;\n    var xf1, xf2;\n    var edge1 = 0;\n    var flip = 0;\n    var k_tol = 0.1 * b2_settings_1.b2_linearSlop;\n    if (separationB > separationA + k_tol) {\n        poly1 = polyB;\n        poly2 = polyA;\n        xf1 = xfB;\n        xf2 = xfA;\n        edge1 = edgeB[0];\n        manifold.type = b2_collision_1.b2ManifoldType.e_faceB;\n        flip = 1;\n    }\n    else {\n        poly1 = polyA;\n        poly2 = polyB;\n        xf1 = xfA;\n        xf2 = xfB;\n        edge1 = edgeA[0];\n        manifold.type = b2_collision_1.b2ManifoldType.e_faceA;\n        flip = 0;\n    }\n    var incidentEdge = b2CollidePolygons_s_incidentEdge;\n    b2FindIncidentEdge(incidentEdge, poly1, xf1, edge1, poly2, xf2);\n    var count1 = poly1.m_count;\n    var vertices1 = poly1.m_vertices;\n    var iv1 = edge1;\n    var iv2 = edge1 + 1 < count1 ? edge1 + 1 : 0;\n    var local_v11 = vertices1[iv1];\n    var local_v12 = vertices1[iv2];\n    var localTangent = b2_math_1.b2Vec2.SubVV(local_v12, local_v11, b2CollidePolygons_s_localTangent);\n    localTangent.Normalize();\n    var localNormal = b2_math_1.b2Vec2.CrossVOne(localTangent, b2CollidePolygons_s_localNormal);\n    var planePoint = b2_math_1.b2Vec2.MidVV(local_v11, local_v12, b2CollidePolygons_s_planePoint);\n    var tangent = b2_math_1.b2Rot.MulRV(xf1.q, localTangent, b2CollidePolygons_s_tangent);\n    var normal = b2_math_1.b2Vec2.CrossVOne(tangent, b2CollidePolygons_s_normal);\n    var v11 = b2_math_1.b2Transform.MulXV(xf1, local_v11, b2CollidePolygons_s_v11);\n    var v12 = b2_math_1.b2Transform.MulXV(xf1, local_v12, b2CollidePolygons_s_v12);\n    var frontOffset = b2_math_1.b2Vec2.DotVV(normal, v11);\n    var sideOffset1 = -b2_math_1.b2Vec2.DotVV(tangent, v11) + totalRadius;\n    var sideOffset2 = b2_math_1.b2Vec2.DotVV(tangent, v12) + totalRadius;\n    var clipPoints1 = b2CollidePolygons_s_clipPoints1;\n    var clipPoints2 = b2CollidePolygons_s_clipPoints2;\n    var np;\n    var ntangent = b2_math_1.b2Vec2.NegV(tangent, b2CollidePolygons_s_ntangent);\n    np = b2_collision_1.b2ClipSegmentToLine(clipPoints1, incidentEdge, ntangent, sideOffset1, iv1);\n    if (np < 2) {\n        return;\n    }\n    np = b2_collision_1.b2ClipSegmentToLine(clipPoints2, clipPoints1, tangent, sideOffset2, iv2);\n    if (np < 2) {\n        return;\n    }\n    manifold.localNormal.Copy(localNormal);\n    manifold.localPoint.Copy(planePoint);\n    var pointCount = 0;\n    for (var i = 0; i < b2_settings_1.b2_maxManifoldPoints; ++i) {\n        var cv = clipPoints2[i];\n        var separation = b2_math_1.b2Vec2.DotVV(normal, cv.v) - frontOffset;\n        if (separation <= totalRadius) {\n            var cp = manifold.points[pointCount];\n            b2_math_1.b2Transform.MulTXV(xf2, cv.v, cp.localPoint);\n            cp.id.Copy(cv.id);\n            if (flip) {\n                var cf = cp.id.cf;\n                cp.id.cf.indexA = cf.indexB;\n                cp.id.cf.indexB = cf.indexA;\n                cp.id.cf.typeA = cf.typeB;\n                cp.id.cf.typeB = cf.typeA;\n            }\n            ++pointCount;\n        }\n    }\n    manifold.pointCount = pointCount;\n}\nexports.b2CollidePolygons = b2CollidePolygons;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2NvbGxpZGVfcG9seWdvbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9jb2xsaXNpb24vYjJfY29sbGlkZV9wb2x5Z29uLnRzPzMyNDgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTUlUIExpY2Vuc2VcblxuLy8gQ29weXJpZ2h0IChjKSAyMDE5IEVyaW4gQ2F0dG9cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbi8vIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuXG5pbXBvcnQgeyBiMl9saW5lYXJTbG9wLCBiMl9tYXhGbG9hdCwgYjJfbWF4TWFuaWZvbGRQb2ludHMgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyVHJhbnNmb3JtLCBiMlJvdCB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCwgYjJDbGlwVmVydGV4LCBiMkNvbnRhY3RGZWF0dXJlLCBiMkNvbnRhY3RGZWF0dXJlVHlwZSwgYjJNYW5pZm9sZFR5cGUsIGIyQ2xpcFNlZ21lbnRUb0xpbmUsIGIyTWFuaWZvbGRQb2ludCB9IGZyb20gXCIuL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJQb2x5Z29uU2hhcGUgfSBmcm9tIFwiLi9iMl9wb2x5Z29uX3NoYXBlXCI7XG5cbi8vIEZpbmQgdGhlIG1heCBzZXBhcmF0aW9uIGJldHdlZW4gcG9seTEgYW5kIHBvbHkyIHVzaW5nIGVkZ2Ugbm9ybWFscyBmcm9tIHBvbHkxLlxuY29uc3QgYjJGaW5kTWF4U2VwYXJhdGlvbl9zX3hmOiBiMlRyYW5zZm9ybSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuY29uc3QgYjJGaW5kTWF4U2VwYXJhdGlvbl9zX246IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyRmluZE1heFNlcGFyYXRpb25fc192MTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuZnVuY3Rpb24gYjJGaW5kTWF4U2VwYXJhdGlvbihlZGdlSW5kZXg6IFtudW1iZXJdLCBwb2x5MTogYjJQb2x5Z29uU2hhcGUsIHhmMTogYjJUcmFuc2Zvcm0sIHBvbHkyOiBiMlBvbHlnb25TaGFwZSwgeGYyOiBiMlRyYW5zZm9ybSk6IG51bWJlciB7XG4gIGNvbnN0IGNvdW50MTogbnVtYmVyID0gcG9seTEubV9jb3VudDtcbiAgY29uc3QgY291bnQyOiBudW1iZXIgPSBwb2x5Mi5tX2NvdW50O1xuICBjb25zdCBuMXM6IGIyVmVjMltdID0gcG9seTEubV9ub3JtYWxzO1xuICBjb25zdCB2MXM6IGIyVmVjMltdID0gcG9seTEubV92ZXJ0aWNlcztcbiAgY29uc3QgdjJzOiBiMlZlYzJbXSA9IHBvbHkyLm1fdmVydGljZXM7XG4gIGNvbnN0IHhmOiBiMlRyYW5zZm9ybSA9IGIyVHJhbnNmb3JtLk11bFRYWCh4ZjIsIHhmMSwgYjJGaW5kTWF4U2VwYXJhdGlvbl9zX3hmKTtcblxuICBsZXQgYmVzdEluZGV4OiBudW1iZXIgPSAwO1xuICBsZXQgbWF4U2VwYXJhdGlvbjogbnVtYmVyID0gLWIyX21heEZsb2F0O1xuXG4gIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBjb3VudDE7ICsraSkge1xuICAgIC8vIEdldCBwb2x5MSBub3JtYWwgaW4gZnJhbWUyLlxuICAgIGNvbnN0IG46IGIyVmVjMiA9IGIyUm90Lk11bFJWKHhmLnEsIG4xc1tpXSwgYjJGaW5kTWF4U2VwYXJhdGlvbl9zX24pO1xuICAgIGNvbnN0IHYxOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZiwgdjFzW2ldLCBiMkZpbmRNYXhTZXBhcmF0aW9uX3NfdjEpO1xuXG4gICAgLy8gRmluZCBkZWVwZXN0IHBvaW50IGZvciBub3JtYWwgaS5cbiAgICBsZXQgc2k6IG51bWJlciA9IGIyX21heEZsb2F0O1xuICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCBjb3VudDI7ICsraikge1xuICAgICAgY29uc3Qgc2lqID0gYjJWZWMyLkRvdFZWKG4sIGIyVmVjMi5TdWJWVih2MnNbal0sIHYxLCBiMlZlYzIuc190MCkpO1xuICAgICAgaWYgKHNpaiA8IHNpKSB7XG4gICAgICAgIHNpID0gc2lqO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzaSA+IG1heFNlcGFyYXRpb24pIHtcbiAgICAgIG1heFNlcGFyYXRpb24gPSBzaTtcbiAgICAgIGJlc3RJbmRleCA9IGk7XG4gICAgfVxuICB9XG5cbiAgZWRnZUluZGV4WzBdID0gYmVzdEluZGV4O1xuICByZXR1cm4gbWF4U2VwYXJhdGlvbjtcbn1cblxuY29uc3QgYjJGaW5kSW5jaWRlbnRFZGdlX3Nfbm9ybWFsMTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuZnVuY3Rpb24gYjJGaW5kSW5jaWRlbnRFZGdlKGM6IFtiMkNsaXBWZXJ0ZXgsIGIyQ2xpcFZlcnRleF0sIHBvbHkxOiBiMlBvbHlnb25TaGFwZSwgeGYxOiBiMlRyYW5zZm9ybSwgZWRnZTE6IG51bWJlciwgcG9seTI6IGIyUG9seWdvblNoYXBlLCB4ZjI6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gIGNvbnN0IG5vcm1hbHMxOiBiMlZlYzJbXSA9IHBvbHkxLm1fbm9ybWFscztcblxuICBjb25zdCBjb3VudDI6IG51bWJlciA9IHBvbHkyLm1fY291bnQ7XG4gIGNvbnN0IHZlcnRpY2VzMjogYjJWZWMyW10gPSBwb2x5Mi5tX3ZlcnRpY2VzO1xuICBjb25zdCBub3JtYWxzMjogYjJWZWMyW10gPSBwb2x5Mi5tX25vcm1hbHM7XG5cbiAgLy8gREVCVUc6IGIyQXNzZXJ0KDAgPD0gZWRnZTEgJiYgZWRnZTEgPCBwb2x5MS5tX2NvdW50KTtcblxuICAvLyBHZXQgdGhlIG5vcm1hbCBvZiB0aGUgcmVmZXJlbmNlIGVkZ2UgaW4gcG9seTIncyBmcmFtZS5cbiAgY29uc3Qgbm9ybWFsMTogYjJWZWMyID0gYjJSb3QuTXVsVFJWKHhmMi5xLCBiMlJvdC5NdWxSVih4ZjEucSwgbm9ybWFsczFbZWRnZTFdLCBiMlZlYzIuc190MCksIGIyRmluZEluY2lkZW50RWRnZV9zX25vcm1hbDEpO1xuXG4gIC8vIEZpbmQgdGhlIGluY2lkZW50IGVkZ2Ugb24gcG9seTIuXG4gIGxldCBpbmRleDogbnVtYmVyID0gMDtcbiAgbGV0IG1pbkRvdDogbnVtYmVyID0gYjJfbWF4RmxvYXQ7XG4gIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBjb3VudDI7ICsraSkge1xuICAgIGNvbnN0IGRvdDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG5vcm1hbDEsIG5vcm1hbHMyW2ldKTtcbiAgICBpZiAoZG90IDwgbWluRG90KSB7XG4gICAgICBtaW5Eb3QgPSBkb3Q7XG4gICAgICBpbmRleCA9IGk7XG4gICAgfVxuICB9XG5cbiAgLy8gQnVpbGQgdGhlIGNsaXAgdmVydGljZXMgZm9yIHRoZSBpbmNpZGVudCBlZGdlLlxuICBjb25zdCBpMTogbnVtYmVyID0gaW5kZXg7XG4gIGNvbnN0IGkyOiBudW1iZXIgPSBpMSArIDEgPCBjb3VudDIgPyBpMSArIDEgOiAwO1xuXG4gIGNvbnN0IGMwOiBiMkNsaXBWZXJ0ZXggPSBjWzBdO1xuICBiMlRyYW5zZm9ybS5NdWxYVih4ZjIsIHZlcnRpY2VzMltpMV0sIGMwLnYpO1xuICBjb25zdCBjZjA6IGIyQ29udGFjdEZlYXR1cmUgPSBjMC5pZC5jZjtcbiAgY2YwLmluZGV4QSA9IGVkZ2UxO1xuICBjZjAuaW5kZXhCID0gaTE7XG4gIGNmMC50eXBlQSA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfZmFjZTtcbiAgY2YwLnR5cGVCID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXg7XG5cbiAgY29uc3QgYzE6IGIyQ2xpcFZlcnRleCA9IGNbMV07XG4gIGIyVHJhbnNmb3JtLk11bFhWKHhmMiwgdmVydGljZXMyW2kyXSwgYzEudik7XG4gIGNvbnN0IGNmMTogYjJDb250YWN0RmVhdHVyZSA9IGMxLmlkLmNmO1xuICBjZjEuaW5kZXhBID0gZWRnZTE7XG4gIGNmMS5pbmRleEIgPSBpMjtcbiAgY2YxLnR5cGVBID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV9mYWNlO1xuICBjZjEudHlwZUIgPSBiMkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleDtcbn1cblxuLy8gRmluZCBlZGdlIG5vcm1hbCBvZiBtYXggc2VwYXJhdGlvbiBvbiBBIC0gcmV0dXJuIGlmIHNlcGFyYXRpbmcgYXhpcyBpcyBmb3VuZFxuLy8gRmluZCBlZGdlIG5vcm1hbCBvZiBtYXggc2VwYXJhdGlvbiBvbiBCIC0gcmV0dXJuIGlmIHNlcGFyYXRpb24gYXhpcyBpcyBmb3VuZFxuLy8gQ2hvb3NlIHJlZmVyZW5jZSBlZGdlIGFzIG1pbihtaW5BLCBtaW5CKVxuLy8gRmluZCBpbmNpZGVudCBlZGdlXG4vLyBDbGlwXG5cbi8vIFRoZSBub3JtYWwgcG9pbnRzIGZyb20gMSB0byAyXG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uc19zX2luY2lkZW50RWRnZTogW2IyQ2xpcFZlcnRleCwgYjJDbGlwVmVydGV4XSA9IFsgbmV3IGIyQ2xpcFZlcnRleCgpLCBuZXcgYjJDbGlwVmVydGV4KCkgXTtcbmNvbnN0IGIyQ29sbGlkZVBvbHlnb25zX3NfY2xpcFBvaW50czE6IFtiMkNsaXBWZXJ0ZXgsIGIyQ2xpcFZlcnRleF0gPSBbIG5ldyBiMkNsaXBWZXJ0ZXgoKSwgbmV3IGIyQ2xpcFZlcnRleCgpIF07XG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uc19zX2NsaXBQb2ludHMyOiBbYjJDbGlwVmVydGV4LCBiMkNsaXBWZXJ0ZXhdID0gWyBuZXcgYjJDbGlwVmVydGV4KCksIG5ldyBiMkNsaXBWZXJ0ZXgoKSBdO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbnNfc19lZGdlQTogW251bWJlcl0gPSBbIDAgXTtcbmNvbnN0IGIyQ29sbGlkZVBvbHlnb25zX3NfZWRnZUI6IFtudW1iZXJdID0gWyAwIF07XG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uc19zX2xvY2FsVGFuZ2VudDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbnNfc19sb2NhbE5vcm1hbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbnNfc19wbGFuZVBvaW50OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uc19zX25vcm1hbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbnNfc190YW5nZW50OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uc19zX250YW5nZW50OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMkNvbGxpZGVQb2x5Z29uc19zX3YxMTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJDb2xsaWRlUG9seWdvbnNfc192MTI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmV4cG9ydCBmdW5jdGlvbiBiMkNvbGxpZGVQb2x5Z29ucyhtYW5pZm9sZDogYjJNYW5pZm9sZCwgcG9seUE6IGIyUG9seWdvblNoYXBlLCB4ZkE6IGIyVHJhbnNmb3JtLCBwb2x5QjogYjJQb2x5Z29uU2hhcGUsIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDA7XG4gIGNvbnN0IHRvdGFsUmFkaXVzOiBudW1iZXIgPSBwb2x5QS5tX3JhZGl1cyArIHBvbHlCLm1fcmFkaXVzO1xuXG4gIGNvbnN0IGVkZ2VBOiBbbnVtYmVyXSA9IGIyQ29sbGlkZVBvbHlnb25zX3NfZWRnZUE7IGVkZ2VBWzBdID0gMDtcbiAgY29uc3Qgc2VwYXJhdGlvbkE6IG51bWJlciA9IGIyRmluZE1heFNlcGFyYXRpb24oZWRnZUEsIHBvbHlBLCB4ZkEsIHBvbHlCLCB4ZkIpO1xuICBpZiAoc2VwYXJhdGlvbkEgPiB0b3RhbFJhZGl1cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGVkZ2VCOiBbbnVtYmVyXSA9IGIyQ29sbGlkZVBvbHlnb25zX3NfZWRnZUI7IGVkZ2VCWzBdID0gMDtcbiAgY29uc3Qgc2VwYXJhdGlvbkI6IG51bWJlciA9IGIyRmluZE1heFNlcGFyYXRpb24oZWRnZUIsIHBvbHlCLCB4ZkIsIHBvbHlBLCB4ZkEpO1xuICBpZiAoc2VwYXJhdGlvbkIgPiB0b3RhbFJhZGl1cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBwb2x5MTogYjJQb2x5Z29uU2hhcGU7IC8vIHJlZmVyZW5jZSBwb2x5Z29uXG4gIGxldCBwb2x5MjogYjJQb2x5Z29uU2hhcGU7IC8vIGluY2lkZW50IHBvbHlnb25cbiAgbGV0IHhmMTogYjJUcmFuc2Zvcm0sIHhmMjogYjJUcmFuc2Zvcm07XG4gIGxldCBlZGdlMTogbnVtYmVyID0gMDsgLy8gcmVmZXJlbmNlIGVkZ2VcbiAgbGV0IGZsaXA6IG51bWJlciA9IDA7XG4gIGNvbnN0IGtfdG9sOiBudW1iZXIgPSAwLjEgKiBiMl9saW5lYXJTbG9wO1xuXG4gIGlmIChzZXBhcmF0aW9uQiA+IHNlcGFyYXRpb25BICsga190b2wpIHtcbiAgICBwb2x5MSA9IHBvbHlCO1xuICAgIHBvbHkyID0gcG9seUE7XG4gICAgeGYxID0geGZCO1xuICAgIHhmMiA9IHhmQTtcbiAgICBlZGdlMSA9IGVkZ2VCWzBdO1xuICAgIG1hbmlmb2xkLnR5cGUgPSBiMk1hbmlmb2xkVHlwZS5lX2ZhY2VCO1xuICAgIGZsaXAgPSAxO1xuICB9IGVsc2Uge1xuICAgIHBvbHkxID0gcG9seUE7XG4gICAgcG9seTIgPSBwb2x5QjtcbiAgICB4ZjEgPSB4ZkE7XG4gICAgeGYyID0geGZCO1xuICAgIGVkZ2UxID0gZWRnZUFbMF07XG4gICAgbWFuaWZvbGQudHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfZmFjZUE7XG4gICAgZmxpcCA9IDA7XG4gIH1cblxuICBjb25zdCBpbmNpZGVudEVkZ2U6IFtiMkNsaXBWZXJ0ZXgsIGIyQ2xpcFZlcnRleF0gPSBiMkNvbGxpZGVQb2x5Z29uc19zX2luY2lkZW50RWRnZTtcbiAgYjJGaW5kSW5jaWRlbnRFZGdlKGluY2lkZW50RWRnZSwgcG9seTEsIHhmMSwgZWRnZTEsIHBvbHkyLCB4ZjIpO1xuXG4gIGNvbnN0IGNvdW50MTogbnVtYmVyID0gcG9seTEubV9jb3VudDtcbiAgY29uc3QgdmVydGljZXMxOiBiMlZlYzJbXSA9IHBvbHkxLm1fdmVydGljZXM7XG5cbiAgY29uc3QgaXYxOiBudW1iZXIgPSBlZGdlMTtcbiAgY29uc3QgaXYyOiBudW1iZXIgPSBlZGdlMSArIDEgPCBjb3VudDEgPyBlZGdlMSArIDEgOiAwO1xuXG4gIGNvbnN0IGxvY2FsX3YxMTogYjJWZWMyID0gdmVydGljZXMxW2l2MV07XG4gIGNvbnN0IGxvY2FsX3YxMjogYjJWZWMyID0gdmVydGljZXMxW2l2Ml07XG5cbiAgY29uc3QgbG9jYWxUYW5nZW50OiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYobG9jYWxfdjEyLCBsb2NhbF92MTEsIGIyQ29sbGlkZVBvbHlnb25zX3NfbG9jYWxUYW5nZW50KTtcbiAgbG9jYWxUYW5nZW50Lk5vcm1hbGl6ZSgpO1xuXG4gIGNvbnN0IGxvY2FsTm9ybWFsOiBiMlZlYzIgPSBiMlZlYzIuQ3Jvc3NWT25lKGxvY2FsVGFuZ2VudCwgYjJDb2xsaWRlUG9seWdvbnNfc19sb2NhbE5vcm1hbCk7XG4gIGNvbnN0IHBsYW5lUG9pbnQ6IGIyVmVjMiA9IGIyVmVjMi5NaWRWVihsb2NhbF92MTEsIGxvY2FsX3YxMiwgYjJDb2xsaWRlUG9seWdvbnNfc19wbGFuZVBvaW50KTtcblxuICBjb25zdCB0YW5nZW50OiBiMlZlYzIgPSBiMlJvdC5NdWxSVih4ZjEucSwgbG9jYWxUYW5nZW50LCBiMkNvbGxpZGVQb2x5Z29uc19zX3RhbmdlbnQpO1xuICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IGIyVmVjMi5Dcm9zc1ZPbmUodGFuZ2VudCwgYjJDb2xsaWRlUG9seWdvbnNfc19ub3JtYWwpO1xuXG4gIGNvbnN0IHYxMTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGYxLCBsb2NhbF92MTEsIGIyQ29sbGlkZVBvbHlnb25zX3NfdjExKTtcbiAgY29uc3QgdjEyOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZjEsIGxvY2FsX3YxMiwgYjJDb2xsaWRlUG9seWdvbnNfc192MTIpO1xuXG4gIC8vIEZhY2Ugb2Zmc2V0LlxuICBjb25zdCBmcm9udE9mZnNldDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG5vcm1hbCwgdjExKTtcblxuICAvLyBTaWRlIG9mZnNldHMsIGV4dGVuZGVkIGJ5IHBvbHl0b3BlIHNraW4gdGhpY2tuZXNzLlxuICBjb25zdCBzaWRlT2Zmc2V0MTogbnVtYmVyID0gLWIyVmVjMi5Eb3RWVih0YW5nZW50LCB2MTEpICsgdG90YWxSYWRpdXM7XG4gIGNvbnN0IHNpZGVPZmZzZXQyOiBudW1iZXIgPSBiMlZlYzIuRG90VlYodGFuZ2VudCwgdjEyKSArIHRvdGFsUmFkaXVzO1xuXG4gIC8vIENsaXAgaW5jaWRlbnQgZWRnZSBhZ2FpbnN0IGV4dHJ1ZGVkIGVkZ2UxIHNpZGUgZWRnZXMuXG4gIGNvbnN0IGNsaXBQb2ludHMxOiBbYjJDbGlwVmVydGV4LCBiMkNsaXBWZXJ0ZXhdID0gYjJDb2xsaWRlUG9seWdvbnNfc19jbGlwUG9pbnRzMTtcbiAgY29uc3QgY2xpcFBvaW50czI6IFtiMkNsaXBWZXJ0ZXgsIGIyQ2xpcFZlcnRleF0gPSBiMkNvbGxpZGVQb2x5Z29uc19zX2NsaXBQb2ludHMyO1xuICBsZXQgbnA6IG51bWJlcjtcblxuICAvLyBDbGlwIHRvIGJveCBzaWRlIDFcbiAgY29uc3QgbnRhbmdlbnQ6IGIyVmVjMiA9IGIyVmVjMi5OZWdWKHRhbmdlbnQsIGIyQ29sbGlkZVBvbHlnb25zX3NfbnRhbmdlbnQpO1xuICBucCA9IGIyQ2xpcFNlZ21lbnRUb0xpbmUoY2xpcFBvaW50czEsIGluY2lkZW50RWRnZSwgbnRhbmdlbnQsIHNpZGVPZmZzZXQxLCBpdjEpO1xuXG4gIGlmIChucCA8IDIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDbGlwIHRvIG5lZ2F0aXZlIGJveCBzaWRlIDFcbiAgbnAgPSBiMkNsaXBTZWdtZW50VG9MaW5lKGNsaXBQb2ludHMyLCBjbGlwUG9pbnRzMSwgdGFuZ2VudCwgc2lkZU9mZnNldDIsIGl2Mik7XG5cbiAgaWYgKG5wIDwgMikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIE5vdyBjbGlwUG9pbnRzMiBjb250YWlucyB0aGUgY2xpcHBlZCBwb2ludHMuXG4gIG1hbmlmb2xkLmxvY2FsTm9ybWFsLkNvcHkobG9jYWxOb3JtYWwpO1xuICBtYW5pZm9sZC5sb2NhbFBvaW50LkNvcHkocGxhbmVQb2ludCk7XG5cbiAgbGV0IHBvaW50Q291bnQ6IG51bWJlciA9IDA7XG4gIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBiMl9tYXhNYW5pZm9sZFBvaW50czsgKytpKSB7XG4gICAgY29uc3QgY3Y6IGIyQ2xpcFZlcnRleCA9IGNsaXBQb2ludHMyW2ldO1xuICAgIGNvbnN0IHNlcGFyYXRpb246IG51bWJlciA9IGIyVmVjMi5Eb3RWVihub3JtYWwsIGN2LnYpIC0gZnJvbnRPZmZzZXQ7XG5cbiAgICBpZiAoc2VwYXJhdGlvbiA8PSB0b3RhbFJhZGl1cykge1xuICAgICAgY29uc3QgY3A6IGIyTWFuaWZvbGRQb2ludCA9IG1hbmlmb2xkLnBvaW50c1twb2ludENvdW50XTtcbiAgICAgIGIyVHJhbnNmb3JtLk11bFRYVih4ZjIsIGN2LnYsIGNwLmxvY2FsUG9pbnQpO1xuICAgICAgY3AuaWQuQ29weShjdi5pZCk7XG4gICAgICBpZiAoZmxpcCkge1xuICAgICAgICAvLyBTd2FwIGZlYXR1cmVzXG4gICAgICAgIGNvbnN0IGNmOiBiMkNvbnRhY3RGZWF0dXJlID0gY3AuaWQuY2Y7XG4gICAgICAgIGNwLmlkLmNmLmluZGV4QSA9IGNmLmluZGV4QjtcbiAgICAgICAgY3AuaWQuY2YuaW5kZXhCID0gY2YuaW5kZXhBO1xuICAgICAgICBjcC5pZC5jZi50eXBlQSA9IGNmLnR5cGVCO1xuICAgICAgICBjcC5pZC5jZi50eXBlQiA9IGNmLnR5cGVBO1xuICAgICAgfVxuICAgICAgKytwb2ludENvdW50O1xuICAgIH1cbiAgfVxuXG4gIG1hbmlmb2xkLnBvaW50Q291bnQgPSBwb2ludENvdW50O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFzQkE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBdEhBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_collide_polygon.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_collision.ts":
/*!*********************************************!*\
  !*** ./src/box2d/collision/b2_collision.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2TestOverlapShape = exports.b2ClipSegmentToLine = exports.b2TestOverlapAABB = exports.b2AABB = exports.b2RayCastOutput = exports.b2RayCastInput = exports.b2ClipVertex = exports.b2GetPointStates = exports.b2PointState = exports.b2WorldManifold = exports.b2Manifold = exports.b2ManifoldType = exports.b2ManifoldPoint = exports.b2ContactID = exports.b2ContactFeature = exports.b2ContactFeatureType = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_distance_1 = __webpack_require__(/*! ./b2_distance */ \"./src/box2d/collision/b2_distance.ts\");\nvar b2ContactFeatureType;\n(function (b2ContactFeatureType) {\n    b2ContactFeatureType[b2ContactFeatureType[\"e_vertex\"] = 0] = \"e_vertex\";\n    b2ContactFeatureType[b2ContactFeatureType[\"e_face\"] = 1] = \"e_face\";\n})(b2ContactFeatureType = exports.b2ContactFeatureType || (exports.b2ContactFeatureType = {}));\nvar b2ContactFeature = (function () {\n    function b2ContactFeature() {\n        this._key = 0;\n        this._key_invalid = false;\n        this._indexA = 0;\n        this._indexB = 0;\n        this._typeA = 0;\n        this._typeB = 0;\n    }\n    Object.defineProperty(b2ContactFeature.prototype, \"key\", {\n        get: function () {\n            if (this._key_invalid) {\n                this._key_invalid = false;\n                this._key = this._indexA | (this._indexB << 8) | (this._typeA << 16) | (this._typeB << 24);\n            }\n            return this._key;\n        },\n        set: function (value) {\n            this._key = value;\n            this._key_invalid = false;\n            this._indexA = this._key & 0xff;\n            this._indexB = (this._key >> 8) & 0xff;\n            this._typeA = (this._key >> 16) & 0xff;\n            this._typeB = (this._key >> 24) & 0xff;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2ContactFeature.prototype, \"indexA\", {\n        get: function () {\n            return this._indexA;\n        },\n        set: function (value) {\n            this._indexA = value;\n            this._key_invalid = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2ContactFeature.prototype, \"indexB\", {\n        get: function () {\n            return this._indexB;\n        },\n        set: function (value) {\n            this._indexB = value;\n            this._key_invalid = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2ContactFeature.prototype, \"typeA\", {\n        get: function () {\n            return this._typeA;\n        },\n        set: function (value) {\n            this._typeA = value;\n            this._key_invalid = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2ContactFeature.prototype, \"typeB\", {\n        get: function () {\n            return this._typeB;\n        },\n        set: function (value) {\n            this._typeB = value;\n            this._key_invalid = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return b2ContactFeature;\n}());\nexports.b2ContactFeature = b2ContactFeature;\nvar b2ContactID = (function () {\n    function b2ContactID() {\n        this.cf = new b2ContactFeature();\n    }\n    b2ContactID.prototype.Copy = function (o) {\n        this.key = o.key;\n        return this;\n    };\n    b2ContactID.prototype.Clone = function () {\n        return new b2ContactID().Copy(this);\n    };\n    Object.defineProperty(b2ContactID.prototype, \"key\", {\n        get: function () {\n            return this.cf.key;\n        },\n        set: function (value) {\n            this.cf.key = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return b2ContactID;\n}());\nexports.b2ContactID = b2ContactID;\nvar b2ManifoldPoint = (function () {\n    function b2ManifoldPoint() {\n        this.localPoint = new b2_math_1.b2Vec2();\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.id = new b2ContactID();\n    }\n    b2ManifoldPoint.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2ManifoldPoint(); });\n    };\n    b2ManifoldPoint.prototype.Reset = function () {\n        this.localPoint.SetZero();\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.id.key = 0;\n    };\n    b2ManifoldPoint.prototype.Copy = function (o) {\n        this.localPoint.Copy(o.localPoint);\n        this.normalImpulse = o.normalImpulse;\n        this.tangentImpulse = o.tangentImpulse;\n        this.id.Copy(o.id);\n        return this;\n    };\n    return b2ManifoldPoint;\n}());\nexports.b2ManifoldPoint = b2ManifoldPoint;\nvar b2ManifoldType;\n(function (b2ManifoldType) {\n    b2ManifoldType[b2ManifoldType[\"e_unknown\"] = -1] = \"e_unknown\";\n    b2ManifoldType[b2ManifoldType[\"e_circles\"] = 0] = \"e_circles\";\n    b2ManifoldType[b2ManifoldType[\"e_faceA\"] = 1] = \"e_faceA\";\n    b2ManifoldType[b2ManifoldType[\"e_faceB\"] = 2] = \"e_faceB\";\n})(b2ManifoldType = exports.b2ManifoldType || (exports.b2ManifoldType = {}));\nvar b2Manifold = (function () {\n    function b2Manifold() {\n        this.points = b2ManifoldPoint.MakeArray(b2_settings_1.b2_maxManifoldPoints);\n        this.localNormal = new b2_math_1.b2Vec2();\n        this.localPoint = new b2_math_1.b2Vec2();\n        this.type = b2ManifoldType.e_unknown;\n        this.pointCount = 0;\n    }\n    b2Manifold.prototype.Reset = function () {\n        for (var i = 0; i < b2_settings_1.b2_maxManifoldPoints; ++i) {\n            this.points[i].Reset();\n        }\n        this.localNormal.SetZero();\n        this.localPoint.SetZero();\n        this.type = b2ManifoldType.e_unknown;\n        this.pointCount = 0;\n    };\n    b2Manifold.prototype.Copy = function (o) {\n        this.pointCount = o.pointCount;\n        for (var i = 0; i < b2_settings_1.b2_maxManifoldPoints; ++i) {\n            this.points[i].Copy(o.points[i]);\n        }\n        this.localNormal.Copy(o.localNormal);\n        this.localPoint.Copy(o.localPoint);\n        this.type = o.type;\n        return this;\n    };\n    b2Manifold.prototype.Clone = function () {\n        return new b2Manifold().Copy(this);\n    };\n    return b2Manifold;\n}());\nexports.b2Manifold = b2Manifold;\nvar b2WorldManifold = (function () {\n    function b2WorldManifold() {\n        this.normal = new b2_math_1.b2Vec2();\n        this.points = b2_math_1.b2Vec2.MakeArray(b2_settings_1.b2_maxManifoldPoints);\n        this.separations = b2_settings_1.b2MakeNumberArray(b2_settings_1.b2_maxManifoldPoints);\n    }\n    b2WorldManifold.prototype.Initialize = function (manifold, xfA, radiusA, xfB, radiusB) {\n        if (manifold.pointCount === 0) {\n            return;\n        }\n        switch (manifold.type) {\n            case b2ManifoldType.e_circles: {\n                this.normal.Set(1, 0);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, manifold.localPoint, b2WorldManifold.Initialize_s_pointA);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, manifold.points[0].localPoint, b2WorldManifold.Initialize_s_pointB);\n                if (b2_math_1.b2Vec2.DistanceSquaredVV(pointA, pointB) > b2_settings_1.b2_epsilon_sq) {\n                    b2_math_1.b2Vec2.SubVV(pointB, pointA, this.normal).SelfNormalize();\n                }\n                var cA = b2_math_1.b2Vec2.AddVMulSV(pointA, radiusA, this.normal, b2WorldManifold.Initialize_s_cA);\n                var cB = b2_math_1.b2Vec2.SubVMulSV(pointB, radiusB, this.normal, b2WorldManifold.Initialize_s_cB);\n                b2_math_1.b2Vec2.MidVV(cA, cB, this.points[0]);\n                this.separations[0] = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(cB, cA, b2_math_1.b2Vec2.s_t0), this.normal);\n                break;\n            }\n            case b2ManifoldType.e_faceA: {\n                b2_math_1.b2Rot.MulRV(xfA.q, manifold.localNormal, this.normal);\n                var planePoint = b2_math_1.b2Transform.MulXV(xfA, manifold.localPoint, b2WorldManifold.Initialize_s_planePoint);\n                for (var i = 0; i < manifold.pointCount; ++i) {\n                    var clipPoint = b2_math_1.b2Transform.MulXV(xfB, manifold.points[i].localPoint, b2WorldManifold.Initialize_s_clipPoint);\n                    var s = radiusA - b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(clipPoint, planePoint, b2_math_1.b2Vec2.s_t0), this.normal);\n                    var cA = b2_math_1.b2Vec2.AddVMulSV(clipPoint, s, this.normal, b2WorldManifold.Initialize_s_cA);\n                    var cB = b2_math_1.b2Vec2.SubVMulSV(clipPoint, radiusB, this.normal, b2WorldManifold.Initialize_s_cB);\n                    b2_math_1.b2Vec2.MidVV(cA, cB, this.points[i]);\n                    this.separations[i] = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(cB, cA, b2_math_1.b2Vec2.s_t0), this.normal);\n                }\n                break;\n            }\n            case b2ManifoldType.e_faceB: {\n                b2_math_1.b2Rot.MulRV(xfB.q, manifold.localNormal, this.normal);\n                var planePoint = b2_math_1.b2Transform.MulXV(xfB, manifold.localPoint, b2WorldManifold.Initialize_s_planePoint);\n                for (var i = 0; i < manifold.pointCount; ++i) {\n                    var clipPoint = b2_math_1.b2Transform.MulXV(xfA, manifold.points[i].localPoint, b2WorldManifold.Initialize_s_clipPoint);\n                    var s = radiusB - b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(clipPoint, planePoint, b2_math_1.b2Vec2.s_t0), this.normal);\n                    var cB = b2_math_1.b2Vec2.AddVMulSV(clipPoint, s, this.normal, b2WorldManifold.Initialize_s_cB);\n                    var cA = b2_math_1.b2Vec2.SubVMulSV(clipPoint, radiusA, this.normal, b2WorldManifold.Initialize_s_cA);\n                    b2_math_1.b2Vec2.MidVV(cA, cB, this.points[i]);\n                    this.separations[i] = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(cA, cB, b2_math_1.b2Vec2.s_t0), this.normal);\n                }\n                this.normal.SelfNeg();\n                break;\n            }\n        }\n    };\n    b2WorldManifold.Initialize_s_pointA = new b2_math_1.b2Vec2();\n    b2WorldManifold.Initialize_s_pointB = new b2_math_1.b2Vec2();\n    b2WorldManifold.Initialize_s_cA = new b2_math_1.b2Vec2();\n    b2WorldManifold.Initialize_s_cB = new b2_math_1.b2Vec2();\n    b2WorldManifold.Initialize_s_planePoint = new b2_math_1.b2Vec2();\n    b2WorldManifold.Initialize_s_clipPoint = new b2_math_1.b2Vec2();\n    return b2WorldManifold;\n}());\nexports.b2WorldManifold = b2WorldManifold;\nvar b2PointState;\n(function (b2PointState) {\n    b2PointState[b2PointState[\"b2_nullState\"] = 0] = \"b2_nullState\";\n    b2PointState[b2PointState[\"b2_addState\"] = 1] = \"b2_addState\";\n    b2PointState[b2PointState[\"b2_persistState\"] = 2] = \"b2_persistState\";\n    b2PointState[b2PointState[\"b2_removeState\"] = 3] = \"b2_removeState\";\n})(b2PointState = exports.b2PointState || (exports.b2PointState = {}));\nfunction b2GetPointStates(state1, state2, manifold1, manifold2) {\n    var i;\n    for (i = 0; i < manifold1.pointCount; ++i) {\n        var id = manifold1.points[i].id;\n        var key = id.key;\n        state1[i] = b2PointState.b2_removeState;\n        for (var j = 0, jct = manifold2.pointCount; j < jct; ++j) {\n            if (manifold2.points[j].id.key === key) {\n                state1[i] = b2PointState.b2_persistState;\n                break;\n            }\n        }\n    }\n    for (; i < b2_settings_1.b2_maxManifoldPoints; ++i) {\n        state1[i] = b2PointState.b2_nullState;\n    }\n    for (i = 0; i < manifold2.pointCount; ++i) {\n        var id = manifold2.points[i].id;\n        var key = id.key;\n        state2[i] = b2PointState.b2_addState;\n        for (var j = 0, jct = manifold1.pointCount; j < jct; ++j) {\n            if (manifold1.points[j].id.key === key) {\n                state2[i] = b2PointState.b2_persistState;\n                break;\n            }\n        }\n    }\n    for (; i < b2_settings_1.b2_maxManifoldPoints; ++i) {\n        state2[i] = b2PointState.b2_nullState;\n    }\n}\nexports.b2GetPointStates = b2GetPointStates;\nvar b2ClipVertex = (function () {\n    function b2ClipVertex() {\n        this.v = new b2_math_1.b2Vec2();\n        this.id = new b2ContactID();\n    }\n    b2ClipVertex.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2ClipVertex(); });\n    };\n    b2ClipVertex.prototype.Copy = function (other) {\n        this.v.Copy(other.v);\n        this.id.Copy(other.id);\n        return this;\n    };\n    return b2ClipVertex;\n}());\nexports.b2ClipVertex = b2ClipVertex;\nvar b2RayCastInput = (function () {\n    function b2RayCastInput() {\n        this.p1 = new b2_math_1.b2Vec2();\n        this.p2 = new b2_math_1.b2Vec2();\n        this.maxFraction = 1;\n    }\n    b2RayCastInput.prototype.Copy = function (o) {\n        this.p1.Copy(o.p1);\n        this.p2.Copy(o.p2);\n        this.maxFraction = o.maxFraction;\n        return this;\n    };\n    return b2RayCastInput;\n}());\nexports.b2RayCastInput = b2RayCastInput;\nvar b2RayCastOutput = (function () {\n    function b2RayCastOutput() {\n        this.normal = new b2_math_1.b2Vec2();\n        this.fraction = 0;\n    }\n    b2RayCastOutput.prototype.Copy = function (o) {\n        this.normal.Copy(o.normal);\n        this.fraction = o.fraction;\n        return this;\n    };\n    return b2RayCastOutput;\n}());\nexports.b2RayCastOutput = b2RayCastOutput;\nvar b2AABB = (function () {\n    function b2AABB() {\n        this.lowerBound = new b2_math_1.b2Vec2();\n        this.upperBound = new b2_math_1.b2Vec2();\n        this.m_cache_center = new b2_math_1.b2Vec2();\n        this.m_cache_extent = new b2_math_1.b2Vec2();\n    }\n    b2AABB.prototype.Copy = function (o) {\n        this.lowerBound.Copy(o.lowerBound);\n        this.upperBound.Copy(o.upperBound);\n        return this;\n    };\n    b2AABB.prototype.IsValid = function () {\n        if (!this.lowerBound.IsValid()) {\n            return false;\n        }\n        if (!this.upperBound.IsValid()) {\n            return false;\n        }\n        if (this.upperBound.x < this.lowerBound.x) {\n            return false;\n        }\n        if (this.upperBound.y < this.lowerBound.y) {\n            return false;\n        }\n        return true;\n    };\n    b2AABB.prototype.GetCenter = function () {\n        return b2_math_1.b2Vec2.MidVV(this.lowerBound, this.upperBound, this.m_cache_center);\n    };\n    b2AABB.prototype.GetExtents = function () {\n        return b2_math_1.b2Vec2.ExtVV(this.lowerBound, this.upperBound, this.m_cache_extent);\n    };\n    b2AABB.prototype.GetPerimeter = function () {\n        var wx = this.upperBound.x - this.lowerBound.x;\n        var wy = this.upperBound.y - this.lowerBound.y;\n        return 2 * (wx + wy);\n    };\n    b2AABB.prototype.Combine1 = function (aabb) {\n        this.lowerBound.x = b2_math_1.b2Min(this.lowerBound.x, aabb.lowerBound.x);\n        this.lowerBound.y = b2_math_1.b2Min(this.lowerBound.y, aabb.lowerBound.y);\n        this.upperBound.x = b2_math_1.b2Max(this.upperBound.x, aabb.upperBound.x);\n        this.upperBound.y = b2_math_1.b2Max(this.upperBound.y, aabb.upperBound.y);\n        return this;\n    };\n    b2AABB.prototype.Combine2 = function (aabb1, aabb2) {\n        this.lowerBound.x = b2_math_1.b2Min(aabb1.lowerBound.x, aabb2.lowerBound.x);\n        this.lowerBound.y = b2_math_1.b2Min(aabb1.lowerBound.y, aabb2.lowerBound.y);\n        this.upperBound.x = b2_math_1.b2Max(aabb1.upperBound.x, aabb2.upperBound.x);\n        this.upperBound.y = b2_math_1.b2Max(aabb1.upperBound.y, aabb2.upperBound.y);\n        return this;\n    };\n    b2AABB.Combine = function (aabb1, aabb2, out) {\n        out.Combine2(aabb1, aabb2);\n        return out;\n    };\n    b2AABB.prototype.Contains = function (aabb) {\n        var result = true;\n        result = result && this.lowerBound.x <= aabb.lowerBound.x;\n        result = result && this.lowerBound.y <= aabb.lowerBound.y;\n        result = result && aabb.upperBound.x <= this.upperBound.x;\n        result = result && aabb.upperBound.y <= this.upperBound.y;\n        return result;\n    };\n    b2AABB.prototype.RayCast = function (output, input) {\n        var tmin = (-b2_settings_1.b2_maxFloat);\n        var tmax = b2_settings_1.b2_maxFloat;\n        var p_x = input.p1.x;\n        var p_y = input.p1.y;\n        var d_x = input.p2.x - input.p1.x;\n        var d_y = input.p2.y - input.p1.y;\n        var absD_x = b2_math_1.b2Abs(d_x);\n        var absD_y = b2_math_1.b2Abs(d_y);\n        var normal = output.normal;\n        if (absD_x < b2_settings_1.b2_epsilon) {\n            if (p_x < this.lowerBound.x || this.upperBound.x < p_x) {\n                return false;\n            }\n        }\n        else {\n            var inv_d = 1 / d_x;\n            var t1 = (this.lowerBound.x - p_x) * inv_d;\n            var t2 = (this.upperBound.x - p_x) * inv_d;\n            var s = (-1);\n            if (t1 > t2) {\n                var t3 = t1;\n                t1 = t2;\n                t2 = t3;\n                s = 1;\n            }\n            if (t1 > tmin) {\n                normal.x = s;\n                normal.y = 0;\n                tmin = t1;\n            }\n            tmax = b2_math_1.b2Min(tmax, t2);\n            if (tmin > tmax) {\n                return false;\n            }\n        }\n        if (absD_y < b2_settings_1.b2_epsilon) {\n            if (p_y < this.lowerBound.y || this.upperBound.y < p_y) {\n                return false;\n            }\n        }\n        else {\n            var inv_d = 1 / d_y;\n            var t1 = (this.lowerBound.y - p_y) * inv_d;\n            var t2 = (this.upperBound.y - p_y) * inv_d;\n            var s = (-1);\n            if (t1 > t2) {\n                var t3 = t1;\n                t1 = t2;\n                t2 = t3;\n                s = 1;\n            }\n            if (t1 > tmin) {\n                normal.x = 0;\n                normal.y = s;\n                tmin = t1;\n            }\n            tmax = b2_math_1.b2Min(tmax, t2);\n            if (tmin > tmax) {\n                return false;\n            }\n        }\n        if (tmin < 0 || input.maxFraction < tmin) {\n            return false;\n        }\n        output.fraction = tmin;\n        return true;\n    };\n    b2AABB.prototype.TestContain = function (point) {\n        if (point.x < this.lowerBound.x || this.upperBound.x < point.x) {\n            return false;\n        }\n        if (point.y < this.lowerBound.y || this.upperBound.y < point.y) {\n            return false;\n        }\n        return true;\n    };\n    b2AABB.prototype.TestOverlap = function (other) {\n        if (this.upperBound.x < other.lowerBound.x) {\n            return false;\n        }\n        if (this.upperBound.y < other.lowerBound.y) {\n            return false;\n        }\n        if (other.upperBound.x < this.lowerBound.x) {\n            return false;\n        }\n        if (other.upperBound.y < this.lowerBound.y) {\n            return false;\n        }\n        return true;\n    };\n    return b2AABB;\n}());\nexports.b2AABB = b2AABB;\nfunction b2TestOverlapAABB(a, b) {\n    if (a.upperBound.x < b.lowerBound.x) {\n        return false;\n    }\n    if (a.upperBound.y < b.lowerBound.y) {\n        return false;\n    }\n    if (b.upperBound.x < a.lowerBound.x) {\n        return false;\n    }\n    if (b.upperBound.y < a.lowerBound.y) {\n        return false;\n    }\n    return true;\n}\nexports.b2TestOverlapAABB = b2TestOverlapAABB;\nfunction b2ClipSegmentToLine(vOut, vIn, normal, offset, vertexIndexA) {\n    var count = 0;\n    var vIn0 = vIn[0];\n    var vIn1 = vIn[1];\n    var distance0 = b2_math_1.b2Vec2.DotVV(normal, vIn0.v) - offset;\n    var distance1 = b2_math_1.b2Vec2.DotVV(normal, vIn1.v) - offset;\n    if (distance0 <= 0) {\n        vOut[count++].Copy(vIn0);\n    }\n    if (distance1 <= 0) {\n        vOut[count++].Copy(vIn1);\n    }\n    if (distance0 * distance1 < 0) {\n        var interp = distance0 / (distance0 - distance1);\n        var v = vOut[count].v;\n        v.x = vIn0.v.x + interp * (vIn1.v.x - vIn0.v.x);\n        v.y = vIn0.v.y + interp * (vIn1.v.y - vIn0.v.y);\n        var id = vOut[count].id;\n        id.cf.indexA = vertexIndexA;\n        id.cf.indexB = vIn0.id.cf.indexB;\n        id.cf.typeA = b2ContactFeatureType.e_vertex;\n        id.cf.typeB = b2ContactFeatureType.e_face;\n        ++count;\n    }\n    return count;\n}\nexports.b2ClipSegmentToLine = b2ClipSegmentToLine;\nvar b2TestOverlapShape_s_input = new b2_distance_1.b2DistanceInput();\nvar b2TestOverlapShape_s_simplexCache = new b2_distance_1.b2SimplexCache();\nvar b2TestOverlapShape_s_output = new b2_distance_1.b2DistanceOutput();\nfunction b2TestOverlapShape(shapeA, indexA, shapeB, indexB, xfA, xfB) {\n    var input = b2TestOverlapShape_s_input.Reset();\n    input.proxyA.SetShape(shapeA, indexA);\n    input.proxyB.SetShape(shapeB, indexB);\n    input.transformA.Copy(xfA);\n    input.transformB.Copy(xfB);\n    input.useRadii = true;\n    var simplexCache = b2TestOverlapShape_s_simplexCache.Reset();\n    simplexCache.count = 0;\n    var output = b2TestOverlapShape_s_output.Reset();\n    b2_distance_1.b2Distance(output, simplexCache, input);\n    return output.distance < 10 * b2_settings_1.b2_epsilon;\n}\nexports.b2TestOverlapShape = b2TestOverlapShape;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2NvbGxpc2lvbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9jb2xsaXNpb24vYjJfY29sbGlzaW9uLnRzP2YwMmIiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMDkgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbi8vIERFQlVHOiBpbXBvcnQgeyBiMkFzc2VydCB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyX21heEZsb2F0LCBiMl9lcHNpbG9uLCBiMl9lcHNpbG9uX3NxLCBiMl9tYXhNYW5pZm9sZFBvaW50cywgYjJNYWtlQXJyYXksIGIyTWFrZU51bWJlckFycmF5IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJBYnMsIGIyTWluLCBiMk1heCwgYjJWZWMyLCBiMlJvdCwgYjJUcmFuc2Zvcm0sIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMlNoYXBlIH0gZnJvbSBcIi4vYjJfc2hhcGVcIjtcbmltcG9ydCB7IGIyRGlzdGFuY2UsIGIyRGlzdGFuY2VJbnB1dCwgYjJEaXN0YW5jZU91dHB1dCwgYjJTaW1wbGV4Q2FjaGUgfSBmcm9tIFwiLi9iMl9kaXN0YW5jZVwiO1xuXG4vLy8gQGZpbGVcbi8vLyBTdHJ1Y3R1cmVzIGFuZCBmdW5jdGlvbnMgdXNlZCBmb3IgY29tcHV0aW5nIGNvbnRhY3QgcG9pbnRzLCBkaXN0YW5jZVxuLy8vIHF1ZXJpZXMsIGFuZCBUT0kgcXVlcmllcy5cblxuZXhwb3J0IGVudW0gYjJDb250YWN0RmVhdHVyZVR5cGUge1xuICBlX3ZlcnRleCA9IDAsXG4gIGVfZmFjZSA9IDEsXG59XG5cbi8vLyBUaGUgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgdG8gZm9ybSB0aGUgY29udGFjdCBwb2ludFxuLy8vIFRoaXMgbXVzdCBiZSA0IGJ5dGVzIG9yIGxlc3MuXG5leHBvcnQgY2xhc3MgYjJDb250YWN0RmVhdHVyZSB7XG4gIHByaXZhdGUgX2tleTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfa2V5X2ludmFsaWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaW5kZXhBOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9pbmRleEI6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3R5cGVBOiBiMkNvbnRhY3RGZWF0dXJlVHlwZSA9IDA7XG4gIHByaXZhdGUgX3R5cGVCOiBiMkNvbnRhY3RGZWF0dXJlVHlwZSA9IDA7XG5cbiAgcHVibGljIGdldCBrZXkoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5fa2V5X2ludmFsaWQpIHtcbiAgICAgIHRoaXMuX2tleV9pbnZhbGlkID0gZmFsc2U7XG4gICAgICB0aGlzLl9rZXkgPSB0aGlzLl9pbmRleEEgfCAodGhpcy5faW5kZXhCIDw8IDgpIHwgKHRoaXMuX3R5cGVBIDw8IDE2KSB8ICh0aGlzLl90eXBlQiA8PCAyNCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9rZXk7XG4gIH1cblxuICBwdWJsaWMgc2V0IGtleSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fa2V5ID0gdmFsdWU7XG4gICAgdGhpcy5fa2V5X2ludmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLl9pbmRleEEgPSB0aGlzLl9rZXkgJiAweGZmO1xuICAgIHRoaXMuX2luZGV4QiA9ICh0aGlzLl9rZXkgPj4gOCkgJiAweGZmO1xuICAgIHRoaXMuX3R5cGVBID0gKHRoaXMuX2tleSA+PiAxNikgJiAweGZmO1xuICAgIHRoaXMuX3R5cGVCID0gKHRoaXMuX2tleSA+PiAyNCkgJiAweGZmO1xuICB9XG5cbiAgcHVibGljIGdldCBpbmRleEEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faW5kZXhBO1xuICB9XG5cbiAgcHVibGljIHNldCBpbmRleEEodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX2luZGV4QSA9IHZhbHVlO1xuICAgIHRoaXMuX2tleV9pbnZhbGlkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaW5kZXhCKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2luZGV4QjtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgaW5kZXhCKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9pbmRleEIgPSB2YWx1ZTtcbiAgICB0aGlzLl9rZXlfaW52YWxpZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHR5cGVBKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVBO1xuICB9XG5cbiAgcHVibGljIHNldCB0eXBlQSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fdHlwZUEgPSB2YWx1ZTtcbiAgICB0aGlzLl9rZXlfaW52YWxpZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHR5cGVCKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVCO1xuICB9XG5cbiAgcHVibGljIHNldCB0eXBlQih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fdHlwZUIgPSB2YWx1ZTtcbiAgICB0aGlzLl9rZXlfaW52YWxpZCA9IHRydWU7XG4gIH1cbn1cblxuLy8vIENvbnRhY3QgaWRzIHRvIGZhY2lsaXRhdGUgd2FybSBzdGFydGluZy5cbmV4cG9ydCBjbGFzcyBiMkNvbnRhY3RJRCB7XG4gIHB1YmxpYyByZWFkb25seSBjZjogYjJDb250YWN0RmVhdHVyZSA9IG5ldyBiMkNvbnRhY3RGZWF0dXJlKCk7XG5cbiAgcHVibGljIENvcHkobzogYjJDb250YWN0SUQpOiBiMkNvbnRhY3RJRCB7XG4gICAgdGhpcy5rZXkgPSBvLmtleTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBDbG9uZSgpOiBiMkNvbnRhY3RJRCB7XG4gICAgcmV0dXJuIG5ldyBiMkNvbnRhY3RJRCgpLkNvcHkodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGtleSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNmLmtleTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQga2V5KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmNmLmtleSA9IHZhbHVlO1xuICB9XG59XG5cbi8vLyBBIG1hbmlmb2xkIHBvaW50IGlzIGEgY29udGFjdCBwb2ludCBiZWxvbmdpbmcgdG8gYSBjb250YWN0XG4vLy8gbWFuaWZvbGQuIEl0IGhvbGRzIGRldGFpbHMgcmVsYXRlZCB0byB0aGUgZ2VvbWV0cnkgYW5kIGR5bmFtaWNzXG4vLy8gb2YgdGhlIGNvbnRhY3QgcG9pbnRzLlxuLy8vIFRoZSBsb2NhbCBwb2ludCB1c2FnZSBkZXBlbmRzIG9uIHRoZSBtYW5pZm9sZCB0eXBlOlxuLy8vIC1lX2NpcmNsZXM6IHRoZSBsb2NhbCBjZW50ZXIgb2YgY2lyY2xlQlxuLy8vIC1lX2ZhY2VBOiB0aGUgbG9jYWwgY2VudGVyIG9mIGNpcmxjZUIgb3IgdGhlIGNsaXAgcG9pbnQgb2YgcG9seWdvbkJcbi8vLyAtZV9mYWNlQjogdGhlIGNsaXAgcG9pbnQgb2YgcG9seWdvbkFcbi8vLyBUaGlzIHN0cnVjdHVyZSBpcyBzdG9yZWQgYWNyb3NzIHRpbWUgc3RlcHMsIHNvIHdlIGtlZXAgaXQgc21hbGwuXG4vLy8gTm90ZTogdGhlIGltcHVsc2VzIGFyZSB1c2VkIGZvciBpbnRlcm5hbCBjYWNoaW5nIGFuZCBtYXkgbm90XG4vLy8gcHJvdmlkZSByZWxpYWJsZSBjb250YWN0IGZvcmNlcywgZXNwZWNpYWxseSBmb3IgaGlnaCBzcGVlZCBjb2xsaXNpb25zLlxuZXhwb3J0IGNsYXNzIGIyTWFuaWZvbGRQb2ludCB7XG4gIHB1YmxpYyByZWFkb25seSBsb2NhbFBvaW50OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7ICAvLy88IHVzYWdlIGRlcGVuZHMgb24gbWFuaWZvbGQgdHlwZVxuICBwdWJsaWMgbm9ybWFsSW1wdWxzZTogbnVtYmVyID0gMDsgICAgICAvLy88IHRoZSBub24tcGVuZXRyYXRpb24gaW1wdWxzZVxuICBwdWJsaWMgdGFuZ2VudEltcHVsc2U6IG51bWJlciA9IDA7ICAgICAgLy8vPCB0aGUgZnJpY3Rpb24gaW1wdWxzZVxuICBwdWJsaWMgcmVhZG9ubHkgaWQ6IGIyQ29udGFjdElEID0gbmV3IGIyQ29udGFjdElEKCk7IC8vLzwgdW5pcXVlbHkgaWRlbnRpZmllcyBhIGNvbnRhY3QgcG9pbnQgYmV0d2VlbiB0d28gc2hhcGVzXG5cbiAgcHVibGljIHN0YXRpYyBNYWtlQXJyYXkobGVuZ3RoOiBudW1iZXIpOiBiMk1hbmlmb2xkUG9pbnRbXSB7XG4gICAgcmV0dXJuIGIyTWFrZUFycmF5KGxlbmd0aCwgKGk6IG51bWJlcik6IGIyTWFuaWZvbGRQb2ludCA9PiBuZXcgYjJNYW5pZm9sZFBvaW50KCkpO1xuICB9XG5cbiAgcHVibGljIFJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubG9jYWxQb2ludC5TZXRaZXJvKCk7XG4gICAgdGhpcy5ub3JtYWxJbXB1bHNlID0gMDtcbiAgICB0aGlzLnRhbmdlbnRJbXB1bHNlID0gMDtcbiAgICB0aGlzLmlkLmtleSA9IDA7XG4gIH1cblxuICBwdWJsaWMgQ29weShvOiBiMk1hbmlmb2xkUG9pbnQpOiBiMk1hbmlmb2xkUG9pbnQge1xuICAgIHRoaXMubG9jYWxQb2ludC5Db3B5KG8ubG9jYWxQb2ludCk7XG4gICAgdGhpcy5ub3JtYWxJbXB1bHNlID0gby5ub3JtYWxJbXB1bHNlO1xuICAgIHRoaXMudGFuZ2VudEltcHVsc2UgPSBvLnRhbmdlbnRJbXB1bHNlO1xuICAgIHRoaXMuaWQuQ29weShvLmlkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgZW51bSBiMk1hbmlmb2xkVHlwZSB7XG4gIGVfdW5rbm93biA9IC0xLFxuICBlX2NpcmNsZXMgPSAwLFxuICBlX2ZhY2VBID0gMSxcbiAgZV9mYWNlQiA9IDIsXG59XG5cbi8vLyBBIG1hbmlmb2xkIGZvciB0d28gdG91Y2hpbmcgY29udmV4IHNoYXBlcy5cbi8vLyBCb3gyRCBzdXBwb3J0cyBtdWx0aXBsZSB0eXBlcyBvZiBjb250YWN0OlxuLy8vIC0gY2xpcCBwb2ludCB2ZXJzdXMgcGxhbmUgd2l0aCByYWRpdXNcbi8vLyAtIHBvaW50IHZlcnN1cyBwb2ludCB3aXRoIHJhZGl1cyAoY2lyY2xlcylcbi8vLyBUaGUgbG9jYWwgcG9pbnQgdXNhZ2UgZGVwZW5kcyBvbiB0aGUgbWFuaWZvbGQgdHlwZTpcbi8vLyAtZV9jaXJjbGVzOiB0aGUgbG9jYWwgY2VudGVyIG9mIGNpcmNsZUFcbi8vLyAtZV9mYWNlQTogdGhlIGNlbnRlciBvZiBmYWNlQVxuLy8vIC1lX2ZhY2VCOiB0aGUgY2VudGVyIG9mIGZhY2VCXG4vLy8gU2ltaWxhcmx5IHRoZSBsb2NhbCBub3JtYWwgdXNhZ2U6XG4vLy8gLWVfY2lyY2xlczogbm90IHVzZWRcbi8vLyAtZV9mYWNlQTogdGhlIG5vcm1hbCBvbiBwb2x5Z29uQVxuLy8vIC1lX2ZhY2VCOiB0aGUgbm9ybWFsIG9uIHBvbHlnb25CXG4vLy8gV2Ugc3RvcmUgY29udGFjdHMgaW4gdGhpcyB3YXkgc28gdGhhdCBwb3NpdGlvbiBjb3JyZWN0aW9uIGNhblxuLy8vIGFjY291bnQgZm9yIG1vdmVtZW50LCB3aGljaCBpcyBjcml0aWNhbCBmb3IgY29udGludW91cyBwaHlzaWNzLlxuLy8vIEFsbCBjb250YWN0IHNjZW5hcmlvcyBtdXN0IGJlIGV4cHJlc3NlZCBpbiBvbmUgb2YgdGhlc2UgdHlwZXMuXG4vLy8gVGhpcyBzdHJ1Y3R1cmUgaXMgc3RvcmVkIGFjcm9zcyB0aW1lIHN0ZXBzLCBzbyB3ZSBrZWVwIGl0IHNtYWxsLlxuZXhwb3J0IGNsYXNzIGIyTWFuaWZvbGQge1xuICBwdWJsaWMgcmVhZG9ubHkgcG9pbnRzOiBiMk1hbmlmb2xkUG9pbnRbXSA9IGIyTWFuaWZvbGRQb2ludC5NYWtlQXJyYXkoYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxOb3JtYWw6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsUG9pbnQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHR5cGU6IGIyTWFuaWZvbGRUeXBlID0gYjJNYW5pZm9sZFR5cGUuZV91bmtub3duO1xuICBwdWJsaWMgcG9pbnRDb3VudDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgUmVzZXQoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGIyX21heE1hbmlmb2xkUG9pbnRzOyArK2kpIHtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLnBvaW50c1tpXSBpbnN0YW5jZW9mIGIyTWFuaWZvbGRQb2ludCk7XG4gICAgICB0aGlzLnBvaW50c1tpXS5SZXNldCgpO1xuICAgIH1cbiAgICB0aGlzLmxvY2FsTm9ybWFsLlNldFplcm8oKTtcbiAgICB0aGlzLmxvY2FsUG9pbnQuU2V0WmVybygpO1xuICAgIHRoaXMudHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfdW5rbm93bjtcbiAgICB0aGlzLnBvaW50Q291bnQgPSAwO1xuICB9XG5cbiAgcHVibGljIENvcHkobzogYjJNYW5pZm9sZCk6IGIyTWFuaWZvbGQge1xuICAgIHRoaXMucG9pbnRDb3VudCA9IG8ucG9pbnRDb3VudDtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgYjJfbWF4TWFuaWZvbGRQb2ludHM7ICsraSkge1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMucG9pbnRzW2ldIGluc3RhbmNlb2YgYjJNYW5pZm9sZFBvaW50KTtcbiAgICAgIHRoaXMucG9pbnRzW2ldLkNvcHkoby5wb2ludHNbaV0pO1xuICAgIH1cbiAgICB0aGlzLmxvY2FsTm9ybWFsLkNvcHkoby5sb2NhbE5vcm1hbCk7XG4gICAgdGhpcy5sb2NhbFBvaW50LkNvcHkoby5sb2NhbFBvaW50KTtcbiAgICB0aGlzLnR5cGUgPSBvLnR5cGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgQ2xvbmUoKTogYjJNYW5pZm9sZCB7XG4gICAgcmV0dXJuIG5ldyBiMk1hbmlmb2xkKCkuQ29weSh0aGlzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJXb3JsZE1hbmlmb2xkIHtcbiAgcHVibGljIHJlYWRvbmx5IG5vcm1hbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgcG9pbnRzOiBiMlZlYzJbXSA9IGIyVmVjMi5NYWtlQXJyYXkoYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICBwdWJsaWMgcmVhZG9ubHkgc2VwYXJhdGlvbnM6IG51bWJlcltdID0gYjJNYWtlTnVtYmVyQXJyYXkoYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuXG4gIHByaXZhdGUgc3RhdGljIEluaXRpYWxpemVfc19wb2ludEEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIEluaXRpYWxpemVfc19wb2ludEIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIEluaXRpYWxpemVfc19jQSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZV9zX2NCID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBJbml0aWFsaXplX3NfcGxhbmVQb2ludCA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZV9zX2NsaXBQb2ludCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIEluaXRpYWxpemUobWFuaWZvbGQ6IGIyTWFuaWZvbGQsIHhmQTogYjJUcmFuc2Zvcm0sIHJhZGl1c0E6IG51bWJlciwgeGZCOiBiMlRyYW5zZm9ybSwgcmFkaXVzQjogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKG1hbmlmb2xkLnBvaW50Q291bnQgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG1hbmlmb2xkLnR5cGUpIHtcbiAgICBjYXNlIGIyTWFuaWZvbGRUeXBlLmVfY2lyY2xlczoge1xuICAgICAgICB0aGlzLm5vcm1hbC5TZXQoMSwgMCk7XG4gICAgICAgIGNvbnN0IHBvaW50QTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCBtYW5pZm9sZC5sb2NhbFBvaW50LCBiMldvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZV9zX3BvaW50QSk7XG4gICAgICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCBtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludCwgYjJXb3JsZE1hbmlmb2xkLkluaXRpYWxpemVfc19wb2ludEIpO1xuICAgICAgICBpZiAoYjJWZWMyLkRpc3RhbmNlU3F1YXJlZFZWKHBvaW50QSwgcG9pbnRCKSA+IGIyX2Vwc2lsb25fc3EpIHtcbiAgICAgICAgICBiMlZlYzIuU3ViVlYocG9pbnRCLCBwb2ludEEsIHRoaXMubm9ybWFsKS5TZWxmTm9ybWFsaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjQTogYjJWZWMyID0gYjJWZWMyLkFkZFZNdWxTVihwb2ludEEsIHJhZGl1c0EsIHRoaXMubm9ybWFsLCBiMldvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZV9zX2NBKTtcbiAgICAgICAgY29uc3QgY0I6IGIyVmVjMiA9IGIyVmVjMi5TdWJWTXVsU1YocG9pbnRCLCByYWRpdXNCLCB0aGlzLm5vcm1hbCwgYjJXb3JsZE1hbmlmb2xkLkluaXRpYWxpemVfc19jQik7XG4gICAgICAgIGIyVmVjMi5NaWRWVihjQSwgY0IsIHRoaXMucG9pbnRzWzBdKTtcbiAgICAgICAgdGhpcy5zZXBhcmF0aW9uc1swXSA9IGIyVmVjMi5Eb3RWVihiMlZlYzIuU3ViVlYoY0IsIGNBLCBiMlZlYzIuc190MCksIHRoaXMubm9ybWFsKTsgLy8gYjJEb3QoY0IgLSBjQSwgbm9ybWFsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICBjYXNlIGIyTWFuaWZvbGRUeXBlLmVfZmFjZUE6IHtcbiAgICAgICAgYjJSb3QuTXVsUlYoeGZBLnEsIG1hbmlmb2xkLmxvY2FsTm9ybWFsLCB0aGlzLm5vcm1hbCk7XG4gICAgICAgIGNvbnN0IHBsYW5lUG9pbnQ6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgbWFuaWZvbGQubG9jYWxQb2ludCwgYjJXb3JsZE1hbmlmb2xkLkluaXRpYWxpemVfc19wbGFuZVBvaW50KTtcblxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbWFuaWZvbGQucG9pbnRDb3VudDsgKytpKSB7XG4gICAgICAgICAgY29uc3QgY2xpcFBvaW50OiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIG1hbmlmb2xkLnBvaW50c1tpXS5sb2NhbFBvaW50LCBiMldvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZV9zX2NsaXBQb2ludCk7XG4gICAgICAgICAgY29uc3QgczogbnVtYmVyID0gcmFkaXVzQSAtIGIyVmVjMi5Eb3RWVihiMlZlYzIuU3ViVlYoY2xpcFBvaW50LCBwbGFuZVBvaW50LCBiMlZlYzIuc190MCksIHRoaXMubm9ybWFsKTtcbiAgICAgICAgICBjb25zdCBjQTogYjJWZWMyID0gYjJWZWMyLkFkZFZNdWxTVihjbGlwUG9pbnQsIHMsIHRoaXMubm9ybWFsLCBiMldvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZV9zX2NBKTtcbiAgICAgICAgICBjb25zdCBjQjogYjJWZWMyID0gYjJWZWMyLlN1YlZNdWxTVihjbGlwUG9pbnQsIHJhZGl1c0IsIHRoaXMubm9ybWFsLCBiMldvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZV9zX2NCKTtcbiAgICAgICAgICBiMlZlYzIuTWlkVlYoY0EsIGNCLCB0aGlzLnBvaW50c1tpXSk7XG4gICAgICAgICAgdGhpcy5zZXBhcmF0aW9uc1tpXSA9IGIyVmVjMi5Eb3RWVihiMlZlYzIuU3ViVlYoY0IsIGNBLCBiMlZlYzIuc190MCksIHRoaXMubm9ybWFsKTsgLy8gYjJEb3QoY0IgLSBjQSwgbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIGNhc2UgYjJNYW5pZm9sZFR5cGUuZV9mYWNlQjoge1xuICAgICAgICBiMlJvdC5NdWxSVih4ZkIucSwgbWFuaWZvbGQubG9jYWxOb3JtYWwsIHRoaXMubm9ybWFsKTtcbiAgICAgICAgY29uc3QgcGxhbmVQb2ludDogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCBtYW5pZm9sZC5sb2NhbFBvaW50LCBiMldvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZV9zX3BsYW5lUG9pbnQpO1xuXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBtYW5pZm9sZC5wb2ludENvdW50OyArK2kpIHtcbiAgICAgICAgICBjb25zdCBjbGlwUG9pbnQ6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgbWFuaWZvbGQucG9pbnRzW2ldLmxvY2FsUG9pbnQsIGIyV29ybGRNYW5pZm9sZC5Jbml0aWFsaXplX3NfY2xpcFBvaW50KTtcbiAgICAgICAgICBjb25zdCBzOiBudW1iZXIgPSByYWRpdXNCIC0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihjbGlwUG9pbnQsIHBsYW5lUG9pbnQsIGIyVmVjMi5zX3QwKSwgdGhpcy5ub3JtYWwpO1xuICAgICAgICAgIGNvbnN0IGNCOiBiMlZlYzIgPSBiMlZlYzIuQWRkVk11bFNWKGNsaXBQb2ludCwgcywgdGhpcy5ub3JtYWwsIGIyV29ybGRNYW5pZm9sZC5Jbml0aWFsaXplX3NfY0IpO1xuICAgICAgICAgIGNvbnN0IGNBOiBiMlZlYzIgPSBiMlZlYzIuU3ViVk11bFNWKGNsaXBQb2ludCwgcmFkaXVzQSwgdGhpcy5ub3JtYWwsIGIyV29ybGRNYW5pZm9sZC5Jbml0aWFsaXplX3NfY0EpO1xuICAgICAgICAgIGIyVmVjMi5NaWRWVihjQSwgY0IsIHRoaXMucG9pbnRzW2ldKTtcbiAgICAgICAgICB0aGlzLnNlcGFyYXRpb25zW2ldID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihjQSwgY0IsIGIyVmVjMi5zX3QwKSwgdGhpcy5ub3JtYWwpOyAvLyBiMkRvdChjQSAtIGNCLCBub3JtYWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5zdXJlIG5vcm1hbCBwb2ludHMgZnJvbSBBIHRvIEIuXG4gICAgICAgIHRoaXMubm9ybWFsLlNlbGZOZWcoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vLyBUaGlzIGlzIHVzZWQgZm9yIGRldGVybWluaW5nIHRoZSBzdGF0ZSBvZiBjb250YWN0IHBvaW50cy5cbmV4cG9ydCBlbnVtIGIyUG9pbnRTdGF0ZSB7XG4gIGIyX251bGxTdGF0ZSA9IDAsIC8vLzwgcG9pbnQgZG9lcyBub3QgZXhpc3RcbiAgYjJfYWRkU3RhdGUgPSAxLCAvLy88IHBvaW50IHdhcyBhZGRlZCBpbiB0aGUgdXBkYXRlXG4gIGIyX3BlcnNpc3RTdGF0ZSA9IDIsIC8vLzwgcG9pbnQgcGVyc2lzdGVkIGFjcm9zcyB0aGUgdXBkYXRlXG4gIGIyX3JlbW92ZVN0YXRlID0gMywgIC8vLzwgcG9pbnQgd2FzIHJlbW92ZWQgaW4gdGhlIHVwZGF0ZVxufVxuXG4vLy8gQ29tcHV0ZSB0aGUgcG9pbnQgc3RhdGVzIGdpdmVuIHR3byBtYW5pZm9sZHMuIFRoZSBzdGF0ZXMgcGVydGFpbiB0byB0aGUgdHJhbnNpdGlvbiBmcm9tIG1hbmlmb2xkMVxuLy8vIHRvIG1hbmlmb2xkMi4gU28gc3RhdGUxIGlzIGVpdGhlciBwZXJzaXN0IG9yIHJlbW92ZSB3aGlsZSBzdGF0ZTIgaXMgZWl0aGVyIGFkZCBvciBwZXJzaXN0LlxuZXhwb3J0IGZ1bmN0aW9uIGIyR2V0UG9pbnRTdGF0ZXMoc3RhdGUxOiBiMlBvaW50U3RhdGVbXSwgc3RhdGUyOiBiMlBvaW50U3RhdGVbXSwgbWFuaWZvbGQxOiBiMk1hbmlmb2xkLCBtYW5pZm9sZDI6IGIyTWFuaWZvbGQpOiB2b2lkIHtcbiAgLy8gRGV0ZWN0IHBlcnNpc3RzIGFuZCByZW1vdmVzLlxuICBsZXQgaTogbnVtYmVyO1xuICBmb3IgKGkgPSAwOyBpIDwgbWFuaWZvbGQxLnBvaW50Q291bnQ7ICsraSkge1xuICAgIGNvbnN0IGlkOiBiMkNvbnRhY3RJRCA9IG1hbmlmb2xkMS5wb2ludHNbaV0uaWQ7XG4gICAgY29uc3Qga2V5OiBudW1iZXIgPSBpZC5rZXk7XG5cbiAgICBzdGF0ZTFbaV0gPSBiMlBvaW50U3RhdGUuYjJfcmVtb3ZlU3RhdGU7XG5cbiAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwLCBqY3QgPSBtYW5pZm9sZDIucG9pbnRDb3VudDsgaiA8IGpjdDsgKytqKSB7XG4gICAgICBpZiAobWFuaWZvbGQyLnBvaW50c1tqXS5pZC5rZXkgPT09IGtleSkge1xuICAgICAgICBzdGF0ZTFbaV0gPSBiMlBvaW50U3RhdGUuYjJfcGVyc2lzdFN0YXRlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yICg7IGkgPCBiMl9tYXhNYW5pZm9sZFBvaW50czsgKytpKSB7XG4gICAgc3RhdGUxW2ldID0gYjJQb2ludFN0YXRlLmIyX251bGxTdGF0ZTtcbiAgfVxuXG4gIC8vIERldGVjdCBwZXJzaXN0cyBhbmQgYWRkcy5cbiAgZm9yIChpID0gMDsgaSA8IG1hbmlmb2xkMi5wb2ludENvdW50OyArK2kpIHtcbiAgICBjb25zdCBpZDogYjJDb250YWN0SUQgPSBtYW5pZm9sZDIucG9pbnRzW2ldLmlkO1xuICAgIGNvbnN0IGtleTogbnVtYmVyID0gaWQua2V5O1xuXG4gICAgc3RhdGUyW2ldID0gYjJQb2ludFN0YXRlLmIyX2FkZFN0YXRlO1xuXG4gICAgZm9yIChsZXQgajogbnVtYmVyID0gMCwgamN0ID0gbWFuaWZvbGQxLnBvaW50Q291bnQ7IGogPCBqY3Q7ICsraikge1xuICAgICAgaWYgKG1hbmlmb2xkMS5wb2ludHNbal0uaWQua2V5ID09PSBrZXkpIHtcbiAgICAgICAgc3RhdGUyW2ldID0gYjJQb2ludFN0YXRlLmIyX3BlcnNpc3RTdGF0ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAoOyBpIDwgYjJfbWF4TWFuaWZvbGRQb2ludHM7ICsraSkge1xuICAgIHN0YXRlMltpXSA9IGIyUG9pbnRTdGF0ZS5iMl9udWxsU3RhdGU7XG4gIH1cbn1cblxuLy8vIFVzZWQgZm9yIGNvbXB1dGluZyBjb250YWN0IG1hbmlmb2xkcy5cbmV4cG9ydCBjbGFzcyBiMkNsaXBWZXJ0ZXgge1xuICBwdWJsaWMgcmVhZG9ubHkgdjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgaWQ6IGIyQ29udGFjdElEID0gbmV3IGIyQ29udGFjdElEKCk7XG5cbiAgcHVibGljIHN0YXRpYyBNYWtlQXJyYXkobGVuZ3RoOiBudW1iZXIpOiBiMkNsaXBWZXJ0ZXhbXSB7XG4gICAgcmV0dXJuIGIyTWFrZUFycmF5KGxlbmd0aCwgKGk6IG51bWJlcik6IGIyQ2xpcFZlcnRleCA9PiBuZXcgYjJDbGlwVmVydGV4KCkpO1xuICB9XG5cbiAgcHVibGljIENvcHkob3RoZXI6IGIyQ2xpcFZlcnRleCk6IGIyQ2xpcFZlcnRleCB7XG4gICAgdGhpcy52LkNvcHkob3RoZXIudik7XG4gICAgdGhpcy5pZC5Db3B5KG90aGVyLmlkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG4vLy8gUmF5LWNhc3QgaW5wdXQgZGF0YS4gVGhlIHJheSBleHRlbmRzIGZyb20gcDEgdG8gcDEgKyBtYXhGcmFjdGlvbiAqIChwMiAtIHAxKS5cbmV4cG9ydCBjbGFzcyBiMlJheUNhc3RJbnB1dCB7XG4gIHB1YmxpYyByZWFkb25seSBwMTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgcDI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1heEZyYWN0aW9uOiBudW1iZXIgPSAxO1xuXG4gIHB1YmxpYyBDb3B5KG86IGIyUmF5Q2FzdElucHV0KTogYjJSYXlDYXN0SW5wdXQge1xuICAgIHRoaXMucDEuQ29weShvLnAxKTtcbiAgICB0aGlzLnAyLkNvcHkoby5wMik7XG4gICAgdGhpcy5tYXhGcmFjdGlvbiA9IG8ubWF4RnJhY3Rpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuLy8vIFJheS1jYXN0IG91dHB1dCBkYXRhLiBUaGUgcmF5IGhpdHMgYXQgcDEgKyBmcmFjdGlvbiAqIChwMiAtIHAxKSwgd2hlcmUgcDEgYW5kIHAyXG4vLy8gY29tZSBmcm9tIGIyUmF5Q2FzdElucHV0LlxuZXhwb3J0IGNsYXNzIGIyUmF5Q2FzdE91dHB1dCB7XG4gIHB1YmxpYyByZWFkb25seSBub3JtYWw6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIGZyYWN0aW9uOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBDb3B5KG86IGIyUmF5Q2FzdE91dHB1dCk6IGIyUmF5Q2FzdE91dHB1dCB7XG4gICAgdGhpcy5ub3JtYWwuQ29weShvLm5vcm1hbCk7XG4gICAgdGhpcy5mcmFjdGlvbiA9IG8uZnJhY3Rpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuLy8vIEFuIGF4aXMgYWxpZ25lZCBib3VuZGluZyBib3guXG5leHBvcnQgY2xhc3MgYjJBQUJCIHtcbiAgcHVibGljIHJlYWRvbmx5IGxvd2VyQm91bmQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTsgLy8vPCB0aGUgbG93ZXIgdmVydGV4XG4gIHB1YmxpYyByZWFkb25seSB1cHBlckJvdW5kOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7IC8vLzwgdGhlIHVwcGVyIHZlcnRleFxuXG4gIHByaXZhdGUgcmVhZG9ubHkgbV9jYWNoZV9jZW50ZXI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTsgLy8gYWNjZXNzIHVzaW5nIEdldENlbnRlcigpXG4gIHByaXZhdGUgcmVhZG9ubHkgbV9jYWNoZV9leHRlbnQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTsgLy8gYWNjZXNzIHVzaW5nIEdldEV4dGVudHMoKVxuXG4gIHB1YmxpYyBDb3B5KG86IGIyQUFCQik6IGIyQUFCQiB7XG4gICAgdGhpcy5sb3dlckJvdW5kLkNvcHkoby5sb3dlckJvdW5kKTtcbiAgICB0aGlzLnVwcGVyQm91bmQuQ29weShvLnVwcGVyQm91bmQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8vIFZlcmlmeSB0aGF0IHRoZSBib3VuZHMgYXJlIHNvcnRlZC5cbiAgcHVibGljIElzVmFsaWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmxvd2VyQm91bmQuSXNWYWxpZCgpKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlmICghdGhpcy51cHBlckJvdW5kLklzVmFsaWQoKSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAodGhpcy51cHBlckJvdW5kLnggPCB0aGlzLmxvd2VyQm91bmQueCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAodGhpcy51cHBlckJvdW5kLnkgPCB0aGlzLmxvd2VyQm91bmQueSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGNlbnRlciBvZiB0aGUgQUFCQi5cbiAgcHVibGljIEdldENlbnRlcigpOiBiMlZlYzIge1xuICAgIHJldHVybiBiMlZlYzIuTWlkVlYodGhpcy5sb3dlckJvdW5kLCB0aGlzLnVwcGVyQm91bmQsIHRoaXMubV9jYWNoZV9jZW50ZXIpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgZXh0ZW50cyBvZiB0aGUgQUFCQiAoaGFsZi13aWR0aHMpLlxuICBwdWJsaWMgR2V0RXh0ZW50cygpOiBiMlZlYzIge1xuICAgIHJldHVybiBiMlZlYzIuRXh0VlYodGhpcy5sb3dlckJvdW5kLCB0aGlzLnVwcGVyQm91bmQsIHRoaXMubV9jYWNoZV9leHRlbnQpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgcGVyaW1ldGVyIGxlbmd0aFxuICBwdWJsaWMgR2V0UGVyaW1ldGVyKCk6IG51bWJlciB7XG4gICAgY29uc3Qgd3g6IG51bWJlciA9IHRoaXMudXBwZXJCb3VuZC54IC0gdGhpcy5sb3dlckJvdW5kLng7XG4gICAgY29uc3Qgd3k6IG51bWJlciA9IHRoaXMudXBwZXJCb3VuZC55IC0gdGhpcy5sb3dlckJvdW5kLnk7XG4gICAgcmV0dXJuIDIgKiAod3ggKyB3eSk7XG4gIH1cblxuICAvLy8gQ29tYmluZSBhbiBBQUJCIGludG8gdGhpcyBvbmUuXG4gIHB1YmxpYyBDb21iaW5lMShhYWJiOiBiMkFBQkIpOiBiMkFBQkIge1xuICAgIHRoaXMubG93ZXJCb3VuZC54ID0gYjJNaW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTtcbiAgICB0aGlzLmxvd2VyQm91bmQueSA9IGIyTWluKHRoaXMubG93ZXJCb3VuZC55LCBhYWJiLmxvd2VyQm91bmQueSk7XG4gICAgdGhpcy51cHBlckJvdW5kLnggPSBiMk1heCh0aGlzLnVwcGVyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLngpO1xuICAgIHRoaXMudXBwZXJCb3VuZC55ID0gYjJNYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vLyBDb21iaW5lIHR3byBBQUJCcyBpbnRvIHRoaXMgb25lLlxuICBwdWJsaWMgQ29tYmluZTIoYWFiYjE6IGIyQUFCQiwgYWFiYjI6IGIyQUFCQik6IGIyQUFCQiB7XG4gICAgdGhpcy5sb3dlckJvdW5kLnggPSBiMk1pbihhYWJiMS5sb3dlckJvdW5kLngsIGFhYmIyLmxvd2VyQm91bmQueCk7XG4gICAgdGhpcy5sb3dlckJvdW5kLnkgPSBiMk1pbihhYWJiMS5sb3dlckJvdW5kLnksIGFhYmIyLmxvd2VyQm91bmQueSk7XG4gICAgdGhpcy51cHBlckJvdW5kLnggPSBiMk1heChhYWJiMS51cHBlckJvdW5kLngsIGFhYmIyLnVwcGVyQm91bmQueCk7XG4gICAgdGhpcy51cHBlckJvdW5kLnkgPSBiMk1heChhYWJiMS51cHBlckJvdW5kLnksIGFhYmIyLnVwcGVyQm91bmQueSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIENvbWJpbmUoYWFiYjE6IGIyQUFCQiwgYWFiYjI6IGIyQUFCQiwgb3V0OiBiMkFBQkIpOiBiMkFBQkIge1xuICAgIG91dC5Db21iaW5lMihhYWJiMSwgYWFiYjIpO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLy8gRG9lcyB0aGlzIGFhYmIgY29udGFpbiB0aGUgcHJvdmlkZWQgQUFCQi5cbiAgcHVibGljIENvbnRhaW5zKGFhYmI6IGIyQUFCQik6IGJvb2xlYW4ge1xuICAgIGxldCByZXN1bHQ6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHJlc3VsdCA9IHJlc3VsdCAmJiB0aGlzLmxvd2VyQm91bmQueCA8PSBhYWJiLmxvd2VyQm91bmQueDtcbiAgICByZXN1bHQgPSByZXN1bHQgJiYgdGhpcy5sb3dlckJvdW5kLnkgPD0gYWFiYi5sb3dlckJvdW5kLnk7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICYmIGFhYmIudXBwZXJCb3VuZC54IDw9IHRoaXMudXBwZXJCb3VuZC54O1xuICAgIHJlc3VsdCA9IHJlc3VsdCAmJiBhYWJiLnVwcGVyQm91bmQueSA8PSB0aGlzLnVwcGVyQm91bmQueTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gRnJvbSBSZWFsLXRpbWUgQ29sbGlzaW9uIERldGVjdGlvbiwgcDE3OS5cbiAgcHVibGljIFJheUNhc3Qob3V0cHV0OiBiMlJheUNhc3RPdXRwdXQsIGlucHV0OiBiMlJheUNhc3RJbnB1dCk6IGJvb2xlYW4ge1xuICAgIGxldCB0bWluOiBudW1iZXIgPSAoLWIyX21heEZsb2F0KTtcbiAgICBsZXQgdG1heDogbnVtYmVyID0gYjJfbWF4RmxvYXQ7XG5cbiAgICBjb25zdCBwX3g6IG51bWJlciA9IGlucHV0LnAxLng7XG4gICAgY29uc3QgcF95OiBudW1iZXIgPSBpbnB1dC5wMS55O1xuICAgIGNvbnN0IGRfeDogbnVtYmVyID0gaW5wdXQucDIueCAtIGlucHV0LnAxLng7XG4gICAgY29uc3QgZF95OiBudW1iZXIgPSBpbnB1dC5wMi55IC0gaW5wdXQucDEueTtcbiAgICBjb25zdCBhYnNEX3g6IG51bWJlciA9IGIyQWJzKGRfeCk7XG4gICAgY29uc3QgYWJzRF95OiBudW1iZXIgPSBiMkFicyhkX3kpO1xuXG4gICAgY29uc3Qgbm9ybWFsOiBiMlZlYzIgPSBvdXRwdXQubm9ybWFsO1xuXG4gICAgaWYgKGFic0RfeCA8IGIyX2Vwc2lsb24pIHtcbiAgICAgIC8vIFBhcmFsbGVsLlxuICAgICAgaWYgKHBfeCA8IHRoaXMubG93ZXJCb3VuZC54IHx8IHRoaXMudXBwZXJCb3VuZC54IDwgcF94KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW52X2Q6IG51bWJlciA9IDEgLyBkX3g7XG4gICAgICBsZXQgdDE6IG51bWJlciA9ICh0aGlzLmxvd2VyQm91bmQueCAtIHBfeCkgKiBpbnZfZDtcbiAgICAgIGxldCB0MjogbnVtYmVyID0gKHRoaXMudXBwZXJCb3VuZC54IC0gcF94KSAqIGludl9kO1xuXG4gICAgICAvLyBTaWduIG9mIHRoZSBub3JtYWwgdmVjdG9yLlxuICAgICAgbGV0IHM6IG51bWJlciA9ICgtMSk7XG5cbiAgICAgIGlmICh0MSA+IHQyKSB7XG4gICAgICAgIGNvbnN0IHQzOiBudW1iZXIgPSB0MTtcbiAgICAgICAgdDEgPSB0MjtcbiAgICAgICAgdDIgPSB0MztcbiAgICAgICAgcyA9IDE7XG4gICAgICB9XG5cbiAgICAgIC8vIFB1c2ggdGhlIG1pbiB1cFxuICAgICAgaWYgKHQxID4gdG1pbikge1xuICAgICAgICBub3JtYWwueCA9IHM7XG4gICAgICAgIG5vcm1hbC55ID0gMDtcbiAgICAgICAgdG1pbiA9IHQxO1xuICAgICAgfVxuXG4gICAgICAvLyBQdWxsIHRoZSBtYXggZG93blxuICAgICAgdG1heCA9IGIyTWluKHRtYXgsIHQyKTtcblxuICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWJzRF95IDwgYjJfZXBzaWxvbikge1xuICAgICAgLy8gUGFyYWxsZWwuXG4gICAgICBpZiAocF95IDwgdGhpcy5sb3dlckJvdW5kLnkgfHwgdGhpcy51cHBlckJvdW5kLnkgPCBwX3kpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbnZfZDogbnVtYmVyID0gMSAvIGRfeTtcbiAgICAgIGxldCB0MTogbnVtYmVyID0gKHRoaXMubG93ZXJCb3VuZC55IC0gcF95KSAqIGludl9kO1xuICAgICAgbGV0IHQyOiBudW1iZXIgPSAodGhpcy51cHBlckJvdW5kLnkgLSBwX3kpICogaW52X2Q7XG5cbiAgICAgIC8vIFNpZ24gb2YgdGhlIG5vcm1hbCB2ZWN0b3IuXG4gICAgICBsZXQgczogbnVtYmVyID0gKC0xKTtcblxuICAgICAgaWYgKHQxID4gdDIpIHtcbiAgICAgICAgY29uc3QgdDM6IG51bWJlciA9IHQxO1xuICAgICAgICB0MSA9IHQyO1xuICAgICAgICB0MiA9IHQzO1xuICAgICAgICBzID0gMTtcbiAgICAgIH1cblxuICAgICAgLy8gUHVzaCB0aGUgbWluIHVwXG4gICAgICBpZiAodDEgPiB0bWluKSB7XG4gICAgICAgIG5vcm1hbC54ID0gMDtcbiAgICAgICAgbm9ybWFsLnkgPSBzO1xuICAgICAgICB0bWluID0gdDE7XG4gICAgICB9XG5cbiAgICAgIC8vIFB1bGwgdGhlIG1heCBkb3duXG4gICAgICB0bWF4ID0gYjJNaW4odG1heCwgdDIpO1xuXG4gICAgICBpZiAodG1pbiA+IHRtYXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERvZXMgdGhlIHJheSBzdGFydCBpbnNpZGUgdGhlIGJveD9cbiAgICAvLyBEb2VzIHRoZSByYXkgaW50ZXJzZWN0IGJleW9uZCB0aGUgbWF4IGZyYWN0aW9uP1xuICAgIGlmICh0bWluIDwgMCB8fCBpbnB1dC5tYXhGcmFjdGlvbiA8IHRtaW4pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJbnRlcnNlY3Rpb24uXG4gICAgb3V0cHV0LmZyYWN0aW9uID0gdG1pbjtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIFRlc3RDb250YWluKHBvaW50OiBYWSk6IGJvb2xlYW4ge1xuICAgIGlmIChwb2ludC54IDwgdGhpcy5sb3dlckJvdW5kLnggfHwgdGhpcy51cHBlckJvdW5kLnggPCBwb2ludC54KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlmIChwb2ludC55IDwgdGhpcy5sb3dlckJvdW5kLnkgfHwgdGhpcy51cHBlckJvdW5kLnkgPCBwb2ludC55KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIFRlc3RPdmVybGFwKG90aGVyOiBiMkFBQkIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy51cHBlckJvdW5kLnggPCBvdGhlci5sb3dlckJvdW5kLngpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKHRoaXMudXBwZXJCb3VuZC55IDwgb3RoZXIubG93ZXJCb3VuZC55KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlmIChvdGhlci51cHBlckJvdW5kLnggPCB0aGlzLmxvd2VyQm91bmQueCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAob3RoZXIudXBwZXJCb3VuZC55IDwgdGhpcy5sb3dlckJvdW5kLnkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGIyVGVzdE92ZXJsYXBBQUJCKGE6IGIyQUFCQiwgYjogYjJBQUJCKTogYm9vbGVhbiB7XG4gIGlmIChhLnVwcGVyQm91bmQueCA8IGIubG93ZXJCb3VuZC54KSB7IHJldHVybiBmYWxzZTsgfVxuICBpZiAoYS51cHBlckJvdW5kLnkgPCBiLmxvd2VyQm91bmQueSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgaWYgKGIudXBwZXJCb3VuZC54IDwgYS5sb3dlckJvdW5kLngpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChiLnVwcGVyQm91bmQueSA8IGEubG93ZXJCb3VuZC55KSB7IHJldHVybiBmYWxzZTsgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8vIENsaXBwaW5nIGZvciBjb250YWN0IG1hbmlmb2xkcy5cbmV4cG9ydCBmdW5jdGlvbiBiMkNsaXBTZWdtZW50VG9MaW5lKHZPdXQ6IFtiMkNsaXBWZXJ0ZXgsIGIyQ2xpcFZlcnRleF0sIHZJbjogW2IyQ2xpcFZlcnRleCwgYjJDbGlwVmVydGV4XSwgbm9ybWFsOiBiMlZlYzIsIG9mZnNldDogbnVtYmVyLCB2ZXJ0ZXhJbmRleEE6IG51bWJlcik6IG51bWJlciB7XG4gIC8vIFN0YXJ0IHdpdGggbm8gb3V0cHV0IHBvaW50c1xuICBsZXQgY291bnQ6IG51bWJlciA9IDA7XG5cbiAgY29uc3QgdkluMDogYjJDbGlwVmVydGV4ID0gdkluWzBdO1xuICBjb25zdCB2SW4xOiBiMkNsaXBWZXJ0ZXggPSB2SW5bMV07XG5cbiAgLy8gQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBvZiBlbmQgcG9pbnRzIHRvIHRoZSBsaW5lXG4gIGNvbnN0IGRpc3RhbmNlMDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG5vcm1hbCwgdkluMC52KSAtIG9mZnNldDtcbiAgY29uc3QgZGlzdGFuY2UxOiBudW1iZXIgPSBiMlZlYzIuRG90VlYobm9ybWFsLCB2SW4xLnYpIC0gb2Zmc2V0O1xuXG4gIC8vIElmIHRoZSBwb2ludHMgYXJlIGJlaGluZCB0aGUgcGxhbmVcbiAgaWYgKGRpc3RhbmNlMCA8PSAwKSB7IHZPdXRbY291bnQrK10uQ29weSh2SW4wKTsgfVxuICBpZiAoZGlzdGFuY2UxIDw9IDApIHsgdk91dFtjb3VudCsrXS5Db3B5KHZJbjEpOyB9XG5cbiAgLy8gSWYgdGhlIHBvaW50cyBhcmUgb24gZGlmZmVyZW50IHNpZGVzIG9mIHRoZSBwbGFuZVxuICBpZiAoZGlzdGFuY2UwICogZGlzdGFuY2UxIDwgMCkge1xuICAgIC8vIEZpbmQgaW50ZXJzZWN0aW9uIHBvaW50IG9mIGVkZ2UgYW5kIHBsYW5lXG4gICAgY29uc3QgaW50ZXJwOiBudW1iZXIgPSBkaXN0YW5jZTAgLyAoZGlzdGFuY2UwIC0gZGlzdGFuY2UxKTtcbiAgICBjb25zdCB2OiBiMlZlYzIgPSB2T3V0W2NvdW50XS52O1xuICAgIHYueCA9IHZJbjAudi54ICsgaW50ZXJwICogKHZJbjEudi54IC0gdkluMC52LngpO1xuICAgIHYueSA9IHZJbjAudi55ICsgaW50ZXJwICogKHZJbjEudi55IC0gdkluMC52LnkpO1xuXG4gICAgLy8gVmVydGV4QSBpcyBoaXR0aW5nIGVkZ2VCLlxuICAgIGNvbnN0IGlkOiBiMkNvbnRhY3RJRCA9IHZPdXRbY291bnRdLmlkO1xuICAgIGlkLmNmLmluZGV4QSA9IHZlcnRleEluZGV4QTtcbiAgICBpZC5jZi5pbmRleEIgPSB2SW4wLmlkLmNmLmluZGV4QjtcbiAgICBpZC5jZi50eXBlQSA9IGIyQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4O1xuICAgIGlkLmNmLnR5cGVCID0gYjJDb250YWN0RmVhdHVyZVR5cGUuZV9mYWNlO1xuICAgICsrY291bnQ7XG5cbiAgICAvLyBiMkFzc2VydChjb3VudCA9PT0gMik7XG4gIH1cblxuICByZXR1cm4gY291bnQ7XG59XG5cbi8vLyBEZXRlcm1pbmUgaWYgdHdvIGdlbmVyaWMgc2hhcGVzIG92ZXJsYXAuXG5jb25zdCBiMlRlc3RPdmVybGFwU2hhcGVfc19pbnB1dDogYjJEaXN0YW5jZUlucHV0ID0gbmV3IGIyRGlzdGFuY2VJbnB1dCgpO1xuY29uc3QgYjJUZXN0T3ZlcmxhcFNoYXBlX3Nfc2ltcGxleENhY2hlOiBiMlNpbXBsZXhDYWNoZSA9IG5ldyBiMlNpbXBsZXhDYWNoZSgpO1xuY29uc3QgYjJUZXN0T3ZlcmxhcFNoYXBlX3Nfb3V0cHV0OiBiMkRpc3RhbmNlT3V0cHV0ID0gbmV3IGIyRGlzdGFuY2VPdXRwdXQoKTtcbmV4cG9ydCBmdW5jdGlvbiBiMlRlc3RPdmVybGFwU2hhcGUoc2hhcGVBOiBiMlNoYXBlLCBpbmRleEE6IG51bWJlciwgc2hhcGVCOiBiMlNoYXBlLCBpbmRleEI6IG51bWJlciwgeGZBOiBiMlRyYW5zZm9ybSwgeGZCOiBiMlRyYW5zZm9ybSk6IGJvb2xlYW4ge1xuICBjb25zdCBpbnB1dDogYjJEaXN0YW5jZUlucHV0ID0gYjJUZXN0T3ZlcmxhcFNoYXBlX3NfaW5wdXQuUmVzZXQoKTtcbiAgaW5wdXQucHJveHlBLlNldFNoYXBlKHNoYXBlQSwgaW5kZXhBKTtcbiAgaW5wdXQucHJveHlCLlNldFNoYXBlKHNoYXBlQiwgaW5kZXhCKTtcbiAgaW5wdXQudHJhbnNmb3JtQS5Db3B5KHhmQSk7XG4gIGlucHV0LnRyYW5zZm9ybUIuQ29weSh4ZkIpO1xuICBpbnB1dC51c2VSYWRpaSA9IHRydWU7XG5cbiAgY29uc3Qgc2ltcGxleENhY2hlOiBiMlNpbXBsZXhDYWNoZSA9IGIyVGVzdE92ZXJsYXBTaGFwZV9zX3NpbXBsZXhDYWNoZS5SZXNldCgpO1xuICBzaW1wbGV4Q2FjaGUuY291bnQgPSAwO1xuXG4gIGNvbnN0IG91dHB1dDogYjJEaXN0YW5jZU91dHB1dCA9IGIyVGVzdE92ZXJsYXBTaGFwZV9zX291dHB1dC5SZXNldCgpO1xuXG4gIGIyRGlzdGFuY2Uob3V0cHV0LCBzaW1wbGV4Q2FjaGUsIGlucHV0KTtcblxuICByZXR1cm4gb3V0cHV0LmRpc3RhbmNlIDwgMTAgKiBiMl9lcHNpbG9uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFtQkE7QUFDQTtBQUVBO0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFzREE7QUFwREE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVRBO0FBV0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBTEE7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFMQTtBQU9BO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUxBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBTEE7QUFNQTtBQUFBO0FBNURBO0FBK0RBO0FBQUE7QUFDQTtBQWtCQTtBQWhCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFKQTtBQUtBO0FBQUE7QUFuQkE7QUErQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBb0JBO0FBbEJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXhCQTtBQTBCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTRCQTtBQTFCQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFqQ0E7QUFtQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQStEQTtBQXZEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXdEQTtBQUFBO0FBbEVBO0FBcUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQ0E7QUF3Q0E7QUFBQTtBQUNBO0FBQ0E7QUFXQTtBQVRBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBYkE7QUFnQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVhBO0FBZUE7QUFBQTtBQUNBO0FBQ0E7QUFPQTtBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBVEE7QUFZQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFnTEE7QUE5S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFyTEE7QUF1TEE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBbkNBO0FBc0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBaEJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_collision.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_distance.ts":
/*!********************************************!*\
  !*** ./src/box2d/collision/b2_distance.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ShapeCast = exports.b2Distance = exports.b2Simplex = exports.b2SimplexVertex = exports.b2_gjk_reset = exports.b2_gjkMaxIters = exports.b2_gjkIters = exports.b2_gjkCalls = exports.b2ShapeCastOutput = exports.b2ShapeCastInput = exports.b2DistanceOutput = exports.b2DistanceInput = exports.b2SimplexCache = exports.b2DistanceProxy = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2DistanceProxy = (function () {\n    function b2DistanceProxy() {\n        this.m_buffer = b2_math_1.b2Vec2.MakeArray(2);\n        this.m_vertices = this.m_buffer;\n        this.m_count = 0;\n        this.m_radius = 0;\n    }\n    b2DistanceProxy.prototype.Copy = function (other) {\n        if (other.m_vertices === other.m_buffer) {\n            this.m_vertices = this.m_buffer;\n            this.m_buffer[0].Copy(other.m_buffer[0]);\n            this.m_buffer[1].Copy(other.m_buffer[1]);\n        }\n        else {\n            this.m_vertices = other.m_vertices;\n        }\n        this.m_count = other.m_count;\n        this.m_radius = other.m_radius;\n        return this;\n    };\n    b2DistanceProxy.prototype.Reset = function () {\n        this.m_vertices = this.m_buffer;\n        this.m_count = 0;\n        this.m_radius = 0;\n        return this;\n    };\n    b2DistanceProxy.prototype.SetShape = function (shape, index) {\n        shape.SetupDistanceProxy(this, index);\n    };\n    b2DistanceProxy.prototype.SetVerticesRadius = function (vertices, count, radius) {\n        this.m_vertices = vertices;\n        this.m_count = count;\n        this.m_radius = radius;\n    };\n    b2DistanceProxy.prototype.GetSupport = function (d) {\n        var bestIndex = 0;\n        var bestValue = b2_math_1.b2Vec2.DotVV(this.m_vertices[0], d);\n        for (var i = 1; i < this.m_count; ++i) {\n            var value = b2_math_1.b2Vec2.DotVV(this.m_vertices[i], d);\n            if (value > bestValue) {\n                bestIndex = i;\n                bestValue = value;\n            }\n        }\n        return bestIndex;\n    };\n    b2DistanceProxy.prototype.GetSupportVertex = function (d) {\n        var bestIndex = 0;\n        var bestValue = b2_math_1.b2Vec2.DotVV(this.m_vertices[0], d);\n        for (var i = 1; i < this.m_count; ++i) {\n            var value = b2_math_1.b2Vec2.DotVV(this.m_vertices[i], d);\n            if (value > bestValue) {\n                bestIndex = i;\n                bestValue = value;\n            }\n        }\n        return this.m_vertices[bestIndex];\n    };\n    b2DistanceProxy.prototype.GetVertexCount = function () {\n        return this.m_count;\n    };\n    b2DistanceProxy.prototype.GetVertex = function (index) {\n        return this.m_vertices[index];\n    };\n    return b2DistanceProxy;\n}());\nexports.b2DistanceProxy = b2DistanceProxy;\nvar b2SimplexCache = (function () {\n    function b2SimplexCache() {\n        this.metric = 0;\n        this.count = 0;\n        this.indexA = [0, 0, 0];\n        this.indexB = [0, 0, 0];\n    }\n    b2SimplexCache.prototype.Reset = function () {\n        this.metric = 0;\n        this.count = 0;\n        return this;\n    };\n    return b2SimplexCache;\n}());\nexports.b2SimplexCache = b2SimplexCache;\nvar b2DistanceInput = (function () {\n    function b2DistanceInput() {\n        this.proxyA = new b2DistanceProxy();\n        this.proxyB = new b2DistanceProxy();\n        this.transformA = new b2_math_1.b2Transform();\n        this.transformB = new b2_math_1.b2Transform();\n        this.useRadii = false;\n    }\n    b2DistanceInput.prototype.Reset = function () {\n        this.proxyA.Reset();\n        this.proxyB.Reset();\n        this.transformA.SetIdentity();\n        this.transformB.SetIdentity();\n        this.useRadii = false;\n        return this;\n    };\n    return b2DistanceInput;\n}());\nexports.b2DistanceInput = b2DistanceInput;\nvar b2DistanceOutput = (function () {\n    function b2DistanceOutput() {\n        this.pointA = new b2_math_1.b2Vec2();\n        this.pointB = new b2_math_1.b2Vec2();\n        this.distance = 0;\n        this.iterations = 0;\n    }\n    b2DistanceOutput.prototype.Reset = function () {\n        this.pointA.SetZero();\n        this.pointB.SetZero();\n        this.distance = 0;\n        this.iterations = 0;\n        return this;\n    };\n    return b2DistanceOutput;\n}());\nexports.b2DistanceOutput = b2DistanceOutput;\nvar b2ShapeCastInput = (function () {\n    function b2ShapeCastInput() {\n        this.proxyA = new b2DistanceProxy();\n        this.proxyB = new b2DistanceProxy();\n        this.transformA = new b2_math_1.b2Transform();\n        this.transformB = new b2_math_1.b2Transform();\n        this.translationB = new b2_math_1.b2Vec2();\n    }\n    return b2ShapeCastInput;\n}());\nexports.b2ShapeCastInput = b2ShapeCastInput;\nvar b2ShapeCastOutput = (function () {\n    function b2ShapeCastOutput() {\n        this.point = new b2_math_1.b2Vec2();\n        this.normal = new b2_math_1.b2Vec2();\n        this.lambda = 0.0;\n        this.iterations = 0;\n    }\n    return b2ShapeCastOutput;\n}());\nexports.b2ShapeCastOutput = b2ShapeCastOutput;\nexports.b2_gjkCalls = 0;\nexports.b2_gjkIters = 0;\nexports.b2_gjkMaxIters = 0;\nfunction b2_gjk_reset() {\n    exports.b2_gjkCalls = 0;\n    exports.b2_gjkIters = 0;\n    exports.b2_gjkMaxIters = 0;\n}\nexports.b2_gjk_reset = b2_gjk_reset;\nvar b2SimplexVertex = (function () {\n    function b2SimplexVertex() {\n        this.wA = new b2_math_1.b2Vec2();\n        this.wB = new b2_math_1.b2Vec2();\n        this.w = new b2_math_1.b2Vec2();\n        this.a = 0;\n        this.indexA = 0;\n        this.indexB = 0;\n    }\n    b2SimplexVertex.prototype.Copy = function (other) {\n        this.wA.Copy(other.wA);\n        this.wB.Copy(other.wB);\n        this.w.Copy(other.w);\n        this.a = other.a;\n        this.indexA = other.indexA;\n        this.indexB = other.indexB;\n        return this;\n    };\n    return b2SimplexVertex;\n}());\nexports.b2SimplexVertex = b2SimplexVertex;\nvar b2Simplex = (function () {\n    function b2Simplex() {\n        this.m_v1 = new b2SimplexVertex();\n        this.m_v2 = new b2SimplexVertex();\n        this.m_v3 = new b2SimplexVertex();\n        this.m_vertices = [];\n        this.m_count = 0;\n        this.m_vertices[0] = this.m_v1;\n        this.m_vertices[1] = this.m_v2;\n        this.m_vertices[2] = this.m_v3;\n    }\n    b2Simplex.prototype.ReadCache = function (cache, proxyA, transformA, proxyB, transformB) {\n        this.m_count = cache.count;\n        var vertices = this.m_vertices;\n        for (var i = 0; i < this.m_count; ++i) {\n            var v = vertices[i];\n            v.indexA = cache.indexA[i];\n            v.indexB = cache.indexB[i];\n            var wALocal = proxyA.GetVertex(v.indexA);\n            var wBLocal = proxyB.GetVertex(v.indexB);\n            b2_math_1.b2Transform.MulXV(transformA, wALocal, v.wA);\n            b2_math_1.b2Transform.MulXV(transformB, wBLocal, v.wB);\n            b2_math_1.b2Vec2.SubVV(v.wB, v.wA, v.w);\n            v.a = 0;\n        }\n        if (this.m_count > 1) {\n            var metric1 = cache.metric;\n            var metric2 = this.GetMetric();\n            if (metric2 < 0.5 * metric1 || 2 * metric1 < metric2 || metric2 < b2_settings_1.b2_epsilon) {\n                this.m_count = 0;\n            }\n        }\n        if (this.m_count === 0) {\n            var v = vertices[0];\n            v.indexA = 0;\n            v.indexB = 0;\n            var wALocal = proxyA.GetVertex(0);\n            var wBLocal = proxyB.GetVertex(0);\n            b2_math_1.b2Transform.MulXV(transformA, wALocal, v.wA);\n            b2_math_1.b2Transform.MulXV(transformB, wBLocal, v.wB);\n            b2_math_1.b2Vec2.SubVV(v.wB, v.wA, v.w);\n            v.a = 1;\n            this.m_count = 1;\n        }\n    };\n    b2Simplex.prototype.WriteCache = function (cache) {\n        cache.metric = this.GetMetric();\n        cache.count = this.m_count;\n        var vertices = this.m_vertices;\n        for (var i = 0; i < this.m_count; ++i) {\n            cache.indexA[i] = vertices[i].indexA;\n            cache.indexB[i] = vertices[i].indexB;\n        }\n    };\n    b2Simplex.prototype.GetSearchDirection = function (out) {\n        switch (this.m_count) {\n            case 1:\n                return b2_math_1.b2Vec2.NegV(this.m_v1.w, out);\n            case 2: {\n                var e12 = b2_math_1.b2Vec2.SubVV(this.m_v2.w, this.m_v1.w, out);\n                var sgn = b2_math_1.b2Vec2.CrossVV(e12, b2_math_1.b2Vec2.NegV(this.m_v1.w, b2_math_1.b2Vec2.s_t0));\n                if (sgn > 0) {\n                    return b2_math_1.b2Vec2.CrossOneV(e12, out);\n                }\n                else {\n                    return b2_math_1.b2Vec2.CrossVOne(e12, out);\n                }\n            }\n            default:\n                return out.SetZero();\n        }\n    };\n    b2Simplex.prototype.GetClosestPoint = function (out) {\n        switch (this.m_count) {\n            case 0:\n                return out.SetZero();\n            case 1:\n                return out.Copy(this.m_v1.w);\n            case 2:\n                return out.Set(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);\n            case 3:\n                return out.SetZero();\n            default:\n                return out.SetZero();\n        }\n    };\n    b2Simplex.prototype.GetWitnessPoints = function (pA, pB) {\n        switch (this.m_count) {\n            case 0:\n                break;\n            case 1:\n                pA.Copy(this.m_v1.wA);\n                pB.Copy(this.m_v1.wB);\n                break;\n            case 2:\n                pA.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x;\n                pA.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y;\n                pB.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x;\n                pB.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y;\n                break;\n            case 3:\n                pB.x = pA.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x;\n                pB.y = pA.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y;\n                break;\n            default:\n                break;\n        }\n    };\n    b2Simplex.prototype.GetMetric = function () {\n        switch (this.m_count) {\n            case 0:\n                return 0;\n            case 1:\n                return 0;\n            case 2:\n                return b2_math_1.b2Vec2.DistanceVV(this.m_v1.w, this.m_v2.w);\n            case 3:\n                return b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.SubVV(this.m_v2.w, this.m_v1.w, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(this.m_v3.w, this.m_v1.w, b2_math_1.b2Vec2.s_t1));\n            default:\n                return 0;\n        }\n    };\n    b2Simplex.prototype.Solve2 = function () {\n        var w1 = this.m_v1.w;\n        var w2 = this.m_v2.w;\n        var e12 = b2_math_1.b2Vec2.SubVV(w2, w1, b2Simplex.s_e12);\n        var d12_2 = (-b2_math_1.b2Vec2.DotVV(w1, e12));\n        if (d12_2 <= 0) {\n            this.m_v1.a = 1;\n            this.m_count = 1;\n            return;\n        }\n        var d12_1 = b2_math_1.b2Vec2.DotVV(w2, e12);\n        if (d12_1 <= 0) {\n            this.m_v2.a = 1;\n            this.m_count = 1;\n            this.m_v1.Copy(this.m_v2);\n            return;\n        }\n        var inv_d12 = 1 / (d12_1 + d12_2);\n        this.m_v1.a = d12_1 * inv_d12;\n        this.m_v2.a = d12_2 * inv_d12;\n        this.m_count = 2;\n    };\n    b2Simplex.prototype.Solve3 = function () {\n        var w1 = this.m_v1.w;\n        var w2 = this.m_v2.w;\n        var w3 = this.m_v3.w;\n        var e12 = b2_math_1.b2Vec2.SubVV(w2, w1, b2Simplex.s_e12);\n        var w1e12 = b2_math_1.b2Vec2.DotVV(w1, e12);\n        var w2e12 = b2_math_1.b2Vec2.DotVV(w2, e12);\n        var d12_1 = w2e12;\n        var d12_2 = (-w1e12);\n        var e13 = b2_math_1.b2Vec2.SubVV(w3, w1, b2Simplex.s_e13);\n        var w1e13 = b2_math_1.b2Vec2.DotVV(w1, e13);\n        var w3e13 = b2_math_1.b2Vec2.DotVV(w3, e13);\n        var d13_1 = w3e13;\n        var d13_2 = (-w1e13);\n        var e23 = b2_math_1.b2Vec2.SubVV(w3, w2, b2Simplex.s_e23);\n        var w2e23 = b2_math_1.b2Vec2.DotVV(w2, e23);\n        var w3e23 = b2_math_1.b2Vec2.DotVV(w3, e23);\n        var d23_1 = w3e23;\n        var d23_2 = (-w2e23);\n        var n123 = b2_math_1.b2Vec2.CrossVV(e12, e13);\n        var d123_1 = n123 * b2_math_1.b2Vec2.CrossVV(w2, w3);\n        var d123_2 = n123 * b2_math_1.b2Vec2.CrossVV(w3, w1);\n        var d123_3 = n123 * b2_math_1.b2Vec2.CrossVV(w1, w2);\n        if (d12_2 <= 0 && d13_2 <= 0) {\n            this.m_v1.a = 1;\n            this.m_count = 1;\n            return;\n        }\n        if (d12_1 > 0 && d12_2 > 0 && d123_3 <= 0) {\n            var inv_d12 = 1 / (d12_1 + d12_2);\n            this.m_v1.a = d12_1 * inv_d12;\n            this.m_v2.a = d12_2 * inv_d12;\n            this.m_count = 2;\n            return;\n        }\n        if (d13_1 > 0 && d13_2 > 0 && d123_2 <= 0) {\n            var inv_d13 = 1 / (d13_1 + d13_2);\n            this.m_v1.a = d13_1 * inv_d13;\n            this.m_v3.a = d13_2 * inv_d13;\n            this.m_count = 2;\n            this.m_v2.Copy(this.m_v3);\n            return;\n        }\n        if (d12_1 <= 0 && d23_2 <= 0) {\n            this.m_v2.a = 1;\n            this.m_count = 1;\n            this.m_v1.Copy(this.m_v2);\n            return;\n        }\n        if (d13_1 <= 0 && d23_1 <= 0) {\n            this.m_v3.a = 1;\n            this.m_count = 1;\n            this.m_v1.Copy(this.m_v3);\n            return;\n        }\n        if (d23_1 > 0 && d23_2 > 0 && d123_1 <= 0) {\n            var inv_d23 = 1 / (d23_1 + d23_2);\n            this.m_v2.a = d23_1 * inv_d23;\n            this.m_v3.a = d23_2 * inv_d23;\n            this.m_count = 2;\n            this.m_v1.Copy(this.m_v3);\n            return;\n        }\n        var inv_d123 = 1 / (d123_1 + d123_2 + d123_3);\n        this.m_v1.a = d123_1 * inv_d123;\n        this.m_v2.a = d123_2 * inv_d123;\n        this.m_v3.a = d123_3 * inv_d123;\n        this.m_count = 3;\n    };\n    b2Simplex.s_e12 = new b2_math_1.b2Vec2();\n    b2Simplex.s_e13 = new b2_math_1.b2Vec2();\n    b2Simplex.s_e23 = new b2_math_1.b2Vec2();\n    return b2Simplex;\n}());\nexports.b2Simplex = b2Simplex;\nvar b2Distance_s_simplex = new b2Simplex();\nvar b2Distance_s_saveA = [0, 0, 0];\nvar b2Distance_s_saveB = [0, 0, 0];\nvar b2Distance_s_p = new b2_math_1.b2Vec2();\nvar b2Distance_s_d = new b2_math_1.b2Vec2();\nvar b2Distance_s_normal = new b2_math_1.b2Vec2();\nvar b2Distance_s_supportA = new b2_math_1.b2Vec2();\nvar b2Distance_s_supportB = new b2_math_1.b2Vec2();\nfunction b2Distance(output, cache, input) {\n    ++exports.b2_gjkCalls;\n    var proxyA = input.proxyA;\n    var proxyB = input.proxyB;\n    var transformA = input.transformA;\n    var transformB = input.transformB;\n    var simplex = b2Distance_s_simplex;\n    simplex.ReadCache(cache, proxyA, transformA, proxyB, transformB);\n    var vertices = simplex.m_vertices;\n    var k_maxIters = 20;\n    var saveA = b2Distance_s_saveA;\n    var saveB = b2Distance_s_saveB;\n    var saveCount = 0;\n    var iter = 0;\n    while (iter < k_maxIters) {\n        saveCount = simplex.m_count;\n        for (var i = 0; i < saveCount; ++i) {\n            saveA[i] = vertices[i].indexA;\n            saveB[i] = vertices[i].indexB;\n        }\n        switch (simplex.m_count) {\n            case 1:\n                break;\n            case 2:\n                simplex.Solve2();\n                break;\n            case 3:\n                simplex.Solve3();\n                break;\n            default:\n                break;\n        }\n        if (simplex.m_count === 3) {\n            break;\n        }\n        var d = simplex.GetSearchDirection(b2Distance_s_d);\n        if (d.LengthSquared() < b2_settings_1.b2_epsilon_sq) {\n            break;\n        }\n        var vertex = vertices[simplex.m_count];\n        vertex.indexA = proxyA.GetSupport(b2_math_1.b2Rot.MulTRV(transformA.q, b2_math_1.b2Vec2.NegV(d, b2_math_1.b2Vec2.s_t0), b2Distance_s_supportA));\n        b2_math_1.b2Transform.MulXV(transformA, proxyA.GetVertex(vertex.indexA), vertex.wA);\n        vertex.indexB = proxyB.GetSupport(b2_math_1.b2Rot.MulTRV(transformB.q, d, b2Distance_s_supportB));\n        b2_math_1.b2Transform.MulXV(transformB, proxyB.GetVertex(vertex.indexB), vertex.wB);\n        b2_math_1.b2Vec2.SubVV(vertex.wB, vertex.wA, vertex.w);\n        ++iter;\n        ++exports.b2_gjkIters;\n        var duplicate = false;\n        for (var i = 0; i < saveCount; ++i) {\n            if (vertex.indexA === saveA[i] && vertex.indexB === saveB[i]) {\n                duplicate = true;\n                break;\n            }\n        }\n        if (duplicate) {\n            break;\n        }\n        ++simplex.m_count;\n    }\n    exports.b2_gjkMaxIters = b2_math_1.b2Max(exports.b2_gjkMaxIters, iter);\n    simplex.GetWitnessPoints(output.pointA, output.pointB);\n    output.distance = b2_math_1.b2Vec2.DistanceVV(output.pointA, output.pointB);\n    output.iterations = iter;\n    simplex.WriteCache(cache);\n    if (input.useRadii) {\n        var rA = proxyA.m_radius;\n        var rB = proxyB.m_radius;\n        if (output.distance > (rA + rB) && output.distance > b2_settings_1.b2_epsilon) {\n            output.distance -= rA + rB;\n            var normal = b2_math_1.b2Vec2.SubVV(output.pointB, output.pointA, b2Distance_s_normal);\n            normal.Normalize();\n            output.pointA.SelfMulAdd(rA, normal);\n            output.pointB.SelfMulSub(rB, normal);\n        }\n        else {\n            var p = b2_math_1.b2Vec2.MidVV(output.pointA, output.pointB, b2Distance_s_p);\n            output.pointA.Copy(p);\n            output.pointB.Copy(p);\n            output.distance = 0;\n        }\n    }\n}\nexports.b2Distance = b2Distance;\nvar b2ShapeCast_s_n = new b2_math_1.b2Vec2();\nvar b2ShapeCast_s_simplex = new b2Simplex();\nvar b2ShapeCast_s_wA = new b2_math_1.b2Vec2();\nvar b2ShapeCast_s_wB = new b2_math_1.b2Vec2();\nvar b2ShapeCast_s_v = new b2_math_1.b2Vec2();\nvar b2ShapeCast_s_p = new b2_math_1.b2Vec2();\nvar b2ShapeCast_s_pointA = new b2_math_1.b2Vec2();\nvar b2ShapeCast_s_pointB = new b2_math_1.b2Vec2();\nfunction b2ShapeCast(output, input) {\n    output.iterations = 0;\n    output.lambda = 1.0;\n    output.normal.SetZero();\n    output.point.SetZero();\n    var proxyA = input.proxyA;\n    var proxyB = input.proxyB;\n    var radiusA = b2_math_1.b2Max(proxyA.m_radius, b2_settings_1.b2_polygonRadius);\n    var radiusB = b2_math_1.b2Max(proxyB.m_radius, b2_settings_1.b2_polygonRadius);\n    var radius = radiusA + radiusB;\n    var xfA = input.transformA;\n    var xfB = input.transformB;\n    var r = input.translationB;\n    var n = b2ShapeCast_s_n.Set(0.0, 0.0);\n    var lambda = 0.0;\n    var simplex = b2ShapeCast_s_simplex;\n    simplex.m_count = 0;\n    var vertices = simplex.m_vertices;\n    var indexA = proxyA.GetSupport(b2_math_1.b2Rot.MulTRV(xfA.q, b2_math_1.b2Vec2.NegV(r, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0));\n    var wA = b2_math_1.b2Transform.MulXV(xfA, proxyA.GetVertex(indexA), b2ShapeCast_s_wA);\n    var indexB = proxyB.GetSupport(b2_math_1.b2Rot.MulTRV(xfB.q, r, b2_math_1.b2Vec2.s_t0));\n    var wB = b2_math_1.b2Transform.MulXV(xfB, proxyB.GetVertex(indexB), b2ShapeCast_s_wB);\n    var v = b2_math_1.b2Vec2.SubVV(wA, wB, b2ShapeCast_s_v);\n    var sigma = b2_math_1.b2Max(b2_settings_1.b2_polygonRadius, radius - b2_settings_1.b2_polygonRadius);\n    var tolerance = 0.5 * b2_settings_1.b2_linearSlop;\n    var k_maxIters = 20;\n    var iter = 0;\n    while (iter < k_maxIters && v.Length() - sigma > tolerance) {\n        output.iterations += 1;\n        indexA = proxyA.GetSupport(b2_math_1.b2Rot.MulTRV(xfA.q, b2_math_1.b2Vec2.NegV(v, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0));\n        wA = b2_math_1.b2Transform.MulXV(xfA, proxyA.GetVertex(indexA), b2ShapeCast_s_wA);\n        indexB = proxyB.GetSupport(b2_math_1.b2Rot.MulTRV(xfB.q, v, b2_math_1.b2Vec2.s_t0));\n        wB = b2_math_1.b2Transform.MulXV(xfB, proxyB.GetVertex(indexB), b2ShapeCast_s_wB);\n        var p = b2_math_1.b2Vec2.SubVV(wA, wB, b2ShapeCast_s_p);\n        v.Normalize();\n        var vp = b2_math_1.b2Vec2.DotVV(v, p);\n        var vr = b2_math_1.b2Vec2.DotVV(v, r);\n        if (vp - sigma > lambda * vr) {\n            if (vr <= 0.0) {\n                return false;\n            }\n            lambda = (vp - sigma) / vr;\n            if (lambda > 1.0) {\n                return false;\n            }\n            n.Copy(v).SelfNeg();\n            simplex.m_count = 0;\n        }\n        var vertex = vertices[simplex.m_count];\n        vertex.indexA = indexB;\n        vertex.wA.Copy(wB).SelfMulAdd(lambda, r);\n        vertex.indexB = indexA;\n        vertex.wB.Copy(wA);\n        vertex.w.Copy(vertex.wB).SelfSub(vertex.wA);\n        vertex.a = 1.0;\n        simplex.m_count += 1;\n        switch (simplex.m_count) {\n            case 1:\n                break;\n            case 2:\n                simplex.Solve2();\n                break;\n            case 3:\n                simplex.Solve3();\n                break;\n            default:\n        }\n        if (simplex.m_count === 3) {\n            return false;\n        }\n        simplex.GetClosestPoint(v);\n        ++iter;\n    }\n    if (iter === 0) {\n        return false;\n    }\n    var pointA = b2ShapeCast_s_pointA;\n    var pointB = b2ShapeCast_s_pointB;\n    simplex.GetWitnessPoints(pointA, pointB);\n    if (v.LengthSquared() > 0.0) {\n        n.Copy(v).SelfNeg();\n        n.Normalize();\n    }\n    output.normal.Copy(n);\n    output.lambda = lambda;\n    output.iterations = iter;\n    return true;\n}\nexports.b2ShapeCast = b2ShapeCast;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2Rpc3RhbmNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbGxpc2lvbi9iMl9kaXN0YW5jZS50cz8wMjJmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9lcHNpbG9uLCBiMl9lcHNpbG9uX3NxLCBiMl9wb2x5Z29uUmFkaXVzLCBiMl9saW5lYXJTbG9wIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJNYXgsIGIyVmVjMiwgYjJSb3QsIGIyVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMlNoYXBlIH0gZnJvbSBcIi4vYjJfc2hhcGVcIjtcblxuLy8vIEEgZGlzdGFuY2UgcHJveHkgaXMgdXNlZCBieSB0aGUgR0pLIGFsZ29yaXRobS5cbi8vLyBJdCBlbmNhcHN1bGF0ZXMgYW55IHNoYXBlLlxuZXhwb3J0IGNsYXNzIGIyRGlzdGFuY2VQcm94eSB7XG4gIHB1YmxpYyByZWFkb25seSBtX2J1ZmZlcjogYjJWZWMyW10gPSBiMlZlYzIuTWFrZUFycmF5KDIpO1xuICBwdWJsaWMgbV92ZXJ0aWNlczogYjJWZWMyW10gPSB0aGlzLm1fYnVmZmVyO1xuICBwdWJsaWMgbV9jb3VudDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fcmFkaXVzOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBSZWFkb25seTxiMkRpc3RhbmNlUHJveHk+KTogdGhpcyB7XG4gICAgaWYgKG90aGVyLm1fdmVydGljZXMgPT09IG90aGVyLm1fYnVmZmVyKSB7XG4gICAgICB0aGlzLm1fdmVydGljZXMgPSB0aGlzLm1fYnVmZmVyO1xuICAgICAgdGhpcy5tX2J1ZmZlclswXS5Db3B5KG90aGVyLm1fYnVmZmVyWzBdKTtcbiAgICAgIHRoaXMubV9idWZmZXJbMV0uQ29weShvdGhlci5tX2J1ZmZlclsxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV92ZXJ0aWNlcyA9IG90aGVyLm1fdmVydGljZXM7XG4gICAgfVxuICAgIHRoaXMubV9jb3VudCA9IG90aGVyLm1fY291bnQ7XG4gICAgdGhpcy5tX3JhZGl1cyA9IG90aGVyLm1fcmFkaXVzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFJlc2V0KCk6IGIyRGlzdGFuY2VQcm94eSB7XG4gICAgdGhpcy5tX3ZlcnRpY2VzID0gdGhpcy5tX2J1ZmZlcjtcbiAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgIHRoaXMubV9yYWRpdXMgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFNldFNoYXBlKHNoYXBlOiBiMlNoYXBlLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgc2hhcGUuU2V0dXBEaXN0YW5jZVByb3h5KHRoaXMsIGluZGV4KTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRWZXJ0aWNlc1JhZGl1cyh2ZXJ0aWNlczogYjJWZWMyW10sIGNvdW50OiBudW1iZXIsIHJhZGl1czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX3ZlcnRpY2VzID0gdmVydGljZXM7XG4gICAgdGhpcy5tX2NvdW50ID0gY291bnQ7XG4gICAgdGhpcy5tX3JhZGl1cyA9IHJhZGl1cztcbiAgfVxuXG4gIHB1YmxpYyBHZXRTdXBwb3J0KGQ6IGIyVmVjMik6IG51bWJlciB7XG4gICAgbGV0IGJlc3RJbmRleDogbnVtYmVyID0gMDtcbiAgICBsZXQgYmVzdFZhbHVlOiBudW1iZXIgPSBiMlZlYzIuRG90VlYodGhpcy5tX3ZlcnRpY2VzWzBdLCBkKTtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAxOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IHZhbHVlOiBudW1iZXIgPSBiMlZlYzIuRG90VlYodGhpcy5tX3ZlcnRpY2VzW2ldLCBkKTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYmVzdEluZGV4O1xuICB9XG5cbiAgcHVibGljIEdldFN1cHBvcnRWZXJ0ZXgoZDogYjJWZWMyKTogYjJWZWMyIHtcbiAgICBsZXQgYmVzdEluZGV4OiBudW1iZXIgPSAwO1xuICAgIGxldCBiZXN0VmFsdWU6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fdmVydGljZXNbMF0sIGQpO1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDE7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgdmFsdWU6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fdmVydGljZXNbaV0sIGQpO1xuICAgICAgaWYgKHZhbHVlID4gYmVzdFZhbHVlKSB7XG4gICAgICAgIGJlc3RJbmRleCA9IGk7XG4gICAgICAgIGJlc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm1fdmVydGljZXNbYmVzdEluZGV4XTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRWZXJ0ZXhDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fY291bnQ7XG4gIH1cblxuICBwdWJsaWMgR2V0VmVydGV4KGluZGV4OiBudW1iZXIpOiBiMlZlYzIge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCgwIDw9IGluZGV4ICYmIGluZGV4IDwgdGhpcy5tX2NvdW50KTtcbiAgICByZXR1cm4gdGhpcy5tX3ZlcnRpY2VzW2luZGV4XTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJTaW1wbGV4Q2FjaGUge1xuICBwdWJsaWMgbWV0cmljOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgY291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBpbmRleEE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFswLCAwLCAwXTtcbiAgcHVibGljIHJlYWRvbmx5IGluZGV4QjogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzAsIDAsIDBdO1xuXG4gIHB1YmxpYyBSZXNldCgpOiBiMlNpbXBsZXhDYWNoZSB7XG4gICAgdGhpcy5tZXRyaWMgPSAwO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMkRpc3RhbmNlSW5wdXQge1xuICBwdWJsaWMgcmVhZG9ubHkgcHJveHlBOiBiMkRpc3RhbmNlUHJveHkgPSBuZXcgYjJEaXN0YW5jZVByb3h5KCk7XG4gIHB1YmxpYyByZWFkb25seSBwcm94eUI6IGIyRGlzdGFuY2VQcm94eSA9IG5ldyBiMkRpc3RhbmNlUHJveHkoKTtcbiAgcHVibGljIHJlYWRvbmx5IHRyYW5zZm9ybUE6IGIyVHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gIHB1YmxpYyByZWFkb25seSB0cmFuc2Zvcm1COiBiMlRyYW5zZm9ybSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuICBwdWJsaWMgdXNlUmFkaWk6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgUmVzZXQoKTogYjJEaXN0YW5jZUlucHV0IHtcbiAgICB0aGlzLnByb3h5QS5SZXNldCgpO1xuICAgIHRoaXMucHJveHlCLlJlc2V0KCk7XG4gICAgdGhpcy50cmFuc2Zvcm1BLlNldElkZW50aXR5KCk7XG4gICAgdGhpcy50cmFuc2Zvcm1CLlNldElkZW50aXR5KCk7XG4gICAgdGhpcy51c2VSYWRpaSA9IGZhbHNlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMkRpc3RhbmNlT3V0cHV0IHtcbiAgcHVibGljIHJlYWRvbmx5IHBvaW50QTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgcG9pbnRCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBkaXN0YW5jZTogbnVtYmVyID0gMDtcbiAgcHVibGljIGl0ZXJhdGlvbnM6IG51bWJlciA9IDA7IC8vLzwgbnVtYmVyIG9mIEdKSyBpdGVyYXRpb25zIHVzZWRcblxuICBwdWJsaWMgUmVzZXQoKTogYjJEaXN0YW5jZU91dHB1dCB7XG4gICAgdGhpcy5wb2ludEEuU2V0WmVybygpO1xuICAgIHRoaXMucG9pbnRCLlNldFplcm8oKTtcbiAgICB0aGlzLmRpc3RhbmNlID0gMDtcbiAgICB0aGlzLml0ZXJhdGlvbnMgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbi8vLyBJbnB1dCBwYXJhbWV0ZXJzIGZvciBiMlNoYXBlQ2FzdFxuZXhwb3J0IGNsYXNzIGIyU2hhcGVDYXN0SW5wdXQge1xuICBwdWJsaWMgcmVhZG9ubHkgcHJveHlBOiBiMkRpc3RhbmNlUHJveHkgPSBuZXcgYjJEaXN0YW5jZVByb3h5KCk7XG4gIHB1YmxpYyByZWFkb25seSBwcm94eUI6IGIyRGlzdGFuY2VQcm94eSA9IG5ldyBiMkRpc3RhbmNlUHJveHkoKTtcbiAgcHVibGljIHJlYWRvbmx5IHRyYW5zZm9ybUE6IGIyVHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gIHB1YmxpYyByZWFkb25seSB0cmFuc2Zvcm1COiBiMlRyYW5zZm9ybSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuICBwdWJsaWMgcmVhZG9ubHkgdHJhbnNsYXRpb25COiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG59XG5cbi8vLyBPdXRwdXQgcmVzdWx0cyBmb3IgYjJTaGFwZUNhc3RcbmV4cG9ydCBjbGFzcyBiMlNoYXBlQ2FzdE91dHB1dCB7XG4gIHB1YmxpYyByZWFkb25seSBwb2ludDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbm9ybWFsOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBsYW1iZGE6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIGl0ZXJhdGlvbnM6IG51bWJlciA9IDA7XG59XG5cbmV4cG9ydCBsZXQgYjJfZ2prQ2FsbHM6IG51bWJlciA9IDA7XG5leHBvcnQgbGV0IGIyX2dqa0l0ZXJzOiBudW1iZXIgPSAwO1xuZXhwb3J0IGxldCBiMl9namtNYXhJdGVyczogbnVtYmVyID0gMDtcbmV4cG9ydCBmdW5jdGlvbiBiMl9namtfcmVzZXQoKTogdm9pZCB7XG4gIGIyX2dqa0NhbGxzID0gMDtcbiAgYjJfZ2prSXRlcnMgPSAwO1xuICBiMl9namtNYXhJdGVycyA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBiMlNpbXBsZXhWZXJ0ZXgge1xuICBwdWJsaWMgcmVhZG9ubHkgd0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTsgLy8gc3VwcG9ydCBwb2ludCBpbiBwcm94eUFcbiAgcHVibGljIHJlYWRvbmx5IHdCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7IC8vIHN1cHBvcnQgcG9pbnQgaW4gcHJveHlCXG4gIHB1YmxpYyByZWFkb25seSB3OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7IC8vIHdCIC0gd0FcbiAgcHVibGljIGE6IG51bWJlciA9IDA7IC8vIGJhcnljZW50cmljIGNvb3JkaW5hdGUgZm9yIGNsb3Nlc3QgcG9pbnRcbiAgcHVibGljIGluZGV4QTogbnVtYmVyID0gMDsgLy8gd0EgaW5kZXhcbiAgcHVibGljIGluZGV4QjogbnVtYmVyID0gMDsgLy8gd0IgaW5kZXhcblxuICBwdWJsaWMgQ29weShvdGhlcjogYjJTaW1wbGV4VmVydGV4KTogYjJTaW1wbGV4VmVydGV4IHtcbiAgICB0aGlzLndBLkNvcHkob3RoZXIud0EpOyAgICAgLy8gc3VwcG9ydCBwb2ludCBpbiBwcm94eUFcbiAgICB0aGlzLndCLkNvcHkob3RoZXIud0IpOyAgICAgLy8gc3VwcG9ydCBwb2ludCBpbiBwcm94eUJcbiAgICB0aGlzLncuQ29weShvdGhlci53KTsgICAgICAgLy8gd0IgLSB3QVxuICAgIHRoaXMuYSA9IG90aGVyLmE7ICAgICAgICAgICAvLyBiYXJ5Y2VudHJpYyBjb29yZGluYXRlIGZvciBjbG9zZXN0IHBvaW50XG4gICAgdGhpcy5pbmRleEEgPSBvdGhlci5pbmRleEE7IC8vIHdBIGluZGV4XG4gICAgdGhpcy5pbmRleEIgPSBvdGhlci5pbmRleEI7IC8vIHdCIGluZGV4XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyU2ltcGxleCB7XG4gIHB1YmxpYyByZWFkb25seSBtX3YxOiBiMlNpbXBsZXhWZXJ0ZXggPSBuZXcgYjJTaW1wbGV4VmVydGV4KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3YyOiBiMlNpbXBsZXhWZXJ0ZXggPSBuZXcgYjJTaW1wbGV4VmVydGV4KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3YzOiBiMlNpbXBsZXhWZXJ0ZXggPSBuZXcgYjJTaW1wbGV4VmVydGV4KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3ZlcnRpY2VzOiBiMlNpbXBsZXhWZXJ0ZXhbXSA9IFsvKjMqL107XG4gIHB1YmxpYyBtX2NvdW50OiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubV92ZXJ0aWNlc1swXSA9IHRoaXMubV92MTtcbiAgICB0aGlzLm1fdmVydGljZXNbMV0gPSB0aGlzLm1fdjI7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzJdID0gdGhpcy5tX3YzO1xuICB9XG5cbiAgcHVibGljIFJlYWRDYWNoZShjYWNoZTogYjJTaW1wbGV4Q2FjaGUsIHByb3h5QTogYjJEaXN0YW5jZVByb3h5LCB0cmFuc2Zvcm1BOiBiMlRyYW5zZm9ybSwgcHJveHlCOiBiMkRpc3RhbmNlUHJveHksIHRyYW5zZm9ybUI6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KDAgPD0gY2FjaGUuY291bnQgJiYgY2FjaGUuY291bnQgPD0gMyk7XG5cbiAgICAvLyBDb3B5IGRhdGEgZnJvbSBjYWNoZS5cbiAgICB0aGlzLm1fY291bnQgPSBjYWNoZS5jb3VudDtcbiAgICBjb25zdCB2ZXJ0aWNlczogYjJTaW1wbGV4VmVydGV4W10gPSB0aGlzLm1fdmVydGljZXM7XG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICBjb25zdCB2OiBiMlNpbXBsZXhWZXJ0ZXggPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIHYuaW5kZXhBID0gY2FjaGUuaW5kZXhBW2ldO1xuICAgICAgdi5pbmRleEIgPSBjYWNoZS5pbmRleEJbaV07XG4gICAgICBjb25zdCB3QUxvY2FsOiBiMlZlYzIgPSBwcm94eUEuR2V0VmVydGV4KHYuaW5kZXhBKTtcbiAgICAgIGNvbnN0IHdCTG9jYWw6IGIyVmVjMiA9IHByb3h5Qi5HZXRWZXJ0ZXgodi5pbmRleEIpO1xuICAgICAgYjJUcmFuc2Zvcm0uTXVsWFYodHJhbnNmb3JtQSwgd0FMb2NhbCwgdi53QSk7XG4gICAgICBiMlRyYW5zZm9ybS5NdWxYVih0cmFuc2Zvcm1CLCB3QkxvY2FsLCB2LndCKTtcbiAgICAgIGIyVmVjMi5TdWJWVih2LndCLCB2LndBLCB2LncpO1xuICAgICAgdi5hID0gMDtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgc2ltcGxleCBtZXRyaWMsIGlmIGl0IGlzIHN1YnN0YW50aWFsbHkgZGlmZmVyZW50IHRoYW5cbiAgICAvLyBvbGQgbWV0cmljIHRoZW4gZmx1c2ggdGhlIHNpbXBsZXguXG4gICAgaWYgKHRoaXMubV9jb3VudCA+IDEpIHtcbiAgICAgIGNvbnN0IG1ldHJpYzE6IG51bWJlciA9IGNhY2hlLm1ldHJpYztcbiAgICAgIGNvbnN0IG1ldHJpYzI6IG51bWJlciA9IHRoaXMuR2V0TWV0cmljKCk7XG4gICAgICBpZiAobWV0cmljMiA8IDAuNSAqIG1ldHJpYzEgfHwgMiAqIG1ldHJpYzEgPCBtZXRyaWMyIHx8IG1ldHJpYzIgPCBiMl9lcHNpbG9uKSB7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBzaW1wbGV4LlxuICAgICAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBjYWNoZSBpcyBlbXB0eSBvciBpbnZhbGlkIC4uLlxuICAgIGlmICh0aGlzLm1fY291bnQgPT09IDApIHtcbiAgICAgIGNvbnN0IHY6IGIyU2ltcGxleFZlcnRleCA9IHZlcnRpY2VzWzBdO1xuICAgICAgdi5pbmRleEEgPSAwO1xuICAgICAgdi5pbmRleEIgPSAwO1xuICAgICAgY29uc3Qgd0FMb2NhbDogYjJWZWMyID0gcHJveHlBLkdldFZlcnRleCgwKTtcbiAgICAgIGNvbnN0IHdCTG9jYWw6IGIyVmVjMiA9IHByb3h5Qi5HZXRWZXJ0ZXgoMCk7XG4gICAgICBiMlRyYW5zZm9ybS5NdWxYVih0cmFuc2Zvcm1BLCB3QUxvY2FsLCB2LndBKTtcbiAgICAgIGIyVHJhbnNmb3JtLk11bFhWKHRyYW5zZm9ybUIsIHdCTG9jYWwsIHYud0IpO1xuICAgICAgYjJWZWMyLlN1YlZWKHYud0IsIHYud0EsIHYudyk7XG4gICAgICB2LmEgPSAxO1xuICAgICAgdGhpcy5tX2NvdW50ID0gMTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgV3JpdGVDYWNoZShjYWNoZTogYjJTaW1wbGV4Q2FjaGUpOiB2b2lkIHtcbiAgICBjYWNoZS5tZXRyaWMgPSB0aGlzLkdldE1ldHJpYygpO1xuICAgIGNhY2hlLmNvdW50ID0gdGhpcy5tX2NvdW50O1xuICAgIGNvbnN0IHZlcnRpY2VzOiBiMlNpbXBsZXhWZXJ0ZXhbXSA9IHRoaXMubV92ZXJ0aWNlcztcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgIGNhY2hlLmluZGV4QVtpXSA9IHZlcnRpY2VzW2ldLmluZGV4QTtcbiAgICAgIGNhY2hlLmluZGV4QltpXSA9IHZlcnRpY2VzW2ldLmluZGV4QjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0U2VhcmNoRGlyZWN0aW9uKG91dDogYjJWZWMyKTogYjJWZWMyIHtcbiAgICBzd2l0Y2ggKHRoaXMubV9jb3VudCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gYjJWZWMyLk5lZ1YodGhpcy5tX3YxLncsIG91dCk7XG5cbiAgICAgIGNhc2UgMjoge1xuICAgICAgICBjb25zdCBlMTI6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVih0aGlzLm1fdjIudywgdGhpcy5tX3YxLncsIG91dCk7XG4gICAgICAgIGNvbnN0IHNnbjogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYoZTEyLCBiMlZlYzIuTmVnVih0aGlzLm1fdjEudywgYjJWZWMyLnNfdDApKTtcbiAgICAgICAgaWYgKHNnbiA+IDApIHtcbiAgICAgICAgICAvLyBPcmlnaW4gaXMgbGVmdCBvZiBlMTIuXG4gICAgICAgICAgcmV0dXJuIGIyVmVjMi5Dcm9zc09uZVYoZTEyLCBvdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE9yaWdpbiBpcyByaWdodCBvZiBlMTIuXG4gICAgICAgICAgcmV0dXJuIGIyVmVjMi5Dcm9zc1ZPbmUoZTEyLCBvdXQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBvdXQuU2V0WmVybygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBHZXRDbG9zZXN0UG9pbnQob3V0OiBiMlZlYzIpOiBiMlZlYzIge1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBvdXQuU2V0WmVybygpO1xuXG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBvdXQuQ29weSh0aGlzLm1fdjEudyk7XG5cbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIG91dC5TZXQoXG4gICAgICAgICAgdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEudy54ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIudy54LFxuICAgICAgICAgIHRoaXMubV92MS5hICogdGhpcy5tX3YxLncueSArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLncueSk7XG5cbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIG91dC5TZXRaZXJvKCk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBvdXQuU2V0WmVybygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBHZXRXaXRuZXNzUG9pbnRzKHBBOiBiMlZlYzIsIHBCOiBiMlZlYzIpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubV9jb3VudCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAxOlxuICAgICAgICBwQS5Db3B5KHRoaXMubV92MS53QSk7XG4gICAgICAgIHBCLkNvcHkodGhpcy5tX3YxLndCKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcEEueCA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndBLnggKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53QS54O1xuICAgICAgICBwQS55ID0gdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEud0EueSArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndBLnk7XG4gICAgICAgIHBCLnggPSB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53Qi54ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIud0IueDtcbiAgICAgICAgcEIueSA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndCLnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53Qi55O1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAzOlxuICAgICAgICBwQi54ID0gcEEueCA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndBLnggKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53QS54ICsgdGhpcy5tX3YzLmEgKiB0aGlzLm1fdjMud0EueDtcbiAgICAgICAgcEIueSA9IHBBLnkgPSB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53QS55ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIud0EueSArIHRoaXMubV92My5hICogdGhpcy5tX3YzLndBLnk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0TWV0cmljKCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0aGlzLm1fY291bnQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIGIyVmVjMi5EaXN0YW5jZVZWKHRoaXMubV92MS53LCB0aGlzLm1fdjIudyk7XG5cbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIGIyVmVjMi5Dcm9zc1ZWKGIyVmVjMi5TdWJWVih0aGlzLm1fdjIudywgdGhpcy5tX3YxLncsIGIyVmVjMi5zX3QwKSwgYjJWZWMyLlN1YlZWKHRoaXMubV92My53LCB0aGlzLm1fdjEudywgYjJWZWMyLnNfdDEpKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNvbHZlMigpOiB2b2lkIHtcbiAgICBjb25zdCB3MTogYjJWZWMyID0gdGhpcy5tX3YxLnc7XG4gICAgY29uc3QgdzI6IGIyVmVjMiA9IHRoaXMubV92Mi53O1xuICAgIGNvbnN0IGUxMjogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHcyLCB3MSwgYjJTaW1wbGV4LnNfZTEyKTtcblxuICAgIC8vIHcxIHJlZ2lvblxuICAgIGNvbnN0IGQxMl8yOiBudW1iZXIgPSAoLWIyVmVjMi5Eb3RWVih3MSwgZTEyKSk7XG4gICAgaWYgKGQxMl8yIDw9IDApIHtcbiAgICAgIC8vIGEyIDw9IDAsIHNvIHdlIGNsYW1wIGl0IHRvIDBcbiAgICAgIHRoaXMubV92MS5hID0gMTtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdzIgcmVnaW9uXG4gICAgY29uc3QgZDEyXzE6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih3MiwgZTEyKTtcbiAgICBpZiAoZDEyXzEgPD0gMCkge1xuICAgICAgLy8gYTEgPD0gMCwgc28gd2UgY2xhbXAgaXQgdG8gMFxuICAgICAgdGhpcy5tX3YyLmEgPSAxO1xuICAgICAgdGhpcy5tX2NvdW50ID0gMTtcbiAgICAgIHRoaXMubV92MS5Db3B5KHRoaXMubV92Mik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTXVzdCBiZSBpbiBlMTIgcmVnaW9uLlxuICAgIGNvbnN0IGludl9kMTI6IG51bWJlciA9IDEgLyAoZDEyXzEgKyBkMTJfMik7XG4gICAgdGhpcy5tX3YxLmEgPSBkMTJfMSAqIGludl9kMTI7XG4gICAgdGhpcy5tX3YyLmEgPSBkMTJfMiAqIGludl9kMTI7XG4gICAgdGhpcy5tX2NvdW50ID0gMjtcbiAgfVxuXG4gIHB1YmxpYyBTb2x2ZTMoKTogdm9pZCB7XG4gICAgY29uc3QgdzE6IGIyVmVjMiA9IHRoaXMubV92MS53O1xuICAgIGNvbnN0IHcyOiBiMlZlYzIgPSB0aGlzLm1fdjIudztcbiAgICBjb25zdCB3MzogYjJWZWMyID0gdGhpcy5tX3YzLnc7XG5cbiAgICAvLyBFZGdlMTJcbiAgICAvLyBbMSAgICAgIDEgICAgIF1bYTFdID0gWzFdXG4gICAgLy8gW3cxLmUxMiB3Mi5lMTJdW2EyXSA9IFswXVxuICAgIC8vIGEzID0gMFxuICAgIGNvbnN0IGUxMjogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHcyLCB3MSwgYjJTaW1wbGV4LnNfZTEyKTtcbiAgICBjb25zdCB3MWUxMjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHcxLCBlMTIpO1xuICAgIGNvbnN0IHcyZTEyOiBudW1iZXIgPSBiMlZlYzIuRG90VlYodzIsIGUxMik7XG4gICAgY29uc3QgZDEyXzE6IG51bWJlciA9IHcyZTEyO1xuICAgIGNvbnN0IGQxMl8yOiBudW1iZXIgPSAoLXcxZTEyKTtcblxuICAgIC8vIEVkZ2UxM1xuICAgIC8vIFsxICAgICAgMSAgICAgXVthMV0gPSBbMV1cbiAgICAvLyBbdzEuZTEzIHczLmUxM11bYTNdID0gWzBdXG4gICAgLy8gYTIgPSAwXG4gICAgY29uc3QgZTEzOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodzMsIHcxLCBiMlNpbXBsZXguc19lMTMpO1xuICAgIGNvbnN0IHcxZTEzOiBudW1iZXIgPSBiMlZlYzIuRG90VlYodzEsIGUxMyk7XG4gICAgY29uc3QgdzNlMTM6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih3MywgZTEzKTtcbiAgICBjb25zdCBkMTNfMTogbnVtYmVyID0gdzNlMTM7XG4gICAgY29uc3QgZDEzXzI6IG51bWJlciA9ICgtdzFlMTMpO1xuXG4gICAgLy8gRWRnZTIzXG4gICAgLy8gWzEgICAgICAxICAgICBdW2EyXSA9IFsxXVxuICAgIC8vIFt3Mi5lMjMgdzMuZTIzXVthM10gPSBbMF1cbiAgICAvLyBhMSA9IDBcbiAgICBjb25zdCBlMjM6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVih3MywgdzIsIGIyU2ltcGxleC5zX2UyMyk7XG4gICAgY29uc3QgdzJlMjM6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih3MiwgZTIzKTtcbiAgICBjb25zdCB3M2UyMzogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHczLCBlMjMpO1xuICAgIGNvbnN0IGQyM18xOiBudW1iZXIgPSB3M2UyMztcbiAgICBjb25zdCBkMjNfMjogbnVtYmVyID0gKC13MmUyMyk7XG5cbiAgICAvLyBUcmlhbmdsZTEyM1xuICAgIGNvbnN0IG4xMjM6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKGUxMiwgZTEzKTtcblxuICAgIGNvbnN0IGQxMjNfMTogbnVtYmVyID0gbjEyMyAqIGIyVmVjMi5Dcm9zc1ZWKHcyLCB3Myk7XG4gICAgY29uc3QgZDEyM18yOiBudW1iZXIgPSBuMTIzICogYjJWZWMyLkNyb3NzVlYodzMsIHcxKTtcbiAgICBjb25zdCBkMTIzXzM6IG51bWJlciA9IG4xMjMgKiBiMlZlYzIuQ3Jvc3NWVih3MSwgdzIpO1xuXG4gICAgLy8gdzEgcmVnaW9uXG4gICAgaWYgKGQxMl8yIDw9IDAgJiYgZDEzXzIgPD0gMCkge1xuICAgICAgdGhpcy5tX3YxLmEgPSAxO1xuICAgICAgdGhpcy5tX2NvdW50ID0gMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBlMTJcbiAgICBpZiAoZDEyXzEgPiAwICYmIGQxMl8yID4gMCAmJiBkMTIzXzMgPD0gMCkge1xuICAgICAgY29uc3QgaW52X2QxMjogbnVtYmVyID0gMSAvIChkMTJfMSArIGQxMl8yKTtcbiAgICAgIHRoaXMubV92MS5hID0gZDEyXzEgKiBpbnZfZDEyO1xuICAgICAgdGhpcy5tX3YyLmEgPSBkMTJfMiAqIGludl9kMTI7XG4gICAgICB0aGlzLm1fY291bnQgPSAyO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGUxM1xuICAgIGlmIChkMTNfMSA+IDAgJiYgZDEzXzIgPiAwICYmIGQxMjNfMiA8PSAwKSB7XG4gICAgICBjb25zdCBpbnZfZDEzOiBudW1iZXIgPSAxIC8gKGQxM18xICsgZDEzXzIpO1xuICAgICAgdGhpcy5tX3YxLmEgPSBkMTNfMSAqIGludl9kMTM7XG4gICAgICB0aGlzLm1fdjMuYSA9IGQxM18yICogaW52X2QxMztcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICB0aGlzLm1fdjIuQ29weSh0aGlzLm1fdjMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHcyIHJlZ2lvblxuICAgIGlmIChkMTJfMSA8PSAwICYmIGQyM18yIDw9IDApIHtcbiAgICAgIHRoaXMubV92Mi5hID0gMTtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuQ29weSh0aGlzLm1fdjIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHczIHJlZ2lvblxuICAgIGlmIChkMTNfMSA8PSAwICYmIGQyM18xIDw9IDApIHtcbiAgICAgIHRoaXMubV92My5hID0gMTtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuQ29weSh0aGlzLm1fdjMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGUyM1xuICAgIGlmIChkMjNfMSA+IDAgJiYgZDIzXzIgPiAwICYmIGQxMjNfMSA8PSAwKSB7XG4gICAgICBjb25zdCBpbnZfZDIzOiBudW1iZXIgPSAxIC8gKGQyM18xICsgZDIzXzIpO1xuICAgICAgdGhpcy5tX3YyLmEgPSBkMjNfMSAqIGludl9kMjM7XG4gICAgICB0aGlzLm1fdjMuYSA9IGQyM18yICogaW52X2QyMztcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICB0aGlzLm1fdjEuQ29weSh0aGlzLm1fdjMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE11c3QgYmUgaW4gdHJpYW5nbGUxMjNcbiAgICBjb25zdCBpbnZfZDEyMzogbnVtYmVyID0gMSAvIChkMTIzXzEgKyBkMTIzXzIgKyBkMTIzXzMpO1xuICAgIHRoaXMubV92MS5hID0gZDEyM18xICogaW52X2QxMjM7XG4gICAgdGhpcy5tX3YyLmEgPSBkMTIzXzIgKiBpbnZfZDEyMztcbiAgICB0aGlzLm1fdjMuYSA9IGQxMjNfMyAqIGludl9kMTIzO1xuICAgIHRoaXMubV9jb3VudCA9IDM7XG4gIH1cbiAgcHJpdmF0ZSBzdGF0aWMgc19lMTI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgc19lMTM6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgc19lMjM6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbn1cblxuY29uc3QgYjJEaXN0YW5jZV9zX3NpbXBsZXg6IGIyU2ltcGxleCA9IG5ldyBiMlNpbXBsZXgoKTtcbmNvbnN0IGIyRGlzdGFuY2Vfc19zYXZlQTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzAsIDAsIDBdO1xuY29uc3QgYjJEaXN0YW5jZV9zX3NhdmVCOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMCwgMCwgMF07XG5jb25zdCBiMkRpc3RhbmNlX3NfcDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJEaXN0YW5jZV9zX2Q6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyRGlzdGFuY2Vfc19ub3JtYWw6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyRGlzdGFuY2Vfc19zdXBwb3J0QTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJEaXN0YW5jZV9zX3N1cHBvcnRCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5leHBvcnQgZnVuY3Rpb24gYjJEaXN0YW5jZShvdXRwdXQ6IGIyRGlzdGFuY2VPdXRwdXQsIGNhY2hlOiBiMlNpbXBsZXhDYWNoZSwgaW5wdXQ6IGIyRGlzdGFuY2VJbnB1dCk6IHZvaWQge1xuICArK2IyX2dqa0NhbGxzO1xuXG4gIGNvbnN0IHByb3h5QTogYjJEaXN0YW5jZVByb3h5ID0gaW5wdXQucHJveHlBO1xuICBjb25zdCBwcm94eUI6IGIyRGlzdGFuY2VQcm94eSA9IGlucHV0LnByb3h5QjtcblxuICBjb25zdCB0cmFuc2Zvcm1BOiBiMlRyYW5zZm9ybSA9IGlucHV0LnRyYW5zZm9ybUE7XG4gIGNvbnN0IHRyYW5zZm9ybUI6IGIyVHJhbnNmb3JtID0gaW5wdXQudHJhbnNmb3JtQjtcblxuICAvLyBJbml0aWFsaXplIHRoZSBzaW1wbGV4LlxuICBjb25zdCBzaW1wbGV4OiBiMlNpbXBsZXggPSBiMkRpc3RhbmNlX3Nfc2ltcGxleDtcbiAgc2ltcGxleC5SZWFkQ2FjaGUoY2FjaGUsIHByb3h5QSwgdHJhbnNmb3JtQSwgcHJveHlCLCB0cmFuc2Zvcm1CKTtcblxuICAvLyBHZXQgc2ltcGxleCB2ZXJ0aWNlcyBhcyBhbiBhcnJheS5cbiAgY29uc3QgdmVydGljZXM6IGIyU2ltcGxleFZlcnRleFtdID0gc2ltcGxleC5tX3ZlcnRpY2VzO1xuICBjb25zdCBrX21heEl0ZXJzOiBudW1iZXIgPSAyMDtcblxuICAvLyBUaGVzZSBzdG9yZSB0aGUgdmVydGljZXMgb2YgdGhlIGxhc3Qgc2ltcGxleCBzbyB0aGF0IHdlXG4gIC8vIGNhbiBjaGVjayBmb3IgZHVwbGljYXRlcyBhbmQgcHJldmVudCBjeWNsaW5nLlxuICBjb25zdCBzYXZlQTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gYjJEaXN0YW5jZV9zX3NhdmVBO1xuICBjb25zdCBzYXZlQjogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gYjJEaXN0YW5jZV9zX3NhdmVCO1xuICBsZXQgc2F2ZUNvdW50OiBudW1iZXIgPSAwO1xuXG4gIC8vIE1haW4gaXRlcmF0aW9uIGxvb3AuXG4gIGxldCBpdGVyOiBudW1iZXIgPSAwO1xuICB3aGlsZSAoaXRlciA8IGtfbWF4SXRlcnMpIHtcbiAgICAvLyBDb3B5IHNpbXBsZXggc28gd2UgY2FuIGlkZW50aWZ5IGR1cGxpY2F0ZXMuXG4gICAgc2F2ZUNvdW50ID0gc2ltcGxleC5tX2NvdW50O1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBzYXZlQ291bnQ7ICsraSkge1xuICAgICAgc2F2ZUFbaV0gPSB2ZXJ0aWNlc1tpXS5pbmRleEE7XG4gICAgICBzYXZlQltpXSA9IHZlcnRpY2VzW2ldLmluZGV4QjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHNpbXBsZXgubV9jb3VudCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAyOlxuICAgICAgICBzaW1wbGV4LlNvbHZlMigpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAzOlxuICAgICAgICBzaW1wbGV4LlNvbHZlMygpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSAzIHBvaW50cywgdGhlbiB0aGUgb3JpZ2luIGlzIGluIHRoZSBjb3JyZXNwb25kaW5nIHRyaWFuZ2xlLlxuICAgIGlmIChzaW1wbGV4Lm1fY291bnQgPT09IDMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIEdldCBzZWFyY2ggZGlyZWN0aW9uLlxuICAgIGNvbnN0IGQ6IGIyVmVjMiA9IHNpbXBsZXguR2V0U2VhcmNoRGlyZWN0aW9uKGIyRGlzdGFuY2Vfc19kKTtcblxuICAgIC8vIEVuc3VyZSB0aGUgc2VhcmNoIGRpcmVjdGlvbiBpcyBudW1lcmljYWxseSBmaXQuXG4gICAgaWYgKGQuTGVuZ3RoU3F1YXJlZCgpIDwgYjJfZXBzaWxvbl9zcSkge1xuICAgICAgLy8gVGhlIG9yaWdpbiBpcyBwcm9iYWJseSBjb250YWluZWQgYnkgYSBsaW5lIHNlZ21lbnRcbiAgICAgIC8vIG9yIHRyaWFuZ2xlLiBUaHVzIHRoZSBzaGFwZXMgYXJlIG92ZXJsYXBwZWQuXG5cbiAgICAgIC8vIFdlIGNhbid0IHJldHVybiB6ZXJvIGhlcmUgZXZlbiB0aG91Z2ggdGhlcmUgbWF5IGJlIG92ZXJsYXAuXG4gICAgICAvLyBJbiBjYXNlIHRoZSBzaW1wbGV4IGlzIGEgcG9pbnQsIHNlZ21lbnQsIG9yIHRyaWFuZ2xlIGl0IGlzIGRpZmZpY3VsdFxuICAgICAgLy8gdG8gZGV0ZXJtaW5lIGlmIHRoZSBvcmlnaW4gaXMgY29udGFpbmVkIGluIHRoZSBDU08gb3IgdmVyeSBjbG9zZSB0byBpdC5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgYSB0ZW50YXRpdmUgbmV3IHNpbXBsZXggdmVydGV4IHVzaW5nIHN1cHBvcnQgcG9pbnRzLlxuICAgIGNvbnN0IHZlcnRleDogYjJTaW1wbGV4VmVydGV4ID0gdmVydGljZXNbc2ltcGxleC5tX2NvdW50XTtcbiAgICB2ZXJ0ZXguaW5kZXhBID0gcHJveHlBLkdldFN1cHBvcnQoYjJSb3QuTXVsVFJWKHRyYW5zZm9ybUEucSwgYjJWZWMyLk5lZ1YoZCwgYjJWZWMyLnNfdDApLCBiMkRpc3RhbmNlX3Nfc3VwcG9ydEEpKTtcbiAgICBiMlRyYW5zZm9ybS5NdWxYVih0cmFuc2Zvcm1BLCBwcm94eUEuR2V0VmVydGV4KHZlcnRleC5pbmRleEEpLCB2ZXJ0ZXgud0EpO1xuICAgIHZlcnRleC5pbmRleEIgPSBwcm94eUIuR2V0U3VwcG9ydChiMlJvdC5NdWxUUlYodHJhbnNmb3JtQi5xLCBkLCBiMkRpc3RhbmNlX3Nfc3VwcG9ydEIpKTtcbiAgICBiMlRyYW5zZm9ybS5NdWxYVih0cmFuc2Zvcm1CLCBwcm94eUIuR2V0VmVydGV4KHZlcnRleC5pbmRleEIpLCB2ZXJ0ZXgud0IpO1xuICAgIGIyVmVjMi5TdWJWVih2ZXJ0ZXgud0IsIHZlcnRleC53QSwgdmVydGV4LncpO1xuXG4gICAgLy8gSXRlcmF0aW9uIGNvdW50IGlzIGVxdWF0ZWQgdG8gdGhlIG51bWJlciBvZiBzdXBwb3J0IHBvaW50IGNhbGxzLlxuICAgICsraXRlcjtcbiAgICArK2IyX2dqa0l0ZXJzO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBzdXBwb3J0IHBvaW50cy4gVGhpcyBpcyB0aGUgbWFpbiB0ZXJtaW5hdGlvbiBjcml0ZXJpYS5cbiAgICBsZXQgZHVwbGljYXRlOiBib29sZWFuID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHNhdmVDb3VudDsgKytpKSB7XG4gICAgICBpZiAodmVydGV4LmluZGV4QSA9PT0gc2F2ZUFbaV0gJiYgdmVydGV4LmluZGV4QiA9PT0gc2F2ZUJbaV0pIHtcbiAgICAgICAgZHVwbGljYXRlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgZm91bmQgYSBkdXBsaWNhdGUgc3VwcG9ydCBwb2ludCB3ZSBtdXN0IGV4aXQgdG8gYXZvaWQgY3ljbGluZy5cbiAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBOZXcgdmVydGV4IGlzIG9rIGFuZCBuZWVkZWQuXG4gICAgKytzaW1wbGV4Lm1fY291bnQ7XG4gIH1cblxuICBiMl9namtNYXhJdGVycyA9IGIyTWF4KGIyX2dqa01heEl0ZXJzLCBpdGVyKTtcblxuICAvLyBQcmVwYXJlIG91dHB1dC5cbiAgc2ltcGxleC5HZXRXaXRuZXNzUG9pbnRzKG91dHB1dC5wb2ludEEsIG91dHB1dC5wb2ludEIpO1xuICBvdXRwdXQuZGlzdGFuY2UgPSBiMlZlYzIuRGlzdGFuY2VWVihvdXRwdXQucG9pbnRBLCBvdXRwdXQucG9pbnRCKTtcbiAgb3V0cHV0Lml0ZXJhdGlvbnMgPSBpdGVyO1xuXG4gIC8vIENhY2hlIHRoZSBzaW1wbGV4LlxuICBzaW1wbGV4LldyaXRlQ2FjaGUoY2FjaGUpO1xuXG4gIC8vIEFwcGx5IHJhZGlpIGlmIHJlcXVlc3RlZC5cbiAgaWYgKGlucHV0LnVzZVJhZGlpKSB7XG4gICAgY29uc3QgckE6IG51bWJlciA9IHByb3h5QS5tX3JhZGl1cztcbiAgICBjb25zdCByQjogbnVtYmVyID0gcHJveHlCLm1fcmFkaXVzO1xuXG4gICAgaWYgKG91dHB1dC5kaXN0YW5jZSA+IChyQSArIHJCKSAmJiBvdXRwdXQuZGlzdGFuY2UgPiBiMl9lcHNpbG9uKSB7XG4gICAgICAvLyBTaGFwZXMgYXJlIHN0aWxsIG5vIG92ZXJsYXBwZWQuXG4gICAgICAvLyBNb3ZlIHRoZSB3aXRuZXNzIHBvaW50cyB0byB0aGUgb3V0ZXIgc3VyZmFjZS5cbiAgICAgIG91dHB1dC5kaXN0YW5jZSAtPSByQSArIHJCO1xuICAgICAgY29uc3Qgbm9ybWFsOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYob3V0cHV0LnBvaW50Qiwgb3V0cHV0LnBvaW50QSwgYjJEaXN0YW5jZV9zX25vcm1hbCk7XG4gICAgICBub3JtYWwuTm9ybWFsaXplKCk7XG4gICAgICBvdXRwdXQucG9pbnRBLlNlbGZNdWxBZGQockEsIG5vcm1hbCk7XG4gICAgICBvdXRwdXQucG9pbnRCLlNlbGZNdWxTdWIockIsIG5vcm1hbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNoYXBlcyBhcmUgb3ZlcmxhcHBlZCB3aGVuIHJhZGlpIGFyZSBjb25zaWRlcmVkLlxuICAgICAgLy8gTW92ZSB0aGUgd2l0bmVzcyBwb2ludHMgdG8gdGhlIG1pZGRsZS5cbiAgICAgIGNvbnN0IHA6IGIyVmVjMiA9IGIyVmVjMi5NaWRWVihvdXRwdXQucG9pbnRBLCBvdXRwdXQucG9pbnRCLCBiMkRpc3RhbmNlX3NfcCk7XG4gICAgICBvdXRwdXQucG9pbnRBLkNvcHkocCk7XG4gICAgICBvdXRwdXQucG9pbnRCLkNvcHkocCk7XG4gICAgICBvdXRwdXQuZGlzdGFuY2UgPSAwO1xuICAgIH1cbiAgfVxufVxuXG4vLy8gUGVyZm9ybSBhIGxpbmVhciBzaGFwZSBjYXN0IG9mIHNoYXBlIEIgbW92aW5nIGFuZCBzaGFwZSBBIGZpeGVkLiBEZXRlcm1pbmVzIHRoZSBoaXQgcG9pbnQsIG5vcm1hbCwgYW5kIHRyYW5zbGF0aW9uIGZyYWN0aW9uLlxuXG4vLyBHSkstcmF5Y2FzdFxuLy8gQWxnb3JpdGhtIGJ5IEdpbm8gdmFuIGRlbiBCZXJnZW4uXG4vLyBcIlNtb290aCBNZXNoIENvbnRhY3RzIHdpdGggR0pLXCIgaW4gR2FtZSBQaHlzaWNzIFBlYXJscy4gMjAxMFxuLy8gYm9vbCBiMlNoYXBlQ2FzdChiMlNoYXBlQ2FzdE91dHB1dCogb3V0cHV0LCBjb25zdCBiMlNoYXBlQ2FzdElucHV0KiBpbnB1dCk7XG5jb25zdCBiMlNoYXBlQ2FzdF9zX24gPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMlNoYXBlQ2FzdF9zX3NpbXBsZXggPSBuZXcgYjJTaW1wbGV4KCk7XG5jb25zdCBiMlNoYXBlQ2FzdF9zX3dBID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJTaGFwZUNhc3Rfc193QiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyU2hhcGVDYXN0X3NfdiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyU2hhcGVDYXN0X3NfcCA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyU2hhcGVDYXN0X3NfcG9pbnRBID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJTaGFwZUNhc3Rfc19wb2ludEIgPSBuZXcgYjJWZWMyKCk7XG5leHBvcnQgZnVuY3Rpb24gYjJTaGFwZUNhc3Qob3V0cHV0OiBiMlNoYXBlQ2FzdE91dHB1dCwgaW5wdXQ6IGIyU2hhcGVDYXN0SW5wdXQpOiBib29sZWFuIHtcbiAgb3V0cHV0Lml0ZXJhdGlvbnMgPSAwO1xuICBvdXRwdXQubGFtYmRhID0gMS4wO1xuICBvdXRwdXQubm9ybWFsLlNldFplcm8oKTtcbiAgb3V0cHV0LnBvaW50LlNldFplcm8oKTtcblxuICAvLyBjb25zdCBiMkRpc3RhbmNlUHJveHkqIHByb3h5QSA9ICZpbnB1dC5wcm94eUE7XG4gIGNvbnN0IHByb3h5QSA9IGlucHV0LnByb3h5QTtcbiAgLy8gY29uc3QgYjJEaXN0YW5jZVByb3h5KiBwcm94eUIgPSAmaW5wdXQucHJveHlCO1xuICBjb25zdCBwcm94eUIgPSBpbnB1dC5wcm94eUI7XG5cbiAgLy8gZmxvYXQzMiByYWRpdXNBID0gYjJNYXgocHJveHlBLm1fcmFkaXVzLCBiMl9wb2x5Z29uUmFkaXVzKTtcbiAgY29uc3QgcmFkaXVzQSA9IGIyTWF4KHByb3h5QS5tX3JhZGl1cywgYjJfcG9seWdvblJhZGl1cyk7XG4gIC8vIGZsb2F0MzIgcmFkaXVzQiA9IGIyTWF4KHByb3h5Qi5tX3JhZGl1cywgYjJfcG9seWdvblJhZGl1cyk7XG4gIGNvbnN0IHJhZGl1c0IgPSBiMk1heChwcm94eUIubV9yYWRpdXMsIGIyX3BvbHlnb25SYWRpdXMpO1xuICAvLyBmbG9hdDMyIHJhZGl1cyA9IHJhZGl1c0EgKyByYWRpdXNCO1xuICBjb25zdCByYWRpdXMgPSByYWRpdXNBICsgcmFkaXVzQjtcblxuICAvLyBiMlRyYW5zZm9ybSB4ZkEgPSBpbnB1dC50cmFuc2Zvcm1BO1xuICBjb25zdCB4ZkEgPSBpbnB1dC50cmFuc2Zvcm1BO1xuICAvLyBiMlRyYW5zZm9ybSB4ZkIgPSBpbnB1dC50cmFuc2Zvcm1CO1xuICBjb25zdCB4ZkIgPSBpbnB1dC50cmFuc2Zvcm1CO1xuXG4gIC8vIGIyVmVjMiByID0gaW5wdXQudHJhbnNsYXRpb25CO1xuICBjb25zdCByID0gaW5wdXQudHJhbnNsYXRpb25CO1xuICAvLyBiMlZlYzIgbigwLjBmLCAwLjBmKTtcbiAgY29uc3QgbiA9IGIyU2hhcGVDYXN0X3Nfbi5TZXQoMC4wLCAwLjApO1xuICAvLyBmbG9hdDMyIGxhbWJkYSA9IDAuMGY7XG4gIGxldCBsYW1iZGEgPSAwLjA7XG5cbiAgLy8gSW5pdGlhbCBzaW1wbGV4XG4gIGNvbnN0IHNpbXBsZXggPSBiMlNoYXBlQ2FzdF9zX3NpbXBsZXg7XG4gIHNpbXBsZXgubV9jb3VudCA9IDA7XG5cbiAgLy8gR2V0IHNpbXBsZXggdmVydGljZXMgYXMgYW4gYXJyYXkuXG4gIC8vIGIyU2ltcGxleFZlcnRleCogdmVydGljZXMgPSAmc2ltcGxleC5tX3YxO1xuICBjb25zdCB2ZXJ0aWNlcyA9IHNpbXBsZXgubV92ZXJ0aWNlcztcblxuICAvLyBHZXQgc3VwcG9ydCBwb2ludCBpbiAtciBkaXJlY3Rpb25cbiAgLy8gaW50MzIgaW5kZXhBID0gcHJveHlBLkdldFN1cHBvcnQoYjJNdWxUKHhmQS5xLCAtcikpO1xuICBsZXQgaW5kZXhBID0gcHJveHlBLkdldFN1cHBvcnQoYjJSb3QuTXVsVFJWKHhmQS5xLCBiMlZlYzIuTmVnVihyLCBiMlZlYzIuc190MSksIGIyVmVjMi5zX3QwKSk7XG4gIC8vIGIyVmVjMiB3QSA9IGIyTXVsKHhmQSwgcHJveHlBLkdldFZlcnRleChpbmRleEEpKTtcbiAgbGV0IHdBID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCBwcm94eUEuR2V0VmVydGV4KGluZGV4QSksIGIyU2hhcGVDYXN0X3Nfd0EpO1xuICAvLyBpbnQzMiBpbmRleEIgPSBwcm94eUIuR2V0U3VwcG9ydChiMk11bFQoeGZCLnEsIHIpKTtcbiAgbGV0IGluZGV4QiA9IHByb3h5Qi5HZXRTdXBwb3J0KGIyUm90Lk11bFRSVih4ZkIucSwgciwgYjJWZWMyLnNfdDApKTtcbiAgLy8gYjJWZWMyIHdCID0gYjJNdWwoeGZCLCBwcm94eUIuR2V0VmVydGV4KGluZGV4QikpO1xuICBsZXQgd0IgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIHByb3h5Qi5HZXRWZXJ0ZXgoaW5kZXhCKSwgYjJTaGFwZUNhc3Rfc193Qik7XG4gIC8vIGIyVmVjMiB2ID0gd0EgLSB3QjtcbiAgY29uc3QgdiA9IGIyVmVjMi5TdWJWVih3QSwgd0IsIGIyU2hhcGVDYXN0X3Nfdik7XG5cbiAgLy8gU2lnbWEgaXMgdGhlIHRhcmdldCBkaXN0YW5jZSBiZXR3ZWVuIHBvbHlnb25zXG4gIC8vIGZsb2F0MzIgc2lnbWEgPSBiMk1heChiMl9wb2x5Z29uUmFkaXVzLCByYWRpdXMgLSBiMl9wb2x5Z29uUmFkaXVzKTtcbiAgY29uc3Qgc2lnbWEgPSBiMk1heChiMl9wb2x5Z29uUmFkaXVzLCByYWRpdXMgLSBiMl9wb2x5Z29uUmFkaXVzKTtcbiAgLy8gY29uc3QgZmxvYXQzMiB0b2xlcmFuY2UgPSAwLjVmICogYjJfbGluZWFyU2xvcDtcbiAgY29uc3QgdG9sZXJhbmNlID0gMC41ICogYjJfbGluZWFyU2xvcDtcblxuICAvLyBNYWluIGl0ZXJhdGlvbiBsb29wLlxuICAvLyBjb25zdCBpbnQzMiBrX21heEl0ZXJzID0gMjA7XG4gIGNvbnN0IGtfbWF4SXRlcnMgPSAyMDtcbiAgLy8gaW50MzIgaXRlciA9IDA7XG4gIGxldCBpdGVyID0gMDtcbiAgLy8gd2hpbGUgKGl0ZXIgPCBrX21heEl0ZXJzICYmIHYuTGVuZ3RoKCkgLSBzaWdtYSA+IHRvbGVyYW5jZSlcbiAgd2hpbGUgKGl0ZXIgPCBrX21heEl0ZXJzICYmIHYuTGVuZ3RoKCkgLSBzaWdtYSA+IHRvbGVyYW5jZSkge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChzaW1wbGV4Lm1fY291bnQgPCAzKTtcblxuICAgIG91dHB1dC5pdGVyYXRpb25zICs9IDE7XG5cbiAgICAvLyBTdXBwb3J0IGluIGRpcmVjdGlvbiAtdiAoQSAtIEIpXG4gICAgLy8gaW5kZXhBID0gcHJveHlBLkdldFN1cHBvcnQoYjJNdWxUKHhmQS5xLCAtdikpO1xuICAgIGluZGV4QSA9IHByb3h5QS5HZXRTdXBwb3J0KGIyUm90Lk11bFRSVih4ZkEucSwgYjJWZWMyLk5lZ1YodiwgYjJWZWMyLnNfdDEpLCBiMlZlYzIuc190MCkpO1xuICAgIC8vIHdBID0gYjJNdWwoeGZBLCBwcm94eUEuR2V0VmVydGV4KGluZGV4QSkpO1xuICAgIHdBID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCBwcm94eUEuR2V0VmVydGV4KGluZGV4QSksIGIyU2hhcGVDYXN0X3Nfd0EpO1xuICAgIC8vIGluZGV4QiA9IHByb3h5Qi5HZXRTdXBwb3J0KGIyTXVsVCh4ZkIucSwgdikpO1xuICAgIGluZGV4QiA9IHByb3h5Qi5HZXRTdXBwb3J0KGIyUm90Lk11bFRSVih4ZkIucSwgdiwgYjJWZWMyLnNfdDApKTtcbiAgICAvLyB3QiA9IGIyTXVsKHhmQiwgcHJveHlCLkdldFZlcnRleChpbmRleEIpKTtcbiAgICB3QiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgcHJveHlCLkdldFZlcnRleChpbmRleEIpLCBiMlNoYXBlQ2FzdF9zX3dCKTtcbiAgICAvLyBiMlZlYzIgcCA9IHdBIC0gd0I7XG4gICAgY29uc3QgcCA9IGIyVmVjMi5TdWJWVih3QSwgd0IsIGIyU2hhcGVDYXN0X3NfcCk7XG5cbiAgICAvLyAtdiBpcyBhIG5vcm1hbCBhdCBwXG4gICAgdi5Ob3JtYWxpemUoKTtcblxuICAgIC8vIEludGVyc2VjdCByYXkgd2l0aCBwbGFuZVxuICAgIGNvbnN0IHZwID0gYjJWZWMyLkRvdFZWKHYsIHApO1xuICAgIGNvbnN0IHZyID0gYjJWZWMyLkRvdFZWKHYsIHIpO1xuICAgIGlmICh2cCAtIHNpZ21hID4gbGFtYmRhICogdnIpIHtcbiAgICAgIGlmICh2ciA8PSAwLjApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsYW1iZGEgPSAodnAgLSBzaWdtYSkgLyB2cjtcbiAgICAgIGlmIChsYW1iZGEgPiAxLjApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBuID0gLXY7XG4gICAgICBuLkNvcHkodikuU2VsZk5lZygpO1xuICAgICAgc2ltcGxleC5tX2NvdW50ID0gMDtcbiAgICB9XG5cbiAgICAvLyBSZXZlcnNlIHNpbXBsZXggc2luY2UgaXQgd29ya3Mgd2l0aCBCIC0gQS5cbiAgICAvLyBTaGlmdCBieSBsYW1iZGEgKiByIGJlY2F1c2Ugd2Ugd2FudCB0aGUgY2xvc2VzdCBwb2ludCB0byB0aGUgY3VycmVudCBjbGlwIHBvaW50LlxuICAgIC8vIE5vdGUgdGhhdCB0aGUgc3VwcG9ydCBwb2ludCBwIGlzIG5vdCBzaGlmdGVkIGJlY2F1c2Ugd2Ugd2FudCB0aGUgcGxhbmUgZXF1YXRpb25cbiAgICAvLyB0byBiZSBmb3JtZWQgaW4gdW5zaGlmdGVkIHNwYWNlLlxuICAgIC8vIGIyU2ltcGxleFZlcnRleCogdmVydGV4ID0gdmVydGljZXMgKyBzaW1wbGV4Lm1fY291bnQ7XG4gICAgY29uc3QgdmVydGV4OiBiMlNpbXBsZXhWZXJ0ZXggPSB2ZXJ0aWNlc1tzaW1wbGV4Lm1fY291bnRdO1xuICAgIHZlcnRleC5pbmRleEEgPSBpbmRleEI7XG4gICAgLy8gdmVydGV4LndBID0gd0IgKyBsYW1iZGEgKiByO1xuICAgIHZlcnRleC53QS5Db3B5KHdCKS5TZWxmTXVsQWRkKGxhbWJkYSwgcik7XG4gICAgdmVydGV4LmluZGV4QiA9IGluZGV4QTtcbiAgICAvLyB2ZXJ0ZXgud0IgPSB3QTtcbiAgICB2ZXJ0ZXgud0IuQ29weSh3QSk7XG4gICAgLy8gdmVydGV4LncgPSB2ZXJ0ZXgud0IgLSB2ZXJ0ZXgud0E7XG4gICAgdmVydGV4LncuQ29weSh2ZXJ0ZXgud0IpLlNlbGZTdWIodmVydGV4LndBKTtcbiAgICB2ZXJ0ZXguYSA9IDEuMDtcbiAgICBzaW1wbGV4Lm1fY291bnQgKz0gMTtcblxuICAgIHN3aXRjaCAoc2ltcGxleC5tX2NvdW50KSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDI6XG4gICAgICAgIHNpbXBsZXguU29sdmUyKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDM6XG4gICAgICAgIHNpbXBsZXguU29sdmUzKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIDMgcG9pbnRzLCB0aGVuIHRoZSBvcmlnaW4gaXMgaW4gdGhlIGNvcnJlc3BvbmRpbmcgdHJpYW5nbGUuXG4gICAgaWYgKHNpbXBsZXgubV9jb3VudCA9PT0gMykge1xuICAgICAgLy8gT3ZlcmxhcFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEdldCBzZWFyY2ggZGlyZWN0aW9uLlxuICAgIC8vIHYgPSBzaW1wbGV4LkdldENsb3Nlc3RQb2ludCgpO1xuICAgIHNpbXBsZXguR2V0Q2xvc2VzdFBvaW50KHYpO1xuXG4gICAgLy8gSXRlcmF0aW9uIGNvdW50IGlzIGVxdWF0ZWQgdG8gdGhlIG51bWJlciBvZiBzdXBwb3J0IHBvaW50IGNhbGxzLlxuICAgICsraXRlcjtcbiAgfVxuXG4gIGlmIChpdGVyID09PSAwKSB7XG4gICAgLy8gSW5pdGlhbCBvdmVybGFwXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUHJlcGFyZSBvdXRwdXQuXG4gIGNvbnN0IHBvaW50QSA9IGIyU2hhcGVDYXN0X3NfcG9pbnRBO1xuICBjb25zdCBwb2ludEIgPSBiMlNoYXBlQ2FzdF9zX3BvaW50QjtcbiAgc2ltcGxleC5HZXRXaXRuZXNzUG9pbnRzKHBvaW50QSwgcG9pbnRCKTtcblxuICBpZiAodi5MZW5ndGhTcXVhcmVkKCkgPiAwLjApIHtcbiAgICAvLyBuID0gLXY7XG4gICAgbi5Db3B5KHYpLlNlbGZOZWcoKTtcbiAgICBuLk5vcm1hbGl6ZSgpO1xuICB9XG5cbiAgLy8gb3V0cHV0LnBvaW50ID0gcG9pbnRBICsgcmFkaXVzQSAqIG47XG4gIG91dHB1dC5ub3JtYWwuQ29weShuKTtcbiAgb3V0cHV0LmxhbWJkYSA9IGxhbWJkYTtcbiAgb3V0cHV0Lml0ZXJhdGlvbnMgPSBpdGVyO1xuICByZXR1cm4gdHJ1ZTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFvRUE7QUFsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQXhFQTtBQTBFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBWEE7QUFhQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFmQTtBQWlCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWJBO0FBZ0JBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTkE7QUFTQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFqQkE7QUFtQkE7QUFPQTtBQU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTFTQTtBQTRTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFPQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuSUE7QUEySUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFJQTtBQUlBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFJQTtBQUVBO0FBSUE7QUFFQTtBQUVBO0FBR0E7QUFJQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEtBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_distance.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_dynamic_tree.ts":
/*!************************************************!*\
  !*** ./src/box2d/collision/b2_dynamic_tree.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2DynamicTree = exports.b2TreeNode = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_growable_stack_1 = __webpack_require__(/*! ../common/b2_growable_stack */ \"./src/box2d/common/b2_growable_stack.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ./b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nfunction verify(value) {\n    if (value === null) {\n        throw new Error();\n    }\n    return value;\n}\nvar b2TreeNode = (function () {\n    function b2TreeNode(id) {\n        if (id === void 0) { id = 0; }\n        this.m_id = 0;\n        this.aabb = new b2_collision_1.b2AABB();\n        this._userData = null;\n        this.parent = null;\n        this.child1 = null;\n        this.child2 = null;\n        this.height = 0;\n        this.moved = false;\n        this.m_id = id;\n    }\n    Object.defineProperty(b2TreeNode.prototype, \"userData\", {\n        get: function () {\n            if (this._userData === null) {\n                throw new Error();\n            }\n            return this._userData;\n        },\n        set: function (value) {\n            if (this._userData !== null) {\n                throw new Error();\n            }\n            this._userData = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    b2TreeNode.prototype.Reset = function () {\n        this._userData = null;\n    };\n    b2TreeNode.prototype.IsLeaf = function () {\n        return this.child1 === null;\n    };\n    return b2TreeNode;\n}());\nexports.b2TreeNode = b2TreeNode;\nvar b2DynamicTree = (function () {\n    function b2DynamicTree() {\n        this.m_root = null;\n        this.m_freeList = null;\n        this.m_insertionCount = 0;\n        this.m_stack = new b2_growable_stack_1.b2GrowableStack(256);\n    }\n    b2DynamicTree.prototype.Query = function (aabb, callback) {\n        var stack = this.m_stack.Reset();\n        stack.Push(this.m_root);\n        while (stack.GetCount() > 0) {\n            var node = stack.Pop();\n            if (node === null) {\n                continue;\n            }\n            if (node.aabb.TestOverlap(aabb)) {\n                if (node.IsLeaf()) {\n                    var proceed = callback(node);\n                    if (!proceed) {\n                        return;\n                    }\n                }\n                else {\n                    stack.Push(node.child1);\n                    stack.Push(node.child2);\n                }\n            }\n        }\n    };\n    b2DynamicTree.prototype.QueryPoint = function (point, callback) {\n        var stack = this.m_stack.Reset();\n        stack.Push(this.m_root);\n        while (stack.GetCount() > 0) {\n            var node = stack.Pop();\n            if (node === null) {\n                continue;\n            }\n            if (node.aabb.TestContain(point)) {\n                if (node.IsLeaf()) {\n                    var proceed = callback(node);\n                    if (!proceed) {\n                        return;\n                    }\n                }\n                else {\n                    stack.Push(node.child1);\n                    stack.Push(node.child2);\n                }\n            }\n        }\n    };\n    b2DynamicTree.prototype.RayCast = function (input, callback) {\n        var p1 = input.p1;\n        var p2 = input.p2;\n        var r = b2_math_1.b2Vec2.SubVV(p2, p1, b2DynamicTree.s_r);\n        r.Normalize();\n        var v = b2_math_1.b2Vec2.CrossOneV(r, b2DynamicTree.s_v);\n        var abs_v = b2_math_1.b2Vec2.AbsV(v, b2DynamicTree.s_abs_v);\n        var maxFraction = input.maxFraction;\n        var segmentAABB = b2DynamicTree.s_segmentAABB;\n        var t_x = p1.x + maxFraction * (p2.x - p1.x);\n        var t_y = p1.y + maxFraction * (p2.y - p1.y);\n        segmentAABB.lowerBound.x = b2_math_1.b2Min(p1.x, t_x);\n        segmentAABB.lowerBound.y = b2_math_1.b2Min(p1.y, t_y);\n        segmentAABB.upperBound.x = b2_math_1.b2Max(p1.x, t_x);\n        segmentAABB.upperBound.y = b2_math_1.b2Max(p1.y, t_y);\n        var stack = this.m_stack.Reset();\n        stack.Push(this.m_root);\n        while (stack.GetCount() > 0) {\n            var node = stack.Pop();\n            if (node === null) {\n                continue;\n            }\n            if (!b2_collision_1.b2TestOverlapAABB(node.aabb, segmentAABB)) {\n                continue;\n            }\n            var c = node.aabb.GetCenter();\n            var h = node.aabb.GetExtents();\n            var separation = b2_math_1.b2Abs(b2_math_1.b2Vec2.DotVV(v, b2_math_1.b2Vec2.SubVV(p1, c, b2_math_1.b2Vec2.s_t0))) - b2_math_1.b2Vec2.DotVV(abs_v, h);\n            if (separation > 0) {\n                continue;\n            }\n            if (node.IsLeaf()) {\n                var subInput = b2DynamicTree.s_subInput;\n                subInput.p1.Copy(input.p1);\n                subInput.p2.Copy(input.p2);\n                subInput.maxFraction = maxFraction;\n                var value = callback(subInput, node);\n                if (value === 0) {\n                    return;\n                }\n                if (value > 0) {\n                    maxFraction = value;\n                    t_x = p1.x + maxFraction * (p2.x - p1.x);\n                    t_y = p1.y + maxFraction * (p2.y - p1.y);\n                    segmentAABB.lowerBound.x = b2_math_1.b2Min(p1.x, t_x);\n                    segmentAABB.lowerBound.y = b2_math_1.b2Min(p1.y, t_y);\n                    segmentAABB.upperBound.x = b2_math_1.b2Max(p1.x, t_x);\n                    segmentAABB.upperBound.y = b2_math_1.b2Max(p1.y, t_y);\n                }\n            }\n            else {\n                stack.Push(node.child1);\n                stack.Push(node.child2);\n            }\n        }\n    };\n    b2DynamicTree.prototype.AllocateNode = function () {\n        if (this.m_freeList !== null) {\n            var node = this.m_freeList;\n            this.m_freeList = node.parent;\n            node.parent = null;\n            node.child1 = null;\n            node.child2 = null;\n            node.height = 0;\n            node.moved = false;\n            return node;\n        }\n        return new b2TreeNode(b2DynamicTree.s_node_id++);\n    };\n    b2DynamicTree.prototype.FreeNode = function (node) {\n        node.parent = this.m_freeList;\n        node.child1 = null;\n        node.child2 = null;\n        node.height = -1;\n        node.Reset();\n        this.m_freeList = node;\n    };\n    b2DynamicTree.prototype.CreateProxy = function (aabb, userData) {\n        var node = this.AllocateNode();\n        var r_x = b2_settings_1.b2_aabbExtension;\n        var r_y = b2_settings_1.b2_aabbExtension;\n        node.aabb.lowerBound.x = aabb.lowerBound.x - r_x;\n        node.aabb.lowerBound.y = aabb.lowerBound.y - r_y;\n        node.aabb.upperBound.x = aabb.upperBound.x + r_x;\n        node.aabb.upperBound.y = aabb.upperBound.y + r_y;\n        node.userData = userData;\n        node.height = 0;\n        node.moved = true;\n        this.InsertLeaf(node);\n        return node;\n    };\n    b2DynamicTree.prototype.DestroyProxy = function (node) {\n        this.RemoveLeaf(node);\n        this.FreeNode(node);\n    };\n    b2DynamicTree.prototype.MoveProxy = function (node, aabb, displacement) {\n        var fatAABB = b2DynamicTree.MoveProxy_s_fatAABB;\n        var r_x = b2_settings_1.b2_aabbExtension;\n        var r_y = b2_settings_1.b2_aabbExtension;\n        fatAABB.lowerBound.x = aabb.lowerBound.x - r_x;\n        fatAABB.lowerBound.y = aabb.lowerBound.y - r_y;\n        fatAABB.upperBound.x = aabb.upperBound.x + r_x;\n        fatAABB.upperBound.y = aabb.upperBound.y + r_y;\n        var d_x = b2_settings_1.b2_aabbMultiplier * displacement.x;\n        var d_y = b2_settings_1.b2_aabbMultiplier * displacement.y;\n        if (d_x < 0.0) {\n            fatAABB.lowerBound.x += d_x;\n        }\n        else {\n            fatAABB.upperBound.x += d_x;\n        }\n        if (d_y < 0.0) {\n            fatAABB.lowerBound.y += d_y;\n        }\n        else {\n            fatAABB.upperBound.y += d_y;\n        }\n        var treeAABB = node.aabb;\n        if (treeAABB.Contains(aabb)) {\n            var hugeAABB = b2DynamicTree.MoveProxy_s_hugeAABB;\n            hugeAABB.lowerBound.x = fatAABB.lowerBound.x - 4.0 * r_x;\n            hugeAABB.lowerBound.y = fatAABB.lowerBound.y - 4.0 * r_y;\n            hugeAABB.upperBound.x = fatAABB.upperBound.x + 4.0 * r_x;\n            hugeAABB.upperBound.y = fatAABB.upperBound.y + 4.0 * r_y;\n            if (hugeAABB.Contains(treeAABB)) {\n                return false;\n            }\n        }\n        this.RemoveLeaf(node);\n        node.aabb.Copy(fatAABB);\n        this.InsertLeaf(node);\n        node.moved = true;\n        return true;\n    };\n    b2DynamicTree.prototype.InsertLeaf = function (leaf) {\n        ++this.m_insertionCount;\n        if (this.m_root === null) {\n            this.m_root = leaf;\n            this.m_root.parent = null;\n            return;\n        }\n        var leafAABB = leaf.aabb;\n        var sibling = this.m_root;\n        while (!sibling.IsLeaf()) {\n            var child1 = verify(sibling.child1);\n            var child2 = verify(sibling.child2);\n            var area = sibling.aabb.GetPerimeter();\n            var combinedAABB = b2DynamicTree.s_combinedAABB;\n            combinedAABB.Combine2(sibling.aabb, leafAABB);\n            var combinedArea = combinedAABB.GetPerimeter();\n            var cost = 2 * combinedArea;\n            var inheritanceCost = 2 * (combinedArea - area);\n            var cost1 = void 0;\n            var aabb = b2DynamicTree.s_aabb;\n            var oldArea = void 0;\n            var newArea = void 0;\n            if (child1.IsLeaf()) {\n                aabb.Combine2(leafAABB, child1.aabb);\n                cost1 = aabb.GetPerimeter() + inheritanceCost;\n            }\n            else {\n                aabb.Combine2(leafAABB, child1.aabb);\n                oldArea = child1.aabb.GetPerimeter();\n                newArea = aabb.GetPerimeter();\n                cost1 = (newArea - oldArea) + inheritanceCost;\n            }\n            var cost2 = void 0;\n            if (child2.IsLeaf()) {\n                aabb.Combine2(leafAABB, child2.aabb);\n                cost2 = aabb.GetPerimeter() + inheritanceCost;\n            }\n            else {\n                aabb.Combine2(leafAABB, child2.aabb);\n                oldArea = child2.aabb.GetPerimeter();\n                newArea = aabb.GetPerimeter();\n                cost2 = newArea - oldArea + inheritanceCost;\n            }\n            if (cost < cost1 && cost < cost2) {\n                break;\n            }\n            if (cost1 < cost2) {\n                sibling = child1;\n            }\n            else {\n                sibling = child2;\n            }\n        }\n        var oldParent = sibling.parent;\n        var newParent = this.AllocateNode();\n        newParent.parent = oldParent;\n        newParent.aabb.Combine2(leafAABB, sibling.aabb);\n        newParent.height = sibling.height + 1;\n        if (oldParent !== null) {\n            if (oldParent.child1 === sibling) {\n                oldParent.child1 = newParent;\n            }\n            else {\n                oldParent.child2 = newParent;\n            }\n            newParent.child1 = sibling;\n            newParent.child2 = leaf;\n            sibling.parent = newParent;\n            leaf.parent = newParent;\n        }\n        else {\n            newParent.child1 = sibling;\n            newParent.child2 = leaf;\n            sibling.parent = newParent;\n            leaf.parent = newParent;\n            this.m_root = newParent;\n        }\n        var node = leaf.parent;\n        while (node !== null) {\n            node = this.Balance(node);\n            var child1 = verify(node.child1);\n            var child2 = verify(node.child2);\n            node.height = 1 + b2_math_1.b2Max(child1.height, child2.height);\n            node.aabb.Combine2(child1.aabb, child2.aabb);\n            node = node.parent;\n        }\n    };\n    b2DynamicTree.prototype.RemoveLeaf = function (leaf) {\n        if (leaf === this.m_root) {\n            this.m_root = null;\n            return;\n        }\n        var parent = verify(leaf.parent);\n        var grandParent = parent && parent.parent;\n        var sibling = verify(parent.child1 === leaf ? parent.child2 : parent.child1);\n        if (grandParent !== null) {\n            if (grandParent.child1 === parent) {\n                grandParent.child1 = sibling;\n            }\n            else {\n                grandParent.child2 = sibling;\n            }\n            sibling.parent = grandParent;\n            this.FreeNode(parent);\n            var index = grandParent;\n            while (index !== null) {\n                index = this.Balance(index);\n                var child1 = verify(index.child1);\n                var child2 = verify(index.child2);\n                index.aabb.Combine2(child1.aabb, child2.aabb);\n                index.height = 1 + b2_math_1.b2Max(child1.height, child2.height);\n                index = index.parent;\n            }\n        }\n        else {\n            this.m_root = sibling;\n            sibling.parent = null;\n            this.FreeNode(parent);\n        }\n    };\n    b2DynamicTree.prototype.Balance = function (A) {\n        if (A.IsLeaf() || A.height < 2) {\n            return A;\n        }\n        var B = verify(A.child1);\n        var C = verify(A.child2);\n        var balance = C.height - B.height;\n        if (balance > 1) {\n            var F = verify(C.child1);\n            var G = verify(C.child2);\n            C.child1 = A;\n            C.parent = A.parent;\n            A.parent = C;\n            if (C.parent !== null) {\n                if (C.parent.child1 === A) {\n                    C.parent.child1 = C;\n                }\n                else {\n                    C.parent.child2 = C;\n                }\n            }\n            else {\n                this.m_root = C;\n            }\n            if (F.height > G.height) {\n                C.child2 = F;\n                A.child2 = G;\n                G.parent = A;\n                A.aabb.Combine2(B.aabb, G.aabb);\n                C.aabb.Combine2(A.aabb, F.aabb);\n                A.height = 1 + b2_math_1.b2Max(B.height, G.height);\n                C.height = 1 + b2_math_1.b2Max(A.height, F.height);\n            }\n            else {\n                C.child2 = G;\n                A.child2 = F;\n                F.parent = A;\n                A.aabb.Combine2(B.aabb, F.aabb);\n                C.aabb.Combine2(A.aabb, G.aabb);\n                A.height = 1 + b2_math_1.b2Max(B.height, F.height);\n                C.height = 1 + b2_math_1.b2Max(A.height, G.height);\n            }\n            return C;\n        }\n        if (balance < -1) {\n            var D = verify(B.child1);\n            var E = verify(B.child2);\n            B.child1 = A;\n            B.parent = A.parent;\n            A.parent = B;\n            if (B.parent !== null) {\n                if (B.parent.child1 === A) {\n                    B.parent.child1 = B;\n                }\n                else {\n                    B.parent.child2 = B;\n                }\n            }\n            else {\n                this.m_root = B;\n            }\n            if (D.height > E.height) {\n                B.child2 = D;\n                A.child1 = E;\n                E.parent = A;\n                A.aabb.Combine2(C.aabb, E.aabb);\n                B.aabb.Combine2(A.aabb, D.aabb);\n                A.height = 1 + b2_math_1.b2Max(C.height, E.height);\n                B.height = 1 + b2_math_1.b2Max(A.height, D.height);\n            }\n            else {\n                B.child2 = E;\n                A.child1 = D;\n                D.parent = A;\n                A.aabb.Combine2(C.aabb, D.aabb);\n                B.aabb.Combine2(A.aabb, E.aabb);\n                A.height = 1 + b2_math_1.b2Max(C.height, D.height);\n                B.height = 1 + b2_math_1.b2Max(A.height, E.height);\n            }\n            return B;\n        }\n        return A;\n    };\n    b2DynamicTree.prototype.GetHeight = function () {\n        if (this.m_root === null) {\n            return 0;\n        }\n        return this.m_root.height;\n    };\n    b2DynamicTree.GetAreaNode = function (node) {\n        if (node === null) {\n            return 0;\n        }\n        if (node.IsLeaf()) {\n            return 0;\n        }\n        var area = node.aabb.GetPerimeter();\n        area += b2DynamicTree.GetAreaNode(node.child1);\n        area += b2DynamicTree.GetAreaNode(node.child2);\n        return area;\n    };\n    b2DynamicTree.prototype.GetAreaRatio = function () {\n        if (this.m_root === null) {\n            return 0;\n        }\n        var root = this.m_root;\n        var rootArea = root.aabb.GetPerimeter();\n        var totalArea = b2DynamicTree.GetAreaNode(this.m_root);\n        return totalArea / rootArea;\n    };\n    b2DynamicTree.ComputeHeightNode = function (node) {\n        if (node === null) {\n            return 0;\n        }\n        if (node.IsLeaf()) {\n            return 0;\n        }\n        var height1 = b2DynamicTree.ComputeHeightNode(node.child1);\n        var height2 = b2DynamicTree.ComputeHeightNode(node.child2);\n        return 1 + b2_math_1.b2Max(height1, height2);\n    };\n    b2DynamicTree.prototype.ComputeHeight = function () {\n        var height = b2DynamicTree.ComputeHeightNode(this.m_root);\n        return height;\n    };\n    b2DynamicTree.prototype.ValidateStructure = function (node) {\n        if (node === null) {\n            return;\n        }\n        if (node === this.m_root) {\n        }\n        if (node.IsLeaf()) {\n            return;\n        }\n        var child1 = verify(node.child1);\n        var child2 = verify(node.child2);\n        this.ValidateStructure(child1);\n        this.ValidateStructure(child2);\n    };\n    b2DynamicTree.prototype.ValidateMetrics = function (node) {\n        if (node === null) {\n            return;\n        }\n        if (node.IsLeaf()) {\n            return;\n        }\n        var child1 = verify(node.child1);\n        var child2 = verify(node.child2);\n        var aabb = b2DynamicTree.s_aabb;\n        aabb.Combine2(child1.aabb, child2.aabb);\n        this.ValidateMetrics(child1);\n        this.ValidateMetrics(child2);\n    };\n    b2DynamicTree.prototype.Validate = function () {\n    };\n    b2DynamicTree.GetMaxBalanceNode = function (node, maxBalance) {\n        if (node === null) {\n            return maxBalance;\n        }\n        if (node.height <= 1) {\n            return maxBalance;\n        }\n        var child1 = verify(node.child1);\n        var child2 = verify(node.child2);\n        var balance = b2_math_1.b2Abs(child2.height - child1.height);\n        return b2_math_1.b2Max(maxBalance, balance);\n    };\n    b2DynamicTree.prototype.GetMaxBalance = function () {\n        var maxBalance = b2DynamicTree.GetMaxBalanceNode(this.m_root, 0);\n        return maxBalance;\n    };\n    b2DynamicTree.prototype.RebuildBottomUp = function () {\n        this.Validate();\n    };\n    b2DynamicTree.ShiftOriginNode = function (node, newOrigin) {\n        if (node === null) {\n            return;\n        }\n        if (node.height <= 1) {\n            return;\n        }\n        var child1 = node.child1;\n        var child2 = node.child2;\n        b2DynamicTree.ShiftOriginNode(child1, newOrigin);\n        b2DynamicTree.ShiftOriginNode(child2, newOrigin);\n        node.aabb.lowerBound.SelfSub(newOrigin);\n        node.aabb.upperBound.SelfSub(newOrigin);\n    };\n    b2DynamicTree.prototype.ShiftOrigin = function (newOrigin) {\n        b2DynamicTree.ShiftOriginNode(this.m_root, newOrigin);\n    };\n    b2DynamicTree.s_r = new b2_math_1.b2Vec2();\n    b2DynamicTree.s_v = new b2_math_1.b2Vec2();\n    b2DynamicTree.s_abs_v = new b2_math_1.b2Vec2();\n    b2DynamicTree.s_segmentAABB = new b2_collision_1.b2AABB();\n    b2DynamicTree.s_subInput = new b2_collision_1.b2RayCastInput();\n    b2DynamicTree.s_combinedAABB = new b2_collision_1.b2AABB();\n    b2DynamicTree.s_aabb = new b2_collision_1.b2AABB();\n    b2DynamicTree.s_node_id = 0;\n    b2DynamicTree.MoveProxy_s_fatAABB = new b2_collision_1.b2AABB();\n    b2DynamicTree.MoveProxy_s_hugeAABB = new b2_collision_1.b2AABB();\n    return b2DynamicTree;\n}());\nexports.b2DynamicTree = b2DynamicTree;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2R5bmFtaWNfdHJlZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9jb2xsaXNpb24vYjJfZHluYW1pY190cmVlLnRzPzJlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9hYWJiRXh0ZW5zaW9uLCBiMl9hYWJiTXVsdGlwbGllciB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyQWJzLCBiMk1pbiwgYjJNYXgsIGIyVmVjMiwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyR3Jvd2FibGVTdGFjayB9IGZyb20gXCIuLi9jb21tb24vYjJfZ3Jvd2FibGVfc3RhY2tcIjtcbmltcG9ydCB7IGIyQUFCQiwgYjJSYXlDYXN0SW5wdXQsIGIyVGVzdE92ZXJsYXBBQUJCIH0gZnJvbSBcIi4vYjJfY29sbGlzaW9uXCI7XG5cbmZ1bmN0aW9uIHZlcmlmeTxUPih2YWx1ZTogVCB8IG51bGwpOiBUIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLy8vIEEgbm9kZSBpbiB0aGUgZHluYW1pYyB0cmVlLiBUaGUgY2xpZW50IGRvZXMgbm90IGludGVyYWN0IHdpdGggdGhpcyBkaXJlY3RseS5cbmV4cG9ydCBjbGFzcyBiMlRyZWVOb2RlPFQ+IHtcbiAgcHVibGljIHJlYWRvbmx5IG1faWQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBhYWJiOiBiMkFBQkIgPSBuZXcgYjJBQUJCKCk7XG4gIHByaXZhdGUgX3VzZXJEYXRhOiBUIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBnZXQgdXNlckRhdGEoKTogVCB7XG4gICAgaWYgKHRoaXMuX3VzZXJEYXRhID09PSBudWxsKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhO1xuICB9XG4gIHB1YmxpYyBzZXQgdXNlckRhdGEodmFsdWU6IFQpIHtcbiAgICBpZiAodGhpcy5fdXNlckRhdGEgIT09IG51bGwpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICB0aGlzLl91c2VyRGF0YSA9IHZhbHVlO1xuICB9XG4gIHB1YmxpYyBwYXJlbnQ6IGIyVHJlZU5vZGU8VD4gfCBudWxsID0gbnVsbDsgLy8gb3IgbmV4dFxuICBwdWJsaWMgY2hpbGQxOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBjaGlsZDI6IGIyVHJlZU5vZGU8VD4gfCBudWxsID0gbnVsbDtcbiAgcHVibGljIGhlaWdodDogbnVtYmVyID0gMDsgLy8gbGVhZiA9IDAsIGZyZWUgbm9kZSA9IC0xXG5cbiAgcHVibGljIG1vdmVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciA9IDApIHtcbiAgICB0aGlzLm1faWQgPSBpZDtcbiAgfVxuXG4gIHB1YmxpYyBSZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl91c2VyRGF0YSA9IG51bGw7XG4gIH1cblxuICBwdWJsaWMgSXNMZWFmKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNoaWxkMSA9PT0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJEeW5hbWljVHJlZTxUPiB7XG4gIHB1YmxpYyBtX3Jvb3Q6IGIyVHJlZU5vZGU8VD4gfCBudWxsID0gbnVsbDtcblxuICAvLyBiMlRyZWVOb2RlKiBwdWJsaWMgbV9ub2RlcztcbiAgLy8gaW50MzIgcHVibGljIG1fbm9kZUNvdW50O1xuICAvLyBpbnQzMiBwdWJsaWMgbV9ub2RlQ2FwYWNpdHk7XG5cbiAgcHVibGljIG1fZnJlZUxpc3Q6IGIyVHJlZU5vZGU8VD4gfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgbV9pbnNlcnRpb25Db3VudDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9zdGFjayA9IG5ldyBiMkdyb3dhYmxlU3RhY2s8YjJUcmVlTm9kZTxUPiB8IG51bGw+KDI1Nik7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgc19yID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHNfdiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBzX2Fic192ID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHNfc2VnbWVudEFBQkIgPSBuZXcgYjJBQUJCKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgc19zdWJJbnB1dCA9IG5ldyBiMlJheUNhc3RJbnB1dCgpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHNfY29tYmluZWRBQUJCID0gbmV3IGIyQUFCQigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHNfYWFiYiA9IG5ldyBiMkFBQkIoKTtcblxuICAvLyBwdWJsaWMgR2V0VXNlckRhdGEobm9kZTogYjJUcmVlTm9kZTxUPik6IFQge1xuICAvLyAgIC8vIERFQlVHOiBiMkFzc2VydChub2RlICE9PSBudWxsKTtcbiAgLy8gICByZXR1cm4gbm9kZS51c2VyRGF0YTtcbiAgLy8gfVxuXG4gIC8vIHB1YmxpYyBXYXNNb3ZlZChub2RlOiBiMlRyZWVOb2RlPFQ+KTogYm9vbGVhbiB7XG4gIC8vICAgcmV0dXJuIG5vZGUubW92ZWQ7XG4gIC8vIH1cblxuICAvLyBwdWJsaWMgQ2xlYXJNb3ZlZChub2RlOiBiMlRyZWVOb2RlPFQ+KTogdm9pZCB7XG4gIC8vICAgbm9kZS5tb3ZlZCA9IGZhbHNlO1xuICAvLyB9XG5cbiAgLy8gcHVibGljIEdldEZhdEFBQkIobm9kZTogYjJUcmVlTm9kZTxUPik6IGIyQUFCQiB7XG4gIC8vICAgLy8gREVCVUc6IGIyQXNzZXJ0KG5vZGUgIT09IG51bGwpO1xuICAvLyAgIHJldHVybiBub2RlLmFhYmI7XG4gIC8vIH1cblxuICBwdWJsaWMgUXVlcnkoYWFiYjogYjJBQUJCLCBjYWxsYmFjazogKG5vZGU6IGIyVHJlZU5vZGU8VD4pID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzdGFjazogYjJHcm93YWJsZVN0YWNrPGIyVHJlZU5vZGU8VD4gfCBudWxsPiA9IHRoaXMubV9zdGFjay5SZXNldCgpO1xuICAgIHN0YWNrLlB1c2godGhpcy5tX3Jvb3QpO1xuXG4gICAgd2hpbGUgKHN0YWNrLkdldENvdW50KCkgPiAwKSB7XG4gICAgICBjb25zdCBub2RlOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHN0YWNrLlBvcCgpO1xuICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLmFhYmIuVGVzdE92ZXJsYXAoYWFiYikpIHtcbiAgICAgICAgaWYgKG5vZGUuSXNMZWFmKCkpIHtcbiAgICAgICAgICBjb25zdCBwcm9jZWVkOiBib29sZWFuID0gY2FsbGJhY2sobm9kZSk7XG4gICAgICAgICAgaWYgKCFwcm9jZWVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YWNrLlB1c2gobm9kZS5jaGlsZDEpO1xuICAgICAgICAgIHN0YWNrLlB1c2gobm9kZS5jaGlsZDIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFF1ZXJ5UG9pbnQocG9pbnQ6IFhZLCBjYWxsYmFjazogKG5vZGU6IGIyVHJlZU5vZGU8VD4pID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzdGFjazogYjJHcm93YWJsZVN0YWNrPGIyVHJlZU5vZGU8VD4gfCBudWxsPiA9IHRoaXMubV9zdGFjay5SZXNldCgpO1xuICAgIHN0YWNrLlB1c2godGhpcy5tX3Jvb3QpO1xuXG4gICAgd2hpbGUgKHN0YWNrLkdldENvdW50KCkgPiAwKSB7XG4gICAgICBjb25zdCBub2RlOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHN0YWNrLlBvcCgpO1xuICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLmFhYmIuVGVzdENvbnRhaW4ocG9pbnQpKSB7XG4gICAgICAgIGlmIChub2RlLklzTGVhZigpKSB7XG4gICAgICAgICAgY29uc3QgcHJvY2VlZDogYm9vbGVhbiA9IGNhbGxiYWNrKG5vZGUpO1xuICAgICAgICAgIGlmICghcHJvY2VlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGFjay5QdXNoKG5vZGUuY2hpbGQxKTtcbiAgICAgICAgICBzdGFjay5QdXNoKG5vZGUuY2hpbGQyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBSYXlDYXN0KGlucHV0OiBiMlJheUNhc3RJbnB1dCwgY2FsbGJhY2s6IChpbnB1dDogYjJSYXlDYXN0SW5wdXQsIG5vZGU6IGIyVHJlZU5vZGU8VD4pID0+IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHAxOiBiMlZlYzIgPSBpbnB1dC5wMTtcbiAgICBjb25zdCBwMjogYjJWZWMyID0gaW5wdXQucDI7XG4gICAgY29uc3QgcjogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHAyLCBwMSwgYjJEeW5hbWljVHJlZS5zX3IpO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChyLkxlbmd0aFNxdWFyZWQoKSA+IDApO1xuICAgIHIuTm9ybWFsaXplKCk7XG5cbiAgICAvLyB2IGlzIHBlcnBlbmRpY3VsYXIgdG8gdGhlIHNlZ21lbnQuXG4gICAgY29uc3QgdjogYjJWZWMyID0gYjJWZWMyLkNyb3NzT25lVihyLCBiMkR5bmFtaWNUcmVlLnNfdik7XG4gICAgY29uc3QgYWJzX3Y6IGIyVmVjMiA9IGIyVmVjMi5BYnNWKHYsIGIyRHluYW1pY1RyZWUuc19hYnNfdik7XG5cbiAgICAvLyBTZXBhcmF0aW5nIGF4aXMgZm9yIHNlZ21lbnQgKEdpbm8sIHA4MCkuXG4gICAgLy8gfGRvdCh2LCBwMSAtIGMpfCA+IGRvdCh8dnwsIGgpXG5cbiAgICBsZXQgbWF4RnJhY3Rpb246IG51bWJlciA9IGlucHV0Lm1heEZyYWN0aW9uO1xuXG4gICAgLy8gQnVpbGQgYSBib3VuZGluZyBib3ggZm9yIHRoZSBzZWdtZW50LlxuICAgIGNvbnN0IHNlZ21lbnRBQUJCOiBiMkFBQkIgPSBiMkR5bmFtaWNUcmVlLnNfc2VnbWVudEFBQkI7XG4gICAgbGV0IHRfeDogbnVtYmVyID0gcDEueCArIG1heEZyYWN0aW9uICogKHAyLnggLSBwMS54KTtcbiAgICBsZXQgdF95OiBudW1iZXIgPSBwMS55ICsgbWF4RnJhY3Rpb24gKiAocDIueSAtIHAxLnkpO1xuICAgIHNlZ21lbnRBQUJCLmxvd2VyQm91bmQueCA9IGIyTWluKHAxLngsIHRfeCk7XG4gICAgc2VnbWVudEFBQkIubG93ZXJCb3VuZC55ID0gYjJNaW4ocDEueSwgdF95KTtcbiAgICBzZWdtZW50QUFCQi51cHBlckJvdW5kLnggPSBiMk1heChwMS54LCB0X3gpO1xuICAgIHNlZ21lbnRBQUJCLnVwcGVyQm91bmQueSA9IGIyTWF4KHAxLnksIHRfeSk7XG5cbiAgICBjb25zdCBzdGFjazogYjJHcm93YWJsZVN0YWNrPGIyVHJlZU5vZGU8VD4gfCBudWxsPiA9IHRoaXMubV9zdGFjay5SZXNldCgpO1xuICAgIHN0YWNrLlB1c2godGhpcy5tX3Jvb3QpO1xuXG4gICAgd2hpbGUgKHN0YWNrLkdldENvdW50KCkgPiAwKSB7XG4gICAgICBjb25zdCBub2RlOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHN0YWNrLlBvcCgpO1xuICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghYjJUZXN0T3ZlcmxhcEFBQkIobm9kZS5hYWJiLCBzZWdtZW50QUFCQikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlcGFyYXRpbmcgYXhpcyBmb3Igc2VnbWVudCAoR2lubywgcDgwKS5cbiAgICAgIC8vIHxkb3QodiwgcDEgLSBjKXwgPiBkb3QofHZ8LCBoKVxuICAgICAgY29uc3QgYzogYjJWZWMyID0gbm9kZS5hYWJiLkdldENlbnRlcigpO1xuICAgICAgY29uc3QgaDogYjJWZWMyID0gbm9kZS5hYWJiLkdldEV4dGVudHMoKTtcbiAgICAgIGNvbnN0IHNlcGFyYXRpb246IG51bWJlciA9IGIyQWJzKGIyVmVjMi5Eb3RWVih2LCBiMlZlYzIuU3ViVlYocDEsIGMsIGIyVmVjMi5zX3QwKSkpIC0gYjJWZWMyLkRvdFZWKGFic192LCBoKTtcbiAgICAgIGlmIChzZXBhcmF0aW9uID4gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUuSXNMZWFmKCkpIHtcbiAgICAgICAgY29uc3Qgc3ViSW5wdXQ6IGIyUmF5Q2FzdElucHV0ID0gYjJEeW5hbWljVHJlZS5zX3N1YklucHV0O1xuICAgICAgICBzdWJJbnB1dC5wMS5Db3B5KGlucHV0LnAxKTtcbiAgICAgICAgc3ViSW5wdXQucDIuQ29weShpbnB1dC5wMik7XG4gICAgICAgIHN1YklucHV0Lm1heEZyYWN0aW9uID0gbWF4RnJhY3Rpb247XG5cbiAgICAgICAgY29uc3QgdmFsdWU6IG51bWJlciA9IGNhbGxiYWNrKHN1YklucHV0LCBub2RlKTtcblxuICAgICAgICBpZiAodmFsdWUgPT09IDApIHtcbiAgICAgICAgICAvLyBUaGUgY2xpZW50IGhhcyB0ZXJtaW5hdGVkIHRoZSByYXkgY2FzdC5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUgPiAwKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHNlZ21lbnQgYm91bmRpbmcgYm94LlxuICAgICAgICAgIG1heEZyYWN0aW9uID0gdmFsdWU7XG4gICAgICAgICAgdF94ID0gcDEueCArIG1heEZyYWN0aW9uICogKHAyLnggLSBwMS54KTtcbiAgICAgICAgICB0X3kgPSBwMS55ICsgbWF4RnJhY3Rpb24gKiAocDIueSAtIHAxLnkpO1xuICAgICAgICAgIHNlZ21lbnRBQUJCLmxvd2VyQm91bmQueCA9IGIyTWluKHAxLngsIHRfeCk7XG4gICAgICAgICAgc2VnbWVudEFBQkIubG93ZXJCb3VuZC55ID0gYjJNaW4ocDEueSwgdF95KTtcbiAgICAgICAgICBzZWdtZW50QUFCQi51cHBlckJvdW5kLnggPSBiMk1heChwMS54LCB0X3gpO1xuICAgICAgICAgIHNlZ21lbnRBQUJCLnVwcGVyQm91bmQueSA9IGIyTWF4KHAxLnksIHRfeSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLlB1c2gobm9kZS5jaGlsZDEpO1xuICAgICAgICBzdGFjay5QdXNoKG5vZGUuY2hpbGQyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHNfbm9kZV9pZDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgQWxsb2NhdGVOb2RlKCk6IGIyVHJlZU5vZGU8VD4ge1xuICAgIC8vIEV4cGFuZCB0aGUgbm9kZSBwb29sIGFzIG5lZWRlZC5cbiAgICBpZiAodGhpcy5tX2ZyZWVMaXN0ICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBub2RlOiBiMlRyZWVOb2RlPFQ+ID0gdGhpcy5tX2ZyZWVMaXN0O1xuICAgICAgdGhpcy5tX2ZyZWVMaXN0ID0gbm9kZS5wYXJlbnQ7IC8vIHRoaXMubV9mcmVlTGlzdCA9IG5vZGUubmV4dDtcbiAgICAgIG5vZGUucGFyZW50ID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQxID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQyID0gbnVsbDtcbiAgICAgIG5vZGUuaGVpZ2h0ID0gMDtcbiAgICAgIG5vZGUubW92ZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgYjJUcmVlTm9kZTxUPihiMkR5bmFtaWNUcmVlLnNfbm9kZV9pZCsrKTtcbiAgfVxuXG4gIHB1YmxpYyBGcmVlTm9kZShub2RlOiBiMlRyZWVOb2RlPFQ+KTogdm9pZCB7XG4gICAgbm9kZS5wYXJlbnQgPSB0aGlzLm1fZnJlZUxpc3Q7IC8vIG5vZGUubmV4dCA9IHRoaXMubV9mcmVlTGlzdDtcbiAgICBub2RlLmNoaWxkMSA9IG51bGw7XG4gICAgbm9kZS5jaGlsZDIgPSBudWxsO1xuICAgIG5vZGUuaGVpZ2h0ID0gLTE7XG4gICAgbm9kZS5SZXNldCgpO1xuICAgIHRoaXMubV9mcmVlTGlzdCA9IG5vZGU7XG4gIH1cblxuICBwdWJsaWMgQ3JlYXRlUHJveHkoYWFiYjogYjJBQUJCLCB1c2VyRGF0YTogVCk6IGIyVHJlZU5vZGU8VD4ge1xuICAgIGNvbnN0IG5vZGU6IGIyVHJlZU5vZGU8VD4gPSB0aGlzLkFsbG9jYXRlTm9kZSgpO1xuXG4gICAgLy8gRmF0dGVuIHRoZSBhYWJiLlxuICAgIGNvbnN0IHJfeDogbnVtYmVyID0gYjJfYWFiYkV4dGVuc2lvbjtcbiAgICBjb25zdCByX3k6IG51bWJlciA9IGIyX2FhYmJFeHRlbnNpb247XG4gICAgbm9kZS5hYWJiLmxvd2VyQm91bmQueCA9IGFhYmIubG93ZXJCb3VuZC54IC0gcl94O1xuICAgIG5vZGUuYWFiYi5sb3dlckJvdW5kLnkgPSBhYWJiLmxvd2VyQm91bmQueSAtIHJfeTtcbiAgICBub2RlLmFhYmIudXBwZXJCb3VuZC54ID0gYWFiYi51cHBlckJvdW5kLnggKyByX3g7XG4gICAgbm9kZS5hYWJiLnVwcGVyQm91bmQueSA9IGFhYmIudXBwZXJCb3VuZC55ICsgcl95O1xuICAgIG5vZGUudXNlckRhdGEgPSB1c2VyRGF0YTtcbiAgICBub2RlLmhlaWdodCA9IDA7XG4gICAgbm9kZS5tb3ZlZCA9IHRydWU7XG5cbiAgICB0aGlzLkluc2VydExlYWYobm9kZSk7XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHB1YmxpYyBEZXN0cm95UHJveHkobm9kZTogYjJUcmVlTm9kZTxUPik6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChub2RlLklzTGVhZigpKTtcblxuICAgIHRoaXMuUmVtb3ZlTGVhZihub2RlKTtcbiAgICB0aGlzLkZyZWVOb2RlKG5vZGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgTW92ZVByb3h5X3NfZmF0QUFCQiA9IG5ldyBiMkFBQkIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgTW92ZVByb3h5X3NfaHVnZUFBQkIgPSBuZXcgYjJBQUJCKCk7XG4gIHB1YmxpYyBNb3ZlUHJveHkobm9kZTogYjJUcmVlTm9kZTxUPiwgYWFiYjogYjJBQUJCLCBkaXNwbGFjZW1lbnQ6IGIyVmVjMik6IGJvb2xlYW4ge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChub2RlLklzTGVhZigpKTtcblxuICAgIC8vIEV4dGVuZCBBQUJCXG4gICAgY29uc3QgZmF0QUFCQjogYjJBQUJCID0gYjJEeW5hbWljVHJlZS5Nb3ZlUHJveHlfc19mYXRBQUJCO1xuICAgIGNvbnN0IHJfeDogbnVtYmVyID0gYjJfYWFiYkV4dGVuc2lvbjtcbiAgICBjb25zdCByX3k6IG51bWJlciA9IGIyX2FhYmJFeHRlbnNpb247XG4gICAgZmF0QUFCQi5sb3dlckJvdW5kLnggPSBhYWJiLmxvd2VyQm91bmQueCAtIHJfeDtcbiAgICBmYXRBQUJCLmxvd2VyQm91bmQueSA9IGFhYmIubG93ZXJCb3VuZC55IC0gcl95O1xuICAgIGZhdEFBQkIudXBwZXJCb3VuZC54ID0gYWFiYi51cHBlckJvdW5kLnggKyByX3g7XG4gICAgZmF0QUFCQi51cHBlckJvdW5kLnkgPSBhYWJiLnVwcGVyQm91bmQueSArIHJfeTtcblxuICAgIC8vIFByZWRpY3QgQUFCQiBtb3ZlbWVudFxuICAgIGNvbnN0IGRfeDogbnVtYmVyID0gYjJfYWFiYk11bHRpcGxpZXIgKiBkaXNwbGFjZW1lbnQueDtcbiAgICBjb25zdCBkX3k6IG51bWJlciA9IGIyX2FhYmJNdWx0aXBsaWVyICogZGlzcGxhY2VtZW50Lnk7XG5cbiAgICBpZiAoZF94IDwgMC4wKSB7XG4gICAgICBmYXRBQUJCLmxvd2VyQm91bmQueCArPSBkX3g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhdEFBQkIudXBwZXJCb3VuZC54ICs9IGRfeDtcbiAgICB9XG5cbiAgICBpZiAoZF95IDwgMC4wKSB7XG4gICAgICBmYXRBQUJCLmxvd2VyQm91bmQueSArPSBkX3k7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhdEFBQkIudXBwZXJCb3VuZC55ICs9IGRfeTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmVlQUFCQiA9IG5vZGUuYWFiYjsgLy8gbV9ub2Rlc1twcm94eUlkXS5hYWJiO1xuICAgIGlmICh0cmVlQUFCQi5Db250YWlucyhhYWJiKSkge1xuICAgICAgLy8gVGhlIHRyZWUgQUFCQiBzdGlsbCBjb250YWlucyB0aGUgb2JqZWN0LCBidXQgaXQgbWlnaHQgYmUgdG9vIGxhcmdlLlxuICAgICAgLy8gUGVyaGFwcyB0aGUgb2JqZWN0IHdhcyBtb3ZpbmcgZmFzdCBidXQgaGFzIHNpbmNlIGdvbmUgdG8gc2xlZXAuXG4gICAgICAvLyBUaGUgaHVnZSBBQUJCIGlzIGxhcmdlciB0aGFuIHRoZSBuZXcgZmF0IEFBQkIuXG4gICAgICBjb25zdCBodWdlQUFCQjogYjJBQUJCID0gYjJEeW5hbWljVHJlZS5Nb3ZlUHJveHlfc19odWdlQUFCQjtcbiAgICAgIGh1Z2VBQUJCLmxvd2VyQm91bmQueCA9IGZhdEFBQkIubG93ZXJCb3VuZC54IC0gNC4wICogcl94O1xuICAgICAgaHVnZUFBQkIubG93ZXJCb3VuZC55ID0gZmF0QUFCQi5sb3dlckJvdW5kLnkgLSA0LjAgKiByX3k7XG4gICAgICBodWdlQUFCQi51cHBlckJvdW5kLnggPSBmYXRBQUJCLnVwcGVyQm91bmQueCArIDQuMCAqIHJfeDtcbiAgICAgIGh1Z2VBQUJCLnVwcGVyQm91bmQueSA9IGZhdEFBQkIudXBwZXJCb3VuZC55ICsgNC4wICogcl95O1xuXG4gICAgICBpZiAoaHVnZUFBQkIuQ29udGFpbnModHJlZUFBQkIpKSB7XG4gICAgICAgIC8vIFRoZSB0cmVlIEFBQkIgY29udGFpbnMgdGhlIG9iamVjdCBBQUJCIGFuZCB0aGUgdHJlZSBBQUJCIGlzXG4gICAgICAgIC8vIG5vdCB0b28gbGFyZ2UuIE5vIHRyZWUgdXBkYXRlIG5lZWRlZC5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UgdGhlIHRyZWUgQUFCQiBpcyBodWdlIGFuZCBuZWVkcyB0byBiZSBzaHJ1bmtcbiAgICB9XG5cbiAgICB0aGlzLlJlbW92ZUxlYWYobm9kZSk7XG5cbiAgICBub2RlLmFhYmIuQ29weShmYXRBQUJCKTsgLy8gbV9ub2Rlc1twcm94eUlkXS5hYWJiID0gZmF0QUFCQjtcblxuICAgIHRoaXMuSW5zZXJ0TGVhZihub2RlKTtcblxuICAgIG5vZGUubW92ZWQgPSB0cnVlO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgSW5zZXJ0TGVhZihsZWFmOiBiMlRyZWVOb2RlPFQ+KTogdm9pZCB7XG4gICAgKyt0aGlzLm1faW5zZXJ0aW9uQ291bnQ7XG5cbiAgICBpZiAodGhpcy5tX3Jvb3QgPT09IG51bGwpIHtcbiAgICAgIHRoaXMubV9yb290ID0gbGVhZjtcbiAgICAgIHRoaXMubV9yb290LnBhcmVudCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgYmVzdCBzaWJsaW5nIGZvciB0aGlzIG5vZGVcbiAgICBjb25zdCBsZWFmQUFCQjogYjJBQUJCID0gbGVhZi5hYWJiO1xuICAgIGxldCBzaWJsaW5nOiBiMlRyZWVOb2RlPFQ+ID0gdGhpcy5tX3Jvb3Q7XG4gICAgd2hpbGUgKCFzaWJsaW5nLklzTGVhZigpKSB7XG4gICAgICBjb25zdCBjaGlsZDE6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkoc2libGluZy5jaGlsZDEpO1xuICAgICAgY29uc3QgY2hpbGQyOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KHNpYmxpbmcuY2hpbGQyKTtcblxuICAgICAgY29uc3QgYXJlYTogbnVtYmVyID0gc2libGluZy5hYWJiLkdldFBlcmltZXRlcigpO1xuXG4gICAgICBjb25zdCBjb21iaW5lZEFBQkI6IGIyQUFCQiA9IGIyRHluYW1pY1RyZWUuc19jb21iaW5lZEFBQkI7XG4gICAgICBjb21iaW5lZEFBQkIuQ29tYmluZTIoc2libGluZy5hYWJiLCBsZWFmQUFCQik7XG4gICAgICBjb25zdCBjb21iaW5lZEFyZWE6IG51bWJlciA9IGNvbWJpbmVkQUFCQi5HZXRQZXJpbWV0ZXIoKTtcblxuICAgICAgLy8gQ29zdCBvZiBjcmVhdGluZyBhIG5ldyBwYXJlbnQgZm9yIHRoaXMgbm9kZSBhbmQgdGhlIG5ldyBsZWFmXG4gICAgICBjb25zdCBjb3N0OiBudW1iZXIgPSAyICogY29tYmluZWRBcmVhO1xuXG4gICAgICAvLyBNaW5pbXVtIGNvc3Qgb2YgcHVzaGluZyB0aGUgbGVhZiBmdXJ0aGVyIGRvd24gdGhlIHRyZWVcbiAgICAgIGNvbnN0IGluaGVyaXRhbmNlQ29zdDogbnVtYmVyID0gMiAqIChjb21iaW5lZEFyZWEgLSBhcmVhKTtcblxuICAgICAgLy8gQ29zdCBvZiBkZXNjZW5kaW5nIGludG8gY2hpbGQxXG4gICAgICBsZXQgY29zdDE6IG51bWJlcjtcbiAgICAgIGNvbnN0IGFhYmI6IGIyQUFCQiA9IGIyRHluYW1pY1RyZWUuc19hYWJiO1xuICAgICAgbGV0IG9sZEFyZWE6IG51bWJlcjtcbiAgICAgIGxldCBuZXdBcmVhOiBudW1iZXI7XG4gICAgICBpZiAoY2hpbGQxLklzTGVhZigpKSB7XG4gICAgICAgIGFhYmIuQ29tYmluZTIobGVhZkFBQkIsIGNoaWxkMS5hYWJiKTtcbiAgICAgICAgY29zdDEgPSBhYWJiLkdldFBlcmltZXRlcigpICsgaW5oZXJpdGFuY2VDb3N0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWFiYi5Db21iaW5lMihsZWFmQUFCQiwgY2hpbGQxLmFhYmIpO1xuICAgICAgICBvbGRBcmVhID0gY2hpbGQxLmFhYmIuR2V0UGVyaW1ldGVyKCk7XG4gICAgICAgIG5ld0FyZWEgPSBhYWJiLkdldFBlcmltZXRlcigpO1xuICAgICAgICBjb3N0MSA9IChuZXdBcmVhIC0gb2xkQXJlYSkgKyBpbmhlcml0YW5jZUNvc3Q7XG4gICAgICB9XG5cbiAgICAgIC8vIENvc3Qgb2YgZGVzY2VuZGluZyBpbnRvIGNoaWxkMlxuICAgICAgbGV0IGNvc3QyOiBudW1iZXI7XG4gICAgICBpZiAoY2hpbGQyLklzTGVhZigpKSB7XG4gICAgICAgIGFhYmIuQ29tYmluZTIobGVhZkFBQkIsIGNoaWxkMi5hYWJiKTtcbiAgICAgICAgY29zdDIgPSBhYWJiLkdldFBlcmltZXRlcigpICsgaW5oZXJpdGFuY2VDb3N0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWFiYi5Db21iaW5lMihsZWFmQUFCQiwgY2hpbGQyLmFhYmIpO1xuICAgICAgICBvbGRBcmVhID0gY2hpbGQyLmFhYmIuR2V0UGVyaW1ldGVyKCk7XG4gICAgICAgIG5ld0FyZWEgPSBhYWJiLkdldFBlcmltZXRlcigpO1xuICAgICAgICBjb3N0MiA9IG5ld0FyZWEgLSBvbGRBcmVhICsgaW5oZXJpdGFuY2VDb3N0O1xuICAgICAgfVxuXG4gICAgICAvLyBEZXNjZW5kIGFjY29yZGluZyB0byB0aGUgbWluaW11bSBjb3N0LlxuICAgICAgaWYgKGNvc3QgPCBjb3N0MSAmJiBjb3N0IDwgY29zdDIpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIERlc2NlbmRcbiAgICAgIGlmIChjb3N0MSA8IGNvc3QyKSB7XG4gICAgICAgIHNpYmxpbmcgPSBjaGlsZDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaWJsaW5nID0gY2hpbGQyO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIHBhcmVudCBmb3IgdGhlIHNpYmxpbmdzLlxuICAgIGNvbnN0IG9sZFBhcmVudDogYjJUcmVlTm9kZTxUPiB8IG51bGwgPSBzaWJsaW5nLnBhcmVudDtcbiAgICBjb25zdCBuZXdQYXJlbnQ6IGIyVHJlZU5vZGU8VD4gPSB0aGlzLkFsbG9jYXRlTm9kZSgpO1xuICAgIG5ld1BhcmVudC5wYXJlbnQgPSBvbGRQYXJlbnQ7XG4gICAgbmV3UGFyZW50LmFhYmIuQ29tYmluZTIobGVhZkFBQkIsIHNpYmxpbmcuYWFiYik7XG4gICAgbmV3UGFyZW50LmhlaWdodCA9IHNpYmxpbmcuaGVpZ2h0ICsgMTtcblxuICAgIGlmIChvbGRQYXJlbnQgIT09IG51bGwpIHtcbiAgICAgIC8vIFRoZSBzaWJsaW5nIHdhcyBub3QgdGhlIHJvb3QuXG4gICAgICBpZiAob2xkUGFyZW50LmNoaWxkMSA9PT0gc2libGluZykge1xuICAgICAgICBvbGRQYXJlbnQuY2hpbGQxID0gbmV3UGFyZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2xkUGFyZW50LmNoaWxkMiA9IG5ld1BhcmVudDtcbiAgICAgIH1cblxuICAgICAgbmV3UGFyZW50LmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICBuZXdQYXJlbnQuY2hpbGQyID0gbGVhZjtcbiAgICAgIHNpYmxpbmcucGFyZW50ID0gbmV3UGFyZW50O1xuICAgICAgbGVhZi5wYXJlbnQgPSBuZXdQYXJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZSBzaWJsaW5nIHdhcyB0aGUgcm9vdC5cbiAgICAgIG5ld1BhcmVudC5jaGlsZDEgPSBzaWJsaW5nO1xuICAgICAgbmV3UGFyZW50LmNoaWxkMiA9IGxlYWY7XG4gICAgICBzaWJsaW5nLnBhcmVudCA9IG5ld1BhcmVudDtcbiAgICAgIGxlYWYucGFyZW50ID0gbmV3UGFyZW50O1xuICAgICAgdGhpcy5tX3Jvb3QgPSBuZXdQYXJlbnQ7XG4gICAgfVxuXG4gICAgLy8gV2FsayBiYWNrIHVwIHRoZSB0cmVlIGZpeGluZyBoZWlnaHRzIGFuZCBBQUJCc1xuICAgIGxldCBub2RlOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IGxlYWYucGFyZW50O1xuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBub2RlID0gdGhpcy5CYWxhbmNlKG5vZGUpO1xuXG4gICAgICBjb25zdCBjaGlsZDE6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkobm9kZS5jaGlsZDEpO1xuICAgICAgY29uc3QgY2hpbGQyOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KG5vZGUuY2hpbGQyKTtcblxuICAgICAgbm9kZS5oZWlnaHQgPSAxICsgYjJNYXgoY2hpbGQxLmhlaWdodCwgY2hpbGQyLmhlaWdodCk7XG4gICAgICBub2RlLmFhYmIuQ29tYmluZTIoY2hpbGQxLmFhYmIsIGNoaWxkMi5hYWJiKTtcblxuICAgICAgbm9kZSA9IG5vZGUucGFyZW50O1xuICAgIH1cblxuICAgIC8vIHRoaXMuVmFsaWRhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBSZW1vdmVMZWFmKGxlYWY6IGIyVHJlZU5vZGU8VD4pOiB2b2lkIHtcbiAgICBpZiAobGVhZiA9PT0gdGhpcy5tX3Jvb3QpIHtcbiAgICAgIHRoaXMubV9yb290ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnQ6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkobGVhZi5wYXJlbnQpO1xuICAgIGNvbnN0IGdyYW5kUGFyZW50OiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHBhcmVudCAmJiBwYXJlbnQucGFyZW50O1xuICAgIGNvbnN0IHNpYmxpbmc6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkocGFyZW50LmNoaWxkMSA9PT0gbGVhZiA/IHBhcmVudC5jaGlsZDIgOiBwYXJlbnQuY2hpbGQxKTtcblxuICAgIGlmIChncmFuZFBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgLy8gRGVzdHJveSBwYXJlbnQgYW5kIGNvbm5lY3Qgc2libGluZyB0byBncmFuZFBhcmVudC5cbiAgICAgIGlmIChncmFuZFBhcmVudC5jaGlsZDEgPT09IHBhcmVudCkge1xuICAgICAgICBncmFuZFBhcmVudC5jaGlsZDEgPSBzaWJsaW5nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ3JhbmRQYXJlbnQuY2hpbGQyID0gc2libGluZztcbiAgICAgIH1cbiAgICAgIHNpYmxpbmcucGFyZW50ID0gZ3JhbmRQYXJlbnQ7XG4gICAgICB0aGlzLkZyZWVOb2RlKHBhcmVudCk7XG5cbiAgICAgIC8vIEFkanVzdCBhbmNlc3RvciBib3VuZHMuXG4gICAgICBsZXQgaW5kZXg6IGIyVHJlZU5vZGU8VD4gfCBudWxsID0gZ3JhbmRQYXJlbnQ7XG4gICAgICB3aGlsZSAoaW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgaW5kZXggPSB0aGlzLkJhbGFuY2UoaW5kZXgpO1xuXG4gICAgICAgIGNvbnN0IGNoaWxkMTogYjJUcmVlTm9kZTxUPiA9IHZlcmlmeShpbmRleC5jaGlsZDEpO1xuICAgICAgICBjb25zdCBjaGlsZDI6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkoaW5kZXguY2hpbGQyKTtcblxuICAgICAgICBpbmRleC5hYWJiLkNvbWJpbmUyKGNoaWxkMS5hYWJiLCBjaGlsZDIuYWFiYik7XG4gICAgICAgIGluZGV4LmhlaWdodCA9IDEgKyBiMk1heChjaGlsZDEuaGVpZ2h0LCBjaGlsZDIuaGVpZ2h0KTtcblxuICAgICAgICBpbmRleCA9IGluZGV4LnBhcmVudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3Jvb3QgPSBzaWJsaW5nO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBudWxsO1xuICAgICAgdGhpcy5GcmVlTm9kZShwYXJlbnQpO1xuICAgIH1cblxuICAgIC8vIHRoaXMuVmFsaWRhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBCYWxhbmNlKEE6IGIyVHJlZU5vZGU8VD4pOiBiMlRyZWVOb2RlPFQ+IHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoQSAhPT0gbnVsbCk7XG5cbiAgICBpZiAoQS5Jc0xlYWYoKSB8fCBBLmhlaWdodCA8IDIpIHtcbiAgICAgIHJldHVybiBBO1xuICAgIH1cblxuICAgIGNvbnN0IEI6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkoQS5jaGlsZDEpO1xuICAgIGNvbnN0IEM6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkoQS5jaGlsZDIpO1xuXG4gICAgY29uc3QgYmFsYW5jZTogbnVtYmVyID0gQy5oZWlnaHQgLSBCLmhlaWdodDtcblxuICAgIC8vIFJvdGF0ZSBDIHVwXG4gICAgaWYgKGJhbGFuY2UgPiAxKSB7XG4gICAgICBjb25zdCBGOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KEMuY2hpbGQxKTtcbiAgICAgIGNvbnN0IEc6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkoQy5jaGlsZDIpO1xuXG4gICAgICAvLyBTd2FwIEEgYW5kIENcbiAgICAgIEMuY2hpbGQxID0gQTtcbiAgICAgIEMucGFyZW50ID0gQS5wYXJlbnQ7XG4gICAgICBBLnBhcmVudCA9IEM7XG5cbiAgICAgIC8vIEEncyBvbGQgcGFyZW50IHNob3VsZCBwb2ludCB0byBDXG4gICAgICBpZiAoQy5wYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKEMucGFyZW50LmNoaWxkMSA9PT0gQSkge1xuICAgICAgICAgIEMucGFyZW50LmNoaWxkMSA9IEM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KEMucGFyZW50LmNoaWxkMiA9PT0gQSk7XG4gICAgICAgICAgQy5wYXJlbnQuY2hpbGQyID0gQztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX3Jvb3QgPSBDO1xuICAgICAgfVxuXG4gICAgICAvLyBSb3RhdGVcbiAgICAgIGlmIChGLmhlaWdodCA+IEcuaGVpZ2h0KSB7XG4gICAgICAgIEMuY2hpbGQyID0gRjtcbiAgICAgICAgQS5jaGlsZDIgPSBHO1xuICAgICAgICBHLnBhcmVudCA9IEE7XG4gICAgICAgIEEuYWFiYi5Db21iaW5lMihCLmFhYmIsIEcuYWFiYik7XG4gICAgICAgIEMuYWFiYi5Db21iaW5lMihBLmFhYmIsIEYuYWFiYik7XG5cbiAgICAgICAgQS5oZWlnaHQgPSAxICsgYjJNYXgoQi5oZWlnaHQsIEcuaGVpZ2h0KTtcbiAgICAgICAgQy5oZWlnaHQgPSAxICsgYjJNYXgoQS5oZWlnaHQsIEYuaGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEMuY2hpbGQyID0gRztcbiAgICAgICAgQS5jaGlsZDIgPSBGO1xuICAgICAgICBGLnBhcmVudCA9IEE7XG4gICAgICAgIEEuYWFiYi5Db21iaW5lMihCLmFhYmIsIEYuYWFiYik7XG4gICAgICAgIEMuYWFiYi5Db21iaW5lMihBLmFhYmIsIEcuYWFiYik7XG5cbiAgICAgICAgQS5oZWlnaHQgPSAxICsgYjJNYXgoQi5oZWlnaHQsIEYuaGVpZ2h0KTtcbiAgICAgICAgQy5oZWlnaHQgPSAxICsgYjJNYXgoQS5oZWlnaHQsIEcuaGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEM7XG4gICAgfVxuXG4gICAgLy8gUm90YXRlIEIgdXBcbiAgICBpZiAoYmFsYW5jZSA8IC0xKSB7XG4gICAgICBjb25zdCBEOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KEIuY2hpbGQxKTtcbiAgICAgIGNvbnN0IEU6IGIyVHJlZU5vZGU8VD4gPSB2ZXJpZnkoQi5jaGlsZDIpO1xuXG4gICAgICAvLyBTd2FwIEEgYW5kIEJcbiAgICAgIEIuY2hpbGQxID0gQTtcbiAgICAgIEIucGFyZW50ID0gQS5wYXJlbnQ7XG4gICAgICBBLnBhcmVudCA9IEI7XG5cbiAgICAgIC8vIEEncyBvbGQgcGFyZW50IHNob3VsZCBwb2ludCB0byBCXG4gICAgICBpZiAoQi5wYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKEIucGFyZW50LmNoaWxkMSA9PT0gQSkge1xuICAgICAgICAgIEIucGFyZW50LmNoaWxkMSA9IEI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KEIucGFyZW50LmNoaWxkMiA9PT0gQSk7XG4gICAgICAgICAgQi5wYXJlbnQuY2hpbGQyID0gQjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX3Jvb3QgPSBCO1xuICAgICAgfVxuXG4gICAgICAvLyBSb3RhdGVcbiAgICAgIGlmIChELmhlaWdodCA+IEUuaGVpZ2h0KSB7XG4gICAgICAgIEIuY2hpbGQyID0gRDtcbiAgICAgICAgQS5jaGlsZDEgPSBFO1xuICAgICAgICBFLnBhcmVudCA9IEE7XG4gICAgICAgIEEuYWFiYi5Db21iaW5lMihDLmFhYmIsIEUuYWFiYik7XG4gICAgICAgIEIuYWFiYi5Db21iaW5lMihBLmFhYmIsIEQuYWFiYik7XG5cbiAgICAgICAgQS5oZWlnaHQgPSAxICsgYjJNYXgoQy5oZWlnaHQsIEUuaGVpZ2h0KTtcbiAgICAgICAgQi5oZWlnaHQgPSAxICsgYjJNYXgoQS5oZWlnaHQsIEQuaGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEIuY2hpbGQyID0gRTtcbiAgICAgICAgQS5jaGlsZDEgPSBEO1xuICAgICAgICBELnBhcmVudCA9IEE7XG4gICAgICAgIEEuYWFiYi5Db21iaW5lMihDLmFhYmIsIEQuYWFiYik7XG4gICAgICAgIEIuYWFiYi5Db21iaW5lMihBLmFhYmIsIEUuYWFiYik7XG5cbiAgICAgICAgQS5oZWlnaHQgPSAxICsgYjJNYXgoQy5oZWlnaHQsIEQuaGVpZ2h0KTtcbiAgICAgICAgQi5oZWlnaHQgPSAxICsgYjJNYXgoQS5oZWlnaHQsIEUuaGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEI7XG4gICAgfVxuXG4gICAgcmV0dXJuIEE7XG4gIH1cblxuICBwdWJsaWMgR2V0SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMubV9yb290ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tX3Jvb3QuaGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgR2V0QXJlYU5vZGU8VD4obm9kZTogYjJUcmVlTm9kZTxUPiB8IG51bGwpOiBudW1iZXIge1xuICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBpZiAobm9kZS5Jc0xlYWYoKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IGFyZWE6IG51bWJlciA9IG5vZGUuYWFiYi5HZXRQZXJpbWV0ZXIoKTtcbiAgICBhcmVhICs9IGIyRHluYW1pY1RyZWUuR2V0QXJlYU5vZGUobm9kZS5jaGlsZDEpO1xuICAgIGFyZWEgKz0gYjJEeW5hbWljVHJlZS5HZXRBcmVhTm9kZShub2RlLmNoaWxkMik7XG4gICAgcmV0dXJuIGFyZWE7XG4gIH1cblxuICBwdWJsaWMgR2V0QXJlYVJhdGlvKCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMubV9yb290ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBjb25zdCByb290OiBiMlRyZWVOb2RlPFQ+ID0gdGhpcy5tX3Jvb3Q7XG4gICAgY29uc3Qgcm9vdEFyZWE6IG51bWJlciA9IHJvb3QuYWFiYi5HZXRQZXJpbWV0ZXIoKTtcblxuICAgIGNvbnN0IHRvdGFsQXJlYTogbnVtYmVyID0gYjJEeW5hbWljVHJlZS5HZXRBcmVhTm9kZSh0aGlzLm1fcm9vdCk7XG5cbiAgICAvKlxuICAgIGZsb2F0MzIgdG90YWxBcmVhID0gMC4wO1xuICAgIGZvciAoaW50MzIgaSA9IDA7IGkgPCBtX25vZGVDYXBhY2l0eTsgKytpKSB7XG4gICAgICBjb25zdCBiMlRyZWVOb2RlPFQ+KiBub2RlID0gbV9ub2RlcyArIGk7XG4gICAgICBpZiAobm9kZS5oZWlnaHQgPCAwKSB7XG4gICAgICAgIC8vIEZyZWUgbm9kZSBpbiBwb29sXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB0b3RhbEFyZWEgKz0gbm9kZS5hYWJiLkdldFBlcmltZXRlcigpO1xuICAgIH1cbiAgICAqL1xuXG4gICAgcmV0dXJuIHRvdGFsQXJlYSAvIHJvb3RBcmVhO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBDb21wdXRlSGVpZ2h0Tm9kZTxUPihub2RlOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCk6IG51bWJlciB7XG4gICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmIChub2RlLklzTGVhZigpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBjb25zdCBoZWlnaHQxOiBudW1iZXIgPSBiMkR5bmFtaWNUcmVlLkNvbXB1dGVIZWlnaHROb2RlKG5vZGUuY2hpbGQxKTtcbiAgICBjb25zdCBoZWlnaHQyOiBudW1iZXIgPSBiMkR5bmFtaWNUcmVlLkNvbXB1dGVIZWlnaHROb2RlKG5vZGUuY2hpbGQyKTtcbiAgICByZXR1cm4gMSArIGIyTWF4KGhlaWdodDEsIGhlaWdodDIpO1xuICB9XG5cbiAgcHVibGljIENvbXB1dGVIZWlnaHQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IGIyRHluYW1pY1RyZWUuQ29tcHV0ZUhlaWdodE5vZGUodGhpcy5tX3Jvb3QpO1xuICAgIHJldHVybiBoZWlnaHQ7XG4gIH1cblxuICBwdWJsaWMgVmFsaWRhdGVTdHJ1Y3R1cmUobm9kZTogYjJUcmVlTm9kZTxUPiB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub2RlID09PSB0aGlzLm1fcm9vdCkge1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KG5vZGUucGFyZW50ID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBpZiAobm9kZS5Jc0xlYWYoKSkge1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KG5vZGUuY2hpbGQxID09PSBudWxsKTtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChub2RlLmNoaWxkMiA9PT0gbnVsbCk7XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQobm9kZS5oZWlnaHQgPT09IDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNoaWxkMTogYjJUcmVlTm9kZTxUPiA9IHZlcmlmeShub2RlLmNoaWxkMSk7XG4gICAgY29uc3QgY2hpbGQyOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KG5vZGUuY2hpbGQyKTtcblxuICAgIC8vIERFQlVHOiBiMkFzc2VydChjaGlsZDEucGFyZW50ID09PSBpbmRleCk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGNoaWxkMi5wYXJlbnQgPT09IGluZGV4KTtcblxuICAgIHRoaXMuVmFsaWRhdGVTdHJ1Y3R1cmUoY2hpbGQxKTtcbiAgICB0aGlzLlZhbGlkYXRlU3RydWN0dXJlKGNoaWxkMik7XG4gIH1cblxuICBwdWJsaWMgVmFsaWRhdGVNZXRyaWNzKG5vZGU6IGIyVHJlZU5vZGU8VD4gfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9kZS5Jc0xlYWYoKSkge1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KG5vZGUuY2hpbGQxID09PSBudWxsKTtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChub2RlLmNoaWxkMiA9PT0gbnVsbCk7XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQobm9kZS5oZWlnaHQgPT09IDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNoaWxkMTogYjJUcmVlTm9kZTxUPiA9IHZlcmlmeShub2RlLmNoaWxkMSk7XG4gICAgY29uc3QgY2hpbGQyOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KG5vZGUuY2hpbGQyKTtcblxuICAgIC8vIERFQlVHOiBjb25zdCBoZWlnaHQxOiBudW1iZXIgPSBjaGlsZDEuaGVpZ2h0O1xuICAgIC8vIERFQlVHOiBjb25zdCBoZWlnaHQyOiBudW1iZXIgPSBjaGlsZDIuaGVpZ2h0O1xuICAgIC8vIERFQlVHOiBjb25zdCBoZWlnaHQ6IG51bWJlciA9IDEgKyBiMk1heChoZWlnaHQxLCBoZWlnaHQyKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQobm9kZS5oZWlnaHQgPT09IGhlaWdodCk7XG5cbiAgICBjb25zdCBhYWJiOiBiMkFBQkIgPSBiMkR5bmFtaWNUcmVlLnNfYWFiYjtcbiAgICBhYWJiLkNvbWJpbmUyKGNoaWxkMS5hYWJiLCBjaGlsZDIuYWFiYik7XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYWFiYi5sb3dlckJvdW5kID09PSBub2RlLmFhYmIubG93ZXJCb3VuZCk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGFhYmIudXBwZXJCb3VuZCA9PT0gbm9kZS5hYWJiLnVwcGVyQm91bmQpO1xuXG4gICAgdGhpcy5WYWxpZGF0ZU1ldHJpY3MoY2hpbGQxKTtcbiAgICB0aGlzLlZhbGlkYXRlTWV0cmljcyhjaGlsZDIpO1xuICB9XG5cbiAgcHVibGljIFZhbGlkYXRlKCk6IHZvaWQge1xuICAgIC8vIERFQlVHOiB0aGlzLlZhbGlkYXRlU3RydWN0dXJlKHRoaXMubV9yb290KTtcbiAgICAvLyBERUJVRzogdGhpcy5WYWxpZGF0ZU1ldHJpY3ModGhpcy5tX3Jvb3QpO1xuXG4gICAgLy8gbGV0IGZyZWVDb3VudDogbnVtYmVyID0gMDtcbiAgICAvLyBsZXQgZnJlZUluZGV4OiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IHRoaXMubV9mcmVlTGlzdDtcbiAgICAvLyB3aGlsZSAoZnJlZUluZGV4ICE9PSBudWxsKSB7XG4gICAgLy8gICBmcmVlSW5kZXggPSBmcmVlSW5kZXgucGFyZW50OyAvLyBmcmVlSW5kZXggPSBmcmVlSW5kZXgubmV4dDtcbiAgICAvLyAgICsrZnJlZUNvdW50O1xuICAgIC8vIH1cblxuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLkdldEhlaWdodCgpID09PSB0aGlzLkNvbXB1dGVIZWlnaHQoKSk7XG5cbiAgICAvLyBiMkFzc2VydCh0aGlzLm1fbm9kZUNvdW50ICsgZnJlZUNvdW50ID09PSB0aGlzLm1fbm9kZUNhcGFjaXR5KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIEdldE1heEJhbGFuY2VOb2RlPFQ+KG5vZGU6IGIyVHJlZU5vZGU8VD4gfCBudWxsLCBtYXhCYWxhbmNlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbWF4QmFsYW5jZTtcbiAgICB9XG5cbiAgICBpZiAobm9kZS5oZWlnaHQgPD0gMSkge1xuICAgICAgcmV0dXJuIG1heEJhbGFuY2U7XG4gICAgfVxuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KCFub2RlLklzTGVhZigpKTtcblxuICAgIGNvbnN0IGNoaWxkMTogYjJUcmVlTm9kZTxUPiA9IHZlcmlmeShub2RlLmNoaWxkMSk7XG4gICAgY29uc3QgY2hpbGQyOiBiMlRyZWVOb2RlPFQ+ID0gdmVyaWZ5KG5vZGUuY2hpbGQyKTtcbiAgICBjb25zdCBiYWxhbmNlOiBudW1iZXIgPSBiMkFicyhjaGlsZDIuaGVpZ2h0IC0gY2hpbGQxLmhlaWdodCk7XG4gICAgcmV0dXJuIGIyTWF4KG1heEJhbGFuY2UsIGJhbGFuY2UpO1xuICB9XG5cbiAgcHVibGljIEdldE1heEJhbGFuY2UoKTogbnVtYmVyIHtcbiAgICBjb25zdCBtYXhCYWxhbmNlOiBudW1iZXIgPSBiMkR5bmFtaWNUcmVlLkdldE1heEJhbGFuY2VOb2RlKHRoaXMubV9yb290LCAwKTtcblxuICAgIC8qXG4gICAgaW50MzIgbWF4QmFsYW5jZSA9IDA7XG4gICAgZm9yIChpbnQzMiBpID0gMDsgaSA8IG1fbm9kZUNhcGFjaXR5OyArK2kpIHtcbiAgICAgIGNvbnN0IGIyVHJlZU5vZGU8VD4qIG5vZGUgPSBtX25vZGVzICsgaTtcbiAgICAgIGlmIChub2RlLmhlaWdodCA8PSAxKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBiMkFzc2VydCghbm9kZS5Jc0xlYWYoKSk7XG5cbiAgICAgIGludDMyIGNoaWxkMSA9IG5vZGUuY2hpbGQxO1xuICAgICAgaW50MzIgY2hpbGQyID0gbm9kZS5jaGlsZDI7XG4gICAgICBpbnQzMiBiYWxhbmNlID0gYjJBYnMobV9ub2Rlc1tjaGlsZDJdLmhlaWdodCAtIG1fbm9kZXNbY2hpbGQxXS5oZWlnaHQpO1xuICAgICAgbWF4QmFsYW5jZSA9IGIyTWF4KG1heEJhbGFuY2UsIGJhbGFuY2UpO1xuICAgIH1cbiAgICAqL1xuXG4gICAgcmV0dXJuIG1heEJhbGFuY2U7XG4gIH1cblxuICBwdWJsaWMgUmVidWlsZEJvdHRvbVVwKCk6IHZvaWQge1xuICAgIC8qXG4gICAgaW50MzIqIG5vZGVzID0gKGludDMyKiliMkFsbG9jKG1fbm9kZUNvdW50ICogc2l6ZW9mKGludDMyKSk7XG4gICAgaW50MzIgY291bnQgPSAwO1xuXG4gICAgLy8gQnVpbGQgYXJyYXkgb2YgbGVhdmVzLiBGcmVlIHRoZSByZXN0LlxuICAgIGZvciAoaW50MzIgaSA9IDA7IGkgPCBtX25vZGVDYXBhY2l0eTsgKytpKSB7XG4gICAgICBpZiAobV9ub2Rlc1tpXS5oZWlnaHQgPCAwKSB7XG4gICAgICAgIC8vIGZyZWUgbm9kZSBpbiBwb29sXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobV9ub2Rlc1tpXS5Jc0xlYWYoKSkge1xuICAgICAgICBtX25vZGVzW2ldLnBhcmVudCA9IGIyX251bGxOb2RlO1xuICAgICAgICBub2Rlc1tjb3VudF0gPSBpO1xuICAgICAgICArK2NvdW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgRnJlZU5vZGUoaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgd2hpbGUgKGNvdW50ID4gMSkge1xuICAgICAgZmxvYXQzMiBtaW5Db3N0ID0gYjJfbWF4RmxvYXQ7XG4gICAgICBpbnQzMiBpTWluID0gLTEsIGpNaW4gPSAtMTtcbiAgICAgIGZvciAoaW50MzIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIGIyQUFCQiBhYWJiaSA9IG1fbm9kZXNbbm9kZXNbaV1dLmFhYmI7XG5cbiAgICAgICAgZm9yIChpbnQzMiBqID0gaSArIDE7IGogPCBjb3VudDsgKytqKSB7XG4gICAgICAgICAgYjJBQUJCIGFhYmJqID0gbV9ub2Rlc1tub2Rlc1tqXV0uYWFiYjtcbiAgICAgICAgICBiMkFBQkIgYjtcbiAgICAgICAgICBiLkNvbWJpbmUoYWFiYmksIGFhYmJqKTtcbiAgICAgICAgICBmbG9hdDMyIGNvc3QgPSBiLkdldFBlcmltZXRlcigpO1xuICAgICAgICAgIGlmIChjb3N0IDwgbWluQ29zdCkge1xuICAgICAgICAgICAgaU1pbiA9IGk7XG4gICAgICAgICAgICBqTWluID0gajtcbiAgICAgICAgICAgIG1pbkNvc3QgPSBjb3N0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbnQzMiBpbmRleDEgPSBub2Rlc1tpTWluXTtcbiAgICAgIGludDMyIGluZGV4MiA9IG5vZGVzW2pNaW5dO1xuICAgICAgYjJUcmVlTm9kZTxUPiogY2hpbGQxID0gbV9ub2RlcyArIGluZGV4MTtcbiAgICAgIGIyVHJlZU5vZGU8VD4qIGNoaWxkMiA9IG1fbm9kZXMgKyBpbmRleDI7XG5cbiAgICAgIGludDMyIHBhcmVudEluZGV4ID0gQWxsb2NhdGVOb2RlKCk7XG4gICAgICBiMlRyZWVOb2RlPFQ+KiBwYXJlbnQgPSBtX25vZGVzICsgcGFyZW50SW5kZXg7XG4gICAgICBwYXJlbnQuY2hpbGQxID0gaW5kZXgxO1xuICAgICAgcGFyZW50LmNoaWxkMiA9IGluZGV4MjtcbiAgICAgIHBhcmVudC5oZWlnaHQgPSAxICsgYjJNYXgoY2hpbGQxLmhlaWdodCwgY2hpbGQyLmhlaWdodCk7XG4gICAgICBwYXJlbnQuYWFiYi5Db21iaW5lKGNoaWxkMS5hYWJiLCBjaGlsZDIuYWFiYik7XG4gICAgICBwYXJlbnQucGFyZW50ID0gYjJfbnVsbE5vZGU7XG5cbiAgICAgIGNoaWxkMS5wYXJlbnQgPSBwYXJlbnRJbmRleDtcbiAgICAgIGNoaWxkMi5wYXJlbnQgPSBwYXJlbnRJbmRleDtcblxuICAgICAgbm9kZXNbak1pbl0gPSBub2Rlc1tjb3VudC0xXTtcbiAgICAgIG5vZGVzW2lNaW5dID0gcGFyZW50SW5kZXg7XG4gICAgICAtLWNvdW50O1xuICAgIH1cblxuICAgIG1fcm9vdCA9IG5vZGVzWzBdO1xuICAgIGIyRnJlZShub2Rlcyk7XG4gICAgKi9cblxuICAgIHRoaXMuVmFsaWRhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIFNoaWZ0T3JpZ2luTm9kZTxUPihub2RlOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCwgbmV3T3JpZ2luOiBYWSk6IHZvaWQge1xuICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vZGUuaGVpZ2h0IDw9IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQoIW5vZGUuSXNMZWFmKCkpO1xuXG4gICAgY29uc3QgY2hpbGQxOiBiMlRyZWVOb2RlPFQ+IHwgbnVsbCA9IG5vZGUuY2hpbGQxO1xuICAgIGNvbnN0IGNoaWxkMjogYjJUcmVlTm9kZTxUPiB8IG51bGwgPSBub2RlLmNoaWxkMjtcbiAgICBiMkR5bmFtaWNUcmVlLlNoaWZ0T3JpZ2luTm9kZShjaGlsZDEsIG5ld09yaWdpbik7XG4gICAgYjJEeW5hbWljVHJlZS5TaGlmdE9yaWdpbk5vZGUoY2hpbGQyLCBuZXdPcmlnaW4pO1xuXG4gICAgbm9kZS5hYWJiLmxvd2VyQm91bmQuU2VsZlN1YihuZXdPcmlnaW4pO1xuICAgIG5vZGUuYWFiYi51cHBlckJvdW5kLlNlbGZTdWIobmV3T3JpZ2luKTtcbiAgfVxuXG4gIHB1YmxpYyBTaGlmdE9yaWdpbihuZXdPcmlnaW46IFhZKTogdm9pZCB7XG5cbiAgICBiMkR5bmFtaWNUcmVlLlNoaWZ0T3JpZ2luTm9kZSh0aGlzLm1fcm9vdCwgbmV3T3JpZ2luKTtcblxuICAgIC8qXG4gICAgLy8gQnVpbGQgYXJyYXkgb2YgbGVhdmVzLiBGcmVlIHRoZSByZXN0LlxuICAgIGZvciAoaW50MzIgaSA9IDA7IGkgPCBtX25vZGVDYXBhY2l0eTsgKytpKSB7XG4gICAgICBtX25vZGVzW2ldLmFhYmIubG93ZXJCb3VuZCAtPSBuZXdPcmlnaW47XG4gICAgICBtX25vZGVzW2ldLmFhYmIudXBwZXJCb3VuZCAtPSBuZXdPcmlnaW47XG4gICAgfVxuICAgICovXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFtQkE7QUFBQTtBQWxCQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQWpCQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBSkE7QUFnQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTlCQTtBQWdDQTtBQUFBO0FBQ0E7QUFNQTtBQUVBO0FBRUE7QUF3eUJBO0FBN3dCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQWVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBY0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBbUJBO0FBQ0E7QUFFQTtBQWlFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFTQTtBQXR5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFpSkE7QUFxREE7QUFDQTtBQTBsQkE7QUFBQTtBQW56QkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_dynamic_tree.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_edge_shape.ts":
/*!**********************************************!*\
  !*** ./src/box2d/collision/b2_edge_shape.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2EdgeShape = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_shape_1 = __webpack_require__(/*! ./b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2EdgeShape = (function (_super) {\n    __extends(b2EdgeShape, _super);\n    function b2EdgeShape() {\n        var _this = _super.call(this, b2_shape_1.b2ShapeType.e_edgeShape, b2_settings_1.b2_polygonRadius) || this;\n        _this.m_vertex1 = new b2_math_1.b2Vec2();\n        _this.m_vertex2 = new b2_math_1.b2Vec2();\n        _this.m_vertex0 = new b2_math_1.b2Vec2();\n        _this.m_vertex3 = new b2_math_1.b2Vec2();\n        _this.m_oneSided = false;\n        return _this;\n    }\n    b2EdgeShape.prototype.SetOneSided = function (v0, v1, v2, v3) {\n        this.m_vertex0.Copy(v0);\n        this.m_vertex1.Copy(v1);\n        this.m_vertex2.Copy(v2);\n        this.m_vertex3.Copy(v3);\n        this.m_oneSided = true;\n        return this;\n    };\n    b2EdgeShape.prototype.SetTwoSided = function (v1, v2) {\n        this.m_vertex1.Copy(v1);\n        this.m_vertex2.Copy(v2);\n        this.m_oneSided = false;\n        return this;\n    };\n    b2EdgeShape.prototype.Clone = function () {\n        return new b2EdgeShape().Copy(this);\n    };\n    b2EdgeShape.prototype.Copy = function (other) {\n        _super.prototype.Copy.call(this, other);\n        this.m_vertex1.Copy(other.m_vertex1);\n        this.m_vertex2.Copy(other.m_vertex2);\n        this.m_vertex0.Copy(other.m_vertex0);\n        this.m_vertex3.Copy(other.m_vertex3);\n        this.m_oneSided = other.m_oneSided;\n        return this;\n    };\n    b2EdgeShape.prototype.GetChildCount = function () {\n        return 1;\n    };\n    b2EdgeShape.prototype.TestPoint = function (xf, p) {\n        return false;\n    };\n    b2EdgeShape.prototype.ComputeDistance = function (xf, p, normal, childIndex) {\n        var v1 = b2_math_1.b2Transform.MulXV(xf, this.m_vertex1, b2EdgeShape.ComputeDistance_s_v1);\n        var v2 = b2_math_1.b2Transform.MulXV(xf, this.m_vertex2, b2EdgeShape.ComputeDistance_s_v2);\n        var d = b2_math_1.b2Vec2.SubVV(p, v1, b2EdgeShape.ComputeDistance_s_d);\n        var s = b2_math_1.b2Vec2.SubVV(v2, v1, b2EdgeShape.ComputeDistance_s_s);\n        var ds = b2_math_1.b2Vec2.DotVV(d, s);\n        if (ds > 0) {\n            var s2 = b2_math_1.b2Vec2.DotVV(s, s);\n            if (ds > s2) {\n                b2_math_1.b2Vec2.SubVV(p, v2, d);\n            }\n            else {\n                d.SelfMulSub(ds / s2, s);\n            }\n        }\n        normal.Copy(d);\n        return normal.Normalize();\n    };\n    b2EdgeShape.prototype.RayCast = function (output, input, xf, childIndex) {\n        var p1 = b2_math_1.b2Transform.MulTXV(xf, input.p1, b2EdgeShape.RayCast_s_p1);\n        var p2 = b2_math_1.b2Transform.MulTXV(xf, input.p2, b2EdgeShape.RayCast_s_p2);\n        var d = b2_math_1.b2Vec2.SubVV(p2, p1, b2EdgeShape.RayCast_s_d);\n        var v1 = this.m_vertex1;\n        var v2 = this.m_vertex2;\n        var e = b2_math_1.b2Vec2.SubVV(v2, v1, b2EdgeShape.RayCast_s_e);\n        var normal = output.normal.Set(e.y, -e.x).SelfNormalize();\n        var numerator = b2_math_1.b2Vec2.DotVV(normal, b2_math_1.b2Vec2.SubVV(v1, p1, b2_math_1.b2Vec2.s_t0));\n        if (this.m_oneSided && numerator > 0.0) {\n            return false;\n        }\n        var denominator = b2_math_1.b2Vec2.DotVV(normal, d);\n        if (denominator === 0) {\n            return false;\n        }\n        var t = numerator / denominator;\n        if (t < 0 || input.maxFraction < t) {\n            return false;\n        }\n        var q = b2_math_1.b2Vec2.AddVMulSV(p1, t, d, b2EdgeShape.RayCast_s_q);\n        var r = b2_math_1.b2Vec2.SubVV(v2, v1, b2EdgeShape.RayCast_s_r);\n        var rr = b2_math_1.b2Vec2.DotVV(r, r);\n        if (rr === 0) {\n            return false;\n        }\n        var s = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(q, v1, b2_math_1.b2Vec2.s_t0), r) / rr;\n        if (s < 0 || 1 < s) {\n            return false;\n        }\n        output.fraction = t;\n        b2_math_1.b2Rot.MulRV(xf.q, output.normal, output.normal);\n        if (numerator > 0) {\n            output.normal.SelfNeg();\n        }\n        return true;\n    };\n    b2EdgeShape.prototype.ComputeAABB = function (aabb, xf, childIndex) {\n        var v1 = b2_math_1.b2Transform.MulXV(xf, this.m_vertex1, b2EdgeShape.ComputeAABB_s_v1);\n        var v2 = b2_math_1.b2Transform.MulXV(xf, this.m_vertex2, b2EdgeShape.ComputeAABB_s_v2);\n        b2_math_1.b2Vec2.MinV(v1, v2, aabb.lowerBound);\n        b2_math_1.b2Vec2.MaxV(v1, v2, aabb.upperBound);\n        var r = this.m_radius;\n        aabb.lowerBound.SelfSubXY(r, r);\n        aabb.upperBound.SelfAddXY(r, r);\n    };\n    b2EdgeShape.prototype.ComputeMass = function (massData, density) {\n        massData.mass = 0;\n        b2_math_1.b2Vec2.MidVV(this.m_vertex1, this.m_vertex2, massData.center);\n        massData.I = 0;\n    };\n    b2EdgeShape.prototype.SetupDistanceProxy = function (proxy, index) {\n        proxy.m_vertices = proxy.m_buffer;\n        proxy.m_vertices[0].Copy(this.m_vertex1);\n        proxy.m_vertices[1].Copy(this.m_vertex2);\n        proxy.m_count = 2;\n        proxy.m_radius = this.m_radius;\n    };\n    b2EdgeShape.prototype.ComputeSubmergedArea = function (normal, offset, xf, c) {\n        c.SetZero();\n        return 0;\n    };\n    b2EdgeShape.prototype.Dump = function (log) {\n        log(\"    const shape: b2EdgeShape = new b2EdgeShape();\\n\");\n        log(\"    shape.m_radius = %.15f;\\n\", this.m_radius);\n        log(\"    shape.m_vertex0.Set(%.15f, %.15f);\\n\", this.m_vertex0.x, this.m_vertex0.y);\n        log(\"    shape.m_vertex1.Set(%.15f, %.15f);\\n\", this.m_vertex1.x, this.m_vertex1.y);\n        log(\"    shape.m_vertex2.Set(%.15f, %.15f);\\n\", this.m_vertex2.x, this.m_vertex2.y);\n        log(\"    shape.m_vertex3.Set(%.15f, %.15f);\\n\", this.m_vertex3.x, this.m_vertex3.y);\n        log(\"    shape.m_oneSided = %s;\\n\", this.m_oneSided);\n    };\n    b2EdgeShape.ComputeDistance_s_v1 = new b2_math_1.b2Vec2();\n    b2EdgeShape.ComputeDistance_s_v2 = new b2_math_1.b2Vec2();\n    b2EdgeShape.ComputeDistance_s_d = new b2_math_1.b2Vec2();\n    b2EdgeShape.ComputeDistance_s_s = new b2_math_1.b2Vec2();\n    b2EdgeShape.RayCast_s_p1 = new b2_math_1.b2Vec2();\n    b2EdgeShape.RayCast_s_p2 = new b2_math_1.b2Vec2();\n    b2EdgeShape.RayCast_s_d = new b2_math_1.b2Vec2();\n    b2EdgeShape.RayCast_s_e = new b2_math_1.b2Vec2();\n    b2EdgeShape.RayCast_s_q = new b2_math_1.b2Vec2();\n    b2EdgeShape.RayCast_s_r = new b2_math_1.b2Vec2();\n    b2EdgeShape.ComputeAABB_s_v1 = new b2_math_1.b2Vec2();\n    b2EdgeShape.ComputeAABB_s_v2 = new b2_math_1.b2Vec2();\n    return b2EdgeShape;\n}(b2_shape_1.b2Shape));\nexports.b2EdgeShape = b2EdgeShape;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2VkZ2Vfc2hhcGUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX2VkZ2Vfc2hhcGUudHM/NzZhNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMCBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfcG9seWdvblJhZGl1cyB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyVmVjMiwgYjJSb3QsIGIyVHJhbnNmb3JtLCBYWSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJBQUJCLCBiMlJheUNhc3RJbnB1dCwgYjJSYXlDYXN0T3V0cHV0IH0gZnJvbSBcIi4vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMkRpc3RhbmNlUHJveHkgfSBmcm9tIFwiLi9iMl9kaXN0YW5jZVwiO1xuaW1wb3J0IHsgYjJNYXNzRGF0YSB9IGZyb20gXCIuL2IyX3NoYXBlXCI7XG5pbXBvcnQgeyBiMlNoYXBlLCBiMlNoYXBlVHlwZSB9IGZyb20gXCIuL2IyX3NoYXBlXCI7XG5cbi8vLyBBIGxpbmUgc2VnbWVudCAoZWRnZSkgc2hhcGUuIFRoZXNlIGNhbiBiZSBjb25uZWN0ZWQgaW4gY2hhaW5zIG9yIGxvb3BzXG4vLy8gdG8gb3RoZXIgZWRnZSBzaGFwZXMuIEVkZ2VzIGNyZWF0ZWQgaW5kZXBlbmRlbnRseSBhcmUgdHdvLXNpZGVkIGFuZCBkb1xuLy8vIG5vIHByb3ZpZGUgc21vb3RoIG1vdmVtZW50IGFjcm9zcyBqdW5jdGlvbnMuXG5leHBvcnQgY2xhc3MgYjJFZGdlU2hhcGUgZXh0ZW5kcyBiMlNoYXBlIHtcbiAgcHVibGljIHJlYWRvbmx5IG1fdmVydGV4MTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV92ZXJ0ZXgyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3ZlcnRleDA6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fdmVydGV4MzogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIC8vLyBVc2VzIG1fdmVydGV4MCBhbmQgbV92ZXJ0ZXgzIHRvIGNyZWF0ZSBzbW9vdGggY29sbGlzaW9uLlxuICBwdWJsaWMgbV9vbmVTaWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKGIyU2hhcGVUeXBlLmVfZWRnZVNoYXBlLCBiMl9wb2x5Z29uUmFkaXVzKTtcbiAgfVxuXG4gIC8vLyBTZXQgdGhpcyBhcyBhIHBhcnQgb2YgYSBzZXF1ZW5jZS4gVmVydGV4IHYwIHByZWNlZGVzIHRoZSBlZGdlIGFuZCB2ZXJ0ZXggdjNcblx0Ly8vIGZvbGxvd3MuIFRoZXNlIGV4dHJhIHZlcnRpY2VzIGFyZSB1c2VkIHRvIHByb3ZpZGUgc21vb3RoIG1vdmVtZW50XG5cdC8vLyBhY3Jvc3MganVuY3Rpb25zLiBUaGlzIGFsc28gbWFrZXMgdGhlIGNvbGxpc2lvbiBvbmUtc2lkZWQuIFRoZSBlZGdlXG5cdC8vLyBub3JtYWwgcG9pbnRzIHRvIHRoZSByaWdodCBsb29raW5nIGZyb20gdjEgdG8gdjIuXG5cdC8vIHZvaWQgU2V0T25lU2lkZWQoY29uc3QgYjJWZWMyJiB2MCwgY29uc3QgYjJWZWMyJiB2MSxjb25zdCBiMlZlYzImIHYyLCBjb25zdCBiMlZlYzImIHYzKTtcbiAgcHVibGljIFNldE9uZVNpZGVkKHYwOiBYWSwgdjE6IFhZLCB2MjogWFksIHYzOiBYWSk6IHRoaXMge1xuICAgIHRoaXMubV92ZXJ0ZXgwLkNvcHkodjApO1xuICAgIHRoaXMubV92ZXJ0ZXgxLkNvcHkodjEpO1xuICAgIHRoaXMubV92ZXJ0ZXgyLkNvcHkodjIpO1xuICAgIHRoaXMubV92ZXJ0ZXgzLkNvcHkodjMpO1xuICAgIHRoaXMubV9vbmVTaWRlZCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuXHQvLy8gU2V0IHRoaXMgYXMgYW4gaXNvbGF0ZWQgZWRnZS4gQ29sbGlzaW9uIGlzIHR3by1zaWRlZC5cbiAgcHVibGljIFNldFR3b1NpZGVkKHYxOiBYWSwgdjI6IFhZKTogdGhpcyB7XG4gICAgdGhpcy5tX3ZlcnRleDEuQ29weSh2MSk7XG4gICAgdGhpcy5tX3ZlcnRleDIuQ29weSh2Mik7XG4gICAgdGhpcy5tX29uZVNpZGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLy8gSW1wbGVtZW50IGIyU2hhcGUuXG4gIHB1YmxpYyBDbG9uZSgpOiBiMkVkZ2VTaGFwZSB7XG4gICAgcmV0dXJuIG5ldyBiMkVkZ2VTaGFwZSgpLkNvcHkodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgQ29weShvdGhlcjogYjJFZGdlU2hhcGUpOiB0aGlzIHtcbiAgICBzdXBlci5Db3B5KG90aGVyKTtcblxuICAgIC8vIERFQlVHOiBiMkFzc2VydChvdGhlciBpbnN0YW5jZW9mIGIyRWRnZVNoYXBlKTtcblxuICAgIHRoaXMubV92ZXJ0ZXgxLkNvcHkob3RoZXIubV92ZXJ0ZXgxKTtcbiAgICB0aGlzLm1fdmVydGV4Mi5Db3B5KG90aGVyLm1fdmVydGV4Mik7XG4gICAgdGhpcy5tX3ZlcnRleDAuQ29weShvdGhlci5tX3ZlcnRleDApO1xuICAgIHRoaXMubV92ZXJ0ZXgzLkNvcHkob3RoZXIubV92ZXJ0ZXgzKTtcbiAgICB0aGlzLm1fb25lU2lkZWQgPSBvdGhlci5tX29uZVNpZGVkO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLy8gQHNlZSBiMlNoYXBlOjpHZXRDaGlsZENvdW50XG4gIHB1YmxpYyBHZXRDaGlsZENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvLy8gQHNlZSBiMlNoYXBlOjpUZXN0UG9pbnRcbiAgcHVibGljIFRlc3RQb2ludCh4ZjogYjJUcmFuc2Zvcm0sIHA6IFhZKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICAvLy8gQHNlZSBiMlNoYXBlOjpDb21wdXRlRGlzdGFuY2VcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZURpc3RhbmNlX3NfdjEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVEaXN0YW5jZV9zX3YyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlRGlzdGFuY2Vfc19kID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlRGlzdGFuY2Vfc19zID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgQ29tcHV0ZURpc3RhbmNlKHhmOiBiMlRyYW5zZm9ybSwgcDogYjJWZWMyLCBub3JtYWw6IGIyVmVjMiwgY2hpbGRJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCB2MSA9IGIyVHJhbnNmb3JtLk11bFhWKHhmLCB0aGlzLm1fdmVydGV4MSwgYjJFZGdlU2hhcGUuQ29tcHV0ZURpc3RhbmNlX3NfdjEpO1xuICAgIGNvbnN0IHYyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGYsIHRoaXMubV92ZXJ0ZXgyLCBiMkVkZ2VTaGFwZS5Db21wdXRlRGlzdGFuY2Vfc192Mik7XG5cbiAgICBjb25zdCBkID0gYjJWZWMyLlN1YlZWKHAsIHYxLCBiMkVkZ2VTaGFwZS5Db21wdXRlRGlzdGFuY2Vfc19kKTtcbiAgICBjb25zdCBzID0gYjJWZWMyLlN1YlZWKHYyLCB2MSwgYjJFZGdlU2hhcGUuQ29tcHV0ZURpc3RhbmNlX3Nfcyk7XG4gICAgY29uc3QgZHMgPSBiMlZlYzIuRG90VlYoZCwgcyk7XG4gICAgaWYgKGRzID4gMCkge1xuICAgICAgY29uc3QgczIgPSBiMlZlYzIuRG90VlYocywgcyk7XG4gICAgICBpZiAoZHMgPiBzMikge1xuICAgICAgICBiMlZlYzIuU3ViVlYocCwgdjIsIGQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZC5TZWxmTXVsU3ViKGRzIC8gczIsIHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBub3JtYWwuQ29weShkKTtcbiAgICByZXR1cm4gbm9ybWFsLk5vcm1hbGl6ZSgpO1xuICB9XG4gIC8vICNlbmRpZlxuXG4gIC8vLyBJbXBsZW1lbnQgYjJTaGFwZS5cbiAgLy8gcCA9IHAxICsgdCAqIGRcbiAgLy8gdiA9IHYxICsgcyAqIGVcbiAgLy8gcDEgKyB0ICogZCA9IHYxICsgcyAqIGVcbiAgLy8gcyAqIGUgLSB0ICogZCA9IHAxIC0gdjFcbiAgcHJpdmF0ZSBzdGF0aWMgUmF5Q2FzdF9zX3AxID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBSYXlDYXN0X3NfcDIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFJheUNhc3Rfc19kID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBSYXlDYXN0X3NfZSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgUmF5Q2FzdF9zX3EgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFJheUNhc3Rfc19yID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgUmF5Q2FzdChvdXRwdXQ6IGIyUmF5Q2FzdE91dHB1dCwgaW5wdXQ6IGIyUmF5Q2FzdElucHV0LCB4ZjogYjJUcmFuc2Zvcm0sIGNoaWxkSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIFB1dCB0aGUgcmF5IGludG8gdGhlIGVkZ2UncyBmcmFtZSBvZiByZWZlcmVuY2UuXG4gICAgY29uc3QgcDE6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFRYVih4ZiwgaW5wdXQucDEsIGIyRWRnZVNoYXBlLlJheUNhc3Rfc19wMSk7XG4gICAgY29uc3QgcDI6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFRYVih4ZiwgaW5wdXQucDIsIGIyRWRnZVNoYXBlLlJheUNhc3Rfc19wMik7XG4gICAgY29uc3QgZDogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHAyLCBwMSwgYjJFZGdlU2hhcGUuUmF5Q2FzdF9zX2QpO1xuXG4gICAgY29uc3QgdjE6IGIyVmVjMiA9IHRoaXMubV92ZXJ0ZXgxO1xuICAgIGNvbnN0IHYyOiBiMlZlYzIgPSB0aGlzLm1fdmVydGV4MjtcbiAgICBjb25zdCBlOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodjIsIHYxLCBiMkVkZ2VTaGFwZS5SYXlDYXN0X3NfZSk7XG5cbiAgXHQvLyBOb3JtYWwgcG9pbnRzIHRvIHRoZSByaWdodCwgbG9va2luZyBmcm9tIHYxIGF0IHYyXG4gICAgY29uc3Qgbm9ybWFsOiBiMlZlYzIgPSBvdXRwdXQubm9ybWFsLlNldChlLnksIC1lLngpLlNlbGZOb3JtYWxpemUoKTtcblxuICAgIC8vIHEgPSBwMSArIHQgKiBkXG4gICAgLy8gZG90KG5vcm1hbCwgcSAtIHYxKSA9IDBcbiAgICAvLyBkb3Qobm9ybWFsLCBwMSAtIHYxKSArIHQgKiBkb3Qobm9ybWFsLCBkKSA9IDBcbiAgICBjb25zdCBudW1lcmF0b3I6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihub3JtYWwsIGIyVmVjMi5TdWJWVih2MSwgcDEsIGIyVmVjMi5zX3QwKSk7XG4gICAgaWYgKHRoaXMubV9vbmVTaWRlZCAmJiBudW1lcmF0b3IgPiAwLjApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBkZW5vbWluYXRvcjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKG5vcm1hbCwgZCk7XG5cbiAgICBpZiAoZGVub21pbmF0b3IgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB0OiBudW1iZXIgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICBpZiAodCA8IDAgfHwgaW5wdXQubWF4RnJhY3Rpb24gPCB0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcTogYjJWZWMyID0gYjJWZWMyLkFkZFZNdWxTVihwMSwgdCwgZCwgYjJFZGdlU2hhcGUuUmF5Q2FzdF9zX3EpO1xuXG4gICAgLy8gcSA9IHYxICsgcyAqIHJcbiAgICAvLyBzID0gZG90KHEgLSB2MSwgcikgLyBkb3QociwgcilcbiAgICBjb25zdCByOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodjIsIHYxLCBiMkVkZ2VTaGFwZS5SYXlDYXN0X3Nfcik7XG4gICAgY29uc3QgcnI6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihyLCByKTtcbiAgICBpZiAocnIgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBzOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKHEsIHYxLCBiMlZlYzIuc190MCksIHIpIC8gcnI7XG4gICAgaWYgKHMgPCAwIHx8IDEgPCBzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgb3V0cHV0LmZyYWN0aW9uID0gdDtcbiAgICBiMlJvdC5NdWxSVih4Zi5xLCBvdXRwdXQubm9ybWFsLCBvdXRwdXQubm9ybWFsKTtcbiAgICBpZiAobnVtZXJhdG9yID4gMCkge1xuICAgICAgb3V0cHV0Lm5vcm1hbC5TZWxmTmVnKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8vIEBzZWUgYjJTaGFwZTo6Q29tcHV0ZUFBQkJcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZUFBQkJfc192MSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZUFBQkJfc192MiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIENvbXB1dGVBQUJCKGFhYmI6IGIyQUFCQiwgeGY6IGIyVHJhbnNmb3JtLCBjaGlsZEluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB2MTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGYsIHRoaXMubV92ZXJ0ZXgxLCBiMkVkZ2VTaGFwZS5Db21wdXRlQUFCQl9zX3YxKTtcbiAgICBjb25zdCB2MjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGYsIHRoaXMubV92ZXJ0ZXgyLCBiMkVkZ2VTaGFwZS5Db21wdXRlQUFCQl9zX3YyKTtcblxuICAgIGIyVmVjMi5NaW5WKHYxLCB2MiwgYWFiYi5sb3dlckJvdW5kKTtcbiAgICBiMlZlYzIuTWF4Vih2MSwgdjIsIGFhYmIudXBwZXJCb3VuZCk7XG5cbiAgICBjb25zdCByOiBudW1iZXIgPSB0aGlzLm1fcmFkaXVzO1xuICAgIGFhYmIubG93ZXJCb3VuZC5TZWxmU3ViWFkociwgcik7XG4gICAgYWFiYi51cHBlckJvdW5kLlNlbGZBZGRYWShyLCByKTtcbiAgfVxuXG4gIC8vLyBAc2VlIGIyU2hhcGU6OkNvbXB1dGVNYXNzXG4gIHB1YmxpYyBDb21wdXRlTWFzcyhtYXNzRGF0YTogYjJNYXNzRGF0YSwgZGVuc2l0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgbWFzc0RhdGEubWFzcyA9IDA7XG4gICAgYjJWZWMyLk1pZFZWKHRoaXMubV92ZXJ0ZXgxLCB0aGlzLm1fdmVydGV4MiwgbWFzc0RhdGEuY2VudGVyKTtcbiAgICBtYXNzRGF0YS5JID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBTZXR1cERpc3RhbmNlUHJveHkocHJveHk6IGIyRGlzdGFuY2VQcm94eSwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIHByb3h5Lm1fdmVydGljZXMgPSBwcm94eS5tX2J1ZmZlcjtcbiAgICBwcm94eS5tX3ZlcnRpY2VzWzBdLkNvcHkodGhpcy5tX3ZlcnRleDEpO1xuICAgIHByb3h5Lm1fdmVydGljZXNbMV0uQ29weSh0aGlzLm1fdmVydGV4Mik7XG4gICAgcHJveHkubV9jb3VudCA9IDI7XG4gICAgcHJveHkubV9yYWRpdXMgPSB0aGlzLm1fcmFkaXVzO1xuICB9XG5cbiAgcHVibGljIENvbXB1dGVTdWJtZXJnZWRBcmVhKG5vcm1hbDogYjJWZWMyLCBvZmZzZXQ6IG51bWJlciwgeGY6IGIyVHJhbnNmb3JtLCBjOiBiMlZlYzIpOiBudW1iZXIge1xuICAgIGMuU2V0WmVybygpO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIER1bXAobG9nOiAoZm9ybWF0OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgbG9nKFwiICAgIGNvbnN0IHNoYXBlOiBiMkVkZ2VTaGFwZSA9IG5ldyBiMkVkZ2VTaGFwZSgpO1xcblwiKTtcbiAgICBsb2coXCIgICAgc2hhcGUubV9yYWRpdXMgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX3JhZGl1cyk7XG4gICAgbG9nKFwiICAgIHNoYXBlLm1fdmVydGV4MC5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX3ZlcnRleDAueCwgdGhpcy5tX3ZlcnRleDAueSk7XG4gICAgbG9nKFwiICAgIHNoYXBlLm1fdmVydGV4MS5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX3ZlcnRleDEueCwgdGhpcy5tX3ZlcnRleDEueSk7XG4gICAgbG9nKFwiICAgIHNoYXBlLm1fdmVydGV4Mi5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX3ZlcnRleDIueCwgdGhpcy5tX3ZlcnRleDIueSk7XG4gICAgbG9nKFwiICAgIHNoYXBlLm1fdmVydGV4My5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX3ZlcnRleDMueCwgdGhpcy5tX3ZlcnRleDMueSk7XG4gICAgbG9nKFwiICAgIHNoYXBlLm1fb25lU2lkZWQgPSAlcztcXG5cIiwgdGhpcy5tX29uZVNpZGVkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0E7QUFJQTtBQUtBO0FBQUE7QUFTQTtBQUFBO0FBUkE7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7QUFJQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcklBO0FBQ0E7QUFDQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXlEQTtBQUNBO0FBMENBO0FBQUE7QUF4TUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_edge_shape.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_polygon_shape.ts":
/*!*************************************************!*\
  !*** ./src/box2d/collision/b2_polygon_shape.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2PolygonShape = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_shape_1 = __webpack_require__(/*! ./b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2_shape_2 = __webpack_require__(/*! ./b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2PolygonShape = (function (_super) {\n    __extends(b2PolygonShape, _super);\n    function b2PolygonShape() {\n        var _this = _super.call(this, b2_shape_2.b2ShapeType.e_polygonShape, b2_settings_1.b2_polygonRadius) || this;\n        _this.m_centroid = new b2_math_1.b2Vec2(0, 0);\n        _this.m_vertices = [];\n        _this.m_normals = [];\n        _this.m_count = 0;\n        return _this;\n    }\n    b2PolygonShape.prototype.Clone = function () {\n        return new b2PolygonShape().Copy(this);\n    };\n    b2PolygonShape.prototype.Copy = function (other) {\n        _super.prototype.Copy.call(this, other);\n        this.m_centroid.Copy(other.m_centroid);\n        this.m_count = other.m_count;\n        this.m_vertices = b2_math_1.b2Vec2.MakeArray(this.m_count);\n        this.m_normals = b2_math_1.b2Vec2.MakeArray(this.m_count);\n        for (var i = 0; i < this.m_count; ++i) {\n            this.m_vertices[i].Copy(other.m_vertices[i]);\n            this.m_normals[i].Copy(other.m_normals[i]);\n        }\n        return this;\n    };\n    b2PolygonShape.prototype.GetChildCount = function () {\n        return 1;\n    };\n    b2PolygonShape.prototype.Set = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (typeof args[0][0] === \"number\") {\n            var vertices_1 = args[0];\n            if (vertices_1.length % 2 !== 0) {\n                throw new Error();\n            }\n            return this._Set(function (index) { return ({ x: vertices_1[index * 2], y: vertices_1[index * 2 + 1] }); }, vertices_1.length / 2);\n        }\n        else {\n            var vertices_2 = args[0];\n            var count = args[1] || vertices_2.length;\n            return this._Set(function (index) { return vertices_2[index]; }, count);\n        }\n    };\n    b2PolygonShape.prototype._Set = function (vertices, count) {\n        if (count < 3) {\n            return this.SetAsBox(1, 1);\n        }\n        var n = count;\n        var ps = [];\n        for (var i = 0; i < n; ++i) {\n            var v = vertices(i);\n            var unique = true;\n            for (var j = 0; j < ps.length; ++j) {\n                if (b2_math_1.b2Vec2.DistanceSquaredVV(v, ps[j]) < ((0.5 * b2_settings_1.b2_linearSlop) * (0.5 * b2_settings_1.b2_linearSlop))) {\n                    unique = false;\n                    break;\n                }\n            }\n            if (unique) {\n                ps.push(v);\n            }\n        }\n        n = ps.length;\n        if (n < 3) {\n            return this.SetAsBox(1.0, 1.0);\n        }\n        var i0 = 0;\n        var x0 = ps[0].x;\n        for (var i = 1; i < n; ++i) {\n            var x = ps[i].x;\n            if (x > x0 || (x === x0 && ps[i].y < ps[i0].y)) {\n                i0 = i;\n                x0 = x;\n            }\n        }\n        var hull = [];\n        var m = 0;\n        var ih = i0;\n        for (;;) {\n            hull[m] = ih;\n            var ie = 0;\n            for (var j = 1; j < n; ++j) {\n                if (ie === ih) {\n                    ie = j;\n                    continue;\n                }\n                var r = b2_math_1.b2Vec2.SubVV(ps[ie], ps[hull[m]], b2PolygonShape.Set_s_r);\n                var v = b2_math_1.b2Vec2.SubVV(ps[j], ps[hull[m]], b2PolygonShape.Set_s_v);\n                var c = b2_math_1.b2Vec2.CrossVV(r, v);\n                if (c < 0) {\n                    ie = j;\n                }\n                if (c === 0 && v.LengthSquared() > r.LengthSquared()) {\n                    ie = j;\n                }\n            }\n            ++m;\n            ih = ie;\n            if (ie === i0) {\n                break;\n            }\n        }\n        this.m_count = m;\n        this.m_vertices = b2_math_1.b2Vec2.MakeArray(this.m_count);\n        this.m_normals = b2_math_1.b2Vec2.MakeArray(this.m_count);\n        for (var i = 0; i < m; ++i) {\n            this.m_vertices[i].Copy(ps[hull[i]]);\n        }\n        for (var i = 0; i < m; ++i) {\n            var vertexi1 = this.m_vertices[i];\n            var vertexi2 = this.m_vertices[(i + 1) % m];\n            var edge = b2_math_1.b2Vec2.SubVV(vertexi2, vertexi1, b2_math_1.b2Vec2.s_t0);\n            b2_math_1.b2Vec2.CrossVOne(edge, this.m_normals[i]).SelfNormalize();\n        }\n        b2PolygonShape.ComputeCentroid(this.m_vertices, m, this.m_centroid);\n        return this;\n    };\n    b2PolygonShape.prototype.SetAsBox = function (hx, hy, center, angle) {\n        if (angle === void 0) { angle = 0; }\n        this.m_count = 4;\n        this.m_vertices = b2_math_1.b2Vec2.MakeArray(this.m_count);\n        this.m_normals = b2_math_1.b2Vec2.MakeArray(this.m_count);\n        this.m_vertices[0].Set((-hx), (-hy));\n        this.m_vertices[1].Set(hx, (-hy));\n        this.m_vertices[2].Set(hx, hy);\n        this.m_vertices[3].Set((-hx), hy);\n        this.m_normals[0].Set(0, (-1));\n        this.m_normals[1].Set(1, 0);\n        this.m_normals[2].Set(0, 1);\n        this.m_normals[3].Set((-1), 0);\n        this.m_centroid.SetZero();\n        if (center) {\n            this.m_centroid.Copy(center);\n            var xf = new b2_math_1.b2Transform();\n            xf.SetPosition(center);\n            xf.SetRotationAngle(angle);\n            for (var i = 0; i < this.m_count; ++i) {\n                b2_math_1.b2Transform.MulXV(xf, this.m_vertices[i], this.m_vertices[i]);\n                b2_math_1.b2Rot.MulRV(xf.q, this.m_normals[i], this.m_normals[i]);\n            }\n        }\n        return this;\n    };\n    b2PolygonShape.prototype.TestPoint = function (xf, p) {\n        var pLocal = b2_math_1.b2Transform.MulTXV(xf, p, b2PolygonShape.TestPoint_s_pLocal);\n        for (var i = 0; i < this.m_count; ++i) {\n            var dot = b2_math_1.b2Vec2.DotVV(this.m_normals[i], b2_math_1.b2Vec2.SubVV(pLocal, this.m_vertices[i], b2_math_1.b2Vec2.s_t0));\n            if (dot > 0) {\n                return false;\n            }\n        }\n        return true;\n    };\n    b2PolygonShape.prototype.ComputeDistance = function (xf, p, normal, childIndex) {\n        var pLocal = b2_math_1.b2Transform.MulTXV(xf, p, b2PolygonShape.ComputeDistance_s_pLocal);\n        var maxDistance = -b2_settings_1.b2_maxFloat;\n        var normalForMaxDistance = b2PolygonShape.ComputeDistance_s_normalForMaxDistance.Copy(pLocal);\n        for (var i = 0; i < this.m_count; ++i) {\n            var dot = b2_math_1.b2Vec2.DotVV(this.m_normals[i], b2_math_1.b2Vec2.SubVV(pLocal, this.m_vertices[i], b2_math_1.b2Vec2.s_t0));\n            if (dot > maxDistance) {\n                maxDistance = dot;\n                normalForMaxDistance.Copy(this.m_normals[i]);\n            }\n        }\n        if (maxDistance > 0) {\n            var minDistance = b2PolygonShape.ComputeDistance_s_minDistance.Copy(normalForMaxDistance);\n            var minDistance2 = maxDistance * maxDistance;\n            for (var i = 0; i < this.m_count; ++i) {\n                var distance = b2_math_1.b2Vec2.SubVV(pLocal, this.m_vertices[i], b2PolygonShape.ComputeDistance_s_distance);\n                var distance2 = distance.LengthSquared();\n                if (minDistance2 > distance2) {\n                    minDistance.Copy(distance);\n                    minDistance2 = distance2;\n                }\n            }\n            b2_math_1.b2Rot.MulRV(xf.q, minDistance, normal);\n            normal.Normalize();\n            return Math.sqrt(minDistance2);\n        }\n        else {\n            b2_math_1.b2Rot.MulRV(xf.q, normalForMaxDistance, normal);\n            return maxDistance;\n        }\n    };\n    b2PolygonShape.prototype.RayCast = function (output, input, xf, childIndex) {\n        var p1 = b2_math_1.b2Transform.MulTXV(xf, input.p1, b2PolygonShape.RayCast_s_p1);\n        var p2 = b2_math_1.b2Transform.MulTXV(xf, input.p2, b2PolygonShape.RayCast_s_p2);\n        var d = b2_math_1.b2Vec2.SubVV(p2, p1, b2PolygonShape.RayCast_s_d);\n        var lower = 0, upper = input.maxFraction;\n        var index = -1;\n        for (var i = 0; i < this.m_count; ++i) {\n            var numerator = b2_math_1.b2Vec2.DotVV(this.m_normals[i], b2_math_1.b2Vec2.SubVV(this.m_vertices[i], p1, b2_math_1.b2Vec2.s_t0));\n            var denominator = b2_math_1.b2Vec2.DotVV(this.m_normals[i], d);\n            if (denominator === 0) {\n                if (numerator < 0) {\n                    return false;\n                }\n            }\n            else {\n                if (denominator < 0 && numerator < lower * denominator) {\n                    lower = numerator / denominator;\n                    index = i;\n                }\n                else if (denominator > 0 && numerator < upper * denominator) {\n                    upper = numerator / denominator;\n                }\n            }\n            if (upper < lower) {\n                return false;\n            }\n        }\n        if (index >= 0) {\n            output.fraction = lower;\n            b2_math_1.b2Rot.MulRV(xf.q, this.m_normals[index], output.normal);\n            return true;\n        }\n        return false;\n    };\n    b2PolygonShape.prototype.ComputeAABB = function (aabb, xf, childIndex) {\n        var lower = b2_math_1.b2Transform.MulXV(xf, this.m_vertices[0], aabb.lowerBound);\n        var upper = aabb.upperBound.Copy(lower);\n        for (var i = 0; i < this.m_count; ++i) {\n            var v = b2_math_1.b2Transform.MulXV(xf, this.m_vertices[i], b2PolygonShape.ComputeAABB_s_v);\n            b2_math_1.b2Vec2.MinV(v, lower, lower);\n            b2_math_1.b2Vec2.MaxV(v, upper, upper);\n        }\n        var r = this.m_radius;\n        lower.SelfSubXY(r, r);\n        upper.SelfAddXY(r, r);\n    };\n    b2PolygonShape.prototype.ComputeMass = function (massData, density) {\n        var center = b2PolygonShape.ComputeMass_s_center.SetZero();\n        var area = 0;\n        var I = 0;\n        var s = b2PolygonShape.ComputeMass_s_s.Copy(this.m_vertices[0]);\n        var k_inv3 = 1 / 3;\n        for (var i = 0; i < this.m_count; ++i) {\n            var e1 = b2_math_1.b2Vec2.SubVV(this.m_vertices[i], s, b2PolygonShape.ComputeMass_s_e1);\n            var e2 = b2_math_1.b2Vec2.SubVV(this.m_vertices[(i + 1) % this.m_count], s, b2PolygonShape.ComputeMass_s_e2);\n            var D = b2_math_1.b2Vec2.CrossVV(e1, e2);\n            var triangleArea = 0.5 * D;\n            area += triangleArea;\n            center.SelfAdd(b2_math_1.b2Vec2.MulSV(triangleArea * k_inv3, b2_math_1.b2Vec2.AddVV(e1, e2, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t1));\n            var ex1 = e1.x;\n            var ey1 = e1.y;\n            var ex2 = e2.x;\n            var ey2 = e2.y;\n            var intx2 = ex1 * ex1 + ex2 * ex1 + ex2 * ex2;\n            var inty2 = ey1 * ey1 + ey2 * ey1 + ey2 * ey2;\n            I += (0.25 * k_inv3 * D) * (intx2 + inty2);\n        }\n        massData.mass = density * area;\n        center.SelfMul(1 / area);\n        b2_math_1.b2Vec2.AddVV(center, s, massData.center);\n        massData.I = density * I;\n        massData.I += massData.mass * (b2_math_1.b2Vec2.DotVV(massData.center, massData.center) - b2_math_1.b2Vec2.DotVV(center, center));\n    };\n    b2PolygonShape.prototype.Validate = function () {\n        for (var i = 0; i < this.m_count; ++i) {\n            var i1 = i;\n            var i2 = (i + 1) % this.m_count;\n            var p = this.m_vertices[i1];\n            var e = b2_math_1.b2Vec2.SubVV(this.m_vertices[i2], p, b2PolygonShape.Validate_s_e);\n            for (var j = 0; j < this.m_count; ++j) {\n                if (j === i1 || j === i2) {\n                    continue;\n                }\n                var v = b2_math_1.b2Vec2.SubVV(this.m_vertices[j], p, b2PolygonShape.Validate_s_v);\n                var c = b2_math_1.b2Vec2.CrossVV(e, v);\n                if (c < 0) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    b2PolygonShape.prototype.SetupDistanceProxy = function (proxy, index) {\n        proxy.m_vertices = this.m_vertices;\n        proxy.m_count = this.m_count;\n        proxy.m_radius = this.m_radius;\n    };\n    b2PolygonShape.prototype.ComputeSubmergedArea = function (normal, offset, xf, c) {\n        var normalL = b2_math_1.b2Rot.MulTRV(xf.q, normal, b2PolygonShape.ComputeSubmergedArea_s_normalL);\n        var offsetL = offset - b2_math_1.b2Vec2.DotVV(normal, xf.p);\n        var depths = [];\n        var diveCount = 0;\n        var intoIndex = -1;\n        var outoIndex = -1;\n        var lastSubmerged = false;\n        for (var i_1 = 0; i_1 < this.m_count; ++i_1) {\n            depths[i_1] = b2_math_1.b2Vec2.DotVV(normalL, this.m_vertices[i_1]) - offsetL;\n            var isSubmerged = depths[i_1] < (-b2_settings_1.b2_epsilon);\n            if (i_1 > 0) {\n                if (isSubmerged) {\n                    if (!lastSubmerged) {\n                        intoIndex = i_1 - 1;\n                        diveCount++;\n                    }\n                }\n                else {\n                    if (lastSubmerged) {\n                        outoIndex = i_1 - 1;\n                        diveCount++;\n                    }\n                }\n            }\n            lastSubmerged = isSubmerged;\n        }\n        switch (diveCount) {\n            case 0:\n                if (lastSubmerged) {\n                    var md = b2PolygonShape.ComputeSubmergedArea_s_md;\n                    this.ComputeMass(md, 1);\n                    b2_math_1.b2Transform.MulXV(xf, md.center, c);\n                    return md.mass;\n                }\n                else {\n                    return 0;\n                }\n            case 1:\n                if (intoIndex === (-1)) {\n                    intoIndex = this.m_count - 1;\n                }\n                else {\n                    outoIndex = this.m_count - 1;\n                }\n                break;\n        }\n        var intoIndex2 = ((intoIndex + 1) % this.m_count);\n        var outoIndex2 = ((outoIndex + 1) % this.m_count);\n        var intoLamdda = (0 - depths[intoIndex]) / (depths[intoIndex2] - depths[intoIndex]);\n        var outoLamdda = (0 - depths[outoIndex]) / (depths[outoIndex2] - depths[outoIndex]);\n        var intoVec = b2PolygonShape.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[intoIndex].x * (1 - intoLamdda) + this.m_vertices[intoIndex2].x * intoLamdda, this.m_vertices[intoIndex].y * (1 - intoLamdda) + this.m_vertices[intoIndex2].y * intoLamdda);\n        var outoVec = b2PolygonShape.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[outoIndex].x * (1 - outoLamdda) + this.m_vertices[outoIndex2].x * outoLamdda, this.m_vertices[outoIndex].y * (1 - outoLamdda) + this.m_vertices[outoIndex2].y * outoLamdda);\n        var area = 0;\n        var center = b2PolygonShape.ComputeSubmergedArea_s_center.SetZero();\n        var p2 = this.m_vertices[intoIndex2];\n        var p3;\n        var i = intoIndex2;\n        while (i !== outoIndex2) {\n            i = (i + 1) % this.m_count;\n            if (i === outoIndex2) {\n                p3 = outoVec;\n            }\n            else {\n                p3 = this.m_vertices[i];\n            }\n            var triangleArea = 0.5 * ((p2.x - intoVec.x) * (p3.y - intoVec.y) - (p2.y - intoVec.y) * (p3.x - intoVec.x));\n            area += triangleArea;\n            center.x += triangleArea * (intoVec.x + p2.x + p3.x) / 3;\n            center.y += triangleArea * (intoVec.y + p2.y + p3.y) / 3;\n            p2 = p3;\n        }\n        center.SelfMul(1 / area);\n        b2_math_1.b2Transform.MulXV(xf, center, c);\n        return area;\n    };\n    b2PolygonShape.prototype.Dump = function (log) {\n        log(\"    const shape: b2PolygonShape = new b2PolygonShape();\\n\");\n        log(\"    const vs: b2Vec2[] = [];\\n\");\n        for (var i = 0; i < this.m_count; ++i) {\n            log(\"    vs[%d] = new b2Vec2(%.15f, %.15f);\\n\", i, this.m_vertices[i].x, this.m_vertices[i].y);\n        }\n        log(\"    shape.Set(vs, %d);\\n\", this.m_count);\n    };\n    b2PolygonShape.ComputeCentroid = function (vs, count, out) {\n        var c = out;\n        c.SetZero();\n        var area = 0;\n        var s = b2PolygonShape.ComputeCentroid_s_s.Copy(vs[0]);\n        var inv3 = 1 / 3;\n        for (var i = 0; i < count; ++i) {\n            var p1 = b2_math_1.b2Vec2.SubVV(vs[0], s, b2PolygonShape.ComputeCentroid_s_p1);\n            var p2 = b2_math_1.b2Vec2.SubVV(vs[i], s, b2PolygonShape.ComputeCentroid_s_p2);\n            var p3 = b2_math_1.b2Vec2.SubVV(vs[(i + 1) % count], s, b2PolygonShape.ComputeCentroid_s_p3);\n            var e1 = b2_math_1.b2Vec2.SubVV(p2, p1, b2PolygonShape.ComputeCentroid_s_e1);\n            var e2 = b2_math_1.b2Vec2.SubVV(p3, p1, b2PolygonShape.ComputeCentroid_s_e2);\n            var D = b2_math_1.b2Vec2.CrossVV(e1, e2);\n            var triangleArea = 0.5 * D;\n            area += triangleArea;\n            c.x += triangleArea * inv3 * (p1.x + p2.x + p3.x);\n            c.y += triangleArea * inv3 * (p1.y + p2.y + p3.y);\n        }\n        c.x = (1 / area) * c.x + s.x;\n        c.y = (1 / area) * c.y + s.y;\n        return c;\n    };\n    b2PolygonShape.Set_s_r = new b2_math_1.b2Vec2();\n    b2PolygonShape.Set_s_v = new b2_math_1.b2Vec2();\n    b2PolygonShape.TestPoint_s_pLocal = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeDistance_s_pLocal = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeDistance_s_normalForMaxDistance = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeDistance_s_minDistance = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeDistance_s_distance = new b2_math_1.b2Vec2();\n    b2PolygonShape.RayCast_s_p1 = new b2_math_1.b2Vec2();\n    b2PolygonShape.RayCast_s_p2 = new b2_math_1.b2Vec2();\n    b2PolygonShape.RayCast_s_d = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeAABB_s_v = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeMass_s_center = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeMass_s_s = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeMass_s_e1 = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeMass_s_e2 = new b2_math_1.b2Vec2();\n    b2PolygonShape.Validate_s_e = new b2_math_1.b2Vec2();\n    b2PolygonShape.Validate_s_v = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeSubmergedArea_s_normalL = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeSubmergedArea_s_md = new b2_shape_1.b2MassData();\n    b2PolygonShape.ComputeSubmergedArea_s_intoVec = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeSubmergedArea_s_outoVec = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeSubmergedArea_s_center = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeCentroid_s_s = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeCentroid_s_p1 = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeCentroid_s_p2 = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeCentroid_s_p3 = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeCentroid_s_e1 = new b2_math_1.b2Vec2();\n    b2PolygonShape.ComputeCentroid_s_e2 = new b2_math_1.b2Vec2();\n    return b2PolygonShape;\n}(b2_shape_2.b2Shape));\nexports.b2PolygonShape = b2PolygonShape;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX3BvbHlnb25fc2hhcGUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX3BvbHlnb25fc2hhcGUudHM/YzcyNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0LCBiMl9lcHNpbG9uX3NxIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfZXBzaWxvbiwgYjJfbWF4RmxvYXQsIGIyX2xpbmVhclNsb3AsIGIyX3BvbHlnb25SYWRpdXMgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyUm90LCBiMlRyYW5zZm9ybSwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQUFCQiwgYjJSYXlDYXN0SW5wdXQsIGIyUmF5Q2FzdE91dHB1dCB9IGZyb20gXCIuL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJEaXN0YW5jZVByb3h5IH0gZnJvbSBcIi4vYjJfZGlzdGFuY2VcIjtcbmltcG9ydCB7IGIyTWFzc0RhdGEgfSBmcm9tIFwiLi9iMl9zaGFwZVwiO1xuaW1wb3J0IHsgYjJTaGFwZSwgYjJTaGFwZVR5cGUgfSBmcm9tIFwiLi9iMl9zaGFwZVwiO1xuXG4vLy8gQSBzb2xpZCBjb252ZXggcG9seWdvbi4gSXQgaXMgYXNzdW1lZCB0aGF0IHRoZSBpbnRlcmlvciBvZiB0aGUgcG9seWdvbiBpcyB0b1xuLy8vIHRoZSBsZWZ0IG9mIGVhY2ggZWRnZS5cbi8vLyBJbiBtb3N0IGNhc2VzIHlvdSBzaG91bGQgbm90IG5lZWQgbWFueSB2ZXJ0aWNlcyBmb3IgYSBjb252ZXggcG9seWdvbi5cbmV4cG9ydCBjbGFzcyBiMlBvbHlnb25TaGFwZSBleHRlbmRzIGIyU2hhcGUge1xuICBwdWJsaWMgcmVhZG9ubHkgbV9jZW50cm9pZDogYjJWZWMyID0gbmV3IGIyVmVjMigwLCAwKTtcbiAgcHVibGljIG1fdmVydGljZXM6IGIyVmVjMltdID0gW107XG4gIHB1YmxpYyBtX25vcm1hbHM6IGIyVmVjMltdID0gW107XG4gIHB1YmxpYyBtX2NvdW50OiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKGIyU2hhcGVUeXBlLmVfcG9seWdvblNoYXBlLCBiMl9wb2x5Z29uUmFkaXVzKTtcbiAgfVxuXG4gIC8vLyBJbXBsZW1lbnQgYjJTaGFwZS5cbiAgcHVibGljIENsb25lKCk6IGIyUG9seWdvblNoYXBlIHtcbiAgICByZXR1cm4gbmV3IGIyUG9seWdvblNoYXBlKCkuQ29weSh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBiMlBvbHlnb25TaGFwZSk6IHRoaXMge1xuICAgIHN1cGVyLkNvcHkob3RoZXIpO1xuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KG90aGVyIGluc3RhbmNlb2YgYjJQb2x5Z29uU2hhcGUpO1xuXG4gICAgdGhpcy5tX2NlbnRyb2lkLkNvcHkob3RoZXIubV9jZW50cm9pZCk7XG4gICAgdGhpcy5tX2NvdW50ID0gb3RoZXIubV9jb3VudDtcbiAgICB0aGlzLm1fdmVydGljZXMgPSBiMlZlYzIuTWFrZUFycmF5KHRoaXMubV9jb3VudCk7XG4gICAgdGhpcy5tX25vcm1hbHMgPSBiMlZlYzIuTWFrZUFycmF5KHRoaXMubV9jb3VudCk7XG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICB0aGlzLm1fdmVydGljZXNbaV0uQ29weShvdGhlci5tX3ZlcnRpY2VzW2ldKTtcbiAgICAgIHRoaXMubV9ub3JtYWxzW2ldLkNvcHkob3RoZXIubV9ub3JtYWxzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLy8gQHNlZSBiMlNoYXBlOjpHZXRDaGlsZENvdW50XG4gIHB1YmxpYyBHZXRDaGlsZENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvLy8gQ3JlYXRlIGEgY29udmV4IGh1bGwgZnJvbSB0aGUgZ2l2ZW4gYXJyYXkgb2YgcG9pbnRzLlxuICAvLy8gQHdhcm5pbmcgdGhlIHBvaW50cyBtYXkgYmUgcmUtb3JkZXJlZCwgZXZlbiBpZiB0aGV5IGZvcm0gYSBjb252ZXggcG9seWdvblxuICAvLy8gQHdhcm5pbmcgY29sbGluZWFyIHBvaW50cyBhcmUgaGFuZGxlZCBidXQgbm90IHJlbW92ZWQuIENvbGxpbmVhciBwb2ludHNcbiAgLy8vIG1heSBsZWFkIHRvIHBvb3Igc3RhY2tpbmcgYmVoYXZpb3IuXG4gIHByaXZhdGUgc3RhdGljIFNldF9zX3IgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNldF9zX3YgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTZXQodmVydGljZXM6IFhZW10pOiBiMlBvbHlnb25TaGFwZTtcbiAgcHVibGljIFNldCh2ZXJ0aWNlczogWFlbXSwgY291bnQ6IG51bWJlcik6IGIyUG9seWdvblNoYXBlO1xuICBwdWJsaWMgU2V0KHZlcnRpY2VzOiBudW1iZXJbXSk6IGIyUG9seWdvblNoYXBlO1xuICBwdWJsaWMgU2V0KC4uLmFyZ3M6IGFueVtdKTogYjJQb2x5Z29uU2hhcGUge1xuICAgIGlmICh0eXBlb2YgYXJnc1swXVswXSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3QgdmVydGljZXM6IG51bWJlcltdID0gYXJnc1swXTtcbiAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggJSAyICE9PSAwKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgICByZXR1cm4gdGhpcy5fU2V0KChpbmRleDogbnVtYmVyKTogWFkgPT4gKHsgeDogdmVydGljZXNbaW5kZXggKiAyXSwgeTogdmVydGljZXNbaW5kZXggKiAyICsgMV0gfSksIHZlcnRpY2VzLmxlbmd0aCAvIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB2ZXJ0aWNlczogWFlbXSA9IGFyZ3NbMF07XG4gICAgICBjb25zdCBjb3VudDogbnVtYmVyID0gYXJnc1sxXSB8fCB2ZXJ0aWNlcy5sZW5ndGg7XG4gICAgICByZXR1cm4gdGhpcy5fU2V0KChpbmRleDogbnVtYmVyKTogWFkgPT4gdmVydGljZXNbaW5kZXhdLCBjb3VudCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBfU2V0KHZlcnRpY2VzOiAoaW5kZXg6IG51bWJlcikgPT4gWFksIGNvdW50OiBudW1iZXIpOiBiMlBvbHlnb25TaGFwZSB7XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQoMyA8PSBjb3VudCk7XG4gICAgaWYgKGNvdW50IDwgMykge1xuICAgICAgcmV0dXJuIHRoaXMuU2V0QXNCb3goMSwgMSk7XG4gICAgfVxuXG4gICAgbGV0IG46IG51bWJlciA9IGNvdW50O1xuXG4gICAgLy8gUGVyZm9ybSB3ZWxkaW5nIGFuZCBjb3B5IHZlcnRpY2VzIGludG8gbG9jYWwgYnVmZmVyLlxuICAgIGNvbnN0IHBzOiBYWVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbnN0IC8qYjJWZWMyKi8gdiA9IHZlcnRpY2VzKGkpO1xuXG4gICAgICBsZXQgLypib29sKi8gdW5pcXVlID0gdHJ1ZTtcbiAgICAgIGZvciAobGV0IC8qaW50MzIqLyBqID0gMDsgaiA8IHBzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIGlmIChiMlZlYzIuRGlzdGFuY2VTcXVhcmVkVlYodiwgcHNbal0pIDwgKCgwLjUgKiBiMl9saW5lYXJTbG9wKSAqICgwLjUgKiBiMl9saW5lYXJTbG9wKSkpIHtcbiAgICAgICAgICB1bmlxdWUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodW5pcXVlKSB7XG4gICAgICAgIHBzLnB1c2godik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbiA9IHBzLmxlbmd0aDtcbiAgICBpZiAobiA8IDMpIHtcbiAgICAgIC8vIFBvbHlnb24gaXMgZGVnZW5lcmF0ZS5cbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7XG4gICAgICByZXR1cm4gdGhpcy5TZXRBc0JveCgxLjAsIDEuMCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBjb252ZXggaHVsbCB1c2luZyB0aGUgR2lmdCB3cmFwcGluZyBhbGdvcml0aG1cbiAgICAvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dpZnRfd3JhcHBpbmdfYWxnb3JpdGhtXG5cbiAgICAvLyBGaW5kIHRoZSByaWdodCBtb3N0IHBvaW50IG9uIHRoZSBodWxsXG4gICAgbGV0IGkwOiBudW1iZXIgPSAwO1xuICAgIGxldCB4MDogbnVtYmVyID0gcHNbMF0ueDtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICBjb25zdCB4OiBudW1iZXIgPSBwc1tpXS54O1xuICAgICAgaWYgKHggPiB4MCB8fCAoeCA9PT0geDAgJiYgcHNbaV0ueSA8IHBzW2kwXS55KSkge1xuICAgICAgICBpMCA9IGk7XG4gICAgICAgIHgwID0geDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodWxsOiBudW1iZXJbXSA9IFtdO1xuICAgIGxldCBtOiBudW1iZXIgPSAwO1xuICAgIGxldCBpaDogbnVtYmVyID0gaTA7XG5cbiAgICBmb3IgKDsgOykge1xuICAgICAgaHVsbFttXSA9IGloO1xuXG4gICAgICBsZXQgaWU6IG51bWJlciA9IDA7XG4gICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAxOyBqIDwgbjsgKytqKSB7XG4gICAgICAgIGlmIChpZSA9PT0gaWgpIHtcbiAgICAgICAgICBpZSA9IGo7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYocHNbaWVdLCBwc1todWxsW21dXSwgYjJQb2x5Z29uU2hhcGUuU2V0X3Nfcik7XG4gICAgICAgIGNvbnN0IHY6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihwc1tqXSwgcHNbaHVsbFttXV0sIGIyUG9seWdvblNoYXBlLlNldF9zX3YpO1xuICAgICAgICBjb25zdCBjOiBudW1iZXIgPSBiMlZlYzIuQ3Jvc3NWVihyLCB2KTtcbiAgICAgICAgaWYgKGMgPCAwKSB7XG4gICAgICAgICAgaWUgPSBqO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29sbGluZWFyaXR5IGNoZWNrXG4gICAgICAgIGlmIChjID09PSAwICYmIHYuTGVuZ3RoU3F1YXJlZCgpID4gci5MZW5ndGhTcXVhcmVkKCkpIHtcbiAgICAgICAgICBpZSA9IGo7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgKyttO1xuICAgICAgaWggPSBpZTtcblxuICAgICAgaWYgKGllID09PSBpMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1fY291bnQgPSBtO1xuICAgIHRoaXMubV92ZXJ0aWNlcyA9IGIyVmVjMi5NYWtlQXJyYXkodGhpcy5tX2NvdW50KTtcbiAgICB0aGlzLm1fbm9ybWFscyA9IGIyVmVjMi5NYWtlQXJyYXkodGhpcy5tX2NvdW50KTtcblxuICAgIC8vIENvcHkgdmVydGljZXMuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IG07ICsraSkge1xuICAgICAgdGhpcy5tX3ZlcnRpY2VzW2ldLkNvcHkocHNbaHVsbFtpXV0pO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgbm9ybWFscy4gRW5zdXJlIHRoZSBlZGdlcyBoYXZlIG5vbi16ZXJvIGxlbmd0aC5cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbTsgKytpKSB7XG4gICAgICBjb25zdCB2ZXJ0ZXhpMTogYjJWZWMyID0gdGhpcy5tX3ZlcnRpY2VzW2ldO1xuICAgICAgY29uc3QgdmVydGV4aTI6IGIyVmVjMiA9IHRoaXMubV92ZXJ0aWNlc1soaSArIDEpICUgbV07XG4gICAgICBjb25zdCBlZGdlOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodmVydGV4aTIsIHZlcnRleGkxLCBiMlZlYzIuc190MCk7IC8vIGVkZ2UgdXNlcyBzX3QwXG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQoZWRnZS5MZW5ndGhTcXVhcmVkKCkgPiBiMl9lcHNpbG9uX3NxKTtcbiAgICAgIGIyVmVjMi5Dcm9zc1ZPbmUoZWRnZSwgdGhpcy5tX25vcm1hbHNbaV0pLlNlbGZOb3JtYWxpemUoKTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIHRoZSBwb2x5Z29uIGNlbnRyb2lkLlxuICAgIGIyUG9seWdvblNoYXBlLkNvbXB1dGVDZW50cm9pZCh0aGlzLm1fdmVydGljZXMsIG0sIHRoaXMubV9jZW50cm9pZCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vLyBCdWlsZCB2ZXJ0aWNlcyB0byByZXByZXNlbnQgYW4gYXhpcy1hbGlnbmVkIGJveCBvciBhbiBvcmllbnRlZCBib3guXG4gIC8vLyBAcGFyYW0gaHggdGhlIGhhbGYtd2lkdGguXG4gIC8vLyBAcGFyYW0gaHkgdGhlIGhhbGYtaGVpZ2h0LlxuICAvLy8gQHBhcmFtIGNlbnRlciB0aGUgY2VudGVyIG9mIHRoZSBib3ggaW4gbG9jYWwgY29vcmRpbmF0ZXMuXG4gIC8vLyBAcGFyYW0gYW5nbGUgdGhlIHJvdGF0aW9uIG9mIHRoZSBib3ggaW4gbG9jYWwgY29vcmRpbmF0ZXMuXG4gIHB1YmxpYyBTZXRBc0JveChoeDogbnVtYmVyLCBoeTogbnVtYmVyLCBjZW50ZXI/OiBYWSwgYW5nbGU6IG51bWJlciA9IDApOiBiMlBvbHlnb25TaGFwZSB7XG4gICAgdGhpcy5tX2NvdW50ID0gNDtcbiAgICB0aGlzLm1fdmVydGljZXMgPSBiMlZlYzIuTWFrZUFycmF5KHRoaXMubV9jb3VudCk7XG4gICAgdGhpcy5tX25vcm1hbHMgPSBiMlZlYzIuTWFrZUFycmF5KHRoaXMubV9jb3VudCk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzBdLlNldCgoLWh4KSwgKC1oeSkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1sxXS5TZXQoaHgsICgtaHkpKTtcbiAgICB0aGlzLm1fdmVydGljZXNbMl0uU2V0KGh4LCBoeSk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzNdLlNldCgoLWh4KSwgaHkpO1xuICAgIHRoaXMubV9ub3JtYWxzWzBdLlNldCgwLCAoLTEpKTtcbiAgICB0aGlzLm1fbm9ybWFsc1sxXS5TZXQoMSwgMCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMl0uU2V0KDAsIDEpO1xuICAgIHRoaXMubV9ub3JtYWxzWzNdLlNldCgoLTEpLCAwKTtcbiAgICB0aGlzLm1fY2VudHJvaWQuU2V0WmVybygpO1xuXG4gICAgaWYgKGNlbnRlcikge1xuICAgICAgdGhpcy5tX2NlbnRyb2lkLkNvcHkoY2VudGVyKTtcblxuICAgICAgY29uc3QgeGY6IGIyVHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gICAgICB4Zi5TZXRQb3NpdGlvbihjZW50ZXIpO1xuICAgICAgeGYuU2V0Um90YXRpb25BbmdsZShhbmdsZSk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSB2ZXJ0aWNlcyBhbmQgbm9ybWFscy5cbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgICBiMlRyYW5zZm9ybS5NdWxYVih4ZiwgdGhpcy5tX3ZlcnRpY2VzW2ldLCB0aGlzLm1fdmVydGljZXNbaV0pO1xuICAgICAgICBiMlJvdC5NdWxSVih4Zi5xLCB0aGlzLm1fbm9ybWFsc1tpXSwgdGhpcy5tX25vcm1hbHNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8vIEBzZWUgYjJTaGFwZTo6VGVzdFBvaW50XG4gIHByaXZhdGUgc3RhdGljIFRlc3RQb2ludF9zX3BMb2NhbCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFRlc3RQb2ludCh4ZjogYjJUcmFuc2Zvcm0sIHA6IFhZKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcExvY2FsOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxUWFYoeGYsIHAsIGIyUG9seWdvblNoYXBlLlRlc3RQb2ludF9zX3BMb2NhbCk7XG5cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGRvdDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHRoaXMubV9ub3JtYWxzW2ldLCBiMlZlYzIuU3ViVlYocExvY2FsLCB0aGlzLm1fdmVydGljZXNbaV0sIGIyVmVjMi5zX3QwKSk7XG4gICAgICBpZiAoZG90ID4gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gIC8vLyBAc2VlIGIyU2hhcGU6OkNvbXB1dGVEaXN0YW5jZVxuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlRGlzdGFuY2Vfc19wTG9jYWwgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVEaXN0YW5jZV9zX25vcm1hbEZvck1heERpc3RhbmNlID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlRGlzdGFuY2Vfc19taW5EaXN0YW5jZSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZURpc3RhbmNlX3NfZGlzdGFuY2UgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBDb21wdXRlRGlzdGFuY2UoeGY6IGIyVHJhbnNmb3JtLCBwOiBiMlZlYzIsIG5vcm1hbDogYjJWZWMyLCBjaGlsZEluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHBMb2NhbCA9IGIyVHJhbnNmb3JtLk11bFRYVih4ZiwgcCwgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZURpc3RhbmNlX3NfcExvY2FsKTtcbiAgICBsZXQgbWF4RGlzdGFuY2UgPSAtYjJfbWF4RmxvYXQ7XG4gICAgY29uc3Qgbm9ybWFsRm9yTWF4RGlzdGFuY2UgPSBiMlBvbHlnb25TaGFwZS5Db21wdXRlRGlzdGFuY2Vfc19ub3JtYWxGb3JNYXhEaXN0YW5jZS5Db3B5KHBMb2NhbCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICBjb25zdCBkb3QgPSBiMlZlYzIuRG90VlYodGhpcy5tX25vcm1hbHNbaV0sIGIyVmVjMi5TdWJWVihwTG9jYWwsIHRoaXMubV92ZXJ0aWNlc1tpXSwgYjJWZWMyLnNfdDApKTtcbiAgICAgIGlmIChkb3QgPiBtYXhEaXN0YW5jZSkge1xuICAgICAgICBtYXhEaXN0YW5jZSA9IGRvdDtcbiAgICAgICAgbm9ybWFsRm9yTWF4RGlzdGFuY2UuQ29weSh0aGlzLm1fbm9ybWFsc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1heERpc3RhbmNlID4gMCkge1xuICAgICAgY29uc3QgbWluRGlzdGFuY2UgPSBiMlBvbHlnb25TaGFwZS5Db21wdXRlRGlzdGFuY2Vfc19taW5EaXN0YW5jZS5Db3B5KG5vcm1hbEZvck1heERpc3RhbmNlKTtcbiAgICAgIGxldCBtaW5EaXN0YW5jZTIgPSBtYXhEaXN0YW5jZSAqIG1heERpc3RhbmNlO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGIyVmVjMi5TdWJWVihwTG9jYWwsIHRoaXMubV92ZXJ0aWNlc1tpXSwgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZURpc3RhbmNlX3NfZGlzdGFuY2UpO1xuICAgICAgICBjb25zdCBkaXN0YW5jZTIgPSBkaXN0YW5jZS5MZW5ndGhTcXVhcmVkKCk7XG4gICAgICAgIGlmIChtaW5EaXN0YW5jZTIgPiBkaXN0YW5jZTIpIHtcbiAgICAgICAgICBtaW5EaXN0YW5jZS5Db3B5KGRpc3RhbmNlKTtcbiAgICAgICAgICBtaW5EaXN0YW5jZTIgPSBkaXN0YW5jZTI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYjJSb3QuTXVsUlYoeGYucSwgbWluRGlzdGFuY2UsIG5vcm1hbCk7XG4gICAgICBub3JtYWwuTm9ybWFsaXplKCk7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KG1pbkRpc3RhbmNlMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGIyUm90Lk11bFJWKHhmLnEsIG5vcm1hbEZvck1heERpc3RhbmNlLCBub3JtYWwpO1xuICAgICAgcmV0dXJuIG1heERpc3RhbmNlO1xuICAgIH1cbiAgfVxuICAvLyAjZW5kaWZcblxuICAvLy8gSW1wbGVtZW50IGIyU2hhcGUuXG4gIC8vLyBAbm90ZSBiZWNhdXNlIHRoZSBwb2x5Z29uIGlzIHNvbGlkLCByYXlzIHRoYXQgc3RhcnQgaW5zaWRlIGRvIG5vdCBoaXQgYmVjYXVzZSB0aGUgbm9ybWFsIGlzXG4gIC8vLyBub3QgZGVmaW5lZC5cbiAgcHJpdmF0ZSBzdGF0aWMgUmF5Q2FzdF9zX3AxID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBSYXlDYXN0X3NfcDIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFJheUNhc3Rfc19kID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgUmF5Q2FzdChvdXRwdXQ6IGIyUmF5Q2FzdE91dHB1dCwgaW5wdXQ6IGIyUmF5Q2FzdElucHV0LCB4ZjogYjJUcmFuc2Zvcm0sIGNoaWxkSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIFB1dCB0aGUgcmF5IGludG8gdGhlIHBvbHlnb24ncyBmcmFtZSBvZiByZWZlcmVuY2UuXG4gICAgY29uc3QgcDE6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFRYVih4ZiwgaW5wdXQucDEsIGIyUG9seWdvblNoYXBlLlJheUNhc3Rfc19wMSk7XG4gICAgY29uc3QgcDI6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFRYVih4ZiwgaW5wdXQucDIsIGIyUG9seWdvblNoYXBlLlJheUNhc3Rfc19wMik7XG4gICAgY29uc3QgZDogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHAyLCBwMSwgYjJQb2x5Z29uU2hhcGUuUmF5Q2FzdF9zX2QpO1xuXG4gICAgbGV0IGxvd2VyOiBudW1iZXIgPSAwLCB1cHBlciA9IGlucHV0Lm1heEZyYWN0aW9uO1xuXG4gICAgbGV0IGluZGV4OiBudW1iZXIgPSAtMTtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgLy8gcCA9IHAxICsgYSAqIGRcbiAgICAgIC8vIGRvdChub3JtYWwsIHAgLSB2KSA9IDBcbiAgICAgIC8vIGRvdChub3JtYWwsIHAxIC0gdikgKyBhICogZG90KG5vcm1hbCwgZCkgPSAwXG4gICAgICBjb25zdCBudW1lcmF0b3I6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fbm9ybWFsc1tpXSwgYjJWZWMyLlN1YlZWKHRoaXMubV92ZXJ0aWNlc1tpXSwgcDEsIGIyVmVjMi5zX3QwKSk7XG4gICAgICBjb25zdCBkZW5vbWluYXRvcjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHRoaXMubV9ub3JtYWxzW2ldLCBkKTtcblxuICAgICAgaWYgKGRlbm9taW5hdG9yID09PSAwKSB7XG4gICAgICAgIGlmIChudW1lcmF0b3IgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3RlOiB3ZSB3YW50IHRoaXMgcHJlZGljYXRlIHdpdGhvdXQgZGl2aXNpb246XG4gICAgICAgIC8vIGxvd2VyIDwgbnVtZXJhdG9yIC8gZGVub21pbmF0b3IsIHdoZXJlIGRlbm9taW5hdG9yIDwgMFxuICAgICAgICAvLyBTaW5jZSBkZW5vbWluYXRvciA8IDAsIHdlIGhhdmUgdG8gZmxpcCB0aGUgaW5lcXVhbGl0eTpcbiAgICAgICAgLy8gbG93ZXIgPCBudW1lcmF0b3IgLyBkZW5vbWluYXRvciA8PT0+IGRlbm9taW5hdG9yICogbG93ZXIgPiBudW1lcmF0b3IuXG4gICAgICAgIGlmIChkZW5vbWluYXRvciA8IDAgJiYgbnVtZXJhdG9yIDwgbG93ZXIgKiBkZW5vbWluYXRvcikge1xuICAgICAgICAgIC8vIEluY3JlYXNlIGxvd2VyLlxuICAgICAgICAgIC8vIFRoZSBzZWdtZW50IGVudGVycyB0aGlzIGhhbGYtc3BhY2UuXG4gICAgICAgICAgbG93ZXIgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVub21pbmF0b3IgPiAwICYmIG51bWVyYXRvciA8IHVwcGVyICogZGVub21pbmF0b3IpIHtcbiAgICAgICAgICAvLyBEZWNyZWFzZSB1cHBlci5cbiAgICAgICAgICAvLyBUaGUgc2VnbWVudCBleGl0cyB0aGlzIGhhbGYtc3BhY2UuXG4gICAgICAgICAgdXBwZXIgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgdXNlIG9mIGVwc2lsb24gaGVyZSBjYXVzZXMgdGhlIGFzc2VydCBvbiBsb3dlciB0byB0cmlwXG4gICAgICAvLyBpbiBzb21lIGNhc2VzLiBBcHBhcmVudGx5IHRoZSB1c2Ugb2YgZXBzaWxvbiB3YXMgdG8gbWFrZSBlZGdlXG4gICAgICAvLyBzaGFwZXMgd29yaywgYnV0IG5vdyB0aG9zZSBhcmUgaGFuZGxlZCBzZXBhcmF0ZWx5LlxuICAgICAgLy8gaWYgKHVwcGVyIDwgbG93ZXIgLSBiMl9lcHNpbG9uKVxuICAgICAgaWYgKHVwcGVyIDwgbG93ZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERFQlVHOiBiMkFzc2VydCgwIDw9IGxvd2VyICYmIGxvd2VyIDw9IGlucHV0Lm1heEZyYWN0aW9uKTtcblxuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICBvdXRwdXQuZnJhY3Rpb24gPSBsb3dlcjtcbiAgICAgIGIyUm90Lk11bFJWKHhmLnEsIHRoaXMubV9ub3JtYWxzW2luZGV4XSwgb3V0cHV0Lm5vcm1hbCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLy8gQHNlZSBiMlNoYXBlOjpDb21wdXRlQUFCQlxuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlQUFCQl9zX3YgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBDb21wdXRlQUFCQihhYWJiOiBiMkFBQkIsIHhmOiBiMlRyYW5zZm9ybSwgY2hpbGRJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbG93ZXI6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmLCB0aGlzLm1fdmVydGljZXNbMF0sIGFhYmIubG93ZXJCb3VuZCk7XG4gICAgY29uc3QgdXBwZXI6IGIyVmVjMiA9IGFhYmIudXBwZXJCb3VuZC5Db3B5KGxvd2VyKTtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgdjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGYsIHRoaXMubV92ZXJ0aWNlc1tpXSwgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZUFBQkJfc192KTtcbiAgICAgIGIyVmVjMi5NaW5WKHYsIGxvd2VyLCBsb3dlcik7XG4gICAgICBiMlZlYzIuTWF4Vih2LCB1cHBlciwgdXBwZXIpO1xuICAgIH1cblxuICAgIGNvbnN0IHI6IG51bWJlciA9IHRoaXMubV9yYWRpdXM7XG4gICAgbG93ZXIuU2VsZlN1YlhZKHIsIHIpO1xuICAgIHVwcGVyLlNlbGZBZGRYWShyLCByKTtcbiAgfVxuXG4gIC8vLyBAc2VlIGIyU2hhcGU6OkNvbXB1dGVNYXNzXG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVNYXNzX3NfY2VudGVyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlTWFzc19zX3MgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVNYXNzX3NfZTEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVNYXNzX3NfZTIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBDb21wdXRlTWFzcyhtYXNzRGF0YTogYjJNYXNzRGF0YSwgZGVuc2l0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gUG9seWdvbiBtYXNzLCBjZW50cm9pZCwgYW5kIGluZXJ0aWEuXG4gICAgLy8gTGV0IHJobyBiZSB0aGUgcG9seWdvbiBkZW5zaXR5IGluIG1hc3MgcGVyIHVuaXQgYXJlYS5cbiAgICAvLyBUaGVuOlxuICAgIC8vIG1hc3MgPSByaG8gKiBpbnQoZEEpXG4gICAgLy8gY2VudHJvaWQueCA9ICgxL21hc3MpICogcmhvICogaW50KHggKiBkQSlcbiAgICAvLyBjZW50cm9pZC55ID0gKDEvbWFzcykgKiByaG8gKiBpbnQoeSAqIGRBKVxuICAgIC8vIEkgPSByaG8gKiBpbnQoKHgqeCArIHkqeSkgKiBkQSlcbiAgICAvL1xuICAgIC8vIFdlIGNhbiBjb21wdXRlIHRoZXNlIGludGVncmFscyBieSBzdW1taW5nIGFsbCB0aGUgaW50ZWdyYWxzXG4gICAgLy8gZm9yIGVhY2ggdHJpYW5nbGUgb2YgdGhlIHBvbHlnb24uIFRvIGV2YWx1YXRlIHRoZSBpbnRlZ3JhbFxuICAgIC8vIGZvciBhIHNpbmdsZSB0cmlhbmdsZSwgd2UgbWFrZSBhIGNoYW5nZSBvZiB2YXJpYWJsZXMgdG9cbiAgICAvLyB0aGUgKHUsdikgY29vcmRpbmF0ZXMgb2YgdGhlIHRyaWFuZ2xlOlxuICAgIC8vIHggPSB4MCArIGUxeCAqIHUgKyBlMnggKiB2XG4gICAgLy8geSA9IHkwICsgZTF5ICogdSArIGUyeSAqIHZcbiAgICAvLyB3aGVyZSAwIDw9IHUgJiYgMCA8PSB2ICYmIHUgKyB2IDw9IDEuXG4gICAgLy9cbiAgICAvLyBXZSBpbnRlZ3JhdGUgdSBmcm9tIFswLDEtdl0gYW5kIHRoZW4gdiBmcm9tIFswLDFdLlxuICAgIC8vIFdlIGFsc28gbmVlZCB0byB1c2UgdGhlIEphY29iaWFuIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbjpcbiAgICAvLyBEID0gY3Jvc3MoZTEsIGUyKVxuICAgIC8vXG4gICAgLy8gU2ltcGxpZmljYXRpb246IHRyaWFuZ2xlIGNlbnRyb2lkID0gKDEvMykgKiAocDEgKyBwMiArIHAzKVxuICAgIC8vXG4gICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGRlcml2YXRpb24gaXMgaGFuZGxlZCBieSBjb21wdXRlciBhbGdlYnJhLlxuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9jb3VudCA+PSAzKTtcblxuICAgIGNvbnN0IGNlbnRlcjogYjJWZWMyID0gYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZU1hc3Nfc19jZW50ZXIuU2V0WmVybygpO1xuICAgIGxldCBhcmVhOiBudW1iZXIgPSAwO1xuICAgIGxldCBJOiBudW1iZXIgPSAwO1xuXG4gICAgLy8gR2V0IGEgcmVmZXJlbmNlIHBvaW50IGZvciBmb3JtaW5nIHRyaWFuZ2xlcy5cbiAgICAvLyBVc2UgdGhlIGZpcnN0IHZlcnRleCB0byByZWR1Y2Ugcm91bmQtb2ZmIGVycm9ycy5cbiAgICBjb25zdCBzOiBiMlZlYzIgPSBiMlBvbHlnb25TaGFwZS5Db21wdXRlTWFzc19zX3MuQ29weSh0aGlzLm1fdmVydGljZXNbMF0pO1xuXG4gICAgY29uc3Qga19pbnYzOiBudW1iZXIgPSAxIC8gMztcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgLy8gVHJpYW5nbGUgdmVydGljZXMuXG4gICAgICBjb25zdCBlMTogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHRoaXMubV92ZXJ0aWNlc1tpXSwgcywgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZU1hc3Nfc19lMSk7XG4gICAgICBjb25zdCBlMjogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHRoaXMubV92ZXJ0aWNlc1soaSArIDEpICUgdGhpcy5tX2NvdW50XSwgcywgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZU1hc3Nfc19lMik7XG5cbiAgICAgIGNvbnN0IEQ6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKGUxLCBlMik7XG5cbiAgICAgIGNvbnN0IHRyaWFuZ2xlQXJlYTogbnVtYmVyID0gMC41ICogRDtcbiAgICAgIGFyZWEgKz0gdHJpYW5nbGVBcmVhO1xuXG4gICAgICAvLyBBcmVhIHdlaWdodGVkIGNlbnRyb2lkXG4gICAgICBjZW50ZXIuU2VsZkFkZChiMlZlYzIuTXVsU1YodHJpYW5nbGVBcmVhICoga19pbnYzLCBiMlZlYzIuQWRkVlYoZTEsIGUyLCBiMlZlYzIuc190MCksIGIyVmVjMi5zX3QxKSk7XG5cbiAgICAgIGNvbnN0IGV4MTogbnVtYmVyID0gZTEueDtcbiAgICAgIGNvbnN0IGV5MTogbnVtYmVyID0gZTEueTtcbiAgICAgIGNvbnN0IGV4MjogbnVtYmVyID0gZTIueDtcbiAgICAgIGNvbnN0IGV5MjogbnVtYmVyID0gZTIueTtcblxuICAgICAgY29uc3QgaW50eDI6IG51bWJlciA9IGV4MSAqIGV4MSArIGV4MiAqIGV4MSArIGV4MiAqIGV4MjtcbiAgICAgIGNvbnN0IGludHkyOiBudW1iZXIgPSBleTEgKiBleTEgKyBleTIgKiBleTEgKyBleTIgKiBleTI7XG5cbiAgICAgIEkgKz0gKDAuMjUgKiBrX2ludjMgKiBEKSAqIChpbnR4MiArIGludHkyKTtcbiAgICB9XG5cbiAgICAvLyBUb3RhbCBtYXNzXG4gICAgbWFzc0RhdGEubWFzcyA9IGRlbnNpdHkgKiBhcmVhO1xuXG4gICAgLy8gQ2VudGVyIG9mIG1hc3NcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYXJlYSA+IGIyX2Vwc2lsb24pO1xuICAgIGNlbnRlci5TZWxmTXVsKDEgLyBhcmVhKTtcbiAgICBiMlZlYzIuQWRkVlYoY2VudGVyLCBzLCBtYXNzRGF0YS5jZW50ZXIpO1xuXG4gICAgLy8gSW5lcnRpYSB0ZW5zb3IgcmVsYXRpdmUgdG8gdGhlIGxvY2FsIG9yaWdpbiAocG9pbnQgcykuXG4gICAgbWFzc0RhdGEuSSA9IGRlbnNpdHkgKiBJO1xuXG4gICAgLy8gU2hpZnQgdG8gY2VudGVyIG9mIG1hc3MgdGhlbiB0byBvcmlnaW5hbCBib2R5IG9yaWdpbi5cbiAgICBtYXNzRGF0YS5JICs9IG1hc3NEYXRhLm1hc3MgKiAoYjJWZWMyLkRvdFZWKG1hc3NEYXRhLmNlbnRlciwgbWFzc0RhdGEuY2VudGVyKSAtIGIyVmVjMi5Eb3RWVihjZW50ZXIsIGNlbnRlcikpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgVmFsaWRhdGVfc19lID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBWYWxpZGF0ZV9zX3YgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBWYWxpZGF0ZSgpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGkxID0gaTtcbiAgICAgIGNvbnN0IGkyID0gKGkgKyAxKSAlIHRoaXMubV9jb3VudDtcbiAgICAgIGNvbnN0IHA6IGIyVmVjMiA9IHRoaXMubV92ZXJ0aWNlc1tpMV07XG4gICAgICBjb25zdCBlOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodGhpcy5tX3ZlcnRpY2VzW2kyXSwgcCwgYjJQb2x5Z29uU2hhcGUuVmFsaWRhdGVfc19lKTtcblxuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHRoaXMubV9jb3VudDsgKytqKSB7XG4gICAgICAgIGlmIChqID09PSBpMSB8fCBqID09PSBpMikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdjogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHRoaXMubV92ZXJ0aWNlc1tqXSwgcCwgYjJQb2x5Z29uU2hhcGUuVmFsaWRhdGVfc192KTtcbiAgICAgICAgY29uc3QgYzogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYoZSwgdik7XG4gICAgICAgIGlmIChjIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIFNldHVwRGlzdGFuY2VQcm94eShwcm94eTogYjJEaXN0YW5jZVByb3h5LCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgcHJveHkubV92ZXJ0aWNlcyA9IHRoaXMubV92ZXJ0aWNlcztcbiAgICBwcm94eS5tX2NvdW50ID0gdGhpcy5tX2NvdW50O1xuICAgIHByb3h5Lm1fcmFkaXVzID0gdGhpcy5tX3JhZGl1cztcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVTdWJtZXJnZWRBcmVhX3Nfbm9ybWFsTCA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZVN1Ym1lcmdlZEFyZWFfc19tZCA9IG5ldyBiMk1hc3NEYXRhKCk7XG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVTdWJtZXJnZWRBcmVhX3NfaW50b1ZlYyA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZVN1Ym1lcmdlZEFyZWFfc19vdXRvVmVjID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlU3VibWVyZ2VkQXJlYV9zX2NlbnRlciA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIENvbXB1dGVTdWJtZXJnZWRBcmVhKG5vcm1hbDogYjJWZWMyLCBvZmZzZXQ6IG51bWJlciwgeGY6IGIyVHJhbnNmb3JtLCBjOiBiMlZlYzIpOiBudW1iZXIge1xuICAgIC8vIFRyYW5zZm9ybSBwbGFuZSBpbnRvIHNoYXBlIGNvLW9yZGluYXRlc1xuICAgIGNvbnN0IG5vcm1hbEw6IGIyVmVjMiA9IGIyUm90Lk11bFRSVih4Zi5xLCBub3JtYWwsIGIyUG9seWdvblNoYXBlLkNvbXB1dGVTdWJtZXJnZWRBcmVhX3Nfbm9ybWFsTCk7XG4gICAgY29uc3Qgb2Zmc2V0TDogbnVtYmVyID0gb2Zmc2V0IC0gYjJWZWMyLkRvdFZWKG5vcm1hbCwgeGYucCk7XG5cbiAgICBjb25zdCBkZXB0aHM6IG51bWJlcltdID0gW107XG4gICAgbGV0IGRpdmVDb3VudDogbnVtYmVyID0gMDtcbiAgICBsZXQgaW50b0luZGV4OiBudW1iZXIgPSAtMTtcbiAgICBsZXQgb3V0b0luZGV4OiBudW1iZXIgPSAtMTtcblxuICAgIGxldCBsYXN0U3VibWVyZ2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICBkZXB0aHNbaV0gPSBiMlZlYzIuRG90VlYobm9ybWFsTCwgdGhpcy5tX3ZlcnRpY2VzW2ldKSAtIG9mZnNldEw7XG4gICAgICBjb25zdCBpc1N1Ym1lcmdlZDogYm9vbGVhbiA9IGRlcHRoc1tpXSA8ICgtYjJfZXBzaWxvbik7XG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgaWYgKGlzU3VibWVyZ2VkKSB7XG4gICAgICAgICAgaWYgKCFsYXN0U3VibWVyZ2VkKSB7XG4gICAgICAgICAgICBpbnRvSW5kZXggPSBpIC0gMTtcbiAgICAgICAgICAgIGRpdmVDb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobGFzdFN1Ym1lcmdlZCkge1xuICAgICAgICAgICAgb3V0b0luZGV4ID0gaSAtIDE7XG4gICAgICAgICAgICBkaXZlQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxhc3RTdWJtZXJnZWQgPSBpc1N1Ym1lcmdlZDtcbiAgICB9XG4gICAgc3dpdGNoIChkaXZlQ291bnQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgaWYgKGxhc3RTdWJtZXJnZWQpIHtcbiAgICAgICAgICAvLyBDb21wbGV0ZWx5IHN1Ym1lcmdlZFxuICAgICAgICAgIGNvbnN0IG1kOiBiMk1hc3NEYXRhID0gYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZVN1Ym1lcmdlZEFyZWFfc19tZDtcbiAgICAgICAgICB0aGlzLkNvbXB1dGVNYXNzKG1kLCAxKTtcbiAgICAgICAgICBiMlRyYW5zZm9ybS5NdWxYVih4ZiwgbWQuY2VudGVyLCBjKTtcbiAgICAgICAgICByZXR1cm4gbWQubWFzcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDb21wbGV0ZWx5IGRyeVxuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGlmIChpbnRvSW5kZXggPT09ICgtMSkpIHtcbiAgICAgICAgICBpbnRvSW5kZXggPSB0aGlzLm1fY291bnQgLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dG9JbmRleCA9IHRoaXMubV9jb3VudCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGludG9JbmRleDI6IG51bWJlciA9ICgoaW50b0luZGV4ICsgMSkgJSB0aGlzLm1fY291bnQpO1xuICAgIGNvbnN0IG91dG9JbmRleDI6IG51bWJlciA9ICgob3V0b0luZGV4ICsgMSkgJSB0aGlzLm1fY291bnQpO1xuICAgIGNvbnN0IGludG9MYW1kZGE6IG51bWJlciA9ICgwIC0gZGVwdGhzW2ludG9JbmRleF0pIC8gKGRlcHRoc1tpbnRvSW5kZXgyXSAtIGRlcHRoc1tpbnRvSW5kZXhdKTtcbiAgICBjb25zdCBvdXRvTGFtZGRhOiBudW1iZXIgPSAoMCAtIGRlcHRoc1tvdXRvSW5kZXhdKSAvIChkZXB0aHNbb3V0b0luZGV4Ml0gLSBkZXB0aHNbb3V0b0luZGV4XSk7XG5cbiAgICBjb25zdCBpbnRvVmVjOiBiMlZlYzIgPSBiMlBvbHlnb25TaGFwZS5Db21wdXRlU3VibWVyZ2VkQXJlYV9zX2ludG9WZWMuU2V0KFxuICAgICAgdGhpcy5tX3ZlcnRpY2VzW2ludG9JbmRleF0ueCAqICgxIC0gaW50b0xhbWRkYSkgKyB0aGlzLm1fdmVydGljZXNbaW50b0luZGV4Ml0ueCAqIGludG9MYW1kZGEsXG4gICAgICB0aGlzLm1fdmVydGljZXNbaW50b0luZGV4XS55ICogKDEgLSBpbnRvTGFtZGRhKSArIHRoaXMubV92ZXJ0aWNlc1tpbnRvSW5kZXgyXS55ICogaW50b0xhbWRkYSk7XG4gICAgY29uc3Qgb3V0b1ZlYzogYjJWZWMyID0gYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZVN1Ym1lcmdlZEFyZWFfc19vdXRvVmVjLlNldChcbiAgICAgIHRoaXMubV92ZXJ0aWNlc1tvdXRvSW5kZXhdLnggKiAoMSAtIG91dG9MYW1kZGEpICsgdGhpcy5tX3ZlcnRpY2VzW291dG9JbmRleDJdLnggKiBvdXRvTGFtZGRhLFxuICAgICAgdGhpcy5tX3ZlcnRpY2VzW291dG9JbmRleF0ueSAqICgxIC0gb3V0b0xhbWRkYSkgKyB0aGlzLm1fdmVydGljZXNbb3V0b0luZGV4Ml0ueSAqIG91dG9MYW1kZGEpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhY2N1bXVsYXRvclxuICAgIGxldCBhcmVhOiBudW1iZXIgPSAwO1xuICAgIGNvbnN0IGNlbnRlcjogYjJWZWMyID0gYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZVN1Ym1lcmdlZEFyZWFfc19jZW50ZXIuU2V0WmVybygpO1xuICAgIGxldCBwMjogYjJWZWMyID0gdGhpcy5tX3ZlcnRpY2VzW2ludG9JbmRleDJdO1xuICAgIGxldCBwMzogYjJWZWMyO1xuXG4gICAgLy8gQW4gYXdrd2FyZCBsb29wIGZyb20gaW50b0luZGV4MisxIHRvIG91dEluZGV4MlxuICAgIGxldCBpOiBudW1iZXIgPSBpbnRvSW5kZXgyO1xuICAgIHdoaWxlIChpICE9PSBvdXRvSW5kZXgyKSB7XG4gICAgICBpID0gKGkgKyAxKSAlIHRoaXMubV9jb3VudDtcbiAgICAgIGlmIChpID09PSBvdXRvSW5kZXgyKSB7XG4gICAgICAgIHAzID0gb3V0b1ZlYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAzID0gdGhpcy5tX3ZlcnRpY2VzW2ldO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmlhbmdsZUFyZWE6IG51bWJlciA9IDAuNSAqICgocDIueCAtIGludG9WZWMueCkgKiAocDMueSAtIGludG9WZWMueSkgLSAocDIueSAtIGludG9WZWMueSkgKiAocDMueCAtIGludG9WZWMueCkpO1xuICAgICAgYXJlYSArPSB0cmlhbmdsZUFyZWE7XG4gICAgICAvLyBBcmVhIHdlaWdodGVkIGNlbnRyb2lkXG4gICAgICBjZW50ZXIueCArPSB0cmlhbmdsZUFyZWEgKiAoaW50b1ZlYy54ICsgcDIueCArIHAzLngpIC8gMztcbiAgICAgIGNlbnRlci55ICs9IHRyaWFuZ2xlQXJlYSAqIChpbnRvVmVjLnkgKyBwMi55ICsgcDMueSkgLyAzO1xuXG4gICAgICBwMiA9IHAzO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSBhbmQgdHJhbnNmb3JtIGNlbnRyb2lkXG4gICAgY2VudGVyLlNlbGZNdWwoMSAvIGFyZWEpO1xuICAgIGIyVHJhbnNmb3JtLk11bFhWKHhmLCBjZW50ZXIsIGMpO1xuXG4gICAgcmV0dXJuIGFyZWE7XG4gIH1cblxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICBsb2coXCIgICAgY29uc3Qgc2hhcGU6IGIyUG9seWdvblNoYXBlID0gbmV3IGIyUG9seWdvblNoYXBlKCk7XFxuXCIpO1xuICAgIGxvZyhcIiAgICBjb25zdCB2czogYjJWZWMyW10gPSBbXTtcXG5cIik7XG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICBsb2coXCIgICAgdnNbJWRdID0gbmV3IGIyVmVjMiglLjE1ZiwgJS4xNWYpO1xcblwiLCBpLCB0aGlzLm1fdmVydGljZXNbaV0ueCwgdGhpcy5tX3ZlcnRpY2VzW2ldLnkpO1xuICAgIH1cbiAgICBsb2coXCIgICAgc2hhcGUuU2V0KHZzLCAlZCk7XFxuXCIsIHRoaXMubV9jb3VudCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlQ2VudHJvaWRfc19zID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlQ2VudHJvaWRfc19wMSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZUNlbnRyb2lkX3NfcDIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIENvbXB1dGVDZW50cm9pZF9zX3AzID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBDb21wdXRlQ2VudHJvaWRfc19lMSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZUNlbnRyb2lkX3NfZTIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgQ29tcHV0ZUNlbnRyb2lkKHZzOiBiMlZlYzJbXSwgY291bnQ6IG51bWJlciwgb3V0OiBiMlZlYzIpOiBiMlZlYzIge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChjb3VudCA+PSAzKTtcblxuICAgIGNvbnN0IGM6IGIyVmVjMiA9IG91dDsgYy5TZXRaZXJvKCk7XG4gICAgbGV0IGFyZWE6IG51bWJlciA9IDA7XG5cbiAgICAvLyBHZXQgYSByZWZlcmVuY2UgcG9pbnQgZm9yIGZvcm1pbmcgdHJpYW5nbGVzLlxuICAgIC8vIFVzZSB0aGUgZmlyc3QgdmVydGV4IHRvIHJlZHVjZSByb3VuZC1vZmYgZXJyb3JzLlxuICAgIGNvbnN0IHM6IGIyVmVjMiA9IGIyUG9seWdvblNoYXBlLkNvbXB1dGVDZW50cm9pZF9zX3MuQ29weSh2c1swXSk7XG5cbiAgICBjb25zdCBpbnYzOiBudW1iZXIgPSAxIC8gMztcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAvLyBUcmlhbmdsZSB2ZXJ0aWNlcy5cbiAgICAgIGNvbnN0IHAxOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodnNbMF0sIHMsIGIyUG9seWdvblNoYXBlLkNvbXB1dGVDZW50cm9pZF9zX3AxKTtcbiAgICAgIGNvbnN0IHAyOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodnNbaV0sIHMsIGIyUG9seWdvblNoYXBlLkNvbXB1dGVDZW50cm9pZF9zX3AyKTtcbiAgICAgIGNvbnN0IHAzOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYodnNbKGkgKyAxKSAlIGNvdW50XSwgcywgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZUNlbnRyb2lkX3NfcDMpO1xuXG4gICAgICBjb25zdCBlMTogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHAyLCBwMSwgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZUNlbnRyb2lkX3NfZTEpO1xuICAgICAgY29uc3QgZTI6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihwMywgcDEsIGIyUG9seWdvblNoYXBlLkNvbXB1dGVDZW50cm9pZF9zX2UyKTtcblxuICAgICAgY29uc3QgRDogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYoZTEsIGUyKTtcblxuICAgICAgY29uc3QgdHJpYW5nbGVBcmVhOiBudW1iZXIgPSAwLjUgKiBEO1xuICAgICAgYXJlYSArPSB0cmlhbmdsZUFyZWE7XG5cbiAgICAgIC8vIEFyZWEgd2VpZ2h0ZWQgY2VudHJvaWRcbiAgICAgIGMueCArPSB0cmlhbmdsZUFyZWEgKiBpbnYzICogKHAxLnggKyBwMi54ICsgcDMueCk7XG4gICAgICBjLnkgKz0gdHJpYW5nbGVBcmVhICogaW52MyAqIChwMS55ICsgcDIueSArIHAzLnkpO1xuICAgIH1cblxuICAgIC8vIENlbnRyb2lkXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGFyZWEgPiBiMl9lcHNpbG9uKTtcbiAgICAvLyBjID0gKDEuMGYgLyBhcmVhKSAqIGMgKyBzO1xuICAgIGMueCA9ICgxIC8gYXJlYSkgKiBjLnggKyBzLng7XG4gICAgYy55ID0gKDEgLyBhcmVhKSAqIGMueSArIHMueTtcbiAgICByZXR1cm4gYztcbiAgfVxuXG4gIC8qXG4gIHB1YmxpYyBzdGF0aWMgQ29tcHV0ZU9CQihvYmIsIHZzLCBjb3VudCkge1xuICAgIGNvbnN0IGk6IG51bWJlciA9IDA7XG4gICAgY29uc3QgcDogQXJyYXkgPSBbY291bnQgKyAxXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgcFtpXSA9IHZzW2ldO1xuICAgIH1cbiAgICBwW2NvdW50XSA9IHBbMF07XG4gICAgY29uc3QgbWluQXJlYSA9IGIyX21heEZsb2F0O1xuICAgIGZvciAoaSA9IDE7IGkgPD0gY291bnQ7ICsraSkge1xuICAgICAgY29uc3Qgcm9vdCA9IHBbaSAtIDFdO1xuICAgICAgY29uc3QgdXhYID0gcFtpXS54IC0gcm9vdC54O1xuICAgICAgY29uc3QgdXhZID0gcFtpXS55IC0gcm9vdC55O1xuICAgICAgY29uc3QgbGVuZ3RoID0gYjJTcXJ0KHV4WCAqIHV4WCArIHV4WSAqIHV4WSk7XG4gICAgICB1eFggLz0gbGVuZ3RoO1xuICAgICAgdXhZIC89IGxlbmd0aDtcbiAgICAgIGNvbnN0IHV5WCA9ICgtdXhZKTtcbiAgICAgIGNvbnN0IHV5WSA9IHV4WDtcbiAgICAgIGNvbnN0IGxvd2VyWCA9IGIyX21heEZsb2F0O1xuICAgICAgY29uc3QgbG93ZXJZID0gYjJfbWF4RmxvYXQ7XG4gICAgICBjb25zdCB1cHBlclggPSAoLWIyX21heEZsb2F0KTtcbiAgICAgIGNvbnN0IHVwcGVyWSA9ICgtYjJfbWF4RmxvYXQpO1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IGNvdW50OyArK2opIHtcbiAgICAgICAgY29uc3QgZFggPSBwW2pdLnggLSByb290Lng7XG4gICAgICAgIGNvbnN0IGRZID0gcFtqXS55IC0gcm9vdC55O1xuICAgICAgICBjb25zdCByWCA9ICh1eFggKiBkWCArIHV4WSAqIGRZKTtcbiAgICAgICAgY29uc3QgclkgPSAodXlYICogZFggKyB1eVkgKiBkWSk7XG4gICAgICAgIGlmIChyWCA8IGxvd2VyWCkgbG93ZXJYID0gclg7XG4gICAgICAgIGlmIChyWSA8IGxvd2VyWSkgbG93ZXJZID0gclk7XG4gICAgICAgIGlmIChyWCA+IHVwcGVyWCkgdXBwZXJYID0gclg7XG4gICAgICAgIGlmIChyWSA+IHVwcGVyWSkgdXBwZXJZID0gclk7XG4gICAgICB9XG4gICAgICBjb25zdCBhcmVhID0gKHVwcGVyWCAtIGxvd2VyWCkgKiAodXBwZXJZIC0gbG93ZXJZKTtcbiAgICAgIGlmIChhcmVhIDwgMC45NSAqIG1pbkFyZWEpIHtcbiAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgIG9iYi5SLmV4LnggPSB1eFg7XG4gICAgICAgIG9iYi5SLmV4LnkgPSB1eFk7XG4gICAgICAgIG9iYi5SLmV5LnggPSB1eVg7XG4gICAgICAgIG9iYi5SLmV5LnkgPSB1eVk7XG4gICAgICAgIGNvbnN0IGNlbnRlcl94OiBudW1iZXIgPSAwLjUgKiAobG93ZXJYICsgdXBwZXJYKTtcbiAgICAgICAgY29uc3QgY2VudGVyX3k6IG51bWJlciA9IDAuNSAqIChsb3dlclkgKyB1cHBlclkpO1xuICAgICAgICBjb25zdCB0TWF0ID0gb2JiLlI7XG4gICAgICAgIG9iYi5jZW50ZXIueCA9IHJvb3QueCArICh0TWF0LmV4LnggKiBjZW50ZXJfeCArIHRNYXQuZXkueCAqIGNlbnRlcl95KTtcbiAgICAgICAgb2JiLmNlbnRlci55ID0gcm9vdC55ICsgKHRNYXQuZXgueSAqIGNlbnRlcl94ICsgdE1hdC5leS55ICogY2VudGVyX3kpO1xuICAgICAgICBvYmIuZXh0ZW50cy54ID0gMC41ICogKHVwcGVyWCAtIGxvd2VyWCk7XG4gICAgICAgIG9iYi5leHRlbnRzLnkgPSAwLjUgKiAodXBwZXJZIC0gbG93ZXJZKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgKi9cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQUE7QUFNQTtBQUFBO0FBTEE7QUFDQTtBQUNBO0FBQ0E7O0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFXQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUEyQkE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBR0E7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBOWlCQTtBQUNBO0FBK0pBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBdUNBO0FBQ0E7QUFDQTtBQTREQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQTZFQTtBQUNBO0FBOEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMEZBO0FBQUE7QUExb0JBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_polygon_shape.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_shape.ts":
/*!*****************************************!*\
  !*** ./src/box2d/collision/b2_shape.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Shape = exports.b2ShapeType = exports.b2MassData = void 0;\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2MassData = (function () {\n    function b2MassData() {\n        this.mass = 0;\n        this.center = new b2_math_1.b2Vec2(0, 0);\n        this.I = 0;\n    }\n    return b2MassData;\n}());\nexports.b2MassData = b2MassData;\nvar b2ShapeType;\n(function (b2ShapeType) {\n    b2ShapeType[b2ShapeType[\"e_unknown\"] = -1] = \"e_unknown\";\n    b2ShapeType[b2ShapeType[\"e_circleShape\"] = 0] = \"e_circleShape\";\n    b2ShapeType[b2ShapeType[\"e_edgeShape\"] = 1] = \"e_edgeShape\";\n    b2ShapeType[b2ShapeType[\"e_polygonShape\"] = 2] = \"e_polygonShape\";\n    b2ShapeType[b2ShapeType[\"e_chainShape\"] = 3] = \"e_chainShape\";\n    b2ShapeType[b2ShapeType[\"e_shapeTypeCount\"] = 4] = \"e_shapeTypeCount\";\n})(b2ShapeType = exports.b2ShapeType || (exports.b2ShapeType = {}));\nvar b2Shape = (function () {\n    function b2Shape(type, radius) {\n        this.m_type = b2ShapeType.e_unknown;\n        this.m_radius = 0;\n        this.m_type = type;\n        this.m_radius = radius;\n    }\n    b2Shape.prototype.Copy = function (other) {\n        this.m_radius = other.m_radius;\n        return this;\n    };\n    b2Shape.prototype.GetType = function () {\n        return this.m_type;\n    };\n    return b2Shape;\n}());\nexports.b2Shape = b2Shape;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX3NoYXBlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbGxpc2lvbi9iMl9zaGFwZS50cz9hYmIyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyVHJhbnNmb3JtLCBYWSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJBQUJCLCBiMlJheUNhc3RJbnB1dCwgYjJSYXlDYXN0T3V0cHV0IH0gZnJvbSBcIi4vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMkRpc3RhbmNlUHJveHkgfSBmcm9tIFwiLi9iMl9kaXN0YW5jZVwiO1xuXG4vLy8gVGhpcyBob2xkcyB0aGUgbWFzcyBkYXRhIGNvbXB1dGVkIGZvciBhIHNoYXBlLlxuZXhwb3J0IGNsYXNzIGIyTWFzc0RhdGEge1xuICAvLy8gVGhlIG1hc3Mgb2YgdGhlIHNoYXBlLCB1c3VhbGx5IGluIGtpbG9ncmFtcy5cbiAgcHVibGljIG1hc3M6IG51bWJlciA9IDA7XG5cbiAgLy8vIFRoZSBwb3NpdGlvbiBvZiB0aGUgc2hhcGUncyBjZW50cm9pZCByZWxhdGl2ZSB0byB0aGUgc2hhcGUncyBvcmlnaW4uXG4gIHB1YmxpYyByZWFkb25seSBjZW50ZXI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMCwgMCk7XG5cbiAgLy8vIFRoZSByb3RhdGlvbmFsIGluZXJ0aWEgb2YgdGhlIHNoYXBlIGFib3V0IHRoZSBsb2NhbCBvcmlnaW4uXG4gIHB1YmxpYyBJOiBudW1iZXIgPSAwO1xufVxuXG5leHBvcnQgZW51bSBiMlNoYXBlVHlwZSB7XG4gIGVfdW5rbm93biA9IC0xLFxuICBlX2NpcmNsZVNoYXBlID0gMCxcbiAgZV9lZGdlU2hhcGUgPSAxLFxuICBlX3BvbHlnb25TaGFwZSA9IDIsXG4gIGVfY2hhaW5TaGFwZSA9IDMsXG4gIGVfc2hhcGVUeXBlQ291bnQgPSA0LFxufVxuXG4vLy8gQSBzaGFwZSBpcyB1c2VkIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLiBZb3UgY2FuIGNyZWF0ZSBhIHNoYXBlIGhvd2V2ZXIgeW91IGxpa2UuXG4vLy8gU2hhcGVzIHVzZWQgZm9yIHNpbXVsYXRpb24gaW4gYjJXb3JsZCBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW4gYSBiMkZpeHR1cmVcbi8vLyBpcyBjcmVhdGVkLiBTaGFwZXMgbWF5IGVuY2Fwc3VsYXRlIGEgb25lIG9yIG1vcmUgY2hpbGQgc2hhcGVzLlxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIGIyU2hhcGUge1xuICBwdWJsaWMgcmVhZG9ubHkgbV90eXBlOiBiMlNoYXBlVHlwZSA9IGIyU2hhcGVUeXBlLmVfdW5rbm93bjtcblxuXHQvLy8gUmFkaXVzIG9mIGEgc2hhcGUuIEZvciBwb2x5Z29uYWwgc2hhcGVzIHRoaXMgbXVzdCBiZSBiMl9wb2x5Z29uUmFkaXVzLiBUaGVyZSBpcyBubyBzdXBwb3J0IGZvclxuXHQvLy8gbWFraW5nIHJvdW5kZWQgcG9seWdvbnMuXG4gIHB1YmxpYyBtX3JhZGl1czogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3Rvcih0eXBlOiBiMlNoYXBlVHlwZSwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICB0aGlzLm1fdHlwZSA9IHR5cGU7XG4gICAgdGhpcy5tX3JhZGl1cyA9IHJhZGl1cztcbiAgfVxuXG4gIC8vLyBDbG9uZSB0aGUgY29uY3JldGUgc2hhcGUuXG4gIHB1YmxpYyBhYnN0cmFjdCBDbG9uZSgpOiBiMlNoYXBlO1xuXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBiMlNoYXBlKTogYjJTaGFwZSB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV90eXBlID09PSBvdGhlci5tX3R5cGUpO1xuICAgIHRoaXMubV9yYWRpdXMgPSBvdGhlci5tX3JhZGl1cztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHR5cGUgb2YgdGhpcyBzaGFwZS4gWW91IGNhbiB1c2UgdGhpcyB0byBkb3duIGNhc3QgdG8gdGhlIGNvbmNyZXRlIHNoYXBlLlxuICAvLy8gQHJldHVybiB0aGUgc2hhcGUgdHlwZS5cbiAgcHVibGljIEdldFR5cGUoKTogYjJTaGFwZVR5cGUge1xuICAgIHJldHVybiB0aGlzLm1fdHlwZTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIG51bWJlciBvZiBjaGlsZCBwcmltaXRpdmVzLlxuICBwdWJsaWMgYWJzdHJhY3QgR2V0Q2hpbGRDb3VudCgpOiBudW1iZXI7XG5cbiAgLy8vIFRlc3QgYSBwb2ludCBmb3IgY29udGFpbm1lbnQgaW4gdGhpcyBzaGFwZS4gVGhpcyBvbmx5IHdvcmtzIGZvciBjb252ZXggc2hhcGVzLlxuICAvLy8gQHBhcmFtIHhmIHRoZSBzaGFwZSB3b3JsZCB0cmFuc2Zvcm0uXG4gIC8vLyBAcGFyYW0gcCBhIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICBwdWJsaWMgYWJzdHJhY3QgVGVzdFBvaW50KHhmOiBiMlRyYW5zZm9ybSwgcDogWFkpOiBib29sZWFuO1xuXG4gIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgLy8vIENvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGN1cnJlbnQgc2hhcGUgdG8gdGhlIHNwZWNpZmllZCBwb2ludC4gVGhpcyBvbmx5IHdvcmtzIGZvciBjb252ZXggc2hhcGVzLlxuICAvLy8gQHBhcmFtIHhmIHRoZSBzaGFwZSB3b3JsZCB0cmFuc2Zvcm0uXG4gIC8vLyBAcGFyYW0gcCBhIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAvLy8gQHBhcmFtIGRpc3RhbmNlIHJldHVybnMgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGN1cnJlbnQgc2hhcGUuXG4gIC8vLyBAcGFyYW0gbm9ybWFsIHJldHVybnMgdGhlIGRpcmVjdGlvbiBpbiB3aGljaCB0aGUgZGlzdGFuY2UgaW5jcmVhc2VzLlxuICBwdWJsaWMgYWJzdHJhY3QgQ29tcHV0ZURpc3RhbmNlKHhmOiBiMlRyYW5zZm9ybSwgcDogYjJWZWMyLCBub3JtYWw6IGIyVmVjMiwgY2hpbGRJbmRleDogbnVtYmVyKTogbnVtYmVyO1xuICAvLyAjZW5kaWZcblxuICAvLy8gQ2FzdCBhIHJheSBhZ2FpbnN0IGEgY2hpbGQgc2hhcGUuXG4gIC8vLyBAcGFyYW0gb3V0cHV0IHRoZSByYXktY2FzdCByZXN1bHRzLlxuICAvLy8gQHBhcmFtIGlucHV0IHRoZSByYXktY2FzdCBpbnB1dCBwYXJhbWV0ZXJzLlxuICAvLy8gQHBhcmFtIHRyYW5zZm9ybSB0aGUgdHJhbnNmb3JtIHRvIGJlIGFwcGxpZWQgdG8gdGhlIHNoYXBlLlxuICAvLy8gQHBhcmFtIGNoaWxkSW5kZXggdGhlIGNoaWxkIHNoYXBlIGluZGV4XG4gIHB1YmxpYyBhYnN0cmFjdCBSYXlDYXN0KG91dHB1dDogYjJSYXlDYXN0T3V0cHV0LCBpbnB1dDogYjJSYXlDYXN0SW5wdXQsIHRyYW5zZm9ybTogYjJUcmFuc2Zvcm0sIGNoaWxkSW5kZXg6IG51bWJlcik6IGJvb2xlYW47XG5cbiAgLy8vIEdpdmVuIGEgdHJhbnNmb3JtLCBjb21wdXRlIHRoZSBhc3NvY2lhdGVkIGF4aXMgYWxpZ25lZCBib3VuZGluZyBib3ggZm9yIGEgY2hpbGQgc2hhcGUuXG4gIC8vLyBAcGFyYW0gYWFiYiByZXR1cm5zIHRoZSBheGlzIGFsaWduZWQgYm94LlxuICAvLy8gQHBhcmFtIHhmIHRoZSB3b3JsZCB0cmFuc2Zvcm0gb2YgdGhlIHNoYXBlLlxuICAvLy8gQHBhcmFtIGNoaWxkSW5kZXggdGhlIGNoaWxkIHNoYXBlXG4gIHB1YmxpYyBhYnN0cmFjdCBDb21wdXRlQUFCQihhYWJiOiBiMkFBQkIsIHhmOiBiMlRyYW5zZm9ybSwgY2hpbGRJbmRleDogbnVtYmVyKTogdm9pZDtcblxuICAvLy8gQ29tcHV0ZSB0aGUgbWFzcyBwcm9wZXJ0aWVzIG9mIHRoaXMgc2hhcGUgdXNpbmcgaXRzIGRpbWVuc2lvbnMgYW5kIGRlbnNpdHkuXG4gIC8vLyBUaGUgaW5lcnRpYSB0ZW5zb3IgaXMgY29tcHV0ZWQgYWJvdXQgdGhlIGxvY2FsIG9yaWdpbi5cbiAgLy8vIEBwYXJhbSBtYXNzRGF0YSByZXR1cm5zIHRoZSBtYXNzIGRhdGEgZm9yIHRoaXMgc2hhcGUuXG4gIC8vLyBAcGFyYW0gZGVuc2l0eSB0aGUgZGVuc2l0eSBpbiBraWxvZ3JhbXMgcGVyIG1ldGVyIHNxdWFyZWQuXG4gIHB1YmxpYyBhYnN0cmFjdCBDb21wdXRlTWFzcyhtYXNzRGF0YTogYjJNYXNzRGF0YSwgZGVuc2l0eTogbnVtYmVyKTogdm9pZDtcblxuICBwdWJsaWMgYWJzdHJhY3QgU2V0dXBEaXN0YW5jZVByb3h5KHByb3h5OiBiMkRpc3RhbmNlUHJveHksIGluZGV4OiBudW1iZXIpOiB2b2lkO1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBDb21wdXRlU3VibWVyZ2VkQXJlYShub3JtYWw6IGIyVmVjMiwgb2Zmc2V0OiBudW1iZXIsIHhmOiBiMlRyYW5zZm9ybSwgYzogYjJWZWMyKTogbnVtYmVyO1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBEdW1wKGxvZzogKGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQ7XG59XG4iXSwibWFwcGluZ3MiOiI7OztBQW1CQTtBQUtBO0FBQUE7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFUQTtBQVdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBT0E7QUFOQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUEyQ0E7QUFBQTtBQXBFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_shape.ts\n");

/***/ }),

/***/ "./src/box2d/collision/b2_time_of_impact.ts":
/*!**************************************************!*\
  !*** ./src/box2d/collision/b2_time_of_impact.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2TimeOfImpact = exports.b2SeparationFunction = exports.b2SeparationFunctionType = exports.b2TOIOutput = exports.b2TOIOutputState = exports.b2TOIInput = exports.b2_toi_reset = exports.b2_toiMaxRootIters = exports.b2_toiRootIters = exports.b2_toiMaxIters = exports.b2_toiIters = exports.b2_toiCalls = exports.b2_toiMaxTime = exports.b2_toiTime = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_timer_1 = __webpack_require__(/*! ../common/b2_timer */ \"./src/box2d/common/b2_timer.ts\");\nvar b2_distance_1 = __webpack_require__(/*! ./b2_distance */ \"./src/box2d/collision/b2_distance.ts\");\nexports.b2_toiTime = 0;\nexports.b2_toiMaxTime = 0;\nexports.b2_toiCalls = 0;\nexports.b2_toiIters = 0;\nexports.b2_toiMaxIters = 0;\nexports.b2_toiRootIters = 0;\nexports.b2_toiMaxRootIters = 0;\nfunction b2_toi_reset() {\n    exports.b2_toiTime = 0;\n    exports.b2_toiMaxTime = 0;\n    exports.b2_toiCalls = 0;\n    exports.b2_toiIters = 0;\n    exports.b2_toiMaxIters = 0;\n    exports.b2_toiRootIters = 0;\n    exports.b2_toiMaxRootIters = 0;\n}\nexports.b2_toi_reset = b2_toi_reset;\nvar b2TimeOfImpact_s_xfA = new b2_math_1.b2Transform();\nvar b2TimeOfImpact_s_xfB = new b2_math_1.b2Transform();\nvar b2TimeOfImpact_s_pointA = new b2_math_1.b2Vec2();\nvar b2TimeOfImpact_s_pointB = new b2_math_1.b2Vec2();\nvar b2TimeOfImpact_s_normal = new b2_math_1.b2Vec2();\nvar b2TimeOfImpact_s_axisA = new b2_math_1.b2Vec2();\nvar b2TimeOfImpact_s_axisB = new b2_math_1.b2Vec2();\nvar b2TOIInput = (function () {\n    function b2TOIInput() {\n        this.proxyA = new b2_distance_1.b2DistanceProxy();\n        this.proxyB = new b2_distance_1.b2DistanceProxy();\n        this.sweepA = new b2_math_1.b2Sweep();\n        this.sweepB = new b2_math_1.b2Sweep();\n        this.tMax = 0;\n    }\n    return b2TOIInput;\n}());\nexports.b2TOIInput = b2TOIInput;\nvar b2TOIOutputState;\n(function (b2TOIOutputState) {\n    b2TOIOutputState[b2TOIOutputState[\"e_unknown\"] = 0] = \"e_unknown\";\n    b2TOIOutputState[b2TOIOutputState[\"e_failed\"] = 1] = \"e_failed\";\n    b2TOIOutputState[b2TOIOutputState[\"e_overlapped\"] = 2] = \"e_overlapped\";\n    b2TOIOutputState[b2TOIOutputState[\"e_touching\"] = 3] = \"e_touching\";\n    b2TOIOutputState[b2TOIOutputState[\"e_separated\"] = 4] = \"e_separated\";\n})(b2TOIOutputState = exports.b2TOIOutputState || (exports.b2TOIOutputState = {}));\nvar b2TOIOutput = (function () {\n    function b2TOIOutput() {\n        this.state = b2TOIOutputState.e_unknown;\n        this.t = 0;\n    }\n    return b2TOIOutput;\n}());\nexports.b2TOIOutput = b2TOIOutput;\nvar b2SeparationFunctionType;\n(function (b2SeparationFunctionType) {\n    b2SeparationFunctionType[b2SeparationFunctionType[\"e_unknown\"] = -1] = \"e_unknown\";\n    b2SeparationFunctionType[b2SeparationFunctionType[\"e_points\"] = 0] = \"e_points\";\n    b2SeparationFunctionType[b2SeparationFunctionType[\"e_faceA\"] = 1] = \"e_faceA\";\n    b2SeparationFunctionType[b2SeparationFunctionType[\"e_faceB\"] = 2] = \"e_faceB\";\n})(b2SeparationFunctionType = exports.b2SeparationFunctionType || (exports.b2SeparationFunctionType = {}));\nvar b2SeparationFunction = (function () {\n    function b2SeparationFunction() {\n        this.m_sweepA = new b2_math_1.b2Sweep();\n        this.m_sweepB = new b2_math_1.b2Sweep();\n        this.m_type = b2SeparationFunctionType.e_unknown;\n        this.m_localPoint = new b2_math_1.b2Vec2();\n        this.m_axis = new b2_math_1.b2Vec2();\n    }\n    b2SeparationFunction.prototype.Initialize = function (cache, proxyA, sweepA, proxyB, sweepB, t1) {\n        this.m_proxyA = proxyA;\n        this.m_proxyB = proxyB;\n        var count = cache.count;\n        this.m_sweepA.Copy(sweepA);\n        this.m_sweepB.Copy(sweepB);\n        var xfA = b2TimeOfImpact_s_xfA;\n        var xfB = b2TimeOfImpact_s_xfB;\n        this.m_sweepA.GetTransform(xfA, t1);\n        this.m_sweepB.GetTransform(xfB, t1);\n        if (count === 1) {\n            this.m_type = b2SeparationFunctionType.e_points;\n            var localPointA = this.m_proxyA.GetVertex(cache.indexA[0]);\n            var localPointB = this.m_proxyB.GetVertex(cache.indexB[0]);\n            var pointA = b2_math_1.b2Transform.MulXV(xfA, localPointA, b2TimeOfImpact_s_pointA);\n            var pointB = b2_math_1.b2Transform.MulXV(xfB, localPointB, b2TimeOfImpact_s_pointB);\n            b2_math_1.b2Vec2.SubVV(pointB, pointA, this.m_axis);\n            var s = this.m_axis.Normalize();\n            this.m_localPoint.SetZero();\n            return s;\n        }\n        else if (cache.indexA[0] === cache.indexA[1]) {\n            this.m_type = b2SeparationFunctionType.e_faceB;\n            var localPointB1 = this.m_proxyB.GetVertex(cache.indexB[0]);\n            var localPointB2 = this.m_proxyB.GetVertex(cache.indexB[1]);\n            b2_math_1.b2Vec2.CrossVOne(b2_math_1.b2Vec2.SubVV(localPointB2, localPointB1, b2_math_1.b2Vec2.s_t0), this.m_axis).SelfNormalize();\n            var normal = b2_math_1.b2Rot.MulRV(xfB.q, this.m_axis, b2TimeOfImpact_s_normal);\n            b2_math_1.b2Vec2.MidVV(localPointB1, localPointB2, this.m_localPoint);\n            var pointB = b2_math_1.b2Transform.MulXV(xfB, this.m_localPoint, b2TimeOfImpact_s_pointB);\n            var localPointA = this.m_proxyA.GetVertex(cache.indexA[0]);\n            var pointA = b2_math_1.b2Transform.MulXV(xfA, localPointA, b2TimeOfImpact_s_pointA);\n            var s = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointA, pointB, b2_math_1.b2Vec2.s_t0), normal);\n            if (s < 0) {\n                this.m_axis.SelfNeg();\n                s = -s;\n            }\n            return s;\n        }\n        else {\n            this.m_type = b2SeparationFunctionType.e_faceA;\n            var localPointA1 = this.m_proxyA.GetVertex(cache.indexA[0]);\n            var localPointA2 = this.m_proxyA.GetVertex(cache.indexA[1]);\n            b2_math_1.b2Vec2.CrossVOne(b2_math_1.b2Vec2.SubVV(localPointA2, localPointA1, b2_math_1.b2Vec2.s_t0), this.m_axis).SelfNormalize();\n            var normal = b2_math_1.b2Rot.MulRV(xfA.q, this.m_axis, b2TimeOfImpact_s_normal);\n            b2_math_1.b2Vec2.MidVV(localPointA1, localPointA2, this.m_localPoint);\n            var pointA = b2_math_1.b2Transform.MulXV(xfA, this.m_localPoint, b2TimeOfImpact_s_pointA);\n            var localPointB = this.m_proxyB.GetVertex(cache.indexB[0]);\n            var pointB = b2_math_1.b2Transform.MulXV(xfB, localPointB, b2TimeOfImpact_s_pointB);\n            var s = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointB, pointA, b2_math_1.b2Vec2.s_t0), normal);\n            if (s < 0) {\n                this.m_axis.SelfNeg();\n                s = -s;\n            }\n            return s;\n        }\n    };\n    b2SeparationFunction.prototype.FindMinSeparation = function (indexA, indexB, t) {\n        var xfA = b2TimeOfImpact_s_xfA;\n        var xfB = b2TimeOfImpact_s_xfB;\n        this.m_sweepA.GetTransform(xfA, t);\n        this.m_sweepB.GetTransform(xfB, t);\n        switch (this.m_type) {\n            case b2SeparationFunctionType.e_points: {\n                var axisA = b2_math_1.b2Rot.MulTRV(xfA.q, this.m_axis, b2TimeOfImpact_s_axisA);\n                var axisB = b2_math_1.b2Rot.MulTRV(xfB.q, b2_math_1.b2Vec2.NegV(this.m_axis, b2_math_1.b2Vec2.s_t0), b2TimeOfImpact_s_axisB);\n                indexA[0] = this.m_proxyA.GetSupport(axisA);\n                indexB[0] = this.m_proxyB.GetSupport(axisB);\n                var localPointA = this.m_proxyA.GetVertex(indexA[0]);\n                var localPointB = this.m_proxyB.GetVertex(indexB[0]);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, localPointA, b2TimeOfImpact_s_pointA);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, localPointB, b2TimeOfImpact_s_pointB);\n                var separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointB, pointA, b2_math_1.b2Vec2.s_t0), this.m_axis);\n                return separation;\n            }\n            case b2SeparationFunctionType.e_faceA: {\n                var normal = b2_math_1.b2Rot.MulRV(xfA.q, this.m_axis, b2TimeOfImpact_s_normal);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, this.m_localPoint, b2TimeOfImpact_s_pointA);\n                var axisB = b2_math_1.b2Rot.MulTRV(xfB.q, b2_math_1.b2Vec2.NegV(normal, b2_math_1.b2Vec2.s_t0), b2TimeOfImpact_s_axisB);\n                indexA[0] = -1;\n                indexB[0] = this.m_proxyB.GetSupport(axisB);\n                var localPointB = this.m_proxyB.GetVertex(indexB[0]);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, localPointB, b2TimeOfImpact_s_pointB);\n                var separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointB, pointA, b2_math_1.b2Vec2.s_t0), normal);\n                return separation;\n            }\n            case b2SeparationFunctionType.e_faceB: {\n                var normal = b2_math_1.b2Rot.MulRV(xfB.q, this.m_axis, b2TimeOfImpact_s_normal);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, this.m_localPoint, b2TimeOfImpact_s_pointB);\n                var axisA = b2_math_1.b2Rot.MulTRV(xfA.q, b2_math_1.b2Vec2.NegV(normal, b2_math_1.b2Vec2.s_t0), b2TimeOfImpact_s_axisA);\n                indexB[0] = -1;\n                indexA[0] = this.m_proxyA.GetSupport(axisA);\n                var localPointA = this.m_proxyA.GetVertex(indexA[0]);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, localPointA, b2TimeOfImpact_s_pointA);\n                var separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointA, pointB, b2_math_1.b2Vec2.s_t0), normal);\n                return separation;\n            }\n            default:\n                indexA[0] = -1;\n                indexB[0] = -1;\n                return 0;\n        }\n    };\n    b2SeparationFunction.prototype.Evaluate = function (indexA, indexB, t) {\n        var xfA = b2TimeOfImpact_s_xfA;\n        var xfB = b2TimeOfImpact_s_xfB;\n        this.m_sweepA.GetTransform(xfA, t);\n        this.m_sweepB.GetTransform(xfB, t);\n        switch (this.m_type) {\n            case b2SeparationFunctionType.e_points: {\n                var localPointA = this.m_proxyA.GetVertex(indexA);\n                var localPointB = this.m_proxyB.GetVertex(indexB);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, localPointA, b2TimeOfImpact_s_pointA);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, localPointB, b2TimeOfImpact_s_pointB);\n                var separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointB, pointA, b2_math_1.b2Vec2.s_t0), this.m_axis);\n                return separation;\n            }\n            case b2SeparationFunctionType.e_faceA: {\n                var normal = b2_math_1.b2Rot.MulRV(xfA.q, this.m_axis, b2TimeOfImpact_s_normal);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, this.m_localPoint, b2TimeOfImpact_s_pointA);\n                var localPointB = this.m_proxyB.GetVertex(indexB);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, localPointB, b2TimeOfImpact_s_pointB);\n                var separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointB, pointA, b2_math_1.b2Vec2.s_t0), normal);\n                return separation;\n            }\n            case b2SeparationFunctionType.e_faceB: {\n                var normal = b2_math_1.b2Rot.MulRV(xfB.q, this.m_axis, b2TimeOfImpact_s_normal);\n                var pointB = b2_math_1.b2Transform.MulXV(xfB, this.m_localPoint, b2TimeOfImpact_s_pointB);\n                var localPointA = this.m_proxyA.GetVertex(indexA);\n                var pointA = b2_math_1.b2Transform.MulXV(xfA, localPointA, b2TimeOfImpact_s_pointA);\n                var separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointA, pointB, b2_math_1.b2Vec2.s_t0), normal);\n                return separation;\n            }\n            default:\n                return 0;\n        }\n    };\n    return b2SeparationFunction;\n}());\nexports.b2SeparationFunction = b2SeparationFunction;\nvar b2TimeOfImpact_s_timer = new b2_timer_1.b2Timer();\nvar b2TimeOfImpact_s_cache = new b2_distance_1.b2SimplexCache();\nvar b2TimeOfImpact_s_distanceInput = new b2_distance_1.b2DistanceInput();\nvar b2TimeOfImpact_s_distanceOutput = new b2_distance_1.b2DistanceOutput();\nvar b2TimeOfImpact_s_fcn = new b2SeparationFunction();\nvar b2TimeOfImpact_s_indexA = [0];\nvar b2TimeOfImpact_s_indexB = [0];\nvar b2TimeOfImpact_s_sweepA = new b2_math_1.b2Sweep();\nvar b2TimeOfImpact_s_sweepB = new b2_math_1.b2Sweep();\nfunction b2TimeOfImpact(output, input) {\n    var timer = b2TimeOfImpact_s_timer.Reset();\n    ++exports.b2_toiCalls;\n    output.state = b2TOIOutputState.e_unknown;\n    output.t = input.tMax;\n    var proxyA = input.proxyA;\n    var proxyB = input.proxyB;\n    var maxVertices = b2_math_1.b2Max(b2_settings_1.b2_maxPolygonVertices, b2_math_1.b2Max(proxyA.m_count, proxyB.m_count));\n    var sweepA = b2TimeOfImpact_s_sweepA.Copy(input.sweepA);\n    var sweepB = b2TimeOfImpact_s_sweepB.Copy(input.sweepB);\n    sweepA.Normalize();\n    sweepB.Normalize();\n    var tMax = input.tMax;\n    var totalRadius = proxyA.m_radius + proxyB.m_radius;\n    var target = b2_math_1.b2Max(b2_settings_1.b2_linearSlop, totalRadius - 3 * b2_settings_1.b2_linearSlop);\n    var tolerance = 0.25 * b2_settings_1.b2_linearSlop;\n    var t1 = 0;\n    var k_maxIterations = 20;\n    var iter = 0;\n    var cache = b2TimeOfImpact_s_cache;\n    cache.count = 0;\n    var distanceInput = b2TimeOfImpact_s_distanceInput;\n    distanceInput.proxyA.Copy(input.proxyA);\n    distanceInput.proxyB.Copy(input.proxyB);\n    distanceInput.useRadii = false;\n    for (;;) {\n        var xfA = b2TimeOfImpact_s_xfA;\n        var xfB = b2TimeOfImpact_s_xfB;\n        sweepA.GetTransform(xfA, t1);\n        sweepB.GetTransform(xfB, t1);\n        distanceInput.transformA.Copy(xfA);\n        distanceInput.transformB.Copy(xfB);\n        var distanceOutput = b2TimeOfImpact_s_distanceOutput;\n        b2_distance_1.b2Distance(distanceOutput, cache, distanceInput);\n        if (distanceOutput.distance <= 0) {\n            output.state = b2TOIOutputState.e_overlapped;\n            output.t = 0;\n            break;\n        }\n        if (distanceOutput.distance < target + tolerance) {\n            output.state = b2TOIOutputState.e_touching;\n            output.t = t1;\n            break;\n        }\n        var fcn = b2TimeOfImpact_s_fcn;\n        fcn.Initialize(cache, proxyA, sweepA, proxyB, sweepB, t1);\n        var done = false;\n        var t2 = tMax;\n        var pushBackIter = 0;\n        for (;;) {\n            var indexA = b2TimeOfImpact_s_indexA;\n            var indexB = b2TimeOfImpact_s_indexB;\n            var s2 = fcn.FindMinSeparation(indexA, indexB, t2);\n            if (s2 > (target + tolerance)) {\n                output.state = b2TOIOutputState.e_separated;\n                output.t = tMax;\n                done = true;\n                break;\n            }\n            if (s2 > (target - tolerance)) {\n                t1 = t2;\n                break;\n            }\n            var s1 = fcn.Evaluate(indexA[0], indexB[0], t1);\n            if (s1 < (target - tolerance)) {\n                output.state = b2TOIOutputState.e_failed;\n                output.t = t1;\n                done = true;\n                break;\n            }\n            if (s1 <= (target + tolerance)) {\n                output.state = b2TOIOutputState.e_touching;\n                output.t = t1;\n                done = true;\n                break;\n            }\n            var rootIterCount = 0;\n            var a1 = t1;\n            var a2 = t2;\n            for (;;) {\n                var t = 0;\n                if (rootIterCount & 1) {\n                    t = a1 + (target - s1) * (a2 - a1) / (s2 - s1);\n                }\n                else {\n                    t = 0.5 * (a1 + a2);\n                }\n                ++rootIterCount;\n                ++exports.b2_toiRootIters;\n                var s = fcn.Evaluate(indexA[0], indexB[0], t);\n                if (b2_math_1.b2Abs(s - target) < tolerance) {\n                    t2 = t;\n                    break;\n                }\n                if (s > target) {\n                    a1 = t;\n                    s1 = s;\n                }\n                else {\n                    a2 = t;\n                    s2 = s;\n                }\n                if (rootIterCount === 50) {\n                    break;\n                }\n            }\n            exports.b2_toiMaxRootIters = b2_math_1.b2Max(exports.b2_toiMaxRootIters, rootIterCount);\n            ++pushBackIter;\n            if (pushBackIter === maxVertices) {\n                break;\n            }\n        }\n        ++iter;\n        ++exports.b2_toiIters;\n        if (done) {\n            break;\n        }\n        if (iter === k_maxIterations) {\n            output.state = b2TOIOutputState.e_failed;\n            output.t = t1;\n            break;\n        }\n    }\n    exports.b2_toiMaxIters = b2_math_1.b2Max(exports.b2_toiMaxIters, iter);\n    var time = timer.GetMilliseconds();\n    exports.b2_toiMaxTime = b2_math_1.b2Max(exports.b2_toiMaxTime, time);\n    exports.b2_toiTime += time;\n}\nexports.b2TimeOfImpact = b2TimeOfImpact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29sbGlzaW9uL2IyX3RpbWVfb2ZfaW1wYWN0LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbGxpc2lvbi9iMl90aW1lX29mX2ltcGFjdC50cz81OGI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9saW5lYXJTbG9wLCBiMl9tYXhQb2x5Z29uVmVydGljZXMgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMkFicywgYjJNYXgsIGIyVmVjMiwgYjJSb3QsIGIyVHJhbnNmb3JtLCBiMlN3ZWVwIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMlRpbWVyIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl90aW1lclwiO1xuaW1wb3J0IHsgYjJEaXN0YW5jZSwgYjJEaXN0YW5jZUlucHV0LCBiMkRpc3RhbmNlT3V0cHV0LCBiMkRpc3RhbmNlUHJveHksIGIyU2ltcGxleENhY2hlIH0gZnJvbSBcIi4vYjJfZGlzdGFuY2VcIjtcblxuZXhwb3J0IGxldCBiMl90b2lUaW1lOiBudW1iZXIgPSAwO1xuZXhwb3J0IGxldCBiMl90b2lNYXhUaW1lOiBudW1iZXIgPSAwO1xuZXhwb3J0IGxldCBiMl90b2lDYWxsczogbnVtYmVyID0gMDtcbmV4cG9ydCBsZXQgYjJfdG9pSXRlcnM6IG51bWJlciA9IDA7XG5leHBvcnQgbGV0IGIyX3RvaU1heEl0ZXJzOiBudW1iZXIgPSAwO1xuZXhwb3J0IGxldCBiMl90b2lSb290SXRlcnM6IG51bWJlciA9IDA7XG5leHBvcnQgbGV0IGIyX3RvaU1heFJvb3RJdGVyczogbnVtYmVyID0gMDtcbmV4cG9ydCBmdW5jdGlvbiBiMl90b2lfcmVzZXQoKTogdm9pZCB7XG4gIGIyX3RvaVRpbWUgPSAwO1xuICBiMl90b2lNYXhUaW1lID0gMDtcbiAgYjJfdG9pQ2FsbHMgPSAwO1xuICBiMl90b2lJdGVycyA9IDA7XG4gIGIyX3RvaU1heEl0ZXJzID0gMDtcbiAgYjJfdG9pUm9vdEl0ZXJzID0gMDtcbiAgYjJfdG9pTWF4Um9vdEl0ZXJzID0gMDtcbn1cblxuY29uc3QgYjJUaW1lT2ZJbXBhY3Rfc194ZkE6IGIyVHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5jb25zdCBiMlRpbWVPZkltcGFjdF9zX3hmQjogYjJUcmFuc2Zvcm0gPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbmNvbnN0IGIyVGltZU9mSW1wYWN0X3NfcG9pbnRBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5jb25zdCBiMlRpbWVPZkltcGFjdF9zX3BvaW50QjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuY29uc3QgYjJUaW1lT2ZJbXBhY3Rfc19ub3JtYWw6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyVGltZU9mSW1wYWN0X3NfYXhpc0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbmNvbnN0IGIyVGltZU9mSW1wYWN0X3NfYXhpc0I6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuLy8vIElucHV0IHBhcmFtZXRlcnMgZm9yIGIyVGltZU9mSW1wYWN0XG5leHBvcnQgY2xhc3MgYjJUT0lJbnB1dCB7XG4gIHB1YmxpYyByZWFkb25seSBwcm94eUE6IGIyRGlzdGFuY2VQcm94eSA9IG5ldyBiMkRpc3RhbmNlUHJveHkoKTtcbiAgcHVibGljIHJlYWRvbmx5IHByb3h5QjogYjJEaXN0YW5jZVByb3h5ID0gbmV3IGIyRGlzdGFuY2VQcm94eSgpO1xuICBwdWJsaWMgcmVhZG9ubHkgc3dlZXBBOiBiMlN3ZWVwID0gbmV3IGIyU3dlZXAoKTtcbiAgcHVibGljIHJlYWRvbmx5IHN3ZWVwQjogYjJTd2VlcCA9IG5ldyBiMlN3ZWVwKCk7XG4gIHB1YmxpYyB0TWF4OiBudW1iZXIgPSAwOyAvLyBkZWZpbmVzIHN3ZWVwIGludGVydmFsIFswLCB0TWF4XVxufVxuXG4vLy8gT3V0cHV0IHBhcmFtZXRlcnMgZm9yIGIyVGltZU9mSW1wYWN0LlxuZXhwb3J0IGVudW0gYjJUT0lPdXRwdXRTdGF0ZSB7XG4gIGVfdW5rbm93biA9IDAsXG4gIGVfZmFpbGVkID0gMSxcbiAgZV9vdmVybGFwcGVkID0gMixcbiAgZV90b3VjaGluZyA9IDMsXG4gIGVfc2VwYXJhdGVkID0gNCxcbn1cblxuZXhwb3J0IGNsYXNzIGIyVE9JT3V0cHV0IHtcbiAgcHVibGljIHN0YXRlID0gYjJUT0lPdXRwdXRTdGF0ZS5lX3Vua25vd247XG4gIHB1YmxpYyB0OiBudW1iZXIgPSAwO1xufVxuXG5leHBvcnQgZW51bSBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUge1xuICBlX3Vua25vd24gPSAtMSxcbiAgZV9wb2ludHMgPSAwLFxuICBlX2ZhY2VBID0gMSxcbiAgZV9mYWNlQiA9IDIsXG59XG5cbmV4cG9ydCBjbGFzcyBiMlNlcGFyYXRpb25GdW5jdGlvbiB7XG4gIHB1YmxpYyBtX3Byb3h5QSE6IGIyRGlzdGFuY2VQcm94eTtcbiAgcHVibGljIG1fcHJveHlCITogYjJEaXN0YW5jZVByb3h5O1xuICBwdWJsaWMgcmVhZG9ubHkgbV9zd2VlcEE6IGIyU3dlZXAgPSBuZXcgYjJTd2VlcCgpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9zd2VlcEI6IGIyU3dlZXAgPSBuZXcgYjJTd2VlcCgpO1xuICBwdWJsaWMgbV90eXBlOiBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUgPSBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV91bmtub3duO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbFBvaW50OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2F4aXM6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgSW5pdGlhbGl6ZShjYWNoZTogYjJTaW1wbGV4Q2FjaGUsIHByb3h5QTogYjJEaXN0YW5jZVByb3h5LCBzd2VlcEE6IGIyU3dlZXAsIHByb3h5QjogYjJEaXN0YW5jZVByb3h5LCBzd2VlcEI6IGIyU3dlZXAsIHQxOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMubV9wcm94eUEgPSBwcm94eUE7XG4gICAgdGhpcy5tX3Byb3h5QiA9IHByb3h5QjtcbiAgICBjb25zdCBjb3VudDogbnVtYmVyID0gY2FjaGUuY291bnQ7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KDAgPCBjb3VudCAmJiBjb3VudCA8IDMpO1xuXG4gICAgdGhpcy5tX3N3ZWVwQS5Db3B5KHN3ZWVwQSk7XG4gICAgdGhpcy5tX3N3ZWVwQi5Db3B5KHN3ZWVwQik7XG5cbiAgICBjb25zdCB4ZkE6IGIyVHJhbnNmb3JtID0gYjJUaW1lT2ZJbXBhY3Rfc194ZkE7XG4gICAgY29uc3QgeGZCOiBiMlRyYW5zZm9ybSA9IGIyVGltZU9mSW1wYWN0X3NfeGZCO1xuICAgIHRoaXMubV9zd2VlcEEuR2V0VHJhbnNmb3JtKHhmQSwgdDEpO1xuICAgIHRoaXMubV9zd2VlcEIuR2V0VHJhbnNmb3JtKHhmQiwgdDEpO1xuXG4gICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICB0aGlzLm1fdHlwZSA9IGIyU2VwYXJhdGlvbkZ1bmN0aW9uVHlwZS5lX3BvaW50cztcbiAgICAgIGNvbnN0IGxvY2FsUG9pbnRBOiBiMlZlYzIgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMF0pO1xuICAgICAgY29uc3QgbG9jYWxQb2ludEI6IGIyVmVjMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlswXSk7XG4gICAgICBjb25zdCBwb2ludEE6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgbG9jYWxQb2ludEEsIGIyVGltZU9mSW1wYWN0X3NfcG9pbnRBKTtcbiAgICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCBsb2NhbFBvaW50QiwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEIpO1xuICAgICAgYjJWZWMyLlN1YlZWKHBvaW50QiwgcG9pbnRBLCB0aGlzLm1fYXhpcyk7XG4gICAgICBjb25zdCBzOiBudW1iZXIgPSB0aGlzLm1fYXhpcy5Ob3JtYWxpemUoKTtcbiAgICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICAgIHRoaXMubV9sb2NhbFBvaW50LlNldFplcm8oKTtcbiAgICAgIC8vICNlbmRpZlxuICAgICAgcmV0dXJuIHM7XG4gICAgfSBlbHNlIGlmIChjYWNoZS5pbmRleEFbMF0gPT09IGNhY2hlLmluZGV4QVsxXSkge1xuICAgICAgLy8gVHdvIHBvaW50cyBvbiBCIGFuZCBvbmUgb24gQS5cbiAgICAgIHRoaXMubV90eXBlID0gYjJTZXBhcmF0aW9uRnVuY3Rpb25UeXBlLmVfZmFjZUI7XG4gICAgICBjb25zdCBsb2NhbFBvaW50QjE6IGIyVmVjMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlswXSk7XG4gICAgICBjb25zdCBsb2NhbFBvaW50QjI6IGIyVmVjMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlsxXSk7XG5cbiAgICAgIGIyVmVjMi5Dcm9zc1ZPbmUoYjJWZWMyLlN1YlZWKGxvY2FsUG9pbnRCMiwgbG9jYWxQb2ludEIxLCBiMlZlYzIuc190MCksIHRoaXMubV9heGlzKS5TZWxmTm9ybWFsaXplKCk7XG4gICAgICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHhmQi5xLCB0aGlzLm1fYXhpcywgYjJUaW1lT2ZJbXBhY3Rfc19ub3JtYWwpO1xuXG4gICAgICBiMlZlYzIuTWlkVlYobG9jYWxQb2ludEIxLCBsb2NhbFBvaW50QjIsIHRoaXMubV9sb2NhbFBvaW50KTtcbiAgICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCB0aGlzLm1fbG9jYWxQb2ludCwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEIpO1xuXG4gICAgICBjb25zdCBsb2NhbFBvaW50QTogYjJWZWMyID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhBWzBdKTtcbiAgICAgIGNvbnN0IHBvaW50QTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCBsb2NhbFBvaW50QSwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEEpO1xuXG4gICAgICBsZXQgczogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEEsIHBvaW50QiwgYjJWZWMyLnNfdDApLCBub3JtYWwpO1xuICAgICAgaWYgKHMgPCAwKSB7XG4gICAgICAgIHRoaXMubV9heGlzLlNlbGZOZWcoKTtcbiAgICAgICAgcyA9IC1zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFR3byBwb2ludHMgb24gQSBhbmQgb25lIG9yIHR3byBwb2ludHMgb24gQi5cbiAgICAgIHRoaXMubV90eXBlID0gYjJTZXBhcmF0aW9uRnVuY3Rpb25UeXBlLmVfZmFjZUE7XG4gICAgICBjb25zdCBsb2NhbFBvaW50QTE6IGIyVmVjMiA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGNhY2hlLmluZGV4QVswXSk7XG4gICAgICBjb25zdCBsb2NhbFBvaW50QTI6IGIyVmVjMiA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGNhY2hlLmluZGV4QVsxXSk7XG5cbiAgICAgIGIyVmVjMi5Dcm9zc1ZPbmUoYjJWZWMyLlN1YlZWKGxvY2FsUG9pbnRBMiwgbG9jYWxQb2ludEExLCBiMlZlYzIuc190MCksIHRoaXMubV9heGlzKS5TZWxmTm9ybWFsaXplKCk7XG4gICAgICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHhmQS5xLCB0aGlzLm1fYXhpcywgYjJUaW1lT2ZJbXBhY3Rfc19ub3JtYWwpO1xuXG4gICAgICBiMlZlYzIuTWlkVlYobG9jYWxQb2ludEExLCBsb2NhbFBvaW50QTIsIHRoaXMubV9sb2NhbFBvaW50KTtcbiAgICAgIGNvbnN0IHBvaW50QTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCB0aGlzLm1fbG9jYWxQb2ludCwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEEpO1xuXG4gICAgICBjb25zdCBsb2NhbFBvaW50QjogYjJWZWMyID0gdGhpcy5tX3Byb3h5Qi5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhCWzBdKTtcbiAgICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCBsb2NhbFBvaW50QiwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEIpO1xuXG4gICAgICBsZXQgczogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEIsIHBvaW50QSwgYjJWZWMyLnNfdDApLCBub3JtYWwpO1xuICAgICAgaWYgKHMgPCAwKSB7XG4gICAgICAgIHRoaXMubV9heGlzLlNlbGZOZWcoKTtcbiAgICAgICAgcyA9IC1zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEZpbmRNaW5TZXBhcmF0aW9uKGluZGV4QTogW251bWJlcl0sIGluZGV4QjogW251bWJlcl0sIHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgeGZBOiBiMlRyYW5zZm9ybSA9IGIyVGltZU9mSW1wYWN0X3NfeGZBO1xuICAgIGNvbnN0IHhmQjogYjJUcmFuc2Zvcm0gPSBiMlRpbWVPZkltcGFjdF9zX3hmQjtcbiAgICB0aGlzLm1fc3dlZXBBLkdldFRyYW5zZm9ybSh4ZkEsIHQpO1xuICAgIHRoaXMubV9zd2VlcEIuR2V0VHJhbnNmb3JtKHhmQiwgdCk7XG5cbiAgICBzd2l0Y2ggKHRoaXMubV90eXBlKSB7XG4gICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV9wb2ludHM6IHtcbiAgICAgICAgY29uc3QgYXhpc0E6IGIyVmVjMiA9IGIyUm90Lk11bFRSVih4ZkEucSwgdGhpcy5tX2F4aXMsIGIyVGltZU9mSW1wYWN0X3NfYXhpc0EpO1xuICAgICAgICBjb25zdCBheGlzQjogYjJWZWMyID0gYjJSb3QuTXVsVFJWKHhmQi5xLCBiMlZlYzIuTmVnVih0aGlzLm1fYXhpcywgYjJWZWMyLnNfdDApLCBiMlRpbWVPZkltcGFjdF9zX2F4aXNCKTtcblxuICAgICAgICBpbmRleEFbMF0gPSB0aGlzLm1fcHJveHlBLkdldFN1cHBvcnQoYXhpc0EpO1xuICAgICAgICBpbmRleEJbMF0gPSB0aGlzLm1fcHJveHlCLkdldFN1cHBvcnQoYXhpc0IpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsUG9pbnRBOiBiMlZlYzIgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChpbmRleEFbMF0pO1xuICAgICAgICBjb25zdCBsb2NhbFBvaW50QjogYjJWZWMyID0gdGhpcy5tX3Byb3h5Qi5HZXRWZXJ0ZXgoaW5kZXhCWzBdKTtcblxuICAgICAgICBjb25zdCBwb2ludEE6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgbG9jYWxQb2ludEEsIGIyVGltZU9mSW1wYWN0X3NfcG9pbnRBKTtcbiAgICAgICAgY29uc3QgcG9pbnRCOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIGxvY2FsUG9pbnRCLCBiMlRpbWVPZkltcGFjdF9zX3BvaW50Qik7XG5cbiAgICAgICAgY29uc3Qgc2VwYXJhdGlvbjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEIsIHBvaW50QSwgYjJWZWMyLnNfdDApLCB0aGlzLm1fYXhpcyk7XG4gICAgICAgIHJldHVybiBzZXBhcmF0aW9uO1xuICAgICAgfVxuXG4gICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV9mYWNlQToge1xuICAgICAgICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHhmQS5xLCB0aGlzLm1fYXhpcywgYjJUaW1lT2ZJbXBhY3Rfc19ub3JtYWwpO1xuICAgICAgICBjb25zdCBwb2ludEE6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgdGhpcy5tX2xvY2FsUG9pbnQsIGIyVGltZU9mSW1wYWN0X3NfcG9pbnRBKTtcblxuICAgICAgICBjb25zdCBheGlzQjogYjJWZWMyID0gYjJSb3QuTXVsVFJWKHhmQi5xLCBiMlZlYzIuTmVnVihub3JtYWwsIGIyVmVjMi5zX3QwKSwgYjJUaW1lT2ZJbXBhY3Rfc19heGlzQik7XG5cbiAgICAgICAgaW5kZXhBWzBdID0gLTE7XG4gICAgICAgIGluZGV4QlswXSA9IHRoaXMubV9wcm94eUIuR2V0U3VwcG9ydChheGlzQik7XG5cbiAgICAgICAgY29uc3QgbG9jYWxQb2ludEI6IGIyVmVjMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGluZGV4QlswXSk7XG4gICAgICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCBsb2NhbFBvaW50QiwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEIpO1xuXG4gICAgICAgIGNvbnN0IHNlcGFyYXRpb246IG51bWJlciA9IGIyVmVjMi5Eb3RWVihiMlZlYzIuU3ViVlYocG9pbnRCLCBwb2ludEEsIGIyVmVjMi5zX3QwKSwgbm9ybWFsKTtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRpb247XG4gICAgICB9XG5cbiAgICBjYXNlIGIyU2VwYXJhdGlvbkZ1bmN0aW9uVHlwZS5lX2ZhY2VCOiB7XG4gICAgICAgIGNvbnN0IG5vcm1hbDogYjJWZWMyID0gYjJSb3QuTXVsUlYoeGZCLnEsIHRoaXMubV9heGlzLCBiMlRpbWVPZkltcGFjdF9zX25vcm1hbCk7XG4gICAgICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZCLCB0aGlzLm1fbG9jYWxQb2ludCwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEIpO1xuXG4gICAgICAgIGNvbnN0IGF4aXNBOiBiMlZlYzIgPSBiMlJvdC5NdWxUUlYoeGZBLnEsIGIyVmVjMi5OZWdWKG5vcm1hbCwgYjJWZWMyLnNfdDApLCBiMlRpbWVPZkltcGFjdF9zX2F4aXNBKTtcblxuICAgICAgICBpbmRleEJbMF0gPSAtMTtcbiAgICAgICAgaW5kZXhBWzBdID0gdGhpcy5tX3Byb3h5QS5HZXRTdXBwb3J0KGF4aXNBKTtcblxuICAgICAgICBjb25zdCBsb2NhbFBvaW50QTogYjJWZWMyID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoaW5kZXhBWzBdKTtcbiAgICAgICAgY29uc3QgcG9pbnRBOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkEsIGxvY2FsUG9pbnRBLCBiMlRpbWVPZkltcGFjdF9zX3BvaW50QSk7XG5cbiAgICAgICAgY29uc3Qgc2VwYXJhdGlvbjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEEsIHBvaW50QiwgYjJWZWMyLnNfdDApLCBub3JtYWwpO1xuICAgICAgICByZXR1cm4gc2VwYXJhdGlvbjtcbiAgICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgaW5kZXhBWzBdID0gLTE7XG4gICAgICBpbmRleEJbMF0gPSAtMTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBFdmFsdWF0ZShpbmRleEE6IG51bWJlciwgaW5kZXhCOiBudW1iZXIsIHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgeGZBOiBiMlRyYW5zZm9ybSA9IGIyVGltZU9mSW1wYWN0X3NfeGZBO1xuICAgIGNvbnN0IHhmQjogYjJUcmFuc2Zvcm0gPSBiMlRpbWVPZkltcGFjdF9zX3hmQjtcbiAgICB0aGlzLm1fc3dlZXBBLkdldFRyYW5zZm9ybSh4ZkEsIHQpO1xuICAgIHRoaXMubV9zd2VlcEIuR2V0VHJhbnNmb3JtKHhmQiwgdCk7XG5cbiAgICBzd2l0Y2ggKHRoaXMubV90eXBlKSB7XG4gICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV9wb2ludHM6IHtcbiAgICAgICAgY29uc3QgbG9jYWxQb2ludEE6IGIyVmVjMiA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGluZGV4QSk7XG4gICAgICAgIGNvbnN0IGxvY2FsUG9pbnRCOiBiMlZlYzIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChpbmRleEIpO1xuXG4gICAgICAgIGNvbnN0IHBvaW50QTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCBsb2NhbFBvaW50QSwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEEpO1xuICAgICAgICBjb25zdCBwb2ludEI6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgbG9jYWxQb2ludEIsIGIyVGltZU9mSW1wYWN0X3NfcG9pbnRCKTtcbiAgICAgICAgY29uc3Qgc2VwYXJhdGlvbjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEIsIHBvaW50QSwgYjJWZWMyLnNfdDApLCB0aGlzLm1fYXhpcyk7XG5cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRpb247XG4gICAgICB9XG5cbiAgICBjYXNlIGIyU2VwYXJhdGlvbkZ1bmN0aW9uVHlwZS5lX2ZhY2VBOiB7XG4gICAgICAgIGNvbnN0IG5vcm1hbDogYjJWZWMyID0gYjJSb3QuTXVsUlYoeGZBLnEsIHRoaXMubV9heGlzLCBiMlRpbWVPZkltcGFjdF9zX25vcm1hbCk7XG4gICAgICAgIGNvbnN0IHBvaW50QTogYjJWZWMyID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCB0aGlzLm1fbG9jYWxQb2ludCwgYjJUaW1lT2ZJbXBhY3Rfc19wb2ludEEpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsUG9pbnRCOiBiMlZlYzIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChpbmRleEIpO1xuICAgICAgICBjb25zdCBwb2ludEI6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgbG9jYWxQb2ludEIsIGIyVGltZU9mSW1wYWN0X3NfcG9pbnRCKTtcblxuICAgICAgICBjb25zdCBzZXBhcmF0aW9uOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKHBvaW50QiwgcG9pbnRBLCBiMlZlYzIuc190MCksIG5vcm1hbCk7XG4gICAgICAgIHJldHVybiBzZXBhcmF0aW9uO1xuICAgICAgfVxuXG4gICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV9mYWNlQjoge1xuICAgICAgICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHhmQi5xLCB0aGlzLm1fYXhpcywgYjJUaW1lT2ZJbXBhY3Rfc19ub3JtYWwpO1xuICAgICAgICBjb25zdCBwb2ludEI6IGIyVmVjMiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgdGhpcy5tX2xvY2FsUG9pbnQsIGIyVGltZU9mSW1wYWN0X3NfcG9pbnRCKTtcblxuICAgICAgICBjb25zdCBsb2NhbFBvaW50QTogYjJWZWMyID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoaW5kZXhBKTtcbiAgICAgICAgY29uc3QgcG9pbnRBOiBiMlZlYzIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkEsIGxvY2FsUG9pbnRBLCBiMlRpbWVPZkltcGFjdF9zX3BvaW50QSk7XG5cbiAgICAgICAgY29uc3Qgc2VwYXJhdGlvbjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEEsIHBvaW50QiwgYjJWZWMyLnNfdDApLCBub3JtYWwpO1xuICAgICAgICByZXR1cm4gc2VwYXJhdGlvbjtcbiAgICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGIyVGltZU9mSW1wYWN0X3NfdGltZXI6IGIyVGltZXIgPSBuZXcgYjJUaW1lcigpO1xuY29uc3QgYjJUaW1lT2ZJbXBhY3Rfc19jYWNoZTogYjJTaW1wbGV4Q2FjaGUgPSBuZXcgYjJTaW1wbGV4Q2FjaGUoKTtcbmNvbnN0IGIyVGltZU9mSW1wYWN0X3NfZGlzdGFuY2VJbnB1dDogYjJEaXN0YW5jZUlucHV0ID0gbmV3IGIyRGlzdGFuY2VJbnB1dCgpO1xuY29uc3QgYjJUaW1lT2ZJbXBhY3Rfc19kaXN0YW5jZU91dHB1dDogYjJEaXN0YW5jZU91dHB1dCA9IG5ldyBiMkRpc3RhbmNlT3V0cHV0KCk7XG5jb25zdCBiMlRpbWVPZkltcGFjdF9zX2ZjbjogYjJTZXBhcmF0aW9uRnVuY3Rpb24gPSBuZXcgYjJTZXBhcmF0aW9uRnVuY3Rpb24oKTtcbmNvbnN0IGIyVGltZU9mSW1wYWN0X3NfaW5kZXhBOiBbbnVtYmVyXSA9IFsgMCBdO1xuY29uc3QgYjJUaW1lT2ZJbXBhY3Rfc19pbmRleEI6IFtudW1iZXJdID0gWyAwIF07XG5jb25zdCBiMlRpbWVPZkltcGFjdF9zX3N3ZWVwQTogYjJTd2VlcCA9IG5ldyBiMlN3ZWVwKCk7XG5jb25zdCBiMlRpbWVPZkltcGFjdF9zX3N3ZWVwQjogYjJTd2VlcCA9IG5ldyBiMlN3ZWVwKCk7XG5leHBvcnQgZnVuY3Rpb24gYjJUaW1lT2ZJbXBhY3Qob3V0cHV0OiBiMlRPSU91dHB1dCwgaW5wdXQ6IGIyVE9JSW5wdXQpOiB2b2lkIHtcbiAgY29uc3QgdGltZXI6IGIyVGltZXIgPSBiMlRpbWVPZkltcGFjdF9zX3RpbWVyLlJlc2V0KCk7XG5cbiAgKytiMl90b2lDYWxscztcblxuICBvdXRwdXQuc3RhdGUgPSBiMlRPSU91dHB1dFN0YXRlLmVfdW5rbm93bjtcbiAgb3V0cHV0LnQgPSBpbnB1dC50TWF4O1xuXG4gIGNvbnN0IHByb3h5QTogYjJEaXN0YW5jZVByb3h5ID0gaW5wdXQucHJveHlBO1xuICBjb25zdCBwcm94eUI6IGIyRGlzdGFuY2VQcm94eSA9IGlucHV0LnByb3h5QjtcbiAgY29uc3QgbWF4VmVydGljZXM6IG51bWJlciA9IGIyTWF4KGIyX21heFBvbHlnb25WZXJ0aWNlcywgYjJNYXgocHJveHlBLm1fY291bnQsIHByb3h5Qi5tX2NvdW50KSk7XG5cbiAgY29uc3Qgc3dlZXBBOiBiMlN3ZWVwID0gYjJUaW1lT2ZJbXBhY3Rfc19zd2VlcEEuQ29weShpbnB1dC5zd2VlcEEpO1xuICBjb25zdCBzd2VlcEI6IGIyU3dlZXAgPSBiMlRpbWVPZkltcGFjdF9zX3N3ZWVwQi5Db3B5KGlucHV0LnN3ZWVwQik7XG5cbiAgLy8gTGFyZ2Ugcm90YXRpb25zIGNhbiBtYWtlIHRoZSByb290IGZpbmRlciBmYWlsLCBzbyB3ZSBub3JtYWxpemUgdGhlXG4gIC8vIHN3ZWVwIGFuZ2xlcy5cbiAgc3dlZXBBLk5vcm1hbGl6ZSgpO1xuICBzd2VlcEIuTm9ybWFsaXplKCk7XG5cbiAgY29uc3QgdE1heDogbnVtYmVyID0gaW5wdXQudE1heDtcblxuICBjb25zdCB0b3RhbFJhZGl1czogbnVtYmVyID0gcHJveHlBLm1fcmFkaXVzICsgcHJveHlCLm1fcmFkaXVzO1xuICBjb25zdCB0YXJnZXQ6IG51bWJlciA9IGIyTWF4KGIyX2xpbmVhclNsb3AsIHRvdGFsUmFkaXVzIC0gMyAqIGIyX2xpbmVhclNsb3ApO1xuICBjb25zdCB0b2xlcmFuY2U6IG51bWJlciA9IDAuMjUgKiBiMl9saW5lYXJTbG9wO1xuICAvLyBERUJVRzogYjJBc3NlcnQodGFyZ2V0ID4gdG9sZXJhbmNlKTtcblxuICBsZXQgdDE6IG51bWJlciA9IDA7XG4gIGNvbnN0IGtfbWF4SXRlcmF0aW9uczogbnVtYmVyID0gMjA7IC8vIFRPRE9fRVJJTiBiMlNldHRpbmdzXG4gIGxldCBpdGVyOiBudW1iZXIgPSAwO1xuXG4gIC8vIFByZXBhcmUgaW5wdXQgZm9yIGRpc3RhbmNlIHF1ZXJ5LlxuICBjb25zdCBjYWNoZTogYjJTaW1wbGV4Q2FjaGUgPSBiMlRpbWVPZkltcGFjdF9zX2NhY2hlO1xuICBjYWNoZS5jb3VudCA9IDA7XG4gIGNvbnN0IGRpc3RhbmNlSW5wdXQ6IGIyRGlzdGFuY2VJbnB1dCA9IGIyVGltZU9mSW1wYWN0X3NfZGlzdGFuY2VJbnB1dDtcbiAgZGlzdGFuY2VJbnB1dC5wcm94eUEuQ29weShpbnB1dC5wcm94eUEpO1xuICBkaXN0YW5jZUlucHV0LnByb3h5Qi5Db3B5KGlucHV0LnByb3h5Qik7XG4gIGRpc3RhbmNlSW5wdXQudXNlUmFkaWkgPSBmYWxzZTtcblxuICAvLyBUaGUgb3V0ZXIgbG9vcCBwcm9ncmVzc2l2ZWx5IGF0dGVtcHRzIHRvIGNvbXB1dGUgbmV3IHNlcGFyYXRpbmcgYXhlcy5cbiAgLy8gVGhpcyBsb29wIHRlcm1pbmF0ZXMgd2hlbiBhbiBheGlzIGlzIHJlcGVhdGVkIChubyBwcm9ncmVzcyBpcyBtYWRlKS5cbiAgZm9yICg7IDsgKSB7XG4gICAgY29uc3QgeGZBOiBiMlRyYW5zZm9ybSA9IGIyVGltZU9mSW1wYWN0X3NfeGZBO1xuICAgIGNvbnN0IHhmQjogYjJUcmFuc2Zvcm0gPSBiMlRpbWVPZkltcGFjdF9zX3hmQjtcbiAgICBzd2VlcEEuR2V0VHJhbnNmb3JtKHhmQSwgdDEpO1xuICAgIHN3ZWVwQi5HZXRUcmFuc2Zvcm0oeGZCLCB0MSk7XG5cbiAgICAvLyBHZXQgdGhlIGRpc3RhbmNlIGJldHdlZW4gc2hhcGVzLiBXZSBjYW4gYWxzbyB1c2UgdGhlIHJlc3VsdHNcbiAgICAvLyB0byBnZXQgYSBzZXBhcmF0aW5nIGF4aXMuXG4gICAgZGlzdGFuY2VJbnB1dC50cmFuc2Zvcm1BLkNvcHkoeGZBKTtcbiAgICBkaXN0YW5jZUlucHV0LnRyYW5zZm9ybUIuQ29weSh4ZkIpO1xuICAgIGNvbnN0IGRpc3RhbmNlT3V0cHV0OiBiMkRpc3RhbmNlT3V0cHV0ID0gYjJUaW1lT2ZJbXBhY3Rfc19kaXN0YW5jZU91dHB1dDtcbiAgICBiMkRpc3RhbmNlKGRpc3RhbmNlT3V0cHV0LCBjYWNoZSwgZGlzdGFuY2VJbnB1dCk7XG5cbiAgICAvLyBJZiB0aGUgc2hhcGVzIGFyZSBvdmVybGFwcGVkLCB3ZSBnaXZlIHVwIG9uIGNvbnRpbnVvdXMgY29sbGlzaW9uLlxuICAgIGlmIChkaXN0YW5jZU91dHB1dC5kaXN0YW5jZSA8PSAwKSB7XG4gICAgICAvLyBGYWlsdXJlIVxuICAgICAgb3V0cHV0LnN0YXRlID0gYjJUT0lPdXRwdXRTdGF0ZS5lX292ZXJsYXBwZWQ7XG4gICAgICBvdXRwdXQudCA9IDA7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoZGlzdGFuY2VPdXRwdXQuZGlzdGFuY2UgPCB0YXJnZXQgKyB0b2xlcmFuY2UpIHtcbiAgICAgIC8vIFZpY3RvcnkhXG4gICAgICBvdXRwdXQuc3RhdGUgPSBiMlRPSU91dHB1dFN0YXRlLmVfdG91Y2hpbmc7XG4gICAgICBvdXRwdXQudCA9IHQxO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgc2VwYXJhdGluZyBheGlzLlxuICAgIGNvbnN0IGZjbjogYjJTZXBhcmF0aW9uRnVuY3Rpb24gPSBiMlRpbWVPZkltcGFjdF9zX2ZjbjtcbiAgICBmY24uSW5pdGlhbGl6ZShjYWNoZSwgcHJveHlBLCBzd2VlcEEsIHByb3h5Qiwgc3dlZXBCLCB0MSk7XG4vKlxuI2lmIDBcbiAgICAvLyBEdW1wIHRoZSBjdXJ2ZSBzZWVuIGJ5IHRoZSByb290IGZpbmRlciB7XG4gICAgICBjb25zdCBpbnQzMiBOID0gMTAwO1xuICAgICAgZmxvYXQzMiBkeCA9IDEuMGYgLyBOO1xuICAgICAgZmxvYXQzMiB4c1tOKzFdO1xuICAgICAgZmxvYXQzMiBmc1tOKzFdO1xuXG4gICAgICBmbG9hdDMyIHggPSAwLjBmO1xuXG4gICAgICBmb3IgKGludDMyIGkgPSAwOyBpIDw9IE47ICsraSkge1xuICAgICAgICBzd2VlcEEuR2V0VHJhbnNmb3JtKCZ4ZkEsIHgpO1xuICAgICAgICBzd2VlcEIuR2V0VHJhbnNmb3JtKCZ4ZkIsIHgpO1xuICAgICAgICBmbG9hdDMyIGYgPSBmY24uRXZhbHVhdGUoeGZBLCB4ZkIpIC0gdGFyZ2V0O1xuXG4gICAgICAgIHByaW50ZihcIiVnICVnXFxuXCIsIHgsIGYpO1xuXG4gICAgICAgIHhzW2ldID0geDtcbiAgICAgICAgZnNbaV0gPSBmO1xuXG4gICAgICAgIHggKz0gZHg7XG4gICAgICB9XG4gICAgfVxuI2VuZGlmXG4qL1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgVE9JIG9uIHRoZSBzZXBhcmF0aW5nIGF4aXMuIFdlIGRvIHRoaXMgYnkgc3VjY2Vzc2l2ZWx5XG4gICAgLy8gcmVzb2x2aW5nIHRoZSBkZWVwZXN0IHBvaW50LiBUaGlzIGxvb3AgaXMgYm91bmRlZCBieSB0aGUgbnVtYmVyIG9mIHZlcnRpY2VzLlxuICAgIGxldCBkb25lOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IHQyOiBudW1iZXIgPSB0TWF4O1xuICAgIGxldCBwdXNoQmFja0l0ZXI6IG51bWJlciA9IDA7XG4gICAgZm9yICg7IDsgKSB7XG4gICAgICAvLyBGaW5kIHRoZSBkZWVwZXN0IHBvaW50IGF0IHQyLiBTdG9yZSB0aGUgd2l0bmVzcyBwb2ludCBpbmRpY2VzLlxuICAgICAgY29uc3QgaW5kZXhBOiBbbnVtYmVyXSA9IGIyVGltZU9mSW1wYWN0X3NfaW5kZXhBO1xuICAgICAgY29uc3QgaW5kZXhCOiBbbnVtYmVyXSA9IGIyVGltZU9mSW1wYWN0X3NfaW5kZXhCO1xuICAgICAgbGV0IHMyOiBudW1iZXIgPSBmY24uRmluZE1pblNlcGFyYXRpb24oaW5kZXhBLCBpbmRleEIsIHQyKTtcblxuICAgICAgLy8gSXMgdGhlIGZpbmFsIGNvbmZpZ3VyYXRpb24gc2VwYXJhdGVkP1xuICAgICAgaWYgKHMyID4gKHRhcmdldCArIHRvbGVyYW5jZSkpIHtcbiAgICAgICAgLy8gVmljdG9yeSFcbiAgICAgICAgb3V0cHV0LnN0YXRlID0gYjJUT0lPdXRwdXRTdGF0ZS5lX3NlcGFyYXRlZDtcbiAgICAgICAgb3V0cHV0LnQgPSB0TWF4O1xuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhcyB0aGUgc2VwYXJhdGlvbiByZWFjaGVkIHRvbGVyYW5jZT9cbiAgICAgIGlmIChzMiA+ICh0YXJnZXQgLSB0b2xlcmFuY2UpKSB7XG4gICAgICAgIC8vIEFkdmFuY2UgdGhlIHN3ZWVwc1xuICAgICAgICB0MSA9IHQyO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gQ29tcHV0ZSB0aGUgaW5pdGlhbCBzZXBhcmF0aW9uIG9mIHRoZSB3aXRuZXNzIHBvaW50cy5cbiAgICAgIGxldCBzMTogbnVtYmVyID0gZmNuLkV2YWx1YXRlKGluZGV4QVswXSwgaW5kZXhCWzBdLCB0MSk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBpbml0aWFsIG92ZXJsYXAuIFRoaXMgbWlnaHQgaGFwcGVuIGlmIHRoZSByb290IGZpbmRlclxuICAgICAgLy8gcnVucyBvdXQgb2YgaXRlcmF0aW9ucy5cbiAgICAgIGlmIChzMSA8ICh0YXJnZXQgLSB0b2xlcmFuY2UpKSB7XG4gICAgICAgIG91dHB1dC5zdGF0ZSA9IGIyVE9JT3V0cHV0U3RhdGUuZV9mYWlsZWQ7XG4gICAgICAgIG91dHB1dC50ID0gdDE7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZm9yIHRvdWNoaW5nXG4gICAgICBpZiAoczEgPD0gKHRhcmdldCArIHRvbGVyYW5jZSkpIHtcbiAgICAgICAgLy8gVmljdG9yeSEgdDEgc2hvdWxkIGhvbGQgdGhlIFRPSSAoY291bGQgYmUgMC4wKS5cbiAgICAgICAgb3V0cHV0LnN0YXRlID0gYjJUT0lPdXRwdXRTdGF0ZS5lX3RvdWNoaW5nO1xuICAgICAgICBvdXRwdXQudCA9IHQxO1xuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbXB1dGUgMUQgcm9vdCBvZjogZih4KSAtIHRhcmdldCA9IDBcbiAgICAgIGxldCByb290SXRlckNvdW50OiBudW1iZXIgPSAwO1xuICAgICAgbGV0IGExOiBudW1iZXIgPSB0MTtcbiAgICAgIGxldCBhMjogbnVtYmVyID0gdDI7XG4gICAgICBmb3IgKDsgOyApIHtcbiAgICAgICAgLy8gVXNlIGEgbWl4IG9mIHRoZSBzZWNhbnQgcnVsZSBhbmQgYmlzZWN0aW9uLlxuICAgICAgICBsZXQgdDogbnVtYmVyID0gMDtcbiAgICAgICAgaWYgKHJvb3RJdGVyQ291bnQgJiAxKSB7XG4gICAgICAgICAgLy8gU2VjYW50IHJ1bGUgdG8gaW1wcm92ZSBjb252ZXJnZW5jZS5cbiAgICAgICAgICB0ID0gYTEgKyAodGFyZ2V0IC0gczEpICogKGEyIC0gYTEpIC8gKHMyIC0gczEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEJpc2VjdGlvbiB0byBndWFyYW50ZWUgcHJvZ3Jlc3MuXG4gICAgICAgICAgdCA9IDAuNSAqIChhMSArIGEyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICsrcm9vdEl0ZXJDb3VudDtcbiAgICAgICAgKytiMl90b2lSb290SXRlcnM7XG5cbiAgICAgICAgY29uc3QgczogbnVtYmVyID0gZmNuLkV2YWx1YXRlKGluZGV4QVswXSwgaW5kZXhCWzBdLCB0KTtcblxuICAgICAgICBpZiAoYjJBYnMocyAtIHRhcmdldCkgPCB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAvLyB0MiBob2xkcyBhIHRlbnRhdGl2ZSB2YWx1ZSBmb3IgdDFcbiAgICAgICAgICB0MiA9IHQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnN1cmUgd2UgY29udGludWUgdG8gYnJhY2tldCB0aGUgcm9vdC5cbiAgICAgICAgaWYgKHMgPiB0YXJnZXQpIHtcbiAgICAgICAgICBhMSA9IHQ7XG4gICAgICAgICAgczEgPSBzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGEyID0gdDtcbiAgICAgICAgICBzMiA9IHM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm9vdEl0ZXJDb3VudCA9PT0gNTApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBiMl90b2lNYXhSb290SXRlcnMgPSBiMk1heChiMl90b2lNYXhSb290SXRlcnMsIHJvb3RJdGVyQ291bnQpO1xuXG4gICAgICArK3B1c2hCYWNrSXRlcjtcblxuICAgICAgaWYgKHB1c2hCYWNrSXRlciA9PT0gbWF4VmVydGljZXMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgKytpdGVyO1xuICAgICsrYjJfdG9pSXRlcnM7XG5cbiAgICBpZiAoZG9uZSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKGl0ZXIgPT09IGtfbWF4SXRlcmF0aW9ucykge1xuICAgICAgLy8gUm9vdCBmaW5kZXIgZ290IHN0dWNrLiBTZW1pLXZpY3RvcnkuXG4gICAgICBvdXRwdXQuc3RhdGUgPSBiMlRPSU91dHB1dFN0YXRlLmVfZmFpbGVkO1xuICAgICAgb3V0cHV0LnQgPSB0MTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGIyX3RvaU1heEl0ZXJzID0gYjJNYXgoYjJfdG9pTWF4SXRlcnMsIGl0ZXIpO1xuXG4gIGNvbnN0IHRpbWU6IG51bWJlciA9IHRpbWVyLkdldE1pbGxpc2Vjb25kcygpO1xuICBiMl90b2lNYXhUaW1lID0gYjJNYXgoYjJfdG9pTWF4VGltZSwgdGltZSk7XG4gIGIyX3RvaVRpbWUgKz0gdGltZTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFOQTtBQVNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNMQTtBQXBMQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUE3TEE7QUErTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF2TkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/collision/b2_time_of_impact.ts\n");

/***/ }),

/***/ "./src/box2d/common/b2_common.ts":
/*!***************************************!*\
  !*** ./src/box2d/common/b2_common.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2MakeNumberArray = exports.b2MakeNullArray = exports.b2MakeArray = exports.b2ParseUInt = exports.b2ParseInt = exports.b2_commit = exports.b2_branch = exports.b2_version = exports.b2Version = exports.b2_angularSleepTolerance = exports.b2_linearSleepTolerance = exports.b2_timeToSleep = exports.b2_barrierCollisionTime = exports.b2_minParticleSystemBufferCapacity = exports.b2_maxTriadDistanceSquared = exports.b2_maxTriadDistance = exports.b2_maxParticleForce = exports.b2_maxParticlePressure = exports.b2_minParticleWeight = exports.b2_particleStride = exports.b2_maxParticleIndex = exports.b2_invalidParticleIndex = exports.b2_toiBaumgarte = exports.b2_baumgarte = exports.b2_maxRotationSquared = exports.b2_maxRotation = exports.b2_maxTranslationSquared = exports.b2_maxTranslation = exports.b2_maxAngularCorrection = exports.b2_maxLinearCorrection = exports.b2_maxTOIContacts = exports.b2_maxSubSteps = exports.b2_polygonRadius = exports.b2_angularSlop = exports.b2_linearSlop = exports.b2_aabbMultiplier = exports.b2_aabbExtension = exports.b2_maxManifoldPoints = exports.b2_maxPolygonVertices = exports.b2_lengthUnitsPerMeter = exports.b2_pi = exports.b2_epsilon_sq = exports.b2_epsilon = exports.b2_maxFloat = exports.b2Maybe = exports.b2Assert = void 0;\nfunction b2Assert(condition) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (!condition) {\n        throw new (Error.bind.apply(Error, __spreadArrays([void 0], args)))();\n    }\n}\nexports.b2Assert = b2Assert;\nfunction b2Maybe(value, def) {\n    return value !== undefined ? value : def;\n}\nexports.b2Maybe = b2Maybe;\nexports.b2_maxFloat = 1E+37;\nexports.b2_epsilon = 1E-5;\nexports.b2_epsilon_sq = (exports.b2_epsilon * exports.b2_epsilon);\nexports.b2_pi = 3.14159265359;\nexports.b2_lengthUnitsPerMeter = 1.0;\nexports.b2_maxPolygonVertices = 8;\nexports.b2_maxManifoldPoints = 2;\nexports.b2_aabbExtension = 0.1 * exports.b2_lengthUnitsPerMeter;\nexports.b2_aabbMultiplier = 4;\nexports.b2_linearSlop = 0.005 * exports.b2_lengthUnitsPerMeter;\nexports.b2_angularSlop = 2 / 180 * exports.b2_pi;\nexports.b2_polygonRadius = 2 * exports.b2_linearSlop;\nexports.b2_maxSubSteps = 8;\nexports.b2_maxTOIContacts = 32;\nexports.b2_maxLinearCorrection = 0.2 * exports.b2_lengthUnitsPerMeter;\nexports.b2_maxAngularCorrection = 8 / 180 * exports.b2_pi;\nexports.b2_maxTranslation = 2 * exports.b2_lengthUnitsPerMeter;\nexports.b2_maxTranslationSquared = exports.b2_maxTranslation * exports.b2_maxTranslation;\nexports.b2_maxRotation = 0.5 * exports.b2_pi;\nexports.b2_maxRotationSquared = exports.b2_maxRotation * exports.b2_maxRotation;\nexports.b2_baumgarte = 0.2;\nexports.b2_toiBaumgarte = 0.75;\nexports.b2_invalidParticleIndex = -1;\nexports.b2_maxParticleIndex = 0x7FFFFFFF;\nexports.b2_particleStride = 0.75;\nexports.b2_minParticleWeight = 1.0;\nexports.b2_maxParticlePressure = 0.25;\nexports.b2_maxParticleForce = 0.5;\nexports.b2_maxTriadDistance = 2.0 * exports.b2_lengthUnitsPerMeter;\nexports.b2_maxTriadDistanceSquared = (exports.b2_maxTriadDistance * exports.b2_maxTriadDistance);\nexports.b2_minParticleSystemBufferCapacity = 256;\nexports.b2_barrierCollisionTime = 2.5;\nexports.b2_timeToSleep = 0.5;\nexports.b2_linearSleepTolerance = 0.01 * exports.b2_lengthUnitsPerMeter;\nexports.b2_angularSleepTolerance = 2 / 180 * exports.b2_pi;\nvar b2Version = (function () {\n    function b2Version(major, minor, revision) {\n        if (major === void 0) { major = 0; }\n        if (minor === void 0) { minor = 0; }\n        if (revision === void 0) { revision = 0; }\n        this.major = 0;\n        this.minor = 0;\n        this.revision = 0;\n        this.major = major;\n        this.minor = minor;\n        this.revision = revision;\n    }\n    b2Version.prototype.toString = function () {\n        return this.major + \".\" + this.minor + \".\" + this.revision;\n    };\n    return b2Version;\n}());\nexports.b2Version = b2Version;\nexports.b2_version = new b2Version(2, 4, 1);\nexports.b2_branch = \"master\";\nexports.b2_commit = \"9ebbbcd960ad424e03e5de6e66a40764c16f51bc\";\nfunction b2ParseInt(v) {\n    return parseInt(v, 10);\n}\nexports.b2ParseInt = b2ParseInt;\nfunction b2ParseUInt(v) {\n    return Math.abs(parseInt(v, 10));\n}\nexports.b2ParseUInt = b2ParseUInt;\nfunction b2MakeArray(length, init) {\n    var a = new Array(length);\n    for (var i = 0; i < length; ++i) {\n        a[i] = init(i);\n    }\n    return a;\n}\nexports.b2MakeArray = b2MakeArray;\nfunction b2MakeNullArray(length) {\n    var a = new Array(length);\n    for (var i = 0; i < length; ++i) {\n        a[i] = null;\n    }\n    return a;\n}\nexports.b2MakeNullArray = b2MakeNullArray;\nfunction b2MakeNumberArray(length, init) {\n    if (init === void 0) { init = 0; }\n    var a = new Array(length);\n    for (var i = 0; i < length; ++i) {\n        a[i] = init;\n    }\n    return a;\n}\nexports.b2MakeNumberArray = b2MakeNumberArray;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29tbW9uL2IyX2NvbW1vbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9jb21tb24vYjJfY29tbW9uLnRzP2Y3OTciXSwic291cmNlc0NvbnRlbnQiOlsiLypcclxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXHJcbipcclxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuKi9cclxuXHJcbi8vIGltcG9ydCB7IGIyX2xlbmd0aFVuaXRzUGVyTWV0ZXIgfSBmcm9tIFwiLi9iMl9zZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGIyQXNzZXJ0KGNvbmRpdGlvbjogYm9vbGVhbiwgLi4uYXJnczogYW55W10pOiBhc3NlcnRzIGNvbmRpdGlvbiB7XHJcbiAgaWYgKCFjb25kaXRpb24pIHtcclxuICAgIC8vIGRlYnVnZ2VyO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKC4uLmFyZ3MpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGIyTWF5YmU8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQsIGRlZjogVCk6IFQge1xyXG4gIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBkZWY7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBiMl9tYXhGbG9hdDogbnVtYmVyID0gMUUrMzc7IC8vIEZMVF9NQVggaW5zdGVhZCBvZiBOdW1iZXIuTUFYX1ZBTFVFO1xyXG5leHBvcnQgY29uc3QgYjJfZXBzaWxvbjogbnVtYmVyID0gMUUtNTsgLy8gRkxUX0VQU0lMT04gaW5zdGVhZCBvZiBOdW1iZXIuRVBTSUxPTjtcclxuZXhwb3J0IGNvbnN0IGIyX2Vwc2lsb25fc3E6IG51bWJlciA9IChiMl9lcHNpbG9uICogYjJfZXBzaWxvbik7XHJcbmV4cG9ydCBjb25zdCBiMl9waTogbnVtYmVyID0gMy4xNDE1OTI2NTM1OTsgLy8gTWF0aC5QSTtcclxuXHJcbi8vLyBAZmlsZVxyXG4vLy8gR2xvYmFsIHR1bmluZyBjb25zdGFudHMgYmFzZWQgb24gbWV0ZXJzLWtpbG9ncmFtcy1zZWNvbmRzIChNS1MpIHVuaXRzLlxyXG4vLy9cclxuXHJcbi8vIFR1bmFibGUgQ29uc3RhbnRzXHJcblxyXG4vLy8gWW91IGNhbiB1c2UgdGhpcyB0byBjaGFuZ2UgdGhlIGxlbmd0aCBzY2FsZSB1c2VkIGJ5IHlvdXIgZ2FtZS5cclxuLy8vIEZvciBleGFtcGxlIGZvciBpbmNoZXMgeW91IGNvdWxkIHVzZSAzOS40LlxyXG5leHBvcnQgY29uc3QgYjJfbGVuZ3RoVW5pdHNQZXJNZXRlcjogbnVtYmVyID0gMS4wO1xyXG5cclxuLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2ZXJ0aWNlcyBvbiBhIGNvbnZleCBwb2x5Z29uLiBZb3UgY2Fubm90IGluY3JlYXNlXHJcbi8vLyB0aGlzIHRvbyBtdWNoIGJlY2F1c2UgYjJCbG9ja0FsbG9jYXRvciBoYXMgYSBtYXhpbXVtIG9iamVjdCBzaXplLlxyXG5leHBvcnQgY29uc3QgYjJfbWF4UG9seWdvblZlcnRpY2VzOiBudW1iZXIgPSA4O1xyXG5cclxuLy8gQ29sbGlzaW9uXHJcblxyXG4vLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIGNvbnRhY3QgcG9pbnRzIGJldHdlZW4gdHdvIGNvbnZleCBzaGFwZXMuIERvXHJcbi8vLyBub3QgY2hhbmdlIHRoaXMgdmFsdWUuXHJcbmV4cG9ydCBjb25zdCBiMl9tYXhNYW5pZm9sZFBvaW50czogbnVtYmVyID0gMjtcclxuXHJcbi8vLyBUaGlzIGlzIHVzZWQgdG8gZmF0dGVuIEFBQkJzIGluIHRoZSBkeW5hbWljIHRyZWUuIFRoaXMgYWxsb3dzIHByb3hpZXNcclxuLy8vIHRvIG1vdmUgYnkgYSBzbWFsbCBhbW91bnQgd2l0aG91dCB0cmlnZ2VyaW5nIGEgdHJlZSBhZGp1c3RtZW50LlxyXG4vLy8gVGhpcyBpcyBpbiBtZXRlcnMuXHJcbmV4cG9ydCBjb25zdCBiMl9hYWJiRXh0ZW5zaW9uOiBudW1iZXIgPSAwLjEgKiBiMl9sZW5ndGhVbml0c1Blck1ldGVyO1xyXG5cclxuLy8vIFRoaXMgaXMgdXNlZCB0byBmYXR0ZW4gQUFCQnMgaW4gdGhlIGR5bmFtaWMgdHJlZS4gVGhpcyBpcyB1c2VkIHRvIHByZWRpY3RcclxuLy8vIHRoZSBmdXR1cmUgcG9zaXRpb24gYmFzZWQgb24gdGhlIGN1cnJlbnQgZGlzcGxhY2VtZW50LlxyXG4vLy8gVGhpcyBpcyBhIGRpbWVuc2lvbmxlc3MgbXVsdGlwbGllci5cclxuZXhwb3J0IGNvbnN0IGIyX2FhYmJNdWx0aXBsaWVyOiBudW1iZXIgPSA0O1xyXG5cclxuLy8vIEEgc21hbGwgbGVuZ3RoIHVzZWQgYXMgYSBjb2xsaXNpb24gYW5kIGNvbnN0cmFpbnQgdG9sZXJhbmNlLiBVc3VhbGx5IGl0IGlzXHJcbi8vLyBjaG9zZW4gdG8gYmUgbnVtZXJpY2FsbHkgc2lnbmlmaWNhbnQsIGJ1dCB2aXN1YWxseSBpbnNpZ25pZmljYW50LlxyXG5leHBvcnQgY29uc3QgYjJfbGluZWFyU2xvcDogbnVtYmVyID0gMC4wMDUgKiBiMl9sZW5ndGhVbml0c1Blck1ldGVyO1xyXG5cclxuLy8vIEEgc21hbGwgYW5nbGUgdXNlZCBhcyBhIGNvbGxpc2lvbiBhbmQgY29uc3RyYWludCB0b2xlcmFuY2UuIFVzdWFsbHkgaXQgaXNcclxuLy8vIGNob3NlbiB0byBiZSBudW1lcmljYWxseSBzaWduaWZpY2FudCwgYnV0IHZpc3VhbGx5IGluc2lnbmlmaWNhbnQuXHJcbmV4cG9ydCBjb25zdCBiMl9hbmd1bGFyU2xvcDogbnVtYmVyID0gMiAvIDE4MCAqIGIyX3BpO1xyXG5cclxuLy8vIFRoZSByYWRpdXMgb2YgdGhlIHBvbHlnb24vZWRnZSBzaGFwZSBza2luLiBUaGlzIHNob3VsZCBub3QgYmUgbW9kaWZpZWQuIE1ha2luZ1xyXG4vLy8gdGhpcyBzbWFsbGVyIG1lYW5zIHBvbHlnb25zIHdpbGwgaGF2ZSBhbiBpbnN1ZmZpY2llbnQgYnVmZmVyIGZvciBjb250aW51b3VzIGNvbGxpc2lvbi5cclxuLy8vIE1ha2luZyBpdCBsYXJnZXIgbWF5IGNyZWF0ZSBhcnRpZmFjdHMgZm9yIHZlcnRleCBjb2xsaXNpb24uXHJcbmV4cG9ydCBjb25zdCBiMl9wb2x5Z29uUmFkaXVzOiBudW1iZXIgPSAyICogYjJfbGluZWFyU2xvcDtcclxuXHJcbi8vLyBNYXhpbXVtIG51bWJlciBvZiBzdWItc3RlcHMgcGVyIGNvbnRhY3QgaW4gY29udGludW91cyBwaHlzaWNzIHNpbXVsYXRpb24uXHJcbmV4cG9ydCBjb25zdCBiMl9tYXhTdWJTdGVwczogbnVtYmVyID0gODtcclxuXHJcbi8vIER5bmFtaWNzXHJcblxyXG4vLy8gTWF4aW11bSBudW1iZXIgb2YgY29udGFjdHMgdG8gYmUgaGFuZGxlZCB0byBzb2x2ZSBhIFRPSSBpbXBhY3QuXHJcbmV4cG9ydCBjb25zdCBiMl9tYXhUT0lDb250YWN0czogbnVtYmVyID0gMzI7XHJcblxyXG4vLy8gVGhlIG1heGltdW0gbGluZWFyIHBvc2l0aW9uIGNvcnJlY3Rpb24gdXNlZCB3aGVuIHNvbHZpbmcgY29uc3RyYWludHMuIFRoaXMgaGVscHMgdG9cclxuLy8vIHByZXZlbnQgb3ZlcnNob290LlxyXG5leHBvcnQgY29uc3QgYjJfbWF4TGluZWFyQ29ycmVjdGlvbjogbnVtYmVyID0gMC4yICogYjJfbGVuZ3RoVW5pdHNQZXJNZXRlcjtcclxuXHJcbi8vLyBUaGUgbWF4aW11bSBhbmd1bGFyIHBvc2l0aW9uIGNvcnJlY3Rpb24gdXNlZCB3aGVuIHNvbHZpbmcgY29uc3RyYWludHMuIFRoaXMgaGVscHMgdG9cclxuLy8vIHByZXZlbnQgb3ZlcnNob290LlxyXG5leHBvcnQgY29uc3QgYjJfbWF4QW5ndWxhckNvcnJlY3Rpb246IG51bWJlciA9IDggLyAxODAgKiBiMl9waTtcclxuXHJcbi8vLyBUaGUgbWF4aW11bSBsaW5lYXIgdmVsb2NpdHkgb2YgYSBib2R5LiBUaGlzIGxpbWl0IGlzIHZlcnkgbGFyZ2UgYW5kIGlzIHVzZWRcclxuLy8vIHRvIHByZXZlbnQgbnVtZXJpY2FsIHByb2JsZW1zLiBZb3Ugc2hvdWxkbid0IG5lZWQgdG8gYWRqdXN0IHRoaXMuXHJcbmV4cG9ydCBjb25zdCBiMl9tYXhUcmFuc2xhdGlvbjogbnVtYmVyID0gMiAqIGIyX2xlbmd0aFVuaXRzUGVyTWV0ZXI7XHJcbmV4cG9ydCBjb25zdCBiMl9tYXhUcmFuc2xhdGlvblNxdWFyZWQ6IG51bWJlciA9IGIyX21heFRyYW5zbGF0aW9uICogYjJfbWF4VHJhbnNsYXRpb247XHJcblxyXG4vLy8gVGhlIG1heGltdW0gYW5ndWxhciB2ZWxvY2l0eSBvZiBhIGJvZHkuIFRoaXMgbGltaXQgaXMgdmVyeSBsYXJnZSBhbmQgaXMgdXNlZFxyXG4vLy8gdG8gcHJldmVudCBudW1lcmljYWwgcHJvYmxlbXMuIFlvdSBzaG91bGRuJ3QgbmVlZCB0byBhZGp1c3QgdGhpcy5cclxuZXhwb3J0IGNvbnN0IGIyX21heFJvdGF0aW9uOiBudW1iZXIgPSAwLjUgKiBiMl9waTtcclxuZXhwb3J0IGNvbnN0IGIyX21heFJvdGF0aW9uU3F1YXJlZDogbnVtYmVyID0gYjJfbWF4Um90YXRpb24gKiBiMl9tYXhSb3RhdGlvbjtcclxuXHJcbi8vLyBUaGlzIHNjYWxlIGZhY3RvciBjb250cm9scyBob3cgZmFzdCBvdmVybGFwIGlzIHJlc29sdmVkLiBJZGVhbGx5IHRoaXMgd291bGQgYmUgMSBzb1xyXG4vLy8gdGhhdCBvdmVybGFwIGlzIHJlbW92ZWQgaW4gb25lIHRpbWUgc3RlcC4gSG93ZXZlciB1c2luZyB2YWx1ZXMgY2xvc2UgdG8gMSBvZnRlbiBsZWFkXHJcbi8vLyB0byBvdmVyc2hvb3QuXHJcbmV4cG9ydCBjb25zdCBiMl9iYXVtZ2FydGU6IG51bWJlciA9IDAuMjtcclxuZXhwb3J0IGNvbnN0IGIyX3RvaUJhdW1nYXJ0ZTogbnVtYmVyID0gMC43NTtcclxuXHJcbi8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcclxuXHJcbi8vIFBhcnRpY2xlXHJcblxyXG4vLy8gQSBzeW1ib2xpYyBjb25zdGFudCB0aGF0IHN0YW5kcyBmb3IgcGFydGljbGUgYWxsb2NhdGlvbiBlcnJvci5cclxuZXhwb3J0IGNvbnN0IGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4OiBudW1iZXIgPSAtMTtcclxuXHJcbmV4cG9ydCBjb25zdCBiMl9tYXhQYXJ0aWNsZUluZGV4OiBudW1iZXIgPSAweDdGRkZGRkZGO1xyXG5cclxuLy8vIFRoZSBkZWZhdWx0IGRpc3RhbmNlIGJldHdlZW4gcGFydGljbGVzLCBtdWx0aXBsaWVkIGJ5IHRoZSBwYXJ0aWNsZSBkaWFtZXRlci5cclxuZXhwb3J0IGNvbnN0IGIyX3BhcnRpY2xlU3RyaWRlOiBudW1iZXIgPSAwLjc1O1xyXG5cclxuLy8vIFRoZSBtaW5pbXVtIHBhcnRpY2xlIHdlaWdodCB0aGF0IHByb2R1Y2VzIHByZXNzdXJlLlxyXG5leHBvcnQgY29uc3QgYjJfbWluUGFydGljbGVXZWlnaHQ6IG51bWJlciA9IDEuMDtcclxuXHJcbi8vLyBUaGUgdXBwZXIgbGltaXQgZm9yIHBhcnRpY2xlIHByZXNzdXJlLlxyXG5leHBvcnQgY29uc3QgYjJfbWF4UGFydGljbGVQcmVzc3VyZTogbnVtYmVyID0gMC4yNTtcclxuXHJcbi8vLyBUaGUgdXBwZXIgbGltaXQgZm9yIGZvcmNlIGJldHdlZW4gcGFydGljbGVzLlxyXG5leHBvcnQgY29uc3QgYjJfbWF4UGFydGljbGVGb3JjZTogbnVtYmVyID0gMC41O1xyXG5cclxuLy8vIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGJldHdlZW4gcGFydGljbGVzIGluIGEgdHJpYWQsIG11bHRpcGxpZWQgYnkgdGhlIHBhcnRpY2xlIGRpYW1ldGVyLlxyXG5leHBvcnQgY29uc3QgYjJfbWF4VHJpYWREaXN0YW5jZTogbnVtYmVyID0gMi4wICogYjJfbGVuZ3RoVW5pdHNQZXJNZXRlcjtcclxuZXhwb3J0IGNvbnN0IGIyX21heFRyaWFkRGlzdGFuY2VTcXVhcmVkOiBudW1iZXIgPSAoYjJfbWF4VHJpYWREaXN0YW5jZSAqIGIyX21heFRyaWFkRGlzdGFuY2UpO1xyXG5cclxuLy8vIFRoZSBpbml0aWFsIHNpemUgb2YgcGFydGljbGUgZGF0YSBidWZmZXJzLlxyXG5leHBvcnQgY29uc3QgYjJfbWluUGFydGljbGVTeXN0ZW1CdWZmZXJDYXBhY2l0eTogbnVtYmVyID0gMjU2O1xyXG5cclxuLy8vIFRoZSB0aW1lIGludG8gdGhlIGZ1dHVyZSB0aGF0IGNvbGxpc2lvbnMgYWdhaW5zdCBiYXJyaWVyIHBhcnRpY2xlcyB3aWxsIGJlIGRldGVjdGVkLlxyXG5leHBvcnQgY29uc3QgYjJfYmFycmllckNvbGxpc2lvblRpbWU6IG51bWJlciA9IDIuNTtcclxuXHJcbi8vICNlbmRpZlxyXG5cclxuLy8gU2xlZXBcclxuXHJcbi8vLyBUaGUgdGltZSB0aGF0IGEgYm9keSBtdXN0IGJlIHN0aWxsIGJlZm9yZSBpdCB3aWxsIGdvIHRvIHNsZWVwLlxyXG5leHBvcnQgY29uc3QgYjJfdGltZVRvU2xlZXA6IG51bWJlciA9IDAuNTtcclxuXHJcbi8vLyBBIGJvZHkgY2Fubm90IHNsZWVwIGlmIGl0cyBsaW5lYXIgdmVsb2NpdHkgaXMgYWJvdmUgdGhpcyB0b2xlcmFuY2UuXHJcbmV4cG9ydCBjb25zdCBiMl9saW5lYXJTbGVlcFRvbGVyYW5jZTogbnVtYmVyID0gMC4wMSAqIGIyX2xlbmd0aFVuaXRzUGVyTWV0ZXI7XHJcblxyXG4vLy8gQSBib2R5IGNhbm5vdCBzbGVlcCBpZiBpdHMgYW5ndWxhciB2ZWxvY2l0eSBpcyBhYm92ZSB0aGlzIHRvbGVyYW5jZS5cclxuZXhwb3J0IGNvbnN0IGIyX2FuZ3VsYXJTbGVlcFRvbGVyYW5jZTogbnVtYmVyID0gMiAvIDE4MCAqIGIyX3BpO1xyXG5cclxuLy8gRklMRSogYjJfZHVtcEZpbGUgPSBudWxscHRyO1xyXG5cclxuLy8gdm9pZCBiMk9wZW5EdW1wKGNvbnN0IGNoYXIqIGZpbGVOYW1lKVxyXG4vLyB7XHJcbi8vIFx0YjJBc3NlcnQoYjJfZHVtcEZpbGUgPT0gbnVsbHB0cik7XHJcbi8vIFx0YjJfZHVtcEZpbGUgPSBmb3BlbihmaWxlTmFtZSwgXCJ3XCIpO1xyXG4vLyB9XHJcblxyXG4vLyB2b2lkIGIyRHVtcChjb25zdCBjaGFyKiBzdHJpbmcsIC4uLilcclxuLy8ge1xyXG4vLyBcdGlmIChiMl9kdW1wRmlsZSA9PSBudWxscHRyKVxyXG4vLyBcdHtcclxuLy8gXHRcdHJldHVybjtcclxuLy8gXHR9XHJcblxyXG4vLyBcdHZhX2xpc3QgYXJncztcclxuLy8gXHR2YV9zdGFydChhcmdzLCBzdHJpbmcpO1xyXG4vLyBcdHZmcHJpbnRmKGIyX2R1bXBGaWxlLCBzdHJpbmcsIGFyZ3MpO1xyXG4vLyBcdHZhX2VuZChhcmdzKTtcclxuLy8gfVxyXG5cclxuLy8gdm9pZCBiMkNsb3NlRHVtcCgpXHJcbi8vIHtcclxuLy8gXHRmY2xvc2UoYjJfZHVtcEZpbGUpO1xyXG4vLyBcdGIyX2R1bXBGaWxlID0gbnVsbHB0cjtcclxuLy8gfVxyXG5cclxuLy8vIFZlcnNpb24gbnVtYmVyaW5nIHNjaGVtZS5cclxuLy8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvZnR3YXJlX3ZlcnNpb25pbmdcclxuZXhwb3J0IGNsYXNzIGIyVmVyc2lvbiB7XHJcbiAgcHVibGljIG1ham9yOiBudW1iZXIgPSAwOyAvLy88IHNpZ25pZmljYW50IGNoYW5nZXNcclxuICBwdWJsaWMgbWlub3I6IG51bWJlciA9IDA7IC8vLzwgaW5jcmVtZW50YWwgY2hhbmdlc1xyXG4gIHB1YmxpYyByZXZpc2lvbjogbnVtYmVyID0gMDsgLy8vPCBidWcgZml4ZXNcclxuXHJcbiAgY29uc3RydWN0b3IobWFqb3I6IG51bWJlciA9IDAsIG1pbm9yOiBudW1iZXIgPSAwLCByZXZpc2lvbjogbnVtYmVyID0gMCkge1xyXG4gICAgdGhpcy5tYWpvciA9IG1ham9yO1xyXG4gICAgdGhpcy5taW5vciA9IG1pbm9yO1xyXG4gICAgdGhpcy5yZXZpc2lvbiA9IHJldmlzaW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5tYWpvciArIFwiLlwiICsgdGhpcy5taW5vciArIFwiLlwiICsgdGhpcy5yZXZpc2lvbjtcclxuICB9XHJcbn1cclxuXHJcbi8vLyBDdXJyZW50IHZlcnNpb24uXHJcbmV4cG9ydCBjb25zdCBiMl92ZXJzaW9uOiBiMlZlcnNpb24gPSBuZXcgYjJWZXJzaW9uKDIsIDQsIDEpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGIyX2JyYW5jaDogc3RyaW5nID0gXCJtYXN0ZXJcIjtcclxuZXhwb3J0IGNvbnN0IGIyX2NvbW1pdDogc3RyaW5nID0gXCI5ZWJiYmNkOTYwYWQ0MjRlMDNlNWRlNmU2NmE0MDc2NGMxNmY1MWJjXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYjJQYXJzZUludCh2OiBzdHJpbmcpOiBudW1iZXIge1xyXG4gIHJldHVybiBwYXJzZUludCh2LCAxMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMlBhcnNlVUludCh2OiBzdHJpbmcpOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLmFicyhwYXJzZUludCh2LCAxMCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYjJNYWtlQXJyYXk8VD4obGVuZ3RoOiBudW1iZXIsIGluaXQ6IChpOiBudW1iZXIpID0+IFQpOiBUW10ge1xyXG4gIGNvbnN0IGE6IFRbXSA9IG5ldyBBcnJheTxUPihsZW5ndGgpO1xyXG4gIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xyXG4gICAgYVtpXSA9IGluaXQoaSk7XHJcbiAgfVxyXG4gIHJldHVybiBhO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYjJNYWtlTnVsbEFycmF5PFQ+KGxlbmd0aDogbnVtYmVyKTogQXJyYXk8VCB8IG51bGw+IHtcclxuICBjb25zdCBhOiBBcnJheTxUIHwgbnVsbD4gPSBuZXcgQXJyYXk8VCB8IG51bGw+KGxlbmd0aCk7XHJcbiAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XHJcbiAgICBhW2ldID0gbnVsbDtcclxuICB9XHJcbiAgcmV0dXJuIGE7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMk1ha2VOdW1iZXJBcnJheShsZW5ndGg6IG51bWJlciwgaW5pdDogbnVtYmVyID0gMCk6IG51bWJlcltdIHtcclxuICBjb25zdCBhOiBudW1iZXJbXSA9IG5ldyBBcnJheTxudW1iZXI+KGxlbmd0aCk7XHJcbiAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XHJcbiAgICBhW2ldID0gaW5pdDtcclxuICB9XHJcbiAgcmV0dXJuIGE7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBb0JBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFJQTtBQU1BO0FBS0E7QUFLQTtBQUlBO0FBSUE7QUFLQTtBQUdBO0FBS0E7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFLQTtBQUNBO0FBT0E7QUFFQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFPQTtBQUdBO0FBR0E7QUErQkE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUpBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWRBO0FBaUJBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/common/b2_common.ts\n");

/***/ }),

/***/ "./src/box2d/common/b2_draw.ts":
/*!*************************************!*\
  !*** ./src/box2d/common/b2_draw.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Draw = exports.b2DrawFlags = exports.b2TypedColor = exports.b2Color = void 0;\nvar b2Color = (function () {\n    function b2Color(r, g, b, a) {\n        if (r === void 0) { r = 0.5; }\n        if (g === void 0) { g = 0.5; }\n        if (b === void 0) { b = 0.5; }\n        if (a === void 0) { a = 1.0; }\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    b2Color.prototype.Clone = function () {\n        return new b2Color().Copy(this);\n    };\n    b2Color.prototype.Copy = function (other) {\n        this.r = other.r;\n        this.g = other.g;\n        this.b = other.b;\n        this.a = other.a;\n        return this;\n    };\n    b2Color.prototype.IsEqual = function (color) {\n        return (this.r === color.r) && (this.g === color.g) && (this.b === color.b) && (this.a === color.a);\n    };\n    b2Color.prototype.IsZero = function () {\n        return (this.r === 0) && (this.g === 0) && (this.b === 0) && (this.a === 0);\n    };\n    b2Color.prototype.Set = function (r, g, b, a) {\n        if (a === void 0) { a = this.a; }\n        this.SetRGBA(r, g, b, a);\n    };\n    b2Color.prototype.SetByteRGB = function (r, g, b) {\n        this.r = r / 0xff;\n        this.g = g / 0xff;\n        this.b = b / 0xff;\n        return this;\n    };\n    b2Color.prototype.SetByteRGBA = function (r, g, b, a) {\n        this.r = r / 0xff;\n        this.g = g / 0xff;\n        this.b = b / 0xff;\n        this.a = a / 0xff;\n        return this;\n    };\n    b2Color.prototype.SetRGB = function (rr, gg, bb) {\n        this.r = rr;\n        this.g = gg;\n        this.b = bb;\n        return this;\n    };\n    b2Color.prototype.SetRGBA = function (rr, gg, bb, aa) {\n        this.r = rr;\n        this.g = gg;\n        this.b = bb;\n        this.a = aa;\n        return this;\n    };\n    b2Color.prototype.SelfAdd = function (color) {\n        this.r += color.r;\n        this.g += color.g;\n        this.b += color.b;\n        this.a += color.a;\n        return this;\n    };\n    b2Color.prototype.Add = function (color, out) {\n        out.r = this.r + color.r;\n        out.g = this.g + color.g;\n        out.b = this.b + color.b;\n        out.a = this.a + color.a;\n        return out;\n    };\n    b2Color.prototype.SelfSub = function (color) {\n        this.r -= color.r;\n        this.g -= color.g;\n        this.b -= color.b;\n        this.a -= color.a;\n        return this;\n    };\n    b2Color.prototype.Sub = function (color, out) {\n        out.r = this.r - color.r;\n        out.g = this.g - color.g;\n        out.b = this.b - color.b;\n        out.a = this.a - color.a;\n        return out;\n    };\n    b2Color.prototype.SelfMul = function (s) {\n        this.r *= s;\n        this.g *= s;\n        this.b *= s;\n        this.a *= s;\n        return this;\n    };\n    b2Color.prototype.Mul = function (s, out) {\n        out.r = this.r * s;\n        out.g = this.g * s;\n        out.b = this.b * s;\n        out.a = this.a * s;\n        return out;\n    };\n    b2Color.prototype.Mix = function (mixColor, strength) {\n        b2Color.MixColors(this, mixColor, strength);\n    };\n    b2Color.MixColors = function (colorA, colorB, strength) {\n        var dr = (strength * (colorB.r - colorA.r));\n        var dg = (strength * (colorB.g - colorA.g));\n        var db = (strength * (colorB.b - colorA.b));\n        var da = (strength * (colorB.a - colorA.a));\n        colorA.r += dr;\n        colorA.g += dg;\n        colorA.b += db;\n        colorA.a += da;\n        colorB.r -= dr;\n        colorB.g -= dg;\n        colorB.b -= db;\n        colorB.a -= da;\n    };\n    b2Color.prototype.MakeStyleString = function (alpha) {\n        if (alpha === void 0) { alpha = this.a; }\n        return b2Color.MakeStyleString(this.r, this.g, this.b, alpha);\n    };\n    b2Color.MakeStyleString = function (r, g, b, a) {\n        if (a === void 0) { a = 1.0; }\n        r *= 255;\n        g *= 255;\n        b *= 255;\n        if (a < 1) {\n            return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\n        }\n        else {\n            return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n        }\n    };\n    b2Color.ZERO = new b2Color(0, 0, 0, 0);\n    b2Color.RED = new b2Color(1, 0, 0);\n    b2Color.GREEN = new b2Color(0, 1, 0);\n    b2Color.BLUE = new b2Color(0, 0, 1);\n    return b2Color;\n}());\nexports.b2Color = b2Color;\nvar b2TypedColor = (function () {\n    function b2TypedColor() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof Float32Array) {\n            if (args[0].length !== 4) {\n                throw new Error();\n            }\n            this.data = args[0];\n        }\n        else {\n            var rr = typeof args[0] === \"number\" ? args[0] : 0.5;\n            var gg = typeof args[1] === \"number\" ? args[1] : 0.5;\n            var bb = typeof args[2] === \"number\" ? args[2] : 0.5;\n            var aa = typeof args[3] === \"number\" ? args[3] : 1.0;\n            this.data = new Float32Array([rr, gg, bb, aa]);\n        }\n    }\n    Object.defineProperty(b2TypedColor.prototype, \"r\", {\n        get: function () { return this.data[0]; },\n        set: function (value) { this.data[0] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2TypedColor.prototype, \"g\", {\n        get: function () { return this.data[1]; },\n        set: function (value) { this.data[1] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2TypedColor.prototype, \"b\", {\n        get: function () { return this.data[2]; },\n        set: function (value) { this.data[2] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2TypedColor.prototype, \"a\", {\n        get: function () { return this.data[3]; },\n        set: function (value) { this.data[3] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    b2TypedColor.prototype.Clone = function () {\n        return new b2TypedColor(new Float32Array(this.data));\n    };\n    b2TypedColor.prototype.Copy = function (other) {\n        if (other instanceof b2TypedColor) {\n            this.data.set(other.data);\n        }\n        else {\n            this.r = other.r;\n            this.g = other.g;\n            this.b = other.b;\n            this.a = other.a;\n        }\n        return this;\n    };\n    b2TypedColor.prototype.IsEqual = function (color) {\n        return (this.r === color.r) && (this.g === color.g) && (this.b === color.b) && (this.a === color.a);\n    };\n    b2TypedColor.prototype.IsZero = function () {\n        return (this.r === 0) && (this.g === 0) && (this.b === 0) && (this.a === 0);\n    };\n    b2TypedColor.prototype.Set = function (r, g, b, a) {\n        if (a === void 0) { a = this.a; }\n        this.SetRGBA(r, g, b, a);\n    };\n    b2TypedColor.prototype.SetByteRGB = function (r, g, b) {\n        this.r = r / 0xff;\n        this.g = g / 0xff;\n        this.b = b / 0xff;\n        return this;\n    };\n    b2TypedColor.prototype.SetByteRGBA = function (r, g, b, a) {\n        this.r = r / 0xff;\n        this.g = g / 0xff;\n        this.b = b / 0xff;\n        this.a = a / 0xff;\n        return this;\n    };\n    b2TypedColor.prototype.SetRGB = function (rr, gg, bb) {\n        this.r = rr;\n        this.g = gg;\n        this.b = bb;\n        return this;\n    };\n    b2TypedColor.prototype.SetRGBA = function (rr, gg, bb, aa) {\n        this.r = rr;\n        this.g = gg;\n        this.b = bb;\n        this.a = aa;\n        return this;\n    };\n    b2TypedColor.prototype.SelfAdd = function (color) {\n        this.r += color.r;\n        this.g += color.g;\n        this.b += color.b;\n        this.a += color.a;\n        return this;\n    };\n    b2TypedColor.prototype.Add = function (color, out) {\n        out.r = this.r + color.r;\n        out.g = this.g + color.g;\n        out.b = this.b + color.b;\n        out.a = this.a + color.a;\n        return out;\n    };\n    b2TypedColor.prototype.SelfSub = function (color) {\n        this.r -= color.r;\n        this.g -= color.g;\n        this.b -= color.b;\n        this.a -= color.a;\n        return this;\n    };\n    b2TypedColor.prototype.Sub = function (color, out) {\n        out.r = this.r - color.r;\n        out.g = this.g - color.g;\n        out.b = this.b - color.b;\n        out.a = this.a - color.a;\n        return out;\n    };\n    b2TypedColor.prototype.SelfMul = function (s) {\n        this.r *= s;\n        this.g *= s;\n        this.b *= s;\n        this.a *= s;\n        return this;\n    };\n    b2TypedColor.prototype.Mul = function (s, out) {\n        out.r = this.r * s;\n        out.g = this.g * s;\n        out.b = this.b * s;\n        out.a = this.a * s;\n        return out;\n    };\n    b2TypedColor.prototype.Mix = function (mixColor, strength) {\n        b2Color.MixColors(this, mixColor, strength);\n    };\n    b2TypedColor.prototype.MakeStyleString = function (alpha) {\n        if (alpha === void 0) { alpha = this.a; }\n        return b2Color.MakeStyleString(this.r, this.g, this.b, alpha);\n    };\n    return b2TypedColor;\n}());\nexports.b2TypedColor = b2TypedColor;\nvar b2DrawFlags;\n(function (b2DrawFlags) {\n    b2DrawFlags[b2DrawFlags[\"e_none\"] = 0] = \"e_none\";\n    b2DrawFlags[b2DrawFlags[\"e_shapeBit\"] = 1] = \"e_shapeBit\";\n    b2DrawFlags[b2DrawFlags[\"e_jointBit\"] = 2] = \"e_jointBit\";\n    b2DrawFlags[b2DrawFlags[\"e_aabbBit\"] = 4] = \"e_aabbBit\";\n    b2DrawFlags[b2DrawFlags[\"e_pairBit\"] = 8] = \"e_pairBit\";\n    b2DrawFlags[b2DrawFlags[\"e_centerOfMassBit\"] = 16] = \"e_centerOfMassBit\";\n    b2DrawFlags[b2DrawFlags[\"e_particleBit\"] = 32] = \"e_particleBit\";\n    b2DrawFlags[b2DrawFlags[\"e_controllerBit\"] = 64] = \"e_controllerBit\";\n    b2DrawFlags[b2DrawFlags[\"e_all\"] = 63] = \"e_all\";\n})(b2DrawFlags = exports.b2DrawFlags || (exports.b2DrawFlags = {}));\nvar b2Draw = (function () {\n    function b2Draw() {\n        this.m_drawFlags = 0;\n    }\n    b2Draw.prototype.SetFlags = function (flags) {\n        this.m_drawFlags = flags;\n    };\n    b2Draw.prototype.GetFlags = function () {\n        return this.m_drawFlags;\n    };\n    b2Draw.prototype.AppendFlags = function (flags) {\n        this.m_drawFlags |= flags;\n    };\n    b2Draw.prototype.ClearFlags = function (flags) {\n        this.m_drawFlags &= ~flags;\n    };\n    return b2Draw;\n}());\nexports.b2Draw = b2Draw;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29tbW9uL2IyX2RyYXcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvY29tbW9uL2IyX2RyYXcudHM/MWRlYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMTEgRXJpbiBDYXR0byBodHRwOi8vYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJUcmFuc2Zvcm0sIFhZIH0gZnJvbSBcIi4vYjJfbWF0aFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJHQiB7XG4gIHI6IG51bWJlcjtcbiAgZzogbnVtYmVyO1xuICBiOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUkdCQSBleHRlbmRzIFJHQiB7XG4gIGE6IG51bWJlcjtcbn1cblxuLy8vIENvbG9yIGZvciBkZWJ1ZyBkcmF3aW5nLiBFYWNoIHZhbHVlIGhhcyB0aGUgcmFuZ2UgWzAsMV0uXG5leHBvcnQgY2xhc3MgYjJDb2xvciBpbXBsZW1lbnRzIFJHQkEge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFpFUk86IFJlYWRvbmx5PGIyQ29sb3I+ID0gbmV3IGIyQ29sb3IoMCwgMCwgMCwgMCk7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSRUQ6IFJlYWRvbmx5PGIyQ29sb3I+ID0gbmV3IGIyQ29sb3IoMSwgMCwgMCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR1JFRU46IFJlYWRvbmx5PGIyQ29sb3I+ID0gbmV3IGIyQ29sb3IoMCwgMSwgMCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQkxVRTogUmVhZG9ubHk8YjJDb2xvcj4gPSBuZXcgYjJDb2xvcigwLCAwLCAxKTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcjogbnVtYmVyID0gMC41LCBwdWJsaWMgZzogbnVtYmVyID0gMC41LCBwdWJsaWMgYjogbnVtYmVyID0gMC41LCBwdWJsaWMgYTogbnVtYmVyID0gMS4wKSB7fVxuXG4gIHB1YmxpYyBDbG9uZSgpOiBiMkNvbG9yIHtcbiAgICByZXR1cm4gbmV3IGIyQ29sb3IoKS5Db3B5KHRoaXMpO1xuICB9XG5cbiAgcHVibGljIENvcHkob3RoZXI6IFJHQkEpOiB0aGlzIHtcbiAgICB0aGlzLnIgPSBvdGhlci5yO1xuICAgIHRoaXMuZyA9IG90aGVyLmc7XG4gICAgdGhpcy5iID0gb3RoZXIuYjtcbiAgICB0aGlzLmEgPSBvdGhlci5hO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIElzRXF1YWwoY29sb3I6IFJHQkEpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuciA9PT0gY29sb3IucikgJiYgKHRoaXMuZyA9PT0gY29sb3IuZykgJiYgKHRoaXMuYiA9PT0gY29sb3IuYikgJiYgKHRoaXMuYSA9PT0gY29sb3IuYSk7XG4gIH1cblxuICBwdWJsaWMgSXNaZXJvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5yID09PSAwKSAmJiAodGhpcy5nID09PSAwKSAmJiAodGhpcy5iID09PSAwKSAmJiAodGhpcy5hID09PSAwKTtcbiAgfVxuXG4gIHB1YmxpYyBTZXQocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyID0gdGhpcy5hKTogdm9pZCB7XG4gICAgdGhpcy5TZXRSR0JBKHIsIGcsIGIsIGEpO1xuICB9XG5cbiAgcHVibGljIFNldEJ5dGVSR0IocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuciA9IHIgLyAweGZmO1xuICAgIHRoaXMuZyA9IGcgLyAweGZmO1xuICAgIHRoaXMuYiA9IGIgLyAweGZmO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFNldEJ5dGVSR0JBKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuciA9IHIgLyAweGZmO1xuICAgIHRoaXMuZyA9IGcgLyAweGZmO1xuICAgIHRoaXMuYiA9IGIgLyAweGZmO1xuICAgIHRoaXMuYSA9IGEgLyAweGZmO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFNldFJHQihycjogbnVtYmVyLCBnZzogbnVtYmVyLCBiYjogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5yID0gcnI7XG4gICAgdGhpcy5nID0gZ2c7XG4gICAgdGhpcy5iID0gYmI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgU2V0UkdCQShycjogbnVtYmVyLCBnZzogbnVtYmVyLCBiYjogbnVtYmVyLCBhYTogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5yID0gcnI7XG4gICAgdGhpcy5nID0gZ2c7XG4gICAgdGhpcy5iID0gYmI7XG4gICAgdGhpcy5hID0gYWE7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgU2VsZkFkZChjb2xvcjogUkdCQSk6IHRoaXMge1xuICAgIHRoaXMuciArPSBjb2xvci5yO1xuICAgIHRoaXMuZyArPSBjb2xvci5nO1xuICAgIHRoaXMuYiArPSBjb2xvci5iO1xuICAgIHRoaXMuYSArPSBjb2xvci5hO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIEFkZDxUIGV4dGVuZHMgUkdCQT4oY29sb3I6IFJHQkEsIG91dDogVCk6IFQge1xuICAgIG91dC5yID0gdGhpcy5yICsgY29sb3IucjtcbiAgICBvdXQuZyA9IHRoaXMuZyArIGNvbG9yLmc7XG4gICAgb3V0LmIgPSB0aGlzLmIgKyBjb2xvci5iO1xuICAgIG91dC5hID0gdGhpcy5hICsgY29sb3IuYTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIFNlbGZTdWIoY29sb3I6IFJHQkEpOiB0aGlzIHtcbiAgICB0aGlzLnIgLT0gY29sb3IucjtcbiAgICB0aGlzLmcgLT0gY29sb3IuZztcbiAgICB0aGlzLmIgLT0gY29sb3IuYjtcbiAgICB0aGlzLmEgLT0gY29sb3IuYTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBTdWI8VCBleHRlbmRzIFJHQkE+KGNvbG9yOiBSR0JBLCBvdXQ6IFQpOiBUIHtcbiAgICBvdXQuciA9IHRoaXMuciAtIGNvbG9yLnI7XG4gICAgb3V0LmcgPSB0aGlzLmcgLSBjb2xvci5nO1xuICAgIG91dC5iID0gdGhpcy5iIC0gY29sb3IuYjtcbiAgICBvdXQuYSA9IHRoaXMuYSAtIGNvbG9yLmE7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBTZWxmTXVsKHM6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuciAqPSBzO1xuICAgIHRoaXMuZyAqPSBzO1xuICAgIHRoaXMuYiAqPSBzO1xuICAgIHRoaXMuYSAqPSBzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIE11bDxUIGV4dGVuZHMgUkdCQT4oczogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcbiAgICBvdXQuciA9IHRoaXMuciAqIHM7XG4gICAgb3V0LmcgPSB0aGlzLmcgKiBzO1xuICAgIG91dC5iID0gdGhpcy5iICogcztcbiAgICBvdXQuYSA9IHRoaXMuYSAqIHM7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBNaXgobWl4Q29sb3I6IFJHQkEsIHN0cmVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBiMkNvbG9yLk1peENvbG9ycyh0aGlzLCBtaXhDb2xvciwgc3RyZW5ndGgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBNaXhDb2xvcnMoY29sb3JBOiBSR0JBLCBjb2xvckI6IFJHQkEsIHN0cmVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBkciA9IChzdHJlbmd0aCAqIChjb2xvckIuciAtIGNvbG9yQS5yKSk7XG4gICAgY29uc3QgZGcgPSAoc3RyZW5ndGggKiAoY29sb3JCLmcgLSBjb2xvckEuZykpO1xuICAgIGNvbnN0IGRiID0gKHN0cmVuZ3RoICogKGNvbG9yQi5iIC0gY29sb3JBLmIpKTtcbiAgICBjb25zdCBkYSA9IChzdHJlbmd0aCAqIChjb2xvckIuYSAtIGNvbG9yQS5hKSk7XG4gICAgY29sb3JBLnIgKz0gZHI7XG4gICAgY29sb3JBLmcgKz0gZGc7XG4gICAgY29sb3JBLmIgKz0gZGI7XG4gICAgY29sb3JBLmEgKz0gZGE7XG4gICAgY29sb3JCLnIgLT0gZHI7XG4gICAgY29sb3JCLmcgLT0gZGc7XG4gICAgY29sb3JCLmIgLT0gZGI7XG4gICAgY29sb3JCLmEgLT0gZGE7XG4gIH1cblxuICBwdWJsaWMgTWFrZVN0eWxlU3RyaW5nKGFscGhhOiBudW1iZXIgPSB0aGlzLmEpOiBzdHJpbmcge1xuICAgIHJldHVybiBiMkNvbG9yLk1ha2VTdHlsZVN0cmluZyh0aGlzLnIsIHRoaXMuZywgdGhpcy5iLCBhbHBoYSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIE1ha2VTdHlsZVN0cmluZyhyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIgPSAxLjApOiBzdHJpbmcge1xuICAgIC8vIGZ1bmN0aW9uIGNsYW1wKHg6IG51bWJlciwgbG86IG51bWJlciwgaGk6IG51bWJlcikgeyByZXR1cm4geCA8IGxvID8gbG8gOiBoaSA8IHggPyBoaSA6IHg7IH1cbiAgICByICo9IDI1NTsgLy8gciA9IGNsYW1wKHIsIDAsIDI1NSk7XG4gICAgZyAqPSAyNTU7IC8vIGcgPSBjbGFtcChnLCAwLCAyNTUpO1xuICAgIGIgKj0gMjU1OyAvLyBiID0gY2xhbXAoYiwgMCwgMjU1KTtcbiAgICAvLyBhID0gY2xhbXAoYSwgMCwgMSk7XG4gICAgaWYgKGEgPCAxKSB7XG4gICAgICByZXR1cm4gYHJnYmEoJHtyfSwke2d9LCR7Yn0sJHthfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYHJnYigke3J9LCR7Z30sJHtifSlgO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJUeXBlZENvbG9yIGltcGxlbWVudHMgYjJDb2xvciB7XG4gIHB1YmxpYyByZWFkb25seSBkYXRhOiBGbG9hdDMyQXJyYXk7XG4gIHB1YmxpYyBnZXQgcigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhWzBdOyB9IHB1YmxpYyBzZXQgcih2YWx1ZTogbnVtYmVyKSB7IHRoaXMuZGF0YVswXSA9IHZhbHVlOyB9XG4gIHB1YmxpYyBnZXQgZygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhWzFdOyB9IHB1YmxpYyBzZXQgZyh2YWx1ZTogbnVtYmVyKSB7IHRoaXMuZGF0YVsxXSA9IHZhbHVlOyB9XG4gIHB1YmxpYyBnZXQgYigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhWzJdOyB9IHB1YmxpYyBzZXQgYih2YWx1ZTogbnVtYmVyKSB7IHRoaXMuZGF0YVsyXSA9IHZhbHVlOyB9XG4gIHB1YmxpYyBnZXQgYSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhWzNdOyB9IHB1YmxpYyBzZXQgYSh2YWx1ZTogbnVtYmVyKSB7IHRoaXMuZGF0YVszXSA9IHZhbHVlOyB9XG5cbiAgY29uc3RydWN0b3IoKTtcbiAgY29uc3RydWN0b3IoZGF0YTogRmxvYXQzMkFycmF5KTtcbiAgY29uc3RydWN0b3IocnI6IG51bWJlciwgZ2c6IG51bWJlciwgYmI6IG51bWJlcik7XG4gIGNvbnN0cnVjdG9yKHJyOiBudW1iZXIsIGdnOiBudW1iZXIsIGJiOiBudW1iZXIsIGFhOiBudW1iZXIpO1xuICBjb25zdHJ1Y3RvciguLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7XG4gICAgICBpZiAoYXJnc1swXS5sZW5ndGggIT09IDQpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgIHRoaXMuZGF0YSA9IGFyZ3NbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJyOiBudW1iZXIgPSB0eXBlb2YgYXJnc1swXSA9PT0gXCJudW1iZXJcIiA/IGFyZ3NbMF0gOiAwLjU7XG4gICAgICBjb25zdCBnZzogbnVtYmVyID0gdHlwZW9mIGFyZ3NbMV0gPT09IFwibnVtYmVyXCIgPyBhcmdzWzFdIDogMC41O1xuICAgICAgY29uc3QgYmI6IG51bWJlciA9IHR5cGVvZiBhcmdzWzJdID09PSBcIm51bWJlclwiID8gYXJnc1syXSA6IDAuNTtcbiAgICAgIGNvbnN0IGFhOiBudW1iZXIgPSB0eXBlb2YgYXJnc1szXSA9PT0gXCJudW1iZXJcIiA/IGFyZ3NbM10gOiAxLjA7XG4gICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KFsgcnIsIGdnLCBiYiwgYWEgXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIENsb25lKCk6IGIyVHlwZWRDb2xvciB7XG4gICAgcmV0dXJuIG5ldyBiMlR5cGVkQ29sb3IobmV3IEZsb2F0MzJBcnJheSh0aGlzLmRhdGEpKTtcbiAgfVxuXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBSR0JBKTogdGhpcyB7XG4gICAgaWYgKG90aGVyIGluc3RhbmNlb2YgYjJUeXBlZENvbG9yKSB7XG4gICAgICB0aGlzLmRhdGEuc2V0KG90aGVyLmRhdGEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuciA9IG90aGVyLnI7XG4gICAgICB0aGlzLmcgPSBvdGhlci5nO1xuICAgICAgdGhpcy5iID0gb3RoZXIuYjtcbiAgICAgIHRoaXMuYSA9IG90aGVyLmE7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIElzRXF1YWwoY29sb3I6IFJHQkEpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuciA9PT0gY29sb3IucikgJiYgKHRoaXMuZyA9PT0gY29sb3IuZykgJiYgKHRoaXMuYiA9PT0gY29sb3IuYikgJiYgKHRoaXMuYSA9PT0gY29sb3IuYSk7XG4gIH1cblxuICBwdWJsaWMgSXNaZXJvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5yID09PSAwKSAmJiAodGhpcy5nID09PSAwKSAmJiAodGhpcy5iID09PSAwKSAmJiAodGhpcy5hID09PSAwKTtcbiAgfVxuXG4gIHB1YmxpYyBTZXQocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyID0gdGhpcy5hKTogdm9pZCB7XG4gICAgdGhpcy5TZXRSR0JBKHIsIGcsIGIsIGEpO1xuICB9XG5cbiAgcHVibGljIFNldEJ5dGVSR0IocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuciA9IHIgLyAweGZmO1xuICAgIHRoaXMuZyA9IGcgLyAweGZmO1xuICAgIHRoaXMuYiA9IGIgLyAweGZmO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFNldEJ5dGVSR0JBKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuciA9IHIgLyAweGZmO1xuICAgIHRoaXMuZyA9IGcgLyAweGZmO1xuICAgIHRoaXMuYiA9IGIgLyAweGZmO1xuICAgIHRoaXMuYSA9IGEgLyAweGZmO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFNldFJHQihycjogbnVtYmVyLCBnZzogbnVtYmVyLCBiYjogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5yID0gcnI7XG4gICAgdGhpcy5nID0gZ2c7XG4gICAgdGhpcy5iID0gYmI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgU2V0UkdCQShycjogbnVtYmVyLCBnZzogbnVtYmVyLCBiYjogbnVtYmVyLCBhYTogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5yID0gcnI7XG4gICAgdGhpcy5nID0gZ2c7XG4gICAgdGhpcy5iID0gYmI7XG4gICAgdGhpcy5hID0gYWE7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgU2VsZkFkZChjb2xvcjogUkdCQSk6IHRoaXMge1xuICAgIHRoaXMuciArPSBjb2xvci5yO1xuICAgIHRoaXMuZyArPSBjb2xvci5nO1xuICAgIHRoaXMuYiArPSBjb2xvci5iO1xuICAgIHRoaXMuYSArPSBjb2xvci5hO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIEFkZDxUIGV4dGVuZHMgUkdCQT4oY29sb3I6IFJHQkEsIG91dDogVCk6IFQge1xuICAgIG91dC5yID0gdGhpcy5yICsgY29sb3IucjtcbiAgICBvdXQuZyA9IHRoaXMuZyArIGNvbG9yLmc7XG4gICAgb3V0LmIgPSB0aGlzLmIgKyBjb2xvci5iO1xuICAgIG91dC5hID0gdGhpcy5hICsgY29sb3IuYTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIFNlbGZTdWIoY29sb3I6IFJHQkEpOiB0aGlzIHtcbiAgICB0aGlzLnIgLT0gY29sb3IucjtcbiAgICB0aGlzLmcgLT0gY29sb3IuZztcbiAgICB0aGlzLmIgLT0gY29sb3IuYjtcbiAgICB0aGlzLmEgLT0gY29sb3IuYTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBTdWI8VCBleHRlbmRzIFJHQkE+KGNvbG9yOiBSR0JBLCBvdXQ6IFQpOiBUIHtcbiAgICBvdXQuciA9IHRoaXMuciAtIGNvbG9yLnI7XG4gICAgb3V0LmcgPSB0aGlzLmcgLSBjb2xvci5nO1xuICAgIG91dC5iID0gdGhpcy5iIC0gY29sb3IuYjtcbiAgICBvdXQuYSA9IHRoaXMuYSAtIGNvbG9yLmE7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBTZWxmTXVsKHM6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuciAqPSBzO1xuICAgIHRoaXMuZyAqPSBzO1xuICAgIHRoaXMuYiAqPSBzO1xuICAgIHRoaXMuYSAqPSBzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIE11bDxUIGV4dGVuZHMgUkdCQT4oczogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcbiAgICBvdXQuciA9IHRoaXMuciAqIHM7XG4gICAgb3V0LmcgPSB0aGlzLmcgKiBzO1xuICAgIG91dC5iID0gdGhpcy5iICogcztcbiAgICBvdXQuYSA9IHRoaXMuYSAqIHM7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBNaXgobWl4Q29sb3I6IFJHQkEsIHN0cmVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBiMkNvbG9yLk1peENvbG9ycyh0aGlzLCBtaXhDb2xvciwgc3RyZW5ndGgpO1xuICB9XG5cbiAgcHVibGljIE1ha2VTdHlsZVN0cmluZyhhbHBoYTogbnVtYmVyID0gdGhpcy5hKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYjJDb2xvci5NYWtlU3R5bGVTdHJpbmcodGhpcy5yLCB0aGlzLmcsIHRoaXMuYiwgYWxwaGEpO1xuICB9XG59XG5cbmV4cG9ydCBlbnVtIGIyRHJhd0ZsYWdzIHtcbiAgZV9ub25lID0gMCxcbiAgZV9zaGFwZUJpdCA9IDB4MDAwMSwgLy8vPCBkcmF3IHNoYXBlc1xuICBlX2pvaW50Qml0ID0gMHgwMDAyLCAvLy88IGRyYXcgam9pbnQgY29ubmVjdGlvbnNcbiAgZV9hYWJiQml0ID0gMHgwMDA0LCAvLy88IGRyYXcgYXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveGVzXG4gIGVfcGFpckJpdCA9IDB4MDAwOCwgLy8vPCBkcmF3IGJyb2FkLXBoYXNlIHBhaXJzXG4gIGVfY2VudGVyT2ZNYXNzQml0ID0gMHgwMDEwLCAvLy88IGRyYXcgY2VudGVyIG9mIG1hc3MgZnJhbWVcbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICBlX3BhcnRpY2xlQml0ID0gMHgwMDIwLCAvLy88IGRyYXcgcGFydGljbGVzXG4gIC8vICNlbmRpZlxuICAvLyAjaWYgQjJfRU5BQkxFX0NPTlRST0xMRVJcbiAgZV9jb250cm9sbGVyQml0ID0gMHgwMDQwLCAvLy8gQHNlZSBiMkNvbnRyb2xsZXIgbGlzdFxuICAvLyAjZW5kaWZcbiAgZV9hbGwgPSAweDAwM2YsXG59XG5cbi8vLyBJbXBsZW1lbnQgYW5kIHJlZ2lzdGVyIHRoaXMgY2xhc3Mgd2l0aCBhIGIyV29ybGQgdG8gcHJvdmlkZSBkZWJ1ZyBkcmF3aW5nIG9mIHBoeXNpY3Ncbi8vLyBlbnRpdGllcyBpbiB5b3VyIGdhbWUuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgYjJEcmF3IHtcbiAgcHVibGljIG1fZHJhd0ZsYWdzOiBiMkRyYXdGbGFncyA9IDA7XG5cbiAgcHVibGljIFNldEZsYWdzKGZsYWdzOiBiMkRyYXdGbGFncyk6IHZvaWQge1xuICAgIHRoaXMubV9kcmF3RmxhZ3MgPSBmbGFncztcbiAgfVxuXG4gIHB1YmxpYyBHZXRGbGFncygpOiBiMkRyYXdGbGFncyB7XG4gICAgcmV0dXJuIHRoaXMubV9kcmF3RmxhZ3M7XG4gIH1cblxuICBwdWJsaWMgQXBwZW5kRmxhZ3MoZmxhZ3M6IGIyRHJhd0ZsYWdzKTogdm9pZCB7XG4gICAgdGhpcy5tX2RyYXdGbGFncyB8PSBmbGFncztcbiAgfVxuXG4gIHB1YmxpYyBDbGVhckZsYWdzKGZsYWdzOiBiMkRyYXdGbGFncyk6IHZvaWQge1xuICAgIHRoaXMubV9kcmF3RmxhZ3MgJj0gfmZsYWdzO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IFB1c2hUcmFuc2Zvcm0oeGY6IGIyVHJhbnNmb3JtKTogdm9pZDtcblxuICBwdWJsaWMgYWJzdHJhY3QgUG9wVHJhbnNmb3JtKHhmOiBiMlRyYW5zZm9ybSk6IHZvaWQ7XG5cbiAgcHVibGljIGFic3RyYWN0IERyYXdQb2x5Z29uKHZlcnRpY2VzOiBYWVtdLCB2ZXJ0ZXhDb3VudDogbnVtYmVyLCBjb2xvcjogUkdCQSk6IHZvaWQ7XG5cbiAgcHVibGljIGFic3RyYWN0IERyYXdTb2xpZFBvbHlnb24odmVydGljZXM6IFhZW10sIHZlcnRleENvdW50OiBudW1iZXIsIGNvbG9yOiBSR0JBKTogdm9pZDtcblxuICBwdWJsaWMgYWJzdHJhY3QgRHJhd0NpcmNsZShjZW50ZXI6IFhZLCByYWRpdXM6IG51bWJlciwgY29sb3I6IFJHQkEpOiB2b2lkO1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBEcmF3U29saWRDaXJjbGUoY2VudGVyOiBYWSwgcmFkaXVzOiBudW1iZXIsIGF4aXM6IFhZLCBjb2xvcjogUkdCQSk6IHZvaWQ7XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICBwdWJsaWMgYWJzdHJhY3QgRHJhd1BhcnRpY2xlcyhjZW50ZXJzOiBYWVtdLCByYWRpdXM6IG51bWJlciwgY29sb3JzOiBSR0JBW10gfCBudWxsLCBjb3VudDogbnVtYmVyKTogdm9pZDtcbiAgLy8gI2VuZGlmXG5cbiAgcHVibGljIGFic3RyYWN0IERyYXdTZWdtZW50KHAxOiBYWSwgcDI6IFhZLCBjb2xvcjogUkdCQSk6IHZvaWQ7XG5cbiAgcHVibGljIGFic3RyYWN0IERyYXdUcmFuc2Zvcm0oeGY6IGIyVHJhbnNmb3JtKTogdm9pZDtcblxuICBwdWJsaWMgYWJzdHJhY3QgRHJhd1BvaW50KHA6IFhZLCBzaXplOiBudW1iZXIsIGNvbG9yOiBSR0JBKTogdm9pZDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBK0JBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWhKQTtBQUVBO0FBQ0E7QUFDQTtBQTZJQTtBQUFBO0FBbEpBO0FBb0pBO0FBV0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQUFBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7QUFBQTs7O0FBQUE7QUFDQTtBQUFBO0FBQUE7OztBQUFBO0FBbUJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTFJQTtBQTRJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUF1Q0E7QUFyQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBdUJBO0FBQUE7QUF4Q0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/common/b2_draw.ts\n");

/***/ }),

/***/ "./src/box2d/common/b2_growable_stack.ts":
/*!***********************************************!*\
  !*** ./src/box2d/common/b2_growable_stack.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2GrowableStack = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ./b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2GrowableStack = (function () {\n    function b2GrowableStack(N) {\n        this.m_stack = [];\n        this.m_count = 0;\n        this.m_stack = b2_settings_1.b2MakeArray(N, function (index) { return null; });\n        this.m_count = 0;\n    }\n    b2GrowableStack.prototype.Reset = function () {\n        this.m_count = 0;\n        return this;\n    };\n    b2GrowableStack.prototype.Push = function (element) {\n        this.m_stack[this.m_count] = element;\n        this.m_count++;\n    };\n    b2GrowableStack.prototype.Pop = function () {\n        this.m_count--;\n        var element = this.m_stack[this.m_count];\n        this.m_stack[this.m_count] = null;\n        return element;\n    };\n    b2GrowableStack.prototype.GetCount = function () {\n        return this.m_count;\n    };\n    return b2GrowableStack;\n}());\nexports.b2GrowableStack = b2GrowableStack;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29tbW9uL2IyX2dyb3dhYmxlX3N0YWNrLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbW1vbi9iMl9ncm93YWJsZV9zdGFjay50cz84OWJkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAxMCBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyTWFrZUFycmF5IH0gZnJvbSBcIi4vYjJfc2V0dGluZ3NcIjtcblxuLy8vIFRoaXMgaXMgYSBncm93YWJsZSBMSUZPIHN0YWNrIHdpdGggYW4gaW5pdGlhbCBjYXBhY2l0eSBvZiBOLlxuLy8vIElmIHRoZSBzdGFjayBzaXplIGV4Y2VlZHMgdGhlIGluaXRpYWwgY2FwYWNpdHksIHRoZSBoZWFwIGlzIHVzZWRcbi8vLyB0byBpbmNyZWFzZSB0aGUgc2l6ZSBvZiB0aGUgc3RhY2suXG5cbmV4cG9ydCBjbGFzcyBiMkdyb3dhYmxlU3RhY2s8VD4ge1xuICBwdWJsaWMgbV9zdGFjazogQXJyYXk8VCB8IG51bGw+ID0gW107XG4gIHB1YmxpYyBtX2NvdW50OiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKE46IG51bWJlcikge1xuICAgIHRoaXMubV9zdGFjayA9IGIyTWFrZUFycmF5KE4sIChpbmRleCkgPT4gbnVsbCk7XG4gICAgdGhpcy5tX2NvdW50ID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBSZXNldCgpOiB0aGlzIHtcbiAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFB1c2goZWxlbWVudDogVCk6IHZvaWQge1xuICAgIHRoaXMubV9zdGFja1t0aGlzLm1fY291bnRdID0gZWxlbWVudDtcbiAgICB0aGlzLm1fY291bnQrKztcbiAgfVxuXG4gIHB1YmxpYyBQb3AoKTogVCB8IG51bGwge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fY291bnQgPiAwKTtcbiAgICB0aGlzLm1fY291bnQtLTtcbiAgICBjb25zdCBlbGVtZW50OiBUIHwgbnVsbCA9IHRoaXMubV9zdGFja1t0aGlzLm1fY291bnRdO1xuICAgIHRoaXMubV9zdGFja1t0aGlzLm1fY291bnRdID0gbnVsbDtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fY291bnQ7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBTUE7QUFJQTtBQUhBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTlCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/common/b2_growable_stack.ts\n");

/***/ }),

/***/ "./src/box2d/common/b2_math.ts":
/*!*************************************!*\
  !*** ./src/box2d/common/b2_math.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Sweep = exports.b2Transform = exports.b2Rot = exports.b2Mat33 = exports.b2Mat22 = exports.b2Vec3 = exports.b2TypedVec2 = exports.b2Vec2_zero = exports.b2Vec2 = exports.b2RandomRange = exports.b2Random = exports.b2IsPowerOfTwo = exports.b2NextPowerOfTwo = exports.b2Atan2 = exports.b2Asin = exports.b2Acos = exports.b2Sin = exports.b2Cos = exports.b2RadToDeg = exports.b2DegToRad = exports.b2Pow = exports.b2Sqrt = exports.b2InvSqrt = exports.b2Sq = exports.b2IsValid = exports.b2Swap = exports.b2Clamp = exports.b2Max = exports.b2Min = exports.b2Abs = exports.b2_two_pi = exports.b2_180_over_pi = exports.b2_pi_over_180 = void 0;\nvar b2_common_1 = __webpack_require__(/*! ./b2_common */ \"./src/box2d/common/b2_common.ts\");\nexports.b2_pi_over_180 = b2_common_1.b2_pi / 180;\nexports.b2_180_over_pi = 180 / b2_common_1.b2_pi;\nexports.b2_two_pi = 2 * b2_common_1.b2_pi;\nexports.b2Abs = Math.abs;\nfunction b2Min(a, b) { return a < b ? a : b; }\nexports.b2Min = b2Min;\nfunction b2Max(a, b) { return a > b ? a : b; }\nexports.b2Max = b2Max;\nfunction b2Clamp(a, lo, hi) {\n    return (a < lo) ? (lo) : ((a > hi) ? (hi) : (a));\n}\nexports.b2Clamp = b2Clamp;\nfunction b2Swap(a, b) {\n    var tmp = a[0];\n    a[0] = b[0];\n    b[0] = tmp;\n}\nexports.b2Swap = b2Swap;\nexports.b2IsValid = isFinite;\nfunction b2Sq(n) {\n    return n * n;\n}\nexports.b2Sq = b2Sq;\nfunction b2InvSqrt(n) {\n    return 1 / Math.sqrt(n);\n}\nexports.b2InvSqrt = b2InvSqrt;\nexports.b2Sqrt = Math.sqrt;\nexports.b2Pow = Math.pow;\nfunction b2DegToRad(degrees) {\n    return degrees * exports.b2_pi_over_180;\n}\nexports.b2DegToRad = b2DegToRad;\nfunction b2RadToDeg(radians) {\n    return radians * exports.b2_180_over_pi;\n}\nexports.b2RadToDeg = b2RadToDeg;\nexports.b2Cos = Math.cos;\nexports.b2Sin = Math.sin;\nexports.b2Acos = Math.acos;\nexports.b2Asin = Math.asin;\nexports.b2Atan2 = Math.atan2;\nfunction b2NextPowerOfTwo(x) {\n    x |= (x >> 1) & 0x7FFFFFFF;\n    x |= (x >> 2) & 0x3FFFFFFF;\n    x |= (x >> 4) & 0x0FFFFFFF;\n    x |= (x >> 8) & 0x00FFFFFF;\n    x |= (x >> 16) & 0x0000FFFF;\n    return x + 1;\n}\nexports.b2NextPowerOfTwo = b2NextPowerOfTwo;\nfunction b2IsPowerOfTwo(x) {\n    return x > 0 && (x & (x - 1)) === 0;\n}\nexports.b2IsPowerOfTwo = b2IsPowerOfTwo;\nfunction b2Random() {\n    return Math.random() * 2 - 1;\n}\nexports.b2Random = b2Random;\nfunction b2RandomRange(lo, hi) {\n    return (hi - lo) * Math.random() + lo;\n}\nexports.b2RandomRange = b2RandomRange;\nvar b2Vec2 = (function () {\n    function b2Vec2(x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this.x = x;\n        this.y = y;\n    }\n    b2Vec2.prototype.Clone = function () {\n        return new b2Vec2(this.x, this.y);\n    };\n    b2Vec2.prototype.SetZero = function () {\n        this.x = 0;\n        this.y = 0;\n        return this;\n    };\n    b2Vec2.prototype.Set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    b2Vec2.prototype.Copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    b2Vec2.prototype.SelfAdd = function (v) {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    };\n    b2Vec2.prototype.SelfAddXY = function (x, y) {\n        this.x += x;\n        this.y += y;\n        return this;\n    };\n    b2Vec2.prototype.SelfSub = function (v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    };\n    b2Vec2.prototype.SelfSubXY = function (x, y) {\n        this.x -= x;\n        this.y -= y;\n        return this;\n    };\n    b2Vec2.prototype.SelfMul = function (s) {\n        this.x *= s;\n        this.y *= s;\n        return this;\n    };\n    b2Vec2.prototype.SelfMulAdd = function (s, v) {\n        this.x += s * v.x;\n        this.y += s * v.y;\n        return this;\n    };\n    b2Vec2.prototype.SelfMulSub = function (s, v) {\n        this.x -= s * v.x;\n        this.y -= s * v.y;\n        return this;\n    };\n    b2Vec2.prototype.Dot = function (v) {\n        return this.x * v.x + this.y * v.y;\n    };\n    b2Vec2.prototype.Cross = function (v) {\n        return this.x * v.y - this.y * v.x;\n    };\n    b2Vec2.prototype.Length = function () {\n        var x = this.x, y = this.y;\n        return Math.sqrt(x * x + y * y);\n    };\n    b2Vec2.prototype.LengthSquared = function () {\n        var x = this.x, y = this.y;\n        return (x * x + y * y);\n    };\n    b2Vec2.prototype.Normalize = function () {\n        var length = this.Length();\n        if (length >= b2_common_1.b2_epsilon) {\n            var inv_length = 1 / length;\n            this.x *= inv_length;\n            this.y *= inv_length;\n        }\n        return length;\n    };\n    b2Vec2.prototype.SelfNormalize = function () {\n        var length = this.Length();\n        if (length >= b2_common_1.b2_epsilon) {\n            var inv_length = 1 / length;\n            this.x *= inv_length;\n            this.y *= inv_length;\n        }\n        return this;\n    };\n    b2Vec2.prototype.SelfRotate = function (radians) {\n        var c = Math.cos(radians);\n        var s = Math.sin(radians);\n        var x = this.x;\n        this.x = c * x - s * this.y;\n        this.y = s * x + c * this.y;\n        return this;\n    };\n    b2Vec2.prototype.SelfRotateCosSin = function (c, s) {\n        var x = this.x;\n        this.x = c * x - s * this.y;\n        this.y = s * x + c * this.y;\n        return this;\n    };\n    b2Vec2.prototype.IsValid = function () {\n        return isFinite(this.x) && isFinite(this.y);\n    };\n    b2Vec2.prototype.SelfCrossVS = function (s) {\n        var x = this.x;\n        this.x = s * this.y;\n        this.y = -s * x;\n        return this;\n    };\n    b2Vec2.prototype.SelfCrossSV = function (s) {\n        var x = this.x;\n        this.x = -s * this.y;\n        this.y = s * x;\n        return this;\n    };\n    b2Vec2.prototype.SelfMinV = function (v) {\n        this.x = b2Min(this.x, v.x);\n        this.y = b2Min(this.y, v.y);\n        return this;\n    };\n    b2Vec2.prototype.SelfMaxV = function (v) {\n        this.x = b2Max(this.x, v.x);\n        this.y = b2Max(this.y, v.y);\n        return this;\n    };\n    b2Vec2.prototype.SelfAbs = function () {\n        this.x = exports.b2Abs(this.x);\n        this.y = exports.b2Abs(this.y);\n        return this;\n    };\n    b2Vec2.prototype.SelfNeg = function () {\n        this.x = (-this.x);\n        this.y = (-this.y);\n        return this;\n    };\n    b2Vec2.prototype.SelfSkew = function () {\n        var x = this.x;\n        this.x = -this.y;\n        this.y = x;\n        return this;\n    };\n    b2Vec2.MakeArray = function (length) {\n        return b2_common_1.b2MakeArray(length, function (i) { return new b2Vec2(); });\n    };\n    b2Vec2.AbsV = function (v, out) {\n        out.x = exports.b2Abs(v.x);\n        out.y = exports.b2Abs(v.y);\n        return out;\n    };\n    b2Vec2.MinV = function (a, b, out) {\n        out.x = b2Min(a.x, b.x);\n        out.y = b2Min(a.y, b.y);\n        return out;\n    };\n    b2Vec2.MaxV = function (a, b, out) {\n        out.x = b2Max(a.x, b.x);\n        out.y = b2Max(a.y, b.y);\n        return out;\n    };\n    b2Vec2.ClampV = function (v, lo, hi, out) {\n        out.x = b2Clamp(v.x, lo.x, hi.x);\n        out.y = b2Clamp(v.y, lo.y, hi.y);\n        return out;\n    };\n    b2Vec2.RotateV = function (v, radians, out) {\n        var v_x = v.x, v_y = v.y;\n        var c = Math.cos(radians);\n        var s = Math.sin(radians);\n        out.x = c * v_x - s * v_y;\n        out.y = s * v_x + c * v_y;\n        return out;\n    };\n    b2Vec2.DotVV = function (a, b) {\n        return a.x * b.x + a.y * b.y;\n    };\n    b2Vec2.CrossVV = function (a, b) {\n        return a.x * b.y - a.y * b.x;\n    };\n    b2Vec2.CrossVS = function (v, s, out) {\n        var v_x = v.x;\n        out.x = s * v.y;\n        out.y = -s * v_x;\n        return out;\n    };\n    b2Vec2.CrossVOne = function (v, out) {\n        var v_x = v.x;\n        out.x = v.y;\n        out.y = -v_x;\n        return out;\n    };\n    b2Vec2.CrossSV = function (s, v, out) {\n        var v_x = v.x;\n        out.x = -s * v.y;\n        out.y = s * v_x;\n        return out;\n    };\n    b2Vec2.CrossOneV = function (v, out) {\n        var v_x = v.x;\n        out.x = -v.y;\n        out.y = v_x;\n        return out;\n    };\n    b2Vec2.AddVV = function (a, b, out) { out.x = a.x + b.x; out.y = a.y + b.y; return out; };\n    b2Vec2.SubVV = function (a, b, out) { out.x = a.x - b.x; out.y = a.y - b.y; return out; };\n    b2Vec2.MulSV = function (s, v, out) { out.x = v.x * s; out.y = v.y * s; return out; };\n    b2Vec2.MulVS = function (v, s, out) { out.x = v.x * s; out.y = v.y * s; return out; };\n    b2Vec2.AddVMulSV = function (a, s, b, out) { out.x = a.x + (s * b.x); out.y = a.y + (s * b.y); return out; };\n    b2Vec2.SubVMulSV = function (a, s, b, out) { out.x = a.x - (s * b.x); out.y = a.y - (s * b.y); return out; };\n    b2Vec2.AddVCrossSV = function (a, s, v, out) {\n        var v_x = v.x;\n        out.x = a.x - (s * v.y);\n        out.y = a.y + (s * v_x);\n        return out;\n    };\n    b2Vec2.MidVV = function (a, b, out) { out.x = (a.x + b.x) * 0.5; out.y = (a.y + b.y) * 0.5; return out; };\n    b2Vec2.ExtVV = function (a, b, out) { out.x = (b.x - a.x) * 0.5; out.y = (b.y - a.y) * 0.5; return out; };\n    b2Vec2.IsEqualToV = function (a, b) {\n        return a.x === b.x && a.y === b.y;\n    };\n    b2Vec2.DistanceVV = function (a, b) {\n        var c_x = a.x - b.x;\n        var c_y = a.y - b.y;\n        return Math.sqrt(c_x * c_x + c_y * c_y);\n    };\n    b2Vec2.DistanceSquaredVV = function (a, b) {\n        var c_x = a.x - b.x;\n        var c_y = a.y - b.y;\n        return (c_x * c_x + c_y * c_y);\n    };\n    b2Vec2.NegV = function (v, out) { out.x = -v.x; out.y = -v.y; return out; };\n    b2Vec2.ZERO = new b2Vec2(0, 0);\n    b2Vec2.UNITX = new b2Vec2(1, 0);\n    b2Vec2.UNITY = new b2Vec2(0, 1);\n    b2Vec2.s_t0 = new b2Vec2();\n    b2Vec2.s_t1 = new b2Vec2();\n    b2Vec2.s_t2 = new b2Vec2();\n    b2Vec2.s_t3 = new b2Vec2();\n    return b2Vec2;\n}());\nexports.b2Vec2 = b2Vec2;\nexports.b2Vec2_zero = new b2Vec2(0, 0);\nvar b2TypedVec2 = (function () {\n    function b2TypedVec2() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof Float32Array) {\n            if (args[0].length !== 2) {\n                throw new Error();\n            }\n            this.data = args[0];\n        }\n        else {\n            var x = typeof args[0] === \"number\" ? args[0] : 0;\n            var y = typeof args[1] === \"number\" ? args[1] : 0;\n            this.data = new Float32Array([x, y]);\n        }\n    }\n    Object.defineProperty(b2TypedVec2.prototype, \"x\", {\n        get: function () { return this.data[0]; },\n        set: function (value) { this.data[0] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2TypedVec2.prototype, \"y\", {\n        get: function () { return this.data[1]; },\n        set: function (value) { this.data[1] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    b2TypedVec2.prototype.Clone = function () {\n        return new b2TypedVec2(new Float32Array(this.data));\n    };\n    b2TypedVec2.prototype.SetZero = function () {\n        this.x = 0;\n        this.y = 0;\n        return this;\n    };\n    b2TypedVec2.prototype.Set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    b2TypedVec2.prototype.Copy = function (other) {\n        if (other instanceof b2TypedVec2) {\n            this.data.set(other.data);\n        }\n        else {\n            this.x = other.x;\n            this.y = other.y;\n        }\n        return this;\n    };\n    b2TypedVec2.prototype.SelfAdd = function (v) {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfAddXY = function (x, y) {\n        this.x += x;\n        this.y += y;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfSub = function (v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfSubXY = function (x, y) {\n        this.x -= x;\n        this.y -= y;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfMul = function (s) {\n        this.x *= s;\n        this.y *= s;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfMulAdd = function (s, v) {\n        this.x += s * v.x;\n        this.y += s * v.y;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfMulSub = function (s, v) {\n        this.x -= s * v.x;\n        this.y -= s * v.y;\n        return this;\n    };\n    b2TypedVec2.prototype.Dot = function (v) {\n        return this.x * v.x + this.y * v.y;\n    };\n    b2TypedVec2.prototype.Cross = function (v) {\n        return this.x * v.y - this.y * v.x;\n    };\n    b2TypedVec2.prototype.Length = function () {\n        var x = this.x, y = this.y;\n        return Math.sqrt(x * x + y * y);\n    };\n    b2TypedVec2.prototype.LengthSquared = function () {\n        var x = this.x, y = this.y;\n        return (x * x + y * y);\n    };\n    b2TypedVec2.prototype.Normalize = function () {\n        var length = this.Length();\n        if (length >= b2_common_1.b2_epsilon) {\n            var inv_length = 1 / length;\n            this.x *= inv_length;\n            this.y *= inv_length;\n        }\n        return length;\n    };\n    b2TypedVec2.prototype.SelfNormalize = function () {\n        var length = this.Length();\n        if (length >= b2_common_1.b2_epsilon) {\n            var inv_length = 1 / length;\n            this.x *= inv_length;\n            this.y *= inv_length;\n        }\n        return this;\n    };\n    b2TypedVec2.prototype.SelfRotate = function (radians) {\n        var c = Math.cos(radians);\n        var s = Math.sin(radians);\n        var x = this.x;\n        this.x = c * x - s * this.y;\n        this.y = s * x + c * this.y;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfRotateCosSin = function (c, s) {\n        var x = this.x;\n        this.x = c * x - s * this.y;\n        this.y = s * x + c * this.y;\n        return this;\n    };\n    b2TypedVec2.prototype.IsValid = function () {\n        return isFinite(this.x) && isFinite(this.y);\n    };\n    b2TypedVec2.prototype.SelfCrossVS = function (s) {\n        var x = this.x;\n        this.x = s * this.y;\n        this.y = -s * x;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfCrossSV = function (s) {\n        var x = this.x;\n        this.x = -s * this.y;\n        this.y = s * x;\n        return this;\n    };\n    b2TypedVec2.prototype.SelfMinV = function (v) {\n        this.x = b2Min(this.x, v.x);\n        this.y = b2Min(this.y, v.y);\n        return this;\n    };\n    b2TypedVec2.prototype.SelfMaxV = function (v) {\n        this.x = b2Max(this.x, v.x);\n        this.y = b2Max(this.y, v.y);\n        return this;\n    };\n    b2TypedVec2.prototype.SelfAbs = function () {\n        this.x = exports.b2Abs(this.x);\n        this.y = exports.b2Abs(this.y);\n        return this;\n    };\n    b2TypedVec2.prototype.SelfNeg = function () {\n        this.x = (-this.x);\n        this.y = (-this.y);\n        return this;\n    };\n    b2TypedVec2.prototype.SelfSkew = function () {\n        var x = this.x;\n        this.x = -this.y;\n        this.y = x;\n        return this;\n    };\n    return b2TypedVec2;\n}());\nexports.b2TypedVec2 = b2TypedVec2;\nvar b2Vec3 = (function () {\n    function b2Vec3() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof Float32Array) {\n            if (args[0].length !== 3) {\n                throw new Error();\n            }\n            this.data = args[0];\n        }\n        else {\n            var x = typeof args[0] === \"number\" ? args[0] : 0;\n            var y = typeof args[1] === \"number\" ? args[1] : 0;\n            var z = typeof args[2] === \"number\" ? args[2] : 0;\n            this.data = new Float32Array([x, y, z]);\n        }\n    }\n    Object.defineProperty(b2Vec3.prototype, \"x\", {\n        get: function () { return this.data[0]; },\n        set: function (value) { this.data[0] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2Vec3.prototype, \"y\", {\n        get: function () { return this.data[1]; },\n        set: function (value) { this.data[1] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(b2Vec3.prototype, \"z\", {\n        get: function () { return this.data[2]; },\n        set: function (value) { this.data[2] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    b2Vec3.prototype.Clone = function () {\n        return new b2Vec3(this.x, this.y, this.z);\n    };\n    b2Vec3.prototype.SetZero = function () {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        return this;\n    };\n    b2Vec3.prototype.SetXYZ = function (x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    };\n    b2Vec3.prototype.Copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        this.z = other.z;\n        return this;\n    };\n    b2Vec3.prototype.SelfNeg = function () {\n        this.x = (-this.x);\n        this.y = (-this.y);\n        this.z = (-this.z);\n        return this;\n    };\n    b2Vec3.prototype.SelfAdd = function (v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        return this;\n    };\n    b2Vec3.prototype.SelfAddXYZ = function (x, y, z) {\n        this.x += x;\n        this.y += y;\n        this.z += z;\n        return this;\n    };\n    b2Vec3.prototype.SelfSub = function (v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n        return this;\n    };\n    b2Vec3.prototype.SelfSubXYZ = function (x, y, z) {\n        this.x -= x;\n        this.y -= y;\n        this.z -= z;\n        return this;\n    };\n    b2Vec3.prototype.SelfMul = function (s) {\n        this.x *= s;\n        this.y *= s;\n        this.z *= s;\n        return this;\n    };\n    b2Vec3.DotV3V3 = function (a, b) {\n        return a.x * b.x + a.y * b.y + a.z * b.z;\n    };\n    b2Vec3.CrossV3V3 = function (a, b, out) {\n        var a_x = a.x, a_y = a.y, a_z = a.z;\n        var b_x = b.x, b_y = b.y, b_z = b.z;\n        out.x = a_y * b_z - a_z * b_y;\n        out.y = a_z * b_x - a_x * b_z;\n        out.z = a_x * b_y - a_y * b_x;\n        return out;\n    };\n    b2Vec3.ZERO = new b2Vec3(0, 0, 0);\n    b2Vec3.s_t0 = new b2Vec3();\n    return b2Vec3;\n}());\nexports.b2Vec3 = b2Vec3;\nvar b2Mat22 = (function () {\n    function b2Mat22() {\n        this.ex = new b2Vec2(1, 0);\n        this.ey = new b2Vec2(0, 1);\n    }\n    b2Mat22.prototype.Clone = function () {\n        return new b2Mat22().Copy(this);\n    };\n    b2Mat22.FromVV = function (c1, c2) {\n        return new b2Mat22().SetVV(c1, c2);\n    };\n    b2Mat22.FromSSSS = function (r1c1, r1c2, r2c1, r2c2) {\n        return new b2Mat22().SetSSSS(r1c1, r1c2, r2c1, r2c2);\n    };\n    b2Mat22.FromAngle = function (radians) {\n        return new b2Mat22().SetAngle(radians);\n    };\n    b2Mat22.prototype.SetSSSS = function (r1c1, r1c2, r2c1, r2c2) {\n        this.ex.Set(r1c1, r2c1);\n        this.ey.Set(r1c2, r2c2);\n        return this;\n    };\n    b2Mat22.prototype.SetVV = function (c1, c2) {\n        this.ex.Copy(c1);\n        this.ey.Copy(c2);\n        return this;\n    };\n    b2Mat22.prototype.SetAngle = function (radians) {\n        var c = Math.cos(radians);\n        var s = Math.sin(radians);\n        this.ex.Set(c, s);\n        this.ey.Set(-s, c);\n        return this;\n    };\n    b2Mat22.prototype.Copy = function (other) {\n        this.ex.Copy(other.ex);\n        this.ey.Copy(other.ey);\n        return this;\n    };\n    b2Mat22.prototype.SetIdentity = function () {\n        this.ex.Set(1, 0);\n        this.ey.Set(0, 1);\n        return this;\n    };\n    b2Mat22.prototype.SetZero = function () {\n        this.ex.SetZero();\n        this.ey.SetZero();\n        return this;\n    };\n    b2Mat22.prototype.GetAngle = function () {\n        return Math.atan2(this.ex.y, this.ex.x);\n    };\n    b2Mat22.prototype.GetInverse = function (out) {\n        var a = this.ex.x;\n        var b = this.ey.x;\n        var c = this.ex.y;\n        var d = this.ey.y;\n        var det = a * d - b * c;\n        if (det !== 0) {\n            det = 1 / det;\n        }\n        out.ex.x = det * d;\n        out.ey.x = (-det * b);\n        out.ex.y = (-det * c);\n        out.ey.y = det * a;\n        return out;\n    };\n    b2Mat22.prototype.Solve = function (b_x, b_y, out) {\n        var a11 = this.ex.x, a12 = this.ey.x;\n        var a21 = this.ex.y, a22 = this.ey.y;\n        var det = a11 * a22 - a12 * a21;\n        if (det !== 0) {\n            det = 1 / det;\n        }\n        out.x = det * (a22 * b_x - a12 * b_y);\n        out.y = det * (a11 * b_y - a21 * b_x);\n        return out;\n    };\n    b2Mat22.prototype.SelfAbs = function () {\n        this.ex.SelfAbs();\n        this.ey.SelfAbs();\n        return this;\n    };\n    b2Mat22.prototype.SelfInv = function () {\n        this.GetInverse(this);\n        return this;\n    };\n    b2Mat22.prototype.SelfAddM = function (M) {\n        this.ex.SelfAdd(M.ex);\n        this.ey.SelfAdd(M.ey);\n        return this;\n    };\n    b2Mat22.prototype.SelfSubM = function (M) {\n        this.ex.SelfSub(M.ex);\n        this.ey.SelfSub(M.ey);\n        return this;\n    };\n    b2Mat22.AbsM = function (M, out) {\n        var M_ex = M.ex, M_ey = M.ey;\n        out.ex.x = exports.b2Abs(M_ex.x);\n        out.ex.y = exports.b2Abs(M_ex.y);\n        out.ey.x = exports.b2Abs(M_ey.x);\n        out.ey.y = exports.b2Abs(M_ey.y);\n        return out;\n    };\n    b2Mat22.MulMV = function (M, v, out) {\n        var M_ex = M.ex, M_ey = M.ey;\n        var v_x = v.x, v_y = v.y;\n        out.x = M_ex.x * v_x + M_ey.x * v_y;\n        out.y = M_ex.y * v_x + M_ey.y * v_y;\n        return out;\n    };\n    b2Mat22.MulTMV = function (M, v, out) {\n        var M_ex = M.ex, M_ey = M.ey;\n        var v_x = v.x, v_y = v.y;\n        out.x = M_ex.x * v_x + M_ex.y * v_y;\n        out.y = M_ey.x * v_x + M_ey.y * v_y;\n        return out;\n    };\n    b2Mat22.AddMM = function (A, B, out) {\n        var A_ex = A.ex, A_ey = A.ey;\n        var B_ex = B.ex, B_ey = B.ey;\n        out.ex.x = A_ex.x + B_ex.x;\n        out.ex.y = A_ex.y + B_ex.y;\n        out.ey.x = A_ey.x + B_ey.x;\n        out.ey.y = A_ey.y + B_ey.y;\n        return out;\n    };\n    b2Mat22.MulMM = function (A, B, out) {\n        var A_ex_x = A.ex.x, A_ex_y = A.ex.y;\n        var A_ey_x = A.ey.x, A_ey_y = A.ey.y;\n        var B_ex_x = B.ex.x, B_ex_y = B.ex.y;\n        var B_ey_x = B.ey.x, B_ey_y = B.ey.y;\n        out.ex.x = A_ex_x * B_ex_x + A_ey_x * B_ex_y;\n        out.ex.y = A_ex_y * B_ex_x + A_ey_y * B_ex_y;\n        out.ey.x = A_ex_x * B_ey_x + A_ey_x * B_ey_y;\n        out.ey.y = A_ex_y * B_ey_x + A_ey_y * B_ey_y;\n        return out;\n    };\n    b2Mat22.MulTMM = function (A, B, out) {\n        var A_ex_x = A.ex.x, A_ex_y = A.ex.y;\n        var A_ey_x = A.ey.x, A_ey_y = A.ey.y;\n        var B_ex_x = B.ex.x, B_ex_y = B.ex.y;\n        var B_ey_x = B.ey.x, B_ey_y = B.ey.y;\n        out.ex.x = A_ex_x * B_ex_x + A_ex_y * B_ex_y;\n        out.ex.y = A_ey_x * B_ex_x + A_ey_y * B_ex_y;\n        out.ey.x = A_ex_x * B_ey_x + A_ex_y * B_ey_y;\n        out.ey.y = A_ey_x * B_ey_x + A_ey_y * B_ey_y;\n        return out;\n    };\n    b2Mat22.IDENTITY = new b2Mat22();\n    return b2Mat22;\n}());\nexports.b2Mat22 = b2Mat22;\nvar b2Mat33 = (function () {\n    function b2Mat33() {\n        this.data = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n        this.ex = new b2Vec3(this.data.subarray(0, 3));\n        this.ey = new b2Vec3(this.data.subarray(3, 6));\n        this.ez = new b2Vec3(this.data.subarray(6, 9));\n    }\n    b2Mat33.prototype.Clone = function () {\n        return new b2Mat33().Copy(this);\n    };\n    b2Mat33.prototype.SetVVV = function (c1, c2, c3) {\n        this.ex.Copy(c1);\n        this.ey.Copy(c2);\n        this.ez.Copy(c3);\n        return this;\n    };\n    b2Mat33.prototype.Copy = function (other) {\n        this.ex.Copy(other.ex);\n        this.ey.Copy(other.ey);\n        this.ez.Copy(other.ez);\n        return this;\n    };\n    b2Mat33.prototype.SetIdentity = function () {\n        this.ex.SetXYZ(1, 0, 0);\n        this.ey.SetXYZ(0, 1, 0);\n        this.ez.SetXYZ(0, 0, 1);\n        return this;\n    };\n    b2Mat33.prototype.SetZero = function () {\n        this.ex.SetZero();\n        this.ey.SetZero();\n        this.ez.SetZero();\n        return this;\n    };\n    b2Mat33.prototype.SelfAddM = function (M) {\n        this.ex.SelfAdd(M.ex);\n        this.ey.SelfAdd(M.ey);\n        this.ez.SelfAdd(M.ez);\n        return this;\n    };\n    b2Mat33.prototype.Solve33 = function (b_x, b_y, b_z, out) {\n        var a11 = this.ex.x, a21 = this.ex.y, a31 = this.ex.z;\n        var a12 = this.ey.x, a22 = this.ey.y, a32 = this.ey.z;\n        var a13 = this.ez.x, a23 = this.ez.y, a33 = this.ez.z;\n        var det = a11 * (a22 * a33 - a32 * a23) + a21 * (a32 * a13 - a12 * a33) + a31 * (a12 * a23 - a22 * a13);\n        if (det !== 0) {\n            det = 1 / det;\n        }\n        out.x = det * (b_x * (a22 * a33 - a32 * a23) + b_y * (a32 * a13 - a12 * a33) + b_z * (a12 * a23 - a22 * a13));\n        out.y = det * (a11 * (b_y * a33 - b_z * a23) + a21 * (b_z * a13 - b_x * a33) + a31 * (b_x * a23 - b_y * a13));\n        out.z = det * (a11 * (a22 * b_z - a32 * b_y) + a21 * (a32 * b_x - a12 * b_z) + a31 * (a12 * b_y - a22 * b_x));\n        return out;\n    };\n    b2Mat33.prototype.Solve22 = function (b_x, b_y, out) {\n        var a11 = this.ex.x, a12 = this.ey.x;\n        var a21 = this.ex.y, a22 = this.ey.y;\n        var det = a11 * a22 - a12 * a21;\n        if (det !== 0) {\n            det = 1 / det;\n        }\n        out.x = det * (a22 * b_x - a12 * b_y);\n        out.y = det * (a11 * b_y - a21 * b_x);\n        return out;\n    };\n    b2Mat33.prototype.GetInverse22 = function (M) {\n        var a = this.ex.x, b = this.ey.x, c = this.ex.y, d = this.ey.y;\n        var det = a * d - b * c;\n        if (det !== 0) {\n            det = 1 / det;\n        }\n        M.ex.x = det * d;\n        M.ey.x = -det * b;\n        M.ex.z = 0;\n        M.ex.y = -det * c;\n        M.ey.y = det * a;\n        M.ey.z = 0;\n        M.ez.x = 0;\n        M.ez.y = 0;\n        M.ez.z = 0;\n    };\n    b2Mat33.prototype.GetSymInverse33 = function (M) {\n        var det = b2Vec3.DotV3V3(this.ex, b2Vec3.CrossV3V3(this.ey, this.ez, b2Vec3.s_t0));\n        if (det !== 0) {\n            det = 1 / det;\n        }\n        var a11 = this.ex.x, a12 = this.ey.x, a13 = this.ez.x;\n        var a22 = this.ey.y, a23 = this.ez.y;\n        var a33 = this.ez.z;\n        M.ex.x = det * (a22 * a33 - a23 * a23);\n        M.ex.y = det * (a13 * a23 - a12 * a33);\n        M.ex.z = det * (a12 * a23 - a13 * a22);\n        M.ey.x = M.ex.y;\n        M.ey.y = det * (a11 * a33 - a13 * a13);\n        M.ey.z = det * (a13 * a12 - a11 * a23);\n        M.ez.x = M.ex.z;\n        M.ez.y = M.ey.z;\n        M.ez.z = det * (a11 * a22 - a12 * a12);\n    };\n    b2Mat33.MulM33V3 = function (A, v, out) {\n        var v_x = v.x, v_y = v.y, v_z = v.z;\n        out.x = A.ex.x * v_x + A.ey.x * v_y + A.ez.x * v_z;\n        out.y = A.ex.y * v_x + A.ey.y * v_y + A.ez.y * v_z;\n        out.z = A.ex.z * v_x + A.ey.z * v_y + A.ez.z * v_z;\n        return out;\n    };\n    b2Mat33.MulM33XYZ = function (A, x, y, z, out) {\n        out.x = A.ex.x * x + A.ey.x * y + A.ez.x * z;\n        out.y = A.ex.y * x + A.ey.y * y + A.ez.y * z;\n        out.z = A.ex.z * x + A.ey.z * y + A.ez.z * z;\n        return out;\n    };\n    b2Mat33.MulM33V2 = function (A, v, out) {\n        var v_x = v.x, v_y = v.y;\n        out.x = A.ex.x * v_x + A.ey.x * v_y;\n        out.y = A.ex.y * v_x + A.ey.y * v_y;\n        return out;\n    };\n    b2Mat33.MulM33XY = function (A, x, y, out) {\n        out.x = A.ex.x * x + A.ey.x * y;\n        out.y = A.ex.y * x + A.ey.y * y;\n        return out;\n    };\n    b2Mat33.IDENTITY = new b2Mat33();\n    return b2Mat33;\n}());\nexports.b2Mat33 = b2Mat33;\nvar b2Rot = (function () {\n    function b2Rot(angle) {\n        if (angle === void 0) { angle = 0; }\n        this.s = 0;\n        this.c = 1;\n        if (angle) {\n            this.s = Math.sin(angle);\n            this.c = Math.cos(angle);\n        }\n    }\n    b2Rot.prototype.Clone = function () {\n        return new b2Rot().Copy(this);\n    };\n    b2Rot.prototype.Copy = function (other) {\n        this.s = other.s;\n        this.c = other.c;\n        return this;\n    };\n    b2Rot.prototype.SetAngle = function (angle) {\n        this.s = Math.sin(angle);\n        this.c = Math.cos(angle);\n        return this;\n    };\n    b2Rot.prototype.SetIdentity = function () {\n        this.s = 0;\n        this.c = 1;\n        return this;\n    };\n    b2Rot.prototype.GetAngle = function () {\n        return Math.atan2(this.s, this.c);\n    };\n    b2Rot.prototype.GetXAxis = function (out) {\n        out.x = this.c;\n        out.y = this.s;\n        return out;\n    };\n    b2Rot.prototype.GetYAxis = function (out) {\n        out.x = -this.s;\n        out.y = this.c;\n        return out;\n    };\n    b2Rot.MulRR = function (q, r, out) {\n        var q_c = q.c, q_s = q.s;\n        var r_c = r.c, r_s = r.s;\n        out.s = q_s * r_c + q_c * r_s;\n        out.c = q_c * r_c - q_s * r_s;\n        return out;\n    };\n    b2Rot.MulTRR = function (q, r, out) {\n        var q_c = q.c, q_s = q.s;\n        var r_c = r.c, r_s = r.s;\n        out.s = q_c * r_s - q_s * r_c;\n        out.c = q_c * r_c + q_s * r_s;\n        return out;\n    };\n    b2Rot.MulRV = function (q, v, out) {\n        var q_c = q.c, q_s = q.s;\n        var v_x = v.x, v_y = v.y;\n        out.x = q_c * v_x - q_s * v_y;\n        out.y = q_s * v_x + q_c * v_y;\n        return out;\n    };\n    b2Rot.MulTRV = function (q, v, out) {\n        var q_c = q.c, q_s = q.s;\n        var v_x = v.x, v_y = v.y;\n        out.x = q_c * v_x + q_s * v_y;\n        out.y = -q_s * v_x + q_c * v_y;\n        return out;\n    };\n    b2Rot.IDENTITY = new b2Rot();\n    return b2Rot;\n}());\nexports.b2Rot = b2Rot;\nvar b2Transform = (function () {\n    function b2Transform() {\n        this.p = new b2Vec2();\n        this.q = new b2Rot();\n    }\n    b2Transform.prototype.Clone = function () {\n        return new b2Transform().Copy(this);\n    };\n    b2Transform.prototype.Copy = function (other) {\n        this.p.Copy(other.p);\n        this.q.Copy(other.q);\n        return this;\n    };\n    b2Transform.prototype.SetIdentity = function () {\n        this.p.SetZero();\n        this.q.SetIdentity();\n        return this;\n    };\n    b2Transform.prototype.SetPositionRotation = function (position, q) {\n        this.p.Copy(position);\n        this.q.Copy(q);\n        return this;\n    };\n    b2Transform.prototype.SetPositionAngle = function (pos, a) {\n        this.p.Copy(pos);\n        this.q.SetAngle(a);\n        return this;\n    };\n    b2Transform.prototype.SetPosition = function (position) {\n        this.p.Copy(position);\n        return this;\n    };\n    b2Transform.prototype.SetPositionXY = function (x, y) {\n        this.p.Set(x, y);\n        return this;\n    };\n    b2Transform.prototype.SetRotation = function (rotation) {\n        this.q.Copy(rotation);\n        return this;\n    };\n    b2Transform.prototype.SetRotationAngle = function (radians) {\n        this.q.SetAngle(radians);\n        return this;\n    };\n    b2Transform.prototype.GetPosition = function () {\n        return this.p;\n    };\n    b2Transform.prototype.GetRotation = function () {\n        return this.q;\n    };\n    b2Transform.prototype.GetRotationAngle = function () {\n        return this.q.GetAngle();\n    };\n    b2Transform.prototype.GetAngle = function () {\n        return this.q.GetAngle();\n    };\n    b2Transform.MulXV = function (T, v, out) {\n        var T_q_c = T.q.c, T_q_s = T.q.s;\n        var v_x = v.x, v_y = v.y;\n        out.x = (T_q_c * v_x - T_q_s * v_y) + T.p.x;\n        out.y = (T_q_s * v_x + T_q_c * v_y) + T.p.y;\n        return out;\n    };\n    b2Transform.MulTXV = function (T, v, out) {\n        var T_q_c = T.q.c, T_q_s = T.q.s;\n        var p_x = v.x - T.p.x;\n        var p_y = v.y - T.p.y;\n        out.x = (T_q_c * p_x + T_q_s * p_y);\n        out.y = (-T_q_s * p_x + T_q_c * p_y);\n        return out;\n    };\n    b2Transform.MulXX = function (A, B, out) {\n        b2Rot.MulRR(A.q, B.q, out.q);\n        b2Vec2.AddVV(b2Rot.MulRV(A.q, B.p, out.p), A.p, out.p);\n        return out;\n    };\n    b2Transform.MulTXX = function (A, B, out) {\n        b2Rot.MulTRR(A.q, B.q, out.q);\n        b2Rot.MulTRV(A.q, b2Vec2.SubVV(B.p, A.p, out.p), out.p);\n        return out;\n    };\n    b2Transform.IDENTITY = new b2Transform();\n    return b2Transform;\n}());\nexports.b2Transform = b2Transform;\nvar b2Sweep = (function () {\n    function b2Sweep() {\n        this.localCenter = new b2Vec2();\n        this.c0 = new b2Vec2();\n        this.c = new b2Vec2();\n        this.a0 = 0;\n        this.a = 0;\n        this.alpha0 = 0;\n    }\n    b2Sweep.prototype.Clone = function () {\n        return new b2Sweep().Copy(this);\n    };\n    b2Sweep.prototype.Copy = function (other) {\n        this.localCenter.Copy(other.localCenter);\n        this.c0.Copy(other.c0);\n        this.c.Copy(other.c);\n        this.a0 = other.a0;\n        this.a = other.a;\n        this.alpha0 = other.alpha0;\n        return this;\n    };\n    b2Sweep.prototype.GetTransform = function (xf, beta) {\n        xf.p.x = (1.0 - beta) * this.c0.x + beta * this.c.x;\n        xf.p.y = (1.0 - beta) * this.c0.y + beta * this.c.y;\n        var angle = (1.0 - beta) * this.a0 + beta * this.a;\n        xf.q.SetAngle(angle);\n        xf.p.SelfSub(b2Rot.MulRV(xf.q, this.localCenter, b2Vec2.s_t0));\n        return xf;\n    };\n    b2Sweep.prototype.Advance = function (alpha) {\n        var beta = (alpha - this.alpha0) / (1 - this.alpha0);\n        var one_minus_beta = (1 - beta);\n        this.c0.x = one_minus_beta * this.c0.x + beta * this.c.x;\n        this.c0.y = one_minus_beta * this.c0.y + beta * this.c.y;\n        this.a0 = one_minus_beta * this.a0 + beta * this.a;\n        this.alpha0 = alpha;\n    };\n    b2Sweep.prototype.Normalize = function () {\n        var d = exports.b2_two_pi * Math.floor(this.a0 / exports.b2_two_pi);\n        this.a0 -= d;\n        this.a -= d;\n    };\n    return b2Sweep;\n}());\nexports.b2Sweep = b2Sweep;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29tbW9uL2IyX21hdGgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvY29tbW9uL2IyX21hdGgudHM/M2FjMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcclxuKlxyXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4qL1xyXG5cclxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4vYjJfc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgYjJfcGksIGIyX2Vwc2lsb24sIGIyTWFrZUFycmF5IH0gZnJvbSBcIi4vYjJfY29tbW9uXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYjJfcGlfb3Zlcl8xODA6IG51bWJlciA9IGIyX3BpIC8gMTgwO1xyXG5leHBvcnQgY29uc3QgYjJfMTgwX292ZXJfcGk6IG51bWJlciA9IDE4MCAvIGIyX3BpO1xyXG5leHBvcnQgY29uc3QgYjJfdHdvX3BpOiBudW1iZXIgPSAyICogYjJfcGk7XHJcblxyXG5leHBvcnQgY29uc3QgYjJBYnMgPSBNYXRoLmFicztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMk1pbihhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7IHJldHVybiBhIDwgYiA/IGEgOiBiOyB9XHJcbmV4cG9ydCBmdW5jdGlvbiBiMk1heChhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7IHJldHVybiBhID4gYiA/IGEgOiBiOyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYjJDbGFtcChhOiBudW1iZXIsIGxvOiBudW1iZXIsIGhpOiBudW1iZXIpOiBudW1iZXIge1xyXG4gIHJldHVybiAoYSA8IGxvKSA/IChsbykgOiAoKGEgPiBoaSkgPyAoaGkpIDogKGEpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGIyU3dhcDxUPihhOiBUW10sIGI6IFRbXSk6IHZvaWQge1xyXG4gIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7XHJcbiAgY29uc3QgdG1wOiBUID0gYVswXTtcclxuICBhWzBdID0gYlswXTtcclxuICBiWzBdID0gdG1wO1xyXG59XHJcblxyXG4vLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGEgZmxvYXRpbmcgcG9pbnQgbnVtYmVyIGlzXHJcbi8vLyBub3QgYSBOYU4gb3IgaW5maW5pdHkuXHJcbmV4cG9ydCBjb25zdCBiMklzVmFsaWQgPSBpc0Zpbml0ZTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMlNxKG46IG51bWJlcik6IG51bWJlciB7XHJcbiAgcmV0dXJuIG4gKiBuO1xyXG59XHJcblxyXG4vLy8gVGhpcyBpcyBhIGFwcHJveGltYXRlIHlldCBmYXN0IGludmVyc2Ugc3F1YXJlLXJvb3QuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMkludlNxcnQobjogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gMSAvIE1hdGguc3FydChuKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGIyU3FydCA9IE1hdGguc3FydDtcclxuXHJcbmV4cG9ydCBjb25zdCBiMlBvdyA9IE1hdGgucG93O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGIyRGVnVG9SYWQoZGVncmVlczogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gZGVncmVlcyAqIGIyX3BpX292ZXJfMTgwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYjJSYWRUb0RlZyhyYWRpYW5zOiBudW1iZXIpOiBudW1iZXIge1xyXG4gIHJldHVybiByYWRpYW5zICogYjJfMTgwX292ZXJfcGk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBiMkNvcyA9IE1hdGguY29zO1xyXG5leHBvcnQgY29uc3QgYjJTaW4gPSBNYXRoLnNpbjtcclxuZXhwb3J0IGNvbnN0IGIyQWNvcyA9IE1hdGguYWNvcztcclxuZXhwb3J0IGNvbnN0IGIyQXNpbiA9IE1hdGguYXNpbjtcclxuZXhwb3J0IGNvbnN0IGIyQXRhbjIgPSBNYXRoLmF0YW4yO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGIyTmV4dFBvd2VyT2ZUd28oeDogbnVtYmVyKTogbnVtYmVyIHtcclxuICB4IHw9ICh4ID4+IDEpICYgMHg3RkZGRkZGRjtcclxuICB4IHw9ICh4ID4+IDIpICYgMHgzRkZGRkZGRjtcclxuICB4IHw9ICh4ID4+IDQpICYgMHgwRkZGRkZGRjtcclxuICB4IHw9ICh4ID4+IDgpICYgMHgwMEZGRkZGRjtcclxuICB4IHw9ICh4ID4+IDE2KSAmIDB4MDAwMEZGRkY7XHJcbiAgcmV0dXJuIHggKyAxO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYjJJc1Bvd2VyT2ZUd28oeDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHggPiAwICYmICh4ICYgKHggLSAxKSkgPT09IDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMlJhbmRvbSgpOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogMiAtIDE7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiMlJhbmRvbVJhbmdlKGxvOiBudW1iZXIsIGhpOiBudW1iZXIpOiBudW1iZXIge1xyXG4gIHJldHVybiAoaGkgLSBsbykgKiBNYXRoLnJhbmRvbSgpICsgbG87XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgWFkge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbi8vLyBBIDJEIGNvbHVtbiB2ZWN0b3IuXHJcbmV4cG9ydCBjbGFzcyBiMlZlYzIgaW1wbGVtZW50cyBYWSB7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBaRVJPOiBSZWFkb25seTxiMlZlYzI+ID0gbmV3IGIyVmVjMigwLCAwKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFVOSVRYOiBSZWFkb25seTxiMlZlYzI+ID0gbmV3IGIyVmVjMigxLCAwKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFVOSVRZOiBSZWFkb25seTxiMlZlYzI+ID0gbmV3IGIyVmVjMigwLCAxKTtcclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBzX3QwOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBzX3QxOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBzX3QyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBzX3QzOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyID0gMCwgcHVibGljIHk6IG51bWJlciA9IDApIHt9XHJcblxyXG4gIHB1YmxpYyBDbG9uZSgpOiBiMlZlYzIge1xyXG4gICAgcmV0dXJuIG5ldyBiMlZlYzIodGhpcy54LCB0aGlzLnkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldFplcm8oKTogdGhpcyB7XHJcbiAgICB0aGlzLnggPSAwO1xyXG4gICAgdGhpcy55ID0gMDtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldCh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBYWSk6IHRoaXMge1xyXG4gICAgdGhpcy54ID0gb3RoZXIueDtcclxuICAgIHRoaXMueSA9IG90aGVyLnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmQWRkKHY6IFhZKTogdGhpcyB7XHJcbiAgICB0aGlzLnggKz0gdi54O1xyXG4gICAgdGhpcy55ICs9IHYueTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZBZGRYWSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy54ICs9IHg7XHJcbiAgICB0aGlzLnkgKz0geTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZTdWIodjogWFkpOiB0aGlzIHtcclxuICAgIHRoaXMueCAtPSB2Lng7XHJcbiAgICB0aGlzLnkgLT0gdi55O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZlN1YlhZKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICB0aGlzLnggLT0geDtcclxuICAgIHRoaXMueSAtPSB5O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZk11bChzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIHRoaXMueCAqPSBzO1xyXG4gICAgdGhpcy55ICo9IHM7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTXVsQWRkKHM6IG51bWJlciwgdjogWFkpOiB0aGlzIHtcclxuICAgIHRoaXMueCArPSBzICogdi54O1xyXG4gICAgdGhpcy55ICs9IHMgKiB2Lnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTXVsU3ViKHM6IG51bWJlciwgdjogWFkpOiB0aGlzIHtcclxuICAgIHRoaXMueCAtPSBzICogdi54O1xyXG4gICAgdGhpcy55IC09IHMgKiB2Lnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBEb3QodjogWFkpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDcm9zcyh2OiBYWSk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi55IC0gdGhpcy55ICogdi54O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIExlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgY29uc3QgeDogbnVtYmVyID0gdGhpcy54LCB5OiBudW1iZXIgPSB0aGlzLnk7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIExlbmd0aFNxdWFyZWQoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMueCwgeTogbnVtYmVyID0gdGhpcy55O1xyXG4gICAgcmV0dXJuICh4ICogeCArIHkgKiB5KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBOb3JtYWxpemUoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gdGhpcy5MZW5ndGgoKTtcclxuICAgIGlmIChsZW5ndGggPj0gYjJfZXBzaWxvbikge1xyXG4gICAgICBjb25zdCBpbnZfbGVuZ3RoOiBudW1iZXIgPSAxIC8gbGVuZ3RoO1xyXG4gICAgICB0aGlzLnggKj0gaW52X2xlbmd0aDtcclxuICAgICAgdGhpcy55ICo9IGludl9sZW5ndGg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZOb3JtYWxpemUoKTogdGhpcyB7XHJcbiAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IHRoaXMuTGVuZ3RoKCk7XHJcbiAgICBpZiAobGVuZ3RoID49IGIyX2Vwc2lsb24pIHtcclxuICAgICAgY29uc3QgaW52X2xlbmd0aDogbnVtYmVyID0gMSAvIGxlbmd0aDtcclxuICAgICAgdGhpcy54ICo9IGludl9sZW5ndGg7XHJcbiAgICAgIHRoaXMueSAqPSBpbnZfbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZlJvdGF0ZShyYWRpYW5zOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGNvbnN0IGM6IG51bWJlciA9IE1hdGguY29zKHJhZGlhbnMpO1xyXG4gICAgY29uc3QgczogbnVtYmVyID0gTWF0aC5zaW4ocmFkaWFucyk7XHJcbiAgICBjb25zdCB4OiBudW1iZXIgPSB0aGlzLng7XHJcbiAgICB0aGlzLnggPSBjICogeCAtIHMgKiB0aGlzLnk7XHJcbiAgICB0aGlzLnkgPSBzICogeCArIGMgKiB0aGlzLnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmUm90YXRlQ29zU2luKGM6IG51bWJlciwgczogbnVtYmVyKTogdGhpcyB7XHJcbiAgICBjb25zdCB4OiBudW1iZXIgPSB0aGlzLng7XHJcbiAgICB0aGlzLnggPSBjICogeCAtIHMgKiB0aGlzLnk7XHJcbiAgICB0aGlzLnkgPSBzICogeCArIGMgKiB0aGlzLnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBJc1ZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGlzRmluaXRlKHRoaXMueCkgJiYgaXNGaW5pdGUodGhpcy55KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmQ3Jvc3NWUyhzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMueDtcclxuICAgIHRoaXMueCA9ICBzICogdGhpcy55O1xyXG4gICAgdGhpcy55ID0gLXMgKiB4O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZkNyb3NzU1YoczogbnVtYmVyKTogdGhpcyB7XHJcbiAgICBjb25zdCB4OiBudW1iZXIgPSB0aGlzLng7XHJcbiAgICB0aGlzLnggPSAtcyAqIHRoaXMueTtcclxuICAgIHRoaXMueSA9ICBzICogeDtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZNaW5WKHY6IFhZKTogdGhpcyB7XHJcbiAgICB0aGlzLnggPSBiMk1pbih0aGlzLngsIHYueCk7XHJcbiAgICB0aGlzLnkgPSBiMk1pbih0aGlzLnksIHYueSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTWF4Vih2OiBYWSk6IHRoaXMge1xyXG4gICAgdGhpcy54ID0gYjJNYXgodGhpcy54LCB2LngpO1xyXG4gICAgdGhpcy55ID0gYjJNYXgodGhpcy55LCB2LnkpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZkFicygpOiB0aGlzIHtcclxuICAgIHRoaXMueCA9IGIyQWJzKHRoaXMueCk7XHJcbiAgICB0aGlzLnkgPSBiMkFicyh0aGlzLnkpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZk5lZygpOiB0aGlzIHtcclxuICAgIHRoaXMueCA9ICgtdGhpcy54KTtcclxuICAgIHRoaXMueSA9ICgtdGhpcy55KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZTa2V3KCk6IHRoaXMge1xyXG4gICAgY29uc3QgeDogbnVtYmVyID0gdGhpcy54O1xyXG4gICAgdGhpcy54ID0gLXRoaXMueTtcclxuICAgIHRoaXMueSA9IHg7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTWFrZUFycmF5KGxlbmd0aDogbnVtYmVyKTogYjJWZWMyW10ge1xyXG4gICAgcmV0dXJuIGIyTWFrZUFycmF5KGxlbmd0aCwgKGk6IG51bWJlcik6IGIyVmVjMiA9PiBuZXcgYjJWZWMyKCkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBBYnNWPFQgZXh0ZW5kcyBYWT4odjogWFksIG91dDogVCk6IFQge1xyXG4gICAgb3V0LnggPSBiMkFicyh2LngpO1xyXG4gICAgb3V0LnkgPSBiMkFicyh2LnkpO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTWluVjxUIGV4dGVuZHMgWFk+KGE6IFhZLCBiOiBYWSwgb3V0OiBUKTogVCB7XHJcbiAgICBvdXQueCA9IGIyTWluKGEueCwgYi54KTtcclxuICAgIG91dC55ID0gYjJNaW4oYS55LCBiLnkpO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTWF4VjxUIGV4dGVuZHMgWFk+KGE6IFhZLCBiOiBYWSwgb3V0OiBUKTogVCB7XHJcbiAgICBvdXQueCA9IGIyTWF4KGEueCwgYi54KTtcclxuICAgIG91dC55ID0gYjJNYXgoYS55LCBiLnkpO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgQ2xhbXBWPFQgZXh0ZW5kcyBYWT4odjogWFksIGxvOiBYWSwgaGk6IFhZLCBvdXQ6IFQpOiBUIHtcclxuICAgIG91dC54ID0gYjJDbGFtcCh2LngsIGxvLngsIGhpLngpO1xyXG4gICAgb3V0LnkgPSBiMkNsYW1wKHYueSwgbG8ueSwgaGkueSk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBSb3RhdGVWPFQgZXh0ZW5kcyBYWT4odjogWFksIHJhZGlhbnM6IG51bWJlciwgb3V0OiBUKTogVCB7XHJcbiAgICBjb25zdCB2X3g6IG51bWJlciA9IHYueCwgdl95OiBudW1iZXIgPSB2Lnk7XHJcbiAgICBjb25zdCBjOiBudW1iZXIgPSBNYXRoLmNvcyhyYWRpYW5zKTtcclxuICAgIGNvbnN0IHM6IG51bWJlciA9IE1hdGguc2luKHJhZGlhbnMpO1xyXG4gICAgb3V0LnggPSBjICogdl94IC0gcyAqIHZfeTtcclxuICAgIG91dC55ID0gcyAqIHZfeCArIGMgKiB2X3k7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBEb3RWVihhOiBYWSwgYjogWFkpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGEueCAqIGIueCArIGEueSAqIGIueTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgQ3Jvc3NWVihhOiBYWSwgYjogWFkpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGEueCAqIGIueSAtIGEueSAqIGIueDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgQ3Jvc3NWUzxUIGV4dGVuZHMgWFk+KHY6IFhZLCBzOiBudW1iZXIsIG91dDogVCk6IFQge1xyXG4gICAgY29uc3Qgdl94OiBudW1iZXIgPSB2Lng7XHJcbiAgICBvdXQueCA9ICBzICogdi55O1xyXG4gICAgb3V0LnkgPSAtcyAqIHZfeDtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIENyb3NzVk9uZTxUIGV4dGVuZHMgWFk+KHY6IFhZLCBvdXQ6IFQpOiBUIHtcclxuICAgIGNvbnN0IHZfeDogbnVtYmVyID0gdi54O1xyXG4gICAgb3V0LnggPSAgdi55O1xyXG4gICAgb3V0LnkgPSAtdl94O1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgQ3Jvc3NTVjxUIGV4dGVuZHMgWFk+KHM6IG51bWJlciwgdjogWFksIG91dDogVCk6IFQge1xyXG4gICAgY29uc3Qgdl94OiBudW1iZXIgPSB2Lng7XHJcbiAgICBvdXQueCA9IC1zICogdi55O1xyXG4gICAgb3V0LnkgPSAgcyAqIHZfeDtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIENyb3NzT25lVjxUIGV4dGVuZHMgWFk+KHY6IFhZLCBvdXQ6IFQpOiBUIHtcclxuICAgIGNvbnN0IHZfeDogbnVtYmVyID0gdi54O1xyXG4gICAgb3V0LnggPSAtdi55O1xyXG4gICAgb3V0LnkgPSAgdl94O1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgQWRkVlY8VCBleHRlbmRzIFhZPihhOiBYWSwgYjogWFksIG91dDogVCk6IFQgeyBvdXQueCA9IGEueCArIGIueDsgb3V0LnkgPSBhLnkgKyBiLnk7IHJldHVybiBvdXQ7IH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBTdWJWVjxUIGV4dGVuZHMgWFk+KGE6IFhZLCBiOiBYWSwgb3V0OiBUKTogVCB7IG91dC54ID0gYS54IC0gYi54OyBvdXQueSA9IGEueSAtIGIueTsgcmV0dXJuIG91dDsgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIE11bFNWPFQgZXh0ZW5kcyBYWT4oczogbnVtYmVyLCB2OiBYWSwgb3V0OiBUKTogVCB7IG91dC54ID0gdi54ICogczsgb3V0LnkgPSB2LnkgKiBzOyByZXR1cm4gb3V0OyB9XHJcbiAgcHVibGljIHN0YXRpYyBNdWxWUzxUIGV4dGVuZHMgWFk+KHY6IFhZLCBzOiBudW1iZXIsIG91dDogVCk6IFQgeyBvdXQueCA9IHYueCAqIHM7IG91dC55ID0gdi55ICogczsgcmV0dXJuIG91dDsgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEFkZFZNdWxTVjxUIGV4dGVuZHMgWFk+KGE6IFhZLCBzOiBudW1iZXIsIGI6IFhZLCBvdXQ6IFQpOiBUIHsgb3V0LnggPSBhLnggKyAocyAqIGIueCk7IG91dC55ID0gYS55ICsgKHMgKiBiLnkpOyByZXR1cm4gb3V0OyB9XHJcbiAgcHVibGljIHN0YXRpYyBTdWJWTXVsU1Y8VCBleHRlbmRzIFhZPihhOiBYWSwgczogbnVtYmVyLCBiOiBYWSwgb3V0OiBUKTogVCB7IG91dC54ID0gYS54IC0gKHMgKiBiLngpOyBvdXQueSA9IGEueSAtIChzICogYi55KTsgcmV0dXJuIG91dDsgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEFkZFZDcm9zc1NWPFQgZXh0ZW5kcyBYWT4oYTogWFksIHM6IG51bWJlciwgdjogWFksIG91dDogVCk6IFQge1xyXG4gICAgY29uc3Qgdl94OiBudW1iZXIgPSB2Lng7XHJcbiAgICBvdXQueCA9IGEueCAtIChzICogdi55KTtcclxuICAgIG91dC55ID0gYS55ICsgKHMgKiB2X3gpO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTWlkVlY8VCBleHRlbmRzIFhZPihhOiBYWSwgYjogWFksIG91dDogVCk6IFQgeyBvdXQueCA9IChhLnggKyBiLngpICogMC41OyBvdXQueSA9IChhLnkgKyBiLnkpICogMC41OyByZXR1cm4gb3V0OyB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgRXh0VlY8VCBleHRlbmRzIFhZPihhOiBYWSwgYjogWFksIG91dDogVCk6IFQgeyBvdXQueCA9IChiLnggLSBhLngpICogMC41OyBvdXQueSA9IChiLnkgLSBhLnkpICogMC41OyByZXR1cm4gb3V0OyB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgSXNFcXVhbFRvVihhOiBYWSwgYjogWFkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBhLnggPT09IGIueCAmJiBhLnkgPT09IGIueTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgRGlzdGFuY2VWVihhOiBYWSwgYjogWFkpOiBudW1iZXIge1xyXG4gICAgY29uc3QgY194OiBudW1iZXIgPSBhLnggLSBiLng7XHJcbiAgICBjb25zdCBjX3k6IG51bWJlciA9IGEueSAtIGIueTtcclxuICAgIHJldHVybiBNYXRoLnNxcnQoY194ICogY194ICsgY195ICogY195KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgRGlzdGFuY2VTcXVhcmVkVlYoYTogWFksIGI6IFhZKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGNfeDogbnVtYmVyID0gYS54IC0gYi54O1xyXG4gICAgY29uc3QgY195OiBudW1iZXIgPSBhLnkgLSBiLnk7XHJcbiAgICByZXR1cm4gKGNfeCAqIGNfeCArIGNfeSAqIGNfeSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIE5lZ1Y8VCBleHRlbmRzIFhZPih2OiBYWSwgb3V0OiBUKTogVCB7IG91dC54ID0gLXYueDsgb3V0LnkgPSAtdi55OyByZXR1cm4gb3V0OyB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYjJWZWMyX3plcm86IFJlYWRvbmx5PGIyVmVjMj4gPSBuZXcgYjJWZWMyKDAsIDApO1xyXG5cclxuZXhwb3J0IGNsYXNzIGIyVHlwZWRWZWMyIGltcGxlbWVudHMgYjJWZWMyIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgZGF0YTogRmxvYXQzMkFycmF5O1xyXG4gIHB1YmxpYyBnZXQgeCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhWzBdOyB9IHB1YmxpYyBzZXQgeCh2YWx1ZTogbnVtYmVyKSB7IHRoaXMuZGF0YVswXSA9IHZhbHVlOyB9XHJcbiAgcHVibGljIGdldCB5KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGFbMV07IH0gcHVibGljIHNldCB5KHZhbHVlOiBudW1iZXIpIHsgdGhpcy5kYXRhWzFdID0gdmFsdWU7IH1cclxuXHJcbiAgY29uc3RydWN0b3IoKTtcclxuICBjb25zdHJ1Y3RvcihkYXRhOiBGbG9hdDMyQXJyYXkpO1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKTtcclxuICBjb25zdHJ1Y3RvciguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgaWYgKGFyZ3NbMF0ubGVuZ3RoICE9PSAyKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XHJcbiAgICAgIHRoaXMuZGF0YSA9IGFyZ3NbMF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCB4OiBudW1iZXIgPSB0eXBlb2YgYXJnc1swXSA9PT0gXCJudW1iZXJcIiA/IGFyZ3NbMF0gOiAwO1xyXG4gICAgICBjb25zdCB5OiBudW1iZXIgPSB0eXBlb2YgYXJnc1sxXSA9PT0gXCJudW1iZXJcIiA/IGFyZ3NbMV0gOiAwO1xyXG4gICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KFsgeCwgeSBdKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBDbG9uZSgpOiBiMlR5cGVkVmVjMiB7XHJcbiAgICByZXR1cm4gbmV3IGIyVHlwZWRWZWMyKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5kYXRhKSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0WmVybygpOiB0aGlzIHtcclxuICAgIHRoaXMueCA9IDA7XHJcbiAgICB0aGlzLnkgPSAwO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0KHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENvcHkob3RoZXI6IFhZKTogdGhpcyB7XHJcbiAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBiMlR5cGVkVmVjMikge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KG90aGVyLmRhdGEpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMueCA9IG90aGVyLng7XHJcbiAgICAgIHRoaXMueSA9IG90aGVyLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmQWRkKHY6IFhZKTogdGhpcyB7XHJcbiAgICB0aGlzLnggKz0gdi54O1xyXG4gICAgdGhpcy55ICs9IHYueTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZBZGRYWSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy54ICs9IHg7XHJcbiAgICB0aGlzLnkgKz0geTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZTdWIodjogWFkpOiB0aGlzIHtcclxuICAgIHRoaXMueCAtPSB2Lng7XHJcbiAgICB0aGlzLnkgLT0gdi55O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZlN1YlhZKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICB0aGlzLnggLT0geDtcclxuICAgIHRoaXMueSAtPSB5O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZk11bChzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIHRoaXMueCAqPSBzO1xyXG4gICAgdGhpcy55ICo9IHM7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTXVsQWRkKHM6IG51bWJlciwgdjogWFkpOiB0aGlzIHtcclxuICAgIHRoaXMueCArPSBzICogdi54O1xyXG4gICAgdGhpcy55ICs9IHMgKiB2Lnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTXVsU3ViKHM6IG51bWJlciwgdjogWFkpOiB0aGlzIHtcclxuICAgIHRoaXMueCAtPSBzICogdi54O1xyXG4gICAgdGhpcy55IC09IHMgKiB2Lnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBEb3QodjogWFkpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDcm9zcyh2OiBYWSk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi55IC0gdGhpcy55ICogdi54O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIExlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgY29uc3QgeDogbnVtYmVyID0gdGhpcy54LCB5OiBudW1iZXIgPSB0aGlzLnk7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIExlbmd0aFNxdWFyZWQoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMueCwgeTogbnVtYmVyID0gdGhpcy55O1xyXG4gICAgcmV0dXJuICh4ICogeCArIHkgKiB5KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBOb3JtYWxpemUoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gdGhpcy5MZW5ndGgoKTtcclxuICAgIGlmIChsZW5ndGggPj0gYjJfZXBzaWxvbikge1xyXG4gICAgICBjb25zdCBpbnZfbGVuZ3RoOiBudW1iZXIgPSAxIC8gbGVuZ3RoO1xyXG4gICAgICB0aGlzLnggKj0gaW52X2xlbmd0aDtcclxuICAgICAgdGhpcy55ICo9IGludl9sZW5ndGg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZOb3JtYWxpemUoKTogdGhpcyB7XHJcbiAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IHRoaXMuTGVuZ3RoKCk7XHJcbiAgICBpZiAobGVuZ3RoID49IGIyX2Vwc2lsb24pIHtcclxuICAgICAgY29uc3QgaW52X2xlbmd0aDogbnVtYmVyID0gMSAvIGxlbmd0aDtcclxuICAgICAgdGhpcy54ICo9IGludl9sZW5ndGg7XHJcbiAgICAgIHRoaXMueSAqPSBpbnZfbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZlJvdGF0ZShyYWRpYW5zOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGNvbnN0IGM6IG51bWJlciA9IE1hdGguY29zKHJhZGlhbnMpO1xyXG4gICAgY29uc3QgczogbnVtYmVyID0gTWF0aC5zaW4ocmFkaWFucyk7XHJcbiAgICBjb25zdCB4OiBudW1iZXIgPSB0aGlzLng7XHJcbiAgICB0aGlzLnggPSBjICogeCAtIHMgKiB0aGlzLnk7XHJcbiAgICB0aGlzLnkgPSBzICogeCArIGMgKiB0aGlzLnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmUm90YXRlQ29zU2luKGM6IG51bWJlciwgczogbnVtYmVyKTogdGhpcyB7XHJcbiAgICBjb25zdCB4OiBudW1iZXIgPSB0aGlzLng7XHJcbiAgICB0aGlzLnggPSBjICogeCAtIHMgKiB0aGlzLnk7XHJcbiAgICB0aGlzLnkgPSBzICogeCArIGMgKiB0aGlzLnk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBJc1ZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGlzRmluaXRlKHRoaXMueCkgJiYgaXNGaW5pdGUodGhpcy55KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmQ3Jvc3NWUyhzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMueDtcclxuICAgIHRoaXMueCA9ICBzICogdGhpcy55O1xyXG4gICAgdGhpcy55ID0gLXMgKiB4O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZkNyb3NzU1YoczogbnVtYmVyKTogdGhpcyB7XHJcbiAgICBjb25zdCB4OiBudW1iZXIgPSB0aGlzLng7XHJcbiAgICB0aGlzLnggPSAtcyAqIHRoaXMueTtcclxuICAgIHRoaXMueSA9ICBzICogeDtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZNaW5WKHY6IFhZKTogdGhpcyB7XHJcbiAgICB0aGlzLnggPSBiMk1pbih0aGlzLngsIHYueCk7XHJcbiAgICB0aGlzLnkgPSBiMk1pbih0aGlzLnksIHYueSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTWF4Vih2OiBYWSk6IHRoaXMge1xyXG4gICAgdGhpcy54ID0gYjJNYXgodGhpcy54LCB2LngpO1xyXG4gICAgdGhpcy55ID0gYjJNYXgodGhpcy55LCB2LnkpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZkFicygpOiB0aGlzIHtcclxuICAgIHRoaXMueCA9IGIyQWJzKHRoaXMueCk7XHJcbiAgICB0aGlzLnkgPSBiMkFicyh0aGlzLnkpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZk5lZygpOiB0aGlzIHtcclxuICAgIHRoaXMueCA9ICgtdGhpcy54KTtcclxuICAgIHRoaXMueSA9ICgtdGhpcy55KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZTa2V3KCk6IHRoaXMge1xyXG4gICAgY29uc3QgeDogbnVtYmVyID0gdGhpcy54O1xyXG4gICAgdGhpcy54ID0gLXRoaXMueTtcclxuICAgIHRoaXMueSA9IHg7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgWFlaIGV4dGVuZHMgWFkge1xyXG4gIHo6IG51bWJlcjtcclxufVxyXG5cclxuLy8vIEEgMkQgY29sdW1uIHZlY3RvciB3aXRoIDMgZWxlbWVudHMuXHJcbmV4cG9ydCBjbGFzcyBiMlZlYzMgaW1wbGVtZW50cyBYWVoge1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgWkVSTzogUmVhZG9ubHk8YjJWZWMzPiA9IG5ldyBiMlZlYzMoMCwgMCwgMCk7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgc190MDogYjJWZWMzID0gbmV3IGIyVmVjMygpO1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgZGF0YTogRmxvYXQzMkFycmF5O1xyXG4gIHB1YmxpYyBnZXQgeCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhWzBdOyB9IHB1YmxpYyBzZXQgeCh2YWx1ZTogbnVtYmVyKSB7IHRoaXMuZGF0YVswXSA9IHZhbHVlOyB9XHJcbiAgcHVibGljIGdldCB5KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGFbMV07IH0gcHVibGljIHNldCB5KHZhbHVlOiBudW1iZXIpIHsgdGhpcy5kYXRhWzFdID0gdmFsdWU7IH1cclxuICBwdWJsaWMgZ2V0IHooKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YVsyXTsgfSBwdWJsaWMgc2V0IHoodmFsdWU6IG51bWJlcikgeyB0aGlzLmRhdGFbMl0gPSB2YWx1ZTsgfVxyXG5cclxuICBjb25zdHJ1Y3RvcigpO1xyXG4gIGNvbnN0cnVjdG9yKGRhdGE6IEZsb2F0MzJBcnJheSk7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcik7XHJcbiAgY29uc3RydWN0b3IoLi4uYXJnczogYW55W10pIHtcclxuICAgIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgIGlmIChhcmdzWzBdLmxlbmd0aCAhPT0gMykgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxyXG4gICAgICB0aGlzLmRhdGEgPSBhcmdzWzBdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgeDogbnVtYmVyID0gdHlwZW9mIGFyZ3NbMF0gPT09IFwibnVtYmVyXCIgPyBhcmdzWzBdIDogMDtcclxuICAgICAgY29uc3QgeTogbnVtYmVyID0gdHlwZW9mIGFyZ3NbMV0gPT09IFwibnVtYmVyXCIgPyBhcmdzWzFdIDogMDtcclxuICAgICAgY29uc3QgejogbnVtYmVyID0gdHlwZW9mIGFyZ3NbMl0gPT09IFwibnVtYmVyXCIgPyBhcmdzWzJdIDogMDtcclxuICAgICAgdGhpcy5kYXRhID0gbmV3IEZsb2F0MzJBcnJheShbIHgsIHksIHogXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgQ2xvbmUoKTogYjJWZWMzIHtcclxuICAgIHJldHVybiBuZXcgYjJWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldFplcm8oKTogdGhpcyB7XHJcbiAgICB0aGlzLnggPSAwO1xyXG4gICAgdGhpcy55ID0gMDtcclxuICAgIHRoaXMueiA9IDA7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRYWVooeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnogPSB6O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgQ29weShvdGhlcjogWFlaKTogdGhpcyB7XHJcbiAgICB0aGlzLnggPSBvdGhlci54O1xyXG4gICAgdGhpcy55ID0gb3RoZXIueTtcclxuICAgIHRoaXMueiA9IG90aGVyLno7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxmTmVnKCk6IHRoaXMge1xyXG4gICAgdGhpcy54ID0gKC10aGlzLngpO1xyXG4gICAgdGhpcy55ID0gKC10aGlzLnkpO1xyXG4gICAgdGhpcy56ID0gKC10aGlzLnopO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZkFkZCh2OiBYWVopOiB0aGlzIHtcclxuICAgIHRoaXMueCArPSB2Lng7XHJcbiAgICB0aGlzLnkgKz0gdi55O1xyXG4gICAgdGhpcy56ICs9IHYuejtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZBZGRYWVooeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy54ICs9IHg7XHJcbiAgICB0aGlzLnkgKz0geTtcclxuICAgIHRoaXMueiArPSB6O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZlN1Yih2OiBYWVopOiB0aGlzIHtcclxuICAgIHRoaXMueCAtPSB2Lng7XHJcbiAgICB0aGlzLnkgLT0gdi55O1xyXG4gICAgdGhpcy56IC09IHYuejtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZTdWJYWVooeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy54IC09IHg7XHJcbiAgICB0aGlzLnkgLT0geTtcclxuICAgIHRoaXMueiAtPSB6O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZk11bChzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIHRoaXMueCAqPSBzO1xyXG4gICAgdGhpcy55ICo9IHM7XHJcbiAgICB0aGlzLnogKj0gcztcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBEb3RWM1YzKGE6IFhZWiwgYjogWFlaKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBhLnggKiBiLnggKyBhLnkgKiBiLnkgKyBhLnogKiBiLno7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIENyb3NzVjNWMzxUIGV4dGVuZHMgWFlaPihhOiBYWVosIGI6IFhZWiwgb3V0OiBUKTogVCB7XHJcbiAgICBjb25zdCBhX3g6IG51bWJlciA9IGEueCwgYV95ID0gYS55LCBhX3ogPSBhLno7XHJcbiAgICBjb25zdCBiX3g6IG51bWJlciA9IGIueCwgYl95ID0gYi55LCBiX3ogPSBiLno7XHJcbiAgICBvdXQueCA9IGFfeSAqIGJfeiAtIGFfeiAqIGJfeTtcclxuICAgIG91dC55ID0gYV96ICogYl94IC0gYV94ICogYl96O1xyXG4gICAgb3V0LnogPSBhX3ggKiBiX3kgLSBhX3kgKiBiX3g7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxufVxyXG5cclxuLy8vIEEgMi1ieS0yIG1hdHJpeC4gU3RvcmVkIGluIGNvbHVtbi1tYWpvciBvcmRlci5cclxuZXhwb3J0IGNsYXNzIGIyTWF0MjIge1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSURFTlRJVFk6IFJlYWRvbmx5PGIyTWF0MjI+ID0gbmV3IGIyTWF0MjIoKTtcclxuXHJcbiAgLy8gcHVibGljIHJlYWRvbmx5IGRhdGE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoWyAxLCAwLCAwLCAxIF0pO1xyXG4gIC8vIHB1YmxpYyByZWFkb25seSBleDogYjJWZWMyID0gbmV3IGIyVmVjMih0aGlzLmRhdGEuc3ViYXJyYXkoMCwgMikpO1xyXG4gIC8vIHB1YmxpYyByZWFkb25seSBleTogYjJWZWMyID0gbmV3IGIyVmVjMih0aGlzLmRhdGEuc3ViYXJyYXkoMiwgNCkpO1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgZXg6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMSwgMCk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGV5OiBiMlZlYzIgPSBuZXcgYjJWZWMyKDAsIDEpO1xyXG5cclxuICBwdWJsaWMgQ2xvbmUoKTogYjJNYXQyMiB7XHJcbiAgICByZXR1cm4gbmV3IGIyTWF0MjIoKS5Db3B5KHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBGcm9tVlYoYzE6IFhZLCBjMjogWFkpOiBiMk1hdDIyIHtcclxuICAgIHJldHVybiBuZXcgYjJNYXQyMigpLlNldFZWKGMxLCBjMik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEZyb21TU1NTKHIxYzE6IG51bWJlciwgcjFjMjogbnVtYmVyLCByMmMxOiBudW1iZXIsIHIyYzI6IG51bWJlcik6IGIyTWF0MjIge1xyXG4gICAgcmV0dXJuIG5ldyBiMk1hdDIyKCkuU2V0U1NTUyhyMWMxLCByMWMyLCByMmMxLCByMmMyKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgRnJvbUFuZ2xlKHJhZGlhbnM6IG51bWJlcik6IGIyTWF0MjIge1xyXG4gICAgcmV0dXJuIG5ldyBiMk1hdDIyKCkuU2V0QW5nbGUocmFkaWFucyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0U1NTUyhyMWMxOiBudW1iZXIsIHIxYzI6IG51bWJlciwgcjJjMTogbnVtYmVyLCByMmMyOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIHRoaXMuZXguU2V0KHIxYzEsIHIyYzEpO1xyXG4gICAgdGhpcy5leS5TZXQocjFjMiwgcjJjMik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRWVihjMTogWFksIGMyOiBYWSk6IHRoaXMge1xyXG4gICAgdGhpcy5leC5Db3B5KGMxKTtcclxuICAgIHRoaXMuZXkuQ29weShjMik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRBbmdsZShyYWRpYW5zOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGNvbnN0IGM6IG51bWJlciA9IE1hdGguY29zKHJhZGlhbnMpO1xyXG4gICAgY29uc3QgczogbnVtYmVyID0gTWF0aC5zaW4ocmFkaWFucyk7XHJcbiAgICB0aGlzLmV4LlNldCggYywgcyk7XHJcbiAgICB0aGlzLmV5LlNldCgtcywgYyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBiMk1hdDIyKTogdGhpcyB7XHJcbiAgICB0aGlzLmV4LkNvcHkob3RoZXIuZXgpO1xyXG4gICAgdGhpcy5leS5Db3B5KG90aGVyLmV5KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldElkZW50aXR5KCk6IHRoaXMge1xyXG4gICAgdGhpcy5leC5TZXQoMSwgMCk7XHJcbiAgICB0aGlzLmV5LlNldCgwLCAxKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldFplcm8oKTogdGhpcyB7XHJcbiAgICB0aGlzLmV4LlNldFplcm8oKTtcclxuICAgIHRoaXMuZXkuU2V0WmVybygpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgR2V0QW5nbGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMuZXgueSwgdGhpcy5leC54KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBHZXRJbnZlcnNlKG91dDogYjJNYXQyMik6IGIyTWF0MjIge1xyXG4gICAgY29uc3QgYTogbnVtYmVyID0gdGhpcy5leC54O1xyXG4gICAgY29uc3QgYjogbnVtYmVyID0gdGhpcy5leS54O1xyXG4gICAgY29uc3QgYzogbnVtYmVyID0gdGhpcy5leC55O1xyXG4gICAgY29uc3QgZDogbnVtYmVyID0gdGhpcy5leS55O1xyXG4gICAgbGV0IGRldDogbnVtYmVyID0gYSAqIGQgLSBiICogYztcclxuICAgIGlmIChkZXQgIT09IDApIHtcclxuICAgICAgZGV0ID0gMSAvIGRldDtcclxuICAgIH1cclxuICAgIG91dC5leC54ID0gICBkZXQgKiBkO1xyXG4gICAgb3V0LmV5LnggPSAoLWRldCAqIGIpO1xyXG4gICAgb3V0LmV4LnkgPSAoLWRldCAqIGMpO1xyXG4gICAgb3V0LmV5LnkgPSAgIGRldCAqIGE7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNvbHZlPFQgZXh0ZW5kcyBYWT4oYl94OiBudW1iZXIsIGJfeTogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcclxuICAgIGNvbnN0IGExMTogbnVtYmVyID0gdGhpcy5leC54LCBhMTIgPSB0aGlzLmV5Lng7XHJcbiAgICBjb25zdCBhMjE6IG51bWJlciA9IHRoaXMuZXgueSwgYTIyID0gdGhpcy5leS55O1xyXG4gICAgbGV0IGRldDogbnVtYmVyID0gYTExICogYTIyIC0gYTEyICogYTIxO1xyXG4gICAgaWYgKGRldCAhPT0gMCkge1xyXG4gICAgICBkZXQgPSAxIC8gZGV0O1xyXG4gICAgfVxyXG4gICAgb3V0LnggPSBkZXQgKiAoYTIyICogYl94IC0gYTEyICogYl95KTtcclxuICAgIG91dC55ID0gZGV0ICogKGExMSAqIGJfeSAtIGEyMSAqIGJfeCk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZBYnMoKTogdGhpcyB7XHJcbiAgICB0aGlzLmV4LlNlbGZBYnMoKTtcclxuICAgIHRoaXMuZXkuU2VsZkFicygpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZkludigpOiB0aGlzIHtcclxuICAgIHRoaXMuR2V0SW52ZXJzZSh0aGlzKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZBZGRNKE06IGIyTWF0MjIpOiB0aGlzIHtcclxuICAgIHRoaXMuZXguU2VsZkFkZChNLmV4KTtcclxuICAgIHRoaXMuZXkuU2VsZkFkZChNLmV5KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZTdWJNKE06IGIyTWF0MjIpOiB0aGlzIHtcclxuICAgIHRoaXMuZXguU2VsZlN1YihNLmV4KTtcclxuICAgIHRoaXMuZXkuU2VsZlN1YihNLmV5KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBBYnNNKE06IGIyTWF0MjIsIG91dDogYjJNYXQyMik6IGIyTWF0MjIge1xyXG4gICAgY29uc3QgTV9leDogYjJWZWMyID0gTS5leCwgTV9leTogYjJWZWMyID0gTS5leTtcclxuICAgIG91dC5leC54ID0gYjJBYnMoTV9leC54KTtcclxuICAgIG91dC5leC55ID0gYjJBYnMoTV9leC55KTtcclxuICAgIG91dC5leS54ID0gYjJBYnMoTV9leS54KTtcclxuICAgIG91dC5leS55ID0gYjJBYnMoTV9leS55KTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIE11bE1WPFQgZXh0ZW5kcyBYWT4oTTogYjJNYXQyMiwgdjogWFksIG91dDogVCk6IFQge1xyXG4gICAgY29uc3QgTV9leDogYjJWZWMyID0gTS5leCwgTV9leTogYjJWZWMyID0gTS5leTtcclxuICAgIGNvbnN0IHZfeDogbnVtYmVyID0gdi54LCB2X3k6IG51bWJlciA9IHYueTtcclxuICAgIG91dC54ID0gTV9leC54ICogdl94ICsgTV9leS54ICogdl95O1xyXG4gICAgb3V0LnkgPSBNX2V4LnkgKiB2X3ggKyBNX2V5LnkgKiB2X3k7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBNdWxUTVY8VCBleHRlbmRzIFhZPihNOiBiMk1hdDIyLCB2OiBYWSwgb3V0OiBUKTogVCB7XHJcbiAgICBjb25zdCBNX2V4OiBiMlZlYzIgPSBNLmV4LCBNX2V5OiBiMlZlYzIgPSBNLmV5O1xyXG4gICAgY29uc3Qgdl94OiBudW1iZXIgPSB2LngsIHZfeTogbnVtYmVyID0gdi55O1xyXG4gICAgb3V0LnggPSBNX2V4LnggKiB2X3ggKyBNX2V4LnkgKiB2X3k7XHJcbiAgICBvdXQueSA9IE1fZXkueCAqIHZfeCArIE1fZXkueSAqIHZfeTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEFkZE1NKEE6IGIyTWF0MjIsIEI6IGIyTWF0MjIsIG91dDogYjJNYXQyMik6IGIyTWF0MjIge1xyXG4gICAgY29uc3QgQV9leDogYjJWZWMyID0gQS5leCwgQV9leTogYjJWZWMyID0gQS5leTtcclxuICAgIGNvbnN0IEJfZXg6IGIyVmVjMiA9IEIuZXgsIEJfZXk6IGIyVmVjMiA9IEIuZXk7XHJcbiAgICBvdXQuZXgueCA9IEFfZXgueCArIEJfZXgueDtcclxuICAgIG91dC5leC55ID0gQV9leC55ICsgQl9leC55O1xyXG4gICAgb3V0LmV5LnggPSBBX2V5LnggKyBCX2V5Lng7XHJcbiAgICBvdXQuZXkueSA9IEFfZXkueSArIEJfZXkueTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIE11bE1NKEE6IGIyTWF0MjIsIEI6IGIyTWF0MjIsIG91dDogYjJNYXQyMik6IGIyTWF0MjIge1xyXG4gICAgY29uc3QgQV9leF94OiBudW1iZXIgPSBBLmV4LngsIEFfZXhfeTogbnVtYmVyID0gQS5leC55O1xyXG4gICAgY29uc3QgQV9leV94OiBudW1iZXIgPSBBLmV5LngsIEFfZXlfeTogbnVtYmVyID0gQS5leS55O1xyXG4gICAgY29uc3QgQl9leF94OiBudW1iZXIgPSBCLmV4LngsIEJfZXhfeTogbnVtYmVyID0gQi5leC55O1xyXG4gICAgY29uc3QgQl9leV94OiBudW1iZXIgPSBCLmV5LngsIEJfZXlfeTogbnVtYmVyID0gQi5leS55O1xyXG4gICAgb3V0LmV4LnggPSBBX2V4X3ggKiBCX2V4X3ggKyBBX2V5X3ggKiBCX2V4X3k7XHJcbiAgICBvdXQuZXgueSA9IEFfZXhfeSAqIEJfZXhfeCArIEFfZXlfeSAqIEJfZXhfeTtcclxuICAgIG91dC5leS54ID0gQV9leF94ICogQl9leV94ICsgQV9leV94ICogQl9leV95O1xyXG4gICAgb3V0LmV5LnkgPSBBX2V4X3kgKiBCX2V5X3ggKyBBX2V5X3kgKiBCX2V5X3k7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBNdWxUTU0oQTogYjJNYXQyMiwgQjogYjJNYXQyMiwgb3V0OiBiMk1hdDIyKTogYjJNYXQyMiB7XHJcbiAgICBjb25zdCBBX2V4X3g6IG51bWJlciA9IEEuZXgueCwgQV9leF95OiBudW1iZXIgPSBBLmV4Lnk7XHJcbiAgICBjb25zdCBBX2V5X3g6IG51bWJlciA9IEEuZXkueCwgQV9leV95OiBudW1iZXIgPSBBLmV5Lnk7XHJcbiAgICBjb25zdCBCX2V4X3g6IG51bWJlciA9IEIuZXgueCwgQl9leF95OiBudW1iZXIgPSBCLmV4Lnk7XHJcbiAgICBjb25zdCBCX2V5X3g6IG51bWJlciA9IEIuZXkueCwgQl9leV95OiBudW1iZXIgPSBCLmV5Lnk7XHJcbiAgICBvdXQuZXgueCA9IEFfZXhfeCAqIEJfZXhfeCArIEFfZXhfeSAqIEJfZXhfeTtcclxuICAgIG91dC5leC55ID0gQV9leV94ICogQl9leF94ICsgQV9leV95ICogQl9leF95O1xyXG4gICAgb3V0LmV5LnggPSBBX2V4X3ggKiBCX2V5X3ggKyBBX2V4X3kgKiBCX2V5X3k7XHJcbiAgICBvdXQuZXkueSA9IEFfZXlfeCAqIEJfZXlfeCArIEFfZXlfeSAqIEJfZXlfeTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG59XHJcblxyXG4vLy8gQSAzLWJ5LTMgbWF0cml4LiBTdG9yZWQgaW4gY29sdW1uLW1ham9yIG9yZGVyLlxyXG5leHBvcnQgY2xhc3MgYjJNYXQzMyB7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBJREVOVElUWTogUmVhZG9ubHk8YjJNYXQzMz4gPSBuZXcgYjJNYXQzMygpO1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgZGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShbIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDEgXSk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGV4OiBiMlZlYzMgPSBuZXcgYjJWZWMzKHRoaXMuZGF0YS5zdWJhcnJheSgwLCAzKSk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGV5OiBiMlZlYzMgPSBuZXcgYjJWZWMzKHRoaXMuZGF0YS5zdWJhcnJheSgzLCA2KSk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGV6OiBiMlZlYzMgPSBuZXcgYjJWZWMzKHRoaXMuZGF0YS5zdWJhcnJheSg2LCA5KSk7XHJcblxyXG4gIHB1YmxpYyBDbG9uZSgpOiBiMk1hdDMzIHtcclxuICAgIHJldHVybiBuZXcgYjJNYXQzMygpLkNvcHkodGhpcyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0VlZWKGMxOiBYWVosIGMyOiBYWVosIGMzOiBYWVopOiB0aGlzIHtcclxuICAgIHRoaXMuZXguQ29weShjMSk7XHJcbiAgICB0aGlzLmV5LkNvcHkoYzIpO1xyXG4gICAgdGhpcy5lei5Db3B5KGMzKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENvcHkob3RoZXI6IGIyTWF0MzMpOiB0aGlzIHtcclxuICAgIHRoaXMuZXguQ29weShvdGhlci5leCk7XHJcbiAgICB0aGlzLmV5LkNvcHkob3RoZXIuZXkpO1xyXG4gICAgdGhpcy5lei5Db3B5KG90aGVyLmV6KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldElkZW50aXR5KCk6IHRoaXMge1xyXG4gICAgdGhpcy5leC5TZXRYWVooMSwgMCwgMCk7XHJcbiAgICB0aGlzLmV5LlNldFhZWigwLCAxLCAwKTtcclxuICAgIHRoaXMuZXouU2V0WFlaKDAsIDAsIDEpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0WmVybygpOiB0aGlzIHtcclxuICAgIHRoaXMuZXguU2V0WmVybygpO1xyXG4gICAgdGhpcy5leS5TZXRaZXJvKCk7XHJcbiAgICB0aGlzLmV6LlNldFplcm8oKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGZBZGRNKE06IGIyTWF0MzMpOiB0aGlzIHtcclxuICAgIHRoaXMuZXguU2VsZkFkZChNLmV4KTtcclxuICAgIHRoaXMuZXkuU2VsZkFkZChNLmV5KTtcclxuICAgIHRoaXMuZXouU2VsZkFkZChNLmV6KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNvbHZlMzM8VCBleHRlbmRzIFhZWj4oYl94OiBudW1iZXIsIGJfeTogbnVtYmVyLCBiX3o6IG51bWJlciwgb3V0OiBUKTogVCB7XHJcbiAgICBjb25zdCBhMTE6IG51bWJlciA9IHRoaXMuZXgueCwgYTIxOiBudW1iZXIgPSB0aGlzLmV4LnksIGEzMTogbnVtYmVyID0gdGhpcy5leC56O1xyXG4gICAgY29uc3QgYTEyOiBudW1iZXIgPSB0aGlzLmV5LngsIGEyMjogbnVtYmVyID0gdGhpcy5leS55LCBhMzI6IG51bWJlciA9IHRoaXMuZXkuejtcclxuICAgIGNvbnN0IGExMzogbnVtYmVyID0gdGhpcy5lei54LCBhMjM6IG51bWJlciA9IHRoaXMuZXoueSwgYTMzOiBudW1iZXIgPSB0aGlzLmV6Lno7XHJcbiAgICBsZXQgZGV0OiBudW1iZXIgPSBhMTEgKiAoYTIyICogYTMzIC0gYTMyICogYTIzKSArIGEyMSAqIChhMzIgKiBhMTMgLSBhMTIgKiBhMzMpICsgYTMxICogKGExMiAqIGEyMyAtIGEyMiAqIGExMyk7XHJcbiAgICBpZiAoZGV0ICE9PSAwKSB7XHJcbiAgICAgIGRldCA9IDEgLyBkZXQ7XHJcbiAgICB9XHJcbiAgICBvdXQueCA9IGRldCAqIChiX3ggKiAoYTIyICogYTMzIC0gYTMyICogYTIzKSArIGJfeSAqIChhMzIgKiBhMTMgLSBhMTIgKiBhMzMpICsgYl96ICogKGExMiAqIGEyMyAtIGEyMiAqIGExMykpO1xyXG4gICAgb3V0LnkgPSBkZXQgKiAoYTExICogKGJfeSAqIGEzMyAtIGJfeiAqIGEyMykgKyBhMjEgKiAoYl96ICogYTEzIC0gYl94ICogYTMzKSArIGEzMSAqIChiX3ggKiBhMjMgLSBiX3kgKiBhMTMpKTtcclxuICAgIG91dC56ID0gZGV0ICogKGExMSAqIChhMjIgKiBiX3ogLSBhMzIgKiBiX3kpICsgYTIxICogKGEzMiAqIGJfeCAtIGExMiAqIGJfeikgKyBhMzEgKiAoYTEyICogYl95IC0gYTIyICogYl94KSk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNvbHZlMjI8VCBleHRlbmRzIFhZPihiX3g6IG51bWJlciwgYl95OiBudW1iZXIsIG91dDogVCk6IFQge1xyXG4gICAgY29uc3QgYTExOiBudW1iZXIgPSB0aGlzLmV4LngsIGExMjogbnVtYmVyID0gdGhpcy5leS54O1xyXG4gICAgY29uc3QgYTIxOiBudW1iZXIgPSB0aGlzLmV4LnksIGEyMjogbnVtYmVyID0gdGhpcy5leS55O1xyXG4gICAgbGV0IGRldDogbnVtYmVyID0gYTExICogYTIyIC0gYTEyICogYTIxO1xyXG4gICAgaWYgKGRldCAhPT0gMCkge1xyXG4gICAgICBkZXQgPSAxIC8gZGV0O1xyXG4gICAgfVxyXG4gICAgb3V0LnggPSBkZXQgKiAoYTIyICogYl94IC0gYTEyICogYl95KTtcclxuICAgIG91dC55ID0gZGV0ICogKGExMSAqIGJfeSAtIGEyMSAqIGJfeCk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIEdldEludmVyc2UyMihNOiBiMk1hdDMzKTogdm9pZCB7XHJcbiAgICBjb25zdCBhOiBudW1iZXIgPSB0aGlzLmV4LngsIGI6IG51bWJlciA9IHRoaXMuZXkueCwgYzogbnVtYmVyID0gdGhpcy5leC55LCBkOiBudW1iZXIgPSB0aGlzLmV5Lnk7XHJcbiAgICBsZXQgZGV0OiBudW1iZXIgPSBhICogZCAtIGIgKiBjO1xyXG4gICAgaWYgKGRldCAhPT0gMCkge1xyXG4gICAgICBkZXQgPSAxIC8gZGV0O1xyXG4gICAgfVxyXG5cclxuICAgIE0uZXgueCA9ICBkZXQgKiBkOyBNLmV5LnggPSAtZGV0ICogYjsgTS5leC56ID0gMDtcclxuICAgIE0uZXgueSA9IC1kZXQgKiBjOyBNLmV5LnkgPSAgZGV0ICogYTsgTS5leS56ID0gMDtcclxuICAgIE0uZXoueCA9ICAgICAgICAwOyBNLmV6LnkgPSAgICAgICAgMDsgTS5lei56ID0gMDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBHZXRTeW1JbnZlcnNlMzMoTTogYjJNYXQzMyk6IHZvaWQge1xyXG4gICAgbGV0IGRldDogbnVtYmVyID0gYjJWZWMzLkRvdFYzVjModGhpcy5leCwgYjJWZWMzLkNyb3NzVjNWMyh0aGlzLmV5LCB0aGlzLmV6LCBiMlZlYzMuc190MCkpO1xyXG4gICAgaWYgKGRldCAhPT0gMCkge1xyXG4gICAgICBkZXQgPSAxIC8gZGV0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGExMTogbnVtYmVyID0gdGhpcy5leC54LCBhMTI6IG51bWJlciA9IHRoaXMuZXkueCwgYTEzOiBudW1iZXIgPSB0aGlzLmV6Lng7XHJcbiAgICBjb25zdCBhMjI6IG51bWJlciA9IHRoaXMuZXkueSwgYTIzOiBudW1iZXIgPSB0aGlzLmV6Lnk7XHJcbiAgICBjb25zdCBhMzM6IG51bWJlciA9IHRoaXMuZXouejtcclxuXHJcbiAgICBNLmV4LnggPSBkZXQgKiAoYTIyICogYTMzIC0gYTIzICogYTIzKTtcclxuICAgIE0uZXgueSA9IGRldCAqIChhMTMgKiBhMjMgLSBhMTIgKiBhMzMpO1xyXG4gICAgTS5leC56ID0gZGV0ICogKGExMiAqIGEyMyAtIGExMyAqIGEyMik7XHJcblxyXG4gICAgTS5leS54ID0gTS5leC55O1xyXG4gICAgTS5leS55ID0gZGV0ICogKGExMSAqIGEzMyAtIGExMyAqIGExMyk7XHJcbiAgICBNLmV5LnogPSBkZXQgKiAoYTEzICogYTEyIC0gYTExICogYTIzKTtcclxuXHJcbiAgICBNLmV6LnggPSBNLmV4Lno7XHJcbiAgICBNLmV6LnkgPSBNLmV5Lno7XHJcbiAgICBNLmV6LnogPSBkZXQgKiAoYTExICogYTIyIC0gYTEyICogYTEyKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsTTMzVjM8VCBleHRlbmRzIFhZWj4oQTogYjJNYXQzMywgdjogWFlaLCBvdXQ6IFQpOiBUIHtcclxuICAgIGNvbnN0IHZfeDogbnVtYmVyID0gdi54LCB2X3k6IG51bWJlciA9IHYueSwgdl96OiBudW1iZXIgPSB2Lno7XHJcbiAgICBvdXQueCA9IEEuZXgueCAqIHZfeCArIEEuZXkueCAqIHZfeSArIEEuZXoueCAqIHZfejtcclxuICAgIG91dC55ID0gQS5leC55ICogdl94ICsgQS5leS55ICogdl95ICsgQS5lei55ICogdl96O1xyXG4gICAgb3V0LnogPSBBLmV4LnogKiB2X3ggKyBBLmV5LnogKiB2X3kgKyBBLmV6LnogKiB2X3o7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIE11bE0zM1hZWjxUIGV4dGVuZHMgWFlaPihBOiBiMk1hdDMzLCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcclxuICAgIG91dC54ID0gQS5leC54ICogeCArIEEuZXkueCAqIHkgKyBBLmV6LnggKiB6O1xyXG4gICAgb3V0LnkgPSBBLmV4LnkgKiB4ICsgQS5leS55ICogeSArIEEuZXoueSAqIHo7XHJcbiAgICBvdXQueiA9IEEuZXgueiAqIHggKyBBLmV5LnogKiB5ICsgQS5lei56ICogejtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsTTMzVjI8VCBleHRlbmRzIFhZPihBOiBiMk1hdDMzLCB2OiBYWSwgb3V0OiBUKTogVCB7XHJcbiAgICBjb25zdCB2X3g6IG51bWJlciA9IHYueCwgdl95OiBudW1iZXIgPSB2Lnk7XHJcbiAgICBvdXQueCA9IEEuZXgueCAqIHZfeCArIEEuZXkueCAqIHZfeTtcclxuICAgIG91dC55ID0gQS5leC55ICogdl94ICsgQS5leS55ICogdl95O1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBNdWxNMzNYWTxUIGV4dGVuZHMgWFk+KEE6IGIyTWF0MzMsIHg6IG51bWJlciwgeTogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcclxuICAgIG91dC54ID0gQS5leC54ICogeCArIEEuZXkueCAqIHk7XHJcbiAgICBvdXQueSA9IEEuZXgueSAqIHggKyBBLmV5LnkgKiB5O1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcbn1cclxuXHJcbi8vLyBSb3RhdGlvblxyXG5leHBvcnQgY2xhc3MgYjJSb3Qge1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSURFTlRJVFk6IFJlYWRvbmx5PGIyUm90PiA9IG5ldyBiMlJvdCgpO1xyXG5cclxuICBwdWJsaWMgczogbnVtYmVyID0gMDtcclxuICBwdWJsaWMgYzogbnVtYmVyID0gMTtcclxuXHJcbiAgY29uc3RydWN0b3IoYW5nbGU6IG51bWJlciA9IDApIHtcclxuICAgIGlmIChhbmdsZSkge1xyXG4gICAgICB0aGlzLnMgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICAgIHRoaXMuYyA9IE1hdGguY29zKGFuZ2xlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBDbG9uZSgpOiBiMlJvdCB7XHJcbiAgICByZXR1cm4gbmV3IGIyUm90KCkuQ29weSh0aGlzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBiMlJvdCk6IHRoaXMge1xyXG4gICAgdGhpcy5zID0gb3RoZXIucztcclxuICAgIHRoaXMuYyA9IG90aGVyLmM7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRBbmdsZShhbmdsZTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICB0aGlzLnMgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICB0aGlzLmMgPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRJZGVudGl0eSgpOiB0aGlzIHtcclxuICAgIHRoaXMucyA9IDA7XHJcbiAgICB0aGlzLmMgPSAxO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgR2V0QW5nbGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMucywgdGhpcy5jKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBHZXRYQXhpczxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xyXG4gICAgb3V0LnggPSB0aGlzLmM7XHJcbiAgICBvdXQueSA9IHRoaXMucztcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgR2V0WUF4aXM8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcclxuICAgIG91dC54ID0gLXRoaXMucztcclxuICAgIG91dC55ID0gdGhpcy5jO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsUlIocTogYjJSb3QsIHI6IGIyUm90LCBvdXQ6IGIyUm90KTogYjJSb3Qge1xyXG4gICAgLy8gW3FjIC1xc10gKiBbcmMgLXJzXSA9IFtxYypyYy1xcypycyAtcWMqcnMtcXMqcmNdXHJcbiAgICAvLyBbcXMgIHFjXSAgIFtycyAgcmNdICAgW3FzKnJjK3FjKnJzIC1xcypycytxYypyY11cclxuICAgIC8vIHMgPSBxcyAqIHJjICsgcWMgKiByc1xyXG4gICAgLy8gYyA9IHFjICogcmMgLSBxcyAqIHJzXHJcbiAgICBjb25zdCBxX2M6IG51bWJlciA9IHEuYywgcV9zOiBudW1iZXIgPSBxLnM7XHJcbiAgICBjb25zdCByX2M6IG51bWJlciA9IHIuYywgcl9zOiBudW1iZXIgPSByLnM7XHJcbiAgICBvdXQucyA9IHFfcyAqIHJfYyArIHFfYyAqIHJfcztcclxuICAgIG91dC5jID0gcV9jICogcl9jIC0gcV9zICogcl9zO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsVFJSKHE6IGIyUm90LCByOiBiMlJvdCwgb3V0OiBiMlJvdCk6IGIyUm90IHtcclxuICAgIC8vIFsgcWMgcXNdICogW3JjIC1yc10gPSBbcWMqcmMrcXMqcnMgLXFjKnJzK3FzKnJjXVxyXG4gICAgLy8gWy1xcyBxY10gICBbcnMgIHJjXSAgIFstcXMqcmMrcWMqcnMgcXMqcnMrcWMqcmNdXHJcbiAgICAvLyBzID0gcWMgKiBycyAtIHFzICogcmNcclxuICAgIC8vIGMgPSBxYyAqIHJjICsgcXMgKiByc1xyXG4gICAgY29uc3QgcV9jOiBudW1iZXIgPSBxLmMsIHFfczogbnVtYmVyID0gcS5zO1xyXG4gICAgY29uc3Qgcl9jOiBudW1iZXIgPSByLmMsIHJfczogbnVtYmVyID0gci5zO1xyXG4gICAgb3V0LnMgPSBxX2MgKiByX3MgLSBxX3MgKiByX2M7XHJcbiAgICBvdXQuYyA9IHFfYyAqIHJfYyArIHFfcyAqIHJfcztcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIE11bFJWPFQgZXh0ZW5kcyBYWT4ocTogYjJSb3QsIHY6IFhZLCBvdXQ6IFQpOiBUIHtcclxuICAgIGNvbnN0IHFfYzogbnVtYmVyID0gcS5jLCBxX3M6IG51bWJlciA9IHEucztcclxuICAgIGNvbnN0IHZfeDogbnVtYmVyID0gdi54LCB2X3k6IG51bWJlciA9IHYueTtcclxuICAgIG91dC54ID0gcV9jICogdl94IC0gcV9zICogdl95O1xyXG4gICAgb3V0LnkgPSBxX3MgKiB2X3ggKyBxX2MgKiB2X3k7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBNdWxUUlY8VCBleHRlbmRzIFhZPihxOiBiMlJvdCwgdjogWFksIG91dDogVCk6IFQge1xyXG4gICAgY29uc3QgcV9jOiBudW1iZXIgPSBxLmMsIHFfczogbnVtYmVyID0gcS5zO1xyXG4gICAgY29uc3Qgdl94OiBudW1iZXIgPSB2LngsIHZfeTogbnVtYmVyID0gdi55O1xyXG4gICAgb3V0LnggPSAgcV9jICogdl94ICsgcV9zICogdl95O1xyXG4gICAgb3V0LnkgPSAtcV9zICogdl94ICsgcV9jICogdl95O1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcbn1cclxuXHJcbi8vLyBBIHRyYW5zZm9ybSBjb250YWlucyB0cmFuc2xhdGlvbiBhbmQgcm90YXRpb24uIEl0IGlzIHVzZWQgdG8gcmVwcmVzZW50XHJcbi8vLyB0aGUgcG9zaXRpb24gYW5kIG9yaWVudGF0aW9uIG9mIHJpZ2lkIGZyYW1lcy5cclxuZXhwb3J0IGNsYXNzIGIyVHJhbnNmb3JtIHtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IElERU5USVRZOiBSZWFkb25seTxiMlRyYW5zZm9ybT4gPSBuZXcgYjJUcmFuc2Zvcm0oKTtcclxuXHJcbiAgcHVibGljIHJlYWRvbmx5IHA6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcclxuICBwdWJsaWMgcmVhZG9ubHkgcTogYjJSb3QgPSBuZXcgYjJSb3QoKTtcclxuXHJcbiAgcHVibGljIENsb25lKCk6IGIyVHJhbnNmb3JtIHtcclxuICAgIHJldHVybiBuZXcgYjJUcmFuc2Zvcm0oKS5Db3B5KHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENvcHkob3RoZXI6IGIyVHJhbnNmb3JtKTogdGhpcyB7XHJcbiAgICB0aGlzLnAuQ29weShvdGhlci5wKTtcclxuICAgIHRoaXMucS5Db3B5KG90aGVyLnEpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0SWRlbnRpdHkoKTogdGhpcyB7XHJcbiAgICB0aGlzLnAuU2V0WmVybygpO1xyXG4gICAgdGhpcy5xLlNldElkZW50aXR5KCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRQb3NpdGlvblJvdGF0aW9uKHBvc2l0aW9uOiBYWSwgcTogUmVhZG9ubHk8YjJSb3Q+KTogdGhpcyB7XHJcbiAgICB0aGlzLnAuQ29weShwb3NpdGlvbik7XHJcbiAgICB0aGlzLnEuQ29weShxKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNldFBvc2l0aW9uQW5nbGUocG9zOiBYWSwgYTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICB0aGlzLnAuQ29weShwb3MpO1xyXG4gICAgdGhpcy5xLlNldEFuZ2xlKGEpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0UG9zaXRpb24ocG9zaXRpb246IFhZKTogdGhpcyB7XHJcbiAgICB0aGlzLnAuQ29weShwb3NpdGlvbik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZXRQb3NpdGlvblhZKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICB0aGlzLnAuU2V0KHgsIHkpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0Um90YXRpb24ocm90YXRpb246IFJlYWRvbmx5PGIyUm90Pik6IHRoaXMge1xyXG4gICAgdGhpcy5xLkNvcHkocm90YXRpb24pO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2V0Um90YXRpb25BbmdsZShyYWRpYW5zOiBudW1iZXIpOiB0aGlzIHtcclxuICAgIHRoaXMucS5TZXRBbmdsZShyYWRpYW5zKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIEdldFBvc2l0aW9uKCk6IFJlYWRvbmx5PGIyVmVjMj4ge1xyXG4gICAgcmV0dXJuIHRoaXMucDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBHZXRSb3RhdGlvbigpOiBSZWFkb25seTxiMlJvdD4ge1xyXG4gICAgcmV0dXJuIHRoaXMucTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBHZXRSb3RhdGlvbkFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5xLkdldEFuZ2xlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgR2V0QW5nbGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnEuR2V0QW5nbGUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsWFY8VCBleHRlbmRzIFhZPihUOiBiMlRyYW5zZm9ybSwgdjogWFksIG91dDogVCk6IFQge1xyXG4gICAgLy8gZmxvYXQzMiB4ID0gKFQucS5jICogdi54IC0gVC5xLnMgKiB2LnkpICsgVC5wLng7XHJcbiAgICAvLyBmbG9hdDMyIHkgPSAoVC5xLnMgKiB2LnggKyBULnEuYyAqIHYueSkgKyBULnAueTtcclxuICAgIC8vIHJldHVybiBiMlZlYzIoeCwgeSk7XHJcbiAgICBjb25zdCBUX3FfYzogbnVtYmVyID0gVC5xLmMsIFRfcV9zOiBudW1iZXIgPSBULnEucztcclxuICAgIGNvbnN0IHZfeDogbnVtYmVyID0gdi54LCB2X3k6IG51bWJlciA9IHYueTtcclxuICAgIG91dC54ID0gKFRfcV9jICogdl94IC0gVF9xX3MgKiB2X3kpICsgVC5wLng7XHJcbiAgICBvdXQueSA9IChUX3FfcyAqIHZfeCArIFRfcV9jICogdl95KSArIFQucC55O1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsVFhWPFQgZXh0ZW5kcyBYWT4oVDogYjJUcmFuc2Zvcm0sIHY6IFhZLCBvdXQ6IFQpOiBUIHtcclxuICAgIC8vIGZsb2F0MzIgcHggPSB2LnggLSBULnAueDtcclxuICAgIC8vIGZsb2F0MzIgcHkgPSB2LnkgLSBULnAueTtcclxuICAgIC8vIGZsb2F0MzIgeCA9IChULnEuYyAqIHB4ICsgVC5xLnMgKiBweSk7XHJcbiAgICAvLyBmbG9hdDMyIHkgPSAoLVQucS5zICogcHggKyBULnEuYyAqIHB5KTtcclxuICAgIC8vIHJldHVybiBiMlZlYzIoeCwgeSk7XHJcbiAgICBjb25zdCBUX3FfYzogbnVtYmVyID0gVC5xLmMsIFRfcV9zOiBudW1iZXIgPSBULnEucztcclxuICAgIGNvbnN0IHBfeDogbnVtYmVyID0gdi54IC0gVC5wLng7XHJcbiAgICBjb25zdCBwX3k6IG51bWJlciA9IHYueSAtIFQucC55O1xyXG4gICAgb3V0LnggPSAoIFRfcV9jICogcF94ICsgVF9xX3MgKiBwX3kpO1xyXG4gICAgb3V0LnkgPSAoLVRfcV9zICogcF94ICsgVF9xX2MgKiBwX3kpO1xyXG4gICAgcmV0dXJuIG91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgTXVsWFgoQTogYjJUcmFuc2Zvcm0sIEI6IGIyVHJhbnNmb3JtLCBvdXQ6IGIyVHJhbnNmb3JtKTogYjJUcmFuc2Zvcm0ge1xyXG4gICAgYjJSb3QuTXVsUlIoQS5xLCBCLnEsIG91dC5xKTtcclxuICAgIGIyVmVjMi5BZGRWVihiMlJvdC5NdWxSVihBLnEsIEIucCwgb3V0LnApLCBBLnAsIG91dC5wKTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIE11bFRYWChBOiBiMlRyYW5zZm9ybSwgQjogYjJUcmFuc2Zvcm0sIG91dDogYjJUcmFuc2Zvcm0pOiBiMlRyYW5zZm9ybSB7XHJcbiAgICBiMlJvdC5NdWxUUlIoQS5xLCBCLnEsIG91dC5xKTtcclxuICAgIGIyUm90Lk11bFRSVihBLnEsIGIyVmVjMi5TdWJWVihCLnAsIEEucCwgb3V0LnApLCBvdXQucCk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbi8vLyBUaGlzIGRlc2NyaWJlcyB0aGUgbW90aW9uIG9mIGEgYm9keS9zaGFwZSBmb3IgVE9JIGNvbXB1dGF0aW9uLlxyXG4vLy8gU2hhcGVzIGFyZSBkZWZpbmVkIHdpdGggcmVzcGVjdCB0byB0aGUgYm9keSBvcmlnaW4sIHdoaWNoIG1heVxyXG4vLy8gbm8gY29pbmNpZGUgd2l0aCB0aGUgY2VudGVyIG9mIG1hc3MuIEhvd2V2ZXIsIHRvIHN1cHBvcnQgZHluYW1pY3NcclxuLy8vIHdlIG11c3QgaW50ZXJwb2xhdGUgdGhlIGNlbnRlciBvZiBtYXNzIHBvc2l0aW9uLlxyXG5leHBvcnQgY2xhc3MgYjJTd2VlcCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQ2VudGVyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGMwOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGM6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcclxuICBwdWJsaWMgYTA6IG51bWJlciA9IDA7XHJcbiAgcHVibGljIGE6IG51bWJlciA9IDA7XHJcbiAgcHVibGljIGFscGhhMDogbnVtYmVyID0gMDtcclxuXHJcbiAgcHVibGljIENsb25lKCk6IGIyU3dlZXAge1xyXG4gICAgcmV0dXJuIG5ldyBiMlN3ZWVwKCkuQ29weSh0aGlzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBiMlN3ZWVwKTogdGhpcyB7XHJcbiAgICB0aGlzLmxvY2FsQ2VudGVyLkNvcHkob3RoZXIubG9jYWxDZW50ZXIpO1xyXG4gICAgdGhpcy5jMC5Db3B5KG90aGVyLmMwKTtcclxuICAgIHRoaXMuYy5Db3B5KG90aGVyLmMpO1xyXG4gICAgdGhpcy5hMCA9IG90aGVyLmEwO1xyXG4gICAgdGhpcy5hID0gb3RoZXIuYTtcclxuICAgIHRoaXMuYWxwaGEwID0gb3RoZXIuYWxwaGEwO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvLyBodHRwczovL2ZnaWVzZW4ud29yZHByZXNzLmNvbS8yMDEyLzA4LzE1L2xpbmVhci1pbnRlcnBvbGF0aW9uLXBhc3QtcHJlc2VudC1hbmQtZnV0dXJlL1xyXG4gIHB1YmxpYyBHZXRUcmFuc2Zvcm0oeGY6IGIyVHJhbnNmb3JtLCBiZXRhOiBudW1iZXIpOiBiMlRyYW5zZm9ybSB7XHJcbiAgICB4Zi5wLnggPSAoMS4wIC0gYmV0YSkgKiB0aGlzLmMwLnggKyBiZXRhICogdGhpcy5jLng7XHJcbiAgICB4Zi5wLnkgPSAoMS4wIC0gYmV0YSkgKiB0aGlzLmMwLnkgKyBiZXRhICogdGhpcy5jLnk7XHJcbiAgICBjb25zdCBhbmdsZTogbnVtYmVyID0gKDEuMCAtIGJldGEpICogdGhpcy5hMCArIGJldGEgKiB0aGlzLmE7XHJcbiAgICB4Zi5xLlNldEFuZ2xlKGFuZ2xlKTtcclxuXHJcbiAgICB4Zi5wLlNlbGZTdWIoYjJSb3QuTXVsUlYoeGYucSwgdGhpcy5sb2NhbENlbnRlciwgYjJWZWMyLnNfdDApKTtcclxuICAgIHJldHVybiB4ZjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBBZHZhbmNlKGFscGhhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLmFscGhhMCA8IDEpO1xyXG4gICAgY29uc3QgYmV0YTogbnVtYmVyID0gKGFscGhhIC0gdGhpcy5hbHBoYTApIC8gKDEgLSB0aGlzLmFscGhhMCk7XHJcbiAgICBjb25zdCBvbmVfbWludXNfYmV0YTogbnVtYmVyID0gKDEgLSBiZXRhKTtcclxuICAgIHRoaXMuYzAueCA9IG9uZV9taW51c19iZXRhICogdGhpcy5jMC54ICsgYmV0YSAqIHRoaXMuYy54O1xyXG4gICAgdGhpcy5jMC55ID0gb25lX21pbnVzX2JldGEgKiB0aGlzLmMwLnkgKyBiZXRhICogdGhpcy5jLnk7XHJcbiAgICB0aGlzLmEwID0gb25lX21pbnVzX2JldGEgKiB0aGlzLmEwICsgYmV0YSAqIHRoaXMuYTtcclxuICAgIHRoaXMuYWxwaGEwID0gYWxwaGE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgTm9ybWFsaXplKCk6IHZvaWQge1xyXG4gICAgY29uc3QgZDogbnVtYmVyID0gYjJfdHdvX3BpICogTWF0aC5mbG9vcih0aGlzLmEwIC8gYjJfdHdvX3BpKTtcclxuICAgIHRoaXMuYTAgLT0gZDtcclxuICAgIHRoaXMuYSAtPSBkO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQW1CQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQVVBO0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFoU0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUEyUkE7QUFBQTtBQW5TQTtBQXFTQTtBQUVBO0FBUUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFBQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7QUFBQTs7O0FBQUE7QUFnQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBOUxBO0FBcU1BO0FBYUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFBQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7QUFBQTs7O0FBQUE7QUFDQTtBQUFBO0FBQUE7OztBQUFBO0FBaUJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0R0E7QUFFQTtBQXFHQTtBQUFBO0FBeEdBO0FBMkdBO0FBQUE7QUFPQTtBQUNBO0FBeUtBO0FBdktBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0tBO0FBZ0xBO0FBQUE7QUFqTEE7QUFvTEE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBOEhBO0FBNUhBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbElBO0FBbUlBO0FBQUE7QUFwSUE7QUF1SUE7QUFNQTtBQUFBO0FBSEE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEZBO0FBeUZBO0FBQUE7QUExRkE7QUE4RkE7QUFBQTtBQUdBO0FBQ0E7QUF1R0E7QUFyR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4R0E7QUEwR0E7QUFBQTtBQTNHQTtBQWlIQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMENBO0FBeENBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFoREE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/common/b2_math.ts\n");

/***/ }),

/***/ "./src/box2d/common/b2_settings.ts":
/*!*****************************************!*\
  !*** ./src/box2d/common/b2_settings.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Log = exports.b2Free = exports.b2Alloc = void 0;\nfunction b2Alloc(size) {\n    return null;\n}\nexports.b2Alloc = b2Alloc;\nfunction b2Free(mem) {\n}\nexports.b2Free = b2Free;\nfunction b2Log(message) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n}\nexports.b2Log = b2Log;\n__exportStar(__webpack_require__(/*! ./b2_common */ \"./src/box2d/common/b2_common.ts\"), exports);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29tbW9uL2IyX3NldHRpbmdzLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbW1vbi9iMl9zZXR0aW5ncy50cz9jZTNiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMDkgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xyXG4qXHJcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiovXHJcblxyXG4vLy8gQGZpbGVcclxuLy8vIFNldHRpbmdzIHRoYXQgY2FuIGJlIG92ZXJyaWRlbiBmb3IgeW91ciBhcHBsaWNhdGlvblxyXG4vLy9cclxuXHJcbi8vIFR1bmFibGUgQ29uc3RhbnRzXHJcblxyXG4vLy8gWW91IGNhbiB1c2UgdGhpcyB0byBjaGFuZ2UgdGhlIGxlbmd0aCBzY2FsZSB1c2VkIGJ5IHlvdXIgZ2FtZS5cclxuLy8vIEZvciBleGFtcGxlIGZvciBpbmNoZXMgeW91IGNvdWxkIHVzZSAzOS40LlxyXG4vLyBleHBvcnQgY29uc3QgYjJfbGVuZ3RoVW5pdHNQZXJNZXRlcjogbnVtYmVyID0gMS4wO1xyXG5cclxuLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2ZXJ0aWNlcyBvbiBhIGNvbnZleCBwb2x5Z29uLiBZb3UgY2Fubm90IGluY3JlYXNlXHJcbi8vLyB0aGlzIHRvbyBtdWNoIGJlY2F1c2UgYjJCbG9ja0FsbG9jYXRvciBoYXMgYSBtYXhpbXVtIG9iamVjdCBzaXplLlxyXG4vLyBleHBvcnQgY29uc3QgYjJfbWF4UG9seWdvblZlcnRpY2VzOiBudW1iZXIgPSA4O1xyXG5cclxuLy8gTWVtb3J5IEFsbG9jYXRpb25cclxuXHJcbi8vLyBJbXBsZW1lbnQgdGhpcyBmdW5jdGlvbiB0byB1c2UgeW91ciBvd24gbWVtb3J5IGFsbG9jYXRvci5cclxuZXhwb3J0IGZ1bmN0aW9uIGIyQWxsb2Moc2l6ZTogbnVtYmVyKTogYW55IHtcclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLy8vIElmIHlvdSBpbXBsZW1lbnQgYjJBbGxvYywgeW91IHNob3VsZCBhbHNvIGltcGxlbWVudCB0aGlzIGZ1bmN0aW9uLlxyXG5leHBvcnQgZnVuY3Rpb24gYjJGcmVlKG1lbTogYW55KTogdm9pZCB7XHJcbn1cclxuXHJcbi8vLyBMb2dnaW5nIGZ1bmN0aW9uLlxyXG5leHBvcnQgZnVuY3Rpb24gYjJMb2cobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gIC8vIGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLmFyZ3MpO1xyXG59XHJcblxyXG5leHBvcnQgKiBmcm9tIFwiLi9iMl9jb21tb25cIjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBbUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFGQTtBQUlBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/common/b2_settings.ts\n");

/***/ }),

/***/ "./src/box2d/common/b2_timer.ts":
/*!**************************************!*\
  !*** ./src/box2d/common/b2_timer.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Counter = exports.b2Timer = void 0;\nvar b2Timer = (function () {\n    function b2Timer() {\n        this.m_start = Date.now();\n    }\n    b2Timer.prototype.Reset = function () {\n        this.m_start = Date.now();\n        return this;\n    };\n    b2Timer.prototype.GetMilliseconds = function () {\n        return Date.now() - this.m_start;\n    };\n    return b2Timer;\n}());\nexports.b2Timer = b2Timer;\nvar b2Counter = (function () {\n    function b2Counter() {\n        this.m_count = 0;\n        this.m_min_count = 0;\n        this.m_max_count = 0;\n    }\n    b2Counter.prototype.GetCount = function () {\n        return this.m_count;\n    };\n    b2Counter.prototype.GetMinCount = function () {\n        return this.m_min_count;\n    };\n    b2Counter.prototype.GetMaxCount = function () {\n        return this.m_max_count;\n    };\n    b2Counter.prototype.ResetCount = function () {\n        var count = this.m_count;\n        this.m_count = 0;\n        return count;\n    };\n    b2Counter.prototype.ResetMinCount = function () {\n        this.m_min_count = 0;\n    };\n    b2Counter.prototype.ResetMaxCount = function () {\n        this.m_max_count = 0;\n    };\n    b2Counter.prototype.Increment = function () {\n        this.m_count++;\n        if (this.m_max_count < this.m_count) {\n            this.m_max_count = this.m_count;\n        }\n    };\n    b2Counter.prototype.Decrement = function () {\n        this.m_count--;\n        if (this.m_min_count > this.m_count) {\n            this.m_min_count = this.m_count;\n        }\n    };\n    return b2Counter;\n}());\nexports.b2Counter = b2Counter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvY29tbW9uL2IyX3RpbWVyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2NvbW1vbi9iMl90aW1lci50cz9iMDNkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAxMSBFcmluIENhdHRvIGh0dHA6Ly9ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLy8gVGltZXIgZm9yIHByb2ZpbGluZy4gVGhpcyBoYXMgcGxhdGZvcm0gc3BlY2lmaWMgY29kZSBhbmQgbWF5XG4vLy8gbm90IHdvcmsgb24gZXZlcnkgcGxhdGZvcm0uXG5leHBvcnQgY2xhc3MgYjJUaW1lciB7XG4gIHB1YmxpYyBtX3N0YXJ0OiBudW1iZXIgPSBEYXRlLm5vdygpO1xuXG4gIC8vLyBSZXNldCB0aGUgdGltZXIuXG4gIHB1YmxpYyBSZXNldCgpOiBiMlRpbWVyIHtcbiAgICB0aGlzLm1fc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgdGltZSBzaW5jZSBjb25zdHJ1Y3Rpb24gb3IgdGhlIGxhc3QgcmVzZXQuXG4gIHB1YmxpYyBHZXRNaWxsaXNlY29uZHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMubV9zdGFydDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJDb3VudGVyIHtcbiAgcHVibGljIG1fY291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21pbl9jb3VudDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbWF4X2NvdW50OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBHZXRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fY291bnQ7XG4gIH1cblxuICBwdWJsaWMgR2V0TWluQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX21pbl9jb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRNYXhDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbWF4X2NvdW50O1xuICB9XG5cbiAgcHVibGljIFJlc2V0Q291bnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb3VudDogbnVtYmVyID0gdGhpcy5tX2NvdW50O1xuICAgIHRoaXMubV9jb3VudCA9IDA7XG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG5cbiAgcHVibGljIFJlc2V0TWluQ291bnQoKTogdm9pZCB7XG4gICAgdGhpcy5tX21pbl9jb3VudCA9IDA7XG4gIH1cblxuICBwdWJsaWMgUmVzZXRNYXhDb3VudCgpOiB2b2lkIHtcbiAgICB0aGlzLm1fbWF4X2NvdW50ID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBJbmNyZW1lbnQoKTogdm9pZCB7XG4gICAgdGhpcy5tX2NvdW50Kys7XG5cbiAgICBpZiAodGhpcy5tX21heF9jb3VudCA8IHRoaXMubV9jb3VudCkge1xuICAgICAgdGhpcy5tX21heF9jb3VudCA9IHRoaXMubV9jb3VudDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgRGVjcmVtZW50KCk6IHZvaWQge1xuICAgIHRoaXMubV9jb3VudC0tO1xuXG4gICAgaWYgKHRoaXMubV9taW5fY291bnQgPiB0aGlzLm1fY291bnQpIHtcbiAgICAgIHRoaXMubV9taW5fY291bnQgPSB0aGlzLm1fY291bnQ7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7OztBQW9CQTtBQUFBO0FBQ0E7QUFZQTtBQVRBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWJBO0FBZUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQTJDQTtBQXpDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTlDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/common/b2_timer.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_area_joint.ts":
/*!*********************************************!*\
  !*** ./src/box2d/dynamics/b2_area_joint.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2AreaJoint = exports.b2AreaJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2_distance_joint_1 = __webpack_require__(/*! ./b2_distance_joint */ \"./src/box2d/dynamics/b2_distance_joint.ts\");\nvar b2AreaJointDef = (function (_super) {\n    __extends(b2AreaJointDef, _super);\n    function b2AreaJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_areaJoint) || this;\n        _this.bodies = [];\n        _this.stiffness = 0;\n        _this.damping = 0;\n        return _this;\n    }\n    b2AreaJointDef.prototype.AddBody = function (body) {\n        this.bodies.push(body);\n        if (this.bodies.length === 1) {\n            this.bodyA = body;\n        }\n        else if (this.bodies.length === 2) {\n            this.bodyB = body;\n        }\n    };\n    return b2AreaJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2AreaJointDef = b2AreaJointDef;\nvar b2AreaJoint = (function (_super) {\n    __extends(b2AreaJoint, _super);\n    function b2AreaJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_stiffness = 0;\n        _this.m_damping = 0;\n        _this.m_impulse = 0;\n        _this.m_targetArea = 0;\n        _this.m_delta = new b2_math_1.b2Vec2();\n        _this.m_bodies = def.bodies;\n        _this.m_stiffness = b2_settings_1.b2Maybe(def.stiffness, 0);\n        _this.m_damping = b2_settings_1.b2Maybe(def.damping, 0);\n        _this.m_targetLengths = b2_settings_1.b2MakeNumberArray(def.bodies.length);\n        _this.m_normals = b2_math_1.b2Vec2.MakeArray(def.bodies.length);\n        _this.m_joints = [];\n        _this.m_deltas = b2_math_1.b2Vec2.MakeArray(def.bodies.length);\n        var djd = new b2_distance_joint_1.b2DistanceJointDef();\n        djd.stiffness = _this.m_stiffness;\n        djd.damping = _this.m_damping;\n        _this.m_targetArea = 0;\n        for (var i = 0; i < _this.m_bodies.length; ++i) {\n            var body = _this.m_bodies[i];\n            var next = _this.m_bodies[(i + 1) % _this.m_bodies.length];\n            var body_c = body.GetWorldCenter();\n            var next_c = next.GetWorldCenter();\n            _this.m_targetLengths[i] = b2_math_1.b2Vec2.DistanceVV(body_c, next_c);\n            _this.m_targetArea += b2_math_1.b2Vec2.CrossVV(body_c, next_c);\n            djd.Initialize(body, next, body_c, next_c);\n            _this.m_joints[i] = body.GetWorld().CreateJoint(djd);\n        }\n        _this.m_targetArea *= 0.5;\n        return _this;\n    }\n    b2AreaJoint.prototype.GetAnchorA = function (out) {\n        return out;\n    };\n    b2AreaJoint.prototype.GetAnchorB = function (out) {\n        return out;\n    };\n    b2AreaJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        return out;\n    };\n    b2AreaJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return 0;\n    };\n    b2AreaJoint.prototype.SetStiffness = function (stiffness) {\n        this.m_stiffness = stiffness;\n        for (var i = 0; i < this.m_joints.length; ++i) {\n            this.m_joints[i].SetStiffness(stiffness);\n        }\n    };\n    b2AreaJoint.prototype.GetStiffness = function () {\n        return this.m_stiffness;\n    };\n    b2AreaJoint.prototype.SetDamping = function (damping) {\n        this.m_damping = damping;\n        for (var i = 0; i < this.m_joints.length; ++i) {\n            this.m_joints[i].SetDamping(damping);\n        }\n    };\n    b2AreaJoint.prototype.GetDamping = function () {\n        return this.m_damping;\n    };\n    b2AreaJoint.prototype.Dump = function (log) {\n        log(\"Area joint dumping is not supported.\\n\");\n    };\n    b2AreaJoint.prototype.InitVelocityConstraints = function (data) {\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n            var prev = this.m_bodies[(i + this.m_bodies.length - 1) % this.m_bodies.length];\n            var next = this.m_bodies[(i + 1) % this.m_bodies.length];\n            var prev_c = data.positions[prev.m_islandIndex].c;\n            var next_c = data.positions[next.m_islandIndex].c;\n            var delta = this.m_deltas[i];\n            b2_math_1.b2Vec2.SubVV(next_c, prev_c, delta);\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse *= data.step.dtRatio;\n            for (var i = 0; i < this.m_bodies.length; ++i) {\n                var body = this.m_bodies[i];\n                var body_v = data.velocities[body.m_islandIndex].v;\n                var delta = this.m_deltas[i];\n                body_v.x += body.m_invMass * delta.y * 0.5 * this.m_impulse;\n                body_v.y += body.m_invMass * -delta.x * 0.5 * this.m_impulse;\n            }\n        }\n        else {\n            this.m_impulse = 0;\n        }\n    };\n    b2AreaJoint.prototype.SolveVelocityConstraints = function (data) {\n        var dotMassSum = 0;\n        var crossMassSum = 0;\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n            var body = this.m_bodies[i];\n            var body_v = data.velocities[body.m_islandIndex].v;\n            var delta = this.m_deltas[i];\n            dotMassSum += delta.LengthSquared() / body.GetMass();\n            crossMassSum += b2_math_1.b2Vec2.CrossVV(body_v, delta);\n        }\n        var lambda = -2 * crossMassSum / dotMassSum;\n        this.m_impulse += lambda;\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n            var body = this.m_bodies[i];\n            var body_v = data.velocities[body.m_islandIndex].v;\n            var delta = this.m_deltas[i];\n            body_v.x += body.m_invMass * delta.y * 0.5 * lambda;\n            body_v.y += body.m_invMass * -delta.x * 0.5 * lambda;\n        }\n    };\n    b2AreaJoint.prototype.SolvePositionConstraints = function (data) {\n        var perimeter = 0;\n        var area = 0;\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n            var body = this.m_bodies[i];\n            var next = this.m_bodies[(i + 1) % this.m_bodies.length];\n            var body_c = data.positions[body.m_islandIndex].c;\n            var next_c = data.positions[next.m_islandIndex].c;\n            var delta = b2_math_1.b2Vec2.SubVV(next_c, body_c, this.m_delta);\n            var dist = delta.Length();\n            if (dist < b2_settings_1.b2_epsilon) {\n                dist = 1;\n            }\n            this.m_normals[i].x = delta.y / dist;\n            this.m_normals[i].y = -delta.x / dist;\n            perimeter += dist;\n            area += b2_math_1.b2Vec2.CrossVV(body_c, next_c);\n        }\n        area *= 0.5;\n        var deltaArea = this.m_targetArea - area;\n        var toExtrude = 0.5 * deltaArea / perimeter;\n        var done = true;\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n            var body = this.m_bodies[i];\n            var body_c = data.positions[body.m_islandIndex].c;\n            var next_i = (i + 1) % this.m_bodies.length;\n            var delta = b2_math_1.b2Vec2.AddVV(this.m_normals[i], this.m_normals[next_i], this.m_delta);\n            delta.SelfMul(toExtrude);\n            var norm_sq = delta.LengthSquared();\n            if (norm_sq > b2_math_1.b2Sq(b2_settings_1.b2_maxLinearCorrection)) {\n                delta.SelfMul(b2_settings_1.b2_maxLinearCorrection / b2_math_1.b2Sqrt(norm_sq));\n            }\n            if (norm_sq > b2_math_1.b2Sq(b2_settings_1.b2_linearSlop)) {\n                done = false;\n            }\n            body_c.x += delta.x;\n            body_c.y += delta.y;\n        }\n        return done;\n    };\n    return b2AreaJoint;\n}(b2_joint_1.b2Joint));\nexports.b2AreaJoint = b2AreaJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfYXJlYV9qb2ludC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9hcmVhX2pvaW50LnRzPzFmOTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfZXBzaWxvbiwgYjJfbGluZWFyU2xvcCwgYjJfbWF4TGluZWFyQ29ycmVjdGlvbiwgYjJNYWtlTnVtYmVyQXJyYXksIGIyTWF5YmUgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlNxLCBiMlNxcnQsIGIyVmVjMiwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIySm9pbnQsIGIySm9pbnREZWYsIGIySm9pbnRUeXBlLCBiMklKb2ludERlZiB9IGZyb20gXCIuL2IyX2pvaW50XCI7XG5pbXBvcnQgeyBiMkRpc3RhbmNlSm9pbnQsIGIyRGlzdGFuY2VKb2ludERlZiB9IGZyb20gXCIuL2IyX2Rpc3RhbmNlX2pvaW50XCI7XG5pbXBvcnQgeyBiMlNvbHZlckRhdGEgfSBmcm9tIFwiLi9iMl90aW1lX3N0ZXBcIjtcbmltcG9ydCB7IGIyQm9keSB9IGZyb20gXCIuL2IyX2JvZHlcIjtcblxuZXhwb3J0IGludGVyZmFjZSBiMklBcmVhSm9pbnREZWYgZXh0ZW5kcyBiMklKb2ludERlZiB7XG4gIC8vIHdvcmxkOiBiMldvcmxkO1xuXG4gIGJvZGllczogYjJCb2R5W107XG5cbiAgc3RpZmZuZXNzPzogbnVtYmVyO1xuXG4gIGRhbXBpbmc/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBiMkFyZWFKb2ludERlZiBleHRlbmRzIGIySm9pbnREZWYgaW1wbGVtZW50cyBiMklBcmVhSm9pbnREZWYge1xuICBwdWJsaWMgYm9kaWVzOiBiMkJvZHlbXSA9IFtdO1xuXG4gIHB1YmxpYyBzdGlmZm5lc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIGRhbXBpbmc6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoYjJKb2ludFR5cGUuZV9hcmVhSm9pbnQpO1xuICB9XG5cbiAgcHVibGljIEFkZEJvZHkoYm9keTogYjJCb2R5KTogdm9pZCB7XG4gICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTtcblxuICAgIGlmICh0aGlzLmJvZGllcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMuYm9keUEgPSBib2R5O1xuICAgIH0gZWxzZSBpZiAodGhpcy5ib2RpZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzLmJvZHlCID0gYm9keTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyQXJlYUpvaW50IGV4dGVuZHMgYjJKb2ludCB7XG4gIHB1YmxpYyBtX2JvZGllczogYjJCb2R5W107XG4gIHB1YmxpYyBtX3N0aWZmbmVzczogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fZGFtcGluZzogbnVtYmVyID0gMDtcblxuICAvLyBTb2x2ZXIgc2hhcmVkXG4gIHB1YmxpYyBtX2ltcHVsc2U6IG51bWJlciA9IDA7XG5cbiAgLy8gU29sdmVyIHRlbXBcbiAgcHVibGljIHJlYWRvbmx5IG1fdGFyZ2V0TGVuZ3RoczogbnVtYmVyW107XG4gIHB1YmxpYyBtX3RhcmdldEFyZWE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX25vcm1hbHM6IGIyVmVjMltdO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9qb2ludHM6IGIyRGlzdGFuY2VKb2ludFtdO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9kZWx0YXM6IGIyVmVjMltdO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9kZWx0YTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogYjJJQXJlYUpvaW50RGVmKSB7XG4gICAgc3VwZXIoZGVmKTtcblxuICAgIC8vIERFQlVHOiBiMkFzc2VydChkZWYuYm9kaWVzLmxlbmd0aCA+PSAzLCBcIllvdSBjYW5ub3QgY3JlYXRlIGFuIGFyZWEgam9pbnQgd2l0aCBsZXNzIHRoYW4gdGhyZWUgYm9kaWVzLlwiKTtcblxuICAgIHRoaXMubV9ib2RpZXMgPSBkZWYuYm9kaWVzO1xuICAgIHRoaXMubV9zdGlmZm5lc3MgPSBiMk1heWJlKGRlZi5zdGlmZm5lc3MsIDApO1xuICAgIHRoaXMubV9kYW1waW5nID0gYjJNYXliZShkZWYuZGFtcGluZywgMCk7XG5cbiAgICB0aGlzLm1fdGFyZ2V0TGVuZ3RocyA9IGIyTWFrZU51bWJlckFycmF5KGRlZi5ib2RpZXMubGVuZ3RoKTtcbiAgICB0aGlzLm1fbm9ybWFscyA9IGIyVmVjMi5NYWtlQXJyYXkoZGVmLmJvZGllcy5sZW5ndGgpO1xuICAgIHRoaXMubV9qb2ludHMgPSBbXTsgLy8gYjJNYWtlTnVsbEFycmF5KGRlZi5ib2RpZXMubGVuZ3RoKTtcbiAgICB0aGlzLm1fZGVsdGFzID0gYjJWZWMyLk1ha2VBcnJheShkZWYuYm9kaWVzLmxlbmd0aCk7XG5cbiAgICBjb25zdCBkamQ6IGIyRGlzdGFuY2VKb2ludERlZiA9IG5ldyBiMkRpc3RhbmNlSm9pbnREZWYoKTtcbiAgICBkamQuc3RpZmZuZXNzID0gdGhpcy5tX3N0aWZmbmVzcztcbiAgICBkamQuZGFtcGluZyA9IHRoaXMubV9kYW1waW5nO1xuXG4gICAgdGhpcy5tX3RhcmdldEFyZWEgPSAwO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGJvZHk6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBjb25zdCBuZXh0OiBiMkJvZHkgPSB0aGlzLm1fYm9kaWVzWyhpICsgMSkgJSB0aGlzLm1fYm9kaWVzLmxlbmd0aF07XG5cbiAgICAgIGNvbnN0IGJvZHlfYzogYjJWZWMyID0gYm9keS5HZXRXb3JsZENlbnRlcigpO1xuICAgICAgY29uc3QgbmV4dF9jOiBiMlZlYzIgPSBuZXh0LkdldFdvcmxkQ2VudGVyKCk7XG5cbiAgICAgIHRoaXMubV90YXJnZXRMZW5ndGhzW2ldID0gYjJWZWMyLkRpc3RhbmNlVlYoYm9keV9jLCBuZXh0X2MpO1xuXG4gICAgICB0aGlzLm1fdGFyZ2V0QXJlYSArPSBiMlZlYzIuQ3Jvc3NWVihib2R5X2MsIG5leHRfYyk7XG5cbiAgICAgIGRqZC5Jbml0aWFsaXplKGJvZHksIG5leHQsIGJvZHlfYywgbmV4dF9jKTtcbiAgICAgIHRoaXMubV9qb2ludHNbaV0gPSBib2R5LkdldFdvcmxkKCkuQ3JlYXRlSm9pbnQoZGpkKTtcbiAgICB9XG5cbiAgICB0aGlzLm1fdGFyZ2V0QXJlYSAqPSAwLjU7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQTxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQjxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwdWJsaWMgR2V0UmVhY3Rpb25Gb3JjZTxUIGV4dGVuZHMgWFk+KGludl9kdDogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uVG9ycXVlKGludl9kdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHB1YmxpYyBTZXRTdGlmZm5lc3Moc3RpZmZuZXNzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fc3RpZmZuZXNzID0gc3RpZmZuZXNzO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9qb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHRoaXMubV9qb2ludHNbaV0uU2V0U3RpZmZuZXNzKHN0aWZmbmVzcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEdldFN0aWZmbmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5tX3N0aWZmbmVzcztcbiAgfVxuXG4gIHB1YmxpYyBTZXREYW1waW5nKGRhbXBpbmc6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9kYW1waW5nID0gZGFtcGluZztcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fam9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICB0aGlzLm1fam9pbnRzW2ldLlNldERhbXBpbmcoZGFtcGluZyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEdldERhbXBpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubV9kYW1waW5nO1xuICB9XG5cbiAgcHVibGljIER1bXAobG9nOiAoZm9ybWF0OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKSB7XG4gICAgbG9nKFwiQXJlYSBqb2ludCBkdW1waW5nIGlzIG5vdCBzdXBwb3J0ZWQuXFxuXCIpO1xuICB9XG5cbiAgcHVibGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fYm9kaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBwcmV2OiBiMkJvZHkgPSB0aGlzLm1fYm9kaWVzWyhpICsgdGhpcy5tX2JvZGllcy5sZW5ndGggLSAxKSAlIHRoaXMubV9ib2RpZXMubGVuZ3RoXTtcbiAgICAgIGNvbnN0IG5leHQ6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbKGkgKyAxKSAlIHRoaXMubV9ib2RpZXMubGVuZ3RoXTtcbiAgICAgIGNvbnN0IHByZXZfYzogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbcHJldi5tX2lzbGFuZEluZGV4XS5jO1xuICAgICAgY29uc3QgbmV4dF9jOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1tuZXh0Lm1faXNsYW5kSW5kZXhdLmM7XG4gICAgICBjb25zdCBkZWx0YTogYjJWZWMyID0gdGhpcy5tX2RlbHRhc1tpXTtcblxuICAgICAgYjJWZWMyLlN1YlZWKG5leHRfYywgcHJldl9jLCBkZWx0YSk7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBib2R5OiBiMkJvZHkgPSB0aGlzLm1fYm9kaWVzW2ldO1xuICAgICAgICBjb25zdCBib2R5X3Y6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1tib2R5Lm1faXNsYW5kSW5kZXhdLnY7XG4gICAgICAgIGNvbnN0IGRlbHRhOiBiMlZlYzIgPSB0aGlzLm1fZGVsdGFzW2ldO1xuXG4gICAgICAgIGJvZHlfdi54ICs9IGJvZHkubV9pbnZNYXNzICogIGRlbHRhLnkgKiAwLjUgKiB0aGlzLm1faW1wdWxzZTtcbiAgICAgICAgYm9keV92LnkgKz0gYm9keS5tX2ludk1hc3MgKiAtZGVsdGEueCAqIDAuNSAqIHRoaXMubV9pbXB1bHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZSA9IDA7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICBsZXQgZG90TWFzc1N1bTogbnVtYmVyID0gMDtcbiAgICBsZXQgY3Jvc3NNYXNzU3VtOiBudW1iZXIgPSAwO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGJvZHk6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBjb25zdCBib2R5X3Y6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1tib2R5Lm1faXNsYW5kSW5kZXhdLnY7XG4gICAgICBjb25zdCBkZWx0YTogYjJWZWMyID0gdGhpcy5tX2RlbHRhc1tpXTtcblxuICAgICAgZG90TWFzc1N1bSArPSBkZWx0YS5MZW5ndGhTcXVhcmVkKCkgLyBib2R5LkdldE1hc3MoKTtcbiAgICAgIGNyb3NzTWFzc1N1bSArPSBiMlZlYzIuQ3Jvc3NWVihib2R5X3YsIGRlbHRhKTtcbiAgICB9XG5cbiAgICBjb25zdCBsYW1iZGE6IG51bWJlciA9IC0yICogY3Jvc3NNYXNzU3VtIC8gZG90TWFzc1N1bTtcbiAgICAvLyBsYW1iZGEgPSBiMkNsYW1wKGxhbWJkYSwgLWIyX21heExpbmVhckNvcnJlY3Rpb24sIGIyX21heExpbmVhckNvcnJlY3Rpb24pO1xuXG4gICAgdGhpcy5tX2ltcHVsc2UgKz0gbGFtYmRhO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGJvZHk6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBjb25zdCBib2R5X3Y6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1tib2R5Lm1faXNsYW5kSW5kZXhdLnY7XG4gICAgICBjb25zdCBkZWx0YTogYjJWZWMyID0gdGhpcy5tX2RlbHRhc1tpXTtcblxuICAgICAgYm9keV92LnggKz0gYm9keS5tX2ludk1hc3MgKiAgZGVsdGEueSAqIDAuNSAqIGxhbWJkYTtcbiAgICAgIGJvZHlfdi55ICs9IGJvZHkubV9pbnZNYXNzICogLWRlbHRhLnggKiAwLjUgKiBsYW1iZGE7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcbiAgICBsZXQgcGVyaW1ldGVyOiBudW1iZXIgPSAwO1xuICAgIGxldCBhcmVhOiBudW1iZXIgPSAwO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGJvZHk6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBjb25zdCBuZXh0OiBiMkJvZHkgPSB0aGlzLm1fYm9kaWVzWyhpICsgMSkgJSB0aGlzLm1fYm9kaWVzLmxlbmd0aF07XG4gICAgICBjb25zdCBib2R5X2M6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW2JvZHkubV9pc2xhbmRJbmRleF0uYztcbiAgICAgIGNvbnN0IG5leHRfYzogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbbmV4dC5tX2lzbGFuZEluZGV4XS5jO1xuXG4gICAgICBjb25zdCBkZWx0YTogYjJWZWMyID0gYjJWZWMyLlN1YlZWKG5leHRfYywgYm9keV9jLCB0aGlzLm1fZGVsdGEpO1xuXG4gICAgICBsZXQgZGlzdDogbnVtYmVyID0gZGVsdGEuTGVuZ3RoKCk7XG4gICAgICBpZiAoZGlzdCA8IGIyX2Vwc2lsb24pIHtcbiAgICAgICAgZGlzdCA9IDE7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubV9ub3JtYWxzW2ldLnggPSAgZGVsdGEueSAvIGRpc3Q7XG4gICAgICB0aGlzLm1fbm9ybWFsc1tpXS55ID0gLWRlbHRhLnggLyBkaXN0O1xuXG4gICAgICBwZXJpbWV0ZXIgKz0gZGlzdDtcblxuICAgICAgYXJlYSArPSBiMlZlYzIuQ3Jvc3NWVihib2R5X2MsIG5leHRfYyk7XG4gICAgfVxuXG4gICAgYXJlYSAqPSAwLjU7XG5cbiAgICBjb25zdCBkZWx0YUFyZWE6IG51bWJlciA9IHRoaXMubV90YXJnZXRBcmVhIC0gYXJlYTtcbiAgICBjb25zdCB0b0V4dHJ1ZGU6IG51bWJlciA9IDAuNSAqIGRlbHRhQXJlYSAvIHBlcmltZXRlcjtcbiAgICBsZXQgZG9uZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgYm9keTogYjJCb2R5ID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgIGNvbnN0IGJvZHlfYzogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbYm9keS5tX2lzbGFuZEluZGV4XS5jO1xuICAgICAgY29uc3QgbmV4dF9pOiBudW1iZXIgPSAoaSArIDEpICUgdGhpcy5tX2JvZGllcy5sZW5ndGg7XG5cbiAgICAgIGNvbnN0IGRlbHRhOiBiMlZlYzIgPSBiMlZlYzIuQWRkVlYodGhpcy5tX25vcm1hbHNbaV0sIHRoaXMubV9ub3JtYWxzW25leHRfaV0sIHRoaXMubV9kZWx0YSk7XG4gICAgICBkZWx0YS5TZWxmTXVsKHRvRXh0cnVkZSk7XG5cbiAgICAgIGNvbnN0IG5vcm1fc3E6IG51bWJlciA9IGRlbHRhLkxlbmd0aFNxdWFyZWQoKTtcbiAgICAgIGlmIChub3JtX3NxID4gYjJTcShiMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSkge1xuICAgICAgICBkZWx0YS5TZWxmTXVsKGIyX21heExpbmVhckNvcnJlY3Rpb24gLyBiMlNxcnQobm9ybV9zcSkpO1xuICAgICAgfVxuICAgICAgaWYgKG5vcm1fc3EgPiBiMlNxKGIyX2xpbmVhclNsb3ApKSB7XG4gICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgYm9keV9jLnggKz0gZGVsdGEueDtcbiAgICAgIGJvZHlfYy55ICs9IGRlbHRhLnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbmU7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFBQTtBQU9BO0FBQUE7QUFOQTtBQUVBO0FBRUE7O0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBcEJBO0FBc0JBO0FBQUE7QUFnQkE7QUFBQTtBQWRBO0FBQ0E7QUFHQTtBQUlBO0FBSUE7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBOU1BOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_area_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_body.ts":
/*!***************************************!*\
  !*** ./src/box2d/dynamics/b2_body.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Body = exports.b2BodyDef = exports.b2BodyType = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_shape_1 = __webpack_require__(/*! ../collision/b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2_fixture_1 = __webpack_require__(/*! ./b2_fixture */ \"./src/box2d/dynamics/b2_fixture.ts\");\nvar b2BodyType;\n(function (b2BodyType) {\n    b2BodyType[b2BodyType[\"b2_unknown\"] = -1] = \"b2_unknown\";\n    b2BodyType[b2BodyType[\"b2_staticBody\"] = 0] = \"b2_staticBody\";\n    b2BodyType[b2BodyType[\"b2_kinematicBody\"] = 1] = \"b2_kinematicBody\";\n    b2BodyType[b2BodyType[\"b2_dynamicBody\"] = 2] = \"b2_dynamicBody\";\n})(b2BodyType = exports.b2BodyType || (exports.b2BodyType = {}));\nvar b2BodyDef = (function () {\n    function b2BodyDef() {\n        this.type = b2BodyType.b2_staticBody;\n        this.position = new b2_math_1.b2Vec2(0, 0);\n        this.angle = 0;\n        this.linearVelocity = new b2_math_1.b2Vec2(0, 0);\n        this.angularVelocity = 0;\n        this.linearDamping = 0;\n        this.angularDamping = 0;\n        this.allowSleep = true;\n        this.awake = true;\n        this.fixedRotation = false;\n        this.bullet = false;\n        this.enabled = true;\n        this.userData = null;\n        this.gravityScale = 1;\n    }\n    return b2BodyDef;\n}());\nexports.b2BodyDef = b2BodyDef;\nvar b2Body = (function () {\n    function b2Body(bd, world) {\n        this.m_type = b2BodyType.b2_staticBody;\n        this.m_islandFlag = false;\n        this.m_awakeFlag = false;\n        this.m_autoSleepFlag = false;\n        this.m_bulletFlag = false;\n        this.m_fixedRotationFlag = false;\n        this.m_enabledFlag = false;\n        this.m_toiFlag = false;\n        this.m_islandIndex = 0;\n        this.m_xf = new b2_math_1.b2Transform();\n        this.m_xf0 = new b2_math_1.b2Transform();\n        this.m_sweep = new b2_math_1.b2Sweep();\n        this.m_linearVelocity = new b2_math_1.b2Vec2();\n        this.m_angularVelocity = 0;\n        this.m_force = new b2_math_1.b2Vec2();\n        this.m_torque = 0;\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_fixtureList = null;\n        this.m_fixtureCount = 0;\n        this.m_jointList = null;\n        this.m_contactList = null;\n        this.m_mass = 1;\n        this.m_invMass = 1;\n        this.m_I = 0;\n        this.m_invI = 0;\n        this.m_linearDamping = 0;\n        this.m_angularDamping = 0;\n        this.m_gravityScale = 1;\n        this.m_sleepTime = 0;\n        this.m_userData = null;\n        this.m_controllerList = null;\n        this.m_controllerCount = 0;\n        this.m_bulletFlag = b2_settings_1.b2Maybe(bd.bullet, false);\n        this.m_fixedRotationFlag = b2_settings_1.b2Maybe(bd.fixedRotation, false);\n        this.m_autoSleepFlag = b2_settings_1.b2Maybe(bd.allowSleep, true);\n        if (b2_settings_1.b2Maybe(bd.awake, true) && b2_settings_1.b2Maybe(bd.type, b2BodyType.b2_staticBody) !== b2BodyType.b2_staticBody) {\n            this.m_awakeFlag = true;\n        }\n        this.m_enabledFlag = b2_settings_1.b2Maybe(bd.enabled, true);\n        this.m_world = world;\n        this.m_xf.p.Copy(b2_settings_1.b2Maybe(bd.position, b2_math_1.b2Vec2.ZERO));\n        this.m_xf.q.SetAngle(b2_settings_1.b2Maybe(bd.angle, 0));\n        this.m_xf0.Copy(this.m_xf);\n        this.m_sweep.localCenter.SetZero();\n        this.m_sweep.c0.Copy(this.m_xf.p);\n        this.m_sweep.c.Copy(this.m_xf.p);\n        this.m_sweep.a0 = this.m_sweep.a = this.m_xf.q.GetAngle();\n        this.m_sweep.alpha0 = 0;\n        this.m_linearVelocity.Copy(b2_settings_1.b2Maybe(bd.linearVelocity, b2_math_1.b2Vec2.ZERO));\n        this.m_angularVelocity = b2_settings_1.b2Maybe(bd.angularVelocity, 0);\n        this.m_linearDamping = b2_settings_1.b2Maybe(bd.linearDamping, 0);\n        this.m_angularDamping = b2_settings_1.b2Maybe(bd.angularDamping, 0);\n        this.m_gravityScale = b2_settings_1.b2Maybe(bd.gravityScale, 1);\n        this.m_force.SetZero();\n        this.m_torque = 0;\n        this.m_sleepTime = 0;\n        this.m_type = b2_settings_1.b2Maybe(bd.type, b2BodyType.b2_staticBody);\n        this.m_mass = 0;\n        this.m_invMass = 0;\n        this.m_I = 0;\n        this.m_invI = 0;\n        this.m_userData = bd.userData;\n        this.m_fixtureList = null;\n        this.m_fixtureCount = 0;\n        this.m_controllerList = null;\n        this.m_controllerCount = 0;\n    }\n    b2Body.prototype.CreateFixture = function (a, b) {\n        if (b === void 0) { b = 0; }\n        if (a instanceof b2_shape_1.b2Shape) {\n            return this.CreateFixtureShapeDensity(a, b);\n        }\n        else {\n            return this.CreateFixtureDef(a);\n        }\n    };\n    b2Body.prototype.CreateFixtureDef = function (def) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        var fixture = new b2_fixture_1.b2Fixture(this, def);\n        if (this.m_enabledFlag) {\n            fixture.CreateProxies();\n        }\n        fixture.m_next = this.m_fixtureList;\n        this.m_fixtureList = fixture;\n        ++this.m_fixtureCount;\n        if (fixture.m_density > 0) {\n            this.ResetMassData();\n        }\n        this.m_world.m_newContacts = true;\n        return fixture;\n    };\n    b2Body.prototype.CreateFixtureShapeDensity = function (shape, density) {\n        if (density === void 0) { density = 0; }\n        var def = b2Body.CreateFixtureShapeDensity_s_def;\n        def.shape = shape;\n        def.density = density;\n        return this.CreateFixtureDef(def);\n    };\n    b2Body.prototype.DestroyFixture = function (fixture) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        var node = this.m_fixtureList;\n        var ppF = null;\n        while (node !== null) {\n            if (node === fixture) {\n                if (ppF) {\n                    ppF.m_next = fixture.m_next;\n                }\n                else {\n                    this.m_fixtureList = fixture.m_next;\n                }\n                break;\n            }\n            ppF = node;\n            node = node.m_next;\n        }\n        var edge = this.m_contactList;\n        while (edge) {\n            var c = edge.contact;\n            edge = edge.next;\n            var fixtureA = c.GetFixtureA();\n            var fixtureB = c.GetFixtureB();\n            if (fixture === fixtureA || fixture === fixtureB) {\n                this.m_world.m_contactManager.Destroy(c);\n            }\n        }\n        if (this.m_enabledFlag) {\n            fixture.DestroyProxies();\n        }\n        fixture.m_next = null;\n        fixture.Reset();\n        --this.m_fixtureCount;\n        this.ResetMassData();\n    };\n    b2Body.prototype.SetTransformVec = function (position, angle) {\n        this.SetTransformXY(position.x, position.y, angle);\n    };\n    b2Body.prototype.SetTransformXY = function (x, y, angle) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        this.m_xf.q.SetAngle(angle);\n        this.m_xf.p.Set(x, y);\n        this.m_xf0.Copy(this.m_xf);\n        b2_math_1.b2Transform.MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c);\n        this.m_sweep.a = angle;\n        this.m_sweep.c0.Copy(this.m_sweep.c);\n        this.m_sweep.a0 = angle;\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n            f.SynchronizeProxies(this.m_xf, this.m_xf);\n        }\n        this.m_world.m_newContacts = true;\n    };\n    b2Body.prototype.SetTransform = function (xf) {\n        this.SetTransformVec(xf.p, xf.GetAngle());\n    };\n    b2Body.prototype.GetTransform = function () {\n        return this.m_xf;\n    };\n    b2Body.prototype.GetPosition = function () {\n        return this.m_xf.p;\n    };\n    b2Body.prototype.SetPosition = function (position) {\n        this.SetTransformVec(position, this.GetAngle());\n    };\n    b2Body.prototype.SetPositionXY = function (x, y) {\n        this.SetTransformXY(x, y, this.GetAngle());\n    };\n    b2Body.prototype.GetAngle = function () {\n        return this.m_sweep.a;\n    };\n    b2Body.prototype.SetAngle = function (angle) {\n        this.SetTransformVec(this.GetPosition(), angle);\n    };\n    b2Body.prototype.GetWorldCenter = function () {\n        return this.m_sweep.c;\n    };\n    b2Body.prototype.GetLocalCenter = function () {\n        return this.m_sweep.localCenter;\n    };\n    b2Body.prototype.SetLinearVelocity = function (v) {\n        if (this.m_type === b2BodyType.b2_staticBody) {\n            return;\n        }\n        if (b2_math_1.b2Vec2.DotVV(v, v) > 0) {\n            this.SetAwake(true);\n        }\n        this.m_linearVelocity.Copy(v);\n    };\n    b2Body.prototype.GetLinearVelocity = function () {\n        return this.m_linearVelocity;\n    };\n    b2Body.prototype.SetAngularVelocity = function (w) {\n        if (this.m_type === b2BodyType.b2_staticBody) {\n            return;\n        }\n        if (w * w > 0) {\n            this.SetAwake(true);\n        }\n        this.m_angularVelocity = w;\n    };\n    b2Body.prototype.GetAngularVelocity = function () {\n        return this.m_angularVelocity;\n    };\n    b2Body.prototype.GetDefinition = function (bd) {\n        bd.type = this.GetType();\n        bd.allowSleep = this.m_autoSleepFlag;\n        bd.angle = this.GetAngle();\n        bd.angularDamping = this.m_angularDamping;\n        bd.gravityScale = this.m_gravityScale;\n        bd.angularVelocity = this.m_angularVelocity;\n        bd.fixedRotation = this.m_fixedRotationFlag;\n        bd.bullet = this.m_bulletFlag;\n        bd.awake = this.m_awakeFlag;\n        bd.linearDamping = this.m_linearDamping;\n        bd.linearVelocity.Copy(this.GetLinearVelocity());\n        bd.position.Copy(this.GetPosition());\n        bd.userData = this.GetUserData();\n        return bd;\n    };\n    b2Body.prototype.ApplyForce = function (force, point, wake) {\n        if (wake === void 0) { wake = true; }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        if (wake && !this.m_awakeFlag) {\n            this.SetAwake(true);\n        }\n        if (this.m_awakeFlag) {\n            this.m_force.x += force.x;\n            this.m_force.y += force.y;\n            this.m_torque += ((point.x - this.m_sweep.c.x) * force.y - (point.y - this.m_sweep.c.y) * force.x);\n        }\n    };\n    b2Body.prototype.ApplyForceToCenter = function (force, wake) {\n        if (wake === void 0) { wake = true; }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        if (wake && !this.m_awakeFlag) {\n            this.SetAwake(true);\n        }\n        if (this.m_awakeFlag) {\n            this.m_force.x += force.x;\n            this.m_force.y += force.y;\n        }\n    };\n    b2Body.prototype.ApplyTorque = function (torque, wake) {\n        if (wake === void 0) { wake = true; }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        if (wake && !this.m_awakeFlag) {\n            this.SetAwake(true);\n        }\n        if (this.m_awakeFlag) {\n            this.m_torque += torque;\n        }\n    };\n    b2Body.prototype.ApplyLinearImpulse = function (impulse, point, wake) {\n        if (wake === void 0) { wake = true; }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        if (wake && !this.m_awakeFlag) {\n            this.SetAwake(true);\n        }\n        if (this.m_awakeFlag) {\n            this.m_linearVelocity.x += this.m_invMass * impulse.x;\n            this.m_linearVelocity.y += this.m_invMass * impulse.y;\n            this.m_angularVelocity += this.m_invI * ((point.x - this.m_sweep.c.x) * impulse.y - (point.y - this.m_sweep.c.y) * impulse.x);\n        }\n    };\n    b2Body.prototype.ApplyLinearImpulseToCenter = function (impulse, wake) {\n        if (wake === void 0) { wake = true; }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        if (wake && !this.m_awakeFlag) {\n            this.SetAwake(true);\n        }\n        if (this.m_awakeFlag) {\n            this.m_linearVelocity.x += this.m_invMass * impulse.x;\n            this.m_linearVelocity.y += this.m_invMass * impulse.y;\n        }\n    };\n    b2Body.prototype.ApplyAngularImpulse = function (impulse, wake) {\n        if (wake === void 0) { wake = true; }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        if (wake && !this.m_awakeFlag) {\n            this.SetAwake(true);\n        }\n        if (this.m_awakeFlag) {\n            this.m_angularVelocity += this.m_invI * impulse;\n        }\n    };\n    b2Body.prototype.GetMass = function () {\n        return this.m_mass;\n    };\n    b2Body.prototype.GetInertia = function () {\n        return this.m_I + this.m_mass * b2_math_1.b2Vec2.DotVV(this.m_sweep.localCenter, this.m_sweep.localCenter);\n    };\n    b2Body.prototype.GetMassData = function (data) {\n        data.mass = this.m_mass;\n        data.I = this.m_I + this.m_mass * b2_math_1.b2Vec2.DotVV(this.m_sweep.localCenter, this.m_sweep.localCenter);\n        data.center.Copy(this.m_sweep.localCenter);\n        return data;\n    };\n    b2Body.prototype.SetMassData = function (massData) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        if (this.m_type !== b2BodyType.b2_dynamicBody) {\n            return;\n        }\n        this.m_invMass = 0;\n        this.m_I = 0;\n        this.m_invI = 0;\n        this.m_mass = massData.mass;\n        if (this.m_mass <= 0) {\n            this.m_mass = 1;\n        }\n        this.m_invMass = 1 / this.m_mass;\n        if (massData.I > 0 && !this.m_fixedRotationFlag) {\n            this.m_I = massData.I - this.m_mass * b2_math_1.b2Vec2.DotVV(massData.center, massData.center);\n            this.m_invI = 1 / this.m_I;\n        }\n        var oldCenter = b2Body.SetMassData_s_oldCenter.Copy(this.m_sweep.c);\n        this.m_sweep.localCenter.Copy(massData.center);\n        b2_math_1.b2Transform.MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c);\n        this.m_sweep.c0.Copy(this.m_sweep.c);\n        b2_math_1.b2Vec2.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, b2_math_1.b2Vec2.SubVV(this.m_sweep.c, oldCenter, b2_math_1.b2Vec2.s_t0), this.m_linearVelocity);\n    };\n    b2Body.prototype.ResetMassData = function () {\n        this.m_mass = 0;\n        this.m_invMass = 0;\n        this.m_I = 0;\n        this.m_invI = 0;\n        this.m_sweep.localCenter.SetZero();\n        if (this.m_type === b2BodyType.b2_staticBody || this.m_type === b2BodyType.b2_kinematicBody) {\n            this.m_sweep.c0.Copy(this.m_xf.p);\n            this.m_sweep.c.Copy(this.m_xf.p);\n            this.m_sweep.a0 = this.m_sweep.a;\n            return;\n        }\n        var localCenter = b2Body.ResetMassData_s_localCenter.SetZero();\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n            if (f.m_density === 0) {\n                continue;\n            }\n            var massData = f.GetMassData(b2Body.ResetMassData_s_massData);\n            this.m_mass += massData.mass;\n            localCenter.x += massData.center.x * massData.mass;\n            localCenter.y += massData.center.y * massData.mass;\n            this.m_I += massData.I;\n        }\n        if (this.m_mass > 0) {\n            this.m_invMass = 1 / this.m_mass;\n            localCenter.x *= this.m_invMass;\n            localCenter.y *= this.m_invMass;\n        }\n        if (this.m_I > 0 && !this.m_fixedRotationFlag) {\n            this.m_I -= this.m_mass * b2_math_1.b2Vec2.DotVV(localCenter, localCenter);\n            this.m_invI = 1 / this.m_I;\n        }\n        else {\n            this.m_I = 0;\n            this.m_invI = 0;\n        }\n        var oldCenter = b2Body.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);\n        this.m_sweep.localCenter.Copy(localCenter);\n        b2_math_1.b2Transform.MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c);\n        this.m_sweep.c0.Copy(this.m_sweep.c);\n        b2_math_1.b2Vec2.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, b2_math_1.b2Vec2.SubVV(this.m_sweep.c, oldCenter, b2_math_1.b2Vec2.s_t0), this.m_linearVelocity);\n    };\n    b2Body.prototype.GetWorldPoint = function (localPoint, out) {\n        return b2_math_1.b2Transform.MulXV(this.m_xf, localPoint, out);\n    };\n    b2Body.prototype.GetWorldVector = function (localVector, out) {\n        return b2_math_1.b2Rot.MulRV(this.m_xf.q, localVector, out);\n    };\n    b2Body.prototype.GetLocalPoint = function (worldPoint, out) {\n        return b2_math_1.b2Transform.MulTXV(this.m_xf, worldPoint, out);\n    };\n    b2Body.prototype.GetLocalVector = function (worldVector, out) {\n        return b2_math_1.b2Rot.MulTRV(this.m_xf.q, worldVector, out);\n    };\n    b2Body.prototype.GetLinearVelocityFromWorldPoint = function (worldPoint, out) {\n        return b2_math_1.b2Vec2.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, b2_math_1.b2Vec2.SubVV(worldPoint, this.m_sweep.c, b2_math_1.b2Vec2.s_t0), out);\n    };\n    b2Body.prototype.GetLinearVelocityFromLocalPoint = function (localPoint, out) {\n        return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(localPoint, out), out);\n    };\n    b2Body.prototype.GetLinearDamping = function () {\n        return this.m_linearDamping;\n    };\n    b2Body.prototype.SetLinearDamping = function (linearDamping) {\n        this.m_linearDamping = linearDamping;\n    };\n    b2Body.prototype.GetAngularDamping = function () {\n        return this.m_angularDamping;\n    };\n    b2Body.prototype.SetAngularDamping = function (angularDamping) {\n        this.m_angularDamping = angularDamping;\n    };\n    b2Body.prototype.GetGravityScale = function () {\n        return this.m_gravityScale;\n    };\n    b2Body.prototype.SetGravityScale = function (scale) {\n        this.m_gravityScale = scale;\n    };\n    b2Body.prototype.SetType = function (type) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        if (this.m_type === type) {\n            return;\n        }\n        this.m_type = type;\n        this.ResetMassData();\n        if (this.m_type === b2BodyType.b2_staticBody) {\n            this.m_linearVelocity.SetZero();\n            this.m_angularVelocity = 0;\n            this.m_sweep.a0 = this.m_sweep.a;\n            this.m_sweep.c0.Copy(this.m_sweep.c);\n            this.m_awakeFlag = false;\n            this.SynchronizeFixtures();\n        }\n        this.SetAwake(true);\n        this.m_force.SetZero();\n        this.m_torque = 0;\n        var ce = this.m_contactList;\n        while (ce) {\n            var ce0 = ce;\n            ce = ce.next;\n            this.m_world.m_contactManager.Destroy(ce0.contact);\n        }\n        this.m_contactList = null;\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n            f.TouchProxies();\n        }\n    };\n    b2Body.prototype.GetType = function () {\n        return this.m_type;\n    };\n    b2Body.prototype.SetBullet = function (flag) {\n        this.m_bulletFlag = flag;\n    };\n    b2Body.prototype.IsBullet = function () {\n        return this.m_bulletFlag;\n    };\n    b2Body.prototype.SetSleepingAllowed = function (flag) {\n        this.m_autoSleepFlag = flag;\n        if (!flag) {\n            this.SetAwake(true);\n        }\n    };\n    b2Body.prototype.IsSleepingAllowed = function () {\n        return this.m_autoSleepFlag;\n    };\n    b2Body.prototype.SetAwake = function (flag) {\n        if (this.m_type === b2BodyType.b2_staticBody) {\n            return;\n        }\n        if (flag) {\n            this.m_awakeFlag = true;\n            this.m_sleepTime = 0;\n        }\n        else {\n            this.m_awakeFlag = false;\n            this.m_sleepTime = 0;\n            this.m_linearVelocity.SetZero();\n            this.m_angularVelocity = 0;\n            this.m_force.SetZero();\n            this.m_torque = 0;\n        }\n    };\n    b2Body.prototype.IsAwake = function () {\n        return this.m_awakeFlag;\n    };\n    b2Body.prototype.SetEnabled = function (flag) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        if (flag === this.IsEnabled()) {\n            return;\n        }\n        this.m_enabledFlag = flag;\n        if (flag) {\n            for (var f = this.m_fixtureList; f; f = f.m_next) {\n                f.CreateProxies();\n            }\n            this.m_world.m_newContacts = true;\n        }\n        else {\n            for (var f = this.m_fixtureList; f; f = f.m_next) {\n                f.DestroyProxies();\n            }\n            var ce = this.m_contactList;\n            while (ce) {\n                var ce0 = ce;\n                ce = ce.next;\n                this.m_world.m_contactManager.Destroy(ce0.contact);\n            }\n            this.m_contactList = null;\n        }\n    };\n    b2Body.prototype.IsEnabled = function () {\n        return this.m_enabledFlag;\n    };\n    b2Body.prototype.SetFixedRotation = function (flag) {\n        if (this.m_fixedRotationFlag === flag) {\n            return;\n        }\n        this.m_fixedRotationFlag = flag;\n        this.m_angularVelocity = 0;\n        this.ResetMassData();\n    };\n    b2Body.prototype.IsFixedRotation = function () {\n        return this.m_fixedRotationFlag;\n    };\n    b2Body.prototype.GetFixtureList = function () {\n        return this.m_fixtureList;\n    };\n    b2Body.prototype.GetJointList = function () {\n        return this.m_jointList;\n    };\n    b2Body.prototype.GetContactList = function () {\n        return this.m_contactList;\n    };\n    b2Body.prototype.GetNext = function () {\n        return this.m_next;\n    };\n    b2Body.prototype.GetUserData = function () {\n        return this.m_userData;\n    };\n    b2Body.prototype.SetUserData = function (data) {\n        this.m_userData = data;\n    };\n    b2Body.prototype.GetWorld = function () {\n        return this.m_world;\n    };\n    b2Body.prototype.Dump = function (log) {\n        var bodyIndex = this.m_islandIndex;\n        log(\"{\\n\");\n        log(\"  const bd: b2BodyDef = new b2BodyDef();\\n\");\n        var type_str = \"\";\n        switch (this.m_type) {\n            case b2BodyType.b2_staticBody:\n                type_str = \"b2BodyType.b2_staticBody\";\n                break;\n            case b2BodyType.b2_kinematicBody:\n                type_str = \"b2BodyType.b2_kinematicBody\";\n                break;\n            case b2BodyType.b2_dynamicBody:\n                type_str = \"b2BodyType.b2_dynamicBody\";\n                break;\n            default:\n                break;\n        }\n        log(\"  bd.type = %s;\\n\", type_str);\n        log(\"  bd.position.Set(%.15f, %.15f);\\n\", this.m_xf.p.x, this.m_xf.p.y);\n        log(\"  bd.angle = %.15f;\\n\", this.m_sweep.a);\n        log(\"  bd.linearVelocity.Set(%.15f, %.15f);\\n\", this.m_linearVelocity.x, this.m_linearVelocity.y);\n        log(\"  bd.angularVelocity = %.15f;\\n\", this.m_angularVelocity);\n        log(\"  bd.linearDamping = %.15f;\\n\", this.m_linearDamping);\n        log(\"  bd.angularDamping = %.15f;\\n\", this.m_angularDamping);\n        log(\"  bd.allowSleep = %s;\\n\", (this.m_autoSleepFlag) ? (\"true\") : (\"false\"));\n        log(\"  bd.awake = %s;\\n\", (this.m_awakeFlag) ? (\"true\") : (\"false\"));\n        log(\"  bd.fixedRotation = %s;\\n\", (this.m_fixedRotationFlag) ? (\"true\") : (\"false\"));\n        log(\"  bd.bullet = %s;\\n\", (this.m_bulletFlag) ? (\"true\") : (\"false\"));\n        log(\"  bd.active = %s;\\n\", (this.m_enabledFlag) ? (\"true\") : (\"false\"));\n        log(\"  bd.gravityScale = %.15f;\\n\", this.m_gravityScale);\n        log(\"\\n\");\n        log(\"  bodies[%d] = this.m_world.CreateBody(bd);\\n\", this.m_islandIndex);\n        log(\"\\n\");\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n            log(\"  {\\n\");\n            f.Dump(log, bodyIndex);\n            log(\"  }\\n\");\n        }\n        log(\"}\\n\");\n    };\n    b2Body.prototype.SynchronizeFixtures = function () {\n        if (this.m_awakeFlag) {\n            var xf1 = b2Body.SynchronizeFixtures_s_xf1;\n            xf1.q.SetAngle(this.m_sweep.a0);\n            b2_math_1.b2Rot.MulRV(xf1.q, this.m_sweep.localCenter, xf1.p);\n            b2_math_1.b2Vec2.SubVV(this.m_sweep.c0, xf1.p, xf1.p);\n            for (var f = this.m_fixtureList; f; f = f.m_next) {\n                f.SynchronizeProxies(xf1, this.m_xf);\n            }\n        }\n        else {\n            for (var f = this.m_fixtureList; f; f = f.m_next) {\n                f.SynchronizeProxies(this.m_xf, this.m_xf);\n            }\n        }\n    };\n    b2Body.prototype.SynchronizeTransform = function () {\n        this.m_xf.q.SetAngle(this.m_sweep.a);\n        b2_math_1.b2Rot.MulRV(this.m_xf.q, this.m_sweep.localCenter, this.m_xf.p);\n        b2_math_1.b2Vec2.SubVV(this.m_sweep.c, this.m_xf.p, this.m_xf.p);\n    };\n    b2Body.prototype.ShouldCollide = function (other) {\n        if (this.m_type === b2BodyType.b2_staticBody && other.m_type === b2BodyType.b2_staticBody) {\n            return false;\n        }\n        return this.ShouldCollideConnected(other);\n    };\n    b2Body.prototype.ShouldCollideConnected = function (other) {\n        for (var jn = this.m_jointList; jn; jn = jn.next) {\n            if (jn.other === other) {\n                if (!jn.joint.m_collideConnected) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    b2Body.prototype.Advance = function (alpha) {\n        this.m_sweep.Advance(alpha);\n        this.m_sweep.c.Copy(this.m_sweep.c0);\n        this.m_sweep.a = this.m_sweep.a0;\n        this.m_xf.q.SetAngle(this.m_sweep.a);\n        b2_math_1.b2Rot.MulRV(this.m_xf.q, this.m_sweep.localCenter, this.m_xf.p);\n        b2_math_1.b2Vec2.SubVV(this.m_sweep.c, this.m_xf.p, this.m_xf.p);\n    };\n    b2Body.prototype.GetControllerList = function () {\n        return this.m_controllerList;\n    };\n    b2Body.prototype.GetControllerCount = function () {\n        return this.m_controllerCount;\n    };\n    b2Body.CreateFixtureShapeDensity_s_def = new b2_fixture_1.b2FixtureDef();\n    b2Body.SetMassData_s_oldCenter = new b2_math_1.b2Vec2();\n    b2Body.ResetMassData_s_localCenter = new b2_math_1.b2Vec2();\n    b2Body.ResetMassData_s_oldCenter = new b2_math_1.b2Vec2();\n    b2Body.ResetMassData_s_massData = new b2_shape_1.b2MassData();\n    b2Body.SynchronizeFixtures_s_xf1 = new b2_math_1.b2Transform();\n    return b2Body;\n}());\nexports.b2Body = b2Body;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfYm9keS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9ib2R5LnRzPzI0MjAiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMTEgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbi8vIERFQlVHOiBpbXBvcnQgeyBiMkFzc2VydCB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbi8vIERFQlVHOiBpbXBvcnQgeyBiMklzVmFsaWQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyTWF5YmUgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyUm90LCBiMlRyYW5zZm9ybSwgYjJTd2VlcCwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyU2hhcGUsIGIyTWFzc0RhdGEgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3RFZGdlIH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuaW1wb3J0IHsgYjJKb2ludEVkZ2UgfSBmcm9tIFwiLi9iMl9qb2ludFwiO1xuaW1wb3J0IHsgYjJGaXh0dXJlLCBiMkZpeHR1cmVEZWYsIGIySUZpeHR1cmVEZWYgfSBmcm9tIFwiLi9iMl9maXh0dXJlXCI7XG5pbXBvcnQgeyBiMldvcmxkIH0gZnJvbSBcIi4vYjJfd29ybGRcIjtcbi8vICNpZiBCMl9FTkFCTEVfQ09OVFJPTExFUlxuaW1wb3J0IHsgYjJDb250cm9sbGVyRWRnZSB9IGZyb20gXCIuLi9jb250cm9sbGVycy9iMl9jb250cm9sbGVyXCI7XG4vLyAjZW5kaWZcblxuLy8vIFRoZSBib2R5IHR5cGUuXG4vLy8gc3RhdGljOiB6ZXJvIG1hc3MsIHplcm8gdmVsb2NpdHksIG1heSBiZSBtYW51YWxseSBtb3ZlZFxuLy8vIGtpbmVtYXRpYzogemVybyBtYXNzLCBub24temVybyB2ZWxvY2l0eSBzZXQgYnkgdXNlciwgbW92ZWQgYnkgc29sdmVyXG4vLy8gZHluYW1pYzogcG9zaXRpdmUgbWFzcywgbm9uLXplcm8gdmVsb2NpdHkgZGV0ZXJtaW5lZCBieSBmb3JjZXMsIG1vdmVkIGJ5IHNvbHZlclxuZXhwb3J0IGVudW0gYjJCb2R5VHlwZSB7XG4gIGIyX3Vua25vd24gPSAtMSxcbiAgYjJfc3RhdGljQm9keSA9IDAsXG4gIGIyX2tpbmVtYXRpY0JvZHkgPSAxLFxuICBiMl9keW5hbWljQm9keSA9IDIsXG5cbiAgLy8gVE9ET19FUklOXG4gIC8vIGIyX2J1bGxldEJvZHkgPSAzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJQm9keURlZiB7XG4gIC8vLyBUaGUgYm9keSB0eXBlOiBzdGF0aWMsIGtpbmVtYXRpYywgb3IgZHluYW1pYy5cbiAgLy8vIE5vdGU6IGlmIGEgZHluYW1pYyBib2R5IHdvdWxkIGhhdmUgemVybyBtYXNzLCB0aGUgbWFzcyBpcyBzZXQgdG8gb25lLlxuICB0eXBlPzogYjJCb2R5VHlwZTtcblxuICAvLy8gVGhlIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSBib2R5LiBBdm9pZCBjcmVhdGluZyBib2RpZXMgYXQgdGhlIG9yaWdpblxuICAvLy8gc2luY2UgdGhpcyBjYW4gbGVhZCB0byBtYW55IG92ZXJsYXBwaW5nIHNoYXBlcy5cbiAgcG9zaXRpb24/OiBYWTtcblxuICAvLy8gVGhlIHdvcmxkIGFuZ2xlIG9mIHRoZSBib2R5IGluIHJhZGlhbnMuXG4gIGFuZ2xlPzogbnVtYmVyO1xuXG4gIC8vLyBUaGUgbGluZWFyIHZlbG9jaXR5IG9mIHRoZSBib2R5J3Mgb3JpZ2luIGluIHdvcmxkIGNvLW9yZGluYXRlcy5cbiAgbGluZWFyVmVsb2NpdHk/OiBYWTtcblxuICAvLy8gVGhlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZHkuXG4gIGFuZ3VsYXJWZWxvY2l0eT86IG51bWJlcjtcblxuICAvLy8gTGluZWFyIGRhbXBpbmcgaXMgdXNlIHRvIHJlZHVjZSB0aGUgbGluZWFyIHZlbG9jaXR5LiBUaGUgZGFtcGluZyBwYXJhbWV0ZXJcbiAgLy8vIGNhbiBiZSBsYXJnZXIgdGhhbiAxLjBmIGJ1dCB0aGUgZGFtcGluZyBlZmZlY3QgYmVjb21lcyBzZW5zaXRpdmUgdG8gdGhlXG4gIC8vLyB0aW1lIHN0ZXAgd2hlbiB0aGUgZGFtcGluZyBwYXJhbWV0ZXIgaXMgbGFyZ2UuXG4gIC8vLyBVbml0cyBhcmUgMS90aW1lXG4gIGxpbmVhckRhbXBpbmc/OiBudW1iZXI7XG5cbiAgLy8vIEFuZ3VsYXIgZGFtcGluZyBpcyB1c2UgdG8gcmVkdWNlIHRoZSBhbmd1bGFyIHZlbG9jaXR5LiBUaGUgZGFtcGluZyBwYXJhbWV0ZXJcbiAgLy8vIGNhbiBiZSBsYXJnZXIgdGhhbiAxLjBmIGJ1dCB0aGUgZGFtcGluZyBlZmZlY3QgYmVjb21lcyBzZW5zaXRpdmUgdG8gdGhlXG4gIC8vLyB0aW1lIHN0ZXAgd2hlbiB0aGUgZGFtcGluZyBwYXJhbWV0ZXIgaXMgbGFyZ2UuXG4gIC8vLyBVbml0cyBhcmUgMS90aW1lXG4gIGFuZ3VsYXJEYW1waW5nPzogbnVtYmVyO1xuXG4gIC8vLyBTZXQgdGhpcyBmbGFnIHRvIGZhbHNlIGlmIHRoaXMgYm9keSBzaG91bGQgbmV2ZXIgZmFsbCBhc2xlZXAuIE5vdGUgdGhhdFxuICAvLy8gdGhpcyBpbmNyZWFzZXMgQ1BVIHVzYWdlLlxuICBhbGxvd1NsZWVwPzogYm9vbGVhbjtcblxuICAvLy8gSXMgdGhpcyBib2R5IGluaXRpYWxseSBhd2FrZSBvciBzbGVlcGluZz9cbiAgYXdha2U/OiBib29sZWFuO1xuXG4gIC8vLyBTaG91bGQgdGhpcyBib2R5IGJlIHByZXZlbnRlZCBmcm9tIHJvdGF0aW5nPyBVc2VmdWwgZm9yIGNoYXJhY3RlcnMuXG4gIGZpeGVkUm90YXRpb24/OiBib29sZWFuO1xuXG4gIC8vLyBJcyB0aGlzIGEgZmFzdCBtb3ZpbmcgYm9keSB0aGF0IHNob3VsZCBiZSBwcmV2ZW50ZWQgZnJvbSB0dW5uZWxpbmcgdGhyb3VnaFxuICAvLy8gb3RoZXIgbW92aW5nIGJvZGllcz8gTm90ZSB0aGF0IGFsbCBib2RpZXMgYXJlIHByZXZlbnRlZCBmcm9tIHR1bm5lbGluZyB0aHJvdWdoXG4gIC8vLyBraW5lbWF0aWMgYW5kIHN0YXRpYyBib2RpZXMuIFRoaXMgc2V0dGluZyBpcyBvbmx5IGNvbnNpZGVyZWQgb24gZHluYW1pYyBib2RpZXMuXG4gIC8vLyBAd2FybmluZyBZb3Ugc2hvdWxkIHVzZSB0aGlzIGZsYWcgc3BhcmluZ2x5IHNpbmNlIGl0IGluY3JlYXNlcyBwcm9jZXNzaW5nIHRpbWUuXG4gIGJ1bGxldD86IGJvb2xlYW47XG5cbiAgLy8vIERvZXMgdGhpcyBib2R5IHN0YXJ0IG91dCBlbmFibGVkP1xuICBlbmFibGVkPzogYm9vbGVhbjtcblxuICAvLy8gVXNlIHRoaXMgdG8gc3RvcmUgYXBwbGljYXRpb24gc3BlY2lmaWMgYm9keSBkYXRhLlxuICB1c2VyRGF0YT86IGFueTtcblxuICAvLy8gU2NhbGUgdGhlIGdyYXZpdHkgYXBwbGllZCB0byB0aGlzIGJvZHkuXG4gIGdyYXZpdHlTY2FsZT86IG51bWJlcjtcbn1cblxuLy8vIEEgYm9keSBkZWZpbml0aW9uIGhvbGRzIGFsbCB0aGUgZGF0YSBuZWVkZWQgdG8gY29uc3RydWN0IGEgcmlnaWQgYm9keS5cbi8vLyBZb3UgY2FuIHNhZmVseSByZS11c2UgYm9keSBkZWZpbml0aW9ucy4gU2hhcGVzIGFyZSBhZGRlZCB0byBhIGJvZHkgYWZ0ZXIgY29uc3RydWN0aW9uLlxuZXhwb3J0IGNsYXNzIGIyQm9keURlZiBpbXBsZW1lbnRzIGIySUJvZHlEZWYge1xuICAvLy8gVGhlIGJvZHkgdHlwZTogc3RhdGljLCBraW5lbWF0aWMsIG9yIGR5bmFtaWMuXG4gIC8vLyBOb3RlOiBpZiBhIGR5bmFtaWMgYm9keSB3b3VsZCBoYXZlIHplcm8gbWFzcywgdGhlIG1hc3MgaXMgc2V0IHRvIG9uZS5cbiAgcHVibGljIHR5cGU6IGIyQm9keVR5cGUgPSBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHk7XG5cbiAgLy8vIFRoZSB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgYm9keS4gQXZvaWQgY3JlYXRpbmcgYm9kaWVzIGF0IHRoZSBvcmlnaW5cbiAgLy8vIHNpbmNlIHRoaXMgY2FuIGxlYWQgdG8gbWFueSBvdmVybGFwcGluZyBzaGFwZXMuXG4gIHB1YmxpYyByZWFkb25seSBwb3NpdGlvbjogYjJWZWMyID0gbmV3IGIyVmVjMigwLCAwKTtcblxuICAvLy8gVGhlIHdvcmxkIGFuZ2xlIG9mIHRoZSBib2R5IGluIHJhZGlhbnMuXG4gIHB1YmxpYyBhbmdsZTogbnVtYmVyID0gMDtcblxuICAvLy8gVGhlIGxpbmVhciB2ZWxvY2l0eSBvZiB0aGUgYm9keSdzIG9yaWdpbiBpbiB3b3JsZCBjby1vcmRpbmF0ZXMuXG4gIHB1YmxpYyByZWFkb25seSBsaW5lYXJWZWxvY2l0eTogYjJWZWMyID0gbmV3IGIyVmVjMigwLCAwKTtcblxuICAvLy8gVGhlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZHkuXG4gIHB1YmxpYyBhbmd1bGFyVmVsb2NpdHk6IG51bWJlciA9IDA7XG5cbiAgLy8vIExpbmVhciBkYW1waW5nIGlzIHVzZSB0byByZWR1Y2UgdGhlIGxpbmVhciB2ZWxvY2l0eS4gVGhlIGRhbXBpbmcgcGFyYW1ldGVyXG4gIC8vLyBjYW4gYmUgbGFyZ2VyIHRoYW4gMS4wZiBidXQgdGhlIGRhbXBpbmcgZWZmZWN0IGJlY29tZXMgc2Vuc2l0aXZlIHRvIHRoZVxuICAvLy8gdGltZSBzdGVwIHdoZW4gdGhlIGRhbXBpbmcgcGFyYW1ldGVyIGlzIGxhcmdlLlxuICBwdWJsaWMgbGluZWFyRGFtcGluZzogbnVtYmVyID0gMDtcblxuICAvLy8gQW5ndWxhciBkYW1waW5nIGlzIHVzZSB0byByZWR1Y2UgdGhlIGFuZ3VsYXIgdmVsb2NpdHkuIFRoZSBkYW1waW5nIHBhcmFtZXRlclxuICAvLy8gY2FuIGJlIGxhcmdlciB0aGFuIDEuMGYgYnV0IHRoZSBkYW1waW5nIGVmZmVjdCBiZWNvbWVzIHNlbnNpdGl2ZSB0byB0aGVcbiAgLy8vIHRpbWUgc3RlcCB3aGVuIHRoZSBkYW1waW5nIHBhcmFtZXRlciBpcyBsYXJnZS5cbiAgcHVibGljIGFuZ3VsYXJEYW1waW5nOiBudW1iZXIgPSAwO1xuXG4gIC8vLyBTZXQgdGhpcyBmbGFnIHRvIGZhbHNlIGlmIHRoaXMgYm9keSBzaG91bGQgbmV2ZXIgZmFsbCBhc2xlZXAuIE5vdGUgdGhhdFxuICAvLy8gdGhpcyBpbmNyZWFzZXMgQ1BVIHVzYWdlLlxuICBwdWJsaWMgYWxsb3dTbGVlcDogYm9vbGVhbiA9IHRydWU7XG5cbiAgLy8vIElzIHRoaXMgYm9keSBpbml0aWFsbHkgYXdha2Ugb3Igc2xlZXBpbmc/XG4gIHB1YmxpYyBhd2FrZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgLy8vIFNob3VsZCB0aGlzIGJvZHkgYmUgcHJldmVudGVkIGZyb20gcm90YXRpbmc/IFVzZWZ1bCBmb3IgY2hhcmFjdGVycy5cbiAgcHVibGljIGZpeGVkUm90YXRpb246IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLy8gSXMgdGhpcyBhIGZhc3QgbW92aW5nIGJvZHkgdGhhdCBzaG91bGQgYmUgcHJldmVudGVkIGZyb20gdHVubmVsaW5nIHRocm91Z2hcbiAgLy8vIG90aGVyIG1vdmluZyBib2RpZXM/IE5vdGUgdGhhdCBhbGwgYm9kaWVzIGFyZSBwcmV2ZW50ZWQgZnJvbSB0dW5uZWxpbmcgdGhyb3VnaFxuICAvLy8ga2luZW1hdGljIGFuZCBzdGF0aWMgYm9kaWVzLiBUaGlzIHNldHRpbmcgaXMgb25seSBjb25zaWRlcmVkIG9uIGR5bmFtaWMgYm9kaWVzLlxuICAvLy8gQHdhcm5pbmcgWW91IHNob3VsZCB1c2UgdGhpcyBmbGFnIHNwYXJpbmdseSBzaW5jZSBpdCBpbmNyZWFzZXMgcHJvY2Vzc2luZyB0aW1lLlxuICBwdWJsaWMgYnVsbGV0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8vIERvZXMgdGhpcyBib2R5IHN0YXJ0IG91dCBlbmFibGVkP1xuICBwdWJsaWMgZW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG5cbiAgLy8vIFVzZSB0aGlzIHRvIHN0b3JlIGFwcGxpY2F0aW9uIHNwZWNpZmljIGJvZHkgZGF0YS5cbiAgcHVibGljIHVzZXJEYXRhOiBhbnkgPSBudWxsO1xuXG4gIC8vLyBTY2FsZSB0aGUgZ3Jhdml0eSBhcHBsaWVkIHRvIHRoaXMgYm9keS5cbiAgcHVibGljIGdyYXZpdHlTY2FsZTogbnVtYmVyID0gMTtcbn1cblxuLy8vIEEgcmlnaWQgYm9keS4gVGhlc2UgYXJlIGNyZWF0ZWQgdmlhIGIyV29ybGQ6OkNyZWF0ZUJvZHkuXG5leHBvcnQgY2xhc3MgYjJCb2R5IHtcbiAgcHVibGljIG1fdHlwZTogYjJCb2R5VHlwZSA9IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keTtcblxuICBwdWJsaWMgbV9pc2xhbmRGbGFnOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtX2F3YWtlRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbV9hdXRvU2xlZXBGbGFnOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtX2J1bGxldEZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fZml4ZWRSb3RhdGlvbkZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fZW5hYmxlZEZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fdG9pRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBtX2lzbGFuZEluZGV4OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyByZWFkb25seSBtX3hmOiBiMlRyYW5zZm9ybSA9IG5ldyBiMlRyYW5zZm9ybSgpOyAgLy8gdGhlIGJvZHkgb3JpZ2luIHRyYW5zZm9ybVxuICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gIHB1YmxpYyByZWFkb25seSBtX3hmMDogYjJUcmFuc2Zvcm0gPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgLy8gI2VuZGlmXG4gIHB1YmxpYyByZWFkb25seSBtX3N3ZWVwOiBiMlN3ZWVwID0gbmV3IGIyU3dlZXAoKTsgICAgLy8gdGhlIHN3ZXB0IG1vdGlvbiBmb3IgQ0NEXG5cbiAgcHVibGljIHJlYWRvbmx5IG1fbGluZWFyVmVsb2NpdHk6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fYW5ndWxhclZlbG9jaXR5OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyByZWFkb25seSBtX2ZvcmNlOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX3RvcnF1ZTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV93b3JsZDogYjJXb3JsZDtcbiAgcHVibGljIG1fcHJldjogYjJCb2R5IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBtX25leHQ6IGIyQm9keSB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBtX2ZpeHR1cmVMaXN0OiBiMkZpeHR1cmUgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIG1fZml4dHVyZUNvdW50OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtX2pvaW50TGlzdDogYjJKb2ludEVkZ2UgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIG1fY29udGFjdExpc3Q6IGIyQ29udGFjdEVkZ2UgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgbV9tYXNzOiBudW1iZXIgPSAxO1xuICBwdWJsaWMgbV9pbnZNYXNzOiBudW1iZXIgPSAxO1xuXG4gIC8vIFJvdGF0aW9uYWwgaW5lcnRpYSBhYm91dCB0aGUgY2VudGVyIG9mIG1hc3MuXG4gIHB1YmxpYyBtX0k6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludkk6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIG1fbGluZWFyRGFtcGluZzogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fYW5ndWxhckRhbXBpbmc6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2dyYXZpdHlTY2FsZTogbnVtYmVyID0gMTtcblxuICBwdWJsaWMgbV9zbGVlcFRpbWU6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIG1fdXNlckRhdGE6IGFueSA9IG51bGw7XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9DT05UUk9MTEVSXG4gIHB1YmxpYyBtX2NvbnRyb2xsZXJMaXN0OiBiMkNvbnRyb2xsZXJFZGdlIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBtX2NvbnRyb2xsZXJDb3VudDogbnVtYmVyID0gMDtcbiAgLy8gI2VuZGlmXG5cbiAgY29uc3RydWN0b3IoYmQ6IGIySUJvZHlEZWYsIHdvcmxkOiBiMldvcmxkKSB7XG4gICAgdGhpcy5tX2J1bGxldEZsYWcgPSBiMk1heWJlKGJkLmJ1bGxldCwgZmFsc2UpO1xuICAgIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9IGIyTWF5YmUoYmQuZml4ZWRSb3RhdGlvbiwgZmFsc2UpO1xuICAgIHRoaXMubV9hdXRvU2xlZXBGbGFnID0gYjJNYXliZShiZC5hbGxvd1NsZWVwLCB0cnVlKTtcbiAgICBpZiAoYjJNYXliZShiZC5hd2FrZSwgdHJ1ZSkgJiYgYjJNYXliZShiZC50eXBlLCBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHkpICE9PSBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHkpIHtcbiAgICAgIHRoaXMubV9hd2FrZUZsYWcgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLm1fZW5hYmxlZEZsYWcgPSBiMk1heWJlKGJkLmVuYWJsZWQsIHRydWUpO1xuXG4gICAgdGhpcy5tX3dvcmxkID0gd29ybGQ7XG5cbiAgICB0aGlzLm1feGYucC5Db3B5KGIyTWF5YmUoYmQucG9zaXRpb24sIGIyVmVjMi5aRVJPKSk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV94Zi5wLklzVmFsaWQoKSk7XG4gICAgdGhpcy5tX3hmLnEuU2V0QW5nbGUoYjJNYXliZShiZC5hbmdsZSwgMCkpO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChiMklzVmFsaWQodGhpcy5tX3hmLnEuR2V0QW5nbGUoKSkpO1xuICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICB0aGlzLm1feGYwLkNvcHkodGhpcy5tX3hmKTtcbiAgICAvLyAjZW5kaWZcblxuICAgIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlci5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX3N3ZWVwLmMwLkNvcHkodGhpcy5tX3hmLnApO1xuICAgIHRoaXMubV9zd2VlcC5jLkNvcHkodGhpcy5tX3hmLnApO1xuICAgIHRoaXMubV9zd2VlcC5hMCA9IHRoaXMubV9zd2VlcC5hID0gdGhpcy5tX3hmLnEuR2V0QW5nbGUoKTtcbiAgICB0aGlzLm1fc3dlZXAuYWxwaGEwID0gMDtcblxuICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS5Db3B5KGIyTWF5YmUoYmQubGluZWFyVmVsb2NpdHksIGIyVmVjMi5aRVJPKSk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9saW5lYXJWZWxvY2l0eS5Jc1ZhbGlkKCkpO1xuICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSBiMk1heWJlKGJkLmFuZ3VsYXJWZWxvY2l0eSwgMCk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGIySXNWYWxpZCh0aGlzLm1fYW5ndWxhclZlbG9jaXR5KSk7XG5cbiAgICB0aGlzLm1fbGluZWFyRGFtcGluZyA9IGIyTWF5YmUoYmQubGluZWFyRGFtcGluZywgMCk7XG4gICAgdGhpcy5tX2FuZ3VsYXJEYW1waW5nID0gYjJNYXliZShiZC5hbmd1bGFyRGFtcGluZywgMCk7XG4gICAgdGhpcy5tX2dyYXZpdHlTY2FsZSA9IGIyTWF5YmUoYmQuZ3Jhdml0eVNjYWxlLCAxKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYjJJc1ZhbGlkKHRoaXMubV9ncmF2aXR5U2NhbGUpICYmIHRoaXMubV9ncmF2aXR5U2NhbGUgPj0gMCk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGIySXNWYWxpZCh0aGlzLm1fYW5ndWxhckRhbXBpbmcpICYmIHRoaXMubV9hbmd1bGFyRGFtcGluZyA+PSAwKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYjJJc1ZhbGlkKHRoaXMubV9saW5lYXJEYW1waW5nKSAmJiB0aGlzLm1fbGluZWFyRGFtcGluZyA+PSAwKTtcblxuICAgIHRoaXMubV9mb3JjZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX3RvcnF1ZSA9IDA7XG5cbiAgICB0aGlzLm1fc2xlZXBUaW1lID0gMDtcblxuICAgIHRoaXMubV90eXBlID0gYjJNYXliZShiZC50eXBlLCBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHkpO1xuXG4gICAgdGhpcy5tX21hc3MgPSAwO1xuICAgIHRoaXMubV9pbnZNYXNzID0gMDtcblxuICAgIHRoaXMubV9JID0gMDtcbiAgICB0aGlzLm1faW52SSA9IDA7XG5cbiAgICB0aGlzLm1fdXNlckRhdGEgPSBiZC51c2VyRGF0YTtcblxuICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IG51bGw7XG4gICAgdGhpcy5tX2ZpeHR1cmVDb3VudCA9IDA7XG5cbiAgICAvLyAjaWYgQjJfRU5BQkxFX0NPTlRST0xMRVJcbiAgICB0aGlzLm1fY29udHJvbGxlckxpc3QgPSBudWxsO1xuICAgIHRoaXMubV9jb250cm9sbGVyQ291bnQgPSAwO1xuICAgIC8vICNlbmRpZlxuICB9XG5cbiAgcHVibGljIENyZWF0ZUZpeHR1cmUoZGVmOiBiMklGaXh0dXJlRGVmKTogYjJGaXh0dXJlO1xuICBwdWJsaWMgQ3JlYXRlRml4dHVyZShzaGFwZTogYjJTaGFwZSk6IGIyRml4dHVyZTtcbiAgcHVibGljIENyZWF0ZUZpeHR1cmUoc2hhcGU6IGIyU2hhcGUsIGRlbnNpdHk6IG51bWJlcik6IGIyRml4dHVyZTtcbiAgcHVibGljIENyZWF0ZUZpeHR1cmUoYTogYjJJRml4dHVyZURlZiB8IGIyU2hhcGUsIGI6IG51bWJlciA9IDApOiBiMkZpeHR1cmUge1xuICAgIGlmIChhIGluc3RhbmNlb2YgYjJTaGFwZSkge1xuICAgICAgcmV0dXJuIHRoaXMuQ3JlYXRlRml4dHVyZVNoYXBlRGVuc2l0eShhLCBiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuQ3JlYXRlRml4dHVyZURlZihhKTtcbiAgICB9XG4gIH1cblxuICAvLy8gQ3JlYXRlcyBhIGZpeHR1cmUgYW5kIGF0dGFjaCBpdCB0byB0aGlzIGJvZHkuIFVzZSB0aGlzIGZ1bmN0aW9uIGlmIHlvdSBuZWVkXG4gIC8vLyB0byBzZXQgc29tZSBmaXh0dXJlIHBhcmFtZXRlcnMsIGxpa2UgZnJpY3Rpb24uIE90aGVyd2lzZSB5b3UgY2FuIGNyZWF0ZSB0aGVcbiAgLy8vIGZpeHR1cmUgZGlyZWN0bHkgZnJvbSBhIHNoYXBlLlxuICAvLy8gSWYgdGhlIGRlbnNpdHkgaXMgbm9uLXplcm8sIHRoaXMgZnVuY3Rpb24gYXV0b21hdGljYWxseSB1cGRhdGVzIHRoZSBtYXNzIG9mIHRoZSBib2R5LlxuICAvLy8gQ29udGFjdHMgYXJlIG5vdCBjcmVhdGVkIHVudGlsIHRoZSBuZXh0IHRpbWUgc3RlcC5cbiAgLy8vIEBwYXJhbSBkZWYgdGhlIGZpeHR1cmUgZGVmaW5pdGlvbi5cbiAgLy8vIEB3YXJuaW5nIFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gIHB1YmxpYyBDcmVhdGVGaXh0dXJlRGVmKGRlZjogYjJJRml4dHVyZURlZik6IGIyRml4dHVyZSB7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBjb25zdCBmaXh0dXJlOiBiMkZpeHR1cmUgPSBuZXcgYjJGaXh0dXJlKHRoaXMsIGRlZik7XG5cbiAgICBpZiAodGhpcy5tX2VuYWJsZWRGbGFnKSB7XG4gICAgICBmaXh0dXJlLkNyZWF0ZVByb3hpZXMoKTtcbiAgICB9XG5cbiAgICBmaXh0dXJlLm1fbmV4dCA9IHRoaXMubV9maXh0dXJlTGlzdDtcbiAgICB0aGlzLm1fZml4dHVyZUxpc3QgPSBmaXh0dXJlO1xuICAgICsrdGhpcy5tX2ZpeHR1cmVDb3VudDtcblxuICAgIC8vIGZpeHR1cmUubV9ib2R5ID0gdGhpcztcblxuICAgIC8vIEFkanVzdCBtYXNzIHByb3BlcnRpZXMgaWYgbmVlZGVkLlxuICAgIGlmIChmaXh0dXJlLm1fZGVuc2l0eSA+IDApIHtcbiAgICAgIHRoaXMuUmVzZXRNYXNzRGF0YSgpO1xuICAgIH1cblxuICAgIC8vIExldCB0aGUgd29ybGQga25vdyB3ZSBoYXZlIGEgbmV3IGZpeHR1cmUuIFRoaXMgd2lsbCBjYXVzZSBuZXcgY29udGFjdHNcbiAgICAvLyB0byBiZSBjcmVhdGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIG5leHQgdGltZSBzdGVwLlxuICAgIHRoaXMubV93b3JsZC5tX25ld0NvbnRhY3RzID0gdHJ1ZTtcblxuICAgIHJldHVybiBmaXh0dXJlO1xuICB9XG5cbiAgLy8vIENyZWF0ZXMgYSBmaXh0dXJlIGZyb20gYSBzaGFwZSBhbmQgYXR0YWNoIGl0IHRvIHRoaXMgYm9keS5cbiAgLy8vIFRoaXMgaXMgYSBjb252ZW5pZW5jZSBmdW5jdGlvbi4gVXNlIGIyRml4dHVyZURlZiBpZiB5b3UgbmVlZCB0byBzZXQgcGFyYW1ldGVyc1xuICAvLy8gbGlrZSBmcmljdGlvbiwgcmVzdGl0dXRpb24sIHVzZXIgZGF0YSwgb3IgZmlsdGVyaW5nLlxuICAvLy8gSWYgdGhlIGRlbnNpdHkgaXMgbm9uLXplcm8sIHRoaXMgZnVuY3Rpb24gYXV0b21hdGljYWxseSB1cGRhdGVzIHRoZSBtYXNzIG9mIHRoZSBib2R5LlxuICAvLy8gQHBhcmFtIHNoYXBlIHRoZSBzaGFwZSB0byBiZSBjbG9uZWQuXG4gIC8vLyBAcGFyYW0gZGVuc2l0eSB0aGUgc2hhcGUgZGVuc2l0eSAoc2V0IHRvIHplcm8gZm9yIHN0YXRpYyBib2RpZXMpLlxuICAvLy8gQHdhcm5pbmcgVGhpcyBmdW5jdGlvbiBpcyBsb2NrZWQgZHVyaW5nIGNhbGxiYWNrcy5cbiAgcHJpdmF0ZSBzdGF0aWMgQ3JlYXRlRml4dHVyZVNoYXBlRGVuc2l0eV9zX2RlZjogYjJGaXh0dXJlRGVmID0gbmV3IGIyRml4dHVyZURlZigpO1xuICBwdWJsaWMgQ3JlYXRlRml4dHVyZVNoYXBlRGVuc2l0eShzaGFwZTogYjJTaGFwZSwgZGVuc2l0eTogbnVtYmVyID0gMCk6IGIyRml4dHVyZSB7XG4gICAgY29uc3QgZGVmOiBiMkZpeHR1cmVEZWYgPSBiMkJvZHkuQ3JlYXRlRml4dHVyZVNoYXBlRGVuc2l0eV9zX2RlZjtcbiAgICBkZWYuc2hhcGUgPSBzaGFwZTtcbiAgICBkZWYuZGVuc2l0eSA9IGRlbnNpdHk7XG4gICAgcmV0dXJuIHRoaXMuQ3JlYXRlRml4dHVyZURlZihkZWYpO1xuICB9XG5cbiAgLy8vIERlc3Ryb3kgYSBmaXh0dXJlLiBUaGlzIHJlbW92ZXMgdGhlIGZpeHR1cmUgZnJvbSB0aGUgYnJvYWQtcGhhc2UgYW5kXG4gIC8vLyBkZXN0cm95cyBhbGwgY29udGFjdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZml4dHVyZS4gVGhpcyB3aWxsXG4gIC8vLyBhdXRvbWF0aWNhbGx5IGFkanVzdCB0aGUgbWFzcyBvZiB0aGUgYm9keSBpZiB0aGUgYm9keSBpcyBkeW5hbWljIGFuZCB0aGVcbiAgLy8vIGZpeHR1cmUgaGFzIHBvc2l0aXZlIGRlbnNpdHkuXG4gIC8vLyBBbGwgZml4dHVyZXMgYXR0YWNoZWQgdG8gYSBib2R5IGFyZSBpbXBsaWNpdGx5IGRlc3Ryb3llZCB3aGVuIHRoZSBib2R5IGlzIGRlc3Ryb3llZC5cbiAgLy8vIEBwYXJhbSBmaXh0dXJlIHRoZSBmaXh0dXJlIHRvIGJlIHJlbW92ZWQuXG4gIC8vLyBAd2FybmluZyBUaGlzIGZ1bmN0aW9uIGlzIGxvY2tlZCBkdXJpbmcgY2FsbGJhY2tzLlxuICBwdWJsaWMgRGVzdHJveUZpeHR1cmUoZml4dHVyZTogYjJGaXh0dXJlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZml4dHVyZS5tX2JvZHkgPT09IHRoaXMpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBmaXh0dXJlIGZyb20gdGhpcyBib2R5J3Mgc2luZ2x5IGxpbmtlZCBsaXN0LlxuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fZml4dHVyZUNvdW50ID4gMCk7XG4gICAgbGV0IG5vZGU6IGIyRml4dHVyZSB8IG51bGwgPSB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gICAgbGV0IHBwRjogYjJGaXh0dXJlIHwgbnVsbCA9IG51bGw7XG4gICAgLy8gREVCVUc6IGxldCBmb3VuZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICBpZiAobm9kZSA9PT0gZml4dHVyZSkge1xuICAgICAgICBpZiAocHBGKSB7XG4gICAgICAgICAgcHBGLm1fbmV4dCA9IGZpeHR1cmUubV9uZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IGZpeHR1cmUubV9uZXh0O1xuICAgICAgICB9XG4gICAgICAgIC8vIERFQlVHOiBmb3VuZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBwcEYgPSBub2RlO1xuICAgICAgbm9kZSA9IG5vZGUubV9uZXh0O1xuICAgIH1cblxuICAgIC8vIFlvdSB0cmllZCB0byByZW1vdmUgYSBzaGFwZSB0aGF0IGlzIG5vdCBhdHRhY2hlZCB0byB0aGlzIGJvZHkuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZvdW5kKTtcblxuICAgIC8vIERlc3Ryb3kgYW55IGNvbnRhY3RzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZml4dHVyZS5cbiAgICBsZXQgZWRnZTogYjJDb250YWN0RWRnZSB8IG51bGwgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgIGNvbnN0IGMgPSBlZGdlLmNvbnRhY3Q7XG4gICAgICBlZGdlID0gZWRnZS5uZXh0O1xuXG4gICAgICBjb25zdCBmaXh0dXJlQTogYjJGaXh0dXJlID0gYy5HZXRGaXh0dXJlQSgpO1xuICAgICAgY29uc3QgZml4dHVyZUI6IGIyRml4dHVyZSA9IGMuR2V0Rml4dHVyZUIoKTtcblxuICAgICAgaWYgKGZpeHR1cmUgPT09IGZpeHR1cmVBIHx8IGZpeHR1cmUgPT09IGZpeHR1cmVCKSB7XG4gICAgICAgIC8vIFRoaXMgZGVzdHJveXMgdGhlIGNvbnRhY3QgYW5kIHJlbW92ZXMgaXQgZnJvbVxuICAgICAgICAvLyB0aGlzIGJvZHkncyBjb250YWN0IGxpc3QuXG4gICAgICAgIHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLkRlc3Ryb3koYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubV9lbmFibGVkRmxhZykge1xuICAgICAgZml4dHVyZS5EZXN0cm95UHJveGllcygpO1xuICAgIH1cblxuICAgIC8vIGZpeHR1cmUubV9ib2R5ID0gbnVsbDtcbiAgICBmaXh0dXJlLm1fbmV4dCA9IG51bGw7XG4gICAgZml4dHVyZS5SZXNldCgpO1xuXG4gICAgLS10aGlzLm1fZml4dHVyZUNvdW50O1xuXG4gICAgLy8gUmVzZXQgdGhlIG1hc3MgZGF0YS5cbiAgICB0aGlzLlJlc2V0TWFzc0RhdGEoKTtcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5J3Mgb3JpZ2luIGFuZCByb3RhdGlvbi5cbiAgLy8vIFRoaXMgYnJlYWtzIGFueSBjb250YWN0cyBhbmQgd2FrZXMgdGhlIG90aGVyIGJvZGllcy5cbiAgLy8vIE1hbmlwdWxhdGluZyBhIGJvZHkncyB0cmFuc2Zvcm0gbWF5IGNhdXNlIG5vbi1waHlzaWNhbCBiZWhhdmlvci5cbiAgLy8vIEBwYXJhbSBwb3NpdGlvbiB0aGUgd29ybGQgcG9zaXRpb24gb2YgdGhlIGJvZHkncyBsb2NhbCBvcmlnaW4uXG4gIC8vLyBAcGFyYW0gYW5nbGUgdGhlIHdvcmxkIHJvdGF0aW9uIGluIHJhZGlhbnMuXG4gIHB1YmxpYyBTZXRUcmFuc2Zvcm1WZWMocG9zaXRpb246IFhZLCBhbmdsZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5TZXRUcmFuc2Zvcm1YWShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBhbmdsZSk7XG4gIH1cblxuICBwdWJsaWMgU2V0VHJhbnNmb3JtWFkoeDogbnVtYmVyLCB5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3dvcmxkLklzTG9ja2VkKCkpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cblxuICAgIHRoaXMubV94Zi5xLlNldEFuZ2xlKGFuZ2xlKTtcbiAgICB0aGlzLm1feGYucC5TZXQoeCwgeSk7XG4gICAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICAgIHRoaXMubV94ZjAuQ29weSh0aGlzLm1feGYpO1xuICAgIC8vICNlbmRpZlxuXG4gICAgYjJUcmFuc2Zvcm0uTXVsWFYodGhpcy5tX3hmLCB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIsIHRoaXMubV9zd2VlcC5jKTtcbiAgICB0aGlzLm1fc3dlZXAuYSA9IGFuZ2xlO1xuXG4gICAgdGhpcy5tX3N3ZWVwLmMwLkNvcHkodGhpcy5tX3N3ZWVwLmMpO1xuICAgIHRoaXMubV9zd2VlcC5hMCA9IGFuZ2xlO1xuXG4gICAgZm9yIChsZXQgZjogYjJGaXh0dXJlIHwgbnVsbCA9IHRoaXMubV9maXh0dXJlTGlzdDsgZjsgZiA9IGYubV9uZXh0KSB7XG4gICAgICBmLlN5bmNocm9uaXplUHJveGllcyh0aGlzLm1feGYsIHRoaXMubV94Zik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIG5ldyBjb250YWN0cyB0aGUgbmV4dCBzdGVwXG4gICAgdGhpcy5tX3dvcmxkLm1fbmV3Q29udGFjdHMgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIFNldFRyYW5zZm9ybSh4ZjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICB0aGlzLlNldFRyYW5zZm9ybVZlYyh4Zi5wLCB4Zi5HZXRBbmdsZSgpKTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGJvZHkgdHJhbnNmb3JtIGZvciB0aGUgYm9keSdzIG9yaWdpbi5cbiAgLy8vIEByZXR1cm4gdGhlIHdvcmxkIHRyYW5zZm9ybSBvZiB0aGUgYm9keSdzIG9yaWdpbi5cbiAgcHVibGljIEdldFRyYW5zZm9ybSgpOiBSZWFkb25seTxiMlRyYW5zZm9ybT4ge1xuICAgIHJldHVybiB0aGlzLm1feGY7XG4gIH1cblxuICAvLy8gR2V0IHRoZSB3b3JsZCBib2R5IG9yaWdpbiBwb3NpdGlvbi5cbiAgLy8vIEByZXR1cm4gdGhlIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSBib2R5J3Mgb3JpZ2luLlxuICBwdWJsaWMgR2V0UG9zaXRpb24oKTogUmVhZG9ubHk8YjJWZWMyPiB7XG4gICAgcmV0dXJuIHRoaXMubV94Zi5wO1xuICB9XG5cbiAgcHVibGljIFNldFBvc2l0aW9uKHBvc2l0aW9uOiBYWSk6IHZvaWQge1xuICAgIHRoaXMuU2V0VHJhbnNmb3JtVmVjKHBvc2l0aW9uLCB0aGlzLkdldEFuZ2xlKCkpO1xuICB9XG5cbiAgcHVibGljIFNldFBvc2l0aW9uWFkoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLlNldFRyYW5zZm9ybVhZKHgsIHksIHRoaXMuR2V0QW5nbGUoKSk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBhbmdsZSBpbiByYWRpYW5zLlxuICAvLy8gQHJldHVybiB0aGUgY3VycmVudCB3b3JsZCByb3RhdGlvbiBhbmdsZSBpbiByYWRpYW5zLlxuICBwdWJsaWMgR2V0QW5nbGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX3N3ZWVwLmE7XG4gIH1cblxuICBwdWJsaWMgU2V0QW5nbGUoYW5nbGU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuU2V0VHJhbnNmb3JtVmVjKHRoaXMuR2V0UG9zaXRpb24oKSwgYW5nbGUpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgd29ybGQgcG9zaXRpb24gb2YgdGhlIGNlbnRlciBvZiBtYXNzLlxuICBwdWJsaWMgR2V0V29ybGRDZW50ZXIoKTogUmVhZG9ubHk8YjJWZWMyPiB7XG4gICAgcmV0dXJuIHRoaXMubV9zd2VlcC5jO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgbG9jYWwgcG9zaXRpb24gb2YgdGhlIGNlbnRlciBvZiBtYXNzLlxuICBwdWJsaWMgR2V0TG9jYWxDZW50ZXIoKTogUmVhZG9ubHk8YjJWZWMyPiB7XG4gICAgcmV0dXJuIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIGxpbmVhciB2ZWxvY2l0eSBvZiB0aGUgY2VudGVyIG9mIG1hc3MuXG4gIC8vLyBAcGFyYW0gdiB0aGUgbmV3IGxpbmVhciB2ZWxvY2l0eSBvZiB0aGUgY2VudGVyIG9mIG1hc3MuXG4gIHB1YmxpYyBTZXRMaW5lYXJWZWxvY2l0eSh2OiBYWSk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGIyVmVjMi5Eb3RWVih2LCB2KSA+IDApIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LkNvcHkodik7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBsaW5lYXIgdmVsb2NpdHkgb2YgdGhlIGNlbnRlciBvZiBtYXNzLlxuICAvLy8gQHJldHVybiB0aGUgbGluZWFyIHZlbG9jaXR5IG9mIHRoZSBjZW50ZXIgb2YgbWFzcy5cbiAgcHVibGljIEdldExpbmVhclZlbG9jaXR5KCk6IFJlYWRvbmx5PGIyVmVjMj4ge1xuICAgIHJldHVybiB0aGlzLm1fbGluZWFyVmVsb2NpdHk7XG4gIH1cblxuICAvLy8gU2V0IHRoZSBhbmd1bGFyIHZlbG9jaXR5LlxuICAvLy8gQHBhcmFtIG9tZWdhIHRoZSBuZXcgYW5ndWxhciB2ZWxvY2l0eSBpbiByYWRpYW5zL3NlY29uZC5cbiAgcHVibGljIFNldEFuZ3VsYXJWZWxvY2l0eSh3OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3R5cGUgPT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh3ICogdyA+IDApIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IHc7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBhbmd1bGFyIHZlbG9jaXR5LlxuICAvLy8gQHJldHVybiB0aGUgYW5ndWxhciB2ZWxvY2l0eSBpbiByYWRpYW5zL3NlY29uZC5cbiAgcHVibGljIEdldEFuZ3VsYXJWZWxvY2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fYW5ndWxhclZlbG9jaXR5O1xuICB9XG5cbiAgcHVibGljIEdldERlZmluaXRpb24oYmQ6IGIyQm9keURlZik6IGIyQm9keURlZiB7XG4gICAgYmQudHlwZSA9IHRoaXMuR2V0VHlwZSgpO1xuICAgIGJkLmFsbG93U2xlZXAgPSB0aGlzLm1fYXV0b1NsZWVwRmxhZztcbiAgICBiZC5hbmdsZSA9IHRoaXMuR2V0QW5nbGUoKTtcbiAgICBiZC5hbmd1bGFyRGFtcGluZyA9IHRoaXMubV9hbmd1bGFyRGFtcGluZztcbiAgICBiZC5ncmF2aXR5U2NhbGUgPSB0aGlzLm1fZ3Jhdml0eVNjYWxlO1xuICAgIGJkLmFuZ3VsYXJWZWxvY2l0eSA9IHRoaXMubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmQuZml4ZWRSb3RhdGlvbiA9IHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZztcbiAgICBiZC5idWxsZXQgPSB0aGlzLm1fYnVsbGV0RmxhZztcbiAgICBiZC5hd2FrZSA9IHRoaXMubV9hd2FrZUZsYWc7XG4gICAgYmQubGluZWFyRGFtcGluZyA9IHRoaXMubV9saW5lYXJEYW1waW5nO1xuICAgIGJkLmxpbmVhclZlbG9jaXR5LkNvcHkodGhpcy5HZXRMaW5lYXJWZWxvY2l0eSgpKTtcbiAgICBiZC5wb3NpdGlvbi5Db3B5KHRoaXMuR2V0UG9zaXRpb24oKSk7XG4gICAgYmQudXNlckRhdGEgPSB0aGlzLkdldFVzZXJEYXRhKCk7XG4gICAgcmV0dXJuIGJkO1xuICB9XG5cbiAgLy8vIEFwcGx5IGEgZm9yY2UgYXQgYSB3b3JsZCBwb2ludC4gSWYgdGhlIGZvcmNlIGlzIG5vdFxuICAvLy8gYXBwbGllZCBhdCB0aGUgY2VudGVyIG9mIG1hc3MsIGl0IHdpbGwgZ2VuZXJhdGUgYSB0b3JxdWUgYW5kXG4gIC8vLyBhZmZlY3QgdGhlIGFuZ3VsYXIgdmVsb2NpdHkuIFRoaXMgd2FrZXMgdXAgdGhlIGJvZHkuXG4gIC8vLyBAcGFyYW0gZm9yY2UgdGhlIHdvcmxkIGZvcmNlIHZlY3RvciwgdXN1YWxseSBpbiBOZXd0b25zIChOKS5cbiAgLy8vIEBwYXJhbSBwb2ludCB0aGUgd29ybGQgcG9zaXRpb24gb2YgdGhlIHBvaW50IG9mIGFwcGxpY2F0aW9uLlxuICAvLy8gQHBhcmFtIHdha2UgYWxzbyB3YWtlIHVwIHRoZSBib2R5XG4gIHB1YmxpYyBBcHBseUZvcmNlKGZvcmNlOiBYWSwgcG9pbnQ6IFhZLCB3YWtlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fdHlwZSAhPT0gYjJCb2R5VHlwZS5iMl9keW5hbWljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh3YWtlICYmICF0aGlzLm1fYXdha2VGbGFnKSB7XG4gICAgICB0aGlzLlNldEF3YWtlKHRydWUpO1xuICAgIH1cblxuICAgIC8vIERvbid0IGFjY3VtdWxhdGUgYSBmb3JjZSBpZiB0aGUgYm9keSBpcyBzbGVlcGluZy5cbiAgICBpZiAodGhpcy5tX2F3YWtlRmxhZykge1xuICAgICAgdGhpcy5tX2ZvcmNlLnggKz0gZm9yY2UueDtcbiAgICAgIHRoaXMubV9mb3JjZS55ICs9IGZvcmNlLnk7XG4gICAgICB0aGlzLm1fdG9ycXVlICs9ICgocG9pbnQueCAtIHRoaXMubV9zd2VlcC5jLngpICogZm9yY2UueSAtIChwb2ludC55IC0gdGhpcy5tX3N3ZWVwLmMueSkgKiBmb3JjZS54KTtcbiAgICB9XG4gIH1cblxuICAvLy8gQXBwbHkgYSBmb3JjZSB0byB0aGUgY2VudGVyIG9mIG1hc3MuIFRoaXMgd2FrZXMgdXAgdGhlIGJvZHkuXG4gIC8vLyBAcGFyYW0gZm9yY2UgdGhlIHdvcmxkIGZvcmNlIHZlY3RvciwgdXN1YWxseSBpbiBOZXd0b25zIChOKS5cbiAgLy8vIEBwYXJhbSB3YWtlIGFsc28gd2FrZSB1cCB0aGUgYm9keVxuICBwdWJsaWMgQXBwbHlGb3JjZVRvQ2VudGVyKGZvcmNlOiBYWSwgd2FrZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3R5cGUgIT09IGIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAod2FrZSAmJiAhdGhpcy5tX2F3YWtlRmxhZykge1xuICAgICAgdGhpcy5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBhY2N1bXVsYXRlIGEgZm9yY2UgaWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcuXG4gICAgaWYgKHRoaXMubV9hd2FrZUZsYWcpIHtcbiAgICAgIHRoaXMubV9mb3JjZS54ICs9IGZvcmNlLng7XG4gICAgICB0aGlzLm1fZm9yY2UueSArPSBmb3JjZS55O1xuICAgIH1cbiAgfVxuXG4gIC8vLyBBcHBseSBhIHRvcnF1ZS4gVGhpcyBhZmZlY3RzIHRoZSBhbmd1bGFyIHZlbG9jaXR5XG4gIC8vLyB3aXRob3V0IGFmZmVjdGluZyB0aGUgbGluZWFyIHZlbG9jaXR5IG9mIHRoZSBjZW50ZXIgb2YgbWFzcy5cbiAgLy8vIEBwYXJhbSB0b3JxdWUgYWJvdXQgdGhlIHotYXhpcyAob3V0IG9mIHRoZSBzY3JlZW4pLCB1c3VhbGx5IGluIE4tbS5cbiAgLy8vIEBwYXJhbSB3YWtlIGFsc28gd2FrZSB1cCB0aGUgYm9keVxuICBwdWJsaWMgQXBwbHlUb3JxdWUodG9ycXVlOiBudW1iZXIsIHdha2U6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV90eXBlICE9PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHdha2UgJiYgIXRoaXMubV9hd2FrZUZsYWcpIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgYWNjdW11bGF0ZSBhIGZvcmNlIGlmIHRoZSBib2R5IGlzIHNsZWVwaW5nLlxuICAgIGlmICh0aGlzLm1fYXdha2VGbGFnKSB7XG4gICAgICB0aGlzLm1fdG9ycXVlICs9IHRvcnF1ZTtcbiAgICB9XG4gIH1cblxuICAvLy8gQXBwbHkgYW4gaW1wdWxzZSBhdCBhIHBvaW50LiBUaGlzIGltbWVkaWF0ZWx5IG1vZGlmaWVzIHRoZSB2ZWxvY2l0eS5cbiAgLy8vIEl0IGFsc28gbW9kaWZpZXMgdGhlIGFuZ3VsYXIgdmVsb2NpdHkgaWYgdGhlIHBvaW50IG9mIGFwcGxpY2F0aW9uXG4gIC8vLyBpcyBub3QgYXQgdGhlIGNlbnRlciBvZiBtYXNzLiBUaGlzIHdha2VzIHVwIHRoZSBib2R5LlxuICAvLy8gQHBhcmFtIGltcHVsc2UgdGhlIHdvcmxkIGltcHVsc2UgdmVjdG9yLCB1c3VhbGx5IGluIE4tc2Vjb25kcyBvciBrZy1tL3MuXG4gIC8vLyBAcGFyYW0gcG9pbnQgdGhlIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSBwb2ludCBvZiBhcHBsaWNhdGlvbi5cbiAgLy8vIEBwYXJhbSB3YWtlIGFsc28gd2FrZSB1cCB0aGUgYm9keVxuICBwdWJsaWMgQXBwbHlMaW5lYXJJbXB1bHNlKGltcHVsc2U6IFhZLCBwb2ludDogWFksIHdha2U6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV90eXBlICE9PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHdha2UgJiYgIXRoaXMubV9hd2FrZUZsYWcpIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgYWNjdW11bGF0ZSBhIGZvcmNlIGlmIHRoZSBib2R5IGlzIHNsZWVwaW5nLlxuICAgIGlmICh0aGlzLm1fYXdha2VGbGFnKSB7XG4gICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1faW52TWFzcyAqIGltcHVsc2UueDtcbiAgICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS55ICs9IHRoaXMubV9pbnZNYXNzICogaW1wdWxzZS55O1xuICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSArPSB0aGlzLm1faW52SSAqICgocG9pbnQueCAtIHRoaXMubV9zd2VlcC5jLngpICogaW1wdWxzZS55IC0gKHBvaW50LnkgLSB0aGlzLm1fc3dlZXAuYy55KSAqIGltcHVsc2UueCk7XG4gICAgfVxuICB9XG5cbiAgLy8vIEFwcGx5IGFuIGltcHVsc2UgYXQgdGhlIGNlbnRlciBvZiBncmF2aXR5LiBUaGlzIGltbWVkaWF0ZWx5IG1vZGlmaWVzIHRoZSB2ZWxvY2l0eS5cbiAgLy8vIEBwYXJhbSBpbXB1bHNlIHRoZSB3b3JsZCBpbXB1bHNlIHZlY3RvciwgdXN1YWxseSBpbiBOLXNlY29uZHMgb3Iga2ctbS9zLlxuICAvLy8gQHBhcmFtIHdha2UgYWxzbyB3YWtlIHVwIHRoZSBib2R5XG4gIHB1YmxpYyBBcHBseUxpbmVhckltcHVsc2VUb0NlbnRlcihpbXB1bHNlOiBYWSwgd2FrZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3R5cGUgIT09IGIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAod2FrZSAmJiAhdGhpcy5tX2F3YWtlRmxhZykge1xuICAgICAgdGhpcy5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBhY2N1bXVsYXRlIGEgZm9yY2UgaWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcuXG4gICAgaWYgKHRoaXMubV9hd2FrZUZsYWcpIHtcbiAgICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS54ICs9IHRoaXMubV9pbnZNYXNzICogaW1wdWxzZS54O1xuICAgICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LnkgKz0gdGhpcy5tX2ludk1hc3MgKiBpbXB1bHNlLnk7XG4gICAgfVxuICB9XG5cbiAgLy8vIEFwcGx5IGFuIGFuZ3VsYXIgaW1wdWxzZS5cbiAgLy8vIEBwYXJhbSBpbXB1bHNlIHRoZSBhbmd1bGFyIGltcHVsc2UgaW4gdW5pdHMgb2Yga2cqbSptL3NcbiAgLy8vIEBwYXJhbSB3YWtlIGFsc28gd2FrZSB1cCB0aGUgYm9keVxuICBwdWJsaWMgQXBwbHlBbmd1bGFySW1wdWxzZShpbXB1bHNlOiBudW1iZXIsIHdha2U6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV90eXBlICE9PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHdha2UgJiYgIXRoaXMubV9hd2FrZUZsYWcpIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgYWNjdW11bGF0ZSBhIGZvcmNlIGlmIHRoZSBib2R5IGlzIHNsZWVwaW5nLlxuICAgIGlmICh0aGlzLm1fYXdha2VGbGFnKSB7XG4gICAgICB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICs9IHRoaXMubV9pbnZJICogaW1wdWxzZTtcbiAgICB9XG4gIH1cblxuICAvLy8gR2V0IHRoZSB0b3RhbCBtYXNzIG9mIHRoZSBib2R5LlxuICAvLy8gQHJldHVybiB0aGUgbWFzcywgdXN1YWxseSBpbiBraWxvZ3JhbXMgKGtnKS5cbiAgcHVibGljIEdldE1hc3MoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX21hc3M7XG4gIH1cblxuICAvLy8gR2V0IHRoZSByb3RhdGlvbmFsIGluZXJ0aWEgb2YgdGhlIGJvZHkgYWJvdXQgdGhlIGxvY2FsIG9yaWdpbi5cbiAgLy8vIEByZXR1cm4gdGhlIHJvdGF0aW9uYWwgaW5lcnRpYSwgdXN1YWxseSBpbiBrZy1tXjIuXG4gIHB1YmxpYyBHZXRJbmVydGlhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9JICsgdGhpcy5tX21hc3MgKiBiMlZlYzIuRG90VlYodGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyLCB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgbWFzcyBkYXRhIG9mIHRoZSBib2R5LlxuICAvLy8gQHJldHVybiBhIHN0cnVjdCBjb250YWluaW5nIHRoZSBtYXNzLCBpbmVydGlhIGFuZCBjZW50ZXIgb2YgdGhlIGJvZHkuXG4gIHB1YmxpYyBHZXRNYXNzRGF0YShkYXRhOiBiMk1hc3NEYXRhKTogYjJNYXNzRGF0YSB7XG4gICAgZGF0YS5tYXNzID0gdGhpcy5tX21hc3M7XG4gICAgZGF0YS5JID0gdGhpcy5tX0kgKyB0aGlzLm1fbWFzcyAqIGIyVmVjMi5Eb3RWVih0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIsIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgZGF0YS5jZW50ZXIuQ29weSh0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLy8vIFNldCB0aGUgbWFzcyBwcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIHRoZSBtYXNzIHByb3BlcnRpZXMgb2YgdGhlIGZpeHR1cmVzLlxuICAvLy8gTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyB0aGUgY2VudGVyIG9mIG1hc3MgcG9zaXRpb24uXG4gIC8vLyBOb3RlIHRoYXQgY3JlYXRpbmcgb3IgZGVzdHJveWluZyBmaXh0dXJlcyBjYW4gYWxzbyBhbHRlciB0aGUgbWFzcy5cbiAgLy8vIFRoaXMgZnVuY3Rpb24gaGFzIG5vIGVmZmVjdCBpZiB0aGUgYm9keSBpc24ndCBkeW5hbWljLlxuICAvLy8gQHBhcmFtIG1hc3NEYXRhIHRoZSBtYXNzIHByb3BlcnRpZXMuXG4gIHByaXZhdGUgc3RhdGljIFNldE1hc3NEYXRhX3Nfb2xkQ2VudGVyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTZXRNYXNzRGF0YShtYXNzRGF0YTogYjJNYXNzRGF0YSk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fd29ybGQuSXNMb2NrZWQoKSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuXG4gICAgaWYgKHRoaXMubV90eXBlICE9PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tX2ludk1hc3MgPSAwO1xuICAgIHRoaXMubV9JID0gMDtcbiAgICB0aGlzLm1faW52SSA9IDA7XG5cbiAgICB0aGlzLm1fbWFzcyA9IG1hc3NEYXRhLm1hc3M7XG4gICAgaWYgKHRoaXMubV9tYXNzIDw9IDApIHtcbiAgICAgIHRoaXMubV9tYXNzID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLm1faW52TWFzcyA9IDEgLyB0aGlzLm1fbWFzcztcblxuICAgIGlmIChtYXNzRGF0YS5JID4gMCAmJiAhdGhpcy5tX2ZpeGVkUm90YXRpb25GbGFnKSB7XG4gICAgICB0aGlzLm1fSSA9IG1hc3NEYXRhLkkgLSB0aGlzLm1fbWFzcyAqIGIyVmVjMi5Eb3RWVihtYXNzRGF0YS5jZW50ZXIsIG1hc3NEYXRhLmNlbnRlcik7XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX0kgPiAwKTtcbiAgICAgIHRoaXMubV9pbnZJID0gMSAvIHRoaXMubV9JO1xuICAgIH1cblxuICAgIC8vIE1vdmUgY2VudGVyIG9mIG1hc3MuXG4gICAgY29uc3Qgb2xkQ2VudGVyOiBiMlZlYzIgPSBiMkJvZHkuU2V0TWFzc0RhdGFfc19vbGRDZW50ZXIuQ29weSh0aGlzLm1fc3dlZXAuYyk7XG4gICAgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyLkNvcHkobWFzc0RhdGEuY2VudGVyKTtcbiAgICBiMlRyYW5zZm9ybS5NdWxYVih0aGlzLm1feGYsIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlciwgdGhpcy5tX3N3ZWVwLmMpO1xuICAgIHRoaXMubV9zd2VlcC5jMC5Db3B5KHRoaXMubV9zd2VlcC5jKTtcblxuICAgIC8vIFVwZGF0ZSBjZW50ZXIgb2YgbWFzcyB2ZWxvY2l0eS5cbiAgICBiMlZlYzIuQWRkVkNyb3NzU1YodGhpcy5tX2xpbmVhclZlbG9jaXR5LCB0aGlzLm1fYW5ndWxhclZlbG9jaXR5LCBiMlZlYzIuU3ViVlYodGhpcy5tX3N3ZWVwLmMsIG9sZENlbnRlciwgYjJWZWMyLnNfdDApLCB0aGlzLm1fbGluZWFyVmVsb2NpdHkpO1xuICB9XG5cbiAgLy8vIFRoaXMgcmVzZXRzIHRoZSBtYXNzIHByb3BlcnRpZXMgdG8gdGhlIHN1bSBvZiB0aGUgbWFzcyBwcm9wZXJ0aWVzIG9mIHRoZSBmaXh0dXJlcy5cbiAgLy8vIFRoaXMgbm9ybWFsbHkgZG9lcyBub3QgbmVlZCB0byBiZSBjYWxsZWQgdW5sZXNzIHlvdSBjYWxsZWQgU2V0TWFzc0RhdGEgdG8gb3ZlcnJpZGVcbiAgLy8vIHRoZSBtYXNzIGFuZCB5b3UgbGF0ZXIgd2FudCB0byByZXNldCB0aGUgbWFzcy5cbiAgcHJpdmF0ZSBzdGF0aWMgUmVzZXRNYXNzRGF0YV9zX2xvY2FsQ2VudGVyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFJlc2V0TWFzc0RhdGFfc19vbGRDZW50ZXI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgUmVzZXRNYXNzRGF0YV9zX21hc3NEYXRhOiBiMk1hc3NEYXRhID0gbmV3IGIyTWFzc0RhdGEoKTtcbiAgcHVibGljIFJlc2V0TWFzc0RhdGEoKTogdm9pZCB7XG4gICAgLy8gQ29tcHV0ZSBtYXNzIGRhdGEgZnJvbSBzaGFwZXMuIEVhY2ggc2hhcGUgaGFzIGl0cyBvd24gZGVuc2l0eS5cbiAgICB0aGlzLm1fbWFzcyA9IDA7XG4gICAgdGhpcy5tX2ludk1hc3MgPSAwO1xuICAgIHRoaXMubV9JID0gMDtcbiAgICB0aGlzLm1faW52SSA9IDA7XG4gICAgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyLlNldFplcm8oKTtcblxuICAgIC8vIFN0YXRpYyBhbmQga2luZW1hdGljIGJvZGllcyBoYXZlIHplcm8gbWFzcy5cbiAgICBpZiAodGhpcy5tX3R5cGUgPT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keSB8fCB0aGlzLm1fdHlwZSA9PT0gYjJCb2R5VHlwZS5iMl9raW5lbWF0aWNCb2R5KSB7XG4gICAgICB0aGlzLm1fc3dlZXAuYzAuQ29weSh0aGlzLm1feGYucCk7XG4gICAgICB0aGlzLm1fc3dlZXAuYy5Db3B5KHRoaXMubV94Zi5wKTtcbiAgICAgIHRoaXMubV9zd2VlcC5hMCA9IHRoaXMubV9zd2VlcC5hO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5VHlwZS5iMl9keW5hbWljQm9keSk7XG5cbiAgICAvLyBBY2N1bXVsYXRlIG1hc3Mgb3ZlciBhbGwgZml4dHVyZXMuXG4gICAgY29uc3QgbG9jYWxDZW50ZXI6IGIyVmVjMiA9IGIyQm9keS5SZXNldE1hc3NEYXRhX3NfbG9jYWxDZW50ZXIuU2V0WmVybygpO1xuICAgIGZvciAobGV0IGY6IGIyRml4dHVyZSB8IG51bGwgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgaWYgKGYubV9kZW5zaXR5ID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtYXNzRGF0YTogYjJNYXNzRGF0YSA9IGYuR2V0TWFzc0RhdGEoYjJCb2R5LlJlc2V0TWFzc0RhdGFfc19tYXNzRGF0YSk7XG4gICAgICB0aGlzLm1fbWFzcyArPSBtYXNzRGF0YS5tYXNzO1xuICAgICAgbG9jYWxDZW50ZXIueCArPSBtYXNzRGF0YS5jZW50ZXIueCAqIG1hc3NEYXRhLm1hc3M7XG4gICAgICBsb2NhbENlbnRlci55ICs9IG1hc3NEYXRhLmNlbnRlci55ICogbWFzc0RhdGEubWFzcztcbiAgICAgIHRoaXMubV9JICs9IG1hc3NEYXRhLkk7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBjZW50ZXIgb2YgbWFzcy5cbiAgICBpZiAodGhpcy5tX21hc3MgPiAwKSB7XG4gICAgICB0aGlzLm1faW52TWFzcyA9IDEgLyB0aGlzLm1fbWFzcztcbiAgICAgIGxvY2FsQ2VudGVyLnggKj0gdGhpcy5tX2ludk1hc3M7XG4gICAgICBsb2NhbENlbnRlci55ICo9IHRoaXMubV9pbnZNYXNzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1fSSA+IDAgJiYgIXRoaXMubV9maXhlZFJvdGF0aW9uRmxhZykge1xuICAgICAgLy8gQ2VudGVyIHRoZSBpbmVydGlhIGFib3V0IHRoZSBjZW50ZXIgb2YgbWFzcy5cbiAgICAgIHRoaXMubV9JIC09IHRoaXMubV9tYXNzICogYjJWZWMyLkRvdFZWKGxvY2FsQ2VudGVyLCBsb2NhbENlbnRlcik7XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX0kgPiAwKTtcbiAgICAgIHRoaXMubV9pbnZJID0gMSAvIHRoaXMubV9JO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fSSA9IDA7XG4gICAgICB0aGlzLm1faW52SSA9IDA7XG4gICAgfVxuXG4gICAgLy8gTW92ZSBjZW50ZXIgb2YgbWFzcy5cbiAgICBjb25zdCBvbGRDZW50ZXI6IGIyVmVjMiA9IGIyQm9keS5SZXNldE1hc3NEYXRhX3Nfb2xkQ2VudGVyLkNvcHkodGhpcy5tX3N3ZWVwLmMpO1xuICAgIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlci5Db3B5KGxvY2FsQ2VudGVyKTtcbiAgICBiMlRyYW5zZm9ybS5NdWxYVih0aGlzLm1feGYsIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlciwgdGhpcy5tX3N3ZWVwLmMpO1xuICAgIHRoaXMubV9zd2VlcC5jMC5Db3B5KHRoaXMubV9zd2VlcC5jKTtcblxuICAgIC8vIFVwZGF0ZSBjZW50ZXIgb2YgbWFzcyB2ZWxvY2l0eS5cbiAgICBiMlZlYzIuQWRkVkNyb3NzU1YodGhpcy5tX2xpbmVhclZlbG9jaXR5LCB0aGlzLm1fYW5ndWxhclZlbG9jaXR5LCBiMlZlYzIuU3ViVlYodGhpcy5tX3N3ZWVwLmMsIG9sZENlbnRlciwgYjJWZWMyLnNfdDApLCB0aGlzLm1fbGluZWFyVmVsb2NpdHkpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgd29ybGQgY29vcmRpbmF0ZXMgb2YgYSBwb2ludCBnaXZlbiB0aGUgbG9jYWwgY29vcmRpbmF0ZXMuXG4gIC8vLyBAcGFyYW0gbG9jYWxQb2ludCBhIHBvaW50IG9uIHRoZSBib2R5IG1lYXN1cmVkIHJlbGF0aXZlIHRoZSB0aGUgYm9keSdzIG9yaWdpbi5cbiAgLy8vIEByZXR1cm4gdGhlIHNhbWUgcG9pbnQgZXhwcmVzc2VkIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICBwdWJsaWMgR2V0V29ybGRQb2ludDxUIGV4dGVuZHMgWFk+KGxvY2FsUG9pbnQ6IFhZLCBvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gYjJUcmFuc2Zvcm0uTXVsWFYodGhpcy5tX3hmLCBsb2NhbFBvaW50LCBvdXQpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgd29ybGQgY29vcmRpbmF0ZXMgb2YgYSB2ZWN0b3IgZ2l2ZW4gdGhlIGxvY2FsIGNvb3JkaW5hdGVzLlxuICAvLy8gQHBhcmFtIGxvY2FsVmVjdG9yIGEgdmVjdG9yIGZpeGVkIGluIHRoZSBib2R5LlxuICAvLy8gQHJldHVybiB0aGUgc2FtZSB2ZWN0b3IgZXhwcmVzc2VkIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICBwdWJsaWMgR2V0V29ybGRWZWN0b3I8VCBleHRlbmRzIFhZPihsb2NhbFZlY3RvcjogWFksIG91dDogVCk6IFQge1xuICAgIHJldHVybiBiMlJvdC5NdWxSVih0aGlzLm1feGYucSwgbG9jYWxWZWN0b3IsIG91dCk7XG4gIH1cblxuICAvLy8gR2V0cyBhIGxvY2FsIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBib2R5J3Mgb3JpZ2luIGdpdmVuIGEgd29ybGQgcG9pbnQuXG4gIC8vLyBAcGFyYW0gYSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgLy8vIEByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgbG9jYWwgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGJvZHkncyBvcmlnaW4uXG4gIHB1YmxpYyBHZXRMb2NhbFBvaW50PFQgZXh0ZW5kcyBYWT4od29ybGRQb2ludDogWFksIG91dDogVCk6IFQge1xuICAgIHJldHVybiBiMlRyYW5zZm9ybS5NdWxUWFYodGhpcy5tX3hmLCB3b3JsZFBvaW50LCBvdXQpO1xuICB9XG5cbiAgLy8vIEdldHMgYSBsb2NhbCB2ZWN0b3IgZ2l2ZW4gYSB3b3JsZCB2ZWN0b3IuXG4gIC8vLyBAcGFyYW0gYSB2ZWN0b3IgaW4gd29ybGQgY29vcmRpbmF0ZXMuXG4gIC8vLyBAcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIGxvY2FsIHZlY3Rvci5cbiAgcHVibGljIEdldExvY2FsVmVjdG9yPFQgZXh0ZW5kcyBYWT4od29ybGRWZWN0b3I6IFhZLCBvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gYjJSb3QuTXVsVFJWKHRoaXMubV94Zi5xLCB3b3JsZFZlY3Rvciwgb3V0KTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHdvcmxkIGxpbmVhciB2ZWxvY2l0eSBvZiBhIHdvcmxkIHBvaW50IGF0dGFjaGVkIHRvIHRoaXMgYm9keS5cbiAgLy8vIEBwYXJhbSBhIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAvLy8gQHJldHVybiB0aGUgd29ybGQgdmVsb2NpdHkgb2YgYSBwb2ludC5cbiAgcHVibGljIEdldExpbmVhclZlbG9jaXR5RnJvbVdvcmxkUG9pbnQ8VCBleHRlbmRzIFhZPih3b3JsZFBvaW50OiBYWSwgb3V0OiBUKTogVCB7XG4gICAgcmV0dXJuIGIyVmVjMi5BZGRWQ3Jvc3NTVih0aGlzLm1fbGluZWFyVmVsb2NpdHksIHRoaXMubV9hbmd1bGFyVmVsb2NpdHksIGIyVmVjMi5TdWJWVih3b3JsZFBvaW50LCB0aGlzLm1fc3dlZXAuYywgYjJWZWMyLnNfdDApLCBvdXQpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgd29ybGQgdmVsb2NpdHkgb2YgYSBsb2NhbCBwb2ludC5cbiAgLy8vIEBwYXJhbSBhIHBvaW50IGluIGxvY2FsIGNvb3JkaW5hdGVzLlxuICAvLy8gQHJldHVybiB0aGUgd29ybGQgdmVsb2NpdHkgb2YgYSBwb2ludC5cbiAgcHVibGljIEdldExpbmVhclZlbG9jaXR5RnJvbUxvY2FsUG9pbnQ8VCBleHRlbmRzIFhZPihsb2NhbFBvaW50OiBYWSwgb3V0OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludCh0aGlzLkdldFdvcmxkUG9pbnQobG9jYWxQb2ludCwgb3V0KSwgb3V0KTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGxpbmVhciBkYW1waW5nIG9mIHRoZSBib2R5LlxuICBwdWJsaWMgR2V0TGluZWFyRGFtcGluZygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbGluZWFyRGFtcGluZztcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIGxpbmVhciBkYW1waW5nIG9mIHRoZSBib2R5LlxuICBwdWJsaWMgU2V0TGluZWFyRGFtcGluZyhsaW5lYXJEYW1waW5nOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fbGluZWFyRGFtcGluZyA9IGxpbmVhckRhbXBpbmc7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBhbmd1bGFyIGRhbXBpbmcgb2YgdGhlIGJvZHkuXG4gIHB1YmxpYyBHZXRBbmd1bGFyRGFtcGluZygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fYW5ndWxhckRhbXBpbmc7XG4gIH1cblxuICAvLy8gU2V0IHRoZSBhbmd1bGFyIGRhbXBpbmcgb2YgdGhlIGJvZHkuXG4gIHB1YmxpYyBTZXRBbmd1bGFyRGFtcGluZyhhbmd1bGFyRGFtcGluZzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2FuZ3VsYXJEYW1waW5nID0gYW5ndWxhckRhbXBpbmc7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBncmF2aXR5IHNjYWxlIG9mIHRoZSBib2R5LlxuICBwdWJsaWMgR2V0R3Jhdml0eVNjYWxlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9ncmF2aXR5U2NhbGU7XG4gIH1cblxuICAvLy8gU2V0IHRoZSBncmF2aXR5IHNjYWxlIG9mIHRoZSBib2R5LlxuICBwdWJsaWMgU2V0R3Jhdml0eVNjYWxlKHNjYWxlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fZ3Jhdml0eVNjYWxlID0gc2NhbGU7XG4gIH1cblxuICAvLy8gU2V0IHRoZSB0eXBlIG9mIHRoaXMgYm9keS4gVGhpcyBtYXkgYWx0ZXIgdGhlIG1hc3MgYW5kIHZlbG9jaXR5LlxuICBwdWJsaWMgU2V0VHlwZSh0eXBlOiBiMkJvZHlUeXBlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBpZiAodGhpcy5tX3R5cGUgPT09IHR5cGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm1fdHlwZSA9IHR5cGU7XG5cbiAgICB0aGlzLlJlc2V0TWFzc0RhdGEoKTtcblxuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IDA7XG4gICAgICB0aGlzLm1fc3dlZXAuYTAgPSB0aGlzLm1fc3dlZXAuYTtcbiAgICAgIHRoaXMubV9zd2VlcC5jMC5Db3B5KHRoaXMubV9zd2VlcC5jKTtcbiAgICAgIHRoaXMubV9hd2FrZUZsYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuU3luY2hyb25pemVGaXh0dXJlcygpO1xuICAgIH1cblxuICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG5cbiAgICB0aGlzLm1fZm9yY2UuU2V0WmVybygpO1xuICAgIHRoaXMubV90b3JxdWUgPSAwO1xuXG4gICAgLy8gRGVsZXRlIHRoZSBhdHRhY2hlZCBjb250YWN0cy5cbiAgICBsZXQgY2U6IGIyQ29udGFjdEVkZ2UgfCBudWxsID0gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICAgIHdoaWxlIChjZSkge1xuICAgICAgY29uc3QgY2UwOiBiMkNvbnRhY3RFZGdlID0gY2U7XG4gICAgICBjZSA9IGNlLm5leHQ7XG4gICAgICB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5EZXN0cm95KGNlMC5jb250YWN0KTtcbiAgICB9XG4gICAgdGhpcy5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcblxuICAgIC8vIFRvdWNoIHRoZSBwcm94aWVzIHNvIHRoYXQgbmV3IGNvbnRhY3RzIHdpbGwgYmUgY3JlYXRlZCAod2hlbiBhcHByb3ByaWF0ZSlcbiAgICBmb3IgKGxldCBmOiBiMkZpeHR1cmUgfCBudWxsID0gdGhpcy5tX2ZpeHR1cmVMaXN0OyBmOyBmID0gZi5tX25leHQpIHtcbiAgICAgIGYuVG91Y2hQcm94aWVzKCk7XG4gICAgfVxuICB9XG5cbiAgLy8vIEdldCB0aGUgdHlwZSBvZiB0aGlzIGJvZHkuXG4gIHB1YmxpYyBHZXRUeXBlKCk6IGIyQm9keVR5cGUge1xuICAgIHJldHVybiB0aGlzLm1fdHlwZTtcbiAgfVxuXG4gIC8vLyBTaG91bGQgdGhpcyBib2R5IGJlIHRyZWF0ZWQgbGlrZSBhIGJ1bGxldCBmb3IgY29udGludW91cyBjb2xsaXNpb24gZGV0ZWN0aW9uP1xuICBwdWJsaWMgU2V0QnVsbGV0KGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fYnVsbGV0RmxhZyA9IGZsYWc7XG4gIH1cblxuICAvLy8gSXMgdGhpcyBib2R5IHRyZWF0ZWQgbGlrZSBhIGJ1bGxldCBmb3IgY29udGludW91cyBjb2xsaXNpb24gZGV0ZWN0aW9uP1xuICBwdWJsaWMgSXNCdWxsZXQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9idWxsZXRGbGFnO1xuICB9XG5cbiAgLy8vIFlvdSBjYW4gZGlzYWJsZSBzbGVlcGluZyBvbiB0aGlzIGJvZHkuIElmIHlvdSBkaXNhYmxlIHNsZWVwaW5nLCB0aGVcbiAgLy8vIGJvZHkgd2lsbCBiZSB3b2tlbi5cbiAgcHVibGljIFNldFNsZWVwaW5nQWxsb3dlZChmbGFnOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5tX2F1dG9TbGVlcEZsYWcgPSBmbGFnO1xuICAgIGlmICghZmxhZykge1xuICAgICAgdGhpcy5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvLy8gSXMgdGhpcyBib2R5IGFsbG93ZWQgdG8gc2xlZXBcbiAgcHVibGljIElzU2xlZXBpbmdBbGxvd2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1fYXV0b1NsZWVwRmxhZztcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIHNsZWVwIHN0YXRlIG9mIHRoZSBib2R5LiBBIHNsZWVwaW5nIGJvZHkgaGFzIHZlcnlcbiAgLy8vIGxvdyBDUFUgY29zdC5cbiAgLy8vIEBwYXJhbSBmbGFnIHNldCB0byB0cnVlIHRvIHdha2UgdGhlIGJvZHksIGZhbHNlIHRvIHB1dCBpdCB0byBzbGVlcC5cbiAgcHVibGljIFNldEF3YWtlKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3R5cGUgPT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZmxhZykge1xuICAgICAgdGhpcy5tX2F3YWtlRmxhZyA9IHRydWU7XG4gICAgICB0aGlzLm1fc2xlZXBUaW1lID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2F3YWtlRmxhZyA9IGZhbHNlO1xuICAgICAgdGhpcy5tX3NsZWVwVGltZSA9IDA7XG4gICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IDA7XG4gICAgICB0aGlzLm1fZm9yY2UuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX3RvcnF1ZSA9IDA7XG4gICAgfVxuICB9XG5cbiAgLy8vIEdldCB0aGUgc2xlZXBpbmcgc3RhdGUgb2YgdGhpcyBib2R5LlxuICAvLy8gQHJldHVybiB0cnVlIGlmIHRoZSBib2R5IGlzIHNsZWVwaW5nLlxuICBwdWJsaWMgSXNBd2FrZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2F3YWtlRmxhZztcbiAgfVxuXG4gIC8vLyBBbGxvdyBhIGJvZHkgdG8gYmUgZGlzYWJsZWQuIEEgZGlzYWJsZWQgYm9keSBpcyBub3Qgc2ltdWxhdGVkIGFuZCBjYW5ub3RcbiAgLy8vIGJlIGNvbGxpZGVkIHdpdGggb3Igd29rZW4gdXAuXG4gIC8vLyBJZiB5b3UgcGFzcyBhIGZsYWcgb2YgdHJ1ZSwgYWxsIGZpeHR1cmVzIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGJyb2FkLXBoYXNlLlxuICAvLy8gSWYgeW91IHBhc3MgYSBmbGFnIG9mIGZhbHNlLCBhbGwgZml4dHVyZXMgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlXG4gIC8vLyBicm9hZC1waGFzZSBhbmQgYWxsIGNvbnRhY3RzIHdpbGwgYmUgZGVzdHJveWVkLlxuICAvLy8gRml4dHVyZXMgYW5kIGpvaW50cyBhcmUgb3RoZXJ3aXNlIHVuYWZmZWN0ZWQuIFlvdSBtYXkgY29udGludWVcbiAgLy8vIHRvIGNyZWF0ZS9kZXN0cm95IGZpeHR1cmVzIGFuZCBqb2ludHMgb24gZGlzYWJsZWQgYm9kaWVzLlxuICAvLy8gRml4dHVyZXMgb24gYSBkaXNhYmxlZCBib2R5IGFyZSBpbXBsaWNpdGx5IGRpc2FibGVkIGFuZCB3aWxsXG4gIC8vLyBub3QgcGFydGljaXBhdGUgaW4gY29sbGlzaW9ucywgcmF5LWNhc3RzLCBvciBxdWVyaWVzLlxuICAvLy8gSm9pbnRzIGNvbm5lY3RlZCB0byBhIGRpc2FibGVkIGJvZHkgYXJlIGltcGxpY2l0bHkgZGlzYWJsZWQuXG4gIC8vLyBBbiBkaWFibGVkIGJvZHkgaXMgc3RpbGwgb3duZWQgYnkgYSBiMldvcmxkIG9iamVjdCBhbmQgcmVtYWluc1xuICAvLy8gaW4gdGhlIGJvZHkgbGlzdC5cbiAgcHVibGljIFNldEVuYWJsZWQoZmxhZzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fd29ybGQuSXNMb2NrZWQoKSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuXG4gICAgaWYgKGZsYWcgPT09IHRoaXMuSXNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm1fZW5hYmxlZEZsYWcgPSBmbGFnO1xuXG4gICAgaWYgKGZsYWcpIHtcbiAgICAgIC8vIENyZWF0ZSBhbGwgcHJveGllcy5cbiAgICAgIGZvciAobGV0IGY6IGIyRml4dHVyZSB8IG51bGwgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICBmLkNyZWF0ZVByb3hpZXMoKTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnRhY3RzIGFyZSBjcmVhdGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIG5leHRcbiAgICAgIHRoaXMubV93b3JsZC5tX25ld0NvbnRhY3RzID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVzdHJveSBhbGwgcHJveGllcy5cbiAgICAgIGZvciAobGV0IGY6IGIyRml4dHVyZSB8IG51bGwgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICBmLkRlc3Ryb3lQcm94aWVzKCk7XG4gICAgICB9XG4gICAgICAvLyBEZXN0cm95IHRoZSBhdHRhY2hlZCBjb250YWN0cy5cbiAgICAgIGxldCBjZTogYjJDb250YWN0RWRnZSB8IG51bGwgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgICB3aGlsZSAoY2UpIHtcbiAgICAgICAgY29uc3QgY2UwOiBiMkNvbnRhY3RFZGdlID0gY2U7XG4gICAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIuRGVzdHJveShjZTAuY29udGFjdCk7XG4gICAgICB9XG4gICAgICB0aGlzLm1fY29udGFjdExpc3QgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGFjdGl2ZSBzdGF0ZSBvZiB0aGUgYm9keS5cbiAgcHVibGljIElzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZWRGbGFnO1xuICB9XG5cbiAgLy8vIFNldCB0aGlzIGJvZHkgdG8gaGF2ZSBmaXhlZCByb3RhdGlvbi4gVGhpcyBjYXVzZXMgdGhlIG1hc3NcbiAgLy8vIHRvIGJlIHJlc2V0LlxuICBwdWJsaWMgU2V0Rml4ZWRSb3RhdGlvbihmbGFnOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9PT0gZmxhZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9IGZsYWc7XG5cbiAgICB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ID0gMDtcblxuICAgIHRoaXMuUmVzZXRNYXNzRGF0YSgpO1xuICB9XG5cbiAgLy8vIERvZXMgdGhpcyBib2R5IGhhdmUgZml4ZWQgcm90YXRpb24/XG4gIHB1YmxpYyBJc0ZpeGVkUm90YXRpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZztcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGxpc3Qgb2YgYWxsIGZpeHR1cmVzIGF0dGFjaGVkIHRvIHRoaXMgYm9keS5cbiAgcHVibGljIEdldEZpeHR1cmVMaXN0KCk6IGIyRml4dHVyZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBsaXN0IG9mIGFsbCBqb2ludHMgYXR0YWNoZWQgdG8gdGhpcyBib2R5LlxuICBwdWJsaWMgR2V0Sm9pbnRMaXN0KCk6IGIySm9pbnRFZGdlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBsaXN0IG9mIGFsbCBjb250YWN0cyBhdHRhY2hlZCB0byB0aGlzIGJvZHkuXG4gIC8vLyBAd2FybmluZyB0aGlzIGxpc3QgY2hhbmdlcyBkdXJpbmcgdGhlIHRpbWUgc3RlcCBhbmQgeW91IG1heVxuICAvLy8gbWlzcyBzb21lIGNvbGxpc2lvbnMgaWYgeW91IGRvbid0IHVzZSBiMkNvbnRhY3RMaXN0ZW5lci5cbiAgcHVibGljIEdldENvbnRhY3RMaXN0KCk6IGIyQ29udGFjdEVkZ2UgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICB9XG5cbiAgLy8vIEdldCB0aGUgbmV4dCBib2R5IGluIHRoZSB3b3JsZCdzIGJvZHkgbGlzdC5cbiAgcHVibGljIEdldE5leHQoKTogYjJCb2R5IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9uZXh0O1xuICB9XG5cbiAgLy8vIEdldCB0aGUgdXNlciBkYXRhIHBvaW50ZXIgdGhhdCB3YXMgcHJvdmlkZWQgaW4gdGhlIGJvZHkgZGVmaW5pdGlvbi5cbiAgcHVibGljIEdldFVzZXJEYXRhKCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMubV91c2VyRGF0YTtcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIHVzZXIgZGF0YS4gVXNlIHRoaXMgdG8gc3RvcmUgeW91ciBhcHBsaWNhdGlvbiBzcGVjaWZpYyBkYXRhLlxuICBwdWJsaWMgU2V0VXNlckRhdGEoZGF0YTogYW55KTogdm9pZCB7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHBhcmVudCB3b3JsZCBvZiB0aGlzIGJvZHkuXG4gIHB1YmxpYyBHZXRXb3JsZCgpOiBiMldvcmxkIHtcbiAgICByZXR1cm4gdGhpcy5tX3dvcmxkO1xuICB9XG5cbiAgLy8vIER1bXAgdGhpcyBib2R5IHRvIGEgZmlsZVxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCBib2R5SW5kZXg6IG51bWJlciA9IHRoaXMubV9pc2xhbmRJbmRleDtcblxuICAgIGxvZyhcIntcXG5cIik7XG4gICAgbG9nKFwiICBjb25zdCBiZDogYjJCb2R5RGVmID0gbmV3IGIyQm9keURlZigpO1xcblwiKTtcbiAgICBsZXQgdHlwZV9zdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgc3dpdGNoICh0aGlzLm1fdHlwZSkge1xuICAgICAgY2FzZSBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHk6XG4gICAgICAgIHR5cGVfc3RyID0gXCJiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHlcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIyQm9keVR5cGUuYjJfa2luZW1hdGljQm9keTpcbiAgICAgICAgdHlwZV9zdHIgPSBcImIyQm9keVR5cGUuYjJfa2luZW1hdGljQm9keVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgYjJCb2R5VHlwZS5iMl9keW5hbWljQm9keTpcbiAgICAgICAgdHlwZV9zdHIgPSBcImIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHlcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgbG9nKFwiICBiZC50eXBlID0gJXM7XFxuXCIsIHR5cGVfc3RyKTtcbiAgICBsb2coXCIgIGJkLnBvc2l0aW9uLlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1feGYucC54LCB0aGlzLm1feGYucC55KTtcbiAgICBsb2coXCIgIGJkLmFuZ2xlID0gJS4xNWY7XFxuXCIsIHRoaXMubV9zd2VlcC5hKTtcbiAgICBsb2coXCIgIGJkLmxpbmVhclZlbG9jaXR5LlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1fbGluZWFyVmVsb2NpdHkueCwgdGhpcy5tX2xpbmVhclZlbG9jaXR5LnkpO1xuICAgIGxvZyhcIiAgYmQuYW5ndWxhclZlbG9jaXR5ID0gJS4xNWY7XFxuXCIsIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkpO1xuICAgIGxvZyhcIiAgYmQubGluZWFyRGFtcGluZyA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbGluZWFyRGFtcGluZyk7XG4gICAgbG9nKFwiICBiZC5hbmd1bGFyRGFtcGluZyA9ICUuMTVmO1xcblwiLCB0aGlzLm1fYW5ndWxhckRhbXBpbmcpO1xuICAgIGxvZyhcIiAgYmQuYWxsb3dTbGVlcCA9ICVzO1xcblwiLCAodGhpcy5tX2F1dG9TbGVlcEZsYWcpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGJkLmF3YWtlID0gJXM7XFxuXCIsICh0aGlzLm1fYXdha2VGbGFnKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBiZC5maXhlZFJvdGF0aW9uID0gJXM7XFxuXCIsICh0aGlzLm1fZml4ZWRSb3RhdGlvbkZsYWcpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGJkLmJ1bGxldCA9ICVzO1xcblwiLCAodGhpcy5tX2J1bGxldEZsYWcpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGJkLmFjdGl2ZSA9ICVzO1xcblwiLCAodGhpcy5tX2VuYWJsZWRGbGFnKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBiZC5ncmF2aXR5U2NhbGUgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX2dyYXZpdHlTY2FsZSk7XG4gICAgbG9nKFwiXFxuXCIpO1xuICAgIGxvZyhcIiAgYm9kaWVzWyVkXSA9IHRoaXMubV93b3JsZC5DcmVhdGVCb2R5KGJkKTtcXG5cIiwgdGhpcy5tX2lzbGFuZEluZGV4KTtcbiAgICBsb2coXCJcXG5cIik7XG4gICAgZm9yIChsZXQgZjogYjJGaXh0dXJlIHwgbnVsbCA9IHRoaXMubV9maXh0dXJlTGlzdDsgZjsgZiA9IGYubV9uZXh0KSB7XG4gICAgICBsb2coXCIgIHtcXG5cIik7XG4gICAgICBmLkR1bXAobG9nLCBib2R5SW5kZXgpO1xuICAgICAgbG9nKFwiICB9XFxuXCIpO1xuICAgIH1cbiAgICBsb2coXCJ9XFxuXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU3luY2hyb25pemVGaXh0dXJlc19zX3hmMTogYjJUcmFuc2Zvcm0gPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgcHVibGljIFN5bmNocm9uaXplRml4dHVyZXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV9hd2FrZUZsYWcpIHtcbiAgICAgIGNvbnN0IHhmMTogYjJUcmFuc2Zvcm0gPSBiMkJvZHkuU3luY2hyb25pemVGaXh0dXJlc19zX3hmMTtcbiAgICAgIHhmMS5xLlNldEFuZ2xlKHRoaXMubV9zd2VlcC5hMCk7XG4gICAgICBiMlJvdC5NdWxSVih4ZjEucSwgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyLCB4ZjEucCk7XG4gICAgICBiMlZlYzIuU3ViVlYodGhpcy5tX3N3ZWVwLmMwLCB4ZjEucCwgeGYxLnApO1xuXG4gICAgICBmb3IgKGxldCBmOiBiMkZpeHR1cmUgfCBudWxsID0gdGhpcy5tX2ZpeHR1cmVMaXN0OyBmOyBmID0gZi5tX25leHQpIHtcbiAgICAgICAgZi5TeW5jaHJvbml6ZVByb3hpZXMoeGYxLCB0aGlzLm1feGYpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBmOiBiMkZpeHR1cmUgfCBudWxsID0gdGhpcy5tX2ZpeHR1cmVMaXN0OyBmOyBmID0gZi5tX25leHQpIHtcbiAgICAgICAgZi5TeW5jaHJvbml6ZVByb3hpZXModGhpcy5tX3hmLCB0aGlzLm1feGYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBTeW5jaHJvbml6ZVRyYW5zZm9ybSgpOiB2b2lkIHtcbiAgICB0aGlzLm1feGYucS5TZXRBbmdsZSh0aGlzLm1fc3dlZXAuYSk7XG4gICAgYjJSb3QuTXVsUlYodGhpcy5tX3hmLnEsIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlciwgdGhpcy5tX3hmLnApO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fc3dlZXAuYywgdGhpcy5tX3hmLnAsIHRoaXMubV94Zi5wKTtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgdXNlZCB0byBwcmV2ZW50IGNvbm5lY3RlZCBib2RpZXMgZnJvbSBjb2xsaWRpbmcuXG4gIC8vIEl0IG1heSBsaWUsIGRlcGVuZGluZyBvbiB0aGUgY29sbGlkZUNvbm5lY3RlZCBmbGFnLlxuICBwdWJsaWMgU2hvdWxkQ29sbGlkZShvdGhlcjogYjJCb2R5KTogYm9vbGVhbiB7XG4gICAgLy8gQXQgbGVhc3Qgb25lIGJvZHkgc2hvdWxkIGJlIGR5bmFtaWMgb3Iga2luZW1hdGljLlxuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5ICYmIG90aGVyLm1fdHlwZSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLlNob3VsZENvbGxpZGVDb25uZWN0ZWQob3RoZXIpO1xuICB9XG5cbiAgcHVibGljIFNob3VsZENvbGxpZGVDb25uZWN0ZWQob3RoZXI6IGIyQm9keSk6IGJvb2xlYW4ge1xuICAgIC8vIERvZXMgYSBqb2ludCBwcmV2ZW50IGNvbGxpc2lvbj9cbiAgICBmb3IgKGxldCBqbjogYjJKb2ludEVkZ2UgfCBudWxsID0gdGhpcy5tX2pvaW50TGlzdDsgam47IGpuID0gam4ubmV4dCkge1xuICAgICAgaWYgKGpuLm90aGVyID09PSBvdGhlcikge1xuICAgICAgICBpZiAoIWpuLmpvaW50Lm1fY29sbGlkZUNvbm5lY3RlZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIEFkdmFuY2UoYWxwaGE6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEFkdmFuY2UgdG8gdGhlIG5ldyBzYWZlIHRpbWUuIFRoaXMgZG9lc24ndCBzeW5jIHRoZSBicm9hZC1waGFzZS5cbiAgICB0aGlzLm1fc3dlZXAuQWR2YW5jZShhbHBoYSk7XG4gICAgdGhpcy5tX3N3ZWVwLmMuQ29weSh0aGlzLm1fc3dlZXAuYzApO1xuICAgIHRoaXMubV9zd2VlcC5hID0gdGhpcy5tX3N3ZWVwLmEwO1xuICAgIHRoaXMubV94Zi5xLlNldEFuZ2xlKHRoaXMubV9zd2VlcC5hKTtcbiAgICBiMlJvdC5NdWxSVih0aGlzLm1feGYucSwgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyLCB0aGlzLm1feGYucCk7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9zd2VlcC5jLCB0aGlzLm1feGYucCwgdGhpcy5tX3hmLnApO1xuICB9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9DT05UUk9MTEVSXG4gIHB1YmxpYyBHZXRDb250cm9sbGVyTGlzdCgpOiBiMkNvbnRyb2xsZXJFZGdlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9jb250cm9sbGVyTGlzdDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRDb250cm9sbGVyQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRyb2xsZXJDb3VudDtcbiAgfVxuICAvLyAjZW5kaWZcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBb0JBO0FBQ0E7QUFDQTtBQUdBO0FBVUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUE0REE7QUFBQTtBQUdBO0FBSUE7QUFHQTtBQUdBO0FBR0E7QUFLQTtBQUtBO0FBSUE7QUFHQTtBQUdBO0FBTUE7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFwREE7QUF1REE7QUF1REE7QUF0REE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFVQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFuMEJBO0FBaVdBO0FBc0NBO0FBQ0E7QUFDQTtBQTBYQTtBQWtFQTtBQUFBO0FBNytCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_body.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_chain_circle_contact.ts":
/*!*******************************************************!*\
  !*** ./src/box2d/dynamics/b2_chain_circle_contact.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ChainAndCircleContact = void 0;\nvar b2_collide_edge_1 = __webpack_require__(/*! ../collision/b2_collide_edge */ \"./src/box2d/collision/b2_collide_edge.ts\");\nvar b2_edge_shape_1 = __webpack_require__(/*! ../collision/b2_edge_shape */ \"./src/box2d/collision/b2_edge_shape.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2ChainAndCircleContact = (function (_super) {\n    __extends(b2ChainAndCircleContact, _super);\n    function b2ChainAndCircleContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2ChainAndCircleContact.Create = function () {\n        return new b2ChainAndCircleContact();\n    };\n    b2ChainAndCircleContact.Destroy = function (contact) {\n    };\n    b2ChainAndCircleContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        var edge = b2ChainAndCircleContact.Evaluate_s_edge;\n        this.GetShapeA().GetChildEdge(edge, this.m_indexA);\n        b2_collide_edge_1.b2CollideEdgeAndCircle(manifold, edge, xfA, this.GetShapeB(), xfB);\n    };\n    b2ChainAndCircleContact.Evaluate_s_edge = new b2_edge_shape_1.b2EdgeShape();\n    return b2ChainAndCircleContact;\n}(b2_contact_1.b2Contact));\nexports.b2ChainAndCircleContact = b2ChainAndCircleContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY2hhaW5fY2lyY2xlX2NvbnRhY3QudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY2hhaW5fY2lyY2xlX2NvbnRhY3QudHM/YTE1YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpZGVfZWRnZVwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMkNoYWluU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NoYWluX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNpcmNsZVNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jaXJjbGVfc2hhcGVcIjtcbmltcG9ydCB7IGIyRWRnZVNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9lZGdlX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3QgfSBmcm9tIFwiLi9iMl9jb250YWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBiMkNoYWluQW5kQ2lyY2xlQ29udGFjdCBleHRlbmRzIGIyQ29udGFjdDxiMkNoYWluU2hhcGUsIGIyQ2lyY2xlU2hhcGU+IHtcbiAgcHVibGljIHN0YXRpYyBDcmVhdGUoKTogYjJDb250YWN0IHtcbiAgICByZXR1cm4gbmV3IGIyQ2hhaW5BbmRDaXJjbGVDb250YWN0KCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIERlc3Ryb3koY29udGFjdDogYjJDb250YWN0KTogdm9pZCB7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBFdmFsdWF0ZV9zX2VkZ2UgPSBuZXcgYjJFZGdlU2hhcGUoKTtcbiAgcHVibGljIEV2YWx1YXRlKG1hbmlmb2xkOiBiMk1hbmlmb2xkLCB4ZkE6IGIyVHJhbnNmb3JtLCB4ZkI6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gICAgY29uc3QgZWRnZTogYjJFZGdlU2hhcGUgPSBiMkNoYWluQW5kQ2lyY2xlQ29udGFjdC5FdmFsdWF0ZV9zX2VkZ2U7XG4gICAgdGhpcy5HZXRTaGFwZUEoKS5HZXRDaGlsZEVkZ2UoZWRnZSwgdGhpcy5tX2luZGV4QSk7XG4gICAgYjJDb2xsaWRlRWRnZUFuZENpcmNsZShtYW5pZm9sZCwgZWRnZSwgeGZBLCB0aGlzLkdldFNoYXBlQigpLCB4ZkIpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFJQTtBQUNBO0FBRUE7QUFBQTtBQUFBOztBQWNBO0FBYkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU1BO0FBQUE7QUFkQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_chain_circle_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_chain_polygon_contact.ts":
/*!********************************************************!*\
  !*** ./src/box2d/dynamics/b2_chain_polygon_contact.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ChainAndPolygonContact = void 0;\nvar b2_collide_edge_1 = __webpack_require__(/*! ../collision/b2_collide_edge */ \"./src/box2d/collision/b2_collide_edge.ts\");\nvar b2_edge_shape_1 = __webpack_require__(/*! ../collision/b2_edge_shape */ \"./src/box2d/collision/b2_edge_shape.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2ChainAndPolygonContact = (function (_super) {\n    __extends(b2ChainAndPolygonContact, _super);\n    function b2ChainAndPolygonContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2ChainAndPolygonContact.Create = function () {\n        return new b2ChainAndPolygonContact();\n    };\n    b2ChainAndPolygonContact.Destroy = function (contact) {\n    };\n    b2ChainAndPolygonContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        var edge = b2ChainAndPolygonContact.Evaluate_s_edge;\n        this.GetShapeA().GetChildEdge(edge, this.m_indexA);\n        b2_collide_edge_1.b2CollideEdgeAndPolygon(manifold, edge, xfA, this.GetShapeB(), xfB);\n    };\n    b2ChainAndPolygonContact.Evaluate_s_edge = new b2_edge_shape_1.b2EdgeShape();\n    return b2ChainAndPolygonContact;\n}(b2_contact_1.b2Contact));\nexports.b2ChainAndPolygonContact = b2ChainAndPolygonContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY2hhaW5fcG9seWdvbl9jb250YWN0LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX2NoYWluX3BvbHlnb25fY29udGFjdC50cz80MzBjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5pbXBvcnQgeyBiMlRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb24gfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpZGVfZWRnZVwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMkNoYWluU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NoYWluX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkVkZ2VTaGFwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfZWRnZV9zaGFwZVwiO1xuaW1wb3J0IHsgYjJQb2x5Z29uU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3BvbHlnb25fc2hhcGVcIjtcbmltcG9ydCB7IGIyQ29udGFjdCB9IGZyb20gXCIuL2IyX2NvbnRhY3RcIjtcblxuZXhwb3J0IGNsYXNzIGIyQ2hhaW5BbmRQb2x5Z29uQ29udGFjdCBleHRlbmRzIGIyQ29udGFjdDxiMkNoYWluU2hhcGUsIGIyUG9seWdvblNoYXBlPiB7XG4gIHB1YmxpYyBzdGF0aWMgQ3JlYXRlKCk6IGIyQ29udGFjdCB7XG4gICAgcmV0dXJuIG5ldyBiMkNoYWluQW5kUG9seWdvbkNvbnRhY3QoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgRGVzdHJveShjb250YWN0OiBiMkNvbnRhY3QpOiB2b2lkIHtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIEV2YWx1YXRlX3NfZWRnZSA9IG5ldyBiMkVkZ2VTaGFwZSgpO1xuICBwdWJsaWMgRXZhbHVhdGUobWFuaWZvbGQ6IGIyTWFuaWZvbGQsIHhmQTogYjJUcmFuc2Zvcm0sIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICBjb25zdCBlZGdlOiBiMkVkZ2VTaGFwZSA9IGIyQ2hhaW5BbmRQb2x5Z29uQ29udGFjdC5FdmFsdWF0ZV9zX2VkZ2U7XG4gICAgdGhpcy5HZXRTaGFwZUEoKS5HZXRDaGlsZEVkZ2UoZWRnZSwgdGhpcy5tX2luZGV4QSk7XG4gICAgYjJDb2xsaWRlRWRnZUFuZFBvbHlnb24obWFuaWZvbGQsIGVkZ2UsIHhmQSwgdGhpcy5HZXRTaGFwZUIoKSwgeGZCKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBR0E7QUFFQTtBQUVBO0FBQUE7QUFBQTs7QUFjQTtBQWJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFNQTtBQUFBO0FBZEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_chain_polygon_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_circle_contact.ts":
/*!*************************************************!*\
  !*** ./src/box2d/dynamics/b2_circle_contact.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2CircleContact = void 0;\nvar b2_collide_circle_1 = __webpack_require__(/*! ../collision/b2_collide_circle */ \"./src/box2d/collision/b2_collide_circle.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2CircleContact = (function (_super) {\n    __extends(b2CircleContact, _super);\n    function b2CircleContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2CircleContact.Create = function () {\n        return new b2CircleContact();\n    };\n    b2CircleContact.Destroy = function (contact) {\n    };\n    b2CircleContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        b2_collide_circle_1.b2CollideCircles(manifold, this.GetShapeA(), xfA, this.GetShapeB(), xfB);\n    };\n    return b2CircleContact;\n}(b2_contact_1.b2Contact));\nexports.b2CircleContact = b2CircleContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY2lyY2xlX2NvbnRhY3QudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY2lyY2xlX2NvbnRhY3QudHM/OTI3MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQ29sbGlkZUNpcmNsZXMgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpZGVfY2lyY2xlXCI7XG5pbXBvcnQgeyBiMk1hbmlmb2xkIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaXNpb25cIjtcbmltcG9ydCB7IGIyQ2lyY2xlU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NpcmNsZV9zaGFwZVwiO1xuaW1wb3J0IHsgYjJDb250YWN0IH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuXG5leHBvcnQgY2xhc3MgYjJDaXJjbGVDb250YWN0IGV4dGVuZHMgYjJDb250YWN0PGIyQ2lyY2xlU2hhcGUsIGIyQ2lyY2xlU2hhcGU+IHtcbiAgcHVibGljIHN0YXRpYyBDcmVhdGUoKTogYjJDb250YWN0IHtcbiAgICByZXR1cm4gbmV3IGIyQ2lyY2xlQ29udGFjdCgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBEZXN0cm95KGNvbnRhY3Q6IGIyQ29udGFjdCk6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIEV2YWx1YXRlKG1hbmlmb2xkOiBiMk1hbmlmb2xkLCB4ZkE6IGIyVHJhbnNmb3JtLCB4ZkI6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gICAgYjJDb2xsaWRlQ2lyY2xlcyhtYW5pZm9sZCwgdGhpcy5HZXRTaGFwZUEoKSwgeGZBLCB0aGlzLkdldFNoYXBlQigpLCB4ZkIpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFHQTtBQUVBO0FBQUE7QUFBQTs7QUFXQTtBQVZBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBWEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_circle_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_contact.ts":
/*!******************************************!*\
  !*** ./src/box2d/dynamics/b2_contact.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Contact = exports.b2ContactEdge = exports.b2MixRestitutionThreshold = exports.b2MixRestitution = exports.b2MixFriction = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_collision_2 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_time_of_impact_1 = __webpack_require__(/*! ../collision/b2_time_of_impact */ \"./src/box2d/collision/b2_time_of_impact.ts\");\nfunction b2MixFriction(friction1, friction2) {\n    return b2_math_1.b2Sqrt(friction1 * friction2);\n}\nexports.b2MixFriction = b2MixFriction;\nfunction b2MixRestitution(restitution1, restitution2) {\n    return restitution1 > restitution2 ? restitution1 : restitution2;\n}\nexports.b2MixRestitution = b2MixRestitution;\nfunction b2MixRestitutionThreshold(threshold1, threshold2) {\n    return threshold1 < threshold2 ? threshold1 : threshold2;\n}\nexports.b2MixRestitutionThreshold = b2MixRestitutionThreshold;\nvar b2ContactEdge = (function () {\n    function b2ContactEdge(contact) {\n        this._other = null;\n        this.prev = null;\n        this.next = null;\n        this.contact = contact;\n    }\n    Object.defineProperty(b2ContactEdge.prototype, \"other\", {\n        get: function () {\n            if (this._other === null) {\n                throw new Error();\n            }\n            return this._other;\n        },\n        set: function (value) {\n            if (this._other !== null) {\n                throw new Error();\n            }\n            this._other = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    b2ContactEdge.prototype.Reset = function () {\n        this._other = null;\n        this.prev = null;\n        this.next = null;\n    };\n    return b2ContactEdge;\n}());\nexports.b2ContactEdge = b2ContactEdge;\nvar b2Contact = (function () {\n    function b2Contact() {\n        this.m_islandFlag = false;\n        this.m_touchingFlag = false;\n        this.m_enabledFlag = false;\n        this.m_filterFlag = false;\n        this.m_bulletHitFlag = false;\n        this.m_toiFlag = false;\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_nodeA = new b2ContactEdge(this);\n        this.m_nodeB = new b2ContactEdge(this);\n        this.m_indexA = 0;\n        this.m_indexB = 0;\n        this.m_manifold = new b2_collision_1.b2Manifold();\n        this.m_toiCount = 0;\n        this.m_toi = 0;\n        this.m_friction = 0;\n        this.m_restitution = 0;\n        this.m_restitutionThreshold = 0;\n        this.m_tangentSpeed = 0;\n        this.m_oldManifold = new b2_collision_1.b2Manifold();\n    }\n    b2Contact.prototype.GetManifold = function () {\n        return this.m_manifold;\n    };\n    b2Contact.prototype.GetWorldManifold = function (worldManifold) {\n        var bodyA = this.m_fixtureA.GetBody();\n        var bodyB = this.m_fixtureB.GetBody();\n        var shapeA = this.GetShapeA();\n        var shapeB = this.GetShapeB();\n        worldManifold.Initialize(this.m_manifold, bodyA.GetTransform(), shapeA.m_radius, bodyB.GetTransform(), shapeB.m_radius);\n    };\n    b2Contact.prototype.IsTouching = function () {\n        return this.m_touchingFlag;\n    };\n    b2Contact.prototype.SetEnabled = function (flag) {\n        this.m_enabledFlag = flag;\n    };\n    b2Contact.prototype.IsEnabled = function () {\n        return this.m_enabledFlag;\n    };\n    b2Contact.prototype.GetNext = function () {\n        return this.m_next;\n    };\n    b2Contact.prototype.GetFixtureA = function () {\n        return this.m_fixtureA;\n    };\n    b2Contact.prototype.GetChildIndexA = function () {\n        return this.m_indexA;\n    };\n    b2Contact.prototype.GetShapeA = function () {\n        return this.m_fixtureA.GetShape();\n    };\n    b2Contact.prototype.GetFixtureB = function () {\n        return this.m_fixtureB;\n    };\n    b2Contact.prototype.GetChildIndexB = function () {\n        return this.m_indexB;\n    };\n    b2Contact.prototype.GetShapeB = function () {\n        return this.m_fixtureB.GetShape();\n    };\n    b2Contact.prototype.FlagForFiltering = function () {\n        this.m_filterFlag = true;\n    };\n    b2Contact.prototype.SetFriction = function (friction) {\n        this.m_friction = friction;\n    };\n    b2Contact.prototype.GetFriction = function () {\n        return this.m_friction;\n    };\n    b2Contact.prototype.ResetFriction = function () {\n        this.m_friction = b2MixFriction(this.m_fixtureA.m_friction, this.m_fixtureB.m_friction);\n    };\n    b2Contact.prototype.SetRestitution = function (restitution) {\n        this.m_restitution = restitution;\n    };\n    b2Contact.prototype.GetRestitution = function () {\n        return this.m_restitution;\n    };\n    b2Contact.prototype.ResetRestitution = function () {\n        this.m_restitution = b2MixRestitution(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution);\n    };\n    b2Contact.prototype.SetRestitutionThreshold = function (threshold) {\n        this.m_restitutionThreshold = threshold;\n    };\n    b2Contact.prototype.GetRestitutionThreshold = function () {\n        return this.m_restitutionThreshold;\n    };\n    b2Contact.prototype.ResetRestitutionThreshold = function () {\n        this.m_restitutionThreshold = b2MixRestitutionThreshold(this.m_fixtureA.m_restitutionThreshold, this.m_fixtureB.m_restitutionThreshold);\n    };\n    b2Contact.prototype.SetTangentSpeed = function (speed) {\n        this.m_tangentSpeed = speed;\n    };\n    b2Contact.prototype.GetTangentSpeed = function () {\n        return this.m_tangentSpeed;\n    };\n    b2Contact.prototype.Reset = function (fixtureA, indexA, fixtureB, indexB) {\n        this.m_islandFlag = false;\n        this.m_touchingFlag = false;\n        this.m_enabledFlag = true;\n        this.m_filterFlag = false;\n        this.m_bulletHitFlag = false;\n        this.m_toiFlag = false;\n        this.m_fixtureA = fixtureA;\n        this.m_fixtureB = fixtureB;\n        this.m_indexA = indexA;\n        this.m_indexB = indexB;\n        this.m_manifold.pointCount = 0;\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_nodeA.Reset();\n        this.m_nodeB.Reset();\n        this.m_toiCount = 0;\n        this.m_friction = b2MixFriction(this.m_fixtureA.m_friction, this.m_fixtureB.m_friction);\n        this.m_restitution = b2MixRestitution(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution);\n        this.m_restitutionThreshold = b2MixRestitutionThreshold(this.m_fixtureA.m_restitutionThreshold, this.m_fixtureB.m_restitutionThreshold);\n    };\n    b2Contact.prototype.Update = function (listener) {\n        var tManifold = this.m_oldManifold;\n        this.m_oldManifold = this.m_manifold;\n        this.m_manifold = tManifold;\n        this.m_enabledFlag = true;\n        var touching = false;\n        var wasTouching = this.m_touchingFlag;\n        var sensorA = this.m_fixtureA.IsSensor();\n        var sensorB = this.m_fixtureB.IsSensor();\n        var sensor = sensorA || sensorB;\n        var bodyA = this.m_fixtureA.GetBody();\n        var bodyB = this.m_fixtureB.GetBody();\n        var xfA = bodyA.GetTransform();\n        var xfB = bodyB.GetTransform();\n        if (sensor) {\n            var shapeA = this.GetShapeA();\n            var shapeB = this.GetShapeB();\n            touching = b2_collision_2.b2TestOverlapShape(shapeA, this.m_indexA, shapeB, this.m_indexB, xfA, xfB);\n            this.m_manifold.pointCount = 0;\n        }\n        else {\n            this.Evaluate(this.m_manifold, xfA, xfB);\n            touching = this.m_manifold.pointCount > 0;\n            for (var i = 0; i < this.m_manifold.pointCount; ++i) {\n                var mp2 = this.m_manifold.points[i];\n                mp2.normalImpulse = 0;\n                mp2.tangentImpulse = 0;\n                var id2 = mp2.id;\n                for (var j = 0; j < this.m_oldManifold.pointCount; ++j) {\n                    var mp1 = this.m_oldManifold.points[j];\n                    if (mp1.id.key === id2.key) {\n                        mp2.normalImpulse = mp1.normalImpulse;\n                        mp2.tangentImpulse = mp1.tangentImpulse;\n                        break;\n                    }\n                }\n            }\n            if (touching !== wasTouching) {\n                bodyA.SetAwake(true);\n                bodyB.SetAwake(true);\n            }\n        }\n        this.m_touchingFlag = touching;\n        if (!wasTouching && touching && listener) {\n            listener.BeginContact(this);\n        }\n        if (wasTouching && !touching && listener) {\n            listener.EndContact(this);\n        }\n        if (!sensor && touching && listener) {\n            listener.PreSolve(this, this.m_oldManifold);\n        }\n    };\n    b2Contact.prototype.ComputeTOI = function (sweepA, sweepB) {\n        var input = b2Contact.ComputeTOI_s_input;\n        input.proxyA.SetShape(this.GetShapeA(), this.m_indexA);\n        input.proxyB.SetShape(this.GetShapeB(), this.m_indexB);\n        input.sweepA.Copy(sweepA);\n        input.sweepB.Copy(sweepB);\n        input.tMax = b2_settings_1.b2_linearSlop;\n        var output = b2Contact.ComputeTOI_s_output;\n        b2_time_of_impact_1.b2TimeOfImpact(output, input);\n        return output.t;\n    };\n    b2Contact.ComputeTOI_s_input = new b2_time_of_impact_1.b2TOIInput();\n    b2Contact.ComputeTOI_s_output = new b2_time_of_impact_1.b2TOIOutput();\n    return b2Contact;\n}());\nexports.b2Contact = b2Contact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY29udGFjdC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9jb250YWN0LnRzPzgyN2YiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMDkgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbmltcG9ydCB7IGIyX2xpbmVhclNsb3AgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlNxcnQsIGIyVHJhbnNmb3JtLCBiMlN3ZWVwIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMk1hbmlmb2xkLCBiMldvcmxkTWFuaWZvbGQsIGIyTWFuaWZvbGRQb2ludCwgYjJDb250YWN0SUQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJUZXN0T3ZlcmxhcFNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaXNpb25cIjtcbmltcG9ydCB7IGIyVGltZU9mSW1wYWN0LCBiMlRPSUlucHV0LCBiMlRPSU91dHB1dCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfdGltZV9vZl9pbXBhY3RcIjtcbmltcG9ydCB7IGIyQm9keSB9IGZyb20gXCIuL2IyX2JvZHlcIjtcbmltcG9ydCB7IGIyRml4dHVyZSB9IGZyb20gXCIuL2IyX2ZpeHR1cmVcIjtcbmltcG9ydCB7IGIyU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3RMaXN0ZW5lciB9IGZyb20gXCIuL2IyX3dvcmxkX2NhbGxiYWNrc1wiO1xuXG4vLy8gRnJpY3Rpb24gbWl4aW5nIGxhdy4gVGhlIGlkZWEgaXMgdG8gYWxsb3cgZWl0aGVyIGZpeHR1cmUgdG8gZHJpdmUgdGhlIGZyaWN0aW9uIHRvIHplcm8uXG4vLy8gRm9yIGV4YW1wbGUsIGFueXRoaW5nIHNsaWRlcyBvbiBpY2UuXG5leHBvcnQgZnVuY3Rpb24gYjJNaXhGcmljdGlvbihmcmljdGlvbjE6IG51bWJlciwgZnJpY3Rpb24yOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gYjJTcXJ0KGZyaWN0aW9uMSAqIGZyaWN0aW9uMik7XG59XG5cbi8vLyBSZXN0aXR1dGlvbiBtaXhpbmcgbGF3LiBUaGUgaWRlYSBpcyBhbGxvdyBmb3IgYW55dGhpbmcgdG8gYm91bmNlIG9mZiBhbiBpbmVsYXN0aWMgc3VyZmFjZS5cbi8vLyBGb3IgZXhhbXBsZSwgYSBzdXBlcmJhbGwgYm91bmNlcyBvbiBhbnl0aGluZy5cbmV4cG9ydCBmdW5jdGlvbiBiMk1peFJlc3RpdHV0aW9uKHJlc3RpdHV0aW9uMTogbnVtYmVyLCByZXN0aXR1dGlvbjI6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiByZXN0aXR1dGlvbjEgPiByZXN0aXR1dGlvbjIgPyByZXN0aXR1dGlvbjEgOiByZXN0aXR1dGlvbjI7XG59XG5cbi8vLyBSZXN0aXR1dGlvbiBtaXhpbmcgbGF3LiBUaGlzIHBpY2tzIHRoZSBsb3dlc3QgdmFsdWUuXG5leHBvcnQgZnVuY3Rpb24gYjJNaXhSZXN0aXR1dGlvblRocmVzaG9sZCh0aHJlc2hvbGQxOiBudW1iZXIsIHRocmVzaG9sZDI6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiB0aHJlc2hvbGQxIDwgdGhyZXNob2xkMiA/IHRocmVzaG9sZDEgOiB0aHJlc2hvbGQyO1xufVxuXG5leHBvcnQgY2xhc3MgYjJDb250YWN0RWRnZSB7XG4gIHByaXZhdGUgX290aGVyOiBiMkJvZHkgfCBudWxsID0gbnVsbDsgLy8vPCBwcm92aWRlcyBxdWljayBhY2Nlc3MgdG8gdGhlIG90aGVyIGJvZHkgYXR0YWNoZWQuXG4gIHB1YmxpYyBnZXQgb3RoZXIoKTogYjJCb2R5IHtcbiAgICBpZiAodGhpcy5fb3RoZXIgPT09IG51bGwpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICByZXR1cm4gdGhpcy5fb3RoZXI7XG4gIH1cbiAgcHVibGljIHNldCBvdGhlcih2YWx1ZTogYjJCb2R5KSB7XG4gICAgaWYgKHRoaXMuX290aGVyICE9PSBudWxsKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgdGhpcy5fb3RoZXIgPSB2YWx1ZTtcbiAgfVxuICBwdWJsaWMgcmVhZG9ubHkgY29udGFjdDogYjJDb250YWN0OyAvLy88IHRoZSBjb250YWN0XG4gIHB1YmxpYyBwcmV2OiBiMkNvbnRhY3RFZGdlIHwgbnVsbCA9IG51bGw7IC8vLzwgdGhlIHByZXZpb3VzIGNvbnRhY3QgZWRnZSBpbiB0aGUgYm9keSdzIGNvbnRhY3QgbGlzdFxuICBwdWJsaWMgbmV4dDogYjJDb250YWN0RWRnZSB8IG51bGwgPSBudWxsOyAvLy88IHRoZSBuZXh0IGNvbnRhY3QgZWRnZSBpbiB0aGUgYm9keSdzIGNvbnRhY3QgbGlzdFxuICBjb25zdHJ1Y3Rvcihjb250YWN0OiBiMkNvbnRhY3QpIHtcbiAgICB0aGlzLmNvbnRhY3QgPSBjb250YWN0O1xuICB9XG4gIHB1YmxpYyBSZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9vdGhlciA9IG51bGw7XG4gICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm5leHQgPSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBiMkNvbnRhY3Q8QSBleHRlbmRzIGIyU2hhcGUgPSBiMlNoYXBlLCBCIGV4dGVuZHMgYjJTaGFwZSA9IGIyU2hhcGU+IHtcbiAgcHVibGljIG1faXNsYW5kRmxhZzogYm9vbGVhbiA9IGZhbHNlOyAvLy8gVXNlZCB3aGVuIGNyYXdsaW5nIGNvbnRhY3QgZ3JhcGggd2hlbiBmb3JtaW5nIGlzbGFuZHMuXG4gIHB1YmxpYyBtX3RvdWNoaW5nRmxhZzogYm9vbGVhbiA9IGZhbHNlOyAvLy8gU2V0IHdoZW4gdGhlIHNoYXBlcyBhcmUgdG91Y2hpbmcuXG4gIHB1YmxpYyBtX2VuYWJsZWRGbGFnOiBib29sZWFuID0gZmFsc2U7IC8vLyBUaGlzIGNvbnRhY3QgY2FuIGJlIGRpc2FibGVkIChieSB1c2VyKVxuICBwdWJsaWMgbV9maWx0ZXJGbGFnOiBib29sZWFuID0gZmFsc2U7IC8vLyBUaGlzIGNvbnRhY3QgbmVlZHMgZmlsdGVyaW5nIGJlY2F1c2UgYSBmaXh0dXJlIGZpbHRlciB3YXMgY2hhbmdlZC5cbiAgcHVibGljIG1fYnVsbGV0SGl0RmxhZzogYm9vbGVhbiA9IGZhbHNlOyAvLy8gVGhpcyBidWxsZXQgY29udGFjdCBoYWQgYSBUT0kgZXZlbnRcbiAgcHVibGljIG1fdG9pRmxhZzogYm9vbGVhbiA9IGZhbHNlOyAvLy8gVGhpcyBjb250YWN0IGhhcyBhIHZhbGlkIFRPSSBpbiBtX3RvaVxuXG4gIHB1YmxpYyBtX3ByZXY6IGIyQ29udGFjdCB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgbV9uZXh0OiBiMkNvbnRhY3QgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9ub2RlQTogYjJDb250YWN0RWRnZSA9IG5ldyBiMkNvbnRhY3RFZGdlKHRoaXMpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9ub2RlQjogYjJDb250YWN0RWRnZSA9IG5ldyBiMkNvbnRhY3RFZGdlKHRoaXMpO1xuXG4gIHB1YmxpYyBtX2ZpeHR1cmVBITogYjJGaXh0dXJlO1xuICBwdWJsaWMgbV9maXh0dXJlQiE6IGIyRml4dHVyZTtcblxuICBwdWJsaWMgbV9pbmRleEE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2luZGV4QjogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9tYW5pZm9sZDogYjJNYW5pZm9sZCA9IG5ldyBiMk1hbmlmb2xkKCk7IC8vIFRPRE86IHJlYWRvbmx5XG5cbiAgcHVibGljIG1fdG9pQ291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3RvaTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9mcmljdGlvbjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fcmVzdGl0dXRpb246IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3Jlc3RpdHV0aW9uVGhyZXNob2xkOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtX3RhbmdlbnRTcGVlZDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9vbGRNYW5pZm9sZDogYjJNYW5pZm9sZCA9IG5ldyBiMk1hbmlmb2xkKCk7IC8vIFRPRE86IHJlYWRvbmx5XG5cbiAgcHVibGljIEdldE1hbmlmb2xkKCkge1xuICAgIHJldHVybiB0aGlzLm1fbWFuaWZvbGQ7XG4gIH1cblxuICBwdWJsaWMgR2V0V29ybGRNYW5pZm9sZCh3b3JsZE1hbmlmb2xkOiBiMldvcmxkTWFuaWZvbGQpOiB2b2lkIHtcbiAgICBjb25zdCBib2R5QTogYjJCb2R5ID0gdGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBjb25zdCBib2R5QjogYjJCb2R5ID0gdGhpcy5tX2ZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBjb25zdCBzaGFwZUE6IEEgPSB0aGlzLkdldFNoYXBlQSgpO1xuICAgIGNvbnN0IHNoYXBlQjogQiA9IHRoaXMuR2V0U2hhcGVCKCk7XG4gICAgd29ybGRNYW5pZm9sZC5Jbml0aWFsaXplKHRoaXMubV9tYW5pZm9sZCwgYm9keUEuR2V0VHJhbnNmb3JtKCksIHNoYXBlQS5tX3JhZGl1cywgYm9keUIuR2V0VHJhbnNmb3JtKCksIHNoYXBlQi5tX3JhZGl1cyk7XG4gIH1cblxuICBwdWJsaWMgSXNUb3VjaGluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX3RvdWNoaW5nRmxhZztcbiAgfVxuXG4gIHB1YmxpYyBTZXRFbmFibGVkKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fZW5hYmxlZEZsYWcgPSBmbGFnO1xuICB9XG5cbiAgcHVibGljIElzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZWRGbGFnO1xuICB9XG5cbiAgcHVibGljIEdldE5leHQoKTogYjJDb250YWN0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9uZXh0O1xuICB9XG5cbiAgcHVibGljIEdldEZpeHR1cmVBKCk6IGIyRml4dHVyZSB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlQTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRDaGlsZEluZGV4QSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1faW5kZXhBO1xuICB9XG5cbiAgcHVibGljIEdldFNoYXBlQSgpOiBBIHtcbiAgICByZXR1cm4gdGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkgYXMgQTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRGaXh0dXJlQigpOiBiMkZpeHR1cmUge1xuICAgIHJldHVybiB0aGlzLm1fZml4dHVyZUI7XG4gIH1cblxuICBwdWJsaWMgR2V0Q2hpbGRJbmRleEIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2luZGV4QjtcbiAgfVxuXG4gIHB1YmxpYyBHZXRTaGFwZUIoKTogQiB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIGFzIEI7XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgRXZhbHVhdGUobWFuaWZvbGQ6IGIyTWFuaWZvbGQsIHhmQTogYjJUcmFuc2Zvcm0sIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkO1xuXG4gIHB1YmxpYyBGbGFnRm9yRmlsdGVyaW5nKCk6IHZvaWQge1xuICAgIHRoaXMubV9maWx0ZXJGbGFnID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRGcmljdGlvbihmcmljdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2ZyaWN0aW9uID0gZnJpY3Rpb247XG4gIH1cblxuICBwdWJsaWMgR2V0RnJpY3Rpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2ZyaWN0aW9uO1xuICB9XG5cbiAgcHVibGljIFJlc2V0RnJpY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5tX2ZyaWN0aW9uID0gYjJNaXhGcmljdGlvbih0aGlzLm1fZml4dHVyZUEubV9mcmljdGlvbiwgdGhpcy5tX2ZpeHR1cmVCLm1fZnJpY3Rpb24pO1xuICB9XG5cbiAgcHVibGljIFNldFJlc3RpdHV0aW9uKHJlc3RpdHV0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSByZXN0aXR1dGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZXN0aXR1dGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fcmVzdGl0dXRpb247XG4gIH1cblxuICBwdWJsaWMgUmVzZXRSZXN0aXR1dGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSBiMk1peFJlc3RpdHV0aW9uKHRoaXMubV9maXh0dXJlQS5tX3Jlc3RpdHV0aW9uLCB0aGlzLm1fZml4dHVyZUIubV9yZXN0aXR1dGlvbik7XG4gIH1cblxuICAvLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgcmVzdGl0dXRpb24gdmVsb2NpdHkgdGhyZXNob2xkIG1peHR1cmUuIFlvdSBjYW4gY2FsbCB0aGlzIGluIGIyQ29udGFjdExpc3RlbmVyOjpQcmVTb2x2ZS5cbiAgLy8vIFRoZSB2YWx1ZSBwZXJzaXN0cyB1bnRpbCB5b3Ugc2V0IG9yIHJlc2V0LlxuICBwdWJsaWMgU2V0UmVzdGl0dXRpb25UaHJlc2hvbGQodGhyZXNob2xkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fcmVzdGl0dXRpb25UaHJlc2hvbGQgPSB0aHJlc2hvbGQ7XG4gIH1cblxuICAvLy8gR2V0IHRoZSByZXN0aXR1dGlvbiB0aHJlc2hvbGQuXG4gIHB1YmxpYyBHZXRSZXN0aXR1dGlvblRocmVzaG9sZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fcmVzdGl0dXRpb25UaHJlc2hvbGQ7XG4gIH1cblxuICAvLy8gUmVzZXQgdGhlIHJlc3RpdHV0aW9uIHRocmVzaG9sZCB0byB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgcHVibGljIFJlc2V0UmVzdGl0dXRpb25UaHJlc2hvbGQoKTogdm9pZCB7XG4gICAgdGhpcy5tX3Jlc3RpdHV0aW9uVGhyZXNob2xkID0gYjJNaXhSZXN0aXR1dGlvblRocmVzaG9sZCh0aGlzLm1fZml4dHVyZUEubV9yZXN0aXR1dGlvblRocmVzaG9sZCwgdGhpcy5tX2ZpeHR1cmVCLm1fcmVzdGl0dXRpb25UaHJlc2hvbGQpO1xuICB9XG5cbiAgcHVibGljIFNldFRhbmdlbnRTcGVlZChzcGVlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX3RhbmdlbnRTcGVlZCA9IHNwZWVkO1xuICB9XG5cbiAgcHVibGljIEdldFRhbmdlbnRTcGVlZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fdGFuZ2VudFNwZWVkO1xuICB9XG5cbiAgcHVibGljIFJlc2V0KGZpeHR1cmVBOiBiMkZpeHR1cmUsIGluZGV4QTogbnVtYmVyLCBmaXh0dXJlQjogYjJGaXh0dXJlLCBpbmRleEI6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgdGhpcy5tX3RvdWNoaW5nRmxhZyA9IGZhbHNlO1xuICAgIHRoaXMubV9lbmFibGVkRmxhZyA9IHRydWU7XG4gICAgdGhpcy5tX2ZpbHRlckZsYWcgPSBmYWxzZTtcbiAgICB0aGlzLm1fYnVsbGV0SGl0RmxhZyA9IGZhbHNlO1xuICAgIHRoaXMubV90b2lGbGFnID0gZmFsc2U7XG5cbiAgICB0aGlzLm1fZml4dHVyZUEgPSBmaXh0dXJlQTtcbiAgICB0aGlzLm1fZml4dHVyZUIgPSBmaXh0dXJlQjtcblxuICAgIHRoaXMubV9pbmRleEEgPSBpbmRleEE7XG4gICAgdGhpcy5tX2luZGV4QiA9IGluZGV4QjtcblxuICAgIHRoaXMubV9tYW5pZm9sZC5wb2ludENvdW50ID0gMDtcblxuICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG5cbiAgICB0aGlzLm1fbm9kZUEuUmVzZXQoKTtcbiAgICB0aGlzLm1fbm9kZUIuUmVzZXQoKTtcblxuICAgIHRoaXMubV90b2lDb3VudCA9IDA7XG5cbiAgICB0aGlzLm1fZnJpY3Rpb24gPSBiMk1peEZyaWN0aW9uKHRoaXMubV9maXh0dXJlQS5tX2ZyaWN0aW9uLCB0aGlzLm1fZml4dHVyZUIubV9mcmljdGlvbik7XG4gICAgdGhpcy5tX3Jlc3RpdHV0aW9uID0gYjJNaXhSZXN0aXR1dGlvbih0aGlzLm1fZml4dHVyZUEubV9yZXN0aXR1dGlvbiwgdGhpcy5tX2ZpeHR1cmVCLm1fcmVzdGl0dXRpb24pO1xuICAgIHRoaXMubV9yZXN0aXR1dGlvblRocmVzaG9sZCA9IGIyTWl4UmVzdGl0dXRpb25UaHJlc2hvbGQodGhpcy5tX2ZpeHR1cmVBLm1fcmVzdGl0dXRpb25UaHJlc2hvbGQsIHRoaXMubV9maXh0dXJlQi5tX3Jlc3RpdHV0aW9uVGhyZXNob2xkKTtcbiAgfVxuXG4gIHB1YmxpYyBVcGRhdGUobGlzdGVuZXI6IGIyQ29udGFjdExpc3RlbmVyKTogdm9pZCB7XG4gICAgY29uc3QgdE1hbmlmb2xkOiBiMk1hbmlmb2xkID0gdGhpcy5tX29sZE1hbmlmb2xkO1xuICAgIHRoaXMubV9vbGRNYW5pZm9sZCA9IHRoaXMubV9tYW5pZm9sZDtcbiAgICB0aGlzLm1fbWFuaWZvbGQgPSB0TWFuaWZvbGQ7XG5cbiAgICAvLyBSZS1lbmFibGUgdGhpcyBjb250YWN0LlxuICAgIHRoaXMubV9lbmFibGVkRmxhZyA9IHRydWU7XG5cbiAgICBsZXQgdG91Y2hpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBjb25zdCB3YXNUb3VjaGluZzogYm9vbGVhbiA9IHRoaXMubV90b3VjaGluZ0ZsYWc7XG5cbiAgICBjb25zdCBzZW5zb3JBOiBib29sZWFuID0gdGhpcy5tX2ZpeHR1cmVBLklzU2Vuc29yKCk7XG4gICAgY29uc3Qgc2Vuc29yQjogYm9vbGVhbiA9IHRoaXMubV9maXh0dXJlQi5Jc1NlbnNvcigpO1xuICAgIGNvbnN0IHNlbnNvcjogYm9vbGVhbiA9IHNlbnNvckEgfHwgc2Vuc29yQjtcblxuICAgIGNvbnN0IGJvZHlBOiBiMkJvZHkgPSB0aGlzLm1fZml4dHVyZUEuR2V0Qm9keSgpO1xuICAgIGNvbnN0IGJvZHlCOiBiMkJvZHkgPSB0aGlzLm1fZml4dHVyZUIuR2V0Qm9keSgpO1xuICAgIGNvbnN0IHhmQTogYjJUcmFuc2Zvcm0gPSBib2R5QS5HZXRUcmFuc2Zvcm0oKTtcbiAgICBjb25zdCB4ZkI6IGIyVHJhbnNmb3JtID0gYm9keUIuR2V0VHJhbnNmb3JtKCk7XG5cbiAgICAvLyBJcyB0aGlzIGNvbnRhY3QgYSBzZW5zb3I/XG4gICAgaWYgKHNlbnNvcikge1xuICAgICAgY29uc3Qgc2hhcGVBOiBBID0gdGhpcy5HZXRTaGFwZUEoKTtcbiAgICAgIGNvbnN0IHNoYXBlQjogQiA9IHRoaXMuR2V0U2hhcGVCKCk7XG4gICAgICB0b3VjaGluZyA9IGIyVGVzdE92ZXJsYXBTaGFwZShzaGFwZUEsIHRoaXMubV9pbmRleEEsIHNoYXBlQiwgdGhpcy5tX2luZGV4QiwgeGZBLCB4ZkIpO1xuXG4gICAgICAvLyBTZW5zb3JzIGRvbid0IGdlbmVyYXRlIG1hbmlmb2xkcy5cbiAgICAgIHRoaXMubV9tYW5pZm9sZC5wb2ludENvdW50ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5FdmFsdWF0ZSh0aGlzLm1fbWFuaWZvbGQsIHhmQSwgeGZCKTtcbiAgICAgIHRvdWNoaW5nID0gdGhpcy5tX21hbmlmb2xkLnBvaW50Q291bnQgPiAwO1xuXG4gICAgICAvLyBNYXRjaCBvbGQgY29udGFjdCBpZHMgdG8gbmV3IGNvbnRhY3QgaWRzIGFuZCBjb3B5IHRoZVxuICAgICAgLy8gc3RvcmVkIGltcHVsc2VzIHRvIHdhcm0gc3RhcnQgdGhlIHNvbHZlci5cbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fbWFuaWZvbGQucG9pbnRDb3VudDsgKytpKSB7XG4gICAgICAgIGNvbnN0IG1wMjogYjJNYW5pZm9sZFBvaW50ID0gdGhpcy5tX21hbmlmb2xkLnBvaW50c1tpXTtcbiAgICAgICAgbXAyLm5vcm1hbEltcHVsc2UgPSAwO1xuICAgICAgICBtcDIudGFuZ2VudEltcHVsc2UgPSAwO1xuICAgICAgICBjb25zdCBpZDI6IGIyQ29udGFjdElEID0gbXAyLmlkO1xuXG4gICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCB0aGlzLm1fb2xkTWFuaWZvbGQucG9pbnRDb3VudDsgKytqKSB7XG4gICAgICAgICAgY29uc3QgbXAxOiBiMk1hbmlmb2xkUG9pbnQgPSB0aGlzLm1fb2xkTWFuaWZvbGQucG9pbnRzW2pdO1xuXG4gICAgICAgICAgaWYgKG1wMS5pZC5rZXkgPT09IGlkMi5rZXkpIHtcbiAgICAgICAgICAgIG1wMi5ub3JtYWxJbXB1bHNlID0gbXAxLm5vcm1hbEltcHVsc2U7XG4gICAgICAgICAgICBtcDIudGFuZ2VudEltcHVsc2UgPSBtcDEudGFuZ2VudEltcHVsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRvdWNoaW5nICE9PSB3YXNUb3VjaGluZykge1xuICAgICAgICBib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5tX3RvdWNoaW5nRmxhZyA9IHRvdWNoaW5nO1xuXG4gICAgaWYgKCF3YXNUb3VjaGluZyAmJiB0b3VjaGluZyAmJiBsaXN0ZW5lcikge1xuICAgICAgbGlzdGVuZXIuQmVnaW5Db250YWN0KHRoaXMpO1xuICAgIH1cblxuICAgIGlmICh3YXNUb3VjaGluZyAmJiAhdG91Y2hpbmcgJiYgbGlzdGVuZXIpIHtcbiAgICAgIGxpc3RlbmVyLkVuZENvbnRhY3QodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKCFzZW5zb3IgJiYgdG91Y2hpbmcgJiYgbGlzdGVuZXIpIHtcbiAgICAgIGxpc3RlbmVyLlByZVNvbHZlKHRoaXMsIHRoaXMubV9vbGRNYW5pZm9sZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZVRPSV9zX2lucHV0ID0gbmV3IGIyVE9JSW5wdXQoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ29tcHV0ZVRPSV9zX291dHB1dCA9IG5ldyBiMlRPSU91dHB1dCgpO1xuICBwdWJsaWMgQ29tcHV0ZVRPSShzd2VlcEE6IGIyU3dlZXAsIHN3ZWVwQjogYjJTd2VlcCk6IG51bWJlciB7XG4gICAgY29uc3QgaW5wdXQ6IGIyVE9JSW5wdXQgPSBiMkNvbnRhY3QuQ29tcHV0ZVRPSV9zX2lucHV0O1xuICAgIGlucHV0LnByb3h5QS5TZXRTaGFwZSh0aGlzLkdldFNoYXBlQSgpLCB0aGlzLm1faW5kZXhBKTtcbiAgICBpbnB1dC5wcm94eUIuU2V0U2hhcGUodGhpcy5HZXRTaGFwZUIoKSwgdGhpcy5tX2luZGV4Qik7XG4gICAgaW5wdXQuc3dlZXBBLkNvcHkoc3dlZXBBKTtcbiAgICBpbnB1dC5zd2VlcEIuQ29weShzd2VlcEIpO1xuICAgIGlucHV0LnRNYXggPSBiMl9saW5lYXJTbG9wO1xuXG4gICAgY29uc3Qgb3V0cHV0OiBiMlRPSU91dHB1dCA9IGIyQ29udGFjdC5Db21wdXRlVE9JX3Nfb3V0cHV0O1xuXG4gICAgYjJUaW1lT2ZJbXBhY3Qob3V0cHV0LCBpbnB1dCk7XG5cbiAgICByZXR1cm4gb3V0cHV0LnQ7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQWFBO0FBWkE7QUFVQTtBQUNBO0FBRUE7QUFDQTtBQWJBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFKQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBckJBO0FBdUJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBaU9BO0FBL05BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFmQTtBQUNBO0FBZUE7QUFBQTtBQWhRQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_contact_factory.ts":
/*!**************************************************!*\
  !*** ./src/box2d/dynamics/b2_contact_factory.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ContactFactory = exports.b2ContactRegister = void 0;\nvar b2_shape_1 = __webpack_require__(/*! ../collision/b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2_circle_contact_1 = __webpack_require__(/*! ./b2_circle_contact */ \"./src/box2d/dynamics/b2_circle_contact.ts\");\nvar b2_polygon_contact_1 = __webpack_require__(/*! ./b2_polygon_contact */ \"./src/box2d/dynamics/b2_polygon_contact.ts\");\nvar b2_polygon_circle_contact_1 = __webpack_require__(/*! ./b2_polygon_circle_contact */ \"./src/box2d/dynamics/b2_polygon_circle_contact.ts\");\nvar b2_edge_circle_contact_1 = __webpack_require__(/*! ./b2_edge_circle_contact */ \"./src/box2d/dynamics/b2_edge_circle_contact.ts\");\nvar b2_edge_polygon_contact_1 = __webpack_require__(/*! ./b2_edge_polygon_contact */ \"./src/box2d/dynamics/b2_edge_polygon_contact.ts\");\nvar b2_chain_circle_contact_1 = __webpack_require__(/*! ./b2_chain_circle_contact */ \"./src/box2d/dynamics/b2_chain_circle_contact.ts\");\nvar b2_chain_polygon_contact_1 = __webpack_require__(/*! ./b2_chain_polygon_contact */ \"./src/box2d/dynamics/b2_chain_polygon_contact.ts\");\nvar b2ContactRegister = (function () {\n    function b2ContactRegister() {\n        this.pool = [];\n        this.createFcn = null;\n        this.destroyFcn = null;\n        this.primary = false;\n    }\n    return b2ContactRegister;\n}());\nexports.b2ContactRegister = b2ContactRegister;\nvar b2ContactFactory = (function () {\n    function b2ContactFactory() {\n        this.m_registers = [];\n        this.InitializeRegisters();\n    }\n    b2ContactFactory.prototype.AddType = function (createFcn, destroyFcn, typeA, typeB) {\n        var pool = [];\n        function poolCreateFcn() {\n            return pool.pop() || createFcn();\n        }\n        function poolDestroyFcn(contact) {\n            pool.push(contact);\n        }\n        this.m_registers[typeA][typeB].pool = pool;\n        this.m_registers[typeA][typeB].createFcn = poolCreateFcn;\n        this.m_registers[typeA][typeB].destroyFcn = poolDestroyFcn;\n        this.m_registers[typeA][typeB].primary = true;\n        if (typeA !== typeB) {\n            this.m_registers[typeB][typeA].pool = pool;\n            this.m_registers[typeB][typeA].createFcn = poolCreateFcn;\n            this.m_registers[typeB][typeA].destroyFcn = poolDestroyFcn;\n            this.m_registers[typeB][typeA].primary = false;\n        }\n    };\n    b2ContactFactory.prototype.InitializeRegisters = function () {\n        for (var i = 0; i < b2_shape_1.b2ShapeType.e_shapeTypeCount; i++) {\n            this.m_registers[i] = [];\n            for (var j = 0; j < b2_shape_1.b2ShapeType.e_shapeTypeCount; j++) {\n                this.m_registers[i][j] = new b2ContactRegister();\n            }\n        }\n        this.AddType(b2_circle_contact_1.b2CircleContact.Create, b2_circle_contact_1.b2CircleContact.Destroy, b2_shape_1.b2ShapeType.e_circleShape, b2_shape_1.b2ShapeType.e_circleShape);\n        this.AddType(b2_polygon_circle_contact_1.b2PolygonAndCircleContact.Create, b2_polygon_circle_contact_1.b2PolygonAndCircleContact.Destroy, b2_shape_1.b2ShapeType.e_polygonShape, b2_shape_1.b2ShapeType.e_circleShape);\n        this.AddType(b2_polygon_contact_1.b2PolygonContact.Create, b2_polygon_contact_1.b2PolygonContact.Destroy, b2_shape_1.b2ShapeType.e_polygonShape, b2_shape_1.b2ShapeType.e_polygonShape);\n        this.AddType(b2_edge_circle_contact_1.b2EdgeAndCircleContact.Create, b2_edge_circle_contact_1.b2EdgeAndCircleContact.Destroy, b2_shape_1.b2ShapeType.e_edgeShape, b2_shape_1.b2ShapeType.e_circleShape);\n        this.AddType(b2_edge_polygon_contact_1.b2EdgeAndPolygonContact.Create, b2_edge_polygon_contact_1.b2EdgeAndPolygonContact.Destroy, b2_shape_1.b2ShapeType.e_edgeShape, b2_shape_1.b2ShapeType.e_polygonShape);\n        this.AddType(b2_chain_circle_contact_1.b2ChainAndCircleContact.Create, b2_chain_circle_contact_1.b2ChainAndCircleContact.Destroy, b2_shape_1.b2ShapeType.e_chainShape, b2_shape_1.b2ShapeType.e_circleShape);\n        this.AddType(b2_chain_polygon_contact_1.b2ChainAndPolygonContact.Create, b2_chain_polygon_contact_1.b2ChainAndPolygonContact.Destroy, b2_shape_1.b2ShapeType.e_chainShape, b2_shape_1.b2ShapeType.e_polygonShape);\n    };\n    b2ContactFactory.prototype.Create = function (fixtureA, indexA, fixtureB, indexB) {\n        var typeA = fixtureA.GetType();\n        var typeB = fixtureB.GetType();\n        var reg = this.m_registers[typeA][typeB];\n        if (reg.createFcn) {\n            var c = reg.createFcn();\n            if (reg.primary) {\n                c.Reset(fixtureA, indexA, fixtureB, indexB);\n            }\n            else {\n                c.Reset(fixtureB, indexB, fixtureA, indexA);\n            }\n            return c;\n        }\n        else {\n            return null;\n        }\n    };\n    b2ContactFactory.prototype.Destroy = function (contact) {\n        var typeA = contact.m_fixtureA.GetType();\n        var typeB = contact.m_fixtureB.GetType();\n        var reg = this.m_registers[typeA][typeB];\n        if (reg.destroyFcn) {\n            reg.destroyFcn(contact);\n        }\n    };\n    return b2ContactFactory;\n}());\nexports.b2ContactFactory = b2ContactFactory;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY29udGFjdF9mYWN0b3J5LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX2NvbnRhY3RfZmFjdG9yeS50cz8wYjdlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERFQlVHOiBpbXBvcnQgeyBiMkFzc2VydCB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyU2hhcGVUeXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9zaGFwZVwiO1xuaW1wb3J0IHsgYjJDb250YWN0IH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuaW1wb3J0IHsgYjJDaXJjbGVDb250YWN0IH0gZnJvbSBcIi4vYjJfY2lyY2xlX2NvbnRhY3RcIjtcbmltcG9ydCB7IGIyUG9seWdvbkNvbnRhY3QgfSBmcm9tIFwiLi9iMl9wb2x5Z29uX2NvbnRhY3RcIjtcbmltcG9ydCB7IGIyUG9seWdvbkFuZENpcmNsZUNvbnRhY3QgfSBmcm9tIFwiLi9iMl9wb2x5Z29uX2NpcmNsZV9jb250YWN0XCI7XG5pbXBvcnQgeyBiMkVkZ2VBbmRDaXJjbGVDb250YWN0IH0gZnJvbSBcIi4vYjJfZWRnZV9jaXJjbGVfY29udGFjdFwiO1xuaW1wb3J0IHsgYjJFZGdlQW5kUG9seWdvbkNvbnRhY3QgfSBmcm9tIFwiLi9iMl9lZGdlX3BvbHlnb25fY29udGFjdFwiO1xuaW1wb3J0IHsgYjJDaGFpbkFuZENpcmNsZUNvbnRhY3QgfSBmcm9tIFwiLi9iMl9jaGFpbl9jaXJjbGVfY29udGFjdFwiO1xuaW1wb3J0IHsgYjJDaGFpbkFuZFBvbHlnb25Db250YWN0IH0gZnJvbSBcIi4vYjJfY2hhaW5fcG9seWdvbl9jb250YWN0XCI7XG5pbXBvcnQgeyBiMkZpeHR1cmUgfSBmcm9tIFwiLi9iMl9maXh0dXJlXCI7XG5cbmV4cG9ydCBjbGFzcyBiMkNvbnRhY3RSZWdpc3RlciB7XG4gIHB1YmxpYyBwb29sOiBiMkNvbnRhY3RbXSA9IFtdO1xuICBwdWJsaWMgY3JlYXRlRmNuOiAoKCkgPT4gYjJDb250YWN0KSB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgZGVzdHJveUZjbjogKChjb250YWN0OiBiMkNvbnRhY3QpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBwcmltYXJ5OiBib29sZWFuID0gZmFsc2U7XG59XG5cbmV4cG9ydCBjbGFzcyBiMkNvbnRhY3RGYWN0b3J5IHtcbiAgcHVibGljIHJlYWRvbmx5IG1fcmVnaXN0ZXJzOiBiMkNvbnRhY3RSZWdpc3RlcltdW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLkluaXRpYWxpemVSZWdpc3RlcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgQWRkVHlwZShjcmVhdGVGY246ICgpID0+IGIyQ29udGFjdCwgZGVzdHJveUZjbjogKGNvbnRhY3Q6IGIyQ29udGFjdCkgPT4gdm9pZCwgdHlwZUE6IGIyU2hhcGVUeXBlLCB0eXBlQjogYjJTaGFwZVR5cGUpOiB2b2lkIHtcbiAgICBjb25zdCBwb29sOiBiMkNvbnRhY3RbXSA9IFtdO1xuXG4gICAgZnVuY3Rpb24gcG9vbENyZWF0ZUZjbigpOiBiMkNvbnRhY3Qge1xuICAgICAgcmV0dXJuIHBvb2wucG9wKCkgfHwgY3JlYXRlRmNuKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcG9vbERlc3Ryb3lGY24oY29udGFjdDogYjJDb250YWN0KTogdm9pZCB7XG4gICAgICBwb29sLnB1c2goY29udGFjdCk7XG4gICAgfVxuXG4gICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlQV1bdHlwZUJdLnBvb2wgPSBwb29sO1xuICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZUFdW3R5cGVCXS5jcmVhdGVGY24gPSBwb29sQ3JlYXRlRmNuOyAvLyBjcmVhdGVGY247XG4gICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlQV1bdHlwZUJdLmRlc3Ryb3lGY24gPSBwb29sRGVzdHJveUZjbjsgLy8gZGVzdHJveUZjbjtcbiAgICB0aGlzLm1fcmVnaXN0ZXJzW3R5cGVBXVt0eXBlQl0ucHJpbWFyeSA9IHRydWU7XG5cbiAgICBpZiAodHlwZUEgIT09IHR5cGVCKSB7XG4gICAgICB0aGlzLm1fcmVnaXN0ZXJzW3R5cGVCXVt0eXBlQV0ucG9vbCA9IHBvb2w7XG4gICAgICB0aGlzLm1fcmVnaXN0ZXJzW3R5cGVCXVt0eXBlQV0uY3JlYXRlRmNuID0gcG9vbENyZWF0ZUZjbjsgLy8gY3JlYXRlRmNuO1xuICAgICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlQl1bdHlwZUFdLmRlc3Ryb3lGY24gPSBwb29sRGVzdHJveUZjbjsgLy8gZGVzdHJveUZjbjtcbiAgICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZUJdW3R5cGVBXS5wcmltYXJ5ID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBJbml0aWFsaXplUmVnaXN0ZXJzKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBiMlNoYXBlVHlwZS5lX3NoYXBlVHlwZUNvdW50OyBpKyspIHtcbiAgICAgIHRoaXMubV9yZWdpc3RlcnNbaV0gPSBbXTtcbiAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCBiMlNoYXBlVHlwZS5lX3NoYXBlVHlwZUNvdW50OyBqKyspIHtcbiAgICAgICAgdGhpcy5tX3JlZ2lzdGVyc1tpXVtqXSA9IG5ldyBiMkNvbnRhY3RSZWdpc3RlcigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuQWRkVHlwZSggICAgICAgICAgYjJDaXJjbGVDb250YWN0LkNyZWF0ZSwgICAgICAgICAgIGIyQ2lyY2xlQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlVHlwZS5lX2NpcmNsZVNoYXBlLCAgYjJTaGFwZVR5cGUuZV9jaXJjbGVTaGFwZSk7XG4gICAgdGhpcy5BZGRUeXBlKGIyUG9seWdvbkFuZENpcmNsZUNvbnRhY3QuQ3JlYXRlLCBiMlBvbHlnb25BbmRDaXJjbGVDb250YWN0LkRlc3Ryb3ksIGIyU2hhcGVUeXBlLmVfcG9seWdvblNoYXBlLCBiMlNoYXBlVHlwZS5lX2NpcmNsZVNoYXBlKTtcbiAgICB0aGlzLkFkZFR5cGUoICAgICAgICAgYjJQb2x5Z29uQ29udGFjdC5DcmVhdGUsICAgICAgICAgIGIyUG9seWdvbkNvbnRhY3QuRGVzdHJveSwgYjJTaGFwZVR5cGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGVUeXBlLmVfcG9seWdvblNoYXBlKTtcbiAgICB0aGlzLkFkZFR5cGUoICAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5DcmVhdGUsICAgIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QuRGVzdHJveSwgYjJTaGFwZVR5cGUuZV9lZGdlU2hhcGUsICAgIGIyU2hhcGVUeXBlLmVfY2lyY2xlU2hhcGUpO1xuICAgIHRoaXMuQWRkVHlwZSggIGIyRWRnZUFuZFBvbHlnb25Db250YWN0LkNyZWF0ZSwgICBiMkVkZ2VBbmRQb2x5Z29uQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlVHlwZS5lX2VkZ2VTaGFwZSwgICAgYjJTaGFwZVR5cGUuZV9wb2x5Z29uU2hhcGUpO1xuICAgIHRoaXMuQWRkVHlwZSggIGIyQ2hhaW5BbmRDaXJjbGVDb250YWN0LkNyZWF0ZSwgICBiMkNoYWluQW5kQ2lyY2xlQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlVHlwZS5lX2NoYWluU2hhcGUsICAgYjJTaGFwZVR5cGUuZV9jaXJjbGVTaGFwZSk7XG4gICAgdGhpcy5BZGRUeXBlKCBiMkNoYWluQW5kUG9seWdvbkNvbnRhY3QuQ3JlYXRlLCAgYjJDaGFpbkFuZFBvbHlnb25Db250YWN0LkRlc3Ryb3ksIGIyU2hhcGVUeXBlLmVfY2hhaW5TaGFwZSwgICBiMlNoYXBlVHlwZS5lX3BvbHlnb25TaGFwZSk7XG4gIH1cblxuICBwdWJsaWMgQ3JlYXRlKGZpeHR1cmVBOiBiMkZpeHR1cmUsIGluZGV4QTogbnVtYmVyLCBmaXh0dXJlQjogYjJGaXh0dXJlLCBpbmRleEI6IG51bWJlcik6IGIyQ29udGFjdCB8IG51bGwge1xuICAgIGNvbnN0IHR5cGVBOiBiMlNoYXBlVHlwZSA9IGZpeHR1cmVBLkdldFR5cGUoKTtcbiAgICBjb25zdCB0eXBlQjogYjJTaGFwZVR5cGUgPSBmaXh0dXJlQi5HZXRUeXBlKCk7XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQoMCA8PSB0eXBlQSAmJiB0eXBlQSA8IGIyU2hhcGVUeXBlLmVfc2hhcGVUeXBlQ291bnQpO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCgwIDw9IHR5cGVCICYmIHR5cGVCIDwgYjJTaGFwZVR5cGUuZV9zaGFwZVR5cGVDb3VudCk7XG5cbiAgICBjb25zdCByZWc6IGIyQ29udGFjdFJlZ2lzdGVyID0gdGhpcy5tX3JlZ2lzdGVyc1t0eXBlQV1bdHlwZUJdO1xuICAgIGlmIChyZWcuY3JlYXRlRmNuKSB7XG4gICAgICBjb25zdCBjOiBiMkNvbnRhY3QgPSByZWcuY3JlYXRlRmNuKCk7XG4gICAgICBpZiAocmVnLnByaW1hcnkpIHtcbiAgICAgICAgYy5SZXNldChmaXh0dXJlQSwgaW5kZXhBLCBmaXh0dXJlQiwgaW5kZXhCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGMuUmVzZXQoZml4dHVyZUIsIGluZGV4QiwgZml4dHVyZUEsIGluZGV4QSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIERlc3Ryb3koY29udGFjdDogYjJDb250YWN0KTogdm9pZCB7XG4gICAgY29uc3QgdHlwZUE6IGIyU2hhcGVUeXBlID0gY29udGFjdC5tX2ZpeHR1cmVBLkdldFR5cGUoKTtcbiAgICBjb25zdCB0eXBlQjogYjJTaGFwZVR5cGUgPSBjb250YWN0Lm1fZml4dHVyZUIuR2V0VHlwZSgpO1xuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KDAgPD0gdHlwZUEgJiYgdHlwZUIgPCBiMlNoYXBlVHlwZS5lX3NoYXBlVHlwZUNvdW50KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoMCA8PSB0eXBlQSAmJiB0eXBlQiA8IGIyU2hhcGVUeXBlLmVfc2hhcGVUeXBlQ291bnQpO1xuXG4gICAgY29uc3QgcmVnOiBiMkNvbnRhY3RSZWdpc3RlciA9IHRoaXMubV9yZWdpc3RlcnNbdHlwZUFdW3R5cGVCXTtcbiAgICBpZiAocmVnLmRlc3Ryb3lGY24pIHtcbiAgICAgIHJlZy5kZXN0cm95RmNuKGNvbnRhY3QpO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUdBO0FBRkE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWpGQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_contact_factory.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_contact_manager.ts":
/*!**************************************************!*\
  !*** ./src/box2d/dynamics/b2_contact_manager.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ContactManager = void 0;\nvar b2_broad_phase_1 = __webpack_require__(/*! ../collision/b2_broad_phase */ \"./src/box2d/collision/b2_broad_phase.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_contact_factory_1 = __webpack_require__(/*! ./b2_contact_factory */ \"./src/box2d/dynamics/b2_contact_factory.ts\");\nvar b2_body_1 = __webpack_require__(/*! ./b2_body */ \"./src/box2d/dynamics/b2_body.ts\");\nvar b2_world_callbacks_1 = __webpack_require__(/*! ./b2_world_callbacks */ \"./src/box2d/dynamics/b2_world_callbacks.ts\");\nvar b2ContactManager = (function () {\n    function b2ContactManager() {\n        this.m_broadPhase = new b2_broad_phase_1.b2BroadPhase();\n        this.m_contactList = null;\n        this.m_contactCount = 0;\n        this.m_contactFilter = b2_world_callbacks_1.b2ContactFilter.b2_defaultFilter;\n        this.m_contactListener = b2_world_callbacks_1.b2ContactListener.b2_defaultListener;\n        this.m_contactFactory = new b2_contact_factory_1.b2ContactFactory();\n    }\n    b2ContactManager.prototype.AddPair = function (proxyA, proxyB) {\n        var fixtureA = proxyA.fixture;\n        var fixtureB = proxyB.fixture;\n        var indexA = proxyA.childIndex;\n        var indexB = proxyB.childIndex;\n        var bodyA = fixtureA.GetBody();\n        var bodyB = fixtureB.GetBody();\n        if (bodyA === bodyB) {\n            return;\n        }\n        var edge = bodyB.GetContactList();\n        while (edge) {\n            if (edge.other === bodyA) {\n                var fA = edge.contact.GetFixtureA();\n                var fB = edge.contact.GetFixtureB();\n                var iA = edge.contact.GetChildIndexA();\n                var iB = edge.contact.GetChildIndexB();\n                if (fA === fixtureA && fB === fixtureB && iA === indexA && iB === indexB) {\n                    return;\n                }\n                if (fA === fixtureB && fB === fixtureA && iA === indexB && iB === indexA) {\n                    return;\n                }\n            }\n            edge = edge.next;\n        }\n        if (this.m_contactFilter && !this.m_contactFilter.ShouldCollide(fixtureA, fixtureB)) {\n            return;\n        }\n        var c = this.m_contactFactory.Create(fixtureA, indexA, fixtureB, indexB);\n        if (c === null) {\n            return;\n        }\n        fixtureA = c.GetFixtureA();\n        fixtureB = c.GetFixtureB();\n        indexA = c.GetChildIndexA();\n        indexB = c.GetChildIndexB();\n        bodyA = fixtureA.m_body;\n        bodyB = fixtureB.m_body;\n        c.m_prev = null;\n        c.m_next = this.m_contactList;\n        if (this.m_contactList !== null) {\n            this.m_contactList.m_prev = c;\n        }\n        this.m_contactList = c;\n        c.m_nodeA.other = bodyB;\n        c.m_nodeA.prev = null;\n        c.m_nodeA.next = bodyA.m_contactList;\n        if (bodyA.m_contactList !== null) {\n            bodyA.m_contactList.prev = c.m_nodeA;\n        }\n        bodyA.m_contactList = c.m_nodeA;\n        c.m_nodeB.other = bodyA;\n        c.m_nodeB.prev = null;\n        c.m_nodeB.next = bodyB.m_contactList;\n        if (bodyB.m_contactList !== null) {\n            bodyB.m_contactList.prev = c.m_nodeB;\n        }\n        bodyB.m_contactList = c.m_nodeB;\n        ++this.m_contactCount;\n    };\n    b2ContactManager.prototype.FindNewContacts = function () {\n        var _this = this;\n        this.m_broadPhase.UpdatePairs(function (proxyA, proxyB) {\n            _this.AddPair(proxyA, proxyB);\n        });\n    };\n    b2ContactManager.prototype.Destroy = function (c) {\n        var fixtureA = c.GetFixtureA();\n        var fixtureB = c.GetFixtureB();\n        var bodyA = fixtureA.GetBody();\n        var bodyB = fixtureB.GetBody();\n        if (this.m_contactListener && c.IsTouching()) {\n            this.m_contactListener.EndContact(c);\n        }\n        if (c.m_prev) {\n            c.m_prev.m_next = c.m_next;\n        }\n        if (c.m_next) {\n            c.m_next.m_prev = c.m_prev;\n        }\n        if (c === this.m_contactList) {\n            this.m_contactList = c.m_next;\n        }\n        if (c.m_nodeA.prev) {\n            c.m_nodeA.prev.next = c.m_nodeA.next;\n        }\n        if (c.m_nodeA.next) {\n            c.m_nodeA.next.prev = c.m_nodeA.prev;\n        }\n        if (c.m_nodeA === bodyA.m_contactList) {\n            bodyA.m_contactList = c.m_nodeA.next;\n        }\n        if (c.m_nodeB.prev) {\n            c.m_nodeB.prev.next = c.m_nodeB.next;\n        }\n        if (c.m_nodeB.next) {\n            c.m_nodeB.next.prev = c.m_nodeB.prev;\n        }\n        if (c.m_nodeB === bodyB.m_contactList) {\n            bodyB.m_contactList = c.m_nodeB.next;\n        }\n        if (c.m_manifold.pointCount > 0 &&\n            !fixtureA.IsSensor() &&\n            !fixtureB.IsSensor()) {\n            fixtureA.GetBody().SetAwake(true);\n            fixtureB.GetBody().SetAwake(true);\n        }\n        this.m_contactFactory.Destroy(c);\n        --this.m_contactCount;\n    };\n    b2ContactManager.prototype.Collide = function () {\n        var c = this.m_contactList;\n        while (c) {\n            var fixtureA = c.GetFixtureA();\n            var fixtureB = c.GetFixtureB();\n            var indexA = c.GetChildIndexA();\n            var indexB = c.GetChildIndexB();\n            var bodyA = fixtureA.GetBody();\n            var bodyB = fixtureB.GetBody();\n            if (c.m_filterFlag) {\n                if (this.m_contactFilter && !this.m_contactFilter.ShouldCollide(fixtureA, fixtureB)) {\n                    var cNuke = c;\n                    c = cNuke.m_next;\n                    this.Destroy(cNuke);\n                    continue;\n                }\n                c.m_filterFlag = false;\n            }\n            var activeA = bodyA.IsAwake() && bodyA.m_type !== b2_body_1.b2BodyType.b2_staticBody;\n            var activeB = bodyB.IsAwake() && bodyB.m_type !== b2_body_1.b2BodyType.b2_staticBody;\n            if (!activeA && !activeB) {\n                c = c.m_next;\n                continue;\n            }\n            var treeNodeA = fixtureA.m_proxies[indexA].treeNode;\n            var treeNodeB = fixtureB.m_proxies[indexB].treeNode;\n            var overlap = b2_collision_1.b2TestOverlapAABB(treeNodeA.aabb, treeNodeB.aabb);\n            if (!overlap) {\n                var cNuke = c;\n                c = cNuke.m_next;\n                this.Destroy(cNuke);\n                continue;\n            }\n            c.Update(this.m_contactListener);\n            c = c.m_next;\n        }\n    };\n    return b2ContactManager;\n}());\nexports.b2ContactManager = b2ContactManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY29udGFjdF9tYW5hZ2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX2NvbnRhY3RfbWFuYWdlci50cz9iZTI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMkJyb2FkUGhhc2UgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2Jyb2FkX3BoYXNlXCI7XG5pbXBvcnQgeyBiMlRyZWVOb2RlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9keW5hbWljX3RyZWVcIjtcbmltcG9ydCB7IGIyVGVzdE92ZXJsYXBBQUJCIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaXNpb25cIjtcbmltcG9ydCB7IGIyQ29udGFjdCwgYjJDb250YWN0RWRnZSB9IGZyb20gXCIuL2IyX2NvbnRhY3RcIjtcbmltcG9ydCB7IGIyQ29udGFjdEZhY3RvcnkgfSBmcm9tIFwiLi9iMl9jb250YWN0X2ZhY3RvcnlcIjtcbmltcG9ydCB7IGIyQm9keSwgYjJCb2R5VHlwZSB9IGZyb20gXCIuL2IyX2JvZHlcIjtcbmltcG9ydCB7IGIyRml4dHVyZSwgYjJGaXh0dXJlUHJveHkgfSBmcm9tIFwiLi9iMl9maXh0dXJlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3RGaWx0ZXIsIGIyQ29udGFjdExpc3RlbmVyIH0gZnJvbSBcIi4vYjJfd29ybGRfY2FsbGJhY2tzXCI7XG5cbi8vIERlbGVnYXRlIG9mIGIyV29ybGQuXG5leHBvcnQgY2xhc3MgYjJDb250YWN0TWFuYWdlciB7XG4gIHB1YmxpYyByZWFkb25seSBtX2Jyb2FkUGhhc2U6IGIyQnJvYWRQaGFzZTxiMkZpeHR1cmVQcm94eT4gPSBuZXcgYjJCcm9hZFBoYXNlPGIyRml4dHVyZVByb3h5PigpO1xuICBwdWJsaWMgbV9jb250YWN0TGlzdDogYjJDb250YWN0IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBtX2NvbnRhY3RDb3VudDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fY29udGFjdEZpbHRlcjogYjJDb250YWN0RmlsdGVyID0gYjJDb250YWN0RmlsdGVyLmIyX2RlZmF1bHRGaWx0ZXI7XG4gIHB1YmxpYyBtX2NvbnRhY3RMaXN0ZW5lcjogYjJDb250YWN0TGlzdGVuZXIgPSBiMkNvbnRhY3RMaXN0ZW5lci5iMl9kZWZhdWx0TGlzdGVuZXI7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fY29udGFjdEZhY3Rvcnk6IGIyQ29udGFjdEZhY3RvcnkgPSBuZXcgYjJDb250YWN0RmFjdG9yeSgpO1xuXG4gIC8vIEJyb2FkLXBoYXNlIGNhbGxiYWNrLlxuICBwdWJsaWMgQWRkUGFpcihwcm94eUE6IGIyRml4dHVyZVByb3h5LCBwcm94eUI6IGIyRml4dHVyZVByb3h5KTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHByb3h5QSBpbnN0YW5jZW9mIGIyRml4dHVyZVByb3h5KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQocHJveHlCIGluc3RhbmNlb2YgYjJGaXh0dXJlUHJveHkpO1xuXG4gICAgbGV0IGZpeHR1cmVBOiBiMkZpeHR1cmUgPSBwcm94eUEuZml4dHVyZTtcbiAgICBsZXQgZml4dHVyZUI6IGIyRml4dHVyZSA9IHByb3h5Qi5maXh0dXJlO1xuXG4gICAgbGV0IGluZGV4QTogbnVtYmVyID0gcHJveHlBLmNoaWxkSW5kZXg7XG4gICAgbGV0IGluZGV4QjogbnVtYmVyID0gcHJveHlCLmNoaWxkSW5kZXg7XG5cbiAgICBsZXQgYm9keUE6IGIyQm9keSA9IGZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBsZXQgYm9keUI6IGIyQm9keSA9IGZpeHR1cmVCLkdldEJvZHkoKTtcblxuICAgIC8vIEFyZSB0aGUgZml4dHVyZXMgb24gdGhlIHNhbWUgYm9keT9cbiAgICBpZiAoYm9keUEgPT09IGJvZHlCKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVE9ET19FUklOIHVzZSBhIGhhc2ggdGFibGUgdG8gcmVtb3ZlIGEgcG90ZW50aWFsIGJvdHRsZW5lY2sgd2hlbiBib3RoXG4gICAgLy8gYm9kaWVzIGhhdmUgYSBsb3Qgb2YgY29udGFjdHMuXG4gICAgLy8gRG9lcyBhIGNvbnRhY3QgYWxyZWFkeSBleGlzdD9cbiAgICBsZXQgZWRnZTogYjJDb250YWN0RWRnZSB8IG51bGwgPSBib2R5Qi5HZXRDb250YWN0TGlzdCgpO1xuICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICBpZiAoZWRnZS5vdGhlciA9PT0gYm9keUEpIHtcbiAgICAgICAgY29uc3QgZkE6IGIyRml4dHVyZSA9IGVkZ2UuY29udGFjdC5HZXRGaXh0dXJlQSgpO1xuICAgICAgICBjb25zdCBmQjogYjJGaXh0dXJlID0gZWRnZS5jb250YWN0LkdldEZpeHR1cmVCKCk7XG4gICAgICAgIGNvbnN0IGlBOiBudW1iZXIgPSBlZGdlLmNvbnRhY3QuR2V0Q2hpbGRJbmRleEEoKTtcbiAgICAgICAgY29uc3QgaUI6IG51bWJlciA9IGVkZ2UuY29udGFjdC5HZXRDaGlsZEluZGV4QigpO1xuXG4gICAgICAgIGlmIChmQSA9PT0gZml4dHVyZUEgJiYgZkIgPT09IGZpeHR1cmVCICYmIGlBID09PSBpbmRleEEgJiYgaUIgPT09IGluZGV4Qikge1xuICAgICAgICAgIC8vIEEgY29udGFjdCBhbHJlYWR5IGV4aXN0cy5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZkEgPT09IGZpeHR1cmVCICYmIGZCID09PSBmaXh0dXJlQSAmJiBpQSA9PT0gaW5kZXhCICYmIGlCID09PSBpbmRleEEpIHtcbiAgICAgICAgICAvLyBBIGNvbnRhY3QgYWxyZWFkeSBleGlzdHMuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdXNlciBmaWx0ZXJpbmcuXG4gICAgaWYgKHRoaXMubV9jb250YWN0RmlsdGVyICYmICF0aGlzLm1fY29udGFjdEZpbHRlci5TaG91bGRDb2xsaWRlKGZpeHR1cmVBLCBmaXh0dXJlQikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDYWxsIHRoZSBmYWN0b3J5LlxuICAgIGNvbnN0IGM6IGIyQ29udGFjdCB8IG51bGwgPSB0aGlzLm1fY29udGFjdEZhY3RvcnkuQ3JlYXRlKGZpeHR1cmVBLCBpbmRleEEsIGZpeHR1cmVCLCBpbmRleEIpO1xuICAgIGlmIChjID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ29udGFjdCBjcmVhdGlvbiBtYXkgc3dhcCBmaXh0dXJlcy5cbiAgICBmaXh0dXJlQSA9IGMuR2V0Rml4dHVyZUEoKTtcbiAgICBmaXh0dXJlQiA9IGMuR2V0Rml4dHVyZUIoKTtcbiAgICBpbmRleEEgPSBjLkdldENoaWxkSW5kZXhBKCk7XG4gICAgaW5kZXhCID0gYy5HZXRDaGlsZEluZGV4QigpO1xuICAgIGJvZHlBID0gZml4dHVyZUEubV9ib2R5O1xuICAgIGJvZHlCID0gZml4dHVyZUIubV9ib2R5O1xuXG4gICAgLy8gSW5zZXJ0IGludG8gdGhlIHdvcmxkLlxuICAgIGMubV9wcmV2ID0gbnVsbDtcbiAgICBjLm1fbmV4dCA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICBpZiAodGhpcy5tX2NvbnRhY3RMaXN0ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLm1fY29udGFjdExpc3QubV9wcmV2ID0gYztcbiAgICB9XG4gICAgdGhpcy5tX2NvbnRhY3RMaXN0ID0gYztcblxuICAgIC8vIENvbm5lY3QgdG8gaXNsYW5kIGdyYXBoLlxuXG4gICAgLy8gQ29ubmVjdCB0byBib2R5IEFcbiAgICBjLm1fbm9kZUEub3RoZXIgPSBib2R5QjtcblxuICAgIGMubV9ub2RlQS5wcmV2ID0gbnVsbDtcbiAgICBjLm1fbm9kZUEubmV4dCA9IGJvZHlBLm1fY29udGFjdExpc3Q7XG4gICAgaWYgKGJvZHlBLm1fY29udGFjdExpc3QgIT09IG51bGwpIHtcbiAgICAgIGJvZHlBLm1fY29udGFjdExpc3QucHJldiA9IGMubV9ub2RlQTtcbiAgICB9XG4gICAgYm9keUEubV9jb250YWN0TGlzdCA9IGMubV9ub2RlQTtcblxuICAgIC8vIENvbm5lY3QgdG8gYm9keSBCXG4gICAgYy5tX25vZGVCLm90aGVyID0gYm9keUE7XG5cbiAgICBjLm1fbm9kZUIucHJldiA9IG51bGw7XG4gICAgYy5tX25vZGVCLm5leHQgPSBib2R5Qi5tX2NvbnRhY3RMaXN0O1xuICAgIGlmIChib2R5Qi5tX2NvbnRhY3RMaXN0ICE9PSBudWxsKSB7XG4gICAgICBib2R5Qi5tX2NvbnRhY3RMaXN0LnByZXYgPSBjLm1fbm9kZUI7XG4gICAgfVxuICAgIGJvZHlCLm1fY29udGFjdExpc3QgPSBjLm1fbm9kZUI7XG5cbiAgICArK3RoaXMubV9jb250YWN0Q291bnQ7XG4gIH1cblxuICBwdWJsaWMgRmluZE5ld0NvbnRhY3RzKCk6IHZvaWQge1xuICAgIHRoaXMubV9icm9hZFBoYXNlLlVwZGF0ZVBhaXJzKChwcm94eUE6IGIyRml4dHVyZVByb3h5LCBwcm94eUI6IGIyRml4dHVyZVByb3h5KTogdm9pZCA9PiB7XG4gICAgICB0aGlzLkFkZFBhaXIocHJveHlBLCBwcm94eUIpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIERlc3Ryb3koYzogYjJDb250YWN0KTogdm9pZCB7XG4gICAgY29uc3QgZml4dHVyZUE6IGIyRml4dHVyZSA9IGMuR2V0Rml4dHVyZUEoKTtcbiAgICBjb25zdCBmaXh0dXJlQjogYjJGaXh0dXJlID0gYy5HZXRGaXh0dXJlQigpO1xuICAgIGNvbnN0IGJvZHlBOiBiMkJvZHkgPSBmaXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgY29uc3QgYm9keUI6IGIyQm9keSA9IGZpeHR1cmVCLkdldEJvZHkoKTtcblxuICAgIGlmICh0aGlzLm1fY29udGFjdExpc3RlbmVyICYmIGMuSXNUb3VjaGluZygpKSB7XG4gICAgICB0aGlzLm1fY29udGFjdExpc3RlbmVyLkVuZENvbnRhY3QoYyk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGZyb20gdGhlIHdvcmxkLlxuICAgIGlmIChjLm1fcHJldikge1xuICAgICAgYy5tX3ByZXYubV9uZXh0ID0gYy5tX25leHQ7XG4gICAgfVxuXG4gICAgaWYgKGMubV9uZXh0KSB7XG4gICAgICBjLm1fbmV4dC5tX3ByZXYgPSBjLm1fcHJldjtcbiAgICB9XG5cbiAgICBpZiAoYyA9PT0gdGhpcy5tX2NvbnRhY3RMaXN0KSB7XG4gICAgICB0aGlzLm1fY29udGFjdExpc3QgPSBjLm1fbmV4dDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZnJvbSBib2R5IDFcbiAgICBpZiAoYy5tX25vZGVBLnByZXYpIHtcbiAgICAgIGMubV9ub2RlQS5wcmV2Lm5leHQgPSBjLm1fbm9kZUEubmV4dDtcbiAgICB9XG5cbiAgICBpZiAoYy5tX25vZGVBLm5leHQpIHtcbiAgICAgIGMubV9ub2RlQS5uZXh0LnByZXYgPSBjLm1fbm9kZUEucHJldjtcbiAgICB9XG5cbiAgICBpZiAoYy5tX25vZGVBID09PSBib2R5QS5tX2NvbnRhY3RMaXN0KSB7XG4gICAgICBib2R5QS5tX2NvbnRhY3RMaXN0ID0gYy5tX25vZGVBLm5leHQ7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGZyb20gYm9keSAyXG4gICAgaWYgKGMubV9ub2RlQi5wcmV2KSB7XG4gICAgICBjLm1fbm9kZUIucHJldi5uZXh0ID0gYy5tX25vZGVCLm5leHQ7XG4gICAgfVxuXG4gICAgaWYgKGMubV9ub2RlQi5uZXh0KSB7XG4gICAgICBjLm1fbm9kZUIubmV4dC5wcmV2ID0gYy5tX25vZGVCLnByZXY7XG4gICAgfVxuXG4gICAgaWYgKGMubV9ub2RlQiA9PT0gYm9keUIubV9jb250YWN0TGlzdCkge1xuICAgICAgYm9keUIubV9jb250YWN0TGlzdCA9IGMubV9ub2RlQi5uZXh0O1xuICAgIH1cblxuICAgIC8vIG1vdmVkIHRoaXMgZnJvbSBiMkNvbnRhY3RGYWN0b3J5OkRlc3Ryb3lcbiAgICBpZiAoYy5tX21hbmlmb2xkLnBvaW50Q291bnQgPiAwICYmXG4gICAgICAhZml4dHVyZUEuSXNTZW5zb3IoKSAmJlxuICAgICAgIWZpeHR1cmVCLklzU2Vuc29yKCkpIHtcbiAgICAgIGZpeHR1cmVBLkdldEJvZHkoKS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIGZpeHR1cmVCLkdldEJvZHkoKS5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBDYWxsIHRoZSBmYWN0b3J5LlxuICAgIHRoaXMubV9jb250YWN0RmFjdG9yeS5EZXN0cm95KGMpO1xuICAgIC0tdGhpcy5tX2NvbnRhY3RDb3VudDtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgdGhlIHRvcCBsZXZlbCBjb2xsaXNpb24gY2FsbCBmb3IgdGhlIHRpbWUgc3RlcC4gSGVyZVxuICAvLyBhbGwgdGhlIG5hcnJvdyBwaGFzZSBjb2xsaXNpb24gaXMgcHJvY2Vzc2VkIGZvciB0aGUgd29ybGRcbiAgLy8gY29udGFjdCBsaXN0LlxuICBwdWJsaWMgQ29sbGlkZSgpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgYXdha2UgY29udGFjdHMuXG4gICAgbGV0IGM6IGIyQ29udGFjdCB8IG51bGwgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGMpIHtcbiAgICAgIGNvbnN0IGZpeHR1cmVBOiBiMkZpeHR1cmUgPSBjLkdldEZpeHR1cmVBKCk7XG4gICAgICBjb25zdCBmaXh0dXJlQjogYjJGaXh0dXJlID0gYy5HZXRGaXh0dXJlQigpO1xuICAgICAgY29uc3QgaW5kZXhBOiBudW1iZXIgPSBjLkdldENoaWxkSW5kZXhBKCk7XG4gICAgICBjb25zdCBpbmRleEI6IG51bWJlciA9IGMuR2V0Q2hpbGRJbmRleEIoKTtcbiAgICAgIGNvbnN0IGJvZHlBOiBiMkJvZHkgPSBmaXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgICBjb25zdCBib2R5QjogYjJCb2R5ID0gZml4dHVyZUIuR2V0Qm9keSgpO1xuXG4gICAgICAvLyBJcyB0aGlzIGNvbnRhY3QgZmxhZ2dlZCBmb3IgZmlsdGVyaW5nP1xuICAgICAgaWYgKGMubV9maWx0ZXJGbGFnKSB7XG4gICAgICAgIC8vIENoZWNrIHVzZXIgZmlsdGVyaW5nLlxuICAgICAgICBpZiAodGhpcy5tX2NvbnRhY3RGaWx0ZXIgJiYgIXRoaXMubV9jb250YWN0RmlsdGVyLlNob3VsZENvbGxpZGUoZml4dHVyZUEsIGZpeHR1cmVCKSkge1xuICAgICAgICAgIGNvbnN0IGNOdWtlOiBiMkNvbnRhY3QgPSBjO1xuICAgICAgICAgIGMgPSBjTnVrZS5tX25leHQ7XG4gICAgICAgICAgdGhpcy5EZXN0cm95KGNOdWtlKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsZWFyIHRoZSBmaWx0ZXJpbmcgZmxhZy5cbiAgICAgICAgYy5tX2ZpbHRlckZsYWcgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aXZlQTogYm9vbGVhbiA9IGJvZHlBLklzQXdha2UoKSAmJiBib2R5QS5tX3R5cGUgIT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keTtcbiAgICAgIGNvbnN0IGFjdGl2ZUI6IGJvb2xlYW4gPSBib2R5Qi5Jc0F3YWtlKCkgJiYgYm9keUIubV90eXBlICE9PSBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHk7XG5cbiAgICAgIC8vIEF0IGxlYXN0IG9uZSBib2R5IG11c3QgYmUgYXdha2UgYW5kIGl0IG11c3QgYmUgZHluYW1pYyBvciBraW5lbWF0aWMuXG4gICAgICBpZiAoIWFjdGl2ZUEgJiYgIWFjdGl2ZUIpIHtcbiAgICAgICAgYyA9IGMubV9uZXh0O1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdHJlZU5vZGVBOiBiMlRyZWVOb2RlPGIyRml4dHVyZVByb3h5PiA9IGZpeHR1cmVBLm1fcHJveGllc1tpbmRleEFdLnRyZWVOb2RlO1xuICAgICAgY29uc3QgdHJlZU5vZGVCOiBiMlRyZWVOb2RlPGIyRml4dHVyZVByb3h5PiA9IGZpeHR1cmVCLm1fcHJveGllc1tpbmRleEJdLnRyZWVOb2RlO1xuICAgICAgY29uc3Qgb3ZlcmxhcDogYm9vbGVhbiA9IGIyVGVzdE92ZXJsYXBBQUJCKHRyZWVOb2RlQS5hYWJiLCB0cmVlTm9kZUIuYWFiYik7XG5cbiAgICAgIC8vIEhlcmUgd2UgZGVzdHJveSBjb250YWN0cyB0aGF0IGNlYXNlIHRvIG92ZXJsYXAgaW4gdGhlIGJyb2FkLXBoYXNlLlxuICAgICAgaWYgKCFvdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGNOdWtlOiBiMkNvbnRhY3QgPSBjO1xuICAgICAgICBjID0gY051a2UubV9uZXh0O1xuICAgICAgICB0aGlzLkRlc3Ryb3koY051a2UpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRhY3QgcGVyc2lzdHMuXG4gICAgICBjLlVwZGF0ZSh0aGlzLm1fY29udGFjdExpc3RlbmVyKTtcbiAgICAgIGMgPSBjLm1fbmV4dDtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBNE5BO0FBek5BO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQW5PQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_contact_manager.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_contact_solver.ts":
/*!*************************************************!*\
  !*** ./src/box2d/dynamics/b2_contact_solver.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ContactSolver = exports.b2PositionSolverManifold = exports.b2ContactSolverDef = exports.b2ContactPositionConstraint = exports.b2ContactVelocityConstraint = exports.b2VelocityConstraintPoint = exports.set_g_blockSolve = exports.get_g_blockSolve = exports.g_blockSolve = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_collision_2 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_time_step_1 = __webpack_require__(/*! ./b2_time_step */ \"./src/box2d/dynamics/b2_time_step.ts\");\nexports.g_blockSolve = false;\nfunction get_g_blockSolve() { return exports.g_blockSolve; }\nexports.get_g_blockSolve = get_g_blockSolve;\nfunction set_g_blockSolve(value) { exports.g_blockSolve = value; }\nexports.set_g_blockSolve = set_g_blockSolve;\nvar b2VelocityConstraintPoint = (function () {\n    function b2VelocityConstraintPoint() {\n        this.rA = new b2_math_1.b2Vec2();\n        this.rB = new b2_math_1.b2Vec2();\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.normalMass = 0;\n        this.tangentMass = 0;\n        this.velocityBias = 0;\n    }\n    b2VelocityConstraintPoint.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2VelocityConstraintPoint(); });\n    };\n    return b2VelocityConstraintPoint;\n}());\nexports.b2VelocityConstraintPoint = b2VelocityConstraintPoint;\nvar b2ContactVelocityConstraint = (function () {\n    function b2ContactVelocityConstraint() {\n        this.points = b2VelocityConstraintPoint.MakeArray(b2_settings_1.b2_maxManifoldPoints);\n        this.normal = new b2_math_1.b2Vec2();\n        this.tangent = new b2_math_1.b2Vec2();\n        this.normalMass = new b2_math_1.b2Mat22();\n        this.K = new b2_math_1.b2Mat22();\n        this.indexA = 0;\n        this.indexB = 0;\n        this.invMassA = 0;\n        this.invMassB = 0;\n        this.invIA = 0;\n        this.invIB = 0;\n        this.friction = 0;\n        this.restitution = 0;\n        this.threshold = 0;\n        this.tangentSpeed = 0;\n        this.pointCount = 0;\n        this.contactIndex = 0;\n    }\n    b2ContactVelocityConstraint.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2ContactVelocityConstraint(); });\n    };\n    return b2ContactVelocityConstraint;\n}());\nexports.b2ContactVelocityConstraint = b2ContactVelocityConstraint;\nvar b2ContactPositionConstraint = (function () {\n    function b2ContactPositionConstraint() {\n        this.localPoints = b2_math_1.b2Vec2.MakeArray(b2_settings_1.b2_maxManifoldPoints);\n        this.localNormal = new b2_math_1.b2Vec2();\n        this.localPoint = new b2_math_1.b2Vec2();\n        this.indexA = 0;\n        this.indexB = 0;\n        this.invMassA = 0;\n        this.invMassB = 0;\n        this.localCenterA = new b2_math_1.b2Vec2();\n        this.localCenterB = new b2_math_1.b2Vec2();\n        this.invIA = 0;\n        this.invIB = 0;\n        this.type = b2_collision_2.b2ManifoldType.e_unknown;\n        this.radiusA = 0;\n        this.radiusB = 0;\n        this.pointCount = 0;\n    }\n    b2ContactPositionConstraint.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2ContactPositionConstraint(); });\n    };\n    return b2ContactPositionConstraint;\n}());\nexports.b2ContactPositionConstraint = b2ContactPositionConstraint;\nvar b2ContactSolverDef = (function () {\n    function b2ContactSolverDef() {\n        this.step = new b2_time_step_1.b2TimeStep();\n        this.count = 0;\n    }\n    return b2ContactSolverDef;\n}());\nexports.b2ContactSolverDef = b2ContactSolverDef;\nvar b2PositionSolverManifold = (function () {\n    function b2PositionSolverManifold() {\n        this.normal = new b2_math_1.b2Vec2();\n        this.point = new b2_math_1.b2Vec2();\n        this.separation = 0;\n    }\n    b2PositionSolverManifold.prototype.Initialize = function (pc, xfA, xfB, index) {\n        var pointA = b2PositionSolverManifold.Initialize_s_pointA;\n        var pointB = b2PositionSolverManifold.Initialize_s_pointB;\n        var planePoint = b2PositionSolverManifold.Initialize_s_planePoint;\n        var clipPoint = b2PositionSolverManifold.Initialize_s_clipPoint;\n        switch (pc.type) {\n            case b2_collision_2.b2ManifoldType.e_circles: {\n                b2_math_1.b2Transform.MulXV(xfA, pc.localPoint, pointA);\n                b2_math_1.b2Transform.MulXV(xfB, pc.localPoints[0], pointB);\n                b2_math_1.b2Vec2.SubVV(pointB, pointA, this.normal).SelfNormalize();\n                b2_math_1.b2Vec2.MidVV(pointA, pointB, this.point);\n                this.separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pointB, pointA, b2_math_1.b2Vec2.s_t0), this.normal) - pc.radiusA - pc.radiusB;\n                break;\n            }\n            case b2_collision_2.b2ManifoldType.e_faceA: {\n                b2_math_1.b2Rot.MulRV(xfA.q, pc.localNormal, this.normal);\n                b2_math_1.b2Transform.MulXV(xfA, pc.localPoint, planePoint);\n                b2_math_1.b2Transform.MulXV(xfB, pc.localPoints[index], clipPoint);\n                this.separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(clipPoint, planePoint, b2_math_1.b2Vec2.s_t0), this.normal) - pc.radiusA - pc.radiusB;\n                this.point.Copy(clipPoint);\n                break;\n            }\n            case b2_collision_2.b2ManifoldType.e_faceB: {\n                b2_math_1.b2Rot.MulRV(xfB.q, pc.localNormal, this.normal);\n                b2_math_1.b2Transform.MulXV(xfB, pc.localPoint, planePoint);\n                b2_math_1.b2Transform.MulXV(xfA, pc.localPoints[index], clipPoint);\n                this.separation = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(clipPoint, planePoint, b2_math_1.b2Vec2.s_t0), this.normal) - pc.radiusA - pc.radiusB;\n                this.point.Copy(clipPoint);\n                this.normal.SelfNeg();\n                break;\n            }\n        }\n    };\n    b2PositionSolverManifold.Initialize_s_pointA = new b2_math_1.b2Vec2();\n    b2PositionSolverManifold.Initialize_s_pointB = new b2_math_1.b2Vec2();\n    b2PositionSolverManifold.Initialize_s_planePoint = new b2_math_1.b2Vec2();\n    b2PositionSolverManifold.Initialize_s_clipPoint = new b2_math_1.b2Vec2();\n    return b2PositionSolverManifold;\n}());\nexports.b2PositionSolverManifold = b2PositionSolverManifold;\nvar b2ContactSolver = (function () {\n    function b2ContactSolver() {\n        this.m_step = new b2_time_step_1.b2TimeStep();\n        this.m_positionConstraints = b2ContactPositionConstraint.MakeArray(1024);\n        this.m_velocityConstraints = b2ContactVelocityConstraint.MakeArray(1024);\n        this.m_count = 0;\n    }\n    b2ContactSolver.prototype.Initialize = function (def) {\n        this.m_step.Copy(def.step);\n        this.m_count = def.count;\n        if (this.m_positionConstraints.length < this.m_count) {\n            var new_length = b2_math_1.b2Max(this.m_positionConstraints.length * 2, this.m_count);\n            while (this.m_positionConstraints.length < new_length) {\n                this.m_positionConstraints[this.m_positionConstraints.length] = new b2ContactPositionConstraint();\n            }\n        }\n        if (this.m_velocityConstraints.length < this.m_count) {\n            var new_length = b2_math_1.b2Max(this.m_velocityConstraints.length * 2, this.m_count);\n            while (this.m_velocityConstraints.length < new_length) {\n                this.m_velocityConstraints[this.m_velocityConstraints.length] = new b2ContactVelocityConstraint();\n            }\n        }\n        this.m_positions = def.positions;\n        this.m_velocities = def.velocities;\n        this.m_contacts = def.contacts;\n        for (var i = 0; i < this.m_count; ++i) {\n            var contact = this.m_contacts[i];\n            var fixtureA = contact.m_fixtureA;\n            var fixtureB = contact.m_fixtureB;\n            var shapeA = fixtureA.GetShape();\n            var shapeB = fixtureB.GetShape();\n            var radiusA = shapeA.m_radius;\n            var radiusB = shapeB.m_radius;\n            var bodyA = fixtureA.GetBody();\n            var bodyB = fixtureB.GetBody();\n            var manifold = contact.GetManifold();\n            var pointCount = manifold.pointCount;\n            var vc = this.m_velocityConstraints[i];\n            vc.friction = contact.m_friction;\n            vc.restitution = contact.m_restitution;\n            vc.threshold = contact.m_restitutionThreshold;\n            vc.tangentSpeed = contact.m_tangentSpeed;\n            vc.indexA = bodyA.m_islandIndex;\n            vc.indexB = bodyB.m_islandIndex;\n            vc.invMassA = bodyA.m_invMass;\n            vc.invMassB = bodyB.m_invMass;\n            vc.invIA = bodyA.m_invI;\n            vc.invIB = bodyB.m_invI;\n            vc.contactIndex = i;\n            vc.pointCount = pointCount;\n            vc.K.SetZero();\n            vc.normalMass.SetZero();\n            var pc = this.m_positionConstraints[i];\n            pc.indexA = bodyA.m_islandIndex;\n            pc.indexB = bodyB.m_islandIndex;\n            pc.invMassA = bodyA.m_invMass;\n            pc.invMassB = bodyB.m_invMass;\n            pc.localCenterA.Copy(bodyA.m_sweep.localCenter);\n            pc.localCenterB.Copy(bodyB.m_sweep.localCenter);\n            pc.invIA = bodyA.m_invI;\n            pc.invIB = bodyB.m_invI;\n            pc.localNormal.Copy(manifold.localNormal);\n            pc.localPoint.Copy(manifold.localPoint);\n            pc.pointCount = pointCount;\n            pc.radiusA = radiusA;\n            pc.radiusB = radiusB;\n            pc.type = manifold.type;\n            for (var j = 0; j < pointCount; ++j) {\n                var cp = manifold.points[j];\n                var vcp = vc.points[j];\n                if (this.m_step.warmStarting) {\n                    vcp.normalImpulse = this.m_step.dtRatio * cp.normalImpulse;\n                    vcp.tangentImpulse = this.m_step.dtRatio * cp.tangentImpulse;\n                }\n                else {\n                    vcp.normalImpulse = 0;\n                    vcp.tangentImpulse = 0;\n                }\n                vcp.rA.SetZero();\n                vcp.rB.SetZero();\n                vcp.normalMass = 0;\n                vcp.tangentMass = 0;\n                vcp.velocityBias = 0;\n                pc.localPoints[j].Copy(cp.localPoint);\n            }\n        }\n        return this;\n    };\n    b2ContactSolver.prototype.InitializeVelocityConstraints = function () {\n        var xfA = b2ContactSolver.InitializeVelocityConstraints_s_xfA;\n        var xfB = b2ContactSolver.InitializeVelocityConstraints_s_xfB;\n        var worldManifold = b2ContactSolver.InitializeVelocityConstraints_s_worldManifold;\n        var k_maxConditionNumber = 1000;\n        for (var i = 0; i < this.m_count; ++i) {\n            var vc = this.m_velocityConstraints[i];\n            var pc = this.m_positionConstraints[i];\n            var radiusA = pc.radiusA;\n            var radiusB = pc.radiusB;\n            var manifold = this.m_contacts[vc.contactIndex].GetManifold();\n            var indexA = vc.indexA;\n            var indexB = vc.indexB;\n            var mA = vc.invMassA;\n            var mB = vc.invMassB;\n            var iA = vc.invIA;\n            var iB = vc.invIB;\n            var localCenterA = pc.localCenterA;\n            var localCenterB = pc.localCenterB;\n            var cA = this.m_positions[indexA].c;\n            var aA = this.m_positions[indexA].a;\n            var vA = this.m_velocities[indexA].v;\n            var wA = this.m_velocities[indexA].w;\n            var cB = this.m_positions[indexB].c;\n            var aB = this.m_positions[indexB].a;\n            var vB = this.m_velocities[indexB].v;\n            var wB = this.m_velocities[indexB].w;\n            xfA.q.SetAngle(aA);\n            xfB.q.SetAngle(aB);\n            b2_math_1.b2Vec2.SubVV(cA, b2_math_1.b2Rot.MulRV(xfA.q, localCenterA, b2_math_1.b2Vec2.s_t0), xfA.p);\n            b2_math_1.b2Vec2.SubVV(cB, b2_math_1.b2Rot.MulRV(xfB.q, localCenterB, b2_math_1.b2Vec2.s_t0), xfB.p);\n            worldManifold.Initialize(manifold, xfA, radiusA, xfB, radiusB);\n            vc.normal.Copy(worldManifold.normal);\n            b2_math_1.b2Vec2.CrossVOne(vc.normal, vc.tangent);\n            var pointCount = vc.pointCount;\n            for (var j = 0; j < pointCount; ++j) {\n                var vcp = vc.points[j];\n                b2_math_1.b2Vec2.SubVV(worldManifold.points[j], cA, vcp.rA);\n                b2_math_1.b2Vec2.SubVV(worldManifold.points[j], cB, vcp.rB);\n                var rnA = b2_math_1.b2Vec2.CrossVV(vcp.rA, vc.normal);\n                var rnB = b2_math_1.b2Vec2.CrossVV(vcp.rB, vc.normal);\n                var kNormal = mA + mB + iA * rnA * rnA + iB * rnB * rnB;\n                vcp.normalMass = kNormal > 0 ? 1 / kNormal : 0;\n                var tangent = vc.tangent;\n                var rtA = b2_math_1.b2Vec2.CrossVV(vcp.rA, tangent);\n                var rtB = b2_math_1.b2Vec2.CrossVV(vcp.rB, tangent);\n                var kTangent = mA + mB + iA * rtA * rtA + iB * rtB * rtB;\n                vcp.tangentMass = kTangent > 0 ? 1 / kTangent : 0;\n                vcp.velocityBias = 0;\n                var vRel = b2_math_1.b2Vec2.DotVV(vc.normal, b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, vcp.rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, vcp.rA, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0));\n                if (vRel < -vc.threshold) {\n                    vcp.velocityBias += (-vc.restitution * vRel);\n                }\n            }\n            if (vc.pointCount === 2 && exports.g_blockSolve) {\n                var vcp1 = vc.points[0];\n                var vcp2 = vc.points[1];\n                var rn1A = b2_math_1.b2Vec2.CrossVV(vcp1.rA, vc.normal);\n                var rn1B = b2_math_1.b2Vec2.CrossVV(vcp1.rB, vc.normal);\n                var rn2A = b2_math_1.b2Vec2.CrossVV(vcp2.rA, vc.normal);\n                var rn2B = b2_math_1.b2Vec2.CrossVV(vcp2.rB, vc.normal);\n                var k11 = mA + mB + iA * rn1A * rn1A + iB * rn1B * rn1B;\n                var k22 = mA + mB + iA * rn2A * rn2A + iB * rn2B * rn2B;\n                var k12 = mA + mB + iA * rn1A * rn2A + iB * rn1B * rn2B;\n                if (k11 * k11 < k_maxConditionNumber * (k11 * k22 - k12 * k12)) {\n                    vc.K.ex.Set(k11, k12);\n                    vc.K.ey.Set(k12, k22);\n                    vc.K.GetInverse(vc.normalMass);\n                }\n                else {\n                    vc.pointCount = 1;\n                }\n            }\n        }\n    };\n    b2ContactSolver.prototype.WarmStart = function () {\n        var P = b2ContactSolver.WarmStart_s_P;\n        for (var i = 0; i < this.m_count; ++i) {\n            var vc = this.m_velocityConstraints[i];\n            var indexA = vc.indexA;\n            var indexB = vc.indexB;\n            var mA = vc.invMassA;\n            var iA = vc.invIA;\n            var mB = vc.invMassB;\n            var iB = vc.invIB;\n            var pointCount = vc.pointCount;\n            var vA = this.m_velocities[indexA].v;\n            var wA = this.m_velocities[indexA].w;\n            var vB = this.m_velocities[indexB].v;\n            var wB = this.m_velocities[indexB].w;\n            var normal = vc.normal;\n            var tangent = vc.tangent;\n            for (var j = 0; j < pointCount; ++j) {\n                var vcp = vc.points[j];\n                b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.MulSV(vcp.normalImpulse, normal, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.MulSV(vcp.tangentImpulse, tangent, b2_math_1.b2Vec2.s_t1), P);\n                wA -= iA * b2_math_1.b2Vec2.CrossVV(vcp.rA, P);\n                vA.SelfMulSub(mA, P);\n                wB += iB * b2_math_1.b2Vec2.CrossVV(vcp.rB, P);\n                vB.SelfMulAdd(mB, P);\n            }\n            this.m_velocities[indexA].w = wA;\n            this.m_velocities[indexB].w = wB;\n        }\n    };\n    b2ContactSolver.prototype.SolveVelocityConstraints = function () {\n        var dv = b2ContactSolver.SolveVelocityConstraints_s_dv;\n        var dv1 = b2ContactSolver.SolveVelocityConstraints_s_dv1;\n        var dv2 = b2ContactSolver.SolveVelocityConstraints_s_dv2;\n        var P = b2ContactSolver.SolveVelocityConstraints_s_P;\n        var a = b2ContactSolver.SolveVelocityConstraints_s_a;\n        var b = b2ContactSolver.SolveVelocityConstraints_s_b;\n        var x = b2ContactSolver.SolveVelocityConstraints_s_x;\n        var d = b2ContactSolver.SolveVelocityConstraints_s_d;\n        var P1 = b2ContactSolver.SolveVelocityConstraints_s_P1;\n        var P2 = b2ContactSolver.SolveVelocityConstraints_s_P2;\n        var P1P2 = b2ContactSolver.SolveVelocityConstraints_s_P1P2;\n        for (var i = 0; i < this.m_count; ++i) {\n            var vc = this.m_velocityConstraints[i];\n            var indexA = vc.indexA;\n            var indexB = vc.indexB;\n            var mA = vc.invMassA;\n            var iA = vc.invIA;\n            var mB = vc.invMassB;\n            var iB = vc.invIB;\n            var pointCount = vc.pointCount;\n            var vA = this.m_velocities[indexA].v;\n            var wA = this.m_velocities[indexA].w;\n            var vB = this.m_velocities[indexB].v;\n            var wB = this.m_velocities[indexB].w;\n            var normal = vc.normal;\n            var tangent = vc.tangent;\n            var friction = vc.friction;\n            for (var j = 0; j < pointCount; ++j) {\n                var vcp = vc.points[j];\n                b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, vcp.rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, vcp.rA, b2_math_1.b2Vec2.s_t1), dv);\n                var vt = b2_math_1.b2Vec2.DotVV(dv, tangent) - vc.tangentSpeed;\n                var lambda = vcp.tangentMass * (-vt);\n                var maxFriction = friction * vcp.normalImpulse;\n                var newImpulse = b2_math_1.b2Clamp(vcp.tangentImpulse + lambda, (-maxFriction), maxFriction);\n                lambda = newImpulse - vcp.tangentImpulse;\n                vcp.tangentImpulse = newImpulse;\n                b2_math_1.b2Vec2.MulSV(lambda, tangent, P);\n                vA.SelfMulSub(mA, P);\n                wA -= iA * b2_math_1.b2Vec2.CrossVV(vcp.rA, P);\n                vB.SelfMulAdd(mB, P);\n                wB += iB * b2_math_1.b2Vec2.CrossVV(vcp.rB, P);\n            }\n            if (vc.pointCount === 1 || exports.g_blockSolve === false) {\n                for (var j = 0; j < pointCount; ++j) {\n                    var vcp = vc.points[j];\n                    b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, vcp.rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, vcp.rA, b2_math_1.b2Vec2.s_t1), dv);\n                    var vn = b2_math_1.b2Vec2.DotVV(dv, normal);\n                    var lambda = (-vcp.normalMass * (vn - vcp.velocityBias));\n                    var newImpulse = b2_math_1.b2Max(vcp.normalImpulse + lambda, 0);\n                    lambda = newImpulse - vcp.normalImpulse;\n                    vcp.normalImpulse = newImpulse;\n                    b2_math_1.b2Vec2.MulSV(lambda, normal, P);\n                    vA.SelfMulSub(mA, P);\n                    wA -= iA * b2_math_1.b2Vec2.CrossVV(vcp.rA, P);\n                    vB.SelfMulAdd(mB, P);\n                    wB += iB * b2_math_1.b2Vec2.CrossVV(vcp.rB, P);\n                }\n            }\n            else {\n                var cp1 = vc.points[0];\n                var cp2 = vc.points[1];\n                a.Set(cp1.normalImpulse, cp2.normalImpulse);\n                b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, cp1.rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, cp1.rA, b2_math_1.b2Vec2.s_t1), dv1);\n                b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, cp2.rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, cp2.rA, b2_math_1.b2Vec2.s_t1), dv2);\n                var vn1 = b2_math_1.b2Vec2.DotVV(dv1, normal);\n                var vn2 = b2_math_1.b2Vec2.DotVV(dv2, normal);\n                b.x = vn1 - cp1.velocityBias;\n                b.y = vn2 - cp2.velocityBias;\n                b.SelfSub(b2_math_1.b2Mat22.MulMV(vc.K, a, b2_math_1.b2Vec2.s_t0));\n                for (;;) {\n                    b2_math_1.b2Mat22.MulMV(vc.normalMass, b, x).SelfNeg();\n                    if (x.x >= 0 && x.y >= 0) {\n                        b2_math_1.b2Vec2.SubVV(x, a, d);\n                        b2_math_1.b2Vec2.MulSV(d.x, normal, P1);\n                        b2_math_1.b2Vec2.MulSV(d.y, normal, P2);\n                        b2_math_1.b2Vec2.AddVV(P1, P2, P1P2);\n                        vA.SelfMulSub(mA, P1P2);\n                        wA -= iA * (b2_math_1.b2Vec2.CrossVV(cp1.rA, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rA, P2));\n                        vB.SelfMulAdd(mB, P1P2);\n                        wB += iB * (b2_math_1.b2Vec2.CrossVV(cp1.rB, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rB, P2));\n                        cp1.normalImpulse = x.x;\n                        cp2.normalImpulse = x.y;\n                        break;\n                    }\n                    x.x = (-cp1.normalMass * b.x);\n                    x.y = 0;\n                    vn1 = 0;\n                    vn2 = vc.K.ex.y * x.x + b.y;\n                    if (x.x >= 0 && vn2 >= 0) {\n                        b2_math_1.b2Vec2.SubVV(x, a, d);\n                        b2_math_1.b2Vec2.MulSV(d.x, normal, P1);\n                        b2_math_1.b2Vec2.MulSV(d.y, normal, P2);\n                        b2_math_1.b2Vec2.AddVV(P1, P2, P1P2);\n                        vA.SelfMulSub(mA, P1P2);\n                        wA -= iA * (b2_math_1.b2Vec2.CrossVV(cp1.rA, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rA, P2));\n                        vB.SelfMulAdd(mB, P1P2);\n                        wB += iB * (b2_math_1.b2Vec2.CrossVV(cp1.rB, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rB, P2));\n                        cp1.normalImpulse = x.x;\n                        cp2.normalImpulse = x.y;\n                        break;\n                    }\n                    x.x = 0;\n                    x.y = (-cp2.normalMass * b.y);\n                    vn1 = vc.K.ey.x * x.y + b.x;\n                    vn2 = 0;\n                    if (x.y >= 0 && vn1 >= 0) {\n                        b2_math_1.b2Vec2.SubVV(x, a, d);\n                        b2_math_1.b2Vec2.MulSV(d.x, normal, P1);\n                        b2_math_1.b2Vec2.MulSV(d.y, normal, P2);\n                        b2_math_1.b2Vec2.AddVV(P1, P2, P1P2);\n                        vA.SelfMulSub(mA, P1P2);\n                        wA -= iA * (b2_math_1.b2Vec2.CrossVV(cp1.rA, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rA, P2));\n                        vB.SelfMulAdd(mB, P1P2);\n                        wB += iB * (b2_math_1.b2Vec2.CrossVV(cp1.rB, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rB, P2));\n                        cp1.normalImpulse = x.x;\n                        cp2.normalImpulse = x.y;\n                        break;\n                    }\n                    x.x = 0;\n                    x.y = 0;\n                    vn1 = b.x;\n                    vn2 = b.y;\n                    if (vn1 >= 0 && vn2 >= 0) {\n                        b2_math_1.b2Vec2.SubVV(x, a, d);\n                        b2_math_1.b2Vec2.MulSV(d.x, normal, P1);\n                        b2_math_1.b2Vec2.MulSV(d.y, normal, P2);\n                        b2_math_1.b2Vec2.AddVV(P1, P2, P1P2);\n                        vA.SelfMulSub(mA, P1P2);\n                        wA -= iA * (b2_math_1.b2Vec2.CrossVV(cp1.rA, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rA, P2));\n                        vB.SelfMulAdd(mB, P1P2);\n                        wB += iB * (b2_math_1.b2Vec2.CrossVV(cp1.rB, P1) + b2_math_1.b2Vec2.CrossVV(cp2.rB, P2));\n                        cp1.normalImpulse = x.x;\n                        cp2.normalImpulse = x.y;\n                        break;\n                    }\n                    break;\n                }\n            }\n            this.m_velocities[indexA].w = wA;\n            this.m_velocities[indexB].w = wB;\n        }\n    };\n    b2ContactSolver.prototype.StoreImpulses = function () {\n        for (var i = 0; i < this.m_count; ++i) {\n            var vc = this.m_velocityConstraints[i];\n            var manifold = this.m_contacts[vc.contactIndex].GetManifold();\n            for (var j = 0; j < vc.pointCount; ++j) {\n                manifold.points[j].normalImpulse = vc.points[j].normalImpulse;\n                manifold.points[j].tangentImpulse = vc.points[j].tangentImpulse;\n            }\n        }\n    };\n    b2ContactSolver.prototype.SolvePositionConstraints = function () {\n        var xfA = b2ContactSolver.SolvePositionConstraints_s_xfA;\n        var xfB = b2ContactSolver.SolvePositionConstraints_s_xfB;\n        var psm = b2ContactSolver.SolvePositionConstraints_s_psm;\n        var rA = b2ContactSolver.SolvePositionConstraints_s_rA;\n        var rB = b2ContactSolver.SolvePositionConstraints_s_rB;\n        var P = b2ContactSolver.SolvePositionConstraints_s_P;\n        var minSeparation = 0;\n        for (var i = 0; i < this.m_count; ++i) {\n            var pc = this.m_positionConstraints[i];\n            var indexA = pc.indexA;\n            var indexB = pc.indexB;\n            var localCenterA = pc.localCenterA;\n            var mA = pc.invMassA;\n            var iA = pc.invIA;\n            var localCenterB = pc.localCenterB;\n            var mB = pc.invMassB;\n            var iB = pc.invIB;\n            var pointCount = pc.pointCount;\n            var cA = this.m_positions[indexA].c;\n            var aA = this.m_positions[indexA].a;\n            var cB = this.m_positions[indexB].c;\n            var aB = this.m_positions[indexB].a;\n            for (var j = 0; j < pointCount; ++j) {\n                xfA.q.SetAngle(aA);\n                xfB.q.SetAngle(aB);\n                b2_math_1.b2Vec2.SubVV(cA, b2_math_1.b2Rot.MulRV(xfA.q, localCenterA, b2_math_1.b2Vec2.s_t0), xfA.p);\n                b2_math_1.b2Vec2.SubVV(cB, b2_math_1.b2Rot.MulRV(xfB.q, localCenterB, b2_math_1.b2Vec2.s_t0), xfB.p);\n                psm.Initialize(pc, xfA, xfB, j);\n                var normal = psm.normal;\n                var point = psm.point;\n                var separation = psm.separation;\n                b2_math_1.b2Vec2.SubVV(point, cA, rA);\n                b2_math_1.b2Vec2.SubVV(point, cB, rB);\n                minSeparation = b2_math_1.b2Min(minSeparation, separation);\n                var C = b2_math_1.b2Clamp(b2_settings_1.b2_baumgarte * (separation + b2_settings_1.b2_linearSlop), (-b2_settings_1.b2_maxLinearCorrection), 0);\n                var rnA = b2_math_1.b2Vec2.CrossVV(rA, normal);\n                var rnB = b2_math_1.b2Vec2.CrossVV(rB, normal);\n                var K = mA + mB + iA * rnA * rnA + iB * rnB * rnB;\n                var impulse = K > 0 ? -C / K : 0;\n                b2_math_1.b2Vec2.MulSV(impulse, normal, P);\n                cA.SelfMulSub(mA, P);\n                aA -= iA * b2_math_1.b2Vec2.CrossVV(rA, P);\n                cB.SelfMulAdd(mB, P);\n                aB += iB * b2_math_1.b2Vec2.CrossVV(rB, P);\n            }\n            this.m_positions[indexA].a = aA;\n            this.m_positions[indexB].a = aB;\n        }\n        return minSeparation > (-3 * b2_settings_1.b2_linearSlop);\n    };\n    b2ContactSolver.prototype.SolveTOIPositionConstraints = function (toiIndexA, toiIndexB) {\n        var xfA = b2ContactSolver.SolveTOIPositionConstraints_s_xfA;\n        var xfB = b2ContactSolver.SolveTOIPositionConstraints_s_xfB;\n        var psm = b2ContactSolver.SolveTOIPositionConstraints_s_psm;\n        var rA = b2ContactSolver.SolveTOIPositionConstraints_s_rA;\n        var rB = b2ContactSolver.SolveTOIPositionConstraints_s_rB;\n        var P = b2ContactSolver.SolveTOIPositionConstraints_s_P;\n        var minSeparation = 0;\n        for (var i = 0; i < this.m_count; ++i) {\n            var pc = this.m_positionConstraints[i];\n            var indexA = pc.indexA;\n            var indexB = pc.indexB;\n            var localCenterA = pc.localCenterA;\n            var localCenterB = pc.localCenterB;\n            var pointCount = pc.pointCount;\n            var mA = 0;\n            var iA = 0;\n            if (indexA === toiIndexA || indexA === toiIndexB) {\n                mA = pc.invMassA;\n                iA = pc.invIA;\n            }\n            var mB = 0;\n            var iB = 0;\n            if (indexB === toiIndexA || indexB === toiIndexB) {\n                mB = pc.invMassB;\n                iB = pc.invIB;\n            }\n            var cA = this.m_positions[indexA].c;\n            var aA = this.m_positions[indexA].a;\n            var cB = this.m_positions[indexB].c;\n            var aB = this.m_positions[indexB].a;\n            for (var j = 0; j < pointCount; ++j) {\n                xfA.q.SetAngle(aA);\n                xfB.q.SetAngle(aB);\n                b2_math_1.b2Vec2.SubVV(cA, b2_math_1.b2Rot.MulRV(xfA.q, localCenterA, b2_math_1.b2Vec2.s_t0), xfA.p);\n                b2_math_1.b2Vec2.SubVV(cB, b2_math_1.b2Rot.MulRV(xfB.q, localCenterB, b2_math_1.b2Vec2.s_t0), xfB.p);\n                psm.Initialize(pc, xfA, xfB, j);\n                var normal = psm.normal;\n                var point = psm.point;\n                var separation = psm.separation;\n                b2_math_1.b2Vec2.SubVV(point, cA, rA);\n                b2_math_1.b2Vec2.SubVV(point, cB, rB);\n                minSeparation = b2_math_1.b2Min(minSeparation, separation);\n                var C = b2_math_1.b2Clamp(b2_settings_1.b2_toiBaumgarte * (separation + b2_settings_1.b2_linearSlop), (-b2_settings_1.b2_maxLinearCorrection), 0);\n                var rnA = b2_math_1.b2Vec2.CrossVV(rA, normal);\n                var rnB = b2_math_1.b2Vec2.CrossVV(rB, normal);\n                var K = mA + mB + iA * rnA * rnA + iB * rnB * rnB;\n                var impulse = K > 0 ? -C / K : 0;\n                b2_math_1.b2Vec2.MulSV(impulse, normal, P);\n                cA.SelfMulSub(mA, P);\n                aA -= iA * b2_math_1.b2Vec2.CrossVV(rA, P);\n                cB.SelfMulAdd(mB, P);\n                aB += iB * b2_math_1.b2Vec2.CrossVV(rB, P);\n            }\n            this.m_positions[indexA].a = aA;\n            this.m_positions[indexB].a = aB;\n        }\n        return minSeparation >= -1.5 * b2_settings_1.b2_linearSlop;\n    };\n    b2ContactSolver.InitializeVelocityConstraints_s_xfA = new b2_math_1.b2Transform();\n    b2ContactSolver.InitializeVelocityConstraints_s_xfB = new b2_math_1.b2Transform();\n    b2ContactSolver.InitializeVelocityConstraints_s_worldManifold = new b2_collision_1.b2WorldManifold();\n    b2ContactSolver.WarmStart_s_P = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_dv = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_dv1 = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_dv2 = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_a = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_b = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_x = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_d = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_P1 = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_P2 = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveVelocityConstraints_s_P1P2 = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolvePositionConstraints_s_xfA = new b2_math_1.b2Transform();\n    b2ContactSolver.SolvePositionConstraints_s_xfB = new b2_math_1.b2Transform();\n    b2ContactSolver.SolvePositionConstraints_s_psm = new b2PositionSolverManifold();\n    b2ContactSolver.SolvePositionConstraints_s_rA = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolvePositionConstraints_s_rB = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolvePositionConstraints_s_P = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveTOIPositionConstraints_s_xfA = new b2_math_1.b2Transform();\n    b2ContactSolver.SolveTOIPositionConstraints_s_xfB = new b2_math_1.b2Transform();\n    b2ContactSolver.SolveTOIPositionConstraints_s_psm = new b2PositionSolverManifold();\n    b2ContactSolver.SolveTOIPositionConstraints_s_rA = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveTOIPositionConstraints_s_rB = new b2_math_1.b2Vec2();\n    b2ContactSolver.SolveTOIPositionConstraints_s_P = new b2_math_1.b2Vec2();\n    return b2ContactSolver;\n}());\nexports.b2ContactSolver = b2ContactSolver;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY29udGFjdF9zb2x2ZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfY29udGFjdF9zb2x2ZXIudHM/YTc0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfbGluZWFyU2xvcCwgYjJfbWF4TWFuaWZvbGRQb2ludHMsIGIyX21heExpbmVhckNvcnJlY3Rpb24sIGIyX2JhdW1nYXJ0ZSwgYjJfdG9pQmF1bWdhcnRlLCBiMk1ha2VBcnJheSB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyTWluLCBiMk1heCwgYjJDbGFtcCwgYjJWZWMyLCBiMk1hdDIyLCBiMlJvdCwgYjJUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyTWFuaWZvbGQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZFBvaW50IH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaXNpb25cIjtcbmltcG9ydCB7IGIyV29ybGRNYW5pZm9sZCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMk1hbmlmb2xkVHlwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMlNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9zaGFwZVwiO1xuaW1wb3J0IHsgYjJDb250YWN0IH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuaW1wb3J0IHsgYjJCb2R5IH0gZnJvbSBcIi4vYjJfYm9keVwiO1xuaW1wb3J0IHsgYjJGaXh0dXJlIH0gZnJvbSBcIi4vYjJfZml4dHVyZVwiO1xuaW1wb3J0IHsgYjJUaW1lU3RlcCwgYjJQb3NpdGlvbiwgYjJWZWxvY2l0eSB9IGZyb20gXCIuL2IyX3RpbWVfc3RlcFwiO1xuXG4vLyBTb2x2ZXIgZGVidWdnaW5nIGlzIG5vcm1hbGx5IGRpc2FibGVkIGJlY2F1c2UgdGhlIGJsb2NrIHNvbHZlciBzb21ldGltZXMgaGFzIHRvIGRlYWwgd2l0aCBhIHBvb3JseSBjb25kaXRpb25lZCBlZmZlY3RpdmUgbWFzcyBtYXRyaXguXG4vLyAjZGVmaW5lIEIyX0RFQlVHX1NPTFZFUiAwXG5cbmV4cG9ydCBsZXQgZ19ibG9ja1NvbHZlOiBib29sZWFuID0gZmFsc2U7XG5leHBvcnQgZnVuY3Rpb24gZ2V0X2dfYmxvY2tTb2x2ZSgpOiBib29sZWFuIHsgcmV0dXJuIGdfYmxvY2tTb2x2ZTsgfVxuZXhwb3J0IGZ1bmN0aW9uIHNldF9nX2Jsb2NrU29sdmUodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHsgZ19ibG9ja1NvbHZlID0gdmFsdWU7IH1cblxuZXhwb3J0IGNsYXNzIGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQge1xuICBwdWJsaWMgcmVhZG9ubHkgckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IHJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBub3JtYWxJbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgdGFuZ2VudEltcHVsc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBub3JtYWxNYXNzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgdGFuZ2VudE1hc3M6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB2ZWxvY2l0eUJpYXM6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHN0YXRpYyBNYWtlQXJyYXkobGVuZ3RoOiBudW1iZXIpOiBiMlZlbG9jaXR5Q29uc3RyYWludFBvaW50W10ge1xuICAgIHJldHVybiBiMk1ha2VBcnJheShsZW5ndGgsIChpOiBudW1iZXIpID0+IG5ldyBiMlZlbG9jaXR5Q29uc3RyYWludFBvaW50KCkpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMkNvbnRhY3RWZWxvY2l0eUNvbnN0cmFpbnQge1xuICBwdWJsaWMgcmVhZG9ubHkgcG9pbnRzOiBiMlZlbG9jaXR5Q29uc3RyYWludFBvaW50W10gPSBiMlZlbG9jaXR5Q29uc3RyYWludFBvaW50Lk1ha2VBcnJheShiMl9tYXhNYW5pZm9sZFBvaW50cyk7XG4gIHB1YmxpYyByZWFkb25seSBub3JtYWw6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IHRhbmdlbnQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG5vcm1hbE1hc3M6IGIyTWF0MjIgPSBuZXcgYjJNYXQyMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgSzogYjJNYXQyMiA9IG5ldyBiMk1hdDIyKCk7XG4gIHB1YmxpYyBpbmRleEE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBpbmRleEI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBpbnZNYXNzQTogbnVtYmVyID0gMDtcbiAgcHVibGljIGludk1hc3NCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgaW52SUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBpbnZJQjogbnVtYmVyID0gMDtcbiAgcHVibGljIGZyaWN0aW9uOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVzdGl0dXRpb246IG51bWJlciA9IDA7XG4gIHB1YmxpYyB0aHJlc2hvbGQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB0YW5nZW50U3BlZWQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBwb2ludENvdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgY29udGFjdEluZGV4OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBzdGF0aWMgTWFrZUFycmF5KGxlbmd0aDogbnVtYmVyKTogYjJDb250YWN0VmVsb2NpdHlDb25zdHJhaW50W10ge1xuICAgIHJldHVybiBiMk1ha2VBcnJheShsZW5ndGgsIChpOiBudW1iZXIpID0+IG5ldyBiMkNvbnRhY3RWZWxvY2l0eUNvbnN0cmFpbnQoKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludCB7XG4gIHB1YmxpYyByZWFkb25seSBsb2NhbFBvaW50czogYjJWZWMyW10gPSBiMlZlYzIuTWFrZUFycmF5KGIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsTm9ybWFsOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBsb2NhbFBvaW50OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBpbmRleEE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBpbmRleEI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBpbnZNYXNzQTogbnVtYmVyID0gMDtcbiAgcHVibGljIGludk1hc3NCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxDZW50ZXJBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBsb2NhbENlbnRlckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIGludklBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgaW52SUI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB0eXBlOiBiMk1hbmlmb2xkVHlwZSA9IGIyTWFuaWZvbGRUeXBlLmVfdW5rbm93bjtcbiAgcHVibGljIHJhZGl1c0E6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByYWRpdXNCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcG9pbnRDb3VudDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgc3RhdGljIE1ha2VBcnJheShsZW5ndGg6IG51bWJlcik6IGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludFtdIHtcbiAgICByZXR1cm4gYjJNYWtlQXJyYXkobGVuZ3RoLCAoaTogbnVtYmVyKSA9PiBuZXcgYjJDb250YWN0UG9zaXRpb25Db25zdHJhaW50KCkpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMkNvbnRhY3RTb2x2ZXJEZWYge1xuICBwdWJsaWMgcmVhZG9ubHkgc3RlcDogYjJUaW1lU3RlcCA9IG5ldyBiMlRpbWVTdGVwKCk7XG4gIHB1YmxpYyBjb250YWN0cyE6IGIyQ29udGFjdFtdO1xuICBwdWJsaWMgY291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBwb3NpdGlvbnMhOiBiMlBvc2l0aW9uW107XG4gIHB1YmxpYyB2ZWxvY2l0aWVzITogYjJWZWxvY2l0eVtdO1xufVxuXG5leHBvcnQgY2xhc3MgYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkIHtcbiAgcHVibGljIHJlYWRvbmx5IG5vcm1hbDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgcG9pbnQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHNlcGFyYXRpb246IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZV9zX3BvaW50QSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZV9zX3BvaW50QiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZV9zX3BsYW5lUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIEluaXRpYWxpemVfc19jbGlwUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBJbml0aWFsaXplKHBjOiBiMkNvbnRhY3RQb3NpdGlvbkNvbnN0cmFpbnQsIHhmQTogYjJUcmFuc2Zvcm0sIHhmQjogYjJUcmFuc2Zvcm0sIGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBwb2ludEE6IGIyVmVjMiA9IGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5Jbml0aWFsaXplX3NfcG9pbnRBO1xuICAgIGNvbnN0IHBvaW50QjogYjJWZWMyID0gYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLkluaXRpYWxpemVfc19wb2ludEI7XG4gICAgY29uc3QgcGxhbmVQb2ludDogYjJWZWMyID0gYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLkluaXRpYWxpemVfc19wbGFuZVBvaW50O1xuICAgIGNvbnN0IGNsaXBQb2ludDogYjJWZWMyID0gYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLkluaXRpYWxpemVfc19jbGlwUG9pbnQ7XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQocGMucG9pbnRDb3VudCA+IDApO1xuXG4gICAgc3dpdGNoIChwYy50eXBlKSB7XG4gICAgY2FzZSBiMk1hbmlmb2xkVHlwZS5lX2NpcmNsZXM6IHtcbiAgICAgICAgLy8gYjJWZWMyIHBvaW50QSA9IGIyTXVsKHhmQSwgcGMtPmxvY2FsUG9pbnQpO1xuICAgICAgICBiMlRyYW5zZm9ybS5NdWxYVih4ZkEsIHBjLmxvY2FsUG9pbnQsIHBvaW50QSk7XG4gICAgICAgIC8vIGIyVmVjMiBwb2ludEIgPSBiMk11bCh4ZkIsIHBjLT5sb2NhbFBvaW50c1swXSk7XG4gICAgICAgIGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgcGMubG9jYWxQb2ludHNbMF0sIHBvaW50Qik7XG4gICAgICAgIC8vIG5vcm1hbCA9IHBvaW50QiAtIHBvaW50QTtcbiAgICAgICAgLy8gbm9ybWFsLk5vcm1hbGl6ZSgpO1xuICAgICAgICBiMlZlYzIuU3ViVlYocG9pbnRCLCBwb2ludEEsIHRoaXMubm9ybWFsKS5TZWxmTm9ybWFsaXplKCk7XG4gICAgICAgIC8vIHBvaW50ID0gMC41ZiAqIChwb2ludEEgKyBwb2ludEIpO1xuICAgICAgICBiMlZlYzIuTWlkVlYocG9pbnRBLCBwb2ludEIsIHRoaXMucG9pbnQpO1xuICAgICAgICAvLyBzZXBhcmF0aW9uID0gYjJEb3QocG9pbnRCIC0gcG9pbnRBLCBub3JtYWwpIC0gcGMtPnJhZGl1cztcbiAgICAgICAgdGhpcy5zZXBhcmF0aW9uID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwb2ludEIsIHBvaW50QSwgYjJWZWMyLnNfdDApLCB0aGlzLm5vcm1hbCkgLSBwYy5yYWRpdXNBIC0gcGMucmFkaXVzQjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICBjYXNlIGIyTWFuaWZvbGRUeXBlLmVfZmFjZUE6IHtcbiAgICAgICAgLy8gbm9ybWFsID0gYjJNdWwoeGZBLnEsIHBjLT5sb2NhbE5vcm1hbCk7XG4gICAgICAgIGIyUm90Lk11bFJWKHhmQS5xLCBwYy5sb2NhbE5vcm1hbCwgdGhpcy5ub3JtYWwpO1xuICAgICAgICAvLyBiMlZlYzIgcGxhbmVQb2ludCA9IGIyTXVsKHhmQSwgcGMtPmxvY2FsUG9pbnQpO1xuICAgICAgICBiMlRyYW5zZm9ybS5NdWxYVih4ZkEsIHBjLmxvY2FsUG9pbnQsIHBsYW5lUG9pbnQpO1xuXG4gICAgICAgIC8vIGIyVmVjMiBjbGlwUG9pbnQgPSBiMk11bCh4ZkIsIHBjLT5sb2NhbFBvaW50c1tpbmRleF0pO1xuICAgICAgICBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIHBjLmxvY2FsUG9pbnRzW2luZGV4XSwgY2xpcFBvaW50KTtcbiAgICAgICAgLy8gc2VwYXJhdGlvbiA9IGIyRG90KGNsaXBQb2ludCAtIHBsYW5lUG9pbnQsIG5vcm1hbCkgLSBwYy0+cmFkaXVzO1xuICAgICAgICB0aGlzLnNlcGFyYXRpb24gPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKGNsaXBQb2ludCwgcGxhbmVQb2ludCwgYjJWZWMyLnNfdDApLCB0aGlzLm5vcm1hbCkgLSBwYy5yYWRpdXNBIC0gcGMucmFkaXVzQjtcbiAgICAgICAgLy8gcG9pbnQgPSBjbGlwUG9pbnQ7XG4gICAgICAgIHRoaXMucG9pbnQuQ29weShjbGlwUG9pbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIGNhc2UgYjJNYW5pZm9sZFR5cGUuZV9mYWNlQjoge1xuICAgICAgICAvLyBub3JtYWwgPSBiMk11bCh4ZkIucSwgcGMtPmxvY2FsTm9ybWFsKTtcbiAgICAgICAgYjJSb3QuTXVsUlYoeGZCLnEsIHBjLmxvY2FsTm9ybWFsLCB0aGlzLm5vcm1hbCk7XG4gICAgICAgIC8vIGIyVmVjMiBwbGFuZVBvaW50ID0gYjJNdWwoeGZCLCBwYy0+bG9jYWxQb2ludCk7XG4gICAgICAgIGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgcGMubG9jYWxQb2ludCwgcGxhbmVQb2ludCk7XG5cbiAgICAgICAgLy8gYjJWZWMyIGNsaXBQb2ludCA9IGIyTXVsKHhmQSwgcGMtPmxvY2FsUG9pbnRzW2luZGV4XSk7XG4gICAgICAgIGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgcGMubG9jYWxQb2ludHNbaW5kZXhdLCBjbGlwUG9pbnQpO1xuICAgICAgICAvLyBzZXBhcmF0aW9uID0gYjJEb3QoY2xpcFBvaW50IC0gcGxhbmVQb2ludCwgbm9ybWFsKSAtIHBjLT5yYWRpdXM7XG4gICAgICAgIHRoaXMuc2VwYXJhdGlvbiA9IGIyVmVjMi5Eb3RWVihiMlZlYzIuU3ViVlYoY2xpcFBvaW50LCBwbGFuZVBvaW50LCBiMlZlYzIuc190MCksIHRoaXMubm9ybWFsKSAtIHBjLnJhZGl1c0EgLSBwYy5yYWRpdXNCO1xuICAgICAgICAvLyBwb2ludCA9IGNsaXBQb2ludDtcbiAgICAgICAgdGhpcy5wb2ludC5Db3B5KGNsaXBQb2ludCk7XG5cbiAgICAgICAgLy8gRW5zdXJlIG5vcm1hbCBwb2ludHMgZnJvbSBBIHRvIEJcbiAgICAgICAgLy8gbm9ybWFsID0gLW5vcm1hbDtcbiAgICAgICAgdGhpcy5ub3JtYWwuU2VsZk5lZygpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyQ29udGFjdFNvbHZlciB7XG4gIHB1YmxpYyByZWFkb25seSBtX3N0ZXA6IGIyVGltZVN0ZXAgPSBuZXcgYjJUaW1lU3RlcCgpO1xuICBwdWJsaWMgbV9wb3NpdGlvbnMhOiBiMlBvc2l0aW9uW107XG4gIHB1YmxpYyBtX3ZlbG9jaXRpZXMhOiBiMlZlbG9jaXR5W107XG4gIHB1YmxpYyByZWFkb25seSBtX3Bvc2l0aW9uQ29uc3RyYWludHM6IGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludFtdID0gYjJDb250YWN0UG9zaXRpb25Db25zdHJhaW50Lk1ha2VBcnJheSgxMDI0KTsgLy8gVE9ETzogYjJTZXR0aW5nc1xuICBwdWJsaWMgcmVhZG9ubHkgbV92ZWxvY2l0eUNvbnN0cmFpbnRzOiBiMkNvbnRhY3RWZWxvY2l0eUNvbnN0cmFpbnRbXSA9IGIyQ29udGFjdFZlbG9jaXR5Q29uc3RyYWludC5NYWtlQXJyYXkoMTAyNCk7IC8vIFRPRE86IGIyU2V0dGluZ3NcbiAgcHVibGljIG1fY29udGFjdHMhOiBiMkNvbnRhY3RbXTtcbiAgcHVibGljIG1fY291bnQ6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIEluaXRpYWxpemUoZGVmOiBiMkNvbnRhY3RTb2x2ZXJEZWYpOiBiMkNvbnRhY3RTb2x2ZXIge1xuICAgIHRoaXMubV9zdGVwLkNvcHkoZGVmLnN0ZXApO1xuICAgIHRoaXMubV9jb3VudCA9IGRlZi5jb3VudDtcbiAgICAvLyBUT0RPOlxuICAgIGlmICh0aGlzLm1fcG9zaXRpb25Db25zdHJhaW50cy5sZW5ndGggPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIGNvbnN0IG5ld19sZW5ndGg6IG51bWJlciA9IGIyTWF4KHRoaXMubV9wb3NpdGlvbkNvbnN0cmFpbnRzLmxlbmd0aCAqIDIsIHRoaXMubV9jb3VudCk7XG4gICAgICB3aGlsZSAodGhpcy5tX3Bvc2l0aW9uQ29uc3RyYWludHMubGVuZ3RoIDwgbmV3X2xlbmd0aCkge1xuICAgICAgICB0aGlzLm1fcG9zaXRpb25Db25zdHJhaW50c1t0aGlzLm1fcG9zaXRpb25Db25zdHJhaW50cy5sZW5ndGhdID0gbmV3IGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludCgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBUT0RPOlxuICAgIGlmICh0aGlzLm1fdmVsb2NpdHlDb25zdHJhaW50cy5sZW5ndGggPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIGNvbnN0IG5ld19sZW5ndGg6IG51bWJlciA9IGIyTWF4KHRoaXMubV92ZWxvY2l0eUNvbnN0cmFpbnRzLmxlbmd0aCAqIDIsIHRoaXMubV9jb3VudCk7XG4gICAgICB3aGlsZSAodGhpcy5tX3ZlbG9jaXR5Q29uc3RyYWludHMubGVuZ3RoIDwgbmV3X2xlbmd0aCkge1xuICAgICAgICB0aGlzLm1fdmVsb2NpdHlDb25zdHJhaW50c1t0aGlzLm1fdmVsb2NpdHlDb25zdHJhaW50cy5sZW5ndGhdID0gbmV3IGIyQ29udGFjdFZlbG9jaXR5Q29uc3RyYWludCgpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm1fcG9zaXRpb25zID0gZGVmLnBvc2l0aW9ucztcbiAgICB0aGlzLm1fdmVsb2NpdGllcyA9IGRlZi52ZWxvY2l0aWVzO1xuICAgIHRoaXMubV9jb250YWN0cyA9IGRlZi5jb250YWN0cztcblxuICAgIC8vIEluaXRpYWxpemUgcG9zaXRpb24gaW5kZXBlbmRlbnQgcG9ydGlvbnMgb2YgdGhlIGNvbnN0cmFpbnRzLlxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgY29udGFjdDogYjJDb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2ldO1xuXG4gICAgICBjb25zdCBmaXh0dXJlQTogYjJGaXh0dXJlID0gY29udGFjdC5tX2ZpeHR1cmVBO1xuICAgICAgY29uc3QgZml4dHVyZUI6IGIyRml4dHVyZSA9IGNvbnRhY3QubV9maXh0dXJlQjtcbiAgICAgIGNvbnN0IHNoYXBlQTogYjJTaGFwZSA9IGZpeHR1cmVBLkdldFNoYXBlKCk7XG4gICAgICBjb25zdCBzaGFwZUI6IGIyU2hhcGUgPSBmaXh0dXJlQi5HZXRTaGFwZSgpO1xuICAgICAgY29uc3QgcmFkaXVzQTogbnVtYmVyID0gc2hhcGVBLm1fcmFkaXVzO1xuICAgICAgY29uc3QgcmFkaXVzQjogbnVtYmVyID0gc2hhcGVCLm1fcmFkaXVzO1xuICAgICAgY29uc3QgYm9keUE6IGIyQm9keSA9IGZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICAgIGNvbnN0IGJvZHlCOiBiMkJvZHkgPSBmaXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgICBjb25zdCBtYW5pZm9sZDogYjJNYW5pZm9sZCA9IGNvbnRhY3QuR2V0TWFuaWZvbGQoKTtcblxuICAgICAgY29uc3QgcG9pbnRDb3VudDogbnVtYmVyID0gbWFuaWZvbGQucG9pbnRDb3VudDtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChwb2ludENvdW50ID4gMCk7XG5cbiAgICAgIGNvbnN0IHZjOiBiMkNvbnRhY3RWZWxvY2l0eUNvbnN0cmFpbnQgPSB0aGlzLm1fdmVsb2NpdHlDb25zdHJhaW50c1tpXTtcbiAgICAgIHZjLmZyaWN0aW9uID0gY29udGFjdC5tX2ZyaWN0aW9uO1xuICAgICAgdmMucmVzdGl0dXRpb24gPSBjb250YWN0Lm1fcmVzdGl0dXRpb247XG4gICAgICB2Yy50aHJlc2hvbGQgPSBjb250YWN0Lm1fcmVzdGl0dXRpb25UaHJlc2hvbGQ7XG4gICAgICB2Yy50YW5nZW50U3BlZWQgPSBjb250YWN0Lm1fdGFuZ2VudFNwZWVkO1xuICAgICAgdmMuaW5kZXhBID0gYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICAgIHZjLmluZGV4QiA9IGJvZHlCLm1faXNsYW5kSW5kZXg7XG4gICAgICB2Yy5pbnZNYXNzQSA9IGJvZHlBLm1faW52TWFzcztcbiAgICAgIHZjLmludk1hc3NCID0gYm9keUIubV9pbnZNYXNzO1xuICAgICAgdmMuaW52SUEgPSBib2R5QS5tX2ludkk7XG4gICAgICB2Yy5pbnZJQiA9IGJvZHlCLm1faW52STtcbiAgICAgIHZjLmNvbnRhY3RJbmRleCA9IGk7XG4gICAgICB2Yy5wb2ludENvdW50ID0gcG9pbnRDb3VudDtcbiAgICAgIHZjLksuU2V0WmVybygpO1xuICAgICAgdmMubm9ybWFsTWFzcy5TZXRaZXJvKCk7XG5cbiAgICAgIGNvbnN0IHBjOiBiMkNvbnRhY3RQb3NpdGlvbkNvbnN0cmFpbnQgPSB0aGlzLm1fcG9zaXRpb25Db25zdHJhaW50c1tpXTtcbiAgICAgIHBjLmluZGV4QSA9IGJvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgICBwYy5pbmRleEIgPSBib2R5Qi5tX2lzbGFuZEluZGV4O1xuICAgICAgcGMuaW52TWFzc0EgPSBib2R5QS5tX2ludk1hc3M7XG4gICAgICBwYy5pbnZNYXNzQiA9IGJvZHlCLm1faW52TWFzcztcbiAgICAgIHBjLmxvY2FsQ2VudGVyQS5Db3B5KGJvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgICAgcGMubG9jYWxDZW50ZXJCLkNvcHkoYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgICBwYy5pbnZJQSA9IGJvZHlBLm1faW52STtcbiAgICAgIHBjLmludklCID0gYm9keUIubV9pbnZJO1xuICAgICAgcGMubG9jYWxOb3JtYWwuQ29weShtYW5pZm9sZC5sb2NhbE5vcm1hbCk7XG4gICAgICBwYy5sb2NhbFBvaW50LkNvcHkobWFuaWZvbGQubG9jYWxQb2ludCk7XG4gICAgICBwYy5wb2ludENvdW50ID0gcG9pbnRDb3VudDtcbiAgICAgIHBjLnJhZGl1c0EgPSByYWRpdXNBO1xuICAgICAgcGMucmFkaXVzQiA9IHJhZGl1c0I7XG4gICAgICBwYy50eXBlID0gbWFuaWZvbGQudHlwZTtcblxuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHBvaW50Q291bnQ7ICsraikge1xuICAgICAgICBjb25zdCBjcDogYjJNYW5pZm9sZFBvaW50ID0gbWFuaWZvbGQucG9pbnRzW2pdO1xuICAgICAgICBjb25zdCB2Y3A6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbal07XG5cbiAgICAgICAgaWYgKHRoaXMubV9zdGVwLndhcm1TdGFydGluZykge1xuICAgICAgICAgIHZjcC5ub3JtYWxJbXB1bHNlID0gdGhpcy5tX3N0ZXAuZHRSYXRpbyAqIGNwLm5vcm1hbEltcHVsc2U7XG4gICAgICAgICAgdmNwLnRhbmdlbnRJbXB1bHNlID0gdGhpcy5tX3N0ZXAuZHRSYXRpbyAqIGNwLnRhbmdlbnRJbXB1bHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZjcC5ub3JtYWxJbXB1bHNlID0gMDtcbiAgICAgICAgICB2Y3AudGFuZ2VudEltcHVsc2UgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdmNwLnJBLlNldFplcm8oKTtcbiAgICAgICAgdmNwLnJCLlNldFplcm8oKTtcbiAgICAgICAgdmNwLm5vcm1hbE1hc3MgPSAwO1xuICAgICAgICB2Y3AudGFuZ2VudE1hc3MgPSAwO1xuICAgICAgICB2Y3AudmVsb2NpdHlCaWFzID0gMDtcblxuICAgICAgICBwYy5sb2NhbFBvaW50c1tqXS5Db3B5KGNwLmxvY2FsUG9pbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZVZlbG9jaXR5Q29uc3RyYWludHNfc194ZkEgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZVZlbG9jaXR5Q29uc3RyYWludHNfc194ZkIgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdGlhbGl6ZVZlbG9jaXR5Q29uc3RyYWludHNfc193b3JsZE1hbmlmb2xkID0gbmV3IGIyV29ybGRNYW5pZm9sZCgpO1xuICBwdWJsaWMgSW5pdGlhbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTogdm9pZCB7XG4gICAgY29uc3QgeGZBOiBiMlRyYW5zZm9ybSA9IGIyQ29udGFjdFNvbHZlci5Jbml0aWFsaXplVmVsb2NpdHlDb25zdHJhaW50c19zX3hmQTtcbiAgICBjb25zdCB4ZkI6IGIyVHJhbnNmb3JtID0gYjJDb250YWN0U29sdmVyLkluaXRpYWxpemVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfeGZCO1xuICAgIGNvbnN0IHdvcmxkTWFuaWZvbGQ6IGIyV29ybGRNYW5pZm9sZCA9IGIyQ29udGFjdFNvbHZlci5Jbml0aWFsaXplVmVsb2NpdHlDb25zdHJhaW50c19zX3dvcmxkTWFuaWZvbGQ7XG5cbiAgICBjb25zdCBrX21heENvbmRpdGlvbk51bWJlcjogbnVtYmVyID0gMTAwMDtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgdmM6IGIyQ29udGFjdFZlbG9jaXR5Q29uc3RyYWludCA9IHRoaXMubV92ZWxvY2l0eUNvbnN0cmFpbnRzW2ldO1xuICAgICAgY29uc3QgcGM6IGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludCA9IHRoaXMubV9wb3NpdGlvbkNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBjb25zdCByYWRpdXNBOiBudW1iZXIgPSBwYy5yYWRpdXNBO1xuICAgICAgY29uc3QgcmFkaXVzQjogbnVtYmVyID0gcGMucmFkaXVzQjtcbiAgICAgIGNvbnN0IG1hbmlmb2xkOiBiMk1hbmlmb2xkID0gdGhpcy5tX2NvbnRhY3RzW3ZjLmNvbnRhY3RJbmRleF0uR2V0TWFuaWZvbGQoKTtcblxuICAgICAgY29uc3QgaW5kZXhBOiBudW1iZXIgPSB2Yy5pbmRleEE7XG4gICAgICBjb25zdCBpbmRleEI6IG51bWJlciA9IHZjLmluZGV4QjtcblxuICAgICAgY29uc3QgbUE6IG51bWJlciA9IHZjLmludk1hc3NBO1xuICAgICAgY29uc3QgbUI6IG51bWJlciA9IHZjLmludk1hc3NCO1xuICAgICAgY29uc3QgaUE6IG51bWJlciA9IHZjLmludklBO1xuICAgICAgY29uc3QgaUI6IG51bWJlciA9IHZjLmludklCO1xuICAgICAgY29uc3QgbG9jYWxDZW50ZXJBOiBiMlZlYzIgPSBwYy5sb2NhbENlbnRlckE7XG4gICAgICBjb25zdCBsb2NhbENlbnRlckI6IGIyVmVjMiA9IHBjLmxvY2FsQ2VudGVyQjtcblxuICAgICAgY29uc3QgY0E6IGIyVmVjMiA9IHRoaXMubV9wb3NpdGlvbnNbaW5kZXhBXS5jO1xuICAgICAgY29uc3QgYUE6IG51bWJlciA9IHRoaXMubV9wb3NpdGlvbnNbaW5kZXhBXS5hO1xuICAgICAgY29uc3QgdkE6IGIyVmVjMiA9IHRoaXMubV92ZWxvY2l0aWVzW2luZGV4QV0udjtcbiAgICAgIGNvbnN0IHdBOiBudW1iZXIgPSB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEFdLnc7XG5cbiAgICAgIGNvbnN0IGNCOiBiMlZlYzIgPSB0aGlzLm1fcG9zaXRpb25zW2luZGV4Ql0uYztcbiAgICAgIGNvbnN0IGFCOiBudW1iZXIgPSB0aGlzLm1fcG9zaXRpb25zW2luZGV4Ql0uYTtcbiAgICAgIGNvbnN0IHZCOiBiMlZlYzIgPSB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEJdLnY7XG4gICAgICBjb25zdCB3QjogbnVtYmVyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhCXS53O1xuXG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQobWFuaWZvbGQucG9pbnRDb3VudCA+IDApO1xuXG4gICAgICB4ZkEucS5TZXRBbmdsZShhQSk7XG4gICAgICB4ZkIucS5TZXRBbmdsZShhQik7XG4gICAgICBiMlZlYzIuU3ViVlYoY0EsIGIyUm90Lk11bFJWKHhmQS5xLCBsb2NhbENlbnRlckEsIGIyVmVjMi5zX3QwKSwgeGZBLnApO1xuICAgICAgYjJWZWMyLlN1YlZWKGNCLCBiMlJvdC5NdWxSVih4ZkIucSwgbG9jYWxDZW50ZXJCLCBiMlZlYzIuc190MCksIHhmQi5wKTtcblxuICAgICAgd29ybGRNYW5pZm9sZC5Jbml0aWFsaXplKG1hbmlmb2xkLCB4ZkEsIHJhZGl1c0EsIHhmQiwgcmFkaXVzQik7XG5cbiAgICAgIHZjLm5vcm1hbC5Db3B5KHdvcmxkTWFuaWZvbGQubm9ybWFsKTtcbiAgICAgIGIyVmVjMi5Dcm9zc1ZPbmUodmMubm9ybWFsLCB2Yy50YW5nZW50KTsgLy8gY29tcHV0ZSBmcm9tIG5vcm1hbFxuXG4gICAgICBjb25zdCBwb2ludENvdW50OiBudW1iZXIgPSB2Yy5wb2ludENvdW50O1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHBvaW50Q291bnQ7ICsraikge1xuICAgICAgICBjb25zdCB2Y3A6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbal07XG5cbiAgICAgICAgLy8gdmNwLT5yQSA9IHdvcmxkTWFuaWZvbGQucG9pbnRzW2pdIC0gY0E7XG4gICAgICAgIGIyVmVjMi5TdWJWVih3b3JsZE1hbmlmb2xkLnBvaW50c1tqXSwgY0EsIHZjcC5yQSk7XG4gICAgICAgIC8vIHZjcC0+ckIgPSB3b3JsZE1hbmlmb2xkLnBvaW50c1tqXSAtIGNCO1xuICAgICAgICBiMlZlYzIuU3ViVlYod29ybGRNYW5pZm9sZC5wb2ludHNbal0sIGNCLCB2Y3AuckIpO1xuXG4gICAgICAgIGNvbnN0IHJuQTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodmNwLnJBLCB2Yy5ub3JtYWwpO1xuICAgICAgICBjb25zdCBybkI6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKHZjcC5yQiwgdmMubm9ybWFsKTtcblxuICAgICAgICBjb25zdCBrTm9ybWFsOiBudW1iZXIgPSBtQSArIG1CICsgaUEgKiBybkEgKiBybkEgKyBpQiAqIHJuQiAqIHJuQjtcblxuICAgICAgICB2Y3Aubm9ybWFsTWFzcyA9IGtOb3JtYWwgPiAwID8gMSAvIGtOb3JtYWwgOiAwO1xuXG4gICAgICAgIC8vIGIyVmVjMiB0YW5nZW50ID0gYjJDcm9zcyh2Yy0+bm9ybWFsLCAxLjBmKTtcbiAgICAgICAgY29uc3QgdGFuZ2VudDogYjJWZWMyID0gdmMudGFuZ2VudDsgLy8gcHJlY29tcHV0ZWQgZnJvbSBub3JtYWxcblxuICAgICAgICBjb25zdCBydEE6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKHZjcC5yQSwgdGFuZ2VudCk7XG4gICAgICAgIGNvbnN0IHJ0QjogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodmNwLnJCLCB0YW5nZW50KTtcblxuICAgICAgICBjb25zdCBrVGFuZ2VudDogbnVtYmVyID0gbUEgKyBtQiArIGlBICogcnRBICogcnRBICsgaUIgKiBydEIgKiBydEI7XG5cbiAgICAgICAgdmNwLnRhbmdlbnRNYXNzID0ga1RhbmdlbnQgPiAwID8gMSAvIGtUYW5nZW50IDogMDtcblxuICAgICAgICAvLyBTZXR1cCBhIHZlbG9jaXR5IGJpYXMgZm9yIHJlc3RpdHV0aW9uLlxuICAgICAgICB2Y3AudmVsb2NpdHlCaWFzID0gMDtcbiAgICAgICAgLy8gZmxvYXQzMiB2UmVsID0gYjJEb3QodmMtPm5vcm1hbCwgdkIgKyBiMkNyb3NzKHdCLCB2Y3AtPnJCKSAtIHZBIC0gYjJDcm9zcyh3QSwgdmNwLT5yQSkpO1xuICAgICAgICBjb25zdCB2UmVsOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoXG4gICAgICAgICAgdmMubm9ybWFsLFxuICAgICAgICAgIGIyVmVjMi5TdWJWVihcbiAgICAgICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHZjcC5yQiwgYjJWZWMyLnNfdDApLFxuICAgICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgdmNwLnJBLCBiMlZlYzIuc190MSksXG4gICAgICAgICAgICBiMlZlYzIuc190MCkpO1xuICAgICAgICBpZiAodlJlbCA8IC12Yy50aHJlc2hvbGQpIHtcbiAgICAgICAgICB2Y3AudmVsb2NpdHlCaWFzICs9ICgtdmMucmVzdGl0dXRpb24gKiB2UmVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIHR3byBwb2ludHMsIHRoZW4gcHJlcGFyZSB0aGUgYmxvY2sgc29sdmVyLlxuICAgICAgaWYgKHZjLnBvaW50Q291bnQgPT09IDIgJiYgZ19ibG9ja1NvbHZlKSB7XG4gICAgICAgIGNvbnN0IHZjcDE6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbMF07XG4gICAgICAgIGNvbnN0IHZjcDI6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbMV07XG5cbiAgICAgICAgY29uc3Qgcm4xQTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodmNwMS5yQSwgdmMubm9ybWFsKTtcbiAgICAgICAgY29uc3Qgcm4xQjogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodmNwMS5yQiwgdmMubm9ybWFsKTtcbiAgICAgICAgY29uc3Qgcm4yQTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodmNwMi5yQSwgdmMubm9ybWFsKTtcbiAgICAgICAgY29uc3Qgcm4yQjogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodmNwMi5yQiwgdmMubm9ybWFsKTtcblxuICAgICAgICBjb25zdCBrMTE6IG51bWJlciA9IG1BICsgbUIgKyBpQSAqIHJuMUEgKiBybjFBICsgaUIgKiBybjFCICogcm4xQjtcbiAgICAgICAgY29uc3QgazIyOiBudW1iZXIgPSBtQSArIG1CICsgaUEgKiBybjJBICogcm4yQSArIGlCICogcm4yQiAqIHJuMkI7XG4gICAgICAgIGNvbnN0IGsxMjogbnVtYmVyID0gbUEgKyBtQiArIGlBICogcm4xQSAqIHJuMkEgKyBpQiAqIHJuMUIgKiBybjJCO1xuXG4gICAgICAgIC8vIEVuc3VyZSBhIHJlYXNvbmFibGUgY29uZGl0aW9uIG51bWJlci5cbiAgICAgICAgLy8gZmxvYXQzMiBrX21heENvbmRpdGlvbk51bWJlciA9IDEwMDAuMGY7XG4gICAgICAgIGlmIChrMTEgKiBrMTEgPCBrX21heENvbmRpdGlvbk51bWJlciAqIChrMTEgKiBrMjIgLSBrMTIgKiBrMTIpKSB7XG4gICAgICAgICAgLy8gSyBpcyBzYWZlIHRvIGludmVydC5cbiAgICAgICAgICB2Yy5LLmV4LlNldChrMTEsIGsxMik7XG4gICAgICAgICAgdmMuSy5leS5TZXQoazEyLCBrMjIpO1xuICAgICAgICAgIHZjLksuR2V0SW52ZXJzZSh2Yy5ub3JtYWxNYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGUgY29uc3RyYWludHMgYXJlIHJlZHVuZGFudCwganVzdCB1c2Ugb25lLlxuICAgICAgICAgIC8vIFRPRE9fRVJJTiB1c2UgZGVlcGVzdD9cbiAgICAgICAgICB2Yy5wb2ludENvdW50ID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIFdhcm1TdGFydF9zX1AgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBXYXJtU3RhcnQoKTogdm9pZCB7XG4gICAgY29uc3QgUDogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLldhcm1TdGFydF9zX1A7XG5cbiAgICAvLyBXYXJtIHN0YXJ0LlxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgdmM6IGIyQ29udGFjdFZlbG9jaXR5Q29uc3RyYWludCA9IHRoaXMubV92ZWxvY2l0eUNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBjb25zdCBpbmRleEE6IG51bWJlciA9IHZjLmluZGV4QTtcbiAgICAgIGNvbnN0IGluZGV4QjogbnVtYmVyID0gdmMuaW5kZXhCO1xuICAgICAgY29uc3QgbUE6IG51bWJlciA9IHZjLmludk1hc3NBO1xuICAgICAgY29uc3QgaUE6IG51bWJlciA9IHZjLmludklBO1xuICAgICAgY29uc3QgbUI6IG51bWJlciA9IHZjLmludk1hc3NCO1xuICAgICAgY29uc3QgaUI6IG51bWJlciA9IHZjLmludklCO1xuICAgICAgY29uc3QgcG9pbnRDb3VudDogbnVtYmVyID0gdmMucG9pbnRDb3VudDtcblxuICAgICAgY29uc3QgdkE6IGIyVmVjMiA9IHRoaXMubV92ZWxvY2l0aWVzW2luZGV4QV0udjtcbiAgICAgIGxldCB3QTogbnVtYmVyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhBXS53O1xuICAgICAgY29uc3QgdkI6IGIyVmVjMiA9IHRoaXMubV92ZWxvY2l0aWVzW2luZGV4Ql0udjtcbiAgICAgIGxldCB3QjogbnVtYmVyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhCXS53O1xuXG4gICAgICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IHZjLm5vcm1hbDtcbiAgICAgIC8vIGIyVmVjMiB0YW5nZW50ID0gYjJDcm9zcyhub3JtYWwsIDEuMGYpO1xuICAgICAgY29uc3QgdGFuZ2VudDogYjJWZWMyID0gdmMudGFuZ2VudDsgLy8gcHJlY29tcHV0ZWQgZnJvbSBub3JtYWxcblxuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHBvaW50Q291bnQ7ICsraikge1xuICAgICAgICBjb25zdCB2Y3A6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbal07XG4gICAgICAgIC8vIGIyVmVjMiBQID0gdmNwLT5ub3JtYWxJbXB1bHNlICogbm9ybWFsICsgdmNwLT50YW5nZW50SW1wdWxzZSAqIHRhbmdlbnQ7XG4gICAgICAgIGIyVmVjMi5BZGRWVihcbiAgICAgICAgICBiMlZlYzIuTXVsU1YodmNwLm5vcm1hbEltcHVsc2UsIG5vcm1hbCwgYjJWZWMyLnNfdDApLFxuICAgICAgICAgIGIyVmVjMi5NdWxTVih2Y3AudGFuZ2VudEltcHVsc2UsIHRhbmdlbnQsIGIyVmVjMi5zX3QxKSxcbiAgICAgICAgICBQKTtcbiAgICAgICAgLy8gd0EgLT0gaUEgKiBiMkNyb3NzKHZjcC0+ckEsIFApO1xuICAgICAgICB3QSAtPSBpQSAqIGIyVmVjMi5Dcm9zc1ZWKHZjcC5yQSwgUCk7XG4gICAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgICAgdkEuU2VsZk11bFN1YihtQSwgUCk7XG4gICAgICAgIC8vIHdCICs9IGlCICogYjJDcm9zcyh2Y3AtPnJCLCBQKTtcbiAgICAgICAgd0IgKz0gaUIgKiBiMlZlYzIuQ3Jvc3NWVih2Y3AuckIsIFApO1xuICAgICAgICAvLyB2QiArPSBtQiAqIFA7XG4gICAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEFdLnYgPSB2QTtcbiAgICAgIHRoaXMubV92ZWxvY2l0aWVzW2luZGV4QV0udyA9IHdBO1xuICAgICAgLy8gdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhCXS52ID0gdkI7XG4gICAgICB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEJdLncgPSB3QjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19kdiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfZHYxID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19kdjIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1AgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2EgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2IgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX3ggPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2QgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1AxID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUDFQMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50cygpOiB2b2lkIHtcbiAgICBjb25zdCBkdjogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2R2O1xuICAgIGNvbnN0IGR2MTogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2R2MTtcbiAgICBjb25zdCBkdjI6IGIyVmVjMiA9IGIyQ29udGFjdFNvbHZlci5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19kdjI7XG4gICAgY29uc3QgUDogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1A7XG4gICAgY29uc3QgYTogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2E7XG4gICAgY29uc3QgYjogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2I7XG4gICAgY29uc3QgeDogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX3g7XG4gICAgY29uc3QgZDogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2Q7XG4gICAgY29uc3QgUDE6IGIyVmVjMiA9IGIyQ29udGFjdFNvbHZlci5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QMTtcbiAgICBjb25zdCBQMjogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1AyO1xuICAgIGNvbnN0IFAxUDI6IGIyVmVjMiA9IGIyQ29udGFjdFNvbHZlci5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QMVAyO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICBjb25zdCB2YzogYjJDb250YWN0VmVsb2NpdHlDb25zdHJhaW50ID0gdGhpcy5tX3ZlbG9jaXR5Q29uc3RyYWludHNbaV07XG5cbiAgICAgIGNvbnN0IGluZGV4QTogbnVtYmVyID0gdmMuaW5kZXhBO1xuICAgICAgY29uc3QgaW5kZXhCOiBudW1iZXIgPSB2Yy5pbmRleEI7XG4gICAgICBjb25zdCBtQTogbnVtYmVyID0gdmMuaW52TWFzc0E7XG4gICAgICBjb25zdCBpQTogbnVtYmVyID0gdmMuaW52SUE7XG4gICAgICBjb25zdCBtQjogbnVtYmVyID0gdmMuaW52TWFzc0I7XG4gICAgICBjb25zdCBpQjogbnVtYmVyID0gdmMuaW52SUI7XG4gICAgICBjb25zdCBwb2ludENvdW50OiBudW1iZXIgPSB2Yy5wb2ludENvdW50O1xuXG4gICAgICBjb25zdCB2QTogYjJWZWMyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhBXS52O1xuICAgICAgbGV0IHdBOiBudW1iZXIgPSB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEFdLnc7XG4gICAgICBjb25zdCB2QjogYjJWZWMyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhCXS52O1xuICAgICAgbGV0IHdCOiBudW1iZXIgPSB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEJdLnc7XG5cbiAgICAgIC8vIGIyVmVjMiBub3JtYWwgPSB2Yy0+bm9ybWFsO1xuICAgICAgY29uc3Qgbm9ybWFsOiBiMlZlYzIgPSB2Yy5ub3JtYWw7XG4gICAgICAvLyBiMlZlYzIgdGFuZ2VudCA9IGIyQ3Jvc3Mobm9ybWFsLCAxLjBmKTtcbiAgICAgIGNvbnN0IHRhbmdlbnQ6IGIyVmVjMiA9IHZjLnRhbmdlbnQ7IC8vIHByZWNvbXB1dGVkIGZyb20gbm9ybWFsXG4gICAgICBjb25zdCBmcmljdGlvbjogbnVtYmVyID0gdmMuZnJpY3Rpb247XG5cbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChwb2ludENvdW50ID09PSAxIHx8IHBvaW50Q291bnQgPT09IDIpO1xuXG4gICAgICAvLyBTb2x2ZSB0YW5nZW50IGNvbnN0cmFpbnRzIGZpcnN0IGJlY2F1c2Ugbm9uLXBlbmV0cmF0aW9uIGlzIG1vcmUgaW1wb3J0YW50XG4gICAgICAvLyB0aGFuIGZyaWN0aW9uLlxuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHBvaW50Q291bnQ7ICsraikge1xuICAgICAgICBjb25zdCB2Y3A6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbal07XG5cbiAgICAgICAgLy8gUmVsYXRpdmUgdmVsb2NpdHkgYXQgY29udGFjdFxuICAgICAgICAvLyBiMlZlYzIgZHYgPSB2QiArIGIyQ3Jvc3Mod0IsIHZjcC0+ckIpIC0gdkEgLSBiMkNyb3NzKHdBLCB2Y3AtPnJBKTtcbiAgICAgICAgYjJWZWMyLlN1YlZWKFxuICAgICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHZjcC5yQiwgYjJWZWMyLnNfdDApLFxuICAgICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2QSwgd0EsIHZjcC5yQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICAgIGR2KTtcblxuICAgICAgICAvLyBDb21wdXRlIHRhbmdlbnQgZm9yY2VcbiAgICAgICAgLy8gZmxvYXQzMiB2dCA9IGIyRG90KGR2LCB0YW5nZW50KSAtIHZjLT50YW5nZW50U3BlZWQ7XG4gICAgICAgIGNvbnN0IHZ0OiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZHYsIHRhbmdlbnQpIC0gdmMudGFuZ2VudFNwZWVkO1xuICAgICAgICBsZXQgbGFtYmRhOiBudW1iZXIgPSB2Y3AudGFuZ2VudE1hc3MgKiAoLXZ0KTtcblxuICAgICAgICAvLyBiMkNsYW1wIHRoZSBhY2N1bXVsYXRlZCBmb3JjZVxuICAgICAgICBjb25zdCBtYXhGcmljdGlvbjogbnVtYmVyID0gZnJpY3Rpb24gKiB2Y3Aubm9ybWFsSW1wdWxzZTtcbiAgICAgICAgY29uc3QgbmV3SW1wdWxzZTogbnVtYmVyID0gYjJDbGFtcCh2Y3AudGFuZ2VudEltcHVsc2UgKyBsYW1iZGEsICgtbWF4RnJpY3Rpb24pLCBtYXhGcmljdGlvbik7XG4gICAgICAgIGxhbWJkYSA9IG5ld0ltcHVsc2UgLSB2Y3AudGFuZ2VudEltcHVsc2U7XG4gICAgICAgIHZjcC50YW5nZW50SW1wdWxzZSA9IG5ld0ltcHVsc2U7XG5cbiAgICAgICAgLy8gQXBwbHkgY29udGFjdCBpbXB1bHNlXG4gICAgICAgIC8vIGIyVmVjMiBQID0gbGFtYmRhICogdGFuZ2VudDtcbiAgICAgICAgYjJWZWMyLk11bFNWKGxhbWJkYSwgdGFuZ2VudCwgUCk7XG5cbiAgICAgICAgLy8gdkEgLT0gbUEgKiBQO1xuICAgICAgICB2QS5TZWxmTXVsU3ViKG1BLCBQKTtcbiAgICAgICAgLy8gd0EgLT0gaUEgKiBiMkNyb3NzKHZjcC0+ckEsIFApO1xuICAgICAgICB3QSAtPSBpQSAqIGIyVmVjMi5Dcm9zc1ZWKHZjcC5yQSwgUCk7XG5cbiAgICAgICAgLy8gdkIgKz0gbUIgKiBQO1xuICAgICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgICAgLy8gd0IgKz0gaUIgKiBiMkNyb3NzKHZjcC0+ckIsIFApO1xuICAgICAgICB3QiArPSBpQiAqIGIyVmVjMi5Dcm9zc1ZWKHZjcC5yQiwgUCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNvbHZlIG5vcm1hbCBjb25zdHJhaW50c1xuICAgICAgaWYgKHZjLnBvaW50Q291bnQgPT09IDEgfHwgZ19ibG9ja1NvbHZlID09PSBmYWxzZSkge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBvaW50Q291bnQ7ICsraikge1xuICAgICAgICAgIGNvbnN0IHZjcDogYjJWZWxvY2l0eUNvbnN0cmFpbnRQb2ludCA9IHZjLnBvaW50c1tqXTtcblxuICAgICAgICAgIC8vIFJlbGF0aXZlIHZlbG9jaXR5IGF0IGNvbnRhY3RcbiAgICAgICAgICAvLyBiMlZlYzIgZHYgPSB2QiArIGIyQ3Jvc3Mod0IsIHZjcC0+ckIpIC0gdkEgLSBiMkNyb3NzKHdBLCB2Y3AtPnJBKTtcbiAgICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgICBiMlZlYzIuQWRkVkNyb3NzU1YodkIsIHdCLCB2Y3AuckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2QSwgd0EsIHZjcC5yQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICAgICAgZHYpO1xuXG4gICAgICAgICAgLy8gQ29tcHV0ZSBub3JtYWwgaW1wdWxzZVxuICAgICAgICAgIC8vIGZsb2F0MzIgdm4gPSBiMkRvdChkdiwgbm9ybWFsKTtcbiAgICAgICAgICBjb25zdCB2bjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGR2LCBub3JtYWwpO1xuICAgICAgICAgIGxldCBsYW1iZGE6IG51bWJlciA9ICgtdmNwLm5vcm1hbE1hc3MgKiAodm4gLSB2Y3AudmVsb2NpdHlCaWFzKSk7XG5cbiAgICAgICAgICAvLyBiMkNsYW1wIHRoZSBhY2N1bXVsYXRlZCBpbXB1bHNlXG4gICAgICAgICAgLy8gZmxvYXQzMiBuZXdJbXB1bHNlID0gYjJNYXgodmNwLT5ub3JtYWxJbXB1bHNlICsgbGFtYmRhLCAwLjBmKTtcbiAgICAgICAgICBjb25zdCBuZXdJbXB1bHNlOiBudW1iZXIgPSBiMk1heCh2Y3Aubm9ybWFsSW1wdWxzZSArIGxhbWJkYSwgMCk7XG4gICAgICAgICAgbGFtYmRhID0gbmV3SW1wdWxzZSAtIHZjcC5ub3JtYWxJbXB1bHNlO1xuICAgICAgICAgIHZjcC5ub3JtYWxJbXB1bHNlID0gbmV3SW1wdWxzZTtcblxuICAgICAgICAgIC8vIEFwcGx5IGNvbnRhY3QgaW1wdWxzZVxuICAgICAgICAgIC8vIGIyVmVjMiBQID0gbGFtYmRhICogbm9ybWFsO1xuICAgICAgICAgIGIyVmVjMi5NdWxTVihsYW1iZGEsIG5vcm1hbCwgUCk7XG4gICAgICAgICAgLy8gdkEgLT0gbUEgKiBQO1xuICAgICAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgICAgIC8vIHdBIC09IGlBICogYjJDcm9zcyh2Y3AtPnJBLCBQKTtcbiAgICAgICAgICB3QSAtPSBpQSAqIGIyVmVjMi5Dcm9zc1ZWKHZjcC5yQSwgUCk7XG5cbiAgICAgICAgICAvLyB2QiArPSBtQiAqIFA7XG4gICAgICAgICAgdkIuU2VsZk11bEFkZChtQiwgUCk7XG4gICAgICAgICAgLy8gd0IgKz0gaUIgKiBiMkNyb3NzKHZjcC0+ckIsIFApO1xuICAgICAgICAgIHdCICs9IGlCICogYjJWZWMyLkNyb3NzVlYodmNwLnJCLCBQKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQmxvY2sgc29sdmVyIGRldmVsb3BlZCBpbiBjb2xsYWJvcmF0aW9uIHdpdGggRGlyayBHcmVnb3JpdXMgKGJhY2sgaW4gMDEvMDcgb24gQm94MkRfTGl0ZSkuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBtaW5pIExDUCBmb3IgdGhpcyBjb250YWN0IHBhdGNoXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHZuID0gQSAqIHggKyBiLCB2biA+PSAwLCB4ID49IDAgYW5kIHZuX2kgKiB4X2kgPSAwIHdpdGggaSA9IDEuLjJcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQSA9IEogKiBXICogSlQgYW5kIEogPSAoIC1uLCAtcjEgeCBuLCBuLCByMiB4IG4gKVxuICAgICAgICAvLyBiID0gdm4wIC0gdmVsb2NpdHlCaWFzXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBzeXN0ZW0gaXMgc29sdmVkIHVzaW5nIHRoZSBcIlRvdGFsIGVudW1lcmF0aW9uIG1ldGhvZFwiIChzLiBNdXJ0eSkuIFRoZSBjb21wbGVtZW50YXJ5IGNvbnN0cmFpbnQgdm5faSAqIHhfaVxuICAgICAgICAvLyBpbXBsaWVzIHRoYXQgd2UgbXVzdCBoYXZlIGluIGFueSBzb2x1dGlvbiBlaXRoZXIgdm5faSA9IDAgb3IgeF9pID0gMC4gU28gZm9yIHRoZSAyRCBjb250YWN0IHByb2JsZW0gdGhlIGNhc2VzXG4gICAgICAgIC8vIHZuMSA9IDAgYW5kIHZuMiA9IDAsIHgxID0gMCBhbmQgeDIgPSAwLCB4MSA9IDAgYW5kIHZuMiA9IDAsIHgyID0gMCBhbmQgdm4xID0gMCBuZWVkIHRvIGJlIHRlc3RlZC4gVGhlIGZpcnN0IHZhbGlkXG4gICAgICAgIC8vIHNvbHV0aW9uIHRoYXQgc2F0aXNmaWVzIHRoZSBwcm9ibGVtIGlzIGNob3Nlbi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjb3VudCBvZiB0aGUgYWNjdW11bGF0ZWQgaW1wdWxzZSAnYScgKGJlY2F1c2Ugb2YgdGhlIGl0ZXJhdGl2ZSBuYXR1cmUgb2YgdGhlIHNvbHZlciB3aGljaCBvbmx5IHJlcXVpcmVzXG4gICAgICAgIC8vIHRoYXQgdGhlIGFjY3VtdWxhdGVkIGltcHVsc2UgaXMgY2xhbXBlZCBhbmQgbm90IHRoZSBpbmNyZW1lbnRhbCBpbXB1bHNlKSB3ZSBjaGFuZ2UgdGhlIGltcHVsc2UgdmFyaWFibGUgKHhfaSkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFN1YnN0aXR1dGU6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHggPSBhICsgZFxuICAgICAgICAvL1xuICAgICAgICAvLyBhIDo9IG9sZCB0b3RhbCBpbXB1bHNlXG4gICAgICAgIC8vIHggOj0gbmV3IHRvdGFsIGltcHVsc2VcbiAgICAgICAgLy8gZCA6PSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEZvciB0aGUgY3VycmVudCBpdGVyYXRpb24gd2UgZXh0ZW5kIHRoZSBmb3JtdWxhIGZvciB0aGUgaW5jcmVtZW50YWwgaW1wdWxzZVxuICAgICAgICAvLyB0byBjb21wdXRlIHRoZSBuZXcgdG90YWwgaW1wdWxzZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdm4gPSBBICogZCArIGJcbiAgICAgICAgLy8gICAgPSBBICogKHggLSBhKSArIGJcbiAgICAgICAgLy8gICAgPSBBICogeCArIGIgLSBBICogYVxuICAgICAgICAvLyAgICA9IEEgKiB4ICsgYidcbiAgICAgICAgLy8gYicgPSBiIC0gQSAqIGE7XG5cbiAgICAgICAgY29uc3QgY3AxOiBiMlZlbG9jaXR5Q29uc3RyYWludFBvaW50ID0gdmMucG9pbnRzWzBdO1xuICAgICAgICBjb25zdCBjcDI6IGIyVmVsb2NpdHlDb25zdHJhaW50UG9pbnQgPSB2Yy5wb2ludHNbMV07XG5cbiAgICAgICAgLy8gYjJWZWMyIGEoY3AxLT5ub3JtYWxJbXB1bHNlLCBjcDItPm5vcm1hbEltcHVsc2UpO1xuICAgICAgICBhLlNldChjcDEubm9ybWFsSW1wdWxzZSwgY3AyLm5vcm1hbEltcHVsc2UpO1xuICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoYS54ID49IDAgJiYgYS55ID49IDApO1xuXG4gICAgICAgIC8vIFJlbGF0aXZlIHZlbG9jaXR5IGF0IGNvbnRhY3RcbiAgICAgICAgLy8gYjJWZWMyIGR2MSA9IHZCICsgYjJDcm9zcyh3QiwgY3AxLT5yQikgLSB2QSAtIGIyQ3Jvc3Mod0EsIGNwMS0+ckEpO1xuICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgY3AxLnJCLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgY3AxLnJBLCBiMlZlYzIuc190MSksXG4gICAgICAgICAgZHYxKTtcbiAgICAgICAgLy8gYjJWZWMyIGR2MiA9IHZCICsgYjJDcm9zcyh3QiwgY3AyLT5yQikgLSB2QSAtIGIyQ3Jvc3Mod0EsIGNwMi0+ckEpO1xuICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgY3AyLnJCLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgY3AyLnJBLCBiMlZlYzIuc190MSksXG4gICAgICAgICAgZHYyKTtcblxuICAgICAgICAvLyBDb21wdXRlIG5vcm1hbCB2ZWxvY2l0eVxuICAgICAgICAvLyBmbG9hdDMyIHZuMSA9IGIyRG90KGR2MSwgbm9ybWFsKTtcbiAgICAgICAgbGV0IHZuMTogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGR2MSwgbm9ybWFsKTtcbiAgICAgICAgLy8gZmxvYXQzMiB2bjIgPSBiMkRvdChkdjIsIG5vcm1hbCk7XG4gICAgICAgIGxldCB2bjI6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihkdjIsIG5vcm1hbCk7XG5cbiAgICAgICAgLy8gYjJWZWMyIGI7XG4gICAgICAgIGIueCA9IHZuMSAtIGNwMS52ZWxvY2l0eUJpYXM7XG4gICAgICAgIGIueSA9IHZuMiAtIGNwMi52ZWxvY2l0eUJpYXM7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSBiJ1xuICAgICAgICAvLyBiIC09IGIyTXVsKHZjLT5LLCBhKTtcbiAgICAgICAgYi5TZWxmU3ViKGIyTWF0MjIuTXVsTVYodmMuSywgYSwgYjJWZWMyLnNfdDApKTtcblxuICAgICAgICAvKlxuICAgICAgICAjaWYgQjJfREVCVUdfU09MVkVSID09PSAxXG4gICAgICAgIGNvbnN0IGtfZXJyb3JUb2w6IG51bWJlciA9IDAuMDAxO1xuICAgICAgICAjZW5kaWZcbiAgICAgICAgKi9cblxuICAgICAgICBmb3IgKDsgOyApIHtcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIENhc2UgMTogdm4gPSAwXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyAwID0gQSAqIHggKyBiJ1xuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gU29sdmUgZm9yIHg6XG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyB4ID0gLSBpbnYoQSkgKiBiJ1xuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gYjJWZWMyIHggPSAtIGIyTXVsKHZjLT5ub3JtYWxNYXNzLCBiKTtcbiAgICAgICAgICBiMk1hdDIyLk11bE1WKHZjLm5vcm1hbE1hc3MsIGIsIHgpLlNlbGZOZWcoKTtcblxuICAgICAgICAgIGlmICh4LnggPj0gMCAmJiB4LnkgPj0gMCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgZCA9IHggLSBhO1xuICAgICAgICAgICAgYjJWZWMyLlN1YlZWKHgsIGEsIGQpO1xuXG4gICAgICAgICAgICAvLyBBcHBseSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgUDEgPSBkLnggKiBub3JtYWw7XG4gICAgICAgICAgICBiMlZlYzIuTXVsU1YoZC54LCBub3JtYWwsIFAxKTtcbiAgICAgICAgICAgIC8vIGIyVmVjMiBQMiA9IGQueSAqIG5vcm1hbDtcbiAgICAgICAgICAgIGIyVmVjMi5NdWxTVihkLnksIG5vcm1hbCwgUDIpO1xuICAgICAgICAgICAgYjJWZWMyLkFkZFZWKFAxLCBQMiwgUDFQMik7XG4gICAgICAgICAgICAvLyB2QSAtPSBtQSAqIChQMSArIFAyKTtcbiAgICAgICAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFAxUDIpO1xuICAgICAgICAgICAgLy8gd0EgLT0gaUEgKiAoYjJDcm9zcyhjcDEtPnJBLCBQMSkgKyBiMkNyb3NzKGNwMi0+ckEsIFAyKSk7XG4gICAgICAgICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVihjcDEuckEsIFAxKSArIGIyVmVjMi5Dcm9zc1ZWKGNwMi5yQSwgUDIpKTtcblxuICAgICAgICAgICAgLy8gdkIgKz0gbUIgKiAoUDEgKyBQMik7XG4gICAgICAgICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQMVAyKTtcbiAgICAgICAgICAgIC8vIHdCICs9IGlCICogKGIyQ3Jvc3MoY3AxLT5yQiwgUDEpICsgYjJDcm9zcyhjcDItPnJCLCBQMikpO1xuICAgICAgICAgICAgd0IgKz0gaUIgKiAoYjJWZWMyLkNyb3NzVlYoY3AxLnJCLCBQMSkgKyBiMlZlYzIuQ3Jvc3NWVihjcDIuckIsIFAyKSk7XG5cbiAgICAgICAgICAgIC8vIEFjY3VtdWxhdGVcbiAgICAgICAgICAgIGNwMS5ub3JtYWxJbXB1bHNlID0geC54O1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4Lnk7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAjaWYgQjJfREVCVUdfU09MVkVSID09PSAxXG4gICAgICAgICAgICAvLyBQb3N0Y29uZGl0aW9uc1xuICAgICAgICAgICAgZHYxID0gdkIgKyBiMkNyb3NzKHdCLCBjcDEtPnJCKSAtIHZBIC0gYjJDcm9zcyh3QSwgY3AxLT5yQSk7XG4gICAgICAgICAgICBkdjIgPSB2QiArIGIyQ3Jvc3Mod0IsIGNwMi0+ckIpIC0gdkEgLSBiMkNyb3NzKHdBLCBjcDItPnJBKTtcblxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBub3JtYWwgdmVsb2NpdHlcbiAgICAgICAgICAgIHZuMSA9IGIyRG90KGR2MSwgbm9ybWFsKTtcbiAgICAgICAgICAgIHZuMiA9IGIyRG90KGR2Miwgbm9ybWFsKTtcblxuICAgICAgICAgICAgYjJBc3NlcnQoYjJBYnModm4xIC0gY3AxLT52ZWxvY2l0eUJpYXMpIDwga19lcnJvclRvbCk7XG4gICAgICAgICAgICBiMkFzc2VydChiMkFicyh2bjIgLSBjcDItPnZlbG9jaXR5QmlhcykgPCBrX2Vycm9yVG9sKTtcbiAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gQ2FzZSAyOiB2bjEgPSAwIGFuZCB4MiA9IDBcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vICAgMCA9IGExMSAqIHgxICsgYTEyICogMCArIGIxJ1xuICAgICAgICAgIC8vIHZuMiA9IGEyMSAqIHgxICsgYTIyICogMCArIGIyJ1xuICAgICAgICAgIC8vXG4gICAgICAgICAgeC54ID0gKC1jcDEubm9ybWFsTWFzcyAqIGIueCk7XG4gICAgICAgICAgeC55ID0gMDtcbiAgICAgICAgICB2bjEgPSAwO1xuICAgICAgICAgIHZuMiA9IHZjLksuZXgueSAqIHgueCArIGIueTtcblxuICAgICAgICAgIGlmICh4LnggPj0gMCAmJiB2bjIgPj0gMCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgZCA9IHggLSBhO1xuICAgICAgICAgICAgYjJWZWMyLlN1YlZWKHgsIGEsIGQpO1xuXG4gICAgICAgICAgICAvLyBBcHBseSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgUDEgPSBkLnggKiBub3JtYWw7XG4gICAgICAgICAgICBiMlZlYzIuTXVsU1YoZC54LCBub3JtYWwsIFAxKTtcbiAgICAgICAgICAgIC8vIGIyVmVjMiBQMiA9IGQueSAqIG5vcm1hbDtcbiAgICAgICAgICAgIGIyVmVjMi5NdWxTVihkLnksIG5vcm1hbCwgUDIpO1xuICAgICAgICAgICAgYjJWZWMyLkFkZFZWKFAxLCBQMiwgUDFQMik7XG4gICAgICAgICAgICAvLyB2QSAtPSBtQSAqIChQMSArIFAyKTtcbiAgICAgICAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFAxUDIpO1xuICAgICAgICAgICAgLy8gd0EgLT0gaUEgKiAoYjJDcm9zcyhjcDEtPnJBLCBQMSkgKyBiMkNyb3NzKGNwMi0+ckEsIFAyKSk7XG4gICAgICAgICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVihjcDEuckEsIFAxKSArIGIyVmVjMi5Dcm9zc1ZWKGNwMi5yQSwgUDIpKTtcblxuICAgICAgICAgICAgLy8gdkIgKz0gbUIgKiAoUDEgKyBQMik7XG4gICAgICAgICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQMVAyKTtcbiAgICAgICAgICAgIC8vIHdCICs9IGlCICogKGIyQ3Jvc3MoY3AxLT5yQiwgUDEpICsgYjJDcm9zcyhjcDItPnJCLCBQMikpO1xuICAgICAgICAgICAgd0IgKz0gaUIgKiAoYjJWZWMyLkNyb3NzVlYoY3AxLnJCLCBQMSkgKyBiMlZlYzIuQ3Jvc3NWVihjcDIuckIsIFAyKSk7XG5cbiAgICAgICAgICAgIC8vIEFjY3VtdWxhdGVcbiAgICAgICAgICAgIGNwMS5ub3JtYWxJbXB1bHNlID0geC54O1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4Lnk7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAjaWYgQjJfREVCVUdfU09MVkVSID09PSAxXG4gICAgICAgICAgICAvLyBQb3N0Y29uZGl0aW9uc1xuICAgICAgICAgICAgZHYxID0gdkIgKyBiMkNyb3NzKHdCLCBjcDEtPnJCKSAtIHZBIC0gYjJDcm9zcyh3QSwgY3AxLT5yQSk7XG5cbiAgICAgICAgICAgIC8vIENvbXB1dGUgbm9ybWFsIHZlbG9jaXR5XG4gICAgICAgICAgICB2bjEgPSBiMkRvdChkdjEsIG5vcm1hbCk7XG5cbiAgICAgICAgICAgIGIyQXNzZXJ0KGIyQWJzKHZuMSAtIGNwMS0+dmVsb2NpdHlCaWFzKSA8IGtfZXJyb3JUb2wpO1xuICAgICAgICAgICAgI2VuZGlmXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBDYXNlIDM6IHZuMiA9IDAgYW5kIHgxID0gMFxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gdm4xID0gYTExICogMCArIGExMiAqIHgyICsgYjEnXG4gICAgICAgICAgLy8gICAwID0gYTIxICogMCArIGEyMiAqIHgyICsgYjInXG4gICAgICAgICAgLy9cbiAgICAgICAgICB4LnggPSAwO1xuICAgICAgICAgIHgueSA9ICgtY3AyLm5vcm1hbE1hc3MgKiBiLnkpO1xuICAgICAgICAgIHZuMSA9IHZjLksuZXkueCAqIHgueSArIGIueDtcbiAgICAgICAgICB2bjIgPSAwO1xuXG4gICAgICAgICAgaWYgKHgueSA+PSAwICYmIHZuMSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBSZXN1YnN0aXR1dGUgZm9yIHRoZSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgZCA9IHggLSBhO1xuICAgICAgICAgICAgYjJWZWMyLlN1YlZWKHgsIGEsIGQpO1xuXG4gICAgICAgICAgICAvLyBBcHBseSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgUDEgPSBkLnggKiBub3JtYWw7XG4gICAgICAgICAgICBiMlZlYzIuTXVsU1YoZC54LCBub3JtYWwsIFAxKTtcbiAgICAgICAgICAgIC8vIGIyVmVjMiBQMiA9IGQueSAqIG5vcm1hbDtcbiAgICAgICAgICAgIGIyVmVjMi5NdWxTVihkLnksIG5vcm1hbCwgUDIpO1xuICAgICAgICAgICAgYjJWZWMyLkFkZFZWKFAxLCBQMiwgUDFQMik7XG4gICAgICAgICAgICAvLyB2QSAtPSBtQSAqIChQMSArIFAyKTtcbiAgICAgICAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFAxUDIpO1xuICAgICAgICAgICAgLy8gd0EgLT0gaUEgKiAoYjJDcm9zcyhjcDEtPnJBLCBQMSkgKyBiMkNyb3NzKGNwMi0+ckEsIFAyKSk7XG4gICAgICAgICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVihjcDEuckEsIFAxKSArIGIyVmVjMi5Dcm9zc1ZWKGNwMi5yQSwgUDIpKTtcblxuICAgICAgICAgICAgLy8gdkIgKz0gbUIgKiAoUDEgKyBQMik7XG4gICAgICAgICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQMVAyKTtcbiAgICAgICAgICAgIC8vIHdCICs9IGlCICogKGIyQ3Jvc3MoY3AxLT5yQiwgUDEpICsgYjJDcm9zcyhjcDItPnJCLCBQMikpO1xuICAgICAgICAgICAgd0IgKz0gaUIgKiAoYjJWZWMyLkNyb3NzVlYoY3AxLnJCLCBQMSkgKyBiMlZlYzIuQ3Jvc3NWVihjcDIuckIsIFAyKSk7XG5cbiAgICAgICAgICAgIC8vIEFjY3VtdWxhdGVcbiAgICAgICAgICAgIGNwMS5ub3JtYWxJbXB1bHNlID0geC54O1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4Lnk7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAjaWYgQjJfREVCVUdfU09MVkVSID09PSAxXG4gICAgICAgICAgICAvLyBQb3N0Y29uZGl0aW9uc1xuICAgICAgICAgICAgZHYyID0gdkIgKyBiMkNyb3NzKHdCLCBjcDItPnJCKSAtIHZBIC0gYjJDcm9zcyh3QSwgY3AyLT5yQSk7XG5cbiAgICAgICAgICAgIC8vIENvbXB1dGUgbm9ybWFsIHZlbG9jaXR5XG4gICAgICAgICAgICB2bjIgPSBiMkRvdChkdjIsIG5vcm1hbCk7XG5cbiAgICAgICAgICAgIGIyQXNzZXJ0KGIyQWJzKHZuMiAtIGNwMi0+dmVsb2NpdHlCaWFzKSA8IGtfZXJyb3JUb2wpO1xuICAgICAgICAgICAgI2VuZGlmXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBDYXNlIDQ6IHgxID0gMCBhbmQgeDIgPSAwXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyB2bjEgPSBiMVxuICAgICAgICAgIC8vIHZuMiA9IGIyO1xuICAgICAgICAgIHgueCA9IDA7XG4gICAgICAgICAgeC55ID0gMDtcbiAgICAgICAgICB2bjEgPSBiLng7XG4gICAgICAgICAgdm4yID0gYi55O1xuXG4gICAgICAgICAgaWYgKHZuMSA+PSAwICYmIHZuMiA+PSAwKSB7XG4gICAgICAgICAgICAvLyBSZXN1YnN0aXR1dGUgZm9yIHRoZSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgZCA9IHggLSBhO1xuICAgICAgICAgICAgYjJWZWMyLlN1YlZWKHgsIGEsIGQpO1xuXG4gICAgICAgICAgICAvLyBBcHBseSBpbmNyZW1lbnRhbCBpbXB1bHNlXG4gICAgICAgICAgICAvLyBiMlZlYzIgUDEgPSBkLnggKiBub3JtYWw7XG4gICAgICAgICAgICBiMlZlYzIuTXVsU1YoZC54LCBub3JtYWwsIFAxKTtcbiAgICAgICAgICAgIC8vIGIyVmVjMiBQMiA9IGQueSAqIG5vcm1hbDtcbiAgICAgICAgICAgIGIyVmVjMi5NdWxTVihkLnksIG5vcm1hbCwgUDIpO1xuICAgICAgICAgICAgYjJWZWMyLkFkZFZWKFAxLCBQMiwgUDFQMik7XG4gICAgICAgICAgICAvLyB2QSAtPSBtQSAqIChQMSArIFAyKTtcbiAgICAgICAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFAxUDIpO1xuICAgICAgICAgICAgLy8gd0EgLT0gaUEgKiAoYjJDcm9zcyhjcDEtPnJBLCBQMSkgKyBiMkNyb3NzKGNwMi0+ckEsIFAyKSk7XG4gICAgICAgICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVihjcDEuckEsIFAxKSArIGIyVmVjMi5Dcm9zc1ZWKGNwMi5yQSwgUDIpKTtcblxuICAgICAgICAgICAgLy8gdkIgKz0gbUIgKiAoUDEgKyBQMik7XG4gICAgICAgICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQMVAyKTtcbiAgICAgICAgICAgIC8vIHdCICs9IGlCICogKGIyQ3Jvc3MoY3AxLT5yQiwgUDEpICsgYjJDcm9zcyhjcDItPnJCLCBQMikpO1xuICAgICAgICAgICAgd0IgKz0gaUIgKiAoYjJWZWMyLkNyb3NzVlYoY3AxLnJCLCBQMSkgKyBiMlZlYzIuQ3Jvc3NWVihjcDIuckIsIFAyKSk7XG5cbiAgICAgICAgICAgIC8vIEFjY3VtdWxhdGVcbiAgICAgICAgICAgIGNwMS5ub3JtYWxJbXB1bHNlID0geC54O1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4Lnk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5vIHNvbHV0aW9uLCBnaXZlIHVwLiBUaGlzIGlzIGhpdCBzb21ldGltZXMsIGJ1dCBpdCBkb2Vzbid0IHNlZW0gdG8gbWF0dGVyLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHRoaXMubV92ZWxvY2l0aWVzW2luZGV4QV0udiA9IHZBO1xuICAgICAgdGhpcy5tX3ZlbG9jaXRpZXNbaW5kZXhBXS53ID0gd0E7XG4gICAgICAvLyB0aGlzLm1fdmVsb2NpdGllc1tpbmRleEJdLnYgPSB2QjtcbiAgICAgIHRoaXMubV92ZWxvY2l0aWVzW2luZGV4Ql0udyA9IHdCO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBTdG9yZUltcHVsc2VzKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgdmM6IGIyQ29udGFjdFZlbG9jaXR5Q29uc3RyYWludCA9IHRoaXMubV92ZWxvY2l0eUNvbnN0cmFpbnRzW2ldO1xuICAgICAgY29uc3QgbWFuaWZvbGQ6IGIyTWFuaWZvbGQgPSB0aGlzLm1fY29udGFjdHNbdmMuY29udGFjdEluZGV4XS5HZXRNYW5pZm9sZCgpO1xuXG4gICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdmMucG9pbnRDb3VudDsgKytqKSB7XG4gICAgICAgIG1hbmlmb2xkLnBvaW50c1tqXS5ub3JtYWxJbXB1bHNlID0gdmMucG9pbnRzW2pdLm5vcm1hbEltcHVsc2U7XG4gICAgICAgIG1hbmlmb2xkLnBvaW50c1tqXS50YW5nZW50SW1wdWxzZSA9IHZjLnBvaW50c1tqXS50YW5nZW50SW1wdWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc194ZkEgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfeGZCID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3BzbSA9IG5ldyBiMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3JCID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHhmQTogYjJUcmFuc2Zvcm0gPSBiMkNvbnRhY3RTb2x2ZXIuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfeGZBO1xuICAgIGNvbnN0IHhmQjogYjJUcmFuc2Zvcm0gPSBiMkNvbnRhY3RTb2x2ZXIuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfeGZCO1xuICAgIGNvbnN0IHBzbTogYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkID0gYjJDb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3BzbTtcbiAgICBjb25zdCByQTogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3JBO1xuICAgIGNvbnN0IHJCOiBiMlZlYzIgPSBiMkNvbnRhY3RTb2x2ZXIuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckI7XG4gICAgY29uc3QgUDogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX1A7XG5cbiAgICBsZXQgbWluU2VwYXJhdGlvbjogbnVtYmVyID0gMDtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgcGM6IGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludCA9IHRoaXMubV9wb3NpdGlvbkNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBjb25zdCBpbmRleEE6IG51bWJlciA9IHBjLmluZGV4QTtcbiAgICAgIGNvbnN0IGluZGV4QjogbnVtYmVyID0gcGMuaW5kZXhCO1xuICAgICAgY29uc3QgbG9jYWxDZW50ZXJBOiBiMlZlYzIgPSBwYy5sb2NhbENlbnRlckE7XG4gICAgICBjb25zdCBtQTogbnVtYmVyID0gcGMuaW52TWFzc0E7XG4gICAgICBjb25zdCBpQTogbnVtYmVyID0gcGMuaW52SUE7XG4gICAgICBjb25zdCBsb2NhbENlbnRlckI6IGIyVmVjMiA9IHBjLmxvY2FsQ2VudGVyQjtcbiAgICAgIGNvbnN0IG1COiBudW1iZXIgPSBwYy5pbnZNYXNzQjtcbiAgICAgIGNvbnN0IGlCOiBudW1iZXIgPSBwYy5pbnZJQjtcbiAgICAgIGNvbnN0IHBvaW50Q291bnQ6IG51bWJlciA9IHBjLnBvaW50Q291bnQ7XG5cbiAgICAgIGNvbnN0IGNBOiBiMlZlYzIgPSB0aGlzLm1fcG9zaXRpb25zW2luZGV4QV0uYztcbiAgICAgIGxldCBhQTogbnVtYmVyID0gdGhpcy5tX3Bvc2l0aW9uc1tpbmRleEFdLmE7XG5cbiAgICAgIGNvbnN0IGNCOiBiMlZlYzIgPSB0aGlzLm1fcG9zaXRpb25zW2luZGV4Ql0uYztcbiAgICAgIGxldCBhQjogbnVtYmVyID0gdGhpcy5tX3Bvc2l0aW9uc1tpbmRleEJdLmE7XG5cbiAgICAgIC8vIFNvbHZlIG5vcm1hbCBjb25zdHJhaW50c1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHBvaW50Q291bnQ7ICsraikge1xuICAgICAgICB4ZkEucS5TZXRBbmdsZShhQSk7XG4gICAgICAgIHhmQi5xLlNldEFuZ2xlKGFCKTtcbiAgICAgICAgYjJWZWMyLlN1YlZWKGNBLCBiMlJvdC5NdWxSVih4ZkEucSwgbG9jYWxDZW50ZXJBLCBiMlZlYzIuc190MCksIHhmQS5wKTtcbiAgICAgICAgYjJWZWMyLlN1YlZWKGNCLCBiMlJvdC5NdWxSVih4ZkIucSwgbG9jYWxDZW50ZXJCLCBiMlZlYzIuc190MCksIHhmQi5wKTtcblxuICAgICAgICBwc20uSW5pdGlhbGl6ZShwYywgeGZBLCB4ZkIsIGopO1xuICAgICAgICBjb25zdCBub3JtYWw6IGIyVmVjMiA9IHBzbS5ub3JtYWw7XG5cbiAgICAgICAgY29uc3QgcG9pbnQ6IGIyVmVjMiA9IHBzbS5wb2ludDtcbiAgICAgICAgY29uc3Qgc2VwYXJhdGlvbjogbnVtYmVyID0gcHNtLnNlcGFyYXRpb247XG5cbiAgICAgICAgLy8gYjJWZWMyIHJBID0gcG9pbnQgLSBjQTtcbiAgICAgICAgYjJWZWMyLlN1YlZWKHBvaW50LCBjQSwgckEpO1xuICAgICAgICAvLyBiMlZlYzIgckIgPSBwb2ludCAtIGNCO1xuICAgICAgICBiMlZlYzIuU3ViVlYocG9pbnQsIGNCLCByQik7XG5cbiAgICAgICAgLy8gVHJhY2sgbWF4IGNvbnN0cmFpbnQgZXJyb3IuXG4gICAgICAgIG1pblNlcGFyYXRpb24gPSBiMk1pbihtaW5TZXBhcmF0aW9uLCBzZXBhcmF0aW9uKTtcblxuICAgICAgICAvLyBQcmV2ZW50IGxhcmdlIGNvcnJlY3Rpb25zIGFuZCBhbGxvdyBzbG9wLlxuICAgICAgICBjb25zdCBDOiBudW1iZXIgPSBiMkNsYW1wKGIyX2JhdW1nYXJ0ZSAqIChzZXBhcmF0aW9uICsgYjJfbGluZWFyU2xvcCksICgtYjJfbWF4TGluZWFyQ29ycmVjdGlvbiksIDApO1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIGVmZmVjdGl2ZSBtYXNzLlxuICAgICAgICAvLyBmbG9hdDMyIHJuQSA9IGIyQ3Jvc3MockEsIG5vcm1hbCk7XG4gICAgICAgIGNvbnN0IHJuQTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYockEsIG5vcm1hbCk7XG4gICAgICAgIC8vIGZsb2F0MzIgcm5CID0gYjJDcm9zcyhyQiwgbm9ybWFsKTtcbiAgICAgICAgY29uc3Qgcm5COiBudW1iZXIgPSBiMlZlYzIuQ3Jvc3NWVihyQiwgbm9ybWFsKTtcbiAgICAgICAgLy8gZmxvYXQzMiBLID0gbUEgKyBtQiArIGlBICogcm5BICogcm5BICsgaUIgKiBybkIgKiBybkI7XG4gICAgICAgIGNvbnN0IEs6IG51bWJlciA9IG1BICsgbUIgKyBpQSAqIHJuQSAqIHJuQSArIGlCICogcm5CICogcm5CO1xuXG4gICAgICAgIC8vIENvbXB1dGUgbm9ybWFsIGltcHVsc2VcbiAgICAgICAgY29uc3QgaW1wdWxzZTogbnVtYmVyID0gSyA+IDAgPyAtIEMgLyBLIDogMDtcblxuICAgICAgICAvLyBiMlZlYzIgUCA9IGltcHVsc2UgKiBub3JtYWw7XG4gICAgICAgIGIyVmVjMi5NdWxTVihpbXB1bHNlLCBub3JtYWwsIFApO1xuXG4gICAgICAgIC8vIGNBIC09IG1BICogUDtcbiAgICAgICAgY0EuU2VsZk11bFN1YihtQSwgUCk7XG4gICAgICAgIC8vIGFBIC09IGlBICogYjJDcm9zcyhyQSwgUCk7XG4gICAgICAgIGFBIC09IGlBICogYjJWZWMyLkNyb3NzVlYockEsIFApO1xuXG4gICAgICAgIC8vIGNCICs9IG1CICogUDtcbiAgICAgICAgY0IuU2VsZk11bEFkZChtQiwgUCk7XG4gICAgICAgIC8vIGFCICs9IGlCICogYjJDcm9zcyhyQiwgUCk7XG4gICAgICAgIGFCICs9IGlCICogYjJWZWMyLkNyb3NzVlYockIsIFApO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGlzLm1fcG9zaXRpb25zW2luZGV4QV0uYyA9IGNBO1xuICAgICAgdGhpcy5tX3Bvc2l0aW9uc1tpbmRleEFdLmEgPSBhQTtcblxuICAgICAgLy8gdGhpcy5tX3Bvc2l0aW9uc1tpbmRleEJdLmMgPSBjQjtcbiAgICAgIHRoaXMubV9wb3NpdGlvbnNbaW5kZXhCXS5hID0gYUI7XG4gICAgfVxuXG4gICAgLy8gV2UgY2FuJ3QgZXhwZWN0IG1pblNwZXBhcmF0aW9uID49IC1iMl9saW5lYXJTbG9wIGJlY2F1c2Ugd2UgZG9uJ3RcbiAgICAvLyBwdXNoIHRoZSBzZXBhcmF0aW9uIGFib3ZlIC1iMl9saW5lYXJTbG9wLlxuICAgIHJldHVybiBtaW5TZXBhcmF0aW9uID4gKC0zICogYjJfbGluZWFyU2xvcCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVRPSVBvc2l0aW9uQ29uc3RyYWludHNfc194ZkEgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzX3NfeGZCID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVE9JUG9zaXRpb25Db25zdHJhaW50c19zX3BzbSA9IG5ldyBiMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVE9JUG9zaXRpb25Db25zdHJhaW50c19zX3JCID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVRPSVBvc2l0aW9uQ29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzKHRvaUluZGV4QTogbnVtYmVyLCB0b2lJbmRleEI6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHhmQTogYjJUcmFuc2Zvcm0gPSBiMkNvbnRhY3RTb2x2ZXIuU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzX3NfeGZBO1xuICAgIGNvbnN0IHhmQjogYjJUcmFuc2Zvcm0gPSBiMkNvbnRhY3RTb2x2ZXIuU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzX3NfeGZCO1xuICAgIGNvbnN0IHBzbTogYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkID0gYjJDb250YWN0U29sdmVyLlNvbHZlVE9JUG9zaXRpb25Db25zdHJhaW50c19zX3BzbTtcbiAgICBjb25zdCByQTogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVE9JUG9zaXRpb25Db25zdHJhaW50c19zX3JBO1xuICAgIGNvbnN0IHJCOiBiMlZlYzIgPSBiMkNvbnRhY3RTb2x2ZXIuU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckI7XG4gICAgY29uc3QgUDogYjJWZWMyID0gYjJDb250YWN0U29sdmVyLlNvbHZlVE9JUG9zaXRpb25Db25zdHJhaW50c19zX1A7XG5cbiAgICBsZXQgbWluU2VwYXJhdGlvbjogbnVtYmVyID0gMDtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgY29uc3QgcGM6IGIyQ29udGFjdFBvc2l0aW9uQ29uc3RyYWludCA9IHRoaXMubV9wb3NpdGlvbkNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBjb25zdCBpbmRleEE6IG51bWJlciA9IHBjLmluZGV4QTtcbiAgICAgIGNvbnN0IGluZGV4QjogbnVtYmVyID0gcGMuaW5kZXhCO1xuICAgICAgY29uc3QgbG9jYWxDZW50ZXJBOiBiMlZlYzIgPSBwYy5sb2NhbENlbnRlckE7XG4gICAgICBjb25zdCBsb2NhbENlbnRlckI6IGIyVmVjMiA9IHBjLmxvY2FsQ2VudGVyQjtcbiAgICAgIGNvbnN0IHBvaW50Q291bnQ6IG51bWJlciA9IHBjLnBvaW50Q291bnQ7XG5cbiAgICAgIGxldCBtQTogbnVtYmVyID0gMDtcbiAgICAgIGxldCBpQTogbnVtYmVyID0gMDtcbiAgICAgIGlmIChpbmRleEEgPT09IHRvaUluZGV4QSB8fCBpbmRleEEgPT09IHRvaUluZGV4Qikge1xuICAgICAgICBtQSA9IHBjLmludk1hc3NBO1xuICAgICAgICBpQSA9IHBjLmludklBO1xuICAgICAgfVxuXG4gICAgICBsZXQgbUI6IG51bWJlciA9IDA7XG4gICAgICBsZXQgaUI6IG51bWJlciA9IDA7XG4gICAgICBpZiAoaW5kZXhCID09PSB0b2lJbmRleEEgfHwgaW5kZXhCID09PSB0b2lJbmRleEIpIHtcbiAgICAgICAgbUIgPSBwYy5pbnZNYXNzQjtcbiAgICAgICAgaUIgPSBwYy5pbnZJQjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY0E6IGIyVmVjMiA9IHRoaXMubV9wb3NpdGlvbnNbaW5kZXhBXS5jO1xuICAgICAgbGV0IGFBOiBudW1iZXIgPSB0aGlzLm1fcG9zaXRpb25zW2luZGV4QV0uYTtcblxuICAgICAgY29uc3QgY0I6IGIyVmVjMiA9IHRoaXMubV9wb3NpdGlvbnNbaW5kZXhCXS5jO1xuICAgICAgbGV0IGFCOiBudW1iZXIgPSB0aGlzLm1fcG9zaXRpb25zW2luZGV4Ql0uYTtcblxuICAgICAgLy8gU29sdmUgbm9ybWFsIGNvbnN0cmFpbnRzXG4gICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgcG9pbnRDb3VudDsgKytqKSB7XG4gICAgICAgIHhmQS5xLlNldEFuZ2xlKGFBKTtcbiAgICAgICAgeGZCLnEuU2V0QW5nbGUoYUIpO1xuICAgICAgICBiMlZlYzIuU3ViVlYoY0EsIGIyUm90Lk11bFJWKHhmQS5xLCBsb2NhbENlbnRlckEsIGIyVmVjMi5zX3QwKSwgeGZBLnApO1xuICAgICAgICBiMlZlYzIuU3ViVlYoY0IsIGIyUm90Lk11bFJWKHhmQi5xLCBsb2NhbENlbnRlckIsIGIyVmVjMi5zX3QwKSwgeGZCLnApO1xuXG4gICAgICAgIHBzbS5Jbml0aWFsaXplKHBjLCB4ZkEsIHhmQiwgaik7XG4gICAgICAgIGNvbnN0IG5vcm1hbDogYjJWZWMyID0gcHNtLm5vcm1hbDtcblxuICAgICAgICBjb25zdCBwb2ludDogYjJWZWMyID0gcHNtLnBvaW50O1xuICAgICAgICBjb25zdCBzZXBhcmF0aW9uOiBudW1iZXIgPSBwc20uc2VwYXJhdGlvbjtcblxuICAgICAgICAvLyBiMlZlYzIgckEgPSBwb2ludCAtIGNBO1xuICAgICAgICBiMlZlYzIuU3ViVlYocG9pbnQsIGNBLCByQSk7XG4gICAgICAgIC8vIGIyVmVjMiByQiA9IHBvaW50IC0gY0I7XG4gICAgICAgIGIyVmVjMi5TdWJWVihwb2ludCwgY0IsIHJCKTtcblxuICAgICAgICAvLyBUcmFjayBtYXggY29uc3RyYWludCBlcnJvci5cbiAgICAgICAgbWluU2VwYXJhdGlvbiA9IGIyTWluKG1pblNlcGFyYXRpb24sIHNlcGFyYXRpb24pO1xuXG4gICAgICAgIC8vIFByZXZlbnQgbGFyZ2UgY29ycmVjdGlvbnMgYW5kIGFsbG93IHNsb3AuXG4gICAgICAgIGNvbnN0IEM6IG51bWJlciA9IGIyQ2xhbXAoYjJfdG9pQmF1bWdhcnRlICogKHNlcGFyYXRpb24gKyBiMl9saW5lYXJTbG9wKSwgKC1iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSwgMCk7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgZWZmZWN0aXZlIG1hc3MuXG4gICAgICAgIC8vIGZsb2F0MzIgcm5BID0gYjJDcm9zcyhyQSwgbm9ybWFsKTtcbiAgICAgICAgY29uc3Qgcm5BOiBudW1iZXIgPSBiMlZlYzIuQ3Jvc3NWVihyQSwgbm9ybWFsKTtcbiAgICAgICAgLy8gZmxvYXQzMiBybkIgPSBiMkNyb3NzKHJCLCBub3JtYWwpO1xuICAgICAgICBjb25zdCBybkI6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKHJCLCBub3JtYWwpO1xuICAgICAgICAvLyBmbG9hdDMyIEsgPSBtQSArIG1CICsgaUEgKiBybkEgKiBybkEgKyBpQiAqIHJuQiAqIHJuQjtcbiAgICAgICAgY29uc3QgSzogbnVtYmVyID0gbUEgKyBtQiArIGlBICogcm5BICogcm5BICsgaUIgKiBybkIgKiBybkI7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSBub3JtYWwgaW1wdWxzZVxuICAgICAgICBjb25zdCBpbXB1bHNlOiBudW1iZXIgPSBLID4gMCA/IC0gQyAvIEsgOiAwO1xuXG4gICAgICAgIC8vIGIyVmVjMiBQID0gaW1wdWxzZSAqIG5vcm1hbDtcbiAgICAgICAgYjJWZWMyLk11bFNWKGltcHVsc2UsIG5vcm1hbCwgUCk7XG5cbiAgICAgICAgLy8gY0EgLT0gbUEgKiBQO1xuICAgICAgICBjQS5TZWxmTXVsU3ViKG1BLCBQKTtcbiAgICAgICAgLy8gYUEgLT0gaUEgKiBiMkNyb3NzKHJBLCBQKTtcbiAgICAgICAgYUEgLT0gaUEgKiBiMlZlYzIuQ3Jvc3NWVihyQSwgUCk7XG5cbiAgICAgICAgLy8gY0IgKz0gbUIgKiBQO1xuICAgICAgICBjQi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgICAgLy8gYUIgKz0gaUIgKiBiMkNyb3NzKHJCLCBQKTtcbiAgICAgICAgYUIgKz0gaUIgKiBiMlZlYzIuQ3Jvc3NWVihyQiwgUCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRoaXMubV9wb3NpdGlvbnNbaW5kZXhBXS5jID0gY0E7XG4gICAgICB0aGlzLm1fcG9zaXRpb25zW2luZGV4QV0uYSA9IGFBO1xuXG4gICAgICAvLyB0aGlzLm1fcG9zaXRpb25zW2luZGV4Ql0uYyA9IGNCO1xuICAgICAgdGhpcy5tX3Bvc2l0aW9uc1tpbmRleEJdLmEgPSBhQjtcbiAgICB9XG5cbiAgICAvLyBXZSBjYW4ndCBleHBlY3QgbWluU3BlcGFyYXRpb24gPj0gLWIyX2xpbmVhclNsb3AgYmVjYXVzZSB3ZSBkb24ndFxuICAgIC8vIHB1c2ggdGhlIHNlcGFyYXRpb24gYWJvdmUgLWIyX2xpbmVhclNsb3AuXG4gICAgcmV0dXJuIG1pblNlcGFyYXRpb24gPj0gLTEuNSAqIGIyX2xpbmVhclNsb3A7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFIQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBWkE7QUFjQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSEE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXRCQTtBQXdCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFIQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBcEJBO0FBc0JBO0FBQUE7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBTkE7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBaUVBO0FBM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlEQTtBQUNBO0FBQ0E7QUFDQTtBQTREQTtBQUFBO0FBcEVBO0FBc0VBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQSsyQkE7QUE3MkJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFJQTtBQU9BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBT0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFrQ0E7QUFDQTtBQUdBO0FBS0E7QUFLQTtBQU9BO0FBRUE7QUFHQTtBQUNBO0FBSUE7QUFRQTtBQVdBO0FBRUE7QUFHQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQWdCQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBYUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQWFBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFHQTtBQUlBO0FBRUE7QUFFQTtBQUdBO0FBR0E7QUFHQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUdBO0FBR0E7QUFJQTtBQUVBO0FBRUE7QUFHQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUE3d0JBO0FBQ0E7QUFDQTtBQXNIQTtBQWlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBa1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTJGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFvR0E7QUFBQTtBQXQzQkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_contact_solver.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_distance_joint.ts":
/*!*************************************************!*\
  !*** ./src/box2d/dynamics/b2_distance_joint.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2DistanceJoint = exports.b2DistanceJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2DistanceJointDef = (function (_super) {\n    __extends(b2DistanceJointDef, _super);\n    function b2DistanceJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_distanceJoint) || this;\n        _this.localAnchorA = new b2_math_1.b2Vec2();\n        _this.localAnchorB = new b2_math_1.b2Vec2();\n        _this.length = 1;\n        _this.minLength = 0;\n        _this.maxLength = b2_settings_1.b2_maxFloat;\n        _this.stiffness = 0;\n        _this.damping = 0;\n        return _this;\n    }\n    b2DistanceJointDef.prototype.Initialize = function (b1, b2, anchor1, anchor2) {\n        this.bodyA = b1;\n        this.bodyB = b2;\n        this.bodyA.GetLocalPoint(anchor1, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchor2, this.localAnchorB);\n        this.length = b2_math_1.b2Max(b2_math_1.b2Vec2.DistanceVV(anchor1, anchor2), b2_settings_1.b2_linearSlop);\n        this.minLength = this.length;\n        this.maxLength = this.length;\n    };\n    return b2DistanceJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2DistanceJointDef = b2DistanceJointDef;\nvar b2DistanceJoint = (function (_super) {\n    __extends(b2DistanceJoint, _super);\n    function b2DistanceJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_stiffness = 0;\n        _this.m_damping = 0;\n        _this.m_bias = 0;\n        _this.m_length = 0;\n        _this.m_minLength = 0;\n        _this.m_maxLength = 0;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_gamma = 0;\n        _this.m_impulse = 0;\n        _this.m_lowerImpulse = 0;\n        _this.m_upperImpulse = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_u = new b2_math_1.b2Vec2();\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_currentLength = 0;\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_softMass = 0;\n        _this.m_mass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, b2_math_1.b2Vec2.ZERO));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, b2_math_1.b2Vec2.ZERO));\n        _this.m_length = b2_math_1.b2Max(b2_settings_1.b2Maybe(def.length, _this.GetCurrentLength()), b2_settings_1.b2_linearSlop);\n        _this.m_minLength = b2_math_1.b2Max(b2_settings_1.b2Maybe(def.minLength, _this.m_length), b2_settings_1.b2_linearSlop);\n        _this.m_maxLength = b2_math_1.b2Max(b2_settings_1.b2Maybe(def.maxLength, _this.m_length), _this.m_minLength);\n        _this.m_stiffness = b2_settings_1.b2Maybe(def.stiffness, 0);\n        _this.m_damping = b2_settings_1.b2Maybe(def.damping, 0);\n        return _this;\n    }\n    b2DistanceJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2DistanceJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2DistanceJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * (this.m_impulse + this.m_lowerImpulse - this.m_upperImpulse) * this.m_u.x;\n        out.y = inv_dt * (this.m_impulse + this.m_lowerImpulse - this.m_upperImpulse) * this.m_u.y;\n        return out;\n    };\n    b2DistanceJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return 0;\n    };\n    b2DistanceJoint.prototype.GetLocalAnchorA = function () { return this.m_localAnchorA; };\n    b2DistanceJoint.prototype.GetLocalAnchorB = function () { return this.m_localAnchorB; };\n    b2DistanceJoint.prototype.SetLength = function (length) {\n        this.m_impulse = 0;\n        this.m_length = b2_math_1.b2Max(b2_settings_1.b2_linearSlop, length);\n        return this.m_length;\n    };\n    b2DistanceJoint.prototype.GetLength = function () {\n        return this.m_length;\n    };\n    b2DistanceJoint.prototype.SetMinLength = function (minLength) {\n        this.m_lowerImpulse = 0;\n        this.m_minLength = b2_math_1.b2Clamp(minLength, b2_settings_1.b2_linearSlop, this.m_maxLength);\n        return this.m_minLength;\n    };\n    b2DistanceJoint.prototype.SetMaxLength = function (maxLength) {\n        this.m_upperImpulse = 0;\n        this.m_maxLength = b2_math_1.b2Max(maxLength, this.m_minLength);\n        return this.m_maxLength;\n    };\n    b2DistanceJoint.prototype.GetCurrentLength = function () {\n        var pA = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, new b2_math_1.b2Vec2());\n        var pB = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, new b2_math_1.b2Vec2());\n        return b2_math_1.b2Vec2.DistanceVV(pA, pB);\n    };\n    b2DistanceJoint.prototype.SetStiffness = function (stiffness) {\n        this.m_stiffness = stiffness;\n    };\n    b2DistanceJoint.prototype.GetStiffness = function () {\n        return this.m_stiffness;\n    };\n    b2DistanceJoint.prototype.SetDamping = function (damping) {\n        this.m_damping = damping;\n    };\n    b2DistanceJoint.prototype.GetDamping = function () {\n        return this.m_damping;\n    };\n    b2DistanceJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2DistanceJointDef = new b2DistanceJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.length = %.15f;\\n\", this.m_length);\n        log(\"  jd.minLength = %.15f;\\n\", this.m_minLength);\n        log(\"  jd.maxLength = %.15f;\\n\", this.m_maxLength);\n        log(\"  jd.stiffness = %.15f;\\n\", this.m_stiffness);\n        log(\"  jd.damping = %.15f;\\n\", this.m_damping);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2DistanceJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        this.m_u.x = cB.x + this.m_rB.x - cA.x - this.m_rA.x;\n        this.m_u.y = cB.y + this.m_rB.y - cA.y - this.m_rA.y;\n        this.m_currentLength = this.m_u.Length();\n        if (this.m_currentLength > b2_settings_1.b2_linearSlop) {\n            this.m_u.SelfMul(1 / this.m_currentLength);\n        }\n        else {\n            this.m_u.SetZero();\n            this.m_mass = 0;\n            this.m_impulse = 0;\n            this.m_lowerImpulse = 0;\n            this.m_upperImpulse = 0;\n        }\n        var crAu = b2_math_1.b2Vec2.CrossVV(this.m_rA, this.m_u);\n        var crBu = b2_math_1.b2Vec2.CrossVV(this.m_rB, this.m_u);\n        var invMass = this.m_invMassA + this.m_invIA * crAu * crAu + this.m_invMassB + this.m_invIB * crBu * crBu;\n        this.m_mass = invMass !== 0 ? 1 / invMass : 0;\n        if (this.m_stiffness > 0 && this.m_minLength < this.m_maxLength) {\n            var C = this.m_currentLength - this.m_length;\n            var d = this.m_damping;\n            var k = this.m_stiffness;\n            var h = data.step.dt;\n            this.m_gamma = h * (d + h * k);\n            this.m_gamma = this.m_gamma !== 0 ? 1 / this.m_gamma : 0;\n            this.m_bias = C * h * k * this.m_gamma;\n            invMass += this.m_gamma;\n            this.m_softMass = invMass !== 0 ? 1 / invMass : 0;\n        }\n        else {\n            this.m_gamma = 0;\n            this.m_bias = 0;\n            this.m_softMass = this.m_mass;\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse *= data.step.dtRatio;\n            this.m_lowerImpulse *= data.step.dtRatio;\n            this.m_upperImpulse *= data.step.dtRatio;\n            var P = b2_math_1.b2Vec2.MulSV(this.m_impulse + this.m_lowerImpulse - this.m_upperImpulse, this.m_u, b2DistanceJoint.InitVelocityConstraints_s_P);\n            vA.SelfMulSub(this.m_invMassA, P);\n            wA -= this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, P);\n            vB.SelfMulAdd(this.m_invMassB, P);\n            wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, P);\n        }\n        else {\n            this.m_impulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2DistanceJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        if (this.m_minLength < this.m_maxLength) {\n            if (this.m_stiffness > 0) {\n                var vpA = b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2DistanceJoint.SolveVelocityConstraints_s_vpA);\n                var vpB = b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2DistanceJoint.SolveVelocityConstraints_s_vpB);\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_u, b2_math_1.b2Vec2.SubVV(vpB, vpA, b2_math_1.b2Vec2.s_t0));\n                var impulse = -this.m_softMass * (Cdot + this.m_bias + this.m_gamma * this.m_impulse);\n                this.m_impulse += impulse;\n                var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_u, b2DistanceJoint.SolveVelocityConstraints_s_P);\n                vA.SelfMulSub(this.m_invMassA, P);\n                wA -= this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, P);\n                vB.SelfMulAdd(this.m_invMassB, P);\n                wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, P);\n            }\n            {\n                var C = this.m_currentLength - this.m_minLength;\n                var bias = b2_math_1.b2Max(0, C) * data.step.inv_dt;\n                var vpA = b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2DistanceJoint.SolveVelocityConstraints_s_vpA);\n                var vpB = b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2DistanceJoint.SolveVelocityConstraints_s_vpB);\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_u, b2_math_1.b2Vec2.SubVV(vpB, vpA, b2_math_1.b2Vec2.s_t0));\n                var impulse = -this.m_mass * (Cdot + bias);\n                var oldImpulse = this.m_lowerImpulse;\n                this.m_lowerImpulse = b2_math_1.b2Max(0, this.m_lowerImpulse + impulse);\n                impulse = this.m_lowerImpulse - oldImpulse;\n                var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_u, b2DistanceJoint.SolveVelocityConstraints_s_P);\n                vA.SelfMulSub(this.m_invMassA, P);\n                wA -= this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, P);\n                vB.SelfMulAdd(this.m_invMassB, P);\n                wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, P);\n            }\n            {\n                var C = this.m_maxLength - this.m_currentLength;\n                var bias = b2_math_1.b2Max(0, C) * data.step.inv_dt;\n                var vpA = b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2DistanceJoint.SolveVelocityConstraints_s_vpA);\n                var vpB = b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2DistanceJoint.SolveVelocityConstraints_s_vpB);\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_u, b2_math_1.b2Vec2.SubVV(vpA, vpB, b2_math_1.b2Vec2.s_t0));\n                var impulse = -this.m_mass * (Cdot + bias);\n                var oldImpulse = this.m_upperImpulse;\n                this.m_upperImpulse = b2_math_1.b2Max(0, this.m_upperImpulse + impulse);\n                impulse = this.m_upperImpulse - oldImpulse;\n                var P = b2_math_1.b2Vec2.MulSV(-impulse, this.m_u, b2DistanceJoint.SolveVelocityConstraints_s_P);\n                vA.SelfMulSub(this.m_invMassA, P);\n                wA -= this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, P);\n                vB.SelfMulAdd(this.m_invMassB, P);\n                wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, P);\n            }\n        }\n        else {\n            var vpA = b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2DistanceJoint.SolveVelocityConstraints_s_vpA);\n            var vpB = b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2DistanceJoint.SolveVelocityConstraints_s_vpB);\n            var Cdot = b2_math_1.b2Vec2.DotVV(this.m_u, b2_math_1.b2Vec2.SubVV(vpB, vpA, b2_math_1.b2Vec2.s_t0));\n            var impulse = -this.m_mass * Cdot;\n            this.m_impulse += impulse;\n            var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_u, b2DistanceJoint.SolveVelocityConstraints_s_P);\n            vA.SelfMulSub(this.m_invMassA, P);\n            wA -= this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, P);\n            vB.SelfMulAdd(this.m_invMassB, P);\n            wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, P);\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2DistanceJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var u = this.m_u;\n        u.x = cB.x + rB.x - cA.x - rA.x;\n        u.y = cB.y + rB.y - cA.y - rA.y;\n        var length = this.m_u.Normalize();\n        var C;\n        if (this.m_minLength == this.m_maxLength) {\n            C = length - this.m_minLength;\n        }\n        else if (length < this.m_minLength) {\n            C = length - this.m_minLength;\n        }\n        else if (this.m_maxLength < length) {\n            C = length - this.m_maxLength;\n        }\n        else {\n            return true;\n        }\n        var impulse = -this.m_mass * C;\n        var P = b2_math_1.b2Vec2.MulSV(impulse, u, b2DistanceJoint.SolvePositionConstraints_s_P);\n        cA.SelfMulSub(this.m_invMassA, P);\n        aA -= this.m_invIA * b2_math_1.b2Vec2.CrossVV(rA, P);\n        cB.SelfMulAdd(this.m_invMassB, P);\n        aB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(rB, P);\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        return b2_math_1.b2Abs(C) < b2_settings_1.b2_linearSlop;\n    };\n    b2DistanceJoint.prototype.Draw = function (draw) {\n        var xfA = this.m_bodyA.GetTransform();\n        var xfB = this.m_bodyB.GetTransform();\n        var pA = b2_math_1.b2Transform.MulXV(xfA, this.m_localAnchorA, b2DistanceJoint.Draw_s_pA);\n        var pB = b2_math_1.b2Transform.MulXV(xfB, this.m_localAnchorB, b2DistanceJoint.Draw_s_pB);\n        var axis = b2_math_1.b2Vec2.SubVV(pB, pA, b2DistanceJoint.Draw_s_axis);\n        axis.Normalize();\n        var c1 = b2DistanceJoint.Draw_s_c1;\n        var c2 = b2DistanceJoint.Draw_s_c2;\n        var c3 = b2DistanceJoint.Draw_s_c3;\n        var c4 = b2DistanceJoint.Draw_s_c4;\n        draw.DrawSegment(pA, pB, c4);\n        var pRest = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_length, axis, b2DistanceJoint.Draw_s_pRest);\n        draw.DrawPoint(pRest, 8.0, c1);\n        if (this.m_minLength != this.m_maxLength) {\n            if (this.m_minLength > b2_settings_1.b2_linearSlop) {\n                var pMin = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_minLength, axis, b2DistanceJoint.Draw_s_pMin);\n                draw.DrawPoint(pMin, 4.0, c2);\n            }\n            if (this.m_maxLength < b2_settings_1.b2_maxFloat) {\n                var pMax = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_maxLength, axis, b2DistanceJoint.Draw_s_pMax);\n                draw.DrawPoint(pMax, 4.0, c3);\n            }\n        }\n    };\n    b2DistanceJoint.InitVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2DistanceJoint.SolveVelocityConstraints_s_vpA = new b2_math_1.b2Vec2();\n    b2DistanceJoint.SolveVelocityConstraints_s_vpB = new b2_math_1.b2Vec2();\n    b2DistanceJoint.SolveVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2DistanceJoint.SolvePositionConstraints_s_P = new b2_math_1.b2Vec2();\n    b2DistanceJoint.Draw_s_pA = new b2_math_1.b2Vec2();\n    b2DistanceJoint.Draw_s_pB = new b2_math_1.b2Vec2();\n    b2DistanceJoint.Draw_s_axis = new b2_math_1.b2Vec2();\n    b2DistanceJoint.Draw_s_c1 = new b2_draw_1.b2Color(0.7, 0.7, 0.7);\n    b2DistanceJoint.Draw_s_c2 = new b2_draw_1.b2Color(0.3, 0.9, 0.3);\n    b2DistanceJoint.Draw_s_c3 = new b2_draw_1.b2Color(0.9, 0.3, 0.3);\n    b2DistanceJoint.Draw_s_c4 = new b2_draw_1.b2Color(0.4, 0.4, 0.4);\n    b2DistanceJoint.Draw_s_pRest = new b2_math_1.b2Vec2();\n    b2DistanceJoint.Draw_s_pMin = new b2_math_1.b2Vec2();\n    b2DistanceJoint.Draw_s_pMax = new b2_math_1.b2Vec2();\n    return b2DistanceJoint;\n}(b2_joint_1.b2Joint));\nexports.b2DistanceJoint = b2DistanceJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZGlzdGFuY2Vfam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZGlzdGFuY2Vfam9pbnQudHM/ZGNhMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwNyBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJfbGluZWFyU2xvcCwgYjJNYXliZSwgYjJfbWF4RmxvYXQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMkFicywgYjJDbGFtcCwgYjJWZWMyLCBiMlJvdCwgWFksIGIyTWF4LCBiMlRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJKb2ludCwgYjJKb2ludERlZiwgYjJKb2ludFR5cGUsIGIySUpvaW50RGVmIH0gZnJvbSBcIi4vYjJfam9pbnRcIjtcbmltcG9ydCB7IGIyU29sdmVyRGF0YSB9IGZyb20gXCIuL2IyX3RpbWVfc3RlcFwiO1xuaW1wb3J0IHsgYjJCb2R5IH0gZnJvbSBcIi4vYjJfYm9keVwiO1xuaW1wb3J0IHsgYjJDb2xvciwgYjJEcmF3IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9kcmF3XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJRGlzdGFuY2VKb2ludERlZiBleHRlbmRzIGIySUpvaW50RGVmIHtcbiAgbG9jYWxBbmNob3JBPzogWFk7XG4gIGxvY2FsQW5jaG9yQj86IFhZO1xuICBsZW5ndGg/OiBudW1iZXI7XG4gIG1pbkxlbmd0aD86IG51bWJlcjtcbiAgbWF4TGVuZ3RoPzogbnVtYmVyO1xuICBzdGlmZm5lc3M/OiBudW1iZXI7XG4gIGRhbXBpbmc/OiBudW1iZXI7XG59XG5cbi8vLyBEaXN0YW5jZSBqb2ludCBkZWZpbml0aW9uLiBUaGlzIHJlcXVpcmVzIGRlZmluaW5nIGFuXG4vLy8gYW5jaG9yIHBvaW50IG9uIGJvdGggYm9kaWVzIGFuZCB0aGUgbm9uLXplcm8gbGVuZ3RoIG9mIHRoZVxuLy8vIGRpc3RhbmNlIGpvaW50LiBUaGUgZGVmaW5pdGlvbiB1c2VzIGxvY2FsIGFuY2hvciBwb2ludHNcbi8vLyBzbyB0aGF0IHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb24gY2FuIHZpb2xhdGUgdGhlIGNvbnN0cmFpbnRcbi8vLyBzbGlnaHRseS4gVGhpcyBoZWxwcyB3aGVuIHNhdmluZyBhbmQgbG9hZGluZyBhIGdhbWUuXG4vLy8gQHdhcm5pbmcgRG8gbm90IHVzZSBhIHplcm8gb3Igc2hvcnQgbGVuZ3RoLlxuZXhwb3J0IGNsYXNzIGIyRGlzdGFuY2VKb2ludERlZiBleHRlbmRzIGIySm9pbnREZWYgaW1wbGVtZW50cyBiMklEaXN0YW5jZUpvaW50RGVmIHtcbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBsZW5ndGg6IG51bWJlciA9IDE7XG4gIHB1YmxpYyBtaW5MZW5ndGg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtYXhMZW5ndGg6IG51bWJlciA9IGIyX21heEZsb2F0OyAvLyBGTFRfTUFYO1xuICBwdWJsaWMgc3RpZmZuZXNzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZGFtcGluZzogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihiMkpvaW50VHlwZS5lX2Rpc3RhbmNlSm9pbnQpO1xuICB9XG5cbiAgcHVibGljIEluaXRpYWxpemUoYjE6IGIyQm9keSwgYjI6IGIyQm9keSwgYW5jaG9yMTogWFksIGFuY2hvcjI6IFhZKTogdm9pZCB7XG4gICAgdGhpcy5ib2R5QSA9IGIxO1xuICAgIHRoaXMuYm9keUIgPSBiMjtcbiAgICB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yMSwgdGhpcy5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3IyLCB0aGlzLmxvY2FsQW5jaG9yQik7XG4gICAgdGhpcy5sZW5ndGggPSBiMk1heChiMlZlYzIuRGlzdGFuY2VWVihhbmNob3IxLCBhbmNob3IyKSwgYjJfbGluZWFyU2xvcCk7XG4gICAgdGhpcy5taW5MZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICB0aGlzLm1heExlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMkRpc3RhbmNlSm9pbnQgZXh0ZW5kcyBiMkpvaW50IHtcbiAgcHVibGljIG1fc3RpZmZuZXNzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9kYW1waW5nOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9iaWFzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9sZW5ndGg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21pbkxlbmd0aDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbWF4TGVuZ3RoOiBudW1iZXIgPSAwO1xuXG4gIC8vIFNvbHZlciBzaGFyZWRcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxBbmNob3JBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQW5jaG9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgbV9nYW1tYTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW1wdWxzZTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbG93ZXJJbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV91cHBlckltcHVsc2U6IG51bWJlciA9IDA7XG5cbiAgLy8gU29sdmVyIHRlbXBcbiAgcHVibGljIG1faW5kZXhBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbmRleEI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX3U6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQ2VudGVyQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgbV9jdXJyZW50TGVuZ3RoOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZNYXNzQTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52TWFzc0I6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludklBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZJQjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fc29mdE1hc3M6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21hc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fcUE6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3FCOiBiMlJvdCA9IG5ldyBiMlJvdCgpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogYjJJRGlzdGFuY2VKb2ludERlZikge1xuICAgIHN1cGVyKGRlZik7XG5cbiAgICB0aGlzLm1fbG9jYWxBbmNob3JBLkNvcHkoYjJNYXliZShkZWYubG9jYWxBbmNob3JBLCBiMlZlYzIuWkVSTykpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckIuQ29weShiMk1heWJlKGRlZi5sb2NhbEFuY2hvckIsIGIyVmVjMi5aRVJPKSk7XG4gICAgdGhpcy5tX2xlbmd0aCA9IGIyTWF4KGIyTWF5YmUoZGVmLmxlbmd0aCwgdGhpcy5HZXRDdXJyZW50TGVuZ3RoKCkpLCBiMl9saW5lYXJTbG9wKTtcbiAgICB0aGlzLm1fbWluTGVuZ3RoID0gYjJNYXgoYjJNYXliZShkZWYubWluTGVuZ3RoLCB0aGlzLm1fbGVuZ3RoKSwgYjJfbGluZWFyU2xvcCk7XG4gICAgdGhpcy5tX21heExlbmd0aCA9IGIyTWF4KGIyTWF5YmUoZGVmLm1heExlbmd0aCwgdGhpcy5tX2xlbmd0aCksIHRoaXMubV9taW5MZW5ndGgpO1xuICAgIHRoaXMubV9zdGlmZm5lc3MgPSBiMk1heWJlKGRlZi5zdGlmZm5lc3MsIDApO1xuICAgIHRoaXMubV9kYW1waW5nID0gYjJNYXliZShkZWYuZGFtcGluZywgMCk7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQTxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckI8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvbkZvcmNlPFQgZXh0ZW5kcyBYWT4oaW52X2R0OiBudW1iZXIsIG91dDogVCk6IFQge1xuICAgIC8vIGIyVmVjMiBGID0gaW52X2R0ICogKG1faW1wdWxzZSArIG1fbG93ZXJJbXB1bHNlIC0gbV91cHBlckltcHVsc2UpICogbV91O1xuICAgIG91dC54ID0gaW52X2R0ICogKHRoaXMubV9pbXB1bHNlICsgdGhpcy5tX2xvd2VySW1wdWxzZSAtIHRoaXMubV91cHBlckltcHVsc2UpICogdGhpcy5tX3UueDtcbiAgICBvdXQueSA9IGludl9kdCAqICh0aGlzLm1faW1wdWxzZSArIHRoaXMubV9sb3dlckltcHVsc2UgLSB0aGlzLm1fdXBwZXJJbXB1bHNlKSAqIHRoaXMubV91Lnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvblRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgR2V0TG9jYWxBbmNob3JBKCk6IFJlYWRvbmx5PGIyVmVjMj4geyByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQTsgfVxuXG4gIHB1YmxpYyBHZXRMb2NhbEFuY2hvckIoKTogUmVhZG9ubHk8YjJWZWMyPiB7IHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JCOyB9XG5cbiAgcHVibGljIFNldExlbmd0aChsZW5ndGg6IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgIHRoaXMubV9sZW5ndGggPSBiMk1heChiMl9saW5lYXJTbG9wLCBsZW5ndGgpO1xuICAgIHJldHVybiB0aGlzLm1fbGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIEdldExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIFNldE1pbkxlbmd0aChtaW5MZW5ndGg6IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5tX2xvd2VySW1wdWxzZSA9IDA7XG4gICAgdGhpcy5tX21pbkxlbmd0aCA9IGIyQ2xhbXAobWluTGVuZ3RoLCBiMl9saW5lYXJTbG9wLCB0aGlzLm1fbWF4TGVuZ3RoKTtcbiAgICByZXR1cm4gdGhpcy5tX21pbkxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBTZXRNYXhMZW5ndGgobWF4TGVuZ3RoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMubV91cHBlckltcHVsc2UgPSAwO1xuICAgIHRoaXMubV9tYXhMZW5ndGggPSBiMk1heChtYXhMZW5ndGgsIHRoaXMubV9taW5MZW5ndGgpO1xuICAgIHJldHVybiB0aGlzLm1fbWF4TGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIEdldEN1cnJlbnRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBwQTogYjJWZWMyID0gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSwgbmV3IGIyVmVjMigpKTtcbiAgICBjb25zdCBwQjogYjJWZWMyID0gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgbmV3IGIyVmVjMigpKTtcbiAgICByZXR1cm4gYjJWZWMyLkRpc3RhbmNlVlYocEEsIHBCKTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRTdGlmZm5lc3Moc3RpZmZuZXNzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fc3RpZmZuZXNzID0gc3RpZmZuZXNzO1xuICB9XG5cbiAgcHVibGljIEdldFN0aWZmbmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5tX3N0aWZmbmVzcztcbiAgfVxuXG4gIHB1YmxpYyBTZXREYW1waW5nKGRhbXBpbmc6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9kYW1waW5nID0gZGFtcGluZztcbiAgfVxuXG4gIHB1YmxpYyBHZXREYW1waW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1fZGFtcGluZztcbiAgfVxuXG4gIHB1YmxpYyBEdW1wKGxvZzogKGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IGluZGV4QTogbnVtYmVyID0gdGhpcy5tX2JvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgY29uc3QgaW5kZXhCOiBudW1iZXIgPSB0aGlzLm1fYm9keUIubV9pc2xhbmRJbmRleDtcblxuICAgIGxvZyhcIiAgY29uc3QgamQ6IGIyRGlzdGFuY2VKb2ludERlZiA9IG5ldyBiMkRpc3RhbmNlSm9pbnREZWYoKTtcXG5cIik7XG4gICAgbG9nKFwiICBqZC5ib2R5QSA9IGJvZGllc1slZF07XFxuXCIsIGluZGV4QSk7XG4gICAgbG9nKFwiICBqZC5ib2R5QiA9IGJvZGllc1slZF07XFxuXCIsIGluZGV4Qik7XG4gICAgbG9nKFwiICBqZC5jb2xsaWRlQ29ubmVjdGVkID0gJXM7XFxuXCIsICh0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCkgPyAoXCJ0cnVlXCIpIDogKFwiZmFsc2VcIikpO1xuICAgIGxvZyhcIiAgamQubG9jYWxBbmNob3JBLlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1fbG9jYWxBbmNob3JBLngsIHRoaXMubV9sb2NhbEFuY2hvckEueSk7XG4gICAgbG9nKFwiICBqZC5sb2NhbEFuY2hvckIuU2V0KCUuMTVmLCAlLjE1Zik7XFxuXCIsIHRoaXMubV9sb2NhbEFuY2hvckIueCwgdGhpcy5tX2xvY2FsQW5jaG9yQi55KTtcbiAgICBsb2coXCIgIGpkLmxlbmd0aCA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbGVuZ3RoKTtcbiAgICBsb2coXCIgIGpkLm1pbkxlbmd0aCA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbWluTGVuZ3RoKTtcbiAgICBsb2coXCIgIGpkLm1heExlbmd0aCA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbWF4TGVuZ3RoKTtcbiAgICBsb2coXCIgIGpkLnN0aWZmbmVzcyA9ICUuMTVmO1xcblwiLCB0aGlzLm1fc3RpZmZuZXNzKTtcbiAgICBsb2coXCIgIGpkLmRhbXBpbmcgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX2RhbXBpbmcpO1xuICAgIGxvZyhcIiAgam9pbnRzWyVkXSA9IHRoaXMubV93b3JsZC5DcmVhdGVKb2ludChqZCk7XFxuXCIsIHRoaXMubV9pbmRleCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50c19zX1AgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLm1faW5kZXhBID0gdGhpcy5tX2JvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2luZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEuQ29weSh0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQi5Db3B5KHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludklBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuXG4gICAgY29uc3QgY0E6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmM7XG4gICAgY29uc3QgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG5cbiAgICBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBjb25zdCBhQjogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYTtcbiAgICBjb25zdCB2QjogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnY7XG4gICAgbGV0IHdCOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udztcblxuICAgIC8vIGNvbnN0IHFBOiBiMlJvdCA9IG5ldyBiMlJvdChhQSksIHFCOiBiMlJvdCA9IG5ldyBiMlJvdChhQik7XG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSwgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcblxuICAgIC8vIG1fckEgPSBiMk11bChxQSwgbV9sb2NhbEFuY2hvckEgLSBtX2xvY2FsQ2VudGVyQSk7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEsIHRoaXMubV9sYWxjQSk7XG4gICAgYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sYWxjQSwgdGhpcy5tX3JBKTtcbiAgICAvLyBtX3JCID0gYjJNdWwocUIsIG1fbG9jYWxBbmNob3JCIC0gbV9sb2NhbENlbnRlckIpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCLCB0aGlzLm1fbGFsY0IpO1xuICAgIGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG4gICAgLy8gbV91ID0gY0IgKyBtX3JCIC0gY0EgLSBtX3JBO1xuICAgIHRoaXMubV91LnggPSBjQi54ICsgdGhpcy5tX3JCLnggLSBjQS54IC0gdGhpcy5tX3JBLng7XG4gICAgdGhpcy5tX3UueSA9IGNCLnkgKyB0aGlzLm1fckIueSAtIGNBLnkgLSB0aGlzLm1fckEueTtcblxuICAgIC8vIEhhbmRsZSBzaW5ndWxhcml0eS5cbiAgICB0aGlzLm1fY3VycmVudExlbmd0aCA9IHRoaXMubV91Lkxlbmd0aCgpO1xuICAgIGlmICh0aGlzLm1fY3VycmVudExlbmd0aCA+IGIyX2xpbmVhclNsb3ApIHtcbiAgICAgIHRoaXMubV91LlNlbGZNdWwoMSAvIHRoaXMubV9jdXJyZW50TGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3UuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX21hc3MgPSAwO1xuICAgICAgdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgICAgdGhpcy5tX2xvd2VySW1wdWxzZSA9IDA7XG4gICAgICB0aGlzLm1fdXBwZXJJbXB1bHNlID0gMDtcbiAgICB9XG5cbiAgICAvLyBmbG9hdDMyIGNyQXUgPSBiMkNyb3NzKG1fckEsIG1fdSk7XG4gICAgY29uc3QgY3JBdTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCB0aGlzLm1fdSk7XG4gICAgLy8gZmxvYXQzMiBjckJ1ID0gYjJDcm9zcyhtX3JCLCBtX3UpO1xuICAgIGNvbnN0IGNyQnU6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQiwgdGhpcy5tX3UpO1xuICAgIC8vIGZsb2F0MzIgaW52TWFzcyA9IG1faW52TWFzc0EgKyBtX2ludklBICogY3JBdSAqIGNyQXUgKyBtX2ludk1hc3NCICsgbV9pbnZJQiAqIGNyQnUgKiBjckJ1O1xuICAgIGxldCBpbnZNYXNzOiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52SUEgKiBjckF1ICogY3JBdSArIHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9pbnZJQiAqIGNyQnUgKiBjckJ1O1xuICAgIHRoaXMubV9tYXNzID0gaW52TWFzcyAhPT0gMCA/IDEgLyBpbnZNYXNzIDogMDtcblxuICAgIGlmICh0aGlzLm1fc3RpZmZuZXNzID4gMCAmJiB0aGlzLm1fbWluTGVuZ3RoIDwgdGhpcy5tX21heExlbmd0aCkge1xuICAgICAgLy8gc29mdFxuICAgICAgY29uc3QgQzogbnVtYmVyID0gdGhpcy5tX2N1cnJlbnRMZW5ndGggLSB0aGlzLm1fbGVuZ3RoO1xuXG4gICAgICBjb25zdCBkOiBudW1iZXIgPSB0aGlzLm1fZGFtcGluZztcbiAgICAgIGNvbnN0IGs6IG51bWJlciA9IHRoaXMubV9zdGlmZm5lc3M7XG5cbiAgICAgIC8vIG1hZ2ljIGZvcm11bGFzXG4gICAgICBjb25zdCBoOiBudW1iZXIgPSBkYXRhLnN0ZXAuZHQ7XG5cbiAgICAgIC8vIGdhbW1hID0gMSAvIChoICogKGQgKyBoICogaykpXG4gICAgICAvLyB0aGUgZXh0cmEgZmFjdG9yIG9mIGggaW4gdGhlIGRlbm9taW5hdG9yIGlzIHNpbmNlIHRoZSBsYW1iZGEgaXMgYW4gaW1wdWxzZSwgbm90IGEgZm9yY2VcbiAgICAgIHRoaXMubV9nYW1tYSA9IGggKiAoZCArIGggKiBrKTtcbiAgICAgIHRoaXMubV9nYW1tYSA9IHRoaXMubV9nYW1tYSAhPT0gMCA/IDEgLyB0aGlzLm1fZ2FtbWEgOiAwO1xuICAgICAgdGhpcy5tX2JpYXMgPSBDICogaCAqIGsgKiB0aGlzLm1fZ2FtbWE7XG5cbiAgICAgIGludk1hc3MgKz0gdGhpcy5tX2dhbW1hO1xuICAgICAgdGhpcy5tX3NvZnRNYXNzID0gaW52TWFzcyAhPT0gMCA/IDEgLyBpbnZNYXNzIDogMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyByaWdpZFxuICAgICAgdGhpcy5tX2dhbW1hID0gMDtcbiAgICAgIHRoaXMubV9iaWFzID0gMDtcbiAgICAgIHRoaXMubV9zb2Z0TWFzcyA9IHRoaXMubV9tYXNzO1xuICAgIH1cblxuICAgIGlmIChkYXRhLnN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAvLyBTY2FsZSB0aGUgaW1wdWxzZSB0byBzdXBwb3J0IGEgdmFyaWFibGUgdGltZSBzdGVwLlxuICAgICAgdGhpcy5tX2ltcHVsc2UgKj0gZGF0YS5zdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSAqPSBkYXRhLnN0ZXAuZHRSYXRpbztcblxuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKHRoaXMubV9pbXB1bHNlICsgdGhpcy5tX2xvd2VySW1wdWxzZSAtIHRoaXMubV91cHBlckltcHVsc2UsIHRoaXMubV91LCBiMkRpc3RhbmNlSm9pbnQuSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19QKTtcbiAgICAgIHZBLlNlbGZNdWxTdWIodGhpcy5tX2ludk1hc3NBLCBQKTtcbiAgICAgIHdBIC09IHRoaXMubV9pbnZJQSAqIGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQSwgUCk7XG4gICAgICB2Qi5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQiwgUCk7XG4gICAgICB3QiArPSB0aGlzLm1faW52SUIgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIFApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdnBBID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc192cEIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1AgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBpZiAodGhpcy5tX21pbkxlbmd0aCA8IHRoaXMubV9tYXhMZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLm1fc3RpZmZuZXNzID4gMCkge1xuICAgICAgICAvLyBDZG90ID0gZG90KHUsIHYgKyBjcm9zcyh3LCByKSlcbiAgICAgICAgY29uc3QgdnBBOiBiMlZlYzIgPSBiMlZlYzIuQWRkVkNyb3NzU1YodkEsIHdBLCB0aGlzLm1fckEsIGIyRGlzdGFuY2VKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc192cEEpO1xuICAgICAgICBjb25zdCB2cEI6IGIyVmVjMiA9IGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHRoaXMubV9yQiwgYjJEaXN0YW5jZUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX3ZwQik7XG4gICAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fdSwgYjJWZWMyLlN1YlZWKHZwQiwgdnBBLCBiMlZlYzIuc190MCkpO1xuXG4gICAgICAgIGNvbnN0IGltcHVsc2U6IG51bWJlciA9IC10aGlzLm1fc29mdE1hc3MgKiAoQ2RvdCArIHRoaXMubV9iaWFzICsgdGhpcy5tX2dhbW1hICogdGhpcy5tX2ltcHVsc2UpO1xuICAgICAgICB0aGlzLm1faW1wdWxzZSArPSBpbXB1bHNlO1xuXG4gICAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVihpbXB1bHNlLCB0aGlzLm1fdSwgYjJEaXN0YW5jZUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuICAgICAgICB2QS5TZWxmTXVsU3ViKHRoaXMubV9pbnZNYXNzQSwgUCk7XG4gICAgICAgIHdBIC09IHRoaXMubV9pbnZJQSAqIGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQSwgUCk7XG4gICAgICAgIHZCLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NCLCBQKTtcbiAgICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBQKTtcbiAgICAgIH1cblxuICAgICAgLy8gbG93ZXJcbiAgICAgIHtcbiAgICAgICAgY29uc3QgQzogbnVtYmVyID0gdGhpcy5tX2N1cnJlbnRMZW5ndGggLSB0aGlzLm1fbWluTGVuZ3RoO1xuICAgICAgICBjb25zdCBiaWFzOiBudW1iZXIgPSBiMk1heCgwLCBDKSAqIGRhdGEuc3RlcC5pbnZfZHQ7XG5cbiAgICAgICAgY29uc3QgdnBBOiBiMlZlYzIgPSBiMlZlYzIuQWRkVkNyb3NzU1YodkEsIHdBLCB0aGlzLm1fckEsIGIyRGlzdGFuY2VKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc192cEEpO1xuICAgICAgICBjb25zdCB2cEI6IGIyVmVjMiA9IGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHRoaXMubV9yQiwgYjJEaXN0YW5jZUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX3ZwQik7XG4gICAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fdSwgYjJWZWMyLlN1YlZWKHZwQiwgdnBBLCBiMlZlYzIuc190MCkpO1xuXG4gICAgICAgIGxldCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX21hc3MgKiAoQ2RvdCArIGJpYXMpO1xuICAgICAgICBjb25zdCBvbGRJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fbG93ZXJJbXB1bHNlO1xuICAgICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gYjJNYXgoMCwgdGhpcy5tX2xvd2VySW1wdWxzZSArIGltcHVsc2UpO1xuICAgICAgICBpbXB1bHNlID0gdGhpcy5tX2xvd2VySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVihpbXB1bHNlLCB0aGlzLm1fdSwgYjJEaXN0YW5jZUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuXG4gICAgICAgIHZBLlNlbGZNdWxTdWIodGhpcy5tX2ludk1hc3NBLCBQKTtcbiAgICAgICAgd0EgLT0gdGhpcy5tX2ludklBICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKTtcbiAgICAgICAgdkIuU2VsZk11bEFkZCh0aGlzLm1faW52TWFzc0IsIFApO1xuICAgICAgICB3QiArPSB0aGlzLm1faW52SUIgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIFApO1xuICAgICAgfVxuXG4gICAgICAvLyB1cHBlclxuICAgICAge1xuICAgICAgICBjb25zdCBDOiBudW1iZXIgPSB0aGlzLm1fbWF4TGVuZ3RoIC0gdGhpcy5tX2N1cnJlbnRMZW5ndGg7XG4gICAgICAgIGNvbnN0IGJpYXM6IG51bWJlciA9IGIyTWF4KDAsIEMpICogZGF0YS5zdGVwLmludl9kdDtcblxuICAgICAgICBjb25zdCB2cEE6IGIyVmVjMiA9IGIyVmVjMi5BZGRWQ3Jvc3NTVih2QSwgd0EsIHRoaXMubV9yQSwgYjJEaXN0YW5jZUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX3ZwQSk7XG4gICAgICAgIGNvbnN0IHZwQjogYjJWZWMyID0gYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgdGhpcy5tX3JCLCBiMkRpc3RhbmNlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdnBCKTtcbiAgICAgICAgY29uc3QgQ2RvdDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHRoaXMubV91LCBiMlZlYzIuU3ViVlYodnBBLCB2cEIsIGIyVmVjMi5zX3QwKSk7XG5cbiAgICAgICAgbGV0IGltcHVsc2U6IG51bWJlciA9IC10aGlzLm1fbWFzcyAqIChDZG90ICsgYmlhcyk7XG4gICAgICAgIGNvbnN0IG9sZEltcHVsc2U6IG51bWJlciA9IHRoaXMubV91cHBlckltcHVsc2U7XG4gICAgICAgIHRoaXMubV91cHBlckltcHVsc2UgPSBiMk1heCgwLCB0aGlzLm1fdXBwZXJJbXB1bHNlICsgaW1wdWxzZSk7XG4gICAgICAgIGltcHVsc2UgPSB0aGlzLm1fdXBwZXJJbXB1bHNlIC0gb2xkSW1wdWxzZTtcbiAgICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKC1pbXB1bHNlLCB0aGlzLm1fdSwgYjJEaXN0YW5jZUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuXG4gICAgICAgIHZBLlNlbGZNdWxTdWIodGhpcy5tX2ludk1hc3NBLCBQKTtcbiAgICAgICAgd0EgLT0gdGhpcy5tX2ludklBICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKTtcbiAgICAgICAgdkIuU2VsZk11bEFkZCh0aGlzLm1faW52TWFzc0IsIFApO1xuICAgICAgICB3QiArPSB0aGlzLm1faW52SUIgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIFApO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIEVxdWFsIGxpbWl0c1xuXG4gICAgICAvLyBDZG90ID0gZG90KHUsIHYgKyBjcm9zcyh3LCByKSlcbiAgICAgIGNvbnN0IHZwQTogYjJWZWMyID0gYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgdGhpcy5tX3JBLCBiMkRpc3RhbmNlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdnBBKTtcbiAgICAgIGNvbnN0IHZwQjogYjJWZWMyID0gYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgdGhpcy5tX3JCLCBiMkRpc3RhbmNlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdnBCKTtcbiAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fdSwgYjJWZWMyLlN1YlZWKHZwQiwgdnBBLCBiMlZlYzIuc190MCkpO1xuXG4gICAgICBjb25zdCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX21hc3MgKiBDZG90O1xuICAgICAgdGhpcy5tX2ltcHVsc2UgKz0gaW1wdWxzZTtcblxuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKGltcHVsc2UsIHRoaXMubV91LCBiMkRpc3RhbmNlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICB2QS5TZWxmTXVsU3ViKHRoaXMubV9pbnZNYXNzQSwgUCk7XG4gICAgICB3QSAtPSB0aGlzLm1faW52SUEgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckEsIFApO1xuICAgICAgdkIuU2VsZk11bEFkZCh0aGlzLm1faW52TWFzc0IsIFApO1xuICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBQKTtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcbiAgICBjb25zdCBjQTogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYztcbiAgICBsZXQgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgY0I6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmM7XG4gICAgbGV0IGFCOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hO1xuXG4gICAgLy8gY29uc3QgcUE6IGIyUm90ID0gbmV3IGIyUm90KGFBKSwgcUI6IGIyUm90ID0gbmV3IGIyUm90KGFCKTtcbiAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpOyAvLyB1c2UgbV9yQVxuICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTsgLy8gdXNlIG1fckJcbiAgICAvLyBiMlZlYzIgdSA9IGNCICsgckIgLSBjQSAtIHJBO1xuICAgIGNvbnN0IHU6IGIyVmVjMiA9IHRoaXMubV91OyAvLyB1c2UgbV91XG4gICAgdS54ID0gY0IueCArIHJCLnggLSBjQS54IC0gckEueDtcbiAgICB1LnkgPSBjQi55ICsgckIueSAtIGNBLnkgLSByQS55O1xuXG4gICAgY29uc3QgbGVuZ3RoOiBudW1iZXIgPSB0aGlzLm1fdS5Ob3JtYWxpemUoKTtcbiAgICBsZXQgQzogbnVtYmVyO1xuICAgIGlmICh0aGlzLm1fbWluTGVuZ3RoID09IHRoaXMubV9tYXhMZW5ndGgpXG4gICAge1xuICAgICAgQyA9IGxlbmd0aCAtIHRoaXMubV9taW5MZW5ndGg7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlbmd0aCA8IHRoaXMubV9taW5MZW5ndGgpXG4gICAge1xuICAgICAgQyA9IGxlbmd0aCAtIHRoaXMubV9taW5MZW5ndGg7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMubV9tYXhMZW5ndGggPCBsZW5ndGgpXG4gICAge1xuICAgICAgQyA9IGxlbmd0aCAtIHRoaXMubV9tYXhMZW5ndGg7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX21hc3MgKiBDO1xuICAgIGNvbnN0IFA6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVihpbXB1bHNlLCB1LCBiMkRpc3RhbmNlSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUCk7XG5cbiAgICBjQS5TZWxmTXVsU3ViKHRoaXMubV9pbnZNYXNzQSwgUCk7XG4gICAgYUEgLT0gdGhpcy5tX2ludklBICogYjJWZWMyLkNyb3NzVlYockEsIFApO1xuICAgIGNCLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NCLCBQKTtcbiAgICBhQiArPSB0aGlzLm1faW52SUIgKiBiMlZlYzIuQ3Jvc3NWVihyQiwgUCk7XG5cbiAgICAvLyBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jID0gY0E7XG4gICAgZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYSA9IGFBO1xuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmMgPSBjQjtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hID0gYUI7XG5cbiAgICByZXR1cm4gYjJBYnMoQykgPCBiMl9saW5lYXJTbG9wO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3BBID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfcEIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19heGlzID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzEgPSBuZXcgYjJDb2xvcigwLjcsIDAuNywgMC43KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2MyID0gbmV3IGIyQ29sb3IoMC4zLCAwLjksIDAuMyk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19jMyA9IG5ldyBiMkNvbG9yKDAuOSwgMC4zLCAwLjMpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzQgPSBuZXcgYjJDb2xvcigwLjQsIDAuNCwgMC40KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3BSZXN0ID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfcE1pbiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3BNYXggPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBEcmF3KGRyYXc6IGIyRHJhdyk6IHZvaWQge1xuICAgIGNvbnN0IHhmQTogUmVhZG9ubHk8YjJUcmFuc2Zvcm0+ID0gdGhpcy5tX2JvZHlBLkdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IHhmQjogUmVhZG9ubHk8YjJUcmFuc2Zvcm0+ID0gdGhpcy5tX2JvZHlCLkdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IHBBID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCB0aGlzLm1fbG9jYWxBbmNob3JBLCBiMkRpc3RhbmNlSm9pbnQuRHJhd19zX3BBKTtcbiAgICBjb25zdCBwQiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgdGhpcy5tX2xvY2FsQW5jaG9yQiwgYjJEaXN0YW5jZUpvaW50LkRyYXdfc19wQik7XG5cbiAgICBjb25zdCBheGlzOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYocEIsIHBBLCBiMkRpc3RhbmNlSm9pbnQuRHJhd19zX2F4aXMpO1xuICAgIGF4aXMuTm9ybWFsaXplKCk7XG4gIFxuICAgIGNvbnN0IGMxID0gYjJEaXN0YW5jZUpvaW50LkRyYXdfc19jMTsgLy8gYjJDb2xvciBjMSgwLjdmLCAwLjdmLCAwLjdmKTtcbiAgICBjb25zdCBjMiA9IGIyRGlzdGFuY2VKb2ludC5EcmF3X3NfYzI7IC8vIGIyQ29sb3IgYzIoMC4zZiwgMC45ZiwgMC4zZik7XG4gICAgY29uc3QgYzMgPSBiMkRpc3RhbmNlSm9pbnQuRHJhd19zX2MzOyAvLyBiMkNvbG9yIGMzKDAuOWYsIDAuM2YsIDAuM2YpO1xuICAgIGNvbnN0IGM0ID0gYjJEaXN0YW5jZUpvaW50LkRyYXdfc19jNDsgLy8gYjJDb2xvciBjNCgwLjRmLCAwLjRmLCAwLjRmKTtcbiAgXG4gICAgZHJhdy5EcmF3U2VnbWVudChwQSwgcEIsIGM0KTtcbiAgICBcbiAgICAvLyBiMlZlYzIgcFJlc3QgPSBwQSArIHRoaXMubV9sZW5ndGggKiBheGlzO1xuICAgIGNvbnN0IHBSZXN0OiBiMlZlYzIgPSBiMlZlYzIuQWRkVk11bFNWKHBBLCB0aGlzLm1fbGVuZ3RoLCBheGlzLCBiMkRpc3RhbmNlSm9pbnQuRHJhd19zX3BSZXN0KTtcbiAgICBkcmF3LkRyYXdQb2ludChwUmVzdCwgOC4wLCBjMSk7XG4gIFxuICAgIGlmICh0aGlzLm1fbWluTGVuZ3RoICE9IHRoaXMubV9tYXhMZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLm1fbWluTGVuZ3RoID4gYjJfbGluZWFyU2xvcCkge1xuICAgICAgICAvLyBiMlZlYzIgcE1pbiA9IHBBICsgdGhpcy5tX21pbkxlbmd0aCAqIGF4aXM7XG4gICAgICAgIGNvbnN0IHBNaW46IGIyVmVjMiA9IGIyVmVjMi5BZGRWTXVsU1YocEEsIHRoaXMubV9taW5MZW5ndGgsIGF4aXMsIGIyRGlzdGFuY2VKb2ludC5EcmF3X3NfcE1pbik7XG4gICAgICAgIGRyYXcuRHJhd1BvaW50KHBNaW4sIDQuMCwgYzIpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0aGlzLm1fbWF4TGVuZ3RoIDwgYjJfbWF4RmxvYXQpIHtcbiAgICAgICAgLy8gYjJWZWMyIHBNYXggPSBwQSArIHRoaXMubV9tYXhMZW5ndGggKiBheGlzO1xuICAgICAgICBjb25zdCBwTWF4OiBiMlZlYzIgPSBiMlZlYzIuQWRkVk11bFNWKHBBLCB0aGlzLm1fbWF4TGVuZ3RoLCBheGlzLCBiMkRpc3RhbmNlSm9pbnQuRHJhd19zX3BNYXgpO1xuICAgICAgICBkcmF3LkRyYXdQb2ludChwTWF4LCA0LjAsIGMzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQUNBO0FBQ0E7QUFHQTtBQWtCQTtBQUFBO0FBU0E7QUFBQTtBQVJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXRCQTtBQXdCQTtBQUFBO0FBcUNBO0FBQUE7QUFwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuU0E7QUFzR0E7QUFDQTtBQUNBO0FBMEZBO0FBc0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbUNBO0FBQUE7QUExYUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_distance_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_edge_circle_contact.ts":
/*!******************************************************!*\
  !*** ./src/box2d/dynamics/b2_edge_circle_contact.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2EdgeAndCircleContact = void 0;\nvar b2_collide_edge_1 = __webpack_require__(/*! ../collision/b2_collide_edge */ \"./src/box2d/collision/b2_collide_edge.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2EdgeAndCircleContact = (function (_super) {\n    __extends(b2EdgeAndCircleContact, _super);\n    function b2EdgeAndCircleContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2EdgeAndCircleContact.Create = function () {\n        return new b2EdgeAndCircleContact();\n    };\n    b2EdgeAndCircleContact.Destroy = function (contact) {\n    };\n    b2EdgeAndCircleContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        b2_collide_edge_1.b2CollideEdgeAndCircle(manifold, this.GetShapeA(), xfA, this.GetShapeB(), xfB);\n    };\n    return b2EdgeAndCircleContact;\n}(b2_contact_1.b2Contact));\nexports.b2EdgeAndCircleContact = b2EdgeAndCircleContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZWRnZV9jaXJjbGVfY29udGFjdC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9lZGdlX2NpcmNsZV9jb250YWN0LnRzPzcyNDkiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMDkgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbmltcG9ydCB7IGIyVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaWRlX2VkZ2VcIjtcbmltcG9ydCB7IGIyTWFuaWZvbGQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJDaXJjbGVTaGFwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY2lyY2xlX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkVkZ2VTaGFwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfZWRnZV9zaGFwZVwiO1xuaW1wb3J0IHsgYjJDb250YWN0IH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuXG5leHBvcnQgY2xhc3MgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdCBleHRlbmRzIGIyQ29udGFjdDxiMkVkZ2VTaGFwZSwgYjJDaXJjbGVTaGFwZT4ge1xuICBwdWJsaWMgc3RhdGljIENyZWF0ZSgpOiBiMkNvbnRhY3Qge1xuICAgIHJldHVybiBuZXcgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdCgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBEZXN0cm95KGNvbnRhY3Q6IGIyQ29udGFjdCk6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIEV2YWx1YXRlKG1hbmlmb2xkOiBiMk1hbmlmb2xkLCB4ZkE6IGIyVHJhbnNmb3JtLCB4ZkI6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gICAgYjJDb2xsaWRlRWRnZUFuZENpcmNsZShtYW5pZm9sZCwgdGhpcy5HZXRTaGFwZUEoKSwgeGZBLCB0aGlzLkdldFNoYXBlQigpLCB4ZkIpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFJQTtBQUVBO0FBQUE7QUFBQTs7QUFXQTtBQVZBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBWEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_edge_circle_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_edge_polygon_contact.ts":
/*!*******************************************************!*\
  !*** ./src/box2d/dynamics/b2_edge_polygon_contact.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2EdgeAndPolygonContact = void 0;\nvar b2_collide_edge_1 = __webpack_require__(/*! ../collision/b2_collide_edge */ \"./src/box2d/collision/b2_collide_edge.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2EdgeAndPolygonContact = (function (_super) {\n    __extends(b2EdgeAndPolygonContact, _super);\n    function b2EdgeAndPolygonContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2EdgeAndPolygonContact.Create = function () {\n        return new b2EdgeAndPolygonContact();\n    };\n    b2EdgeAndPolygonContact.Destroy = function (contact) {\n    };\n    b2EdgeAndPolygonContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        b2_collide_edge_1.b2CollideEdgeAndPolygon(manifold, this.GetShapeA(), xfA, this.GetShapeB(), xfB);\n    };\n    return b2EdgeAndPolygonContact;\n}(b2_contact_1.b2Contact));\nexports.b2EdgeAndPolygonContact = b2EdgeAndPolygonContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZWRnZV9wb2x5Z29uX2NvbnRhY3QudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZWRnZV9wb2x5Z29uX2NvbnRhY3QudHM/MDg1NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQ29sbGlkZUVkZ2VBbmRQb2x5Z29uIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaWRlX2VkZ2VcIjtcbmltcG9ydCB7IGIyTWFuaWZvbGQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJFZGdlU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2VkZ2Vfc2hhcGVcIjtcbmltcG9ydCB7IGIyUG9seWdvblNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9wb2x5Z29uX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3QgfSBmcm9tIFwiLi9iMl9jb250YWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBiMkVkZ2VBbmRQb2x5Z29uQ29udGFjdCBleHRlbmRzIGIyQ29udGFjdDxiMkVkZ2VTaGFwZSwgYjJQb2x5Z29uU2hhcGU+IHtcbiAgcHVibGljIHN0YXRpYyBDcmVhdGUoKTogYjJDb250YWN0IHtcbiAgICByZXR1cm4gbmV3IGIyRWRnZUFuZFBvbHlnb25Db250YWN0KCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIERlc3Ryb3koY29udGFjdDogYjJDb250YWN0KTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgRXZhbHVhdGUobWFuaWZvbGQ6IGIyTWFuaWZvbGQsIHhmQTogYjJUcmFuc2Zvcm0sIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICBiMkNvbGxpZGVFZGdlQW5kUG9seWdvbihtYW5pZm9sZCwgdGhpcy5HZXRTaGFwZUEoKSwgeGZBLCB0aGlzLkdldFNoYXBlQigpLCB4ZkIpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFJQTtBQUVBO0FBQUE7QUFBQTs7QUFXQTtBQVZBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBWEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_edge_polygon_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_fixture.ts":
/*!******************************************!*\
  !*** ./src/box2d/dynamics/b2_fixture.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Fixture = exports.b2FixtureProxy = exports.b2FixtureDef = exports.b2Filter = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_shape_1 = __webpack_require__(/*! ../collision/b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2Filter = (function () {\n    function b2Filter() {\n        this.categoryBits = 0x0001;\n        this.maskBits = 0xFFFF;\n        this.groupIndex = 0;\n    }\n    b2Filter.prototype.Clone = function () {\n        return new b2Filter().Copy(this);\n    };\n    b2Filter.prototype.Copy = function (other) {\n        this.categoryBits = other.categoryBits;\n        this.maskBits = other.maskBits;\n        this.groupIndex = other.groupIndex || 0;\n        return this;\n    };\n    b2Filter.DEFAULT = new b2Filter();\n    return b2Filter;\n}());\nexports.b2Filter = b2Filter;\nvar b2FixtureDef = (function () {\n    function b2FixtureDef() {\n        this.userData = null;\n        this.friction = 0.2;\n        this.restitution = 0;\n        this.restitutionThreshold = 1.0 * b2_settings_1.b2_lengthUnitsPerMeter;\n        this.density = 0;\n        this.isSensor = false;\n        this.filter = new b2Filter();\n    }\n    return b2FixtureDef;\n}());\nexports.b2FixtureDef = b2FixtureDef;\nvar b2FixtureProxy = (function () {\n    function b2FixtureProxy(fixture, childIndex) {\n        this.aabb = new b2_collision_1.b2AABB();\n        this.childIndex = 0;\n        this.fixture = fixture;\n        this.childIndex = childIndex;\n        this.fixture.m_shape.ComputeAABB(this.aabb, this.fixture.m_body.GetTransform(), childIndex);\n        this.treeNode = this.fixture.m_body.m_world.m_contactManager.m_broadPhase.CreateProxy(this.aabb, this);\n    }\n    b2FixtureProxy.prototype.Reset = function () {\n        this.fixture.m_body.m_world.m_contactManager.m_broadPhase.DestroyProxy(this.treeNode);\n    };\n    b2FixtureProxy.prototype.Touch = function () {\n        this.fixture.m_body.m_world.m_contactManager.m_broadPhase.TouchProxy(this.treeNode);\n    };\n    b2FixtureProxy.prototype.Synchronize = function (transform1, transform2) {\n        if (transform1 === transform2) {\n            this.fixture.m_shape.ComputeAABB(this.aabb, transform1, this.childIndex);\n            this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode, this.aabb, b2_math_1.b2Vec2.ZERO);\n        }\n        else {\n            var aabb1 = b2FixtureProxy.Synchronize_s_aabb1;\n            var aabb2 = b2FixtureProxy.Synchronize_s_aabb2;\n            this.fixture.m_shape.ComputeAABB(aabb1, transform1, this.childIndex);\n            this.fixture.m_shape.ComputeAABB(aabb2, transform2, this.childIndex);\n            this.aabb.Combine2(aabb1, aabb2);\n            var displacement = b2FixtureProxy.Synchronize_s_displacement;\n            displacement.Copy(aabb2.GetCenter()).SelfSub(aabb1.GetCenter());\n            this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode, this.aabb, displacement);\n        }\n    };\n    b2FixtureProxy.Synchronize_s_aabb1 = new b2_collision_1.b2AABB();\n    b2FixtureProxy.Synchronize_s_aabb2 = new b2_collision_1.b2AABB();\n    b2FixtureProxy.Synchronize_s_displacement = new b2_math_1.b2Vec2();\n    return b2FixtureProxy;\n}());\nexports.b2FixtureProxy = b2FixtureProxy;\nvar b2Fixture = (function () {\n    function b2Fixture(body, def) {\n        this.m_density = 0;\n        this.m_next = null;\n        this.m_friction = 0;\n        this.m_restitution = 0;\n        this.m_restitutionThreshold = 1.0 * b2_settings_1.b2_lengthUnitsPerMeter;\n        this.m_proxies = [];\n        this.m_filter = new b2Filter();\n        this.m_isSensor = false;\n        this.m_userData = null;\n        this.m_body = body;\n        this.m_shape = def.shape.Clone();\n        this.m_userData = b2_settings_1.b2Maybe(def.userData, null);\n        this.m_friction = b2_settings_1.b2Maybe(def.friction, 0.2);\n        this.m_restitution = b2_settings_1.b2Maybe(def.restitution, 0);\n        this.m_restitutionThreshold = b2_settings_1.b2Maybe(def.restitutionThreshold, 0);\n        this.m_filter.Copy(b2_settings_1.b2Maybe(def.filter, b2Filter.DEFAULT));\n        this.m_isSensor = b2_settings_1.b2Maybe(def.isSensor, false);\n        this.m_density = b2_settings_1.b2Maybe(def.density, 0);\n    }\n    Object.defineProperty(b2Fixture.prototype, \"m_proxyCount\", {\n        get: function () { return this.m_proxies.length; },\n        enumerable: false,\n        configurable: true\n    });\n    b2Fixture.prototype.Reset = function () {\n    };\n    b2Fixture.prototype.GetType = function () {\n        return this.m_shape.GetType();\n    };\n    b2Fixture.prototype.GetShape = function () {\n        return this.m_shape;\n    };\n    b2Fixture.prototype.SetSensor = function (sensor) {\n        if (sensor !== this.m_isSensor) {\n            this.m_body.SetAwake(true);\n            this.m_isSensor = sensor;\n        }\n    };\n    b2Fixture.prototype.IsSensor = function () {\n        return this.m_isSensor;\n    };\n    b2Fixture.prototype.SetFilterData = function (filter) {\n        this.m_filter.Copy(filter);\n        this.Refilter();\n    };\n    b2Fixture.prototype.GetFilterData = function () {\n        return this.m_filter;\n    };\n    b2Fixture.prototype.Refilter = function () {\n        var edge = this.m_body.GetContactList();\n        while (edge) {\n            var contact = edge.contact;\n            var fixtureA = contact.GetFixtureA();\n            var fixtureB = contact.GetFixtureB();\n            if (fixtureA === this || fixtureB === this) {\n                contact.FlagForFiltering();\n            }\n            edge = edge.next;\n        }\n        this.TouchProxies();\n    };\n    b2Fixture.prototype.GetBody = function () {\n        return this.m_body;\n    };\n    b2Fixture.prototype.GetNext = function () {\n        return this.m_next;\n    };\n    b2Fixture.prototype.GetUserData = function () {\n        return this.m_userData;\n    };\n    b2Fixture.prototype.SetUserData = function (data) {\n        this.m_userData = data;\n    };\n    b2Fixture.prototype.TestPoint = function (p) {\n        return this.m_shape.TestPoint(this.m_body.GetTransform(), p);\n    };\n    b2Fixture.prototype.ComputeDistance = function (p, normal, childIndex) {\n        return this.m_shape.ComputeDistance(this.m_body.GetTransform(), p, normal, childIndex);\n    };\n    b2Fixture.prototype.RayCast = function (output, input, childIndex) {\n        return this.m_shape.RayCast(output, input, this.m_body.GetTransform(), childIndex);\n    };\n    b2Fixture.prototype.GetMassData = function (massData) {\n        if (massData === void 0) { massData = new b2_shape_1.b2MassData(); }\n        this.m_shape.ComputeMass(massData, this.m_density);\n        return massData;\n    };\n    b2Fixture.prototype.SetDensity = function (density) {\n        this.m_density = density;\n    };\n    b2Fixture.prototype.GetDensity = function () {\n        return this.m_density;\n    };\n    b2Fixture.prototype.GetFriction = function () {\n        return this.m_friction;\n    };\n    b2Fixture.prototype.SetFriction = function (friction) {\n        this.m_friction = friction;\n    };\n    b2Fixture.prototype.GetRestitution = function () {\n        return this.m_restitution;\n    };\n    b2Fixture.prototype.SetRestitution = function (restitution) {\n        this.m_restitution = restitution;\n    };\n    b2Fixture.prototype.GetRestitutionThreshold = function () {\n        return this.m_restitutionThreshold;\n    };\n    b2Fixture.prototype.SetRestitutionThreshold = function (threshold) {\n        this.m_restitutionThreshold = threshold;\n    };\n    b2Fixture.prototype.GetAABB = function (childIndex) {\n        return this.m_proxies[childIndex].aabb;\n    };\n    b2Fixture.prototype.Dump = function (log, bodyIndex) {\n        log(\"    const fd: b2FixtureDef = new b2FixtureDef();\\n\");\n        log(\"    fd.friction = %.15f;\\n\", this.m_friction);\n        log(\"    fd.restitution = %.15f;\\n\", this.m_restitution);\n        log(\"    fd.restitutionThreshold = %.15f;\\n\", this.m_restitutionThreshold);\n        log(\"    fd.density = %.15f;\\n\", this.m_density);\n        log(\"    fd.isSensor = %s;\\n\", (this.m_isSensor) ? (\"true\") : (\"false\"));\n        log(\"    fd.filter.categoryBits = %d;\\n\", this.m_filter.categoryBits);\n        log(\"    fd.filter.maskBits = %d;\\n\", this.m_filter.maskBits);\n        log(\"    fd.filter.groupIndex = %d;\\n\", this.m_filter.groupIndex);\n        this.m_shape.Dump(log);\n        log(\"\\n\");\n        log(\"    fd.shape = shape;\\n\");\n        log(\"\\n\");\n        log(\"    bodies[%d].CreateFixture(fd);\\n\", bodyIndex);\n    };\n    b2Fixture.prototype.CreateProxies = function () {\n        if (this.m_proxies.length !== 0) {\n            throw new Error();\n        }\n        for (var i = 0; i < this.m_shape.GetChildCount(); ++i) {\n            this.m_proxies[i] = new b2FixtureProxy(this, i);\n        }\n    };\n    b2Fixture.prototype.DestroyProxies = function () {\n        for (var _i = 0, _a = this.m_proxies; _i < _a.length; _i++) {\n            var proxy = _a[_i];\n            proxy.Reset();\n        }\n        this.m_proxies.length = 0;\n    };\n    b2Fixture.prototype.TouchProxies = function () {\n        for (var _i = 0, _a = this.m_proxies; _i < _a.length; _i++) {\n            var proxy = _a[_i];\n            proxy.Touch();\n        }\n    };\n    b2Fixture.prototype.SynchronizeProxies = function (transform1, transform2) {\n        for (var _i = 0, _a = this.m_proxies; _i < _a.length; _i++) {\n            var proxy = _a[_i];\n            proxy.Synchronize(transform1, transform2);\n        }\n    };\n    return b2Fixture;\n}());\nexports.b2Fixture = b2Fixture;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZml4dHVyZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9maXh0dXJlLnRzP2Q4NDMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMDkgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbi8vIERFQlVHOiBpbXBvcnQgeyBiMkFzc2VydCB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyTWF5YmUsIGIyX2xlbmd0aFVuaXRzUGVyTWV0ZXIgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyVHJhbnNmb3JtLCBYWSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJBQUJCLCBiMlJheUNhc3RJbnB1dCwgYjJSYXlDYXN0T3V0cHV0IH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaXNpb25cIjtcbmltcG9ydCB7IGIyVHJlZU5vZGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2R5bmFtaWNfdHJlZVwiO1xuaW1wb3J0IHsgYjJTaGFwZSwgYjJTaGFwZVR5cGUsIGIyTWFzc0RhdGEgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5cbi8vLyBUaGlzIGhvbGRzIGNvbnRhY3QgZmlsdGVyaW5nIGRhdGEuXG5leHBvcnQgaW50ZXJmYWNlIGIySUZpbHRlciB7XG4gIC8vLyBUaGUgY29sbGlzaW9uIGNhdGVnb3J5IGJpdHMuIE5vcm1hbGx5IHlvdSB3b3VsZCBqdXN0IHNldCBvbmUgYml0LlxuICBjYXRlZ29yeUJpdHM6IG51bWJlcjtcblxuICAvLy8gVGhlIGNvbGxpc2lvbiBtYXNrIGJpdHMuIFRoaXMgc3RhdGVzIHRoZSBjYXRlZ29yaWVzIHRoYXQgdGhpc1xuICAvLy8gc2hhcGUgd291bGQgYWNjZXB0IGZvciBjb2xsaXNpb24uXG4gIG1hc2tCaXRzOiBudW1iZXI7XG5cbiAgLy8vIENvbGxpc2lvbiBncm91cHMgYWxsb3cgYSBjZXJ0YWluIGdyb3VwIG9mIG9iamVjdHMgdG8gbmV2ZXIgY29sbGlkZSAobmVnYXRpdmUpXG4gIC8vLyBvciBhbHdheXMgY29sbGlkZSAocG9zaXRpdmUpLiBaZXJvIG1lYW5zIG5vIGNvbGxpc2lvbiBncm91cC4gTm9uLXplcm8gZ3JvdXBcbiAgLy8vIGZpbHRlcmluZyBhbHdheXMgd2lucyBhZ2FpbnN0IHRoZSBtYXNrIGJpdHMuXG4gIGdyb3VwSW5kZXg/OiBudW1iZXI7XG59XG5cbi8vLyBUaGlzIGhvbGRzIGNvbnRhY3QgZmlsdGVyaW5nIGRhdGEuXG5leHBvcnQgY2xhc3MgYjJGaWx0ZXIgaW1wbGVtZW50cyBiMklGaWx0ZXIge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERFRkFVTFQ6IFJlYWRvbmx5PGIyRmlsdGVyPiA9IG5ldyBiMkZpbHRlcigpO1xuXG4gIC8vLyBUaGUgY29sbGlzaW9uIGNhdGVnb3J5IGJpdHMuIE5vcm1hbGx5IHlvdSB3b3VsZCBqdXN0IHNldCBvbmUgYml0LlxuICBwdWJsaWMgY2F0ZWdvcnlCaXRzOiBudW1iZXIgPSAweDAwMDE7XG5cbiAgLy8vIFRoZSBjb2xsaXNpb24gbWFzayBiaXRzLiBUaGlzIHN0YXRlcyB0aGUgY2F0ZWdvcmllcyB0aGF0IHRoaXNcbiAgLy8vIHNoYXBlIHdvdWxkIGFjY2VwdCBmb3IgY29sbGlzaW9uLlxuICBwdWJsaWMgbWFza0JpdHM6IG51bWJlciA9IDB4RkZGRjtcblxuICAvLy8gQ29sbGlzaW9uIGdyb3VwcyBhbGxvdyBhIGNlcnRhaW4gZ3JvdXAgb2Ygb2JqZWN0cyB0byBuZXZlciBjb2xsaWRlIChuZWdhdGl2ZSlcbiAgLy8vIG9yIGFsd2F5cyBjb2xsaWRlIChwb3NpdGl2ZSkuIFplcm8gbWVhbnMgbm8gY29sbGlzaW9uIGdyb3VwLiBOb24temVybyBncm91cFxuICAvLy8gZmlsdGVyaW5nIGFsd2F5cyB3aW5zIGFnYWluc3QgdGhlIG1hc2sgYml0cy5cbiAgcHVibGljIGdyb3VwSW5kZXg6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIENsb25lKCk6IGIyRmlsdGVyIHtcbiAgICByZXR1cm4gbmV3IGIyRmlsdGVyKCkuQ29weSh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBDb3B5KG90aGVyOiBiMklGaWx0ZXIpOiB0aGlzIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcyAhPT0gb3RoZXIpO1xuICAgIHRoaXMuY2F0ZWdvcnlCaXRzID0gb3RoZXIuY2F0ZWdvcnlCaXRzO1xuICAgIHRoaXMubWFza0JpdHMgPSBvdGhlci5tYXNrQml0cztcbiAgICB0aGlzLmdyb3VwSW5kZXggPSBvdGhlci5ncm91cEluZGV4IHx8IDA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuLy8vIEEgZml4dHVyZSBkZWZpbml0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIGEgZml4dHVyZS4gVGhpcyBjbGFzcyBkZWZpbmVzIGFuXG4vLy8gYWJzdHJhY3QgZml4dHVyZSBkZWZpbml0aW9uLiBZb3UgY2FuIHJldXNlIGZpeHR1cmUgZGVmaW5pdGlvbnMgc2FmZWx5LlxuZXhwb3J0IGludGVyZmFjZSBiMklGaXh0dXJlRGVmIHtcbiAgLy8vIFRoZSBzaGFwZSwgdGhpcyBtdXN0IGJlIHNldC4gVGhlIHNoYXBlIHdpbGwgYmUgY2xvbmVkLCBzbyB5b3VcbiAgLy8vIGNhbiBjcmVhdGUgdGhlIHNoYXBlIG9uIHRoZSBzdGFjay5cbiAgc2hhcGU6IGIyU2hhcGU7XG5cbiAgLy8vIFVzZSB0aGlzIHRvIHN0b3JlIGFwcGxpY2F0aW9uIHNwZWNpZmljIGZpeHR1cmUgZGF0YS5cbiAgdXNlckRhdGE/OiBhbnk7XG5cbiAgLy8vIFRoZSBmcmljdGlvbiBjb2VmZmljaWVudCwgdXN1YWxseSBpbiB0aGUgcmFuZ2UgWzAsMV0uXG4gIGZyaWN0aW9uPzogbnVtYmVyO1xuXG4gIC8vLyBUaGUgcmVzdGl0dXRpb24gKGVsYXN0aWNpdHkpIHVzdWFsbHkgaW4gdGhlIHJhbmdlIFswLDFdLlxuICByZXN0aXR1dGlvbj86IG51bWJlcjtcblxuICAvLy8gUmVzdGl0dXRpb24gdmVsb2NpdHkgdGhyZXNob2xkLCB1c3VhbGx5IGluIG0vcy4gQ29sbGlzaW9ucyBhYm92ZSB0aGlzXG4gIC8vLyBzcGVlZCBoYXZlIHJlc3RpdHV0aW9uIGFwcGxpZWQgKHdpbGwgYm91bmNlKS5cbiAgcmVzdGl0dXRpb25UaHJlc2hvbGQ/OiBudW1iZXI7XG5cbiAgLy8vIFRoZSBkZW5zaXR5LCB1c3VhbGx5IGluIGtnL21eMi5cbiAgZGVuc2l0eT86IG51bWJlcjtcblxuICAvLy8gQSBzZW5zb3Igc2hhcGUgY29sbGVjdHMgY29udGFjdCBpbmZvcm1hdGlvbiBidXQgbmV2ZXIgZ2VuZXJhdGVzIGEgY29sbGlzaW9uXG4gIC8vLyByZXNwb25zZS5cbiAgaXNTZW5zb3I/OiBib29sZWFuO1xuXG4gIC8vLyBDb250YWN0IGZpbHRlcmluZyBkYXRhLlxuICBmaWx0ZXI/OiBiMklGaWx0ZXI7XG59XG5cbi8vLyBBIGZpeHR1cmUgZGVmaW5pdGlvbiBpcyB1c2VkIHRvIGNyZWF0ZSBhIGZpeHR1cmUuIFRoaXMgY2xhc3MgZGVmaW5lcyBhblxuLy8vIGFic3RyYWN0IGZpeHR1cmUgZGVmaW5pdGlvbi4gWW91IGNhbiByZXVzZSBmaXh0dXJlIGRlZmluaXRpb25zIHNhZmVseS5cbmV4cG9ydCBjbGFzcyBiMkZpeHR1cmVEZWYgaW1wbGVtZW50cyBiMklGaXh0dXJlRGVmIHtcbiAgLy8vIFRoZSBzaGFwZSwgdGhpcyBtdXN0IGJlIHNldC4gVGhlIHNoYXBlIHdpbGwgYmUgY2xvbmVkLCBzbyB5b3VcbiAgLy8vIGNhbiBjcmVhdGUgdGhlIHNoYXBlIG9uIHRoZSBzdGFjay5cbiAgcHVibGljIHNoYXBlITogYjJTaGFwZTtcblxuICAvLy8gVXNlIHRoaXMgdG8gc3RvcmUgYXBwbGljYXRpb24gc3BlY2lmaWMgZml4dHVyZSBkYXRhLlxuICBwdWJsaWMgdXNlckRhdGE6IGFueSA9IG51bGw7XG5cbiAgLy8vIFRoZSBmcmljdGlvbiBjb2VmZmljaWVudCwgdXN1YWxseSBpbiB0aGUgcmFuZ2UgWzAsMV0uXG4gIHB1YmxpYyBmcmljdGlvbjogbnVtYmVyID0gMC4yO1xuXG4gIC8vLyBUaGUgcmVzdGl0dXRpb24gKGVsYXN0aWNpdHkpIHVzdWFsbHkgaW4gdGhlIHJhbmdlIFswLDFdLlxuICBwdWJsaWMgcmVzdGl0dXRpb246IG51bWJlciA9IDA7XG5cbiAgLy8vIFJlc3RpdHV0aW9uIHZlbG9jaXR5IHRocmVzaG9sZCwgdXN1YWxseSBpbiBtL3MuIENvbGxpc2lvbnMgYWJvdmUgdGhpc1xuICAvLy8gc3BlZWQgaGF2ZSByZXN0aXR1dGlvbiBhcHBsaWVkICh3aWxsIGJvdW5jZSkuXG4gIHB1YmxpYyByZXN0aXR1dGlvblRocmVzaG9sZDogbnVtYmVyID0gMS4wICogYjJfbGVuZ3RoVW5pdHNQZXJNZXRlcjtcblxuICAvLy8gVGhlIGRlbnNpdHksIHVzdWFsbHkgaW4ga2cvbV4yLlxuICBwdWJsaWMgZGVuc2l0eTogbnVtYmVyID0gMDtcblxuICAvLy8gQSBzZW5zb3Igc2hhcGUgY29sbGVjdHMgY29udGFjdCBpbmZvcm1hdGlvbiBidXQgbmV2ZXIgZ2VuZXJhdGVzIGEgY29sbGlzaW9uXG4gIC8vLyByZXNwb25zZS5cbiAgcHVibGljIGlzU2Vuc29yOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8vIENvbnRhY3QgZmlsdGVyaW5nIGRhdGEuXG4gIHB1YmxpYyByZWFkb25seSBmaWx0ZXI6IGIyRmlsdGVyID0gbmV3IGIyRmlsdGVyKCk7XG59XG5cbi8vLyBUaGlzIHByb3h5IGlzIHVzZWQgaW50ZXJuYWxseSB0byBjb25uZWN0IGZpeHR1cmVzIHRvIHRoZSBicm9hZC1waGFzZS5cbmV4cG9ydCBjbGFzcyBiMkZpeHR1cmVQcm94eSB7XG4gIHB1YmxpYyByZWFkb25seSBhYWJiOiBiMkFBQkIgPSBuZXcgYjJBQUJCKCk7XG4gIHB1YmxpYyByZWFkb25seSBmaXh0dXJlOiBiMkZpeHR1cmU7XG4gIHB1YmxpYyByZWFkb25seSBjaGlsZEluZGV4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgdHJlZU5vZGU6IGIyVHJlZU5vZGU8YjJGaXh0dXJlUHJveHk+O1xuICBjb25zdHJ1Y3RvcihmaXh0dXJlOiBiMkZpeHR1cmUsIGNoaWxkSW5kZXg6IG51bWJlcikge1xuICAgIHRoaXMuZml4dHVyZSA9IGZpeHR1cmU7XG4gICAgdGhpcy5jaGlsZEluZGV4ID0gY2hpbGRJbmRleDtcbiAgICB0aGlzLmZpeHR1cmUubV9zaGFwZS5Db21wdXRlQUFCQih0aGlzLmFhYmIsIHRoaXMuZml4dHVyZS5tX2JvZHkuR2V0VHJhbnNmb3JtKCksIGNoaWxkSW5kZXgpO1xuICAgIHRoaXMudHJlZU5vZGUgPSB0aGlzLmZpeHR1cmUubV9ib2R5Lm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2UuQ3JlYXRlUHJveHkodGhpcy5hYWJiLCB0aGlzKTtcbiAgfVxuICBwdWJsaWMgUmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5maXh0dXJlLm1fYm9keS5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLkRlc3Ryb3lQcm94eSh0aGlzLnRyZWVOb2RlKTtcbiAgfVxuICBwdWJsaWMgVG91Y2goKTogdm9pZCB7XG4gICAgdGhpcy5maXh0dXJlLm1fYm9keS5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLlRvdWNoUHJveHkodGhpcy50cmVlTm9kZSk7XG4gIH1cbiAgcHJpdmF0ZSBzdGF0aWMgU3luY2hyb25pemVfc19hYWJiMSA9IG5ldyBiMkFBQkIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU3luY2hyb25pemVfc19hYWJiMiA9IG5ldyBiMkFBQkIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU3luY2hyb25pemVfc19kaXNwbGFjZW1lbnQgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTeW5jaHJvbml6ZSh0cmFuc2Zvcm0xOiBiMlRyYW5zZm9ybSwgdHJhbnNmb3JtMjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICBpZiAodHJhbnNmb3JtMSA9PT0gdHJhbnNmb3JtMikge1xuICAgICAgdGhpcy5maXh0dXJlLm1fc2hhcGUuQ29tcHV0ZUFBQkIodGhpcy5hYWJiLCB0cmFuc2Zvcm0xLCB0aGlzLmNoaWxkSW5kZXgpO1xuICAgICAgdGhpcy5maXh0dXJlLm1fYm9keS5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLk1vdmVQcm94eSh0aGlzLnRyZWVOb2RlLCB0aGlzLmFhYmIsIGIyVmVjMi5aRVJPKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29tcHV0ZSBhbiBBQUJCIHRoYXQgY292ZXJzIHRoZSBzd2VwdCBzaGFwZSAobWF5IG1pc3Mgc29tZSByb3RhdGlvbiBlZmZlY3QpLlxuICAgICAgY29uc3QgYWFiYjE6IGIyQUFCQiA9IGIyRml4dHVyZVByb3h5LlN5bmNocm9uaXplX3NfYWFiYjE7XG4gICAgICBjb25zdCBhYWJiMjogYjJBQUJCID0gYjJGaXh0dXJlUHJveHkuU3luY2hyb25pemVfc19hYWJiMjtcbiAgICAgIHRoaXMuZml4dHVyZS5tX3NoYXBlLkNvbXB1dGVBQUJCKGFhYmIxLCB0cmFuc2Zvcm0xLCB0aGlzLmNoaWxkSW5kZXgpO1xuICAgICAgdGhpcy5maXh0dXJlLm1fc2hhcGUuQ29tcHV0ZUFBQkIoYWFiYjIsIHRyYW5zZm9ybTIsIHRoaXMuY2hpbGRJbmRleCk7XG4gICAgICB0aGlzLmFhYmIuQ29tYmluZTIoYWFiYjEsIGFhYmIyKTtcbiAgICAgIGNvbnN0IGRpc3BsYWNlbWVudDogYjJWZWMyID0gYjJGaXh0dXJlUHJveHkuU3luY2hyb25pemVfc19kaXNwbGFjZW1lbnQ7XG4gICAgICBkaXNwbGFjZW1lbnQuQ29weShhYWJiMi5HZXRDZW50ZXIoKSkuU2VsZlN1YihhYWJiMS5HZXRDZW50ZXIoKSk7XG4gICAgICB0aGlzLmZpeHR1cmUubV9ib2R5Lm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2UuTW92ZVByb3h5KHRoaXMudHJlZU5vZGUsIHRoaXMuYWFiYiwgZGlzcGxhY2VtZW50KTtcbiAgICB9XG4gIH1cbn1cblxuLy8vIEEgZml4dHVyZSBpcyB1c2VkIHRvIGF0dGFjaCBhIHNoYXBlIHRvIGEgYm9keSBmb3IgY29sbGlzaW9uIGRldGVjdGlvbi4gQSBmaXh0dXJlXG4vLy8gaW5oZXJpdHMgaXRzIHRyYW5zZm9ybSBmcm9tIGl0cyBwYXJlbnQuIEZpeHR1cmVzIGhvbGQgYWRkaXRpb25hbCBub24tZ2VvbWV0cmljIGRhdGFcbi8vLyBzdWNoIGFzIGZyaWN0aW9uLCBjb2xsaXNpb24gZmlsdGVycywgZXRjLlxuLy8vIEZpeHR1cmVzIGFyZSBjcmVhdGVkIHZpYSBiMkJvZHk6OkNyZWF0ZUZpeHR1cmUuXG4vLy8gQHdhcm5pbmcgeW91IGNhbm5vdCByZXVzZSBmaXh0dXJlcy5cbmV4cG9ydCBjbGFzcyBiMkZpeHR1cmUge1xuICBwdWJsaWMgbV9kZW5zaXR5OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtX25leHQ6IGIyRml4dHVyZSB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9ib2R5OiBiMkJvZHk7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fc2hhcGU6IGIyU2hhcGU7XG5cbiAgcHVibGljIG1fZnJpY3Rpb246IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3Jlc3RpdHV0aW9uOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9yZXN0aXR1dGlvblRocmVzaG9sZDogbnVtYmVyID0gMS4wICogYjJfbGVuZ3RoVW5pdHNQZXJNZXRlcjtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9wcm94aWVzOiBiMkZpeHR1cmVQcm94eVtdID0gW107XG4gIHB1YmxpYyBnZXQgbV9wcm94eUNvdW50KCk6IG51bWJlciB7IHJldHVybiB0aGlzLm1fcHJveGllcy5sZW5ndGg7IH1cblxuICBwdWJsaWMgcmVhZG9ubHkgbV9maWx0ZXI6IGIyRmlsdGVyID0gbmV3IGIyRmlsdGVyKCk7XG5cbiAgcHVibGljIG1faXNTZW5zb3I6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgbV91c2VyRGF0YTogYW55ID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihib2R5OiBiMkJvZHksIGRlZjogYjJJRml4dHVyZURlZikge1xuICAgIHRoaXMubV9ib2R5ID0gYm9keTtcbiAgICB0aGlzLm1fc2hhcGUgPSBkZWYuc2hhcGUuQ2xvbmUoKTtcbiAgICB0aGlzLm1fdXNlckRhdGEgPSBiMk1heWJlKGRlZi51c2VyRGF0YSwgbnVsbCk7XG4gICAgdGhpcy5tX2ZyaWN0aW9uID0gYjJNYXliZShkZWYuZnJpY3Rpb24sIDAuMik7XG4gICAgdGhpcy5tX3Jlc3RpdHV0aW9uID0gYjJNYXliZShkZWYucmVzdGl0dXRpb24sIDApO1xuICAgIHRoaXMubV9yZXN0aXR1dGlvblRocmVzaG9sZCA9IGIyTWF5YmUoZGVmLnJlc3RpdHV0aW9uVGhyZXNob2xkLCAwKTtcbiAgICB0aGlzLm1fZmlsdGVyLkNvcHkoYjJNYXliZShkZWYuZmlsdGVyLCBiMkZpbHRlci5ERUZBVUxUKSk7XG4gICAgdGhpcy5tX2lzU2Vuc29yID0gYjJNYXliZShkZWYuaXNTZW5zb3IsIGZhbHNlKTtcbiAgICB0aGlzLm1fZGVuc2l0eSA9IGIyTWF5YmUoZGVmLmRlbnNpdHksIDApO1xuICB9XG5cbiAgcHVibGljIFJlc2V0KCk6IHZvaWQge1xuICAgIC8vIFRoZSBwcm94aWVzIG11c3QgYmUgZGVzdHJveWVkIGJlZm9yZSBjYWxsaW5nIHRoaXMuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9wcm94eUNvdW50ID09PSAwKTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHR5cGUgb2YgdGhlIGNoaWxkIHNoYXBlLiBZb3UgY2FuIHVzZSB0aGlzIHRvIGRvd24gY2FzdCB0byB0aGUgY29uY3JldGUgc2hhcGUuXG4gIC8vLyBAcmV0dXJuIHRoZSBzaGFwZSB0eXBlLlxuICBwdWJsaWMgR2V0VHlwZSgpOiBiMlNoYXBlVHlwZSB7XG4gICAgcmV0dXJuIHRoaXMubV9zaGFwZS5HZXRUeXBlKCk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBjaGlsZCBzaGFwZS4gWW91IGNhbiBtb2RpZnkgdGhlIGNoaWxkIHNoYXBlLCBob3dldmVyIHlvdSBzaG91bGQgbm90IGNoYW5nZSB0aGVcbiAgLy8vIG51bWJlciBvZiB2ZXJ0aWNlcyBiZWNhdXNlIHRoaXMgd2lsbCBjcmFzaCBzb21lIGNvbGxpc2lvbiBjYWNoaW5nIG1lY2hhbmlzbXMuXG4gIC8vLyBNYW5pcHVsYXRpbmcgdGhlIHNoYXBlIG1heSBsZWFkIHRvIG5vbi1waHlzaWNhbCBiZWhhdmlvci5cbiAgcHVibGljIEdldFNoYXBlKCk6IGIyU2hhcGUge1xuICAgIHJldHVybiB0aGlzLm1fc2hhcGU7XG4gIH1cblxuICAvLy8gU2V0IGlmIHRoaXMgZml4dHVyZSBpcyBhIHNlbnNvci5cbiAgcHVibGljIFNldFNlbnNvcihzZW5zb3I6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoc2Vuc29yICE9PSB0aGlzLm1faXNTZW5zb3IpIHtcbiAgICAgIHRoaXMubV9ib2R5LlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2lzU2Vuc29yID0gc2Vuc29yO1xuICAgIH1cbiAgfVxuXG4gIC8vLyBJcyB0aGlzIGZpeHR1cmUgYSBzZW5zb3IgKG5vbi1zb2xpZCk/XG4gIC8vLyBAcmV0dXJuIHRoZSB0cnVlIGlmIHRoZSBzaGFwZSBpcyBhIHNlbnNvci5cbiAgcHVibGljIElzU2Vuc29yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1faXNTZW5zb3I7XG4gIH1cblxuICAvLy8gU2V0IHRoZSBjb250YWN0IGZpbHRlcmluZyBkYXRhLiBUaGlzIHdpbGwgbm90IHVwZGF0ZSBjb250YWN0cyB1bnRpbCB0aGUgbmV4dCB0aW1lXG4gIC8vLyBzdGVwIHdoZW4gZWl0aGVyIHBhcmVudCBib2R5IGlzIGFjdGl2ZSBhbmQgYXdha2UuXG4gIC8vLyBUaGlzIGF1dG9tYXRpY2FsbHkgY2FsbHMgUmVmaWx0ZXIuXG4gIHB1YmxpYyBTZXRGaWx0ZXJEYXRhKGZpbHRlcjogYjJGaWx0ZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fZmlsdGVyLkNvcHkoZmlsdGVyKTtcblxuICAgIHRoaXMuUmVmaWx0ZXIoKTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGNvbnRhY3QgZmlsdGVyaW5nIGRhdGEuXG4gIHB1YmxpYyBHZXRGaWx0ZXJEYXRhKCk6IFJlYWRvbmx5PGIyRmlsdGVyPiB7XG4gICAgcmV0dXJuIHRoaXMubV9maWx0ZXI7XG4gIH1cblxuICAvLy8gQ2FsbCB0aGlzIGlmIHlvdSB3YW50IHRvIGVzdGFibGlzaCBjb2xsaXNpb24gdGhhdCB3YXMgcHJldmlvdXNseSBkaXNhYmxlZCBieSBiMkNvbnRhY3RGaWx0ZXI6OlNob3VsZENvbGxpZGUuXG4gIHB1YmxpYyBSZWZpbHRlcigpOiB2b2lkIHtcbiAgICAvLyBGbGFnIGFzc29jaWF0ZWQgY29udGFjdHMgZm9yIGZpbHRlcmluZy5cbiAgICBsZXQgZWRnZSA9IHRoaXMubV9ib2R5LkdldENvbnRhY3RMaXN0KCk7XG5cbiAgICB3aGlsZSAoZWRnZSkge1xuICAgICAgY29uc3QgY29udGFjdCA9IGVkZ2UuY29udGFjdDtcbiAgICAgIGNvbnN0IGZpeHR1cmVBID0gY29udGFjdC5HZXRGaXh0dXJlQSgpO1xuICAgICAgY29uc3QgZml4dHVyZUIgPSBjb250YWN0LkdldEZpeHR1cmVCKCk7XG4gICAgICBpZiAoZml4dHVyZUEgPT09IHRoaXMgfHwgZml4dHVyZUIgPT09IHRoaXMpIHtcbiAgICAgICAgY29udGFjdC5GbGFnRm9yRmlsdGVyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgfVxuXG4gICAgLy8gVG91Y2ggZWFjaCBwcm94eSBzbyB0aGF0IG5ldyBwYWlycyBtYXkgYmUgY3JlYXRlZFxuICAgIHRoaXMuVG91Y2hQcm94aWVzKCk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBwYXJlbnQgYm9keSBvZiB0aGlzIGZpeHR1cmUuIFRoaXMgaXMgTlVMTCBpZiB0aGUgZml4dHVyZSBpcyBub3QgYXR0YWNoZWQuXG4gIC8vLyBAcmV0dXJuIHRoZSBwYXJlbnQgYm9keS5cbiAgcHVibGljIEdldEJvZHkoKTogYjJCb2R5IHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBuZXh0IGZpeHR1cmUgaW4gdGhlIHBhcmVudCBib2R5J3MgZml4dHVyZSBsaXN0LlxuICAvLy8gQHJldHVybiB0aGUgbmV4dCBzaGFwZS5cbiAgcHVibGljIEdldE5leHQoKTogYjJGaXh0dXJlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9uZXh0O1xuICB9XG5cbiAgLy8vIEdldCB0aGUgdXNlciBkYXRhIHRoYXQgd2FzIGFzc2lnbmVkIGluIHRoZSBmaXh0dXJlIGRlZmluaXRpb24uIFVzZSB0aGlzIHRvXG4gIC8vLyBzdG9yZSB5b3VyIGFwcGxpY2F0aW9uIHNwZWNpZmljIGRhdGEuXG4gIHB1YmxpYyBHZXRVc2VyRGF0YSgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gIH1cblxuICAvLy8gU2V0IHRoZSB1c2VyIGRhdGEuIFVzZSB0aGlzIHRvIHN0b3JlIHlvdXIgYXBwbGljYXRpb24gc3BlY2lmaWMgZGF0YS5cbiAgcHVibGljIFNldFVzZXJEYXRhKGRhdGE6IGFueSk6IHZvaWQge1xuICAgIHRoaXMubV91c2VyRGF0YSA9IGRhdGE7XG4gIH1cblxuICAvLy8gVGVzdCBhIHBvaW50IGZvciBjb250YWlubWVudCBpbiB0aGlzIGZpeHR1cmUuXG4gIC8vLyBAcGFyYW0gcCBhIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICBwdWJsaWMgVGVzdFBvaW50KHA6IFhZKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9zaGFwZS5UZXN0UG9pbnQodGhpcy5tX2JvZHkuR2V0VHJhbnNmb3JtKCksIHApO1xuICB9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICBwdWJsaWMgQ29tcHV0ZURpc3RhbmNlKHA6IGIyVmVjMiwgbm9ybWFsOiBiMlZlYzIsIGNoaWxkSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9zaGFwZS5Db21wdXRlRGlzdGFuY2UodGhpcy5tX2JvZHkuR2V0VHJhbnNmb3JtKCksIHAsIG5vcm1hbCwgY2hpbGRJbmRleCk7XG4gIH1cbiAgLy8gI2VuZGlmXG5cbiAgLy8vIENhc3QgYSByYXkgYWdhaW5zdCB0aGlzIHNoYXBlLlxuICAvLy8gQHBhcmFtIG91dHB1dCB0aGUgcmF5LWNhc3QgcmVzdWx0cy5cbiAgLy8vIEBwYXJhbSBpbnB1dCB0aGUgcmF5LWNhc3QgaW5wdXQgcGFyYW1ldGVycy5cbiAgcHVibGljIFJheUNhc3Qob3V0cHV0OiBiMlJheUNhc3RPdXRwdXQsIGlucHV0OiBiMlJheUNhc3RJbnB1dCwgY2hpbGRJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9zaGFwZS5SYXlDYXN0KG91dHB1dCwgaW5wdXQsIHRoaXMubV9ib2R5LkdldFRyYW5zZm9ybSgpLCBjaGlsZEluZGV4KTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIG1hc3MgZGF0YSBmb3IgdGhpcyBmaXh0dXJlLiBUaGUgbWFzcyBkYXRhIGlzIGJhc2VkIG9uIHRoZSBkZW5zaXR5IGFuZFxuICAvLy8gdGhlIHNoYXBlLiBUaGUgcm90YXRpb25hbCBpbmVydGlhIGlzIGFib3V0IHRoZSBzaGFwZSdzIG9yaWdpbi4gVGhpcyBvcGVyYXRpb25cbiAgLy8vIG1heSBiZSBleHBlbnNpdmUuXG4gIHB1YmxpYyBHZXRNYXNzRGF0YShtYXNzRGF0YTogYjJNYXNzRGF0YSA9IG5ldyBiMk1hc3NEYXRhKCkpOiBiMk1hc3NEYXRhIHtcbiAgICB0aGlzLm1fc2hhcGUuQ29tcHV0ZU1hc3MobWFzc0RhdGEsIHRoaXMubV9kZW5zaXR5KTtcblxuICAgIHJldHVybiBtYXNzRGF0YTtcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIGRlbnNpdHkgb2YgdGhpcyBmaXh0dXJlLiBUaGlzIHdpbGwgX25vdF8gYXV0b21hdGljYWxseSBhZGp1c3QgdGhlIG1hc3NcbiAgLy8vIG9mIHRoZSBib2R5LiBZb3UgbXVzdCBjYWxsIGIyQm9keTo6UmVzZXRNYXNzRGF0YSB0byB1cGRhdGUgdGhlIGJvZHkncyBtYXNzLlxuICBwdWJsaWMgU2V0RGVuc2l0eShkZW5zaXR5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fZGVuc2l0eSA9IGRlbnNpdHk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBkZW5zaXR5IG9mIHRoaXMgZml4dHVyZS5cbiAgcHVibGljIEdldERlbnNpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2RlbnNpdHk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBjb2VmZmljaWVudCBvZiBmcmljdGlvbi5cbiAgcHVibGljIEdldEZyaWN0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9mcmljdGlvbjtcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIGNvZWZmaWNpZW50IG9mIGZyaWN0aW9uLiBUaGlzIHdpbGwgX25vdF8gY2hhbmdlIHRoZSBmcmljdGlvbiBvZlxuICAvLy8gZXhpc3RpbmcgY29udGFjdHMuXG4gIHB1YmxpYyBTZXRGcmljdGlvbihmcmljdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2ZyaWN0aW9uID0gZnJpY3Rpb247XG4gIH1cblxuICAvLy8gR2V0IHRoZSBjb2VmZmljaWVudCBvZiByZXN0aXR1dGlvbi5cbiAgcHVibGljIEdldFJlc3RpdHV0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9yZXN0aXR1dGlvbjtcbiAgfVxuXG4gIC8vLyBTZXQgdGhlIGNvZWZmaWNpZW50IG9mIHJlc3RpdHV0aW9uLiBUaGlzIHdpbGwgX25vdF8gY2hhbmdlIHRoZSByZXN0aXR1dGlvbiBvZlxuICAvLy8gZXhpc3RpbmcgY29udGFjdHMuXG4gIHB1YmxpYyBTZXRSZXN0aXR1dGlvbihyZXN0aXR1dGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX3Jlc3RpdHV0aW9uID0gcmVzdGl0dXRpb247XG4gIH1cblxuXHQvLy8gR2V0IHRoZSByZXN0aXR1dGlvbiB2ZWxvY2l0eSB0aHJlc2hvbGQuXG5cdHB1YmxpYyBHZXRSZXN0aXR1dGlvblRocmVzaG9sZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fcmVzdGl0dXRpb25UaHJlc2hvbGQ7XG4gIH1cblxuXHQvLy8gU2V0IHRoZSByZXN0aXR1dGlvbiB0aHJlc2hvbGQuIFRoaXMgd2lsbCBfbm90XyBjaGFuZ2UgdGhlIHJlc3RpdHV0aW9uIHRocmVzaG9sZCBvZlxuXHQvLy8gZXhpc3RpbmcgY29udGFjdHMuXG5cdHB1YmxpYyBTZXRSZXN0aXR1dGlvblRocmVzaG9sZCh0aHJlc2hvbGQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9yZXN0aXR1dGlvblRocmVzaG9sZCA9IHRocmVzaG9sZDtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGZpeHR1cmUncyBBQUJCLiBUaGlzIEFBQkIgbWF5IGJlIGVubGFyZ2UgYW5kL29yIHN0YWxlLlxuICAvLy8gSWYgeW91IG5lZWQgYSBtb3JlIGFjY3VyYXRlIEFBQkIsIGNvbXB1dGUgaXQgdXNpbmcgdGhlIHNoYXBlIGFuZFxuICAvLy8gdGhlIGJvZHkgdHJhbnNmb3JtLlxuICBwdWJsaWMgR2V0QUFCQihjaGlsZEluZGV4OiBudW1iZXIpOiBSZWFkb25seTxiMkFBQkI+IHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoMCA8PSBjaGlsZEluZGV4ICYmIGNoaWxkSW5kZXggPCB0aGlzLm1fcHJveHlDb3VudCk7XG4gICAgcmV0dXJuIHRoaXMubV9wcm94aWVzW2NoaWxkSW5kZXhdLmFhYmI7XG4gIH1cblxuICAvLy8gRHVtcCB0aGlzIGZpeHR1cmUgdG8gdGhlIGxvZyBmaWxlLlxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQsIGJvZHlJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgbG9nKFwiICAgIGNvbnN0IGZkOiBiMkZpeHR1cmVEZWYgPSBuZXcgYjJGaXh0dXJlRGVmKCk7XFxuXCIpO1xuICAgIGxvZyhcIiAgICBmZC5mcmljdGlvbiA9ICUuMTVmO1xcblwiLCB0aGlzLm1fZnJpY3Rpb24pO1xuICAgIGxvZyhcIiAgICBmZC5yZXN0aXR1dGlvbiA9ICUuMTVmO1xcblwiLCB0aGlzLm1fcmVzdGl0dXRpb24pO1xuICAgIGxvZyhcIiAgICBmZC5yZXN0aXR1dGlvblRocmVzaG9sZCA9ICUuMTVmO1xcblwiLCB0aGlzLm1fcmVzdGl0dXRpb25UaHJlc2hvbGQpO1xuICAgIGxvZyhcIiAgICBmZC5kZW5zaXR5ID0gJS4xNWY7XFxuXCIsIHRoaXMubV9kZW5zaXR5KTtcbiAgICBsb2coXCIgICAgZmQuaXNTZW5zb3IgPSAlcztcXG5cIiwgKHRoaXMubV9pc1NlbnNvcikgPyAoXCJ0cnVlXCIpIDogKFwiZmFsc2VcIikpO1xuICAgIGxvZyhcIiAgICBmZC5maWx0ZXIuY2F0ZWdvcnlCaXRzID0gJWQ7XFxuXCIsIHRoaXMubV9maWx0ZXIuY2F0ZWdvcnlCaXRzKTtcbiAgICBsb2coXCIgICAgZmQuZmlsdGVyLm1hc2tCaXRzID0gJWQ7XFxuXCIsIHRoaXMubV9maWx0ZXIubWFza0JpdHMpO1xuICAgIGxvZyhcIiAgICBmZC5maWx0ZXIuZ3JvdXBJbmRleCA9ICVkO1xcblwiLCB0aGlzLm1fZmlsdGVyLmdyb3VwSW5kZXgpO1xuXG4gICAgdGhpcy5tX3NoYXBlLkR1bXAobG9nKTtcblxuICAgIGxvZyhcIlxcblwiKTtcbiAgICBsb2coXCIgICAgZmQuc2hhcGUgPSBzaGFwZTtcXG5cIik7XG4gICAgbG9nKFwiXFxuXCIpO1xuICAgIGxvZyhcIiAgICBib2RpZXNbJWRdLkNyZWF0ZUZpeHR1cmUoZmQpO1xcblwiLCBib2R5SW5kZXgpO1xuICB9XG5cbiAgLy8gVGhlc2Ugc3VwcG9ydCBib2R5IGFjdGl2YXRpb24vZGVhY3RpdmF0aW9uLlxuICBwdWJsaWMgQ3JlYXRlUHJveGllcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3Byb3hpZXMubGVuZ3RoICE9PSAwKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgLy8gQ3JlYXRlIHByb3hpZXMgaW4gdGhlIGJyb2FkLXBoYXNlLlxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fc2hhcGUuR2V0Q2hpbGRDb3VudCgpOyArK2kpIHtcbiAgICAgIHRoaXMubV9wcm94aWVzW2ldID0gbmV3IGIyRml4dHVyZVByb3h5KHRoaXMsIGkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBEZXN0cm95UHJveGllcygpOiB2b2lkIHtcbiAgICAvLyBEZXN0cm95IHByb3hpZXMgaW4gdGhlIGJyb2FkLXBoYXNlLlxuICAgIGZvciAoY29uc3QgcHJveHkgb2YgdGhpcy5tX3Byb3hpZXMpIHtcbiAgICAgIHByb3h5LlJlc2V0KCk7XG4gICAgfVxuICAgIHRoaXMubV9wcm94aWVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwdWJsaWMgVG91Y2hQcm94aWVzKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgcHJveHkgb2YgdGhpcy5tX3Byb3hpZXMpIHtcbiAgICAgIHByb3h5LlRvdWNoKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFN5bmNocm9uaXplUHJveGllcyh0cmFuc2Zvcm0xOiBiMlRyYW5zZm9ybSwgdHJhbnNmb3JtMjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHByb3h5IG9mIHRoaXMubV9wcm94aWVzKSB7XG4gICAgICBwcm94eS5TeW5jaHJvbml6ZSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBQ0E7QUFDQTtBQUVBO0FBbUJBO0FBQUE7QUFJQTtBQUlBO0FBS0E7QUFhQTtBQVhBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhCQTtBQXlCQTtBQUFBO0FBMUJBO0FBNkRBO0FBQUE7QUFNQTtBQUdBO0FBR0E7QUFJQTtBQUdBO0FBSUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQTNCQTtBQThCQTtBQUtBO0FBSkE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxCQTtBQUNBO0FBQ0E7QUFpQkE7QUFBQTtBQXBDQTtBQTJDQTtBQXFCQTtBQXBCQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxCQTtBQUFBOzs7QUFBQTtBQW9CQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUExUEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_fixture.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_friction_joint.ts":
/*!*************************************************!*\
  !*** ./src/box2d/dynamics/b2_friction_joint.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2FrictionJoint = exports.b2FrictionJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2FrictionJointDef = (function (_super) {\n    __extends(b2FrictionJointDef, _super);\n    function b2FrictionJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_frictionJoint) || this;\n        _this.localAnchorA = new b2_math_1.b2Vec2();\n        _this.localAnchorB = new b2_math_1.b2Vec2();\n        _this.maxForce = 0;\n        _this.maxTorque = 0;\n        return _this;\n    }\n    b2FrictionJointDef.prototype.Initialize = function (bA, bB, anchor) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.bodyA.GetLocalPoint(anchor, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchor, this.localAnchorB);\n    };\n    return b2FrictionJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2FrictionJointDef = b2FrictionJointDef;\nvar b2FrictionJoint = (function (_super) {\n    __extends(b2FrictionJoint, _super);\n    function b2FrictionJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_linearImpulse = new b2_math_1.b2Vec2();\n        _this.m_angularImpulse = 0;\n        _this.m_maxForce = 0;\n        _this.m_maxTorque = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_linearMass = new b2_math_1.b2Mat22();\n        _this.m_angularMass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_K = new b2_math_1.b2Mat22();\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, b2_math_1.b2Vec2.ZERO));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, b2_math_1.b2Vec2.ZERO));\n        _this.m_linearImpulse.SetZero();\n        _this.m_maxForce = b2_settings_1.b2Maybe(def.maxForce, 0);\n        _this.m_maxTorque = b2_settings_1.b2Maybe(def.maxTorque, 0);\n        _this.m_linearMass.SetZero();\n        return _this;\n    }\n    b2FrictionJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var K = this.m_K;\n        K.ex.x = mA + mB + iA * rA.y * rA.y + iB * rB.y * rB.y;\n        K.ex.y = -iA * rA.x * rA.y - iB * rB.x * rB.y;\n        K.ey.x = K.ex.y;\n        K.ey.y = mA + mB + iA * rA.x * rA.x + iB * rB.x * rB.x;\n        K.GetInverse(this.m_linearMass);\n        this.m_angularMass = iA + iB;\n        if (this.m_angularMass > 0) {\n            this.m_angularMass = 1 / this.m_angularMass;\n        }\n        if (data.step.warmStarting) {\n            this.m_linearImpulse.SelfMul(data.step.dtRatio);\n            this.m_angularImpulse *= data.step.dtRatio;\n            var P = this.m_linearImpulse;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * (b2_math_1.b2Vec2.CrossVV(this.m_rA, P) + this.m_angularImpulse);\n            vB.SelfMulAdd(mB, P);\n            wB += iB * (b2_math_1.b2Vec2.CrossVV(this.m_rB, P) + this.m_angularImpulse);\n        }\n        else {\n            this.m_linearImpulse.SetZero();\n            this.m_angularImpulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2FrictionJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var h = data.step.dt;\n        {\n            var Cdot = wB - wA;\n            var impulse = (-this.m_angularMass * Cdot);\n            var oldImpulse = this.m_angularImpulse;\n            var maxImpulse = h * this.m_maxTorque;\n            this.m_angularImpulse = b2_math_1.b2Clamp(this.m_angularImpulse + impulse, (-maxImpulse), maxImpulse);\n            impulse = this.m_angularImpulse - oldImpulse;\n            wA -= iA * impulse;\n            wB += iB * impulse;\n        }\n        {\n            var Cdot_v2 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2_math_1.b2Vec2.s_t1), b2FrictionJoint.SolveVelocityConstraints_s_Cdot_v2);\n            var impulseV = b2_math_1.b2Mat22.MulMV(this.m_linearMass, Cdot_v2, b2FrictionJoint.SolveVelocityConstraints_s_impulseV).SelfNeg();\n            var oldImpulseV = b2FrictionJoint.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);\n            this.m_linearImpulse.SelfAdd(impulseV);\n            var maxImpulse = h * this.m_maxForce;\n            if (this.m_linearImpulse.LengthSquared() > maxImpulse * maxImpulse) {\n                this.m_linearImpulse.Normalize();\n                this.m_linearImpulse.SelfMul(maxImpulse);\n            }\n            b2_math_1.b2Vec2.SubVV(this.m_linearImpulse, oldImpulseV, impulseV);\n            vA.SelfMulSub(mA, impulseV);\n            wA -= iA * b2_math_1.b2Vec2.CrossVV(this.m_rA, impulseV);\n            vB.SelfMulAdd(mB, impulseV);\n            wB += iB * b2_math_1.b2Vec2.CrossVV(this.m_rB, impulseV);\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2FrictionJoint.prototype.SolvePositionConstraints = function (data) {\n        return true;\n    };\n    b2FrictionJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2FrictionJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2FrictionJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * this.m_linearImpulse.x;\n        out.y = inv_dt * this.m_linearImpulse.y;\n        return out;\n    };\n    b2FrictionJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * this.m_angularImpulse;\n    };\n    b2FrictionJoint.prototype.GetLocalAnchorA = function () { return this.m_localAnchorA; };\n    b2FrictionJoint.prototype.GetLocalAnchorB = function () { return this.m_localAnchorB; };\n    b2FrictionJoint.prototype.SetMaxForce = function (force) {\n        this.m_maxForce = force;\n    };\n    b2FrictionJoint.prototype.GetMaxForce = function () {\n        return this.m_maxForce;\n    };\n    b2FrictionJoint.prototype.SetMaxTorque = function (torque) {\n        this.m_maxTorque = torque;\n    };\n    b2FrictionJoint.prototype.GetMaxTorque = function () {\n        return this.m_maxTorque;\n    };\n    b2FrictionJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2FrictionJointDef = new b2FrictionJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.maxForce = %.15f;\\n\", this.m_maxForce);\n        log(\"  jd.maxTorque = %.15f;\\n\", this.m_maxTorque);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2FrictionJoint.SolveVelocityConstraints_s_Cdot_v2 = new b2_math_1.b2Vec2();\n    b2FrictionJoint.SolveVelocityConstraints_s_impulseV = new b2_math_1.b2Vec2();\n    b2FrictionJoint.SolveVelocityConstraints_s_oldImpulseV = new b2_math_1.b2Vec2();\n    return b2FrictionJoint;\n}(b2_joint_1.b2Joint));\nexports.b2FrictionJoint = b2FrictionJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZnJpY3Rpb25fam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZnJpY3Rpb25fam9pbnQudHM/NWVhZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwNyBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJNYXliZSB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyQ2xhbXAsIGIyVmVjMiwgYjJNYXQyMiwgYjJSb3QsIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkpvaW50LCBiMkpvaW50RGVmLCBiMkpvaW50VHlwZSwgYjJJSm9pbnREZWYgfSBmcm9tIFwiLi9iMl9qb2ludFwiO1xuaW1wb3J0IHsgYjJTb2x2ZXJEYXRhIH0gZnJvbSBcIi4vYjJfdGltZV9zdGVwXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJRnJpY3Rpb25Kb2ludERlZiBleHRlbmRzIGIySUpvaW50RGVmIHtcbiAgbG9jYWxBbmNob3JBPzogWFk7XG5cbiAgbG9jYWxBbmNob3JCPzogWFk7XG5cbiAgbWF4Rm9yY2U/OiBudW1iZXI7XG5cbiAgbWF4VG9ycXVlPzogbnVtYmVyO1xufVxuXG4vLy8gRnJpY3Rpb24gam9pbnQgZGVmaW5pdGlvbi5cbmV4cG9ydCBjbGFzcyBiMkZyaWN0aW9uSm9pbnREZWYgZXh0ZW5kcyBiMkpvaW50RGVmIGltcGxlbWVudHMgYjJJRnJpY3Rpb25Kb2ludERlZiB7XG4gIHB1YmxpYyByZWFkb25seSBsb2NhbEFuY2hvckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIG1heEZvcmNlOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtYXhUb3JxdWU6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoYjJKb2ludFR5cGUuZV9mcmljdGlvbkpvaW50KTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0aWFsaXplKGJBOiBiMkJvZHksIGJCOiBiMkJvZHksIGFuY2hvcjogWFkpOiB2b2lkIHtcbiAgICB0aGlzLmJvZHlBID0gYkE7XG4gICAgdGhpcy5ib2R5QiA9IGJCO1xuICAgIHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3IsIHRoaXMubG9jYWxBbmNob3JBKTtcbiAgICB0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yLCB0aGlzLmxvY2FsQW5jaG9yQik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyRnJpY3Rpb25Kb2ludCBleHRlbmRzIGIySm9pbnQge1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgLy8gU29sdmVyIHNoYXJlZFxuICBwdWJsaWMgcmVhZG9ubHkgbV9saW5lYXJJbXB1bHNlOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2FuZ3VsYXJJbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9tYXhGb3JjZTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbWF4VG9ycXVlOiBudW1iZXIgPSAwO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2ludk1hc3NBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZNYXNzQjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludklCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9saW5lYXJNYXNzOiBiMk1hdDIyID0gbmV3IGIyTWF0MjIoKTtcbiAgcHVibGljIG1fYW5ndWxhck1hc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fcUE6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3FCOiBiMlJvdCA9IG5ldyBiMlJvdCgpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9LOiBiMk1hdDIyID0gbmV3IGIyTWF0MjIoKTtcblxuICBjb25zdHJ1Y3RvcihkZWY6IGIySUZyaWN0aW9uSm9pbnREZWYpIHtcbiAgICBzdXBlcihkZWYpO1xuXG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQW5jaG9yQSwgYjJWZWMyLlpFUk8pKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3JCLkNvcHkoYjJNYXliZShkZWYubG9jYWxBbmNob3JCLCBiMlZlYzIuWkVSTykpO1xuXG4gICAgdGhpcy5tX2xpbmVhckltcHVsc2UuU2V0WmVybygpO1xuICAgIHRoaXMubV9tYXhGb3JjZSA9IGIyTWF5YmUoZGVmLm1heEZvcmNlLCAwKTtcbiAgICB0aGlzLm1fbWF4VG9ycXVlID0gYjJNYXliZShkZWYubWF4VG9ycXVlLCAwKTtcblxuICAgIHRoaXMubV9saW5lYXJNYXNzLlNldFplcm8oKTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLm1faW5kZXhBID0gdGhpcy5tX2JvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2luZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEuQ29weSh0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQi5Db3B5KHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludklBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuXG4gICAgLy8gY29uc3QgY0E6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmM7XG4gICAgY29uc3QgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG5cbiAgICAvLyBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBjb25zdCBhQjogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYTtcbiAgICBjb25zdCB2QjogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnY7XG4gICAgbGV0IHdCOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udztcblxuICAgIC8vIGNvbnN0IHFBOiBiMlJvdCA9IG5ldyBiMlJvdChhQSksIHFCOiBiMlJvdCA9IG5ldyBiMlJvdChhQik7XG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSwgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcblxuICAgIC8vIENvbXB1dGUgdGhlIGVmZmVjdGl2ZSBtYXNzIG1hdHJpeC5cbiAgICAvLyBtX3JBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBLCB0aGlzLm1fbGFsY0EpO1xuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgIC8vIG1fckIgPSBiMk11bChxQiwgbV9sb2NhbEFuY2hvckIgLSBtX2xvY2FsQ2VudGVyQik7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckIsIHRoaXMubV9sb2NhbENlbnRlckIsIHRoaXMubV9sYWxjQik7XG4gICAgY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG5cbiAgICAvLyBKID0gWy1JIC1yMV9za2V3IEkgcjJfc2tld11cbiAgICAvLyAgICAgWyAwICAgICAgIC0xIDAgICAgICAgMV1cbiAgICAvLyByX3NrZXcgPSBbLXJ5OyByeF1cblxuICAgIC8vIE1hdGxhYlxuICAgIC8vIEsgPSBbIG1BK3IxeV4yKmlBK21CK3IyeV4yKmlCLCAgLXIxeSppQSpyMXgtcjJ5KmlCKnIyeCwgICAgICAgICAgLXIxeSppQS1yMnkqaUJdXG4gICAgLy8gICAgIFsgIC1yMXkqaUEqcjF4LXIyeSppQipyMngsIG1BK3IxeF4yKmlBK21CK3IyeF4yKmlCLCAgICAgICAgICAgcjF4KmlBK3IyeCppQl1cbiAgICAvLyAgICAgWyAgICAgICAgICAtcjF5KmlBLXIyeSppQiwgICAgICAgICAgIHIxeCppQStyMngqaUIsICAgICAgICAgICAgICAgICAgIGlBK2lCXVxuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgY29uc3QgSzogYjJNYXQyMiA9IHRoaXMubV9LOyAvLyBuZXcgYjJNYXQyMigpO1xuICAgIEsuZXgueCA9IG1BICsgbUIgKyBpQSAqIHJBLnkgKiByQS55ICsgaUIgKiByQi55ICogckIueTtcbiAgICBLLmV4LnkgPSAtaUEgKiByQS54ICogckEueSAtIGlCICogckIueCAqIHJCLnk7XG4gICAgSy5leS54ID0gSy5leC55O1xuICAgIEsuZXkueSA9IG1BICsgbUIgKyBpQSAqIHJBLnggKiByQS54ICsgaUIgKiByQi54ICogckIueDtcblxuICAgIEsuR2V0SW52ZXJzZSh0aGlzLm1fbGluZWFyTWFzcyk7XG5cbiAgICB0aGlzLm1fYW5ndWxhck1hc3MgPSBpQSArIGlCO1xuICAgIGlmICh0aGlzLm1fYW5ndWxhck1hc3MgPiAwKSB7XG4gICAgICB0aGlzLm1fYW5ndWxhck1hc3MgPSAxIC8gdGhpcy5tX2FuZ3VsYXJNYXNzO1xuICAgIH1cblxuICAgIGlmIChkYXRhLnN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAvLyBTY2FsZSBpbXB1bHNlcyB0byBzdXBwb3J0IGEgdmFyaWFibGUgdGltZSBzdGVwLlxuICAgICAgLy8gbV9saW5lYXJJbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuU2VsZk11bChkYXRhLnN0ZXAuZHRSYXRpbyk7XG4gICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgKj0gZGF0YS5zdGVwLmR0UmF0aW87XG5cbiAgICAgIC8vIGNvbnN0IFA6IGIyVmVjMihtX2xpbmVhckltcHVsc2UueCwgbV9saW5lYXJJbXB1bHNlLnkpO1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gdGhpcy5tX2xpbmVhckltcHVsc2U7XG5cbiAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgLy8gd0EgLT0gaUEgKiAoYjJDcm9zcyhtX3JBLCBQKSArIG1fYW5ndWxhckltcHVsc2UpO1xuICAgICAgd0EgLT0gaUEgKiAoYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKSArIHRoaXMubV9hbmd1bGFySW1wdWxzZSk7XG4gICAgICAvLyB2QiArPSBtQiAqIFA7XG4gICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgIC8vIHdCICs9IGlCICogKGIyQ3Jvc3MobV9yQiwgUCkgKyBtX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICAgIHdCICs9IGlCICogKGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQiwgUCkgKyB0aGlzLm1fYW5ndWxhckltcHVsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgPSAwO1xuICAgIH1cblxuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52ID0gdkE7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLncgPSB3QTtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90X3YyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlViA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3Nfb2xkSW1wdWxzZVYgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XG5cbiAgICBjb25zdCBoOiBudW1iZXIgPSBkYXRhLnN0ZXAuZHQ7XG5cbiAgICAvLyBTb2x2ZSBhbmd1bGFyIGZyaWN0aW9uXG4gICAge1xuICAgICAgY29uc3QgQ2RvdDogbnVtYmVyID0gd0IgLSB3QTtcbiAgICAgIGxldCBpbXB1bHNlOiBudW1iZXIgPSAoLXRoaXMubV9hbmd1bGFyTWFzcyAqIENkb3QpO1xuXG4gICAgICBjb25zdCBvbGRJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fYW5ndWxhckltcHVsc2U7XG4gICAgICBjb25zdCBtYXhJbXB1bHNlOiBudW1iZXIgPSBoICogdGhpcy5tX21heFRvcnF1ZTtcbiAgICAgIHRoaXMubV9hbmd1bGFySW1wdWxzZSA9IGIyQ2xhbXAodGhpcy5tX2FuZ3VsYXJJbXB1bHNlICsgaW1wdWxzZSwgKC1tYXhJbXB1bHNlKSwgbWF4SW1wdWxzZSk7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX2FuZ3VsYXJJbXB1bHNlIC0gb2xkSW1wdWxzZTtcblxuICAgICAgd0EgLT0gaUEgKiBpbXB1bHNlO1xuICAgICAgd0IgKz0gaUIgKiBpbXB1bHNlO1xuICAgIH1cblxuICAgIC8vIFNvbHZlIGxpbmVhciBmcmljdGlvblxuICAgIHtcbiAgICAgIC8vIGIyVmVjMiBDZG90ID0gdkIgKyBiMkNyb3NzKHdCLCBtX3JCKSAtIHZBIC0gYjJDcm9zcyh3QSwgbV9yQSk7XG4gICAgICBjb25zdCBDZG90X3YyOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYoXG4gICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHRoaXMubV9yQiwgYjJWZWMyLnNfdDApLFxuICAgICAgICBiMlZlYzIuQWRkVkNyb3NzU1YodkEsIHdBLCB0aGlzLm1fckEsIGIyVmVjMi5zX3QxKSxcbiAgICAgICAgYjJGcmljdGlvbkpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX0Nkb3RfdjIpO1xuXG4gICAgICAvLyBiMlZlYzIgaW1wdWxzZSA9IC1iMk11bChtX2xpbmVhck1hc3MsIENkb3QpO1xuICAgICAgY29uc3QgaW1wdWxzZVY6IGIyVmVjMiA9IGIyTWF0MjIuTXVsTVYodGhpcy5tX2xpbmVhck1hc3MsIENkb3RfdjIsIGIyRnJpY3Rpb25Kb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlVikuU2VsZk5lZygpO1xuICAgICAgLy8gYjJWZWMyIG9sZEltcHVsc2UgPSBtX2xpbmVhckltcHVsc2U7XG4gICAgICBjb25zdCBvbGRJbXB1bHNlViA9IGIyRnJpY3Rpb25Kb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19vbGRJbXB1bHNlVi5Db3B5KHRoaXMubV9saW5lYXJJbXB1bHNlKTtcbiAgICAgIC8vIG1fbGluZWFySW1wdWxzZSArPSBpbXB1bHNlO1xuICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuU2VsZkFkZChpbXB1bHNlVik7XG5cbiAgICAgIGNvbnN0IG1heEltcHVsc2U6IG51bWJlciA9IGggKiB0aGlzLm1fbWF4Rm9yY2U7XG5cbiAgICAgIGlmICh0aGlzLm1fbGluZWFySW1wdWxzZS5MZW5ndGhTcXVhcmVkKCkgPiBtYXhJbXB1bHNlICogbWF4SW1wdWxzZSkge1xuICAgICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5Ob3JtYWxpemUoKTtcbiAgICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuU2VsZk11bChtYXhJbXB1bHNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gaW1wdWxzZSA9IG1fbGluZWFySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xpbmVhckltcHVsc2UsIG9sZEltcHVsc2VWLCBpbXB1bHNlVik7XG5cbiAgICAgIC8vIHZBIC09IG1BICogaW1wdWxzZTtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIGltcHVsc2VWKTtcbiAgICAgIC8vIHdBIC09IGlBICogYjJDcm9zcyhtX3JBLCBpbXB1bHNlKTtcbiAgICAgIHdBIC09IGlBICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBpbXB1bHNlVik7XG5cbiAgICAgIC8vIHZCICs9IG1CICogaW1wdWxzZTtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIGltcHVsc2VWKTtcbiAgICAgIC8vIHdCICs9IGlCICogYjJDcm9zcyhtX3JCLCBpbXB1bHNlKTtcbiAgICAgIHdCICs9IGlCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBpbXB1bHNlVik7XG4gICAgfVxuXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnYgPSB2QTtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udyA9IHdBO1xuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52ID0gdkI7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLncgPSB3QjtcbiAgfVxuXG4gIHB1YmxpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQTxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckI8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvbkZvcmNlPFQgZXh0ZW5kcyBYWT4oaW52X2R0OiBudW1iZXIsIG91dDogVCk6IFQge1xuICAgIG91dC54ID0gaW52X2R0ICogdGhpcy5tX2xpbmVhckltcHVsc2UueDtcbiAgICBvdXQueSA9IGludl9kdCAqIHRoaXMubV9saW5lYXJJbXB1bHNlLnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvblRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9hbmd1bGFySW1wdWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRMb2NhbEFuY2hvckEoKTogUmVhZG9ubHk8YjJWZWMyPiB7IHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JBOyB9XG5cbiAgcHVibGljIEdldExvY2FsQW5jaG9yQigpOiBSZWFkb25seTxiMlZlYzI+IHsgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7IH1cblxuICBwdWJsaWMgU2V0TWF4Rm9yY2UoZm9yY2U6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9tYXhGb3JjZSA9IGZvcmNlO1xuICB9XG5cbiAgcHVibGljIEdldE1heEZvcmNlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9tYXhGb3JjZTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRNYXhUb3JxdWUodG9ycXVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fbWF4VG9ycXVlID0gdG9ycXVlO1xuICB9XG5cbiAgcHVibGljIEdldE1heFRvcnF1ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbWF4VG9ycXVlO1xuICB9XG5cbiAgcHVibGljIER1bXAobG9nOiAoZm9ybWF0OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXhBOiBudW1iZXIgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICBjb25zdCBpbmRleEI6IG51bWJlciA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuXG4gICAgbG9nKFwiICBjb25zdCBqZDogYjJGcmljdGlvbkpvaW50RGVmID0gbmV3IGIyRnJpY3Rpb25Kb2ludERlZigpO1xcblwiKTtcbiAgICBsb2coXCIgIGpkLmJvZHlBID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhBKTtcbiAgICBsb2coXCIgIGpkLmJvZHlCID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhCKTtcbiAgICBsb2coXCIgIGpkLmNvbGxpZGVDb25uZWN0ZWQgPSAlcztcXG5cIiwgKHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBqZC5sb2NhbEFuY2hvckEuU2V0KCUuMTVmLCAlLjE1Zik7XFxuXCIsIHRoaXMubV9sb2NhbEFuY2hvckEueCwgdGhpcy5tX2xvY2FsQW5jaG9yQS55KTtcbiAgICBsb2coXCIgIGpkLmxvY2FsQW5jaG9yQi5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsQW5jaG9yQi54LCB0aGlzLm1fbG9jYWxBbmNob3JCLnkpO1xuICAgIGxvZyhcIiAgamQubWF4Rm9yY2UgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX21heEZvcmNlKTtcbiAgICBsb2coXCIgIGpkLm1heFRvcnF1ZSA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbWF4VG9ycXVlKTtcbiAgICBsb2coXCIgIGpvaW50c1slZF0gPSB0aGlzLm1fd29ybGQuQ3JlYXRlSm9pbnQoamQpO1xcblwiLCB0aGlzLm1faW5kZXgpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUNBO0FBZUE7QUFBQTtBQVNBO0FBQUE7QUFSQTtBQUVBO0FBRUE7QUFFQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFuQkE7QUFxQkE7QUFBQTtBQThCQTtBQUFBO0FBN0JBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBTUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3SEE7QUFDQTtBQUNBO0FBNEhBO0FBQUE7QUE3UEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_friction_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_gear_joint.ts":
/*!*********************************************!*\
  !*** ./src/box2d/dynamics/b2_gear_joint.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2GearJoint = exports.b2GearJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2GearJointDef = (function (_super) {\n    __extends(b2GearJointDef, _super);\n    function b2GearJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_gearJoint) || this;\n        _this.ratio = 1;\n        return _this;\n    }\n    return b2GearJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2GearJointDef = b2GearJointDef;\nvar b2GearJoint = (function (_super) {\n    __extends(b2GearJoint, _super);\n    function b2GearJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_typeA = b2_joint_1.b2JointType.e_unknownJoint;\n        _this.m_typeB = b2_joint_1.b2JointType.e_unknownJoint;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_localAnchorC = new b2_math_1.b2Vec2();\n        _this.m_localAnchorD = new b2_math_1.b2Vec2();\n        _this.m_localAxisC = new b2_math_1.b2Vec2();\n        _this.m_localAxisD = new b2_math_1.b2Vec2();\n        _this.m_referenceAngleA = 0;\n        _this.m_referenceAngleB = 0;\n        _this.m_constant = 0;\n        _this.m_ratio = 0;\n        _this.m_impulse = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_indexC = 0;\n        _this.m_indexD = 0;\n        _this.m_lcA = new b2_math_1.b2Vec2();\n        _this.m_lcB = new b2_math_1.b2Vec2();\n        _this.m_lcC = new b2_math_1.b2Vec2();\n        _this.m_lcD = new b2_math_1.b2Vec2();\n        _this.m_mA = 0;\n        _this.m_mB = 0;\n        _this.m_mC = 0;\n        _this.m_mD = 0;\n        _this.m_iA = 0;\n        _this.m_iB = 0;\n        _this.m_iC = 0;\n        _this.m_iD = 0;\n        _this.m_JvAC = new b2_math_1.b2Vec2();\n        _this.m_JvBD = new b2_math_1.b2Vec2();\n        _this.m_JwA = 0;\n        _this.m_JwB = 0;\n        _this.m_JwC = 0;\n        _this.m_JwD = 0;\n        _this.m_mass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_qC = new b2_math_1.b2Rot();\n        _this.m_qD = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_lalcC = new b2_math_1.b2Vec2();\n        _this.m_lalcD = new b2_math_1.b2Vec2();\n        _this.m_joint1 = def.joint1;\n        _this.m_joint2 = def.joint2;\n        _this.m_typeA = _this.m_joint1.GetType();\n        _this.m_typeB = _this.m_joint2.GetType();\n        var coordinateA, coordinateB;\n        _this.m_bodyC = _this.m_joint1.GetBodyA();\n        _this.m_bodyA = _this.m_joint1.GetBodyB();\n        var xfA = _this.m_bodyA.m_xf;\n        var aA = _this.m_bodyA.m_sweep.a;\n        var xfC = _this.m_bodyC.m_xf;\n        var aC = _this.m_bodyC.m_sweep.a;\n        if (_this.m_typeA === b2_joint_1.b2JointType.e_revoluteJoint) {\n            var revolute = def.joint1;\n            _this.m_localAnchorC.Copy(revolute.m_localAnchorA);\n            _this.m_localAnchorA.Copy(revolute.m_localAnchorB);\n            _this.m_referenceAngleA = revolute.m_referenceAngle;\n            _this.m_localAxisC.SetZero();\n            coordinateA = aA - aC - _this.m_referenceAngleA;\n        }\n        else {\n            var prismatic = def.joint1;\n            _this.m_localAnchorC.Copy(prismatic.m_localAnchorA);\n            _this.m_localAnchorA.Copy(prismatic.m_localAnchorB);\n            _this.m_referenceAngleA = prismatic.m_referenceAngle;\n            _this.m_localAxisC.Copy(prismatic.m_localXAxisA);\n            var pC = _this.m_localAnchorC;\n            var pA = b2_math_1.b2Rot.MulTRV(xfC.q, b2_math_1.b2Vec2.AddVV(b2_math_1.b2Rot.MulRV(xfA.q, _this.m_localAnchorA, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(xfA.p, xfC.p, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0);\n            coordinateA = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pA, pC, b2_math_1.b2Vec2.s_t0), _this.m_localAxisC);\n        }\n        _this.m_bodyD = _this.m_joint2.GetBodyA();\n        _this.m_bodyB = _this.m_joint2.GetBodyB();\n        var xfB = _this.m_bodyB.m_xf;\n        var aB = _this.m_bodyB.m_sweep.a;\n        var xfD = _this.m_bodyD.m_xf;\n        var aD = _this.m_bodyD.m_sweep.a;\n        if (_this.m_typeB === b2_joint_1.b2JointType.e_revoluteJoint) {\n            var revolute = def.joint2;\n            _this.m_localAnchorD.Copy(revolute.m_localAnchorA);\n            _this.m_localAnchorB.Copy(revolute.m_localAnchorB);\n            _this.m_referenceAngleB = revolute.m_referenceAngle;\n            _this.m_localAxisD.SetZero();\n            coordinateB = aB - aD - _this.m_referenceAngleB;\n        }\n        else {\n            var prismatic = def.joint2;\n            _this.m_localAnchorD.Copy(prismatic.m_localAnchorA);\n            _this.m_localAnchorB.Copy(prismatic.m_localAnchorB);\n            _this.m_referenceAngleB = prismatic.m_referenceAngle;\n            _this.m_localAxisD.Copy(prismatic.m_localXAxisA);\n            var pD = _this.m_localAnchorD;\n            var pB = b2_math_1.b2Rot.MulTRV(xfD.q, b2_math_1.b2Vec2.AddVV(b2_math_1.b2Rot.MulRV(xfB.q, _this.m_localAnchorB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(xfB.p, xfD.p, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0);\n            coordinateB = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pB, pD, b2_math_1.b2Vec2.s_t0), _this.m_localAxisD);\n        }\n        _this.m_ratio = b2_settings_1.b2Maybe(def.ratio, 1);\n        _this.m_constant = coordinateA + _this.m_ratio * coordinateB;\n        _this.m_impulse = 0;\n        return _this;\n    }\n    b2GearJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_indexC = this.m_bodyC.m_islandIndex;\n        this.m_indexD = this.m_bodyD.m_islandIndex;\n        this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter);\n        this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter);\n        this.m_mA = this.m_bodyA.m_invMass;\n        this.m_mB = this.m_bodyB.m_invMass;\n        this.m_mC = this.m_bodyC.m_invMass;\n        this.m_mD = this.m_bodyD.m_invMass;\n        this.m_iA = this.m_bodyA.m_invI;\n        this.m_iB = this.m_bodyB.m_invI;\n        this.m_iC = this.m_bodyC.m_invI;\n        this.m_iD = this.m_bodyD.m_invI;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var aC = data.positions[this.m_indexC].a;\n        var vC = data.velocities[this.m_indexC].v;\n        var wC = data.velocities[this.m_indexC].w;\n        var aD = data.positions[this.m_indexD].a;\n        var vD = data.velocities[this.m_indexD].v;\n        var wD = data.velocities[this.m_indexD].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB), qC = this.m_qC.SetAngle(aC), qD = this.m_qD.SetAngle(aD);\n        this.m_mass = 0;\n        if (this.m_typeA === b2_joint_1.b2JointType.e_revoluteJoint) {\n            this.m_JvAC.SetZero();\n            this.m_JwA = 1;\n            this.m_JwC = 1;\n            this.m_mass += this.m_iA + this.m_iC;\n        }\n        else {\n            var u = b2_math_1.b2Rot.MulRV(qC, this.m_localAxisC, b2GearJoint.InitVelocityConstraints_s_u);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorC, this.m_lcC, this.m_lalcC);\n            var rC = b2_math_1.b2Rot.MulRV(qC, this.m_lalcC, b2GearJoint.InitVelocityConstraints_s_rC);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_lcA, this.m_lalcA);\n            var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, b2GearJoint.InitVelocityConstraints_s_rA);\n            this.m_JvAC.Copy(u);\n            this.m_JwC = b2_math_1.b2Vec2.CrossVV(rC, u);\n            this.m_JwA = b2_math_1.b2Vec2.CrossVV(rA, u);\n            this.m_mass += this.m_mC + this.m_mA + this.m_iC * this.m_JwC * this.m_JwC + this.m_iA * this.m_JwA * this.m_JwA;\n        }\n        if (this.m_typeB === b2_joint_1.b2JointType.e_revoluteJoint) {\n            this.m_JvBD.SetZero();\n            this.m_JwB = this.m_ratio;\n            this.m_JwD = this.m_ratio;\n            this.m_mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD);\n        }\n        else {\n            var u = b2_math_1.b2Rot.MulRV(qD, this.m_localAxisD, b2GearJoint.InitVelocityConstraints_s_u);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorD, this.m_lcD, this.m_lalcD);\n            var rD = b2_math_1.b2Rot.MulRV(qD, this.m_lalcD, b2GearJoint.InitVelocityConstraints_s_rD);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_lcB, this.m_lalcB);\n            var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, b2GearJoint.InitVelocityConstraints_s_rB);\n            b2_math_1.b2Vec2.MulSV(this.m_ratio, u, this.m_JvBD);\n            this.m_JwD = this.m_ratio * b2_math_1.b2Vec2.CrossVV(rD, u);\n            this.m_JwB = this.m_ratio * b2_math_1.b2Vec2.CrossVV(rB, u);\n            this.m_mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * this.m_JwD * this.m_JwD + this.m_iB * this.m_JwB * this.m_JwB;\n        }\n        this.m_mass = this.m_mass > 0 ? 1 / this.m_mass : 0;\n        if (data.step.warmStarting) {\n            vA.SelfMulAdd(this.m_mA * this.m_impulse, this.m_JvAC);\n            wA += this.m_iA * this.m_impulse * this.m_JwA;\n            vB.SelfMulAdd(this.m_mB * this.m_impulse, this.m_JvBD);\n            wB += this.m_iB * this.m_impulse * this.m_JwB;\n            vC.SelfMulSub(this.m_mC * this.m_impulse, this.m_JvAC);\n            wC -= this.m_iC * this.m_impulse * this.m_JwC;\n            vD.SelfMulSub(this.m_mD * this.m_impulse, this.m_JvBD);\n            wD -= this.m_iD * this.m_impulse * this.m_JwD;\n        }\n        else {\n            this.m_impulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n        data.velocities[this.m_indexC].w = wC;\n        data.velocities[this.m_indexD].w = wD;\n    };\n    b2GearJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var vC = data.velocities[this.m_indexC].v;\n        var wC = data.velocities[this.m_indexC].w;\n        var vD = data.velocities[this.m_indexD].v;\n        var wD = data.velocities[this.m_indexD].w;\n        var Cdot = b2_math_1.b2Vec2.DotVV(this.m_JvAC, b2_math_1.b2Vec2.SubVV(vA, vC, b2_math_1.b2Vec2.s_t0)) +\n            b2_math_1.b2Vec2.DotVV(this.m_JvBD, b2_math_1.b2Vec2.SubVV(vB, vD, b2_math_1.b2Vec2.s_t0));\n        Cdot += (this.m_JwA * wA - this.m_JwC * wC) + (this.m_JwB * wB - this.m_JwD * wD);\n        var impulse = -this.m_mass * Cdot;\n        this.m_impulse += impulse;\n        vA.SelfMulAdd((this.m_mA * impulse), this.m_JvAC);\n        wA += this.m_iA * impulse * this.m_JwA;\n        vB.SelfMulAdd((this.m_mB * impulse), this.m_JvBD);\n        wB += this.m_iB * impulse * this.m_JwB;\n        vC.SelfMulSub((this.m_mC * impulse), this.m_JvAC);\n        wC -= this.m_iC * impulse * this.m_JwC;\n        vD.SelfMulSub((this.m_mD * impulse), this.m_JvBD);\n        wD -= this.m_iD * impulse * this.m_JwD;\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n        data.velocities[this.m_indexC].w = wC;\n        data.velocities[this.m_indexD].w = wD;\n    };\n    b2GearJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var cC = data.positions[this.m_indexC].c;\n        var aC = data.positions[this.m_indexC].a;\n        var cD = data.positions[this.m_indexD].c;\n        var aD = data.positions[this.m_indexD].a;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB), qC = this.m_qC.SetAngle(aC), qD = this.m_qD.SetAngle(aD);\n        var linearError = 0;\n        var coordinateA, coordinateB;\n        var JvAC = this.m_JvAC, JvBD = this.m_JvBD;\n        var JwA, JwB, JwC, JwD;\n        var mass = 0;\n        if (this.m_typeA === b2_joint_1.b2JointType.e_revoluteJoint) {\n            JvAC.SetZero();\n            JwA = 1;\n            JwC = 1;\n            mass += this.m_iA + this.m_iC;\n            coordinateA = aA - aC - this.m_referenceAngleA;\n        }\n        else {\n            var u = b2_math_1.b2Rot.MulRV(qC, this.m_localAxisC, b2GearJoint.SolvePositionConstraints_s_u);\n            var rC = b2_math_1.b2Rot.MulRV(qC, this.m_lalcC, b2GearJoint.SolvePositionConstraints_s_rC);\n            var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, b2GearJoint.SolvePositionConstraints_s_rA);\n            JvAC.Copy(u);\n            JwC = b2_math_1.b2Vec2.CrossVV(rC, u);\n            JwA = b2_math_1.b2Vec2.CrossVV(rA, u);\n            mass += this.m_mC + this.m_mA + this.m_iC * JwC * JwC + this.m_iA * JwA * JwA;\n            var pC = this.m_lalcC;\n            var pA = b2_math_1.b2Rot.MulTRV(qC, b2_math_1.b2Vec2.AddVV(rA, b2_math_1.b2Vec2.SubVV(cA, cC, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0);\n            coordinateA = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pA, pC, b2_math_1.b2Vec2.s_t0), this.m_localAxisC);\n        }\n        if (this.m_typeB === b2_joint_1.b2JointType.e_revoluteJoint) {\n            JvBD.SetZero();\n            JwB = this.m_ratio;\n            JwD = this.m_ratio;\n            mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD);\n            coordinateB = aB - aD - this.m_referenceAngleB;\n        }\n        else {\n            var u = b2_math_1.b2Rot.MulRV(qD, this.m_localAxisD, b2GearJoint.SolvePositionConstraints_s_u);\n            var rD = b2_math_1.b2Rot.MulRV(qD, this.m_lalcD, b2GearJoint.SolvePositionConstraints_s_rD);\n            var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, b2GearJoint.SolvePositionConstraints_s_rB);\n            b2_math_1.b2Vec2.MulSV(this.m_ratio, u, JvBD);\n            JwD = this.m_ratio * b2_math_1.b2Vec2.CrossVV(rD, u);\n            JwB = this.m_ratio * b2_math_1.b2Vec2.CrossVV(rB, u);\n            mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * JwD * JwD + this.m_iB * JwB * JwB;\n            var pD = this.m_lalcD;\n            var pB = b2_math_1.b2Rot.MulTRV(qD, b2_math_1.b2Vec2.AddVV(rB, b2_math_1.b2Vec2.SubVV(cB, cD, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0);\n            coordinateB = b2_math_1.b2Vec2.DotVV(b2_math_1.b2Vec2.SubVV(pB, pD, b2_math_1.b2Vec2.s_t0), this.m_localAxisD);\n        }\n        var C = (coordinateA + this.m_ratio * coordinateB) - this.m_constant;\n        var impulse = 0;\n        if (mass > 0) {\n            impulse = -C / mass;\n        }\n        cA.SelfMulAdd(this.m_mA * impulse, JvAC);\n        aA += this.m_iA * impulse * JwA;\n        cB.SelfMulAdd(this.m_mB * impulse, JvBD);\n        aB += this.m_iB * impulse * JwB;\n        cC.SelfMulSub(this.m_mC * impulse, JvAC);\n        aC -= this.m_iC * impulse * JwC;\n        cD.SelfMulSub(this.m_mD * impulse, JvBD);\n        aD -= this.m_iD * impulse * JwD;\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        data.positions[this.m_indexC].a = aC;\n        data.positions[this.m_indexD].a = aD;\n        return linearError < b2_settings_1.b2_linearSlop;\n    };\n    b2GearJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2GearJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2GearJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        return b2_math_1.b2Vec2.MulSV(inv_dt * this.m_impulse, this.m_JvAC, out);\n    };\n    b2GearJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * this.m_impulse * this.m_JwA;\n    };\n    b2GearJoint.prototype.GetJoint1 = function () { return this.m_joint1; };\n    b2GearJoint.prototype.GetJoint2 = function () { return this.m_joint2; };\n    b2GearJoint.prototype.GetRatio = function () {\n        return this.m_ratio;\n    };\n    b2GearJoint.prototype.SetRatio = function (ratio) {\n        this.m_ratio = ratio;\n    };\n    b2GearJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        var index1 = this.m_joint1.m_index;\n        var index2 = this.m_joint2.m_index;\n        log(\"  const jd: b2GearJointDef = new b2GearJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.joint1 = joints[%d];\\n\", index1);\n        log(\"  jd.joint2 = joints[%d];\\n\", index2);\n        log(\"  jd.ratio = %.15f;\\n\", this.m_ratio);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2GearJoint.InitVelocityConstraints_s_u = new b2_math_1.b2Vec2();\n    b2GearJoint.InitVelocityConstraints_s_rA = new b2_math_1.b2Vec2();\n    b2GearJoint.InitVelocityConstraints_s_rB = new b2_math_1.b2Vec2();\n    b2GearJoint.InitVelocityConstraints_s_rC = new b2_math_1.b2Vec2();\n    b2GearJoint.InitVelocityConstraints_s_rD = new b2_math_1.b2Vec2();\n    b2GearJoint.SolvePositionConstraints_s_u = new b2_math_1.b2Vec2();\n    b2GearJoint.SolvePositionConstraints_s_rA = new b2_math_1.b2Vec2();\n    b2GearJoint.SolvePositionConstraints_s_rB = new b2_math_1.b2Vec2();\n    b2GearJoint.SolvePositionConstraints_s_rC = new b2_math_1.b2Vec2();\n    b2GearJoint.SolvePositionConstraints_s_rD = new b2_math_1.b2Vec2();\n    return b2GearJoint;\n}(b2_joint_1.b2Joint));\nexports.b2GearJoint = b2GearJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfZ2Vhcl9qb2ludC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9nZWFyX2pvaW50LnRzP2YwMWMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMTEgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbi8vIERFQlVHOiBpbXBvcnQgeyBiMkFzc2VydCB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbi8vIERFQlVHOiBpbXBvcnQgeyBiMklzVmFsaWQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyX2xpbmVhclNsb3AsIGIyTWF5YmUgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyUm90LCBiMlRyYW5zZm9ybSwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIySm9pbnQsIGIySm9pbnREZWYsIGIySm9pbnRUeXBlLCBiMklKb2ludERlZiB9IGZyb20gXCIuL2IyX2pvaW50XCI7XG5pbXBvcnQgeyBiMlByaXNtYXRpY0pvaW50IH0gZnJvbSBcIi4vYjJfcHJpc21hdGljX2pvaW50XCI7XG5pbXBvcnQgeyBiMlJldm9sdXRlSm9pbnQgfSBmcm9tIFwiLi9iMl9yZXZvbHV0ZV9qb2ludFwiO1xuaW1wb3J0IHsgYjJTb2x2ZXJEYXRhIH0gZnJvbSBcIi4vYjJfdGltZV9zdGVwXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJR2VhckpvaW50RGVmIGV4dGVuZHMgYjJJSm9pbnREZWYge1xuICBqb2ludDE6IGIyUmV2b2x1dGVKb2ludCB8IGIyUHJpc21hdGljSm9pbnQ7XG5cbiAgam9pbnQyOiBiMlJldm9sdXRlSm9pbnQgfCBiMlByaXNtYXRpY0pvaW50O1xuXG4gIHJhdGlvPzogbnVtYmVyO1xufVxuXG4vLy8gR2VhciBqb2ludCBkZWZpbml0aW9uLiBUaGlzIGRlZmluaXRpb24gcmVxdWlyZXMgdHdvIGV4aXN0aW5nXG4vLy8gcmV2b2x1dGUgb3IgcHJpc21hdGljIGpvaW50cyAoYW55IGNvbWJpbmF0aW9uIHdpbGwgd29yaykuXG5leHBvcnQgY2xhc3MgYjJHZWFySm9pbnREZWYgZXh0ZW5kcyBiMkpvaW50RGVmIGltcGxlbWVudHMgYjJJR2VhckpvaW50RGVmIHtcbiAgcHVibGljIGpvaW50MSE6IGIyUmV2b2x1dGVKb2ludCB8IGIyUHJpc21hdGljSm9pbnQ7XG5cbiAgcHVibGljIGpvaW50MiE6IGIyUmV2b2x1dGVKb2ludCB8IGIyUHJpc21hdGljSm9pbnQ7XG5cbiAgcHVibGljIHJhdGlvOiBudW1iZXIgPSAxO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKGIySm9pbnRUeXBlLmVfZ2VhckpvaW50KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJHZWFySm9pbnQgZXh0ZW5kcyBiMkpvaW50IHtcbiAgcHVibGljIG1fam9pbnQxOiBiMlJldm9sdXRlSm9pbnQgfCBiMlByaXNtYXRpY0pvaW50O1xuICBwdWJsaWMgbV9qb2ludDI6IGIyUmV2b2x1dGVKb2ludCB8IGIyUHJpc21hdGljSm9pbnQ7XG5cbiAgcHVibGljIG1fdHlwZUE6IGIySm9pbnRUeXBlID0gYjJKb2ludFR5cGUuZV91bmtub3duSm9pbnQ7XG4gIHB1YmxpYyBtX3R5cGVCOiBiMkpvaW50VHlwZSA9IGIySm9pbnRUeXBlLmVfdW5rbm93bkpvaW50O1xuXG4gIC8vIEJvZHkgQSBpcyBjb25uZWN0ZWQgdG8gYm9keSBDXG4gIC8vIEJvZHkgQiBpcyBjb25uZWN0ZWQgdG8gYm9keSBEXG4gIHB1YmxpYyBtX2JvZHlDOiBiMkJvZHk7XG4gIHB1YmxpYyBtX2JvZHlEOiBiMkJvZHk7XG5cbiAgLy8gU29sdmVyIHNoYXJlZFxuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQW5jaG9yQzogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEF4aXNDOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQXhpc0Q6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgbV9yZWZlcmVuY2VBbmdsZUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3JlZmVyZW5jZUFuZ2xlQjogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9jb25zdGFudDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fcmF0aW86IG51bWJlciA9IDA7XG5cbiAgcHVibGljIG1faW1wdWxzZTogbnVtYmVyID0gMDtcblxuICAvLyBTb2x2ZXIgdGVtcFxuICBwdWJsaWMgbV9pbmRleEE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2luZGV4QjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhDOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbmRleEQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX2xjQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sY0I6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbGNDOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xjRDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgbV9tQTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbUI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21DOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9tRDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2lCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pQzogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faUQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX0p2QUM6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fSnZCRDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgbV9Kd0E6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX0p3QjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fSndDOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9Kd0Q6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21hc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fcUE6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3FCOiBiMlJvdCA9IG5ldyBiMlJvdCgpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9xQzogYjJSb3QgPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fcUQ6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNDOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNEOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgY29uc3RydWN0b3IoZGVmOiBiMklHZWFySm9pbnREZWYpIHtcbiAgICBzdXBlcihkZWYpO1xuXG4gICAgdGhpcy5tX2pvaW50MSA9IGRlZi5qb2ludDE7XG4gICAgdGhpcy5tX2pvaW50MiA9IGRlZi5qb2ludDI7XG5cbiAgICB0aGlzLm1fdHlwZUEgPSB0aGlzLm1fam9pbnQxLkdldFR5cGUoKTtcbiAgICB0aGlzLm1fdHlwZUIgPSB0aGlzLm1fam9pbnQyLkdldFR5cGUoKTtcblxuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fdHlwZUEgPT09IGIySm9pbnRUeXBlLmVfcmV2b2x1dGVKb2ludCB8fCB0aGlzLm1fdHlwZUEgPT09IGIySm9pbnRUeXBlLmVfcHJpc21hdGljSm9pbnQpO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fdHlwZUIgPT09IGIySm9pbnRUeXBlLmVfcmV2b2x1dGVKb2ludCB8fCB0aGlzLm1fdHlwZUIgPT09IGIySm9pbnRUeXBlLmVfcHJpc21hdGljSm9pbnQpO1xuXG4gICAgbGV0IGNvb3JkaW5hdGVBOiBudW1iZXIsIGNvb3JkaW5hdGVCOiBudW1iZXI7XG5cbiAgICAvLyBUT0RPX0VSSU4gdGhlcmUgbWlnaHQgYmUgc29tZSBwcm9ibGVtIHdpdGggdGhlIGpvaW50IGVkZ2VzIGluIGIySm9pbnQuXG5cbiAgICB0aGlzLm1fYm9keUMgPSB0aGlzLm1fam9pbnQxLkdldEJvZHlBKCk7XG4gICAgdGhpcy5tX2JvZHlBID0gdGhpcy5tX2pvaW50MS5HZXRCb2R5QigpO1xuXG4gICAgLy8gQm9keSBCIG9uIGpvaW50MSBtdXN0IGJlIGR5bmFtaWNcbiAgICAvLyBiMkFzc2VydCh0aGlzLm1fYm9keUEubV90eXBlID09PSBiMl9keW5hbWljQm9keSk7XG5cbiAgICAvLyBHZXQgZ2VvbWV0cnkgb2Ygam9pbnQxXG4gICAgY29uc3QgeGZBOiBiMlRyYW5zZm9ybSA9IHRoaXMubV9ib2R5QS5tX3hmO1xuICAgIGNvbnN0IGFBOiBudW1iZXIgPSB0aGlzLm1fYm9keUEubV9zd2VlcC5hO1xuICAgIGNvbnN0IHhmQzogYjJUcmFuc2Zvcm0gPSB0aGlzLm1fYm9keUMubV94ZjtcbiAgICBjb25zdCBhQzogbnVtYmVyID0gdGhpcy5tX2JvZHlDLm1fc3dlZXAuYTtcblxuICAgIGlmICh0aGlzLm1fdHlwZUEgPT09IGIySm9pbnRUeXBlLmVfcmV2b2x1dGVKb2ludCkge1xuICAgICAgY29uc3QgcmV2b2x1dGU6IGIyUmV2b2x1dGVKb2ludCA9IGRlZi5qb2ludDEgYXMgYjJSZXZvbHV0ZUpvaW50O1xuICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQy5Db3B5KHJldm9sdXRlLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgIHRoaXMubV9sb2NhbEFuY2hvckEuQ29weShyZXZvbHV0ZS5tX2xvY2FsQW5jaG9yQik7XG4gICAgICB0aGlzLm1fcmVmZXJlbmNlQW5nbGVBID0gcmV2b2x1dGUubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgIHRoaXMubV9sb2NhbEF4aXNDLlNldFplcm8oKTtcblxuICAgICAgY29vcmRpbmF0ZUEgPSBhQSAtIGFDIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlQTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJpc21hdGljOiBiMlByaXNtYXRpY0pvaW50ID0gZGVmLmpvaW50MSBhcyBiMlByaXNtYXRpY0pvaW50O1xuICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQy5Db3B5KHByaXNtYXRpYy5tX2xvY2FsQW5jaG9yQSk7XG4gICAgICB0aGlzLm1fbG9jYWxBbmNob3JBLkNvcHkocHJpc21hdGljLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIHRoaXMubV9yZWZlcmVuY2VBbmdsZUEgPSBwcmlzbWF0aWMubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgIHRoaXMubV9sb2NhbEF4aXNDLkNvcHkocHJpc21hdGljLm1fbG9jYWxYQXhpc0EpO1xuXG4gICAgICAvLyBiMlZlYzIgcEMgPSBtX2xvY2FsQW5jaG9yQztcbiAgICAgIGNvbnN0IHBDID0gdGhpcy5tX2xvY2FsQW5jaG9yQztcbiAgICAgIC8vIGIyVmVjMiBwQSA9IGIyTXVsVCh4ZkMucSwgYjJNdWwoeGZBLnEsIG1fbG9jYWxBbmNob3JBKSArICh4ZkEucCAtIHhmQy5wKSk7XG4gICAgICBjb25zdCBwQTogYjJWZWMyID0gYjJSb3QuTXVsVFJWKFxuICAgICAgICB4ZkMucSxcbiAgICAgICAgYjJWZWMyLkFkZFZWKFxuICAgICAgICAgIGIyUm90Lk11bFJWKHhmQS5xLCB0aGlzLm1fbG9jYWxBbmNob3JBLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgYjJWZWMyLlN1YlZWKHhmQS5wLCB4ZkMucCwgYjJWZWMyLnNfdDEpLFxuICAgICAgICAgIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgYjJWZWMyLnNfdDApOyAvLyBwQSB1c2VzIHNfdDBcbiAgICAgIC8vIGNvb3JkaW5hdGVBID0gYjJEb3QocEEgLSBwQywgbV9sb2NhbEF4aXNDKTtcbiAgICAgIGNvb3JkaW5hdGVBID0gYjJWZWMyLkRvdFZWKGIyVmVjMi5TdWJWVihwQSwgcEMsIGIyVmVjMi5zX3QwKSwgdGhpcy5tX2xvY2FsQXhpc0MpO1xuICAgIH1cblxuICAgIHRoaXMubV9ib2R5RCA9IHRoaXMubV9qb2ludDIuR2V0Qm9keUEoKTtcbiAgICB0aGlzLm1fYm9keUIgPSB0aGlzLm1fam9pbnQyLkdldEJvZHlCKCk7XG5cbiAgICAvLyBCb2R5IEIgb24gam9pbnQyIG11c3QgYmUgZHluYW1pY1xuICAgIC8vIGIyQXNzZXJ0KHRoaXMubV9ib2R5Qi5tX3R5cGUgPT09IGIyX2R5bmFtaWNCb2R5KTtcblxuICAgIC8vIEdldCBnZW9tZXRyeSBvZiBqb2ludDJcbiAgICBjb25zdCB4ZkI6IGIyVHJhbnNmb3JtID0gdGhpcy5tX2JvZHlCLm1feGY7XG4gICAgY29uc3QgYUI6IG51bWJlciA9IHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmE7XG4gICAgY29uc3QgeGZEOiBiMlRyYW5zZm9ybSA9IHRoaXMubV9ib2R5RC5tX3hmO1xuICAgIGNvbnN0IGFEOiBudW1iZXIgPSB0aGlzLm1fYm9keUQubV9zd2VlcC5hO1xuXG4gICAgaWYgKHRoaXMubV90eXBlQiA9PT0gYjJKb2ludFR5cGUuZV9yZXZvbHV0ZUpvaW50KSB7XG4gICAgICBjb25zdCByZXZvbHV0ZTogYjJSZXZvbHV0ZUpvaW50ID0gZGVmLmpvaW50MiBhcyBiMlJldm9sdXRlSm9pbnQ7XG4gICAgICB0aGlzLm1fbG9jYWxBbmNob3JELkNvcHkocmV2b2x1dGUubV9sb2NhbEFuY2hvckEpO1xuICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5Db3B5KHJldm9sdXRlLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIHRoaXMubV9yZWZlcmVuY2VBbmdsZUIgPSByZXZvbHV0ZS5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgdGhpcy5tX2xvY2FsQXhpc0QuU2V0WmVybygpO1xuXG4gICAgICBjb29yZGluYXRlQiA9IGFCIC0gYUQgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGVCO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcmlzbWF0aWM6IGIyUHJpc21hdGljSm9pbnQgPSBkZWYuam9pbnQyIGFzIGIyUHJpc21hdGljSm9pbnQ7XG4gICAgICB0aGlzLm1fbG9jYWxBbmNob3JELkNvcHkocHJpc21hdGljLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgIHRoaXMubV9sb2NhbEFuY2hvckIuQ29weShwcmlzbWF0aWMubV9sb2NhbEFuY2hvckIpO1xuICAgICAgdGhpcy5tX3JlZmVyZW5jZUFuZ2xlQiA9IHByaXNtYXRpYy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgdGhpcy5tX2xvY2FsQXhpc0QuQ29weShwcmlzbWF0aWMubV9sb2NhbFhBeGlzQSk7XG5cbiAgICAgIC8vIGIyVmVjMiBwRCA9IG1fbG9jYWxBbmNob3JEO1xuICAgICAgY29uc3QgcEQgPSB0aGlzLm1fbG9jYWxBbmNob3JEO1xuICAgICAgLy8gYjJWZWMyIHBCID0gYjJNdWxUKHhmRC5xLCBiMk11bCh4ZkIucSwgbV9sb2NhbEFuY2hvckIpICsgKHhmQi5wIC0geGZELnApKTtcbiAgICAgIGNvbnN0IHBCOiBiMlZlYzIgPSBiMlJvdC5NdWxUUlYoXG4gICAgICAgIHhmRC5xLFxuICAgICAgICBiMlZlYzIuQWRkVlYoXG4gICAgICAgICAgYjJSb3QuTXVsUlYoeGZCLnEsIHRoaXMubV9sb2NhbEFuY2hvckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgICBiMlZlYzIuU3ViVlYoeGZCLnAsIHhmRC5wLCBiMlZlYzIuc190MSksXG4gICAgICAgICAgYjJWZWMyLnNfdDApLFxuICAgICAgICBiMlZlYzIuc190MCk7IC8vIHBCIHVzZXMgc190MFxuICAgICAgLy8gY29vcmRpbmF0ZUIgPSBiMkRvdChwQiAtIHBELCBtX2xvY2FsQXhpc0QpO1xuICAgICAgY29vcmRpbmF0ZUIgPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKHBCLCBwRCwgYjJWZWMyLnNfdDApLCB0aGlzLm1fbG9jYWxBeGlzRCk7XG4gICAgfVxuXG4gICAgdGhpcy5tX3JhdGlvID0gYjJNYXliZShkZWYucmF0aW8sIDEpO1xuXG4gICAgdGhpcy5tX2NvbnN0YW50ID0gY29vcmRpbmF0ZUEgKyB0aGlzLm1fcmF0aW8gKiBjb29yZGluYXRlQjtcblxuICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19yQSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19yQiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19yQyA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19yRCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMubV9pbmRleEEgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICB0aGlzLm1faW5kZXhCID0gdGhpcy5tX2JvZHlCLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2luZGV4QyA9IHRoaXMubV9ib2R5Qy5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9pbmRleEQgPSB0aGlzLm1fYm9keUQubV9pc2xhbmRJbmRleDtcbiAgICB0aGlzLm1fbGNBLkNvcHkodGhpcy5tX2JvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHRoaXMubV9sY0IuQ29weSh0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2xjQy5Db3B5KHRoaXMubV9ib2R5Qy5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1fbGNELkNvcHkodGhpcy5tX2JvZHlELm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHRoaXMubV9tQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgdGhpcy5tX21CID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICB0aGlzLm1fbUMgPSB0aGlzLm1fYm9keUMubV9pbnZNYXNzO1xuICAgIHRoaXMubV9tRCA9IHRoaXMubV9ib2R5RC5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2lBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICB0aGlzLm1faUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuICAgIHRoaXMubV9pQyA9IHRoaXMubV9ib2R5Qy5tX2ludkk7XG4gICAgdGhpcy5tX2lEID0gdGhpcy5tX2JvZHlELm1faW52STtcblxuICAgIGNvbnN0IGFBOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hO1xuICAgIGNvbnN0IHZBOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udjtcbiAgICBsZXQgd0E6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53O1xuXG4gICAgY29uc3QgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBjb25zdCBhQzogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Q10uYTtcbiAgICBjb25zdCB2QzogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleENdLnY7XG4gICAgbGV0IHdDOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Q10udztcblxuICAgIGNvbnN0IGFEOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhEXS5hO1xuICAgIGNvbnN0IHZEOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4RF0udjtcbiAgICBsZXQgd0Q6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhEXS53O1xuXG4gICAgLy8gYjJSb3QgcUEoYUEpLCBxQihhQiksIHFDKGFDKSwgcUQoYUQpO1xuICAgIGNvbnN0IHFBOiBiMlJvdCA9IHRoaXMubV9xQS5TZXRBbmdsZShhQSksXG4gICAgICBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpLFxuICAgICAgcUM6IGIyUm90ID0gdGhpcy5tX3FDLlNldEFuZ2xlKGFDKSxcbiAgICAgIHFEOiBiMlJvdCA9IHRoaXMubV9xRC5TZXRBbmdsZShhRCk7XG5cbiAgICB0aGlzLm1fbWFzcyA9IDA7XG5cbiAgICBpZiAodGhpcy5tX3R5cGVBID09PSBiMkpvaW50VHlwZS5lX3Jldm9sdXRlSm9pbnQpIHtcbiAgICAgIHRoaXMubV9KdkFDLlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9Kd0EgPSAxO1xuICAgICAgdGhpcy5tX0p3QyA9IDE7XG4gICAgICB0aGlzLm1fbWFzcyArPSB0aGlzLm1faUEgKyB0aGlzLm1faUM7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGIyVmVjMiB1ID0gYjJNdWwocUMsIG1fbG9jYWxBeGlzQyk7XG4gICAgICBjb25zdCB1OiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQywgdGhpcy5tX2xvY2FsQXhpc0MsIGIyR2VhckpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdSk7XG4gICAgICAvLyBiMlZlYzIgckMgPSBiMk11bChxQywgbV9sb2NhbEFuY2hvckMgLSBtX2xjQyk7XG4gICAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQywgdGhpcy5tX2xjQywgdGhpcy5tX2xhbGNDKTtcbiAgICAgIGNvbnN0IHJDOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQywgdGhpcy5tX2xhbGNDLCBiMkdlYXJKb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50c19zX3JDKTtcbiAgICAgIC8vIGIyVmVjMiByQSA9IGIyTXVsKHFBLCBtX2xvY2FsQW5jaG9yQSAtIG1fbGNBKTtcbiAgICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbGNBLCB0aGlzLm1fbGFsY0EpO1xuICAgICAgY29uc3QgckE6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFBLCB0aGlzLm1fbGFsY0EsIGIyR2VhckpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfckEpO1xuICAgICAgLy8gbV9KdkFDID0gdTtcbiAgICAgIHRoaXMubV9KdkFDLkNvcHkodSk7XG4gICAgICAvLyBtX0p3QyA9IGIyQ3Jvc3MockMsIHUpO1xuICAgICAgdGhpcy5tX0p3QyA9IGIyVmVjMi5Dcm9zc1ZWKHJDLCB1KTtcbiAgICAgIC8vIG1fSndBID0gYjJDcm9zcyhyQSwgdSk7XG4gICAgICB0aGlzLm1fSndBID0gYjJWZWMyLkNyb3NzVlYockEsIHUpO1xuICAgICAgdGhpcy5tX21hc3MgKz0gdGhpcy5tX21DICsgdGhpcy5tX21BICsgdGhpcy5tX2lDICogdGhpcy5tX0p3QyAqIHRoaXMubV9Kd0MgKyB0aGlzLm1faUEgKiB0aGlzLm1fSndBICogdGhpcy5tX0p3QTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tX3R5cGVCID09PSBiMkpvaW50VHlwZS5lX3Jldm9sdXRlSm9pbnQpIHtcbiAgICAgIHRoaXMubV9KdkJELlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9Kd0IgPSB0aGlzLm1fcmF0aW87XG4gICAgICB0aGlzLm1fSndEID0gdGhpcy5tX3JhdGlvO1xuICAgICAgdGhpcy5tX21hc3MgKz0gdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogKHRoaXMubV9pQiArIHRoaXMubV9pRCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGIyVmVjMiB1ID0gYjJNdWwocUQsIG1fbG9jYWxBeGlzRCk7XG4gICAgICBjb25zdCB1OiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxRCwgdGhpcy5tX2xvY2FsQXhpc0QsIGIyR2VhckpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdSk7XG4gICAgICAvLyBiMlZlYzIgckQgPSBiMk11bChxRCwgbV9sb2NhbEFuY2hvckQgLSBtX2xjRCk7XG4gICAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yRCwgdGhpcy5tX2xjRCwgdGhpcy5tX2xhbGNEKTtcbiAgICAgIGNvbnN0IHJEOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxRCwgdGhpcy5tX2xhbGNELCBiMkdlYXJKb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50c19zX3JEKTtcbiAgICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbGNCKTtcbiAgICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbGNCLCB0aGlzLm1fbGFsY0IpO1xuICAgICAgY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIGIyR2VhckpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfckIpO1xuICAgICAgLy8gbV9KdkJEID0gbV9yYXRpbyAqIHU7XG4gICAgICBiMlZlYzIuTXVsU1YodGhpcy5tX3JhdGlvLCB1LCB0aGlzLm1fSnZCRCk7XG4gICAgICAvLyBtX0p3RCA9IG1fcmF0aW8gKiBiMkNyb3NzKHJELCB1KTtcbiAgICAgIHRoaXMubV9Kd0QgPSB0aGlzLm1fcmF0aW8gKiBiMlZlYzIuQ3Jvc3NWVihyRCwgdSk7XG4gICAgICAvLyBtX0p3QiA9IG1fcmF0aW8gKiBiMkNyb3NzKHJCLCB1KTtcbiAgICAgIHRoaXMubV9Kd0IgPSB0aGlzLm1fcmF0aW8gKiBiMlZlYzIuQ3Jvc3NWVihyQiwgdSk7XG4gICAgICB0aGlzLm1fbWFzcyArPSB0aGlzLm1fcmF0aW8gKiB0aGlzLm1fcmF0aW8gKiAodGhpcy5tX21EICsgdGhpcy5tX21CKSArIHRoaXMubV9pRCAqIHRoaXMubV9Kd0QgKiB0aGlzLm1fSndEICsgdGhpcy5tX2lCICogdGhpcy5tX0p3QiAqIHRoaXMubV9Kd0I7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBlZmZlY3RpdmUgbWFzcy5cbiAgICB0aGlzLm1fbWFzcyA9IHRoaXMubV9tYXNzID4gMCA/IDEgLyB0aGlzLm1fbWFzcyA6IDA7XG5cbiAgICBpZiAoZGF0YS5zdGVwLndhcm1TdGFydGluZykge1xuICAgICAgLy8gdkEgKz0gKG1fbUEgKiBtX2ltcHVsc2UpICogbV9KdkFDO1xuICAgICAgdkEuU2VsZk11bEFkZCh0aGlzLm1fbUEgKiB0aGlzLm1faW1wdWxzZSwgdGhpcy5tX0p2QUMpO1xuICAgICAgd0EgKz0gdGhpcy5tX2lBICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSndBO1xuICAgICAgLy8gdkIgKz0gKG1fbUIgKiBtX2ltcHVsc2UpICogbV9KdkJEO1xuICAgICAgdkIuU2VsZk11bEFkZCh0aGlzLm1fbUIgKiB0aGlzLm1faW1wdWxzZSwgdGhpcy5tX0p2QkQpO1xuICAgICAgd0IgKz0gdGhpcy5tX2lCICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSndCO1xuICAgICAgLy8gdkMgLT0gKG1fbUMgKiBtX2ltcHVsc2UpICogbV9KdkFDO1xuICAgICAgdkMuU2VsZk11bFN1Yih0aGlzLm1fbUMgKiB0aGlzLm1faW1wdWxzZSwgdGhpcy5tX0p2QUMpO1xuICAgICAgd0MgLT0gdGhpcy5tX2lDICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSndDO1xuICAgICAgLy8gdkQgLT0gKG1fbUQgKiBtX2ltcHVsc2UpICogbV9KdkJEO1xuICAgICAgdkQuU2VsZk11bFN1Yih0aGlzLm1fbUQgKiB0aGlzLm1faW1wdWxzZSwgdGhpcy5tX0p2QkQpO1xuICAgICAgd0QgLT0gdGhpcy5tX2lEICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSndEO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZSA9IDA7XG4gICAgfVxuXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnYgPSB2QTtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udyA9IHdBO1xuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52ID0gdkI7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLncgPSB3QjtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Q10udiA9IHZDO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhDXS53ID0gd0M7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleERdLnYgPSB2RDtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4RF0udyA9IHdEO1xuICB9XG5cbiAgcHVibGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICBjb25zdCB2QTogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnY7XG4gICAgbGV0IHdBOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udztcbiAgICBjb25zdCB2QjogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnY7XG4gICAgbGV0IHdCOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udztcbiAgICBjb25zdCB2QzogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleENdLnY7XG4gICAgbGV0IHdDOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Q10udztcbiAgICBjb25zdCB2RDogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleERdLnY7XG4gICAgbGV0IHdEOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4RF0udztcblxuICAgIC8vIGZsb2F0MzIgQ2RvdCA9IGIyRG90KG1fSnZBQywgdkEgLSB2QykgKyBiMkRvdChtX0p2QkQsIHZCIC0gdkQpO1xuICAgIGxldCBDZG90ID1cbiAgICAgIGIyVmVjMi5Eb3RWVih0aGlzLm1fSnZBQywgYjJWZWMyLlN1YlZWKHZBLCB2QywgYjJWZWMyLnNfdDApKSArXG4gICAgICBiMlZlYzIuRG90VlYodGhpcy5tX0p2QkQsIGIyVmVjMi5TdWJWVih2QiwgdkQsIGIyVmVjMi5zX3QwKSk7XG4gICAgQ2RvdCArPSAodGhpcy5tX0p3QSAqIHdBIC0gdGhpcy5tX0p3QyAqIHdDKSArICh0aGlzLm1fSndCICogd0IgLSB0aGlzLm1fSndEICogd0QpO1xuXG4gICAgY29uc3QgaW1wdWxzZTogbnVtYmVyID0gLXRoaXMubV9tYXNzICogQ2RvdDtcbiAgICB0aGlzLm1faW1wdWxzZSArPSBpbXB1bHNlO1xuXG4gICAgLy8gdkEgKz0gKG1fbUEgKiBpbXB1bHNlKSAqIG1fSnZBQztcbiAgICB2QS5TZWxmTXVsQWRkKCh0aGlzLm1fbUEgKiBpbXB1bHNlKSwgdGhpcy5tX0p2QUMpO1xuICAgIHdBICs9IHRoaXMubV9pQSAqIGltcHVsc2UgKiB0aGlzLm1fSndBO1xuICAgIC8vIHZCICs9IChtX21CICogaW1wdWxzZSkgKiBtX0p2QkQ7XG4gICAgdkIuU2VsZk11bEFkZCgodGhpcy5tX21CICogaW1wdWxzZSksIHRoaXMubV9KdkJEKTtcbiAgICB3QiArPSB0aGlzLm1faUIgKiBpbXB1bHNlICogdGhpcy5tX0p3QjtcbiAgICAvLyB2QyAtPSAobV9tQyAqIGltcHVsc2UpICogbV9KdkFDO1xuICAgIHZDLlNlbGZNdWxTdWIoKHRoaXMubV9tQyAqIGltcHVsc2UpLCB0aGlzLm1fSnZBQyk7XG4gICAgd0MgLT0gdGhpcy5tX2lDICogaW1wdWxzZSAqIHRoaXMubV9Kd0M7XG4gICAgLy8gdkQgLT0gKG1fbUQgKiBpbXB1bHNlKSAqIG1fSnZCRDtcbiAgICB2RC5TZWxmTXVsU3ViKCh0aGlzLm1fbUQgKiBpbXB1bHNlKSwgdGhpcy5tX0p2QkQpO1xuICAgIHdEIC09IHRoaXMubV9pRCAqIGltcHVsc2UgKiB0aGlzLm1fSndEO1xuXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnYgPSB2QTtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udyA9IHdBO1xuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52ID0gdkI7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLncgPSB3QjtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Q10udiA9IHZDO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhDXS53ID0gd0M7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleERdLnYgPSB2RDtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4RF0udyA9IHdEO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfdSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3JCID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19yQyA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckQgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY0E6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmM7XG4gICAgbGV0IGFBOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hO1xuICAgIGNvbnN0IGNCOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5jO1xuICAgIGxldCBhQjogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYTtcbiAgICBjb25zdCBjQzogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Q10uYztcbiAgICBsZXQgYUM6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleENdLmE7XG4gICAgY29uc3QgY0Q6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleERdLmM7XG4gICAgbGV0IGFEOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhEXS5hO1xuXG4gICAgLy8gYjJSb3QgcUEoYUEpLCBxQihhQiksIHFDKGFDKSwgcUQoYUQpO1xuICAgIGNvbnN0IHFBOiBiMlJvdCA9IHRoaXMubV9xQS5TZXRBbmdsZShhQSksXG4gICAgICBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpLFxuICAgICAgcUM6IGIyUm90ID0gdGhpcy5tX3FDLlNldEFuZ2xlKGFDKSxcbiAgICAgIHFEOiBiMlJvdCA9IHRoaXMubV9xRC5TZXRBbmdsZShhRCk7XG5cbiAgICBjb25zdCBsaW5lYXJFcnJvcjogbnVtYmVyID0gMDtcblxuICAgIGxldCBjb29yZGluYXRlQTogbnVtYmVyLCBjb29yZGluYXRlQjogbnVtYmVyO1xuXG4gICAgY29uc3QgSnZBQzogYjJWZWMyID0gdGhpcy5tX0p2QUMsIEp2QkQ6IGIyVmVjMiA9IHRoaXMubV9KdkJEO1xuICAgIGxldCBKd0E6IG51bWJlciwgSndCOiBudW1iZXIsIEp3QzogbnVtYmVyLCBKd0Q6IG51bWJlcjtcbiAgICBsZXQgbWFzczogbnVtYmVyID0gMDtcblxuICAgIGlmICh0aGlzLm1fdHlwZUEgPT09IGIySm9pbnRUeXBlLmVfcmV2b2x1dGVKb2ludCkge1xuICAgICAgSnZBQy5TZXRaZXJvKCk7XG4gICAgICBKd0EgPSAxO1xuICAgICAgSndDID0gMTtcbiAgICAgIG1hc3MgKz0gdGhpcy5tX2lBICsgdGhpcy5tX2lDO1xuXG4gICAgICBjb29yZGluYXRlQSA9IGFBIC0gYUMgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGVBO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBiMlZlYzIgdSA9IGIyTXVsKHFDLCBtX2xvY2FsQXhpc0MpO1xuICAgICAgY29uc3QgdTogYjJWZWMyID0gYjJSb3QuTXVsUlYocUMsIHRoaXMubV9sb2NhbEF4aXNDLCBiMkdlYXJKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc191KTtcbiAgICAgIC8vIGIyVmVjMiByQyA9IGIyTXVsKHFDLCBtX2xvY2FsQW5jaG9yQyAtIG1fbGNDKTtcbiAgICAgIGNvbnN0IHJDOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQywgdGhpcy5tX2xhbGNDLCBiMkdlYXJKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19yQyk7XG4gICAgICAvLyBiMlZlYzIgckEgPSBiMk11bChxQSwgbV9sb2NhbEFuY2hvckEgLSBtX2xjQSk7XG4gICAgICBjb25zdCByQTogYjJWZWMyID0gYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sYWxjQSwgYjJHZWFySm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfckEpO1xuICAgICAgLy8gSnZBQyA9IHU7XG4gICAgICBKdkFDLkNvcHkodSk7XG4gICAgICAvLyBKd0MgPSBiMkNyb3NzKHJDLCB1KTtcbiAgICAgIEp3QyA9IGIyVmVjMi5Dcm9zc1ZWKHJDLCB1KTtcbiAgICAgIC8vIEp3QSA9IGIyQ3Jvc3MockEsIHUpO1xuICAgICAgSndBID0gYjJWZWMyLkNyb3NzVlYockEsIHUpO1xuICAgICAgbWFzcyArPSB0aGlzLm1fbUMgKyB0aGlzLm1fbUEgKyB0aGlzLm1faUMgKiBKd0MgKiBKd0MgKyB0aGlzLm1faUEgKiBKd0EgKiBKd0E7XG5cbiAgICAgIC8vIGIyVmVjMiBwQyA9IG1fbG9jYWxBbmNob3JDIC0gbV9sY0M7XG4gICAgICBjb25zdCBwQyA9IHRoaXMubV9sYWxjQztcbiAgICAgIC8vIGIyVmVjMiBwQSA9IGIyTXVsVChxQywgckEgKyAoY0EgLSBjQykpO1xuICAgICAgY29uc3QgcEE6IGIyVmVjMiA9IGIyUm90Lk11bFRSVihcbiAgICAgICAgcUMsXG4gICAgICAgIGIyVmVjMi5BZGRWVihcbiAgICAgICAgICByQSxcbiAgICAgICAgICBiMlZlYzIuU3ViVlYoY0EsIGNDLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgYjJWZWMyLnNfdDApLFxuICAgICAgICBiMlZlYzIuc190MCk7IC8vIHBBIHVzZXMgc190MFxuICAgICAgLy8gY29vcmRpbmF0ZUEgPSBiMkRvdChwQSAtIHBDLCBtX2xvY2FsQXhpc0MpO1xuICAgICAgY29vcmRpbmF0ZUEgPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKHBBLCBwQywgYjJWZWMyLnNfdDApLCB0aGlzLm1fbG9jYWxBeGlzQyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubV90eXBlQiA9PT0gYjJKb2ludFR5cGUuZV9yZXZvbHV0ZUpvaW50KSB7XG4gICAgICBKdkJELlNldFplcm8oKTtcbiAgICAgIEp3QiA9IHRoaXMubV9yYXRpbztcbiAgICAgIEp3RCA9IHRoaXMubV9yYXRpbztcbiAgICAgIG1hc3MgKz0gdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogKHRoaXMubV9pQiArIHRoaXMubV9pRCk7XG5cbiAgICAgIGNvb3JkaW5hdGVCID0gYUIgLSBhRCAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZUI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGIyVmVjMiB1ID0gYjJNdWwocUQsIG1fbG9jYWxBeGlzRCk7XG4gICAgICBjb25zdCB1OiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxRCwgdGhpcy5tX2xvY2FsQXhpc0QsIGIyR2VhckpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3UpO1xuICAgICAgLy8gYjJWZWMyIHJEID0gYjJNdWwocUQsIG1fbG9jYWxBbmNob3JEIC0gbV9sY0QpO1xuICAgICAgY29uc3QgckQ6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFELCB0aGlzLm1fbGFsY0QsIGIyR2VhckpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX3JEKTtcbiAgICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbGNCKTtcbiAgICAgIGNvbnN0IHJCOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQiwgdGhpcy5tX2xhbGNCLCBiMkdlYXJKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19yQik7XG4gICAgICAvLyBKdkJEID0gbV9yYXRpbyAqIHU7XG4gICAgICBiMlZlYzIuTXVsU1YodGhpcy5tX3JhdGlvLCB1LCBKdkJEKTtcbiAgICAgIC8vIEp3RCA9IG1fcmF0aW8gKiBiMkNyb3NzKHJELCB1KTtcbiAgICAgIEp3RCA9IHRoaXMubV9yYXRpbyAqIGIyVmVjMi5Dcm9zc1ZWKHJELCB1KTtcbiAgICAgIC8vIEp3QiA9IG1fcmF0aW8gKiBiMkNyb3NzKHJCLCB1KTtcbiAgICAgIEp3QiA9IHRoaXMubV9yYXRpbyAqIGIyVmVjMi5Dcm9zc1ZWKHJCLCB1KTtcbiAgICAgIG1hc3MgKz0gdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogKHRoaXMubV9tRCArIHRoaXMubV9tQikgKyB0aGlzLm1faUQgKiBKd0QgKiBKd0QgKyB0aGlzLm1faUIgKiBKd0IgKiBKd0I7XG5cbiAgICAgIC8vIGIyVmVjMiBwRCA9IG1fbG9jYWxBbmNob3JEIC0gbV9sY0Q7XG4gICAgICBjb25zdCBwRCA9IHRoaXMubV9sYWxjRDtcbiAgICAgIC8vIGIyVmVjMiBwQiA9IGIyTXVsVChxRCwgckIgKyAoY0IgLSBjRCkpO1xuICAgICAgY29uc3QgcEI6IGIyVmVjMiA9IGIyUm90Lk11bFRSVihcbiAgICAgICAgcUQsXG4gICAgICAgIGIyVmVjMi5BZGRWVihcbiAgICAgICAgICByQixcbiAgICAgICAgICBiMlZlYzIuU3ViVlYoY0IsIGNELCBiMlZlYzIuc190MCksXG4gICAgICAgICAgYjJWZWMyLnNfdDApLFxuICAgICAgICBiMlZlYzIuc190MCk7IC8vIHBCIHVzZXMgc190MFxuICAgICAgLy8gY29vcmRpbmF0ZUIgPSBiMkRvdChwQiAtIHBELCBtX2xvY2FsQXhpc0QpO1xuICAgICAgY29vcmRpbmF0ZUIgPSBiMlZlYzIuRG90VlYoYjJWZWMyLlN1YlZWKHBCLCBwRCwgYjJWZWMyLnNfdDApLCB0aGlzLm1fbG9jYWxBeGlzRCk7XG4gICAgfVxuXG4gICAgY29uc3QgQzogbnVtYmVyID0gKGNvb3JkaW5hdGVBICsgdGhpcy5tX3JhdGlvICogY29vcmRpbmF0ZUIpIC0gdGhpcy5tX2NvbnN0YW50O1xuXG4gICAgbGV0IGltcHVsc2U6IG51bWJlciA9IDA7XG4gICAgaWYgKG1hc3MgPiAwKSB7XG4gICAgICBpbXB1bHNlID0gLUMgLyBtYXNzO1xuICAgIH1cblxuICAgIC8vIGNBICs9IG1fbUEgKiBpbXB1bHNlICogSnZBQztcbiAgICBjQS5TZWxmTXVsQWRkKHRoaXMubV9tQSAqIGltcHVsc2UsIEp2QUMpO1xuICAgIGFBICs9IHRoaXMubV9pQSAqIGltcHVsc2UgKiBKd0E7XG4gICAgLy8gY0IgKz0gbV9tQiAqIGltcHVsc2UgKiBKdkJEO1xuICAgIGNCLlNlbGZNdWxBZGQodGhpcy5tX21CICogaW1wdWxzZSwgSnZCRCk7XG4gICAgYUIgKz0gdGhpcy5tX2lCICogaW1wdWxzZSAqIEp3QjtcbiAgICAvLyBjQyAtPSBtX21DICogaW1wdWxzZSAqIEp2QUM7XG4gICAgY0MuU2VsZk11bFN1Yih0aGlzLm1fbUMgKiBpbXB1bHNlLCBKdkFDKTtcbiAgICBhQyAtPSB0aGlzLm1faUMgKiBpbXB1bHNlICogSndDO1xuICAgIC8vIGNEIC09IG1fbUQgKiBpbXB1bHNlICogSnZCRDtcbiAgICBjRC5TZWxmTXVsU3ViKHRoaXMubV9tRCAqIGltcHVsc2UsIEp2QkQpO1xuICAgIGFEIC09IHRoaXMubV9pRCAqIGltcHVsc2UgKiBKd0Q7XG5cbiAgICAvLyBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jID0gY0E7XG4gICAgZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYSA9IGFBO1xuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmMgPSBjQjtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hID0gYUI7XG4gICAgLy8gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Q10uYyA9IGNDO1xuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleENdLmEgPSBhQztcbiAgICAvLyBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhEXS5jID0gY0Q7XG4gICAgZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4RF0uYSA9IGFEO1xuXG4gICAgLy8gVE9ET19FUklOIG5vdCBpbXBsZW1lbnRlZFxuICAgIHJldHVybiBsaW5lYXJFcnJvciA8IGIyX2xpbmVhclNsb3A7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQTxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckI8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvbkZvcmNlPFQgZXh0ZW5kcyBYWT4oaW52X2R0OiBudW1iZXIsIG91dDogVCk6IFQge1xuICAgIC8vIGIyVmVjMiBQID0gbV9pbXB1bHNlICogbV9KdkFDO1xuICAgIC8vIHJldHVybiBpbnZfZHQgKiBQO1xuICAgIHJldHVybiBiMlZlYzIuTXVsU1YoaW52X2R0ICogdGhpcy5tX2ltcHVsc2UsIHRoaXMubV9KdkFDLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uVG9ycXVlKGludl9kdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLyBmbG9hdDMyIEwgPSBtX2ltcHVsc2UgKiBtX0p3QTtcbiAgICAvLyByZXR1cm4gaW52X2R0ICogTDtcbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSndBO1xuICB9XG5cbiAgcHVibGljIEdldEpvaW50MSgpIHsgcmV0dXJuIHRoaXMubV9qb2ludDE7IH1cblxuICBwdWJsaWMgR2V0Sm9pbnQyKCkgeyByZXR1cm4gdGhpcy5tX2pvaW50MjsgfVxuXG4gIHB1YmxpYyBHZXRSYXRpbygpIHtcbiAgICByZXR1cm4gdGhpcy5tX3JhdGlvO1xuICB9XG5cbiAgcHVibGljIFNldFJhdGlvKHJhdGlvOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYjJJc1ZhbGlkKHJhdGlvKSk7XG4gICAgdGhpcy5tX3JhdGlvID0gcmF0aW87XG4gIH1cblxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICBjb25zdCBpbmRleEEgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICBjb25zdCBpbmRleEIgPSB0aGlzLm1fYm9keUIubV9pc2xhbmRJbmRleDtcblxuICAgIGNvbnN0IGluZGV4MSA9IHRoaXMubV9qb2ludDEubV9pbmRleDtcbiAgICBjb25zdCBpbmRleDIgPSB0aGlzLm1fam9pbnQyLm1faW5kZXg7XG5cbiAgICBsb2coXCIgIGNvbnN0IGpkOiBiMkdlYXJKb2ludERlZiA9IG5ldyBiMkdlYXJKb2ludERlZigpO1xcblwiKTtcbiAgICBsb2coXCIgIGpkLmJvZHlBID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhBKTtcbiAgICBsb2coXCIgIGpkLmJvZHlCID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhCKTtcbiAgICBsb2coXCIgIGpkLmNvbGxpZGVDb25uZWN0ZWQgPSAlcztcXG5cIiwgKHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBqZC5qb2ludDEgPSBqb2ludHNbJWRdO1xcblwiLCBpbmRleDEpO1xuICAgIGxvZyhcIiAgamQuam9pbnQyID0gam9pbnRzWyVkXTtcXG5cIiwgaW5kZXgyKTtcbiAgICBsb2coXCIgIGpkLnJhdGlvID0gJS4xNWY7XFxuXCIsIHRoaXMubV9yYXRpbyk7XG4gICAgbG9nKFwiICBqb2ludHNbJWRdID0gdGhpcy5tX3dvcmxkLkNyZWF0ZUpvaW50KGpkKTtcXG5cIiwgdGhpcy5tX2luZGV4KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBO0FBQ0E7QUFDQTtBQWdCQTtBQUFBO0FBT0E7QUFBQTtBQUZBOztBQUlBO0FBQ0E7QUFBQTtBQVZBO0FBWUE7QUFBQTtBQStEQTtBQUFBO0FBM0RBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBSUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFRQTtBQUNBO0FBRUE7QUFFQTtBQUVBOztBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBUUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWlLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbUxBO0FBQUE7QUFwZ0JBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_gear_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_island.ts":
/*!*****************************************!*\
  !*** ./src/box2d/dynamics/b2_island.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Island = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_settings_2 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_settings_3 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_settings_4 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_timer_1 = __webpack_require__(/*! ../common/b2_timer */ \"./src/box2d/common/b2_timer.ts\");\nvar b2_contact_solver_1 = __webpack_require__(/*! ./b2_contact_solver */ \"./src/box2d/dynamics/b2_contact_solver.ts\");\nvar b2_body_1 = __webpack_require__(/*! ./b2_body */ \"./src/box2d/dynamics/b2_body.ts\");\nvar b2_time_step_1 = __webpack_require__(/*! ./b2_time_step */ \"./src/box2d/dynamics/b2_time_step.ts\");\nvar b2_world_callbacks_1 = __webpack_require__(/*! ./b2_world_callbacks */ \"./src/box2d/dynamics/b2_world_callbacks.ts\");\nvar b2Island = (function () {\n    function b2Island() {\n        this.m_bodies = [];\n        this.m_contacts = [];\n        this.m_joints = [];\n        this.m_positions = b2_time_step_1.b2Position.MakeArray(1024);\n        this.m_velocities = b2_time_step_1.b2Velocity.MakeArray(1024);\n        this.m_bodyCount = 0;\n        this.m_jointCount = 0;\n        this.m_contactCount = 0;\n        this.m_bodyCapacity = 0;\n        this.m_contactCapacity = 0;\n        this.m_jointCapacity = 0;\n    }\n    b2Island.prototype.Initialize = function (bodyCapacity, contactCapacity, jointCapacity, listener) {\n        this.m_bodyCapacity = bodyCapacity;\n        this.m_contactCapacity = contactCapacity;\n        this.m_jointCapacity = jointCapacity;\n        this.m_bodyCount = 0;\n        this.m_contactCount = 0;\n        this.m_jointCount = 0;\n        this.m_listener = listener;\n        if (this.m_positions.length < bodyCapacity) {\n            var new_length = b2_math_1.b2Max(this.m_positions.length * 2, bodyCapacity);\n            while (this.m_positions.length < new_length) {\n                this.m_positions[this.m_positions.length] = new b2_time_step_1.b2Position();\n            }\n        }\n        if (this.m_velocities.length < bodyCapacity) {\n            var new_length = b2_math_1.b2Max(this.m_velocities.length * 2, bodyCapacity);\n            while (this.m_velocities.length < new_length) {\n                this.m_velocities[this.m_velocities.length] = new b2_time_step_1.b2Velocity();\n            }\n        }\n    };\n    b2Island.prototype.Clear = function () {\n        this.m_bodyCount = 0;\n        this.m_contactCount = 0;\n        this.m_jointCount = 0;\n    };\n    b2Island.prototype.AddBody = function (body) {\n        body.m_islandIndex = this.m_bodyCount;\n        this.m_bodies[this.m_bodyCount++] = body;\n    };\n    b2Island.prototype.AddContact = function (contact) {\n        this.m_contacts[this.m_contactCount++] = contact;\n    };\n    b2Island.prototype.AddJoint = function (joint) {\n        this.m_joints[this.m_jointCount++] = joint;\n    };\n    b2Island.prototype.Solve = function (profile, step, gravity, allowSleep) {\n        var timer = b2Island.s_timer.Reset();\n        var h = step.dt;\n        for (var i = 0; i < this.m_bodyCount; ++i) {\n            var b = this.m_bodies[i];\n            this.m_positions[i].c.Copy(b.m_sweep.c);\n            var a = b.m_sweep.a;\n            var v = this.m_velocities[i].v.Copy(b.m_linearVelocity);\n            var w = b.m_angularVelocity;\n            b.m_sweep.c0.Copy(b.m_sweep.c);\n            b.m_sweep.a0 = b.m_sweep.a;\n            if (b.m_type === b2_body_1.b2BodyType.b2_dynamicBody) {\n                v.x += h * b.m_invMass * (b.m_gravityScale * b.m_mass * gravity.x + b.m_force.x);\n                v.y += h * b.m_invMass * (b.m_gravityScale * b.m_mass * gravity.y + b.m_force.y);\n                w += h * b.m_invI * b.m_torque;\n                v.SelfMul(1.0 / (1.0 + h * b.m_linearDamping));\n                w *= 1.0 / (1.0 + h * b.m_angularDamping);\n            }\n            this.m_positions[i].a = a;\n            this.m_velocities[i].w = w;\n        }\n        timer.Reset();\n        var solverData = b2Island.s_solverData;\n        solverData.step.Copy(step);\n        solverData.positions = this.m_positions;\n        solverData.velocities = this.m_velocities;\n        var contactSolverDef = b2Island.s_contactSolverDef;\n        contactSolverDef.step.Copy(step);\n        contactSolverDef.contacts = this.m_contacts;\n        contactSolverDef.count = this.m_contactCount;\n        contactSolverDef.positions = this.m_positions;\n        contactSolverDef.velocities = this.m_velocities;\n        var contactSolver = b2Island.s_contactSolver.Initialize(contactSolverDef);\n        contactSolver.InitializeVelocityConstraints();\n        if (step.warmStarting) {\n            contactSolver.WarmStart();\n        }\n        for (var i = 0; i < this.m_jointCount; ++i) {\n            this.m_joints[i].InitVelocityConstraints(solverData);\n        }\n        profile.solveInit = timer.GetMilliseconds();\n        timer.Reset();\n        for (var i = 0; i < step.velocityIterations; ++i) {\n            for (var j = 0; j < this.m_jointCount; ++j) {\n                this.m_joints[j].SolveVelocityConstraints(solverData);\n            }\n            contactSolver.SolveVelocityConstraints();\n        }\n        contactSolver.StoreImpulses();\n        profile.solveVelocity = timer.GetMilliseconds();\n        for (var i = 0; i < this.m_bodyCount; ++i) {\n            var c = this.m_positions[i].c;\n            var a = this.m_positions[i].a;\n            var v = this.m_velocities[i].v;\n            var w = this.m_velocities[i].w;\n            var translation = b2_math_1.b2Vec2.MulSV(h, v, b2Island.s_translation);\n            if (b2_math_1.b2Vec2.DotVV(translation, translation) > b2_settings_2.b2_maxTranslationSquared) {\n                var ratio = b2_settings_2.b2_maxTranslation / translation.Length();\n                v.SelfMul(ratio);\n            }\n            var rotation = h * w;\n            if (rotation * rotation > b2_settings_3.b2_maxRotationSquared) {\n                var ratio = b2_settings_3.b2_maxRotation / b2_math_1.b2Abs(rotation);\n                w *= ratio;\n            }\n            c.x += h * v.x;\n            c.y += h * v.y;\n            a += h * w;\n            this.m_positions[i].a = a;\n            this.m_velocities[i].w = w;\n        }\n        timer.Reset();\n        var positionSolved = false;\n        for (var i = 0; i < step.positionIterations; ++i) {\n            var contactsOkay = contactSolver.SolvePositionConstraints();\n            var jointsOkay = true;\n            for (var j = 0; j < this.m_jointCount; ++j) {\n                var jointOkay = this.m_joints[j].SolvePositionConstraints(solverData);\n                jointsOkay = jointsOkay && jointOkay;\n            }\n            if (contactsOkay && jointsOkay) {\n                positionSolved = true;\n                break;\n            }\n        }\n        for (var i = 0; i < this.m_bodyCount; ++i) {\n            var body = this.m_bodies[i];\n            body.m_sweep.c.Copy(this.m_positions[i].c);\n            body.m_sweep.a = this.m_positions[i].a;\n            body.m_linearVelocity.Copy(this.m_velocities[i].v);\n            body.m_angularVelocity = this.m_velocities[i].w;\n            body.SynchronizeTransform();\n        }\n        profile.solvePosition = timer.GetMilliseconds();\n        this.Report(contactSolver.m_velocityConstraints);\n        if (allowSleep) {\n            var minSleepTime = b2_settings_1.b2_maxFloat;\n            var linTolSqr = b2_settings_4.b2_linearSleepTolerance * b2_settings_4.b2_linearSleepTolerance;\n            var angTolSqr = b2_settings_4.b2_angularSleepTolerance * b2_settings_4.b2_angularSleepTolerance;\n            for (var i = 0; i < this.m_bodyCount; ++i) {\n                var b = this.m_bodies[i];\n                if (b.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n                    continue;\n                }\n                if (!b.m_autoSleepFlag ||\n                    b.m_angularVelocity * b.m_angularVelocity > angTolSqr ||\n                    b2_math_1.b2Vec2.DotVV(b.m_linearVelocity, b.m_linearVelocity) > linTolSqr) {\n                    b.m_sleepTime = 0;\n                    minSleepTime = 0;\n                }\n                else {\n                    b.m_sleepTime += h;\n                    minSleepTime = b2_math_1.b2Min(minSleepTime, b.m_sleepTime);\n                }\n            }\n            if (minSleepTime >= b2_settings_1.b2_timeToSleep && positionSolved) {\n                for (var i = 0; i < this.m_bodyCount; ++i) {\n                    var b = this.m_bodies[i];\n                    b.SetAwake(false);\n                }\n            }\n        }\n    };\n    b2Island.prototype.SolveTOI = function (subStep, toiIndexA, toiIndexB) {\n        for (var i = 0; i < this.m_bodyCount; ++i) {\n            var b = this.m_bodies[i];\n            this.m_positions[i].c.Copy(b.m_sweep.c);\n            this.m_positions[i].a = b.m_sweep.a;\n            this.m_velocities[i].v.Copy(b.m_linearVelocity);\n            this.m_velocities[i].w = b.m_angularVelocity;\n        }\n        var contactSolverDef = b2Island.s_contactSolverDef;\n        contactSolverDef.contacts = this.m_contacts;\n        contactSolverDef.count = this.m_contactCount;\n        contactSolverDef.step.Copy(subStep);\n        contactSolverDef.positions = this.m_positions;\n        contactSolverDef.velocities = this.m_velocities;\n        var contactSolver = b2Island.s_contactSolver.Initialize(contactSolverDef);\n        for (var i = 0; i < subStep.positionIterations; ++i) {\n            var contactsOkay = contactSolver.SolveTOIPositionConstraints(toiIndexA, toiIndexB);\n            if (contactsOkay) {\n                break;\n            }\n        }\n        this.m_bodies[toiIndexA].m_sweep.c0.Copy(this.m_positions[toiIndexA].c);\n        this.m_bodies[toiIndexA].m_sweep.a0 = this.m_positions[toiIndexA].a;\n        this.m_bodies[toiIndexB].m_sweep.c0.Copy(this.m_positions[toiIndexB].c);\n        this.m_bodies[toiIndexB].m_sweep.a0 = this.m_positions[toiIndexB].a;\n        contactSolver.InitializeVelocityConstraints();\n        for (var i = 0; i < subStep.velocityIterations; ++i) {\n            contactSolver.SolveVelocityConstraints();\n        }\n        var h = subStep.dt;\n        for (var i = 0; i < this.m_bodyCount; ++i) {\n            var c = this.m_positions[i].c;\n            var a = this.m_positions[i].a;\n            var v = this.m_velocities[i].v;\n            var w = this.m_velocities[i].w;\n            var translation = b2_math_1.b2Vec2.MulSV(h, v, b2Island.s_translation);\n            if (b2_math_1.b2Vec2.DotVV(translation, translation) > b2_settings_2.b2_maxTranslationSquared) {\n                var ratio = b2_settings_2.b2_maxTranslation / translation.Length();\n                v.SelfMul(ratio);\n            }\n            var rotation = h * w;\n            if (rotation * rotation > b2_settings_3.b2_maxRotationSquared) {\n                var ratio = b2_settings_3.b2_maxRotation / b2_math_1.b2Abs(rotation);\n                w *= ratio;\n            }\n            c.SelfMulAdd(h, v);\n            a += h * w;\n            this.m_positions[i].a = a;\n            this.m_velocities[i].w = w;\n            var body = this.m_bodies[i];\n            body.m_sweep.c.Copy(c);\n            body.m_sweep.a = a;\n            body.m_linearVelocity.Copy(v);\n            body.m_angularVelocity = w;\n            body.SynchronizeTransform();\n        }\n        this.Report(contactSolver.m_velocityConstraints);\n    };\n    b2Island.prototype.Report = function (constraints) {\n        if (this.m_listener === null) {\n            return;\n        }\n        for (var i = 0; i < this.m_contactCount; ++i) {\n            var c = this.m_contacts[i];\n            if (!c) {\n                continue;\n            }\n            var vc = constraints[i];\n            var impulse = b2Island.s_impulse;\n            impulse.count = vc.pointCount;\n            for (var j = 0; j < vc.pointCount; ++j) {\n                impulse.normalImpulses[j] = vc.points[j].normalImpulse;\n                impulse.tangentImpulses[j] = vc.points[j].tangentImpulse;\n            }\n            this.m_listener.PostSolve(c, impulse);\n        }\n    };\n    b2Island.s_timer = new b2_timer_1.b2Timer();\n    b2Island.s_solverData = new b2_time_step_1.b2SolverData();\n    b2Island.s_contactSolverDef = new b2_contact_solver_1.b2ContactSolverDef();\n    b2Island.s_contactSolver = new b2_contact_solver_1.b2ContactSolver();\n    b2Island.s_translation = new b2_math_1.b2Vec2();\n    b2Island.s_impulse = new b2_world_callbacks_1.b2ContactImpulse();\n    return b2Island;\n}());\nexports.b2Island = b2Island;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfaXNsYW5kLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX2lzbGFuZC50cz9hZWQxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9tYXhGbG9hdCwgYjJfdGltZVRvU2xlZXAgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9tYXhUcmFuc2xhdGlvbiwgYjJfbWF4VHJhbnNsYXRpb25TcXVhcmVkIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfbWF4Um90YXRpb24sIGIyX21heFJvdGF0aW9uU3F1YXJlZCB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyX2xpbmVhclNsZWVwVG9sZXJhbmNlLCBiMl9hbmd1bGFyU2xlZXBUb2xlcmFuY2UgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMkFicywgYjJNaW4sIGIyTWF4LCBiMlZlYzIgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyVGltZXIgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3RpbWVyXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3QgfSBmcm9tIFwiLi9iMl9jb250YWN0XCI7XG5pbXBvcnQgeyBiMkNvbnRhY3RTb2x2ZXIsIGIyQ29udGFjdFNvbHZlckRlZiB9IGZyb20gXCIuL2IyX2NvbnRhY3Rfc29sdmVyXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3RWZWxvY2l0eUNvbnN0cmFpbnQgfSBmcm9tIFwiLi9iMl9jb250YWN0X3NvbHZlclwiO1xuaW1wb3J0IHsgYjJKb2ludCB9IGZyb20gXCIuL2IyX2pvaW50XCI7XG5pbXBvcnQgeyBiMkJvZHksIGIyQm9keVR5cGUgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5pbXBvcnQgeyBiMlRpbWVTdGVwLCBiMlByb2ZpbGUsIGIyU29sdmVyRGF0YSwgYjJQb3NpdGlvbiwgYjJWZWxvY2l0eSB9IGZyb20gXCIuL2IyX3RpbWVfc3RlcFwiO1xuaW1wb3J0IHsgYjJDb250YWN0SW1wdWxzZSwgYjJDb250YWN0TGlzdGVuZXIgfSBmcm9tIFwiLi9iMl93b3JsZF9jYWxsYmFja3NcIjtcblxuLypcblBvc2l0aW9uIENvcnJlY3Rpb24gTm90ZXNcbj09PT09PT09PT09PT09PT09PT09PT09PT1cbkkgdHJpZWQgdGhlIHNldmVyYWwgYWxnb3JpdGhtcyBmb3IgcG9zaXRpb24gY29ycmVjdGlvbiBvZiB0aGUgMkQgcmV2b2x1dGUgam9pbnQuXG5JIGxvb2tlZCBhdCB0aGVzZSBzeXN0ZW1zOlxuLSBzaW1wbGUgcGVuZHVsdW0gKDFtIGRpYW1ldGVyIHNwaGVyZSBvbiBtYXNzbGVzcyA1bSBzdGljaykgd2l0aCBpbml0aWFsIGFuZ3VsYXIgdmVsb2NpdHkgb2YgMTAwIHJhZC9zLlxuLSBzdXNwZW5zaW9uIGJyaWRnZSB3aXRoIDMwIDFtIGxvbmcgcGxhbmtzIG9mIGxlbmd0aCAxbS5cbi0gbXVsdGktbGluayBjaGFpbiB3aXRoIDMwIDFtIGxvbmcgbGlua3MuXG5cbkhlcmUgYXJlIHRoZSBhbGdvcml0aG1zOlxuXG5CYXVtZ2FydGUgLSBBIGZyYWN0aW9uIG9mIHRoZSBwb3NpdGlvbiBlcnJvciBpcyBhZGRlZCB0byB0aGUgdmVsb2NpdHkgZXJyb3IuIFRoZXJlIGlzIG5vXG5zZXBhcmF0ZSBwb3NpdGlvbiBzb2x2ZXIuXG5cblBzZXVkbyBWZWxvY2l0aWVzIC0gQWZ0ZXIgdGhlIHZlbG9jaXR5IHNvbHZlciBhbmQgcG9zaXRpb24gaW50ZWdyYXRpb24sXG50aGUgcG9zaXRpb24gZXJyb3IsIEphY29iaWFuLCBhbmQgZWZmZWN0aXZlIG1hc3MgYXJlIHJlY29tcHV0ZWQuIFRoZW5cbnRoZSB2ZWxvY2l0eSBjb25zdHJhaW50cyBhcmUgc29sdmVkIHdpdGggcHNldWRvIHZlbG9jaXRpZXMgYW5kIGEgZnJhY3Rpb25cbm9mIHRoZSBwb3NpdGlvbiBlcnJvciBpcyBhZGRlZCB0byB0aGUgcHNldWRvIHZlbG9jaXR5IGVycm9yLiBUaGUgcHNldWRvXG52ZWxvY2l0aWVzIGFyZSBpbml0aWFsaXplZCB0byB6ZXJvIGFuZCB0aGVyZSBpcyBubyB3YXJtLXN0YXJ0aW5nLiBBZnRlclxudGhlIHBvc2l0aW9uIHNvbHZlciwgdGhlIHBzZXVkbyB2ZWxvY2l0aWVzIGFyZSBhZGRlZCB0byB0aGUgcG9zaXRpb25zLlxuVGhpcyBpcyBhbHNvIGNhbGxlZCB0aGUgRmlyc3QgT3JkZXIgV29ybGQgbWV0aG9kIG9yIHRoZSBQb3NpdGlvbiBMQ1AgbWV0aG9kLlxuXG5Nb2RpZmllZCBOb25saW5lYXIgR2F1c3MtU2VpZGVsIChOR1MpIC0gTGlrZSBQc2V1ZG8gVmVsb2NpdGllcyBleGNlcHQgdGhlXG5wb3NpdGlvbiBlcnJvciBpcyByZS1jb21wdXRlZCBmb3IgZWFjaCBjb25zdHJhaW50IGFuZCB0aGUgcG9zaXRpb25zIGFyZSB1cGRhdGVkXG5hZnRlciB0aGUgY29uc3RyYWludCBpcyBzb2x2ZWQuIFRoZSByYWRpdXMgdmVjdG9ycyAoYWthIEphY29iaWFucykgYXJlXG5yZS1jb21wdXRlZCB0b28gKG90aGVyd2lzZSB0aGUgYWxnb3JpdGhtIGhhcyBob3JyaWJsZSBpbnN0YWJpbGl0eSkuIFRoZSBwc2V1ZG9cbnZlbG9jaXR5IHN0YXRlcyBhcmUgbm90IG5lZWRlZCBiZWNhdXNlIHRoZXkgYXJlIGVmZmVjdGl2ZWx5IHplcm8gYXQgdGhlIGJlZ2lubmluZ1xub2YgZWFjaCBpdGVyYXRpb24uIFNpbmNlIHdlIGhhdmUgdGhlIGN1cnJlbnQgcG9zaXRpb24gZXJyb3IsIHdlIGFsbG93IHRoZVxuaXRlcmF0aW9ucyB0byB0ZXJtaW5hdGUgZWFybHkgaWYgdGhlIGVycm9yIGJlY29tZXMgc21hbGxlciB0aGFuIGIyX2xpbmVhclNsb3AuXG5cbkZ1bGwgTkdTIG9yIGp1c3QgTkdTIC0gTGlrZSBNb2RpZmllZCBOR1MgZXhjZXB0IHRoZSBlZmZlY3RpdmUgbWFzcyBhcmUgcmUtY29tcHV0ZWRcbmVhY2ggdGltZSBhIGNvbnN0cmFpbnQgaXMgc29sdmVkLlxuXG5IZXJlIGFyZSB0aGUgcmVzdWx0czpcbkJhdW1nYXJ0ZSAtIHRoaXMgaXMgdGhlIGNoZWFwZXN0IGFsZ29yaXRobSBidXQgaXQgaGFzIHNvbWUgc3RhYmlsaXR5IHByb2JsZW1zLFxuZXNwZWNpYWxseSB3aXRoIHRoZSBicmlkZ2UuIFRoZSBjaGFpbiBsaW5rcyBzZXBhcmF0ZSBlYXNpbHkgY2xvc2UgdG8gdGhlIHJvb3RcbmFuZCB0aGV5IGppdHRlciBhcyB0aGV5IHN0cnVnZ2xlIHRvIHB1bGwgdG9nZXRoZXIuIFRoaXMgaXMgb25lIG9mIHRoZSBtb3N0IGNvbW1vblxubWV0aG9kcyBpbiB0aGUgZmllbGQuIFRoZSBiaWcgZHJhd2JhY2sgaXMgdGhhdCB0aGUgcG9zaXRpb24gY29ycmVjdGlvbiBhcnRpZmljaWFsbHlcbmFmZmVjdHMgdGhlIG1vbWVudHVtLCB0aHVzIGxlYWRpbmcgdG8gaW5zdGFiaWxpdGllcyBhbmQgZmFsc2UgYm91bmNlLiBJIHVzZWQgYVxuYmlhcyBmYWN0b3Igb2YgMC4yLiBBIGxhcmdlciBiaWFzIGZhY3RvciBtYWtlcyB0aGUgYnJpZGdlIGxlc3Mgc3RhYmxlLCBhIHNtYWxsZXJcbmZhY3RvciBtYWtlcyBqb2ludHMgYW5kIGNvbnRhY3RzIG1vcmUgc3Bvbmd5LlxuXG5Qc2V1ZG8gVmVsb2NpdGllcyAtIHRoZSBpcyBtb3JlIHN0YWJsZSB0aGFuIHRoZSBCYXVtZ2FydGUgbWV0aG9kLiBUaGUgYnJpZGdlIGlzXG5zdGFibGUuIEhvd2V2ZXIsIGpvaW50cyBzdGlsbCBzZXBhcmF0ZSB3aXRoIGxhcmdlIGFuZ3VsYXIgdmVsb2NpdGllcy4gRHJhZyB0aGVcbnNpbXBsZSBwZW5kdWx1bSBpbiBhIGNpcmNsZSBxdWlja2x5IGFuZCB0aGUgam9pbnQgd2lsbCBzZXBhcmF0ZS4gVGhlIGNoYWluIHNlcGFyYXRlc1xuZWFzaWx5IGFuZCBkb2VzIG5vdCByZWNvdmVyLiBJIHVzZWQgYSBiaWFzIGZhY3RvciBvZiAwLjIuIEEgbGFyZ2VyIHZhbHVlIGxlYWQgdG9cbnRoZSBicmlkZ2UgY29sbGFwc2luZyB3aGVuIGEgaGVhdnkgY3ViZSBkcm9wcyBvbiBpdC5cblxuTW9kaWZpZWQgTkdTIC0gdGhpcyBhbGdvcml0aG0gaXMgYmV0dGVyIGluIHNvbWUgd2F5cyB0aGFuIEJhdW1nYXJ0ZSBhbmQgUHNldWRvXG5WZWxvY2l0aWVzLCBidXQgaW4gb3RoZXIgd2F5cyBpdCBpcyB3b3JzZS4gVGhlIGJyaWRnZSBhbmQgY2hhaW4gYXJlIG11Y2ggbW9yZVxuc3RhYmxlLCBidXQgdGhlIHNpbXBsZSBwZW5kdWx1bSBnb2VzIHVuc3RhYmxlIGF0IGhpZ2ggYW5ndWxhciB2ZWxvY2l0aWVzLlxuXG5GdWxsIE5HUyAtIHN0YWJsZSBpbiBhbGwgdGVzdHMuIFRoZSBqb2ludHMgZGlzcGxheSBnb29kIHN0aWZmbmVzcy4gVGhlIGJyaWRnZVxuc3RpbGwgc2FncywgYnV0IHRoaXMgaXMgYmV0dGVyIHRoYW4gaW5maW5pdGUgZm9yY2VzLlxuXG5SZWNvbW1lbmRhdGlvbnNcblBzZXVkbyBWZWxvY2l0aWVzIGFyZSBub3QgcmVhbGx5IHdvcnRod2hpbGUgYmVjYXVzZSB0aGUgYnJpZGdlIGFuZCBjaGFpbiBjYW5ub3RcbnJlY292ZXIgZnJvbSBqb2ludCBzZXBhcmF0aW9uLiBJbiBvdGhlciBjYXNlcyB0aGUgYmVuZWZpdCBvdmVyIEJhdW1nYXJ0ZSBpcyBzbWFsbC5cblxuTW9kaWZpZWQgTkdTIGlzIG5vdCBhIHJvYnVzdCBtZXRob2QgZm9yIHRoZSByZXZvbHV0ZSBqb2ludCBkdWUgdG8gdGhlIHZpb2xlbnRcbmluc3RhYmlsaXR5IHNlZW4gaW4gdGhlIHNpbXBsZSBwZW5kdWx1bS4gUGVyaGFwcyBpdCBpcyB2aWFibGUgd2l0aCBvdGhlciBjb25zdHJhaW50XG50eXBlcywgZXNwZWNpYWxseSBzY2FsYXIgY29uc3RyYWludHMgd2hlcmUgdGhlIGVmZmVjdGl2ZSBtYXNzIGlzIGEgc2NhbGFyLlxuXG5UaGlzIGxlYXZlcyBCYXVtZ2FydGUgYW5kIEZ1bGwgTkdTLiBCYXVtZ2FydGUgaGFzIHNtYWxsLCBidXQgbWFuYWdlYWJsZSBpbnN0YWJpbGl0aWVzXG5hbmQgaXMgdmVyeSBmYXN0LiBJIGRvbid0IHRoaW5rIHdlIGNhbiBlc2NhcGUgQmF1bWdhcnRlLCBlc3BlY2lhbGx5IGluIGhpZ2hseVxuZGVtYW5kaW5nIGNhc2VzIHdoZXJlIGhpZ2ggY29uc3RyYWludCBmaWRlbGl0eSBpcyBub3QgbmVlZGVkLlxuXG5GdWxsIE5HUyBpcyByb2J1c3QgYW5kIGVhc3kgb24gdGhlIGV5ZXMuIEkgcmVjb21tZW5kIHRoaXMgYXMgYW4gb3B0aW9uIGZvclxuaGlnaGVyIGZpZGVsaXR5IHNpbXVsYXRpb24gYW5kIGNlcnRhaW5seSBmb3Igc3VzcGVuc2lvbiBicmlkZ2VzIGFuZCBsb25nIGNoYWlucy5cbkZ1bGwgTkdTIG1pZ2h0IGJlIGEgZ29vZCBjaG9pY2UgZm9yIHJhZ2RvbGxzLCBlc3BlY2lhbGx5IG1vdG9yaXplZCByYWdkb2xscyB3aGVyZVxuam9pbnQgc2VwYXJhdGlvbiBjYW4gYmUgcHJvYmxlbWF0aWMuIFRoZSBudW1iZXIgb2YgTkdTIGl0ZXJhdGlvbnMgY2FuIGJlIHJlZHVjZWRcbmZvciBiZXR0ZXIgcGVyZm9ybWFuY2Ugd2l0aG91dCBoYXJtaW5nIHJvYnVzdG5lc3MgbXVjaC5cblxuRWFjaCBqb2ludCBpbiBhIGNhbiBiZSBoYW5kbGVkIGRpZmZlcmVudGx5IGluIHRoZSBwb3NpdGlvbiBzb2x2ZXIuIFNvIEkgcmVjb21tZW5kXG5hIHN5c3RlbSB3aGVyZSB0aGUgdXNlciBjYW4gc2VsZWN0IHRoZSBhbGdvcml0aG0gb24gYSBwZXIgam9pbnQgYmFzaXMuIEkgd291bGRcbnByb2JhYmx5IGRlZmF1bHQgdG8gdGhlIHNsb3dlciBGdWxsIE5HUyBhbmQgbGV0IHRoZSB1c2VyIHNlbGVjdCB0aGUgZmFzdGVyXG5CYXVtZ2FydGUgbWV0aG9kIGluIHBlcmZvcm1hbmNlIGNyaXRpY2FsIHNjZW5hcmlvcy5cbiovXG5cbi8qXG5DYWNoZSBQZXJmb3JtYW5jZVxuXG5UaGUgQm94MkQgc29sdmVycyBhcmUgZG9taW5hdGVkIGJ5IGNhY2hlIG1pc3Nlcy4gRGF0YSBzdHJ1Y3R1cmVzIGFyZSBkZXNpZ25lZFxudG8gaW5jcmVhc2UgdGhlIG51bWJlciBvZiBjYWNoZSBoaXRzLiBNdWNoIG9mIG1pc3NlcyBhcmUgZHVlIHRvIHJhbmRvbSBhY2Nlc3NcbnRvIGJvZHkgZGF0YS4gVGhlIGNvbnN0cmFpbnQgc3RydWN0dXJlcyBhcmUgaXRlcmF0ZWQgb3ZlciBsaW5lYXJseSwgd2hpY2ggbGVhZHNcbnRvIGZldyBjYWNoZSBtaXNzZXMuXG5cblRoZSBib2RpZXMgYXJlIG5vdCBhY2Nlc3NlZCBkdXJpbmcgaXRlcmF0aW9uLiBJbnN0ZWFkIHJlYWQgb25seSBkYXRhLCBzdWNoIGFzXG50aGUgbWFzcyB2YWx1ZXMgYXJlIHN0b3JlZCB3aXRoIHRoZSBjb25zdHJhaW50cy4gVGhlIG11dGFibGUgZGF0YSBhcmUgdGhlIGNvbnN0cmFpbnRcbmltcHVsc2VzIGFuZCB0aGUgYm9kaWVzIHZlbG9jaXRpZXMvcG9zaXRpb25zLiBUaGUgaW1wdWxzZXMgYXJlIGhlbGQgaW5zaWRlIHRoZVxuY29uc3RyYWludCBzdHJ1Y3R1cmVzLiBUaGUgYm9keSB2ZWxvY2l0aWVzL3Bvc2l0aW9ucyBhcmUgaGVsZCBpbiBjb21wYWN0LCB0ZW1wb3JhcnlcbmFycmF5cyB0byBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIGNhY2hlIGhpdHMuIExpbmVhciBhbmQgYW5ndWxhciB2ZWxvY2l0eSBhcmVcbnN0b3JlZCBpbiBhIHNpbmdsZSBhcnJheSBzaW5jZSBtdWx0aXBsZSBhcnJheXMgbGVhZCB0byBtdWx0aXBsZSBtaXNzZXMuXG4qL1xuXG4vKlxuMkQgUm90YXRpb25cblxuUiA9IFtjb3ModGhldGEpIC1zaW4odGhldGEpXVxuICAgIFtzaW4odGhldGEpIGNvcyh0aGV0YSkgXVxuXG50aGV0YURvdCA9IG9tZWdhXG5cbkxldCBxMSA9IGNvcyh0aGV0YSksIHEyID0gc2luKHRoZXRhKS5cblIgPSBbcTEgLXEyXVxuICAgIFtxMiAgcTFdXG5cbnExRG90ID0gLXRoZXRhRG90ICogcTJcbnEyRG90ID0gdGhldGFEb3QgKiBxMVxuXG5xMV9uZXcgPSBxMV9vbGQgLSBkdCAqIHcgKiBxMlxucTJfbmV3ID0gcTJfb2xkICsgZHQgKiB3ICogcTFcbnRoZW4gbm9ybWFsaXplLlxuXG5UaGlzIG1pZ2h0IGJlIGZhc3RlciB0aGFuIGNvbXB1dGluZyBzaW4rY29zLlxuSG93ZXZlciwgd2UgY2FuIGNvbXB1dGUgc2luK2NvcyBvZiB0aGUgc2FtZSBhbmdsZSBmYXN0LlxuKi9cblxuZXhwb3J0IGNsYXNzIGIySXNsYW5kIHtcbiAgcHVibGljIG1fbGlzdGVuZXIhOiBiMkNvbnRhY3RMaXN0ZW5lcjtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9ib2RpZXM6IGIyQm9keVtdID0gWy8qMTAyNCovXTsgLy8gVE9ETzogYjJTZXR0aW5nc1xuICBwdWJsaWMgcmVhZG9ubHkgbV9jb250YWN0czogYjJDb250YWN0W10gPSBbLyoxMDI0Ki9dOyAvLyBUT0RPOiBiMlNldHRpbmdzXG4gIHB1YmxpYyByZWFkb25seSBtX2pvaW50czogYjJKb2ludFtdID0gWy8qMTAyNCovXTsgLy8gVE9ETzogYjJTZXR0aW5nc1xuXG4gIHB1YmxpYyByZWFkb25seSBtX3Bvc2l0aW9uczogYjJQb3NpdGlvbltdID0gYjJQb3NpdGlvbi5NYWtlQXJyYXkoMTAyNCk7IC8vIFRPRE86IGIyU2V0dGluZ3NcbiAgcHVibGljIHJlYWRvbmx5IG1fdmVsb2NpdGllczogYjJWZWxvY2l0eVtdID0gYjJWZWxvY2l0eS5NYWtlQXJyYXkoMTAyNCk7IC8vIFRPRE86IGIyU2V0dGluZ3NcblxuICBwdWJsaWMgbV9ib2R5Q291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2pvaW50Q291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2NvbnRhY3RDb3VudDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9ib2R5Q2FwYWNpdHk6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2NvbnRhY3RDYXBhY2l0eTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fam9pbnRDYXBhY2l0eTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgSW5pdGlhbGl6ZShib2R5Q2FwYWNpdHk6IG51bWJlciwgY29udGFjdENhcGFjaXR5OiBudW1iZXIsIGpvaW50Q2FwYWNpdHk6IG51bWJlciwgbGlzdGVuZXI6IGIyQ29udGFjdExpc3RlbmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2JvZHlDYXBhY2l0eSA9IGJvZHlDYXBhY2l0eTtcbiAgICB0aGlzLm1fY29udGFjdENhcGFjaXR5ID0gY29udGFjdENhcGFjaXR5O1xuICAgIHRoaXMubV9qb2ludENhcGFjaXR5ID0gam9pbnRDYXBhY2l0eTtcbiAgICB0aGlzLm1fYm9keUNvdW50ID0gMDtcbiAgICB0aGlzLm1fY29udGFjdENvdW50ID0gMDtcbiAgICB0aGlzLm1fam9pbnRDb3VudCA9IDA7XG5cbiAgICB0aGlzLm1fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcblxuICAgIC8vIFRPRE86XG4gICAgLy8gd2hpbGUgKHRoaXMubV9ib2RpZXMubGVuZ3RoIDwgYm9keUNhcGFjaXR5KSB7XG4gICAgLy8gICB0aGlzLm1fYm9kaWVzW3RoaXMubV9ib2RpZXMubGVuZ3RoXSA9IG51bGw7XG4gICAgLy8gfVxuICAgIC8vIFRPRE86XG4gICAgLy8gd2hpbGUgKHRoaXMubV9jb250YWN0cy5sZW5ndGggPCBjb250YWN0Q2FwYWNpdHkpIHtcbiAgICAvLyAgIHRoaXMubV9jb250YWN0c1t0aGlzLm1fY29udGFjdHMubGVuZ3RoXSA9IG51bGw7XG4gICAgLy8gfVxuICAgIC8vIFRPRE86XG4gICAgLy8gd2hpbGUgKHRoaXMubV9qb2ludHMubGVuZ3RoIDwgam9pbnRDYXBhY2l0eSkge1xuICAgIC8vICAgdGhpcy5tX2pvaW50c1t0aGlzLm1fam9pbnRzLmxlbmd0aF0gPSBudWxsO1xuICAgIC8vIH1cblxuICAgIC8vIFRPRE86XG4gICAgaWYgKHRoaXMubV9wb3NpdGlvbnMubGVuZ3RoIDwgYm9keUNhcGFjaXR5KSB7XG4gICAgICBjb25zdCBuZXdfbGVuZ3RoID0gYjJNYXgodGhpcy5tX3Bvc2l0aW9ucy5sZW5ndGggKiAyLCBib2R5Q2FwYWNpdHkpO1xuICAgICAgd2hpbGUgKHRoaXMubV9wb3NpdGlvbnMubGVuZ3RoIDwgbmV3X2xlbmd0aCkge1xuICAgICAgICB0aGlzLm1fcG9zaXRpb25zW3RoaXMubV9wb3NpdGlvbnMubGVuZ3RoXSA9IG5ldyBiMlBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE86XG4gICAgaWYgKHRoaXMubV92ZWxvY2l0aWVzLmxlbmd0aCA8IGJvZHlDYXBhY2l0eSkge1xuICAgICAgY29uc3QgbmV3X2xlbmd0aCA9IGIyTWF4KHRoaXMubV92ZWxvY2l0aWVzLmxlbmd0aCAqIDIsIGJvZHlDYXBhY2l0eSk7XG4gICAgICB3aGlsZSAodGhpcy5tX3ZlbG9jaXRpZXMubGVuZ3RoIDwgbmV3X2xlbmd0aCkge1xuICAgICAgICB0aGlzLm1fdmVsb2NpdGllc1t0aGlzLm1fdmVsb2NpdGllcy5sZW5ndGhdID0gbmV3IGIyVmVsb2NpdHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgQ2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5tX2JvZHlDb3VudCA9IDA7XG4gICAgdGhpcy5tX2NvbnRhY3RDb3VudCA9IDA7XG4gICAgdGhpcy5tX2pvaW50Q291bnQgPSAwO1xuICB9XG5cbiAgcHVibGljIEFkZEJvZHkoYm9keTogYjJCb2R5KTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9ib2R5Q291bnQgPCB0aGlzLm1fYm9keUNhcGFjaXR5KTtcbiAgICBib2R5Lm1faXNsYW5kSW5kZXggPSB0aGlzLm1fYm9keUNvdW50O1xuICAgIHRoaXMubV9ib2RpZXNbdGhpcy5tX2JvZHlDb3VudCsrXSA9IGJvZHk7XG4gIH1cblxuICBwdWJsaWMgQWRkQ29udGFjdChjb250YWN0OiBiMkNvbnRhY3QpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX2NvbnRhY3RDb3VudCA8IHRoaXMubV9jb250YWN0Q2FwYWNpdHkpO1xuICAgIHRoaXMubV9jb250YWN0c1t0aGlzLm1fY29udGFjdENvdW50KytdID0gY29udGFjdDtcbiAgfVxuXG4gIHB1YmxpYyBBZGRKb2ludChqb2ludDogYjJKb2ludCk6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fam9pbnRDb3VudCA8IHRoaXMubV9qb2ludENhcGFjaXR5KTtcbiAgICB0aGlzLm1fam9pbnRzW3RoaXMubV9qb2ludENvdW50KytdID0gam9pbnQ7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBzX3RpbWVyID0gbmV3IGIyVGltZXIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgc19zb2x2ZXJEYXRhID0gbmV3IGIyU29sdmVyRGF0YSgpO1xuICBwcml2YXRlIHN0YXRpYyBzX2NvbnRhY3RTb2x2ZXJEZWYgPSBuZXcgYjJDb250YWN0U29sdmVyRGVmKCk7XG4gIHByaXZhdGUgc3RhdGljIHNfY29udGFjdFNvbHZlciA9IG5ldyBiMkNvbnRhY3RTb2x2ZXIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgc190cmFuc2xhdGlvbiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFNvbHZlKHByb2ZpbGU6IGIyUHJvZmlsZSwgc3RlcDogYjJUaW1lU3RlcCwgZ3Jhdml0eTogYjJWZWMyLCBhbGxvd1NsZWVwOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgdGltZXI6IGIyVGltZXIgPSBiMklzbGFuZC5zX3RpbWVyLlJlc2V0KCk7XG5cbiAgICBjb25zdCBoOiBudW1iZXIgPSBzdGVwLmR0O1xuXG4gICAgLy8gSW50ZWdyYXRlIHZlbG9jaXRpZXMgYW5kIGFwcGx5IGRhbXBpbmcuIEluaXRpYWxpemUgdGhlIGJvZHkgc3RhdGUuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9ib2R5Q291bnQ7ICsraSkge1xuICAgICAgY29uc3QgYjogYjJCb2R5ID0gdGhpcy5tX2JvZGllc1tpXTtcblxuICAgICAgLy8gY29uc3QgYzogYjJWZWMyID1cbiAgICAgIHRoaXMubV9wb3NpdGlvbnNbaV0uYy5Db3B5KGIubV9zd2VlcC5jKTtcbiAgICAgIGNvbnN0IGE6IG51bWJlciA9IGIubV9zd2VlcC5hO1xuICAgICAgY29uc3QgdjogYjJWZWMyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaV0udi5Db3B5KGIubV9saW5lYXJWZWxvY2l0eSk7XG4gICAgICBsZXQgdzogbnVtYmVyID0gYi5tX2FuZ3VsYXJWZWxvY2l0eTtcblxuICAgICAgLy8gU3RvcmUgcG9zaXRpb25zIGZvciBjb250aW51b3VzIGNvbGxpc2lvbi5cbiAgICAgIGIubV9zd2VlcC5jMC5Db3B5KGIubV9zd2VlcC5jKTtcbiAgICAgIGIubV9zd2VlcC5hMCA9IGIubV9zd2VlcC5hO1xuXG4gICAgICBpZiAoYi5tX3R5cGUgPT09IGIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgICAgLy8gSW50ZWdyYXRlIHZlbG9jaXRpZXMuXG4gICAgICAgIC8vIHYgKz0gaCAqIGItPm1faW52TWFzcyAqIChiLT5tX2dyYXZpdHlTY2FsZSAqIGItPm1fbWFzcyAqIGdyYXZpdHkgKyBiLT5tX2ZvcmNlKTtcbiAgICAgICAgdi54ICs9IGggKiBiLm1faW52TWFzcyAqIChiLm1fZ3Jhdml0eVNjYWxlICogYi5tX21hc3MgKiBncmF2aXR5LnggKyBiLm1fZm9yY2UueCk7XG4gICAgICAgIHYueSArPSBoICogYi5tX2ludk1hc3MgKiAoYi5tX2dyYXZpdHlTY2FsZSAqIGIubV9tYXNzICogZ3Jhdml0eS55ICsgYi5tX2ZvcmNlLnkpO1xuICAgICAgICB3ICs9IGggKiBiLm1faW52SSAqIGIubV90b3JxdWU7XG5cbiAgICAgICAgLy8gQXBwbHkgZGFtcGluZy5cbiAgICAgICAgLy8gT0RFOiBkdi9kdCArIGMgKiB2ID0gMFxuICAgICAgICAvLyBTb2x1dGlvbjogdih0KSA9IHYwICogZXhwKC1jICogdClcbiAgICAgICAgLy8gVGltZSBzdGVwOiB2KHQgKyBkdCkgPSB2MCAqIGV4cCgtYyAqICh0ICsgZHQpKSA9IHYwICogZXhwKC1jICogdCkgKiBleHAoLWMgKiBkdCkgPSB2ICogZXhwKC1jICogZHQpXG4gICAgICAgIC8vIHYyID0gZXhwKC1jICogZHQpICogdjFcbiAgICAgICAgLy8gUGFkZSBhcHByb3hpbWF0aW9uOlxuICAgICAgICAvLyB2MiA9IHYxICogMSAvICgxICsgYyAqIGR0KVxuICAgICAgICB2LlNlbGZNdWwoMS4wIC8gKDEuMCArIGggKiBiLm1fbGluZWFyRGFtcGluZykpO1xuICAgICAgICB3ICo9IDEuMCAvICgxLjAgKyBoICogYi5tX2FuZ3VsYXJEYW1waW5nKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhpcy5tX3Bvc2l0aW9uc1tpXS5jID0gYztcbiAgICAgIHRoaXMubV9wb3NpdGlvbnNbaV0uYSA9IGE7XG4gICAgICAvLyB0aGlzLm1fdmVsb2NpdGllc1tpXS52ID0gdjtcbiAgICAgIHRoaXMubV92ZWxvY2l0aWVzW2ldLncgPSB3O1xuICAgIH1cblxuICAgIHRpbWVyLlJlc2V0KCk7XG5cbiAgICAvLyBTb2x2ZXIgZGF0YVxuICAgIGNvbnN0IHNvbHZlckRhdGE6IGIyU29sdmVyRGF0YSA9IGIySXNsYW5kLnNfc29sdmVyRGF0YTtcbiAgICBzb2x2ZXJEYXRhLnN0ZXAuQ29weShzdGVwKTtcbiAgICBzb2x2ZXJEYXRhLnBvc2l0aW9ucyA9IHRoaXMubV9wb3NpdGlvbnM7XG4gICAgc29sdmVyRGF0YS52ZWxvY2l0aWVzID0gdGhpcy5tX3ZlbG9jaXRpZXM7XG5cbiAgICAvLyBJbml0aWFsaXplIHZlbG9jaXR5IGNvbnN0cmFpbnRzLlxuICAgIGNvbnN0IGNvbnRhY3RTb2x2ZXJEZWY6IGIyQ29udGFjdFNvbHZlckRlZiA9IGIySXNsYW5kLnNfY29udGFjdFNvbHZlckRlZjtcbiAgICBjb250YWN0U29sdmVyRGVmLnN0ZXAuQ29weShzdGVwKTtcbiAgICBjb250YWN0U29sdmVyRGVmLmNvbnRhY3RzID0gdGhpcy5tX2NvbnRhY3RzO1xuICAgIGNvbnRhY3RTb2x2ZXJEZWYuY291bnQgPSB0aGlzLm1fY29udGFjdENvdW50O1xuICAgIGNvbnRhY3RTb2x2ZXJEZWYucG9zaXRpb25zID0gdGhpcy5tX3Bvc2l0aW9ucztcbiAgICBjb250YWN0U29sdmVyRGVmLnZlbG9jaXRpZXMgPSB0aGlzLm1fdmVsb2NpdGllcztcblxuICAgIGNvbnN0IGNvbnRhY3RTb2x2ZXI6IGIyQ29udGFjdFNvbHZlciA9IGIySXNsYW5kLnNfY29udGFjdFNvbHZlci5Jbml0aWFsaXplKGNvbnRhY3RTb2x2ZXJEZWYpO1xuICAgIGNvbnRhY3RTb2x2ZXIuSW5pdGlhbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTtcblxuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgY29udGFjdFNvbHZlci5XYXJtU3RhcnQoKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2pvaW50Q291bnQ7ICsraSkge1xuICAgICAgdGhpcy5tX2pvaW50c1tpXS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyhzb2x2ZXJEYXRhKTtcbiAgICB9XG5cbiAgICBwcm9maWxlLnNvbHZlSW5pdCA9IHRpbWVyLkdldE1pbGxpc2Vjb25kcygpO1xuXG4gICAgLy8gU29sdmUgdmVsb2NpdHkgY29uc3RyYWludHMuXG4gICAgdGltZXIuUmVzZXQoKTtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnM7ICsraSkge1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHRoaXMubV9qb2ludENvdW50OyArK2opIHtcbiAgICAgICAgdGhpcy5tX2pvaW50c1tqXS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMoc29sdmVyRGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRhY3RTb2x2ZXIuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgaW1wdWxzZXMgZm9yIHdhcm0gc3RhcnRpbmdcbiAgICBjb250YWN0U29sdmVyLlN0b3JlSW1wdWxzZXMoKTtcbiAgICBwcm9maWxlLnNvbHZlVmVsb2NpdHkgPSB0aW1lci5HZXRNaWxsaXNlY29uZHMoKTtcblxuICAgIC8vIEludGVncmF0ZSBwb3NpdGlvbnMuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMubV9ib2R5Q291bnQ7ICsraSkge1xuICAgICAgY29uc3QgYzogYjJWZWMyID0gdGhpcy5tX3Bvc2l0aW9uc1tpXS5jO1xuICAgICAgbGV0IGE6IG51bWJlciA9IHRoaXMubV9wb3NpdGlvbnNbaV0uYTtcbiAgICAgIGNvbnN0IHY6IGIyVmVjMiA9IHRoaXMubV92ZWxvY2l0aWVzW2ldLnY7XG4gICAgICBsZXQgdzogbnVtYmVyID0gdGhpcy5tX3ZlbG9jaXRpZXNbaV0udztcblxuICAgICAgLy8gQ2hlY2sgZm9yIGxhcmdlIHZlbG9jaXRpZXNcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoaCwgdiwgYjJJc2xhbmQuc190cmFuc2xhdGlvbik7XG4gICAgICBpZiAoYjJWZWMyLkRvdFZWKHRyYW5zbGF0aW9uLCB0cmFuc2xhdGlvbikgPiBiMl9tYXhUcmFuc2xhdGlvblNxdWFyZWQpIHtcbiAgICAgICAgY29uc3QgcmF0aW86IG51bWJlciA9IGIyX21heFRyYW5zbGF0aW9uIC8gdHJhbnNsYXRpb24uTGVuZ3RoKCk7XG4gICAgICAgIHYuU2VsZk11bChyYXRpbyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJvdGF0aW9uOiBudW1iZXIgPSBoICogdztcbiAgICAgIGlmIChyb3RhdGlvbiAqIHJvdGF0aW9uID4gYjJfbWF4Um90YXRpb25TcXVhcmVkKSB7XG4gICAgICAgIGNvbnN0IHJhdGlvOiBudW1iZXIgPSBiMl9tYXhSb3RhdGlvbiAvIGIyQWJzKHJvdGF0aW9uKTtcbiAgICAgICAgdyAqPSByYXRpbztcbiAgICAgIH1cblxuICAgICAgLy8gSW50ZWdyYXRlXG4gICAgICBjLnggKz0gaCAqIHYueDtcbiAgICAgIGMueSArPSBoICogdi55O1xuICAgICAgYSArPSBoICogdztcblxuICAgICAgLy8gdGhpcy5tX3Bvc2l0aW9uc1tpXS5jID0gYztcbiAgICAgIHRoaXMubV9wb3NpdGlvbnNbaV0uYSA9IGE7XG4gICAgICAvLyB0aGlzLm1fdmVsb2NpdGllc1tpXS52ID0gdjtcbiAgICAgIHRoaXMubV92ZWxvY2l0aWVzW2ldLncgPSB3O1xuICAgIH1cblxuICAgIC8vIFNvbHZlIHBvc2l0aW9uIGNvbnN0cmFpbnRzXG4gICAgdGltZXIuUmVzZXQoKTtcbiAgICBsZXQgcG9zaXRpb25Tb2x2ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgc3RlcC5wb3NpdGlvbkl0ZXJhdGlvbnM7ICsraSkge1xuICAgICAgY29uc3QgY29udGFjdHNPa2F5OiBib29sZWFuID0gY29udGFjdFNvbHZlci5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoKTtcblxuICAgICAgbGV0IGpvaW50c09rYXk6IGJvb2xlYW4gPSB0cnVlO1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHRoaXMubV9qb2ludENvdW50OyArK2opIHtcbiAgICAgICAgY29uc3Qgam9pbnRPa2F5OiBib29sZWFuID0gdGhpcy5tX2pvaW50c1tqXS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoc29sdmVyRGF0YSk7XG4gICAgICAgIGpvaW50c09rYXkgPSBqb2ludHNPa2F5ICYmIGpvaW50T2theTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbnRhY3RzT2theSAmJiBqb2ludHNPa2F5KSB7XG4gICAgICAgIC8vIEV4aXQgZWFybHkgaWYgdGhlIHBvc2l0aW9uIGVycm9ycyBhcmUgc21hbGwuXG4gICAgICAgIHBvc2l0aW9uU29sdmVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ29weSBzdGF0ZSBidWZmZXJzIGJhY2sgdG8gdGhlIGJvZGllc1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fYm9keUNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGJvZHk6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBib2R5Lm1fc3dlZXAuYy5Db3B5KHRoaXMubV9wb3NpdGlvbnNbaV0uYyk7XG4gICAgICBib2R5Lm1fc3dlZXAuYSA9IHRoaXMubV9wb3NpdGlvbnNbaV0uYTtcbiAgICAgIGJvZHkubV9saW5lYXJWZWxvY2l0eS5Db3B5KHRoaXMubV92ZWxvY2l0aWVzW2ldLnYpO1xuICAgICAgYm9keS5tX2FuZ3VsYXJWZWxvY2l0eSA9IHRoaXMubV92ZWxvY2l0aWVzW2ldLnc7XG4gICAgICBib2R5LlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgfVxuXG4gICAgcHJvZmlsZS5zb2x2ZVBvc2l0aW9uID0gdGltZXIuR2V0TWlsbGlzZWNvbmRzKCk7XG5cbiAgICB0aGlzLlJlcG9ydChjb250YWN0U29sdmVyLm1fdmVsb2NpdHlDb25zdHJhaW50cyk7XG5cbiAgICBpZiAoYWxsb3dTbGVlcCkge1xuICAgICAgbGV0IG1pblNsZWVwVGltZTogbnVtYmVyID0gYjJfbWF4RmxvYXQ7XG5cbiAgICAgIGNvbnN0IGxpblRvbFNxcjogbnVtYmVyID0gYjJfbGluZWFyU2xlZXBUb2xlcmFuY2UgKiBiMl9saW5lYXJTbGVlcFRvbGVyYW5jZTtcbiAgICAgIGNvbnN0IGFuZ1RvbFNxcjogbnVtYmVyID0gYjJfYW5ndWxhclNsZWVwVG9sZXJhbmNlICogYjJfYW5ndWxhclNsZWVwVG9sZXJhbmNlO1xuXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5tX2JvZHlDb3VudDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGI6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICAgIGlmIChiLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWIubV9hdXRvU2xlZXBGbGFnIHx8XG4gICAgICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSAqIGIubV9hbmd1bGFyVmVsb2NpdHkgPiBhbmdUb2xTcXIgfHxcbiAgICAgICAgICBiMlZlYzIuRG90VlYoYi5tX2xpbmVhclZlbG9jaXR5LCBiLm1fbGluZWFyVmVsb2NpdHkpID4gbGluVG9sU3FyKSB7XG4gICAgICAgICAgYi5tX3NsZWVwVGltZSA9IDA7XG4gICAgICAgICAgbWluU2xlZXBUaW1lID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiLm1fc2xlZXBUaW1lICs9IGg7XG4gICAgICAgICAgbWluU2xlZXBUaW1lID0gYjJNaW4obWluU2xlZXBUaW1lLCBiLm1fc2xlZXBUaW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobWluU2xlZXBUaW1lID49IGIyX3RpbWVUb1NsZWVwICYmIHBvc2l0aW9uU29sdmVkKSB7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fYm9keUNvdW50OyArK2kpIHtcbiAgICAgICAgICBjb25zdCBiOiBiMkJvZHkgPSB0aGlzLm1fYm9kaWVzW2ldO1xuICAgICAgICAgIGIuU2V0QXdha2UoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNvbHZlVE9JKHN1YlN0ZXA6IGIyVGltZVN0ZXAsIHRvaUluZGV4QTogbnVtYmVyLCB0b2lJbmRleEI6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0b2lJbmRleEEgPCB0aGlzLm1fYm9keUNvdW50KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQodG9pSW5kZXhCIDwgdGhpcy5tX2JvZHlDb3VudCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBib2R5IHN0YXRlLlxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fYm9keUNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGI6IGIyQm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICB0aGlzLm1fcG9zaXRpb25zW2ldLmMuQ29weShiLm1fc3dlZXAuYyk7XG4gICAgICB0aGlzLm1fcG9zaXRpb25zW2ldLmEgPSBiLm1fc3dlZXAuYTtcbiAgICAgIHRoaXMubV92ZWxvY2l0aWVzW2ldLnYuQ29weShiLm1fbGluZWFyVmVsb2NpdHkpO1xuICAgICAgdGhpcy5tX3ZlbG9jaXRpZXNbaV0udyA9IGIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGFjdFNvbHZlckRlZjogYjJDb250YWN0U29sdmVyRGVmID0gYjJJc2xhbmQuc19jb250YWN0U29sdmVyRGVmO1xuICAgIGNvbnRhY3RTb2x2ZXJEZWYuY29udGFjdHMgPSB0aGlzLm1fY29udGFjdHM7XG4gICAgY29udGFjdFNvbHZlckRlZi5jb3VudCA9IHRoaXMubV9jb250YWN0Q291bnQ7XG4gICAgY29udGFjdFNvbHZlckRlZi5zdGVwLkNvcHkoc3ViU3RlcCk7XG4gICAgY29udGFjdFNvbHZlckRlZi5wb3NpdGlvbnMgPSB0aGlzLm1fcG9zaXRpb25zO1xuICAgIGNvbnRhY3RTb2x2ZXJEZWYudmVsb2NpdGllcyA9IHRoaXMubV92ZWxvY2l0aWVzO1xuICAgIGNvbnN0IGNvbnRhY3RTb2x2ZXI6IGIyQ29udGFjdFNvbHZlciA9IGIySXNsYW5kLnNfY29udGFjdFNvbHZlci5Jbml0aWFsaXplKGNvbnRhY3RTb2x2ZXJEZWYpO1xuXG4gICAgLy8gU29sdmUgcG9zaXRpb24gY29uc3RyYWludHMuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHN1YlN0ZXAucG9zaXRpb25JdGVyYXRpb25zOyArK2kpIHtcbiAgICAgIGNvbnN0IGNvbnRhY3RzT2theTogYm9vbGVhbiA9IGNvbnRhY3RTb2x2ZXIuU29sdmVUT0lQb3NpdGlvbkNvbnN0cmFpbnRzKHRvaUluZGV4QSwgdG9pSW5kZXhCKTtcbiAgICAgIGlmIChjb250YWN0c09rYXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gIC8qXG4gICNpZiAwXG4gICAgLy8gSXMgdGhlIG5ldyBwb3NpdGlvbiByZWFsbHkgc2FmZT9cbiAgICBmb3IgKGludDMyIGkgPSAwOyBpIDwgdGhpcy5tX2NvbnRhY3RDb3VudDsgKytpKSB7XG4gICAgICBiMkNvbnRhY3QqIGMgPSB0aGlzLm1fY29udGFjdHNbaV07XG4gICAgICBiMkZpeHR1cmUqIGZBID0gYy5HZXRGaXh0dXJlQSgpO1xuICAgICAgYjJGaXh0dXJlKiBmQiA9IGMuR2V0Rml4dHVyZUIoKTtcblxuICAgICAgYjJCb2R5KiBiQSA9IGZBLkdldEJvZHkoKTtcbiAgICAgIGIyQm9keSogYkIgPSBmQi5HZXRCb2R5KCk7XG5cbiAgICAgIGludDMyIGluZGV4QSA9IGMuR2V0Q2hpbGRJbmRleEEoKTtcbiAgICAgIGludDMyIGluZGV4QiA9IGMuR2V0Q2hpbGRJbmRleEIoKTtcblxuICAgICAgYjJEaXN0YW5jZUlucHV0IGlucHV0O1xuICAgICAgaW5wdXQucHJveHlBLlNldChmQS5HZXRTaGFwZSgpLCBpbmRleEEpO1xuICAgICAgaW5wdXQucHJveHlCLlNldChmQi5HZXRTaGFwZSgpLCBpbmRleEIpO1xuICAgICAgaW5wdXQudHJhbnNmb3JtQSA9IGJBLkdldFRyYW5zZm9ybSgpO1xuICAgICAgaW5wdXQudHJhbnNmb3JtQiA9IGJCLkdldFRyYW5zZm9ybSgpO1xuICAgICAgaW5wdXQudXNlUmFkaWkgPSBmYWxzZTtcblxuICAgICAgYjJEaXN0YW5jZU91dHB1dCBvdXRwdXQ7XG4gICAgICBiMlNpbXBsZXhDYWNoZSBjYWNoZTtcbiAgICAgIGNhY2hlLmNvdW50ID0gMDtcbiAgICAgIGIyRGlzdGFuY2UoJm91dHB1dCwgJmNhY2hlLCAmaW5wdXQpO1xuXG4gICAgICBpZiAob3V0cHV0LmRpc3RhbmNlID09PSAwIHx8IGNhY2hlLmNvdW50ID09PSAzKSB7XG4gICAgICAgIGNhY2hlLmNvdW50ICs9IDA7XG4gICAgICB9XG4gICAgfVxuICAjZW5kaWZcbiAgKi9cblxuICAgIC8vIExlYXAgb2YgZmFpdGggdG8gbmV3IHNhZmUgc3RhdGUuXG4gICAgdGhpcy5tX2JvZGllc1t0b2lJbmRleEFdLm1fc3dlZXAuYzAuQ29weSh0aGlzLm1fcG9zaXRpb25zW3RvaUluZGV4QV0uYyk7XG4gICAgdGhpcy5tX2JvZGllc1t0b2lJbmRleEFdLm1fc3dlZXAuYTAgPSB0aGlzLm1fcG9zaXRpb25zW3RvaUluZGV4QV0uYTtcbiAgICB0aGlzLm1fYm9kaWVzW3RvaUluZGV4Ql0ubV9zd2VlcC5jMC5Db3B5KHRoaXMubV9wb3NpdGlvbnNbdG9pSW5kZXhCXS5jKTtcbiAgICB0aGlzLm1fYm9kaWVzW3RvaUluZGV4Ql0ubV9zd2VlcC5hMCA9IHRoaXMubV9wb3NpdGlvbnNbdG9pSW5kZXhCXS5hO1xuXG4gICAgLy8gTm8gd2FybSBzdGFydGluZyBpcyBuZWVkZWQgZm9yIFRPSSBldmVudHMgYmVjYXVzZSB3YXJtXG4gICAgLy8gc3RhcnRpbmcgaW1wdWxzZXMgd2VyZSBhcHBsaWVkIGluIHRoZSBkaXNjcmV0ZSBzb2x2ZXIuXG4gICAgY29udGFjdFNvbHZlci5Jbml0aWFsaXplVmVsb2NpdHlDb25zdHJhaW50cygpO1xuXG4gICAgLy8gU29sdmUgdmVsb2NpdHkgY29uc3RyYWludHMuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHN1YlN0ZXAudmVsb2NpdHlJdGVyYXRpb25zOyArK2kpIHtcbiAgICAgIGNvbnRhY3RTb2x2ZXIuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKCk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc3RvcmUgdGhlIFRPSSBjb250YWN0IGZvcmNlcyBmb3Igd2FybSBzdGFydGluZ1xuICAgIC8vIGJlY2F1c2UgdGhleSBjYW4gYmUgcXVpdGUgbGFyZ2UuXG5cbiAgICBjb25zdCBoOiBudW1iZXIgPSBzdWJTdGVwLmR0O1xuXG4gICAgLy8gSW50ZWdyYXRlIHBvc2l0aW9uc1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fYm9keUNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGM6IGIyVmVjMiA9IHRoaXMubV9wb3NpdGlvbnNbaV0uYztcbiAgICAgIGxldCBhOiBudW1iZXIgPSB0aGlzLm1fcG9zaXRpb25zW2ldLmE7XG4gICAgICBjb25zdCB2OiBiMlZlYzIgPSB0aGlzLm1fdmVsb2NpdGllc1tpXS52O1xuICAgICAgbGV0IHc6IG51bWJlciA9IHRoaXMubV92ZWxvY2l0aWVzW2ldLnc7XG5cbiAgICAgIC8vIENoZWNrIGZvciBsYXJnZSB2ZWxvY2l0aWVzXG4gICAgICBjb25zdCB0cmFuc2xhdGlvbjogYjJWZWMyID0gYjJWZWMyLk11bFNWKGgsIHYsIGIySXNsYW5kLnNfdHJhbnNsYXRpb24pO1xuICAgICAgaWYgKGIyVmVjMi5Eb3RWVih0cmFuc2xhdGlvbiwgdHJhbnNsYXRpb24pID4gYjJfbWF4VHJhbnNsYXRpb25TcXVhcmVkKSB7XG4gICAgICAgIGNvbnN0IHJhdGlvOiBudW1iZXIgPSBiMl9tYXhUcmFuc2xhdGlvbiAvIHRyYW5zbGF0aW9uLkxlbmd0aCgpO1xuICAgICAgICB2LlNlbGZNdWwocmF0aW8pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByb3RhdGlvbjogbnVtYmVyID0gaCAqIHc7XG4gICAgICBpZiAocm90YXRpb24gKiByb3RhdGlvbiA+IGIyX21heFJvdGF0aW9uU3F1YXJlZCkge1xuICAgICAgICBjb25zdCByYXRpbzogbnVtYmVyID0gYjJfbWF4Um90YXRpb24gLyBiMkFicyhyb3RhdGlvbik7XG4gICAgICAgIHcgKj0gcmF0aW87XG4gICAgICB9XG5cbiAgICAgIC8vIEludGVncmF0ZVxuICAgICAgYy5TZWxmTXVsQWRkKGgsIHYpO1xuICAgICAgYSArPSBoICogdztcblxuICAgICAgLy8gdGhpcy5tX3Bvc2l0aW9uc1tpXS5jID0gYztcbiAgICAgIHRoaXMubV9wb3NpdGlvbnNbaV0uYSA9IGE7XG4gICAgICAvLyB0aGlzLm1fdmVsb2NpdGllc1tpXS52ID0gdjtcbiAgICAgIHRoaXMubV92ZWxvY2l0aWVzW2ldLncgPSB3O1xuXG4gICAgICAvLyBTeW5jIGJvZGllc1xuICAgICAgY29uc3QgYm9keTogYjJCb2R5ID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgIGJvZHkubV9zd2VlcC5jLkNvcHkoYyk7XG4gICAgICBib2R5Lm1fc3dlZXAuYSA9IGE7XG4gICAgICBib2R5Lm1fbGluZWFyVmVsb2NpdHkuQ29weSh2KTtcbiAgICAgIGJvZHkubV9hbmd1bGFyVmVsb2NpdHkgPSB3O1xuICAgICAgYm9keS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIH1cblxuICAgIHRoaXMuUmVwb3J0KGNvbnRhY3RTb2x2ZXIubV92ZWxvY2l0eUNvbnN0cmFpbnRzKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHNfaW1wdWxzZSA9IG5ldyBiMkNvbnRhY3RJbXB1bHNlKCk7XG4gIHB1YmxpYyBSZXBvcnQoY29uc3RyYWludHM6IGIyQ29udGFjdFZlbG9jaXR5Q29uc3RyYWludFtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV9saXN0ZW5lciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm1fY29udGFjdENvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGM6IGIyQ29udGFjdCA9IHRoaXMubV9jb250YWN0c1tpXTtcblxuICAgICAgaWYgKCFjKSB7IGNvbnRpbnVlOyB9XG5cbiAgICAgIGNvbnN0IHZjOiBiMkNvbnRhY3RWZWxvY2l0eUNvbnN0cmFpbnQgPSBjb25zdHJhaW50c1tpXTtcblxuICAgICAgY29uc3QgaW1wdWxzZTogYjJDb250YWN0SW1wdWxzZSA9IGIySXNsYW5kLnNfaW1wdWxzZTtcbiAgICAgIGltcHVsc2UuY291bnQgPSB2Yy5wb2ludENvdW50O1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHZjLnBvaW50Q291bnQ7ICsraikge1xuICAgICAgICBpbXB1bHNlLm5vcm1hbEltcHVsc2VzW2pdID0gdmMucG9pbnRzW2pdLm5vcm1hbEltcHVsc2U7XG4gICAgICAgIGltcHVsc2UudGFuZ2VudEltcHVsc2VzW2pdID0gdmMucG9pbnRzW2pdLnRhbmdlbnRJbXB1bHNlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1fbGlzdGVuZXIuUG9zdFNvbHZlKGMsIGltcHVsc2UpO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUF3SEE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE0WUE7QUExWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9DQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBNVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFrVEE7QUF1QkE7QUFBQTtBQTVaQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_island.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_joint.ts":
/*!****************************************!*\
  !*** ./src/box2d/dynamics/b2_joint.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2Joint = exports.b2AngularStiffness = exports.b2LinearStiffness = exports.b2JointDef = exports.b2JointEdge = exports.b2Jacobian = exports.b2JointType = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2JointType;\n(function (b2JointType) {\n    b2JointType[b2JointType[\"e_unknownJoint\"] = 0] = \"e_unknownJoint\";\n    b2JointType[b2JointType[\"e_revoluteJoint\"] = 1] = \"e_revoluteJoint\";\n    b2JointType[b2JointType[\"e_prismaticJoint\"] = 2] = \"e_prismaticJoint\";\n    b2JointType[b2JointType[\"e_distanceJoint\"] = 3] = \"e_distanceJoint\";\n    b2JointType[b2JointType[\"e_pulleyJoint\"] = 4] = \"e_pulleyJoint\";\n    b2JointType[b2JointType[\"e_mouseJoint\"] = 5] = \"e_mouseJoint\";\n    b2JointType[b2JointType[\"e_gearJoint\"] = 6] = \"e_gearJoint\";\n    b2JointType[b2JointType[\"e_wheelJoint\"] = 7] = \"e_wheelJoint\";\n    b2JointType[b2JointType[\"e_weldJoint\"] = 8] = \"e_weldJoint\";\n    b2JointType[b2JointType[\"e_frictionJoint\"] = 9] = \"e_frictionJoint\";\n    b2JointType[b2JointType[\"e_ropeJoint\"] = 10] = \"e_ropeJoint\";\n    b2JointType[b2JointType[\"e_motorJoint\"] = 11] = \"e_motorJoint\";\n    b2JointType[b2JointType[\"e_areaJoint\"] = 12] = \"e_areaJoint\";\n})(b2JointType = exports.b2JointType || (exports.b2JointType = {}));\nvar b2Jacobian = (function () {\n    function b2Jacobian() {\n        this.linear = new b2_math_1.b2Vec2();\n        this.angularA = 0;\n        this.angularB = 0;\n    }\n    b2Jacobian.prototype.SetZero = function () {\n        this.linear.SetZero();\n        this.angularA = 0;\n        this.angularB = 0;\n        return this;\n    };\n    b2Jacobian.prototype.Set = function (x, a1, a2) {\n        this.linear.Copy(x);\n        this.angularA = a1;\n        this.angularB = a2;\n        return this;\n    };\n    return b2Jacobian;\n}());\nexports.b2Jacobian = b2Jacobian;\nvar b2JointEdge = (function () {\n    function b2JointEdge(joint) {\n        this._other = null;\n        this.prev = null;\n        this.next = null;\n        this.joint = joint;\n    }\n    Object.defineProperty(b2JointEdge.prototype, \"other\", {\n        get: function () {\n            if (this._other === null) {\n                throw new Error();\n            }\n            return this._other;\n        },\n        set: function (value) {\n            if (this._other !== null) {\n                throw new Error();\n            }\n            this._other = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    b2JointEdge.prototype.Reset = function () {\n        this._other = null;\n        this.prev = null;\n        this.next = null;\n    };\n    return b2JointEdge;\n}());\nexports.b2JointEdge = b2JointEdge;\nvar b2JointDef = (function () {\n    function b2JointDef(type) {\n        this.type = b2JointType.e_unknownJoint;\n        this.userData = null;\n        this.collideConnected = false;\n        this.type = type;\n    }\n    return b2JointDef;\n}());\nexports.b2JointDef = b2JointDef;\nfunction b2LinearStiffness(def, frequencyHertz, dampingRatio, bodyA, bodyB) {\n    var massA = bodyA.GetMass();\n    var massB = bodyB.GetMass();\n    var mass;\n    if (massA > 0.0 && massB > 0.0) {\n        mass = massA * massB / (massA + massB);\n    }\n    else if (massA > 0.0) {\n        mass = massA;\n    }\n    else {\n        mass = massB;\n    }\n    var omega = 2.0 * b2_settings_1.b2_pi * frequencyHertz;\n    def.stiffness = mass * omega * omega;\n    def.damping = 2.0 * mass * dampingRatio * omega;\n}\nexports.b2LinearStiffness = b2LinearStiffness;\nfunction b2AngularStiffness(def, frequencyHertz, dampingRatio, bodyA, bodyB) {\n    var IA = bodyA.GetInertia();\n    var IB = bodyB.GetInertia();\n    var I;\n    if (IA > 0.0 && IB > 0.0) {\n        I = IA * IB / (IA + IB);\n    }\n    else if (IA > 0.0) {\n        I = IA;\n    }\n    else {\n        I = IB;\n    }\n    var omega = 2.0 * b2_settings_1.b2_pi * frequencyHertz;\n    def.stiffness = I * omega * omega;\n    def.damping = 2.0 * I * dampingRatio * omega;\n}\nexports.b2AngularStiffness = b2AngularStiffness;\nvar b2Joint = (function () {\n    function b2Joint(def) {\n        this.m_type = b2JointType.e_unknownJoint;\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_edgeA = new b2JointEdge(this);\n        this.m_edgeB = new b2JointEdge(this);\n        this.m_index = 0;\n        this.m_islandFlag = false;\n        this.m_collideConnected = false;\n        this.m_userData = null;\n        this.m_type = def.type;\n        this.m_edgeA.other = def.bodyB;\n        this.m_edgeB.other = def.bodyA;\n        this.m_bodyA = def.bodyA;\n        this.m_bodyB = def.bodyB;\n        this.m_collideConnected = b2_settings_1.b2Maybe(def.collideConnected, false);\n        this.m_userData = b2_settings_1.b2Maybe(def.userData, null);\n    }\n    b2Joint.prototype.GetType = function () {\n        return this.m_type;\n    };\n    b2Joint.prototype.GetBodyA = function () {\n        return this.m_bodyA;\n    };\n    b2Joint.prototype.GetBodyB = function () {\n        return this.m_bodyB;\n    };\n    b2Joint.prototype.GetNext = function () {\n        return this.m_next;\n    };\n    b2Joint.prototype.GetUserData = function () {\n        return this.m_userData;\n    };\n    b2Joint.prototype.SetUserData = function (data) {\n        this.m_userData = data;\n    };\n    b2Joint.prototype.IsEnabled = function () {\n        return this.m_bodyA.IsEnabled() && this.m_bodyB.IsEnabled();\n    };\n    b2Joint.prototype.GetCollideConnected = function () {\n        return this.m_collideConnected;\n    };\n    b2Joint.prototype.Dump = function (log) {\n        log(\"// Dump is not supported for this joint type.\\n\");\n    };\n    b2Joint.prototype.ShiftOrigin = function (newOrigin) { };\n    b2Joint.prototype.Draw = function (draw) {\n        var xf1 = this.m_bodyA.GetTransform();\n        var xf2 = this.m_bodyB.GetTransform();\n        var x1 = xf1.p;\n        var x2 = xf2.p;\n        var p1 = this.GetAnchorA(b2Joint.Draw_s_p1);\n        var p2 = this.GetAnchorB(b2Joint.Draw_s_p2);\n        var color = b2Joint.Draw_s_color.SetRGB(0.5, 0.8, 0.8);\n        switch (this.m_type) {\n            case b2JointType.e_distanceJoint:\n                draw.DrawSegment(p1, p2, color);\n                break;\n            case b2JointType.e_pulleyJoint:\n                {\n                    var pulley = this;\n                    var s1 = pulley.GetGroundAnchorA();\n                    var s2 = pulley.GetGroundAnchorB();\n                    draw.DrawSegment(s1, p1, color);\n                    draw.DrawSegment(s2, p2, color);\n                    draw.DrawSegment(s1, s2, color);\n                }\n                break;\n            case b2JointType.e_mouseJoint:\n                {\n                    var c = b2Joint.Draw_s_c;\n                    c.Set(0.0, 1.0, 0.0);\n                    draw.DrawPoint(p1, 4.0, c);\n                    draw.DrawPoint(p2, 4.0, c);\n                    c.Set(0.8, 0.8, 0.8);\n                    draw.DrawSegment(p1, p2, c);\n                }\n                break;\n            default:\n                draw.DrawSegment(x1, p1, color);\n                draw.DrawSegment(p1, p2, color);\n                draw.DrawSegment(x2, p2, color);\n        }\n    };\n    b2Joint.Draw_s_p1 = new b2_math_1.b2Vec2();\n    b2Joint.Draw_s_p2 = new b2_math_1.b2Vec2();\n    b2Joint.Draw_s_color = new b2_draw_1.b2Color(0.5, 0.8, 0.8);\n    b2Joint.Draw_s_c = new b2_draw_1.b2Color();\n    return b2Joint;\n}());\nexports.b2Joint = b2Joint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfam9pbnQudHM/ZDA4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwNyBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJNYXliZSwgYjJfcGkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIFhZLCBiMlRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJCb2R5IH0gZnJvbSBcIi4vYjJfYm9keVwiO1xuaW1wb3J0IHsgYjJTb2x2ZXJEYXRhIH0gZnJvbSBcIi4vYjJfdGltZV9zdGVwXCI7XG5pbXBvcnQgeyBiMkRyYXcsIGIyQ29sb3IgfSBmcm9tIFwiLi4vY29tbW9uL2IyX2RyYXdcIjtcbmltcG9ydCB7IGIyUHVsbGV5Sm9pbnQgfSBmcm9tIFwiLi9iMl9wdWxsZXlfam9pbnRcIjtcblxuZXhwb3J0IGVudW0gYjJKb2ludFR5cGUge1xuICBlX3Vua25vd25Kb2ludCA9IDAsXG4gIGVfcmV2b2x1dGVKb2ludCA9IDEsXG4gIGVfcHJpc21hdGljSm9pbnQgPSAyLFxuICBlX2Rpc3RhbmNlSm9pbnQgPSAzLFxuICBlX3B1bGxleUpvaW50ID0gNCxcbiAgZV9tb3VzZUpvaW50ID0gNSxcbiAgZV9nZWFySm9pbnQgPSA2LFxuICBlX3doZWVsSm9pbnQgPSA3LFxuICBlX3dlbGRKb2ludCA9IDgsXG4gIGVfZnJpY3Rpb25Kb2ludCA9IDksXG4gIGVfcm9wZUpvaW50ID0gMTAsXG4gIGVfbW90b3JKb2ludCA9IDExLFxuICBlX2FyZWFKb2ludCA9IDEyLFxufVxuXG5leHBvcnQgY2xhc3MgYjJKYWNvYmlhbiB7XG4gIHB1YmxpYyByZWFkb25seSBsaW5lYXI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIGFuZ3VsYXJBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgYW5ndWxhckI6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIFNldFplcm8oKTogYjJKYWNvYmlhbiB7XG4gICAgdGhpcy5saW5lYXIuU2V0WmVybygpO1xuICAgIHRoaXMuYW5ndWxhckEgPSAwO1xuICAgIHRoaXMuYW5ndWxhckIgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIFNldCh4OiBYWSwgYTE6IG51bWJlciwgYTI6IG51bWJlcik6IGIySmFjb2JpYW4ge1xuICAgIHRoaXMubGluZWFyLkNvcHkoeCk7XG4gICAgdGhpcy5hbmd1bGFyQSA9IGExO1xuICAgIHRoaXMuYW5ndWxhckIgPSBhMjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG4vLy8gQSBqb2ludCBlZGdlIGlzIHVzZWQgdG8gY29ubmVjdCBib2RpZXMgYW5kIGpvaW50cyB0b2dldGhlclxuLy8vIGluIGEgam9pbnQgZ3JhcGggd2hlcmUgZWFjaCBib2R5IGlzIGEgbm9kZSBhbmQgZWFjaCBqb2ludFxuLy8vIGlzIGFuIGVkZ2UuIEEgam9pbnQgZWRnZSBiZWxvbmdzIHRvIGEgZG91Ymx5IGxpbmtlZCBsaXN0XG4vLy8gbWFpbnRhaW5lZCBpbiBlYWNoIGF0dGFjaGVkIGJvZHkuIEVhY2ggam9pbnQgaGFzIHR3byBqb2ludFxuLy8vIG5vZGVzLCBvbmUgZm9yIGVhY2ggYXR0YWNoZWQgYm9keS5cbmV4cG9ydCBjbGFzcyBiMkpvaW50RWRnZSB7XG4gIHByaXZhdGUgX290aGVyOiBiMkJvZHkgfCBudWxsID0gbnVsbDsgLy8vPCBwcm92aWRlcyBxdWljayBhY2Nlc3MgdG8gdGhlIG90aGVyIGJvZHkgYXR0YWNoZWQuXG4gIHB1YmxpYyBnZXQgb3RoZXIoKTogYjJCb2R5IHtcbiAgICBpZiAodGhpcy5fb3RoZXIgPT09IG51bGwpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICByZXR1cm4gdGhpcy5fb3RoZXI7XG4gIH1cbiAgcHVibGljIHNldCBvdGhlcih2YWx1ZTogYjJCb2R5KSB7XG4gICAgaWYgKHRoaXMuX290aGVyICE9PSBudWxsKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgdGhpcy5fb3RoZXIgPSB2YWx1ZTtcbiAgfVxuICBwdWJsaWMgcmVhZG9ubHkgam9pbnQ6IGIySm9pbnQ7ICAgIC8vLzwgdGhlIGpvaW50XG4gIHB1YmxpYyBwcmV2OiBiMkpvaW50RWRnZSB8IG51bGwgPSBudWxsOyAgLy8vPCB0aGUgcHJldmlvdXMgam9pbnQgZWRnZSBpbiB0aGUgYm9keSdzIGpvaW50IGxpc3RcbiAgcHVibGljIG5leHQ6IGIySm9pbnRFZGdlIHwgbnVsbCA9IG51bGw7ICAvLy88IHRoZSBuZXh0IGpvaW50IGVkZ2UgaW4gdGhlIGJvZHkncyBqb2ludCBsaXN0XG4gIGNvbnN0cnVjdG9yKGpvaW50OiBiMkpvaW50KSB7XG4gICAgdGhpcy5qb2ludCA9IGpvaW50O1xuICB9XG4gIHB1YmxpYyBSZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9vdGhlciA9IG51bGw7XG4gICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm5leHQgPSBudWxsO1xuICB9XG59XG5cbi8vLyBKb2ludCBkZWZpbml0aW9ucyBhcmUgdXNlZCB0byBjb25zdHJ1Y3Qgam9pbnRzLlxuZXhwb3J0IGludGVyZmFjZSBiMklKb2ludERlZiB7XG4gIC8vLyBUaGUgam9pbnQgdHlwZSBpcyBzZXQgYXV0b21hdGljYWxseSBmb3IgY29uY3JldGUgam9pbnQgdHlwZXMuXG4gIHR5cGU6IGIySm9pbnRUeXBlO1xuXG4gIC8vLyBVc2UgdGhpcyB0byBhdHRhY2ggYXBwbGljYXRpb24gc3BlY2lmaWMgZGF0YSB0byB5b3VyIGpvaW50cy5cbiAgdXNlckRhdGE/OiBhbnk7XG5cbiAgLy8vIFRoZSBmaXJzdCBhdHRhY2hlZCBib2R5LlxuICBib2R5QTogYjJCb2R5O1xuXG4gIC8vLyBUaGUgc2Vjb25kIGF0dGFjaGVkIGJvZHkuXG4gIGJvZHlCOiBiMkJvZHk7XG5cbiAgLy8vIFNldCB0aGlzIGZsYWcgdG8gdHJ1ZSBpZiB0aGUgYXR0YWNoZWQgYm9kaWVzIHNob3VsZCBjb2xsaWRlLlxuICBjb2xsaWRlQ29ubmVjdGVkPzogYm9vbGVhbjtcbn1cblxuLy8vIEpvaW50IGRlZmluaXRpb25zIGFyZSB1c2VkIHRvIGNvbnN0cnVjdCBqb2ludHMuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgYjJKb2ludERlZiBpbXBsZW1lbnRzIGIySUpvaW50RGVmIHtcbiAgLy8vIFRoZSBqb2ludCB0eXBlIGlzIHNldCBhdXRvbWF0aWNhbGx5IGZvciBjb25jcmV0ZSBqb2ludCB0eXBlcy5cbiAgcHVibGljIHJlYWRvbmx5IHR5cGU6IGIySm9pbnRUeXBlID0gYjJKb2ludFR5cGUuZV91bmtub3duSm9pbnQ7XG5cbiAgLy8vIFVzZSB0aGlzIHRvIGF0dGFjaCBhcHBsaWNhdGlvbiBzcGVjaWZpYyBkYXRhIHRvIHlvdXIgam9pbnRzLlxuICBwdWJsaWMgdXNlckRhdGE6IGFueSA9IG51bGw7XG5cbiAgLy8vIFRoZSBmaXJzdCBhdHRhY2hlZCBib2R5LlxuICBwdWJsaWMgYm9keUEhOiBiMkJvZHk7XG5cbiAgLy8vIFRoZSBzZWNvbmQgYXR0YWNoZWQgYm9keS5cbiAgcHVibGljIGJvZHlCITogYjJCb2R5O1xuXG4gIC8vLyBTZXQgdGhpcyBmbGFnIHRvIHRydWUgaWYgdGhlIGF0dGFjaGVkIGJvZGllcyBzaG91bGQgY29sbGlkZS5cbiAgcHVibGljIGNvbGxpZGVDb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcih0eXBlOiBiMkpvaW50VHlwZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cbn1cblxuLy8vIFV0aWxpdHkgdG8gY29tcHV0ZSBsaW5lYXIgc3RpZmZuZXNzIHZhbHVlcyBmcm9tIGZyZXF1ZW5jeSBhbmQgZGFtcGluZyByYXRpb1xuLy8gdm9pZCBiMkxpbmVhclN0aWZmbmVzcyhmbG9hdCYgc3RpZmZuZXNzLCBmbG9hdCYgZGFtcGluZyxcbi8vIFx0ZmxvYXQgZnJlcXVlbmN5SGVydHosIGZsb2F0IGRhbXBpbmdSYXRpbyxcbi8vIFx0Y29uc3QgYjJCb2R5KiBib2R5QSwgY29uc3QgYjJCb2R5KiBib2R5Qik7XG5leHBvcnQgZnVuY3Rpb24gYjJMaW5lYXJTdGlmZm5lc3MoZGVmOiB7IHN0aWZmbmVzczogbnVtYmVyLCBkYW1waW5nOiBudW1iZXIgfSwgZnJlcXVlbmN5SGVydHo6IG51bWJlciwgZGFtcGluZ1JhdGlvOiBudW1iZXIsIGJvZHlBOiBiMkJvZHksIGJvZHlCOiBiMkJvZHkpOiB2b2lkIHtcbiAgY29uc3QgbWFzc0E6IG51bWJlciA9IGJvZHlBLkdldE1hc3MoKTtcbiAgY29uc3QgbWFzc0I6IG51bWJlciA9IGJvZHlCLkdldE1hc3MoKTtcbiAgbGV0IG1hc3M6IG51bWJlcjtcbiAgaWYgKG1hc3NBID4gMC4wICYmIG1hc3NCID4gMC4wKSB7XG4gICAgbWFzcyA9IG1hc3NBICogbWFzc0IgLyAobWFzc0EgKyBtYXNzQik7XG4gIH0gZWxzZSBpZiAobWFzc0EgPiAwLjApIHtcbiAgICBtYXNzID0gbWFzc0E7XG4gIH0gZWxzZSB7XG4gICAgbWFzcyA9IG1hc3NCO1xuICB9XG5cbiAgY29uc3Qgb21lZ2E6IG51bWJlciA9IDIuMCAqIGIyX3BpICogZnJlcXVlbmN5SGVydHo7XG4gIGRlZi5zdGlmZm5lc3MgPSBtYXNzICogb21lZ2EgKiBvbWVnYTtcbiAgZGVmLmRhbXBpbmcgPSAyLjAgKiBtYXNzICogZGFtcGluZ1JhdGlvICogb21lZ2E7XG59XG5cbi8vLyBVdGlsaXR5IHRvIGNvbXB1dGUgcm90YXRpb25hbCBzdGlmZm5lc3MgdmFsdWVzIGZyZXF1ZW5jeSBhbmQgZGFtcGluZyByYXRpb1xuLy8gdm9pZCBiMkFuZ3VsYXJTdGlmZm5lc3MoZmxvYXQmIHN0aWZmbmVzcywgZmxvYXQmIGRhbXBpbmcsXG4vLyBcdGZsb2F0IGZyZXF1ZW5jeUhlcnR6LCBmbG9hdCBkYW1waW5nUmF0aW8sXG4vLyBcdGNvbnN0IGIyQm9keSogYm9keUEsIGNvbnN0IGIyQm9keSogYm9keUIpO1xuZXhwb3J0IGZ1bmN0aW9uIGIyQW5ndWxhclN0aWZmbmVzcyhkZWY6IHsgc3RpZmZuZXNzOiBudW1iZXIsIGRhbXBpbmc6IG51bWJlciB9LCBmcmVxdWVuY3lIZXJ0ejogbnVtYmVyLCBkYW1waW5nUmF0aW86IG51bWJlciwgYm9keUE6IGIyQm9keSwgYm9keUI6IGIyQm9keSk6IHZvaWQge1xuICBjb25zdCBJQTogbnVtYmVyID0gYm9keUEuR2V0SW5lcnRpYSgpO1xuICBjb25zdCBJQjogbnVtYmVyID0gYm9keUIuR2V0SW5lcnRpYSgpO1xuICBsZXQgSTogbnVtYmVyO1xuICBpZiAoSUEgPiAwLjAgJiYgSUIgPiAwLjApIHtcbiAgICBJID0gSUEgKiBJQiAvIChJQSArIElCKTtcbiAgfSBlbHNlIGlmIChJQSA+IDAuMCkge1xuICAgIEkgPSBJQTtcbiAgfSBlbHNlIHtcbiAgICBJID0gSUI7XG4gIH1cblxuICBjb25zdCBvbWVnYTogbnVtYmVyID0gMi4wICogYjJfcGkgKiBmcmVxdWVuY3lIZXJ0ejtcbiAgZGVmLnN0aWZmbmVzcyA9IEkgKiBvbWVnYSAqIG9tZWdhO1xuICBkZWYuZGFtcGluZyA9IDIuMCAqIEkgKiBkYW1waW5nUmF0aW8gKiBvbWVnYTtcbn1cblxuLy8vIFRoZSBiYXNlIGpvaW50IGNsYXNzLiBKb2ludHMgYXJlIHVzZWQgdG8gY29uc3RyYWludCB0d28gYm9kaWVzIHRvZ2V0aGVyIGluXG4vLy8gdmFyaW91cyBmYXNoaW9ucy4gU29tZSBqb2ludHMgYWxzbyBmZWF0dXJlIGxpbWl0cyBhbmQgbW90b3JzLlxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIGIySm9pbnQge1xuICBwdWJsaWMgcmVhZG9ubHkgbV90eXBlOiBiMkpvaW50VHlwZSA9IGIySm9pbnRUeXBlLmVfdW5rbm93bkpvaW50O1xuICBwdWJsaWMgbV9wcmV2OiBiMkpvaW50IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBtX25leHQ6IGIySm9pbnQgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIHJlYWRvbmx5IG1fZWRnZUE6IGIySm9pbnRFZGdlID0gbmV3IGIySm9pbnRFZGdlKHRoaXMpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9lZGdlQjogYjJKb2ludEVkZ2UgPSBuZXcgYjJKb2ludEVkZ2UodGhpcyk7XG4gIHB1YmxpYyBtX2JvZHlBOiBiMkJvZHk7XG4gIHB1YmxpYyBtX2JvZHlCOiBiMkJvZHk7XG5cbiAgcHVibGljIG1faW5kZXg6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIG1faXNsYW5kRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbV9jb2xsaWRlQ29ubmVjdGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIG1fdXNlckRhdGE6IGFueSA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoZGVmOiBiMklKb2ludERlZikge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChkZWYuYm9keUEgIT09IGRlZi5ib2R5Qik7XG5cbiAgICB0aGlzLm1fdHlwZSA9IGRlZi50eXBlO1xuICAgIHRoaXMubV9lZGdlQS5vdGhlciA9IGRlZi5ib2R5QjtcbiAgICB0aGlzLm1fZWRnZUIub3RoZXIgPSBkZWYuYm9keUE7XG4gICAgdGhpcy5tX2JvZHlBID0gZGVmLmJvZHlBO1xuICAgIHRoaXMubV9ib2R5QiA9IGRlZi5ib2R5QjtcblxuICAgIHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkID0gYjJNYXliZShkZWYuY29sbGlkZUNvbm5lY3RlZCwgZmFsc2UpO1xuXG4gICAgdGhpcy5tX3VzZXJEYXRhID0gYjJNYXliZShkZWYudXNlckRhdGEsIG51bGwpO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgdHlwZSBvZiB0aGUgY29uY3JldGUgam9pbnQuXG4gIHB1YmxpYyBHZXRUeXBlKCk6IGIySm9pbnRUeXBlIHtcbiAgICByZXR1cm4gdGhpcy5tX3R5cGU7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBmaXJzdCBib2R5IGF0dGFjaGVkIHRvIHRoaXMgam9pbnQuXG4gIHB1YmxpYyBHZXRCb2R5QSgpOiBiMkJvZHkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUE7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBzZWNvbmQgYm9keSBhdHRhY2hlZCB0byB0aGlzIGpvaW50LlxuICBwdWJsaWMgR2V0Qm9keUIoKTogYjJCb2R5IHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHlBIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICBwdWJsaWMgYWJzdHJhY3QgR2V0QW5jaG9yQTxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQ7XG5cbiAgLy8vIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHlCIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICBwdWJsaWMgYWJzdHJhY3QgR2V0QW5jaG9yQjxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQ7XG5cbiAgLy8vIEdldCB0aGUgcmVhY3Rpb24gZm9yY2Ugb24gYm9keUIgYXQgdGhlIGpvaW50IGFuY2hvciBpbiBOZXd0b25zLlxuICBwdWJsaWMgYWJzdHJhY3QgR2V0UmVhY3Rpb25Gb3JjZTxUIGV4dGVuZHMgWFk+KGludl9kdDogbnVtYmVyLCBvdXQ6IFQpOiBUO1xuXG4gIC8vLyBHZXQgdGhlIHJlYWN0aW9uIHRvcnF1ZSBvbiBib2R5QiBpbiBOKm0uXG4gIHB1YmxpYyBhYnN0cmFjdCBHZXRSZWFjdGlvblRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlcjtcblxuICAvLy8gR2V0IHRoZSBuZXh0IGpvaW50IHRoZSB3b3JsZCBqb2ludCBsaXN0LlxuICBwdWJsaWMgR2V0TmV4dCgpOiBiMkpvaW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9uZXh0O1xuICB9XG5cbiAgLy8vIEdldCB0aGUgdXNlciBkYXRhIHBvaW50ZXIuXG4gIHB1YmxpYyBHZXRVc2VyRGF0YSgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gIH1cblxuICAvLy8gU2V0IHRoZSB1c2VyIGRhdGEgcG9pbnRlci5cbiAgcHVibGljIFNldFVzZXJEYXRhKGRhdGE6IGFueSk6IHZvaWQge1xuICAgIHRoaXMubV91c2VyRGF0YSA9IGRhdGE7XG4gIH1cblxuICAvLy8gU2hvcnQtY3V0IGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBlaXRoZXIgYm9keSBpcyBpbmFjdGl2ZS5cbiAgcHVibGljIElzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLklzRW5hYmxlZCgpICYmIHRoaXMubV9ib2R5Qi5Jc0VuYWJsZWQoKTtcbiAgfVxuXG4gIC8vLyBHZXQgY29sbGlkZSBjb25uZWN0ZWQuXG4gIC8vLyBOb3RlOiBtb2RpZnlpbmcgdGhlIGNvbGxpZGUgY29ubmVjdCBmbGFnIHdvbid0IHdvcmsgY29ycmVjdGx5IGJlY2F1c2VcbiAgLy8vIHRoZSBmbGFnIGlzIG9ubHkgY2hlY2tlZCB3aGVuIGZpeHR1cmUgQUFCQnMgYmVnaW4gdG8gb3ZlcmxhcC5cbiAgcHVibGljIEdldENvbGxpZGVDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkO1xuICB9XG5cbiAgLy8vIER1bXAgdGhpcyBqb2ludCB0byB0aGUgbG9nIGZpbGUuXG4gIHB1YmxpYyBEdW1wKGxvZzogKGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGxvZyhcIi8vIER1bXAgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBqb2ludCB0eXBlLlxcblwiKTtcbiAgfVxuXG4gIC8vLyBTaGlmdCB0aGUgb3JpZ2luIGZvciBhbnkgcG9pbnRzIHN0b3JlZCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgcHVibGljIFNoaWZ0T3JpZ2luKG5ld09yaWdpbjogWFkpOiB2b2lkIHsgfVxuXG4gIC8vLyBEZWJ1ZyBkcmF3IHRoaXMgam9pbnRcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3AxOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19wMjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfY29sb3I6IGIyQ29sb3IgPSBuZXcgYjJDb2xvcigwLjUsIDAuOCwgMC44KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2M6IGIyQ29sb3IgPSBuZXcgYjJDb2xvcigpO1xuICBwdWJsaWMgRHJhdyhkcmF3OiBiMkRyYXcpOiB2b2lkIHtcbiAgICBjb25zdCB4ZjE6IGIyVHJhbnNmb3JtID0gdGhpcy5tX2JvZHlBLkdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IHhmMjogYjJUcmFuc2Zvcm0gPSB0aGlzLm1fYm9keUIuR2V0VHJhbnNmb3JtKCk7XG4gICAgY29uc3QgeDE6IGIyVmVjMiA9IHhmMS5wO1xuICAgIGNvbnN0IHgyOiBiMlZlYzIgPSB4ZjIucDtcbiAgICBjb25zdCBwMTogYjJWZWMyID0gdGhpcy5HZXRBbmNob3JBKGIySm9pbnQuRHJhd19zX3AxKTtcbiAgICBjb25zdCBwMjogYjJWZWMyID0gdGhpcy5HZXRBbmNob3JCKGIySm9pbnQuRHJhd19zX3AyKTtcblxuICAgIGNvbnN0IGNvbG9yOiBiMkNvbG9yID0gYjJKb2ludC5EcmF3X3NfY29sb3IuU2V0UkdCKDAuNSwgMC44LCAwLjgpO1xuXG4gICAgc3dpdGNoICh0aGlzLm1fdHlwZSkge1xuICAgICAgY2FzZSBiMkpvaW50VHlwZS5lX2Rpc3RhbmNlSm9pbnQ6XG4gICAgICAgIGRyYXcuRHJhd1NlZ21lbnQocDEsIHAyLCBjb2xvcik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGIySm9pbnRUeXBlLmVfcHVsbGV5Sm9pbnQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwdWxsZXk6IGIyUHVsbGV5Sm9pbnQgPSB0aGlzIGFzIHVua25vd24gYXMgYjJQdWxsZXlKb2ludDtcbiAgICAgICAgICBjb25zdCBzMTogYjJWZWMyID0gcHVsbGV5LkdldEdyb3VuZEFuY2hvckEoKTtcbiAgICAgICAgICBjb25zdCBzMjogYjJWZWMyID0gcHVsbGV5LkdldEdyb3VuZEFuY2hvckIoKTtcbiAgICAgICAgICBkcmF3LkRyYXdTZWdtZW50KHMxLCBwMSwgY29sb3IpO1xuICAgICAgICAgIGRyYXcuRHJhd1NlZ21lbnQoczIsIHAyLCBjb2xvcik7XG4gICAgICAgICAgZHJhdy5EcmF3U2VnbWVudChzMSwgczIsIGNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBiMkpvaW50VHlwZS5lX21vdXNlSm9pbnQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBjID0gYjJKb2ludC5EcmF3X3NfYztcbiAgICAgICAgICBjLlNldCgwLjAsIDEuMCwgMC4wKTtcbiAgICAgICAgICBkcmF3LkRyYXdQb2ludChwMSwgNC4wLCBjKTtcbiAgICAgICAgICBkcmF3LkRyYXdQb2ludChwMiwgNC4wLCBjKTtcblxuICAgICAgICAgIGMuU2V0KDAuOCwgMC44LCAwLjgpO1xuICAgICAgICAgIGRyYXcuRHJhd1NlZ21lbnQocDEsIHAyLCBjKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZHJhdy5EcmF3U2VnbWVudCh4MSwgcDEsIGNvbG9yKTtcbiAgICAgICAgZHJhdy5EcmF3U2VnbWVudChwMSwgcDIsIGNvbG9yKTtcbiAgICAgICAgZHJhdy5EcmF3U2VnbWVudCh4MiwgcDIsIGNvbG9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgcHVibGljIGFic3RyYWN0IEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQ7XG5cbiAgcHVibGljIGFic3RyYWN0IFNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkO1xuXG4gIC8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBwb3NpdGlvbiBlcnJvcnMgYXJlIHdpdGhpbiB0b2xlcmFuY2UuXG4gIHB1YmxpYyBhYnN0cmFjdCBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogYm9vbGVhbjtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWVBO0FBYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWxCQTtBQXlCQTtBQWFBO0FBWkE7QUFVQTtBQUNBO0FBRUE7QUFDQTtBQWJBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFKQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBckJBO0FBMENBO0FBZ0JBO0FBZEE7QUFHQTtBQVNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFuQkE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQW1CQTtBQWdCQTtBQWZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFvREE7QUFBQTtBQXBKQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_motor_joint.ts":
/*!**********************************************!*\
  !*** ./src/box2d/dynamics/b2_motor_joint.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2MotorJoint = exports.b2MotorJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2MotorJointDef = (function (_super) {\n    __extends(b2MotorJointDef, _super);\n    function b2MotorJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_motorJoint) || this;\n        _this.linearOffset = new b2_math_1.b2Vec2(0, 0);\n        _this.angularOffset = 0;\n        _this.maxForce = 1;\n        _this.maxTorque = 1;\n        _this.correctionFactor = 0.3;\n        return _this;\n    }\n    b2MotorJointDef.prototype.Initialize = function (bA, bB) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.bodyA.GetLocalPoint(this.bodyB.GetPosition(), this.linearOffset);\n        var angleA = this.bodyA.GetAngle();\n        var angleB = this.bodyB.GetAngle();\n        this.angularOffset = angleB - angleA;\n    };\n    return b2MotorJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2MotorJointDef = b2MotorJointDef;\nvar b2MotorJoint = (function (_super) {\n    __extends(b2MotorJoint, _super);\n    function b2MotorJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_linearOffset = new b2_math_1.b2Vec2();\n        _this.m_angularOffset = 0;\n        _this.m_linearImpulse = new b2_math_1.b2Vec2();\n        _this.m_angularImpulse = 0;\n        _this.m_maxForce = 0;\n        _this.m_maxTorque = 0;\n        _this.m_correctionFactor = 0.3;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_linearError = new b2_math_1.b2Vec2();\n        _this.m_angularError = 0;\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_linearMass = new b2_math_1.b2Mat22();\n        _this.m_angularMass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_K = new b2_math_1.b2Mat22();\n        _this.m_linearOffset.Copy(b2_settings_1.b2Maybe(def.linearOffset, b2_math_1.b2Vec2.ZERO));\n        _this.m_linearImpulse.SetZero();\n        _this.m_maxForce = b2_settings_1.b2Maybe(def.maxForce, 0);\n        _this.m_maxTorque = b2_settings_1.b2Maybe(def.maxTorque, 0);\n        _this.m_correctionFactor = b2_settings_1.b2Maybe(def.correctionFactor, 0.3);\n        return _this;\n    }\n    b2MotorJoint.prototype.GetAnchorA = function (out) {\n        var pos = this.m_bodyA.GetPosition();\n        out.x = pos.x;\n        out.y = pos.y;\n        return out;\n    };\n    b2MotorJoint.prototype.GetAnchorB = function (out) {\n        var pos = this.m_bodyB.GetPosition();\n        out.x = pos.x;\n        out.y = pos.y;\n        return out;\n    };\n    b2MotorJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        return b2_math_1.b2Vec2.MulSV(inv_dt, this.m_linearImpulse, out);\n    };\n    b2MotorJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * this.m_angularImpulse;\n    };\n    b2MotorJoint.prototype.SetLinearOffset = function (linearOffset) {\n        if (!b2_math_1.b2Vec2.IsEqualToV(linearOffset, this.m_linearOffset)) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_linearOffset.Copy(linearOffset);\n        }\n    };\n    b2MotorJoint.prototype.GetLinearOffset = function () {\n        return this.m_linearOffset;\n    };\n    b2MotorJoint.prototype.SetAngularOffset = function (angularOffset) {\n        if (angularOffset !== this.m_angularOffset) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_angularOffset = angularOffset;\n        }\n    };\n    b2MotorJoint.prototype.GetAngularOffset = function () {\n        return this.m_angularOffset;\n    };\n    b2MotorJoint.prototype.SetMaxForce = function (force) {\n        this.m_maxForce = force;\n    };\n    b2MotorJoint.prototype.GetMaxForce = function () {\n        return this.m_maxForce;\n    };\n    b2MotorJoint.prototype.SetMaxTorque = function (torque) {\n        this.m_maxTorque = torque;\n    };\n    b2MotorJoint.prototype.GetMaxTorque = function () {\n        return this.m_maxTorque;\n    };\n    b2MotorJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        var rA = b2_math_1.b2Rot.MulRV(qA, b2_math_1.b2Vec2.SubVV(this.m_linearOffset, this.m_localCenterA, b2_math_1.b2Vec2.s_t0), this.m_rA);\n        var rB = b2_math_1.b2Rot.MulRV(qB, b2_math_1.b2Vec2.NegV(this.m_localCenterB, b2_math_1.b2Vec2.s_t0), this.m_rB);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var K = this.m_K;\n        K.ex.x = mA + mB + iA * rA.y * rA.y + iB * rB.y * rB.y;\n        K.ex.y = -iA * rA.x * rA.y - iB * rB.x * rB.y;\n        K.ey.x = K.ex.y;\n        K.ey.y = mA + mB + iA * rA.x * rA.x + iB * rB.x * rB.x;\n        K.GetInverse(this.m_linearMass);\n        this.m_angularMass = iA + iB;\n        if (this.m_angularMass > 0) {\n            this.m_angularMass = 1 / this.m_angularMass;\n        }\n        b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(cB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(cA, rA, b2_math_1.b2Vec2.s_t1), this.m_linearError);\n        this.m_angularError = aB - aA - this.m_angularOffset;\n        if (data.step.warmStarting) {\n            this.m_linearImpulse.SelfMul(data.step.dtRatio);\n            this.m_angularImpulse *= data.step.dtRatio;\n            var P = this.m_linearImpulse;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * (b2_math_1.b2Vec2.CrossVV(rA, P) + this.m_angularImpulse);\n            vB.SelfMulAdd(mB, P);\n            wB += iB * (b2_math_1.b2Vec2.CrossVV(rB, P) + this.m_angularImpulse);\n        }\n        else {\n            this.m_linearImpulse.SetZero();\n            this.m_angularImpulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2MotorJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var h = data.step.dt;\n        var inv_h = data.step.inv_dt;\n        {\n            var Cdot = wB - wA + inv_h * this.m_correctionFactor * this.m_angularError;\n            var impulse = -this.m_angularMass * Cdot;\n            var oldImpulse = this.m_angularImpulse;\n            var maxImpulse = h * this.m_maxTorque;\n            this.m_angularImpulse = b2_math_1.b2Clamp(this.m_angularImpulse + impulse, -maxImpulse, maxImpulse);\n            impulse = this.m_angularImpulse - oldImpulse;\n            wA -= iA * impulse;\n            wB += iB * impulse;\n        }\n        {\n            var rA = this.m_rA;\n            var rB = this.m_rB;\n            var Cdot_v2 = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(vB, b2_math_1.b2Vec2.CrossSV(wB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(vA, b2_math_1.b2Vec2.CrossSV(wA, rA, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t2), b2_math_1.b2Vec2.MulSV(inv_h * this.m_correctionFactor, this.m_linearError, b2_math_1.b2Vec2.s_t3), b2MotorJoint.SolveVelocityConstraints_s_Cdot_v2);\n            var impulse_v2 = b2_math_1.b2Mat22.MulMV(this.m_linearMass, Cdot_v2, b2MotorJoint.SolveVelocityConstraints_s_impulse_v2).SelfNeg();\n            var oldImpulse_v2 = b2MotorJoint.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);\n            this.m_linearImpulse.SelfAdd(impulse_v2);\n            var maxImpulse = h * this.m_maxForce;\n            if (this.m_linearImpulse.LengthSquared() > maxImpulse * maxImpulse) {\n                this.m_linearImpulse.Normalize();\n                this.m_linearImpulse.SelfMul(maxImpulse);\n            }\n            b2_math_1.b2Vec2.SubVV(this.m_linearImpulse, oldImpulse_v2, impulse_v2);\n            vA.SelfMulSub(mA, impulse_v2);\n            wA -= iA * b2_math_1.b2Vec2.CrossVV(rA, impulse_v2);\n            vB.SelfMulAdd(mB, impulse_v2);\n            wB += iB * b2_math_1.b2Vec2.CrossVV(rB, impulse_v2);\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2MotorJoint.prototype.SolvePositionConstraints = function (data) {\n        return true;\n    };\n    b2MotorJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2MotorJointDef = new b2MotorJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.linearOffset.Set(%.15f, %.15f);\\n\", this.m_linearOffset.x, this.m_linearOffset.y);\n        log(\"  jd.angularOffset = %.15f;\\n\", this.m_angularOffset);\n        log(\"  jd.maxForce = %.15f;\\n\", this.m_maxForce);\n        log(\"  jd.maxTorque = %.15f;\\n\", this.m_maxTorque);\n        log(\"  jd.correctionFactor = %.15f;\\n\", this.m_correctionFactor);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2MotorJoint.SolveVelocityConstraints_s_Cdot_v2 = new b2_math_1.b2Vec2();\n    b2MotorJoint.SolveVelocityConstraints_s_impulse_v2 = new b2_math_1.b2Vec2();\n    b2MotorJoint.SolveVelocityConstraints_s_oldImpulse_v2 = new b2_math_1.b2Vec2();\n    return b2MotorJoint;\n}(b2_joint_1.b2Joint));\nexports.b2MotorJoint = b2MotorJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfbW90b3Jfam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfbW90b3Jfam9pbnQudHM/MTM5YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMiBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuLy8gREVCVUc6IGltcG9ydCB7IGIySXNWYWxpZCB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJNYXliZSB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyQ2xhbXAsIGIyVmVjMiwgYjJNYXQyMiwgYjJSb3QsIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5pbXBvcnQgeyBiMkpvaW50LCBiMkpvaW50RGVmLCBiMkpvaW50VHlwZSwgYjJJSm9pbnREZWYgfSBmcm9tIFwiLi9iMl9qb2ludFwiO1xuaW1wb3J0IHsgYjJTb2x2ZXJEYXRhIH0gZnJvbSBcIi4vYjJfdGltZV9zdGVwXCI7XG5cbi8vIFBvaW50LXRvLXBvaW50IGNvbnN0cmFpbnRcbi8vIENkb3QgPSB2MiAtIHYxXG4vLyAgICAgID0gdjIgKyBjcm9zcyh3MiwgcjIpIC0gdjEgLSBjcm9zcyh3MSwgcjEpXG4vLyBKID0gWy1JIC1yMV9za2V3IEkgcjJfc2tldyBdXG4vLyBJZGVudGl0eSB1c2VkOlxuLy8gdyBrICUgKHJ4IGkgKyByeSBqKSA9IHcgKiAoLXJ5IGkgKyByeCBqKVxuLy9cbi8vIHIxID0gb2Zmc2V0IC0gYzFcbi8vIHIyID0gLWMyXG5cbi8vIEFuZ2xlIGNvbnN0cmFpbnRcbi8vIENkb3QgPSB3MiAtIHcxXG4vLyBKID0gWzAgMCAtMSAwIDAgMV1cbi8vIEsgPSBpbnZJMSArIGludkkyXG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJTW90b3JKb2ludERlZiBleHRlbmRzIGIySUpvaW50RGVmIHtcbiAgbGluZWFyT2Zmc2V0PzogWFk7XG5cbiAgYW5ndWxhck9mZnNldD86IG51bWJlcjtcblxuICBtYXhGb3JjZT86IG51bWJlcjtcblxuICBtYXhUb3JxdWU/OiBudW1iZXI7XG5cbiAgY29ycmVjdGlvbkZhY3Rvcj86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIGIyTW90b3JKb2ludERlZiBleHRlbmRzIGIySm9pbnREZWYgaW1wbGVtZW50cyBiMklNb3RvckpvaW50RGVmIHtcbiAgcHVibGljIHJlYWRvbmx5IGxpbmVhck9mZnNldDogYjJWZWMyID0gbmV3IGIyVmVjMigwLCAwKTtcblxuICBwdWJsaWMgYW5ndWxhck9mZnNldDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbWF4Rm9yY2U6IG51bWJlciA9IDE7XG5cbiAgcHVibGljIG1heFRvcnF1ZTogbnVtYmVyID0gMTtcblxuICBwdWJsaWMgY29ycmVjdGlvbkZhY3RvcjogbnVtYmVyID0gMC4zO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKGIySm9pbnRUeXBlLmVfbW90b3JKb2ludCk7XG4gIH1cblxuICBwdWJsaWMgSW5pdGlhbGl6ZShiQTogYjJCb2R5LCBiQjogYjJCb2R5KTogdm9pZCB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICAvLyBiMlZlYzIgeEIgPSBib2R5Qi0+R2V0UG9zaXRpb24oKTtcbiAgICAvLyBsaW5lYXJPZmZzZXQgPSBib2R5QS0+R2V0TG9jYWxQb2ludCh4Qik7XG4gICAgdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KHRoaXMuYm9keUIuR2V0UG9zaXRpb24oKSwgdGhpcy5saW5lYXJPZmZzZXQpO1xuXG4gICAgY29uc3QgYW5nbGVBOiBudW1iZXIgPSB0aGlzLmJvZHlBLkdldEFuZ2xlKCk7XG4gICAgY29uc3QgYW5nbGVCOiBudW1iZXIgPSB0aGlzLmJvZHlCLkdldEFuZ2xlKCk7XG4gICAgdGhpcy5hbmd1bGFyT2Zmc2V0ID0gYW5nbGVCIC0gYW5nbGVBO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMk1vdG9ySm9pbnQgZXh0ZW5kcyBiMkpvaW50IHtcbiAgLy8gU29sdmVyIHNoYXJlZFxuICBwdWJsaWMgcmVhZG9ubHkgbV9saW5lYXJPZmZzZXQ6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fYW5ndWxhck9mZnNldDogbnVtYmVyID0gMDtcbiAgcHVibGljIHJlYWRvbmx5IG1fbGluZWFySW1wdWxzZTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgbV9hbmd1bGFySW1wdWxzZTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbWF4Rm9yY2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21heFRvcnF1ZTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fY29ycmVjdGlvbkZhY3RvcjogbnVtYmVyID0gMC4zO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xpbmVhckVycm9yOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2FuZ3VsYXJFcnJvcjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52TWFzc0E6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludk1hc3NCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZJQTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX2xpbmVhck1hc3M6IGIyTWF0MjIgPSBuZXcgYjJNYXQyMigpO1xuICBwdWJsaWMgbV9hbmd1bGFyTWFzczogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9xQTogYjJSb3QgPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fcUI6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX0s6IGIyTWF0MjIgPSBuZXcgYjJNYXQyMigpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogYjJJTW90b3JKb2ludERlZikge1xuICAgIHN1cGVyKGRlZik7XG5cbiAgICB0aGlzLm1fbGluZWFyT2Zmc2V0LkNvcHkoYjJNYXliZShkZWYubGluZWFyT2Zmc2V0LCBiMlZlYzIuWkVSTykpO1xuICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLlNldFplcm8oKTtcbiAgICB0aGlzLm1fbWF4Rm9yY2UgPSBiMk1heWJlKGRlZi5tYXhGb3JjZSwgMCk7XG4gICAgdGhpcy5tX21heFRvcnF1ZSA9IGIyTWF5YmUoZGVmLm1heFRvcnF1ZSwgMCk7XG4gICAgdGhpcy5tX2NvcnJlY3Rpb25GYWN0b3IgPSBiMk1heWJlKGRlZi5jb3JyZWN0aW9uRmFjdG9yLCAwLjMpO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckE8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICBjb25zdCBwb3M6IFJlYWRvbmx5PGIyVmVjMj4gPSB0aGlzLm1fYm9keUEuR2V0UG9zaXRpb24oKTtcbiAgICBvdXQueCA9IHBvcy54O1xuICAgIG91dC55ID0gcG9zLnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBwdWJsaWMgR2V0QW5jaG9yQjxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIGNvbnN0IHBvczogUmVhZG9ubHk8YjJWZWMyPiA9IHRoaXMubV9ib2R5Qi5HZXRQb3NpdGlvbigpO1xuICAgIG91dC54ID0gcG9zLng7XG4gICAgb3V0LnkgPSBwb3MueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uRm9yY2U8VCBleHRlbmRzIFhZPihpbnZfZHQ6IG51bWJlciwgb3V0OiBUKTogVCB7XG4gICAgLy8gcmV0dXJuIGludl9kdCAqIG1fbGluZWFySW1wdWxzZTtcbiAgICByZXR1cm4gYjJWZWMyLk11bFNWKGludl9kdCwgdGhpcy5tX2xpbmVhckltcHVsc2UsIG91dCk7XG4gIH1cblxuICBwdWJsaWMgR2V0UmVhY3Rpb25Ub3JxdWUoaW52X2R0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1fYW5ndWxhckltcHVsc2U7XG4gIH1cblxuICBwdWJsaWMgU2V0TGluZWFyT2Zmc2V0KGxpbmVhck9mZnNldDogYjJWZWMyKTogdm9pZCB7XG4gICAgaWYgKCFiMlZlYzIuSXNFcXVhbFRvVihsaW5lYXJPZmZzZXQsIHRoaXMubV9saW5lYXJPZmZzZXQpKSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fbGluZWFyT2Zmc2V0LkNvcHkobGluZWFyT2Zmc2V0KTtcbiAgICB9XG4gIH1cbiAgcHVibGljIEdldExpbmVhck9mZnNldCgpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xpbmVhck9mZnNldDtcbiAgfVxuXG4gIHB1YmxpYyBTZXRBbmd1bGFyT2Zmc2V0KGFuZ3VsYXJPZmZzZXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChhbmd1bGFyT2Zmc2V0ICE9PSB0aGlzLm1fYW5ndWxhck9mZnNldCkge1xuICAgICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJPZmZzZXQgPSBhbmd1bGFyT2Zmc2V0O1xuICAgIH1cbiAgfVxuICBwdWJsaWMgR2V0QW5ndWxhck9mZnNldCgpIHtcbiAgICByZXR1cm4gdGhpcy5tX2FuZ3VsYXJPZmZzZXQ7XG4gIH1cblxuICBwdWJsaWMgU2V0TWF4Rm9yY2UoZm9yY2U6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChiMklzVmFsaWQoZm9yY2UpICYmIGZvcmNlID49IDApO1xuICAgIHRoaXMubV9tYXhGb3JjZSA9IGZvcmNlO1xuICB9XG5cbiAgcHVibGljIEdldE1heEZvcmNlKCkge1xuICAgIHJldHVybiB0aGlzLm1fbWF4Rm9yY2U7XG4gIH1cblxuICBwdWJsaWMgU2V0TWF4VG9ycXVlKHRvcnF1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGIySXNWYWxpZCh0b3JxdWUpICYmIHRvcnF1ZSA+PSAwKTtcbiAgICB0aGlzLm1fbWF4VG9ycXVlID0gdG9ycXVlO1xuICB9XG5cbiAgcHVibGljIEdldE1heFRvcnF1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5tX21heFRvcnF1ZTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLm1faW5kZXhBID0gdGhpcy5tX2JvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2luZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEuQ29weSh0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQi5Db3B5KHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludklBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuXG4gICAgY29uc3QgY0E6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmM7XG4gICAgY29uc3QgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG5cbiAgICBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBjb25zdCBhQjogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYTtcbiAgICBjb25zdCB2QjogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnY7XG4gICAgbGV0IHdCOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udztcblxuICAgIGNvbnN0IHFBOiBiMlJvdCA9IHRoaXMubV9xQS5TZXRBbmdsZShhQSksIHFCOiBiMlJvdCA9IHRoaXMubV9xQi5TZXRBbmdsZShhQik7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBlZmZlY3RpdmUgbWFzcyBtYXRyaXguXG4gICAgLy8gdGhpcy5tX3JBID0gYjJNdWwocUEsIG1fbGluZWFyT2Zmc2V0IC0gdGhpcy5tX2xvY2FsQ2VudGVyQSk7XG4gICAgY29uc3QgckE6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFBLCBiMlZlYzIuU3ViVlYodGhpcy5tX2xpbmVhck9mZnNldCwgdGhpcy5tX2xvY2FsQ2VudGVyQSwgYjJWZWMyLnNfdDApLCB0aGlzLm1fckEpO1xuICAgIC8vIHRoaXMubV9yQiA9IGIyTXVsKHFCLCAtdGhpcy5tX2xvY2FsQ2VudGVyQik7XG4gICAgY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFCLCBiMlZlYzIuTmVnVih0aGlzLm1fbG9jYWxDZW50ZXJCLCBiMlZlYzIuc190MCksIHRoaXMubV9yQik7XG5cbiAgICAvLyBKID0gWy1JIC1yMV9za2V3IEkgcjJfc2tld11cbiAgICAvLyByX3NrZXcgPSBbLXJ5OyByeF1cblxuICAgIC8vIE1hdGxhYlxuICAgIC8vIEsgPSBbIG1BK3IxeV4yKmlBK21CK3IyeV4yKmlCLCAgLXIxeSppQSpyMXgtcjJ5KmlCKnIyeCwgICAgICAgICAgLXIxeSppQS1yMnkqaUJdXG4gICAgLy8gICAgIFsgIC1yMXkqaUEqcjF4LXIyeSppQipyMngsIG1BK3IxeF4yKmlBK21CK3IyeF4yKmlCLCAgICAgICAgICAgcjF4KmlBK3IyeCppQl1cbiAgICAvLyAgICAgWyAgICAgICAgICAtcjF5KmlBLXIyeSppQiwgICAgICAgICAgIHIxeCppQStyMngqaUIsICAgICAgICAgICAgICAgICAgIGlBK2lCXVxuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgLy8gVXBwZXIgMiBieSAyIG9mIEsgZm9yIHBvaW50IHRvIHBvaW50XG4gICAgY29uc3QgSzogYjJNYXQyMiA9IHRoaXMubV9LO1xuICAgIEsuZXgueCA9IG1BICsgbUIgKyBpQSAqIHJBLnkgKiByQS55ICsgaUIgKiByQi55ICogckIueTtcbiAgICBLLmV4LnkgPSAtaUEgKiByQS54ICogckEueSAtIGlCICogckIueCAqIHJCLnk7XG4gICAgSy5leS54ID0gSy5leC55O1xuICAgIEsuZXkueSA9IG1BICsgbUIgKyBpQSAqIHJBLnggKiByQS54ICsgaUIgKiByQi54ICogckIueDtcblxuICAgIC8vIHRoaXMubV9saW5lYXJNYXNzID0gSy5HZXRJbnZlcnNlKCk7XG4gICAgSy5HZXRJbnZlcnNlKHRoaXMubV9saW5lYXJNYXNzKTtcblxuICAgIHRoaXMubV9hbmd1bGFyTWFzcyA9IGlBICsgaUI7XG4gICAgaWYgKHRoaXMubV9hbmd1bGFyTWFzcyA+IDApIHtcbiAgICAgIHRoaXMubV9hbmd1bGFyTWFzcyA9IDEgLyB0aGlzLm1fYW5ndWxhck1hc3M7XG4gICAgfVxuXG4gICAgLy8gdGhpcy5tX2xpbmVhckVycm9yID0gY0IgKyByQiAtIGNBIC0gckE7XG4gICAgYjJWZWMyLlN1YlZWKFxuICAgICAgYjJWZWMyLkFkZFZWKGNCLCByQiwgYjJWZWMyLnNfdDApLFxuICAgICAgYjJWZWMyLkFkZFZWKGNBLCByQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgdGhpcy5tX2xpbmVhckVycm9yKTtcbiAgICB0aGlzLm1fYW5ndWxhckVycm9yID0gYUIgLSBhQSAtIHRoaXMubV9hbmd1bGFyT2Zmc2V0O1xuXG4gICAgaWYgKGRhdGEuc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIC8vIFNjYWxlIGltcHVsc2VzIHRvIHN1cHBvcnQgYSB2YXJpYWJsZSB0aW1lIHN0ZXAuXG4gICAgICAvLyB0aGlzLm1fbGluZWFySW1wdWxzZSAqPSBkYXRhLnN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLlNlbGZNdWwoZGF0YS5zdGVwLmR0UmF0aW8pO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuXG4gICAgICAvLyBiMlZlYzIgUCh0aGlzLm1fbGluZWFySW1wdWxzZS54LCB0aGlzLm1fbGluZWFySW1wdWxzZS55KTtcbiAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IHRoaXMubV9saW5lYXJJbXB1bHNlO1xuICAgICAgLy8gdkEgLT0gbUEgKiBQO1xuICAgICAgdkEuU2VsZk11bFN1YihtQSwgUCk7XG4gICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVihyQSwgUCkgKyB0aGlzLm1fYW5ndWxhckltcHVsc2UpO1xuICAgICAgLy8gdkIgKz0gbUIgKiBQO1xuICAgICAgdkIuU2VsZk11bEFkZChtQiwgUCk7XG4gICAgICB3QiArPSBpQiAqIChiMlZlYzIuQ3Jvc3NWVihyQiwgUCkgKyB0aGlzLm1fYW5ndWxhckltcHVsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgPSAwO1xuICAgIH1cblxuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52ID0gdkE7IC8vIHZBIGlzIGEgcmVmZXJlbmNlXG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLncgPSB3QTtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCOyAvLyB2QiBpcyBhIHJlZmVyZW5jZVxuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90X3YyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlX3YyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19vbGRJbXB1bHNlX3YyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IHZBOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udjtcbiAgICBsZXQgd0E6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53O1xuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcbiAgICBsZXQgd0I6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53O1xuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgY29uc3QgaDogbnVtYmVyID0gZGF0YS5zdGVwLmR0O1xuICAgIGNvbnN0IGludl9oOiBudW1iZXIgPSBkYXRhLnN0ZXAuaW52X2R0O1xuXG4gICAgLy8gU29sdmUgYW5ndWxhciBmcmljdGlvblxuICAgIHtcbiAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IHdCIC0gd0EgKyBpbnZfaCAqIHRoaXMubV9jb3JyZWN0aW9uRmFjdG9yICogdGhpcy5tX2FuZ3VsYXJFcnJvcjtcbiAgICAgIGxldCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX2FuZ3VsYXJNYXNzICogQ2RvdDtcblxuICAgICAgY29uc3Qgb2xkSW1wdWxzZTogbnVtYmVyID0gdGhpcy5tX2FuZ3VsYXJJbXB1bHNlO1xuICAgICAgY29uc3QgbWF4SW1wdWxzZTogbnVtYmVyID0gaCAqIHRoaXMubV9tYXhUb3JxdWU7XG4gICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgPSBiMkNsYW1wKHRoaXMubV9hbmd1bGFySW1wdWxzZSArIGltcHVsc2UsIC1tYXhJbXB1bHNlLCBtYXhJbXB1bHNlKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fYW5ndWxhckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuXG4gICAgICB3QSAtPSBpQSAqIGltcHVsc2U7XG4gICAgICB3QiArPSBpQiAqIGltcHVsc2U7XG4gICAgfVxuXG4gICAgLy8gU29sdmUgbGluZWFyIGZyaWN0aW9uXG4gICAge1xuICAgICAgY29uc3QgckEgPSB0aGlzLm1fckE7XG4gICAgICBjb25zdCByQiA9IHRoaXMubV9yQjtcblxuICAgICAgLy8gYjJWZWMyIENkb3QgPSB2QiArIGIyVmVjMi5Dcm9zc1NWKHdCLCByQikgLSB2QSAtIGIyVmVjMi5Dcm9zc1NWKHdBLCByQSkgKyBpbnZfaCAqIHRoaXMubV9jb3JyZWN0aW9uRmFjdG9yICogdGhpcy5tX2xpbmVhckVycm9yO1xuICAgICAgY29uc3QgQ2RvdF92MiA9XG4gICAgICAgIGIyVmVjMi5BZGRWVihcbiAgICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgICBiMlZlYzIuQWRkVlYodkIsIGIyVmVjMi5Dcm9zc1NWKHdCLCByQiwgYjJWZWMyLnNfdDApLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgICBiMlZlYzIuQWRkVlYodkEsIGIyVmVjMi5Dcm9zc1NWKHdBLCByQSwgYjJWZWMyLnNfdDEpLCBiMlZlYzIuc190MSksIGIyVmVjMi5zX3QyKSxcbiAgICAgICAgICBiMlZlYzIuTXVsU1YoaW52X2ggKiB0aGlzLm1fY29ycmVjdGlvbkZhY3RvciwgdGhpcy5tX2xpbmVhckVycm9yLCBiMlZlYzIuc190MyksXG4gICAgICAgICAgYjJNb3RvckpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX0Nkb3RfdjIpO1xuXG4gICAgICAvLyBiMlZlYzIgaW1wdWxzZSA9IC1iMk11bCh0aGlzLm1fbGluZWFyTWFzcywgQ2RvdCk7XG4gICAgICBjb25zdCBpbXB1bHNlX3YyOiBiMlZlYzIgPSBiMk1hdDIyLk11bE1WKHRoaXMubV9saW5lYXJNYXNzLCBDZG90X3YyLCBiMk1vdG9ySm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfaW1wdWxzZV92MikuU2VsZk5lZygpO1xuICAgICAgLy8gYjJWZWMyIG9sZEltcHVsc2UgPSB0aGlzLm1fbGluZWFySW1wdWxzZTtcbiAgICAgIGNvbnN0IG9sZEltcHVsc2VfdjIgPSBiMk1vdG9ySm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3Nfb2xkSW1wdWxzZV92Mi5Db3B5KHRoaXMubV9saW5lYXJJbXB1bHNlKTtcbiAgICAgIC8vIHRoaXMubV9saW5lYXJJbXB1bHNlICs9IGltcHVsc2U7XG4gICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5TZWxmQWRkKGltcHVsc2VfdjIpO1xuXG4gICAgICBjb25zdCBtYXhJbXB1bHNlOiBudW1iZXIgPSBoICogdGhpcy5tX21heEZvcmNlO1xuXG4gICAgICBpZiAodGhpcy5tX2xpbmVhckltcHVsc2UuTGVuZ3RoU3F1YXJlZCgpID4gbWF4SW1wdWxzZSAqIG1heEltcHVsc2UpIHtcbiAgICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuTm9ybWFsaXplKCk7XG4gICAgICAgIC8vIHRoaXMubV9saW5lYXJJbXB1bHNlICo9IG1heEltcHVsc2U7XG4gICAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLlNlbGZNdWwobWF4SW1wdWxzZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGltcHVsc2UgPSB0aGlzLm1fbGluZWFySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xpbmVhckltcHVsc2UsIG9sZEltcHVsc2VfdjIsIGltcHVsc2VfdjIpO1xuXG4gICAgICAvLyB2QSAtPSBtQSAqIGltcHVsc2U7XG4gICAgICB2QS5TZWxmTXVsU3ViKG1BLCBpbXB1bHNlX3YyKTtcbiAgICAgIC8vIHdBIC09IGlBICogYjJWZWMyLkNyb3NzVlYockEsIGltcHVsc2UpO1xuICAgICAgd0EgLT0gaUEgKiBiMlZlYzIuQ3Jvc3NWVihyQSwgaW1wdWxzZV92Mik7XG5cbiAgICAgIC8vIHZCICs9IG1CICogaW1wdWxzZTtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIGltcHVsc2VfdjIpO1xuICAgICAgLy8gd0IgKz0gaUIgKiBiMlZlYzIuQ3Jvc3NWVihyQiwgaW1wdWxzZSk7XG4gICAgICB3QiArPSBpQiAqIGIyVmVjMi5Dcm9zc1ZWKHJCLCBpbXB1bHNlX3YyKTtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBOyAvLyB2QSBpcyBhIHJlZmVyZW5jZVxuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjsgLy8gdkIgaXMgYSByZWZlcmVuY2VcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHVibGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBEdW1wKGxvZzogKGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IGluZGV4QSA9IHRoaXMubV9ib2R5QS5tX2lzbGFuZEluZGV4O1xuICAgIGNvbnN0IGluZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuXG4gICAgbG9nKFwiICBjb25zdCBqZDogYjJNb3RvckpvaW50RGVmID0gbmV3IGIyTW90b3JKb2ludERlZigpO1xcblwiKTtcblxuICAgIGxvZyhcIiAgamQuYm9keUEgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEEpO1xuICAgIGxvZyhcIiAgamQuYm9keUIgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEIpO1xuICAgIGxvZyhcIiAgamQuY29sbGlkZUNvbm5lY3RlZCA9ICVzO1xcblwiLCAodGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcblxuICAgIGxvZyhcIiAgamQubGluZWFyT2Zmc2V0LlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1fbGluZWFyT2Zmc2V0LngsIHRoaXMubV9saW5lYXJPZmZzZXQueSk7XG4gICAgbG9nKFwiICBqZC5hbmd1bGFyT2Zmc2V0ID0gJS4xNWY7XFxuXCIsIHRoaXMubV9hbmd1bGFyT2Zmc2V0KTtcbiAgICBsb2coXCIgIGpkLm1heEZvcmNlID0gJS4xNWY7XFxuXCIsIHRoaXMubV9tYXhGb3JjZSk7XG4gICAgbG9nKFwiICBqZC5tYXhUb3JxdWUgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX21heFRvcnF1ZSk7XG4gICAgbG9nKFwiICBqZC5jb3JyZWN0aW9uRmFjdG9yID0gJS4xNWY7XFxuXCIsIHRoaXMubV9jb3JyZWN0aW9uRmFjdG9yKTtcbiAgICBsb2coXCIgIGpvaW50c1slZF0gPSB0aGlzLm1fd29ybGQuQ3JlYXRlSm9pbnQoamQpO1xcblwiLCB0aGlzLm1faW5kZXgpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvQkE7QUFDQTtBQUVBO0FBOEJBO0FBQUE7QUFXQTtBQUFBO0FBVkE7QUFFQTtBQUVBO0FBRUE7QUFFQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBMUJBO0FBNEJBO0FBQUE7QUE4QkE7QUFBQTtBQTVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFVQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBU0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsR0E7QUFDQTtBQUNBO0FBaUdBO0FBQUE7QUEvUkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_motor_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_mouse_joint.ts":
/*!**********************************************!*\
  !*** ./src/box2d/dynamics/b2_mouse_joint.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2MouseJoint = exports.b2MouseJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2MouseJointDef = (function (_super) {\n    __extends(b2MouseJointDef, _super);\n    function b2MouseJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_mouseJoint) || this;\n        _this.target = new b2_math_1.b2Vec2();\n        _this.maxForce = 0;\n        _this.stiffness = 5;\n        _this.damping = 0.7;\n        return _this;\n    }\n    return b2MouseJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2MouseJointDef = b2MouseJointDef;\nvar b2MouseJoint = (function (_super) {\n    __extends(b2MouseJoint, _super);\n    function b2MouseJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_targetA = new b2_math_1.b2Vec2();\n        _this.m_stiffness = 0;\n        _this.m_damping = 0;\n        _this.m_beta = 0;\n        _this.m_impulse = new b2_math_1.b2Vec2();\n        _this.m_maxForce = 0;\n        _this.m_gamma = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassB = 0;\n        _this.m_invIB = 0;\n        _this.m_mass = new b2_math_1.b2Mat22();\n        _this.m_C = new b2_math_1.b2Vec2();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_K = new b2_math_1.b2Mat22();\n        _this.m_targetA.Copy(b2_settings_1.b2Maybe(def.target, b2_math_1.b2Vec2.ZERO));\n        b2_math_1.b2Transform.MulTXV(_this.m_bodyB.GetTransform(), _this.m_targetA, _this.m_localAnchorB);\n        _this.m_maxForce = b2_settings_1.b2Maybe(def.maxForce, 0);\n        _this.m_impulse.SetZero();\n        _this.m_stiffness = b2_settings_1.b2Maybe(def.stiffness, 0);\n        _this.m_damping = b2_settings_1.b2Maybe(def.damping, 0);\n        _this.m_beta = 0;\n        _this.m_gamma = 0;\n        return _this;\n    }\n    b2MouseJoint.prototype.SetTarget = function (target) {\n        if (!this.m_bodyB.IsAwake()) {\n            this.m_bodyB.SetAwake(true);\n        }\n        this.m_targetA.Copy(target);\n    };\n    b2MouseJoint.prototype.GetTarget = function () {\n        return this.m_targetA;\n    };\n    b2MouseJoint.prototype.SetMaxForce = function (maxForce) {\n        this.m_maxForce = maxForce;\n    };\n    b2MouseJoint.prototype.GetMaxForce = function () {\n        return this.m_maxForce;\n    };\n    b2MouseJoint.prototype.SetStiffness = function (stiffness) {\n        this.m_stiffness = stiffness;\n    };\n    b2MouseJoint.prototype.GetStiffness = function () {\n        return this.m_stiffness;\n    };\n    b2MouseJoint.prototype.SetDamping = function (damping) {\n        this.m_damping = damping;\n    };\n    b2MouseJoint.prototype.GetDamping = function () {\n        return this.m_damping;\n    };\n    b2MouseJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qB = this.m_qB.SetAngle(aB);\n        var mass = this.m_bodyB.GetMass();\n        var omega = 2 * b2_settings_1.b2_pi * this.m_stiffness;\n        var d = 2 * mass * this.m_damping * omega;\n        var k = mass * (omega * omega);\n        var h = data.step.dt;\n        this.m_gamma = h * (d + h * k);\n        if (this.m_gamma !== 0) {\n            this.m_gamma = 1 / this.m_gamma;\n        }\n        this.m_beta = h * k * this.m_gamma;\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var K = this.m_K;\n        K.ex.x = this.m_invMassB + this.m_invIB * this.m_rB.y * this.m_rB.y + this.m_gamma;\n        K.ex.y = -this.m_invIB * this.m_rB.x * this.m_rB.y;\n        K.ey.x = K.ex.y;\n        K.ey.y = this.m_invMassB + this.m_invIB * this.m_rB.x * this.m_rB.x + this.m_gamma;\n        K.GetInverse(this.m_mass);\n        this.m_C.x = cB.x + this.m_rB.x - this.m_targetA.x;\n        this.m_C.y = cB.y + this.m_rB.y - this.m_targetA.y;\n        this.m_C.SelfMul(this.m_beta);\n        wB *= 0.98;\n        if (data.step.warmStarting) {\n            this.m_impulse.SelfMul(data.step.dtRatio);\n            vB.x += this.m_invMassB * this.m_impulse.x;\n            vB.y += this.m_invMassB * this.m_impulse.y;\n            wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, this.m_impulse);\n        }\n        else {\n            this.m_impulse.SetZero();\n        }\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2MouseJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var Cdot = b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2MouseJoint.SolveVelocityConstraints_s_Cdot);\n        var impulse = b2_math_1.b2Mat22.MulMV(this.m_mass, b2_math_1.b2Vec2.AddVV(Cdot, b2_math_1.b2Vec2.AddVV(this.m_C, b2_math_1.b2Vec2.MulSV(this.m_gamma, this.m_impulse, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0).SelfNeg(), b2MouseJoint.SolveVelocityConstraints_s_impulse);\n        var oldImpulse = b2MouseJoint.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);\n        this.m_impulse.SelfAdd(impulse);\n        var maxImpulse = data.step.dt * this.m_maxForce;\n        if (this.m_impulse.LengthSquared() > maxImpulse * maxImpulse) {\n            this.m_impulse.SelfMul(maxImpulse / this.m_impulse.Length());\n        }\n        b2_math_1.b2Vec2.SubVV(this.m_impulse, oldImpulse, impulse);\n        vB.SelfMulAdd(this.m_invMassB, impulse);\n        wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, impulse);\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2MouseJoint.prototype.SolvePositionConstraints = function (data) {\n        return true;\n    };\n    b2MouseJoint.prototype.GetAnchorA = function (out) {\n        out.x = this.m_targetA.x;\n        out.y = this.m_targetA.y;\n        return out;\n    };\n    b2MouseJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2MouseJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        return b2_math_1.b2Vec2.MulSV(inv_dt, this.m_impulse, out);\n    };\n    b2MouseJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return 0;\n    };\n    b2MouseJoint.prototype.Dump = function (log) {\n        log(\"Mouse joint dumping is not supported.\\n\");\n    };\n    b2MouseJoint.prototype.ShiftOrigin = function (newOrigin) {\n        this.m_targetA.SelfSub(newOrigin);\n    };\n    b2MouseJoint.SolveVelocityConstraints_s_Cdot = new b2_math_1.b2Vec2();\n    b2MouseJoint.SolveVelocityConstraints_s_impulse = new b2_math_1.b2Vec2();\n    b2MouseJoint.SolveVelocityConstraints_s_oldImpulse = new b2_math_1.b2Vec2();\n    return b2MouseJoint;\n}(b2_joint_1.b2Joint));\nexports.b2MouseJoint = b2MouseJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfbW91c2Vfam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfbW91c2Vfam9pbnQudHM/NWU0MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwNyBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0LCBiMl9lcHNpbG9uIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuLy8gREVCVUc6IGltcG9ydCB7IGIySXNWYWxpZCB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJfcGksIGIyTWF5YmUgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIsIGIyTWF0MjIsIGIyUm90LCBiMlRyYW5zZm9ybSwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIySm9pbnQsIGIySm9pbnREZWYsIGIySm9pbnRUeXBlLCBiMklKb2ludERlZiB9IGZyb20gXCIuL2IyX2pvaW50XCI7XG5pbXBvcnQgeyBiMlNvbHZlckRhdGEgfSBmcm9tIFwiLi9iMl90aW1lX3N0ZXBcIjtcblxuZXhwb3J0IGludGVyZmFjZSBiMklNb3VzZUpvaW50RGVmIGV4dGVuZHMgYjJJSm9pbnREZWYge1xuICB0YXJnZXQ/OiBYWTtcblxuICBtYXhGb3JjZT86IG51bWJlcjtcblxuICBzdGlmZm5lc3M/OiBudW1iZXI7XG5cbiAgZGFtcGluZz86IG51bWJlcjtcbn1cblxuLy8vIE1vdXNlIGpvaW50IGRlZmluaXRpb24uIFRoaXMgcmVxdWlyZXMgYSB3b3JsZCB0YXJnZXQgcG9pbnQsXG4vLy8gdHVuaW5nIHBhcmFtZXRlcnMsIGFuZCB0aGUgdGltZSBzdGVwLlxuZXhwb3J0IGNsYXNzIGIyTW91c2VKb2ludERlZiBleHRlbmRzIGIySm9pbnREZWYgaW1wbGVtZW50cyBiMklNb3VzZUpvaW50RGVmIHtcbiAgcHVibGljIHJlYWRvbmx5IHRhcmdldDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBtYXhGb3JjZTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgc3RpZmZuZXNzOiBudW1iZXIgPSA1O1xuXG4gIHB1YmxpYyBkYW1waW5nOiBudW1iZXIgPSAwLjc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoYjJKb2ludFR5cGUuZV9tb3VzZUpvaW50KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJNb3VzZUpvaW50IGV4dGVuZHMgYjJKb2ludCB7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQW5jaG9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV90YXJnZXRBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX3N0aWZmbmVzczogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fZGFtcGluZzogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fYmV0YTogbnVtYmVyID0gMDtcblxuICAvLyBTb2x2ZXIgc2hhcmVkXG4gIHB1YmxpYyByZWFkb25seSBtX2ltcHVsc2U6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fbWF4Rm9yY2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2dhbW1hOiBudW1iZXIgPSAwO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1faW52TWFzc0I6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludklCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9tYXNzOiBiMk1hdDIyID0gbmV3IGIyTWF0MjIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fQzogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9xQjogYjJSb3QgPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbGFsY0I6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fSzogYjJNYXQyMiA9IG5ldyBiMk1hdDIyKCk7XG5cbiAgY29uc3RydWN0b3IoZGVmOiBiMklNb3VzZUpvaW50RGVmKSB7XG4gICAgc3VwZXIoZGVmKTtcblxuICAgIHRoaXMubV90YXJnZXRBLkNvcHkoYjJNYXliZShkZWYudGFyZ2V0LCBiMlZlYzIuWkVSTykpO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fdGFyZ2V0QS5Jc1ZhbGlkKCkpO1xuICAgIGIyVHJhbnNmb3JtLk11bFRYVih0aGlzLm1fYm9keUIuR2V0VHJhbnNmb3JtKCksIHRoaXMubV90YXJnZXRBLCB0aGlzLm1fbG9jYWxBbmNob3JCKTtcblxuICAgIHRoaXMubV9tYXhGb3JjZSA9IGIyTWF5YmUoZGVmLm1heEZvcmNlLCAwKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYjJJc1ZhbGlkKHRoaXMubV9tYXhGb3JjZSkgJiYgdGhpcy5tX21heEZvcmNlID49IDApO1xuICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcblxuICAgIHRoaXMubV9zdGlmZm5lc3MgPSBiMk1heWJlKGRlZi5zdGlmZm5lc3MsIDApO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChiMklzVmFsaWQodGhpcy5tX3N0aWZmbmVzcykgJiYgdGhpcy5tX3N0aWZmbmVzcyA+PSAwKTtcbiAgICB0aGlzLm1fZGFtcGluZyA9IGIyTWF5YmUoZGVmLmRhbXBpbmcsIDApO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChiMklzVmFsaWQodGhpcy5tX2RhbXBpbmcpICYmIHRoaXMubV9kYW1waW5nID49IDApO1xuXG4gICAgdGhpcy5tX2JldGEgPSAwO1xuICAgIHRoaXMubV9nYW1tYSA9IDA7XG4gIH1cblxuICBwdWJsaWMgU2V0VGFyZ2V0KHRhcmdldDogWFkpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubV9ib2R5Qi5Jc0F3YWtlKCkpIHtcbiAgICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5tX3RhcmdldEEuQ29weSh0YXJnZXQpO1xuICB9XG5cbiAgcHVibGljIEdldFRhcmdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5tX3RhcmdldEE7XG4gIH1cblxuICBwdWJsaWMgU2V0TWF4Rm9yY2UobWF4Rm9yY2U6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9tYXhGb3JjZSA9IG1heEZvcmNlO1xuICB9XG5cbiAgcHVibGljIEdldE1heEZvcmNlKCkge1xuICAgIHJldHVybiB0aGlzLm1fbWF4Rm9yY2U7XG4gIH1cblxuICBwdWJsaWMgU2V0U3RpZmZuZXNzKHN0aWZmbmVzczogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX3N0aWZmbmVzcyA9IHN0aWZmbmVzcztcbiAgfVxuXG4gIHB1YmxpYyBHZXRTdGlmZm5lc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMubV9zdGlmZm5lc3M7XG4gIH1cblxuICBwdWJsaWMgU2V0RGFtcGluZyhkYW1waW5nOiBudW1iZXIpIHtcbiAgICB0aGlzLm1fZGFtcGluZyA9IGRhbXBpbmc7XG4gIH1cblxuICBwdWJsaWMgR2V0RGFtcGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tX2RhbXBpbmc7XG4gIH1cblxuICBwdWJsaWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5tX2luZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9sb2NhbENlbnRlckIuQ29weSh0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuXG4gICAgY29uc3QgY0I6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmM7XG4gICAgY29uc3QgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBjb25zdCBxQiA9IHRoaXMubV9xQi5TZXRBbmdsZShhQik7XG5cbiAgICBjb25zdCBtYXNzOiBudW1iZXIgPSB0aGlzLm1fYm9keUIuR2V0TWFzcygpO1xuXG4gICAgLy8gRnJlcXVlbmN5XG4gICAgY29uc3Qgb21lZ2E6IG51bWJlciA9IDIgKiBiMl9waSAqIHRoaXMubV9zdGlmZm5lc3M7XG5cbiAgICAvLyBEYW1waW5nIGNvZWZmaWNpZW50XG4gICAgY29uc3QgZDogbnVtYmVyID0gMiAqIG1hc3MgKiB0aGlzLm1fZGFtcGluZyAqIG9tZWdhO1xuXG4gICAgLy8gU3ByaW5nIHN0aWZmbmVzc1xuICAgIGNvbnN0IGs6IG51bWJlciA9IG1hc3MgKiAob21lZ2EgKiBvbWVnYSk7XG5cbiAgICAvLyBtYWdpYyBmb3JtdWxhc1xuICAgIC8vIGdhbW1hIGhhcyB1bml0cyBvZiBpbnZlcnNlIG1hc3MuXG4gICAgLy8gYmV0YSBoYXMgdW5pdHMgb2YgaW52ZXJzZSB0aW1lLlxuICAgIGNvbnN0IGg6IG51bWJlciA9IGRhdGEuc3RlcC5kdDtcbiAgICB0aGlzLm1fZ2FtbWEgPSBoICogKGQgKyBoICogayk7XG4gICAgaWYgKHRoaXMubV9nYW1tYSAhPT0gMCkge1xuICAgICAgdGhpcy5tX2dhbW1hID0gMSAvIHRoaXMubV9nYW1tYTtcbiAgICB9XG4gICAgdGhpcy5tX2JldGEgPSBoICogayAqIHRoaXMubV9nYW1tYTtcblxuICAgIC8vIENvbXB1dGUgdGhlIGVmZmVjdGl2ZSBtYXNzIG1hdHJpeC5cbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQiwgdGhpcy5tX2xhbGNCKTtcbiAgICBiMlJvdC5NdWxSVihxQiwgdGhpcy5tX2xhbGNCLCB0aGlzLm1fckIpO1xuXG4gICAgLy8gSyAgICA9IFsoMS9tMSArIDEvbTIpICogZXllKDIpIC0gc2tldyhyMSkgKiBpbnZJMSAqIHNrZXcocjEpIC0gc2tldyhyMikgKiBpbnZJMiAqIHNrZXcocjIpXVxuICAgIC8vICAgICAgPSBbMS9tMSsxL20yICAgICAwICAgIF0gKyBpbnZJMSAqIFtyMS55KnIxLnkgLXIxLngqcjEueV0gKyBpbnZJMiAqIFtyMS55KnIxLnkgLXIxLngqcjEueV1cbiAgICAvLyAgICAgICAgWyAgICAwICAgICAxL20xKzEvbTJdICAgICAgICAgICBbLXIxLngqcjEueSByMS54KnIxLnhdICAgICAgICAgICBbLXIxLngqcjEueSByMS54KnIxLnhdXG4gICAgY29uc3QgSyA9IHRoaXMubV9LO1xuICAgIEsuZXgueCA9IHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9yQi55ICogdGhpcy5tX3JCLnkgKyB0aGlzLm1fZ2FtbWE7XG4gICAgSy5leC55ID0gLXRoaXMubV9pbnZJQiAqIHRoaXMubV9yQi54ICogdGhpcy5tX3JCLnk7XG4gICAgSy5leS54ID0gSy5leC55O1xuICAgIEsuZXkueSA9IHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9yQi54ICogdGhpcy5tX3JCLnggKyB0aGlzLm1fZ2FtbWE7XG5cbiAgICBLLkdldEludmVyc2UodGhpcy5tX21hc3MpO1xuXG4gICAgLy8gbV9DID0gY0IgKyBtX3JCIC0gbV90YXJnZXRBO1xuICAgIHRoaXMubV9DLnggPSBjQi54ICsgdGhpcy5tX3JCLnggLSB0aGlzLm1fdGFyZ2V0QS54O1xuICAgIHRoaXMubV9DLnkgPSBjQi55ICsgdGhpcy5tX3JCLnkgLSB0aGlzLm1fdGFyZ2V0QS55O1xuICAgIC8vIG1fQyAqPSBtX2JldGE7XG4gICAgdGhpcy5tX0MuU2VsZk11bCh0aGlzLm1fYmV0YSk7XG5cbiAgICAvLyBDaGVhdCB3aXRoIHNvbWUgZGFtcGluZ1xuICAgIHdCICo9IDAuOTg7XG5cbiAgICBpZiAoZGF0YS5zdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2ltcHVsc2UuU2VsZk11bChkYXRhLnN0ZXAuZHRSYXRpbyk7XG4gICAgICAvLyB2QiArPSBtX2ludk1hc3NCICogbV9pbXB1bHNlO1xuICAgICAgdkIueCArPSB0aGlzLm1faW52TWFzc0IgKiB0aGlzLm1faW1wdWxzZS54O1xuICAgICAgdkIueSArPSB0aGlzLm1faW52TWFzc0IgKiB0aGlzLm1faW1wdWxzZS55O1xuICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCB0aGlzLm1faW1wdWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90ID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19vbGRJbXB1bHNlID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcbiAgICBsZXQgd0I6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53O1xuXG4gICAgLy8gQ2RvdCA9IHYgKyBjcm9zcyh3LCByKVxuICAgIC8vIGIyVmVjMiBDZG90ID0gdkIgKyBiMkNyb3NzKHdCLCBtX3JCKTtcbiAgICBjb25zdCBDZG90OiBiMlZlYzIgPSBiMlZlYzIuQWRkVkNyb3NzU1YodkIsIHdCLCB0aGlzLm1fckIsIGIyTW91c2VKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90KTtcbiAgICAvLyAgYjJWZWMyIGltcHVsc2UgPSBiMk11bChtX21hc3MsIC0oQ2RvdCArIG1fQyArIG1fZ2FtbWEgKiBtX2ltcHVsc2UpKTtcbiAgICBjb25zdCBpbXB1bHNlOiBiMlZlYzIgPSBiMk1hdDIyLk11bE1WKFxuICAgICAgdGhpcy5tX21hc3MsXG4gICAgICBiMlZlYzIuQWRkVlYoXG4gICAgICAgIENkb3QsXG4gICAgICAgIGIyVmVjMi5BZGRWVih0aGlzLm1fQyxcbiAgICAgICAgICBiMlZlYzIuTXVsU1YodGhpcy5tX2dhbW1hLCB0aGlzLm1faW1wdWxzZSwgYjJWZWMyLnNfdDApLFxuICAgICAgICAgIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgYjJWZWMyLnNfdDApLlNlbGZOZWcoKSxcbiAgICAgIGIyTW91c2VKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlKTtcblxuICAgIC8vIGIyVmVjMiBvbGRJbXB1bHNlID0gbV9pbXB1bHNlO1xuICAgIGNvbnN0IG9sZEltcHVsc2UgPSBiMk1vdXNlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3Nfb2xkSW1wdWxzZS5Db3B5KHRoaXMubV9pbXB1bHNlKTtcbiAgICAvLyBtX2ltcHVsc2UgKz0gaW1wdWxzZTtcbiAgICB0aGlzLm1faW1wdWxzZS5TZWxmQWRkKGltcHVsc2UpO1xuICAgIGNvbnN0IG1heEltcHVsc2U6IG51bWJlciA9IGRhdGEuc3RlcC5kdCAqIHRoaXMubV9tYXhGb3JjZTtcbiAgICBpZiAodGhpcy5tX2ltcHVsc2UuTGVuZ3RoU3F1YXJlZCgpID4gbWF4SW1wdWxzZSAqIG1heEltcHVsc2UpIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLlNlbGZNdWwobWF4SW1wdWxzZSAvIHRoaXMubV9pbXB1bHNlLkxlbmd0aCgpKTtcbiAgICB9XG4gICAgLy8gaW1wdWxzZSA9IG1faW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9pbXB1bHNlLCBvbGRJbXB1bHNlLCBpbXB1bHNlKTtcblxuICAgIC8vIHZCICs9IG1faW52TWFzc0IgKiBpbXB1bHNlO1xuICAgIHZCLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NCLCBpbXB1bHNlKTtcbiAgICB3QiArPSB0aGlzLm1faW52SUIgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIGltcHVsc2UpO1xuXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHVibGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRBbmNob3JBPFQgZXh0ZW5kcyBYWT4ob3V0OiBUKTogVCB7XG4gICAgb3V0LnggPSB0aGlzLm1fdGFyZ2V0QS54O1xuICAgIG91dC55ID0gdGhpcy5tX3RhcmdldEEueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckI8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvbkZvcmNlPFQgZXh0ZW5kcyBYWT4oaW52X2R0OiBudW1iZXIsIG91dDogVCk6IFQge1xuICAgIHJldHVybiBiMlZlYzIuTXVsU1YoaW52X2R0LCB0aGlzLm1faW1wdWxzZSwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvblRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICBsb2coXCJNb3VzZSBqb2ludCBkdW1waW5nIGlzIG5vdCBzdXBwb3J0ZWQuXFxuXCIpO1xuICB9XG5cbiAgcHVibGljIFNoaWZ0T3JpZ2luKG5ld09yaWdpbjogWFkpIHtcbiAgICB0aGlzLm1fdGFyZ2V0QS5TZWxmU3ViKG5ld09yaWdpbik7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTtBQUNBO0FBQ0E7QUFlQTtBQUFBO0FBU0E7QUFBQTtBQVJBO0FBRUE7QUFFQTtBQUVBOztBQUlBO0FBQ0E7QUFBQTtBQVpBO0FBY0E7QUFBQTtBQXlCQTtBQUFBO0FBeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFDQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUdBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBcEVBO0FBQ0E7QUFDQTtBQW1FQTtBQUFBO0FBN05BOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_mouse_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_polygon_circle_contact.ts":
/*!*********************************************************!*\
  !*** ./src/box2d/dynamics/b2_polygon_circle_contact.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2PolygonAndCircleContact = void 0;\nvar b2_collide_circle_1 = __webpack_require__(/*! ../collision/b2_collide_circle */ \"./src/box2d/collision/b2_collide_circle.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2PolygonAndCircleContact = (function (_super) {\n    __extends(b2PolygonAndCircleContact, _super);\n    function b2PolygonAndCircleContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2PolygonAndCircleContact.Create = function () {\n        return new b2PolygonAndCircleContact();\n    };\n    b2PolygonAndCircleContact.Destroy = function (contact) {\n    };\n    b2PolygonAndCircleContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        b2_collide_circle_1.b2CollidePolygonAndCircle(manifold, this.GetShapeA(), xfA, this.GetShapeB(), xfB);\n    };\n    return b2PolygonAndCircleContact;\n}(b2_contact_1.b2Contact));\nexports.b2PolygonAndCircleContact = b2PolygonAndCircleContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfcG9seWdvbl9jaXJjbGVfY29udGFjdC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl9wb2x5Z29uX2NpcmNsZV9jb250YWN0LnRzPzRkNTgiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMDkgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbmltcG9ydCB7IGIyVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jb2xsaWRlX2NpcmNsZVwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMkNpcmNsZVNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jaXJjbGVfc2hhcGVcIjtcbmltcG9ydCB7IGIyUG9seWdvblNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9wb2x5Z29uX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3QgfSBmcm9tIFwiLi9iMl9jb250YWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBiMlBvbHlnb25BbmRDaXJjbGVDb250YWN0IGV4dGVuZHMgYjJDb250YWN0PGIyUG9seWdvblNoYXBlLCBiMkNpcmNsZVNoYXBlPiB7XG4gIHB1YmxpYyBzdGF0aWMgQ3JlYXRlKCk6IGIyQ29udGFjdCB7XG4gICAgcmV0dXJuIG5ldyBiMlBvbHlnb25BbmRDaXJjbGVDb250YWN0KCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIERlc3Ryb3koY29udGFjdDogYjJDb250YWN0KTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgRXZhbHVhdGUobWFuaWZvbGQ6IGIyTWFuaWZvbGQsIHhmQTogYjJUcmFuc2Zvcm0sIHhmQjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICBiMkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlKG1hbmlmb2xkLCB0aGlzLkdldFNoYXBlQSgpLCB4ZkEsIHRoaXMuR2V0U2hhcGVCKCksIHhmQik7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUlBO0FBRUE7QUFBQTtBQUFBOztBQVdBO0FBVkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFYQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_polygon_circle_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_polygon_contact.ts":
/*!**************************************************!*\
  !*** ./src/box2d/dynamics/b2_polygon_contact.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2PolygonContact = void 0;\nvar b2_collide_polygon_1 = __webpack_require__(/*! ../collision/b2_collide_polygon */ \"./src/box2d/collision/b2_collide_polygon.ts\");\nvar b2_contact_1 = __webpack_require__(/*! ./b2_contact */ \"./src/box2d/dynamics/b2_contact.ts\");\nvar b2PolygonContact = (function (_super) {\n    __extends(b2PolygonContact, _super);\n    function b2PolygonContact() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2PolygonContact.Create = function () {\n        return new b2PolygonContact();\n    };\n    b2PolygonContact.Destroy = function (contact) {\n    };\n    b2PolygonContact.prototype.Evaluate = function (manifold, xfA, xfB) {\n        b2_collide_polygon_1.b2CollidePolygons(manifold, this.GetShapeA(), xfA, this.GetShapeB(), xfB);\n    };\n    return b2PolygonContact;\n}(b2_contact_1.b2Contact));\nexports.b2PolygonContact = b2PolygonContact;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfcG9seWdvbl9jb250YWN0LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX3BvbHlnb25fY29udGFjdC50cz85OTBjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5pbXBvcnQgeyBiMlRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJDb2xsaWRlUG9seWdvbnMgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpZGVfcG9seWdvblwiO1xuaW1wb3J0IHsgYjJNYW5pZm9sZCB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBiMlBvbHlnb25TaGFwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfcG9seWdvbl9zaGFwZVwiO1xuaW1wb3J0IHsgYjJDb250YWN0IH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuXG5leHBvcnQgY2xhc3MgYjJQb2x5Z29uQ29udGFjdCBleHRlbmRzIGIyQ29udGFjdDxiMlBvbHlnb25TaGFwZSwgYjJQb2x5Z29uU2hhcGU+IHtcbiAgcHVibGljIHN0YXRpYyBDcmVhdGUoKTogYjJDb250YWN0IHtcbiAgICByZXR1cm4gbmV3IGIyUG9seWdvbkNvbnRhY3QoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgRGVzdHJveShjb250YWN0OiBiMkNvbnRhY3QpOiB2b2lkIHtcbiAgfVxuXG4gIHB1YmxpYyBFdmFsdWF0ZShtYW5pZm9sZDogYjJNYW5pZm9sZCwgeGZBOiBiMlRyYW5zZm9ybSwgeGZCOiBiMlRyYW5zZm9ybSk6IHZvaWQge1xuICAgIGIyQ29sbGlkZVBvbHlnb25zKFxuICAgICAgbWFuaWZvbGQsXG4gICAgICB0aGlzLkdldFNoYXBlQSgpLCB4ZkEsXG4gICAgICB0aGlzLkdldFNoYXBlQigpLCB4ZkIpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFHQTtBQUVBO0FBQUE7QUFBQTs7QUFjQTtBQWJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBZEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_polygon_contact.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_prismatic_joint.ts":
/*!**************************************************!*\
  !*** ./src/box2d/dynamics/b2_prismatic_joint.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2PrismaticJoint = exports.b2PrismaticJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2PrismaticJointDef = (function (_super) {\n    __extends(b2PrismaticJointDef, _super);\n    function b2PrismaticJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_prismaticJoint) || this;\n        _this.localAnchorA = new b2_math_1.b2Vec2();\n        _this.localAnchorB = new b2_math_1.b2Vec2();\n        _this.localAxisA = new b2_math_1.b2Vec2(1, 0);\n        _this.referenceAngle = 0;\n        _this.enableLimit = false;\n        _this.lowerTranslation = 0;\n        _this.upperTranslation = 0;\n        _this.enableMotor = false;\n        _this.maxMotorForce = 0;\n        _this.motorSpeed = 0;\n        return _this;\n    }\n    b2PrismaticJointDef.prototype.Initialize = function (bA, bB, anchor, axis) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.bodyA.GetLocalPoint(anchor, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchor, this.localAnchorB);\n        this.bodyA.GetLocalVector(axis, this.localAxisA);\n        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();\n    };\n    return b2PrismaticJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2PrismaticJointDef = b2PrismaticJointDef;\nvar b2PrismaticJoint = (function (_super) {\n    __extends(b2PrismaticJoint, _super);\n    function b2PrismaticJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_localXAxisA = new b2_math_1.b2Vec2();\n        _this.m_localYAxisA = new b2_math_1.b2Vec2();\n        _this.m_referenceAngle = 0;\n        _this.m_impulse = new b2_math_1.b2Vec2(0, 0);\n        _this.m_motorImpulse = 0;\n        _this.m_lowerImpulse = 0;\n        _this.m_upperImpulse = 0;\n        _this.m_lowerTranslation = 0;\n        _this.m_upperTranslation = 0;\n        _this.m_maxMotorForce = 0;\n        _this.m_motorSpeed = 0;\n        _this.m_enableLimit = false;\n        _this.m_enableMotor = false;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_axis = new b2_math_1.b2Vec2(0, 0);\n        _this.m_perp = new b2_math_1.b2Vec2(0, 0);\n        _this.m_s1 = 0;\n        _this.m_s2 = 0;\n        _this.m_a1 = 0;\n        _this.m_a2 = 0;\n        _this.m_K = new b2_math_1.b2Mat22();\n        _this.m_K3 = new b2_math_1.b2Mat33();\n        _this.m_K2 = new b2_math_1.b2Mat22();\n        _this.m_translation = 0;\n        _this.m_axialMass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, b2_math_1.b2Vec2.ZERO));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, b2_math_1.b2Vec2.ZERO));\n        _this.m_localXAxisA.Copy(b2_settings_1.b2Maybe(def.localAxisA, new b2_math_1.b2Vec2(1, 0))).SelfNormalize();\n        b2_math_1.b2Vec2.CrossOneV(_this.m_localXAxisA, _this.m_localYAxisA);\n        _this.m_referenceAngle = b2_settings_1.b2Maybe(def.referenceAngle, 0);\n        _this.m_lowerTranslation = b2_settings_1.b2Maybe(def.lowerTranslation, 0);\n        _this.m_upperTranslation = b2_settings_1.b2Maybe(def.upperTranslation, 0);\n        _this.m_maxMotorForce = b2_settings_1.b2Maybe(def.maxMotorForce, 0);\n        _this.m_motorSpeed = b2_settings_1.b2Maybe(def.motorSpeed, 0);\n        _this.m_enableLimit = b2_settings_1.b2Maybe(def.enableLimit, false);\n        _this.m_enableMotor = b2_settings_1.b2Maybe(def.enableMotor, false);\n        return _this;\n    }\n    b2PrismaticJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var d = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.SubVV(cB, cA, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(rB, rA, b2_math_1.b2Vec2.s_t1), b2PrismaticJoint.InitVelocityConstraints_s_d);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        {\n            b2_math_1.b2Rot.MulRV(qA, this.m_localXAxisA, this.m_axis);\n            this.m_a1 = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), this.m_axis);\n            this.m_a2 = b2_math_1.b2Vec2.CrossVV(rB, this.m_axis);\n            this.m_axialMass = mA + mB + iA * this.m_a1 * this.m_a1 + iB * this.m_a2 * this.m_a2;\n            if (this.m_axialMass > 0) {\n                this.m_axialMass = 1 / this.m_axialMass;\n            }\n        }\n        {\n            b2_math_1.b2Rot.MulRV(qA, this.m_localYAxisA, this.m_perp);\n            this.m_s1 = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), this.m_perp);\n            this.m_s2 = b2_math_1.b2Vec2.CrossVV(rB, this.m_perp);\n            this.m_K.ex.x = mA + mB + iA * this.m_s1 * this.m_s1 + iB * this.m_s2 * this.m_s2;\n            this.m_K.ex.y = iA * this.m_s1 + iB * this.m_s2;\n            this.m_K.ey.x = this.m_K.ex.y;\n            this.m_K.ey.y = iA + iB;\n            if (this.m_K.ey.y === 0) {\n                this.m_K.ey.y = 1;\n            }\n        }\n        if (this.m_enableLimit) {\n            this.m_translation = b2_math_1.b2Vec2.DotVV(this.m_axis, d);\n        }\n        else {\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n        if (!this.m_enableMotor) {\n            this.m_motorImpulse = 0;\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse.SelfMul(data.step.dtRatio);\n            this.m_motorImpulse *= data.step.dtRatio;\n            this.m_lowerImpulse *= data.step.dtRatio;\n            this.m_upperImpulse *= data.step.dtRatio;\n            var axialImpulse = this.m_motorImpulse + this.m_lowerImpulse - this.m_upperImpulse;\n            var P = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.MulSV(this.m_impulse.x, this.m_perp, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.MulSV(axialImpulse, this.m_axis, b2_math_1.b2Vec2.s_t1), b2PrismaticJoint.InitVelocityConstraints_s_P);\n            var LA = this.m_impulse.x * this.m_s1 + this.m_impulse.y + axialImpulse * this.m_a1;\n            var LB = this.m_impulse.x * this.m_s2 + this.m_impulse.y + axialImpulse * this.m_a2;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * LA;\n            vB.SelfMulAdd(mB, P);\n            wB += iB * LB;\n        }\n        else {\n            this.m_impulse.SetZero();\n            this.m_motorImpulse = 0.0;\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2PrismaticJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        if (this.m_enableMotor) {\n            var Cdot = b2_math_1.b2Vec2.DotVV(this.m_axis, b2_math_1.b2Vec2.SubVV(vB, vA, b2_math_1.b2Vec2.s_t0)) + this.m_a2 * wB - this.m_a1 * wA;\n            var impulse = this.m_axialMass * (this.m_motorSpeed - Cdot);\n            var oldImpulse = this.m_motorImpulse;\n            var maxImpulse = data.step.dt * this.m_maxMotorForce;\n            this.m_motorImpulse = b2_math_1.b2Clamp(this.m_motorImpulse + impulse, (-maxImpulse), maxImpulse);\n            impulse = this.m_motorImpulse - oldImpulse;\n            var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_axis, b2PrismaticJoint.SolveVelocityConstraints_s_P);\n            var LA = impulse * this.m_a1;\n            var LB = impulse * this.m_a2;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * LA;\n            vB.SelfMulAdd(mB, P);\n            wB += iB * LB;\n        }\n        if (this.m_enableLimit) {\n            {\n                var C = this.m_translation - this.m_lowerTranslation;\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_axis, b2_math_1.b2Vec2.SubVV(vB, vA, b2_math_1.b2Vec2.s_t0)) + this.m_a2 * wB - this.m_a1 * wA;\n                var impulse = -this.m_axialMass * (Cdot + b2_math_1.b2Max(C, 0.0) * data.step.inv_dt);\n                var oldImpulse = this.m_lowerImpulse;\n                this.m_lowerImpulse = b2_math_1.b2Max(this.m_lowerImpulse + impulse, 0.0);\n                impulse = this.m_lowerImpulse - oldImpulse;\n                var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_axis, b2PrismaticJoint.SolveVelocityConstraints_s_P);\n                var LA = impulse * this.m_a1;\n                var LB = impulse * this.m_a2;\n                vA.SelfMulSub(mA, P);\n                wA -= iA * LA;\n                vB.SelfMulAdd(mB, P);\n                wB += iB * LB;\n            }\n            {\n                var C = this.m_upperTranslation - this.m_translation;\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_axis, b2_math_1.b2Vec2.SubVV(vA, vB, b2_math_1.b2Vec2.s_t0)) + this.m_a1 * wA - this.m_a2 * wB;\n                var impulse = -this.m_axialMass * (Cdot + b2_math_1.b2Max(C, 0.0) * data.step.inv_dt);\n                var oldImpulse = this.m_upperImpulse;\n                this.m_upperImpulse = b2_math_1.b2Max(this.m_upperImpulse + impulse, 0.0);\n                impulse = this.m_upperImpulse - oldImpulse;\n                var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_axis, b2PrismaticJoint.SolveVelocityConstraints_s_P);\n                var LA = impulse * this.m_a1;\n                var LB = impulse * this.m_a2;\n                vA.SelfMulAdd(mA, P);\n                wA += iA * LA;\n                vB.SelfMulSub(mB, P);\n                wB -= iB * LB;\n            }\n        }\n        {\n            var Cdot_x = b2_math_1.b2Vec2.DotVV(this.m_perp, b2_math_1.b2Vec2.SubVV(vB, vA, b2_math_1.b2Vec2.s_t0)) + this.m_s2 * wB - this.m_s1 * wA;\n            var Cdot_y = wB - wA;\n            var df = this.m_K.Solve(-Cdot_x, -Cdot_y, b2PrismaticJoint.SolveVelocityConstraints_s_df);\n            this.m_impulse.SelfAdd(df);\n            var P = b2_math_1.b2Vec2.MulSV(df.x, this.m_perp, b2PrismaticJoint.SolveVelocityConstraints_s_P);\n            var LA = df.x * this.m_s1 + df.y;\n            var LB = df.x * this.m_s2 + df.y;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * LA;\n            vB.SelfMulAdd(mB, P);\n            wB += iB * LB;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2PrismaticJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var d = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(cB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(cA, rA, b2_math_1.b2Vec2.s_t1), b2PrismaticJoint.SolvePositionConstraints_s_d);\n        var axis = b2_math_1.b2Rot.MulRV(qA, this.m_localXAxisA, this.m_axis);\n        var a1 = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), axis);\n        var a2 = b2_math_1.b2Vec2.CrossVV(rB, axis);\n        var perp = b2_math_1.b2Rot.MulRV(qA, this.m_localYAxisA, this.m_perp);\n        var s1 = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), perp);\n        var s2 = b2_math_1.b2Vec2.CrossVV(rB, perp);\n        var impulse = b2PrismaticJoint.SolvePositionConstraints_s_impulse;\n        var C1_x = b2_math_1.b2Vec2.DotVV(perp, d);\n        var C1_y = aB - aA - this.m_referenceAngle;\n        var linearError = b2_math_1.b2Abs(C1_x);\n        var angularError = b2_math_1.b2Abs(C1_y);\n        var active = false;\n        var C2 = 0;\n        if (this.m_enableLimit) {\n            var translation = b2_math_1.b2Vec2.DotVV(axis, d);\n            if (b2_math_1.b2Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * b2_settings_1.b2_linearSlop) {\n                C2 = translation;\n                linearError = b2_math_1.b2Max(linearError, b2_math_1.b2Abs(translation));\n                active = true;\n            }\n            else if (translation <= this.m_lowerTranslation) {\n                C2 = b2_math_1.b2Min(translation - this.m_lowerTranslation, 0.0);\n                linearError = b2_math_1.b2Max(linearError, this.m_lowerTranslation - translation);\n                active = true;\n            }\n            else if (translation >= this.m_upperTranslation) {\n                C2 = b2_math_1.b2Max(translation - this.m_upperTranslation, 0.0);\n                linearError = b2_math_1.b2Max(linearError, translation - this.m_upperTranslation);\n                active = true;\n            }\n        }\n        if (active) {\n            var k11 = mA + mB + iA * s1 * s1 + iB * s2 * s2;\n            var k12 = iA * s1 + iB * s2;\n            var k13 = iA * s1 * a1 + iB * s2 * a2;\n            var k22 = iA + iB;\n            if (k22 === 0) {\n                k22 = 1;\n            }\n            var k23 = iA * a1 + iB * a2;\n            var k33 = mA + mB + iA * a1 * a1 + iB * a2 * a2;\n            var K = this.m_K3;\n            K.ex.SetXYZ(k11, k12, k13);\n            K.ey.SetXYZ(k12, k22, k23);\n            K.ez.SetXYZ(k13, k23, k33);\n            impulse = K.Solve33((-C1_x), (-C1_y), (-C2), impulse);\n        }\n        else {\n            var k11 = mA + mB + iA * s1 * s1 + iB * s2 * s2;\n            var k12 = iA * s1 + iB * s2;\n            var k22 = iA + iB;\n            if (k22 === 0) {\n                k22 = 1;\n            }\n            var K2 = this.m_K2;\n            K2.ex.Set(k11, k12);\n            K2.ey.Set(k12, k22);\n            var impulse1 = K2.Solve((-C1_x), (-C1_y), b2PrismaticJoint.SolvePositionConstraints_s_impulse1);\n            impulse.x = impulse1.x;\n            impulse.y = impulse1.y;\n            impulse.z = 0;\n        }\n        var P = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.MulSV(impulse.x, perp, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.MulSV(impulse.z, axis, b2_math_1.b2Vec2.s_t1), b2PrismaticJoint.SolvePositionConstraints_s_P);\n        var LA = impulse.x * s1 + impulse.y + impulse.z * a1;\n        var LB = impulse.x * s2 + impulse.y + impulse.z * a2;\n        cA.SelfMulSub(mA, P);\n        aA -= iA * LA;\n        cB.SelfMulAdd(mB, P);\n        aB += iB * LB;\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        return linearError <= b2_settings_1.b2_linearSlop && angularError <= b2_settings_1.b2_angularSlop;\n    };\n    b2PrismaticJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2PrismaticJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2PrismaticJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_lowerImpulse - this.m_upperImpulse) * this.m_axis.x);\n        out.y = inv_dt * (this.m_impulse.y * this.m_perp.y + (this.m_motorImpulse + this.m_lowerImpulse - this.m_upperImpulse) * this.m_axis.y);\n        return out;\n    };\n    b2PrismaticJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * this.m_impulse.y;\n    };\n    b2PrismaticJoint.prototype.GetLocalAnchorA = function () { return this.m_localAnchorA; };\n    b2PrismaticJoint.prototype.GetLocalAnchorB = function () { return this.m_localAnchorB; };\n    b2PrismaticJoint.prototype.GetLocalAxisA = function () { return this.m_localXAxisA; };\n    b2PrismaticJoint.prototype.GetReferenceAngle = function () { return this.m_referenceAngle; };\n    b2PrismaticJoint.prototype.GetJointTranslation = function () {\n        var pA = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, b2PrismaticJoint.GetJointTranslation_s_pA);\n        var pB = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, b2PrismaticJoint.GetJointTranslation_s_pB);\n        var d = b2_math_1.b2Vec2.SubVV(pB, pA, b2PrismaticJoint.GetJointTranslation_s_d);\n        var axis = this.m_bodyA.GetWorldVector(this.m_localXAxisA, b2PrismaticJoint.GetJointTranslation_s_axis);\n        var translation = b2_math_1.b2Vec2.DotVV(d, axis);\n        return translation;\n    };\n    b2PrismaticJoint.prototype.GetJointSpeed = function () {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, bA.m_sweep.localCenter, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(bA.m_xf.q, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, bB.m_sweep.localCenter, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(bB.m_xf.q, this.m_lalcB, this.m_rB);\n        var pA = b2_math_1.b2Vec2.AddVV(bA.m_sweep.c, rA, b2_math_1.b2Vec2.s_t0);\n        var pB = b2_math_1.b2Vec2.AddVV(bB.m_sweep.c, rB, b2_math_1.b2Vec2.s_t1);\n        var d = b2_math_1.b2Vec2.SubVV(pB, pA, b2_math_1.b2Vec2.s_t2);\n        var axis = bA.GetWorldVector(this.m_localXAxisA, this.m_axis);\n        var vA = bA.m_linearVelocity;\n        var vB = bB.m_linearVelocity;\n        var wA = bA.m_angularVelocity;\n        var wB = bB.m_angularVelocity;\n        var speed = b2_math_1.b2Vec2.DotVV(d, b2_math_1.b2Vec2.CrossSV(wA, axis, b2_math_1.b2Vec2.s_t0)) +\n            b2_math_1.b2Vec2.DotVV(axis, b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, rA, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0));\n        return speed;\n    };\n    b2PrismaticJoint.prototype.IsLimitEnabled = function () {\n        return this.m_enableLimit;\n    };\n    b2PrismaticJoint.prototype.EnableLimit = function (flag) {\n        if (flag !== this.m_enableLimit) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_enableLimit = flag;\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n    };\n    b2PrismaticJoint.prototype.GetLowerLimit = function () {\n        return this.m_lowerTranslation;\n    };\n    b2PrismaticJoint.prototype.GetUpperLimit = function () {\n        return this.m_upperTranslation;\n    };\n    b2PrismaticJoint.prototype.SetLimits = function (lower, upper) {\n        if (lower !== this.m_lowerTranslation || upper !== this.m_upperTranslation) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_lowerTranslation = lower;\n            this.m_upperTranslation = upper;\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n    };\n    b2PrismaticJoint.prototype.IsMotorEnabled = function () {\n        return this.m_enableMotor;\n    };\n    b2PrismaticJoint.prototype.EnableMotor = function (flag) {\n        if (flag !== this.m_enableMotor) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_enableMotor = flag;\n        }\n    };\n    b2PrismaticJoint.prototype.SetMotorSpeed = function (speed) {\n        if (speed !== this.m_motorSpeed) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_motorSpeed = speed;\n        }\n    };\n    b2PrismaticJoint.prototype.GetMotorSpeed = function () {\n        return this.m_motorSpeed;\n    };\n    b2PrismaticJoint.prototype.SetMaxMotorForce = function (force) {\n        if (force !== this.m_maxMotorForce) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_maxMotorForce = force;\n        }\n    };\n    b2PrismaticJoint.prototype.GetMaxMotorForce = function () { return this.m_maxMotorForce; };\n    b2PrismaticJoint.prototype.GetMotorForce = function (inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n    };\n    b2PrismaticJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.localAxisA.Set(%.15f, %.15f);\\n\", this.m_localXAxisA.x, this.m_localXAxisA.y);\n        log(\"  jd.referenceAngle = %.15f;\\n\", this.m_referenceAngle);\n        log(\"  jd.enableLimit = %s;\\n\", (this.m_enableLimit) ? (\"true\") : (\"false\"));\n        log(\"  jd.lowerTranslation = %.15f;\\n\", this.m_lowerTranslation);\n        log(\"  jd.upperTranslation = %.15f;\\n\", this.m_upperTranslation);\n        log(\"  jd.enableMotor = %s;\\n\", (this.m_enableMotor) ? (\"true\") : (\"false\"));\n        log(\"  jd.motorSpeed = %.15f;\\n\", this.m_motorSpeed);\n        log(\"  jd.maxMotorForce = %.15f;\\n\", this.m_maxMotorForce);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2PrismaticJoint.prototype.Draw = function (draw) {\n        var xfA = this.m_bodyA.GetTransform();\n        var xfB = this.m_bodyB.GetTransform();\n        var pA = b2_math_1.b2Transform.MulXV(xfA, this.m_localAnchorA, b2PrismaticJoint.Draw_s_pA);\n        var pB = b2_math_1.b2Transform.MulXV(xfB, this.m_localAnchorB, b2PrismaticJoint.Draw_s_pB);\n        var axis = b2_math_1.b2Rot.MulRV(xfA.q, this.m_localXAxisA, b2PrismaticJoint.Draw_s_axis);\n        var c1 = b2PrismaticJoint.Draw_s_c1;\n        var c2 = b2PrismaticJoint.Draw_s_c2;\n        var c3 = b2PrismaticJoint.Draw_s_c3;\n        var c4 = b2PrismaticJoint.Draw_s_c4;\n        var c5 = b2PrismaticJoint.Draw_s_c5;\n        draw.DrawSegment(pA, pB, c5);\n        if (this.m_enableLimit) {\n            var lower = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_lowerTranslation, axis, b2PrismaticJoint.Draw_s_lower);\n            var upper = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_upperTranslation, axis, b2PrismaticJoint.Draw_s_upper);\n            var perp = b2_math_1.b2Rot.MulRV(xfA.q, this.m_localYAxisA, b2PrismaticJoint.Draw_s_perp);\n            draw.DrawSegment(lower, upper, c1);\n            draw.DrawSegment(b2_math_1.b2Vec2.AddVMulSV(lower, -0.5, perp, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVMulSV(lower, 0.5, perp, b2_math_1.b2Vec2.s_t1), c2);\n            draw.DrawSegment(b2_math_1.b2Vec2.AddVMulSV(upper, -0.5, perp, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVMulSV(upper, 0.5, perp, b2_math_1.b2Vec2.s_t1), c3);\n        }\n        else {\n            draw.DrawSegment(b2_math_1.b2Vec2.AddVMulSV(pA, -1.0, axis, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVMulSV(pA, 1.0, axis, b2_math_1.b2Vec2.s_t1), c1);\n        }\n        draw.DrawPoint(pA, 5.0, c1);\n        draw.DrawPoint(pB, 5.0, c4);\n    };\n    b2PrismaticJoint.InitVelocityConstraints_s_d = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.InitVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.SolveVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.SolveVelocityConstraints_s_df = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.SolvePositionConstraints_s_d = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.SolvePositionConstraints_s_impulse = new b2_math_1.b2Vec3();\n    b2PrismaticJoint.SolvePositionConstraints_s_impulse1 = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.SolvePositionConstraints_s_P = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.GetJointTranslation_s_pA = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.GetJointTranslation_s_pB = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.GetJointTranslation_s_d = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.GetJointTranslation_s_axis = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.Draw_s_pA = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.Draw_s_pB = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.Draw_s_axis = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.Draw_s_c1 = new b2_draw_1.b2Color(0.7, 0.7, 0.7);\n    b2PrismaticJoint.Draw_s_c2 = new b2_draw_1.b2Color(0.3, 0.9, 0.3);\n    b2PrismaticJoint.Draw_s_c3 = new b2_draw_1.b2Color(0.9, 0.3, 0.3);\n    b2PrismaticJoint.Draw_s_c4 = new b2_draw_1.b2Color(0.3, 0.3, 0.9);\n    b2PrismaticJoint.Draw_s_c5 = new b2_draw_1.b2Color(0.4, 0.4, 0.4);\n    b2PrismaticJoint.Draw_s_lower = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.Draw_s_upper = new b2_math_1.b2Vec2();\n    b2PrismaticJoint.Draw_s_perp = new b2_math_1.b2Vec2();\n    return b2PrismaticJoint;\n}(b2_joint_1.b2Joint));\nexports.b2PrismaticJoint = b2PrismaticJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfcHJpc21hdGljX2pvaW50LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX3ByaXNtYXRpY19qb2ludC50cz85N2M2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDExIEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5pbXBvcnQgeyBiMl9saW5lYXJTbG9wLCBiMl9hbmd1bGFyU2xvcCwgYjJNYXliZSB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyQWJzLCBiMk1pbiwgYjJNYXgsIGIyQ2xhbXAsIGIyVmVjMiwgYjJNYXQyMiwgYjJWZWMzLCBiMk1hdDMzLCBiMlJvdCwgWFksIGIyVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5pbXBvcnQgeyBiMkpvaW50LCBiMkpvaW50RGVmLCBiMkpvaW50VHlwZSwgYjJJSm9pbnREZWYgfSBmcm9tIFwiLi9iMl9qb2ludFwiO1xuaW1wb3J0IHsgYjJTb2x2ZXJEYXRhIH0gZnJvbSBcIi4vYjJfdGltZV9zdGVwXCI7XG5pbXBvcnQgeyBiMkRyYXcsIGIyQ29sb3IgfSBmcm9tIFwiLi4vY29tbW9uL2IyX2RyYXdcIjtcblxuZXhwb3J0IGludGVyZmFjZSBiMklQcmlzbWF0aWNKb2ludERlZiBleHRlbmRzIGIySUpvaW50RGVmIHtcbiAgbG9jYWxBbmNob3JBPzogWFk7XG5cbiAgbG9jYWxBbmNob3JCPzogWFk7XG5cbiAgbG9jYWxBeGlzQT86IFhZO1xuXG4gIHJlZmVyZW5jZUFuZ2xlPzogbnVtYmVyO1xuXG4gIGVuYWJsZUxpbWl0PzogYm9vbGVhbjtcblxuICBsb3dlclRyYW5zbGF0aW9uPzogbnVtYmVyO1xuXG4gIHVwcGVyVHJhbnNsYXRpb24/OiBudW1iZXI7XG5cbiAgZW5hYmxlTW90b3I/OiBib29sZWFuO1xuXG4gIG1heE1vdG9yRm9yY2U/OiBudW1iZXI7XG5cbiAgbW90b3JTcGVlZD86IG51bWJlcjtcbn1cblxuLy8vIFByaXNtYXRpYyBqb2ludCBkZWZpbml0aW9uLiBUaGlzIHJlcXVpcmVzIGRlZmluaW5nIGEgbGluZSBvZlxuLy8vIG1vdGlvbiB1c2luZyBhbiBheGlzIGFuZCBhbiBhbmNob3IgcG9pbnQuIFRoZSBkZWZpbml0aW9uIHVzZXMgbG9jYWxcbi8vLyBhbmNob3IgcG9pbnRzIGFuZCBhIGxvY2FsIGF4aXMgc28gdGhhdCB0aGUgaW5pdGlhbCBjb25maWd1cmF0aW9uXG4vLy8gY2FuIHZpb2xhdGUgdGhlIGNvbnN0cmFpbnQgc2xpZ2h0bHkuIFRoZSBqb2ludCB0cmFuc2xhdGlvbiBpcyB6ZXJvXG4vLy8gd2hlbiB0aGUgbG9jYWwgYW5jaG9yIHBvaW50cyBjb2luY2lkZSBpbiB3b3JsZCBzcGFjZS4gVXNpbmcgbG9jYWxcbi8vLyBhbmNob3JzIGFuZCBhIGxvY2FsIGF4aXMgaGVscHMgd2hlbiBzYXZpbmcgYW5kIGxvYWRpbmcgYSBnYW1lLlxuZXhwb3J0IGNsYXNzIGIyUHJpc21hdGljSm9pbnREZWYgZXh0ZW5kcyBiMkpvaW50RGVmIGltcGxlbWVudHMgYjJJUHJpc21hdGljSm9pbnREZWYge1xuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxBbmNob3JBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQW5jaG9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyByZWFkb25seSBsb2NhbEF4aXNBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKDEsIDApO1xuXG4gIHB1YmxpYyByZWZlcmVuY2VBbmdsZTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgZW5hYmxlTGltaXQgPSBmYWxzZTtcblxuICBwdWJsaWMgbG93ZXJUcmFuc2xhdGlvbjogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgdXBwZXJUcmFuc2xhdGlvbjogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgZW5hYmxlTW90b3IgPSBmYWxzZTtcblxuICBwdWJsaWMgbWF4TW90b3JGb3JjZTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbW90b3JTcGVlZDogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihiMkpvaW50VHlwZS5lX3ByaXNtYXRpY0pvaW50KTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0aWFsaXplKGJBOiBiMkJvZHksIGJCOiBiMkJvZHksIGFuY2hvcjogWFksIGF4aXM6IFhZKTogdm9pZCB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yLCB0aGlzLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvciwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMuYm9keUEuR2V0TG9jYWxWZWN0b3IoYXhpcywgdGhpcy5sb2NhbEF4aXNBKTtcbiAgICB0aGlzLnJlZmVyZW5jZUFuZ2xlID0gdGhpcy5ib2R5Qi5HZXRBbmdsZSgpIC0gdGhpcy5ib2R5QS5HZXRBbmdsZSgpO1xuICB9XG59XG5cbi8vIExpbmVhciBjb25zdHJhaW50IChwb2ludC10by1saW5lKVxuLy8gZCA9IHAyIC0gcDEgPSB4MiArIHIyIC0geDEgLSByMVxuLy8gQyA9IGRvdChwZXJwLCBkKVxuLy8gQ2RvdCA9IGRvdChkLCBjcm9zcyh3MSwgcGVycCkpICsgZG90KHBlcnAsIHYyICsgY3Jvc3ModzIsIHIyKSAtIHYxIC0gY3Jvc3ModzEsIHIxKSlcbi8vICAgICAgPSAtZG90KHBlcnAsIHYxKSAtIGRvdChjcm9zcyhkICsgcjEsIHBlcnApLCB3MSkgKyBkb3QocGVycCwgdjIpICsgZG90KGNyb3NzKHIyLCBwZXJwKSwgdjIpXG4vLyBKID0gWy1wZXJwLCAtY3Jvc3MoZCArIHIxLCBwZXJwKSwgcGVycCwgY3Jvc3MocjIscGVycCldXG4vL1xuLy8gQW5ndWxhciBjb25zdHJhaW50XG4vLyBDID0gYTIgLSBhMSArIGFfaW5pdGlhbFxuLy8gQ2RvdCA9IHcyIC0gdzFcbi8vIEogPSBbMCAwIC0xIDAgMCAxXVxuLy9cbi8vIEsgPSBKICogaW52TSAqIEpUXG4vL1xuLy8gSiA9IFstYSAtczEgYSBzMl1cbi8vICAgICBbMCAgLTEgIDAgIDFdXG4vLyBhID0gcGVycFxuLy8gczEgPSBjcm9zcyhkICsgcjEsIGEpID0gY3Jvc3MocDIgLSB4MSwgYSlcbi8vIHMyID0gY3Jvc3MocjIsIGEpID0gY3Jvc3MocDIgLSB4MiwgYSlcblxuLy8gTW90b3IvTGltaXQgbGluZWFyIGNvbnN0cmFpbnRcbi8vIEMgPSBkb3QoYXgxLCBkKVxuLy8gQ2RvdCA9IC1kb3QoYXgxLCB2MSkgLSBkb3QoY3Jvc3MoZCArIHIxLCBheDEpLCB3MSkgKyBkb3QoYXgxLCB2MikgKyBkb3QoY3Jvc3MocjIsIGF4MSksIHYyKVxuLy8gSiA9IFstYXgxIC1jcm9zcyhkK3IxLGF4MSkgYXgxIGNyb3NzKHIyLGF4MSldXG5cbi8vIFByZWRpY3RpdmUgbGltaXQgaXMgYXBwbGllZCBldmVuIHdoZW4gdGhlIGxpbWl0IGlzIG5vdCBhY3RpdmUuXG4vLyBQcmV2ZW50cyBhIGNvbnN0cmFpbnQgc3BlZWQgdGhhdCBjYW4gbGVhZCB0byBhIGNvbnN0cmFpbnQgZXJyb3IgaW4gb25lIHRpbWUgc3RlcC5cbi8vIFdhbnQgQzIgPSBDMSArIGggKiBDZG90ID49IDBcbi8vIE9yOlxuLy8gQ2RvdCArIEMxL2ggPj0gMFxuLy8gSSBkbyBub3QgYXBwbHkgYSBuZWdhdGl2ZSBjb25zdHJhaW50IGVycm9yIGJlY2F1c2UgdGhhdCBpcyBoYW5kbGVkIGluIHBvc2l0aW9uIGNvcnJlY3Rpb24uXG4vLyBTbzpcbi8vIENkb3QgKyBtYXgoQzEsIDApL2ggPj0gMFxuXG4vLyBCbG9jayBTb2x2ZXJcbi8vIFdlIGRldmVsb3AgYSBibG9jayBzb2x2ZXIgdGhhdCBpbmNsdWRlcyB0aGUgYW5ndWxhciBhbmQgbGluZWFyIGNvbnN0cmFpbnRzLiBUaGlzIG1ha2VzIHRoZSBsaW1pdCBzdGlmZmVyLlxuLy9cbi8vIFRoZSBKYWNvYmlhbiBoYXMgMiByb3dzOlxuLy8gSiA9IFstdVQgLXMxIHVUIHMyXSAvLyBsaW5lYXJcbi8vICAgICBbMCAgIC0xICAgMCAgMV0gLy8gYW5ndWxhclxuLy9cbi8vIHUgPSBwZXJwXG4vLyBzMSA9IGNyb3NzKGQgKyByMSwgdSksIHMyID0gY3Jvc3MocjIsIHUpXG4vLyBhMSA9IGNyb3NzKGQgKyByMSwgdiksIGEyID0gY3Jvc3MocjIsIHYpXG5cbmV4cG9ydCBjbGFzcyBiMlByaXNtYXRpY0pvaW50IGV4dGVuZHMgYjJKb2ludCB7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxYQXhpc0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxZQXhpc0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fcmVmZXJlbmNlQW5nbGU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX2ltcHVsc2U6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMCwgMCk7XG4gIHB1YmxpYyBtX21vdG9ySW1wdWxzZTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fbG93ZXJJbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV91cHBlckltcHVsc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2xvd2VyVHJhbnNsYXRpb246IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3VwcGVyVHJhbnNsYXRpb246IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21heE1vdG9yRm9yY2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21vdG9yU3BlZWQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2VuYWJsZUxpbWl0OiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtX2VuYWJsZU1vdG9yOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8gU29sdmVyIHRlbXBcbiAgcHVibGljIG1faW5kZXhBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbmRleEI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQ2VudGVyQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1faW52TWFzc0E6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludk1hc3NCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZJQTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBtX2F4aXM6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMCwgMCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3BlcnA6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMCwgMCk7XG4gIHB1YmxpYyBtX3MxOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9zMjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fYTE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2EyOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9LOiBiMk1hdDIyID0gbmV3IGIyTWF0MjIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fSzM6IGIyTWF0MzMgPSBuZXcgYjJNYXQzMygpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9LMjogYjJNYXQyMiA9IG5ldyBiMk1hdDIyKCk7XG4gIHB1YmxpYyBtX3RyYW5zbGF0aW9uOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9heGlhbE1hc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fcUE6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3FCOiBiMlJvdCA9IG5ldyBiMlJvdCgpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogYjJJUHJpc21hdGljSm9pbnREZWYpIHtcbiAgICBzdXBlcihkZWYpO1xuXG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQW5jaG9yQSwgYjJWZWMyLlpFUk8pKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3JCLkNvcHkoYjJNYXliZShkZWYubG9jYWxBbmNob3JCLCBiMlZlYzIuWkVSTykpO1xuICAgIHRoaXMubV9sb2NhbFhBeGlzQS5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQXhpc0EsIG5ldyBiMlZlYzIoMSwgMCkpKS5TZWxmTm9ybWFsaXplKCk7XG4gICAgYjJWZWMyLkNyb3NzT25lVih0aGlzLm1fbG9jYWxYQXhpc0EsIHRoaXMubV9sb2NhbFlBeGlzQSk7XG4gICAgdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gYjJNYXliZShkZWYucmVmZXJlbmNlQW5nbGUsIDApO1xuICAgIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gYjJNYXliZShkZWYubG93ZXJUcmFuc2xhdGlvbiwgMCk7XG4gICAgdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gPSBiMk1heWJlKGRlZi51cHBlclRyYW5zbGF0aW9uLCAwKTtcbiAgICAvLyBiMkFzc2VydCh0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiA8PSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbik7XG4gICAgdGhpcy5tX21heE1vdG9yRm9yY2UgPSBiMk1heWJlKGRlZi5tYXhNb3RvckZvcmNlLCAwKTtcbiAgICB0aGlzLm1fbW90b3JTcGVlZCA9IGIyTWF5YmUoZGVmLm1vdG9yU3BlZWQsIDApO1xuICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGIyTWF5YmUoZGVmLmVuYWJsZUxpbWl0LCBmYWxzZSk7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gYjJNYXliZShkZWYuZW5hYmxlTW90b3IsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfZCA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5tX2luZGV4QSA9IHRoaXMubV9ib2R5QS5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9pbmRleEIgPSB0aGlzLm1fYm9keUIubV9pc2xhbmRJbmRleDtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJBLkNvcHkodGhpcy5tX2JvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHRoaXMubV9sb2NhbENlbnRlckIuQ29weSh0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2ludk1hc3NBID0gdGhpcy5tX2JvZHlBLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52TWFzc0IgPSB0aGlzLm1fYm9keUIubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgdGhpcy5tX2ludklCID0gdGhpcy5tX2JvZHlCLm1faW52STtcblxuICAgIGNvbnN0IGNBOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jO1xuICAgIGNvbnN0IGFBOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hO1xuICAgIGNvbnN0IHZBOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udjtcbiAgICBsZXQgd0E6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53O1xuXG4gICAgY29uc3QgY0I6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmM7XG4gICAgY29uc3QgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgZWZmZWN0aXZlIG1hc3Nlcy5cbiAgICAvLyBiMlZlYzIgckEgPSBiMk11bChxQSwgbV9sb2NhbEFuY2hvckEgLSBtX2xvY2FsQ2VudGVyQSk7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEsIHRoaXMubV9sYWxjQSk7XG4gICAgY29uc3QgckE6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFBLCB0aGlzLm1fbGFsY0EsIHRoaXMubV9yQSk7XG4gICAgLy8gYjJWZWMyIHJCID0gYjJNdWwocUIsIG1fbG9jYWxBbmNob3JCIC0gbV9sb2NhbENlbnRlckIpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCLCB0aGlzLm1fbGFsY0IpO1xuICAgIGNvbnN0IHJCOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQiwgdGhpcy5tX2xhbGNCLCB0aGlzLm1fckIpO1xuICAgIC8vIGIyVmVjMiBkID0gKGNCIC0gY0EpICsgckIgLSByQTtcbiAgICBjb25zdCBkOiBiMlZlYzIgPSBiMlZlYzIuQWRkVlYoXG4gICAgICBiMlZlYzIuU3ViVlYoY0IsIGNBLCBiMlZlYzIuc190MCksXG4gICAgICBiMlZlYzIuU3ViVlYockIsIHJBLCBiMlZlYzIuc190MSksXG4gICAgICBiMlByaXNtYXRpY0pvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfZCk7XG5cbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XG5cbiAgICAvLyBDb21wdXRlIG1vdG9yIEphY29iaWFuIGFuZCBlZmZlY3RpdmUgbWFzcy5cbiAgICB7XG4gICAgICAvLyBtX2F4aXMgPSBiMk11bChxQSwgbV9sb2NhbFhBeGlzQSk7XG4gICAgICBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xvY2FsWEF4aXNBLCB0aGlzLm1fYXhpcyk7XG4gICAgICAvLyBtX2ExID0gYjJDcm9zcyhkICsgckEsIG1fYXhpcyk7XG4gICAgICB0aGlzLm1fYTEgPSBiMlZlYzIuQ3Jvc3NWVihiMlZlYzIuQWRkVlYoZCwgckEsIGIyVmVjMi5zX3QwKSwgdGhpcy5tX2F4aXMpO1xuICAgICAgLy8gbV9hMiA9IGIyQ3Jvc3MockIsIG1fYXhpcyk7XG4gICAgICB0aGlzLm1fYTIgPSBiMlZlYzIuQ3Jvc3NWVihyQiwgdGhpcy5tX2F4aXMpO1xuXG4gICAgICB0aGlzLm1fYXhpYWxNYXNzID0gbUEgKyBtQiArIGlBICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgaUIgKiB0aGlzLm1fYTIgKiB0aGlzLm1fYTI7XG4gICAgICBpZiAodGhpcy5tX2F4aWFsTWFzcyA+IDApIHtcbiAgICAgICAgdGhpcy5tX2F4aWFsTWFzcyA9IDEgLyB0aGlzLm1fYXhpYWxNYXNzO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByaXNtYXRpYyBjb25zdHJhaW50LlxuICAgIHtcbiAgICAgIC8vIG1fcGVycCA9IGIyTXVsKHFBLCBtX2xvY2FsWUF4aXNBKTtcbiAgICAgIGIyUm90Lk11bFJWKHFBLCB0aGlzLm1fbG9jYWxZQXhpc0EsIHRoaXMubV9wZXJwKTtcblxuICAgICAgLy8gbV9zMSA9IGIyQ3Jvc3MoZCArIHJBLCBtX3BlcnApO1xuICAgICAgdGhpcy5tX3MxID0gYjJWZWMyLkNyb3NzVlYoYjJWZWMyLkFkZFZWKGQsIHJBLCBiMlZlYzIuc190MCksIHRoaXMubV9wZXJwKTtcbiAgICAgIC8vIG1fczIgPSBiMkNyb3NzKHJCLCBtX3BlcnApO1xuICAgICAgdGhpcy5tX3MyID0gYjJWZWMyLkNyb3NzVlYockIsIHRoaXMubV9wZXJwKTtcblxuICAgICAgLy8gZmxvYXQzMiBrMTEgPSBtQSArIG1CICsgaUEgKiBtX3MxICogbV9zMSArIGlCICogbV9zMiAqIG1fczI7XG4gICAgICB0aGlzLm1fSy5leC54ID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaUIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7XG4gICAgICAvLyBmbG9hdDMyIGsxMiA9IGlBICogbV9zMSArIGlCICogbV9zMjtcbiAgICAgIHRoaXMubV9LLmV4LnkgPSBpQSAqIHRoaXMubV9zMSArIGlCICogdGhpcy5tX3MyO1xuICAgICAgdGhpcy5tX0suZXkueCA9IHRoaXMubV9LLmV4Lnk7XG4gICAgICAvLyBmbG9hdDMyIGsyMiA9IGlBICsgaUI7XG4gICAgICB0aGlzLm1fSy5leS55ID0gaUEgKyBpQjtcbiAgICAgIGlmICh0aGlzLm1fSy5leS55ID09PSAwKSB7XG4gICAgICAgIC8vIEZvciBib2RpZXMgd2l0aCBmaXhlZCByb3RhdGlvbi5cbiAgICAgICAgdGhpcy5tX0suZXkueSA9IDE7XG4gICAgICB9XG5cbiAgICAgIC8vIG1fSy5leC5TZXQoazExLCBrMTIpO1xuICAgICAgLy8gbV9LLmV5LlNldChrMTIsIGsyMik7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBtb3RvciBhbmQgbGltaXQgdGVybXMuXG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgdGhpcy5tX3RyYW5zbGF0aW9uID0gYjJWZWMyLkRvdFZWKHRoaXMubV9heGlzLCBkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2xvd2VySW1wdWxzZSA9IDAuMDtcbiAgICAgIHRoaXMubV91cHBlckltcHVsc2UgPSAwLjA7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1fZW5hYmxlTW90b3IpIHtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwO1xuICAgIH1cblxuICAgIGlmIChkYXRhLnN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAvLyBBY2NvdW50IGZvciB2YXJpYWJsZSB0aW1lIHN0ZXAuXG4gICAgICAvLyBtX2ltcHVsc2UgKj0gZGF0YS5zdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZWxmTXVsKGRhdGEuc3RlcC5kdFJhdGlvKTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgKj0gZGF0YS5zdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSAqPSBkYXRhLnN0ZXAuZHRSYXRpbztcblxuICAgICAgY29uc3QgYXhpYWxJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2xvd2VySW1wdWxzZSAtIHRoaXMubV91cHBlckltcHVsc2U7XG4gICAgICAvLyBiMlZlYzIgUCA9IG1faW1wdWxzZS54ICogbV9wZXJwICsgYXhpYWxJbXB1bHNlICogbV9heGlzO1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLkFkZFZWKFxuICAgICAgICBiMlZlYzIuTXVsU1YodGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX3BlcnAsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgYjJWZWMyLk11bFNWKGF4aWFsSW1wdWxzZSwgdGhpcy5tX2F4aXMsIGIyVmVjMi5zX3QxKSxcbiAgICAgICAgYjJQcmlzbWF0aWNKb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuICAgICAgLy8gZmxvYXQgTEEgPSBtX2ltcHVsc2UueCAqIG1fczEgKyBtX2ltcHVsc2UueSArIGF4aWFsSW1wdWxzZSAqIG1fYTE7XG4gICAgICBjb25zdCBMQSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fczEgKyB0aGlzLm1faW1wdWxzZS55ICsgYXhpYWxJbXB1bHNlICogdGhpcy5tX2ExO1xuICAgICAgLy8gZmxvYXQgTEIgPSBtX2ltcHVsc2UueCAqIG1fczIgKyBtX2ltcHVsc2UueSArIGF4aWFsSW1wdWxzZSAqIG1fYTI7XG4gICAgICBjb25zdCBMQiA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fczIgKyB0aGlzLm1faW1wdWxzZS55ICsgYXhpYWxJbXB1bHNlICogdGhpcy5tX2EyO1xuXG4gICAgICAvLyB2QSAtPSBtQSAqIFA7XG4gICAgICB2QS5TZWxmTXVsU3ViKG1BLCBQKTtcbiAgICAgIHdBIC09IGlBICogTEE7XG5cbiAgICAgIC8vIHZCICs9IG1CICogUDtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgd0IgKz0gaUIgKiBMQjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDtcbiAgICAgIHRoaXMubV9sb3dlckltcHVsc2UgPSAwLjA7XG4gICAgICB0aGlzLm1fdXBwZXJJbXB1bHNlID0gMC4wO1xuICAgIH1cblxuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52ID0gdkE7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLncgPSB3QTtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICAvLyBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19mMnIgPSBuZXcgYjJWZWMyKCk7XG4gIC8vIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2YxID0gbmV3IGIyVmVjMygpO1xuICAvLyBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19kZjMgPSBuZXcgYjJWZWMzKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2RmID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IHZBOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udjtcbiAgICBsZXQgd0E6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53O1xuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcbiAgICBsZXQgd0I6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53O1xuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgLy8gU29sdmUgbGluZWFyIG1vdG9yIGNvbnN0cmFpbnQuXG4gICAgaWYgKHRoaXMubV9lbmFibGVNb3Rvcikge1xuICAgICAgLy8gZmxvYXQzMiBDZG90ID0gYjJEb3QobV9heGlzLCB2QiAtIHZBKSArIG1fYTIgKiB3QiAtIG1fYTEgKiB3QTtcbiAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fYXhpcywgYjJWZWMyLlN1YlZWKHZCLCB2QSwgYjJWZWMyLnNfdDApKSArIHRoaXMubV9hMiAqIHdCIC0gdGhpcy5tX2ExICogd0E7XG4gICAgICBsZXQgaW1wdWxzZSA9IHRoaXMubV9heGlhbE1hc3MgKiAodGhpcy5tX21vdG9yU3BlZWQgLSBDZG90KTtcbiAgICAgIGNvbnN0IG9sZEltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IGRhdGEuc3RlcC5kdCAqIHRoaXMubV9tYXhNb3RvckZvcmNlO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IGIyQ2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsICgtbWF4SW1wdWxzZSksIG1heEltcHVsc2UpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuXG4gICAgICAvLyBiMlZlYzIgUCA9IGltcHVsc2UgKiBtX2F4aXM7XG4gICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoaW1wdWxzZSwgdGhpcy5tX2F4aXMsIGIyUHJpc21hdGljSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICBjb25zdCBMQSA9IGltcHVsc2UgKiB0aGlzLm1fYTE7XG4gICAgICBjb25zdCBMQiA9IGltcHVsc2UgKiB0aGlzLm1fYTI7XG5cbiAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgd0EgLT0gaUEgKiBMQTtcbiAgICAgIC8vIHZCICs9IG1CICogUDtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgd0IgKz0gaUIgKiBMQjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICAvLyBMb3dlciBsaW1pdFxuICAgICAge1xuICAgICAgICBjb25zdCBDOiBudW1iZXIgPSB0aGlzLm1fdHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbjtcbiAgICAgICAgY29uc3QgQ2RvdDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHRoaXMubV9heGlzLCBiMlZlYzIuU3ViVlYodkIsIHZBLCBiMlZlYzIuc190MCkpICsgdGhpcy5tX2EyICogd0IgLSB0aGlzLm1fYTEgKiB3QTtcbiAgICAgICAgbGV0IGltcHVsc2U6IG51bWJlciA9IC10aGlzLm1fYXhpYWxNYXNzICogKENkb3QgKyBiMk1heChDLCAwLjApICogZGF0YS5zdGVwLmludl9kdCk7XG4gICAgICAgIGNvbnN0IG9sZEltcHVsc2U6IG51bWJlciA9IHRoaXMubV9sb3dlckltcHVsc2U7XG4gICAgICAgIHRoaXMubV9sb3dlckltcHVsc2UgPSBiMk1heCh0aGlzLm1fbG93ZXJJbXB1bHNlICsgaW1wdWxzZSwgMC4wKTtcbiAgICAgICAgaW1wdWxzZSA9IHRoaXMubV9sb3dlckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuXG4gICAgICAgIC8vIGIyVmVjMiBQID0gaW1wdWxzZSAqIHRoaXMubV9heGlzO1xuICAgICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoaW1wdWxzZSwgdGhpcy5tX2F4aXMsIGIyUHJpc21hdGljSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICAgIGNvbnN0IExBOiBudW1iZXIgPSBpbXB1bHNlICogdGhpcy5tX2ExO1xuICAgICAgICBjb25zdCBMQjogbnVtYmVyID0gaW1wdWxzZSAqIHRoaXMubV9hMjtcblxuICAgICAgICAvLyB2QSAtPSBtQSAqIFA7XG4gICAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgICB3QSAtPSBpQSAqIExBO1xuICAgICAgICAvLyB2QiArPSBtQiAqIFA7XG4gICAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgICB3QiArPSBpQiAqIExCO1xuICAgICAgfVxuXG4gICAgICAvLyBVcHBlciBsaW1pdFxuICAgICAgLy8gTm90ZTogc2lnbnMgYXJlIGZsaXBwZWQgdG8ga2VlcCBDIHBvc2l0aXZlIHdoZW4gdGhlIGNvbnN0cmFpbnQgaXMgc2F0aXNmaWVkLlxuICAgICAgLy8gVGhpcyBhbHNvIGtlZXBzIHRoZSBpbXB1bHNlIHBvc2l0aXZlIHdoZW4gdGhlIGxpbWl0IGlzIGFjdGl2ZS5cbiAgICAgIHtcbiAgICAgICAgY29uc3QgQzogbnVtYmVyID0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fdHJhbnNsYXRpb247XG4gICAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fYXhpcywgYjJWZWMyLlN1YlZWKHZBLCB2QiwgYjJWZWMyLnNfdDApKSArIHRoaXMubV9hMSAqIHdBIC0gdGhpcy5tX2EyICogd0I7XG4gICAgICAgIGxldCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX2F4aWFsTWFzcyAqIChDZG90ICsgYjJNYXgoQywgMC4wKSAqIGRhdGEuc3RlcC5pbnZfZHQpO1xuICAgICAgICBjb25zdCBvbGRJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fdXBwZXJJbXB1bHNlO1xuICAgICAgICB0aGlzLm1fdXBwZXJJbXB1bHNlID0gYjJNYXgodGhpcy5tX3VwcGVySW1wdWxzZSArIGltcHVsc2UsIDAuMCk7XG4gICAgICAgIGltcHVsc2UgPSB0aGlzLm1fdXBwZXJJbXB1bHNlIC0gb2xkSW1wdWxzZTtcblxuICAgICAgICAvLyBiMlZlYzIgUCA9IGltcHVsc2UgKiB0aGlzLm1fYXhpcztcbiAgICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKGltcHVsc2UsIHRoaXMubV9heGlzLCBiMlByaXNtYXRpY0pvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuICAgICAgICBjb25zdCBMQTogbnVtYmVyID0gaW1wdWxzZSAqIHRoaXMubV9hMTtcbiAgICAgICAgY29uc3QgTEI6IG51bWJlciA9IGltcHVsc2UgKiB0aGlzLm1fYTI7XG5cbiAgICAgICAgLy8gdkEgKz0gbUEgKiBQO1xuICAgICAgICB2QS5TZWxmTXVsQWRkKG1BLCBQKTtcbiAgICAgICAgd0EgKz0gaUEgKiBMQTtcbiAgICAgICAgLy8gdkIgLT0gbUIgKiBQO1xuICAgICAgICB2Qi5TZWxmTXVsU3ViKG1CLCBQKTtcbiAgICAgICAgd0IgLT0gaUIgKiBMQjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTb2x2ZSB0aGUgcHJpc21hdGljIGNvbnN0cmFpbnQgaW4gYmxvY2sgZm9ybS5cbiAgICB7XG4gICAgICAvLyBiMlZlYzIgQ2RvdDtcbiAgICAgIC8vIENkb3QueCA9IGIyRG90KG1fcGVycCwgdkIgLSB2QSkgKyBtX3MyICogd0IgLSBtX3MxICogd0E7XG4gICAgICBjb25zdCBDZG90X3g6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fcGVycCwgYjJWZWMyLlN1YlZWKHZCLCB2QSwgYjJWZWMyLnNfdDApKSArIHRoaXMubV9zMiAqIHdCIC0gdGhpcy5tX3MxICogd0E7XG4gICAgICAvLyBDZG90LnkgPSB3QiAtIHdBO1xuICAgICAgY29uc3QgQ2RvdF95ID0gd0IgLSB3QTtcblxuICAgICAgLy8gYjJWZWMyIGRmID0gbV9LLlNvbHZlKC1DZG90KTtcbiAgICAgIGNvbnN0IGRmID0gdGhpcy5tX0suU29sdmUoLUNkb3RfeCwgLUNkb3RfeSwgYjJQcmlzbWF0aWNKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19kZik7XG4gICAgICAvLyBtX2ltcHVsc2UgKz0gZGY7XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZWxmQWRkKGRmKTtcblxuICAgICAgLy8gYjJWZWMyIFAgPSBkZi54ICogbV9wZXJwO1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKGRmLngsIHRoaXMubV9wZXJwLCBiMlByaXNtYXRpY0pvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuICAgICAgLy8gZmxvYXQzMiBMQSA9IGRmLnggKiBtX3MxICsgZGYueTtcbiAgICAgIGNvbnN0IExBID0gZGYueCAqIHRoaXMubV9zMSArIGRmLnk7XG4gICAgICAvLyBmbG9hdDMyIExCID0gZGYueCAqIG1fczIgKyBkZi55O1xuICAgICAgY29uc3QgTEIgPSBkZi54ICogdGhpcy5tX3MyICsgZGYueTtcblxuICAgICAgLy8gdkEgLT0gbUEgKiBQO1xuICAgICAgdkEuU2VsZk11bFN1YihtQSwgUCk7XG4gICAgICB3QSAtPSBpQSAqIExBO1xuXG4gICAgICAvLyB2QiArPSBtQiAqIFA7XG4gICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgIHdCICs9IGlCICogTEI7XG4gICAgfVxuXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnYgPSB2QTtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udyA9IHdBO1xuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52ID0gdkI7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLncgPSB3QjtcbiAgfVxuXG4gIC8vIEEgdmVsb2NpdHkgYmFzZWQgc29sdmVyIGNvbXB1dGVzIHJlYWN0aW9uIGZvcmNlcyhpbXB1bHNlcykgdXNpbmcgdGhlIHZlbG9jaXR5IGNvbnN0cmFpbnQgc29sdmVyLlVuZGVyIHRoaXMgY29udGV4dCxcbiAgLy8gdGhlIHBvc2l0aW9uIHNvbHZlciBpcyBub3QgdGhlcmUgdG8gcmVzb2x2ZSBmb3JjZXMuSXQgaXMgb25seSB0aGVyZSB0byBjb3BlIHdpdGggaW50ZWdyYXRpb24gZXJyb3IuXG4gIC8vXG4gIC8vIFRoZXJlZm9yZSwgdGhlIHBzZXVkbyBpbXB1bHNlcyBpbiB0aGUgcG9zaXRpb24gc29sdmVyIGRvIG5vdCBoYXZlIGFueSBwaHlzaWNhbCBtZWFuaW5nLlRodXMgaXQgaXMgb2theSBpZiB0aGV5IHN1Y2suXG4gIC8vXG4gIC8vIFdlIGNvdWxkIHRha2UgdGhlIGFjdGl2ZSBzdGF0ZSBmcm9tIHRoZSB2ZWxvY2l0eSBzb2x2ZXIuSG93ZXZlciwgdGhlIGpvaW50IG1pZ2h0IHB1c2ggcGFzdCB0aGUgbGltaXQgd2hlbiB0aGUgdmVsb2NpdHlcbiAgLy8gc29sdmVyIGluZGljYXRlcyB0aGUgbGltaXQgaXMgaW5hY3RpdmUuXG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2QgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2ltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2ltcHVsc2UxID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNBOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jO1xuICAgIGxldCBhQTogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYTtcbiAgICBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBsZXQgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG5cbiAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcbiAgICAvLyBiMlZlYzIgZCA9IGNCICsgckIgLSBjQSAtIHJBO1xuICAgIGNvbnN0IGQ6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihcbiAgICAgIGIyVmVjMi5BZGRWVihjQiwgckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgIGIyVmVjMi5BZGRWVihjQSwgckEsIGIyVmVjMi5zX3QxKSxcbiAgICAgIGIyUHJpc21hdGljSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfZCk7XG5cbiAgICAvLyBiMlZlYzIgYXhpcyA9IGIyTXVsKHFBLCBtX2xvY2FsWEF4aXNBKTtcbiAgICBjb25zdCBheGlzOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xvY2FsWEF4aXNBLCB0aGlzLm1fYXhpcyk7XG4gICAgLy8gZmxvYXQzMiBhMSA9IGIyQ3Jvc3MoZCArIHJBLCBheGlzKTtcbiAgICBjb25zdCBhMSA9IGIyVmVjMi5Dcm9zc1ZWKGIyVmVjMi5BZGRWVihkLCByQSwgYjJWZWMyLnNfdDApLCBheGlzKTtcbiAgICAvLyBmbG9hdDMyIGEyID0gYjJDcm9zcyhyQiwgYXhpcyk7XG4gICAgY29uc3QgYTIgPSBiMlZlYzIuQ3Jvc3NWVihyQiwgYXhpcyk7XG4gICAgLy8gYjJWZWMyIHBlcnAgPSBiMk11bChxQSwgbV9sb2NhbFlBeGlzQSk7XG4gICAgY29uc3QgcGVycDogYjJWZWMyID0gYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sb2NhbFlBeGlzQSwgdGhpcy5tX3BlcnApO1xuXG4gICAgLy8gZmxvYXQzMiBzMSA9IGIyQ3Jvc3MoZCArIHJBLCBwZXJwKTtcbiAgICBjb25zdCBzMSA9IGIyVmVjMi5Dcm9zc1ZWKGIyVmVjMi5BZGRWVihkLCByQSwgYjJWZWMyLnNfdDApLCBwZXJwKTtcbiAgICAvLyBmbG9hdDMyIHMyID0gYjJDcm9zcyhyQiwgcGVycCk7XG4gICAgY29uc3QgczIgPSBiMlZlYzIuQ3Jvc3NWVihyQiwgcGVycCk7XG5cbiAgICAvLyBiMlZlYzMgaW1wdWxzZTtcbiAgICBsZXQgaW1wdWxzZSA9IGIyUHJpc21hdGljSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfaW1wdWxzZTtcbiAgICAvLyBiMlZlYzIgQzE7XG4gICAgLy8gQzEueCA9IGIyRG90KHBlcnAsIGQpO1xuICAgIGNvbnN0IEMxX3g6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihwZXJwLCBkKTtcbiAgICAvLyBDMS55ID0gYUIgLSBhQSAtIG1fcmVmZXJlbmNlQW5nbGU7XG4gICAgY29uc3QgQzFfeSA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG5cbiAgICBsZXQgbGluZWFyRXJyb3IgPSBiMkFicyhDMV94KTtcbiAgICBjb25zdCBhbmd1bGFyRXJyb3IgPSBiMkFicyhDMV95KTtcblxuICAgIGxldCBhY3RpdmUgPSBmYWxzZTtcbiAgICBsZXQgQzI6IG51bWJlciA9IDA7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgLy8gZmxvYXQzMiB0cmFuc2xhdGlvbiA9IGIyRG90KGF4aXMsIGQpO1xuICAgICAgY29uc3QgdHJhbnNsYXRpb246IG51bWJlciA9IGIyVmVjMi5Eb3RWVihheGlzLCBkKTtcbiAgICAgIGlmIChiMkFicyh0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiAtIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSA8IDIgKiBiMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIEMyID0gdHJhbnNsYXRpb247XG4gICAgICAgIGxpbmVhckVycm9yID0gYjJNYXgobGluZWFyRXJyb3IsIGIyQWJzKHRyYW5zbGF0aW9uKSk7XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uIDw9IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMyID0gYjJNaW4odHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiwgMC4wKTtcbiAgICAgICAgbGluZWFyRXJyb3IgPSBiMk1heChsaW5lYXJFcnJvciwgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gLSB0cmFuc2xhdGlvbik7XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMyID0gYjJNYXgodHJhbnNsYXRpb24gLSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiwgMC4wKTtcbiAgICAgICAgbGluZWFyRXJyb3IgPSBiMk1heChsaW5lYXJFcnJvciwgdHJhbnNsYXRpb24gLSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbik7XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgLy8gZmxvYXQzMiBrMTEgPSBtQSArIG1CICsgaUEgKiBzMSAqIHMxICsgaUIgKiBzMiAqIHMyO1xuICAgICAgY29uc3QgazExID0gbUEgKyBtQiArIGlBICogczEgKiBzMSArIGlCICogczIgKiBzMjtcbiAgICAgIC8vIGZsb2F0MzIgazEyID0gaUEgKiBzMSArIGlCICogczI7XG4gICAgICBjb25zdCBrMTIgPSBpQSAqIHMxICsgaUIgKiBzMjtcbiAgICAgIC8vIGZsb2F0MzIgazEzID0gaUEgKiBzMSAqIGExICsgaUIgKiBzMiAqIGEyO1xuICAgICAgY29uc3QgazEzID0gaUEgKiBzMSAqIGExICsgaUIgKiBzMiAqIGEyO1xuICAgICAgLy8gZmxvYXQzMiBrMjIgPSBpQSArIGlCO1xuICAgICAgbGV0IGsyMiA9IGlBICsgaUI7XG4gICAgICBpZiAoazIyID09PSAwKSB7XG4gICAgICAgIC8vIEZvciBmaXhlZCByb3RhdGlvblxuICAgICAgICBrMjIgPSAxO1xuICAgICAgfVxuICAgICAgLy8gZmxvYXQzMiBrMjMgPSBpQSAqIGExICsgaUIgKiBhMjtcbiAgICAgIGNvbnN0IGsyMyA9IGlBICogYTEgKyBpQiAqIGEyO1xuICAgICAgLy8gZmxvYXQzMiBrMzMgPSBtQSArIG1CICsgaUEgKiBhMSAqIGExICsgaUIgKiBhMiAqIGEyO1xuICAgICAgY29uc3QgazMzID0gbUEgKyBtQiArIGlBICogYTEgKiBhMSArIGlCICogYTIgKiBhMjtcblxuICAgICAgLy8gYjJNYXQzMyBLO1xuICAgICAgY29uc3QgSyA9IHRoaXMubV9LMztcbiAgICAgIC8vIEsuZXguU2V0KGsxMSwgazEyLCBrMTMpO1xuICAgICAgSy5leC5TZXRYWVooazExLCBrMTIsIGsxMyk7XG4gICAgICAvLyBLLmV5LlNldChrMTIsIGsyMiwgazIzKTtcbiAgICAgIEsuZXkuU2V0WFlaKGsxMiwgazIyLCBrMjMpO1xuICAgICAgLy8gSy5lei5TZXQoazEzLCBrMjMsIGszMyk7XG4gICAgICBLLmV6LlNldFhZWihrMTMsIGsyMywgazMzKTtcblxuICAgICAgLy8gYjJWZWMzIEM7XG4gICAgICAvLyBDLnggPSBDMS54O1xuICAgICAgLy8gQy55ID0gQzEueTtcbiAgICAgIC8vIEMueiA9IEMyO1xuXG4gICAgICAvLyBpbXB1bHNlID0gSy5Tb2x2ZTMzKC1DKTtcbiAgICAgIGltcHVsc2UgPSBLLlNvbHZlMzMoKC1DMV94KSwgKC1DMV95KSwgKC1DMiksIGltcHVsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBmbG9hdDMyIGsxMSA9IG1BICsgbUIgKyBpQSAqIHMxICogczEgKyBpQiAqIHMyICogczI7XG4gICAgICBjb25zdCBrMTEgPSBtQSArIG1CICsgaUEgKiBzMSAqIHMxICsgaUIgKiBzMiAqIHMyO1xuICAgICAgLy8gZmxvYXQzMiBrMTIgPSBpQSAqIHMxICsgaUIgKiBzMjtcbiAgICAgIGNvbnN0IGsxMiA9IGlBICogczEgKyBpQiAqIHMyO1xuICAgICAgLy8gZmxvYXQzMiBrMjIgPSBpQSArIGlCO1xuICAgICAgbGV0IGsyMiA9IGlBICsgaUI7XG4gICAgICBpZiAoazIyID09PSAwKSB7XG4gICAgICAgIGsyMiA9IDE7XG4gICAgICB9XG5cbiAgICAgIC8vIGIyTWF0MjIgSztcbiAgICAgIGNvbnN0IEsyID0gdGhpcy5tX0syO1xuICAgICAgLy8gSy5leC5TZXQoazExLCBrMTIpO1xuICAgICAgSzIuZXguU2V0KGsxMSwgazEyKTtcbiAgICAgIC8vIEsuZXkuU2V0KGsxMiwgazIyKTtcbiAgICAgIEsyLmV5LlNldChrMTIsIGsyMik7XG5cbiAgICAgIC8vIGIyVmVjMiBpbXB1bHNlMSA9IEsuU29sdmUoLUMxKTtcbiAgICAgIGNvbnN0IGltcHVsc2UxID0gSzIuU29sdmUoKC1DMV94KSwgKC1DMV95KSwgYjJQcmlzbWF0aWNKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19pbXB1bHNlMSk7XG4gICAgICBpbXB1bHNlLnggPSBpbXB1bHNlMS54O1xuICAgICAgaW1wdWxzZS55ID0gaW1wdWxzZTEueTtcbiAgICAgIGltcHVsc2UueiA9IDA7XG4gICAgfVxuXG4gICAgLy8gYjJWZWMyIFAgPSBpbXB1bHNlLnggKiBwZXJwICsgaW1wdWxzZS56ICogYXhpcztcbiAgICBjb25zdCBQOiBiMlZlYzIgPSBiMlZlYzIuQWRkVlYoXG4gICAgICBiMlZlYzIuTXVsU1YoaW1wdWxzZS54LCBwZXJwLCBiMlZlYzIuc190MCksXG4gICAgICBiMlZlYzIuTXVsU1YoaW1wdWxzZS56LCBheGlzLCBiMlZlYzIuc190MSksXG4gICAgICBiMlByaXNtYXRpY0pvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX1ApO1xuICAgIC8vIGZsb2F0MzIgTEEgPSBpbXB1bHNlLnggKiBzMSArIGltcHVsc2UueSArIGltcHVsc2UueiAqIGExO1xuICAgIGNvbnN0IExBID0gaW1wdWxzZS54ICogczEgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiBhMTtcbiAgICAvLyBmbG9hdDMyIExCID0gaW1wdWxzZS54ICogczIgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiBhMjtcbiAgICBjb25zdCBMQiA9IGltcHVsc2UueCAqIHMyICsgaW1wdWxzZS55ICsgaW1wdWxzZS56ICogYTI7XG5cbiAgICAvLyBjQSAtPSBtQSAqIFA7XG4gICAgY0EuU2VsZk11bFN1YihtQSwgUCk7XG4gICAgYUEgLT0gaUEgKiBMQTtcbiAgICAvLyBjQiArPSBtQiAqIFA7XG4gICAgY0IuU2VsZk11bEFkZChtQiwgUCk7XG4gICAgYUIgKz0gaUIgKiBMQjtcblxuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmMgPSBjQTtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hID0gYUE7XG4gICAgLy8gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYyA9IGNCO1xuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmEgPSBhQjtcblxuICAgIHJldHVybiBsaW5lYXJFcnJvciA8PSBiMl9saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBiMl9hbmd1bGFyU2xvcDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRBbmNob3JBPFQgZXh0ZW5kcyBYWT4ob3V0OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEsIG91dCk7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQjxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uRm9yY2U8VCBleHRlbmRzIFhZPihpbnZfZHQ6IG51bWJlciwgb3V0OiBUKTogVCB7XG4gICAgb3V0LnggPSBpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9sb3dlckltcHVsc2UgLSB0aGlzLm1fdXBwZXJJbXB1bHNlKSAqIHRoaXMubV9heGlzLngpO1xuICAgIG91dC55ID0gaW52X2R0ICogKHRoaXMubV9pbXB1bHNlLnkgKiB0aGlzLm1fcGVycC55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1fbG93ZXJJbXB1bHNlIC0gdGhpcy5tX3VwcGVySW1wdWxzZSkgKiB0aGlzLm1fYXhpcy55KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uVG9ycXVlKGludl9kdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRMb2NhbEFuY2hvckEoKTogUmVhZG9ubHk8YjJWZWMyPiB7IHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JBOyB9XG5cbiAgcHVibGljIEdldExvY2FsQW5jaG9yQigpOiBSZWFkb25seTxiMlZlYzI+IHsgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7IH1cblxuICBwdWJsaWMgR2V0TG9jYWxBeGlzQSgpOiBSZWFkb25seTxiMlZlYzI+IHsgcmV0dXJuIHRoaXMubV9sb2NhbFhBeGlzQTsgfVxuXG4gIHB1YmxpYyBHZXRSZWZlcmVuY2VBbmdsZSgpIHsgcmV0dXJuIHRoaXMubV9yZWZlcmVuY2VBbmdsZTsgfVxuXG4gIHByaXZhdGUgc3RhdGljIEdldEpvaW50VHJhbnNsYXRpb25fc19wQSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgR2V0Sm9pbnRUcmFuc2xhdGlvbl9zX3BCID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBHZXRKb2ludFRyYW5zbGF0aW9uX3NfZCA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgR2V0Sm9pbnRUcmFuc2xhdGlvbl9zX2F4aXMgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBHZXRKb2ludFRyYW5zbGF0aW9uKCk6IG51bWJlciB7XG4gICAgLy8gYjJWZWMyIHBBID0gbV9ib2R5QS5HZXRXb3JsZFBvaW50KG1fbG9jYWxBbmNob3JBKTtcbiAgICBjb25zdCBwQSA9IHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEsIGIyUHJpc21hdGljSm9pbnQuR2V0Sm9pbnRUcmFuc2xhdGlvbl9zX3BBKTtcbiAgICAvLyBiMlZlYzIgcEIgPSBtX2JvZHlCLkdldFdvcmxkUG9pbnQobV9sb2NhbEFuY2hvckIpO1xuICAgIGNvbnN0IHBCID0gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgYjJQcmlzbWF0aWNKb2ludC5HZXRKb2ludFRyYW5zbGF0aW9uX3NfcEIpO1xuICAgIC8vIGIyVmVjMiBkID0gcEIgLSBwQTtcbiAgICBjb25zdCBkOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYocEIsIHBBLCBiMlByaXNtYXRpY0pvaW50LkdldEpvaW50VHJhbnNsYXRpb25fc19kKTtcbiAgICAvLyBiMlZlYzIgYXhpcyA9IG1fYm9keUEuR2V0V29ybGRWZWN0b3IobV9sb2NhbFhBeGlzQSk7XG4gICAgY29uc3QgYXhpcyA9IHRoaXMubV9ib2R5QS5HZXRXb3JsZFZlY3Rvcih0aGlzLm1fbG9jYWxYQXhpc0EsIGIyUHJpc21hdGljSm9pbnQuR2V0Sm9pbnRUcmFuc2xhdGlvbl9zX2F4aXMpO1xuXG4gICAgLy8gZmxvYXQzMiB0cmFuc2xhdGlvbiA9IGIyRG90KGQsIGF4aXMpO1xuICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZCwgYXhpcyk7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uO1xuICB9XG5cbiAgcHVibGljIEdldEpvaW50U3BlZWQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBiQTogYjJCb2R5ID0gdGhpcy5tX2JvZHlBO1xuICAgIGNvbnN0IGJCOiBiMkJvZHkgPSB0aGlzLm1fYm9keUI7XG5cbiAgICAvLyBiMlZlYzIgckEgPSBiMk11bChiQS0+bV94Zi5xLCBtX2xvY2FsQW5jaG9yQSAtIGJBLT5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQSwgYkEubV9zd2VlcC5sb2NhbENlbnRlciwgdGhpcy5tX2xhbGNBKTtcbiAgICBjb25zdCByQTogYjJWZWMyID0gYjJSb3QuTXVsUlYoYkEubV94Zi5xLCB0aGlzLm1fbGFsY0EsIHRoaXMubV9yQSk7XG4gICAgLy8gYjJWZWMyIHJCID0gYjJNdWwoYkItPm1feGYucSwgbV9sb2NhbEFuY2hvckIgLSBiQi0+bV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckIsIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIsIHRoaXMubV9sYWxjQik7XG4gICAgY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKGJCLm1feGYucSwgdGhpcy5tX2xhbGNCLCB0aGlzLm1fckIpO1xuICAgIC8vIGIyVmVjMiBwQSA9IGJBLT5tX3N3ZWVwLmMgKyByQTtcbiAgICBjb25zdCBwQTogYjJWZWMyID0gYjJWZWMyLkFkZFZWKGJBLm1fc3dlZXAuYywgckEsIGIyVmVjMi5zX3QwKTsgLy8gcEEgdXNlcyBzX3QwXG4gICAgLy8gYjJWZWMyIHBCID0gYkItPm1fc3dlZXAuYyArIHJCO1xuICAgIGNvbnN0IHBCOiBiMlZlYzIgPSBiMlZlYzIuQWRkVlYoYkIubV9zd2VlcC5jLCByQiwgYjJWZWMyLnNfdDEpOyAvLyBwQiB1c2VzIHNfdDFcbiAgICAvLyBiMlZlYzIgZCA9IHBCIC0gcEE7XG4gICAgY29uc3QgZDogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHBCLCBwQSwgYjJWZWMyLnNfdDIpOyAvLyBkIHVzZXMgc190MlxuICAgIC8vIGIyVmVjMiBheGlzID0gYjJNdWwoYkEubV94Zi5xLCBtX2xvY2FsWEF4aXNBKTtcbiAgICBjb25zdCBheGlzID0gYkEuR2V0V29ybGRWZWN0b3IodGhpcy5tX2xvY2FsWEF4aXNBLCB0aGlzLm1fYXhpcyk7XG5cbiAgICBjb25zdCB2QSA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgY29uc3QgdkIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIGNvbnN0IHdBID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgY29uc3Qgd0IgPSBiQi5tX2FuZ3VsYXJWZWxvY2l0eTtcblxuICAgIC8vIGZsb2F0MzIgc3BlZWQgPSBiMkRvdChkLCBiMkNyb3NzKHdBLCBheGlzKSkgKyBiMkRvdChheGlzLCB2QiArIGIyQ3Jvc3Mod0IsIHJCKSAtIHZBIC0gYjJDcm9zcyh3QSwgckEpKTtcbiAgICBjb25zdCBzcGVlZCA9XG4gICAgICBiMlZlYzIuRG90VlYoZCwgYjJWZWMyLkNyb3NzU1Yod0EsIGF4aXMsIGIyVmVjMi5zX3QwKSkgK1xuICAgICAgYjJWZWMyLkRvdFZWKFxuICAgICAgICBheGlzLFxuICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgICBiMlZlYzIuQWRkVkNyb3NzU1YodkEsIHdBLCByQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICAgIGIyVmVjMi5zX3QwKSk7XG4gICAgcmV0dXJuIHNwZWVkO1xuICB9XG5cbiAgcHVibGljIElzTGltaXRFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLm1fZW5hYmxlTGltaXQ7XG4gIH1cblxuICBwdWJsaWMgRW5hYmxlTGltaXQoZmxhZzogYm9vbGVhbikge1xuICAgIGlmIChmbGFnICE9PSB0aGlzLm1fZW5hYmxlTGltaXQpIHtcbiAgICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGZsYWc7XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gMC4wO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0TG93ZXJMaW1pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb247XG4gIH1cblxuICBwdWJsaWMgR2V0VXBwZXJMaW1pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247XG4gIH1cblxuICBwdWJsaWMgU2V0TGltaXRzKGxvd2VyOiBudW1iZXIsIHVwcGVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAobG93ZXIgIT09IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uIHx8IHVwcGVyICE9PSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbikge1xuICAgICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBsb3dlcjtcbiAgICAgIHRoaXMubV91cHBlclRyYW5zbGF0aW9uID0gdXBwZXI7XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gMC4wO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgSXNNb3RvckVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9lbmFibGVNb3RvcjtcbiAgfVxuXG4gIHB1YmxpYyBFbmFibGVNb3RvcihmbGFnOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGZsYWcgIT09IHRoaXMubV9lbmFibGVNb3Rvcikge1xuICAgICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZmxhZztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgU2V0TW90b3JTcGVlZChzcGVlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHNwZWVkICE9PSB0aGlzLm1fbW90b3JTcGVlZCkge1xuICAgICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX21vdG9yU3BlZWQgPSBzcGVlZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0TW90b3JTcGVlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5tX21vdG9yU3BlZWQ7XG4gIH1cblxuICBwdWJsaWMgU2V0TWF4TW90b3JGb3JjZShmb3JjZTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGZvcmNlICE9PSB0aGlzLm1fbWF4TW90b3JGb3JjZSkge1xuICAgICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX21heE1vdG9yRm9yY2UgPSBmb3JjZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0TWF4TW90b3JGb3JjZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5tX21heE1vdG9yRm9yY2U7IH1cblxuICBwdWJsaWMgR2V0TW90b3JGb3JjZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9tb3RvckltcHVsc2U7XG4gIH1cblxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICBjb25zdCBpbmRleEEgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICBjb25zdCBpbmRleEIgPSB0aGlzLm1fYm9keUIubV9pc2xhbmRJbmRleDtcblxuICAgIGxvZyhcIiAgY29uc3QgamQ6IGIyUHJpc21hdGljSm9pbnREZWYgPSBuZXcgYjJQcmlzbWF0aWNKb2ludERlZigpO1xcblwiKTtcbiAgICBsb2coXCIgIGpkLmJvZHlBID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhBKTtcbiAgICBsb2coXCIgIGpkLmJvZHlCID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhCKTtcbiAgICBsb2coXCIgIGpkLmNvbGxpZGVDb25uZWN0ZWQgPSAlcztcXG5cIiwgKHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBqZC5sb2NhbEFuY2hvckEuU2V0KCUuMTVmLCAlLjE1Zik7XFxuXCIsIHRoaXMubV9sb2NhbEFuY2hvckEueCwgdGhpcy5tX2xvY2FsQW5jaG9yQS55KTtcbiAgICBsb2coXCIgIGpkLmxvY2FsQW5jaG9yQi5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsQW5jaG9yQi54LCB0aGlzLm1fbG9jYWxBbmNob3JCLnkpO1xuICAgIGxvZyhcIiAgamQubG9jYWxBeGlzQS5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsWEF4aXNBLngsIHRoaXMubV9sb2NhbFhBeGlzQS55KTtcbiAgICBsb2coXCIgIGpkLnJlZmVyZW5jZUFuZ2xlID0gJS4xNWY7XFxuXCIsIHRoaXMubV9yZWZlcmVuY2VBbmdsZSk7XG4gICAgbG9nKFwiICBqZC5lbmFibGVMaW1pdCA9ICVzO1xcblwiLCAodGhpcy5tX2VuYWJsZUxpbWl0KSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBqZC5sb3dlclRyYW5zbGF0aW9uID0gJS4xNWY7XFxuXCIsIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKTtcbiAgICBsb2coXCIgIGpkLnVwcGVyVHJhbnNsYXRpb24gPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pO1xuICAgIGxvZyhcIiAgamQuZW5hYmxlTW90b3IgPSAlcztcXG5cIiwgKHRoaXMubV9lbmFibGVNb3RvcikgPyAoXCJ0cnVlXCIpIDogKFwiZmFsc2VcIikpO1xuICAgIGxvZyhcIiAgamQubW90b3JTcGVlZCA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbW90b3JTcGVlZCk7XG4gICAgbG9nKFwiICBqZC5tYXhNb3RvckZvcmNlID0gJS4xNWY7XFxuXCIsIHRoaXMubV9tYXhNb3RvckZvcmNlKTtcbiAgICBsb2coXCIgIGpvaW50c1slZF0gPSB0aGlzLm1fd29ybGQuQ3JlYXRlSm9pbnQoamQpO1xcblwiLCB0aGlzLm1faW5kZXgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3BBID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfcEIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19heGlzID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzEgPSBuZXcgYjJDb2xvcigwLjcsIDAuNywgMC43KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2MyID0gbmV3IGIyQ29sb3IoMC4zLCAwLjksIDAuMyk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19jMyA9IG5ldyBiMkNvbG9yKDAuOSwgMC4zLCAwLjMpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzQgPSBuZXcgYjJDb2xvcigwLjMsIDAuMywgMC45KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2M1ID0gbmV3IGIyQ29sb3IoMC40LCAwLjQsIDAuNCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19sb3dlciA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3VwcGVyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfcGVycCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIERyYXcoZHJhdzogYjJEcmF3KTogdm9pZCB7XG4gICAgY29uc3QgeGZBOiBSZWFkb25seTxiMlRyYW5zZm9ybT4gPSB0aGlzLm1fYm9keUEuR2V0VHJhbnNmb3JtKCk7XG4gICAgY29uc3QgeGZCOiBSZWFkb25seTxiMlRyYW5zZm9ybT4gPSB0aGlzLm1fYm9keUIuR2V0VHJhbnNmb3JtKCk7XG4gICAgY29uc3QgcEEgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkEsIHRoaXMubV9sb2NhbEFuY2hvckEsIGIyUHJpc21hdGljSm9pbnQuRHJhd19zX3BBKTtcbiAgICBjb25zdCBwQiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgdGhpcy5tX2xvY2FsQW5jaG9yQiwgYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfcEIpO1xuXG4gICAgLy8gYjJWZWMyIGF4aXMgPSBiMk11bCh4ZkEucSwgbV9sb2NhbFhBeGlzQSk7XG4gICAgY29uc3QgYXhpczogYjJWZWMyID0gYjJSb3QuTXVsUlYoeGZBLnEsIHRoaXMubV9sb2NhbFhBeGlzQSwgYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfYXhpcyk7XG5cbiAgICBjb25zdCBjMSA9IGIyUHJpc21hdGljSm9pbnQuRHJhd19zX2MxOyAvLyBiMkNvbG9yIGMxKDAuN2YsIDAuN2YsIDAuN2YpO1xuICAgIGNvbnN0IGMyID0gYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfYzI7IC8vIGIyQ29sb3IgYzIoMC4zZiwgMC45ZiwgMC4zZik7XG4gICAgY29uc3QgYzMgPSBiMlByaXNtYXRpY0pvaW50LkRyYXdfc19jMzsgLy8gYjJDb2xvciBjMygwLjlmLCAwLjNmLCAwLjNmKTtcbiAgICBjb25zdCBjNCA9IGIyUHJpc21hdGljSm9pbnQuRHJhd19zX2M0OyAvLyBiMkNvbG9yIGM0KDAuM2YsIDAuM2YsIDAuOWYpO1xuICAgIGNvbnN0IGM1ID0gYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfYzU7IC8vIGIyQ29sb3IgYzUoMC40ZiwgMC40ZiwgMC40Zik7XG5cbiAgICBkcmF3LkRyYXdTZWdtZW50KHBBLCBwQiwgYzUpO1xuXG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgLy8gYjJWZWMyIGxvd2VyID0gcEEgKyBtX2xvd2VyVHJhbnNsYXRpb24gKiBheGlzO1xuICAgICAgY29uc3QgbG93ZXIgPSBiMlZlYzIuQWRkVk11bFNWKHBBLCB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiwgYXhpcywgYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfbG93ZXIpO1xuICAgICAgLy8gYjJWZWMyIHVwcGVyID0gcEEgKyBtX3VwcGVyVHJhbnNsYXRpb24gKiBheGlzO1xuICAgICAgY29uc3QgdXBwZXIgPSBiMlZlYzIuQWRkVk11bFNWKHBBLCB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiwgYXhpcywgYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfdXBwZXIpO1xuICAgICAgLy8gYjJWZWMyIHBlcnAgPSBiMk11bCh4ZkEucSwgbV9sb2NhbFlBeGlzQSk7XG4gICAgICBjb25zdCBwZXJwID0gYjJSb3QuTXVsUlYoeGZBLnEsIHRoaXMubV9sb2NhbFlBeGlzQSwgYjJQcmlzbWF0aWNKb2ludC5EcmF3X3NfcGVycCk7XG4gICAgICBkcmF3LkRyYXdTZWdtZW50KGxvd2VyLCB1cHBlciwgYzEpO1xuICAgICAgLy8gZHJhdy5EcmF3U2VnbWVudChsb3dlciAtIDAuNSAqIHBlcnAsIGxvd2VyICsgMC41ICogcGVycCwgYzIpO1xuICAgICAgZHJhdy5EcmF3U2VnbWVudChiMlZlYzIuQWRkVk11bFNWKGxvd2VyLCAtMC41LCBwZXJwLCBiMlZlYzIuc190MCksIGIyVmVjMi5BZGRWTXVsU1YobG93ZXIsIDAuNSwgcGVycCwgYjJWZWMyLnNfdDEpLCBjMik7XG4gICAgICAvLyBkcmF3LkRyYXdTZWdtZW50KHVwcGVyIC0gMC41ICogcGVycCwgdXBwZXIgKyAwLjUgKiBwZXJwLCBjMyk7XG4gICAgICBkcmF3LkRyYXdTZWdtZW50KGIyVmVjMi5BZGRWTXVsU1YodXBwZXIsIC0wLjUsIHBlcnAsIGIyVmVjMi5zX3QwKSwgYjJWZWMyLkFkZFZNdWxTVih1cHBlciwgMC41LCBwZXJwLCBiMlZlYzIuc190MSksIGMzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZHJhdy5EcmF3U2VnbWVudChwQSAtIDEuMCAqIGF4aXMsIHBBICsgMS4wICogYXhpcywgYzEpO1xuICAgICAgZHJhdy5EcmF3U2VnbWVudChiMlZlYzIuQWRkVk11bFNWKHBBLCAtMS4wLCBheGlzLCBiMlZlYzIuc190MCksIGIyVmVjMi5BZGRWTXVsU1YocEEsIDEuMCwgYXhpcywgYjJWZWMyLnNfdDEpLCBjMSk7XG4gICAgfVxuXG4gICAgZHJhdy5EcmF3UG9pbnQocEEsIDUuMCwgYzEpO1xuICAgIGRyYXcuRHJhd1BvaW50KHBCLCA1LjAsIGM0KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBQ0E7QUFFQTtBQUVBO0FBOEJBO0FBQUE7QUFxQkE7QUFBQTtBQXBCQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBakNBO0FBZ0ZBO0FBQUE7QUE2Q0E7QUFBQTtBQTVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQU1BO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUdBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQVFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBTUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXpuQkE7QUFDQTtBQW1JQTtBQUlBO0FBMkhBO0FBQ0E7QUFDQTtBQUNBO0FBaUxBO0FBQ0E7QUFDQTtBQUNBO0FBZ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFzQ0E7QUFBQTtBQXhyQkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_prismatic_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_pulley_joint.ts":
/*!***********************************************!*\
  !*** ./src/box2d/dynamics/b2_pulley_joint.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2PulleyJoint = exports.b2PulleyJointDef = exports.b2_minPulleyLength = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nexports.b2_minPulleyLength = 2;\nvar b2PulleyJointDef = (function (_super) {\n    __extends(b2PulleyJointDef, _super);\n    function b2PulleyJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_pulleyJoint) || this;\n        _this.groundAnchorA = new b2_math_1.b2Vec2(-1, 1);\n        _this.groundAnchorB = new b2_math_1.b2Vec2(1, 1);\n        _this.localAnchorA = new b2_math_1.b2Vec2(-1, 0);\n        _this.localAnchorB = new b2_math_1.b2Vec2(1, 0);\n        _this.lengthA = 0;\n        _this.lengthB = 0;\n        _this.ratio = 1;\n        _this.collideConnected = true;\n        return _this;\n    }\n    b2PulleyJointDef.prototype.Initialize = function (bA, bB, groundA, groundB, anchorA, anchorB, r) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.groundAnchorA.Copy(groundA);\n        this.groundAnchorB.Copy(groundB);\n        this.bodyA.GetLocalPoint(anchorA, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchorB, this.localAnchorB);\n        this.lengthA = b2_math_1.b2Vec2.DistanceVV(anchorA, groundA);\n        this.lengthB = b2_math_1.b2Vec2.DistanceVV(anchorB, groundB);\n        this.ratio = r;\n    };\n    return b2PulleyJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2PulleyJointDef = b2PulleyJointDef;\nvar b2PulleyJoint = (function (_super) {\n    __extends(b2PulleyJoint, _super);\n    function b2PulleyJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_groundAnchorA = new b2_math_1.b2Vec2();\n        _this.m_groundAnchorB = new b2_math_1.b2Vec2();\n        _this.m_lengthA = 0;\n        _this.m_lengthB = 0;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_constant = 0;\n        _this.m_ratio = 0;\n        _this.m_impulse = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_uA = new b2_math_1.b2Vec2();\n        _this.m_uB = new b2_math_1.b2Vec2();\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_mass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_groundAnchorA.Copy(b2_settings_1.b2Maybe(def.groundAnchorA, new b2_math_1.b2Vec2(-1, 1)));\n        _this.m_groundAnchorB.Copy(b2_settings_1.b2Maybe(def.groundAnchorB, new b2_math_1.b2Vec2(1, 0)));\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, new b2_math_1.b2Vec2(-1, 0)));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, new b2_math_1.b2Vec2(1, 0)));\n        _this.m_lengthA = b2_settings_1.b2Maybe(def.lengthA, 0);\n        _this.m_lengthB = b2_settings_1.b2Maybe(def.lengthB, 0);\n        _this.m_ratio = b2_settings_1.b2Maybe(def.ratio, 1);\n        _this.m_constant = b2_settings_1.b2Maybe(def.lengthA, 0) + _this.m_ratio * b2_settings_1.b2Maybe(def.lengthB, 0);\n        _this.m_impulse = 0;\n        return _this;\n    }\n    b2PulleyJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        this.m_uA.Copy(cA).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA);\n        this.m_uB.Copy(cB).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);\n        var lengthA = this.m_uA.Length();\n        var lengthB = this.m_uB.Length();\n        if (lengthA > 10 * b2_settings_1.b2_linearSlop) {\n            this.m_uA.SelfMul(1 / lengthA);\n        }\n        else {\n            this.m_uA.SetZero();\n        }\n        if (lengthB > 10 * b2_settings_1.b2_linearSlop) {\n            this.m_uB.SelfMul(1 / lengthB);\n        }\n        else {\n            this.m_uB.SetZero();\n        }\n        var ruA = b2_math_1.b2Vec2.CrossVV(this.m_rA, this.m_uA);\n        var ruB = b2_math_1.b2Vec2.CrossVV(this.m_rB, this.m_uB);\n        var mA = this.m_invMassA + this.m_invIA * ruA * ruA;\n        var mB = this.m_invMassB + this.m_invIB * ruB * ruB;\n        this.m_mass = mA + this.m_ratio * this.m_ratio * mB;\n        if (this.m_mass > 0) {\n            this.m_mass = 1 / this.m_mass;\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse *= data.step.dtRatio;\n            var PA = b2_math_1.b2Vec2.MulSV(-(this.m_impulse), this.m_uA, b2PulleyJoint.InitVelocityConstraints_s_PA);\n            var PB = b2_math_1.b2Vec2.MulSV((-this.m_ratio * this.m_impulse), this.m_uB, b2PulleyJoint.InitVelocityConstraints_s_PB);\n            vA.SelfMulAdd(this.m_invMassA, PA);\n            wA += this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, PA);\n            vB.SelfMulAdd(this.m_invMassB, PB);\n            wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, PB);\n        }\n        else {\n            this.m_impulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2PulleyJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var vpA = b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2PulleyJoint.SolveVelocityConstraints_s_vpA);\n        var vpB = b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2PulleyJoint.SolveVelocityConstraints_s_vpB);\n        var Cdot = -b2_math_1.b2Vec2.DotVV(this.m_uA, vpA) - this.m_ratio * b2_math_1.b2Vec2.DotVV(this.m_uB, vpB);\n        var impulse = -this.m_mass * Cdot;\n        this.m_impulse += impulse;\n        var PA = b2_math_1.b2Vec2.MulSV(-impulse, this.m_uA, b2PulleyJoint.SolveVelocityConstraints_s_PA);\n        var PB = b2_math_1.b2Vec2.MulSV(-this.m_ratio * impulse, this.m_uB, b2PulleyJoint.SolveVelocityConstraints_s_PB);\n        vA.SelfMulAdd(this.m_invMassA, PA);\n        wA += this.m_invIA * b2_math_1.b2Vec2.CrossVV(this.m_rA, PA);\n        vB.SelfMulAdd(this.m_invMassB, PB);\n        wB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(this.m_rB, PB);\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2PulleyJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var uA = this.m_uA.Copy(cA).SelfAdd(rA).SelfSub(this.m_groundAnchorA);\n        var uB = this.m_uB.Copy(cB).SelfAdd(rB).SelfSub(this.m_groundAnchorB);\n        var lengthA = uA.Length();\n        var lengthB = uB.Length();\n        if (lengthA > 10 * b2_settings_1.b2_linearSlop) {\n            uA.SelfMul(1 / lengthA);\n        }\n        else {\n            uA.SetZero();\n        }\n        if (lengthB > 10 * b2_settings_1.b2_linearSlop) {\n            uB.SelfMul(1 / lengthB);\n        }\n        else {\n            uB.SetZero();\n        }\n        var ruA = b2_math_1.b2Vec2.CrossVV(rA, uA);\n        var ruB = b2_math_1.b2Vec2.CrossVV(rB, uB);\n        var mA = this.m_invMassA + this.m_invIA * ruA * ruA;\n        var mB = this.m_invMassB + this.m_invIB * ruB * ruB;\n        var mass = mA + this.m_ratio * this.m_ratio * mB;\n        if (mass > 0) {\n            mass = 1 / mass;\n        }\n        var C = this.m_constant - lengthA - this.m_ratio * lengthB;\n        var linearError = b2_math_1.b2Abs(C);\n        var impulse = -mass * C;\n        var PA = b2_math_1.b2Vec2.MulSV(-impulse, uA, b2PulleyJoint.SolvePositionConstraints_s_PA);\n        var PB = b2_math_1.b2Vec2.MulSV(-this.m_ratio * impulse, uB, b2PulleyJoint.SolvePositionConstraints_s_PB);\n        cA.SelfMulAdd(this.m_invMassA, PA);\n        aA += this.m_invIA * b2_math_1.b2Vec2.CrossVV(rA, PA);\n        cB.SelfMulAdd(this.m_invMassB, PB);\n        aB += this.m_invIB * b2_math_1.b2Vec2.CrossVV(rB, PB);\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        return linearError < b2_settings_1.b2_linearSlop;\n    };\n    b2PulleyJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2PulleyJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2PulleyJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * this.m_impulse * this.m_uB.x;\n        out.y = inv_dt * this.m_impulse * this.m_uB.y;\n        return out;\n    };\n    b2PulleyJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return 0;\n    };\n    b2PulleyJoint.prototype.GetGroundAnchorA = function () {\n        return this.m_groundAnchorA;\n    };\n    b2PulleyJoint.prototype.GetGroundAnchorB = function () {\n        return this.m_groundAnchorB;\n    };\n    b2PulleyJoint.prototype.GetLengthA = function () {\n        return this.m_lengthA;\n    };\n    b2PulleyJoint.prototype.GetLengthB = function () {\n        return this.m_lengthB;\n    };\n    b2PulleyJoint.prototype.GetRatio = function () {\n        return this.m_ratio;\n    };\n    b2PulleyJoint.prototype.GetCurrentLengthA = function () {\n        var p = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, b2PulleyJoint.GetCurrentLengthA_s_p);\n        var s = this.m_groundAnchorA;\n        return b2_math_1.b2Vec2.DistanceVV(p, s);\n    };\n    b2PulleyJoint.prototype.GetCurrentLengthB = function () {\n        var p = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, b2PulleyJoint.GetCurrentLengthB_s_p);\n        var s = this.m_groundAnchorB;\n        return b2_math_1.b2Vec2.DistanceVV(p, s);\n    };\n    b2PulleyJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2PulleyJointDef = new b2PulleyJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.groundAnchorA.Set(%.15f, %.15f);\\n\", this.m_groundAnchorA.x, this.m_groundAnchorA.y);\n        log(\"  jd.groundAnchorB.Set(%.15f, %.15f);\\n\", this.m_groundAnchorB.x, this.m_groundAnchorB.y);\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.lengthA = %.15f;\\n\", this.m_lengthA);\n        log(\"  jd.lengthB = %.15f;\\n\", this.m_lengthB);\n        log(\"  jd.ratio = %.15f;\\n\", this.m_ratio);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2PulleyJoint.prototype.ShiftOrigin = function (newOrigin) {\n        this.m_groundAnchorA.SelfSub(newOrigin);\n        this.m_groundAnchorB.SelfSub(newOrigin);\n    };\n    b2PulleyJoint.InitVelocityConstraints_s_PA = new b2_math_1.b2Vec2();\n    b2PulleyJoint.InitVelocityConstraints_s_PB = new b2_math_1.b2Vec2();\n    b2PulleyJoint.SolveVelocityConstraints_s_vpA = new b2_math_1.b2Vec2();\n    b2PulleyJoint.SolveVelocityConstraints_s_vpB = new b2_math_1.b2Vec2();\n    b2PulleyJoint.SolveVelocityConstraints_s_PA = new b2_math_1.b2Vec2();\n    b2PulleyJoint.SolveVelocityConstraints_s_PB = new b2_math_1.b2Vec2();\n    b2PulleyJoint.SolvePositionConstraints_s_PA = new b2_math_1.b2Vec2();\n    b2PulleyJoint.SolvePositionConstraints_s_PB = new b2_math_1.b2Vec2();\n    b2PulleyJoint.GetCurrentLengthA_s_p = new b2_math_1.b2Vec2();\n    b2PulleyJoint.GetCurrentLengthB_s_p = new b2_math_1.b2Vec2();\n    return b2PulleyJoint;\n}(b2_joint_1.b2Joint));\nexports.b2PulleyJoint = b2PulleyJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfcHVsbGV5X2pvaW50LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX3B1bGxleV9qb2ludC50cz8zMzE0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDExIEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQsIGIyX2Vwc2lsb24gfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9saW5lYXJTbG9wLCBiMk1heWJlIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJBYnMsIGIyVmVjMiwgYjJSb3QsIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi9iMl9ib2R5XCI7XG5pbXBvcnQgeyBiMkpvaW50LCBiMkpvaW50RGVmLCBiMkpvaW50VHlwZSwgYjJJSm9pbnREZWYgfSBmcm9tIFwiLi9iMl9qb2ludFwiO1xuaW1wb3J0IHsgYjJTb2x2ZXJEYXRhIH0gZnJvbSBcIi4vYjJfdGltZV9zdGVwXCI7XG5cbmV4cG9ydCBjb25zdCBiMl9taW5QdWxsZXlMZW5ndGg6IG51bWJlciA9IDI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJUHVsbGV5Sm9pbnREZWYgZXh0ZW5kcyBiMklKb2ludERlZiB7XG4gIGdyb3VuZEFuY2hvckE/OiBYWTtcblxuICBncm91bmRBbmNob3JCPzogWFk7XG5cbiAgbG9jYWxBbmNob3JBPzogWFk7XG5cbiAgbG9jYWxBbmNob3JCPzogWFk7XG5cbiAgbGVuZ3RoQT86IG51bWJlcjtcblxuICBsZW5ndGhCPzogbnVtYmVyO1xuXG4gIHJhdGlvPzogbnVtYmVyO1xufVxuXG4vLy8gUHVsbGV5IGpvaW50IGRlZmluaXRpb24uIFRoaXMgcmVxdWlyZXMgdHdvIGdyb3VuZCBhbmNob3JzLFxuLy8vIHR3byBkeW5hbWljIGJvZHkgYW5jaG9yIHBvaW50cywgYW5kIGEgcHVsbGV5IHJhdGlvLlxuZXhwb3J0IGNsYXNzIGIyUHVsbGV5Sm9pbnREZWYgZXh0ZW5kcyBiMkpvaW50RGVmIGltcGxlbWVudHMgYjJJUHVsbGV5Sm9pbnREZWYge1xuICBwdWJsaWMgcmVhZG9ubHkgZ3JvdW5kQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigtMSwgMSk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGdyb3VuZEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMSwgMSk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigtMSwgMCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQW5jaG9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigxLCAwKTtcblxuICBwdWJsaWMgbGVuZ3RoQTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbGVuZ3RoQjogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmF0aW86IG51bWJlciA9IDE7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoYjJKb2ludFR5cGUuZV9wdWxsZXlKb2ludCk7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0aWFsaXplKGJBOiBiMkJvZHksIGJCOiBiMkJvZHksIGdyb3VuZEE6IFhZLCBncm91bmRCOiBYWSwgYW5jaG9yQTogWFksIGFuY2hvckI6IFhZLCByOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmJvZHlBID0gYkE7XG4gICAgdGhpcy5ib2R5QiA9IGJCO1xuICAgIHRoaXMuZ3JvdW5kQW5jaG9yQS5Db3B5KGdyb3VuZEEpO1xuICAgIHRoaXMuZ3JvdW5kQW5jaG9yQi5Db3B5KGdyb3VuZEIpO1xuICAgIHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvckIsIHRoaXMubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLmxlbmd0aEEgPSBiMlZlYzIuRGlzdGFuY2VWVihhbmNob3JBLCBncm91bmRBKTtcbiAgICB0aGlzLmxlbmd0aEIgPSBiMlZlYzIuRGlzdGFuY2VWVihhbmNob3JCLCBncm91bmRCKTtcbiAgICB0aGlzLnJhdGlvID0gcjtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5yYXRpbyA+IGIyX2Vwc2lsb24pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlB1bGxleUpvaW50IGV4dGVuZHMgYjJKb2ludCB7XG4gIHB1YmxpYyByZWFkb25seSBtX2dyb3VuZEFuY2hvckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fZ3JvdW5kQW5jaG9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBtX2xlbmd0aEE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2xlbmd0aEI6IG51bWJlciA9IDA7XG5cbiAgLy8gU29sdmVyIHNoYXJlZFxuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIG1fY29uc3RhbnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3JhdGlvOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbXB1bHNlOiBudW1iZXIgPSAwO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV91QTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV91QjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIG1faW52TWFzc0E6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludk1hc3NCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZJQTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUI6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21hc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fcUE6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3FCOiBiMlJvdCA9IG5ldyBiMlJvdCgpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sYWxjQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogYjJJUHVsbGV5Sm9pbnREZWYpIHtcbiAgICBzdXBlcihkZWYpO1xuXG4gICAgdGhpcy5tX2dyb3VuZEFuY2hvckEuQ29weShiMk1heWJlKGRlZi5ncm91bmRBbmNob3JBLCBuZXcgYjJWZWMyKC0xLCAxKSkpO1xuICAgIHRoaXMubV9ncm91bmRBbmNob3JCLkNvcHkoYjJNYXliZShkZWYuZ3JvdW5kQW5jaG9yQiwgbmV3IGIyVmVjMigxLCAwKSkpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckEuQ29weShiMk1heWJlKGRlZi5sb2NhbEFuY2hvckEsIG5ldyBiMlZlYzIoLTEsIDApKSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQW5jaG9yQiwgbmV3IGIyVmVjMigxLCAwKSkpO1xuXG4gICAgdGhpcy5tX2xlbmd0aEEgPSBiMk1heWJlKGRlZi5sZW5ndGhBLCAwKTtcbiAgICB0aGlzLm1fbGVuZ3RoQiA9IGIyTWF5YmUoZGVmLmxlbmd0aEIsIDApO1xuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGIyTWF5YmUoZGVmLnJhdGlvLCAxKSAhPT0gMCk7XG4gICAgdGhpcy5tX3JhdGlvID0gYjJNYXliZShkZWYucmF0aW8sIDEpO1xuXG4gICAgdGhpcy5tX2NvbnN0YW50ID0gYjJNYXliZShkZWYubGVuZ3RoQSwgMCkgKyB0aGlzLm1fcmF0aW8gKiBiMk1heWJlKGRlZi5sZW5ndGhCLCAwKTtcblxuICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUEEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUEIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLm1faW5kZXhBID0gdGhpcy5tX2JvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2luZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEuQ29weSh0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQi5Db3B5KHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludklBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuXG4gICAgY29uc3QgY0E6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmM7XG4gICAgY29uc3QgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG5cbiAgICBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBjb25zdCBhQjogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYTtcbiAgICBjb25zdCB2QjogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnY7XG4gICAgbGV0IHdCOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udztcblxuICAgIC8vIGIyUm90IHFBKGFBKSwgcUIoYUIpO1xuICAgIGNvbnN0IHFBOiBiMlJvdCA9IHRoaXMubV9xQS5TZXRBbmdsZShhQSksIHFCOiBiMlJvdCA9IHRoaXMubV9xQi5TZXRBbmdsZShhQik7XG5cbiAgICAvLyBtX3JBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBLCB0aGlzLm1fbGFsY0EpO1xuICAgIGIyUm90Lk11bFJWKHFBLCB0aGlzLm1fbGFsY0EsIHRoaXMubV9yQSk7XG4gICAgLy8gbV9yQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQiwgdGhpcy5tX2xhbGNCKTtcbiAgICBiMlJvdC5NdWxSVihxQiwgdGhpcy5tX2xhbGNCLCB0aGlzLm1fckIpO1xuXG4gICAgLy8gR2V0IHRoZSBwdWxsZXkgYXhlcy5cbiAgICAvLyBtX3VBID0gY0EgKyBtX3JBIC0gbV9ncm91bmRBbmNob3JBO1xuICAgIHRoaXMubV91QS5Db3B5KGNBKS5TZWxmQWRkKHRoaXMubV9yQSkuU2VsZlN1Yih0aGlzLm1fZ3JvdW5kQW5jaG9yQSk7XG4gICAgLy8gbV91QiA9IGNCICsgbV9yQiAtIG1fZ3JvdW5kQW5jaG9yQjtcbiAgICB0aGlzLm1fdUIuQ29weShjQikuU2VsZkFkZCh0aGlzLm1fckIpLlNlbGZTdWIodGhpcy5tX2dyb3VuZEFuY2hvckIpO1xuXG4gICAgY29uc3QgbGVuZ3RoQTogbnVtYmVyID0gdGhpcy5tX3VBLkxlbmd0aCgpO1xuICAgIGNvbnN0IGxlbmd0aEI6IG51bWJlciA9IHRoaXMubV91Qi5MZW5ndGgoKTtcblxuICAgIGlmIChsZW5ndGhBID4gMTAgKiBiMl9saW5lYXJTbG9wKSB7XG4gICAgICB0aGlzLm1fdUEuU2VsZk11bCgxIC8gbGVuZ3RoQSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV91QS5TZXRaZXJvKCk7XG4gICAgfVxuXG4gICAgaWYgKGxlbmd0aEIgPiAxMCAqIGIyX2xpbmVhclNsb3ApIHtcbiAgICAgIHRoaXMubV91Qi5TZWxmTXVsKDEgLyBsZW5ndGhCKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3VCLlNldFplcm8oKTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIGVmZmVjdGl2ZSBtYXNzLlxuICAgIGNvbnN0IHJ1QTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCB0aGlzLm1fdUEpO1xuICAgIGNvbnN0IHJ1QjogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCB0aGlzLm1fdUIpO1xuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSArIHRoaXMubV9pbnZJQSAqIHJ1QSAqIHJ1QTtcbiAgICBjb25zdCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCICsgdGhpcy5tX2ludklCICogcnVCICogcnVCO1xuXG4gICAgdGhpcy5tX21hc3MgPSBtQSArIHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqIG1CO1xuXG4gICAgaWYgKHRoaXMubV9tYXNzID4gMCkge1xuICAgICAgdGhpcy5tX21hc3MgPSAxIC8gdGhpcy5tX21hc3M7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIC8vIFNjYWxlIGltcHVsc2VzIHRvIHN1cHBvcnQgdmFyaWFibGUgdGltZSBzdGVwcy5cbiAgICAgIHRoaXMubV9pbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuXG4gICAgICAvLyBXYXJtIHN0YXJ0aW5nLlxuICAgICAgLy8gYjJWZWMyIFBBID0gLShtX2ltcHVsc2UpICogbV91QTtcbiAgICAgIGNvbnN0IFBBOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoLSh0aGlzLm1faW1wdWxzZSksIHRoaXMubV91QSwgYjJQdWxsZXlKb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50c19zX1BBKTtcbiAgICAgIC8vIGIyVmVjMiBQQiA9ICgtbV9yYXRpbyAqIG1faW1wdWxzZSkgKiBtX3VCO1xuICAgICAgY29uc3QgUEI6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVigoLXRoaXMubV9yYXRpbyAqIHRoaXMubV9pbXB1bHNlKSwgdGhpcy5tX3VCLCBiMlB1bGxleUpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUEIpO1xuXG4gICAgICAvLyB2QSArPSBtX2ludk1hc3NBICogUEE7XG4gICAgICB2QS5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQSwgUEEpO1xuICAgICAgd0EgKz0gdGhpcy5tX2ludklBICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQQSk7XG4gICAgICAvLyB2QiArPSBtX2ludk1hc3NCICogUEI7XG4gICAgICB2Qi5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQiwgUEIpO1xuICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBQQik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdnBBID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc192cEIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1BBID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QQiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiB2b2lkIHtcbiAgICBjb25zdCB2QTogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnY7XG4gICAgbGV0IHdBOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udztcbiAgICBjb25zdCB2QjogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnY7XG4gICAgbGV0IHdCOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udztcblxuICAgIC8vIGIyVmVjMiB2cEEgPSB2QSArIGIyQ3Jvc3Mod0EsIG1fckEpO1xuICAgIGNvbnN0IHZwQTogYjJWZWMyID0gYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgdGhpcy5tX3JBLCBiMlB1bGxleUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX3ZwQSk7XG4gICAgLy8gYjJWZWMyIHZwQiA9IHZCICsgYjJDcm9zcyh3QiwgbV9yQik7XG4gICAgY29uc3QgdnBCOiBiMlZlYzIgPSBiMlZlYzIuQWRkVkNyb3NzU1YodkIsIHdCLCB0aGlzLm1fckIsIGIyUHVsbGV5Sm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfdnBCKTtcblxuICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IC1iMlZlYzIuRG90VlYodGhpcy5tX3VBLCB2cEEpIC0gdGhpcy5tX3JhdGlvICogYjJWZWMyLkRvdFZWKHRoaXMubV91QiwgdnBCKTtcbiAgICBjb25zdCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX21hc3MgKiBDZG90O1xuICAgIHRoaXMubV9pbXB1bHNlICs9IGltcHVsc2U7XG5cbiAgICAvLyBiMlZlYzIgUEEgPSAtaW1wdWxzZSAqIG1fdUE7XG4gICAgY29uc3QgUEE6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVigtaW1wdWxzZSwgdGhpcy5tX3VBLCBiMlB1bGxleUpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1BBKTtcbiAgICAvLyBiMlZlYzIgUEIgPSAtbV9yYXRpbyAqIGltcHVsc2UgKiBtX3VCO1xuICAgIGNvbnN0IFBCOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoLXRoaXMubV9yYXRpbyAqIGltcHVsc2UsIHRoaXMubV91QiwgYjJQdWxsZXlKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QQik7XG4gICAgLy8gdkEgKz0gbV9pbnZNYXNzQSAqIFBBO1xuICAgIHZBLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NBLCBQQSk7XG4gICAgd0EgKz0gdGhpcy5tX2ludklBICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQQSk7XG4gICAgLy8gdkIgKz0gbV9pbnZNYXNzQiAqIFBCO1xuICAgIHZCLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NCLCBQQik7XG4gICAgd0IgKz0gdGhpcy5tX2ludklCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBQQik7XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUEEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX1BCID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNBOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jO1xuICAgIGxldCBhQTogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYTtcbiAgICBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBsZXQgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG5cbiAgICAvLyBiMlJvdCBxQShhQSksIHFCKGFCKTtcbiAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBLCB0aGlzLm1fbGFsY0EpO1xuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQiwgdGhpcy5tX2xhbGNCKTtcbiAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcblxuICAgIC8vIEdldCB0aGUgcHVsbGV5IGF4ZXMuXG4gICAgLy8gYjJWZWMyIHVBID0gY0EgKyByQSAtIG1fZ3JvdW5kQW5jaG9yQTtcbiAgICBjb25zdCB1QSA9IHRoaXMubV91QS5Db3B5KGNBKS5TZWxmQWRkKHJBKS5TZWxmU3ViKHRoaXMubV9ncm91bmRBbmNob3JBKTtcbiAgICAvLyBiMlZlYzIgdUIgPSBjQiArIHJCIC0gbV9ncm91bmRBbmNob3JCO1xuICAgIGNvbnN0IHVCID0gdGhpcy5tX3VCLkNvcHkoY0IpLlNlbGZBZGQockIpLlNlbGZTdWIodGhpcy5tX2dyb3VuZEFuY2hvckIpO1xuXG4gICAgY29uc3QgbGVuZ3RoQTogbnVtYmVyID0gdUEuTGVuZ3RoKCk7XG4gICAgY29uc3QgbGVuZ3RoQjogbnVtYmVyID0gdUIuTGVuZ3RoKCk7XG5cbiAgICBpZiAobGVuZ3RoQSA+IDEwICogYjJfbGluZWFyU2xvcCkge1xuICAgICAgdUEuU2VsZk11bCgxIC8gbGVuZ3RoQSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVBLlNldFplcm8oKTtcbiAgICB9XG5cbiAgICBpZiAobGVuZ3RoQiA+IDEwICogYjJfbGluZWFyU2xvcCkge1xuICAgICAgdUIuU2VsZk11bCgxIC8gbGVuZ3RoQik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVCLlNldFplcm8oKTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIGVmZmVjdGl2ZSBtYXNzLlxuICAgIGNvbnN0IHJ1QTogbnVtYmVyID0gYjJWZWMyLkNyb3NzVlYockEsIHVBKTtcbiAgICBjb25zdCBydUI6IG51bWJlciA9IGIyVmVjMi5Dcm9zc1ZWKHJCLCB1Qik7XG5cbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBICsgdGhpcy5tX2ludklBICogcnVBICogcnVBO1xuICAgIGNvbnN0IG1COiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUIgKiBydUIgKiBydUI7XG5cbiAgICBsZXQgbWFzczogbnVtYmVyID0gbUEgKyB0aGlzLm1fcmF0aW8gKiB0aGlzLm1fcmF0aW8gKiBtQjtcblxuICAgIGlmIChtYXNzID4gMCkge1xuICAgICAgbWFzcyA9IDEgLyBtYXNzO1xuICAgIH1cblxuICAgIGNvbnN0IEM6IG51bWJlciA9IHRoaXMubV9jb25zdGFudCAtIGxlbmd0aEEgLSB0aGlzLm1fcmF0aW8gKiBsZW5ndGhCO1xuICAgIGNvbnN0IGxpbmVhckVycm9yOiBudW1iZXIgPSBiMkFicyhDKTtcblxuICAgIGNvbnN0IGltcHVsc2U6IG51bWJlciA9IC1tYXNzICogQztcblxuICAgIC8vIGIyVmVjMiBQQSA9IC1pbXB1bHNlICogdUE7XG4gICAgY29uc3QgUEE6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVigtaW1wdWxzZSwgdUEsIGIyUHVsbGV5Sm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUEEpO1xuICAgIC8vIGIyVmVjMiBQQiA9IC1tX3JhdGlvICogaW1wdWxzZSAqIHVCO1xuICAgIGNvbnN0IFBCOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoLXRoaXMubV9yYXRpbyAqIGltcHVsc2UsIHVCLCBiMlB1bGxleUpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX1BCKTtcblxuICAgIC8vIGNBICs9IG1faW52TWFzc0EgKiBQQTtcbiAgICBjQS5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQSwgUEEpO1xuICAgIGFBICs9IHRoaXMubV9pbnZJQSAqIGIyVmVjMi5Dcm9zc1ZWKHJBLCBQQSk7XG4gICAgLy8gY0IgKz0gbV9pbnZNYXNzQiAqIFBCO1xuICAgIGNCLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NCLCBQQik7XG4gICAgYUIgKz0gdGhpcy5tX2ludklCICogYjJWZWMyLkNyb3NzVlYockIsIFBCKTtcblxuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmMgPSBjQTtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hID0gYUE7XG4gICAgLy8gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYyA9IGNCO1xuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmEgPSBhQjtcblxuICAgIHJldHVybiBsaW5lYXJFcnJvciA8IGIyX2xpbmVhclNsb3A7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQTxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckI8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQiwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvbkZvcmNlPFQgZXh0ZW5kcyBYWT4oaW52X2R0OiBudW1iZXIsIG91dDogVCk6IFQge1xuICAgIC8vIGIyVmVjMiBQID0gbV9pbXB1bHNlICogbV91QjtcbiAgICAvLyByZXR1cm4gaW52X2R0ICogUDtcbiAgICBvdXQueCA9IGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3VCLng7XG4gICAgb3V0LnkgPSBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91Qi55O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwdWJsaWMgR2V0UmVhY3Rpb25Ub3JxdWUoaW52X2R0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIEdldEdyb3VuZEFuY2hvckEoKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ncm91bmRBbmNob3JBO1xuICB9XG5cbiAgcHVibGljIEdldEdyb3VuZEFuY2hvckIoKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ncm91bmRBbmNob3JCO1xuICB9XG5cbiAgcHVibGljIEdldExlbmd0aEEoKSB7XG4gICAgcmV0dXJuIHRoaXMubV9sZW5ndGhBO1xuICB9XG5cbiAgcHVibGljIEdldExlbmd0aEIoKSB7XG4gICAgcmV0dXJuIHRoaXMubV9sZW5ndGhCO1xuICB9XG5cbiAgcHVibGljIEdldFJhdGlvKCkge1xuICAgIHJldHVybiB0aGlzLm1fcmF0aW87XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBHZXRDdXJyZW50TGVuZ3RoQV9zX3AgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBHZXRDdXJyZW50TGVuZ3RoQSgpIHtcbiAgICAvLyBiMlZlYzIgcCA9IG1fYm9keUEtPkdldFdvcmxkUG9pbnQobV9sb2NhbEFuY2hvckEpO1xuICAgIC8vIGIyVmVjMiBzID0gbV9ncm91bmRBbmNob3JBO1xuICAgIC8vIGIyVmVjMiBkID0gcCAtIHM7XG4gICAgLy8gcmV0dXJuIGQuTGVuZ3RoKCk7XG4gICAgY29uc3QgcCA9IHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEsIGIyUHVsbGV5Sm9pbnQuR2V0Q3VycmVudExlbmd0aEFfc19wKTtcbiAgICBjb25zdCBzID0gdGhpcy5tX2dyb3VuZEFuY2hvckE7XG4gICAgcmV0dXJuIGIyVmVjMi5EaXN0YW5jZVZWKHAsIHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgR2V0Q3VycmVudExlbmd0aEJfc19wID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgR2V0Q3VycmVudExlbmd0aEIoKSB7XG4gICAgLy8gYjJWZWMyIHAgPSBtX2JvZHlCLT5HZXRXb3JsZFBvaW50KG1fbG9jYWxBbmNob3JCKTtcbiAgICAvLyBiMlZlYzIgcyA9IG1fZ3JvdW5kQW5jaG9yQjtcbiAgICAvLyBiMlZlYzIgZCA9IHAgLSBzO1xuICAgIC8vIHJldHVybiBkLkxlbmd0aCgpO1xuICAgIGNvbnN0IHAgPSB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCLCBiMlB1bGxleUpvaW50LkdldEN1cnJlbnRMZW5ndGhCX3NfcCk7XG4gICAgY29uc3QgcyA9IHRoaXMubV9ncm91bmRBbmNob3JCO1xuICAgIHJldHVybiBiMlZlYzIuRGlzdGFuY2VWVihwLCBzKTtcbiAgfVxuXG4gIHB1YmxpYyBEdW1wKGxvZzogKGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IGluZGV4QSA9IHRoaXMubV9ib2R5QS5tX2lzbGFuZEluZGV4O1xuICAgIGNvbnN0IGluZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuXG4gICAgbG9nKFwiICBjb25zdCBqZDogYjJQdWxsZXlKb2ludERlZiA9IG5ldyBiMlB1bGxleUpvaW50RGVmKCk7XFxuXCIpO1xuICAgIGxvZyhcIiAgamQuYm9keUEgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEEpO1xuICAgIGxvZyhcIiAgamQuYm9keUIgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEIpO1xuICAgIGxvZyhcIiAgamQuY29sbGlkZUNvbm5lY3RlZCA9ICVzO1xcblwiLCAodGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGpkLmdyb3VuZEFuY2hvckEuU2V0KCUuMTVmLCAlLjE1Zik7XFxuXCIsIHRoaXMubV9ncm91bmRBbmNob3JBLngsIHRoaXMubV9ncm91bmRBbmNob3JBLnkpO1xuICAgIGxvZyhcIiAgamQuZ3JvdW5kQW5jaG9yQi5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2dyb3VuZEFuY2hvckIueCwgdGhpcy5tX2dyb3VuZEFuY2hvckIueSk7XG4gICAgbG9nKFwiICBqZC5sb2NhbEFuY2hvckEuU2V0KCUuMTVmLCAlLjE1Zik7XFxuXCIsIHRoaXMubV9sb2NhbEFuY2hvckEueCwgdGhpcy5tX2xvY2FsQW5jaG9yQS55KTtcbiAgICBsb2coXCIgIGpkLmxvY2FsQW5jaG9yQi5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsQW5jaG9yQi54LCB0aGlzLm1fbG9jYWxBbmNob3JCLnkpO1xuICAgIGxvZyhcIiAgamQubGVuZ3RoQSA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbGVuZ3RoQSk7XG4gICAgbG9nKFwiICBqZC5sZW5ndGhCID0gJS4xNWY7XFxuXCIsIHRoaXMubV9sZW5ndGhCKTtcbiAgICBsb2coXCIgIGpkLnJhdGlvID0gJS4xNWY7XFxuXCIsIHRoaXMubV9yYXRpbyk7XG4gICAgbG9nKFwiICBqb2ludHNbJWRdID0gdGhpcy5tX3dvcmxkLkNyZWF0ZUpvaW50KGpkKTtcXG5cIiwgdGhpcy5tX2luZGV4KTtcbiAgfVxuXG4gIHB1YmxpYyBTaGlmdE9yaWdpbihuZXdPcmlnaW46IFhZKSB7XG4gICAgdGhpcy5tX2dyb3VuZEFuY2hvckEuU2VsZlN1YihuZXdPcmlnaW4pO1xuICAgIHRoaXMubV9ncm91bmRBbmNob3JCLlNlbGZTdWIobmV3T3JpZ2luKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0E7QUFFQTtBQUdBO0FBb0JBO0FBQUE7QUFlQTtBQUFBO0FBZEE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFJQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBaENBO0FBa0NBO0FBQUE7QUFvQ0E7QUFBQTtBQW5DQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUVBOztBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBSUE7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBaFNBO0FBQ0E7QUEyRkE7QUFDQTtBQUNBO0FBQ0E7QUFpQ0E7QUFDQTtBQW9IQTtBQVdBO0FBaUNBO0FBQUE7QUF4VkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_pulley_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_revolute_joint.ts":
/*!*************************************************!*\
  !*** ./src/box2d/dynamics/b2_revolute_joint.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2RevoluteJoint = exports.b2RevoluteJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2RevoluteJointDef = (function (_super) {\n    __extends(b2RevoluteJointDef, _super);\n    function b2RevoluteJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_revoluteJoint) || this;\n        _this.localAnchorA = new b2_math_1.b2Vec2(0, 0);\n        _this.localAnchorB = new b2_math_1.b2Vec2(0, 0);\n        _this.referenceAngle = 0;\n        _this.enableLimit = false;\n        _this.lowerAngle = 0;\n        _this.upperAngle = 0;\n        _this.enableMotor = false;\n        _this.motorSpeed = 0;\n        _this.maxMotorTorque = 0;\n        return _this;\n    }\n    b2RevoluteJointDef.prototype.Initialize = function (bA, bB, anchor) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.bodyA.GetLocalPoint(anchor, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchor, this.localAnchorB);\n        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();\n    };\n    return b2RevoluteJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2RevoluteJointDef = b2RevoluteJointDef;\nvar b2RevoluteJoint = (function (_super) {\n    __extends(b2RevoluteJoint, _super);\n    function b2RevoluteJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_impulse = new b2_math_1.b2Vec2();\n        _this.m_motorImpulse = 0;\n        _this.m_lowerImpulse = 0;\n        _this.m_upperImpulse = 0;\n        _this.m_enableMotor = false;\n        _this.m_maxMotorTorque = 0;\n        _this.m_motorSpeed = 0;\n        _this.m_enableLimit = false;\n        _this.m_referenceAngle = 0;\n        _this.m_lowerAngle = 0;\n        _this.m_upperAngle = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_K = new b2_math_1.b2Mat22();\n        _this.m_angle = 0;\n        _this.m_axialMass = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, b2_math_1.b2Vec2.ZERO));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, b2_math_1.b2Vec2.ZERO));\n        _this.m_referenceAngle = b2_settings_1.b2Maybe(def.referenceAngle, 0);\n        _this.m_impulse.SetZero();\n        _this.m_motorImpulse = 0;\n        _this.m_lowerAngle = b2_settings_1.b2Maybe(def.lowerAngle, 0);\n        _this.m_upperAngle = b2_settings_1.b2Maybe(def.upperAngle, 0);\n        _this.m_maxMotorTorque = b2_settings_1.b2Maybe(def.maxMotorTorque, 0);\n        _this.m_motorSpeed = b2_settings_1.b2Maybe(def.motorSpeed, 0);\n        _this.m_enableLimit = b2_settings_1.b2Maybe(def.enableLimit, false);\n        _this.m_enableMotor = b2_settings_1.b2Maybe(def.enableMotor, false);\n        return _this;\n    }\n    b2RevoluteJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        this.m_K.ex.x = mA + mB + this.m_rA.y * this.m_rA.y * iA + this.m_rB.y * this.m_rB.y * iB;\n        this.m_K.ey.x = -this.m_rA.y * this.m_rA.x * iA - this.m_rB.y * this.m_rB.x * iB;\n        this.m_K.ex.y = this.m_K.ey.x;\n        this.m_K.ey.y = mA + mB + this.m_rA.x * this.m_rA.x * iA + this.m_rB.x * this.m_rB.x * iB;\n        this.m_axialMass = iA + iB;\n        var fixedRotation;\n        if (this.m_axialMass > 0.0) {\n            this.m_axialMass = 1.0 / this.m_axialMass;\n            fixedRotation = false;\n        }\n        else {\n            fixedRotation = true;\n        }\n        this.m_angle = aB - aA - this.m_referenceAngle;\n        if (this.m_enableLimit === false || fixedRotation) {\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n        if (this.m_enableMotor === false || fixedRotation) {\n            this.m_motorImpulse = 0.0;\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse.SelfMul(data.step.dtRatio);\n            this.m_motorImpulse *= data.step.dtRatio;\n            this.m_lowerImpulse *= data.step.dtRatio;\n            this.m_upperImpulse *= data.step.dtRatio;\n            var axialImpulse = this.m_motorImpulse + this.m_lowerImpulse - this.m_upperImpulse;\n            var P = b2RevoluteJoint.InitVelocityConstraints_s_P.Set(this.m_impulse.x, this.m_impulse.y);\n            vA.SelfMulSub(mA, P);\n            wA -= iA * (b2_math_1.b2Vec2.CrossVV(this.m_rA, P) + axialImpulse);\n            vB.SelfMulAdd(mB, P);\n            wB += iB * (b2_math_1.b2Vec2.CrossVV(this.m_rB, P) + axialImpulse);\n        }\n        else {\n            this.m_impulse.SetZero();\n            this.m_motorImpulse = 0;\n            this.m_lowerImpulse = 0;\n            this.m_upperImpulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2RevoluteJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var fixedRotation = (iA + iB === 0);\n        if (this.m_enableMotor && !fixedRotation) {\n            var Cdot = wB - wA - this.m_motorSpeed;\n            var impulse = -this.m_axialMass * Cdot;\n            var oldImpulse = this.m_motorImpulse;\n            var maxImpulse = data.step.dt * this.m_maxMotorTorque;\n            this.m_motorImpulse = b2_math_1.b2Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);\n            impulse = this.m_motorImpulse - oldImpulse;\n            wA -= iA * impulse;\n            wB += iB * impulse;\n        }\n        if (this.m_enableLimit && !fixedRotation) {\n            {\n                var C = this.m_angle - this.m_lowerAngle;\n                var Cdot = wB - wA;\n                var impulse = -this.m_axialMass * (Cdot + b2_math_1.b2Max(C, 0.0) * data.step.inv_dt);\n                var oldImpulse = this.m_lowerImpulse;\n                this.m_lowerImpulse = b2_math_1.b2Max(this.m_lowerImpulse + impulse, 0.0);\n                impulse = this.m_lowerImpulse - oldImpulse;\n                wA -= iA * impulse;\n                wB += iB * impulse;\n            }\n            {\n                var C = this.m_upperAngle - this.m_angle;\n                var Cdot = wA - wB;\n                var impulse = -this.m_axialMass * (Cdot + b2_math_1.b2Max(C, 0.0) * data.step.inv_dt);\n                var oldImpulse = this.m_upperImpulse;\n                this.m_upperImpulse = b2_math_1.b2Max(this.m_upperImpulse + impulse, 0.0);\n                impulse = this.m_upperImpulse - oldImpulse;\n                wA += iA * impulse;\n                wB -= iB * impulse;\n            }\n        }\n        {\n            var Cdot_v2 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2_math_1.b2Vec2.s_t1), b2RevoluteJoint.SolveVelocityConstraints_s_Cdot_v2);\n            var impulse_v2 = this.m_K.Solve(-Cdot_v2.x, -Cdot_v2.y, b2RevoluteJoint.SolveVelocityConstraints_s_impulse_v2);\n            this.m_impulse.x += impulse_v2.x;\n            this.m_impulse.y += impulse_v2.y;\n            vA.SelfMulSub(mA, impulse_v2);\n            wA -= iA * b2_math_1.b2Vec2.CrossVV(this.m_rA, impulse_v2);\n            vB.SelfMulAdd(mB, impulse_v2);\n            wB += iB * b2_math_1.b2Vec2.CrossVV(this.m_rB, impulse_v2);\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2RevoluteJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        var angularError = 0;\n        var positionError = 0;\n        var fixedRotation = (this.m_invIA + this.m_invIB === 0);\n        if (this.m_enableLimit && !fixedRotation) {\n            var angle = aB - aA - this.m_referenceAngle;\n            var C = 0.0;\n            if (b2_math_1.b2Abs(this.m_upperAngle - this.m_lowerAngle) < 2.0 * b2_settings_1.b2_angularSlop) {\n                C = b2_math_1.b2Clamp(angle - this.m_lowerAngle, -b2_settings_1.b2_maxAngularCorrection, b2_settings_1.b2_maxAngularCorrection);\n            }\n            else if (angle <= this.m_lowerAngle) {\n                C = b2_math_1.b2Clamp(angle - this.m_lowerAngle + b2_settings_1.b2_angularSlop, -b2_settings_1.b2_maxAngularCorrection, 0.0);\n            }\n            else if (angle >= this.m_upperAngle) {\n                C = b2_math_1.b2Clamp(angle - this.m_upperAngle - b2_settings_1.b2_angularSlop, 0.0, b2_settings_1.b2_maxAngularCorrection);\n            }\n            var limitImpulse = -this.m_axialMass * C;\n            aA -= this.m_invIA * limitImpulse;\n            aB += this.m_invIB * limitImpulse;\n            angularError = b2_math_1.b2Abs(C);\n        }\n        {\n            qA.SetAngle(aA);\n            qB.SetAngle(aB);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n            var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n            var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n            var C_v2 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(cB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(cA, rA, b2_math_1.b2Vec2.s_t1), b2RevoluteJoint.SolvePositionConstraints_s_C_v2);\n            positionError = C_v2.Length();\n            var mA = this.m_invMassA, mB = this.m_invMassB;\n            var iA = this.m_invIA, iB = this.m_invIB;\n            var K = this.m_K;\n            K.ex.x = mA + mB + iA * rA.y * rA.y + iB * rB.y * rB.y;\n            K.ex.y = -iA * rA.x * rA.y - iB * rB.x * rB.y;\n            K.ey.x = K.ex.y;\n            K.ey.y = mA + mB + iA * rA.x * rA.x + iB * rB.x * rB.x;\n            var impulse = K.Solve(C_v2.x, C_v2.y, b2RevoluteJoint.SolvePositionConstraints_s_impulse).SelfNeg();\n            cA.SelfMulSub(mA, impulse);\n            aA -= iA * b2_math_1.b2Vec2.CrossVV(rA, impulse);\n            cB.SelfMulAdd(mB, impulse);\n            aB += iB * b2_math_1.b2Vec2.CrossVV(rB, impulse);\n        }\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        return positionError <= b2_settings_1.b2_linearSlop && angularError <= b2_settings_1.b2_angularSlop;\n    };\n    b2RevoluteJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2RevoluteJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2RevoluteJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * this.m_impulse.x;\n        out.y = inv_dt * this.m_impulse.y;\n        return out;\n    };\n    b2RevoluteJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * (this.m_lowerImpulse - this.m_upperImpulse);\n    };\n    b2RevoluteJoint.prototype.GetLocalAnchorA = function () { return this.m_localAnchorA; };\n    b2RevoluteJoint.prototype.GetLocalAnchorB = function () { return this.m_localAnchorB; };\n    b2RevoluteJoint.prototype.GetReferenceAngle = function () { return this.m_referenceAngle; };\n    b2RevoluteJoint.prototype.GetJointAngle = function () {\n        return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle;\n    };\n    b2RevoluteJoint.prototype.GetJointSpeed = function () {\n        return this.m_bodyB.m_angularVelocity - this.m_bodyA.m_angularVelocity;\n    };\n    b2RevoluteJoint.prototype.IsMotorEnabled = function () {\n        return this.m_enableMotor;\n    };\n    b2RevoluteJoint.prototype.EnableMotor = function (flag) {\n        if (flag !== this.m_enableMotor) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_enableMotor = flag;\n        }\n    };\n    b2RevoluteJoint.prototype.GetMotorTorque = function (inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n    };\n    b2RevoluteJoint.prototype.GetMotorSpeed = function () {\n        return this.m_motorSpeed;\n    };\n    b2RevoluteJoint.prototype.SetMaxMotorTorque = function (torque) {\n        if (torque !== this.m_maxMotorTorque) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_maxMotorTorque = torque;\n        }\n    };\n    b2RevoluteJoint.prototype.GetMaxMotorTorque = function () { return this.m_maxMotorTorque; };\n    b2RevoluteJoint.prototype.IsLimitEnabled = function () {\n        return this.m_enableLimit;\n    };\n    b2RevoluteJoint.prototype.EnableLimit = function (flag) {\n        if (flag !== this.m_enableLimit) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_enableLimit = flag;\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n    };\n    b2RevoluteJoint.prototype.GetLowerLimit = function () {\n        return this.m_lowerAngle;\n    };\n    b2RevoluteJoint.prototype.GetUpperLimit = function () {\n        return this.m_upperAngle;\n    };\n    b2RevoluteJoint.prototype.SetLimits = function (lower, upper) {\n        if (lower !== this.m_lowerAngle || upper !== this.m_upperAngle) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n            this.m_lowerAngle = lower;\n            this.m_upperAngle = upper;\n        }\n    };\n    b2RevoluteJoint.prototype.SetMotorSpeed = function (speed) {\n        if (speed !== this.m_motorSpeed) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_motorSpeed = speed;\n        }\n    };\n    b2RevoluteJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.referenceAngle = %.15f;\\n\", this.m_referenceAngle);\n        log(\"  jd.enableLimit = %s;\\n\", (this.m_enableLimit) ? (\"true\") : (\"false\"));\n        log(\"  jd.lowerAngle = %.15f;\\n\", this.m_lowerAngle);\n        log(\"  jd.upperAngle = %.15f;\\n\", this.m_upperAngle);\n        log(\"  jd.enableMotor = %s;\\n\", (this.m_enableMotor) ? (\"true\") : (\"false\"));\n        log(\"  jd.motorSpeed = %.15f;\\n\", this.m_motorSpeed);\n        log(\"  jd.maxMotorTorque = %.15f;\\n\", this.m_maxMotorTorque);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2RevoluteJoint.prototype.Draw = function (draw) {\n        var xfA = this.m_bodyA.GetTransform();\n        var xfB = this.m_bodyB.GetTransform();\n        var pA = b2_math_1.b2Transform.MulXV(xfA, this.m_localAnchorA, b2RevoluteJoint.Draw_s_pA);\n        var pB = b2_math_1.b2Transform.MulXV(xfB, this.m_localAnchorB, b2RevoluteJoint.Draw_s_pB);\n        var c1 = b2RevoluteJoint.Draw_s_c1;\n        var c2 = b2RevoluteJoint.Draw_s_c2;\n        var c3 = b2RevoluteJoint.Draw_s_c3;\n        var c4 = b2RevoluteJoint.Draw_s_c4;\n        var c5 = b2RevoluteJoint.Draw_s_c5;\n        draw.DrawPoint(pA, 5.0, c4);\n        draw.DrawPoint(pB, 5.0, c5);\n        var aA = this.m_bodyA.GetAngle();\n        var aB = this.m_bodyB.GetAngle();\n        var angle = aB - aA - this.m_referenceAngle;\n        var L = 0.5;\n        var r = b2RevoluteJoint.Draw_s_r.Set(L * Math.cos(angle), L * Math.sin(angle));\n        draw.DrawSegment(pB, b2_math_1.b2Vec2.AddVV(pB, r, b2_math_1.b2Vec2.s_t0), c1);\n        draw.DrawCircle(pB, L, c1);\n        if (this.m_enableLimit) {\n            var rlo = b2RevoluteJoint.Draw_s_rlo.Set(L * Math.cos(this.m_lowerAngle), L * Math.sin(this.m_lowerAngle));\n            var rhi = b2RevoluteJoint.Draw_s_rhi.Set(L * Math.cos(this.m_upperAngle), L * Math.sin(this.m_upperAngle));\n            draw.DrawSegment(pB, b2_math_1.b2Vec2.AddVV(pB, rlo, b2_math_1.b2Vec2.s_t0), c2);\n            draw.DrawSegment(pB, b2_math_1.b2Vec2.AddVV(pB, rhi, b2_math_1.b2Vec2.s_t0), c3);\n        }\n        var color = b2RevoluteJoint.Draw_s_color_;\n        draw.DrawSegment(xfA.p, pA, color);\n        draw.DrawSegment(pA, pB, color);\n        draw.DrawSegment(xfB.p, pB, color);\n    };\n    b2RevoluteJoint.InitVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.SolveVelocityConstraints_s_Cdot_v2 = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.SolveVelocityConstraints_s_impulse_v2 = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.SolvePositionConstraints_s_C_v2 = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.SolvePositionConstraints_s_impulse = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.Draw_s_pA = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.Draw_s_pB = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.Draw_s_c1 = new b2_draw_1.b2Color(0.7, 0.7, 0.7);\n    b2RevoluteJoint.Draw_s_c2 = new b2_draw_1.b2Color(0.3, 0.9, 0.3);\n    b2RevoluteJoint.Draw_s_c3 = new b2_draw_1.b2Color(0.9, 0.3, 0.3);\n    b2RevoluteJoint.Draw_s_c4 = new b2_draw_1.b2Color(0.3, 0.3, 0.9);\n    b2RevoluteJoint.Draw_s_c5 = new b2_draw_1.b2Color(0.4, 0.4, 0.4);\n    b2RevoluteJoint.Draw_s_color_ = new b2_draw_1.b2Color(0.5, 0.8, 0.8);\n    b2RevoluteJoint.Draw_s_r = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.Draw_s_rlo = new b2_math_1.b2Vec2();\n    b2RevoluteJoint.Draw_s_rhi = new b2_math_1.b2Vec2();\n    return b2RevoluteJoint;\n}(b2_joint_1.b2Joint));\nexports.b2RevoluteJoint = b2RevoluteJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfcmV2b2x1dGVfam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfcmV2b2x1dGVfam9pbnQudHM/NGMyZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuaW1wb3J0IHsgYjJfbGluZWFyU2xvcCwgYjJfYW5ndWxhclNsb3AsIGIyX21heEFuZ3VsYXJDb3JyZWN0aW9uLCBiMk1heWJlIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJBYnMsIGIyQ2xhbXAsIGIyVmVjMiwgYjJNYXQyMiwgYjJSb3QsIFhZLCBiMk1heCwgYjJUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQm9keSB9IGZyb20gXCIuL2IyX2JvZHlcIjtcbmltcG9ydCB7IGIySm9pbnQsIGIySm9pbnREZWYsIGIySm9pbnRUeXBlLCBiMklKb2ludERlZiB9IGZyb20gXCIuL2IyX2pvaW50XCI7XG5pbXBvcnQgeyBiMlNvbHZlckRhdGEgfSBmcm9tIFwiLi9iMl90aW1lX3N0ZXBcIjtcbmltcG9ydCB7IGIyRHJhdywgYjJDb2xvciB9IGZyb20gXCIuLi9jb21tb24vYjJfZHJhd1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIGIySVJldm9sdXRlSm9pbnREZWYgZXh0ZW5kcyBiMklKb2ludERlZiB7XG4gIGxvY2FsQW5jaG9yQT86IFhZO1xuXG4gIGxvY2FsQW5jaG9yQj86IFhZO1xuXG4gIHJlZmVyZW5jZUFuZ2xlPzogbnVtYmVyO1xuXG4gIGVuYWJsZUxpbWl0PzogYm9vbGVhbjtcblxuICBsb3dlckFuZ2xlPzogbnVtYmVyO1xuXG4gIHVwcGVyQW5nbGU/OiBudW1iZXI7XG5cbiAgZW5hYmxlTW90b3I/OiBib29sZWFuO1xuXG4gIG1vdG9yU3BlZWQ/OiBudW1iZXI7XG5cbiAgbWF4TW90b3JUb3JxdWU/OiBudW1iZXI7XG59XG5cbi8vLyBSZXZvbHV0ZSBqb2ludCBkZWZpbml0aW9uLiBUaGlzIHJlcXVpcmVzIGRlZmluaW5nIGFuIGFuY2hvciBwb2ludCB3aGVyZSB0aGVcbi8vLyBib2RpZXMgYXJlIGpvaW5lZC4gVGhlIGRlZmluaXRpb24gdXNlcyBsb2NhbCBhbmNob3IgcG9pbnRzIHNvIHRoYXQgdGhlXG4vLy8gaW5pdGlhbCBjb25maWd1cmF0aW9uIGNhbiB2aW9sYXRlIHRoZSBjb25zdHJhaW50IHNsaWdodGx5LiBZb3UgYWxzbyBuZWVkIHRvXG4vLy8gc3BlY2lmeSB0aGUgaW5pdGlhbCByZWxhdGl2ZSBhbmdsZSBmb3Igam9pbnQgbGltaXRzLiBUaGlzIGhlbHBzIHdoZW4gc2F2aW5nXG4vLy8gYW5kIGxvYWRpbmcgYSBnYW1lLlxuLy8vIFRoZSBsb2NhbCBhbmNob3IgcG9pbnRzIGFyZSBtZWFzdXJlZCBmcm9tIHRoZSBib2R5J3Mgb3JpZ2luXG4vLy8gcmF0aGVyIHRoYW4gdGhlIGNlbnRlciBvZiBtYXNzIGJlY2F1c2U6XG4vLy8gMS4geW91IG1pZ2h0IG5vdCBrbm93IHdoZXJlIHRoZSBjZW50ZXIgb2YgbWFzcyB3aWxsIGJlLlxuLy8vIDIuIGlmIHlvdSBhZGQvcmVtb3ZlIHNoYXBlcyBmcm9tIGEgYm9keSBhbmQgcmVjb21wdXRlIHRoZSBtYXNzLFxuLy8vICAgIHRoZSBqb2ludHMgd2lsbCBiZSBicm9rZW4uXG5leHBvcnQgY2xhc3MgYjJSZXZvbHV0ZUpvaW50RGVmIGV4dGVuZHMgYjJKb2ludERlZiBpbXBsZW1lbnRzIGIySVJldm9sdXRlSm9pbnREZWYge1xuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxBbmNob3JBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKDAsIDApO1xuXG4gIHB1YmxpYyByZWFkb25seSBsb2NhbEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMCwgMCk7XG5cbiAgcHVibGljIHJlZmVyZW5jZUFuZ2xlOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBlbmFibGVMaW1pdCA9IGZhbHNlO1xuXG4gIHB1YmxpYyBsb3dlckFuZ2xlOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyB1cHBlckFuZ2xlOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBlbmFibGVNb3RvciA9IGZhbHNlO1xuXG4gIHB1YmxpYyBtb3RvclNwZWVkOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtYXhNb3RvclRvcnF1ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihiMkpvaW50VHlwZS5lX3Jldm9sdXRlSm9pbnQpO1xuICB9XG5cbiAgcHVibGljIEluaXRpYWxpemUoYkE6IGIyQm9keSwgYkI6IGIyQm9keSwgYW5jaG9yOiBYWSk6IHZvaWQge1xuICAgIHRoaXMuYm9keUEgPSBiQTtcbiAgICB0aGlzLmJvZHlCID0gYkI7XG4gICAgdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvciwgdGhpcy5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3IsIHRoaXMubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLnJlZmVyZW5jZUFuZ2xlID0gdGhpcy5ib2R5Qi5HZXRBbmdsZSgpIC0gdGhpcy5ib2R5QS5HZXRBbmdsZSgpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlJldm9sdXRlSm9pbnQgZXh0ZW5kcyBiMkpvaW50IHtcbiAgLy8gU29sdmVyIHNoYXJlZFxuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2ltcHVsc2U6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fbW90b3JJbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9sb3dlckltcHVsc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3VwcGVySW1wdWxzZTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fZW5hYmxlTW90b3I6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fbWF4TW90b3JUb3JxdWU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX21vdG9yU3BlZWQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2VuYWJsZUxpbWl0OiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtX3JlZmVyZW5jZUFuZ2xlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9sb3dlckFuZ2xlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV91cHBlckFuZ2xlOiBudW1iZXIgPSAwO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2ludk1hc3NBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZNYXNzQjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludklCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9LOiBiMk1hdDIyID0gbmV3IGIyTWF0MjIoKTtcbiAgcHVibGljIG1fYW5nbGU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2F4aWFsTWFzczogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9xQTogYjJSb3QgPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fcUI6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgY29uc3RydWN0b3IoZGVmOiBiMklSZXZvbHV0ZUpvaW50RGVmKSB7XG4gICAgc3VwZXIoZGVmKTtcblxuICAgIHRoaXMubV9sb2NhbEFuY2hvckEuQ29weShiMk1heWJlKGRlZi5sb2NhbEFuY2hvckEsIGIyVmVjMi5aRVJPKSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQW5jaG9yQiwgYjJWZWMyLlpFUk8pKTtcbiAgICB0aGlzLm1fcmVmZXJlbmNlQW5nbGUgPSBiMk1heWJlKGRlZi5yZWZlcmVuY2VBbmdsZSwgMCk7XG5cbiAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDA7XG5cbiAgICB0aGlzLm1fbG93ZXJBbmdsZSA9IGIyTWF5YmUoZGVmLmxvd2VyQW5nbGUsIDApO1xuICAgIHRoaXMubV91cHBlckFuZ2xlID0gYjJNYXliZShkZWYudXBwZXJBbmdsZSwgMCk7XG4gICAgdGhpcy5tX21heE1vdG9yVG9ycXVlID0gYjJNYXliZShkZWYubWF4TW90b3JUb3JxdWUsIDApO1xuICAgIHRoaXMubV9tb3RvclNwZWVkID0gYjJNYXliZShkZWYubW90b3JTcGVlZCwgMCk7XG4gICAgdGhpcy5tX2VuYWJsZUxpbWl0ID0gYjJNYXliZShkZWYuZW5hYmxlTGltaXQsIGZhbHNlKTtcbiAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBiMk1heWJlKGRlZi5lbmFibGVNb3RvciwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgSW5pdFZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5tX2luZGV4QSA9IHRoaXMubV9ib2R5QS5tX2lzbGFuZEluZGV4O1xuICAgIHRoaXMubV9pbmRleEIgPSB0aGlzLm1fYm9keUIubV9pc2xhbmRJbmRleDtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJBLkNvcHkodGhpcy5tX2JvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHRoaXMubV9sb2NhbENlbnRlckIuQ29weSh0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5tX2ludk1hc3NBID0gdGhpcy5tX2JvZHlBLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52TWFzc0IgPSB0aGlzLm1fYm9keUIubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgdGhpcy5tX2ludklCID0gdGhpcy5tX2JvZHlCLm1faW52STtcblxuICAgIGNvbnN0IGFBOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hO1xuICAgIGNvbnN0IHZBOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udjtcbiAgICBsZXQgd0E6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53O1xuXG4gICAgY29uc3QgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICAvLyBiMlJvdCBxQShhQSksIHFCKGFCKTtcbiAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgLy8gbV9yQSA9IGIyTXVsKHFBLCBtX2xvY2FsQW5jaG9yQSAtIG1fbG9jYWxDZW50ZXJBKTtcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSwgdGhpcy5tX2xhbGNBKTtcbiAgICBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgIC8vIG1fckIgPSBiMk11bChxQiwgbV9sb2NhbEFuY2hvckIgLSBtX2xvY2FsQ2VudGVyQik7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckIsIHRoaXMubV9sb2NhbENlbnRlckIsIHRoaXMubV9sYWxjQik7XG4gICAgYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcblxuICAgIC8vIEogPSBbLUkgLXIxX3NrZXcgSSByMl9za2V3XVxuICAgIC8vIHJfc2tldyA9IFstcnk7IHJ4XVxuXG4gICAgLy8gTWF0bGFiXG4gICAgLy8gSyA9IFsgbUErcjF5XjIqaUErbUIrcjJ5XjIqaUIsICAtcjF5KmlBKnIxeC1yMnkqaUIqcjJ4XVxuICAgIC8vICAgICBbICAtcjF5KmlBKnIxeC1yMnkqaUIqcjJ4LCBtQStyMXheMippQSttQityMnheMippQl1cblxuICAgIGNvbnN0IG1BOiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0EsIG1COiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgY29uc3QgaUE6IG51bWJlciA9IHRoaXMubV9pbnZJQSwgaUI6IG51bWJlciA9IHRoaXMubV9pbnZJQjtcblxuICAgIHRoaXMubV9LLmV4LnggPSBtQSArIG1CICsgdGhpcy5tX3JBLnkgKiB0aGlzLm1fckEueSAqIGlBICsgdGhpcy5tX3JCLnkgKiB0aGlzLm1fckIueSAqIGlCO1xuICAgIHRoaXMubV9LLmV5LnggPSAtdGhpcy5tX3JBLnkgKiB0aGlzLm1fckEueCAqIGlBIC0gdGhpcy5tX3JCLnkgKiB0aGlzLm1fckIueCAqIGlCO1xuICAgIHRoaXMubV9LLmV4LnkgPSB0aGlzLm1fSy5leS54O1xuICAgIHRoaXMubV9LLmV5LnkgPSBtQSArIG1CICsgdGhpcy5tX3JBLnggKiB0aGlzLm1fckEueCAqIGlBICsgdGhpcy5tX3JCLnggKiB0aGlzLm1fckIueCAqIGlCO1xuXG4gICAgdGhpcy5tX2F4aWFsTWFzcyA9IGlBICsgaUI7XG4gICAgbGV0IGZpeGVkUm90YXRpb246IGJvb2xlYW47XG4gICAgaWYgKHRoaXMubV9heGlhbE1hc3MgPiAwLjApIHtcbiAgICAgIHRoaXMubV9heGlhbE1hc3MgPSAxLjAgLyB0aGlzLm1fYXhpYWxNYXNzO1xuICAgICAgZml4ZWRSb3RhdGlvbiA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaXhlZFJvdGF0aW9uID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLm1fYW5nbGUgPSBhQiAtIGFBIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQgPT09IGZhbHNlIHx8IGZpeGVkUm90YXRpb24pIHtcbiAgICAgIHRoaXMubV9sb3dlckltcHVsc2UgPSAwLjA7XG4gICAgICB0aGlzLm1fdXBwZXJJbXB1bHNlID0gMC4wO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1fZW5hYmxlTW90b3IgPT09IGZhbHNlIHx8IGZpeGVkUm90YXRpb24pIHtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIC8vIFNjYWxlIGltcHVsc2VzIHRvIHN1cHBvcnQgYSB2YXJpYWJsZSB0aW1lIHN0ZXAuXG4gICAgICB0aGlzLm1faW1wdWxzZS5TZWxmTXVsKGRhdGEuc3RlcC5kdFJhdGlvKTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgKj0gZGF0YS5zdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSAqPSBkYXRhLnN0ZXAuZHRSYXRpbztcblxuICAgICAgY29uc3QgYXhpYWxJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2xvd2VySW1wdWxzZSAtIHRoaXMubV91cHBlckltcHVsc2U7XG4gICAgICAvLyBiMlZlYzIgUChtX2ltcHVsc2UueCwgbV9pbXB1bHNlLnkpO1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJSZXZvbHV0ZUpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUC5TZXQodGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX2ltcHVsc2UueSk7XG5cbiAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgd0EgLT0gaUEgKiAoYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKSArIGF4aWFsSW1wdWxzZSk7XG5cbiAgICAgIC8vIHZCICs9IG1CICogUDtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgd0IgKz0gaUIgKiAoYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBQKSArIGF4aWFsSW1wdWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwO1xuICAgICAgdGhpcy5tX2xvd2VySW1wdWxzZSA9IDA7XG4gICAgICB0aGlzLm1fdXBwZXJJbXB1bHNlID0gMDtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgLy8gcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUDogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90X3YyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIC8vIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX0Nkb3QxOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIC8vIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2ltcHVsc2VfdjM6IGIyVmVjMyA9IG5ldyBiMlZlYzMoKTtcbiAgLy8gcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfcmVkdWNlZF92MjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlX3YyOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XG5cbiAgICBjb25zdCBmaXhlZFJvdGF0aW9uOiBib29sZWFuID0gKGlBICsgaUIgPT09IDApO1xuXG4gICAgLy8gU29sdmUgbW90b3IgY29uc3RyYWludC5cbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yICYmICFmaXhlZFJvdGF0aW9uKSB7XG4gICAgICBjb25zdCBDZG90OiBudW1iZXIgPSB3QiAtIHdBIC0gdGhpcy5tX21vdG9yU3BlZWQ7XG4gICAgICBsZXQgaW1wdWxzZTogbnVtYmVyID0gLXRoaXMubV9heGlhbE1hc3MgKiBDZG90O1xuICAgICAgY29uc3Qgb2xkSW1wdWxzZTogbnVtYmVyID0gdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgICAgIGNvbnN0IG1heEltcHVsc2U6IG51bWJlciA9IGRhdGEuc3RlcC5kdCAqIHRoaXMubV9tYXhNb3RvclRvcnF1ZTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSBiMkNsYW1wKHRoaXMubV9tb3RvckltcHVsc2UgKyBpbXB1bHNlLCAtbWF4SW1wdWxzZSwgbWF4SW1wdWxzZSk7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZSAtIG9sZEltcHVsc2U7XG5cbiAgICAgIHdBIC09IGlBICogaW1wdWxzZTtcbiAgICAgIHdCICs9IGlCICogaW1wdWxzZTtcbiAgICB9XG5cbiAgICAvLyBTb2x2ZSBsaW1pdCBjb25zdHJhaW50LlxuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQgJiYgIWZpeGVkUm90YXRpb24pIHtcblx0XHQvLyBMb3dlciBsaW1pdFxuXHRcdHtcblx0XHRcdGNvbnN0IEM6IG51bWJlciA9IHRoaXMubV9hbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlO1xuXHRcdFx0Y29uc3QgQ2RvdDogbnVtYmVyID0gd0IgLSB3QTtcblx0XHRcdGxldCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX2F4aWFsTWFzcyAqIChDZG90ICsgYjJNYXgoQywgMC4wKSAqIGRhdGEuc3RlcC5pbnZfZHQpO1xuXHRcdFx0Y29uc3Qgb2xkSW1wdWxzZTogbnVtYmVyID0gdGhpcy5tX2xvd2VySW1wdWxzZTtcblx0XHRcdHRoaXMubV9sb3dlckltcHVsc2UgPSBiMk1heCh0aGlzLm1fbG93ZXJJbXB1bHNlICsgaW1wdWxzZSwgMC4wKTtcblx0XHRcdGltcHVsc2UgPSB0aGlzLm1fbG93ZXJJbXB1bHNlIC0gb2xkSW1wdWxzZTtcblxuXHRcdFx0d0EgLT0gaUEgKiBpbXB1bHNlO1xuXHRcdFx0d0IgKz0gaUIgKiBpbXB1bHNlO1xuXHRcdH1cblxuXHRcdC8vIFVwcGVyIGxpbWl0XG5cdFx0Ly8gTm90ZTogc2lnbnMgYXJlIGZsaXBwZWQgdG8ga2VlcCBDIHBvc2l0aXZlIHdoZW4gdGhlIGNvbnN0cmFpbnQgaXMgc2F0aXNmaWVkLlxuXHRcdC8vIFRoaXMgYWxzbyBrZWVwcyB0aGUgaW1wdWxzZSBwb3NpdGl2ZSB3aGVuIHRoZSBsaW1pdCBpcyBhY3RpdmUuXG5cdFx0e1xuXHRcdFx0Y29uc3QgQzogbnVtYmVyID0gdGhpcy5tX3VwcGVyQW5nbGUgLSB0aGlzLm1fYW5nbGU7XG5cdFx0XHRjb25zdCBDZG90OiBudW1iZXIgPSB3QSAtIHdCO1xuXHRcdFx0bGV0IGltcHVsc2U6IG51bWJlciA9IC10aGlzLm1fYXhpYWxNYXNzICogKENkb3QgKyBiMk1heChDLCAwLjApICogZGF0YS5zdGVwLmludl9kdCk7XG5cdFx0XHRjb25zdCBvbGRJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fdXBwZXJJbXB1bHNlO1xuXHRcdFx0dGhpcy5tX3VwcGVySW1wdWxzZSA9IGIyTWF4KHRoaXMubV91cHBlckltcHVsc2UgKyBpbXB1bHNlLCAwLjApO1xuXHRcdFx0aW1wdWxzZSA9IHRoaXMubV91cHBlckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuXG5cdFx0XHR3QSArPSBpQSAqIGltcHVsc2U7XG5cdFx0XHR3QiAtPSBpQiAqIGltcHVsc2U7XG5cdFx0fVxuICB9XG5cbiAgICAvLyBTb2x2ZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50XG4gICAge1xuICAgICAgLy8gYjJWZWMyIENkb3QgPSB2QiArIGIyQ3Jvc3Mod0IsIG1fckIpIC0gdkEgLSBiMkNyb3NzKHdBLCBtX3JBKTtcbiAgICAgIGNvbnN0IENkb3RfdjI6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihcbiAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgdGhpcy5tX3JCLCBiMlZlYzIuc190MCksXG4gICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2QSwgd0EsIHRoaXMubV9yQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICBiMlJldm9sdXRlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfQ2RvdF92Mik7XG4gICAgICAvLyBiMlZlYzIgaW1wdWxzZSA9IG1fSy5Tb2x2ZSgtQ2RvdCk7XG4gICAgICBjb25zdCBpbXB1bHNlX3YyOiBiMlZlYzIgPSB0aGlzLm1fSy5Tb2x2ZSgtQ2RvdF92Mi54LCAtQ2RvdF92Mi55LCBiMlJldm9sdXRlSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfaW1wdWxzZV92Mik7XG5cbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gaW1wdWxzZV92Mi54O1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSBpbXB1bHNlX3YyLnk7XG5cbiAgICAgIC8vIHZBIC09IG1BICogaW1wdWxzZTtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIGltcHVsc2VfdjIpO1xuICAgICAgd0EgLT0gaUEgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckEsIGltcHVsc2VfdjIpO1xuXG4gICAgICAvLyB2QiArPSBtQiAqIGltcHVsc2U7XG4gICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBpbXB1bHNlX3YyKTtcbiAgICAgIHdCICs9IGlCICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBpbXB1bHNlX3YyKTtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfQ192MiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfaW1wdWxzZSA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcbiAgICBjb25zdCBjQTogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYztcbiAgICBsZXQgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgY0I6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmM7XG4gICAgbGV0IGFCOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hO1xuXG4gICAgLy8gYjJSb3QgcUEoYUEpLCBxQihhQik7XG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSwgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcblxuICAgIGxldCBhbmd1bGFyRXJyb3I6IG51bWJlciA9IDA7XG4gICAgbGV0IHBvc2l0aW9uRXJyb3I6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdCBmaXhlZFJvdGF0aW9uOiBib29sZWFuID0gKHRoaXMubV9pbnZJQSArIHRoaXMubV9pbnZJQiA9PT0gMCk7XG5cbiAgICAvLyBTb2x2ZSBhbmd1bGFyIGxpbWl0IGNvbnN0cmFpbnQuXG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiAhZml4ZWRSb3RhdGlvbikge1xuICAgICAgY29uc3QgYW5nbGU6IG51bWJlciA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAgICBsZXQgQzogbnVtYmVyID0gMC4wO1xuXG4gICAgICBpZiAoYjJBYnModGhpcy5tX3VwcGVyQW5nbGUgLSB0aGlzLm1fbG93ZXJBbmdsZSkgPCAyLjAgKiBiMl9hbmd1bGFyU2xvcCkge1xuICAgICAgICAvLyBQcmV2ZW50IGxhcmdlIGFuZ3VsYXIgY29ycmVjdGlvbnNcbiAgICAgICAgQyA9IGIyQ2xhbXAoYW5nbGUgLSB0aGlzLm1fbG93ZXJBbmdsZSwgLWIyX21heEFuZ3VsYXJDb3JyZWN0aW9uLCBiMl9tYXhBbmd1bGFyQ29ycmVjdGlvbik7XG4gICAgICB9IGVsc2UgaWYgKGFuZ2xlIDw9IHRoaXMubV9sb3dlckFuZ2xlKSB7XG4gICAgICAgIC8vIFByZXZlbnQgbGFyZ2UgYW5ndWxhciBjb3JyZWN0aW9ucyBhbmQgYWxsb3cgc29tZSBzbG9wLlxuICAgICAgICBDID0gYjJDbGFtcChhbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlICsgYjJfYW5ndWxhclNsb3AsIC1iMl9tYXhBbmd1bGFyQ29ycmVjdGlvbiwgMC4wKTtcbiAgICAgIH0gZWxzZSBpZiAoYW5nbGUgPj0gdGhpcy5tX3VwcGVyQW5nbGUpIHtcbiAgICAgICAgLy8gUHJldmVudCBsYXJnZSBhbmd1bGFyIGNvcnJlY3Rpb25zIGFuZCBhbGxvdyBzb21lIHNsb3AuXG4gICAgICAgIEMgPSBiMkNsYW1wKGFuZ2xlIC0gdGhpcy5tX3VwcGVyQW5nbGUgLSBiMl9hbmd1bGFyU2xvcCwgMC4wLCBiMl9tYXhBbmd1bGFyQ29ycmVjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbWl0SW1wdWxzZTogbnVtYmVyID0gLXRoaXMubV9heGlhbE1hc3MgKiBDO1xuICAgICAgYUEgLT0gdGhpcy5tX2ludklBICogbGltaXRJbXB1bHNlO1xuICAgICAgYUIgKz0gdGhpcy5tX2ludklCICogbGltaXRJbXB1bHNlO1xuICAgICAgYW5ndWxhckVycm9yID0gYjJBYnMoQyk7XG4gICAgfVxuXG4gICAgLy8gU29sdmUgcG9pbnQtdG8tcG9pbnQgY29uc3RyYWludC5cbiAgICB7XG4gICAgICBxQS5TZXRBbmdsZShhQSk7XG4gICAgICBxQi5TZXRBbmdsZShhQik7XG4gICAgICAvLyBiMlZlYzIgckEgPSBiMk11bChxQSwgbV9sb2NhbEFuY2hvckEgLSBtX2xvY2FsQ2VudGVyQSk7XG4gICAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSwgdGhpcy5tX2xhbGNBKTtcbiAgICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgICAgLy8gYjJWZWMyIHJCID0gYjJNdWwocUIsIG1fbG9jYWxBbmNob3JCIC0gbV9sb2NhbENlbnRlckIpO1xuICAgICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckIsIHRoaXMubV9sb2NhbENlbnRlckIsIHRoaXMubV9sYWxjQik7XG4gICAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcblxuICAgICAgLy8gYjJWZWMyIEMgPSBjQiArIHJCIC0gY0EgLSByQTtcbiAgICAgIGNvbnN0IENfdjIgPVxuICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgYjJWZWMyLkFkZFZWKGNCLCByQiwgYjJWZWMyLnNfdDApLFxuICAgICAgICAgIGIyVmVjMi5BZGRWVihjQSwgckEsIGIyVmVjMi5zX3QxKSxcbiAgICAgICAgICBiMlJldm9sdXRlSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfQ192Mik7XG4gICAgICAvLyBwb3NpdGlvbkVycm9yID0gQy5MZW5ndGgoKTtcbiAgICAgIHBvc2l0aW9uRXJyb3IgPSBDX3YyLkxlbmd0aCgpO1xuXG4gICAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgY29uc3QgaUE6IG51bWJlciA9IHRoaXMubV9pbnZJQSwgaUI6IG51bWJlciA9IHRoaXMubV9pbnZJQjtcblxuICAgICAgY29uc3QgSzogYjJNYXQyMiA9IHRoaXMubV9LO1xuICAgICAgSy5leC54ID0gbUEgKyBtQiArIGlBICogckEueSAqIHJBLnkgKyBpQiAqIHJCLnkgKiByQi55O1xuICAgICAgSy5leC55ID0gLWlBICogckEueCAqIHJBLnkgLSBpQiAqIHJCLnggKiByQi55O1xuICAgICAgSy5leS54ID0gSy5leC55O1xuICAgICAgSy5leS55ID0gbUEgKyBtQiArIGlBICogckEueCAqIHJBLnggKyBpQiAqIHJCLnggKiByQi54O1xuXG4gICAgICAvLyBiMlZlYzIgaW1wdWxzZSA9IC1LLlNvbHZlKEMpO1xuICAgICAgY29uc3QgaW1wdWxzZTogYjJWZWMyID0gSy5Tb2x2ZShDX3YyLngsIENfdjIueSwgYjJSZXZvbHV0ZUpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2ltcHVsc2UpLlNlbGZOZWcoKTtcblxuICAgICAgLy8gY0EgLT0gbUEgKiBpbXB1bHNlO1xuICAgICAgY0EuU2VsZk11bFN1YihtQSwgaW1wdWxzZSk7XG4gICAgICBhQSAtPSBpQSAqIGIyVmVjMi5Dcm9zc1ZWKHJBLCBpbXB1bHNlKTtcblxuICAgICAgLy8gY0IgKz0gbUIgKiBpbXB1bHNlO1xuICAgICAgY0IuU2VsZk11bEFkZChtQiwgaW1wdWxzZSk7XG4gICAgICBhQiArPSBpQiAqIGIyVmVjMi5Dcm9zc1ZWKHJCLCBpbXB1bHNlKTtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jID0gY0E7XG4gICAgZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYSA9IGFBO1xuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmMgPSBjQjtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hID0gYUI7XG5cbiAgICByZXR1cm4gcG9zaXRpb25FcnJvciA8PSBiMl9saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBiMl9hbmd1bGFyU2xvcDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRBbmNob3JBPFQgZXh0ZW5kcyBYWT4ob3V0OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEsIG91dCk7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5jaG9yQjxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCLCBvdXQpO1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uRm9yY2U8VCBleHRlbmRzIFhZPihpbnZfZHQ6IG51bWJlciwgb3V0OiBUKTogVCB7XG4gICAgLy8gYjJWZWMyIFAodGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX2ltcHVsc2UueSk7XG4gICAgLy8gcmV0dXJuIGludl9kdCAqIFA7XG4gICAgb3V0LnggPSBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS54O1xuICAgIG91dC55ID0gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHVibGljIEdldFJlYWN0aW9uVG9ycXVlKGludl9kdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gaW52X2R0ICogKHRoaXMubV9sb3dlckltcHVsc2UgLSB0aGlzLm1fdXBwZXJJbXB1bHNlKTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRMb2NhbEFuY2hvckEoKTogUmVhZG9ubHk8YjJWZWMyPiB7IHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JBOyB9XG5cbiAgcHVibGljIEdldExvY2FsQW5jaG9yQigpOiBSZWFkb25seTxiMlZlYzI+IHsgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7IH1cblxuICBwdWJsaWMgR2V0UmVmZXJlbmNlQW5nbGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubV9yZWZlcmVuY2VBbmdsZTsgfVxuXG4gIHB1YmxpYyBHZXRKb2ludEFuZ2xlKCk6IG51bWJlciB7XG4gICAgLy8gYjJCb2R5KiBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICAvLyBiMkJvZHkqIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIC8vIHJldHVybiBiQi50aGlzLm1fc3dlZXAuYSAtIGJBLnRoaXMubV9zd2VlcC5hIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIubV9zd2VlcC5hIC0gdGhpcy5tX2JvZHlBLm1fc3dlZXAuYSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRKb2ludFNwZWVkKCk6IG51bWJlciB7XG4gICAgLy8gYjJCb2R5KiBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICAvLyBiMkJvZHkqIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIC8vIHJldHVybiBiQi50aGlzLm1fYW5ndWxhclZlbG9jaXR5IC0gYkEudGhpcy5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLm1fYW5ndWxhclZlbG9jaXR5IC0gdGhpcy5tX2JvZHlBLm1fYW5ndWxhclZlbG9jaXR5O1xuICB9XG5cbiAgcHVibGljIElzTW90b3JFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1fZW5hYmxlTW90b3I7XG4gIH1cblxuICBwdWJsaWMgRW5hYmxlTW90b3IoZmxhZzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChmbGFnICE9PSB0aGlzLm1fZW5hYmxlTW90b3IpIHtcbiAgICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9lbmFibGVNb3RvciA9IGZsYWc7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEdldE1vdG9yVG9ycXVlKGludl9kdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRNb3RvclNwZWVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9tb3RvclNwZWVkO1xuICB9XG5cbiAgcHVibGljIFNldE1heE1vdG9yVG9ycXVlKHRvcnF1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRvcnF1ZSAhPT0gdGhpcy5tX21heE1vdG9yVG9ycXVlKSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fbWF4TW90b3JUb3JxdWUgPSB0b3JxdWU7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEdldE1heE1vdG9yVG9ycXVlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLm1fbWF4TW90b3JUb3JxdWU7IH1cblxuICBwdWJsaWMgSXNMaW1pdEVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9lbmFibGVMaW1pdDtcbiAgfVxuXG4gIHB1YmxpYyBFbmFibGVMaW1pdChmbGFnOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGZsYWcgIT09IHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgICAgdGhpcy5tX2VuYWJsZUxpbWl0ID0gZmxhZztcbiAgICAgIHRoaXMubV9sb3dlckltcHVsc2UgPSAwLjA7XG4gICAgICB0aGlzLm1fdXBwZXJJbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBHZXRMb3dlckxpbWl0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9sb3dlckFuZ2xlO1xuICB9XG5cbiAgcHVibGljIEdldFVwcGVyTGltaXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX3VwcGVyQW5nbGU7XG4gIH1cblxuICBwdWJsaWMgU2V0TGltaXRzKGxvd2VyOiBudW1iZXIsIHVwcGVyOiBudW1iZXIpOiB2b2lkIHtcblxuICAgIGlmIChsb3dlciAhPT0gdGhpcy5tX2xvd2VyQW5nbGUgfHwgdXBwZXIgIT09IHRoaXMubV91cHBlckFuZ2xlKSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gMC4wO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSA9IDAuMDtcbiAgICAgIHRoaXMubV9sb3dlckFuZ2xlID0gbG93ZXI7XG4gICAgICB0aGlzLm1fdXBwZXJBbmdsZSA9IHVwcGVyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBTZXRNb3RvclNwZWVkKHNwZWVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoc3BlZWQgIT09IHRoaXMubV9tb3RvclNwZWVkKSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fbW90b3JTcGVlZCA9IHNwZWVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBEdW1wKGxvZzogKGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IGluZGV4QSA9IHRoaXMubV9ib2R5QS5tX2lzbGFuZEluZGV4O1xuICAgIGNvbnN0IGluZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xuXG4gICAgbG9nKFwiICBjb25zdCBqZDogYjJSZXZvbHV0ZUpvaW50RGVmID0gbmV3IGIyUmV2b2x1dGVKb2ludERlZigpO1xcblwiKTtcbiAgICBsb2coXCIgIGpkLmJvZHlBID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhBKTtcbiAgICBsb2coXCIgIGpkLmJvZHlCID0gYm9kaWVzWyVkXTtcXG5cIiwgaW5kZXhCKTtcbiAgICBsb2coXCIgIGpkLmNvbGxpZGVDb25uZWN0ZWQgPSAlcztcXG5cIiwgKHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBqZC5sb2NhbEFuY2hvckEuU2V0KCUuMTVmLCAlLjE1Zik7XFxuXCIsIHRoaXMubV9sb2NhbEFuY2hvckEueCwgdGhpcy5tX2xvY2FsQW5jaG9yQS55KTtcbiAgICBsb2coXCIgIGpkLmxvY2FsQW5jaG9yQi5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsQW5jaG9yQi54LCB0aGlzLm1fbG9jYWxBbmNob3JCLnkpO1xuICAgIGxvZyhcIiAgamQucmVmZXJlbmNlQW5nbGUgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX3JlZmVyZW5jZUFuZ2xlKTtcbiAgICBsb2coXCIgIGpkLmVuYWJsZUxpbWl0ID0gJXM7XFxuXCIsICh0aGlzLm1fZW5hYmxlTGltaXQpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGpkLmxvd2VyQW5nbGUgPSAlLjE1ZjtcXG5cIiwgdGhpcy5tX2xvd2VyQW5nbGUpO1xuICAgIGxvZyhcIiAgamQudXBwZXJBbmdsZSA9ICUuMTVmO1xcblwiLCB0aGlzLm1fdXBwZXJBbmdsZSk7XG4gICAgbG9nKFwiICBqZC5lbmFibGVNb3RvciA9ICVzO1xcblwiLCAodGhpcy5tX2VuYWJsZU1vdG9yKSA/IChcInRydWVcIikgOiAoXCJmYWxzZVwiKSk7XG4gICAgbG9nKFwiICBqZC5tb3RvclNwZWVkID0gJS4xNWY7XFxuXCIsIHRoaXMubV9tb3RvclNwZWVkKTtcbiAgICBsb2coXCIgIGpkLm1heE1vdG9yVG9ycXVlID0gJS4xNWY7XFxuXCIsIHRoaXMubV9tYXhNb3RvclRvcnF1ZSk7XG4gICAgbG9nKFwiICBqb2ludHNbJWRdID0gdGhpcy5tX3dvcmxkLkNyZWF0ZUpvaW50KGpkKTtcXG5cIiwgdGhpcy5tX2luZGV4KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19wQSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3BCID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzEgPSBuZXcgYjJDb2xvcigwLjcsIDAuNywgMC43KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2MyID0gbmV3IGIyQ29sb3IoMC4zLCAwLjksIDAuMyk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19jMyA9IG5ldyBiMkNvbG9yKDAuOSwgMC4zLCAwLjMpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzQgPSBuZXcgYjJDb2xvcigwLjMsIDAuMywgMC45KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2M1ID0gbmV3IGIyQ29sb3IoMC40LCAwLjQsIDAuNCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19jb2xvcl8gPSBuZXcgYjJDb2xvcigwLjUsIDAuOCwgMC44KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX3IgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19ybG8gPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19yaGkgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBEcmF3KGRyYXc6IGIyRHJhdyk6IHZvaWQge1xuICAgIGNvbnN0IHhmQTogUmVhZG9ubHk8YjJUcmFuc2Zvcm0+ID0gdGhpcy5tX2JvZHlBLkdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IHhmQjogUmVhZG9ubHk8YjJUcmFuc2Zvcm0+ID0gdGhpcy5tX2JvZHlCLkdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IHBBID0gYjJUcmFuc2Zvcm0uTXVsWFYoeGZBLCB0aGlzLm1fbG9jYWxBbmNob3JBLCBiMlJldm9sdXRlSm9pbnQuRHJhd19zX3BBKTtcbiAgICBjb25zdCBwQiA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQiwgdGhpcy5tX2xvY2FsQW5jaG9yQiwgYjJSZXZvbHV0ZUpvaW50LkRyYXdfc19wQik7XG5cbiAgICBjb25zdCBjMSA9IGIyUmV2b2x1dGVKb2ludC5EcmF3X3NfYzE7IC8vIGIyQ29sb3IgYzEoMC43ZiwgMC43ZiwgMC43Zik7XG4gICAgY29uc3QgYzIgPSBiMlJldm9sdXRlSm9pbnQuRHJhd19zX2MyOyAvLyBiMkNvbG9yIGMyKDAuM2YsIDAuOWYsIDAuM2YpO1xuICAgIGNvbnN0IGMzID0gYjJSZXZvbHV0ZUpvaW50LkRyYXdfc19jMzsgLy8gYjJDb2xvciBjMygwLjlmLCAwLjNmLCAwLjNmKTtcbiAgICBjb25zdCBjNCA9IGIyUmV2b2x1dGVKb2ludC5EcmF3X3NfYzQ7IC8vIGIyQ29sb3IgYzQoMC4zZiwgMC4zZiwgMC45Zik7XG4gICAgY29uc3QgYzUgPSBiMlJldm9sdXRlSm9pbnQuRHJhd19zX2M1OyAvLyBiMkNvbG9yIGM1KDAuNGYsIDAuNGYsIDAuNGYpO1xuXG4gICAgZHJhdy5EcmF3UG9pbnQocEEsIDUuMCwgYzQpO1xuICAgIGRyYXcuRHJhd1BvaW50KHBCLCA1LjAsIGM1KTtcblxuICAgIGNvbnN0IGFBOiBudW1iZXIgPSB0aGlzLm1fYm9keUEuR2V0QW5nbGUoKTtcbiAgICBjb25zdCBhQjogbnVtYmVyID0gdGhpcy5tX2JvZHlCLkdldEFuZ2xlKCk7XG4gICAgY29uc3QgYW5nbGU6IG51bWJlciA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG5cbiAgICBjb25zdCBMOiBudW1iZXIgPSAwLjU7XG5cbiAgICAvLyBiMlZlYzIgciA9IEwgKiBiMlZlYzIoTWF0aC5jb3MoYW5nbGUpLCBNYXRoLnNpbihhbmdsZSkpO1xuICAgIGNvbnN0IHIgPSBiMlJldm9sdXRlSm9pbnQuRHJhd19zX3IuU2V0KEwgKiBNYXRoLmNvcyhhbmdsZSksIEwgKiBNYXRoLnNpbihhbmdsZSkpO1xuICAgIC8vIGRyYXcuRHJhd1NlZ21lbnQocEIsIHBCICsgciwgYzEpO1xuICAgIGRyYXcuRHJhd1NlZ21lbnQocEIsIGIyVmVjMi5BZGRWVihwQiwgciwgYjJWZWMyLnNfdDApLCBjMSk7XG4gICAgZHJhdy5EcmF3Q2lyY2xlKHBCLCBMLCBjMSk7XG5cbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICAvLyBiMlZlYzIgcmxvID0gTCAqIGIyVmVjMihNYXRoLmNvcyhtX2xvd2VyQW5nbGUpLCBNYXRoLnNpbihtX2xvd2VyQW5nbGUpKTtcbiAgICAgIGNvbnN0IHJsbyA9IGIyUmV2b2x1dGVKb2ludC5EcmF3X3NfcmxvLlNldChMICogTWF0aC5jb3ModGhpcy5tX2xvd2VyQW5nbGUpLCBMICogTWF0aC5zaW4odGhpcy5tX2xvd2VyQW5nbGUpKTtcbiAgICAgIC8vIGIyVmVjMiByaGkgPSBMICogYjJWZWMyKE1hdGguY29zKG1fdXBwZXJBbmdsZSksIE1hdGguc2luKG1fdXBwZXJBbmdsZSkpO1xuICAgICAgY29uc3QgcmhpID0gYjJSZXZvbHV0ZUpvaW50LkRyYXdfc19yaGkuU2V0KEwgKiBNYXRoLmNvcyh0aGlzLm1fdXBwZXJBbmdsZSksIEwgKiBNYXRoLnNpbih0aGlzLm1fdXBwZXJBbmdsZSkpO1xuXG4gICAgICAvLyBkcmF3LkRyYXdTZWdtZW50KHBCLCBwQiArIHJsbywgYzIpO1xuICAgICAgZHJhdy5EcmF3U2VnbWVudChwQiwgYjJWZWMyLkFkZFZWKHBCLCBybG8sIGIyVmVjMi5zX3QwKSwgYzIpO1xuICAgICAgLy8gZHJhdy5EcmF3U2VnbWVudChwQiwgcEIgKyByaGksIGMzKTtcbiAgICAgIGRyYXcuRHJhd1NlZ21lbnQocEIsIGIyVmVjMi5BZGRWVihwQiwgcmhpLCBiMlZlYzIuc190MCksIGMzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvciA9IGIyUmV2b2x1dGVKb2ludC5EcmF3X3NfY29sb3JfOyAvLyBiMkNvbG9yIGNvbG9yKDAuNWYsIDAuOGYsIDAuOGYpO1xuICAgIGRyYXcuRHJhd1NlZ21lbnQoeGZBLnAsIHBBLCBjb2xvcik7XG4gICAgZHJhdy5EcmF3U2VnbWVudChwQSwgcEIsIGNvbG9yKTtcbiAgICBkcmF3LkRyYXdTZWdtZW50KHhmQi5wLCBwQiwgY29sb3IpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUVBO0FBRUE7QUFnQ0E7QUFBQTtBQW1CQTtBQUFBO0FBbEJBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTlCQTtBQWdDQTtBQUFBO0FBb0NBO0FBQUE7QUFsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBTUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4Y0E7QUErRkE7QUFJQTtBQW9GQTtBQUNBO0FBME5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE2Q0E7QUFBQTtBQS9mQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_revolute_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_time_step.ts":
/*!********************************************!*\
  !*** ./src/box2d/dynamics/b2_time_step.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2SolverData = exports.b2Velocity = exports.b2Position = exports.b2TimeStep = exports.b2Profile = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2Profile = (function () {\n    function b2Profile() {\n        this.step = 0;\n        this.collide = 0;\n        this.solve = 0;\n        this.solveInit = 0;\n        this.solveVelocity = 0;\n        this.solvePosition = 0;\n        this.broadphase = 0;\n        this.solveTOI = 0;\n    }\n    b2Profile.prototype.Reset = function () {\n        this.step = 0;\n        this.collide = 0;\n        this.solve = 0;\n        this.solveInit = 0;\n        this.solveVelocity = 0;\n        this.solvePosition = 0;\n        this.broadphase = 0;\n        this.solveTOI = 0;\n        return this;\n    };\n    return b2Profile;\n}());\nexports.b2Profile = b2Profile;\nvar b2TimeStep = (function () {\n    function b2TimeStep() {\n        this.dt = 0;\n        this.inv_dt = 0;\n        this.dtRatio = 0;\n        this.velocityIterations = 0;\n        this.positionIterations = 0;\n        this.particleIterations = 0;\n        this.warmStarting = false;\n    }\n    b2TimeStep.prototype.Copy = function (step) {\n        this.dt = step.dt;\n        this.inv_dt = step.inv_dt;\n        this.dtRatio = step.dtRatio;\n        this.positionIterations = step.positionIterations;\n        this.velocityIterations = step.velocityIterations;\n        this.particleIterations = step.particleIterations;\n        this.warmStarting = step.warmStarting;\n        return this;\n    };\n    return b2TimeStep;\n}());\nexports.b2TimeStep = b2TimeStep;\nvar b2Position = (function () {\n    function b2Position() {\n        this.c = new b2_math_1.b2Vec2();\n        this.a = 0;\n    }\n    b2Position.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2Position(); });\n    };\n    return b2Position;\n}());\nexports.b2Position = b2Position;\nvar b2Velocity = (function () {\n    function b2Velocity() {\n        this.v = new b2_math_1.b2Vec2();\n        this.w = 0;\n    }\n    b2Velocity.MakeArray = function (length) {\n        return b2_settings_1.b2MakeArray(length, function (i) { return new b2Velocity(); });\n    };\n    return b2Velocity;\n}());\nexports.b2Velocity = b2Velocity;\nvar b2SolverData = (function () {\n    function b2SolverData() {\n        this.step = new b2TimeStep();\n    }\n    return b2SolverData;\n}());\nexports.b2SolverData = b2SolverData;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfdGltZV9zdGVwLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX3RpbWVfc3RlcC50cz82MWQwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDExIEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5pbXBvcnQgeyBiMk1ha2VBcnJheSB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyVmVjMiB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuXG4vLy8gUHJvZmlsaW5nIGRhdGEuIFRpbWVzIGFyZSBpbiBtaWxsaXNlY29uZHMuXG5leHBvcnQgY2xhc3MgYjJQcm9maWxlIHtcbiAgcHVibGljIHN0ZXA6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBjb2xsaWRlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc29sdmU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBzb2x2ZUluaXQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBzb2x2ZVZlbG9jaXR5OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc29sdmVQb3NpdGlvbjogbnVtYmVyID0gMDtcbiAgcHVibGljIGJyb2FkcGhhc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBzb2x2ZVRPSTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgUmVzZXQoKSB7XG4gICAgdGhpcy5zdGVwID0gMDtcbiAgICB0aGlzLmNvbGxpZGUgPSAwO1xuICAgIHRoaXMuc29sdmUgPSAwO1xuICAgIHRoaXMuc29sdmVJbml0ID0gMDtcbiAgICB0aGlzLnNvbHZlVmVsb2NpdHkgPSAwO1xuICAgIHRoaXMuc29sdmVQb3NpdGlvbiA9IDA7XG4gICAgdGhpcy5icm9hZHBoYXNlID0gMDtcbiAgICB0aGlzLnNvbHZlVE9JID0gMDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG4vLy8gVGhpcyBpcyBhbiBpbnRlcm5hbCBzdHJ1Y3R1cmUuXG5leHBvcnQgY2xhc3MgYjJUaW1lU3RlcCB7XG4gIHB1YmxpYyBkdDogbnVtYmVyID0gMDsgLy8gdGltZSBzdGVwXG4gIHB1YmxpYyBpbnZfZHQ6IG51bWJlciA9IDA7IC8vIGludmVyc2UgdGltZSBzdGVwICgwIGlmIGR0ID09IDApLlxuICBwdWJsaWMgZHRSYXRpbzogbnVtYmVyID0gMDsgLy8gZHQgKiBpbnZfZHQwXG4gIHB1YmxpYyB2ZWxvY2l0eUl0ZXJhdGlvbnM6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBwb3NpdGlvbkl0ZXJhdGlvbnM6IG51bWJlciA9IDA7XG4gIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgcHVibGljIHBhcnRpY2xlSXRlcmF0aW9uczogbnVtYmVyID0gMDtcbiAgLy8gI2VuZGlmXG4gIHB1YmxpYyB3YXJtU3RhcnRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgQ29weShzdGVwOiBiMlRpbWVTdGVwKTogYjJUaW1lU3RlcCB7XG4gICAgdGhpcy5kdCA9IHN0ZXAuZHQ7XG4gICAgdGhpcy5pbnZfZHQgPSBzdGVwLmludl9kdDtcbiAgICB0aGlzLmR0UmF0aW8gPSBzdGVwLmR0UmF0aW87XG4gICAgdGhpcy5wb3NpdGlvbkl0ZXJhdGlvbnMgPSBzdGVwLnBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICB0aGlzLnZlbG9jaXR5SXRlcmF0aW9ucyA9IHN0ZXAudmVsb2NpdHlJdGVyYXRpb25zO1xuICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICB0aGlzLnBhcnRpY2xlSXRlcmF0aW9ucyA9IHN0ZXAucGFydGljbGVJdGVyYXRpb25zO1xuICAgIC8vICNlbmRpZlxuICAgIHRoaXMud2FybVN0YXJ0aW5nID0gc3RlcC53YXJtU3RhcnRpbmc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyUG9zaXRpb24ge1xuICBwdWJsaWMgcmVhZG9ubHkgYzogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgYTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgc3RhdGljIE1ha2VBcnJheShsZW5ndGg6IG51bWJlcik6IGIyUG9zaXRpb25bXSB7XG4gICAgcmV0dXJuIGIyTWFrZUFycmF5KGxlbmd0aCwgKGk6IG51bWJlcik6IGIyUG9zaXRpb24gPT4gbmV3IGIyUG9zaXRpb24oKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyVmVsb2NpdHkge1xuICBwdWJsaWMgcmVhZG9ubHkgdjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgdzogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgc3RhdGljIE1ha2VBcnJheShsZW5ndGg6IG51bWJlcik6IGIyVmVsb2NpdHlbXSB7XG4gICAgcmV0dXJuIGIyTWFrZUFycmF5KGxlbmd0aCwgKGk6IG51bWJlcik6IGIyVmVsb2NpdHkgPT4gbmV3IGIyVmVsb2NpdHkoKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyU29sdmVyRGF0YSB7XG4gIHB1YmxpYyByZWFkb25seSBzdGVwOiBiMlRpbWVTdGVwID0gbmV3IGIyVGltZVN0ZXAoKTtcbiAgcHVibGljIHBvc2l0aW9ucyE6IGIyUG9zaXRpb25bXTtcbiAgcHVibGljIHZlbG9jaXRpZXMhOiBiMlZlbG9jaXR5W107XG59XG4iXSwibWFwcGluZ3MiOiI7OztBQWtCQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQVhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBckJBO0FBd0JBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQWNBO0FBWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBdkJBO0FBeUJBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFIQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBUEE7QUFTQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBSEE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVBBO0FBU0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBSkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_time_step.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_weld_joint.ts":
/*!*********************************************!*\
  !*** ./src/box2d/dynamics/b2_weld_joint.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2WeldJoint = exports.b2WeldJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2WeldJointDef = (function (_super) {\n    __extends(b2WeldJointDef, _super);\n    function b2WeldJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_weldJoint) || this;\n        _this.localAnchorA = new b2_math_1.b2Vec2();\n        _this.localAnchorB = new b2_math_1.b2Vec2();\n        _this.referenceAngle = 0;\n        _this.stiffness = 0;\n        _this.damping = 0;\n        return _this;\n    }\n    b2WeldJointDef.prototype.Initialize = function (bA, bB, anchor) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.bodyA.GetLocalPoint(anchor, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchor, this.localAnchorB);\n        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();\n    };\n    return b2WeldJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2WeldJointDef = b2WeldJointDef;\nvar b2WeldJoint = (function (_super) {\n    __extends(b2WeldJoint, _super);\n    function b2WeldJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_stiffness = 0;\n        _this.m_damping = 0;\n        _this.m_bias = 0;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_referenceAngle = 0;\n        _this.m_gamma = 0;\n        _this.m_impulse = new b2_math_1.b2Vec3(0, 0, 0);\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_mass = new b2_math_1.b2Mat33();\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_K = new b2_math_1.b2Mat33();\n        _this.m_stiffness = b2_settings_1.b2Maybe(def.stiffness, 0);\n        _this.m_damping = b2_settings_1.b2Maybe(def.damping, 0);\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, b2_math_1.b2Vec2.ZERO));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, b2_math_1.b2Vec2.ZERO));\n        _this.m_referenceAngle = b2_settings_1.b2Maybe(def.referenceAngle, 0);\n        _this.m_impulse.SetZero();\n        return _this;\n    }\n    b2WeldJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var K = this.m_K;\n        K.ex.x = mA + mB + this.m_rA.y * this.m_rA.y * iA + this.m_rB.y * this.m_rB.y * iB;\n        K.ey.x = -this.m_rA.y * this.m_rA.x * iA - this.m_rB.y * this.m_rB.x * iB;\n        K.ez.x = -this.m_rA.y * iA - this.m_rB.y * iB;\n        K.ex.y = K.ey.x;\n        K.ey.y = mA + mB + this.m_rA.x * this.m_rA.x * iA + this.m_rB.x * this.m_rB.x * iB;\n        K.ez.y = this.m_rA.x * iA + this.m_rB.x * iB;\n        K.ex.z = K.ez.x;\n        K.ey.z = K.ez.y;\n        K.ez.z = iA + iB;\n        if (this.m_stiffness > 0) {\n            K.GetInverse22(this.m_mass);\n            var invM = iA + iB;\n            var C = aB - aA - this.m_referenceAngle;\n            var d = this.m_damping;\n            var k = this.m_stiffness;\n            var h = data.step.dt;\n            this.m_gamma = h * (d + h * k);\n            this.m_gamma = this.m_gamma !== 0 ? 1 / this.m_gamma : 0;\n            this.m_bias = C * h * k * this.m_gamma;\n            invM += this.m_gamma;\n            this.m_mass.ez.z = invM !== 0 ? 1 / invM : 0;\n        }\n        else {\n            K.GetSymInverse33(this.m_mass);\n            this.m_gamma = 0;\n            this.m_bias = 0;\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse.SelfMul(data.step.dtRatio);\n            var P = b2WeldJoint.InitVelocityConstraints_s_P.Set(this.m_impulse.x, this.m_impulse.y);\n            vA.SelfMulSub(mA, P);\n            wA -= iA * (b2_math_1.b2Vec2.CrossVV(this.m_rA, P) + this.m_impulse.z);\n            vB.SelfMulAdd(mB, P);\n            wB += iB * (b2_math_1.b2Vec2.CrossVV(this.m_rB, P) + this.m_impulse.z);\n        }\n        else {\n            this.m_impulse.SetZero();\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2WeldJoint.prototype.SolveVelocityConstraints = function (data) {\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        if (this.m_stiffness > 0) {\n            var Cdot2 = wB - wA;\n            var impulse2 = -this.m_mass.ez.z * (Cdot2 + this.m_bias + this.m_gamma * this.m_impulse.z);\n            this.m_impulse.z += impulse2;\n            wA -= iA * impulse2;\n            wB += iB * impulse2;\n            var Cdot1 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2_math_1.b2Vec2.s_t1), b2WeldJoint.SolveVelocityConstraints_s_Cdot1);\n            var impulse1 = b2_math_1.b2Mat33.MulM33XY(this.m_mass, Cdot1.x, Cdot1.y, b2WeldJoint.SolveVelocityConstraints_s_impulse1).SelfNeg();\n            this.m_impulse.x += impulse1.x;\n            this.m_impulse.y += impulse1.y;\n            var P = impulse1;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * b2_math_1.b2Vec2.CrossVV(this.m_rA, P);\n            vB.SelfMulAdd(mB, P);\n            wB += iB * b2_math_1.b2Vec2.CrossVV(this.m_rB, P);\n        }\n        else {\n            var Cdot1 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2_math_1.b2Vec2.s_t1), b2WeldJoint.SolveVelocityConstraints_s_Cdot1);\n            var Cdot2 = wB - wA;\n            var impulse = b2_math_1.b2Mat33.MulM33XYZ(this.m_mass, Cdot1.x, Cdot1.y, Cdot2, b2WeldJoint.SolveVelocityConstraints_s_impulse).SelfNeg();\n            this.m_impulse.SelfAdd(impulse);\n            var P = b2WeldJoint.SolveVelocityConstraints_s_P.Set(impulse.x, impulse.y);\n            vA.SelfMulSub(mA, P);\n            wA -= iA * (b2_math_1.b2Vec2.CrossVV(this.m_rA, P) + impulse.z);\n            vB.SelfMulAdd(mB, P);\n            wB += iB * (b2_math_1.b2Vec2.CrossVV(this.m_rB, P) + impulse.z);\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2WeldJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var positionError, angularError;\n        var K = this.m_K;\n        K.ex.x = mA + mB + rA.y * rA.y * iA + rB.y * rB.y * iB;\n        K.ey.x = -rA.y * rA.x * iA - rB.y * rB.x * iB;\n        K.ez.x = -rA.y * iA - rB.y * iB;\n        K.ex.y = K.ey.x;\n        K.ey.y = mA + mB + rA.x * rA.x * iA + rB.x * rB.x * iB;\n        K.ez.y = rA.x * iA + rB.x * iB;\n        K.ex.z = K.ez.x;\n        K.ey.z = K.ez.y;\n        K.ez.z = iA + iB;\n        if (this.m_stiffness > 0) {\n            var C1 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(cB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(cA, rA, b2_math_1.b2Vec2.s_t1), b2WeldJoint.SolvePositionConstraints_s_C1);\n            positionError = C1.Length();\n            angularError = 0;\n            var P = K.Solve22(C1.x, C1.y, b2WeldJoint.SolvePositionConstraints_s_P).SelfNeg();\n            cA.SelfMulSub(mA, P);\n            aA -= iA * b2_math_1.b2Vec2.CrossVV(rA, P);\n            cB.SelfMulAdd(mB, P);\n            aB += iB * b2_math_1.b2Vec2.CrossVV(rB, P);\n        }\n        else {\n            var C1 = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(cB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(cA, rA, b2_math_1.b2Vec2.s_t1), b2WeldJoint.SolvePositionConstraints_s_C1);\n            var C2 = aB - aA - this.m_referenceAngle;\n            positionError = C1.Length();\n            angularError = b2_math_1.b2Abs(C2);\n            var impulse = K.Solve33(C1.x, C1.y, C2, b2WeldJoint.SolvePositionConstraints_s_impulse).SelfNeg();\n            var P = b2WeldJoint.SolvePositionConstraints_s_P.Set(impulse.x, impulse.y);\n            cA.SelfMulSub(mA, P);\n            aA -= iA * (b2_math_1.b2Vec2.CrossVV(this.m_rA, P) + impulse.z);\n            cB.SelfMulAdd(mB, P);\n            aB += iB * (b2_math_1.b2Vec2.CrossVV(this.m_rB, P) + impulse.z);\n        }\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        return positionError <= b2_settings_1.b2_linearSlop && angularError <= b2_settings_1.b2_angularSlop;\n    };\n    b2WeldJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2WeldJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2WeldJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * this.m_impulse.x;\n        out.y = inv_dt * this.m_impulse.y;\n        return out;\n    };\n    b2WeldJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * this.m_impulse.z;\n    };\n    b2WeldJoint.prototype.GetLocalAnchorA = function () { return this.m_localAnchorA; };\n    b2WeldJoint.prototype.GetLocalAnchorB = function () { return this.m_localAnchorB; };\n    b2WeldJoint.prototype.GetReferenceAngle = function () { return this.m_referenceAngle; };\n    b2WeldJoint.prototype.SetStiffness = function (stiffness) { this.m_stiffness = stiffness; };\n    b2WeldJoint.prototype.GetStiffness = function () { return this.m_stiffness; };\n    b2WeldJoint.prototype.SetDamping = function (damping) { this.m_damping = damping; };\n    b2WeldJoint.prototype.GetDamping = function () { return this.m_damping; };\n    b2WeldJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2WeldJointDef = new b2WeldJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.referenceAngle = %.15f;\\n\", this.m_referenceAngle);\n        log(\"  jd.stiffness = %.15f;\\n\", this.m_stiffness);\n        log(\"  jd.damping = %.15f;\\n\", this.m_damping);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2WeldJoint.InitVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2WeldJoint.SolveVelocityConstraints_s_Cdot1 = new b2_math_1.b2Vec2();\n    b2WeldJoint.SolveVelocityConstraints_s_impulse1 = new b2_math_1.b2Vec2();\n    b2WeldJoint.SolveVelocityConstraints_s_impulse = new b2_math_1.b2Vec3();\n    b2WeldJoint.SolveVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2WeldJoint.SolvePositionConstraints_s_C1 = new b2_math_1.b2Vec2();\n    b2WeldJoint.SolvePositionConstraints_s_P = new b2_math_1.b2Vec2();\n    b2WeldJoint.SolvePositionConstraints_s_impulse = new b2_math_1.b2Vec3();\n    return b2WeldJoint;\n}(b2_joint_1.b2Joint));\nexports.b2WeldJoint = b2WeldJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfd2VsZF9qb2ludC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ib3gyZC9keW5hbWljcy9iMl93ZWxkX2pvaW50LnRzPzNlOTgiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiogQ29weXJpZ2h0IChjKSAyMDA2LTIwMTEgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xuKlxuKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4qIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4qIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4qIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbiogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4qIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4qIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4qIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cbmltcG9ydCB7IGIyX2xpbmVhclNsb3AsIGIyX2FuZ3VsYXJTbG9wLCBiMk1heWJlIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJBYnMsIGIyVmVjMiwgYjJWZWMzLCBiMk1hdDMzLCBiMlJvdCwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQm9keSB9IGZyb20gXCIuL2IyX2JvZHlcIjtcbmltcG9ydCB7IGIySm9pbnQsIGIySm9pbnREZWYsIGIySm9pbnRUeXBlLCBiMklKb2ludERlZiB9IGZyb20gXCIuL2IyX2pvaW50XCI7XG5pbXBvcnQgeyBiMlNvbHZlckRhdGEgfSBmcm9tIFwiLi9iMl90aW1lX3N0ZXBcIjtcblxuZXhwb3J0IGludGVyZmFjZSBiMklXZWxkSm9pbnREZWYgZXh0ZW5kcyBiMklKb2ludERlZiB7XG4gIGxvY2FsQW5jaG9yQT86IFhZO1xuXG4gIGxvY2FsQW5jaG9yQj86IFhZO1xuXG4gIHJlZmVyZW5jZUFuZ2xlPzogbnVtYmVyO1xuXG4gIHN0aWZmbmVzcz86IG51bWJlcjtcblxuICBkYW1waW5nPzogbnVtYmVyO1xufVxuXG4vLy8gV2VsZCBqb2ludCBkZWZpbml0aW9uLiBZb3UgbmVlZCB0byBzcGVjaWZ5IGxvY2FsIGFuY2hvciBwb2ludHNcbi8vLyB3aGVyZSB0aGV5IGFyZSBhdHRhY2hlZCBhbmQgdGhlIHJlbGF0aXZlIGJvZHkgYW5nbGUuIFRoZSBwb3NpdGlvblxuLy8vIG9mIHRoZSBhbmNob3IgcG9pbnRzIGlzIGltcG9ydGFudCBmb3IgY29tcHV0aW5nIHRoZSByZWFjdGlvbiB0b3JxdWUuXG5leHBvcnQgY2xhc3MgYjJXZWxkSm9pbnREZWYgZXh0ZW5kcyBiMkpvaW50RGVmIGltcGxlbWVudHMgYjJJV2VsZEpvaW50RGVmIHtcbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyByZWFkb25seSBsb2NhbEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgcmVmZXJlbmNlQW5nbGU6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHN0aWZmbmVzczogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgZGFtcGluZzogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihiMkpvaW50VHlwZS5lX3dlbGRKb2ludCk7XG4gIH1cblxuICBwdWJsaWMgSW5pdGlhbGl6ZShiQTogYjJCb2R5LCBiQjogYjJCb2R5LCBhbmNob3I6IFhZKTogdm9pZCB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yLCB0aGlzLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvciwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMucmVmZXJlbmNlQW5nbGUgPSB0aGlzLmJvZHlCLkdldEFuZ2xlKCkgLSB0aGlzLmJvZHlBLkdldEFuZ2xlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyV2VsZEpvaW50IGV4dGVuZHMgYjJKb2ludCB7XG4gIHB1YmxpYyBtX3N0aWZmbmVzczogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fZGFtcGluZzogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fYmlhczogbnVtYmVyID0gMDtcblxuICAvLyBTb2x2ZXIgc2hhcmVkXG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fcmVmZXJlbmNlQW5nbGU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2dhbW1hOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9pbXB1bHNlOiBiMlZlYzMgPSBuZXcgYjJWZWMzKDAsIDAsIDApO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2ludk1hc3NBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZNYXNzQjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludklCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9tYXNzOiBiMk1hdDMzID0gbmV3IGIyTWF0MzMoKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9xQTogYjJSb3QgPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fcUI6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX0s6IGIyTWF0MzMgPSBuZXcgYjJNYXQzMygpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogYjJJV2VsZEpvaW50RGVmKSB7XG4gICAgc3VwZXIoZGVmKTtcblxuICAgIHRoaXMubV9zdGlmZm5lc3MgPSBiMk1heWJlKGRlZi5zdGlmZm5lc3MsIDApO1xuICAgIHRoaXMubV9kYW1waW5nID0gYjJNYXliZShkZWYuZGFtcGluZywgMCk7XG5cbiAgICB0aGlzLm1fbG9jYWxBbmNob3JBLkNvcHkoYjJNYXliZShkZWYubG9jYWxBbmNob3JBLCBiMlZlYzIuWkVSTykpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckIuQ29weShiMk1heWJlKGRlZi5sb2NhbEFuY2hvckIsIGIyVmVjMi5aRVJPKSk7XG4gICAgdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gYjJNYXliZShkZWYucmVmZXJlbmNlQW5nbGUsIDApO1xuICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMubV9pbmRleEEgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICB0aGlzLm1faW5kZXhCID0gdGhpcy5tX2JvZHlCLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQS5Db3B5KHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJCLkNvcHkodGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52SUEgPSB0aGlzLm1fYm9keUEubV9pbnZJO1xuICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG5cbiAgICBjb25zdCBhQTogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYTtcbiAgICBjb25zdCB2QTogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnY7XG4gICAgbGV0IHdBOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udztcblxuICAgIGNvbnN0IGFCOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hO1xuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcbiAgICBsZXQgd0I6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53O1xuXG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSwgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcblxuICAgIC8vIG1fckEgPSBiMk11bChxQSwgbV9sb2NhbEFuY2hvckEgLSBtX2xvY2FsQ2VudGVyQSk7XG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEsIHRoaXMubV9sYWxjQSk7XG4gICAgYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sYWxjQSwgdGhpcy5tX3JBKTtcbiAgICAvLyBtX3JCID0gYjJNdWwocUIsIG1fbG9jYWxBbmNob3JCIC0gbV9sb2NhbENlbnRlckIpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCLCB0aGlzLm1fbGFsY0IpO1xuICAgIGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG5cbiAgICAvLyBKID0gWy1JIC1yMV9za2V3IEkgcjJfc2tld11cbiAgICAvLyAgICAgWyAwICAgICAgIC0xIDAgICAgICAgMV1cbiAgICAvLyByX3NrZXcgPSBbLXJ5OyByeF1cblxuICAgIC8vIE1hdGxhYlxuICAgIC8vIEsgPSBbIG1BK3IxeV4yKmlBK21CK3IyeV4yKmlCLCAgLXIxeSppQSpyMXgtcjJ5KmlCKnIyeCwgICAgICAgICAgLXIxeSppQS1yMnkqaUJdXG4gICAgLy8gICAgIFsgIC1yMXkqaUEqcjF4LXIyeSppQipyMngsIG1BK3IxeF4yKmlBK21CK3IyeF4yKmlCLCAgICAgICAgICAgcjF4KmlBK3IyeCppQl1cbiAgICAvLyAgICAgWyAgICAgICAgICAtcjF5KmlBLXIyeSppQiwgICAgICAgICAgIHIxeCppQStyMngqaUIsICAgICAgICAgICAgICAgICAgIGlBK2lCXVxuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgY29uc3QgSzogYjJNYXQzMyA9IHRoaXMubV9LO1xuICAgIEsuZXgueCA9IG1BICsgbUIgKyB0aGlzLm1fckEueSAqIHRoaXMubV9yQS55ICogaUEgKyB0aGlzLm1fckIueSAqIHRoaXMubV9yQi55ICogaUI7XG4gICAgSy5leS54ID0gLXRoaXMubV9yQS55ICogdGhpcy5tX3JBLnggKiBpQSAtIHRoaXMubV9yQi55ICogdGhpcy5tX3JCLnggKiBpQjtcbiAgICBLLmV6LnggPSAtdGhpcy5tX3JBLnkgKiBpQSAtIHRoaXMubV9yQi55ICogaUI7XG4gICAgSy5leC55ID0gSy5leS54O1xuICAgIEsuZXkueSA9IG1BICsgbUIgKyB0aGlzLm1fckEueCAqIHRoaXMubV9yQS54ICogaUEgKyB0aGlzLm1fckIueCAqIHRoaXMubV9yQi54ICogaUI7XG4gICAgSy5lei55ID0gdGhpcy5tX3JBLnggKiBpQSArIHRoaXMubV9yQi54ICogaUI7XG4gICAgSy5leC56ID0gSy5lei54O1xuICAgIEsuZXkueiA9IEsuZXoueTtcbiAgICBLLmV6LnogPSBpQSArIGlCO1xuXG4gICAgaWYgKHRoaXMubV9zdGlmZm5lc3MgPiAwKSB7XG4gICAgICBLLkdldEludmVyc2UyMih0aGlzLm1fbWFzcyk7XG5cbiAgICAgIGxldCBpbnZNOiBudW1iZXIgPSBpQSArIGlCO1xuXG4gICAgICBjb25zdCBDOiBudW1iZXIgPSBhQiAtIGFBIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuXG4gICAgICAvLyBEYW1waW5nIGNvZWZmaWNpZW50XG4gICAgICBjb25zdCBkOiBudW1iZXIgPSB0aGlzLm1fZGFtcGluZztcblxuICAgICAgLy8gU3ByaW5nIHN0aWZmbmVzc1xuICAgICAgY29uc3QgazogbnVtYmVyID0gdGhpcy5tX3N0aWZmbmVzcztcblxuICAgICAgLy8gbWFnaWMgZm9ybXVsYXNcbiAgICAgIGNvbnN0IGg6IG51bWJlciA9IGRhdGEuc3RlcC5kdDtcbiAgICAgIHRoaXMubV9nYW1tYSA9IGggKiAoZCArIGggKiBrKTtcbiAgICAgIHRoaXMubV9nYW1tYSA9IHRoaXMubV9nYW1tYSAhPT0gMCA/IDEgLyB0aGlzLm1fZ2FtbWEgOiAwO1xuICAgICAgdGhpcy5tX2JpYXMgPSBDICogaCAqIGsgKiB0aGlzLm1fZ2FtbWE7XG5cbiAgICAgIGludk0gKz0gdGhpcy5tX2dhbW1hO1xuICAgICAgdGhpcy5tX21hc3MuZXoueiA9IGludk0gIT09IDAgPyAxIC8gaW52TSA6IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIEsuR2V0U3ltSW52ZXJzZTMzKHRoaXMubV9tYXNzKTtcbiAgICAgIHRoaXMubV9nYW1tYSA9IDA7XG4gICAgICB0aGlzLm1fYmlhcyA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIC8vIFNjYWxlIGltcHVsc2VzIHRvIHN1cHBvcnQgYSB2YXJpYWJsZSB0aW1lIHN0ZXAuXG4gICAgICB0aGlzLm1faW1wdWxzZS5TZWxmTXVsKGRhdGEuc3RlcC5kdFJhdGlvKTtcblxuICAgICAgLy8gYjJWZWMyIFAobV9pbXB1bHNlLngsIG1faW1wdWxzZS55KTtcbiAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IGIyV2VsZEpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUC5TZXQodGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX2ltcHVsc2UueSk7XG5cbiAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgd0EgLT0gaUEgKiAoYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKSArIHRoaXMubV9pbXB1bHNlLnopO1xuXG4gICAgICAvLyB2QiArPSBtQiAqIFA7XG4gICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgIHdCICs9IGlCICogKGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQiwgUCkgKyB0aGlzLm1faW1wdWxzZS56KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgIH1cblxuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52ID0gdkE7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLncgPSB3QTtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90MSA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfaW1wdWxzZTEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2ltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1AgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMoZGF0YTogYjJTb2x2ZXJEYXRhKTogdm9pZCB7XG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xuICAgIGxldCB3QTogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnc7XG4gICAgY29uc3QgdkI6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52O1xuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XG5cbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XG5cbiAgICBpZiAodGhpcy5tX3N0aWZmbmVzcyA+IDApIHtcbiAgICAgIGNvbnN0IENkb3QyOiBudW1iZXIgPSB3QiAtIHdBO1xuXG4gICAgICBjb25zdCBpbXB1bHNlMjogbnVtYmVyID0gLXRoaXMubV9tYXNzLmV6LnogKiAoQ2RvdDIgKyB0aGlzLm1fYmlhcyArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9pbXB1bHNlLnopO1xuICAgICAgdGhpcy5tX2ltcHVsc2UueiArPSBpbXB1bHNlMjtcblxuICAgICAgd0EgLT0gaUEgKiBpbXB1bHNlMjtcbiAgICAgIHdCICs9IGlCICogaW1wdWxzZTI7XG5cbiAgICAgIC8vIGIyVmVjMiBDZG90MSA9IHZCICsgYjJWZWMyLkNyb3NzU1Yod0IsIHRoaXMubV9yQikgLSB2QSAtIGIyVmVjMi5Dcm9zc1NWKHdBLCB0aGlzLm1fckEpO1xuICAgICAgY29uc3QgQ2RvdDE6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihcbiAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgdGhpcy5tX3JCLCBiMlZlYzIuc190MCksXG4gICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2QSwgd0EsIHRoaXMubV9yQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICBiMldlbGRKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19DZG90MSk7XG5cbiAgICAgIC8vIGIyVmVjMiBpbXB1bHNlMSA9IC1iMk11bDIyKG1fbWFzcywgQ2RvdDEpO1xuICAgICAgY29uc3QgaW1wdWxzZTE6IGIyVmVjMiA9IGIyTWF0MzMuTXVsTTMzWFkodGhpcy5tX21hc3MsIENkb3QxLngsIENkb3QxLnksIGIyV2VsZEpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2ltcHVsc2UxKS5TZWxmTmVnKCk7XG4gICAgICB0aGlzLm1faW1wdWxzZS54ICs9IGltcHVsc2UxLng7XG4gICAgICB0aGlzLm1faW1wdWxzZS55ICs9IGltcHVsc2UxLnk7XG5cbiAgICAgIC8vIGIyVmVjMiBQID0gaW1wdWxzZTE7XG4gICAgICBjb25zdCBQOiBiMlZlYzIgPSBpbXB1bHNlMTtcblxuICAgICAgLy8gdkEgLT0gbUEgKiBQO1xuICAgICAgdkEuU2VsZk11bFN1YihtQSwgUCk7XG4gICAgICAvLyB3QSAtPSBpQSAqIGIyQ3Jvc3MobV9yQSwgUCk7XG4gICAgICB3QSAtPSBpQSAqIGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQSwgUCk7XG5cbiAgICAgIC8vIHZCICs9IG1CICogUDtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgLy8gd0IgKz0gaUIgKiBiMkNyb3NzKG1fckIsIFApO1xuICAgICAgd0IgKz0gaUIgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIFApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBiMlZlYzIgQ2RvdDEgPSB2QiArIGIyQ3Jvc3Mod0IsIHRoaXMubV9yQikgLSB2QSAtIGIyQ3Jvc3Mod0EsIHRoaXMubV9yQSk7XG4gICAgICBjb25zdCBDZG90MTogYjJWZWMyID0gYjJWZWMyLlN1YlZWKFxuICAgICAgICBiMlZlYzIuQWRkVkNyb3NzU1YodkIsIHdCLCB0aGlzLm1fckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgdGhpcy5tX3JBLCBiMlZlYzIuc190MSksXG4gICAgICAgIGIyV2VsZEpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX0Nkb3QxKTtcbiAgICAgIGNvbnN0IENkb3QyOiBudW1iZXIgPSB3QiAtIHdBO1xuICAgICAgLy8gYjJWZWMzIGNvbnN0IENkb3QoQ2RvdDEueCwgQ2RvdDEueSwgQ2RvdDIpO1xuXG4gICAgICAvLyBiMlZlYzMgaW1wdWxzZSA9IC1iMk11bChtX21hc3MsIENkb3QpO1xuICAgICAgY29uc3QgaW1wdWxzZTogYjJWZWMzID0gYjJNYXQzMy5NdWxNMzNYWVoodGhpcy5tX21hc3MsIENkb3QxLngsIENkb3QxLnksIENkb3QyLCBiMldlbGRKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlKS5TZWxmTmVnKCk7XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZWxmQWRkKGltcHVsc2UpO1xuXG4gICAgICAvLyBiMlZlYzIgUChpbXB1bHNlLngsIGltcHVsc2UueSk7XG4gICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMldlbGRKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QLlNldChpbXB1bHNlLngsIGltcHVsc2UueSk7XG5cbiAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgd0EgLT0gaUEgKiAoYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKSArIGltcHVsc2Uueik7XG5cbiAgICAgIC8vIHZCICs9IG1CICogUDtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgd0IgKz0gaUIgKiAoYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JCLCBQKSArIGltcHVsc2Uueik7XG4gICAgfVxuXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnYgPSB2QTtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udyA9IHdBO1xuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS52ID0gdkI7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLncgPSB3QjtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX0MxID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19pbXB1bHNlID0gbmV3IGIyVmVjMygpO1xuICBwdWJsaWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNBOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jO1xuICAgIGxldCBhQTogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYTtcbiAgICBjb25zdCBjQjogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYztcbiAgICBsZXQgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XG5cbiAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSwgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBjb25zdCBpQTogbnVtYmVyID0gdGhpcy5tX2ludklBLCBpQjogbnVtYmVyID0gdGhpcy5tX2ludklCO1xuXG4gICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBLCB0aGlzLm1fbGFsY0EpO1xuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQiwgdGhpcy5tX2xhbGNCKTtcbiAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcblxuICAgIGxldCBwb3NpdGlvbkVycm9yOiBudW1iZXIsIGFuZ3VsYXJFcnJvcjogbnVtYmVyO1xuXG4gICAgY29uc3QgSzogYjJNYXQzMyA9IHRoaXMubV9LO1xuICAgIEsuZXgueCA9IG1BICsgbUIgKyByQS55ICogckEueSAqIGlBICsgckIueSAqIHJCLnkgKiBpQjtcbiAgICBLLmV5LnggPSAtckEueSAqIHJBLnggKiBpQSAtIHJCLnkgKiByQi54ICogaUI7XG4gICAgSy5lei54ID0gLXJBLnkgKiBpQSAtIHJCLnkgKiBpQjtcbiAgICBLLmV4LnkgPSBLLmV5Lng7XG4gICAgSy5leS55ID0gbUEgKyBtQiArIHJBLnggKiByQS54ICogaUEgKyByQi54ICogckIueCAqIGlCO1xuICAgIEsuZXoueSA9IHJBLnggKiBpQSArIHJCLnggKiBpQjtcbiAgICBLLmV4LnogPSBLLmV6Lng7XG4gICAgSy5leS56ID0gSy5lei55O1xuICAgIEsuZXoueiA9IGlBICsgaUI7XG5cbiAgICBpZiAodGhpcy5tX3N0aWZmbmVzcyA+IDApIHtcbiAgICAgIC8vIGIyVmVjMiBDMSA9ICBjQiArIHJCIC0gY0EgLSByQTtcbiAgICAgIGNvbnN0IEMxID1cbiAgICAgICAgYjJWZWMyLlN1YlZWKFxuICAgICAgICAgIGIyVmVjMi5BZGRWVihjQiwgckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgICBiMlZlYzIuQWRkVlYoY0EsIHJBLCBiMlZlYzIuc190MSksXG4gICAgICAgICAgYjJXZWxkSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfQzEpO1xuICAgICAgcG9zaXRpb25FcnJvciA9IEMxLkxlbmd0aCgpO1xuICAgICAgYW5ndWxhckVycm9yID0gMDtcblxuICAgICAgLy8gYjJWZWMyIFAgPSAtSy5Tb2x2ZTIyKEMxKTtcbiAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IEsuU29sdmUyMihDMS54LCBDMS55LCBiMldlbGRKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QKS5TZWxmTmVnKCk7XG5cbiAgICAgIC8vIGNBIC09IG1BICogUDtcbiAgICAgIGNBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgYUEgLT0gaUEgKiBiMlZlYzIuQ3Jvc3NWVihyQSwgUCk7XG5cbiAgICAgIC8vIGNCICs9IG1CICogUDtcbiAgICAgIGNCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgYUIgKz0gaUIgKiBiMlZlYzIuQ3Jvc3NWVihyQiwgUCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGIyVmVjMiBDMSA9ICBjQiArIHJCIC0gY0EgLSByQTtcbiAgICAgIGNvbnN0IEMxID1cbiAgICAgICAgYjJWZWMyLlN1YlZWKFxuICAgICAgICAgIGIyVmVjMi5BZGRWVihjQiwgckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgICBiMlZlYzIuQWRkVlYoY0EsIHJBLCBiMlZlYzIuc190MSksXG4gICAgICAgICAgYjJXZWxkSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfQzEpO1xuICAgICAgY29uc3QgQzI6IG51bWJlciA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG5cbiAgICAgIHBvc2l0aW9uRXJyb3IgPSBDMS5MZW5ndGgoKTtcbiAgICAgIGFuZ3VsYXJFcnJvciA9IGIyQWJzKEMyKTtcblxuICAgICAgLy8gYjJWZWMzIEMoQzEueCwgQzEueSwgQzIpO1xuXG4gICAgICAvLyBiMlZlYzMgaW1wdWxzZSA9IC1LLlNvbHZlMzMoQyk7XG4gICAgICBjb25zdCBpbXB1bHNlOiBiMlZlYzMgPSBLLlNvbHZlMzMoQzEueCwgQzEueSwgQzIsIGIyV2VsZEpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2ltcHVsc2UpLlNlbGZOZWcoKTtcblxuICAgICAgLy8gYjJWZWMyIFAoaW1wdWxzZS54LCBpbXB1bHNlLnkpO1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJXZWxkSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUC5TZXQoaW1wdWxzZS54LCBpbXB1bHNlLnkpO1xuXG4gICAgICAvLyBjQSAtPSBtQSAqIFA7XG4gICAgICBjQS5TZWxmTXVsU3ViKG1BLCBQKTtcbiAgICAgIGFBIC09IGlBICogKGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQSwgUCkgKyBpbXB1bHNlLnopO1xuXG4gICAgICAvLyBjQiArPSBtQiAqIFA7XG4gICAgICBjQi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgIGFCICs9IGlCICogKGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQiwgUCkgKyBpbXB1bHNlLnopO1xuICAgIH1cblxuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmMgPSBjQTtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hID0gYUE7XG4gICAgLy8gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYyA9IGNCO1xuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmEgPSBhQjtcblxuICAgIHJldHVybiBwb3NpdGlvbkVycm9yIDw9IGIyX2xpbmVhclNsb3AgJiYgYW5ndWxhckVycm9yIDw9IGIyX2FuZ3VsYXJTbG9wO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckE8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRBbmNob3JCPFQgZXh0ZW5kcyBYWT4ob3V0OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIsIG91dCk7XG4gIH1cblxuICBwdWJsaWMgR2V0UmVhY3Rpb25Gb3JjZTxUIGV4dGVuZHMgWFk+KGludl9kdDogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcbiAgICAvLyBiMlZlYzIgUCh0aGlzLm1faW1wdWxzZS54LCB0aGlzLm1faW1wdWxzZS55KTtcbiAgICAvLyByZXR1cm4gaW52X2R0ICogUDtcbiAgICBvdXQueCA9IGludl9kdCAqIHRoaXMubV9pbXB1bHNlLng7XG4gICAgb3V0LnkgPSBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwdWJsaWMgR2V0UmVhY3Rpb25Ub3JxdWUoaW52X2R0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS56O1xuICB9XG5cbiAgcHVibGljIEdldExvY2FsQW5jaG9yQSgpOiBSZWFkb25seTxiMlZlYzI+IHsgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckE7IH1cblxuICBwdWJsaWMgR2V0TG9jYWxBbmNob3JCKCk6IFJlYWRvbmx5PGIyVmVjMj4geyByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQjsgfVxuXG4gIHB1YmxpYyBHZXRSZWZlcmVuY2VBbmdsZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlOyB9XG5cbiAgcHVibGljIFNldFN0aWZmbmVzcyhzdGlmZm5lc3M6IG51bWJlcik6IHZvaWQgeyB0aGlzLm1fc3RpZmZuZXNzID0gc3RpZmZuZXNzOyB9XG4gIHB1YmxpYyBHZXRTdGlmZm5lc3MoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubV9zdGlmZm5lc3M7IH1cblxuICBwdWJsaWMgU2V0RGFtcGluZyhkYW1waW5nOiBudW1iZXIpIHsgdGhpcy5tX2RhbXBpbmcgPSBkYW1waW5nOyB9XG4gIHB1YmxpYyBHZXREYW1waW5nKCkgeyByZXR1cm4gdGhpcy5tX2RhbXBpbmc7IH1cblxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICBjb25zdCBpbmRleEEgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICBjb25zdCBpbmRleEIgPSB0aGlzLm1fYm9keUIubV9pc2xhbmRJbmRleDtcblxuICAgIGxvZyhcIiAgY29uc3QgamQ6IGIyV2VsZEpvaW50RGVmID0gbmV3IGIyV2VsZEpvaW50RGVmKCk7XFxuXCIpO1xuICAgIGxvZyhcIiAgamQuYm9keUEgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEEpO1xuICAgIGxvZyhcIiAgamQuYm9keUIgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEIpO1xuICAgIGxvZyhcIiAgamQuY29sbGlkZUNvbm5lY3RlZCA9ICVzO1xcblwiLCAodGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGpkLmxvY2FsQW5jaG9yQS5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsQW5jaG9yQS54LCB0aGlzLm1fbG9jYWxBbmNob3JBLnkpO1xuICAgIGxvZyhcIiAgamQubG9jYWxBbmNob3JCLlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1fbG9jYWxBbmNob3JCLngsIHRoaXMubV9sb2NhbEFuY2hvckIueSk7XG4gICAgbG9nKFwiICBqZC5yZWZlcmVuY2VBbmdsZSA9ICUuMTVmO1xcblwiLCB0aGlzLm1fcmVmZXJlbmNlQW5nbGUpO1xuICAgIGxvZyhcIiAgamQuc3RpZmZuZXNzID0gJS4xNWY7XFxuXCIsIHRoaXMubV9zdGlmZm5lc3MpO1xuICAgIGxvZyhcIiAgamQuZGFtcGluZyA9ICUuMTVmO1xcblwiLCB0aGlzLm1fZGFtcGluZyk7XG4gICAgbG9nKFwiICBqb2ludHNbJWRdID0gdGhpcy5tX3dvcmxkLkNyZWF0ZUpvaW50KGpkKTtcXG5cIiwgdGhpcy5tX2luZGV4KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBQ0E7QUFFQTtBQWtCQTtBQUFBO0FBV0E7QUFBQTtBQVZBO0FBRUE7QUFFQTtBQUVBO0FBRUE7O0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF0QkE7QUF3QkE7QUFBQTtBQStCQTtBQUFBO0FBOUJBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFXQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFJQTtBQUlBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBS0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzVEE7QUFzR0E7QUFDQTtBQUNBO0FBQ0E7QUF5RUE7QUFDQTtBQUNBO0FBd0lBO0FBQUE7QUF2V0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_weld_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_wheel_joint.ts":
/*!**********************************************!*\
  !*** ./src/box2d/dynamics/b2_wheel_joint.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2WheelJoint = exports.b2WheelJointDef = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2WheelJointDef = (function (_super) {\n    __extends(b2WheelJointDef, _super);\n    function b2WheelJointDef() {\n        var _this = _super.call(this, b2_joint_1.b2JointType.e_wheelJoint) || this;\n        _this.localAnchorA = new b2_math_1.b2Vec2(0, 0);\n        _this.localAnchorB = new b2_math_1.b2Vec2(0, 0);\n        _this.localAxisA = new b2_math_1.b2Vec2(1, 0);\n        _this.enableLimit = false;\n        _this.lowerTranslation = 0;\n        _this.upperTranslation = 0;\n        _this.enableMotor = false;\n        _this.maxMotorTorque = 0;\n        _this.motorSpeed = 0;\n        _this.stiffness = 0;\n        _this.damping = 0;\n        return _this;\n    }\n    b2WheelJointDef.prototype.Initialize = function (bA, bB, anchor, axis) {\n        this.bodyA = bA;\n        this.bodyB = bB;\n        this.bodyA.GetLocalPoint(anchor, this.localAnchorA);\n        this.bodyB.GetLocalPoint(anchor, this.localAnchorB);\n        this.bodyA.GetLocalVector(axis, this.localAxisA);\n    };\n    return b2WheelJointDef;\n}(b2_joint_1.b2JointDef));\nexports.b2WheelJointDef = b2WheelJointDef;\nvar b2WheelJoint = (function (_super) {\n    __extends(b2WheelJoint, _super);\n    function b2WheelJoint(def) {\n        var _this = _super.call(this, def) || this;\n        _this.m_localAnchorA = new b2_math_1.b2Vec2();\n        _this.m_localAnchorB = new b2_math_1.b2Vec2();\n        _this.m_localXAxisA = new b2_math_1.b2Vec2();\n        _this.m_localYAxisA = new b2_math_1.b2Vec2();\n        _this.m_impulse = 0;\n        _this.m_motorImpulse = 0;\n        _this.m_springImpulse = 0;\n        _this.m_lowerImpulse = 0;\n        _this.m_upperImpulse = 0;\n        _this.m_translation = 0;\n        _this.m_lowerTranslation = 0;\n        _this.m_upperTranslation = 0;\n        _this.m_maxMotorTorque = 0;\n        _this.m_motorSpeed = 0;\n        _this.m_enableLimit = false;\n        _this.m_enableMotor = false;\n        _this.m_stiffness = 0;\n        _this.m_damping = 0;\n        _this.m_indexA = 0;\n        _this.m_indexB = 0;\n        _this.m_localCenterA = new b2_math_1.b2Vec2();\n        _this.m_localCenterB = new b2_math_1.b2Vec2();\n        _this.m_invMassA = 0;\n        _this.m_invMassB = 0;\n        _this.m_invIA = 0;\n        _this.m_invIB = 0;\n        _this.m_ax = new b2_math_1.b2Vec2();\n        _this.m_ay = new b2_math_1.b2Vec2();\n        _this.m_sAx = 0;\n        _this.m_sBx = 0;\n        _this.m_sAy = 0;\n        _this.m_sBy = 0;\n        _this.m_mass = 0;\n        _this.m_motorMass = 0;\n        _this.m_axialMass = 0;\n        _this.m_springMass = 0;\n        _this.m_bias = 0;\n        _this.m_gamma = 0;\n        _this.m_qA = new b2_math_1.b2Rot();\n        _this.m_qB = new b2_math_1.b2Rot();\n        _this.m_lalcA = new b2_math_1.b2Vec2();\n        _this.m_lalcB = new b2_math_1.b2Vec2();\n        _this.m_rA = new b2_math_1.b2Vec2();\n        _this.m_rB = new b2_math_1.b2Vec2();\n        _this.m_localAnchorA.Copy(b2_settings_1.b2Maybe(def.localAnchorA, b2_math_1.b2Vec2.ZERO));\n        _this.m_localAnchorB.Copy(b2_settings_1.b2Maybe(def.localAnchorB, b2_math_1.b2Vec2.ZERO));\n        _this.m_localXAxisA.Copy(b2_settings_1.b2Maybe(def.localAxisA, b2_math_1.b2Vec2.UNITX));\n        b2_math_1.b2Vec2.CrossOneV(_this.m_localXAxisA, _this.m_localYAxisA);\n        _this.m_lowerTranslation = b2_settings_1.b2Maybe(def.lowerTranslation, 0);\n        _this.m_upperTranslation = b2_settings_1.b2Maybe(def.upperTranslation, 0);\n        _this.m_enableLimit = b2_settings_1.b2Maybe(def.enableLimit, false);\n        _this.m_maxMotorTorque = b2_settings_1.b2Maybe(def.maxMotorTorque, 0);\n        _this.m_motorSpeed = b2_settings_1.b2Maybe(def.motorSpeed, 0);\n        _this.m_enableMotor = b2_settings_1.b2Maybe(def.enableMotor, false);\n        _this.m_ax.SetZero();\n        _this.m_ay.SetZero();\n        _this.m_stiffness = b2_settings_1.b2Maybe(def.stiffness, 0);\n        _this.m_damping = b2_settings_1.b2Maybe(def.damping, 0);\n        return _this;\n    }\n    b2WheelJoint.prototype.GetMotorSpeed = function () {\n        return this.m_motorSpeed;\n    };\n    b2WheelJoint.prototype.GetMaxMotorTorque = function () {\n        return this.m_maxMotorTorque;\n    };\n    b2WheelJoint.prototype.SetSpringFrequencyHz = function (hz) {\n        this.m_stiffness = hz;\n    };\n    b2WheelJoint.prototype.GetSpringFrequencyHz = function () {\n        return this.m_stiffness;\n    };\n    b2WheelJoint.prototype.SetSpringDampingRatio = function (ratio) {\n        this.m_damping = ratio;\n    };\n    b2WheelJoint.prototype.GetSpringDampingRatio = function () {\n        return this.m_damping;\n    };\n    b2WheelJoint.prototype.InitVelocityConstraints = function (data) {\n        this.m_indexA = this.m_bodyA.m_islandIndex;\n        this.m_indexB = this.m_bodyB.m_islandIndex;\n        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);\n        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n        var d = b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVV(cB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVV(cA, rA, b2_math_1.b2Vec2.s_t1), b2WheelJoint.InitVelocityConstraints_s_d);\n        {\n            b2_math_1.b2Rot.MulRV(qA, this.m_localYAxisA, this.m_ay);\n            this.m_sAy = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), this.m_ay);\n            this.m_sBy = b2_math_1.b2Vec2.CrossVV(rB, this.m_ay);\n            this.m_mass = mA + mB + iA * this.m_sAy * this.m_sAy + iB * this.m_sBy * this.m_sBy;\n            if (this.m_mass > 0) {\n                this.m_mass = 1 / this.m_mass;\n            }\n        }\n        b2_math_1.b2Rot.MulRV(qA, this.m_localXAxisA, this.m_ax);\n        this.m_sAx = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), this.m_ax);\n        this.m_sBx = b2_math_1.b2Vec2.CrossVV(rB, this.m_ax);\n        var invMass = mA + mB + iA * this.m_sAx * this.m_sAx + iB * this.m_sBx * this.m_sBx;\n        if (invMass > 0.0) {\n            this.m_axialMass = 1.0 / invMass;\n        }\n        else {\n            this.m_axialMass = 0.0;\n        }\n        this.m_springMass = 0;\n        this.m_bias = 0;\n        this.m_gamma = 0;\n        if (this.m_stiffness > 0.0 && invMass > 0.0) {\n            this.m_springMass = 1.0 / invMass;\n            var C = b2_math_1.b2Vec2.DotVV(d, this.m_ax);\n            var h = data.step.dt;\n            this.m_gamma = h * (this.m_damping + h * this.m_stiffness);\n            if (this.m_gamma > 0.0) {\n                this.m_gamma = 1.0 / this.m_gamma;\n            }\n            this.m_bias = C * h * this.m_stiffness * this.m_gamma;\n            this.m_springMass = invMass + this.m_gamma;\n            if (this.m_springMass > 0.0) {\n                this.m_springMass = 1.0 / this.m_springMass;\n            }\n        }\n        else {\n            this.m_springImpulse = 0.0;\n        }\n        if (this.m_enableLimit) {\n            this.m_translation = b2_math_1.b2Vec2.DotVV(this.m_ax, d);\n        }\n        else {\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n        if (this.m_enableMotor) {\n            this.m_motorMass = iA + iB;\n            if (this.m_motorMass > 0) {\n                this.m_motorMass = 1 / this.m_motorMass;\n            }\n        }\n        else {\n            this.m_motorMass = 0;\n            this.m_motorImpulse = 0;\n        }\n        if (data.step.warmStarting) {\n            this.m_impulse *= data.step.dtRatio;\n            this.m_springImpulse *= data.step.dtRatio;\n            this.m_motorImpulse *= data.step.dtRatio;\n            var axialImpulse = this.m_springImpulse + this.m_lowerImpulse - this.m_upperImpulse;\n            var P = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.MulSV(this.m_impulse, this.m_ay, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.MulSV(axialImpulse, this.m_ax, b2_math_1.b2Vec2.s_t1), b2WheelJoint.InitVelocityConstraints_s_P);\n            var LA = this.m_impulse * this.m_sAy + axialImpulse * this.m_sAx + this.m_motorImpulse;\n            var LB = this.m_impulse * this.m_sBy + axialImpulse * this.m_sBx + this.m_motorImpulse;\n            vA.SelfMulSub(this.m_invMassA, P);\n            wA -= this.m_invIA * LA;\n            vB.SelfMulAdd(this.m_invMassB, P);\n            wB += this.m_invIB * LB;\n        }\n        else {\n            this.m_impulse = 0;\n            this.m_springImpulse = 0;\n            this.m_motorImpulse = 0;\n            this.m_lowerImpulse = 0;\n            this.m_upperImpulse = 0;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2WheelJoint.prototype.SolveVelocityConstraints = function (data) {\n        var mA = this.m_invMassA, mB = this.m_invMassB;\n        var iA = this.m_invIA, iB = this.m_invIB;\n        var vA = data.velocities[this.m_indexA].v;\n        var wA = data.velocities[this.m_indexA].w;\n        var vB = data.velocities[this.m_indexB].v;\n        var wB = data.velocities[this.m_indexB].w;\n        {\n            var Cdot = b2_math_1.b2Vec2.DotVV(this.m_ax, b2_math_1.b2Vec2.SubVV(vB, vA, b2_math_1.b2Vec2.s_t0)) + this.m_sBx * wB - this.m_sAx * wA;\n            var impulse = -this.m_springMass * (Cdot + this.m_bias + this.m_gamma * this.m_springImpulse);\n            this.m_springImpulse += impulse;\n            var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_ax, b2WheelJoint.SolveVelocityConstraints_s_P);\n            var LA = impulse * this.m_sAx;\n            var LB = impulse * this.m_sBx;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * LA;\n            vB.SelfMulAdd(mB, P);\n            wB += iB * LB;\n        }\n        {\n            var Cdot = wB - wA - this.m_motorSpeed;\n            var impulse = -this.m_motorMass * Cdot;\n            var oldImpulse = this.m_motorImpulse;\n            var maxImpulse = data.step.dt * this.m_maxMotorTorque;\n            this.m_motorImpulse = b2_math_1.b2Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);\n            impulse = this.m_motorImpulse - oldImpulse;\n            wA -= iA * impulse;\n            wB += iB * impulse;\n        }\n        if (this.m_enableLimit) {\n            {\n                var C = this.m_translation - this.m_lowerTranslation;\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_ax, b2_math_1.b2Vec2.SubVV(vB, vA, b2_math_1.b2Vec2.s_t0)) + this.m_sBx * wB - this.m_sAx * wA;\n                var impulse = -this.m_axialMass * (Cdot + b2_math_1.b2Max(C, 0.0) * data.step.inv_dt);\n                var oldImpulse = this.m_lowerImpulse;\n                this.m_lowerImpulse = b2_math_1.b2Max(this.m_lowerImpulse + impulse, 0.0);\n                impulse = this.m_lowerImpulse - oldImpulse;\n                var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_ax, b2WheelJoint.SolveVelocityConstraints_s_P);\n                var LA = impulse * this.m_sAx;\n                var LB = impulse * this.m_sBx;\n                vA.SelfMulSub(mA, P);\n                wA -= iA * LA;\n                vB.SelfMulAdd(mB, P);\n                wB += iB * LB;\n            }\n            {\n                var C = this.m_upperTranslation - this.m_translation;\n                var Cdot = b2_math_1.b2Vec2.DotVV(this.m_ax, b2_math_1.b2Vec2.SubVV(vA, vB, b2_math_1.b2Vec2.s_t0)) + this.m_sAx * wA - this.m_sBx * wB;\n                var impulse = -this.m_axialMass * (Cdot + b2_math_1.b2Max(C, 0.0) * data.step.inv_dt);\n                var oldImpulse = this.m_upperImpulse;\n                this.m_upperImpulse = b2_math_1.b2Max(this.m_upperImpulse + impulse, 0.0);\n                impulse = this.m_upperImpulse - oldImpulse;\n                var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_ax, b2WheelJoint.SolveVelocityConstraints_s_P);\n                var LA = impulse * this.m_sAx;\n                var LB = impulse * this.m_sBx;\n                vA.SelfMulAdd(mA, P);\n                wA += iA * LA;\n                vB.SelfMulSub(mB, P);\n                wB -= iB * LB;\n            }\n        }\n        {\n            var Cdot = b2_math_1.b2Vec2.DotVV(this.m_ay, b2_math_1.b2Vec2.SubVV(vB, vA, b2_math_1.b2Vec2.s_t0)) + this.m_sBy * wB - this.m_sAy * wA;\n            var impulse = -this.m_mass * Cdot;\n            this.m_impulse += impulse;\n            var P = b2_math_1.b2Vec2.MulSV(impulse, this.m_ay, b2WheelJoint.SolveVelocityConstraints_s_P);\n            var LA = impulse * this.m_sAy;\n            var LB = impulse * this.m_sBy;\n            vA.SelfMulSub(mA, P);\n            wA -= iA * LA;\n            vB.SelfMulAdd(mB, P);\n            wB += iB * LB;\n        }\n        data.velocities[this.m_indexA].w = wA;\n        data.velocities[this.m_indexB].w = wB;\n    };\n    b2WheelJoint.prototype.SolvePositionConstraints = function (data) {\n        var cA = data.positions[this.m_indexA].c;\n        var aA = data.positions[this.m_indexA].a;\n        var cB = data.positions[this.m_indexB].c;\n        var aB = data.positions[this.m_indexB].a;\n        var linearError = 0.0;\n        if (this.m_enableLimit) {\n            var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n            var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n            var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n            var d = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.SubVV(cB, cA, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(rB, rA, b2_math_1.b2Vec2.s_t1), b2WheelJoint.SolvePositionConstraints_s_d);\n            var ax = b2_math_1.b2Rot.MulRV(qA, this.m_localXAxisA, this.m_ax);\n            var sAx = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), this.m_ax);\n            var sBx = b2_math_1.b2Vec2.CrossVV(rB, this.m_ax);\n            var C = 0.0;\n            var translation = b2_math_1.b2Vec2.DotVV(ax, d);\n            if (b2_math_1.b2Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2_settings_1.b2_linearSlop) {\n                C = translation;\n            }\n            else if (translation <= this.m_lowerTranslation) {\n                C = b2_math_1.b2Min(translation - this.m_lowerTranslation, 0.0);\n            }\n            else if (translation >= this.m_upperTranslation) {\n                C = b2_math_1.b2Max(translation - this.m_upperTranslation, 0.0);\n            }\n            if (C !== 0.0) {\n                var invMass = this.m_invMassA + this.m_invMassB + this.m_invIA * sAx * sAx + this.m_invIB * sBx * sBx;\n                var impulse = 0.0;\n                if (invMass !== 0.0) {\n                    impulse = -C / invMass;\n                }\n                var P = b2_math_1.b2Vec2.MulSV(impulse, ax, b2WheelJoint.SolvePositionConstraints_s_P);\n                var LA = impulse * sAx;\n                var LB = impulse * sBx;\n                cA.SelfMulSub(this.m_invMassA, P);\n                aA -= this.m_invIA * LA;\n                cB.SelfMulAdd(this.m_invMassB, P);\n                aB += this.m_invIB * LB;\n                linearError = b2_math_1.b2Abs(C);\n            }\n        }\n        {\n            var qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);\n            var rA = b2_math_1.b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);\n            b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);\n            var rB = b2_math_1.b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);\n            var d = b2_math_1.b2Vec2.AddVV(b2_math_1.b2Vec2.SubVV(cB, cA, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.SubVV(rB, rA, b2_math_1.b2Vec2.s_t1), b2WheelJoint.SolvePositionConstraints_s_d);\n            var ay = b2_math_1.b2Rot.MulRV(qA, this.m_localYAxisA, this.m_ay);\n            var sAy = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.AddVV(d, rA, b2_math_1.b2Vec2.s_t0), ay);\n            var sBy = b2_math_1.b2Vec2.CrossVV(rB, ay);\n            var C = b2_math_1.b2Vec2.DotVV(d, ay);\n            var invMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_sAy * this.m_sAy + this.m_invIB * this.m_sBy * this.m_sBy;\n            var impulse = 0.0;\n            if (invMass !== 0.0) {\n                impulse = -C / invMass;\n            }\n            var P = b2_math_1.b2Vec2.MulSV(impulse, ay, b2WheelJoint.SolvePositionConstraints_s_P);\n            var LA = impulse * sAy;\n            var LB = impulse * sBy;\n            cA.SelfMulSub(this.m_invMassA, P);\n            aA -= this.m_invIA * LA;\n            cB.SelfMulAdd(this.m_invMassB, P);\n            aB += this.m_invIB * LB;\n            linearError = b2_math_1.b2Max(linearError, b2_math_1.b2Abs(C));\n        }\n        data.positions[this.m_indexA].a = aA;\n        data.positions[this.m_indexB].a = aB;\n        return linearError <= b2_settings_1.b2_linearSlop;\n    };\n    b2WheelJoint.prototype.GetDefinition = function (def) {\n        return def;\n    };\n    b2WheelJoint.prototype.GetAnchorA = function (out) {\n        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);\n    };\n    b2WheelJoint.prototype.GetAnchorB = function (out) {\n        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);\n    };\n    b2WheelJoint.prototype.GetReactionForce = function (inv_dt, out) {\n        out.x = inv_dt * (this.m_impulse * this.m_ay.x + (this.m_springImpulse + this.m_lowerImpulse - this.m_upperImpulse) * this.m_ax.x);\n        out.y = inv_dt * (this.m_impulse * this.m_ay.y + (this.m_springImpulse + this.m_lowerImpulse - this.m_upperImpulse) * this.m_ax.y);\n        return out;\n    };\n    b2WheelJoint.prototype.GetReactionTorque = function (inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n    };\n    b2WheelJoint.prototype.GetLocalAnchorA = function () { return this.m_localAnchorA; };\n    b2WheelJoint.prototype.GetLocalAnchorB = function () { return this.m_localAnchorB; };\n    b2WheelJoint.prototype.GetLocalAxisA = function () { return this.m_localXAxisA; };\n    b2WheelJoint.prototype.GetJointTranslation = function () {\n        return this.GetPrismaticJointTranslation();\n    };\n    b2WheelJoint.prototype.GetJointLinearSpeed = function () {\n        return this.GetPrismaticJointSpeed();\n    };\n    b2WheelJoint.prototype.GetJointAngle = function () {\n        return this.GetRevoluteJointAngle();\n    };\n    b2WheelJoint.prototype.GetJointAngularSpeed = function () {\n        return this.GetRevoluteJointSpeed();\n    };\n    b2WheelJoint.prototype.GetPrismaticJointTranslation = function () {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        var pA = bA.GetWorldPoint(this.m_localAnchorA, new b2_math_1.b2Vec2());\n        var pB = bB.GetWorldPoint(this.m_localAnchorB, new b2_math_1.b2Vec2());\n        var d = b2_math_1.b2Vec2.SubVV(pB, pA, new b2_math_1.b2Vec2());\n        var axis = bA.GetWorldVector(this.m_localXAxisA, new b2_math_1.b2Vec2());\n        var translation = b2_math_1.b2Vec2.DotVV(d, axis);\n        return translation;\n    };\n    b2WheelJoint.prototype.GetPrismaticJointSpeed = function () {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorA, bA.m_sweep.localCenter, this.m_lalcA);\n        var rA = b2_math_1.b2Rot.MulRV(bA.m_xf.q, this.m_lalcA, this.m_rA);\n        b2_math_1.b2Vec2.SubVV(this.m_localAnchorB, bB.m_sweep.localCenter, this.m_lalcB);\n        var rB = b2_math_1.b2Rot.MulRV(bB.m_xf.q, this.m_lalcB, this.m_rB);\n        var pA = b2_math_1.b2Vec2.AddVV(bA.m_sweep.c, rA, b2_math_1.b2Vec2.s_t0);\n        var pB = b2_math_1.b2Vec2.AddVV(bB.m_sweep.c, rB, b2_math_1.b2Vec2.s_t1);\n        var d = b2_math_1.b2Vec2.SubVV(pB, pA, b2_math_1.b2Vec2.s_t2);\n        var axis = bA.GetWorldVector(this.m_localXAxisA, new b2_math_1.b2Vec2());\n        var vA = bA.m_linearVelocity;\n        var vB = bB.m_linearVelocity;\n        var wA = bA.m_angularVelocity;\n        var wB = bB.m_angularVelocity;\n        var speed = b2_math_1.b2Vec2.DotVV(d, b2_math_1.b2Vec2.CrossSV(wA, axis, b2_math_1.b2Vec2.s_t0)) +\n            b2_math_1.b2Vec2.DotVV(axis, b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.AddVCrossSV(vB, wB, rB, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVCrossSV(vA, wA, rA, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0));\n        return speed;\n    };\n    b2WheelJoint.prototype.GetRevoluteJointAngle = function () {\n        return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a;\n    };\n    b2WheelJoint.prototype.GetRevoluteJointSpeed = function () {\n        var wA = this.m_bodyA.m_angularVelocity;\n        var wB = this.m_bodyB.m_angularVelocity;\n        return wB - wA;\n    };\n    b2WheelJoint.prototype.IsMotorEnabled = function () {\n        return this.m_enableMotor;\n    };\n    b2WheelJoint.prototype.EnableMotor = function (flag) {\n        if (flag !== this.m_enableMotor) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_enableMotor = flag;\n        }\n    };\n    b2WheelJoint.prototype.SetMotorSpeed = function (speed) {\n        if (speed !== this.m_motorSpeed) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_motorSpeed = speed;\n        }\n    };\n    b2WheelJoint.prototype.SetMaxMotorTorque = function (force) {\n        if (force !== this.m_maxMotorTorque) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_maxMotorTorque = force;\n        }\n    };\n    b2WheelJoint.prototype.GetMotorTorque = function (inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n    };\n    b2WheelJoint.prototype.IsLimitEnabled = function () {\n        return this.m_enableLimit;\n    };\n    b2WheelJoint.prototype.EnableLimit = function (flag) {\n        if (flag !== this.m_enableLimit) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_enableLimit = flag;\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n    };\n    b2WheelJoint.prototype.GetLowerLimit = function () {\n        return this.m_lowerTranslation;\n    };\n    b2WheelJoint.prototype.GetUpperLimit = function () {\n        return this.m_upperTranslation;\n    };\n    b2WheelJoint.prototype.SetLimits = function (lower, upper) {\n        if (lower !== this.m_lowerTranslation || upper !== this.m_upperTranslation) {\n            this.m_bodyA.SetAwake(true);\n            this.m_bodyB.SetAwake(true);\n            this.m_lowerTranslation = lower;\n            this.m_upperTranslation = upper;\n            this.m_lowerImpulse = 0.0;\n            this.m_upperImpulse = 0.0;\n        }\n    };\n    b2WheelJoint.prototype.Dump = function (log) {\n        var indexA = this.m_bodyA.m_islandIndex;\n        var indexB = this.m_bodyB.m_islandIndex;\n        log(\"  const jd: b2WheelJointDef = new b2WheelJointDef();\\n\");\n        log(\"  jd.bodyA = bodies[%d];\\n\", indexA);\n        log(\"  jd.bodyB = bodies[%d];\\n\", indexB);\n        log(\"  jd.collideConnected = %s;\\n\", (this.m_collideConnected) ? (\"true\") : (\"false\"));\n        log(\"  jd.localAnchorA.Set(%.15f, %.15f);\\n\", this.m_localAnchorA.x, this.m_localAnchorA.y);\n        log(\"  jd.localAnchorB.Set(%.15f, %.15f);\\n\", this.m_localAnchorB.x, this.m_localAnchorB.y);\n        log(\"  jd.localAxisA.Set(%.15f, %.15f);\\n\", this.m_localXAxisA.x, this.m_localXAxisA.y);\n        log(\"  jd.enableMotor = %s;\\n\", (this.m_enableMotor) ? (\"true\") : (\"false\"));\n        log(\"  jd.motorSpeed = %.15f;\\n\", this.m_motorSpeed);\n        log(\"  jd.maxMotorTorque = %.15f;\\n\", this.m_maxMotorTorque);\n        log(\"  jd.stiffness = %.15f;\\n\", this.m_stiffness);\n        log(\"  jd.damping = %.15f;\\n\", this.m_damping);\n        log(\"  joints[%d] = this.m_world.CreateJoint(jd);\\n\", this.m_index);\n    };\n    b2WheelJoint.prototype.Draw = function (draw) {\n        var xfA = this.m_bodyA.GetTransform();\n        var xfB = this.m_bodyB.GetTransform();\n        var pA = b2_math_1.b2Transform.MulXV(xfA, this.m_localAnchorA, b2WheelJoint.Draw_s_pA);\n        var pB = b2_math_1.b2Transform.MulXV(xfB, this.m_localAnchorB, b2WheelJoint.Draw_s_pB);\n        var axis = b2_math_1.b2Rot.MulRV(xfA.q, this.m_localXAxisA, b2WheelJoint.Draw_s_axis);\n        var c1 = b2WheelJoint.Draw_s_c1;\n        var c2 = b2WheelJoint.Draw_s_c2;\n        var c3 = b2WheelJoint.Draw_s_c3;\n        var c4 = b2WheelJoint.Draw_s_c4;\n        var c5 = b2WheelJoint.Draw_s_c5;\n        draw.DrawSegment(pA, pB, c5);\n        if (this.m_enableLimit) {\n            var lower = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_lowerTranslation, axis, b2WheelJoint.Draw_s_lower);\n            var upper = b2_math_1.b2Vec2.AddVMulSV(pA, this.m_upperTranslation, axis, b2WheelJoint.Draw_s_upper);\n            var perp = b2_math_1.b2Rot.MulRV(xfA.q, this.m_localYAxisA, b2WheelJoint.Draw_s_perp);\n            draw.DrawSegment(lower, upper, c1);\n            draw.DrawSegment(b2_math_1.b2Vec2.AddVMulSV(lower, -0.5, perp, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVMulSV(lower, 0.5, perp, b2_math_1.b2Vec2.s_t1), c2);\n            draw.DrawSegment(b2_math_1.b2Vec2.AddVMulSV(upper, -0.5, perp, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVMulSV(upper, 0.5, perp, b2_math_1.b2Vec2.s_t1), c3);\n        }\n        else {\n            draw.DrawSegment(b2_math_1.b2Vec2.AddVMulSV(pA, -1.0, axis, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.AddVMulSV(pA, 1.0, axis, b2_math_1.b2Vec2.s_t1), c1);\n        }\n        draw.DrawPoint(pA, 5.0, c1);\n        draw.DrawPoint(pB, 5.0, c4);\n    };\n    b2WheelJoint.InitVelocityConstraints_s_d = new b2_math_1.b2Vec2();\n    b2WheelJoint.InitVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2WheelJoint.SolveVelocityConstraints_s_P = new b2_math_1.b2Vec2();\n    b2WheelJoint.SolvePositionConstraints_s_d = new b2_math_1.b2Vec2();\n    b2WheelJoint.SolvePositionConstraints_s_P = new b2_math_1.b2Vec2();\n    b2WheelJoint.Draw_s_pA = new b2_math_1.b2Vec2();\n    b2WheelJoint.Draw_s_pB = new b2_math_1.b2Vec2();\n    b2WheelJoint.Draw_s_axis = new b2_math_1.b2Vec2();\n    b2WheelJoint.Draw_s_c1 = new b2_draw_1.b2Color(0.7, 0.7, 0.7);\n    b2WheelJoint.Draw_s_c2 = new b2_draw_1.b2Color(0.3, 0.9, 0.3);\n    b2WheelJoint.Draw_s_c3 = new b2_draw_1.b2Color(0.9, 0.3, 0.3);\n    b2WheelJoint.Draw_s_c4 = new b2_draw_1.b2Color(0.3, 0.3, 0.9);\n    b2WheelJoint.Draw_s_c5 = new b2_draw_1.b2Color(0.4, 0.4, 0.4);\n    b2WheelJoint.Draw_s_lower = new b2_math_1.b2Vec2();\n    b2WheelJoint.Draw_s_upper = new b2_math_1.b2Vec2();\n    b2WheelJoint.Draw_s_perp = new b2_math_1.b2Vec2();\n    return b2WheelJoint;\n}(b2_joint_1.b2Joint));\nexports.b2WheelJoint = b2WheelJoint;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfd2hlZWxfam9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfd2hlZWxfam9pbnQudHM/Zjk5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfbGluZWFyU2xvcCwgYjJNYXliZSB9IGZyb20gXCIuLi9jb21tb24vYjJfc2V0dGluZ3NcIjtcbmltcG9ydCB7IGIyQWJzLCBiMkNsYW1wLCBiMlZlYzIsIGIyUm90LCBYWSwgYjJNYXgsIGIyTWluLCBiMlRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJKb2ludCwgYjJKb2ludERlZiwgYjJKb2ludFR5cGUsIGIySUpvaW50RGVmIH0gZnJvbSBcIi4vYjJfam9pbnRcIjtcbmltcG9ydCB7IGIyU29sdmVyRGF0YSB9IGZyb20gXCIuL2IyX3RpbWVfc3RlcFwiO1xuaW1wb3J0IHsgYjJCb2R5IH0gZnJvbSBcIi4vYjJfYm9keVwiO1xuaW1wb3J0IHsgYjJEcmF3LCBiMkNvbG9yIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9kcmF3XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgYjJJV2hlZWxKb2ludERlZiBleHRlbmRzIGIySUpvaW50RGVmIHtcbiAgLy8vIFRoZSBsb2NhbCBhbmNob3IgcG9pbnQgcmVsYXRpdmUgdG8gYm9keUEncyBvcmlnaW4uXG4gIGxvY2FsQW5jaG9yQT86IFhZO1xuXG4gIC8vLyBUaGUgbG9jYWwgYW5jaG9yIHBvaW50IHJlbGF0aXZlIHRvIGJvZHlCJ3Mgb3JpZ2luLlxuICBsb2NhbEFuY2hvckI/OiBYWTtcblxuICAvLy8gVGhlIGxvY2FsIHRyYW5zbGF0aW9uIGF4aXMgaW4gYm9keUEuXG4gIGxvY2FsQXhpc0E/OiBYWTtcblxuICAvLy8gRW5hYmxlL2Rpc2FibGUgdGhlIGpvaW50IGxpbWl0LlxuICBlbmFibGVMaW1pdD86IGJvb2xlYW47XG5cbiAgLy8vIFRoZSBsb3dlciB0cmFuc2xhdGlvbiBsaW1pdCwgdXN1YWxseSBpbiBtZXRlcnMuXG4gIGxvd2VyVHJhbnNsYXRpb24/OiBudW1iZXI7XG5cbiAgLy8vIFRoZSB1cHBlciB0cmFuc2xhdGlvbiBsaW1pdCwgdXN1YWxseSBpbiBtZXRlcnMuXG4gIHVwcGVyVHJhbnNsYXRpb24/OiBudW1iZXI7XG5cbiAgLy8vIEVuYWJsZS9kaXNhYmxlIHRoZSBqb2ludCBtb3Rvci5cbiAgZW5hYmxlTW90b3I/OiBib29sZWFuO1xuXG4gIC8vLyBUaGUgbWF4aW11bSBtb3RvciB0b3JxdWUsIHVzdWFsbHkgaW4gTi1tLlxuICBtYXhNb3RvclRvcnF1ZT86IG51bWJlcjtcblxuICAvLy8gVGhlIGRlc2lyZWQgbW90b3Igc3BlZWQgaW4gcmFkaWFucyBwZXIgc2Vjb25kLlxuICBtb3RvclNwZWVkPzogbnVtYmVyO1xuXG4gIC8vLyBTdXNwZW5zaW9uIHN0aWZmbmVzcy4gVHlwaWNhbGx5IGluIHVuaXRzIE4vbS5cbiAgc3RpZmZuZXNzPzogbnVtYmVyO1xuXG4gIC8vLyBTdXNwZW5zaW9uIGRhbXBpbmcuIFR5cGljYWxseSBpbiB1bml0cyBvZiBOKnMvbS5cbiAgZGFtcGluZz86IG51bWJlcjtcbn1cblxuLy8vIFdoZWVsIGpvaW50IGRlZmluaXRpb24uIFRoaXMgcmVxdWlyZXMgZGVmaW5pbmcgYSBsaW5lIG9mXG4vLy8gbW90aW9uIHVzaW5nIGFuIGF4aXMgYW5kIGFuIGFuY2hvciBwb2ludC4gVGhlIGRlZmluaXRpb24gdXNlcyBsb2NhbFxuLy8vIGFuY2hvciBwb2ludHMgYW5kIGEgbG9jYWwgYXhpcyBzbyB0aGF0IHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb25cbi8vLyBjYW4gdmlvbGF0ZSB0aGUgY29uc3RyYWludCBzbGlnaHRseS4gVGhlIGpvaW50IHRyYW5zbGF0aW9uIGlzIHplcm9cbi8vLyB3aGVuIHRoZSBsb2NhbCBhbmNob3IgcG9pbnRzIGNvaW5jaWRlIGluIHdvcmxkIHNwYWNlLiBVc2luZyBsb2NhbFxuLy8vIGFuY2hvcnMgYW5kIGEgbG9jYWwgYXhpcyBoZWxwcyB3aGVuIHNhdmluZyBhbmQgbG9hZGluZyBhIGdhbWUuXG5leHBvcnQgY2xhc3MgYjJXaGVlbEpvaW50RGVmIGV4dGVuZHMgYjJKb2ludERlZiBpbXBsZW1lbnRzIGIySVdoZWVsSm9pbnREZWYge1xuICBwdWJsaWMgcmVhZG9ubHkgbG9jYWxBbmNob3JBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKDAsIDApO1xuXG4gIHB1YmxpYyByZWFkb25seSBsb2NhbEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMCwgMCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGxvY2FsQXhpc0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoMSwgMCk7XG5cbiAgcHVibGljIGVuYWJsZUxpbWl0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGxvd2VyVHJhbnNsYXRpb246IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHVwcGVyVHJhbnNsYXRpb246IG51bWJlciA9IDA7XG5cbiAgcHVibGljIGVuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgcHVibGljIG1heE1vdG9yVG9ycXVlOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtb3RvclNwZWVkOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBzdGlmZm5lc3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIGRhbXBpbmc6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoYjJKb2ludFR5cGUuZV93aGVlbEpvaW50KTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0aWFsaXplKGJBOiBiMkJvZHksIGJCOiBiMkJvZHksIGFuY2hvcjogWFksIGF4aXM6IFhZKTogdm9pZCB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yLCB0aGlzLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvciwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMuYm9keUEuR2V0TG9jYWxWZWN0b3IoYXhpcywgdGhpcy5sb2NhbEF4aXNBKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJXaGVlbEpvaW50IGV4dGVuZHMgYjJKb2ludCB7XG4gIHB1YmxpYyByZWFkb25seSBtX2xvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbEFuY2hvckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxYQXhpc0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxZQXhpc0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgbV9pbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9tb3RvckltcHVsc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3NwcmluZ0ltcHVsc2U6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIG1fbG93ZXJJbXB1bHNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV91cHBlckltcHVsc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3RyYW5zbGF0aW9uOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9sb3dlclRyYW5zbGF0aW9uOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV91cHBlclRyYW5zbGF0aW9uOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtX21heE1vdG9yVG9ycXVlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9tb3RvclNwZWVkOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBtX2VuYWJsZUxpbWl0ID0gZmFsc2U7XG4gIHB1YmxpYyBtX2VuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgcHVibGljIG1fc3RpZmZuZXNzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9kYW1waW5nOiBudW1iZXIgPSAwO1xuXG4gIC8vIFNvbHZlciB0ZW1wXG4gIHB1YmxpYyBtX2luZGV4QTogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9sb2NhbENlbnRlckE6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2ludk1hc3NBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnZNYXNzQjogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52SUE6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2ludklCOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyByZWFkb25seSBtX2F4OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2F5OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX3NBeDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fc0J4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9zQXk6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX3NCeTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9tYXNzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9tb3Rvck1hc3M6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2F4aWFsTWFzczogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fc3ByaW5nTWFzczogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9iaWFzOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9nYW1tYTogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9xQTogYjJSb3QgPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fcUI6IGIyUm90ID0gbmV3IGIyUm90KCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX2xhbGNCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3JBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBtX3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgY29uc3RydWN0b3IoZGVmOiBiMklXaGVlbEpvaW50RGVmKSB7XG4gICAgc3VwZXIoZGVmKTtcblxuICAgIHRoaXMubV9sb2NhbEFuY2hvckEuQ29weShiMk1heWJlKGRlZi5sb2NhbEFuY2hvckEsIGIyVmVjMi5aRVJPKSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQW5jaG9yQiwgYjJWZWMyLlpFUk8pKTtcbiAgICB0aGlzLm1fbG9jYWxYQXhpc0EuQ29weShiMk1heWJlKGRlZi5sb2NhbEF4aXNBLCBiMlZlYzIuVU5JVFgpKTtcbiAgICBiMlZlYzIuQ3Jvc3NPbmVWKHRoaXMubV9sb2NhbFhBeGlzQSwgdGhpcy5tX2xvY2FsWUF4aXNBKTtcblxuICAgIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gYjJNYXliZShkZWYubG93ZXJUcmFuc2xhdGlvbiwgMCk7XG4gICAgdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gPSBiMk1heWJlKGRlZi51cHBlclRyYW5zbGF0aW9uLCAwKTtcbiAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBiMk1heWJlKGRlZi5lbmFibGVMaW1pdCwgZmFsc2UpO1xuXG4gICAgdGhpcy5tX21heE1vdG9yVG9ycXVlID0gYjJNYXliZShkZWYubWF4TW90b3JUb3JxdWUsIDApO1xuICAgIHRoaXMubV9tb3RvclNwZWVkID0gYjJNYXliZShkZWYubW90b3JTcGVlZCwgMCk7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gYjJNYXliZShkZWYuZW5hYmxlTW90b3IsIGZhbHNlKTtcblxuICAgIHRoaXMubV9heC5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX2F5LlNldFplcm8oKTtcblxuICAgIHRoaXMubV9zdGlmZm5lc3MgPSBiMk1heWJlKGRlZi5zdGlmZm5lc3MsIDApO1xuICAgIHRoaXMubV9kYW1waW5nID0gYjJNYXliZShkZWYuZGFtcGluZywgMCk7XG4gIH1cblxuICBwdWJsaWMgR2V0TW90b3JTcGVlZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbW90b3JTcGVlZDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRNYXhNb3RvclRvcnF1ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbWF4TW90b3JUb3JxdWU7XG4gIH1cblxuICBwdWJsaWMgU2V0U3ByaW5nRnJlcXVlbmN5SHooaHo6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9zdGlmZm5lc3MgPSBoejtcbiAgfVxuXG4gIHB1YmxpYyBHZXRTcHJpbmdGcmVxdWVuY3lIeigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fc3RpZmZuZXNzO1xuICB9XG5cbiAgcHVibGljIFNldFNwcmluZ0RhbXBpbmdSYXRpbyhyYXRpbzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2RhbXBpbmcgPSByYXRpbztcbiAgfVxuXG4gIHB1YmxpYyBHZXRTcHJpbmdEYW1waW5nUmF0aW8oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2RhbXBpbmc7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50c19zX2QgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMubV9pbmRleEEgPSB0aGlzLm1fYm9keUEubV9pc2xhbmRJbmRleDtcbiAgICB0aGlzLm1faW5kZXhCID0gdGhpcy5tX2JvZHlCLm1faXNsYW5kSW5kZXg7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQS5Db3B5KHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJCLkNvcHkodGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52SUEgPSB0aGlzLm1fYm9keUEubV9pbnZJO1xuICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG5cbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLCBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XG5cbiAgICBjb25zdCBjQTogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYztcbiAgICBjb25zdCBhQTogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYTtcbiAgICBjb25zdCB2QTogYjJWZWMyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnY7XG4gICAgbGV0IHdBOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udztcblxuICAgIGNvbnN0IGNCOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5jO1xuICAgIGNvbnN0IGFCOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hO1xuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcbiAgICBsZXQgd0I6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53O1xuXG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSwgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcblxuICAgIC8vIENvbXB1dGUgdGhlIGVmZmVjdGl2ZSBtYXNzZXMuXG4gICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBLCB0aGlzLm1fbGFsY0EpO1xuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xuICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQiwgdGhpcy5tX2xhbGNCKTtcbiAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcbiAgICAvLyBiMlZlYzIgZCA9IGNCICsgckIgLSBjQSAtIHJBO1xuICAgIGNvbnN0IGQ6IGIyVmVjMiA9IGIyVmVjMi5TdWJWVihcbiAgICAgIGIyVmVjMi5BZGRWVihjQiwgckIsIGIyVmVjMi5zX3QwKSxcbiAgICAgIGIyVmVjMi5BZGRWVihjQSwgckEsIGIyVmVjMi5zX3QxKSxcbiAgICAgIGIyV2hlZWxKb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50c19zX2QpO1xuXG4gICAgLy8gUG9pbnQgdG8gbGluZSBjb25zdHJhaW50XG4gICAge1xuICAgICAgLy8gbV9heSA9IGIyTXVsKHFBLCBtX2xvY2FsWUF4aXNBKTtcbiAgICAgIGIyUm90Lk11bFJWKHFBLCB0aGlzLm1fbG9jYWxZQXhpc0EsIHRoaXMubV9heSk7XG4gICAgICAvLyBtX3NBeSA9IGIyQ3Jvc3MoZCArIHJBLCBtX2F5KTtcbiAgICAgIHRoaXMubV9zQXkgPSBiMlZlYzIuQ3Jvc3NWVihiMlZlYzIuQWRkVlYoZCwgckEsIGIyVmVjMi5zX3QwKSwgdGhpcy5tX2F5KTtcbiAgICAgIC8vIG1fc0J5ID0gYjJDcm9zcyhyQiwgbV9heSk7XG4gICAgICB0aGlzLm1fc0J5ID0gYjJWZWMyLkNyb3NzVlYockIsIHRoaXMubV9heSk7XG5cbiAgICAgIHRoaXMubV9tYXNzID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3NBeSAqIHRoaXMubV9zQXkgKyBpQiAqIHRoaXMubV9zQnkgKiB0aGlzLm1fc0J5O1xuXG4gICAgICBpZiAodGhpcy5tX21hc3MgPiAwKSB7XG4gICAgICAgIHRoaXMubV9tYXNzID0gMSAvIHRoaXMubV9tYXNzO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNwcmluZyBjb25zdHJhaW50XG4gICAgYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sb2NhbFhBeGlzQSwgdGhpcy5tX2F4KTsgLy8gbV9heCA9IGIyTXVsKHFBLCBtX2xvY2FsWEF4aXNBKTtcbiAgICB0aGlzLm1fc0F4ID0gYjJWZWMyLkNyb3NzVlYoYjJWZWMyLkFkZFZWKGQsIHJBLCBiMlZlYzIuc190MCksIHRoaXMubV9heCk7XG4gICAgdGhpcy5tX3NCeCA9IGIyVmVjMi5Dcm9zc1ZWKHJCLCB0aGlzLm1fYXgpO1xuXG4gICAgY29uc3QgaW52TWFzczogbnVtYmVyID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3NBeCAqIHRoaXMubV9zQXggKyBpQiAqIHRoaXMubV9zQnggKiB0aGlzLm1fc0J4O1xuICAgIGlmIChpbnZNYXNzID4gMC4wKSB7XG4gICAgICB0aGlzLm1fYXhpYWxNYXNzID0gMS4wIC8gaW52TWFzcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2F4aWFsTWFzcyA9IDAuMDtcbiAgICB9XG5cbiAgICB0aGlzLm1fc3ByaW5nTWFzcyA9IDA7XG4gICAgdGhpcy5tX2JpYXMgPSAwO1xuICAgIHRoaXMubV9nYW1tYSA9IDA7XG5cbiAgICBpZiAodGhpcy5tX3N0aWZmbmVzcyA+IDAuMCAmJiBpbnZNYXNzID4gMC4wKSB7XG4gICAgICB0aGlzLm1fc3ByaW5nTWFzcyA9IDEuMCAvIGludk1hc3M7XG5cbiAgICAgIGNvbnN0IEM6IG51bWJlciA9IGIyVmVjMi5Eb3RWVihkLCB0aGlzLm1fYXgpO1xuXG4gICAgICAvLyBtYWdpYyBmb3JtdWxhc1xuICAgICAgY29uc3QgaDogbnVtYmVyID0gZGF0YS5zdGVwLmR0O1xuICAgICAgdGhpcy5tX2dhbW1hID0gaCAqICh0aGlzLm1fZGFtcGluZyArIGggKiB0aGlzLm1fc3RpZmZuZXNzKTtcbiAgICAgIGlmICh0aGlzLm1fZ2FtbWEgPiAwLjApIHtcbiAgICAgICAgdGhpcy5tX2dhbW1hID0gMS4wIC8gdGhpcy5tX2dhbW1hO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1fYmlhcyA9IEMgKiBoICogdGhpcy5tX3N0aWZmbmVzcyAqIHRoaXMubV9nYW1tYTtcblxuICAgICAgdGhpcy5tX3NwcmluZ01hc3MgPSBpbnZNYXNzICsgdGhpcy5tX2dhbW1hO1xuICAgICAgaWYgKHRoaXMubV9zcHJpbmdNYXNzID4gMC4wKSB7XG4gICAgICAgIHRoaXMubV9zcHJpbmdNYXNzID0gMS4wIC8gdGhpcy5tX3NwcmluZ01hc3M7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9zcHJpbmdJbXB1bHNlID0gMC4wO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQpIHtcbiAgICAgIHRoaXMubV90cmFuc2xhdGlvbiA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fYXgsIGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gMC4wO1xuICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSA9IDAuMDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yKSB7XG4gICAgICB0aGlzLm1fbW90b3JNYXNzID0gaUEgKyBpQjtcbiAgICAgIGlmICh0aGlzLm1fbW90b3JNYXNzID4gMCkge1xuICAgICAgICB0aGlzLm1fbW90b3JNYXNzID0gMSAvIHRoaXMubV9tb3Rvck1hc3M7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9tb3Rvck1hc3MgPSAwO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIC8vIEFjY291bnQgZm9yIHZhcmlhYmxlIHRpbWUgc3RlcC5cbiAgICAgIHRoaXMubV9pbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX3NwcmluZ0ltcHVsc2UgKj0gZGF0YS5zdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlICo9IGRhdGEuc3RlcC5kdFJhdGlvO1xuXG4gICAgICBjb25zdCBheGlhbEltcHVsc2U6IG51bWJlciA9IHRoaXMubV9zcHJpbmdJbXB1bHNlICsgdGhpcy5tX2xvd2VySW1wdWxzZSAtIHRoaXMubV91cHBlckltcHVsc2U7XG4gICAgICAvLyBiMlZlYzIgUCA9IG1faW1wdWxzZSAqIG1fYXkgKyBtX3NwcmluZ0ltcHVsc2UgKiBtX2F4O1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLkFkZFZWKFxuICAgICAgICBiMlZlYzIuTXVsU1YodGhpcy5tX2ltcHVsc2UsIHRoaXMubV9heSwgYjJWZWMyLnNfdDApLFxuICAgICAgICBiMlZlYzIuTXVsU1YoYXhpYWxJbXB1bHNlLCB0aGlzLm1fYXgsIGIyVmVjMi5zX3QxKSxcbiAgICAgICAgYjJXaGVlbEpvaW50LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICAvLyBmbG9hdDMyIExBID0gbV9pbXB1bHNlICogbV9zQXkgKyBtX3NwcmluZ0ltcHVsc2UgKiBtX3NBeCArIG1fbW90b3JJbXB1bHNlO1xuICAgICAgY29uc3QgTEE6IG51bWJlciA9IHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3NBeSArIGF4aWFsSW1wdWxzZSAqIHRoaXMubV9zQXggKyB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgLy8gZmxvYXQzMiBMQiA9IG1faW1wdWxzZSAqIG1fc0J5ICsgbV9zcHJpbmdJbXB1bHNlICogbV9zQnggKyBtX21vdG9ySW1wdWxzZTtcbiAgICAgIGNvbnN0IExCOiBudW1iZXIgPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9zQnkgKyBheGlhbEltcHVsc2UgKiB0aGlzLm1fc0J4ICsgdGhpcy5tX21vdG9ySW1wdWxzZTtcblxuICAgICAgLy8gdkEgLT0gbV9pbnZNYXNzQSAqIFA7XG4gICAgICB2QS5TZWxmTXVsU3ViKHRoaXMubV9pbnZNYXNzQSwgUCk7XG4gICAgICB3QSAtPSB0aGlzLm1faW52SUEgKiBMQTtcblxuICAgICAgLy8gdkIgKz0gbV9pbnZNYXNzQiAqIFA7XG4gICAgICB2Qi5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQiwgUCk7XG4gICAgICB3QiArPSB0aGlzLm1faW52SUIgKiBMQjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgICAgdGhpcy5tX3NwcmluZ0ltcHVsc2UgPSAwO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDA7XG4gICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gMDtcbiAgICAgIHRoaXMubV91cHBlckltcHVsc2UgPSAwO1xuICAgIH1cblxuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52ID0gdkE7XG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLncgPSB3QTtcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IG1BOiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0EsIG1COiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgY29uc3QgaUE6IG51bWJlciA9IHRoaXMubV9pbnZJQSwgaUI6IG51bWJlciA9IHRoaXMubV9pbnZJQjtcblxuICAgIGNvbnN0IHZBOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udjtcbiAgICBsZXQgd0E6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53O1xuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcbiAgICBsZXQgd0I6IG51bWJlciA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53O1xuXG4gICAgLy8gU29sdmUgc3ByaW5nIGNvbnN0cmFpbnRcbiAgICB7XG4gICAgICBjb25zdCBDZG90OiBudW1iZXIgPSBiMlZlYzIuRG90VlYodGhpcy5tX2F4LCBiMlZlYzIuU3ViVlYodkIsIHZBLCBiMlZlYzIuc190MCkpICsgdGhpcy5tX3NCeCAqIHdCIC0gdGhpcy5tX3NBeCAqIHdBO1xuICAgICAgY29uc3QgaW1wdWxzZTogbnVtYmVyID0gLXRoaXMubV9zcHJpbmdNYXNzICogKENkb3QgKyB0aGlzLm1fYmlhcyArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9zcHJpbmdJbXB1bHNlKTtcbiAgICAgIHRoaXMubV9zcHJpbmdJbXB1bHNlICs9IGltcHVsc2U7XG5cbiAgICAgIC8vIGIyVmVjMiBQID0gaW1wdWxzZSAqIG1fYXg7XG4gICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoaW1wdWxzZSwgdGhpcy5tX2F4LCBiMldoZWVsSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICBjb25zdCBMQTogbnVtYmVyID0gaW1wdWxzZSAqIHRoaXMubV9zQXg7XG4gICAgICBjb25zdCBMQjogbnVtYmVyID0gaW1wdWxzZSAqIHRoaXMubV9zQng7XG5cbiAgICAgIC8vIHZBIC09IG1BICogUDtcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xuICAgICAgd0EgLT0gaUEgKiBMQTtcblxuICAgICAgLy8gdkIgKz0gbUIgKiBQO1xuICAgICAgdkIuU2VsZk11bEFkZChtQiwgUCk7XG4gICAgICB3QiArPSBpQiAqIExCO1xuICAgIH1cblxuICAgIC8vIFNvbHZlIHJvdGF0aW9uYWwgbW90b3IgY29uc3RyYWludFxuICAgIHtcbiAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IHdCIC0gd0EgLSB0aGlzLm1fbW90b3JTcGVlZDtcbiAgICAgIGxldCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX21vdG9yTWFzcyAqIENkb3Q7XG5cbiAgICAgIGNvbnN0IG9sZEltcHVsc2U6IG51bWJlciA9IHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICBjb25zdCBtYXhJbXB1bHNlOiBudW1iZXIgPSBkYXRhLnN0ZXAuZHQgKiB0aGlzLm1fbWF4TW90b3JUb3JxdWU7XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gYjJDbGFtcCh0aGlzLm1fbW90b3JJbXB1bHNlICsgaW1wdWxzZSwgLW1heEltcHVsc2UsIG1heEltcHVsc2UpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuXG4gICAgICB3QSAtPSBpQSAqIGltcHVsc2U7XG4gICAgICB3QiArPSBpQiAqIGltcHVsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgLy8gTG93ZXIgbGltaXRcbiAgICAgIHtcbiAgICAgICAgY29uc3QgQzogbnVtYmVyID0gdGhpcy5tX3RyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb247XG4gICAgICAgIGNvbnN0IENkb3Q6IG51bWJlciA9IGIyVmVjMi5Eb3RWVih0aGlzLm1fYXgsIGIyVmVjMi5TdWJWVih2QiwgdkEsIGIyVmVjMi5zX3QwKSkgKyB0aGlzLm1fc0J4ICogd0IgLSB0aGlzLm1fc0F4ICogd0E7XG4gICAgICAgIGxldCBpbXB1bHNlOiBudW1iZXIgPSAtdGhpcy5tX2F4aWFsTWFzcyAqIChDZG90ICsgYjJNYXgoQywgMC4wKSAqIGRhdGEuc3RlcC5pbnZfZHQpO1xuICAgICAgICBjb25zdCBvbGRJbXB1bHNlOiBudW1iZXIgPSB0aGlzLm1fbG93ZXJJbXB1bHNlO1xuICAgICAgICB0aGlzLm1fbG93ZXJJbXB1bHNlID0gYjJNYXgodGhpcy5tX2xvd2VySW1wdWxzZSArIGltcHVsc2UsIDAuMCk7XG4gICAgICAgIGltcHVsc2UgPSB0aGlzLm1fbG93ZXJJbXB1bHNlIC0gb2xkSW1wdWxzZTtcblxuICAgICAgICAvLyBiMlZlYzIgUCA9IGltcHVsc2UgKiB0aGlzLm1fYXg7XG4gICAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVihpbXB1bHNlLCB0aGlzLm1fYXgsIGIyV2hlZWxKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QKTtcbiAgICAgICAgY29uc3QgTEE6IG51bWJlciA9IGltcHVsc2UgKiB0aGlzLm1fc0F4O1xuICAgICAgICBjb25zdCBMQjogbnVtYmVyID0gaW1wdWxzZSAqIHRoaXMubV9zQng7XG5cbiAgICAgICAgLy8gdkEgLT0gbUEgKiBQO1xuICAgICAgICB2QS5TZWxmTXVsU3ViKG1BLCBQKTtcbiAgICAgICAgd0EgLT0gaUEgKiBMQTtcbiAgICAgICAgLy8gdkIgKz0gbUIgKiBQO1xuICAgICAgICB2Qi5TZWxmTXVsQWRkKG1CLCBQKTtcbiAgICAgICAgd0IgKz0gaUIgKiBMQjtcbiAgICAgIH1cblxuICAgICAgLy8gVXBwZXIgbGltaXRcbiAgICAgIC8vIE5vdGU6IHNpZ25zIGFyZSBmbGlwcGVkIHRvIGtlZXAgQyBwb3NpdGl2ZSB3aGVuIHRoZSBjb25zdHJhaW50IGlzIHNhdGlzZmllZC5cbiAgICAgIC8vIFRoaXMgYWxzbyBrZWVwcyB0aGUgaW1wdWxzZSBwb3NpdGl2ZSB3aGVuIHRoZSBsaW1pdCBpcyBhY3RpdmUuXG4gICAgICB7XG4gICAgICAgIGNvbnN0IEM6IG51bWJlciA9IHRoaXMubV91cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX3RyYW5zbGF0aW9uO1xuICAgICAgICBjb25zdCBDZG90OiBudW1iZXIgPSBiMlZlYzIuRG90VlYodGhpcy5tX2F4LCBiMlZlYzIuU3ViVlYodkEsIHZCLCBiMlZlYzIuc190MCkpICsgdGhpcy5tX3NBeCAqIHdBIC0gdGhpcy5tX3NCeCAqIHdCO1xuICAgICAgICBsZXQgaW1wdWxzZTogbnVtYmVyID0gLXRoaXMubV9heGlhbE1hc3MgKiAoQ2RvdCArIGIyTWF4KEMsIDAuMCkgKiBkYXRhLnN0ZXAuaW52X2R0KTtcbiAgICAgICAgY29uc3Qgb2xkSW1wdWxzZTogbnVtYmVyID0gdGhpcy5tX3VwcGVySW1wdWxzZTtcbiAgICAgICAgdGhpcy5tX3VwcGVySW1wdWxzZSA9IGIyTWF4KHRoaXMubV91cHBlckltcHVsc2UgKyBpbXB1bHNlLCAwLjApO1xuICAgICAgICBpbXB1bHNlID0gdGhpcy5tX3VwcGVySW1wdWxzZSAtIG9sZEltcHVsc2U7XG5cbiAgICAgICAgLy8gYjJWZWMyIFAgPSBpbXB1bHNlICogdGhpcy5tX2F4O1xuICAgICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMlZlYzIuTXVsU1YoaW1wdWxzZSwgdGhpcy5tX2F4LCBiMldoZWVsSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICAgIGNvbnN0IExBOiBudW1iZXIgPSBpbXB1bHNlICogdGhpcy5tX3NBeDtcbiAgICAgICAgY29uc3QgTEI6IG51bWJlciA9IGltcHVsc2UgKiB0aGlzLm1fc0J4O1xuXG4gICAgICAgIC8vIHZBICs9IG1BICogUDtcbiAgICAgICAgdkEuU2VsZk11bEFkZChtQSwgUCk7XG4gICAgICAgIHdBICs9IGlBICogTEE7XG4gICAgICAgIC8vIHZCIC09IG1CICogUDtcbiAgICAgICAgdkIuU2VsZk11bFN1YihtQiwgUCk7XG4gICAgICAgIHdCIC09IGlCICogTEI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29sdmUgcG9pbnQgdG8gbGluZSBjb25zdHJhaW50XG4gICAge1xuICAgICAgY29uc3QgQ2RvdDogbnVtYmVyID0gYjJWZWMyLkRvdFZWKHRoaXMubV9heSwgYjJWZWMyLlN1YlZWKHZCLCB2QSwgYjJWZWMyLnNfdDApKSArIHRoaXMubV9zQnkgKiB3QiAtIHRoaXMubV9zQXkgKiB3QTtcbiAgICAgIGNvbnN0IGltcHVsc2U6IG51bWJlciA9IC10aGlzLm1fbWFzcyAqIENkb3Q7XG4gICAgICB0aGlzLm1faW1wdWxzZSArPSBpbXB1bHNlO1xuXG4gICAgICAvLyBiMlZlYzIgUCA9IGltcHVsc2UgKiBtX2F5O1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKGltcHVsc2UsIHRoaXMubV9heSwgYjJXaGVlbEpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX1ApO1xuICAgICAgY29uc3QgTEE6IG51bWJlciA9IGltcHVsc2UgKiB0aGlzLm1fc0F5O1xuICAgICAgY29uc3QgTEI6IG51bWJlciA9IGltcHVsc2UgKiB0aGlzLm1fc0J5O1xuXG4gICAgICAvLyB2QSAtPSBtQSAqIFA7XG4gICAgICB2QS5TZWxmTXVsU3ViKG1BLCBQKTtcbiAgICAgIHdBIC09IGlBICogTEE7XG5cbiAgICAgIC8vIHZCICs9IG1CICogUDtcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xuICAgICAgd0IgKz0gaUIgKiBMQjtcbiAgICB9XG5cbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udiA9IHZBO1xuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udyA9IHdCO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfZCA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcbiAgICBjb25zdCBjQTogYjJWZWMyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4QV0uYztcbiAgICBsZXQgYUE6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmE7XG4gICAgY29uc3QgY0I6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmM7XG4gICAgbGV0IGFCOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhCXS5hO1xuXG4gICAgLy8gY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSwgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcblxuICAgIC8vIC8vIGIyVmVjMiByQSA9IGIyTXVsKHFBLCBtX2xvY2FsQW5jaG9yQSAtIG1fbG9jYWxDZW50ZXJBKTtcbiAgICAvLyBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSwgdGhpcy5tX2xhbGNBKTtcbiAgICAvLyBjb25zdCByQTogYjJWZWMyID0gYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sYWxjQSwgdGhpcy5tX3JBKTtcbiAgICAvLyAvLyBiMlZlYzIgckIgPSBiMk11bChxQiwgbV9sb2NhbEFuY2hvckIgLSBtX2xvY2FsQ2VudGVyQik7XG4gICAgLy8gYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckIsIHRoaXMubV9sb2NhbENlbnRlckIsIHRoaXMubV9sYWxjQik7XG4gICAgLy8gY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG4gICAgLy8gLy8gYjJWZWMyIGQgPSAoY0IgLSBjQSkgKyByQiAtIHJBO1xuICAgIC8vIGNvbnN0IGQ6IGIyVmVjMiA9IGIyVmVjMi5BZGRWVihcbiAgICAvLyAgIGIyVmVjMi5TdWJWVihjQiwgY0EsIGIyVmVjMi5zX3QwKSxcbiAgICAvLyAgIGIyVmVjMi5TdWJWVihyQiwgckEsIGIyVmVjMi5zX3QxKSxcbiAgICAvLyAgIGIyV2hlZWxKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19kKTtcblxuICAgIC8vIC8vIGIyVmVjMiBheSA9IGIyTXVsKHFBLCBtX2xvY2FsWUF4aXNBKTtcbiAgICAvLyBjb25zdCBheTogYjJWZWMyID0gYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sb2NhbFlBeGlzQSwgdGhpcy5tX2F5KTtcblxuICAgIC8vIC8vIGZsb2F0MzIgc0F5ID0gYjJDcm9zcyhkICsgckEsIGF5KTtcbiAgICAvLyBjb25zdCBzQXkgPSBiMlZlYzIuQ3Jvc3NWVihiMlZlYzIuQWRkVlYoZCwgckEsIGIyVmVjMi5zX3QwKSwgYXkpO1xuICAgIC8vIC8vIGZsb2F0MzIgc0J5ID0gYjJDcm9zcyhyQiwgYXkpO1xuICAgIC8vIGNvbnN0IHNCeSA9IGIyVmVjMi5Dcm9zc1ZWKHJCLCBheSk7XG5cbiAgICAvLyAvLyBmbG9hdDMyIEMgPSBiMkRvdChkLCBheSk7XG4gICAgLy8gY29uc3QgQzogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGQsIHRoaXMubV9heSk7XG5cbiAgICAvLyBjb25zdCBrOiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUEgKiB0aGlzLm1fc0F5ICogdGhpcy5tX3NBeSArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9zQnkgKiB0aGlzLm1fc0J5O1xuXG4gICAgLy8gbGV0IGltcHVsc2U6IG51bWJlcjtcbiAgICAvLyBpZiAoayAhPT0gMCkge1xuICAgIC8vICAgaW1wdWxzZSA9IC0gQyAvIGs7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIGltcHVsc2UgPSAwO1xuICAgIC8vIH1cblxuICAgIC8vIC8vIGIyVmVjMiBQID0gaW1wdWxzZSAqIGF5O1xuICAgIC8vIGNvbnN0IFA6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVihpbXB1bHNlLCBheSwgYjJXaGVlbEpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX1ApO1xuICAgIC8vIGNvbnN0IExBOiBudW1iZXIgPSBpbXB1bHNlICogc0F5O1xuICAgIC8vIGNvbnN0IExCOiBudW1iZXIgPSBpbXB1bHNlICogc0J5O1xuXG4gICAgLy8gLy8gY0EgLT0gbV9pbnZNYXNzQSAqIFA7XG4gICAgLy8gY0EuU2VsZk11bFN1Yih0aGlzLm1faW52TWFzc0EsIFApO1xuICAgIC8vIGFBIC09IHRoaXMubV9pbnZJQSAqIExBO1xuICAgIC8vIC8vIGNCICs9IG1faW52TWFzc0IgKiBQO1xuICAgIC8vIGNCLlNlbGZNdWxBZGQodGhpcy5tX2ludk1hc3NCLCBQKTtcbiAgICAvLyBhQiArPSB0aGlzLm1faW52SUIgKiBMQjtcblxuICAgIGxldCBsaW5lYXJFcnJvcjogbnVtYmVyID0gMC4wO1xuXG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgLy8gYjJSb3QgcUEoYUEpLCBxQihhQik7XG4gICAgICBjb25zdCBxQTogYjJSb3QgPSB0aGlzLm1fcUEuU2V0QW5nbGUoYUEpLCBxQjogYjJSb3QgPSB0aGlzLm1fcUIuU2V0QW5nbGUoYUIpO1xuXG4gICAgICAvLyBiMlZlYzIgckEgPSBiMk11bChxQSwgdGhpcy5tX2xvY2FsQW5jaG9yQSAtIHRoaXMubV9sb2NhbENlbnRlckEpO1xuICAgICAgLy8gYjJWZWMyIHJCID0gYjJNdWwocUIsIHRoaXMubV9sb2NhbEFuY2hvckIgLSB0aGlzLm1fbG9jYWxDZW50ZXJCKTtcbiAgICAgIC8vIGIyVmVjMiBkID0gKGNCIC0gY0EpICsgckIgLSByQTtcblxuICAgICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEsIHRoaXMubV9sYWxjQSk7XG4gICAgICBjb25zdCByQTogYjJWZWMyID0gYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sYWxjQSwgdGhpcy5tX3JBKTtcbiAgICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCLCB0aGlzLm1fbGFsY0IpO1xuICAgICAgY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG4gICAgICAvLyBiMlZlYzIgZCA9IChjQiAtIGNBKSArIHJCIC0gckE7XG4gICAgICBjb25zdCBkOiBiMlZlYzIgPSBiMlZlYzIuQWRkVlYoXG4gICAgICAgIGIyVmVjMi5TdWJWVihjQiwgY0EsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgYjJWZWMyLlN1YlZWKHJCLCByQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICBiMldoZWVsSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfZCk7XG5cbiAgICAgIC8vIGIyVmVjMiBheCA9IGIyTXVsKHFBLCB0aGlzLm1fbG9jYWxYQXhpc0EpO1xuICAgICAgY29uc3QgYXg6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFBLCB0aGlzLm1fbG9jYWxYQXhpc0EsIHRoaXMubV9heCk7XG4gICAgICAvLyBmbG9hdCBzQXggPSBiMkNyb3NzKGQgKyByQSwgdGhpcy5tX2F4KTtcbiAgICAgIGNvbnN0IHNBeCA9IGIyVmVjMi5Dcm9zc1ZWKGIyVmVjMi5BZGRWVihkLCByQSwgYjJWZWMyLnNfdDApLCB0aGlzLm1fYXgpO1xuICAgICAgLy8gZmxvYXQgc0J4ID0gYjJDcm9zcyhyQiwgdGhpcy5tX2F4KTtcbiAgICAgIGNvbnN0IHNCeCA9IGIyVmVjMi5Dcm9zc1ZWKHJCLCB0aGlzLm1fYXgpO1xuXG4gICAgICBsZXQgQzogbnVtYmVyID0gMC4wO1xuICAgICAgY29uc3QgdHJhbnNsYXRpb246IG51bWJlciA9IGIyVmVjMi5Eb3RWVihheCwgZCk7XG4gICAgICBpZiAoYjJBYnModGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgPCAyLjAgKiBiMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIEMgPSB0cmFuc2xhdGlvbjtcbiAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24gPD0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgQyA9IGIyTWluKHRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24sIDAuMCk7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMgPSBiMk1heCh0cmFuc2xhdGlvbiAtIHRoaXMubV91cHBlclRyYW5zbGF0aW9uLCAwLjApO1xuICAgICAgfVxuXG4gICAgICBpZiAoQyAhPT0gMC4wKSB7XG5cbiAgICAgICAgY29uc3QgaW52TWFzczogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBICsgdGhpcy5tX2ludk1hc3NCICsgdGhpcy5tX2ludklBICogc0F4ICogc0F4ICsgdGhpcy5tX2ludklCICogc0J4ICogc0J4O1xuICAgICAgICBsZXQgaW1wdWxzZTogbnVtYmVyID0gMC4wO1xuICAgICAgICBpZiAoaW52TWFzcyAhPT0gMC4wKSB7XG4gICAgICAgICAgaW1wdWxzZSA9IC1DIC8gaW52TWFzcztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IGIyVmVjMi5NdWxTVihpbXB1bHNlLCBheCwgYjJXaGVlbEpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX1ApO1xuICAgICAgICBjb25zdCBMQTogbnVtYmVyID0gaW1wdWxzZSAqIHNBeDtcbiAgICAgICAgY29uc3QgTEI6IG51bWJlciA9IGltcHVsc2UgKiBzQng7XG5cbiAgICAgICAgLy8gY0EgLT0gbV9pbnZNYXNzQSAqIFA7XG4gICAgICAgIGNBLlNlbGZNdWxTdWIodGhpcy5tX2ludk1hc3NBLCBQKTtcbiAgICAgICAgYUEgLT0gdGhpcy5tX2ludklBICogTEE7XG4gICAgICAgIC8vIGNCICs9IG1faW52TWFzc0IgKiBQO1xuICAgICAgICBjQi5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQiwgUCk7XG4gICAgICAgIC8vIGFCICs9IG1faW52SUIgKiBMQjtcbiAgICAgICAgYUIgKz0gdGhpcy5tX2ludklCICogTEI7XG5cbiAgICAgICAgbGluZWFyRXJyb3IgPSBiMkFicyhDKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTb2x2ZSBwZXJwZW5kaWN1bGFyIGNvbnN0cmFpbnRcbiAgICB7XG4gICAgICAvLyBiMlJvdCBxQShhQSksIHFCKGFCKTtcbiAgICAgIGNvbnN0IHFBOiBiMlJvdCA9IHRoaXMubV9xQS5TZXRBbmdsZShhQSksIHFCOiBiMlJvdCA9IHRoaXMubV9xQi5TZXRBbmdsZShhQik7XG5cbiAgICAgIC8vIGIyVmVjMiByQSA9IGIyTXVsKHFBLCBtX2xvY2FsQW5jaG9yQSAtIG1fbG9jYWxDZW50ZXJBKTtcbiAgICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICAgIC8vIGIyVmVjMiBkID0gKGNCIC0gY0EpICsgckIgLSByQTtcblxuICAgICAgLy8gYjJWZWMyIHJBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xuICAgICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEsIHRoaXMubV9sYWxjQSk7XG4gICAgICBjb25zdCByQTogYjJWZWMyID0gYjJSb3QuTXVsUlYocUEsIHRoaXMubV9sYWxjQSwgdGhpcy5tX3JBKTtcbiAgICAgIC8vIGIyVmVjMiByQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcbiAgICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCLCB0aGlzLm1fbGFsY0IpO1xuICAgICAgY29uc3QgckI6IGIyVmVjMiA9IGIyUm90Lk11bFJWKHFCLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG4gICAgICAvLyBiMlZlYzIgZCA9IChjQiAtIGNBKSArIHJCIC0gckE7XG4gICAgICBjb25zdCBkOiBiMlZlYzIgPSBiMlZlYzIuQWRkVlYoXG4gICAgICAgIGIyVmVjMi5TdWJWVihjQiwgY0EsIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgYjJWZWMyLlN1YlZWKHJCLCByQSwgYjJWZWMyLnNfdDEpLFxuICAgICAgICBiMldoZWVsSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfZCk7XG5cbiAgICAgIC8vIGIyVmVjMiBheSA9IGIyTXVsKHFBLCBtX2xvY2FsWUF4aXNBKTtcbiAgICAgIGNvbnN0IGF5OiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xvY2FsWUF4aXNBLCB0aGlzLm1fYXkpO1xuXG4gICAgICAvLyBmbG9hdCBzQXkgPSBiMkNyb3NzKGQgKyByQSwgYXkpO1xuICAgICAgY29uc3Qgc0F5ID0gYjJWZWMyLkNyb3NzVlYoYjJWZWMyLkFkZFZWKGQsIHJBLCBiMlZlYzIuc190MCksIGF5KTtcbiAgICAgIC8vIGZsb2F0IHNCeSA9IGIyQ3Jvc3MockIsIGF5KTtcbiAgICAgIGNvbnN0IHNCeSA9IGIyVmVjMi5Dcm9zc1ZWKHJCLCBheSk7XG5cbiAgICAgIC8vIGZsb2F0IEMgPSBiMkRvdChkLCBheSk7XG4gICAgICBjb25zdCBDOiBudW1iZXIgPSBiMlZlYzIuRG90VlYoZCwgYXkpO1xuXG4gICAgICBjb25zdCBpbnZNYXNzOiBudW1iZXIgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUEgKiB0aGlzLm1fc0F5ICogdGhpcy5tX3NBeSArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9zQnkgKiB0aGlzLm1fc0J5O1xuXG4gICAgICBsZXQgaW1wdWxzZTogbnVtYmVyID0gMC4wO1xuICAgICAgaWYgKGludk1hc3MgIT09IDAuMCkge1xuICAgICAgICBpbXB1bHNlID0gLSBDIC8gaW52TWFzcztcbiAgICAgIH1cblxuICAgICAgLy8gYjJWZWMyIFAgPSBpbXB1bHNlICogYXk7XG4gICAgICAvLyBjb25zdCBMQTogbnVtYmVyID0gaW1wdWxzZSAqIHNBeTtcbiAgICAgIC8vIGNvbnN0IExCOiBudW1iZXIgPSBpbXB1bHNlICogc0J5O1xuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJWZWMyLk11bFNWKGltcHVsc2UsIGF5LCBiMldoZWVsSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfUCk7XG4gICAgICBjb25zdCBMQTogbnVtYmVyID0gaW1wdWxzZSAqIHNBeTtcbiAgICAgIGNvbnN0IExCOiBudW1iZXIgPSBpbXB1bHNlICogc0J5O1xuXG4gICAgICAvLyBjQSAtPSBtX2ludk1hc3NBICogUDtcbiAgICAgIGNBLlNlbGZNdWxTdWIodGhpcy5tX2ludk1hc3NBLCBQKTtcbiAgICAgIGFBIC09IHRoaXMubV9pbnZJQSAqIExBO1xuICAgICAgLy8gY0IgKz0gbV9pbnZNYXNzQiAqIFA7XG4gICAgICBjQi5TZWxmTXVsQWRkKHRoaXMubV9pbnZNYXNzQiwgUCk7XG4gICAgICBhQiArPSB0aGlzLm1faW52SUIgKiBMQjtcblxuICAgICAgbGluZWFyRXJyb3IgPSBiMk1heChsaW5lYXJFcnJvciwgYjJBYnMoQykpO1xuICAgIH1cblxuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmMgPSBjQTtcbiAgICBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hID0gYUE7XG4gICAgLy8gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYyA9IGNCO1xuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmEgPSBhQjtcblxuICAgIHJldHVybiBsaW5lYXJFcnJvciA8PSBiMl9saW5lYXJTbG9wO1xuICB9XG5cbiAgcHVibGljIEdldERlZmluaXRpb24oZGVmOiBiMldoZWVsSm9pbnREZWYpOiBiMldoZWVsSm9pbnREZWYge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7IC8vIFRPRE9cbiAgICByZXR1cm4gZGVmO1xuICB9XG5cbiAgcHVibGljIEdldEFuY2hvckE8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSwgb3V0KTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRBbmNob3JCPFQgZXh0ZW5kcyBYWT4ob3V0OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIsIG91dCk7XG4gIH1cblxuICBwdWJsaWMgR2V0UmVhY3Rpb25Gb3JjZTxUIGV4dGVuZHMgWFk+KGludl9kdDogbnVtYmVyLCBvdXQ6IFQpOiBUIHtcbiAgICBvdXQueCA9IGludl9kdCAqICh0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9heS54ICsgKHRoaXMubV9zcHJpbmdJbXB1bHNlICsgdGhpcy5tX2xvd2VySW1wdWxzZSAtIHRoaXMubV91cHBlckltcHVsc2UpICogdGhpcy5tX2F4LngpO1xuICAgIG91dC55ID0gaW52X2R0ICogKHRoaXMubV9pbXB1bHNlICogdGhpcy5tX2F5LnkgKyAodGhpcy5tX3NwcmluZ0ltcHVsc2UgKyB0aGlzLm1fbG93ZXJJbXB1bHNlIC0gdGhpcy5tX3VwcGVySW1wdWxzZSkgKiB0aGlzLm1fYXgueSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZWFjdGlvblRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9tb3RvckltcHVsc2U7XG4gIH1cblxuICBwdWJsaWMgR2V0TG9jYWxBbmNob3JBKCk6IFJlYWRvbmx5PGIyVmVjMj4geyByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQTsgfVxuXG4gIHB1YmxpYyBHZXRMb2NhbEFuY2hvckIoKTogUmVhZG9ubHk8YjJWZWMyPiB7IHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JCOyB9XG5cbiAgcHVibGljIEdldExvY2FsQXhpc0EoKTogUmVhZG9ubHk8YjJWZWMyPiB7IHJldHVybiB0aGlzLm1fbG9jYWxYQXhpc0E7IH1cblxuICBwdWJsaWMgR2V0Sm9pbnRUcmFuc2xhdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLkdldFByaXNtYXRpY0pvaW50VHJhbnNsYXRpb24oKTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRKb2ludExpbmVhclNwZWVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuR2V0UHJpc21hdGljSm9pbnRTcGVlZCgpO1xuICB9XG5cbiAgcHVibGljIEdldEpvaW50QW5nbGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5HZXRSZXZvbHV0ZUpvaW50QW5nbGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRKb2ludEFuZ3VsYXJTcGVlZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLkdldFJldm9sdXRlSm9pbnRTcGVlZCgpO1xuICB9XG5cbiAgcHVibGljIEdldFByaXNtYXRpY0pvaW50VHJhbnNsYXRpb24oKTogbnVtYmVyIHtcbiAgICBjb25zdCBiQTogYjJCb2R5ID0gdGhpcy5tX2JvZHlBO1xuICAgIGNvbnN0IGJCOiBiMkJvZHkgPSB0aGlzLm1fYm9keUI7XG5cbiAgICBjb25zdCBwQTogYjJWZWMyID0gYkEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBLCBuZXcgYjJWZWMyKCkpO1xuICAgIGNvbnN0IHBCOiBiMlZlYzIgPSBiQi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIsIG5ldyBiMlZlYzIoKSk7XG4gICAgY29uc3QgZDogYjJWZWMyID0gYjJWZWMyLlN1YlZWKHBCLCBwQSwgbmV3IGIyVmVjMigpKTtcbiAgICBjb25zdCBheGlzOiBiMlZlYzIgPSBiQS5HZXRXb3JsZFZlY3Rvcih0aGlzLm1fbG9jYWxYQXhpc0EsIG5ldyBiMlZlYzIoKSk7XG5cbiAgICBjb25zdCB0cmFuc2xhdGlvbjogbnVtYmVyID0gYjJWZWMyLkRvdFZWKGQsIGF4aXMpO1xuICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBHZXRQcmlzbWF0aWNKb2ludFNwZWVkKCk6IG51bWJlciB7XG4gICAgY29uc3QgYkE6IGIyQm9keSA9IHRoaXMubV9ib2R5QTtcbiAgICBjb25zdCBiQjogYjJCb2R5ID0gdGhpcy5tX2JvZHlCO1xuXG4gICAgLy8gYjJWZWMyIHJBID0gYjJNdWwoYkEubV94Zi5xLCBtX2xvY2FsQW5jaG9yQSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JBLCBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLCB0aGlzLm1fbGFsY0EpO1xuICAgIGNvbnN0IHJBID0gYjJSb3QuTXVsUlYoYkEubV94Zi5xLCB0aGlzLm1fbGFsY0EsIHRoaXMubV9yQSk7XG4gICAgLy8gYjJWZWMyIHJCID0gYjJNdWwoYkIubV94Zi5xLCBtX2xvY2FsQW5jaG9yQiAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLCB0aGlzLm1fbGFsY0IpO1xuICAgIGNvbnN0IHJCID0gYjJSb3QuTXVsUlYoYkIubV94Zi5xLCB0aGlzLm1fbGFsY0IsIHRoaXMubV9yQik7XG4gICAgLy8gYjJWZWMyIHBBID0gYkEubV9zd2VlcC5jICsgckE7XG4gICAgY29uc3QgcEEgPSBiMlZlYzIuQWRkVlYoYkEubV9zd2VlcC5jLCByQSwgYjJWZWMyLnNfdDApOyAvLyBwQSB1c2VzIHNfdDBcbiAgICAvLyBiMlZlYzIgcEIgPSBiQi5tX3N3ZWVwLmMgKyByQjtcbiAgICBjb25zdCBwQiA9IGIyVmVjMi5BZGRWVihiQi5tX3N3ZWVwLmMsIHJCLCBiMlZlYzIuc190MSk7IC8vIHBCIHVzZXMgc190MVxuICAgIC8vIGIyVmVjMiBkID0gcEIgLSBwQTtcbiAgICBjb25zdCBkID0gYjJWZWMyLlN1YlZWKHBCLCBwQSwgYjJWZWMyLnNfdDIpOyAvLyBkIHVzZXMgc190MlxuICAgIC8vIGIyVmVjMiBheGlzID0gYjJNdWwoYkEubV94Zi5xLCBtX2xvY2FsWEF4aXNBKTtcbiAgICBjb25zdCBheGlzID0gYkEuR2V0V29ybGRWZWN0b3IodGhpcy5tX2xvY2FsWEF4aXNBLCBuZXcgYjJWZWMyKCkpO1xuXG4gICAgY29uc3QgdkEgPSBiQS5tX2xpbmVhclZlbG9jaXR5O1xuICAgIGNvbnN0IHZCID0gYkIubV9saW5lYXJWZWxvY2l0eTtcbiAgICBjb25zdCB3QSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIGNvbnN0IHdCID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG5cbiAgICAvLyBmbG9hdDMyIHNwZWVkID0gYjJEb3QoZCwgYjJDcm9zcyh3QSwgYXhpcykpICsgYjJEb3QoYXhpcywgdkIgKyBiMkNyb3NzKHdCLCByQikgLSB2QSAtIGIyQ3Jvc3Mod0EsIHJBKSk7XG4gICAgY29uc3Qgc3BlZWQgPVxuICAgICAgYjJWZWMyLkRvdFZWKGQsIGIyVmVjMi5Dcm9zc1NWKHdBLCBheGlzLCBiMlZlYzIuc190MCkpICtcbiAgICAgIGIyVmVjMi5Eb3RWVihcbiAgICAgICAgYXhpcyxcbiAgICAgICAgYjJWZWMyLlN1YlZWKFxuICAgICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHJCLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgckEsIGIyVmVjMi5zX3QxKSxcbiAgICAgICAgICBiMlZlYzIuc190MCkpO1xuICAgIHJldHVybiBzcGVlZDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRSZXZvbHV0ZUpvaW50QW5nbGUoKTogbnVtYmVyIHtcbiAgICAvLyBiMkJvZHkqIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIC8vIGIyQm9keSogYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgLy8gcmV0dXJuIGJCLnRoaXMubV9zd2VlcC5hIC0gYkEudGhpcy5tX3N3ZWVwLmE7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmEgLSB0aGlzLm1fYm9keUEubV9zd2VlcC5hO1xuICB9XG5cbiAgcHVibGljIEdldFJldm9sdXRlSm9pbnRTcGVlZCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHdBOiBudW1iZXIgPSB0aGlzLm1fYm9keUEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgY29uc3Qgd0I6IG51bWJlciA9IHRoaXMubV9ib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICByZXR1cm4gd0IgLSB3QTtcbiAgfVxuXG4gIHB1YmxpYyBJc01vdG9yRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZU1vdG9yO1xuICB9XG5cbiAgcHVibGljIEVuYWJsZU1vdG9yKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoZmxhZyAhPT0gdGhpcy5tX2VuYWJsZU1vdG9yKSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBmbGFnO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBTZXRNb3RvclNwZWVkKHNwZWVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoc3BlZWQgIT09IHRoaXMubV9tb3RvclNwZWVkKSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fbW90b3JTcGVlZCA9IHNwZWVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBTZXRNYXhNb3RvclRvcnF1ZShmb3JjZTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGZvcmNlICE9PSB0aGlzLm1fbWF4TW90b3JUb3JxdWUpIHtcbiAgICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9tYXhNb3RvclRvcnF1ZSA9IGZvcmNlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBHZXRNb3RvclRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9tb3RvckltcHVsc2U7XG4gIH1cblxuICAvLy8gSXMgdGhlIGpvaW50IGxpbWl0IGVuYWJsZWQ/XG4gIHB1YmxpYyBJc0xpbWl0RW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZUxpbWl0O1xuICB9XG5cbiAgLy8vIEVuYWJsZS9kaXNhYmxlIHRoZSBqb2ludCB0cmFuc2xhdGlvbiBsaW1pdC5cbiAgcHVibGljIEVuYWJsZUxpbWl0KGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoZmxhZyAhPT0gdGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBmbGFnO1xuICAgICAgdGhpcy5tX2xvd2VySW1wdWxzZSA9IDAuMDtcbiAgICAgIHRoaXMubV91cHBlckltcHVsc2UgPSAwLjA7XG4gICAgfVxuICB9XG5cbiAgLy8vIEdldCB0aGUgbG93ZXIgam9pbnQgdHJhbnNsYXRpb24gbGltaXQsIHVzdWFsbHkgaW4gbWV0ZXJzLlxuICBwdWJsaWMgR2V0TG93ZXJMaW1pdCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbjtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHVwcGVyIGpvaW50IHRyYW5zbGF0aW9uIGxpbWl0LCB1c3VhbGx5IGluIG1ldGVycy5cbiAgcHVibGljIEdldFVwcGVyTGltaXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247XG4gIH1cblxuICAvLy8gU2V0IHRoZSBqb2ludCB0cmFuc2xhdGlvbiBsaW1pdHMsIHVzdWFsbHkgaW4gbWV0ZXJzLlxuICBwdWJsaWMgU2V0TGltaXRzKGxvd2VyOiBudW1iZXIsIHVwcGVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBiMkFzc2VydChsb3dlciA8PSB1cHBlcik7XG4gICAgaWYgKGxvd2VyICE9PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiB8fCB1cHBlciAhPT0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gbG93ZXI7XG4gICAgICB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiA9IHVwcGVyO1xuICAgICAgdGhpcy5tX2xvd2VySW1wdWxzZSA9IDAuMDtcbiAgICAgIHRoaXMubV91cHBlckltcHVsc2UgPSAwLjA7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIER1bXAobG9nOiAoZm9ybWF0OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXhBID0gdGhpcy5tX2JvZHlBLm1faXNsYW5kSW5kZXg7XG4gICAgY29uc3QgaW5kZXhCID0gdGhpcy5tX2JvZHlCLm1faXNsYW5kSW5kZXg7XG5cbiAgICBsb2coXCIgIGNvbnN0IGpkOiBiMldoZWVsSm9pbnREZWYgPSBuZXcgYjJXaGVlbEpvaW50RGVmKCk7XFxuXCIpO1xuICAgIGxvZyhcIiAgamQuYm9keUEgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEEpO1xuICAgIGxvZyhcIiAgamQuYm9keUIgPSBib2RpZXNbJWRdO1xcblwiLCBpbmRleEIpO1xuICAgIGxvZyhcIiAgamQuY29sbGlkZUNvbm5lY3RlZCA9ICVzO1xcblwiLCAodGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQpID8gKFwidHJ1ZVwiKSA6IChcImZhbHNlXCIpKTtcbiAgICBsb2coXCIgIGpkLmxvY2FsQW5jaG9yQS5TZXQoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2xvY2FsQW5jaG9yQS54LCB0aGlzLm1fbG9jYWxBbmNob3JBLnkpO1xuICAgIGxvZyhcIiAgamQubG9jYWxBbmNob3JCLlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1fbG9jYWxBbmNob3JCLngsIHRoaXMubV9sb2NhbEFuY2hvckIueSk7XG4gICAgbG9nKFwiICBqZC5sb2NhbEF4aXNBLlNldCglLjE1ZiwgJS4xNWYpO1xcblwiLCB0aGlzLm1fbG9jYWxYQXhpc0EueCwgdGhpcy5tX2xvY2FsWEF4aXNBLnkpO1xuICAgIGxvZyhcIiAgamQuZW5hYmxlTW90b3IgPSAlcztcXG5cIiwgKHRoaXMubV9lbmFibGVNb3RvcikgPyAoXCJ0cnVlXCIpIDogKFwiZmFsc2VcIikpO1xuICAgIGxvZyhcIiAgamQubW90b3JTcGVlZCA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbW90b3JTcGVlZCk7XG4gICAgbG9nKFwiICBqZC5tYXhNb3RvclRvcnF1ZSA9ICUuMTVmO1xcblwiLCB0aGlzLm1fbWF4TW90b3JUb3JxdWUpO1xuICAgIGxvZyhcIiAgamQuc3RpZmZuZXNzID0gJS4xNWY7XFxuXCIsIHRoaXMubV9zdGlmZm5lc3MpO1xuICAgIGxvZyhcIiAgamQuZGFtcGluZyA9ICUuMTVmO1xcblwiLCB0aGlzLm1fZGFtcGluZyk7XG4gICAgbG9nKFwiICBqb2ludHNbJWRdID0gdGhpcy5tX3dvcmxkLkNyZWF0ZUpvaW50KGpkKTtcXG5cIiwgdGhpcy5tX2luZGV4KTtcbiAgfVxuXG4gIC8vL1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfcEEgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19wQiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2F4aXMgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19jMSA9IG5ldyBiMkNvbG9yKDAuNywgMC43LCAwLjcpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzIgPSBuZXcgYjJDb2xvcigwLjMsIDAuOSwgMC4zKTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2MzID0gbmV3IGIyQ29sb3IoMC45LCAwLjMsIDAuMyk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19jNCA9IG5ldyBiMkNvbG9yKDAuMywgMC4zLCAwLjkpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfYzUgPSBuZXcgYjJDb2xvcigwLjQsIDAuNCwgMC40KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRHJhd19zX2xvd2VyID0gbmV3IGIyVmVjMigpO1xuICBwcml2YXRlIHN0YXRpYyBEcmF3X3NfdXBwZXIgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIERyYXdfc19wZXJwID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgRHJhdyhkcmF3OiBiMkRyYXcpOiB2b2lkIHtcbiAgICBjb25zdCB4ZkE6IFJlYWRvbmx5PGIyVHJhbnNmb3JtPiA9IHRoaXMubV9ib2R5QS5HZXRUcmFuc2Zvcm0oKTtcbiAgICBjb25zdCB4ZkI6IFJlYWRvbmx5PGIyVHJhbnNmb3JtPiA9IHRoaXMubV9ib2R5Qi5HZXRUcmFuc2Zvcm0oKTtcbiAgICBjb25zdCBwQSA9IGIyVHJhbnNmb3JtLk11bFhWKHhmQSwgdGhpcy5tX2xvY2FsQW5jaG9yQSwgYjJXaGVlbEpvaW50LkRyYXdfc19wQSk7XG4gICAgY29uc3QgcEIgPSBiMlRyYW5zZm9ybS5NdWxYVih4ZkIsIHRoaXMubV9sb2NhbEFuY2hvckIsIGIyV2hlZWxKb2ludC5EcmF3X3NfcEIpO1xuXG4gICAgLy8gYjJWZWMyIGF4aXMgPSBiMk11bCh4ZkEucSwgbV9sb2NhbFhBeGlzQSk7XG4gICAgY29uc3QgYXhpczogYjJWZWMyID0gYjJSb3QuTXVsUlYoeGZBLnEsIHRoaXMubV9sb2NhbFhBeGlzQSwgYjJXaGVlbEpvaW50LkRyYXdfc19heGlzKTtcblxuICAgIGNvbnN0IGMxID0gYjJXaGVlbEpvaW50LkRyYXdfc19jMTsgLy8gYjJDb2xvciBjMSgwLjdmLCAwLjdmLCAwLjdmKTtcbiAgICBjb25zdCBjMiA9IGIyV2hlZWxKb2ludC5EcmF3X3NfYzI7IC8vIGIyQ29sb3IgYzIoMC4zZiwgMC45ZiwgMC4zZik7XG4gICAgY29uc3QgYzMgPSBiMldoZWVsSm9pbnQuRHJhd19zX2MzOyAvLyBiMkNvbG9yIGMzKDAuOWYsIDAuM2YsIDAuM2YpO1xuICAgIGNvbnN0IGM0ID0gYjJXaGVlbEpvaW50LkRyYXdfc19jNDsgLy8gYjJDb2xvciBjNCgwLjNmLCAwLjNmLCAwLjlmKTtcbiAgICBjb25zdCBjNSA9IGIyV2hlZWxKb2ludC5EcmF3X3NfYzU7IC8vIGIyQ29sb3IgYzUoMC40ZiwgMC40ZiwgMC40Zik7XG5cbiAgICBkcmF3LkRyYXdTZWdtZW50KHBBLCBwQiwgYzUpO1xuXG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgLy8gYjJWZWMyIGxvd2VyID0gcEEgKyBtX2xvd2VyVHJhbnNsYXRpb24gKiBheGlzO1xuICAgICAgY29uc3QgbG93ZXIgPSBiMlZlYzIuQWRkVk11bFNWKHBBLCB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiwgYXhpcywgYjJXaGVlbEpvaW50LkRyYXdfc19sb3dlcik7XG4gICAgICAvLyBiMlZlYzIgdXBwZXIgPSBwQSArIG1fdXBwZXJUcmFuc2xhdGlvbiAqIGF4aXM7XG4gICAgICBjb25zdCB1cHBlciA9IGIyVmVjMi5BZGRWTXVsU1YocEEsIHRoaXMubV91cHBlclRyYW5zbGF0aW9uLCBheGlzLCBiMldoZWVsSm9pbnQuRHJhd19zX3VwcGVyKTtcbiAgICAgIC8vIGIyVmVjMiBwZXJwID0gYjJNdWwoeGZBLnEsIG1fbG9jYWxZQXhpc0EpO1xuICAgICAgY29uc3QgcGVycCA9IGIyUm90Lk11bFJWKHhmQS5xLCB0aGlzLm1fbG9jYWxZQXhpc0EsIGIyV2hlZWxKb2ludC5EcmF3X3NfcGVycCk7XG4gICAgICAvLyBkcmF3LkRyYXdTZWdtZW50KGxvd2VyLCB1cHBlciwgYzEpO1xuICAgICAgZHJhdy5EcmF3U2VnbWVudChsb3dlciwgdXBwZXIsIGMxKTtcbiAgICAgIC8vIGRyYXcuRHJhd1NlZ21lbnQobG93ZXIgLSAwLjVmICogcGVycCwgbG93ZXIgKyAwLjVmICogcGVycCwgYzIpO1xuICAgICAgZHJhdy5EcmF3U2VnbWVudChiMlZlYzIuQWRkVk11bFNWKGxvd2VyLCAtMC41LCBwZXJwLCBiMlZlYzIuc190MCksIGIyVmVjMi5BZGRWTXVsU1YobG93ZXIsIDAuNSwgcGVycCwgYjJWZWMyLnNfdDEpLCBjMik7XG4gICAgICAvLyBkcmF3LkRyYXdTZWdtZW50KHVwcGVyIC0gMC41ZiAqIHBlcnAsIHVwcGVyICsgMC41ZiAqIHBlcnAsIGMzKTtcbiAgICAgIGRyYXcuRHJhd1NlZ21lbnQoYjJWZWMyLkFkZFZNdWxTVih1cHBlciwgLTAuNSwgcGVycCwgYjJWZWMyLnNfdDApLCBiMlZlYzIuQWRkVk11bFNWKHVwcGVyLCAwLjUsIHBlcnAsIGIyVmVjMi5zX3QxKSwgYzMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkcmF3LkRyYXdTZWdtZW50KHBBIC0gMS4wZiAqIGF4aXMsIHBBICsgMS4wZiAqIGF4aXMsIGMxKTtcbiAgICAgIGRyYXcuRHJhd1NlZ21lbnQoYjJWZWMyLkFkZFZNdWxTVihwQSwgLTEuMCwgYXhpcywgYjJWZWMyLnNfdDApLCBiMlZlYzIuQWRkVk11bFNWKHBBLCAxLjAsIGF4aXMsIGIyVmVjMi5zX3QxKSwgYzEpO1xuICAgIH1cblxuICAgIGRyYXcuRHJhd1BvaW50KHBBLCA1LjAsIGMxKTtcbiAgICBkcmF3LkRyYXdQb2ludChwQiwgNS4wLCBjNCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUNBO0FBQ0E7QUFHQTtBQTJDQTtBQUFBO0FBdUJBO0FBQUE7QUF0QkE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWxDQTtBQW9DQTtBQUFBO0FBeURBO0FBQUE7QUF4REE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZ0RBO0FBRUE7QUFFQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFNQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU1BO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQU1BO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXRyQkE7QUFDQTtBQW9KQTtBQXNIQTtBQUNBO0FBMFhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1Q0E7QUFBQTtBQS94QkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_wheel_joint.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_world.ts":
/*!****************************************!*\
  !*** ./src/box2d/dynamics/b2_world.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2World = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_timer_1 = __webpack_require__(/*! ../common/b2_timer */ \"./src/box2d/common/b2_timer.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_time_of_impact_1 = __webpack_require__(/*! ../collision/b2_time_of_impact */ \"./src/box2d/collision/b2_time_of_impact.ts\");\nvar b2_shape_1 = __webpack_require__(/*! ../collision/b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2_joint_1 = __webpack_require__(/*! ./b2_joint */ \"./src/box2d/dynamics/b2_joint.ts\");\nvar b2_area_joint_1 = __webpack_require__(/*! ./b2_area_joint */ \"./src/box2d/dynamics/b2_area_joint.ts\");\nvar b2_distance_joint_1 = __webpack_require__(/*! ./b2_distance_joint */ \"./src/box2d/dynamics/b2_distance_joint.ts\");\nvar b2_friction_joint_1 = __webpack_require__(/*! ./b2_friction_joint */ \"./src/box2d/dynamics/b2_friction_joint.ts\");\nvar b2_gear_joint_1 = __webpack_require__(/*! ./b2_gear_joint */ \"./src/box2d/dynamics/b2_gear_joint.ts\");\nvar b2_motor_joint_1 = __webpack_require__(/*! ./b2_motor_joint */ \"./src/box2d/dynamics/b2_motor_joint.ts\");\nvar b2_mouse_joint_1 = __webpack_require__(/*! ./b2_mouse_joint */ \"./src/box2d/dynamics/b2_mouse_joint.ts\");\nvar b2_prismatic_joint_1 = __webpack_require__(/*! ./b2_prismatic_joint */ \"./src/box2d/dynamics/b2_prismatic_joint.ts\");\nvar b2_pulley_joint_1 = __webpack_require__(/*! ./b2_pulley_joint */ \"./src/box2d/dynamics/b2_pulley_joint.ts\");\nvar b2_revolute_joint_1 = __webpack_require__(/*! ./b2_revolute_joint */ \"./src/box2d/dynamics/b2_revolute_joint.ts\");\nvar b2_weld_joint_1 = __webpack_require__(/*! ./b2_weld_joint */ \"./src/box2d/dynamics/b2_weld_joint.ts\");\nvar b2_wheel_joint_1 = __webpack_require__(/*! ./b2_wheel_joint */ \"./src/box2d/dynamics/b2_wheel_joint.ts\");\nvar b2_body_1 = __webpack_require__(/*! ./b2_body */ \"./src/box2d/dynamics/b2_body.ts\");\nvar b2_contact_manager_1 = __webpack_require__(/*! ./b2_contact_manager */ \"./src/box2d/dynamics/b2_contact_manager.ts\");\nvar b2_island_1 = __webpack_require__(/*! ./b2_island */ \"./src/box2d/dynamics/b2_island.ts\");\nvar b2_time_step_1 = __webpack_require__(/*! ./b2_time_step */ \"./src/box2d/dynamics/b2_time_step.ts\");\nvar b2_world_callbacks_1 = __webpack_require__(/*! ./b2_world_callbacks */ \"./src/box2d/dynamics/b2_world_callbacks.ts\");\nvar b2_world_callbacks_2 = __webpack_require__(/*! ./b2_world_callbacks */ \"./src/box2d/dynamics/b2_world_callbacks.ts\");\nvar b2_settings_2 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_particle_1 = __webpack_require__(/*! ../particle/b2_particle */ \"./src/box2d/particle/b2_particle.ts\");\nvar b2_particle_system_1 = __webpack_require__(/*! ../particle/b2_particle_system */ \"./src/box2d/particle/b2_particle_system.ts\");\nvar b2World = (function () {\n    function b2World(gravity) {\n        this.m_contactManager = new b2_contact_manager_1.b2ContactManager();\n        this.m_bodyList = null;\n        this.m_jointList = null;\n        this.m_particleSystemList = null;\n        this.m_bodyCount = 0;\n        this.m_jointCount = 0;\n        this.m_gravity = new b2_math_1.b2Vec2();\n        this.m_allowSleep = true;\n        this.m_destructionListener = null;\n        this.m_debugDraw = null;\n        this.m_inv_dt0 = 0;\n        this.m_newContacts = false;\n        this.m_locked = false;\n        this.m_clearForces = true;\n        this.m_warmStarting = true;\n        this.m_continuousPhysics = true;\n        this.m_subStepping = false;\n        this.m_stepComplete = true;\n        this.m_profile = new b2_time_step_1.b2Profile();\n        this.m_island = new b2_island_1.b2Island();\n        this.s_stack = [];\n        this.m_controllerList = null;\n        this.m_controllerCount = 0;\n        this.m_gravity.Copy(gravity);\n    }\n    b2World.prototype.SetDestructionListener = function (listener) {\n        this.m_destructionListener = listener;\n    };\n    b2World.prototype.SetContactFilter = function (filter) {\n        this.m_contactManager.m_contactFilter = filter;\n    };\n    b2World.prototype.SetContactListener = function (listener) {\n        this.m_contactManager.m_contactListener = listener;\n    };\n    b2World.prototype.SetDebugDraw = function (debugDraw) {\n        this.m_debugDraw = debugDraw;\n    };\n    b2World.prototype.CreateBody = function (def) {\n        if (def === void 0) { def = {}; }\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        var b = new b2_body_1.b2Body(def, this);\n        b.m_prev = null;\n        b.m_next = this.m_bodyList;\n        if (this.m_bodyList) {\n            this.m_bodyList.m_prev = b;\n        }\n        this.m_bodyList = b;\n        ++this.m_bodyCount;\n        return b;\n    };\n    b2World.prototype.DestroyBody = function (b) {\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        var je = b.m_jointList;\n        while (je) {\n            var je0 = je;\n            je = je.next;\n            if (this.m_destructionListener) {\n                this.m_destructionListener.SayGoodbyeJoint(je0.joint);\n            }\n            this.DestroyJoint(je0.joint);\n            b.m_jointList = je;\n        }\n        b.m_jointList = null;\n        var coe = b.m_controllerList;\n        while (coe) {\n            var coe0 = coe;\n            coe = coe.nextController;\n            coe0.controller.RemoveBody(b);\n        }\n        var ce = b.m_contactList;\n        while (ce) {\n            var ce0 = ce;\n            ce = ce.next;\n            this.m_contactManager.Destroy(ce0.contact);\n        }\n        b.m_contactList = null;\n        var f = b.m_fixtureList;\n        while (f) {\n            var f0 = f;\n            f = f.m_next;\n            if (this.m_destructionListener) {\n                this.m_destructionListener.SayGoodbyeFixture(f0);\n            }\n            f0.DestroyProxies();\n            f0.Reset();\n            b.m_fixtureList = f;\n            b.m_fixtureCount -= 1;\n        }\n        b.m_fixtureList = null;\n        b.m_fixtureCount = 0;\n        if (b.m_prev) {\n            b.m_prev.m_next = b.m_next;\n        }\n        if (b.m_next) {\n            b.m_next.m_prev = b.m_prev;\n        }\n        if (b === this.m_bodyList) {\n            this.m_bodyList = b.m_next;\n        }\n        --this.m_bodyCount;\n    };\n    b2World._Joint_Create = function (def) {\n        switch (def.type) {\n            case b2_joint_1.b2JointType.e_distanceJoint: return new b2_distance_joint_1.b2DistanceJoint(def);\n            case b2_joint_1.b2JointType.e_mouseJoint: return new b2_mouse_joint_1.b2MouseJoint(def);\n            case b2_joint_1.b2JointType.e_prismaticJoint: return new b2_prismatic_joint_1.b2PrismaticJoint(def);\n            case b2_joint_1.b2JointType.e_revoluteJoint: return new b2_revolute_joint_1.b2RevoluteJoint(def);\n            case b2_joint_1.b2JointType.e_pulleyJoint: return new b2_pulley_joint_1.b2PulleyJoint(def);\n            case b2_joint_1.b2JointType.e_gearJoint: return new b2_gear_joint_1.b2GearJoint(def);\n            case b2_joint_1.b2JointType.e_wheelJoint: return new b2_wheel_joint_1.b2WheelJoint(def);\n            case b2_joint_1.b2JointType.e_weldJoint: return new b2_weld_joint_1.b2WeldJoint(def);\n            case b2_joint_1.b2JointType.e_frictionJoint: return new b2_friction_joint_1.b2FrictionJoint(def);\n            case b2_joint_1.b2JointType.e_motorJoint: return new b2_motor_joint_1.b2MotorJoint(def);\n            case b2_joint_1.b2JointType.e_areaJoint: return new b2_area_joint_1.b2AreaJoint(def);\n        }\n        throw new Error();\n    };\n    b2World._Joint_Destroy = function (joint) {\n    };\n    b2World.prototype.CreateJoint = function (def) {\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        var j = b2World._Joint_Create(def);\n        j.m_prev = null;\n        j.m_next = this.m_jointList;\n        if (this.m_jointList) {\n            this.m_jointList.m_prev = j;\n        }\n        this.m_jointList = j;\n        ++this.m_jointCount;\n        j.m_edgeA.prev = null;\n        j.m_edgeA.next = j.m_bodyA.m_jointList;\n        if (j.m_bodyA.m_jointList) {\n            j.m_bodyA.m_jointList.prev = j.m_edgeA;\n        }\n        j.m_bodyA.m_jointList = j.m_edgeA;\n        j.m_edgeB.prev = null;\n        j.m_edgeB.next = j.m_bodyB.m_jointList;\n        if (j.m_bodyB.m_jointList) {\n            j.m_bodyB.m_jointList.prev = j.m_edgeB;\n        }\n        j.m_bodyB.m_jointList = j.m_edgeB;\n        var bodyA = j.m_bodyA;\n        var bodyB = j.m_bodyB;\n        var collideConnected = j.m_collideConnected;\n        if (!collideConnected) {\n            var edge = bodyB.GetContactList();\n            while (edge) {\n                if (edge.other === bodyA) {\n                    edge.contact.FlagForFiltering();\n                }\n                edge = edge.next;\n            }\n        }\n        return j;\n    };\n    b2World.prototype.DestroyJoint = function (j) {\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        if (j.m_prev) {\n            j.m_prev.m_next = j.m_next;\n        }\n        if (j.m_next) {\n            j.m_next.m_prev = j.m_prev;\n        }\n        if (j === this.m_jointList) {\n            this.m_jointList = j.m_next;\n        }\n        var bodyA = j.m_bodyA;\n        var bodyB = j.m_bodyB;\n        var collideConnected = j.m_collideConnected;\n        bodyA.SetAwake(true);\n        bodyB.SetAwake(true);\n        if (j.m_edgeA.prev) {\n            j.m_edgeA.prev.next = j.m_edgeA.next;\n        }\n        if (j.m_edgeA.next) {\n            j.m_edgeA.next.prev = j.m_edgeA.prev;\n        }\n        if (j.m_edgeA === bodyA.m_jointList) {\n            bodyA.m_jointList = j.m_edgeA.next;\n        }\n        j.m_edgeA.Reset();\n        if (j.m_edgeB.prev) {\n            j.m_edgeB.prev.next = j.m_edgeB.next;\n        }\n        if (j.m_edgeB.next) {\n            j.m_edgeB.next.prev = j.m_edgeB.prev;\n        }\n        if (j.m_edgeB === bodyB.m_jointList) {\n            bodyB.m_jointList = j.m_edgeB.next;\n        }\n        j.m_edgeB.Reset();\n        b2World._Joint_Destroy(j);\n        --this.m_jointCount;\n        if (!collideConnected) {\n            var edge = bodyB.GetContactList();\n            while (edge) {\n                if (edge.other === bodyA) {\n                    edge.contact.FlagForFiltering();\n                }\n                edge = edge.next;\n            }\n        }\n    };\n    b2World.prototype.CreateParticleSystem = function (def) {\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        var p = new b2_particle_system_1.b2ParticleSystem(def, this);\n        p.m_prev = null;\n        p.m_next = this.m_particleSystemList;\n        if (this.m_particleSystemList) {\n            this.m_particleSystemList.m_prev = p;\n        }\n        this.m_particleSystemList = p;\n        return p;\n    };\n    b2World.prototype.DestroyParticleSystem = function (p) {\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        if (p.m_prev) {\n            p.m_prev.m_next = p.m_next;\n        }\n        if (p.m_next) {\n            p.m_next.m_prev = p.m_prev;\n        }\n        if (p === this.m_particleSystemList) {\n            this.m_particleSystemList = p.m_next;\n        }\n    };\n    b2World.prototype.CalculateReasonableParticleIterations = function (timeStep) {\n        if (this.m_particleSystemList === null) {\n            return 1;\n        }\n        function GetSmallestRadius(world) {\n            var smallestRadius = b2_settings_2.b2_maxFloat;\n            for (var system = world.GetParticleSystemList(); system !== null; system = system.m_next) {\n                smallestRadius = b2_math_1.b2Min(smallestRadius, system.GetRadius());\n            }\n            return smallestRadius;\n        }\n        return b2_particle_1.b2CalculateParticleIterations(this.m_gravity.Length(), GetSmallestRadius(this), timeStep);\n    };\n    b2World.prototype.Step = function (dt, velocityIterations, positionIterations, particleIterations) {\n        if (particleIterations === void 0) { particleIterations = this.CalculateReasonableParticleIterations(dt); }\n        var stepTimer = b2World.Step_s_stepTimer.Reset();\n        if (this.m_newContacts) {\n            this.m_contactManager.FindNewContacts();\n            this.m_newContacts = false;\n        }\n        this.m_locked = true;\n        var step = b2World.Step_s_step;\n        step.dt = dt;\n        step.velocityIterations = velocityIterations;\n        step.positionIterations = positionIterations;\n        step.particleIterations = particleIterations;\n        if (dt > 0) {\n            step.inv_dt = 1 / dt;\n        }\n        else {\n            step.inv_dt = 0;\n        }\n        step.dtRatio = this.m_inv_dt0 * dt;\n        step.warmStarting = this.m_warmStarting;\n        var timer = b2World.Step_s_timer.Reset();\n        this.m_contactManager.Collide();\n        this.m_profile.collide = timer.GetMilliseconds();\n        if (this.m_stepComplete && step.dt > 0) {\n            var timer_1 = b2World.Step_s_timer.Reset();\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                p.Solve(step);\n            }\n            this.Solve(step);\n            this.m_profile.solve = timer_1.GetMilliseconds();\n        }\n        if (this.m_continuousPhysics && step.dt > 0) {\n            var timer_2 = b2World.Step_s_timer.Reset();\n            this.SolveTOI(step);\n            this.m_profile.solveTOI = timer_2.GetMilliseconds();\n        }\n        if (step.dt > 0) {\n            this.m_inv_dt0 = step.inv_dt;\n        }\n        if (this.m_clearForces) {\n            this.ClearForces();\n        }\n        this.m_locked = false;\n        this.m_profile.step = stepTimer.GetMilliseconds();\n    };\n    b2World.prototype.ClearForces = function () {\n        for (var body = this.m_bodyList; body; body = body.m_next) {\n            body.m_force.SetZero();\n            body.m_torque = 0;\n        }\n    };\n    b2World.prototype.DrawParticleSystem = function (system) {\n        if (this.m_debugDraw === null) {\n            return;\n        }\n        var particleCount = system.GetParticleCount();\n        if (particleCount) {\n            var radius = system.GetRadius();\n            var positionBuffer = system.GetPositionBuffer();\n            if (system.m_colorBuffer.data) {\n                var colorBuffer = system.GetColorBuffer();\n                this.m_debugDraw.DrawParticles(positionBuffer, radius, colorBuffer, particleCount);\n            }\n            else {\n                this.m_debugDraw.DrawParticles(positionBuffer, radius, null, particleCount);\n            }\n        }\n    };\n    b2World.prototype.DebugDraw = function () {\n        if (this.m_debugDraw === null) {\n            return;\n        }\n        var flags = this.m_debugDraw.GetFlags();\n        var color = b2World.DebugDraw_s_color.SetRGB(0, 0, 0);\n        if (flags & b2_draw_1.b2DrawFlags.e_shapeBit) {\n            for (var b = this.m_bodyList; b; b = b.m_next) {\n                var xf = b.m_xf;\n                this.m_debugDraw.PushTransform(xf);\n                for (var f = b.GetFixtureList(); f; f = f.m_next) {\n                    if (b.GetType() === b2_body_1.b2BodyType.b2_dynamicBody && b.m_mass === 0.0) {\n                        this.DrawShape(f, new b2_draw_1.b2Color(1.0, 0.0, 0.0));\n                    }\n                    else if (!b.IsEnabled()) {\n                        color.SetRGB(0.5, 0.5, 0.3);\n                        this.DrawShape(f, color);\n                    }\n                    else if (b.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n                        color.SetRGB(0.5, 0.9, 0.5);\n                        this.DrawShape(f, color);\n                    }\n                    else if (b.GetType() === b2_body_1.b2BodyType.b2_kinematicBody) {\n                        color.SetRGB(0.5, 0.5, 0.9);\n                        this.DrawShape(f, color);\n                    }\n                    else if (!b.IsAwake()) {\n                        color.SetRGB(0.6, 0.6, 0.6);\n                        this.DrawShape(f, color);\n                    }\n                    else {\n                        color.SetRGB(0.9, 0.7, 0.7);\n                        this.DrawShape(f, color);\n                    }\n                }\n                this.m_debugDraw.PopTransform(xf);\n            }\n        }\n        if (flags & b2_draw_1.b2DrawFlags.e_particleBit) {\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                this.DrawParticleSystem(p);\n            }\n        }\n        if (flags & b2_draw_1.b2DrawFlags.e_jointBit) {\n            for (var j = this.m_jointList; j; j = j.m_next) {\n                j.Draw(this.m_debugDraw);\n            }\n        }\n        if (flags & b2_draw_1.b2DrawFlags.e_pairBit) {\n            color.SetRGB(0.3, 0.9, 0.9);\n            for (var contact = this.m_contactManager.m_contactList; contact; contact = contact.m_next) {\n                var fixtureA = contact.GetFixtureA();\n                var fixtureB = contact.GetFixtureB();\n                var indexA = contact.GetChildIndexA();\n                var indexB = contact.GetChildIndexB();\n                var cA = fixtureA.GetAABB(indexA).GetCenter();\n                var cB = fixtureB.GetAABB(indexB).GetCenter();\n                this.m_debugDraw.DrawSegment(cA, cB, color);\n            }\n        }\n        if (flags & b2_draw_1.b2DrawFlags.e_aabbBit) {\n            color.SetRGB(0.9, 0.3, 0.9);\n            var vs = b2World.DebugDraw_s_vs;\n            for (var b = this.m_bodyList; b; b = b.m_next) {\n                if (!b.IsEnabled()) {\n                    continue;\n                }\n                for (var f = b.GetFixtureList(); f; f = f.m_next) {\n                    for (var i = 0; i < f.m_proxyCount; ++i) {\n                        var proxy = f.m_proxies[i];\n                        var aabb = proxy.treeNode.aabb;\n                        vs[0].Set(aabb.lowerBound.x, aabb.lowerBound.y);\n                        vs[1].Set(aabb.upperBound.x, aabb.lowerBound.y);\n                        vs[2].Set(aabb.upperBound.x, aabb.upperBound.y);\n                        vs[3].Set(aabb.lowerBound.x, aabb.upperBound.y);\n                        this.m_debugDraw.DrawPolygon(vs, 4, color);\n                    }\n                }\n            }\n        }\n        if (flags & b2_draw_1.b2DrawFlags.e_centerOfMassBit) {\n            for (var b = this.m_bodyList; b; b = b.m_next) {\n                var xf = b2World.DebugDraw_s_xf;\n                xf.q.Copy(b.m_xf.q);\n                xf.p.Copy(b.GetWorldCenter());\n                this.m_debugDraw.DrawTransform(xf);\n            }\n        }\n        if (flags & b2_draw_1.b2DrawFlags.e_controllerBit) {\n            for (var c = this.m_controllerList; c; c = c.m_next) {\n                c.Draw(this.m_debugDraw);\n            }\n        }\n    };\n    b2World.prototype.QueryAABB = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof b2_world_callbacks_1.b2QueryCallback) {\n            this._QueryAABB(args[0], args[1]);\n        }\n        else {\n            this._QueryAABB(null, args[0], args[1]);\n        }\n    };\n    b2World.prototype._QueryAABB = function (callback, aabb, fn) {\n        this.m_contactManager.m_broadPhase.Query(aabb, function (proxy) {\n            var fixture_proxy = proxy.userData;\n            var fixture = fixture_proxy.fixture;\n            if (callback) {\n                return callback.ReportFixture(fixture);\n            }\n            else if (fn) {\n                return fn(fixture);\n            }\n            return true;\n        });\n        if (callback instanceof b2_world_callbacks_1.b2QueryCallback) {\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                if (callback.ShouldQueryParticleSystem(p)) {\n                    p.QueryAABB(callback, aabb);\n                }\n            }\n        }\n    };\n    b2World.prototype.QueryAllAABB = function (aabb, out) {\n        if (out === void 0) { out = []; }\n        this.QueryAABB(aabb, function (fixture) { out.push(fixture); return true; });\n        return out;\n    };\n    b2World.prototype.QueryPointAABB = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof b2_world_callbacks_1.b2QueryCallback) {\n            this._QueryPointAABB(args[0], args[1]);\n        }\n        else {\n            this._QueryPointAABB(null, args[0], args[1]);\n        }\n    };\n    b2World.prototype._QueryPointAABB = function (callback, point, fn) {\n        this.m_contactManager.m_broadPhase.QueryPoint(point, function (proxy) {\n            var fixture_proxy = proxy.userData;\n            var fixture = fixture_proxy.fixture;\n            if (callback) {\n                return callback.ReportFixture(fixture);\n            }\n            else if (fn) {\n                return fn(fixture);\n            }\n            return true;\n        });\n        if (callback instanceof b2_world_callbacks_1.b2QueryCallback) {\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                if (callback.ShouldQueryParticleSystem(p)) {\n                    p.QueryPointAABB(callback, point);\n                }\n            }\n        }\n    };\n    b2World.prototype.QueryAllPointAABB = function (point, out) {\n        if (out === void 0) { out = []; }\n        this.QueryPointAABB(point, function (fixture) { out.push(fixture); return true; });\n        return out;\n    };\n    b2World.prototype.QueryFixtureShape = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof b2_world_callbacks_1.b2QueryCallback) {\n            this._QueryFixtureShape(args[0], args[1], args[2], args[3]);\n        }\n        else {\n            this._QueryFixtureShape(null, args[0], args[1], args[2], args[3]);\n        }\n    };\n    b2World.prototype._QueryFixtureShape = function (callback, shape, index, transform, fn) {\n        var aabb = b2World.QueryFixtureShape_s_aabb;\n        shape.ComputeAABB(aabb, transform, index);\n        this.m_contactManager.m_broadPhase.Query(aabb, function (proxy) {\n            var fixture_proxy = proxy.userData;\n            var fixture = fixture_proxy.fixture;\n            if (b2_collision_1.b2TestOverlapShape(shape, index, fixture.GetShape(), fixture_proxy.childIndex, transform, fixture.GetBody().GetTransform())) {\n                if (callback) {\n                    return callback.ReportFixture(fixture);\n                }\n                else if (fn) {\n                    return fn(fixture);\n                }\n            }\n            return true;\n        });\n        if (callback instanceof b2_world_callbacks_1.b2QueryCallback) {\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                if (callback.ShouldQueryParticleSystem(p)) {\n                    p.QueryAABB(callback, aabb);\n                }\n            }\n        }\n    };\n    b2World.prototype.QueryAllFixtureShape = function (shape, index, transform, out) {\n        if (out === void 0) { out = []; }\n        this.QueryFixtureShape(shape, index, transform, function (fixture) { out.push(fixture); return true; });\n        return out;\n    };\n    b2World.prototype.QueryFixturePoint = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof b2_world_callbacks_1.b2QueryCallback) {\n            this._QueryFixturePoint(args[0], args[1]);\n        }\n        else {\n            this._QueryFixturePoint(null, args[0], args[1]);\n        }\n    };\n    b2World.prototype._QueryFixturePoint = function (callback, point, fn) {\n        this.m_contactManager.m_broadPhase.QueryPoint(point, function (proxy) {\n            var fixture_proxy = proxy.userData;\n            var fixture = fixture_proxy.fixture;\n            if (fixture.TestPoint(point)) {\n                if (callback) {\n                    return callback.ReportFixture(fixture);\n                }\n                else if (fn) {\n                    return fn(fixture);\n                }\n            }\n            return true;\n        });\n        if (callback) {\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                if (callback.ShouldQueryParticleSystem(p)) {\n                    p.QueryPointAABB(callback, point);\n                }\n            }\n        }\n    };\n    b2World.prototype.QueryAllFixturePoint = function (point, out) {\n        if (out === void 0) { out = []; }\n        this.QueryFixturePoint(point, function (fixture) { out.push(fixture); return true; });\n        return out;\n    };\n    b2World.prototype.RayCast = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args[0] instanceof b2_world_callbacks_2.b2RayCastCallback) {\n            this._RayCast(args[0], args[1], args[2]);\n        }\n        else {\n            this._RayCast(null, args[0], args[1], args[2]);\n        }\n    };\n    b2World.prototype._RayCast = function (callback, point1, point2, fn) {\n        var input = b2World.RayCast_s_input;\n        input.maxFraction = 1;\n        input.p1.Copy(point1);\n        input.p2.Copy(point2);\n        this.m_contactManager.m_broadPhase.RayCast(input, function (input, proxy) {\n            var fixture_proxy = proxy.userData;\n            var fixture = fixture_proxy.fixture;\n            var index = fixture_proxy.childIndex;\n            var output = b2World.RayCast_s_output;\n            var hit = fixture.RayCast(output, input, index);\n            if (hit) {\n                var fraction = output.fraction;\n                var point = b2World.RayCast_s_point;\n                point.Set((1 - fraction) * point1.x + fraction * point2.x, (1 - fraction) * point1.y + fraction * point2.y);\n                if (callback) {\n                    return callback.ReportFixture(fixture, point, output.normal, fraction);\n                }\n                else if (fn) {\n                    return fn(fixture, point, output.normal, fraction);\n                }\n            }\n            return input.maxFraction;\n        });\n        if (callback) {\n            for (var p = this.m_particleSystemList; p; p = p.m_next) {\n                if (callback.ShouldQueryParticleSystem(p)) {\n                    p.RayCast(callback, point1, point2);\n                }\n            }\n        }\n    };\n    b2World.prototype.RayCastOne = function (point1, point2) {\n        var result = null;\n        var min_fraction = 1;\n        this.RayCast(point1, point2, function (fixture, point, normal, fraction) {\n            if (fraction < min_fraction) {\n                min_fraction = fraction;\n                result = fixture;\n            }\n            return min_fraction;\n        });\n        return result;\n    };\n    b2World.prototype.RayCastAll = function (point1, point2, out) {\n        if (out === void 0) { out = []; }\n        this.RayCast(point1, point2, function (fixture, point, normal, fraction) {\n            out.push(fixture);\n            return 1;\n        });\n        return out;\n    };\n    b2World.prototype.GetBodyList = function () {\n        return this.m_bodyList;\n    };\n    b2World.prototype.GetJointList = function () {\n        return this.m_jointList;\n    };\n    b2World.prototype.GetParticleSystemList = function () {\n        return this.m_particleSystemList;\n    };\n    b2World.prototype.GetContactList = function () {\n        return this.m_contactManager.m_contactList;\n    };\n    b2World.prototype.SetAllowSleeping = function (flag) {\n        if (flag === this.m_allowSleep) {\n            return;\n        }\n        this.m_allowSleep = flag;\n        if (!this.m_allowSleep) {\n            for (var b = this.m_bodyList; b; b = b.m_next) {\n                b.SetAwake(true);\n            }\n        }\n    };\n    b2World.prototype.GetAllowSleeping = function () {\n        return this.m_allowSleep;\n    };\n    b2World.prototype.SetWarmStarting = function (flag) {\n        this.m_warmStarting = flag;\n    };\n    b2World.prototype.GetWarmStarting = function () {\n        return this.m_warmStarting;\n    };\n    b2World.prototype.SetContinuousPhysics = function (flag) {\n        this.m_continuousPhysics = flag;\n    };\n    b2World.prototype.GetContinuousPhysics = function () {\n        return this.m_continuousPhysics;\n    };\n    b2World.prototype.SetSubStepping = function (flag) {\n        this.m_subStepping = flag;\n    };\n    b2World.prototype.GetSubStepping = function () {\n        return this.m_subStepping;\n    };\n    b2World.prototype.GetProxyCount = function () {\n        return this.m_contactManager.m_broadPhase.GetProxyCount();\n    };\n    b2World.prototype.GetBodyCount = function () {\n        return this.m_bodyCount;\n    };\n    b2World.prototype.GetJointCount = function () {\n        return this.m_jointCount;\n    };\n    b2World.prototype.GetContactCount = function () {\n        return this.m_contactManager.m_contactCount;\n    };\n    b2World.prototype.GetTreeHeight = function () {\n        return this.m_contactManager.m_broadPhase.GetTreeHeight();\n    };\n    b2World.prototype.GetTreeBalance = function () {\n        return this.m_contactManager.m_broadPhase.GetTreeBalance();\n    };\n    b2World.prototype.GetTreeQuality = function () {\n        return this.m_contactManager.m_broadPhase.GetTreeQuality();\n    };\n    b2World.prototype.SetGravity = function (gravity, wake) {\n        if (wake === void 0) { wake = true; }\n        if (!b2_math_1.b2Vec2.IsEqualToV(this.m_gravity, gravity)) {\n            this.m_gravity.Copy(gravity);\n            if (wake) {\n                for (var b = this.m_bodyList; b; b = b.m_next) {\n                    b.SetAwake(true);\n                }\n            }\n        }\n    };\n    b2World.prototype.GetGravity = function () {\n        return this.m_gravity;\n    };\n    b2World.prototype.IsLocked = function () {\n        return this.m_locked;\n    };\n    b2World.prototype.SetAutoClearForces = function (flag) {\n        this.m_clearForces = flag;\n    };\n    b2World.prototype.GetAutoClearForces = function () {\n        return this.m_clearForces;\n    };\n    b2World.prototype.ShiftOrigin = function (newOrigin) {\n        if (this.IsLocked()) {\n            throw new Error();\n        }\n        for (var b = this.m_bodyList; b; b = b.m_next) {\n            b.m_xf.p.SelfSub(newOrigin);\n            b.m_sweep.c0.SelfSub(newOrigin);\n            b.m_sweep.c.SelfSub(newOrigin);\n        }\n        for (var j = this.m_jointList; j; j = j.m_next) {\n            j.ShiftOrigin(newOrigin);\n        }\n        this.m_contactManager.m_broadPhase.ShiftOrigin(newOrigin);\n    };\n    b2World.prototype.GetContactManager = function () {\n        return this.m_contactManager;\n    };\n    b2World.prototype.GetProfile = function () {\n        return this.m_profile;\n    };\n    b2World.prototype.Dump = function (log) {\n        if (this.m_locked) {\n            return;\n        }\n        log(\"const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\\n\", this.m_gravity.x, this.m_gravity.y);\n        log(\"this.m_world.SetGravity(g);\\n\");\n        log(\"const bodies: b2Body[] = [];\\n\");\n        log(\"const joints: b2Joint[] = [];\\n\");\n        var i = 0;\n        for (var b = this.m_bodyList; b; b = b.m_next) {\n            b.m_islandIndex = i;\n            b.Dump(log);\n            ++i;\n        }\n        i = 0;\n        for (var j = this.m_jointList; j; j = j.m_next) {\n            j.m_index = i;\n            ++i;\n        }\n        for (var j = this.m_jointList; j; j = j.m_next) {\n            if (j.m_type === b2_joint_1.b2JointType.e_gearJoint) {\n                continue;\n            }\n            log(\"{\\n\");\n            j.Dump(log);\n            log(\"}\\n\");\n        }\n        for (var j = this.m_jointList; j; j = j.m_next) {\n            if (j.m_type !== b2_joint_1.b2JointType.e_gearJoint) {\n                continue;\n            }\n            log(\"{\\n\");\n            j.Dump(log);\n            log(\"}\\n\");\n        }\n    };\n    b2World.prototype.DrawShape = function (fixture, color) {\n        if (this.m_debugDraw === null) {\n            return;\n        }\n        var shape = fixture.GetShape();\n        switch (shape.m_type) {\n            case b2_shape_1.b2ShapeType.e_circleShape: {\n                var circle = shape;\n                var center = circle.m_p;\n                var radius = circle.m_radius;\n                var axis = b2_math_1.b2Vec2.UNITX;\n                this.m_debugDraw.DrawSolidCircle(center, radius, axis, color);\n                break;\n            }\n            case b2_shape_1.b2ShapeType.e_edgeShape: {\n                var edge = shape;\n                var v1 = edge.m_vertex1;\n                var v2 = edge.m_vertex2;\n                this.m_debugDraw.DrawSegment(v1, v2, color);\n                if (edge.m_oneSided === false) {\n                    this.m_debugDraw.DrawPoint(v1, 4.0, color);\n                    this.m_debugDraw.DrawPoint(v2, 4.0, color);\n                }\n                break;\n            }\n            case b2_shape_1.b2ShapeType.e_chainShape: {\n                var chain = shape;\n                var count = chain.m_count;\n                var vertices = chain.m_vertices;\n                var v1 = vertices[0];\n                for (var i = 1; i < count; ++i) {\n                    var v2 = vertices[i];\n                    this.m_debugDraw.DrawSegment(v1, v2, color);\n                    v1 = v2;\n                }\n                break;\n            }\n            case b2_shape_1.b2ShapeType.e_polygonShape: {\n                var poly = shape;\n                var vertexCount = poly.m_count;\n                var vertices = poly.m_vertices;\n                this.m_debugDraw.DrawSolidPolygon(vertices, vertexCount, color);\n                break;\n            }\n        }\n    };\n    b2World.prototype.Solve = function (step) {\n        for (var b = this.m_bodyList; b; b = b.m_next) {\n            b.m_xf0.Copy(b.m_xf);\n        }\n        for (var controller = this.m_controllerList; controller; controller = controller.m_next) {\n            controller.Step(step);\n        }\n        this.m_profile.solveInit = 0;\n        this.m_profile.solveVelocity = 0;\n        this.m_profile.solvePosition = 0;\n        var island = this.m_island;\n        island.Initialize(this.m_bodyCount, this.m_contactManager.m_contactCount, this.m_jointCount, this.m_contactManager.m_contactListener);\n        for (var b = this.m_bodyList; b; b = b.m_next) {\n            b.m_islandFlag = false;\n        }\n        for (var c = this.m_contactManager.m_contactList; c; c = c.m_next) {\n            c.m_islandFlag = false;\n        }\n        for (var j = this.m_jointList; j; j = j.m_next) {\n            j.m_islandFlag = false;\n        }\n        var stack = this.s_stack;\n        for (var seed = this.m_bodyList; seed; seed = seed.m_next) {\n            if (seed.m_islandFlag) {\n                continue;\n            }\n            if (!seed.IsAwake() || !seed.IsEnabled()) {\n                continue;\n            }\n            if (seed.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n                continue;\n            }\n            island.Clear();\n            var stackCount = 0;\n            stack[stackCount++] = seed;\n            seed.m_islandFlag = true;\n            while (stackCount > 0) {\n                var b = stack[--stackCount];\n                if (!b) {\n                    throw new Error();\n                }\n                island.AddBody(b);\n                if (b.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n                    continue;\n                }\n                b.m_awakeFlag = true;\n                for (var ce = b.m_contactList; ce; ce = ce.next) {\n                    var contact = ce.contact;\n                    if (contact.m_islandFlag) {\n                        continue;\n                    }\n                    if (!contact.IsEnabled() || !contact.IsTouching()) {\n                        continue;\n                    }\n                    var sensorA = contact.m_fixtureA.m_isSensor;\n                    var sensorB = contact.m_fixtureB.m_isSensor;\n                    if (sensorA || sensorB) {\n                        continue;\n                    }\n                    island.AddContact(contact);\n                    contact.m_islandFlag = true;\n                    var other = ce.other;\n                    if (other.m_islandFlag) {\n                        continue;\n                    }\n                    stack[stackCount++] = other;\n                    other.m_islandFlag = true;\n                }\n                for (var je = b.m_jointList; je; je = je.next) {\n                    if (je.joint.m_islandFlag) {\n                        continue;\n                    }\n                    var other = je.other;\n                    if (!other.IsEnabled()) {\n                        continue;\n                    }\n                    island.AddJoint(je.joint);\n                    je.joint.m_islandFlag = true;\n                    if (other.m_islandFlag) {\n                        continue;\n                    }\n                    stack[stackCount++] = other;\n                    other.m_islandFlag = true;\n                }\n            }\n            var profile = new b2_time_step_1.b2Profile();\n            island.Solve(profile, step, this.m_gravity, this.m_allowSleep);\n            this.m_profile.solveInit += profile.solveInit;\n            this.m_profile.solveVelocity += profile.solveVelocity;\n            this.m_profile.solvePosition += profile.solvePosition;\n            for (var i = 0; i < island.m_bodyCount; ++i) {\n                var b = island.m_bodies[i];\n                if (b.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n                    b.m_islandFlag = false;\n                }\n            }\n        }\n        for (var i = 0; i < stack.length; ++i) {\n            if (!stack[i]) {\n                break;\n            }\n            stack[i] = null;\n        }\n        var timer = new b2_timer_1.b2Timer();\n        for (var b = this.m_bodyList; b; b = b.m_next) {\n            if (!b.m_islandFlag) {\n                continue;\n            }\n            if (b.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n                continue;\n            }\n            b.SynchronizeFixtures();\n        }\n        this.m_contactManager.FindNewContacts();\n        this.m_profile.broadphase = timer.GetMilliseconds();\n    };\n    b2World.prototype.SolveTOI = function (step) {\n        var island = this.m_island;\n        island.Initialize(2 * b2_settings_1.b2_maxTOIContacts, b2_settings_1.b2_maxTOIContacts, 0, this.m_contactManager.m_contactListener);\n        if (this.m_stepComplete) {\n            for (var b = this.m_bodyList; b; b = b.m_next) {\n                b.m_islandFlag = false;\n                b.m_sweep.alpha0 = 0;\n            }\n            for (var c = this.m_contactManager.m_contactList; c; c = c.m_next) {\n                c.m_toiFlag = false;\n                c.m_islandFlag = false;\n                c.m_toiCount = 0;\n                c.m_toi = 1;\n            }\n        }\n        for (;;) {\n            var minContact = null;\n            var minAlpha = 1;\n            for (var c = this.m_contactManager.m_contactList; c; c = c.m_next) {\n                if (!c.IsEnabled()) {\n                    continue;\n                }\n                if (c.m_toiCount > b2_settings_1.b2_maxSubSteps) {\n                    continue;\n                }\n                var alpha = 1;\n                if (c.m_toiFlag) {\n                    alpha = c.m_toi;\n                }\n                else {\n                    var fA_1 = c.GetFixtureA();\n                    var fB_1 = c.GetFixtureB();\n                    if (fA_1.IsSensor() || fB_1.IsSensor()) {\n                        continue;\n                    }\n                    var bA_1 = fA_1.GetBody();\n                    var bB_1 = fB_1.GetBody();\n                    var typeA = bA_1.m_type;\n                    var typeB = bB_1.m_type;\n                    var activeA = bA_1.IsAwake() && typeA !== b2_body_1.b2BodyType.b2_staticBody;\n                    var activeB = bB_1.IsAwake() && typeB !== b2_body_1.b2BodyType.b2_staticBody;\n                    if (!activeA && !activeB) {\n                        continue;\n                    }\n                    var collideA = bA_1.IsBullet() || typeA !== b2_body_1.b2BodyType.b2_dynamicBody;\n                    var collideB = bB_1.IsBullet() || typeB !== b2_body_1.b2BodyType.b2_dynamicBody;\n                    if (!collideA && !collideB) {\n                        continue;\n                    }\n                    var alpha0 = bA_1.m_sweep.alpha0;\n                    if (bA_1.m_sweep.alpha0 < bB_1.m_sweep.alpha0) {\n                        alpha0 = bB_1.m_sweep.alpha0;\n                        bA_1.m_sweep.Advance(alpha0);\n                    }\n                    else if (bB_1.m_sweep.alpha0 < bA_1.m_sweep.alpha0) {\n                        alpha0 = bA_1.m_sweep.alpha0;\n                        bB_1.m_sweep.Advance(alpha0);\n                    }\n                    var indexA = c.GetChildIndexA();\n                    var indexB = c.GetChildIndexB();\n                    var input = b2World.SolveTOI_s_toi_input;\n                    input.proxyA.SetShape(fA_1.GetShape(), indexA);\n                    input.proxyB.SetShape(fB_1.GetShape(), indexB);\n                    input.sweepA.Copy(bA_1.m_sweep);\n                    input.sweepB.Copy(bB_1.m_sweep);\n                    input.tMax = 1;\n                    var output = b2World.SolveTOI_s_toi_output;\n                    b2_time_of_impact_1.b2TimeOfImpact(output, input);\n                    var beta = output.t;\n                    if (output.state === b2_time_of_impact_1.b2TOIOutputState.e_touching) {\n                        alpha = b2_math_1.b2Min(alpha0 + (1 - alpha0) * beta, 1);\n                    }\n                    else {\n                        alpha = 1;\n                    }\n                    c.m_toi = alpha;\n                    c.m_toiFlag = true;\n                }\n                if (alpha < minAlpha) {\n                    minContact = c;\n                    minAlpha = alpha;\n                }\n            }\n            if (minContact === null || 1 - 10 * b2_settings_1.b2_epsilon < minAlpha) {\n                this.m_stepComplete = true;\n                break;\n            }\n            var fA = minContact.GetFixtureA();\n            var fB = minContact.GetFixtureB();\n            var bA = fA.GetBody();\n            var bB = fB.GetBody();\n            var backup1 = b2World.SolveTOI_s_backup1.Copy(bA.m_sweep);\n            var backup2 = b2World.SolveTOI_s_backup2.Copy(bB.m_sweep);\n            bA.Advance(minAlpha);\n            bB.Advance(minAlpha);\n            minContact.Update(this.m_contactManager.m_contactListener);\n            minContact.m_toiFlag = false;\n            ++minContact.m_toiCount;\n            if (!minContact.IsEnabled() || !minContact.IsTouching()) {\n                minContact.SetEnabled(false);\n                bA.m_sweep.Copy(backup1);\n                bB.m_sweep.Copy(backup2);\n                bA.SynchronizeTransform();\n                bB.SynchronizeTransform();\n                continue;\n            }\n            bA.SetAwake(true);\n            bB.SetAwake(true);\n            island.Clear();\n            island.AddBody(bA);\n            island.AddBody(bB);\n            island.AddContact(minContact);\n            bA.m_islandFlag = true;\n            bB.m_islandFlag = true;\n            minContact.m_islandFlag = true;\n            for (var i = 0; i < 2; ++i) {\n                var body = (i === 0) ? (bA) : (bB);\n                if (body.m_type === b2_body_1.b2BodyType.b2_dynamicBody) {\n                    for (var ce = body.m_contactList; ce; ce = ce.next) {\n                        if (island.m_bodyCount === island.m_bodyCapacity) {\n                            break;\n                        }\n                        if (island.m_contactCount === island.m_contactCapacity) {\n                            break;\n                        }\n                        var contact = ce.contact;\n                        if (contact.m_islandFlag) {\n                            continue;\n                        }\n                        var other = ce.other;\n                        if (other.m_type === b2_body_1.b2BodyType.b2_dynamicBody &&\n                            !body.IsBullet() && !other.IsBullet()) {\n                            continue;\n                        }\n                        var sensorA = contact.m_fixtureA.m_isSensor;\n                        var sensorB = contact.m_fixtureB.m_isSensor;\n                        if (sensorA || sensorB) {\n                            continue;\n                        }\n                        var backup = b2World.SolveTOI_s_backup.Copy(other.m_sweep);\n                        if (!other.m_islandFlag) {\n                            other.Advance(minAlpha);\n                        }\n                        contact.Update(this.m_contactManager.m_contactListener);\n                        if (!contact.IsEnabled()) {\n                            other.m_sweep.Copy(backup);\n                            other.SynchronizeTransform();\n                            continue;\n                        }\n                        if (!contact.IsTouching()) {\n                            other.m_sweep.Copy(backup);\n                            other.SynchronizeTransform();\n                            continue;\n                        }\n                        contact.m_islandFlag = true;\n                        island.AddContact(contact);\n                        if (other.m_islandFlag) {\n                            continue;\n                        }\n                        other.m_islandFlag = true;\n                        if (other.m_type !== b2_body_1.b2BodyType.b2_staticBody) {\n                            other.SetAwake(true);\n                        }\n                        island.AddBody(other);\n                    }\n                }\n            }\n            var subStep = b2World.SolveTOI_s_subStep;\n            subStep.dt = (1 - minAlpha) * step.dt;\n            subStep.inv_dt = 1 / subStep.dt;\n            subStep.dtRatio = 1;\n            subStep.positionIterations = 20;\n            subStep.velocityIterations = step.velocityIterations;\n            subStep.particleIterations = step.particleIterations;\n            subStep.warmStarting = false;\n            island.SolveTOI(subStep, bA.m_islandIndex, bB.m_islandIndex);\n            for (var i = 0; i < island.m_bodyCount; ++i) {\n                var body = island.m_bodies[i];\n                body.m_islandFlag = false;\n                if (body.m_type !== b2_body_1.b2BodyType.b2_dynamicBody) {\n                    continue;\n                }\n                body.SynchronizeFixtures();\n                for (var ce = body.m_contactList; ce; ce = ce.next) {\n                    ce.contact.m_toiFlag = false;\n                    ce.contact.m_islandFlag = false;\n                }\n            }\n            this.m_contactManager.FindNewContacts();\n            if (this.m_subStepping) {\n                this.m_stepComplete = false;\n                break;\n            }\n        }\n    };\n    b2World.prototype.AddController = function (controller) {\n        controller.m_next = this.m_controllerList;\n        controller.m_prev = null;\n        if (this.m_controllerList) {\n            this.m_controllerList.m_prev = controller;\n        }\n        this.m_controllerList = controller;\n        ++this.m_controllerCount;\n        return controller;\n    };\n    b2World.prototype.RemoveController = function (controller) {\n        if (controller.m_prev) {\n            controller.m_prev.m_next = controller.m_next;\n        }\n        if (controller.m_next) {\n            controller.m_next.m_prev = controller.m_prev;\n        }\n        if (this.m_controllerList === controller) {\n            this.m_controllerList = controller.m_next;\n        }\n        --this.m_controllerCount;\n        controller.m_prev = null;\n        controller.m_next = null;\n        return controller;\n    };\n    b2World.Step_s_step = new b2_time_step_1.b2TimeStep();\n    b2World.Step_s_stepTimer = new b2_timer_1.b2Timer();\n    b2World.Step_s_timer = new b2_timer_1.b2Timer();\n    b2World.DebugDraw_s_color = new b2_draw_1.b2Color(0, 0, 0);\n    b2World.DebugDraw_s_vs = b2_math_1.b2Vec2.MakeArray(4);\n    b2World.DebugDraw_s_xf = new b2_math_1.b2Transform();\n    b2World.QueryFixtureShape_s_aabb = new b2_collision_1.b2AABB();\n    b2World.RayCast_s_input = new b2_collision_1.b2RayCastInput();\n    b2World.RayCast_s_output = new b2_collision_1.b2RayCastOutput();\n    b2World.RayCast_s_point = new b2_math_1.b2Vec2();\n    b2World.SolveTOI_s_subStep = new b2_time_step_1.b2TimeStep();\n    b2World.SolveTOI_s_backup = new b2_math_1.b2Sweep();\n    b2World.SolveTOI_s_backup1 = new b2_math_1.b2Sweep();\n    b2World.SolveTOI_s_backup2 = new b2_math_1.b2Sweep();\n    b2World.SolveTOI_s_toi_input = new b2_time_of_impact_1.b2TOIInput();\n    b2World.SolveTOI_s_toi_output = new b2_time_of_impact_1.b2TOIOutput();\n    return b2World;\n}());\nexports.b2World = b2World;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfd29ybGQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfd29ybGQudHM/ZGFjYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMSBFcmluIENhdHRvIGh0dHA6Ly93d3cuYm94MmQub3JnXG4qXG4qIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4qIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiogYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbiogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4qIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiogZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuKiBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbiogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiogbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJfZXBzaWxvbiwgYjJfbWF4U3ViU3RlcHMsIGIyX21heFRPSUNvbnRhY3RzIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJNaW4sIGIyVmVjMiwgYjJUcmFuc2Zvcm0sIGIyU3dlZXAsIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMlRpbWVyIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl90aW1lclwiO1xuaW1wb3J0IHsgYjJDb2xvciwgYjJEcmF3LCBiMkRyYXdGbGFncyB9IGZyb20gXCIuLi9jb21tb24vYjJfZHJhd1wiO1xuaW1wb3J0IHsgYjJBQUJCLCBiMlJheUNhc3RJbnB1dCwgYjJSYXlDYXN0T3V0cHV0LCBiMlRlc3RPdmVybGFwU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJUcmVlTm9kZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfZHluYW1pY190cmVlXCI7XG5pbXBvcnQgeyBiMlRpbWVPZkltcGFjdCwgYjJUT0lJbnB1dCwgYjJUT0lPdXRwdXQsIGIyVE9JT3V0cHV0U3RhdGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3RpbWVfb2ZfaW1wYWN0XCI7XG5pbXBvcnQgeyBiMlNoYXBlLCBiMlNoYXBlVHlwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfc2hhcGVcIjtcbmltcG9ydCB7IGIyQ2hhaW5TaGFwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfY2hhaW5fc2hhcGVcIjtcbmltcG9ydCB7IGIyQ2lyY2xlU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NpcmNsZV9zaGFwZVwiO1xuaW1wb3J0IHsgYjJFZGdlU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2VkZ2Vfc2hhcGVcIjtcbmltcG9ydCB7IGIyUG9seWdvblNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9wb2x5Z29uX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkNvbnRhY3QsIGIyQ29udGFjdEVkZ2UgfSBmcm9tIFwiLi9iMl9jb250YWN0XCI7XG5pbXBvcnQgeyBiMkpvaW50LCBiMklKb2ludERlZiwgYjJKb2ludFR5cGUsIGIySm9pbnRFZGdlIH0gZnJvbSBcIi4vYjJfam9pbnRcIjtcbmltcG9ydCB7IGIyQXJlYUpvaW50LCBiMklBcmVhSm9pbnREZWYgfSBmcm9tIFwiLi9iMl9hcmVhX2pvaW50XCI7XG5pbXBvcnQgeyBiMkRpc3RhbmNlSm9pbnQsIGIySURpc3RhbmNlSm9pbnREZWYgfSBmcm9tIFwiLi9iMl9kaXN0YW5jZV9qb2ludFwiO1xuaW1wb3J0IHsgYjJGcmljdGlvbkpvaW50LCBiMklGcmljdGlvbkpvaW50RGVmIH0gZnJvbSBcIi4vYjJfZnJpY3Rpb25fam9pbnRcIjtcbmltcG9ydCB7IGIyR2VhckpvaW50LCBiMklHZWFySm9pbnREZWYgfSBmcm9tIFwiLi9iMl9nZWFyX2pvaW50XCI7XG5pbXBvcnQgeyBiMk1vdG9ySm9pbnQsIGIySU1vdG9ySm9pbnREZWYgfSBmcm9tIFwiLi9iMl9tb3Rvcl9qb2ludFwiO1xuaW1wb3J0IHsgYjJNb3VzZUpvaW50LCBiMklNb3VzZUpvaW50RGVmIH0gZnJvbSBcIi4vYjJfbW91c2Vfam9pbnRcIjtcbmltcG9ydCB7IGIyUHJpc21hdGljSm9pbnQsIGIySVByaXNtYXRpY0pvaW50RGVmIH0gZnJvbSBcIi4vYjJfcHJpc21hdGljX2pvaW50XCI7XG5pbXBvcnQgeyBiMlB1bGxleUpvaW50LCBiMklQdWxsZXlKb2ludERlZiB9IGZyb20gXCIuL2IyX3B1bGxleV9qb2ludFwiO1xuaW1wb3J0IHsgYjJSZXZvbHV0ZUpvaW50LCBiMklSZXZvbHV0ZUpvaW50RGVmIH0gZnJvbSBcIi4vYjJfcmV2b2x1dGVfam9pbnRcIjtcbmltcG9ydCB7IGIyV2VsZEpvaW50LCBiMklXZWxkSm9pbnREZWYgfSBmcm9tIFwiLi9iMl93ZWxkX2pvaW50XCI7XG5pbXBvcnQgeyBiMldoZWVsSm9pbnQsIGIySVdoZWVsSm9pbnREZWYgfSBmcm9tIFwiLi9iMl93aGVlbF9qb2ludFwiO1xuaW1wb3J0IHsgYjJCb2R5LCBiMklCb2R5RGVmLCBiMkJvZHlUeXBlIH0gZnJvbSBcIi4vYjJfYm9keVwiO1xuaW1wb3J0IHsgYjJDb250YWN0TWFuYWdlciB9IGZyb20gXCIuL2IyX2NvbnRhY3RfbWFuYWdlclwiO1xuaW1wb3J0IHsgYjJGaXh0dXJlLCBiMkZpeHR1cmVQcm94eSB9IGZyb20gXCIuL2IyX2ZpeHR1cmVcIjtcbmltcG9ydCB7IGIySXNsYW5kIH0gZnJvbSBcIi4vYjJfaXNsYW5kXCI7XG5pbXBvcnQgeyBiMlByb2ZpbGUsIGIyVGltZVN0ZXAgfSBmcm9tIFwiLi9iMl90aW1lX3N0ZXBcIjtcbmltcG9ydCB7IGIyQ29udGFjdEZpbHRlciB9IGZyb20gXCIuL2IyX3dvcmxkX2NhbGxiYWNrc1wiO1xuaW1wb3J0IHsgYjJDb250YWN0TGlzdGVuZXIgfSBmcm9tIFwiLi9iMl93b3JsZF9jYWxsYmFja3NcIjtcbmltcG9ydCB7IGIyRGVzdHJ1Y3Rpb25MaXN0ZW5lciB9IGZyb20gXCIuL2IyX3dvcmxkX2NhbGxiYWNrc1wiO1xuaW1wb3J0IHsgYjJRdWVyeUNhbGxiYWNrLCBiMlF1ZXJ5Q2FsbGJhY2tGdW5jdGlvbiB9IGZyb20gXCIuL2IyX3dvcmxkX2NhbGxiYWNrc1wiO1xuaW1wb3J0IHsgYjJSYXlDYXN0Q2FsbGJhY2ssIGIyUmF5Q2FzdENhbGxiYWNrRnVuY3Rpb24gfSBmcm9tIFwiLi9iMl93b3JsZF9jYWxsYmFja3NcIjtcbi8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbmltcG9ydCB7IGIyX21heEZsb2F0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJDYWxjdWxhdGVQYXJ0aWNsZUl0ZXJhdGlvbnMgfSBmcm9tIFwiLi4vcGFydGljbGUvYjJfcGFydGljbGVcIjtcbmltcG9ydCB7IGIyUGFydGljbGVTeXN0ZW1EZWYsIGIyUGFydGljbGVTeXN0ZW0gfSBmcm9tIFwiLi4vcGFydGljbGUvYjJfcGFydGljbGVfc3lzdGVtXCI7XG4vLyAjZW5kaWZcbi8vICNpZiBCMl9FTkFCTEVfQ09OVFJPTExFUlxuaW1wb3J0IHsgYjJDb250cm9sbGVyLCBiMkNvbnRyb2xsZXJFZGdlIH0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL2IyX2NvbnRyb2xsZXJcIjtcbi8vICNlbmRpZlxuXG4vLy8gVGhlIHdvcmxkIGNsYXNzIG1hbmFnZXMgYWxsIHBoeXNpY3MgZW50aXRpZXMsIGR5bmFtaWMgc2ltdWxhdGlvbixcbi8vLyBhbmQgYXN5bmNocm9ub3VzIHF1ZXJpZXMuIFRoZSB3b3JsZCBhbHNvIGNvbnRhaW5zIGVmZmljaWVudCBtZW1vcnlcbi8vLyBtYW5hZ2VtZW50IGZhY2lsaXRpZXMuXG5leHBvcnQgY2xhc3MgYjJXb3JsZCB7XG4gIHB1YmxpYyByZWFkb25seSBtX2NvbnRhY3RNYW5hZ2VyOiBiMkNvbnRhY3RNYW5hZ2VyID0gbmV3IGIyQ29udGFjdE1hbmFnZXIoKTtcblxuICBwdWJsaWMgbV9ib2R5TGlzdDogYjJCb2R5IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBtX2pvaW50TGlzdDogYjJKb2ludCB8IG51bGwgPSBudWxsO1xuXG4gIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgcHVibGljIG1fcGFydGljbGVTeXN0ZW1MaXN0OiBiMlBhcnRpY2xlU3lzdGVtIHwgbnVsbCA9IG51bGw7XG4gIC8vICNlbmRpZlxuXG4gIHB1YmxpYyBtX2JvZHlDb3VudDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fam9pbnRDb3VudDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9ncmF2aXR5OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBtX2FsbG93U2xlZXA6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHB1YmxpYyBtX2Rlc3RydWN0aW9uTGlzdGVuZXI6IGIyRGVzdHJ1Y3Rpb25MaXN0ZW5lciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgbV9kZWJ1Z0RyYXc6IGIyRHJhdyB8IG51bGwgPSBudWxsO1xuXG4gIC8vIFRoaXMgaXMgdXNlZCB0byBjb21wdXRlIHRoZSB0aW1lIHN0ZXAgcmF0aW8gdG9cbiAgLy8gc3VwcG9ydCBhIHZhcmlhYmxlIHRpbWUgc3RlcC5cbiAgcHVibGljIG1faW52X2R0MDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgbV9uZXdDb250YWN0czogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbV9sb2NrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fY2xlYXJGb3JjZXM6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8vIFRoZXNlIGFyZSBmb3IgZGVidWdnaW5nIHRoZSBzb2x2ZXIuXG4gIHB1YmxpYyBtX3dhcm1TdGFydGluZzogYm9vbGVhbiA9IHRydWU7XG4gIHB1YmxpYyBtX2NvbnRpbnVvdXNQaHlzaWNzOiBib29sZWFuID0gdHJ1ZTtcbiAgcHVibGljIG1fc3ViU3RlcHBpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgbV9zdGVwQ29tcGxldGU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHB1YmxpYyByZWFkb25seSBtX3Byb2ZpbGU6IGIyUHJvZmlsZSA9IG5ldyBiMlByb2ZpbGUoKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgbV9pc2xhbmQ6IGIySXNsYW5kID0gbmV3IGIySXNsYW5kKCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IHNfc3RhY2s6IEFycmF5PGIyQm9keSB8IG51bGw+ID0gW107XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9DT05UUk9MTEVSXG4gIHB1YmxpYyBtX2NvbnRyb2xsZXJMaXN0OiBiMkNvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIG1fY29udHJvbGxlckNvdW50OiBudW1iZXIgPSAwO1xuICAvLyAjZW5kaWZcblxuICAvLy8gQ29uc3RydWN0IGEgd29ybGQgb2JqZWN0LlxuICAvLy8gQHBhcmFtIGdyYXZpdHkgdGhlIHdvcmxkIGdyYXZpdHkgdmVjdG9yLlxuICBjb25zdHJ1Y3RvcihncmF2aXR5OiBYWSkge1xuICAgIHRoaXMubV9ncmF2aXR5LkNvcHkoZ3Jhdml0eSk7XG4gIH1cblxuICAvLy8gUmVnaXN0ZXIgYSBkZXN0cnVjdGlvbiBsaXN0ZW5lci4gVGhlIGxpc3RlbmVyIGlzIG93bmVkIGJ5IHlvdSBhbmQgbXVzdFxuICAvLy8gcmVtYWluIGluIHNjb3BlLlxuICBwdWJsaWMgU2V0RGVzdHJ1Y3Rpb25MaXN0ZW5lcihsaXN0ZW5lcjogYjJEZXN0cnVjdGlvbkxpc3RlbmVyIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIH1cblxuICAvLy8gUmVnaXN0ZXIgYSBjb250YWN0IGZpbHRlciB0byBwcm92aWRlIHNwZWNpZmljIGNvbnRyb2wgb3ZlciBjb2xsaXNpb24uXG4gIC8vLyBPdGhlcndpc2UgdGhlIGRlZmF1bHQgZmlsdGVyIGlzIHVzZWQgKGIyX2RlZmF1bHRGaWx0ZXIpLiBUaGUgbGlzdGVuZXIgaXNcbiAgLy8vIG93bmVkIGJ5IHlvdSBhbmQgbXVzdCByZW1haW4gaW4gc2NvcGUuXG4gIHB1YmxpYyBTZXRDb250YWN0RmlsdGVyKGZpbHRlcjogYjJDb250YWN0RmlsdGVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdEZpbHRlciA9IGZpbHRlcjtcbiAgfVxuXG4gIC8vLyBSZWdpc3RlciBhIGNvbnRhY3QgZXZlbnQgbGlzdGVuZXIuIFRoZSBsaXN0ZW5lciBpcyBvd25lZCBieSB5b3UgYW5kIG11c3RcbiAgLy8vIHJlbWFpbiBpbiBzY29wZS5cbiAgcHVibGljIFNldENvbnRhY3RMaXN0ZW5lcihsaXN0ZW5lcjogYjJDb250YWN0TGlzdGVuZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgfVxuXG4gIC8vLyBSZWdpc3RlciBhIHJvdXRpbmUgZm9yIGRlYnVnIGRyYXdpbmcuIFRoZSBkZWJ1ZyBkcmF3IGZ1bmN0aW9ucyBhcmUgY2FsbGVkXG4gIC8vLyBpbnNpZGUgd2l0aCBiMldvcmxkOjpEZWJ1Z0RyYXcgbWV0aG9kLiBUaGUgZGVidWcgZHJhdyBvYmplY3QgaXMgb3duZWRcbiAgLy8vIGJ5IHlvdSBhbmQgbXVzdCByZW1haW4gaW4gc2NvcGUuXG4gIHB1YmxpYyBTZXREZWJ1Z0RyYXcoZGVidWdEcmF3OiBiMkRyYXcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5tX2RlYnVnRHJhdyA9IGRlYnVnRHJhdztcbiAgfVxuXG4gIC8vLyBDcmVhdGUgYSByaWdpZCBib2R5IGdpdmVuIGEgZGVmaW5pdGlvbi4gTm8gcmVmZXJlbmNlIHRvIHRoZSBkZWZpbml0aW9uXG4gIC8vLyBpcyByZXRhaW5lZC5cbiAgLy8vIEB3YXJuaW5nIFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gIHB1YmxpYyBDcmVhdGVCb2R5KGRlZjogYjJJQm9keURlZiA9IHt9KTogYjJCb2R5IHtcbiAgICBpZiAodGhpcy5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBjb25zdCBiOiBiMkJvZHkgPSBuZXcgYjJCb2R5KGRlZiwgdGhpcyk7XG5cbiAgICAvLyBBZGQgdG8gd29ybGQgZG91Ymx5IGxpbmtlZCBsaXN0LlxuICAgIGIubV9wcmV2ID0gbnVsbDtcbiAgICBiLm1fbmV4dCA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICBpZiAodGhpcy5tX2JvZHlMaXN0KSB7XG4gICAgICB0aGlzLm1fYm9keUxpc3QubV9wcmV2ID0gYjtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlMaXN0ID0gYjtcbiAgICArK3RoaXMubV9ib2R5Q291bnQ7XG5cbiAgICByZXR1cm4gYjtcbiAgfVxuXG4gIC8vLyBEZXN0cm95IGEgcmlnaWQgYm9keSBnaXZlbiBhIGRlZmluaXRpb24uIE5vIHJlZmVyZW5jZSB0byB0aGUgZGVmaW5pdGlvblxuICAvLy8gaXMgcmV0YWluZWQuIFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gIC8vLyBAd2FybmluZyBUaGlzIGF1dG9tYXRpY2FsbHkgZGVsZXRlcyBhbGwgYXNzb2NpYXRlZCBzaGFwZXMgYW5kIGpvaW50cy5cbiAgLy8vIEB3YXJuaW5nIFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gIHB1YmxpYyBEZXN0cm95Qm9keShiOiBiMkJvZHkpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX2JvZHlDb3VudCA+IDApO1xuICAgIGlmICh0aGlzLklzTG9ja2VkKCkpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cblxuICAgIC8vIERlbGV0ZSB0aGUgYXR0YWNoZWQgam9pbnRzLlxuICAgIGxldCBqZTogYjJKb2ludEVkZ2UgfCBudWxsID0gYi5tX2pvaW50TGlzdDtcbiAgICB3aGlsZSAoamUpIHtcbiAgICAgIGNvbnN0IGplMDogYjJKb2ludEVkZ2UgPSBqZTtcbiAgICAgIGplID0gamUubmV4dDtcblxuICAgICAgaWYgKHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyLlNheUdvb2RieWVKb2ludChqZTAuam9pbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLkRlc3Ryb3lKb2ludChqZTAuam9pbnQpO1xuXG4gICAgICBiLm1fam9pbnRMaXN0ID0gamU7XG4gICAgfVxuICAgIGIubV9qb2ludExpc3QgPSBudWxsO1xuXG4gICAgLy8gI2lmIEIyX0VOQUJMRV9DT05UUk9MTEVSXG4gICAgLy8gQHNlZSBiMkNvbnRyb2xsZXIgbGlzdFxuICAgIGxldCBjb2U6IGIyQ29udHJvbGxlckVkZ2UgfCBudWxsID0gYi5tX2NvbnRyb2xsZXJMaXN0O1xuICAgIHdoaWxlIChjb2UpIHtcbiAgICAgIGNvbnN0IGNvZTA6IGIyQ29udHJvbGxlckVkZ2UgPSBjb2U7XG4gICAgICBjb2UgPSBjb2UubmV4dENvbnRyb2xsZXI7XG4gICAgICBjb2UwLmNvbnRyb2xsZXIuUmVtb3ZlQm9keShiKTtcbiAgICB9XG4gICAgLy8gI2VuZGlmXG5cbiAgICAvLyBEZWxldGUgdGhlIGF0dGFjaGVkIGNvbnRhY3RzLlxuICAgIGxldCBjZTogYjJDb250YWN0RWRnZSB8IG51bGwgPSBiLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGNlKSB7XG4gICAgICBjb25zdCBjZTA6IGIyQ29udGFjdEVkZ2UgPSBjZTtcbiAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5EZXN0cm95KGNlMC5jb250YWN0KTtcbiAgICB9XG4gICAgYi5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcblxuICAgIC8vIERlbGV0ZSB0aGUgYXR0YWNoZWQgZml4dHVyZXMuIFRoaXMgZGVzdHJveXMgYnJvYWQtcGhhc2UgcHJveGllcy5cbiAgICBsZXQgZjogYjJGaXh0dXJlIHwgbnVsbCA9IGIubV9maXh0dXJlTGlzdDtcbiAgICB3aGlsZSAoZikge1xuICAgICAgY29uc3QgZjA6IGIyRml4dHVyZSA9IGY7XG4gICAgICBmID0gZi5tX25leHQ7XG5cbiAgICAgIGlmICh0aGlzLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lcikge1xuICAgICAgICB0aGlzLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lci5TYXlHb29kYnllRml4dHVyZShmMCk7XG4gICAgICB9XG5cbiAgICAgIGYwLkRlc3Ryb3lQcm94aWVzKCk7XG4gICAgICBmMC5SZXNldCgpO1xuXG4gICAgICBiLm1fZml4dHVyZUxpc3QgPSBmO1xuICAgICAgYi5tX2ZpeHR1cmVDb3VudCAtPSAxO1xuICAgIH1cbiAgICBiLm1fZml4dHVyZUxpc3QgPSBudWxsO1xuICAgIGIubV9maXh0dXJlQ291bnQgPSAwO1xuXG4gICAgLy8gUmVtb3ZlIHdvcmxkIGJvZHkgbGlzdC5cbiAgICBpZiAoYi5tX3ByZXYpIHtcbiAgICAgIGIubV9wcmV2Lm1fbmV4dCA9IGIubV9uZXh0O1xuICAgIH1cblxuICAgIGlmIChiLm1fbmV4dCkge1xuICAgICAgYi5tX25leHQubV9wcmV2ID0gYi5tX3ByZXY7XG4gICAgfVxuXG4gICAgaWYgKGIgPT09IHRoaXMubV9ib2R5TGlzdCkge1xuICAgICAgdGhpcy5tX2JvZHlMaXN0ID0gYi5tX25leHQ7XG4gICAgfVxuXG4gICAgLS10aGlzLm1fYm9keUNvdW50O1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgX0pvaW50X0NyZWF0ZShkZWY6IGIySUpvaW50RGVmKTogYjJKb2ludCB7XG4gICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgY2FzZSBiMkpvaW50VHlwZS5lX2Rpc3RhbmNlSm9pbnQ6IHJldHVybiBuZXcgYjJEaXN0YW5jZUpvaW50KGRlZiBhcyBiMklEaXN0YW5jZUpvaW50RGVmKTtcbiAgICAgIGNhc2UgYjJKb2ludFR5cGUuZV9tb3VzZUpvaW50OiByZXR1cm4gbmV3IGIyTW91c2VKb2ludChkZWYgYXMgYjJJTW91c2VKb2ludERlZik7XG4gICAgICBjYXNlIGIySm9pbnRUeXBlLmVfcHJpc21hdGljSm9pbnQ6IHJldHVybiBuZXcgYjJQcmlzbWF0aWNKb2ludChkZWYgYXMgYjJJUHJpc21hdGljSm9pbnREZWYpO1xuICAgICAgY2FzZSBiMkpvaW50VHlwZS5lX3Jldm9sdXRlSm9pbnQ6IHJldHVybiBuZXcgYjJSZXZvbHV0ZUpvaW50KGRlZiBhcyBiMklSZXZvbHV0ZUpvaW50RGVmKTtcbiAgICAgIGNhc2UgYjJKb2ludFR5cGUuZV9wdWxsZXlKb2ludDogcmV0dXJuIG5ldyBiMlB1bGxleUpvaW50KGRlZiBhcyBiMklQdWxsZXlKb2ludERlZik7XG4gICAgICBjYXNlIGIySm9pbnRUeXBlLmVfZ2VhckpvaW50OiByZXR1cm4gbmV3IGIyR2VhckpvaW50KGRlZiBhcyBiMklHZWFySm9pbnREZWYpO1xuICAgICAgY2FzZSBiMkpvaW50VHlwZS5lX3doZWVsSm9pbnQ6IHJldHVybiBuZXcgYjJXaGVlbEpvaW50KGRlZiBhcyBiMklXaGVlbEpvaW50RGVmKTtcbiAgICAgIGNhc2UgYjJKb2ludFR5cGUuZV93ZWxkSm9pbnQ6IHJldHVybiBuZXcgYjJXZWxkSm9pbnQoZGVmIGFzIGIySVdlbGRKb2ludERlZik7XG4gICAgICBjYXNlIGIySm9pbnRUeXBlLmVfZnJpY3Rpb25Kb2ludDogcmV0dXJuIG5ldyBiMkZyaWN0aW9uSm9pbnQoZGVmIGFzIGIySUZyaWN0aW9uSm9pbnREZWYpO1xuICAgICAgY2FzZSBiMkpvaW50VHlwZS5lX21vdG9ySm9pbnQ6IHJldHVybiBuZXcgYjJNb3RvckpvaW50KGRlZiBhcyBiMklNb3RvckpvaW50RGVmKTtcbiAgICAgIGNhc2UgYjJKb2ludFR5cGUuZV9hcmVhSm9pbnQ6IHJldHVybiBuZXcgYjJBcmVhSm9pbnQoZGVmIGFzIGIySUFyZWFKb2ludERlZik7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgX0pvaW50X0Rlc3Ryb3koam9pbnQ6IGIySm9pbnQpOiB2b2lkIHtcbiAgfVxuXG4gIC8vLyBDcmVhdGUgYSBqb2ludCB0byBjb25zdHJhaW4gYm9kaWVzIHRvZ2V0aGVyLiBObyByZWZlcmVuY2UgdG8gdGhlIGRlZmluaXRpb25cbiAgLy8vIGlzIHJldGFpbmVkLiBUaGlzIG1heSBjYXVzZSB0aGUgY29ubmVjdGVkIGJvZGllcyB0byBjZWFzZSBjb2xsaWRpbmcuXG4gIC8vLyBAd2FybmluZyBUaGlzIGZ1bmN0aW9uIGlzIGxvY2tlZCBkdXJpbmcgY2FsbGJhY2tzLlxuICBwdWJsaWMgQ3JlYXRlSm9pbnQoZGVmOiBiMklBcmVhSm9pbnREZWYpOiBiMkFyZWFKb2ludDtcbiAgcHVibGljIENyZWF0ZUpvaW50KGRlZjogYjJJRGlzdGFuY2VKb2ludERlZik6IGIyRGlzdGFuY2VKb2ludDtcbiAgcHVibGljIENyZWF0ZUpvaW50KGRlZjogYjJJRnJpY3Rpb25Kb2ludERlZik6IGIyRnJpY3Rpb25Kb2ludDtcbiAgcHVibGljIENyZWF0ZUpvaW50KGRlZjogYjJJR2VhckpvaW50RGVmKTogYjJHZWFySm9pbnQ7XG4gIHB1YmxpYyBDcmVhdGVKb2ludChkZWY6IGIySU1vdG9ySm9pbnREZWYpOiBiMk1vdG9ySm9pbnQ7XG4gIHB1YmxpYyBDcmVhdGVKb2ludChkZWY6IGIySU1vdXNlSm9pbnREZWYpOiBiMk1vdXNlSm9pbnQ7XG4gIHB1YmxpYyBDcmVhdGVKb2ludChkZWY6IGIySVByaXNtYXRpY0pvaW50RGVmKTogYjJQcmlzbWF0aWNKb2ludDtcbiAgcHVibGljIENyZWF0ZUpvaW50KGRlZjogYjJJUHVsbGV5Sm9pbnREZWYpOiBiMlB1bGxleUpvaW50O1xuICBwdWJsaWMgQ3JlYXRlSm9pbnQoZGVmOiBiMklSZXZvbHV0ZUpvaW50RGVmKTogYjJSZXZvbHV0ZUpvaW50O1xuICBwdWJsaWMgQ3JlYXRlSm9pbnQoZGVmOiBiMklXZWxkSm9pbnREZWYpOiBiMldlbGRKb2ludDtcbiAgcHVibGljIENyZWF0ZUpvaW50KGRlZjogYjJJV2hlZWxKb2ludERlZik6IGIyV2hlZWxKb2ludDtcbiAgcHVibGljIENyZWF0ZUpvaW50KGRlZjogYjJJSm9pbnREZWYpOiBiMkpvaW50IHtcbiAgICBpZiAodGhpcy5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBjb25zdCBqOiBiMkpvaW50ID0gYjJXb3JsZC5fSm9pbnRfQ3JlYXRlKGRlZik7XG5cbiAgICAvLyBDb25uZWN0IHRvIHRoZSB3b3JsZCBsaXN0LlxuICAgIGoubV9wcmV2ID0gbnVsbDtcbiAgICBqLm1fbmV4dCA9IHRoaXMubV9qb2ludExpc3Q7XG4gICAgaWYgKHRoaXMubV9qb2ludExpc3QpIHtcbiAgICAgIHRoaXMubV9qb2ludExpc3QubV9wcmV2ID0gajtcbiAgICB9XG4gICAgdGhpcy5tX2pvaW50TGlzdCA9IGo7XG4gICAgKyt0aGlzLm1fam9pbnRDb3VudDtcblxuICAgIC8vIENvbm5lY3QgdG8gdGhlIGJvZGllcycgZG91Ymx5IGxpbmtlZCBsaXN0cy5cbiAgICAvLyBqLm1fZWRnZUEub3RoZXIgPSBqLm1fYm9keUI7IC8vIGRvbmUgaW4gYjJKb2ludCBjb25zdHJ1Y3RvclxuICAgIGoubV9lZGdlQS5wcmV2ID0gbnVsbDtcbiAgICBqLm1fZWRnZUEubmV4dCA9IGoubV9ib2R5QS5tX2pvaW50TGlzdDtcbiAgICBpZiAoai5tX2JvZHlBLm1fam9pbnRMaXN0KSB7IGoubV9ib2R5QS5tX2pvaW50TGlzdC5wcmV2ID0gai5tX2VkZ2VBOyB9XG4gICAgai5tX2JvZHlBLm1fam9pbnRMaXN0ID0gai5tX2VkZ2VBO1xuXG4gICAgLy8gai5tX2VkZ2VCLm90aGVyID0gai5tX2JvZHlBOyAvLyBkb25lIGluIGIySm9pbnQgY29uc3RydWN0b3JcbiAgICBqLm1fZWRnZUIucHJldiA9IG51bGw7XG4gICAgai5tX2VkZ2VCLm5leHQgPSBqLm1fYm9keUIubV9qb2ludExpc3Q7XG4gICAgaWYgKGoubV9ib2R5Qi5tX2pvaW50TGlzdCkgeyBqLm1fYm9keUIubV9qb2ludExpc3QucHJldiA9IGoubV9lZGdlQjsgfVxuICAgIGoubV9ib2R5Qi5tX2pvaW50TGlzdCA9IGoubV9lZGdlQjtcblxuICAgIGNvbnN0IGJvZHlBOiBiMkJvZHkgPSBqLm1fYm9keUE7XG4gICAgY29uc3QgYm9keUI6IGIyQm9keSA9IGoubV9ib2R5QjtcbiAgICBjb25zdCBjb2xsaWRlQ29ubmVjdGVkOiBib29sZWFuID0gai5tX2NvbGxpZGVDb25uZWN0ZWQ7XG5cbiAgICAvLyBJZiB0aGUgam9pbnQgcHJldmVudHMgY29sbGlzaW9ucywgdGhlbiBmbGFnIGFueSBjb250YWN0cyBmb3IgZmlsdGVyaW5nLlxuICAgIGlmICghY29sbGlkZUNvbm5lY3RlZCkge1xuICAgICAgbGV0IGVkZ2U6IGIyQ29udGFjdEVkZ2UgfCBudWxsID0gYm9keUIuR2V0Q29udGFjdExpc3QoKTtcbiAgICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICAgIGlmIChlZGdlLm90aGVyID09PSBib2R5QSkge1xuICAgICAgICAgIC8vIEZsYWcgdGhlIGNvbnRhY3QgZm9yIGZpbHRlcmluZyBhdCB0aGUgbmV4dCB0aW1lIHN0ZXAgKHdoZXJlIGVpdGhlclxuICAgICAgICAgIC8vIGJvZHkgaXMgYXdha2UpLlxuICAgICAgICAgIGVkZ2UuY29udGFjdC5GbGFnRm9yRmlsdGVyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBlZGdlID0gZWRnZS5uZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdGU6IGNyZWF0aW5nIGEgam9pbnQgZG9lc24ndCB3YWtlIHRoZSBib2RpZXMuXG5cbiAgICByZXR1cm4gajtcbiAgfVxuXG4gIC8vLyBEZXN0cm95IGEgam9pbnQuIFRoaXMgbWF5IGNhdXNlIHRoZSBjb25uZWN0ZWQgYm9kaWVzIHRvIGJlZ2luIGNvbGxpZGluZy5cbiAgLy8vIEB3YXJuaW5nIFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gIHB1YmxpYyBEZXN0cm95Sm9pbnQoajogYjJKb2ludCk6IHZvaWQge1xuICAgIGlmICh0aGlzLklzTG9ja2VkKCkpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cblxuICAgIC8vIFJlbW92ZSBmcm9tIHRoZSBkb3VibHkgbGlua2VkIGxpc3QuXG4gICAgaWYgKGoubV9wcmV2KSB7XG4gICAgICBqLm1fcHJldi5tX25leHQgPSBqLm1fbmV4dDtcbiAgICB9XG5cbiAgICBpZiAoai5tX25leHQpIHtcbiAgICAgIGoubV9uZXh0Lm1fcHJldiA9IGoubV9wcmV2O1xuICAgIH1cblxuICAgIGlmIChqID09PSB0aGlzLm1fam9pbnRMaXN0KSB7XG4gICAgICB0aGlzLm1fam9pbnRMaXN0ID0gai5tX25leHQ7XG4gICAgfVxuXG4gICAgLy8gRGlzY29ubmVjdCBmcm9tIGlzbGFuZCBncmFwaC5cbiAgICBjb25zdCBib2R5QTogYjJCb2R5ID0gai5tX2JvZHlBO1xuICAgIGNvbnN0IGJvZHlCOiBiMkJvZHkgPSBqLm1fYm9keUI7XG4gICAgY29uc3QgY29sbGlkZUNvbm5lY3RlZDogYm9vbGVhbiA9IGoubV9jb2xsaWRlQ29ubmVjdGVkO1xuXG4gICAgLy8gV2FrZSB1cCBjb25uZWN0ZWQgYm9kaWVzLlxuICAgIGJvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIGJvZHlCLlNldEF3YWtlKHRydWUpO1xuXG4gICAgLy8gUmVtb3ZlIGZyb20gYm9keSAxLlxuICAgIGlmIChqLm1fZWRnZUEucHJldikge1xuICAgICAgai5tX2VkZ2VBLnByZXYubmV4dCA9IGoubV9lZGdlQS5uZXh0O1xuICAgIH1cblxuICAgIGlmIChqLm1fZWRnZUEubmV4dCkge1xuICAgICAgai5tX2VkZ2VBLm5leHQucHJldiA9IGoubV9lZGdlQS5wcmV2O1xuICAgIH1cblxuICAgIGlmIChqLm1fZWRnZUEgPT09IGJvZHlBLm1fam9pbnRMaXN0KSB7XG4gICAgICBib2R5QS5tX2pvaW50TGlzdCA9IGoubV9lZGdlQS5uZXh0O1xuICAgIH1cblxuICAgIGoubV9lZGdlQS5SZXNldCgpO1xuXG4gICAgLy8gUmVtb3ZlIGZyb20gYm9keSAyXG4gICAgaWYgKGoubV9lZGdlQi5wcmV2KSB7XG4gICAgICBqLm1fZWRnZUIucHJldi5uZXh0ID0gai5tX2VkZ2VCLm5leHQ7XG4gICAgfVxuXG4gICAgaWYgKGoubV9lZGdlQi5uZXh0KSB7XG4gICAgICBqLm1fZWRnZUIubmV4dC5wcmV2ID0gai5tX2VkZ2VCLnByZXY7XG4gICAgfVxuXG4gICAgaWYgKGoubV9lZGdlQiA9PT0gYm9keUIubV9qb2ludExpc3QpIHtcbiAgICAgIGJvZHlCLm1fam9pbnRMaXN0ID0gai5tX2VkZ2VCLm5leHQ7XG4gICAgfVxuXG4gICAgai5tX2VkZ2VCLlJlc2V0KCk7XG5cbiAgICBiMldvcmxkLl9Kb2ludF9EZXN0cm95KGopO1xuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9qb2ludENvdW50ID4gMCk7XG4gICAgLS10aGlzLm1fam9pbnRDb3VudDtcblxuICAgIC8vIElmIHRoZSBqb2ludCBwcmV2ZW50cyBjb2xsaXNpb25zLCB0aGVuIGZsYWcgYW55IGNvbnRhY3RzIGZvciBmaWx0ZXJpbmcuXG4gICAgaWYgKCFjb2xsaWRlQ29ubmVjdGVkKSB7XG4gICAgICBsZXQgZWRnZTogYjJDb250YWN0RWRnZSB8IG51bGwgPSBib2R5Qi5HZXRDb250YWN0TGlzdCgpO1xuICAgICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgICAgaWYgKGVkZ2Uub3RoZXIgPT09IGJvZHlBKSB7XG4gICAgICAgICAgLy8gRmxhZyB0aGUgY29udGFjdCBmb3IgZmlsdGVyaW5nIGF0IHRoZSBuZXh0IHRpbWUgc3RlcCAod2hlcmUgZWl0aGVyXG4gICAgICAgICAgLy8gYm9keSBpcyBhd2FrZSkuXG4gICAgICAgICAgZWRnZS5jb250YWN0LkZsYWdGb3JGaWx0ZXJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuXG4gIHB1YmxpYyBDcmVhdGVQYXJ0aWNsZVN5c3RlbShkZWY6IGIyUGFydGljbGVTeXN0ZW1EZWYpOiBiMlBhcnRpY2xlU3lzdGVtIHtcbiAgICBpZiAodGhpcy5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBjb25zdCBwID0gbmV3IGIyUGFydGljbGVTeXN0ZW0oZGVmLCB0aGlzKTtcblxuICAgIC8vIEFkZCB0byB3b3JsZCBkb3VibHkgbGlua2VkIGxpc3QuXG4gICAgcC5tX3ByZXYgPSBudWxsO1xuICAgIHAubV9uZXh0ID0gdGhpcy5tX3BhcnRpY2xlU3lzdGVtTGlzdDtcbiAgICBpZiAodGhpcy5tX3BhcnRpY2xlU3lzdGVtTGlzdCkge1xuICAgICAgdGhpcy5tX3BhcnRpY2xlU3lzdGVtTGlzdC5tX3ByZXYgPSBwO1xuICAgIH1cbiAgICB0aGlzLm1fcGFydGljbGVTeXN0ZW1MaXN0ID0gcDtcblxuICAgIHJldHVybiBwO1xuICB9XG5cbiAgcHVibGljIERlc3Ryb3lQYXJ0aWNsZVN5c3RlbShwOiBiMlBhcnRpY2xlU3lzdGVtKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuSXNMb2NrZWQoKSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuXG4gICAgLy8gUmVtb3ZlIHdvcmxkIHBhcnRpY2xlU3lzdGVtIGxpc3QuXG4gICAgaWYgKHAubV9wcmV2KSB7XG4gICAgICBwLm1fcHJldi5tX25leHQgPSBwLm1fbmV4dDtcbiAgICB9XG5cbiAgICBpZiAocC5tX25leHQpIHtcbiAgICAgIHAubV9uZXh0Lm1fcHJldiA9IHAubV9wcmV2O1xuICAgIH1cblxuICAgIGlmIChwID09PSB0aGlzLm1fcGFydGljbGVTeXN0ZW1MaXN0KSB7XG4gICAgICB0aGlzLm1fcGFydGljbGVTeXN0ZW1MaXN0ID0gcC5tX25leHQ7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIENhbGN1bGF0ZVJlYXNvbmFibGVQYXJ0aWNsZUl0ZXJhdGlvbnModGltZVN0ZXA6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHRoaXMubV9wYXJ0aWNsZVN5c3RlbUxpc3QgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIEdldFNtYWxsZXN0UmFkaXVzKHdvcmxkOiBiMldvcmxkKTogbnVtYmVyIHtcbiAgICAgIGxldCBzbWFsbGVzdFJhZGl1cyA9IGIyX21heEZsb2F0O1xuICAgICAgZm9yIChsZXQgc3lzdGVtID0gd29ybGQuR2V0UGFydGljbGVTeXN0ZW1MaXN0KCk7IHN5c3RlbSAhPT0gbnVsbDsgc3lzdGVtID0gc3lzdGVtLm1fbmV4dCkge1xuICAgICAgICBzbWFsbGVzdFJhZGl1cyA9IGIyTWluKHNtYWxsZXN0UmFkaXVzLCBzeXN0ZW0uR2V0UmFkaXVzKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNtYWxsZXN0UmFkaXVzO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgc21hbGxlc3QgcmFkaXVzLCBzaW5jZSB0aGF0IHJlcHJlc2VudHMgdGhlIHdvcnN0LWNhc2UuXG4gICAgcmV0dXJuIGIyQ2FsY3VsYXRlUGFydGljbGVJdGVyYXRpb25zKHRoaXMubV9ncmF2aXR5Lkxlbmd0aCgpLCBHZXRTbWFsbGVzdFJhZGl1cyh0aGlzKSwgdGltZVN0ZXApO1xuICB9XG5cbiAgLy8gI2VuZGlmXG5cbiAgLy8vIFRha2UgYSB0aW1lIHN0ZXAuIFRoaXMgcGVyZm9ybXMgY29sbGlzaW9uIGRldGVjdGlvbiwgaW50ZWdyYXRpb24sXG4gIC8vLyBhbmQgY29uc3RyYWludCBzb2x1dGlvbi5cbiAgLy8vIEBwYXJhbSB0aW1lU3RlcCB0aGUgYW1vdW50IG9mIHRpbWUgdG8gc2ltdWxhdGUsIHRoaXMgc2hvdWxkIG5vdCB2YXJ5LlxuICAvLy8gQHBhcmFtIHZlbG9jaXR5SXRlcmF0aW9ucyBmb3IgdGhlIHZlbG9jaXR5IGNvbnN0cmFpbnQgc29sdmVyLlxuICAvLy8gQHBhcmFtIHBvc2l0aW9uSXRlcmF0aW9ucyBmb3IgdGhlIHBvc2l0aW9uIGNvbnN0cmFpbnQgc29sdmVyLlxuICBwcml2YXRlIHN0YXRpYyBTdGVwX3Nfc3RlcCA9IG5ldyBiMlRpbWVTdGVwKCk7XG4gIHByaXZhdGUgc3RhdGljIFN0ZXBfc19zdGVwVGltZXIgPSBuZXcgYjJUaW1lcigpO1xuICBwcml2YXRlIHN0YXRpYyBTdGVwX3NfdGltZXIgPSBuZXcgYjJUaW1lcigpO1xuICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gIHB1YmxpYyBTdGVwKGR0OiBudW1iZXIsIHZlbG9jaXR5SXRlcmF0aW9uczogbnVtYmVyLCBwb3NpdGlvbkl0ZXJhdGlvbnM6IG51bWJlciwgcGFydGljbGVJdGVyYXRpb25zOiBudW1iZXIgPSB0aGlzLkNhbGN1bGF0ZVJlYXNvbmFibGVQYXJ0aWNsZUl0ZXJhdGlvbnMoZHQpKTogdm9pZCB7XG4gICAgLy8gI2Vsc2VcbiAgICAvLyBwdWJsaWMgU3RlcChkdDogbnVtYmVyLCB2ZWxvY2l0eUl0ZXJhdGlvbnM6IG51bWJlciwgcG9zaXRpb25JdGVyYXRpb25zOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyAjZW5kaWZcbiAgICBjb25zdCBzdGVwVGltZXI6IGIyVGltZXIgPSBiMldvcmxkLlN0ZXBfc19zdGVwVGltZXIuUmVzZXQoKTtcblxuICAgIC8vIElmIG5ldyBmaXh0dXJlcyB3ZXJlIGFkZGVkLCB3ZSBuZWVkIHRvIGZpbmQgdGhlIG5ldyBjb250YWN0cy5cbiAgICBpZiAodGhpcy5tX25ld0NvbnRhY3RzKSB7XG4gICAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIuRmluZE5ld0NvbnRhY3RzKCk7XG4gICAgICB0aGlzLm1fbmV3Q29udGFjdHMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLm1fbG9ja2VkID0gdHJ1ZTtcblxuICAgIGNvbnN0IHN0ZXA6IGIyVGltZVN0ZXAgPSBiMldvcmxkLlN0ZXBfc19zdGVwO1xuICAgIHN0ZXAuZHQgPSBkdDtcbiAgICBzdGVwLnZlbG9jaXR5SXRlcmF0aW9ucyA9IHZlbG9jaXR5SXRlcmF0aW9ucztcbiAgICBzdGVwLnBvc2l0aW9uSXRlcmF0aW9ucyA9IHBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gICAgc3RlcC5wYXJ0aWNsZUl0ZXJhdGlvbnMgPSBwYXJ0aWNsZUl0ZXJhdGlvbnM7XG4gICAgLy8gI2VuZGlmXG4gICAgaWYgKGR0ID4gMCkge1xuICAgICAgc3RlcC5pbnZfZHQgPSAxIC8gZHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ZXAuaW52X2R0ID0gMDtcbiAgICB9XG5cbiAgICBzdGVwLmR0UmF0aW8gPSB0aGlzLm1faW52X2R0MCAqIGR0O1xuXG4gICAgc3RlcC53YXJtU3RhcnRpbmcgPSB0aGlzLm1fd2FybVN0YXJ0aW5nO1xuXG4gICAgLy8gVXBkYXRlIGNvbnRhY3RzLiBUaGlzIGlzIHdoZXJlIHNvbWUgY29udGFjdHMgYXJlIGRlc3Ryb3llZC5cbiAgICBjb25zdCB0aW1lcjogYjJUaW1lciA9IGIyV29ybGQuU3RlcF9zX3RpbWVyLlJlc2V0KCk7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLkNvbGxpZGUoKTtcbiAgICB0aGlzLm1fcHJvZmlsZS5jb2xsaWRlID0gdGltZXIuR2V0TWlsbGlzZWNvbmRzKCk7XG5cbiAgICAvLyBJbnRlZ3JhdGUgdmVsb2NpdGllcywgc29sdmUgdmVsb2NpdHkgY29uc3RyYWludHMsIGFuZCBpbnRlZ3JhdGUgcG9zaXRpb25zLlxuICAgIGlmICh0aGlzLm1fc3RlcENvbXBsZXRlICYmIHN0ZXAuZHQgPiAwKSB7XG4gICAgICBjb25zdCB0aW1lcjogYjJUaW1lciA9IGIyV29ybGQuU3RlcF9zX3RpbWVyLlJlc2V0KCk7XG4gICAgICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gICAgICBmb3IgKGxldCBwID0gdGhpcy5tX3BhcnRpY2xlU3lzdGVtTGlzdDsgcDsgcCA9IHAubV9uZXh0KSB7XG4gICAgICAgIHAuU29sdmUoc3RlcCk7IC8vIFBhcnRpY2xlIFNpbXVsYXRpb25cbiAgICAgIH1cbiAgICAgIC8vICNlbmRpZlxuICAgICAgdGhpcy5Tb2x2ZShzdGVwKTtcbiAgICAgIHRoaXMubV9wcm9maWxlLnNvbHZlID0gdGltZXIuR2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIFRPSSBldmVudHMuXG4gICAgaWYgKHRoaXMubV9jb250aW51b3VzUGh5c2ljcyAmJiBzdGVwLmR0ID4gMCkge1xuICAgICAgY29uc3QgdGltZXI6IGIyVGltZXIgPSBiMldvcmxkLlN0ZXBfc190aW1lci5SZXNldCgpO1xuICAgICAgdGhpcy5Tb2x2ZVRPSShzdGVwKTtcbiAgICAgIHRoaXMubV9wcm9maWxlLnNvbHZlVE9JID0gdGltZXIuR2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgfVxuXG4gICAgaWYgKHN0ZXAuZHQgPiAwKSB7XG4gICAgICB0aGlzLm1faW52X2R0MCA9IHN0ZXAuaW52X2R0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1fY2xlYXJGb3JjZXMpIHtcbiAgICAgIHRoaXMuQ2xlYXJGb3JjZXMoKTtcbiAgICB9XG5cbiAgICB0aGlzLm1fbG9ja2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLm1fcHJvZmlsZS5zdGVwID0gc3RlcFRpbWVyLkdldE1pbGxpc2Vjb25kcygpO1xuICB9XG5cbiAgLy8vIE1hbnVhbGx5IGNsZWFyIHRoZSBmb3JjZSBidWZmZXIgb24gYWxsIGJvZGllcy4gQnkgZGVmYXVsdCwgZm9yY2VzIGFyZSBjbGVhcmVkIGF1dG9tYXRpY2FsbHlcbiAgLy8vIGFmdGVyIGVhY2ggY2FsbCB0byBTdGVwLiBUaGUgZGVmYXVsdCBiZWhhdmlvciBpcyBtb2RpZmllZCBieSBjYWxsaW5nIFNldEF1dG9DbGVhckZvcmNlcy5cbiAgLy8vIFRoZSBwdXJwb3NlIG9mIHRoaXMgZnVuY3Rpb24gaXMgdG8gc3VwcG9ydCBzdWItc3RlcHBpbmcuIFN1Yi1zdGVwcGluZyBpcyBvZnRlbiB1c2VkIHRvIG1haW50YWluXG4gIC8vLyBhIGZpeGVkIHNpemVkIHRpbWUgc3RlcCB1bmRlciBhIHZhcmlhYmxlIGZyYW1lLXJhdGUuXG4gIC8vLyBXaGVuIHlvdSBwZXJmb3JtIHN1Yi1zdGVwcGluZyB5b3Ugd2lsbCBkaXNhYmxlIGF1dG8gY2xlYXJpbmcgb2YgZm9yY2VzIGFuZCBpbnN0ZWFkIGNhbGxcbiAgLy8vIENsZWFyRm9yY2VzIGFmdGVyIGFsbCBzdWItc3RlcHMgYXJlIGNvbXBsZXRlIGluIG9uZSBwYXNzIG9mIHlvdXIgZ2FtZSBsb29wLlxuICAvLy8gQHNlZSBTZXRBdXRvQ2xlYXJGb3JjZXNcbiAgcHVibGljIENsZWFyRm9yY2VzKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGJvZHkgPSB0aGlzLm1fYm9keUxpc3Q7IGJvZHk7IGJvZHkgPSBib2R5Lm1fbmV4dCkge1xuICAgICAgYm9keS5tX2ZvcmNlLlNldFplcm8oKTtcbiAgICAgIGJvZHkubV90b3JxdWUgPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcblxuICBwdWJsaWMgRHJhd1BhcnRpY2xlU3lzdGVtKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fZGVidWdEcmF3ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcnRpY2xlQ291bnQgPSBzeXN0ZW0uR2V0UGFydGljbGVDb3VudCgpO1xuICAgIGlmIChwYXJ0aWNsZUNvdW50KSB7XG4gICAgICBjb25zdCByYWRpdXMgPSBzeXN0ZW0uR2V0UmFkaXVzKCk7XG4gICAgICBjb25zdCBwb3NpdGlvbkJ1ZmZlciA9IHN5c3RlbS5HZXRQb3NpdGlvbkJ1ZmZlcigpO1xuICAgICAgaWYgKHN5c3RlbS5tX2NvbG9yQnVmZmVyLmRhdGEpIHtcbiAgICAgICAgY29uc3QgY29sb3JCdWZmZXIgPSBzeXN0ZW0uR2V0Q29sb3JCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3UGFydGljbGVzKHBvc2l0aW9uQnVmZmVyLCByYWRpdXMsIGNvbG9yQnVmZmVyLCBwYXJ0aWNsZUNvdW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1BhcnRpY2xlcyhwb3NpdGlvbkJ1ZmZlciwgcmFkaXVzLCBudWxsLCBwYXJ0aWNsZUNvdW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAjZW5kaWZcblxuICAvLy8gQ2FsbCB0aGlzIHRvIGRyYXcgc2hhcGVzIGFuZCBvdGhlciBkZWJ1ZyBkcmF3IGRhdGEuXG4gIHByaXZhdGUgc3RhdGljIERlYnVnRHJhd19zX2NvbG9yID0gbmV3IGIyQ29sb3IoMCwgMCwgMCk7XG4gIHByaXZhdGUgc3RhdGljIERlYnVnRHJhd19zX3ZzID0gYjJWZWMyLk1ha2VBcnJheSg0KTtcbiAgcHJpdmF0ZSBzdGF0aWMgRGVidWdEcmF3X3NfeGYgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgcHVibGljIERlYnVnRHJhdygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX2RlYnVnRHJhdyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZsYWdzOiBudW1iZXIgPSB0aGlzLm1fZGVidWdEcmF3LkdldEZsYWdzKCk7XG4gICAgY29uc3QgY29sb3I6IGIyQ29sb3IgPSBiMldvcmxkLkRlYnVnRHJhd19zX2NvbG9yLlNldFJHQigwLCAwLCAwKTtcblxuICAgIGlmIChmbGFncyAmIGIyRHJhd0ZsYWdzLmVfc2hhcGVCaXQpIHtcbiAgICAgIGZvciAobGV0IGI6IGIyQm9keSB8IG51bGwgPSB0aGlzLm1fYm9keUxpc3Q7IGI7IGIgPSBiLm1fbmV4dCkge1xuICAgICAgICBjb25zdCB4ZjogYjJUcmFuc2Zvcm0gPSBiLm1feGY7XG5cbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5QdXNoVHJhbnNmb3JtKHhmKTtcblxuICAgICAgICBmb3IgKGxldCBmOiBiMkZpeHR1cmUgfCBudWxsID0gYi5HZXRGaXh0dXJlTGlzdCgpOyBmOyBmID0gZi5tX25leHQpIHtcbiAgICAgICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHkgJiYgYi5tX21hc3MgPT09IDAuMCkge1xuICAgICAgICAgICAgLy8gQmFkIGJvZHlcbiAgICAgICAgICAgIHRoaXMuRHJhd1NoYXBlKGYsIG5ldyBiMkNvbG9yKDEuMCwgMC4wLCAwLjApKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFiLklzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICBjb2xvci5TZXRSR0IoMC41LCAwLjUsIDAuMyk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShmLCBjb2xvcik7XG4gICAgICAgICAgfSBlbHNlIGlmIChiLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgICBjb2xvci5TZXRSR0IoMC41LCAwLjksIDAuNSk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShmLCBjb2xvcik7XG4gICAgICAgICAgfSBlbHNlIGlmIChiLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9raW5lbWF0aWNCb2R5KSB7XG4gICAgICAgICAgICBjb2xvci5TZXRSR0IoMC41LCAwLjUsIDAuOSk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShmLCBjb2xvcik7XG4gICAgICAgICAgfSBlbHNlIGlmICghYi5Jc0F3YWtlKCkpIHtcbiAgICAgICAgICAgIGNvbG9yLlNldFJHQigwLjYsIDAuNiwgMC42KTtcbiAgICAgICAgICAgIHRoaXMuRHJhd1NoYXBlKGYsIGNvbG9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3IuU2V0UkdCKDAuOSwgMC43LCAwLjcpO1xuICAgICAgICAgICAgdGhpcy5EcmF3U2hhcGUoZiwgY29sb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuUG9wVHJhbnNmb3JtKHhmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gICAgaWYgKGZsYWdzICYgYjJEcmF3RmxhZ3MuZV9wYXJ0aWNsZUJpdCkge1xuICAgICAgZm9yIChsZXQgcCA9IHRoaXMubV9wYXJ0aWNsZVN5c3RlbUxpc3Q7IHA7IHAgPSBwLm1fbmV4dCkge1xuICAgICAgICB0aGlzLkRyYXdQYXJ0aWNsZVN5c3RlbShwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gI2VuZGlmXG5cbiAgICBpZiAoZmxhZ3MgJiBiMkRyYXdGbGFncy5lX2pvaW50Qml0KSB7XG4gICAgICBmb3IgKGxldCBqOiBiMkpvaW50IHwgbnVsbCA9IHRoaXMubV9qb2ludExpc3Q7IGo7IGogPSBqLm1fbmV4dCkge1xuICAgICAgICBqLkRyYXcodGhpcy5tX2RlYnVnRHJhdyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZsYWdzICYgYjJEcmF3RmxhZ3MuZV9wYWlyQml0KSB7XG4gICAgICBjb2xvci5TZXRSR0IoMC4zLCAwLjksIDAuOSk7XG4gICAgICBmb3IgKGxldCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3Q7IGNvbnRhY3Q7IGNvbnRhY3QgPSBjb250YWN0Lm1fbmV4dCkge1xuICAgICAgICBjb25zdCBmaXh0dXJlQSA9IGNvbnRhY3QuR2V0Rml4dHVyZUEoKTtcbiAgICAgICAgY29uc3QgZml4dHVyZUIgPSBjb250YWN0LkdldEZpeHR1cmVCKCk7XG4gICAgICAgIGNvbnN0IGluZGV4QSA9IGNvbnRhY3QuR2V0Q2hpbGRJbmRleEEoKTtcbiAgICAgICAgY29uc3QgaW5kZXhCID0gY29udGFjdC5HZXRDaGlsZEluZGV4QigpO1xuICAgICAgICBjb25zdCBjQSA9IGZpeHR1cmVBLkdldEFBQkIoaW5kZXhBKS5HZXRDZW50ZXIoKTtcbiAgICAgICAgY29uc3QgY0IgPSBmaXh0dXJlQi5HZXRBQUJCKGluZGV4QikuR2V0Q2VudGVyKCk7XG5cbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudChjQSwgY0IsIGNvbG9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZmxhZ3MgJiBiMkRyYXdGbGFncy5lX2FhYmJCaXQpIHtcbiAgICAgIGNvbG9yLlNldFJHQigwLjksIDAuMywgMC45KTtcbiAgICAgIGNvbnN0IHZzOiBiMlZlYzJbXSA9IGIyV29ybGQuRGVidWdEcmF3X3NfdnM7XG5cbiAgICAgIGZvciAobGV0IGI6IGIyQm9keSB8IG51bGwgPSB0aGlzLm1fYm9keUxpc3Q7IGI7IGIgPSBiLm1fbmV4dCkge1xuICAgICAgICBpZiAoIWIuSXNFbmFibGVkKCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGY6IGIyRml4dHVyZSB8IG51bGwgPSBiLkdldEZpeHR1cmVMaXN0KCk7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBmLm1fcHJveHlDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm94eTogYjJGaXh0dXJlUHJveHkgPSBmLm1fcHJveGllc1tpXTtcblxuICAgICAgICAgICAgY29uc3QgYWFiYjogYjJBQUJCID0gcHJveHkudHJlZU5vZGUuYWFiYjtcbiAgICAgICAgICAgIHZzWzBdLlNldChhYWJiLmxvd2VyQm91bmQueCwgYWFiYi5sb3dlckJvdW5kLnkpO1xuICAgICAgICAgICAgdnNbMV0uU2V0KGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSk7XG4gICAgICAgICAgICB2c1syXS5TZXQoYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICAgICAgICAgIHZzWzNdLlNldChhYWJiLmxvd2VyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLnkpO1xuXG4gICAgICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdQb2x5Z29uKHZzLCA0LCBjb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZsYWdzICYgYjJEcmF3RmxhZ3MuZV9jZW50ZXJPZk1hc3NCaXQpIHtcbiAgICAgIGZvciAobGV0IGI6IGIyQm9keSB8IG51bGwgPSB0aGlzLm1fYm9keUxpc3Q7IGI7IGIgPSBiLm1fbmV4dCkge1xuICAgICAgICBjb25zdCB4ZjogYjJUcmFuc2Zvcm0gPSBiMldvcmxkLkRlYnVnRHJhd19zX3hmO1xuICAgICAgICB4Zi5xLkNvcHkoYi5tX3hmLnEpO1xuICAgICAgICB4Zi5wLkNvcHkoYi5HZXRXb3JsZENlbnRlcigpKTtcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3VHJhbnNmb3JtKHhmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjaWYgQjJfRU5BQkxFX0NPTlRST0xMRVJcbiAgICAvLyBAc2VlIGIyQ29udHJvbGxlciBsaXN0XG4gICAgaWYgKGZsYWdzICYgYjJEcmF3RmxhZ3MuZV9jb250cm9sbGVyQml0KSB7XG4gICAgICBmb3IgKGxldCBjID0gdGhpcy5tX2NvbnRyb2xsZXJMaXN0OyBjOyBjID0gYy5tX25leHQpIHtcbiAgICAgICAgYy5EcmF3KHRoaXMubV9kZWJ1Z0RyYXcpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAjZW5kaWZcbiAgfVxuXG4gIC8vLyBRdWVyeSB0aGUgd29ybGQgZm9yIGFsbCBmaXh0dXJlcyB0aGF0IHBvdGVudGlhbGx5IG92ZXJsYXAgdGhlXG4gIC8vLyBwcm92aWRlZCBBQUJCLlxuICAvLy8gQHBhcmFtIGNhbGxiYWNrIGEgdXNlciBpbXBsZW1lbnRlZCBjYWxsYmFjayBjbGFzcy5cbiAgLy8vIEBwYXJhbSBhYWJiIHRoZSBxdWVyeSBib3guXG4gIHB1YmxpYyBRdWVyeUFBQkIoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjaywgYWFiYjogYjJBQUJCKTogdm9pZDtcbiAgcHVibGljIFF1ZXJ5QUFCQihhYWJiOiBiMkFBQkIsIGZuOiBiMlF1ZXJ5Q2FsbGJhY2tGdW5jdGlvbik6IHZvaWQ7XG4gIHB1YmxpYyBRdWVyeUFBQkIoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoYXJnc1swXSBpbnN0YW5jZW9mIGIyUXVlcnlDYWxsYmFjaykge1xuICAgICAgdGhpcy5fUXVlcnlBQUJCKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9RdWVyeUFBQkIobnVsbCwgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfVxuICB9XG4gIHByaXZhdGUgX1F1ZXJ5QUFCQihjYWxsYmFjazogYjJRdWVyeUNhbGxiYWNrIHwgbnVsbCwgYWFiYjogYjJBQUJCLCBmbj86IGIyUXVlcnlDYWxsYmFja0Z1bmN0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5RdWVyeShhYWJiLCAocHJveHk6IGIyVHJlZU5vZGU8YjJGaXh0dXJlUHJveHk+KTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBmaXh0dXJlX3Byb3h5OiBiMkZpeHR1cmVQcm94eSA9IHByb3h5LnVzZXJEYXRhO1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZpeHR1cmVfcHJveHkgaW5zdGFuY2VvZiBiMkZpeHR1cmVQcm94eSk7XG4gICAgICBjb25zdCBmaXh0dXJlOiBiMkZpeHR1cmUgPSBmaXh0dXJlX3Byb3h5LmZpeHR1cmU7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLlJlcG9ydEZpeHR1cmUoZml4dHVyZSk7XG4gICAgICB9IGVsc2UgaWYgKGZuKSB7XG4gICAgICAgIHJldHVybiBmbihmaXh0dXJlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICBpZiAoY2FsbGJhY2sgaW5zdGFuY2VvZiBiMlF1ZXJ5Q2FsbGJhY2spIHtcbiAgICAgIGZvciAobGV0IHAgPSB0aGlzLm1fcGFydGljbGVTeXN0ZW1MaXN0OyBwOyBwID0gcC5tX25leHQpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrLlNob3VsZFF1ZXJ5UGFydGljbGVTeXN0ZW0ocCkpIHtcbiAgICAgICAgICBwLlF1ZXJ5QUFCQihjYWxsYmFjaywgYWFiYik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gI2VuZGlmXG4gIH1cblxuICBwdWJsaWMgUXVlcnlBbGxBQUJCKGFhYmI6IGIyQUFCQiwgb3V0OiBiMkZpeHR1cmVbXSA9IFtdKTogYjJGaXh0dXJlW10ge1xuICAgIHRoaXMuUXVlcnlBQUJCKGFhYmIsIChmaXh0dXJlOiBiMkZpeHR1cmUpOiBib29sZWFuID0+IHsgb3V0LnB1c2goZml4dHVyZSk7IHJldHVybiB0cnVlOyB9KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLy8vIFF1ZXJ5IHRoZSB3b3JsZCBmb3IgYWxsIGZpeHR1cmVzIHRoYXQgcG90ZW50aWFsbHkgb3ZlcmxhcCB0aGVcbiAgLy8vIHByb3ZpZGVkIHBvaW50LlxuICAvLy8gQHBhcmFtIGNhbGxiYWNrIGEgdXNlciBpbXBsZW1lbnRlZCBjYWxsYmFjayBjbGFzcy5cbiAgLy8vIEBwYXJhbSBwb2ludCB0aGUgcXVlcnkgcG9pbnQuXG4gIHB1YmxpYyBRdWVyeVBvaW50QUFCQihjYWxsYmFjazogYjJRdWVyeUNhbGxiYWNrLCBwb2ludDogWFkpOiB2b2lkO1xuICBwdWJsaWMgUXVlcnlQb2ludEFBQkIocG9pbnQ6IFhZLCBmbjogYjJRdWVyeUNhbGxiYWNrRnVuY3Rpb24pOiB2b2lkO1xuICBwdWJsaWMgUXVlcnlQb2ludEFBQkIoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoYXJnc1swXSBpbnN0YW5jZW9mIGIyUXVlcnlDYWxsYmFjaykge1xuICAgICAgdGhpcy5fUXVlcnlQb2ludEFBQkIoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX1F1ZXJ5UG9pbnRBQUJCKG51bGwsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIF9RdWVyeVBvaW50QUFCQihjYWxsYmFjazogYjJRdWVyeUNhbGxiYWNrIHwgbnVsbCwgcG9pbnQ6IFhZLCBmbj86IGIyUXVlcnlDYWxsYmFja0Z1bmN0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5RdWVyeVBvaW50KHBvaW50LCAocHJveHk6IGIyVHJlZU5vZGU8YjJGaXh0dXJlUHJveHk+KTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBmaXh0dXJlX3Byb3h5OiBiMkZpeHR1cmVQcm94eSA9IHByb3h5LnVzZXJEYXRhO1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZpeHR1cmVfcHJveHkgaW5zdGFuY2VvZiBiMkZpeHR1cmVQcm94eSk7XG4gICAgICBjb25zdCBmaXh0dXJlOiBiMkZpeHR1cmUgPSBmaXh0dXJlX3Byb3h5LmZpeHR1cmU7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLlJlcG9ydEZpeHR1cmUoZml4dHVyZSk7XG4gICAgICB9IGVsc2UgaWYgKGZuKSB7XG4gICAgICAgIHJldHVybiBmbihmaXh0dXJlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICBpZiAoY2FsbGJhY2sgaW5zdGFuY2VvZiBiMlF1ZXJ5Q2FsbGJhY2spIHtcbiAgICAgIGZvciAobGV0IHAgPSB0aGlzLm1fcGFydGljbGVTeXN0ZW1MaXN0OyBwOyBwID0gcC5tX25leHQpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrLlNob3VsZFF1ZXJ5UGFydGljbGVTeXN0ZW0ocCkpIHtcbiAgICAgICAgICBwLlF1ZXJ5UG9pbnRBQUJCKGNhbGxiYWNrLCBwb2ludCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gI2VuZGlmXG4gIH1cblxuICBwdWJsaWMgUXVlcnlBbGxQb2ludEFBQkIocG9pbnQ6IFhZLCBvdXQ6IGIyRml4dHVyZVtdID0gW10pOiBiMkZpeHR1cmVbXSB7XG4gICAgdGhpcy5RdWVyeVBvaW50QUFCQihwb2ludCwgKGZpeHR1cmU6IGIyRml4dHVyZSk6IGJvb2xlYW4gPT4geyBvdXQucHVzaChmaXh0dXJlKTsgcmV0dXJuIHRydWU7IH0pO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwdWJsaWMgUXVlcnlGaXh0dXJlU2hhcGUoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjaywgc2hhcGU6IGIyU2hhcGUsIGluZGV4OiBudW1iZXIsIHRyYW5zZm9ybTogYjJUcmFuc2Zvcm0pOiB2b2lkO1xuICBwdWJsaWMgUXVlcnlGaXh0dXJlU2hhcGUoc2hhcGU6IGIyU2hhcGUsIGluZGV4OiBudW1iZXIsIHRyYW5zZm9ybTogYjJUcmFuc2Zvcm0sIGZuOiBiMlF1ZXJ5Q2FsbGJhY2tGdW5jdGlvbik6IHZvaWQ7XG4gIHB1YmxpYyBRdWVyeUZpeHR1cmVTaGFwZSguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgYjJRdWVyeUNhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9RdWVyeUZpeHR1cmVTaGFwZShhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fUXVlcnlGaXh0dXJlU2hhcGUobnVsbCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gICAgfVxuICB9XG4gIHByaXZhdGUgc3RhdGljIFF1ZXJ5Rml4dHVyZVNoYXBlX3NfYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgcHJpdmF0ZSBfUXVlcnlGaXh0dXJlU2hhcGUoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjayB8IG51bGwsIHNoYXBlOiBiMlNoYXBlLCBpbmRleDogbnVtYmVyLCB0cmFuc2Zvcm06IGIyVHJhbnNmb3JtLCBmbj86IGIyUXVlcnlDYWxsYmFja0Z1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgYWFiYjogYjJBQUJCID0gYjJXb3JsZC5RdWVyeUZpeHR1cmVTaGFwZV9zX2FhYmI7XG4gICAgc2hhcGUuQ29tcHV0ZUFBQkIoYWFiYiwgdHJhbnNmb3JtLCBpbmRleCk7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5RdWVyeShhYWJiLCAocHJveHk6IGIyVHJlZU5vZGU8YjJGaXh0dXJlUHJveHk+KTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBmaXh0dXJlX3Byb3h5OiBiMkZpeHR1cmVQcm94eSA9IHByb3h5LnVzZXJEYXRhO1xuICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZpeHR1cmVfcHJveHkgaW5zdGFuY2VvZiBiMkZpeHR1cmVQcm94eSk7XG4gICAgICBjb25zdCBmaXh0dXJlOiBiMkZpeHR1cmUgPSBmaXh0dXJlX3Byb3h5LmZpeHR1cmU7XG4gICAgICBpZiAoYjJUZXN0T3ZlcmxhcFNoYXBlKHNoYXBlLCBpbmRleCwgZml4dHVyZS5HZXRTaGFwZSgpLCBmaXh0dXJlX3Byb3h5LmNoaWxkSW5kZXgsIHRyYW5zZm9ybSwgZml4dHVyZS5HZXRCb2R5KCkuR2V0VHJhbnNmb3JtKCkpKSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5SZXBvcnRGaXh0dXJlKGZpeHR1cmUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZuKSB7XG4gICAgICAgICAgcmV0dXJuIGZuKGZpeHR1cmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gICAgaWYgKGNhbGxiYWNrIGluc3RhbmNlb2YgYjJRdWVyeUNhbGxiYWNrKSB7XG4gICAgICBmb3IgKGxldCBwID0gdGhpcy5tX3BhcnRpY2xlU3lzdGVtTGlzdDsgcDsgcCA9IHAubV9uZXh0KSB7XG4gICAgICAgIGlmIChjYWxsYmFjay5TaG91bGRRdWVyeVBhcnRpY2xlU3lzdGVtKHApKSB7XG4gICAgICAgICAgcC5RdWVyeUFBQkIoY2FsbGJhY2ssIGFhYmIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vICNlbmRpZlxuICB9XG5cbiAgcHVibGljIFF1ZXJ5QWxsRml4dHVyZVNoYXBlKHNoYXBlOiBiMlNoYXBlLCBpbmRleDogbnVtYmVyLCB0cmFuc2Zvcm06IGIyVHJhbnNmb3JtLCBvdXQ6IGIyRml4dHVyZVtdID0gW10pOiBiMkZpeHR1cmVbXSB7XG4gICAgdGhpcy5RdWVyeUZpeHR1cmVTaGFwZShzaGFwZSwgaW5kZXgsIHRyYW5zZm9ybSwgKGZpeHR1cmU6IGIyRml4dHVyZSk6IGJvb2xlYW4gPT4geyBvdXQucHVzaChmaXh0dXJlKTsgcmV0dXJuIHRydWU7IH0pO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwdWJsaWMgUXVlcnlGaXh0dXJlUG9pbnQoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjaywgcG9pbnQ6IFhZKTogdm9pZDtcbiAgcHVibGljIFF1ZXJ5Rml4dHVyZVBvaW50KHBvaW50OiBYWSwgZm46IGIyUXVlcnlDYWxsYmFja0Z1bmN0aW9uKTogdm9pZDtcbiAgcHVibGljIFF1ZXJ5Rml4dHVyZVBvaW50KC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBiMlF1ZXJ5Q2FsbGJhY2spIHtcbiAgICAgIHRoaXMuX1F1ZXJ5Rml4dHVyZVBvaW50KGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9RdWVyeUZpeHR1cmVQb2ludChudWxsLCBhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBfUXVlcnlGaXh0dXJlUG9pbnQoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjayB8IG51bGwsIHBvaW50OiBYWSwgZm4/OiBiMlF1ZXJ5Q2FsbGJhY2tGdW5jdGlvbik6IHZvaWQge1xuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2UuUXVlcnlQb2ludChwb2ludCwgKHByb3h5OiBiMlRyZWVOb2RlPGIyRml4dHVyZVByb3h5Pik6IGJvb2xlYW4gPT4ge1xuICAgICAgY29uc3QgZml4dHVyZV9wcm94eTogYjJGaXh0dXJlUHJveHkgPSBwcm94eS51c2VyRGF0YTtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmaXh0dXJlX3Byb3h5IGluc3RhbmNlb2YgYjJGaXh0dXJlUHJveHkpO1xuICAgICAgY29uc3QgZml4dHVyZTogYjJGaXh0dXJlID0gZml4dHVyZV9wcm94eS5maXh0dXJlO1xuICAgICAgaWYgKGZpeHR1cmUuVGVzdFBvaW50KHBvaW50KSkge1xuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suUmVwb3J0Rml4dHVyZShmaXh0dXJlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmbikge1xuICAgICAgICAgIHJldHVybiBmbihmaXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgZm9yIChsZXQgcCA9IHRoaXMubV9wYXJ0aWNsZVN5c3RlbUxpc3Q7IHA7IHAgPSBwLm1fbmV4dCkge1xuICAgICAgICBpZiAoY2FsbGJhY2suU2hvdWxkUXVlcnlQYXJ0aWNsZVN5c3RlbShwKSkge1xuICAgICAgICAgIHAuUXVlcnlQb2ludEFBQkIoY2FsbGJhY2ssIHBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyAjZW5kaWZcbiAgfVxuXG4gIHB1YmxpYyBRdWVyeUFsbEZpeHR1cmVQb2ludChwb2ludDogWFksIG91dDogYjJGaXh0dXJlW10gPSBbXSk6IGIyRml4dHVyZVtdIHtcbiAgICB0aGlzLlF1ZXJ5Rml4dHVyZVBvaW50KHBvaW50LCAoZml4dHVyZTogYjJGaXh0dXJlKTogYm9vbGVhbiA9PiB7IG91dC5wdXNoKGZpeHR1cmUpOyByZXR1cm4gdHJ1ZTsgfSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8vLyBSYXktY2FzdCB0aGUgd29ybGQgZm9yIGFsbCBmaXh0dXJlcyBpbiB0aGUgcGF0aCBvZiB0aGUgcmF5LiBZb3VyIGNhbGxiYWNrXG4gIC8vLyBjb250cm9scyB3aGV0aGVyIHlvdSBnZXQgdGhlIGNsb3Nlc3QgcG9pbnQsIGFueSBwb2ludCwgb3Igbi1wb2ludHMuXG4gIC8vLyBUaGUgcmF5LWNhc3QgaWdub3JlcyBzaGFwZXMgdGhhdCBjb250YWluIHRoZSBzdGFydGluZyBwb2ludC5cbiAgLy8vIEBwYXJhbSBjYWxsYmFjayBhIHVzZXIgaW1wbGVtZW50ZWQgY2FsbGJhY2sgY2xhc3MuXG4gIC8vLyBAcGFyYW0gcG9pbnQxIHRoZSByYXkgc3RhcnRpbmcgcG9pbnRcbiAgLy8vIEBwYXJhbSBwb2ludDIgdGhlIHJheSBlbmRpbmcgcG9pbnRcbiAgcHVibGljIFJheUNhc3QoY2FsbGJhY2s6IGIyUmF5Q2FzdENhbGxiYWNrLCBwb2ludDE6IFhZLCBwb2ludDI6IFhZKTogdm9pZDtcbiAgcHVibGljIFJheUNhc3QocG9pbnQxOiBYWSwgcG9pbnQyOiBYWSwgZm46IGIyUmF5Q2FzdENhbGxiYWNrRnVuY3Rpb24pOiB2b2lkO1xuICBwdWJsaWMgUmF5Q2FzdCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgYjJSYXlDYXN0Q2FsbGJhY2spIHtcbiAgICAgIHRoaXMuX1JheUNhc3QoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX1JheUNhc3QobnVsbCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgfVxuICB9XG4gIHByaXZhdGUgc3RhdGljIFJheUNhc3Rfc19pbnB1dCA9IG5ldyBiMlJheUNhc3RJbnB1dCgpO1xuICBwcml2YXRlIHN0YXRpYyBSYXlDYXN0X3Nfb3V0cHV0ID0gbmV3IGIyUmF5Q2FzdE91dHB1dCgpO1xuICBwcml2YXRlIHN0YXRpYyBSYXlDYXN0X3NfcG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgX1JheUNhc3QoY2FsbGJhY2s6IGIyUmF5Q2FzdENhbGxiYWNrIHwgbnVsbCwgcG9pbnQxOiBYWSwgcG9pbnQyOiBYWSwgZm4/OiBiMlJheUNhc3RDYWxsYmFja0Z1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQ6IGIyUmF5Q2FzdElucHV0ID0gYjJXb3JsZC5SYXlDYXN0X3NfaW5wdXQ7XG4gICAgaW5wdXQubWF4RnJhY3Rpb24gPSAxO1xuICAgIGlucHV0LnAxLkNvcHkocG9pbnQxKTtcbiAgICBpbnB1dC5wMi5Db3B5KHBvaW50Mik7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5SYXlDYXN0KGlucHV0LCAoaW5wdXQ6IGIyUmF5Q2FzdElucHV0LCBwcm94eTogYjJUcmVlTm9kZTxiMkZpeHR1cmVQcm94eT4pOiBudW1iZXIgPT4ge1xuICAgICAgY29uc3QgZml4dHVyZV9wcm94eTogYjJGaXh0dXJlUHJveHkgPSBwcm94eS51c2VyRGF0YTtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmaXh0dXJlX3Byb3h5IGluc3RhbmNlb2YgYjJGaXh0dXJlUHJveHkpO1xuICAgICAgY29uc3QgZml4dHVyZTogYjJGaXh0dXJlID0gZml4dHVyZV9wcm94eS5maXh0dXJlO1xuICAgICAgY29uc3QgaW5kZXg6IG51bWJlciA9IGZpeHR1cmVfcHJveHkuY2hpbGRJbmRleDtcbiAgICAgIGNvbnN0IG91dHB1dDogYjJSYXlDYXN0T3V0cHV0ID0gYjJXb3JsZC5SYXlDYXN0X3Nfb3V0cHV0O1xuICAgICAgY29uc3QgaGl0OiBib29sZWFuID0gZml4dHVyZS5SYXlDYXN0KG91dHB1dCwgaW5wdXQsIGluZGV4KTtcbiAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgY29uc3QgZnJhY3Rpb246IG51bWJlciA9IG91dHB1dC5mcmFjdGlvbjtcbiAgICAgICAgY29uc3QgcG9pbnQ6IGIyVmVjMiA9IGIyV29ybGQuUmF5Q2FzdF9zX3BvaW50O1xuICAgICAgICBwb2ludC5TZXQoKDEgLSBmcmFjdGlvbikgKiBwb2ludDEueCArIGZyYWN0aW9uICogcG9pbnQyLngsICgxIC0gZnJhY3Rpb24pICogcG9pbnQxLnkgKyBmcmFjdGlvbiAqIHBvaW50Mi55KTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLlJlcG9ydEZpeHR1cmUoZml4dHVyZSwgcG9pbnQsIG91dHB1dC5ub3JtYWwsIGZyYWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChmbikge1xuICAgICAgICAgIHJldHVybiBmbihmaXh0dXJlLCBwb2ludCwgb3V0cHV0Lm5vcm1hbCwgZnJhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5wdXQubWF4RnJhY3Rpb247XG4gICAgfSk7XG4gICAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgZm9yIChsZXQgcCA9IHRoaXMubV9wYXJ0aWNsZVN5c3RlbUxpc3Q7IHA7IHAgPSBwLm1fbmV4dCkge1xuICAgICAgICBpZiAoY2FsbGJhY2suU2hvdWxkUXVlcnlQYXJ0aWNsZVN5c3RlbShwKSkge1xuICAgICAgICAgIHAuUmF5Q2FzdChjYWxsYmFjaywgcG9pbnQxLCBwb2ludDIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vICNlbmRpZlxuICB9XG5cbiAgcHVibGljIFJheUNhc3RPbmUocG9pbnQxOiBYWSwgcG9pbnQyOiBYWSk6IGIyRml4dHVyZSB8IG51bGwge1xuICAgIGxldCByZXN1bHQ6IGIyRml4dHVyZSB8IG51bGwgPSBudWxsO1xuICAgIGxldCBtaW5fZnJhY3Rpb246IG51bWJlciA9IDE7XG4gICAgdGhpcy5SYXlDYXN0KHBvaW50MSwgcG9pbnQyLCAoZml4dHVyZTogYjJGaXh0dXJlLCBwb2ludDogYjJWZWMyLCBub3JtYWw6IGIyVmVjMiwgZnJhY3Rpb246IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgICBpZiAoZnJhY3Rpb24gPCBtaW5fZnJhY3Rpb24pIHtcbiAgICAgICAgbWluX2ZyYWN0aW9uID0gZnJhY3Rpb247XG4gICAgICAgIHJlc3VsdCA9IGZpeHR1cmU7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWluX2ZyYWN0aW9uO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgUmF5Q2FzdEFsbChwb2ludDE6IFhZLCBwb2ludDI6IFhZLCBvdXQ6IGIyRml4dHVyZVtdID0gW10pOiBiMkZpeHR1cmVbXSB7XG4gICAgdGhpcy5SYXlDYXN0KHBvaW50MSwgcG9pbnQyLCAoZml4dHVyZTogYjJGaXh0dXJlLCBwb2ludDogYjJWZWMyLCBub3JtYWw6IGIyVmVjMiwgZnJhY3Rpb246IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgICBvdXQucHVzaChmaXh0dXJlKTtcbiAgICAgIHJldHVybiAxO1xuICAgIH0pO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLy8gR2V0IHRoZSB3b3JsZCBib2R5IGxpc3QuIFdpdGggdGhlIHJldHVybmVkIGJvZHksIHVzZSBiMkJvZHk6OkdldE5leHQgdG8gZ2V0XG4gIC8vLyB0aGUgbmV4dCBib2R5IGluIHRoZSB3b3JsZCBsaXN0LiBBIE5VTEwgYm9keSBpbmRpY2F0ZXMgdGhlIGVuZCBvZiB0aGUgbGlzdC5cbiAgLy8vIEByZXR1cm4gdGhlIGhlYWQgb2YgdGhlIHdvcmxkIGJvZHkgbGlzdC5cbiAgcHVibGljIEdldEJvZHlMaXN0KCk6IGIyQm9keSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUxpc3Q7XG4gIH1cblxuICAvLy8gR2V0IHRoZSB3b3JsZCBqb2ludCBsaXN0LiBXaXRoIHRoZSByZXR1cm5lZCBqb2ludCwgdXNlIGIySm9pbnQ6OkdldE5leHQgdG8gZ2V0XG4gIC8vLyB0aGUgbmV4dCBqb2ludCBpbiB0aGUgd29ybGQgbGlzdC4gQSBOVUxMIGpvaW50IGluZGljYXRlcyB0aGUgZW5kIG9mIHRoZSBsaXN0LlxuICAvLy8gQHJldHVybiB0aGUgaGVhZCBvZiB0aGUgd29ybGQgam9pbnQgbGlzdC5cbiAgcHVibGljIEdldEpvaW50TGlzdCgpOiBiMkpvaW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7XG4gIH1cblxuICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZVN5c3RlbUxpc3QoKTogYjJQYXJ0aWNsZVN5c3RlbSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1fcGFydGljbGVTeXN0ZW1MaXN0O1xuICB9XG4gIC8vICNlbmRpZlxuXG4gIC8vLyBHZXQgdGhlIHdvcmxkIGNvbnRhY3QgbGlzdC4gV2l0aCB0aGUgcmV0dXJuZWQgY29udGFjdCwgdXNlIGIyQ29udGFjdDo6R2V0TmV4dCB0byBnZXRcbiAgLy8vIHRoZSBuZXh0IGNvbnRhY3QgaW4gdGhlIHdvcmxkIGxpc3QuIEEgTlVMTCBjb250YWN0IGluZGljYXRlcyB0aGUgZW5kIG9mIHRoZSBsaXN0LlxuICAvLy8gQHJldHVybiB0aGUgaGVhZCBvZiB0aGUgd29ybGQgY29udGFjdCBsaXN0LlxuICAvLy8gQHdhcm5pbmcgY29udGFjdHMgYXJlIGNyZWF0ZWQgYW5kIGRlc3Ryb3llZCBpbiB0aGUgbWlkZGxlIG9mIGEgdGltZSBzdGVwLlxuICAvLy8gVXNlIGIyQ29udGFjdExpc3RlbmVyIHRvIGF2b2lkIG1pc3NpbmcgY29udGFjdHMuXG4gIHB1YmxpYyBHZXRDb250YWN0TGlzdCgpOiBiMkNvbnRhY3QgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3Q7XG4gIH1cblxuICAvLy8gRW5hYmxlL2Rpc2FibGUgc2xlZXAuXG4gIHB1YmxpYyBTZXRBbGxvd1NsZWVwaW5nKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoZmxhZyA9PT0gdGhpcy5tX2FsbG93U2xlZXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm1fYWxsb3dTbGVlcCA9IGZsYWc7XG4gICAgaWYgKCF0aGlzLm1fYWxsb3dTbGVlcCkge1xuICAgICAgZm9yIChsZXQgYiA9IHRoaXMubV9ib2R5TGlzdDsgYjsgYiA9IGIubV9uZXh0KSB7XG4gICAgICAgIGIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEdldEFsbG93U2xlZXBpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9hbGxvd1NsZWVwO1xuICB9XG5cbiAgLy8vIEVuYWJsZS9kaXNhYmxlIHdhcm0gc3RhcnRpbmcuIEZvciB0ZXN0aW5nLlxuICBwdWJsaWMgU2V0V2FybVN0YXJ0aW5nKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fd2FybVN0YXJ0aW5nID0gZmxhZztcbiAgfVxuXG4gIHB1YmxpYyBHZXRXYXJtU3RhcnRpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV93YXJtU3RhcnRpbmc7XG4gIH1cblxuICAvLy8gRW5hYmxlL2Rpc2FibGUgY29udGludW91cyBwaHlzaWNzLiBGb3IgdGVzdGluZy5cbiAgcHVibGljIFNldENvbnRpbnVvdXNQaHlzaWNzKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fY29udGludW91c1BoeXNpY3MgPSBmbGFnO1xuICB9XG5cbiAgcHVibGljIEdldENvbnRpbnVvdXNQaHlzaWNzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1fY29udGludW91c1BoeXNpY3M7XG4gIH1cblxuICAvLy8gRW5hYmxlL2Rpc2FibGUgc2luZ2xlIHN0ZXBwZWQgY29udGludW91cyBwaHlzaWNzLiBGb3IgdGVzdGluZy5cbiAgcHVibGljIFNldFN1YlN0ZXBwaW5nKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fc3ViU3RlcHBpbmcgPSBmbGFnO1xuICB9XG5cbiAgcHVibGljIEdldFN1YlN0ZXBwaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1fc3ViU3RlcHBpbmc7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBudW1iZXIgb2YgYnJvYWQtcGhhc2UgcHJveGllcy5cbiAgcHVibGljIEdldFByb3h5Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5HZXRQcm94eUNvdW50KCk7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBudW1iZXIgb2YgYm9kaWVzLlxuICBwdWJsaWMgR2V0Qm9keUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Q291bnQ7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBudW1iZXIgb2Ygam9pbnRzLlxuICBwdWJsaWMgR2V0Sm9pbnRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fam9pbnRDb3VudDtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIG51bWJlciBvZiBjb250YWN0cyAoZWFjaCBtYXkgaGF2ZSAwIG9yIG1vcmUgY29udGFjdCBwb2ludHMpLlxuICBwdWJsaWMgR2V0Q29udGFjdENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RDb3VudDtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGhlaWdodCBvZiB0aGUgZHluYW1pYyB0cmVlLlxuICBwdWJsaWMgR2V0VHJlZUhlaWdodCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLkdldFRyZWVIZWlnaHQoKTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGJhbGFuY2Ugb2YgdGhlIGR5bmFtaWMgdHJlZS5cbiAgcHVibGljIEdldFRyZWVCYWxhbmNlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2UuR2V0VHJlZUJhbGFuY2UoKTtcbiAgfVxuXG4gIC8vLyBHZXQgdGhlIHF1YWxpdHkgbWV0cmljIG9mIHRoZSBkeW5hbWljIHRyZWUuIFRoZSBzbWFsbGVyIHRoZSBiZXR0ZXIuXG4gIC8vLyBUaGUgbWluaW11bSBpcyAxLlxuICBwdWJsaWMgR2V0VHJlZVF1YWxpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5HZXRUcmVlUXVhbGl0eSgpO1xuICB9XG5cbiAgLy8vIENoYW5nZSB0aGUgZ2xvYmFsIGdyYXZpdHkgdmVjdG9yLlxuICBwdWJsaWMgU2V0R3Jhdml0eShncmF2aXR5OiBYWSwgd2FrZTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBpZiAoIWIyVmVjMi5Jc0VxdWFsVG9WKHRoaXMubV9ncmF2aXR5LCBncmF2aXR5KSkge1xuICAgICAgdGhpcy5tX2dyYXZpdHkuQ29weShncmF2aXR5KTtcblxuICAgICAgaWYgKHdha2UpIHtcbiAgICAgICAgZm9yIChsZXQgYjogYjJCb2R5IHwgbnVsbCA9IHRoaXMubV9ib2R5TGlzdDsgYjsgYiA9IGIubV9uZXh0KSB7XG4gICAgICAgICAgYi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vLyBHZXQgdGhlIGdsb2JhbCBncmF2aXR5IHZlY3Rvci5cbiAgcHVibGljIEdldEdyYXZpdHkoKTogUmVhZG9ubHk8YjJWZWMyPiB7XG4gICAgcmV0dXJuIHRoaXMubV9ncmF2aXR5O1xuICB9XG5cbiAgLy8vIElzIHRoZSB3b3JsZCBsb2NrZWQgKGluIHRoZSBtaWRkbGUgb2YgYSB0aW1lIHN0ZXApLlxuICBwdWJsaWMgSXNMb2NrZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9sb2NrZWQ7XG4gIH1cblxuICAvLy8gU2V0IGZsYWcgdG8gY29udHJvbCBhdXRvbWF0aWMgY2xlYXJpbmcgb2YgZm9yY2VzIGFmdGVyIGVhY2ggdGltZSBzdGVwLlxuICBwdWJsaWMgU2V0QXV0b0NsZWFyRm9yY2VzKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fY2xlYXJGb3JjZXMgPSBmbGFnO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgZmxhZyB0aGF0IGNvbnRyb2xzIGF1dG9tYXRpYyBjbGVhcmluZyBvZiBmb3JjZXMgYWZ0ZXIgZWFjaCB0aW1lIHN0ZXAuXG4gIHB1YmxpYyBHZXRBdXRvQ2xlYXJGb3JjZXMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9jbGVhckZvcmNlcztcbiAgfVxuXG4gIC8vLyBTaGlmdCB0aGUgd29ybGQgb3JpZ2luLiBVc2VmdWwgZm9yIGxhcmdlIHdvcmxkcy5cbiAgLy8vIFRoZSBib2R5IHNoaWZ0IGZvcm11bGEgaXM6IHBvc2l0aW9uIC09IG5ld09yaWdpblxuICAvLy8gQHBhcmFtIG5ld09yaWdpbiB0aGUgbmV3IG9yaWdpbiB3aXRoIHJlc3BlY3QgdG8gdGhlIG9sZCBvcmlnaW5cbiAgcHVibGljIFNoaWZ0T3JpZ2luKG5ld09yaWdpbjogWFkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBmb3IgKGxldCBiOiBiMkJvZHkgfCBudWxsID0gdGhpcy5tX2JvZHlMaXN0OyBiOyBiID0gYi5tX25leHQpIHtcbiAgICAgIGIubV94Zi5wLlNlbGZTdWIobmV3T3JpZ2luKTtcbiAgICAgIGIubV9zd2VlcC5jMC5TZWxmU3ViKG5ld09yaWdpbik7XG4gICAgICBiLm1fc3dlZXAuYy5TZWxmU3ViKG5ld09yaWdpbik7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgajogYjJKb2ludCB8IG51bGwgPSB0aGlzLm1fam9pbnRMaXN0OyBqOyBqID0gai5tX25leHQpIHtcbiAgICAgIGouU2hpZnRPcmlnaW4obmV3T3JpZ2luKTtcbiAgICB9XG5cbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLlNoaWZ0T3JpZ2luKG5ld09yaWdpbik7XG4gIH1cblxuICAvLy8gR2V0IHRoZSBjb250YWN0IG1hbmFnZXIgZm9yIHRlc3RpbmcuXG4gIHB1YmxpYyBHZXRDb250YWN0TWFuYWdlcigpOiBiMkNvbnRhY3RNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyO1xuICB9XG5cbiAgLy8vIEdldCB0aGUgY3VycmVudCBwcm9maWxlLlxuICBwdWJsaWMgR2V0UHJvZmlsZSgpOiBiMlByb2ZpbGUge1xuICAgIHJldHVybiB0aGlzLm1fcHJvZmlsZTtcbiAgfVxuXG4gIC8vLyBEdW1wIHRoZSB3b3JsZCBpbnRvIHRoZSBsb2cgZmlsZS5cbiAgLy8vIEB3YXJuaW5nIHRoaXMgc2hvdWxkIGJlIGNhbGxlZCBvdXRzaWRlIG9mIGEgdGltZSBzdGVwLlxuICBwdWJsaWMgRHVtcChsb2c6IChmb3JtYXQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX2xvY2tlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGIyT3BlbkR1bXAoXCJib3gyZF9kdW1wLmlubFwiKTtcblxuICAgIGxvZyhcImNvbnN0IGc6IGIyVmVjMiA9IG5ldyBiMlZlYzIoJS4xNWYsICUuMTVmKTtcXG5cIiwgdGhpcy5tX2dyYXZpdHkueCwgdGhpcy5tX2dyYXZpdHkueSk7XG4gICAgbG9nKFwidGhpcy5tX3dvcmxkLlNldEdyYXZpdHkoZyk7XFxuXCIpO1xuXG4gICAgbG9nKFwiY29uc3QgYm9kaWVzOiBiMkJvZHlbXSA9IFtdO1xcblwiKTtcbiAgICBsb2coXCJjb25zdCBqb2ludHM6IGIySm9pbnRbXSA9IFtdO1xcblwiKTtcbiAgICBsZXQgaTogbnVtYmVyID0gMDtcbiAgICBmb3IgKGxldCBiOiBiMkJvZHkgfCBudWxsID0gdGhpcy5tX2JvZHlMaXN0OyBiOyBiID0gYi5tX25leHQpIHtcbiAgICAgIGIubV9pc2xhbmRJbmRleCA9IGk7XG4gICAgICBiLkR1bXAobG9nKTtcbiAgICAgICsraTtcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICBmb3IgKGxldCBqOiBiMkpvaW50IHwgbnVsbCA9IHRoaXMubV9qb2ludExpc3Q7IGo7IGogPSBqLm1fbmV4dCkge1xuICAgICAgai5tX2luZGV4ID0gaTtcbiAgICAgICsraTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCBwYXNzIG9uIGpvaW50cywgc2tpcCBnZWFyIGpvaW50cy5cbiAgICBmb3IgKGxldCBqOiBiMkpvaW50IHwgbnVsbCA9IHRoaXMubV9qb2ludExpc3Q7IGo7IGogPSBqLm1fbmV4dCkge1xuICAgICAgaWYgKGoubV90eXBlID09PSBiMkpvaW50VHlwZS5lX2dlYXJKb2ludCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbG9nKFwie1xcblwiKTtcbiAgICAgIGouRHVtcChsb2cpO1xuICAgICAgbG9nKFwifVxcblwiKTtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcyBvbiBqb2ludHMsIG9ubHkgZ2VhciBqb2ludHMuXG4gICAgZm9yIChsZXQgajogYjJKb2ludCB8IG51bGwgPSB0aGlzLm1fam9pbnRMaXN0OyBqOyBqID0gai5tX25leHQpIHtcbiAgICAgIGlmIChqLm1fdHlwZSAhPT0gYjJKb2ludFR5cGUuZV9nZWFySm9pbnQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxvZyhcIntcXG5cIik7XG4gICAgICBqLkR1bXAobG9nKTtcbiAgICAgIGxvZyhcIn1cXG5cIik7XG4gICAgfVxuXG4gICAgLy8gYjJDbG9zZUR1bXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBEcmF3U2hhcGUoZml4dHVyZTogYjJGaXh0dXJlLCBjb2xvcjogYjJDb2xvcik6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fZGVidWdEcmF3ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNoYXBlOiBiMlNoYXBlID0gZml4dHVyZS5HZXRTaGFwZSgpO1xuXG4gICAgc3dpdGNoIChzaGFwZS5tX3R5cGUpIHtcbiAgICAgIGNhc2UgYjJTaGFwZVR5cGUuZV9jaXJjbGVTaGFwZToge1xuICAgICAgICBjb25zdCBjaXJjbGU6IGIyQ2lyY2xlU2hhcGUgPSBzaGFwZSBhcyBiMkNpcmNsZVNoYXBlO1xuICAgICAgICBjb25zdCBjZW50ZXI6IGIyVmVjMiA9IGNpcmNsZS5tX3A7XG4gICAgICAgIGNvbnN0IHJhZGl1czogbnVtYmVyID0gY2lyY2xlLm1fcmFkaXVzO1xuICAgICAgICBjb25zdCBheGlzOiBiMlZlYzIgPSBiMlZlYzIuVU5JVFg7XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NvbGlkQ2lyY2xlKGNlbnRlciwgcmFkaXVzLCBheGlzLCBjb2xvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIGIyU2hhcGVUeXBlLmVfZWRnZVNoYXBlOiB7XG4gICAgICAgIGNvbnN0IGVkZ2U6IGIyRWRnZVNoYXBlID0gc2hhcGUgYXMgYjJFZGdlU2hhcGU7XG4gICAgICAgIGNvbnN0IHYxOiBiMlZlYzIgPSBlZGdlLm1fdmVydGV4MTtcbiAgICAgICAgY29uc3QgdjI6IGIyVmVjMiA9IGVkZ2UubV92ZXJ0ZXgyO1xuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KHYxLCB2MiwgY29sb3IpO1xuXG4gICAgICAgIGlmIChlZGdlLm1fb25lU2lkZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3UG9pbnQodjEsIDQuMCwgY29sb3IpO1xuICAgICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1BvaW50KHYyLCA0LjAsIGNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBiMlNoYXBlVHlwZS5lX2NoYWluU2hhcGU6IHtcbiAgICAgICAgY29uc3QgY2hhaW46IGIyQ2hhaW5TaGFwZSA9IHNoYXBlIGFzIGIyQ2hhaW5TaGFwZTtcbiAgICAgICAgY29uc3QgY291bnQ6IG51bWJlciA9IGNoYWluLm1fY291bnQ7XG4gICAgICAgIGNvbnN0IHZlcnRpY2VzOiBiMlZlYzJbXSA9IGNoYWluLm1fdmVydGljZXM7XG4gICAgICAgIGxldCB2MTogYjJWZWMyID0gdmVydGljZXNbMF07XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDE7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgY29uc3QgdjI6IGIyVmVjMiA9IHZlcnRpY2VzW2ldO1xuICAgICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQodjEsIHYyLCBjb2xvcik7XG4gICAgICAgICAgdjEgPSB2MjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIGIyU2hhcGVUeXBlLmVfcG9seWdvblNoYXBlOiB7XG4gICAgICAgIGNvbnN0IHBvbHk6IGIyUG9seWdvblNoYXBlID0gc2hhcGUgYXMgYjJQb2x5Z29uU2hhcGU7XG4gICAgICAgIGNvbnN0IHZlcnRleENvdW50OiBudW1iZXIgPSBwb2x5Lm1fY291bnQ7XG4gICAgICAgIGNvbnN0IHZlcnRpY2VzOiBiMlZlYzJbXSA9IHBvbHkubV92ZXJ0aWNlcztcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U29saWRQb2x5Z29uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCwgY29sb3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgU29sdmUoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICAvLyB1cGRhdGUgcHJldmlvdXMgdHJhbnNmb3Jtc1xuICAgIGZvciAobGV0IGIgPSB0aGlzLm1fYm9keUxpc3Q7IGI7IGIgPSBiLm1fbmV4dCkge1xuICAgICAgYi5tX3hmMC5Db3B5KGIubV94Zik7XG4gICAgfVxuICAgIC8vICNlbmRpZlxuXG4gICAgLy8gI2lmIEIyX0VOQUJMRV9DT05UUk9MTEVSXG4gICAgLy8gQHNlZSBiMkNvbnRyb2xsZXIgbGlzdFxuICAgIGZvciAobGV0IGNvbnRyb2xsZXIgPSB0aGlzLm1fY29udHJvbGxlckxpc3Q7IGNvbnRyb2xsZXI7IGNvbnRyb2xsZXIgPSBjb250cm9sbGVyLm1fbmV4dCkge1xuICAgICAgY29udHJvbGxlci5TdGVwKHN0ZXApO1xuICAgIH1cbiAgICAvLyAjZW5kaWZcblxuICAgIHRoaXMubV9wcm9maWxlLnNvbHZlSW5pdCA9IDA7XG4gICAgdGhpcy5tX3Byb2ZpbGUuc29sdmVWZWxvY2l0eSA9IDA7XG4gICAgdGhpcy5tX3Byb2ZpbGUuc29sdmVQb3NpdGlvbiA9IDA7XG5cbiAgICAvLyBTaXplIHRoZSBpc2xhbmQgZm9yIHRoZSB3b3JzdCBjYXNlLlxuICAgIGNvbnN0IGlzbGFuZDogYjJJc2xhbmQgPSB0aGlzLm1faXNsYW5kO1xuICAgIGlzbGFuZC5Jbml0aWFsaXplKHRoaXMubV9ib2R5Q291bnQsXG4gICAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0Q291bnQsXG4gICAgICB0aGlzLm1fam9pbnRDb3VudCxcbiAgICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RMaXN0ZW5lcik7XG5cbiAgICAvLyBDbGVhciBhbGwgdGhlIGlzbGFuZCBmbGFncy5cbiAgICBmb3IgKGxldCBiOiBiMkJvZHkgfCBudWxsID0gdGhpcy5tX2JvZHlMaXN0OyBiOyBiID0gYi5tX25leHQpIHtcbiAgICAgIGIubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGM6IGIyQ29udGFjdCB8IG51bGwgPSB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdDsgYzsgYyA9IGMubV9uZXh0KSB7XG4gICAgICBjLm1faXNsYW5kRmxhZyA9IGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBqOiBiMkpvaW50IHwgbnVsbCA9IHRoaXMubV9qb2ludExpc3Q7IGo7IGogPSBqLm1fbmV4dCkge1xuICAgICAgai5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBhbmQgc2ltdWxhdGUgYWxsIGF3YWtlIGlzbGFuZHMuXG4gICAgLy8gREVCVUc6IGNvbnN0IHN0YWNrU2l6ZTogbnVtYmVyID0gdGhpcy5tX2JvZHlDb3VudDtcbiAgICBjb25zdCBzdGFjazogQXJyYXk8YjJCb2R5IHwgbnVsbD4gPSB0aGlzLnNfc3RhY2s7XG4gICAgZm9yIChsZXQgc2VlZDogYjJCb2R5IHwgbnVsbCA9IHRoaXMubV9ib2R5TGlzdDsgc2VlZDsgc2VlZCA9IHNlZWQubV9uZXh0KSB7XG4gICAgICBpZiAoc2VlZC5tX2lzbGFuZEZsYWcpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghc2VlZC5Jc0F3YWtlKCkgfHwgIXNlZWQuSXNFbmFibGVkKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBzZWVkIGNhbiBiZSBkeW5hbWljIG9yIGtpbmVtYXRpYy5cbiAgICAgIGlmIChzZWVkLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXNldCBpc2xhbmQgYW5kIHN0YWNrLlxuICAgICAgaXNsYW5kLkNsZWFyKCk7XG4gICAgICBsZXQgc3RhY2tDb3VudDogbnVtYmVyID0gMDtcbiAgICAgIHN0YWNrW3N0YWNrQ291bnQrK10gPSBzZWVkO1xuICAgICAgc2VlZC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuXG4gICAgICAvLyBQZXJmb3JtIGEgZGVwdGggZmlyc3Qgc2VhcmNoIChERlMpIG9uIHRoZSBjb25zdHJhaW50IGdyYXBoLlxuICAgICAgd2hpbGUgKHN0YWNrQ291bnQgPiAwKSB7XG4gICAgICAgIC8vIEdyYWIgdGhlIG5leHQgYm9keSBvZmYgdGhlIHN0YWNrIGFuZCBhZGQgaXQgdG8gdGhlIGlzbGFuZC5cbiAgICAgICAgY29uc3QgYjogYjJCb2R5IHwgbnVsbCA9IHN0YWNrWy0tc3RhY2tDb3VudF07XG4gICAgICAgIGlmICghYikgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoYi5Jc0VuYWJsZWQoKSk7XG4gICAgICAgIGlzbGFuZC5BZGRCb2R5KGIpO1xuXG4gICAgICAgIC8vIFRvIGtlZXAgaXNsYW5kcyBhcyBzbWFsbCBhcyBwb3NzaWJsZSwgd2UgZG9uJ3RcbiAgICAgICAgLy8gcHJvcGFnYXRlIGlzbGFuZHMgYWNyb3NzIHN0YXRpYyBib2RpZXMuXG4gICAgICAgIGlmIChiLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGJvZHkgaXMgYXdha2UuICh3aXRob3V0IHJlc2V0dGluZyBzbGVlcCB0aW1lcikuXG4gICAgICAgIGIubV9hd2FrZUZsYWcgPSB0cnVlO1xuXG4gICAgICAgIC8vIFNlYXJjaCBhbGwgY29udGFjdHMgY29ubmVjdGVkIHRvIHRoaXMgYm9keS5cbiAgICAgICAgZm9yIChsZXQgY2U6IGIyQ29udGFjdEVkZ2UgfCBudWxsID0gYi5tX2NvbnRhY3RMaXN0OyBjZTsgY2UgPSBjZS5uZXh0KSB7XG4gICAgICAgICAgY29uc3QgY29udGFjdDogYjJDb250YWN0ID0gY2UuY29udGFjdDtcblxuICAgICAgICAgIC8vIEhhcyB0aGlzIGNvbnRhY3QgYWxyZWFkeSBiZWVuIGFkZGVkIHRvIGFuIGlzbGFuZD9cbiAgICAgICAgICBpZiAoY29udGFjdC5tX2lzbGFuZEZsYWcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElzIHRoaXMgY29udGFjdCBzb2xpZCBhbmQgdG91Y2hpbmc/XG4gICAgICAgICAgaWYgKCFjb250YWN0LklzRW5hYmxlZCgpIHx8ICFjb250YWN0LklzVG91Y2hpbmcoKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU2tpcCBzZW5zb3JzLlxuICAgICAgICAgIGNvbnN0IHNlbnNvckE6IGJvb2xlYW4gPSBjb250YWN0Lm1fZml4dHVyZUEubV9pc1NlbnNvcjtcbiAgICAgICAgICBjb25zdCBzZW5zb3JCOiBib29sZWFuID0gY29udGFjdC5tX2ZpeHR1cmVCLm1faXNTZW5zb3I7XG4gICAgICAgICAgaWYgKHNlbnNvckEgfHwgc2Vuc29yQikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNsYW5kLkFkZENvbnRhY3QoY29udGFjdCk7XG4gICAgICAgICAgY29udGFjdC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgY29uc3Qgb3RoZXI6IGIyQm9keSA9IGNlLm90aGVyO1xuXG4gICAgICAgICAgLy8gV2FzIHRoZSBvdGhlciBib2R5IGFscmVhZHkgYWRkZWQgdG8gdGhpcyBpc2xhbmQ/XG4gICAgICAgICAgaWYgKG90aGVyLm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KHN0YWNrQ291bnQgPCBzdGFja1NpemUpO1xuICAgICAgICAgIHN0YWNrW3N0YWNrQ291bnQrK10gPSBvdGhlcjtcbiAgICAgICAgICBvdGhlci5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VhcmNoIGFsbCBqb2ludHMgY29ubmVjdCB0byB0aGlzIGJvZHkuXG4gICAgICAgIGZvciAobGV0IGplOiBiMkpvaW50RWRnZSB8IG51bGwgPSBiLm1fam9pbnRMaXN0OyBqZTsgamUgPSBqZS5uZXh0KSB7XG4gICAgICAgICAgaWYgKGplLmpvaW50Lm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgb3RoZXI6IGIyQm9keSA9IGplLm90aGVyO1xuXG4gICAgICAgICAgLy8gRG9uJ3Qgc2ltdWxhdGUgam9pbnRzIGNvbm5lY3RlZCB0byBkaXNhYmxlZCBib2RpZXMuXG4gICAgICAgICAgaWYgKCFvdGhlci5Jc0VuYWJsZWQoKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNsYW5kLkFkZEpvaW50KGplLmpvaW50KTtcbiAgICAgICAgICBqZS5qb2ludC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKG90aGVyLm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gREVCVUc6IGIyQXNzZXJ0KHN0YWNrQ291bnQgPCBzdGFja1NpemUpO1xuICAgICAgICAgIHN0YWNrW3N0YWNrQ291bnQrK10gPSBvdGhlcjtcbiAgICAgICAgICBvdGhlci5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb2ZpbGU6IGIyUHJvZmlsZSA9IG5ldyBiMlByb2ZpbGUoKTtcbiAgICAgIGlzbGFuZC5Tb2x2ZShwcm9maWxlLCBzdGVwLCB0aGlzLm1fZ3Jhdml0eSwgdGhpcy5tX2FsbG93U2xlZXApO1xuICAgICAgdGhpcy5tX3Byb2ZpbGUuc29sdmVJbml0ICs9IHByb2ZpbGUuc29sdmVJbml0O1xuICAgICAgdGhpcy5tX3Byb2ZpbGUuc29sdmVWZWxvY2l0eSArPSBwcm9maWxlLnNvbHZlVmVsb2NpdHk7XG4gICAgICB0aGlzLm1fcHJvZmlsZS5zb2x2ZVBvc2l0aW9uICs9IHByb2ZpbGUuc29sdmVQb3NpdGlvbjtcblxuICAgICAgLy8gUG9zdCBzb2x2ZSBjbGVhbnVwLlxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGlzbGFuZC5tX2JvZHlDb3VudDsgKytpKSB7XG4gICAgICAgIC8vIEFsbG93IHN0YXRpYyBib2RpZXMgdG8gcGFydGljaXBhdGUgaW4gb3RoZXIgaXNsYW5kcy5cbiAgICAgICAgY29uc3QgYjogYjJCb2R5ID0gaXNsYW5kLm1fYm9kaWVzW2ldO1xuICAgICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keSkge1xuICAgICAgICAgIGIubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmICghc3RhY2tbaV0pIHsgYnJlYWs7IH1cbiAgICAgIHN0YWNrW2ldID0gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lcjogYjJUaW1lciA9IG5ldyBiMlRpbWVyKCk7XG5cbiAgICAvLyBTeW5jaHJvbml6ZSBmaXh0dXJlcywgY2hlY2sgZm9yIG91dCBvZiByYW5nZSBib2RpZXMuXG4gICAgZm9yIChsZXQgYiA9IHRoaXMubV9ib2R5TGlzdDsgYjsgYiA9IGIubV9uZXh0KSB7XG4gICAgICAvLyBJZiBhIGJvZHkgd2FzIG5vdCBpbiBhbiBpc2xhbmQgdGhlbiBpdCBkaWQgbm90IG1vdmUuXG4gICAgICBpZiAoIWIubV9pc2xhbmRGbGFnKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGZpeHR1cmVzIChmb3IgYnJvYWQtcGhhc2UpLlxuICAgICAgYi5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gICAgfVxuXG4gICAgLy8gTG9vayBmb3IgbmV3IGNvbnRhY3RzLlxuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5GaW5kTmV3Q29udGFjdHMoKTtcbiAgICB0aGlzLm1fcHJvZmlsZS5icm9hZHBoYXNlID0gdGltZXIuR2V0TWlsbGlzZWNvbmRzKCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVRPSV9zX3N1YlN0ZXAgPSBuZXcgYjJUaW1lU3RlcCgpO1xuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVRPSV9zX2JhY2t1cCA9IG5ldyBiMlN3ZWVwKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVE9JX3NfYmFja3VwMSA9IG5ldyBiMlN3ZWVwKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVE9JX3NfYmFja3VwMiA9IG5ldyBiMlN3ZWVwKCk7XG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVE9JX3NfdG9pX2lucHV0ID0gbmV3IGIyVE9JSW5wdXQoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVUT0lfc190b2lfb3V0cHV0ID0gbmV3IGIyVE9JT3V0cHV0KCk7XG4gIHB1YmxpYyBTb2x2ZVRPSShzdGVwOiBiMlRpbWVTdGVwKTogdm9pZCB7XG4gICAgY29uc3QgaXNsYW5kOiBiMklzbGFuZCA9IHRoaXMubV9pc2xhbmQ7XG4gICAgaXNsYW5kLkluaXRpYWxpemUoMiAqIGIyX21heFRPSUNvbnRhY3RzLCBiMl9tYXhUT0lDb250YWN0cywgMCwgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyKTtcblxuICAgIGlmICh0aGlzLm1fc3RlcENvbXBsZXRlKSB7XG4gICAgICBmb3IgKGxldCBiOiBiMkJvZHkgfCBudWxsID0gdGhpcy5tX2JvZHlMaXN0OyBiOyBiID0gYi5tX25leHQpIHtcbiAgICAgICAgYi5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICAgICAgYi5tX3N3ZWVwLmFscGhhMCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGM6IGIyQ29udGFjdCB8IG51bGwgPSB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdDsgYzsgYyA9IGMubV9uZXh0KSB7XG4gICAgICAgIC8vIEludmFsaWRhdGUgVE9JXG4gICAgICAgIGMubV90b2lGbGFnID0gZmFsc2U7XG4gICAgICAgIGMubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgIGMubV90b2lDb3VudCA9IDA7XG4gICAgICAgIGMubV90b2kgPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbmQgVE9JIGV2ZW50cyBhbmQgc29sdmUgdGhlbS5cbiAgICBmb3IgKDsgOykge1xuICAgICAgLy8gRmluZCB0aGUgZmlyc3QgVE9JLlxuICAgICAgbGV0IG1pbkNvbnRhY3Q6IGIyQ29udGFjdCB8IG51bGwgPSBudWxsO1xuICAgICAgbGV0IG1pbkFscGhhOiBudW1iZXIgPSAxO1xuXG4gICAgICBmb3IgKGxldCBjOiBiMkNvbnRhY3QgfCBudWxsID0gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3Q7IGM7IGMgPSBjLm1fbmV4dCkge1xuICAgICAgICAvLyBJcyB0aGlzIGNvbnRhY3QgZGlzYWJsZWQ/XG4gICAgICAgIGlmICghYy5Jc0VuYWJsZWQoKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJldmVudCBleGNlc3NpdmUgc3ViLXN0ZXBwaW5nLlxuICAgICAgICBpZiAoYy5tX3RvaUNvdW50ID4gYjJfbWF4U3ViU3RlcHMpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhbHBoYTogbnVtYmVyID0gMTtcbiAgICAgICAgaWYgKGMubV90b2lGbGFnKSB7XG4gICAgICAgICAgLy8gVGhpcyBjb250YWN0IGhhcyBhIHZhbGlkIGNhY2hlZCBUT0kuXG4gICAgICAgICAgYWxwaGEgPSBjLm1fdG9pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGZBOiBiMkZpeHR1cmUgPSBjLkdldEZpeHR1cmVBKCk7XG4gICAgICAgICAgY29uc3QgZkI6IGIyRml4dHVyZSA9IGMuR2V0Rml4dHVyZUIoKTtcblxuICAgICAgICAgIC8vIElzIHRoZXJlIGEgc2Vuc29yP1xuICAgICAgICAgIGlmIChmQS5Jc1NlbnNvcigpIHx8IGZCLklzU2Vuc29yKCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGJBOiBiMkJvZHkgPSBmQS5HZXRCb2R5KCk7XG4gICAgICAgICAgY29uc3QgYkI6IGIyQm9keSA9IGZCLkdldEJvZHkoKTtcblxuICAgICAgICAgIGNvbnN0IHR5cGVBOiBiMkJvZHlUeXBlID0gYkEubV90eXBlO1xuICAgICAgICAgIGNvbnN0IHR5cGVCOiBiMkJvZHlUeXBlID0gYkIubV90eXBlO1xuICAgICAgICAgIC8vIERFQlVHOiBiMkFzc2VydCh0eXBlQSAhPT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5IHx8IHR5cGVCICE9PSBiMkJvZHlUeXBlLmIyX3N0YXRpY0JvZHkpO1xuXG4gICAgICAgICAgY29uc3QgYWN0aXZlQTogYm9vbGVhbiA9IGJBLklzQXdha2UoKSAmJiB0eXBlQSAhPT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5O1xuICAgICAgICAgIGNvbnN0IGFjdGl2ZUI6IGJvb2xlYW4gPSBiQi5Jc0F3YWtlKCkgJiYgdHlwZUIgIT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keTtcblxuICAgICAgICAgIC8vIElzIGF0IGxlYXN0IG9uZSBib2R5IGFjdGl2ZSAoYXdha2UgYW5kIGR5bmFtaWMgb3Iga2luZW1hdGljKT9cbiAgICAgICAgICBpZiAoIWFjdGl2ZUEgJiYgIWFjdGl2ZUIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNvbGxpZGVBOiBib29sZWFuID0gYkEuSXNCdWxsZXQoKSB8fCB0eXBlQSAhPT0gYjJCb2R5VHlwZS5iMl9keW5hbWljQm9keTtcbiAgICAgICAgICBjb25zdCBjb2xsaWRlQjogYm9vbGVhbiA9IGJCLklzQnVsbGV0KCkgfHwgdHlwZUIgIT09IGIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHk7XG5cbiAgICAgICAgICAvLyBBcmUgdGhlc2UgdHdvIG5vbi1idWxsZXQgZHluYW1pYyBib2RpZXM/XG4gICAgICAgICAgaWYgKCFjb2xsaWRlQSAmJiAhY29sbGlkZUIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbXB1dGUgdGhlIFRPSSBmb3IgdGhpcyBjb250YWN0LlxuICAgICAgICAgIC8vIFB1dCB0aGUgc3dlZXBzIG9udG8gdGhlIHNhbWUgdGltZSBpbnRlcnZhbC5cbiAgICAgICAgICBsZXQgYWxwaGEwOiBudW1iZXIgPSBiQS5tX3N3ZWVwLmFscGhhMDtcblxuICAgICAgICAgIGlmIChiQS5tX3N3ZWVwLmFscGhhMCA8IGJCLm1fc3dlZXAuYWxwaGEwKSB7XG4gICAgICAgICAgICBhbHBoYTAgPSBiQi5tX3N3ZWVwLmFscGhhMDtcbiAgICAgICAgICAgIGJBLm1fc3dlZXAuQWR2YW5jZShhbHBoYTApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYkIubV9zd2VlcC5hbHBoYTAgPCBiQS5tX3N3ZWVwLmFscGhhMCkge1xuICAgICAgICAgICAgYWxwaGEwID0gYkEubV9zd2VlcC5hbHBoYTA7XG4gICAgICAgICAgICBiQi5tX3N3ZWVwLkFkdmFuY2UoYWxwaGEwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoYWxwaGEwIDwgMSk7XG5cbiAgICAgICAgICBjb25zdCBpbmRleEE6IG51bWJlciA9IGMuR2V0Q2hpbGRJbmRleEEoKTtcbiAgICAgICAgICBjb25zdCBpbmRleEI6IG51bWJlciA9IGMuR2V0Q2hpbGRJbmRleEIoKTtcblxuICAgICAgICAgIC8vIENvbXB1dGUgdGhlIHRpbWUgb2YgaW1wYWN0IGluIGludGVydmFsIFswLCBtaW5UT0ldXG4gICAgICAgICAgY29uc3QgaW5wdXQ6IGIyVE9JSW5wdXQgPSBiMldvcmxkLlNvbHZlVE9JX3NfdG9pX2lucHV0O1xuICAgICAgICAgIGlucHV0LnByb3h5QS5TZXRTaGFwZShmQS5HZXRTaGFwZSgpLCBpbmRleEEpO1xuICAgICAgICAgIGlucHV0LnByb3h5Qi5TZXRTaGFwZShmQi5HZXRTaGFwZSgpLCBpbmRleEIpO1xuICAgICAgICAgIGlucHV0LnN3ZWVwQS5Db3B5KGJBLm1fc3dlZXApO1xuICAgICAgICAgIGlucHV0LnN3ZWVwQi5Db3B5KGJCLm1fc3dlZXApO1xuICAgICAgICAgIGlucHV0LnRNYXggPSAxO1xuXG4gICAgICAgICAgY29uc3Qgb3V0cHV0OiBiMlRPSU91dHB1dCA9IGIyV29ybGQuU29sdmVUT0lfc190b2lfb3V0cHV0O1xuICAgICAgICAgIGIyVGltZU9mSW1wYWN0KG91dHB1dCwgaW5wdXQpO1xuXG4gICAgICAgICAgLy8gQmV0YSBpcyB0aGUgZnJhY3Rpb24gb2YgdGhlIHJlbWFpbmluZyBwb3J0aW9uIG9mIHRoZSAuXG4gICAgICAgICAgY29uc3QgYmV0YTogbnVtYmVyID0gb3V0cHV0LnQ7XG4gICAgICAgICAgaWYgKG91dHB1dC5zdGF0ZSA9PT0gYjJUT0lPdXRwdXRTdGF0ZS5lX3RvdWNoaW5nKSB7XG4gICAgICAgICAgICBhbHBoYSA9IGIyTWluKGFscGhhMCArICgxIC0gYWxwaGEwKSAqIGJldGEsIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbHBoYSA9IDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYy5tX3RvaSA9IGFscGhhO1xuICAgICAgICAgIGMubV90b2lGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbHBoYSA8IG1pbkFscGhhKSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyB0aGUgbWluaW11bSBUT0kgZm91bmQgc28gZmFyLlxuICAgICAgICAgIG1pbkNvbnRhY3QgPSBjO1xuICAgICAgICAgIG1pbkFscGhhID0gYWxwaGE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1pbkNvbnRhY3QgPT09IG51bGwgfHwgMSAtIDEwICogYjJfZXBzaWxvbiA8IG1pbkFscGhhKSB7XG4gICAgICAgIC8vIE5vIG1vcmUgVE9JIGV2ZW50cy4gRG9uZSFcbiAgICAgICAgdGhpcy5tX3N0ZXBDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBBZHZhbmNlIHRoZSBib2RpZXMgdG8gdGhlIFRPSS5cbiAgICAgIGNvbnN0IGZBOiBiMkZpeHR1cmUgPSBtaW5Db250YWN0LkdldEZpeHR1cmVBKCk7XG4gICAgICBjb25zdCBmQjogYjJGaXh0dXJlID0gbWluQ29udGFjdC5HZXRGaXh0dXJlQigpO1xuICAgICAgY29uc3QgYkE6IGIyQm9keSA9IGZBLkdldEJvZHkoKTtcbiAgICAgIGNvbnN0IGJCOiBiMkJvZHkgPSBmQi5HZXRCb2R5KCk7XG5cbiAgICAgIGNvbnN0IGJhY2t1cDE6IGIyU3dlZXAgPSBiMldvcmxkLlNvbHZlVE9JX3NfYmFja3VwMS5Db3B5KGJBLm1fc3dlZXApO1xuICAgICAgY29uc3QgYmFja3VwMjogYjJTd2VlcCA9IGIyV29ybGQuU29sdmVUT0lfc19iYWNrdXAyLkNvcHkoYkIubV9zd2VlcCk7XG5cbiAgICAgIGJBLkFkdmFuY2UobWluQWxwaGEpO1xuICAgICAgYkIuQWR2YW5jZShtaW5BbHBoYSk7XG5cbiAgICAgIC8vIFRoZSBUT0kgY29udGFjdCBsaWtlbHkgaGFzIHNvbWUgbmV3IGNvbnRhY3QgcG9pbnRzLlxuICAgICAgbWluQ29udGFjdC5VcGRhdGUodGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyKTtcbiAgICAgIG1pbkNvbnRhY3QubV90b2lGbGFnID0gZmFsc2U7XG4gICAgICArK21pbkNvbnRhY3QubV90b2lDb3VudDtcblxuICAgICAgLy8gSXMgdGhlIGNvbnRhY3Qgc29saWQ/XG4gICAgICBpZiAoIW1pbkNvbnRhY3QuSXNFbmFibGVkKCkgfHwgIW1pbkNvbnRhY3QuSXNUb3VjaGluZygpKSB7XG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIHN3ZWVwcy5cbiAgICAgICAgbWluQ29udGFjdC5TZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgYkEubV9zd2VlcC5Db3B5KGJhY2t1cDEpO1xuICAgICAgICBiQi5tX3N3ZWVwLkNvcHkoYmFja3VwMik7XG4gICAgICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgIGJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBiQS5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIGJCLlNldEF3YWtlKHRydWUpO1xuXG4gICAgICAvLyBCdWlsZCB0aGUgaXNsYW5kXG4gICAgICBpc2xhbmQuQ2xlYXIoKTtcbiAgICAgIGlzbGFuZC5BZGRCb2R5KGJBKTtcbiAgICAgIGlzbGFuZC5BZGRCb2R5KGJCKTtcbiAgICAgIGlzbGFuZC5BZGRDb250YWN0KG1pbkNvbnRhY3QpO1xuXG4gICAgICBiQS5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgYkIubV9pc2xhbmRGbGFnID0gdHJ1ZTtcbiAgICAgIG1pbkNvbnRhY3QubV9pc2xhbmRGbGFnID0gdHJ1ZTtcblxuICAgICAgLy8gR2V0IGNvbnRhY3RzIG9uIGJvZHlBIGFuZCBib2R5Qi5cbiAgICAgIC8vIGNvbnN0IGJvZGllczogYjJCb2R5W10gPSBbYkEsIGJCXTtcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAyOyArK2kpIHtcbiAgICAgICAgY29uc3QgYm9keTogYjJCb2R5ID0gKGkgPT09IDApID8gKGJBKSA6IChiQik7IC8vIGJvZGllc1tpXTtcbiAgICAgICAgaWYgKGJvZHkubV90eXBlID09PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICAgICAgZm9yIChsZXQgY2U6IGIyQ29udGFjdEVkZ2UgfCBudWxsID0gYm9keS5tX2NvbnRhY3RMaXN0OyBjZTsgY2UgPSBjZS5uZXh0KSB7XG4gICAgICAgICAgICBpZiAoaXNsYW5kLm1fYm9keUNvdW50ID09PSBpc2xhbmQubV9ib2R5Q2FwYWNpdHkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc2xhbmQubV9jb250YWN0Q291bnQgPT09IGlzbGFuZC5tX2NvbnRhY3RDYXBhY2l0eSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGFjdDogYjJDb250YWN0ID0gY2UuY29udGFjdDtcblxuICAgICAgICAgICAgLy8gSGFzIHRoaXMgY29udGFjdCBhbHJlYWR5IGJlZW4gYWRkZWQgdG8gdGhlIGlzbGFuZD9cbiAgICAgICAgICAgIGlmIChjb250YWN0Lm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gT25seSBhZGQgc3RhdGljLCBraW5lbWF0aWMsIG9yIGJ1bGxldCBib2RpZXMuXG4gICAgICAgICAgICBjb25zdCBvdGhlcjogYjJCb2R5ID0gY2Uub3RoZXI7XG4gICAgICAgICAgICBpZiAob3RoZXIubV90eXBlID09PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5ICYmXG4gICAgICAgICAgICAgICFib2R5LklzQnVsbGV0KCkgJiYgIW90aGVyLklzQnVsbGV0KCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNraXAgc2Vuc29ycy5cbiAgICAgICAgICAgIGNvbnN0IHNlbnNvckE6IGJvb2xlYW4gPSBjb250YWN0Lm1fZml4dHVyZUEubV9pc1NlbnNvcjtcbiAgICAgICAgICAgIGNvbnN0IHNlbnNvckI6IGJvb2xlYW4gPSBjb250YWN0Lm1fZml4dHVyZUIubV9pc1NlbnNvcjtcbiAgICAgICAgICAgIGlmIChzZW5zb3JBIHx8IHNlbnNvckIpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRlbnRhdGl2ZWx5IGFkdmFuY2UgdGhlIGJvZHkgdG8gdGhlIFRPSS5cbiAgICAgICAgICAgIGNvbnN0IGJhY2t1cDogYjJTd2VlcCA9IGIyV29ybGQuU29sdmVUT0lfc19iYWNrdXAuQ29weShvdGhlci5tX3N3ZWVwKTtcbiAgICAgICAgICAgIGlmICghb3RoZXIubV9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICAgIG90aGVyLkFkdmFuY2UobWluQWxwaGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvbnRhY3QgcG9pbnRzXG4gICAgICAgICAgICBjb250YWN0LlVwZGF0ZSh0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIpO1xuXG4gICAgICAgICAgICAvLyBXYXMgdGhlIGNvbnRhY3QgZGlzYWJsZWQgYnkgdGhlIHVzZXI/XG4gICAgICAgICAgICBpZiAoIWNvbnRhY3QuSXNFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgb3RoZXIubV9zd2VlcC5Db3B5KGJhY2t1cCk7XG4gICAgICAgICAgICAgIG90aGVyLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBcmUgdGhlcmUgY29udGFjdCBwb2ludHM/XG4gICAgICAgICAgICBpZiAoIWNvbnRhY3QuSXNUb3VjaGluZygpKSB7XG4gICAgICAgICAgICAgIG90aGVyLm1fc3dlZXAuQ29weShiYWNrdXApO1xuICAgICAgICAgICAgICBvdGhlci5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBjb250YWN0IHRvIHRoZSBpc2xhbmRcbiAgICAgICAgICAgIGNvbnRhY3QubV9pc2xhbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGlzbGFuZC5BZGRDb250YWN0KGNvbnRhY3QpO1xuXG4gICAgICAgICAgICAvLyBIYXMgdGhlIG90aGVyIGJvZHkgYWxyZWFkeSBiZWVuIGFkZGVkIHRvIHRoZSBpc2xhbmQ/XG4gICAgICAgICAgICBpZiAob3RoZXIubV9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIG90aGVyIGJvZHkgdG8gdGhlIGlzbGFuZC5cbiAgICAgICAgICAgIG90aGVyLm1faXNsYW5kRmxhZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChvdGhlci5tX3R5cGUgIT09IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keSkge1xuICAgICAgICAgICAgICBvdGhlci5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXNsYW5kLkFkZEJvZHkob3RoZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzdWJTdGVwOiBiMlRpbWVTdGVwID0gYjJXb3JsZC5Tb2x2ZVRPSV9zX3N1YlN0ZXA7XG4gICAgICBzdWJTdGVwLmR0ID0gKDEgLSBtaW5BbHBoYSkgKiBzdGVwLmR0O1xuICAgICAgc3ViU3RlcC5pbnZfZHQgPSAxIC8gc3ViU3RlcC5kdDtcbiAgICAgIHN1YlN0ZXAuZHRSYXRpbyA9IDE7XG4gICAgICBzdWJTdGVwLnBvc2l0aW9uSXRlcmF0aW9ucyA9IDIwO1xuICAgICAgc3ViU3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnMgPSBzdGVwLnZlbG9jaXR5SXRlcmF0aW9ucztcbiAgICAgIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgICAgIHN1YlN0ZXAucGFydGljbGVJdGVyYXRpb25zID0gc3RlcC5wYXJ0aWNsZUl0ZXJhdGlvbnM7XG4gICAgICAvLyAjZW5kaWZcbiAgICAgIHN1YlN0ZXAud2FybVN0YXJ0aW5nID0gZmFsc2U7XG4gICAgICBpc2xhbmQuU29sdmVUT0koc3ViU3RlcCwgYkEubV9pc2xhbmRJbmRleCwgYkIubV9pc2xhbmRJbmRleCk7XG5cbiAgICAgIC8vIFJlc2V0IGlzbGFuZCBmbGFncyBhbmQgc3luY2hyb25pemUgYnJvYWQtcGhhc2UgcHJveGllcy5cbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBpc2xhbmQubV9ib2R5Q291bnQ7ICsraSkge1xuICAgICAgICBjb25zdCBib2R5OiBiMkJvZHkgPSBpc2xhbmQubV9ib2RpZXNbaV07XG4gICAgICAgIGJvZHkubV9pc2xhbmRGbGFnID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGJvZHkubV90eXBlICE9PSBiMkJvZHlUeXBlLmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBib2R5LlN5bmNocm9uaXplRml4dHVyZXMoKTtcblxuICAgICAgICAvLyBJbnZhbGlkYXRlIGFsbCBjb250YWN0IFRPSXMgb24gdGhpcyBkaXNwbGFjZWQgYm9keS5cbiAgICAgICAgZm9yIChsZXQgY2U6IGIyQ29udGFjdEVkZ2UgfCBudWxsID0gYm9keS5tX2NvbnRhY3RMaXN0OyBjZTsgY2UgPSBjZS5uZXh0KSB7XG4gICAgICAgICAgY2UuY29udGFjdC5tX3RvaUZsYWcgPSBmYWxzZTtcbiAgICAgICAgICBjZS5jb250YWN0Lm1faXNsYW5kRmxhZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvbW1pdCBmaXh0dXJlIHByb3h5IG1vdmVtZW50cyB0byB0aGUgYnJvYWQtcGhhc2Ugc28gdGhhdCBuZXcgY29udGFjdHMgYXJlIGNyZWF0ZWQuXG4gICAgICAvLyBBbHNvLCBzb21lIGNvbnRhY3RzIGNhbiBiZSBkZXN0cm95ZWQuXG4gICAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIuRmluZE5ld0NvbnRhY3RzKCk7XG5cbiAgICAgIGlmICh0aGlzLm1fc3ViU3RlcHBpbmcpIHtcbiAgICAgICAgdGhpcy5tX3N0ZXBDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAjaWYgQjJfRU5BQkxFX0NPTlRST0xMRVJcbiAgcHVibGljIEFkZENvbnRyb2xsZXIoY29udHJvbGxlcjogYjJDb250cm9sbGVyKTogYjJDb250cm9sbGVyIHtcbiAgICAvLyBiMkFzc2VydChjb250cm9sbGVyLm1fd29ybGQgPT09IG51bGwsIFwiQ29udHJvbGxlciBjYW4gb25seSBiZSBhIG1lbWJlciBvZiBvbmUgd29ybGRcIik7XG4gICAgLy8gY29udHJvbGxlci5tX3dvcmxkID0gdGhpcztcbiAgICBjb250cm9sbGVyLm1fbmV4dCA9IHRoaXMubV9jb250cm9sbGVyTGlzdDtcbiAgICBjb250cm9sbGVyLm1fcHJldiA9IG51bGw7XG4gICAgaWYgKHRoaXMubV9jb250cm9sbGVyTGlzdCkge1xuICAgICAgdGhpcy5tX2NvbnRyb2xsZXJMaXN0Lm1fcHJldiA9IGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHRoaXMubV9jb250cm9sbGVyTGlzdCA9IGNvbnRyb2xsZXI7XG4gICAgKyt0aGlzLm1fY29udHJvbGxlckNvdW50O1xuICAgIHJldHVybiBjb250cm9sbGVyO1xuICB9XG5cbiAgcHVibGljIFJlbW92ZUNvbnRyb2xsZXIoY29udHJvbGxlcjogYjJDb250cm9sbGVyKTogYjJDb250cm9sbGVyIHtcbiAgICAvLyBiMkFzc2VydChjb250cm9sbGVyLm1fd29ybGQgPT09IHRoaXMsIFwiQ29udHJvbGxlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhpcyB3b3JsZFwiKTtcbiAgICBpZiAoY29udHJvbGxlci5tX3ByZXYpIHtcbiAgICAgIGNvbnRyb2xsZXIubV9wcmV2Lm1fbmV4dCA9IGNvbnRyb2xsZXIubV9uZXh0O1xuICAgIH1cbiAgICBpZiAoY29udHJvbGxlci5tX25leHQpIHtcbiAgICAgIGNvbnRyb2xsZXIubV9uZXh0Lm1fcHJldiA9IGNvbnRyb2xsZXIubV9wcmV2O1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2NvbnRyb2xsZXJMaXN0ID09PSBjb250cm9sbGVyKSB7XG4gICAgICB0aGlzLm1fY29udHJvbGxlckxpc3QgPSBjb250cm9sbGVyLm1fbmV4dDtcbiAgICB9XG4gICAgLS10aGlzLm1fY29udHJvbGxlckNvdW50O1xuICAgIGNvbnRyb2xsZXIubV9wcmV2ID0gbnVsbDtcbiAgICBjb250cm9sbGVyLm1fbmV4dCA9IG51bGw7XG4gICAgLy8gZGVsZXRlIGNvbnRyb2xsZXIubV93b3JsZDsgLy8gPSBudWxsO1xuICAgIHJldHVybiBjb250cm9sbGVyO1xuICB9XG4gIC8vICNlbmRpZlxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFTQTtBQStDQTtBQTlDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBTUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFnQkE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQWFBO0FBQUE7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQXp0Q0E7QUFDQTtBQUNBO0FBMEdBO0FBQ0E7QUFDQTtBQTRNQTtBQXVGQTtBQUNBO0FBQ0E7QUFvZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQStUQTtBQUFBO0FBdG1EQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_world.ts\n");

/***/ }),

/***/ "./src/box2d/dynamics/b2_world_callbacks.ts":
/*!**************************************************!*\
  !*** ./src/box2d/dynamics/b2_world_callbacks.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2RayCastCallback = exports.b2QueryCallback = exports.b2ContactListener = exports.b2ContactImpulse = exports.b2ContactFilter = exports.b2DestructionListener = void 0;\nvar b2_body_1 = __webpack_require__(/*! ./b2_body */ \"./src/box2d/dynamics/b2_body.ts\");\nvar b2_common_1 = __webpack_require__(/*! ../common/b2_common */ \"./src/box2d/common/b2_common.ts\");\nvar b2DestructionListener = (function () {\n    function b2DestructionListener() {\n    }\n    b2DestructionListener.prototype.SayGoodbyeJoint = function (joint) { };\n    b2DestructionListener.prototype.SayGoodbyeFixture = function (fixture) { };\n    b2DestructionListener.prototype.SayGoodbyeParticleGroup = function (group) { };\n    b2DestructionListener.prototype.SayGoodbyeParticle = function (system, index) { };\n    return b2DestructionListener;\n}());\nexports.b2DestructionListener = b2DestructionListener;\nvar b2ContactFilter = (function () {\n    function b2ContactFilter() {\n    }\n    b2ContactFilter.prototype.ShouldCollide = function (fixtureA, fixtureB) {\n        var bodyA = fixtureA.GetBody();\n        var bodyB = fixtureB.GetBody();\n        if (bodyB.GetType() === b2_body_1.b2BodyType.b2_staticBody && bodyA.GetType() === b2_body_1.b2BodyType.b2_staticBody) {\n            return false;\n        }\n        if (!bodyB.ShouldCollideConnected(bodyA)) {\n            return false;\n        }\n        var filter1 = fixtureA.GetFilterData();\n        var filter2 = fixtureB.GetFilterData();\n        if (filter1.groupIndex === filter2.groupIndex && filter1.groupIndex !== 0) {\n            return (filter1.groupIndex > 0);\n        }\n        var collide = (((filter1.maskBits & filter2.categoryBits) !== 0) && ((filter1.categoryBits & filter2.maskBits) !== 0));\n        return collide;\n    };\n    b2ContactFilter.prototype.ShouldCollideFixtureParticle = function (fixture, system, index) {\n        return true;\n    };\n    b2ContactFilter.prototype.ShouldCollideParticleParticle = function (system, indexA, indexB) {\n        return true;\n    };\n    b2ContactFilter.b2_defaultFilter = new b2ContactFilter();\n    return b2ContactFilter;\n}());\nexports.b2ContactFilter = b2ContactFilter;\nvar b2ContactImpulse = (function () {\n    function b2ContactImpulse() {\n        this.normalImpulses = b2_common_1.b2MakeNumberArray(b2_common_1.b2_maxManifoldPoints);\n        this.tangentImpulses = b2_common_1.b2MakeNumberArray(b2_common_1.b2_maxManifoldPoints);\n        this.count = 0;\n    }\n    return b2ContactImpulse;\n}());\nexports.b2ContactImpulse = b2ContactImpulse;\nvar b2ContactListener = (function () {\n    function b2ContactListener() {\n    }\n    b2ContactListener.prototype.BeginContact = function (contact) { };\n    b2ContactListener.prototype.EndContact = function (contact) { };\n    b2ContactListener.prototype.BeginContactFixtureParticle = function (system, contact) { };\n    b2ContactListener.prototype.EndContactFixtureParticle = function (system, contact) { };\n    b2ContactListener.prototype.BeginContactParticleParticle = function (system, contact) { };\n    b2ContactListener.prototype.EndContactParticleParticle = function (system, contact) { };\n    b2ContactListener.prototype.PreSolve = function (contact, oldManifold) { };\n    b2ContactListener.prototype.PostSolve = function (contact, impulse) { };\n    b2ContactListener.b2_defaultListener = new b2ContactListener();\n    return b2ContactListener;\n}());\nexports.b2ContactListener = b2ContactListener;\nvar b2QueryCallback = (function () {\n    function b2QueryCallback() {\n    }\n    b2QueryCallback.prototype.ReportFixture = function (fixture) {\n        return true;\n    };\n    b2QueryCallback.prototype.ReportParticle = function (system, index) {\n        return false;\n    };\n    b2QueryCallback.prototype.ShouldQueryParticleSystem = function (system) {\n        return true;\n    };\n    return b2QueryCallback;\n}());\nexports.b2QueryCallback = b2QueryCallback;\nvar b2RayCastCallback = (function () {\n    function b2RayCastCallback() {\n    }\n    b2RayCastCallback.prototype.ReportFixture = function (fixture, point, normal, fraction) {\n        return fraction;\n    };\n    b2RayCastCallback.prototype.ReportParticle = function (system, index, point, normal, fraction) {\n        return 0;\n    };\n    b2RayCastCallback.prototype.ShouldQueryParticleSystem = function (system) {\n        return true;\n    };\n    return b2RayCastCallback;\n}());\nexports.b2RayCastCallback = b2RayCastCallback;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvZHluYW1pY3MvYjJfd29ybGRfY2FsbGJhY2tzLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL2R5bmFtaWNzL2IyX3dvcmxkX2NhbGxiYWNrcy50cz9iNjBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEVyaW4gQ2F0dG8gaHR0cDovL3d3dy5ib3gyZC5vcmdcbipcbiogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiogd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiogaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4qIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4qIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4qIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuKiAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4qIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5cbi8vLyBKb2ludHMgYW5kIGZpeHR1cmVzIGFyZSBkZXN0cm95ZWQgd2hlbiB0aGVpciBhc3NvY2lhdGVkXG4vLy8gYm9keSBpcyBkZXN0cm95ZWQuIEltcGxlbWVudCB0aGlzIGxpc3RlbmVyIHNvIHRoYXQgeW91XG4vLy8gbWF5IG51bGxpZnkgcmVmZXJlbmNlcyB0byB0aGVzZSBqb2ludHMgYW5kIHNoYXBlcy5cbmltcG9ydCB7YjJKb2ludH0gZnJvbSBcIi4vYjJfam9pbnRcIjtcbmltcG9ydCB7YjJGaWx0ZXIsIGIyRml4dHVyZX0gZnJvbSBcIi4vYjJfZml4dHVyZVwiO1xuaW1wb3J0IHtiMlBhcnRpY2xlR3JvdXB9IGZyb20gXCIuLi9wYXJ0aWNsZS9iMl9wYXJ0aWNsZV9ncm91cFwiO1xuaW1wb3J0IHtiMlBhcnRpY2xlQm9keUNvbnRhY3QsIGIyUGFydGljbGVDb250YWN0LCBiMlBhcnRpY2xlU3lzdGVtfSBmcm9tIFwiLi4vcGFydGljbGUvYjJfcGFydGljbGVfc3lzdGVtXCI7XG5pbXBvcnQge2IyQm9keSwgYjJCb2R5VHlwZX0gZnJvbSBcIi4vYjJfYm9keVwiO1xuaW1wb3J0IHtiMl9tYXhNYW5pZm9sZFBvaW50cywgYjJNYWtlTnVtYmVyQXJyYXl9IGZyb20gXCIuLi9jb21tb24vYjJfY29tbW9uXCI7XG5pbXBvcnQge2IyQ29udGFjdH0gZnJvbSBcIi4vYjJfY29udGFjdFwiO1xuaW1wb3J0IHtiMk1hbmlmb2xkfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHtiMlZlYzJ9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuXG5leHBvcnQgY2xhc3MgYjJEZXN0cnVjdGlvbkxpc3RlbmVyIHtcbiAgLy8vIENhbGxlZCB3aGVuIGFueSBqb2ludCBpcyBhYm91dCB0byBiZSBkZXN0cm95ZWQgZHVlXG4gIC8vLyB0byB0aGUgZGVzdHJ1Y3Rpb24gb2Ygb25lIG9mIGl0cyBhdHRhY2hlZCBib2RpZXMuXG4gIHB1YmxpYyBTYXlHb29kYnllSm9pbnQoam9pbnQ6IGIySm9pbnQpOiB2b2lkIHt9XG5cbiAgLy8vIENhbGxlZCB3aGVuIGFueSBmaXh0dXJlIGlzIGFib3V0IHRvIGJlIGRlc3Ryb3llZCBkdWVcbiAgLy8vIHRvIHRoZSBkZXN0cnVjdGlvbiBvZiBpdHMgcGFyZW50IGJvZHkuXG4gIHB1YmxpYyBTYXlHb29kYnllRml4dHVyZShmaXh0dXJlOiBiMkZpeHR1cmUpOiB2b2lkIHt9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICAvLy8gQ2FsbGVkIHdoZW4gYW55IHBhcnRpY2xlIGdyb3VwIGlzIGFib3V0IHRvIGJlIGRlc3Ryb3llZC5cbiAgcHVibGljIFNheUdvb2RieWVQYXJ0aWNsZUdyb3VwKGdyb3VwOiBiMlBhcnRpY2xlR3JvdXApOiB2b2lkIHt9XG5cbiAgLy8vIENhbGxlZCB3aGVuIGEgcGFydGljbGUgaXMgYWJvdXQgdG8gYmUgZGVzdHJveWVkLlxuICAvLy8gVGhlIGluZGV4IGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGhcbiAgLy8vIGIyUGFydGljbGVTeXN0ZW06OkdldFVzZXJEYXRhQnVmZmVyKCkgb3JcbiAgLy8vIGIyUGFydGljbGVTeXN0ZW06OkdldFBhcnRpY2xlSGFuZGxlRnJvbUluZGV4KCkgdG8gZGV0ZXJtaW5lIHdoaWNoXG4gIC8vLyBwYXJ0aWNsZSBoYXMgYmVlbiBkZXN0cm95ZWQuXG4gIHB1YmxpYyBTYXlHb29kYnllUGFydGljbGUoc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtLCBpbmRleDogbnVtYmVyKTogdm9pZCB7fVxuICAvLyAjZW5kaWZcbn1cblxuLy8vIEltcGxlbWVudCB0aGlzIGNsYXNzIHRvIHByb3ZpZGUgY29sbGlzaW9uIGZpbHRlcmluZy4gSW4gb3RoZXIgd29yZHMsIHlvdSBjYW4gaW1wbGVtZW50XG4vLy8gdGhpcyBjbGFzcyBpZiB5b3Ugd2FudCBmaW5lciBjb250cm9sIG92ZXIgY29udGFjdCBjcmVhdGlvbi5cbmV4cG9ydCBjbGFzcyBiMkNvbnRhY3RGaWx0ZXIge1xuICAvLy8gUmV0dXJuIHRydWUgaWYgY29udGFjdCBjYWxjdWxhdGlvbnMgc2hvdWxkIGJlIHBlcmZvcm1lZCBiZXR3ZWVuIHRoZXNlIHR3byBzaGFwZXMuXG4gIC8vLyBAd2FybmluZyBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB0aGlzIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIEFBQkJzIGJlZ2luIHRvIG92ZXJsYXAuXG4gIHB1YmxpYyBTaG91bGRDb2xsaWRlKGZpeHR1cmVBOiBiMkZpeHR1cmUsIGZpeHR1cmVCOiBiMkZpeHR1cmUpOiBib29sZWFuIHtcbiAgICBjb25zdCBib2R5QTogYjJCb2R5ID0gZml4dHVyZUEuR2V0Qm9keSgpO1xuICAgIGNvbnN0IGJvZHlCOiBiMkJvZHkgPSBmaXh0dXJlQi5HZXRCb2R5KCk7XG5cbiAgICAvLyBBdCBsZWFzdCBvbmUgYm9keSBzaG91bGQgYmUgZHluYW1pYyBvciBraW5lbWF0aWMuXG4gICAgaWYgKGJvZHlCLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5ICYmIGJvZHlBLkdldFR5cGUoKSA9PT0gYjJCb2R5VHlwZS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRG9lcyBhIGpvaW50IHByZXZlbnQgY29sbGlzaW9uP1xuICAgIGlmICghYm9keUIuU2hvdWxkQ29sbGlkZUNvbm5lY3RlZChib2R5QSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXIxOiBiMkZpbHRlciA9IGZpeHR1cmVBLkdldEZpbHRlckRhdGEoKTtcbiAgICBjb25zdCBmaWx0ZXIyOiBiMkZpbHRlciA9IGZpeHR1cmVCLkdldEZpbHRlckRhdGEoKTtcblxuICAgIGlmIChmaWx0ZXIxLmdyb3VwSW5kZXggPT09IGZpbHRlcjIuZ3JvdXBJbmRleCAmJiBmaWx0ZXIxLmdyb3VwSW5kZXggIT09IDApIHtcbiAgICAgIHJldHVybiAoZmlsdGVyMS5ncm91cEluZGV4ID4gMCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29sbGlkZTogYm9vbGVhbiA9ICgoKGZpbHRlcjEubWFza0JpdHMgJiBmaWx0ZXIyLmNhdGVnb3J5Qml0cykgIT09IDApICYmICgoZmlsdGVyMS5jYXRlZ29yeUJpdHMgJiBmaWx0ZXIyLm1hc2tCaXRzKSAhPT0gMCkpO1xuICAgIHJldHVybiBjb2xsaWRlO1xuICB9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICBwdWJsaWMgU2hvdWxkQ29sbGlkZUZpeHR1cmVQYXJ0aWNsZShmaXh0dXJlOiBiMkZpeHR1cmUsIHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIFNob3VsZENvbGxpZGVQYXJ0aWNsZVBhcnRpY2xlKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSwgaW5kZXhBOiBudW1iZXIsIGluZGV4QjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gI2VuZGlmXG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBiMl9kZWZhdWx0RmlsdGVyOiBiMkNvbnRhY3RGaWx0ZXIgPSBuZXcgYjJDb250YWN0RmlsdGVyKCk7XG59XG5cbi8vLyBDb250YWN0IGltcHVsc2VzIGZvciByZXBvcnRpbmcuIEltcHVsc2VzIGFyZSB1c2VkIGluc3RlYWQgb2YgZm9yY2VzIGJlY2F1c2Vcbi8vLyBzdWItc3RlcCBmb3JjZXMgbWF5IGFwcHJvYWNoIGluZmluaXR5IGZvciByaWdpZCBib2R5IGNvbGxpc2lvbnMuIFRoZXNlXG4vLy8gbWF0Y2ggdXAgb25lLXRvLW9uZSB3aXRoIHRoZSBjb250YWN0IHBvaW50cyBpbiBiMk1hbmlmb2xkLlxuZXhwb3J0IGNsYXNzIGIyQ29udGFjdEltcHVsc2Uge1xuICBwdWJsaWMgbm9ybWFsSW1wdWxzZXM6IG51bWJlcltdID0gYjJNYWtlTnVtYmVyQXJyYXkoYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICBwdWJsaWMgdGFuZ2VudEltcHVsc2VzOiBudW1iZXJbXSA9IGIyTWFrZU51bWJlckFycmF5KGIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgcHVibGljIGNvdW50OiBudW1iZXIgPSAwO1xufVxuXG4vLy8gSW1wbGVtZW50IHRoaXMgY2xhc3MgdG8gZ2V0IGNvbnRhY3QgaW5mb3JtYXRpb24uIFlvdSBjYW4gdXNlIHRoZXNlIHJlc3VsdHMgZm9yXG4vLy8gdGhpbmdzIGxpa2Ugc291bmRzIGFuZCBnYW1lIGxvZ2ljLiBZb3UgY2FuIGFsc28gZ2V0IGNvbnRhY3QgcmVzdWx0cyBieVxuLy8vIHRyYXZlcnNpbmcgdGhlIGNvbnRhY3QgbGlzdHMgYWZ0ZXIgdGhlIHRpbWUgc3RlcC4gSG93ZXZlciwgeW91IG1pZ2h0IG1pc3Ncbi8vLyBzb21lIGNvbnRhY3RzIGJlY2F1c2UgY29udGludW91cyBwaHlzaWNzIGxlYWRzIHRvIHN1Yi1zdGVwcGluZy5cbi8vLyBBZGRpdGlvbmFsbHkgeW91IG1heSByZWNlaXZlIG11bHRpcGxlIGNhbGxiYWNrcyBmb3IgdGhlIHNhbWUgY29udGFjdCBpbiBhXG4vLy8gc2luZ2xlIHRpbWUgc3RlcC5cbi8vLyBZb3Ugc2hvdWxkIHN0cml2ZSB0byBtYWtlIHlvdXIgY2FsbGJhY2tzIGVmZmljaWVudCBiZWNhdXNlIHRoZXJlIG1heSBiZVxuLy8vIG1hbnkgY2FsbGJhY2tzIHBlciB0aW1lIHN0ZXAuXG4vLy8gQHdhcm5pbmcgWW91IGNhbm5vdCBjcmVhdGUvZGVzdHJveSBCb3gyRCBlbnRpdGllcyBpbnNpZGUgdGhlc2UgY2FsbGJhY2tzLlxuZXhwb3J0IGNsYXNzIGIyQ29udGFjdExpc3RlbmVyIHtcbiAgLy8vIENhbGxlZCB3aGVuIHR3byBmaXh0dXJlcyBiZWdpbiB0byB0b3VjaC5cbiAgcHVibGljIEJlZ2luQ29udGFjdChjb250YWN0OiBiMkNvbnRhY3QpOiB2b2lkIHt9XG5cbiAgLy8vIENhbGxlZCB3aGVuIHR3byBmaXh0dXJlcyBjZWFzZSB0byB0b3VjaC5cbiAgcHVibGljIEVuZENvbnRhY3QoY29udGFjdDogYjJDb250YWN0KTogdm9pZCB7fVxuXG4gIC8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcbiAgcHVibGljIEJlZ2luQ29udGFjdEZpeHR1cmVQYXJ0aWNsZShzeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0sIGNvbnRhY3Q6IGIyUGFydGljbGVCb2R5Q29udGFjdCk6IHZvaWQge31cbiAgcHVibGljIEVuZENvbnRhY3RGaXh0dXJlUGFydGljbGUoc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtLCBjb250YWN0OiBiMlBhcnRpY2xlQm9keUNvbnRhY3QpOiB2b2lkIHt9XG4gIHB1YmxpYyBCZWdpbkNvbnRhY3RQYXJ0aWNsZVBhcnRpY2xlKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSwgY29udGFjdDogYjJQYXJ0aWNsZUNvbnRhY3QpOiB2b2lkIHt9XG4gIHB1YmxpYyBFbmRDb250YWN0UGFydGljbGVQYXJ0aWNsZShzeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0sIGNvbnRhY3Q6IGIyUGFydGljbGVDb250YWN0KTogdm9pZCB7fVxuICAvLyAjZW5kaWZcblxuICAvLy8gVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgYSBjb250YWN0IGlzIHVwZGF0ZWQuIFRoaXMgYWxsb3dzIHlvdSB0byBpbnNwZWN0IGFcbiAgLy8vIGNvbnRhY3QgYmVmb3JlIGl0IGdvZXMgdG8gdGhlIHNvbHZlci4gSWYgeW91IGFyZSBjYXJlZnVsLCB5b3UgY2FuIG1vZGlmeSB0aGVcbiAgLy8vIGNvbnRhY3QgbWFuaWZvbGQgKGUuZy4gZGlzYWJsZSBjb250YWN0KS5cbiAgLy8vIEEgY29weSBvZiB0aGUgb2xkIG1hbmlmb2xkIGlzIHByb3ZpZGVkIHNvIHRoYXQgeW91IGNhbiBkZXRlY3QgY2hhbmdlcy5cbiAgLy8vIE5vdGU6IHRoaXMgaXMgY2FsbGVkIG9ubHkgZm9yIGF3YWtlIGJvZGllcy5cbiAgLy8vIE5vdGU6IHRoaXMgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGUgbnVtYmVyIG9mIGNvbnRhY3QgcG9pbnRzIGlzIHplcm8uXG4gIC8vLyBOb3RlOiB0aGlzIGlzIG5vdCBjYWxsZWQgZm9yIHNlbnNvcnMuXG4gIC8vLyBOb3RlOiBpZiB5b3Ugc2V0IHRoZSBudW1iZXIgb2YgY29udGFjdCBwb2ludHMgdG8gemVybywgeW91IHdpbGwgbm90XG4gIC8vLyBnZXQgYW4gRW5kQ29udGFjdCBjYWxsYmFjay4gSG93ZXZlciwgeW91IG1heSBnZXQgYSBCZWdpbkNvbnRhY3QgY2FsbGJhY2tcbiAgLy8vIHRoZSBuZXh0IHN0ZXAuXG4gIHB1YmxpYyBQcmVTb2x2ZShjb250YWN0OiBiMkNvbnRhY3QsIG9sZE1hbmlmb2xkOiBiMk1hbmlmb2xkKTogdm9pZCB7fVxuXG4gIC8vLyBUaGlzIGxldHMgeW91IGluc3BlY3QgYSBjb250YWN0IGFmdGVyIHRoZSBzb2x2ZXIgaXMgZmluaXNoZWQuIFRoaXMgaXMgdXNlZnVsXG4gIC8vLyBmb3IgaW5zcGVjdGluZyBpbXB1bHNlcy5cbiAgLy8vIE5vdGU6IHRoZSBjb250YWN0IG1hbmlmb2xkIGRvZXMgbm90IGluY2x1ZGUgdGltZSBvZiBpbXBhY3QgaW1wdWxzZXMsIHdoaWNoIGNhbiBiZVxuICAvLy8gYXJiaXRyYXJpbHkgbGFyZ2UgaWYgdGhlIHN1Yi1zdGVwIGlzIHNtYWxsLiBIZW5jZSB0aGUgaW1wdWxzZSBpcyBwcm92aWRlZCBleHBsaWNpdGx5XG4gIC8vLyBpbiBhIHNlcGFyYXRlIGRhdGEgc3RydWN0dXJlLlxuICAvLy8gTm90ZTogdGhpcyBpcyBvbmx5IGNhbGxlZCBmb3IgY29udGFjdHMgdGhhdCBhcmUgdG91Y2hpbmcsIHNvbGlkLCBhbmQgYXdha2UuXG4gIHB1YmxpYyBQb3N0U29sdmUoY29udGFjdDogYjJDb250YWN0LCBpbXB1bHNlOiBiMkNvbnRhY3RJbXB1bHNlKTogdm9pZCB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgYjJfZGVmYXVsdExpc3RlbmVyOiBiMkNvbnRhY3RMaXN0ZW5lciA9IG5ldyBiMkNvbnRhY3RMaXN0ZW5lcigpO1xufVxuXG4vLy8gQ2FsbGJhY2sgY2xhc3MgZm9yIEFBQkIgcXVlcmllcy5cbi8vLyBTZWUgYjJXb3JsZDo6UXVlcnlcbmV4cG9ydCBjbGFzcyBiMlF1ZXJ5Q2FsbGJhY2sge1xuICAvLy8gQ2FsbGVkIGZvciBlYWNoIGZpeHR1cmUgZm91bmQgaW4gdGhlIHF1ZXJ5IEFBQkIuXG4gIC8vLyBAcmV0dXJuIGZhbHNlIHRvIHRlcm1pbmF0ZSB0aGUgcXVlcnkuXG4gIHB1YmxpYyBSZXBvcnRGaXh0dXJlKGZpeHR1cmU6IGIyRml4dHVyZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuICBwdWJsaWMgUmVwb3J0UGFydGljbGUoc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHB1YmxpYyBTaG91bGRRdWVyeVBhcnRpY2xlU3lzdGVtKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vICNlbmRpZlxufVxuXG5leHBvcnQgdHlwZSBiMlF1ZXJ5Q2FsbGJhY2tGdW5jdGlvbiA9IChmaXh0dXJlOiBiMkZpeHR1cmUpID0+IGJvb2xlYW47XG5cbi8vLyBDYWxsYmFjayBjbGFzcyBmb3IgcmF5IGNhc3RzLlxuLy8vIFNlZSBiMldvcmxkOjpSYXlDYXN0XG5leHBvcnQgY2xhc3MgYjJSYXlDYXN0Q2FsbGJhY2sge1xuICAvLy8gQ2FsbGVkIGZvciBlYWNoIGZpeHR1cmUgZm91bmQgaW4gdGhlIHF1ZXJ5LiBZb3UgY29udHJvbCBob3cgdGhlIHJheSBjYXN0XG4gIC8vLyBwcm9jZWVkcyBieSByZXR1cm5pbmcgYSBmbG9hdDpcbiAgLy8vIHJldHVybiAtMTogaWdub3JlIHRoaXMgZml4dHVyZSBhbmQgY29udGludWVcbiAgLy8vIHJldHVybiAwOiB0ZXJtaW5hdGUgdGhlIHJheSBjYXN0XG4gIC8vLyByZXR1cm4gZnJhY3Rpb246IGNsaXAgdGhlIHJheSB0byB0aGlzIHBvaW50XG4gIC8vLyByZXR1cm4gMTogZG9uJ3QgY2xpcCB0aGUgcmF5IGFuZCBjb250aW51ZVxuICAvLy8gQHBhcmFtIGZpeHR1cmUgdGhlIGZpeHR1cmUgaGl0IGJ5IHRoZSByYXlcbiAgLy8vIEBwYXJhbSBwb2ludCB0aGUgcG9pbnQgb2YgaW5pdGlhbCBpbnRlcnNlY3Rpb25cbiAgLy8vIEBwYXJhbSBub3JtYWwgdGhlIG5vcm1hbCB2ZWN0b3IgYXQgdGhlIHBvaW50IG9mIGludGVyc2VjdGlvblxuICAvLy8gQHJldHVybiAtMSB0byBmaWx0ZXIsIDAgdG8gdGVybWluYXRlLCBmcmFjdGlvbiB0byBjbGlwIHRoZSByYXkgZm9yXG4gIC8vLyBjbG9zZXN0IGhpdCwgMSB0byBjb250aW51ZVxuICBwdWJsaWMgUmVwb3J0Rml4dHVyZShmaXh0dXJlOiBiMkZpeHR1cmUsIHBvaW50OiBiMlZlYzIsIG5vcm1hbDogYjJWZWMyLCBmcmFjdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gZnJhY3Rpb247XG4gIH1cblxuICAvLyAjaWYgQjJfRU5BQkxFX1BBUlRJQ0xFXG4gIHB1YmxpYyBSZXBvcnRQYXJ0aWNsZShzeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0sIGluZGV4OiBudW1iZXIsIHBvaW50OiBiMlZlYzIsIG5vcm1hbDogYjJWZWMyLCBmcmFjdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBwdWJsaWMgU2hvdWxkUXVlcnlQYXJ0aWNsZVN5c3RlbShzeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0pOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvLyAjZW5kaWZcbn1cblxuZXhwb3J0IHR5cGUgYjJSYXlDYXN0Q2FsbGJhY2tGdW5jdGlvbiA9IChmaXh0dXJlOiBiMkZpeHR1cmUsIHBvaW50OiBiMlZlYzIsIG5vcm1hbDogYjJWZWMyLCBmcmFjdGlvbjogbnVtYmVyKSA9PiBudW1iZXI7XG4iXSwibWFwcGluZ3MiOiI7OztBQTBCQTtBQUNBO0FBS0E7QUFBQTtBQW9CQTtBQWpCQTtBQUlBO0FBSUE7QUFPQTtBQUVBO0FBQUE7QUFwQkE7QUF3QkE7QUFBQTtBQXVDQTtBQXBDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBdkNBO0FBNENBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFKQTtBQWVBO0FBQUE7QUFtQ0E7QUFqQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7QUFRQTtBQUVBO0FBQ0E7QUFBQTtBQW5DQTtBQXVDQTtBQUFBO0FBZUE7QUFaQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBZkE7QUFxQkE7QUFBQTtBQXdCQTtBQVpBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUF4QkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/dynamics/b2_world_callbacks.ts\n");

/***/ }),

/***/ "./src/box2d/particle/b2_particle.ts":
/*!*******************************************!*\
  !*** ./src/box2d/particle/b2_particle.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ParticleHandle = exports.b2CalculateParticleIterations = exports.b2ParticleDef = exports.b2ParticleFlag = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2ParticleFlag;\n(function (b2ParticleFlag) {\n    b2ParticleFlag[b2ParticleFlag[\"b2_waterParticle\"] = 0] = \"b2_waterParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_zombieParticle\"] = 2] = \"b2_zombieParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_wallParticle\"] = 4] = \"b2_wallParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_springParticle\"] = 8] = \"b2_springParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_elasticParticle\"] = 16] = \"b2_elasticParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_viscousParticle\"] = 32] = \"b2_viscousParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_powderParticle\"] = 64] = \"b2_powderParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_tensileParticle\"] = 128] = \"b2_tensileParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_colorMixingParticle\"] = 256] = \"b2_colorMixingParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_destructionListenerParticle\"] = 512] = \"b2_destructionListenerParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_barrierParticle\"] = 1024] = \"b2_barrierParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_staticPressureParticle\"] = 2048] = \"b2_staticPressureParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_reactiveParticle\"] = 4096] = \"b2_reactiveParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_repulsiveParticle\"] = 8192] = \"b2_repulsiveParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_fixtureContactListenerParticle\"] = 16384] = \"b2_fixtureContactListenerParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_particleContactListenerParticle\"] = 32768] = \"b2_particleContactListenerParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_fixtureContactFilterParticle\"] = 65536] = \"b2_fixtureContactFilterParticle\";\n    b2ParticleFlag[b2ParticleFlag[\"b2_particleContactFilterParticle\"] = 131072] = \"b2_particleContactFilterParticle\";\n})(b2ParticleFlag = exports.b2ParticleFlag || (exports.b2ParticleFlag = {}));\nvar b2ParticleDef = (function () {\n    function b2ParticleDef() {\n        this.flags = 0;\n        this.position = new b2_math_1.b2Vec2();\n        this.velocity = new b2_math_1.b2Vec2();\n        this.color = new b2_draw_1.b2Color(0, 0, 0, 0);\n        this.lifetime = 0.0;\n        this.userData = null;\n        this.group = null;\n    }\n    return b2ParticleDef;\n}());\nexports.b2ParticleDef = b2ParticleDef;\nfunction b2CalculateParticleIterations(gravity, radius, timeStep) {\n    var B2_MAX_RECOMMENDED_PARTICLE_ITERATIONS = 8;\n    var B2_RADIUS_THRESHOLD = 0.01;\n    var iterations = Math.ceil(Math.sqrt(gravity / (B2_RADIUS_THRESHOLD * radius)) * timeStep);\n    return b2_math_1.b2Clamp(iterations, 1, B2_MAX_RECOMMENDED_PARTICLE_ITERATIONS);\n}\nexports.b2CalculateParticleIterations = b2CalculateParticleIterations;\nvar b2ParticleHandle = (function () {\n    function b2ParticleHandle() {\n        this.m_index = b2_settings_1.b2_invalidParticleIndex;\n    }\n    b2ParticleHandle.prototype.GetIndex = function () { return this.m_index; };\n    b2ParticleHandle.prototype.SetIndex = function (index) { this.m_index = index; };\n    return b2ParticleHandle;\n}());\nexports.b2ParticleHandle = b2ParticleHandle;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvcGFydGljbGUvYjJfcGFydGljbGUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvcGFydGljbGUvYjJfcGFydGljbGUudHM/MTU4NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDEzIEdvb2dsZSwgSW5jLlxuICpcbiAqIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4gKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4gKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuICogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4gKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4gKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4gKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuICogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiAqIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuICogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiAqIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4gKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4gKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuICovXG5cbi8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcblxuaW1wb3J0IHsgYjJfaW52YWxpZFBhcnRpY2xlSW5kZXggfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMkNsYW1wLCBiMlZlYzIsIFhZIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9tYXRoXCI7XG5pbXBvcnQgeyBiMkNvbG9yLCBSR0JBIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9kcmF3XCI7XG5pbXBvcnQgeyBiMlBhcnRpY2xlR3JvdXAgfSBmcm9tIFwiLi9iMl9wYXJ0aWNsZV9ncm91cFwiO1xuXG4vKipcbiAqIFRoZSBwYXJ0aWNsZSB0eXBlLiBDYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgfCBvcGVyYXRvci5cbiAqL1xuZXhwb3J0IGVudW0gYjJQYXJ0aWNsZUZsYWcge1xuICAvLy8gV2F0ZXIgcGFydGljbGUuXG4gIGIyX3dhdGVyUGFydGljbGUgPSAwLFxuICAvLy8gUmVtb3ZlZCBhZnRlciBuZXh0IHNpbXVsYXRpb24gc3RlcC5cbiAgYjJfem9tYmllUGFydGljbGUgPSAxIDw8IDEsXG4gIC8vLyBaZXJvIHZlbG9jaXR5LlxuICBiMl93YWxsUGFydGljbGUgPSAxIDw8IDIsXG4gIC8vLyBXaXRoIHJlc3RpdHV0aW9uIGZyb20gc3RyZXRjaGluZy5cbiAgYjJfc3ByaW5nUGFydGljbGUgPSAxIDw8IDMsXG4gIC8vLyBXaXRoIHJlc3RpdHV0aW9uIGZyb20gZGVmb3JtYXRpb24uXG4gIGIyX2VsYXN0aWNQYXJ0aWNsZSA9IDEgPDwgNCxcbiAgLy8vIFdpdGggdmlzY29zaXR5LlxuICBiMl92aXNjb3VzUGFydGljbGUgPSAxIDw8IDUsXG4gIC8vLyBXaXRob3V0IGlzb3Ryb3BpYyBwcmVzc3VyZS5cbiAgYjJfcG93ZGVyUGFydGljbGUgPSAxIDw8IDYsXG4gIC8vLyBXaXRoIHN1cmZhY2UgdGVuc2lvbi5cbiAgYjJfdGVuc2lsZVBhcnRpY2xlID0gMSA8PCA3LFxuICAvLy8gTWl4IGNvbG9yIGJldHdlZW4gY29udGFjdGluZyBwYXJ0aWNsZXMuXG4gIGIyX2NvbG9yTWl4aW5nUGFydGljbGUgPSAxIDw8IDgsXG4gIC8vLyBDYWxsIGIyRGVzdHJ1Y3Rpb25MaXN0ZW5lciBvbiBkZXN0cnVjdGlvbi5cbiAgYjJfZGVzdHJ1Y3Rpb25MaXN0ZW5lclBhcnRpY2xlID0gMSA8PCA5LFxuICAvLy8gUHJldmVudHMgb3RoZXIgcGFydGljbGVzIGZyb20gbGVha2luZy5cbiAgYjJfYmFycmllclBhcnRpY2xlID0gMSA8PCAxMCxcbiAgLy8vIExlc3MgY29tcHJlc3NpYmlsaXR5LlxuICBiMl9zdGF0aWNQcmVzc3VyZVBhcnRpY2xlID0gMSA8PCAxMSxcbiAgLy8vIE1ha2VzIHBhaXJzIG9yIHRyaWFkcyB3aXRoIG90aGVyIHBhcnRpY2xlcy5cbiAgYjJfcmVhY3RpdmVQYXJ0aWNsZSA9IDEgPDwgMTIsXG4gIC8vLyBXaXRoIGhpZ2ggcmVwdWxzaXZlIGZvcmNlLlxuICBiMl9yZXB1bHNpdmVQYXJ0aWNsZSA9IDEgPDwgMTMsXG4gIC8vLyBDYWxsIGIyQ29udGFjdExpc3RlbmVyIHdoZW4gdGhpcyBwYXJ0aWNsZSBpcyBhYm91dCB0byBpbnRlcmFjdCB3aXRoXG4gIC8vLyBhIHJpZ2lkIGJvZHkgb3Igc3RvcHMgaW50ZXJhY3Rpbmcgd2l0aCBhIHJpZ2lkIGJvZHkuXG4gIC8vLyBUaGlzIHJlc3VsdHMgaW4gYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiBjb21wYXJlZCB0byB1c2luZ1xuICAvLy8gYjJfZml4dHVyZUNvbnRhY3RGaWx0ZXJQYXJ0aWNsZSB0byBkZXRlY3QgY29sbGlzaW9ucyBiZXR3ZWVuXG4gIC8vLyBwYXJ0aWNsZXMuXG4gIGIyX2ZpeHR1cmVDb250YWN0TGlzdGVuZXJQYXJ0aWNsZSA9IDEgPDwgMTQsXG4gIC8vLyBDYWxsIGIyQ29udGFjdExpc3RlbmVyIHdoZW4gdGhpcyBwYXJ0aWNsZSBpcyBhYm91dCB0byBpbnRlcmFjdCB3aXRoXG4gIC8vLyBhbm90aGVyIHBhcnRpY2xlIG9yIHN0b3BzIGludGVyYWN0aW5nIHdpdGggYW5vdGhlciBwYXJ0aWNsZS5cbiAgLy8vIFRoaXMgcmVzdWx0cyBpbiBhbiBleHBlbnNpdmUgb3BlcmF0aW9uIGNvbXBhcmVkIHRvIHVzaW5nXG4gIC8vLyBiMl9wYXJ0aWNsZUNvbnRhY3RGaWx0ZXJQYXJ0aWNsZSB0byBkZXRlY3QgY29sbGlzaW9ucyBiZXR3ZWVuXG4gIC8vLyBwYXJ0aWNsZXMuXG4gIGIyX3BhcnRpY2xlQ29udGFjdExpc3RlbmVyUGFydGljbGUgPSAxIDw8IDE1LFxuICAvLy8gQ2FsbCBiMkNvbnRhY3RGaWx0ZXIgd2hlbiB0aGlzIHBhcnRpY2xlIGludGVyYWN0cyB3aXRoIHJpZ2lkIGJvZGllcy5cbiAgYjJfZml4dHVyZUNvbnRhY3RGaWx0ZXJQYXJ0aWNsZSA9IDEgPDwgMTYsXG4gIC8vLyBDYWxsIGIyQ29udGFjdEZpbHRlciB3aGVuIHRoaXMgcGFydGljbGUgaW50ZXJhY3RzIHdpdGggb3RoZXJcbiAgLy8vIHBhcnRpY2xlcy5cbiAgYjJfcGFydGljbGVDb250YWN0RmlsdGVyUGFydGljbGUgPSAxIDw8IDE3LFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIGIySVBhcnRpY2xlRGVmIHtcbiAgZmxhZ3M/OiBiMlBhcnRpY2xlRmxhZztcbiAgcG9zaXRpb24/OiBYWTtcbiAgdmVsb2NpdHk/OiBYWTtcbiAgY29sb3I/OiBSR0JBO1xuICBsaWZldGltZT86IG51bWJlcjtcbiAgdXNlckRhdGE/OiBhbnk7XG4gIGdyb3VwPzogYjJQYXJ0aWNsZUdyb3VwIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVEZWYgaW1wbGVtZW50cyBiMklQYXJ0aWNsZURlZiB7XG4gIHB1YmxpYyBmbGFnczogYjJQYXJ0aWNsZUZsYWcgPSAwO1xuICBwdWJsaWMgcmVhZG9ubHkgcG9zaXRpb246IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IHZlbG9jaXR5OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyByZWFkb25seSBjb2xvcjogYjJDb2xvciA9IG5ldyBiMkNvbG9yKDAsIDAsIDAsIDApO1xuICBwdWJsaWMgbGlmZXRpbWU6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIHVzZXJEYXRhOiBhbnkgPSBudWxsO1xuICBwdWJsaWMgZ3JvdXA6IGIyUGFydGljbGVHcm91cCB8IG51bGwgPSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYjJDYWxjdWxhdGVQYXJ0aWNsZUl0ZXJhdGlvbnMoZ3Jhdml0eTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgdGltZVN0ZXA6IG51bWJlcik6IG51bWJlciB7XG4gIC8vIEluIHNvbWUgc2l0dWF0aW9ucyB5b3UgbWF5IHdhbnQgbW9yZSBwYXJ0aWNsZSBpdGVyYXRpb25zIHRoYW4gdGhpcyxcbiAgLy8gYnV0IHRvIGF2b2lkIGV4Y2Vzc2l2ZSBjeWNsZSBjb3N0LCBkb24ndCByZWNvbW1lbmQgbW9yZSB0aGFuIHRoaXMuXG4gIGNvbnN0IEIyX01BWF9SRUNPTU1FTkRFRF9QQVJUSUNMRV9JVEVSQVRJT05TID0gODtcbiAgY29uc3QgQjJfUkFESVVTX1RIUkVTSE9MRCA9IDAuMDE7XG4gIGNvbnN0IGl0ZXJhdGlvbnMgPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KGdyYXZpdHkgLyAoQjJfUkFESVVTX1RIUkVTSE9MRCAqIHJhZGl1cykpICogdGltZVN0ZXApO1xuICByZXR1cm4gYjJDbGFtcChpdGVyYXRpb25zLCAxLCBCMl9NQVhfUkVDT01NRU5ERURfUEFSVElDTEVfSVRFUkFUSU9OUyk7XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlSGFuZGxlIHtcbiAgcHVibGljIG1faW5kZXg6IG51bWJlciA9IGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4O1xuICBwdWJsaWMgR2V0SW5kZXgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubV9pbmRleDsgfVxuICBwdWJsaWMgU2V0SW5kZXgoaW5kZXg6IG51bWJlcik6IHZvaWQgeyB0aGlzLm1faW5kZXggPSBpbmRleDsgfVxufVxuXG4vLyAjZW5kaWZcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBb0JBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBTUE7QUFNQTtBQUVBO0FBR0E7QUFDQTtBQVlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVJBO0FBVUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUFBO0FBQ0E7QUFHQTtBQUZBO0FBQ0E7QUFDQTtBQUFBO0FBSkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/particle/b2_particle.ts\n");

/***/ }),

/***/ "./src/box2d/particle/b2_particle_group.ts":
/*!*************************************************!*\
  !*** ./src/box2d/particle/b2_particle_group.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ParticleGroup = exports.b2ParticleGroupDef = exports.b2ParticleGroupFlag = void 0;\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2ParticleGroupFlag;\n(function (b2ParticleGroupFlag) {\n    b2ParticleGroupFlag[b2ParticleGroupFlag[\"b2_solidParticleGroup\"] = 1] = \"b2_solidParticleGroup\";\n    b2ParticleGroupFlag[b2ParticleGroupFlag[\"b2_rigidParticleGroup\"] = 2] = \"b2_rigidParticleGroup\";\n    b2ParticleGroupFlag[b2ParticleGroupFlag[\"b2_particleGroupCanBeEmpty\"] = 4] = \"b2_particleGroupCanBeEmpty\";\n    b2ParticleGroupFlag[b2ParticleGroupFlag[\"b2_particleGroupWillBeDestroyed\"] = 8] = \"b2_particleGroupWillBeDestroyed\";\n    b2ParticleGroupFlag[b2ParticleGroupFlag[\"b2_particleGroupNeedsUpdateDepth\"] = 16] = \"b2_particleGroupNeedsUpdateDepth\";\n    b2ParticleGroupFlag[b2ParticleGroupFlag[\"b2_particleGroupInternalMask\"] = 24] = \"b2_particleGroupInternalMask\";\n})(b2ParticleGroupFlag = exports.b2ParticleGroupFlag || (exports.b2ParticleGroupFlag = {}));\nvar b2ParticleGroupDef = (function () {\n    function b2ParticleGroupDef() {\n        this.flags = 0;\n        this.groupFlags = 0;\n        this.position = new b2_math_1.b2Vec2();\n        this.angle = 0.0;\n        this.linearVelocity = new b2_math_1.b2Vec2();\n        this.angularVelocity = 0.0;\n        this.color = new b2_draw_1.b2Color();\n        this.strength = 1.0;\n        this.shapeCount = 0;\n        this.stride = 0;\n        this.particleCount = 0;\n        this.lifetime = 0;\n        this.userData = null;\n        this.group = null;\n    }\n    return b2ParticleGroupDef;\n}());\nexports.b2ParticleGroupDef = b2ParticleGroupDef;\nvar b2ParticleGroup = (function () {\n    function b2ParticleGroup(system) {\n        this.m_firstIndex = 0;\n        this.m_lastIndex = 0;\n        this.m_groupFlags = 0;\n        this.m_strength = 1.0;\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_timestamp = -1;\n        this.m_mass = 0.0;\n        this.m_inertia = 0.0;\n        this.m_center = new b2_math_1.b2Vec2();\n        this.m_linearVelocity = new b2_math_1.b2Vec2();\n        this.m_angularVelocity = 0.0;\n        this.m_transform = new b2_math_1.b2Transform();\n        this.m_userData = null;\n        this.m_system = system;\n    }\n    b2ParticleGroup.prototype.GetNext = function () {\n        return this.m_next;\n    };\n    b2ParticleGroup.prototype.GetParticleSystem = function () {\n        return this.m_system;\n    };\n    b2ParticleGroup.prototype.GetParticleCount = function () {\n        return this.m_lastIndex - this.m_firstIndex;\n    };\n    b2ParticleGroup.prototype.GetBufferIndex = function () {\n        return this.m_firstIndex;\n    };\n    b2ParticleGroup.prototype.ContainsParticle = function (index) {\n        return this.m_firstIndex <= index && index < this.m_lastIndex;\n    };\n    b2ParticleGroup.prototype.GetAllParticleFlags = function () {\n        if (!this.m_system.m_flagsBuffer.data) {\n            throw new Error();\n        }\n        var flags = 0;\n        for (var i = this.m_firstIndex; i < this.m_lastIndex; i++) {\n            flags |= this.m_system.m_flagsBuffer.data[i];\n        }\n        return flags;\n    };\n    b2ParticleGroup.prototype.GetGroupFlags = function () {\n        return this.m_groupFlags;\n    };\n    b2ParticleGroup.prototype.SetGroupFlags = function (flags) {\n        flags |= this.m_groupFlags & b2ParticleGroupFlag.b2_particleGroupInternalMask;\n        this.m_system.SetGroupFlags(this, flags);\n    };\n    b2ParticleGroup.prototype.GetMass = function () {\n        this.UpdateStatistics();\n        return this.m_mass;\n    };\n    b2ParticleGroup.prototype.GetInertia = function () {\n        this.UpdateStatistics();\n        return this.m_inertia;\n    };\n    b2ParticleGroup.prototype.GetCenter = function () {\n        this.UpdateStatistics();\n        return this.m_center;\n    };\n    b2ParticleGroup.prototype.GetLinearVelocity = function () {\n        this.UpdateStatistics();\n        return this.m_linearVelocity;\n    };\n    b2ParticleGroup.prototype.GetAngularVelocity = function () {\n        this.UpdateStatistics();\n        return this.m_angularVelocity;\n    };\n    b2ParticleGroup.prototype.GetTransform = function () {\n        return this.m_transform;\n    };\n    b2ParticleGroup.prototype.GetPosition = function () {\n        return this.m_transform.p;\n    };\n    b2ParticleGroup.prototype.GetAngle = function () {\n        return this.m_transform.q.GetAngle();\n    };\n    b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint = function (worldPoint, out) {\n        var s_t0 = b2ParticleGroup.GetLinearVelocityFromWorldPoint_s_t0;\n        this.UpdateStatistics();\n        return b2_math_1.b2Vec2.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, b2_math_1.b2Vec2.SubVV(worldPoint, this.m_center, s_t0), out);\n    };\n    b2ParticleGroup.prototype.GetUserData = function () {\n        return this.m_userData;\n    };\n    b2ParticleGroup.prototype.SetUserData = function (data) {\n        this.m_userData = data;\n    };\n    b2ParticleGroup.prototype.ApplyForce = function (force) {\n        this.m_system.ApplyForce(this.m_firstIndex, this.m_lastIndex, force);\n    };\n    b2ParticleGroup.prototype.ApplyLinearImpulse = function (impulse) {\n        this.m_system.ApplyLinearImpulse(this.m_firstIndex, this.m_lastIndex, impulse);\n    };\n    b2ParticleGroup.prototype.DestroyParticles = function (callDestructionListener) {\n        if (this.m_system.m_world.IsLocked()) {\n            throw new Error();\n        }\n        for (var i = this.m_firstIndex; i < this.m_lastIndex; i++) {\n            this.m_system.DestroyParticle(i, callDestructionListener);\n        }\n    };\n    b2ParticleGroup.prototype.UpdateStatistics = function () {\n        if (!this.m_system.m_positionBuffer.data) {\n            throw new Error();\n        }\n        if (!this.m_system.m_velocityBuffer.data) {\n            throw new Error();\n        }\n        var p = new b2_math_1.b2Vec2();\n        var v = new b2_math_1.b2Vec2();\n        if (this.m_timestamp !== this.m_system.m_timestamp) {\n            var m = this.m_system.GetParticleMass();\n            this.m_mass = m * (this.m_lastIndex - this.m_firstIndex);\n            this.m_center.SetZero();\n            this.m_linearVelocity.SetZero();\n            for (var i = this.m_firstIndex; i < this.m_lastIndex; i++) {\n                this.m_center.SelfMulAdd(m, this.m_system.m_positionBuffer.data[i]);\n                this.m_linearVelocity.SelfMulAdd(m, this.m_system.m_velocityBuffer.data[i]);\n            }\n            if (this.m_mass > 0) {\n                var inv_mass = 1 / this.m_mass;\n                this.m_center.SelfMul(inv_mass);\n                this.m_linearVelocity.SelfMul(inv_mass);\n            }\n            this.m_inertia = 0;\n            this.m_angularVelocity = 0;\n            for (var i = this.m_firstIndex; i < this.m_lastIndex; i++) {\n                b2_math_1.b2Vec2.SubVV(this.m_system.m_positionBuffer.data[i], this.m_center, p);\n                b2_math_1.b2Vec2.SubVV(this.m_system.m_velocityBuffer.data[i], this.m_linearVelocity, v);\n                this.m_inertia += m * b2_math_1.b2Vec2.DotVV(p, p);\n                this.m_angularVelocity += m * b2_math_1.b2Vec2.CrossVV(p, v);\n            }\n            if (this.m_inertia > 0) {\n                this.m_angularVelocity *= 1 / this.m_inertia;\n            }\n            this.m_timestamp = this.m_system.m_timestamp;\n        }\n    };\n    b2ParticleGroup.GetLinearVelocityFromWorldPoint_s_t0 = new b2_math_1.b2Vec2();\n    return b2ParticleGroup;\n}());\nexports.b2ParticleGroup = b2ParticleGroup;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvcGFydGljbGUvYjJfcGFydGljbGVfZ3JvdXAudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvcGFydGljbGUvYjJfcGFydGljbGVfZ3JvdXAudHM/ZGEyMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDEzIEdvb2dsZSwgSW5jLlxuICpcbiAqIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4gKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4gKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuICogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4gKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4gKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4gKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuICogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiAqIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuICogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiAqIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4gKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4gKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuICovXG5cbi8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgYjJWZWMyLCBiMlRyYW5zZm9ybSwgWFkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyQ29sb3IsIFJHQkEgfSBmcm9tIFwiLi4vY29tbW9uL2IyX2RyYXdcIjtcbmltcG9ydCB7IGIyU2hhcGUgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3NoYXBlXCI7XG5pbXBvcnQgeyBiMlBhcnRpY2xlRmxhZyB9IGZyb20gXCIuL2IyX3BhcnRpY2xlXCI7XG5pbXBvcnQgeyBiMlBhcnRpY2xlU3lzdGVtIH0gZnJvbSBcIi4vYjJfcGFydGljbGVfc3lzdGVtXCI7XG5cbmV4cG9ydCBlbnVtIGIyUGFydGljbGVHcm91cEZsYWcge1xuICAvLy8gUHJldmVudHMgb3ZlcmxhcHBpbmcgb3IgbGVha2luZy5cbiAgYjJfc29saWRQYXJ0aWNsZUdyb3VwID0gMSA8PCAwLFxuICAvLy8gS2VlcHMgaXRzIHNoYXBlLlxuICBiMl9yaWdpZFBhcnRpY2xlR3JvdXAgPSAxIDw8IDEsXG4gIC8vLyBXb24ndCBiZSBkZXN0cm95ZWQgaWYgaXQgZ2V0cyBlbXB0eS5cbiAgYjJfcGFydGljbGVHcm91cENhbkJlRW1wdHkgPSAxIDw8IDIsXG4gIC8vLyBXaWxsIGJlIGRlc3Ryb3llZCBvbiBuZXh0IHNpbXVsYXRpb24gc3RlcC5cbiAgYjJfcGFydGljbGVHcm91cFdpbGxCZURlc3Ryb3llZCA9IDEgPDwgMyxcbiAgLy8vIFVwZGF0ZXMgZGVwdGggZGF0YSBvbiBuZXh0IHNpbXVsYXRpb24gc3RlcC5cbiAgYjJfcGFydGljbGVHcm91cE5lZWRzVXBkYXRlRGVwdGggPSAxIDw8IDQsXG5cbiAgYjJfcGFydGljbGVHcm91cEludGVybmFsTWFzayA9IGIyX3BhcnRpY2xlR3JvdXBXaWxsQmVEZXN0cm95ZWQgfCBiMl9wYXJ0aWNsZUdyb3VwTmVlZHNVcGRhdGVEZXB0aCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBiMklQYXJ0aWNsZUdyb3VwRGVmIHtcbiAgZmxhZ3M/OiBiMlBhcnRpY2xlRmxhZztcbiAgZ3JvdXBGbGFncz86IGIyUGFydGljbGVHcm91cEZsYWc7XG4gIHBvc2l0aW9uPzogWFk7XG4gIGFuZ2xlPzogbnVtYmVyO1xuICBsaW5lYXJWZWxvY2l0eT86IFhZO1xuICBhbmd1bGFyVmVsb2NpdHk/OiBudW1iZXI7XG4gIGNvbG9yPzogUkdCQTtcbiAgc3RyZW5ndGg/OiBudW1iZXI7XG4gIHNoYXBlPzogYjJTaGFwZTtcbiAgc2hhcGVzPzogYjJTaGFwZVtdO1xuICBzaGFwZUNvdW50PzogbnVtYmVyO1xuICBzdHJpZGU/OiBudW1iZXI7XG4gIHBhcnRpY2xlQ291bnQ/OiBudW1iZXI7XG4gIHBvc2l0aW9uRGF0YT86IFhZW107XG4gIGxpZmV0aW1lPzogbnVtYmVyO1xuICB1c2VyRGF0YT86IGFueTtcbiAgZ3JvdXA/OiBiMlBhcnRpY2xlR3JvdXAgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZUdyb3VwRGVmIGltcGxlbWVudHMgYjJJUGFydGljbGVHcm91cERlZiB7XG4gIHB1YmxpYyBmbGFnczogYjJQYXJ0aWNsZUZsYWcgPSAwO1xuICBwdWJsaWMgZ3JvdXBGbGFnczogYjJQYXJ0aWNsZUdyb3VwRmxhZyA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBwb3NpdGlvbjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgYW5nbGU6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIHJlYWRvbmx5IGxpbmVhclZlbG9jaXR5OiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBhbmd1bGFyVmVsb2NpdHk6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIHJlYWRvbmx5IGNvbG9yOiBiMkNvbG9yID0gbmV3IGIyQ29sb3IoKTtcbiAgcHVibGljIHN0cmVuZ3RoOiBudW1iZXIgPSAxLjA7XG4gIHB1YmxpYyBzaGFwZT86IGIyU2hhcGU7XG4gIHB1YmxpYyBzaGFwZXM/OiBiMlNoYXBlW107XG4gIHB1YmxpYyBzaGFwZUNvdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc3RyaWRlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgcGFydGljbGVDb3VudDogbnVtYmVyID0gMDtcbiAgcHVibGljIHBvc2l0aW9uRGF0YT86IGIyVmVjMltdO1xuICBwdWJsaWMgbGlmZXRpbWU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB1c2VyRGF0YTogYW55ID0gbnVsbDtcbiAgcHVibGljIGdyb3VwOiBiMlBhcnRpY2xlR3JvdXAgfCBudWxsID0gbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVHcm91cCB7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1fc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtO1xuICBwdWJsaWMgbV9maXJzdEluZGV4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9sYXN0SW5kZXg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2dyb3VwRmxhZ3M6IGIyUGFydGljbGVHcm91cEZsYWcgPSAwO1xuICBwdWJsaWMgbV9zdHJlbmd0aDogbnVtYmVyID0gMS4wO1xuICBwdWJsaWMgbV9wcmV2OiBiMlBhcnRpY2xlR3JvdXAgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIG1fbmV4dDogYjJQYXJ0aWNsZUdyb3VwIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBtX3RpbWVzdGFtcDogbnVtYmVyID0gLTE7XG4gIHB1YmxpYyBtX21hc3M6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIG1faW5lcnRpYTogbnVtYmVyID0gMC4wO1xuICBwdWJsaWMgcmVhZG9ubHkgbV9jZW50ZXI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHJlYWRvbmx5IG1fbGluZWFyVmVsb2NpdHk6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIG1fYW5ndWxhclZlbG9jaXR5OiBudW1iZXIgPSAwLjA7XG4gIHB1YmxpYyByZWFkb25seSBtX3RyYW5zZm9ybTogYjJUcmFuc2Zvcm0gPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgLy8vbV90cmFuc2Zvcm0uU2V0SWRlbnRpdHkoKTtcbiAgcHVibGljIG1fdXNlckRhdGE6IGFueSA9IG51bGw7XG5cbiAgY29uc3RydWN0b3Ioc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtKSB7XG4gICAgdGhpcy5tX3N5c3RlbSA9IHN5c3RlbTtcbiAgfVxuXG4gIHB1YmxpYyBHZXROZXh0KCk6IGIyUGFydGljbGVHcm91cCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZVN5c3RlbSgpOiBiMlBhcnRpY2xlU3lzdGVtIHtcbiAgICByZXR1cm4gdGhpcy5tX3N5c3RlbTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9sYXN0SW5kZXggLSB0aGlzLm1fZmlyc3RJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRCdWZmZXJJbmRleCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fZmlyc3RJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBDb250YWluc1BhcnRpY2xlKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX2ZpcnN0SW5kZXggPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLm1fbGFzdEluZGV4O1xuICB9XG5cbiAgcHVibGljIEdldEFsbFBhcnRpY2xlRmxhZ3MoKTogYjJQYXJ0aWNsZUZsYWcge1xuICAgIGlmICghdGhpcy5tX3N5c3RlbS5tX2ZsYWdzQnVmZmVyLmRhdGEpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICBsZXQgZmxhZ3MgPSAwO1xuICAgIGZvciAobGV0IGkgPSB0aGlzLm1fZmlyc3RJbmRleDsgaSA8IHRoaXMubV9sYXN0SW5kZXg7IGkrKykge1xuICAgICAgZmxhZ3MgfD0gdGhpcy5tX3N5c3RlbS5tX2ZsYWdzQnVmZmVyLmRhdGFbaV07XG4gICAgfVxuICAgIHJldHVybiBmbGFncztcbiAgfVxuXG4gIHB1YmxpYyBHZXRHcm91cEZsYWdzKCk6IGIyUGFydGljbGVHcm91cEZsYWcge1xuICAgIHJldHVybiB0aGlzLm1fZ3JvdXBGbGFncztcbiAgfVxuXG4gIHB1YmxpYyBTZXRHcm91cEZsYWdzKGZsYWdzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoKGZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9wYXJ0aWNsZUdyb3VwSW50ZXJuYWxNYXNrKSA9PT0gMCk7XG4gICAgZmxhZ3MgfD0gdGhpcy5tX2dyb3VwRmxhZ3MgJiBiMlBhcnRpY2xlR3JvdXBGbGFnLmIyX3BhcnRpY2xlR3JvdXBJbnRlcm5hbE1hc2s7XG4gICAgdGhpcy5tX3N5c3RlbS5TZXRHcm91cEZsYWdzKHRoaXMsIGZsYWdzKTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRNYXNzKCk6IG51bWJlciB7XG4gICAgdGhpcy5VcGRhdGVTdGF0aXN0aWNzKCk7XG4gICAgcmV0dXJuIHRoaXMubV9tYXNzO1xuICB9XG5cbiAgcHVibGljIEdldEluZXJ0aWEoKTogbnVtYmVyIHtcbiAgICB0aGlzLlVwZGF0ZVN0YXRpc3RpY3MoKTtcbiAgICByZXR1cm4gdGhpcy5tX2luZXJ0aWE7XG4gIH1cblxuICBwdWJsaWMgR2V0Q2VudGVyKCk6IFJlYWRvbmx5PGIyVmVjMj4ge1xuICAgIHRoaXMuVXBkYXRlU3RhdGlzdGljcygpO1xuICAgIHJldHVybiB0aGlzLm1fY2VudGVyO1xuICB9XG5cbiAgcHVibGljIEdldExpbmVhclZlbG9jaXR5KCk6IFJlYWRvbmx5PGIyVmVjMj4ge1xuICAgIHRoaXMuVXBkYXRlU3RhdGlzdGljcygpO1xuICAgIHJldHVybiB0aGlzLm1fbGluZWFyVmVsb2NpdHk7XG4gIH1cblxuICBwdWJsaWMgR2V0QW5ndWxhclZlbG9jaXR5KCk6IG51bWJlciB7XG4gICAgdGhpcy5VcGRhdGVTdGF0aXN0aWNzKCk7XG4gICAgcmV0dXJuIHRoaXMubV9hbmd1bGFyVmVsb2NpdHk7XG4gIH1cblxuICBwdWJsaWMgR2V0VHJhbnNmb3JtKCk6IFJlYWRvbmx5PGIyVHJhbnNmb3JtPiB7XG4gICAgcmV0dXJuIHRoaXMubV90cmFuc2Zvcm07XG4gIH1cblxuICBwdWJsaWMgR2V0UG9zaXRpb24oKTogUmVhZG9ubHk8YjJWZWMyPiB7XG4gICAgcmV0dXJuIHRoaXMubV90cmFuc2Zvcm0ucDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRBbmdsZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fdHJhbnNmb3JtLnEuR2V0QW5nbGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50PFQgZXh0ZW5kcyBYWT4od29ybGRQb2ludDogWFksIG91dDogVCk6IFQge1xuICAgIGNvbnN0IHNfdDAgPSBiMlBhcnRpY2xlR3JvdXAuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludF9zX3QwO1xuICAgIHRoaXMuVXBkYXRlU3RhdGlzdGljcygpO1xuICAgIC8vLyAgcmV0dXJuIG1fbGluZWFyVmVsb2NpdHkgKyBiMkNyb3NzKG1fYW5ndWxhclZlbG9jaXR5LCB3b3JsZFBvaW50IC0gbV9jZW50ZXIpO1xuICAgIHJldHVybiBiMlZlYzIuQWRkVkNyb3NzU1YodGhpcy5tX2xpbmVhclZlbG9jaXR5LCB0aGlzLm1fYW5ndWxhclZlbG9jaXR5LCBiMlZlYzIuU3ViVlYod29ybGRQb2ludCwgdGhpcy5tX2NlbnRlciwgc190MCksIG91dCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBHZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50X3NfdDAgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIEdldFVzZXJEYXRhKCk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gIH1cblxuICBwdWJsaWMgU2V0VXNlckRhdGEoZGF0YTogYW55KTogdm9pZCB7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBBcHBseUZvcmNlKGZvcmNlOiBYWSk6IHZvaWQge1xuICAgIHRoaXMubV9zeXN0ZW0uQXBwbHlGb3JjZSh0aGlzLm1fZmlyc3RJbmRleCwgdGhpcy5tX2xhc3RJbmRleCwgZm9yY2UpO1xuICB9XG5cbiAgcHVibGljIEFwcGx5TGluZWFySW1wdWxzZShpbXB1bHNlOiBYWSk6IHZvaWQge1xuICAgIHRoaXMubV9zeXN0ZW0uQXBwbHlMaW5lYXJJbXB1bHNlKHRoaXMubV9maXJzdEluZGV4LCB0aGlzLm1fbGFzdEluZGV4LCBpbXB1bHNlKTtcbiAgfVxuXG4gIHB1YmxpYyBEZXN0cm95UGFydGljbGVzKGNhbGxEZXN0cnVjdGlvbkxpc3RlbmVyOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV9zeXN0ZW0ubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBmb3IgKGxldCBpID0gdGhpcy5tX2ZpcnN0SW5kZXg7IGkgPCB0aGlzLm1fbGFzdEluZGV4OyBpKyspIHtcbiAgICAgIHRoaXMubV9zeXN0ZW0uRGVzdHJveVBhcnRpY2xlKGksIGNhbGxEZXN0cnVjdGlvbkxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgVXBkYXRlU3RhdGlzdGljcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubV9zeXN0ZW0ubV9wb3NpdGlvbkJ1ZmZlci5kYXRhKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgaWYgKCF0aGlzLm1fc3lzdGVtLm1fdmVsb2NpdHlCdWZmZXIuZGF0YSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIGNvbnN0IHAgPSBuZXcgYjJWZWMyKCk7XG4gICAgY29uc3QgdiA9IG5ldyBiMlZlYzIoKTtcbiAgICBpZiAodGhpcy5tX3RpbWVzdGFtcCAhPT0gdGhpcy5tX3N5c3RlbS5tX3RpbWVzdGFtcCkge1xuICAgICAgY29uc3QgbSA9IHRoaXMubV9zeXN0ZW0uR2V0UGFydGljbGVNYXNzKCk7XG4gICAgICAvLy8gIHRoaXMubV9tYXNzID0gMDtcbiAgICAgIHRoaXMubV9tYXNzID0gbSAqICh0aGlzLm1fbGFzdEluZGV4IC0gdGhpcy5tX2ZpcnN0SW5kZXgpO1xuICAgICAgdGhpcy5tX2NlbnRlci5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuU2V0WmVybygpO1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMubV9maXJzdEluZGV4OyBpIDwgdGhpcy5tX2xhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgIC8vLyAgdGhpcy5tX21hc3MgKz0gbTtcbiAgICAgICAgLy8vICB0aGlzLm1fY2VudGVyICs9IG0gKiB0aGlzLm1fc3lzdGVtLm1fcG9zaXRpb25CdWZmZXIuZGF0YVtpXTtcbiAgICAgICAgdGhpcy5tX2NlbnRlci5TZWxmTXVsQWRkKG0sIHRoaXMubV9zeXN0ZW0ubV9wb3NpdGlvbkJ1ZmZlci5kYXRhW2ldKTtcbiAgICAgICAgLy8vICB0aGlzLm1fbGluZWFyVmVsb2NpdHkgKz0gbSAqIHRoaXMubV9zeXN0ZW0ubV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2ldO1xuICAgICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuU2VsZk11bEFkZChtLCB0aGlzLm1fc3lzdGVtLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtpXSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tX21hc3MgPiAwKSB7XG4gICAgICAgIGNvbnN0IGludl9tYXNzID0gMSAvIHRoaXMubV9tYXNzO1xuICAgICAgICAvLy90aGlzLm1fY2VudGVyICo9IDEgLyB0aGlzLm1fbWFzcztcbiAgICAgICAgdGhpcy5tX2NlbnRlci5TZWxmTXVsKGludl9tYXNzKTtcbiAgICAgICAgLy8vdGhpcy5tX2xpbmVhclZlbG9jaXR5ICo9IDEgLyB0aGlzLm1fbWFzcztcbiAgICAgICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LlNlbGZNdWwoaW52X21hc3MpO1xuICAgICAgfVxuICAgICAgdGhpcy5tX2luZXJ0aWEgPSAwO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5tX2ZpcnN0SW5kZXg7IGkgPCB0aGlzLm1fbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgLy8vYjJWZWMyIHAgPSB0aGlzLm1fc3lzdGVtLm1fcG9zaXRpb25CdWZmZXIuZGF0YVtpXSAtIHRoaXMubV9jZW50ZXI7XG4gICAgICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fc3lzdGVtLm1fcG9zaXRpb25CdWZmZXIuZGF0YVtpXSwgdGhpcy5tX2NlbnRlciwgcCk7XG4gICAgICAgIC8vL2IyVmVjMiB2ID0gdGhpcy5tX3N5c3RlbS5tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbaV0gLSB0aGlzLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fc3lzdGVtLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtpXSwgdGhpcy5tX2xpbmVhclZlbG9jaXR5LCB2KTtcbiAgICAgICAgdGhpcy5tX2luZXJ0aWEgKz0gbSAqIGIyVmVjMi5Eb3RWVihwLCBwKTtcbiAgICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSArPSBtICogYjJWZWMyLkNyb3NzVlYocCwgdik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tX2luZXJ0aWEgPiAwKSB7XG4gICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKj0gMSAvIHRoaXMubV9pbmVydGlhO1xuICAgICAgfVxuICAgICAgdGhpcy5tX3RpbWVzdGFtcCA9IHRoaXMubV9zeXN0ZW0ubV90aW1lc3RhbXA7XG4gICAgfVxuICB9XG59XG5cbi8vICNlbmRpZlxuIl0sIm1hcHBpbmdzIjoiOzs7QUFxQkE7QUFDQTtBQUtBO0FBQUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQXNCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWxCQTtBQW9CQTtBQW1CQTtBQWhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxFQTtBQW1FQTtBQUFBO0FBNUtBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/particle/b2_particle_group.ts\n");

/***/ }),

/***/ "./src/box2d/particle/b2_particle_system.ts":
/*!**************************************************!*\
  !*** ./src/box2d/particle/b2_particle_system.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2ParticleSystem_SolveCollisionCallback = exports.b2ParticleSystem_UpdateBodyContactsCallback = exports.b2ParticleSystem_ReactiveFilter = exports.b2ParticleSystem_CompositeShape = exports.b2ParticleSystem_JoinParticleGroupsFilter = exports.b2ParticleSystem_DestroyParticlesInShapeCallback = exports.b2ParticleSystem_ConnectionFilter = exports.b2ParticlePairSet = exports.b2ParticleSystem_ParticlePair = exports.b2ParticleSystem_FixtureParticleSet = exports.b2ParticleSystem_FixtureParticle = exports.b2ParticleSystem_FixedSetAllocator = exports.b2ParticleSystem_ParticleListNode = exports.b2ParticleSystem_InsideBoundsEnumerator = exports.b2ParticleSystem_Proxy = exports.b2ParticleSystem_UserOverridableBuffer = exports.b2ParticleSystem = exports.b2ParticleSystemDef = exports.b2ParticleTriad = exports.b2ParticlePair = exports.b2ParticleBodyContact = exports.b2ParticleContact = exports.b2FixtureParticleQueryCallback = exports.b2GrowableBuffer = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_settings_2 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_draw_1 = __webpack_require__(/*! ../common/b2_draw */ \"./src/box2d/common/b2_draw.ts\");\nvar b2_collision_1 = __webpack_require__(/*! ../collision/b2_collision */ \"./src/box2d/collision/b2_collision.ts\");\nvar b2_shape_1 = __webpack_require__(/*! ../collision/b2_shape */ \"./src/box2d/collision/b2_shape.ts\");\nvar b2_edge_shape_1 = __webpack_require__(/*! ../collision/b2_edge_shape */ \"./src/box2d/collision/b2_edge_shape.ts\");\nvar b2_time_step_1 = __webpack_require__(/*! ../dynamics/b2_time_step */ \"./src/box2d/dynamics/b2_time_step.ts\");\nvar b2_world_callbacks_1 = __webpack_require__(/*! ../dynamics/b2_world_callbacks */ \"./src/box2d/dynamics/b2_world_callbacks.ts\");\nvar b2_particle_1 = __webpack_require__(/*! ./b2_particle */ \"./src/box2d/particle/b2_particle.ts\");\nvar b2_particle_group_1 = __webpack_require__(/*! ./b2_particle_group */ \"./src/box2d/particle/b2_particle_group.ts\");\nvar b2_voronoi_diagram_1 = __webpack_require__(/*! ./b2_voronoi_diagram */ \"./src/box2d/particle/b2_voronoi_diagram.ts\");\nfunction std_iter_swap(array, a, b) {\n    var tmp = array[a];\n    array[a] = array[b];\n    array[b] = tmp;\n}\nfunction default_compare(a, b) { return a < b; }\nfunction std_sort(array, first, len, cmp) {\n    if (first === void 0) { first = 0; }\n    if (len === void 0) { len = array.length - first; }\n    if (cmp === void 0) { cmp = default_compare; }\n    var left = first;\n    var stack = [];\n    var pos = 0;\n    for (;;) {\n        for (; left + 1 < len; len++) {\n            var pivot = array[left + Math.floor(Math.random() * (len - left))];\n            stack[pos++] = len;\n            for (var right = left - 1;;) {\n                while (cmp(array[++right], pivot)) { }\n                while (cmp(pivot, array[--len])) { }\n                if (right >= len) {\n                    break;\n                }\n                std_iter_swap(array, right, len);\n            }\n        }\n        if (pos === 0) {\n            break;\n        }\n        left = len;\n        len = stack[--pos];\n    }\n    return array;\n}\nfunction std_stable_sort(array, first, len, cmp) {\n    if (first === void 0) { first = 0; }\n    if (len === void 0) { len = array.length - first; }\n    if (cmp === void 0) { cmp = default_compare; }\n    return std_sort(array, first, len, cmp);\n}\nfunction std_remove_if(array, predicate, length) {\n    if (length === void 0) { length = array.length; }\n    var l = 0;\n    for (var c = 0; c < length; ++c) {\n        if (predicate(array[c])) {\n            continue;\n        }\n        if (c === l) {\n            ++l;\n            continue;\n        }\n        std_iter_swap(array, l++, c);\n    }\n    return l;\n}\nfunction std_lower_bound(array, first, last, val, cmp) {\n    var count = last - first;\n    while (count > 0) {\n        var step = Math.floor(count / 2);\n        var it = first + step;\n        if (cmp(array[it], val)) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\nfunction std_upper_bound(array, first, last, val, cmp) {\n    var count = last - first;\n    while (count > 0) {\n        var step = Math.floor(count / 2);\n        var it = first + step;\n        if (!cmp(val, array[it])) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\nfunction std_rotate(array, first, n_first, last) {\n    var next = n_first;\n    while (first !== next) {\n        std_iter_swap(array, first++, next++);\n        if (next === last) {\n            next = n_first;\n        }\n        else if (first === n_first) {\n            n_first = next;\n        }\n    }\n}\nfunction std_unique(array, first, last, cmp) {\n    if (first === last) {\n        return last;\n    }\n    var result = first;\n    while (++first !== last) {\n        if (!cmp(array[result], array[first])) {\n            std_iter_swap(array, ++result, first);\n        }\n    }\n    return ++result;\n}\nvar b2GrowableBuffer = (function () {\n    function b2GrowableBuffer(allocator) {\n        this.data = [];\n        this.count = 0;\n        this.capacity = 0;\n        this.allocator = allocator;\n    }\n    b2GrowableBuffer.prototype.Append = function () {\n        if (this.count >= this.capacity) {\n            this.Grow();\n        }\n        return this.count++;\n    };\n    b2GrowableBuffer.prototype.Reserve = function (newCapacity) {\n        if (this.capacity >= newCapacity) {\n            return;\n        }\n        for (var i = this.capacity; i < newCapacity; ++i) {\n            this.data[i] = this.allocator();\n        }\n        this.capacity = newCapacity;\n    };\n    b2GrowableBuffer.prototype.Grow = function () {\n        var newCapacity = this.capacity ? 2 * this.capacity : b2_settings_1.b2_minParticleSystemBufferCapacity;\n        this.Reserve(newCapacity);\n    };\n    b2GrowableBuffer.prototype.Free = function () {\n        if (this.data.length === 0) {\n            return;\n        }\n        this.data = [];\n        this.capacity = 0;\n        this.count = 0;\n    };\n    b2GrowableBuffer.prototype.Shorten = function (newEnd) {\n    };\n    b2GrowableBuffer.prototype.Data = function () {\n        return this.data;\n    };\n    b2GrowableBuffer.prototype.GetCount = function () {\n        return this.count;\n    };\n    b2GrowableBuffer.prototype.SetCount = function (newCount) {\n        this.count = newCount;\n    };\n    b2GrowableBuffer.prototype.GetCapacity = function () {\n        return this.capacity;\n    };\n    b2GrowableBuffer.prototype.RemoveIf = function (pred) {\n        this.count = std_remove_if(this.data, pred, this.count);\n    };\n    b2GrowableBuffer.prototype.Unique = function (pred) {\n        this.count = std_unique(this.data, 0, this.count, pred);\n    };\n    return b2GrowableBuffer;\n}());\nexports.b2GrowableBuffer = b2GrowableBuffer;\nvar b2FixtureParticleQueryCallback = (function (_super) {\n    __extends(b2FixtureParticleQueryCallback, _super);\n    function b2FixtureParticleQueryCallback(system) {\n        var _this = _super.call(this) || this;\n        _this.m_system = system;\n        return _this;\n    }\n    b2FixtureParticleQueryCallback.prototype.ShouldQueryParticleSystem = function (system) {\n        return false;\n    };\n    b2FixtureParticleQueryCallback.prototype.ReportFixture = function (fixture) {\n        if (fixture.IsSensor()) {\n            return true;\n        }\n        var shape = fixture.GetShape();\n        var childCount = shape.GetChildCount();\n        for (var childIndex = 0; childIndex < childCount; childIndex++) {\n            var aabb = fixture.GetAABB(childIndex);\n            var enumerator = this.m_system.GetInsideBoundsEnumerator(aabb);\n            var index = void 0;\n            while ((index = enumerator.GetNext()) >= 0) {\n                this.ReportFixtureAndParticle(fixture, childIndex, index);\n            }\n        }\n        return true;\n    };\n    b2FixtureParticleQueryCallback.prototype.ReportParticle = function (system, index) {\n        return false;\n    };\n    b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle = function (fixture, childIndex, index) {\n    };\n    return b2FixtureParticleQueryCallback;\n}(b2_world_callbacks_1.b2QueryCallback));\nexports.b2FixtureParticleQueryCallback = b2FixtureParticleQueryCallback;\nvar b2ParticleContact = (function () {\n    function b2ParticleContact() {\n        this.indexA = 0;\n        this.indexB = 0;\n        this.weight = 0;\n        this.normal = new b2_math_1.b2Vec2();\n        this.flags = 0;\n    }\n    b2ParticleContact.prototype.SetIndices = function (a, b) {\n        this.indexA = a;\n        this.indexB = b;\n    };\n    b2ParticleContact.prototype.SetWeight = function (w) {\n        this.weight = w;\n    };\n    b2ParticleContact.prototype.SetNormal = function (n) {\n        this.normal.Copy(n);\n    };\n    b2ParticleContact.prototype.SetFlags = function (f) {\n        this.flags = f;\n    };\n    b2ParticleContact.prototype.GetIndexA = function () {\n        return this.indexA;\n    };\n    b2ParticleContact.prototype.GetIndexB = function () {\n        return this.indexB;\n    };\n    b2ParticleContact.prototype.GetWeight = function () {\n        return this.weight;\n    };\n    b2ParticleContact.prototype.GetNormal = function () {\n        return this.normal;\n    };\n    b2ParticleContact.prototype.GetFlags = function () {\n        return this.flags;\n    };\n    b2ParticleContact.prototype.IsEqual = function (rhs) {\n        return this.indexA === rhs.indexA && this.indexB === rhs.indexB && this.flags === rhs.flags && this.weight === rhs.weight && this.normal.x === rhs.normal.x && this.normal.y === rhs.normal.y;\n    };\n    b2ParticleContact.prototype.IsNotEqual = function (rhs) {\n        return !this.IsEqual(rhs);\n    };\n    b2ParticleContact.prototype.ApproximatelyEqual = function (rhs) {\n        var MAX_WEIGHT_DIFF = 0.01;\n        var MAX_NORMAL_DIFF_SQ = 0.01 * 0.01;\n        return this.indexA === rhs.indexA && this.indexB === rhs.indexB && this.flags === rhs.flags && b2_math_1.b2Abs(this.weight - rhs.weight) < MAX_WEIGHT_DIFF && b2_math_1.b2Vec2.DistanceSquaredVV(this.normal, rhs.normal) < MAX_NORMAL_DIFF_SQ;\n    };\n    return b2ParticleContact;\n}());\nexports.b2ParticleContact = b2ParticleContact;\nvar b2ParticleBodyContact = (function () {\n    function b2ParticleBodyContact() {\n        this.index = 0;\n        this.weight = 0.0;\n        this.normal = new b2_math_1.b2Vec2();\n        this.mass = 0.0;\n    }\n    return b2ParticleBodyContact;\n}());\nexports.b2ParticleBodyContact = b2ParticleBodyContact;\nvar b2ParticlePair = (function () {\n    function b2ParticlePair() {\n        this.indexA = 0;\n        this.indexB = 0;\n        this.flags = 0;\n        this.strength = 0.0;\n        this.distance = 0.0;\n    }\n    return b2ParticlePair;\n}());\nexports.b2ParticlePair = b2ParticlePair;\nvar b2ParticleTriad = (function () {\n    function b2ParticleTriad() {\n        this.indexA = 0;\n        this.indexB = 0;\n        this.indexC = 0;\n        this.flags = 0;\n        this.strength = 0.0;\n        this.pa = new b2_math_1.b2Vec2(0.0, 0.0);\n        this.pb = new b2_math_1.b2Vec2(0.0, 0.0);\n        this.pc = new b2_math_1.b2Vec2(0.0, 0.0);\n        this.ka = 0.0;\n        this.kb = 0.0;\n        this.kc = 0.0;\n        this.s = 0.0;\n    }\n    return b2ParticleTriad;\n}());\nexports.b2ParticleTriad = b2ParticleTriad;\nvar b2ParticleSystemDef = (function () {\n    function b2ParticleSystemDef() {\n        this.strictContactCheck = false;\n        this.density = 1.0;\n        this.gravityScale = 1.0;\n        this.radius = 1.0;\n        this.maxCount = 0;\n        this.pressureStrength = 0.005;\n        this.dampingStrength = 1.0;\n        this.elasticStrength = 0.25;\n        this.springStrength = 0.25;\n        this.viscousStrength = 0.25;\n        this.surfaceTensionPressureStrength = 0.2;\n        this.surfaceTensionNormalStrength = 0.2;\n        this.repulsiveStrength = 1.0;\n        this.powderStrength = 0.5;\n        this.ejectionStrength = 0.5;\n        this.staticPressureStrength = 0.2;\n        this.staticPressureRelaxation = 0.2;\n        this.staticPressureIterations = 8;\n        this.colorMixingStrength = 0.5;\n        this.destroyByAge = true;\n        this.lifetimeGranularity = 1.0 / 60.0;\n    }\n    b2ParticleSystemDef.prototype.Copy = function (def) {\n        this.strictContactCheck = def.strictContactCheck;\n        this.density = def.density;\n        this.gravityScale = def.gravityScale;\n        this.radius = def.radius;\n        this.maxCount = def.maxCount;\n        this.pressureStrength = def.pressureStrength;\n        this.dampingStrength = def.dampingStrength;\n        this.elasticStrength = def.elasticStrength;\n        this.springStrength = def.springStrength;\n        this.viscousStrength = def.viscousStrength;\n        this.surfaceTensionPressureStrength = def.surfaceTensionPressureStrength;\n        this.surfaceTensionNormalStrength = def.surfaceTensionNormalStrength;\n        this.repulsiveStrength = def.repulsiveStrength;\n        this.powderStrength = def.powderStrength;\n        this.ejectionStrength = def.ejectionStrength;\n        this.staticPressureStrength = def.staticPressureStrength;\n        this.staticPressureRelaxation = def.staticPressureRelaxation;\n        this.staticPressureIterations = def.staticPressureIterations;\n        this.colorMixingStrength = def.colorMixingStrength;\n        this.destroyByAge = def.destroyByAge;\n        this.lifetimeGranularity = def.lifetimeGranularity;\n        return this;\n    };\n    b2ParticleSystemDef.prototype.Clone = function () {\n        return new b2ParticleSystemDef().Copy(this);\n    };\n    return b2ParticleSystemDef;\n}());\nexports.b2ParticleSystemDef = b2ParticleSystemDef;\nvar b2ParticleSystem = (function () {\n    function b2ParticleSystem(def, world) {\n        this.m_paused = false;\n        this.m_timestamp = 0;\n        this.m_allParticleFlags = 0;\n        this.m_needsUpdateAllParticleFlags = false;\n        this.m_allGroupFlags = 0;\n        this.m_needsUpdateAllGroupFlags = false;\n        this.m_hasForce = false;\n        this.m_iterationIndex = 0;\n        this.m_inverseDensity = 0.0;\n        this.m_particleDiameter = 0.0;\n        this.m_inverseDiameter = 0.0;\n        this.m_squaredDiameter = 0.0;\n        this.m_count = 0;\n        this.m_internalAllocatedCapacity = 0;\n        this.m_handleIndexBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_flagsBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_positionBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_velocityBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_forceBuffer = [];\n        this.m_weightBuffer = [];\n        this.m_staticPressureBuffer = [];\n        this.m_accumulationBuffer = [];\n        this.m_accumulation2Buffer = [];\n        this.m_depthBuffer = [];\n        this.m_colorBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_groupBuffer = [];\n        this.m_userDataBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_stuckThreshold = 0;\n        this.m_lastBodyContactStepBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_bodyContactCountBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_consecutiveContactStepsBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_stuckParticleBuffer = new b2GrowableBuffer(function () { return 0; });\n        this.m_proxyBuffer = new b2GrowableBuffer(function () { return new b2ParticleSystem_Proxy(); });\n        this.m_contactBuffer = new b2GrowableBuffer(function () { return new b2ParticleContact(); });\n        this.m_bodyContactBuffer = new b2GrowableBuffer(function () { return new b2ParticleBodyContact(); });\n        this.m_pairBuffer = new b2GrowableBuffer(function () { return new b2ParticlePair(); });\n        this.m_triadBuffer = new b2GrowableBuffer(function () { return new b2ParticleTriad(); });\n        this.m_expirationTimeBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_indexByExpirationTimeBuffer = new b2ParticleSystem_UserOverridableBuffer();\n        this.m_timeElapsed = 0;\n        this.m_expirationTimeBufferRequiresSorting = false;\n        this.m_groupCount = 0;\n        this.m_groupList = null;\n        this.m_def = new b2ParticleSystemDef();\n        this.m_prev = null;\n        this.m_next = null;\n        this.UpdateBodyContacts_callback = null;\n        this.SolveCollision_callback = null;\n        this.SetStrictContactCheck(def.strictContactCheck);\n        this.SetDensity(def.density);\n        this.SetGravityScale(def.gravityScale);\n        this.SetRadius(def.radius);\n        this.SetMaxParticleCount(def.maxCount);\n        this.m_def = def.Clone();\n        this.m_world = world;\n        this.SetDestructionByAge(this.m_def.destroyByAge);\n    }\n    b2ParticleSystem.computeTag = function (x, y) {\n        return ((((y + b2ParticleSystem.yOffset) >>> 0) << b2ParticleSystem.yShift) + ((b2ParticleSystem.xScale * x + b2ParticleSystem.xOffset) >>> 0)) >>> 0;\n    };\n    b2ParticleSystem.computeRelativeTag = function (tag, x, y) {\n        return (tag + (y << b2ParticleSystem.yShift) + (x << b2ParticleSystem.xShift)) >>> 0;\n    };\n    b2ParticleSystem.prototype.Drop = function () {\n        while (this.m_groupList) {\n            this.DestroyParticleGroup(this.m_groupList);\n        }\n        this.FreeUserOverridableBuffer(this.m_handleIndexBuffer);\n        this.FreeUserOverridableBuffer(this.m_flagsBuffer);\n        this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer);\n        this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer);\n        this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer);\n        this.FreeUserOverridableBuffer(this.m_positionBuffer);\n        this.FreeUserOverridableBuffer(this.m_velocityBuffer);\n        this.FreeUserOverridableBuffer(this.m_colorBuffer);\n        this.FreeUserOverridableBuffer(this.m_userDataBuffer);\n        this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer);\n        this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer);\n        this.FreeBuffer(this.m_forceBuffer, this.m_internalAllocatedCapacity);\n        this.FreeBuffer(this.m_weightBuffer, this.m_internalAllocatedCapacity);\n        this.FreeBuffer(this.m_staticPressureBuffer, this.m_internalAllocatedCapacity);\n        this.FreeBuffer(this.m_accumulationBuffer, this.m_internalAllocatedCapacity);\n        this.FreeBuffer(this.m_accumulation2Buffer, this.m_internalAllocatedCapacity);\n        this.FreeBuffer(this.m_depthBuffer, this.m_internalAllocatedCapacity);\n        this.FreeBuffer(this.m_groupBuffer, this.m_internalAllocatedCapacity);\n    };\n    b2ParticleSystem.prototype.CreateParticle = function (def) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        if (this.m_count >= this.m_internalAllocatedCapacity) {\n            var capacity = this.m_count ? 2 * this.m_count : b2_settings_1.b2_minParticleSystemBufferCapacity;\n            this.ReallocateInternalAllocatedBuffers(capacity);\n        }\n        if (this.m_count >= this.m_internalAllocatedCapacity) {\n            if (this.m_def.destroyByAge) {\n                this.DestroyOldestParticle(0, false);\n                this.SolveZombie();\n            }\n            else {\n                return b2_settings_1.b2_invalidParticleIndex;\n            }\n        }\n        var index = this.m_count++;\n        this.m_flagsBuffer.data[index] = 0;\n        if (this.m_lastBodyContactStepBuffer.data) {\n            this.m_lastBodyContactStepBuffer.data[index] = 0;\n        }\n        if (this.m_bodyContactCountBuffer.data) {\n            this.m_bodyContactCountBuffer.data[index] = 0;\n        }\n        if (this.m_consecutiveContactStepsBuffer.data) {\n            this.m_consecutiveContactStepsBuffer.data[index] = 0;\n        }\n        this.m_positionBuffer.data[index] = (this.m_positionBuffer.data[index] || new b2_math_1.b2Vec2()).Copy(b2_settings_1.b2Maybe(def.position, b2_math_1.b2Vec2.ZERO));\n        this.m_velocityBuffer.data[index] = (this.m_velocityBuffer.data[index] || new b2_math_1.b2Vec2()).Copy(b2_settings_1.b2Maybe(def.velocity, b2_math_1.b2Vec2.ZERO));\n        this.m_weightBuffer[index] = 0;\n        this.m_forceBuffer[index] = (this.m_forceBuffer[index] || new b2_math_1.b2Vec2()).SetZero();\n        if (this.m_staticPressureBuffer) {\n            this.m_staticPressureBuffer[index] = 0;\n        }\n        if (this.m_depthBuffer) {\n            this.m_depthBuffer[index] = 0;\n        }\n        var color = new b2_draw_1.b2Color().Copy(b2_settings_1.b2Maybe(def.color, b2_draw_1.b2Color.ZERO));\n        if (this.m_colorBuffer.data || !color.IsZero()) {\n            this.m_colorBuffer.data = this.RequestBuffer(this.m_colorBuffer.data);\n            this.m_colorBuffer.data[index] = (this.m_colorBuffer.data[index] || new b2_draw_1.b2Color()).Copy(color);\n        }\n        if (this.m_userDataBuffer.data || def.userData) {\n            this.m_userDataBuffer.data = this.RequestBuffer(this.m_userDataBuffer.data);\n            this.m_userDataBuffer.data[index] = def.userData;\n        }\n        if (this.m_handleIndexBuffer.data) {\n            this.m_handleIndexBuffer.data[index] = null;\n        }\n        var proxy = this.m_proxyBuffer.data[this.m_proxyBuffer.Append()];\n        var lifetime = b2_settings_1.b2Maybe(def.lifetime, 0.0);\n        var finiteLifetime = lifetime > 0.0;\n        if (this.m_expirationTimeBuffer.data || finiteLifetime) {\n            this.SetParticleLifetime(index, finiteLifetime ? lifetime :\n                this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed()));\n            this.m_indexByExpirationTimeBuffer.data[index] = index;\n        }\n        proxy.index = index;\n        var group = b2_settings_1.b2Maybe(def.group, null);\n        this.m_groupBuffer[index] = group;\n        if (group) {\n            if (group.m_firstIndex < group.m_lastIndex) {\n                this.RotateBuffer(group.m_firstIndex, group.m_lastIndex, index);\n                group.m_lastIndex = index + 1;\n            }\n            else {\n                group.m_firstIndex = index;\n                group.m_lastIndex = index + 1;\n            }\n        }\n        this.SetParticleFlags(index, b2_settings_1.b2Maybe(def.flags, 0));\n        return index;\n    };\n    b2ParticleSystem.prototype.GetParticleHandleFromIndex = function (index) {\n        this.m_handleIndexBuffer.data = this.RequestBuffer(this.m_handleIndexBuffer.data);\n        var handle = this.m_handleIndexBuffer.data[index];\n        if (handle) {\n            return handle;\n        }\n        handle = new b2_particle_1.b2ParticleHandle();\n        handle.SetIndex(index);\n        this.m_handleIndexBuffer.data[index] = handle;\n        return handle;\n    };\n    b2ParticleSystem.prototype.DestroyParticle = function (index, callDestructionListener) {\n        if (callDestructionListener === void 0) { callDestructionListener = false; }\n        var flags = b2_particle_1.b2ParticleFlag.b2_zombieParticle;\n        if (callDestructionListener) {\n            flags |= b2_particle_1.b2ParticleFlag.b2_destructionListenerParticle;\n        }\n        this.SetParticleFlags(index, this.m_flagsBuffer.data[index] | flags);\n    };\n    b2ParticleSystem.prototype.DestroyOldestParticle = function (index, callDestructionListener) {\n        if (callDestructionListener === void 0) { callDestructionListener = false; }\n        var particleCount = this.GetParticleCount();\n        var oldestFiniteLifetimeParticle = this.m_indexByExpirationTimeBuffer.data[particleCount - (index + 1)];\n        var oldestInfiniteLifetimeParticle = this.m_indexByExpirationTimeBuffer.data[index];\n        this.DestroyParticle(this.m_expirationTimeBuffer.data[oldestFiniteLifetimeParticle] > 0.0 ?\n            oldestFiniteLifetimeParticle : oldestInfiniteLifetimeParticle, callDestructionListener);\n    };\n    b2ParticleSystem.prototype.DestroyParticlesInShape = function (shape, xf, callDestructionListener) {\n        if (callDestructionListener === void 0) { callDestructionListener = false; }\n        var s_aabb = b2ParticleSystem.DestroyParticlesInShape_s_aabb;\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        var callback = new b2ParticleSystem_DestroyParticlesInShapeCallback(this, shape, xf, callDestructionListener);\n        var aabb = s_aabb;\n        shape.ComputeAABB(aabb, xf, 0);\n        this.m_world.QueryAABB(callback, aabb);\n        return callback.Destroyed();\n    };\n    b2ParticleSystem.prototype.CreateParticleGroup = function (groupDef) {\n        var s_transform = b2ParticleSystem.CreateParticleGroup_s_transform;\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        var transform = s_transform;\n        transform.SetPositionAngle(b2_settings_1.b2Maybe(groupDef.position, b2_math_1.b2Vec2.ZERO), b2_settings_1.b2Maybe(groupDef.angle, 0));\n        var firstIndex = this.m_count;\n        if (groupDef.shape) {\n            this.CreateParticlesWithShapeForGroup(groupDef.shape, groupDef, transform);\n        }\n        if (groupDef.shapes) {\n            this.CreateParticlesWithShapesForGroup(groupDef.shapes, b2_settings_1.b2Maybe(groupDef.shapeCount, groupDef.shapes.length), groupDef, transform);\n        }\n        if (groupDef.positionData) {\n            var count = b2_settings_1.b2Maybe(groupDef.particleCount, groupDef.positionData.length);\n            for (var i = 0; i < count; i++) {\n                var p = groupDef.positionData[i];\n                this.CreateParticleForGroup(groupDef, transform, p);\n            }\n        }\n        var lastIndex = this.m_count;\n        var group = new b2_particle_group_1.b2ParticleGroup(this);\n        group.m_firstIndex = firstIndex;\n        group.m_lastIndex = lastIndex;\n        group.m_strength = b2_settings_1.b2Maybe(groupDef.strength, 1);\n        group.m_userData = groupDef.userData;\n        group.m_transform.Copy(transform);\n        group.m_prev = null;\n        group.m_next = this.m_groupList;\n        if (this.m_groupList) {\n            this.m_groupList.m_prev = group;\n        }\n        this.m_groupList = group;\n        ++this.m_groupCount;\n        for (var i = firstIndex; i < lastIndex; i++) {\n            this.m_groupBuffer[i] = group;\n        }\n        this.SetGroupFlags(group, b2_settings_1.b2Maybe(groupDef.groupFlags, 0));\n        var filter = new b2ParticleSystem_ConnectionFilter();\n        this.UpdateContacts(true);\n        this.UpdatePairsAndTriads(firstIndex, lastIndex, filter);\n        if (groupDef.group) {\n            this.JoinParticleGroups(groupDef.group, group);\n            group = groupDef.group;\n        }\n        return group;\n    };\n    b2ParticleSystem.prototype.JoinParticleGroups = function (groupA, groupB) {\n        if (this.m_world.IsLocked()) {\n            throw new Error();\n        }\n        this.RotateBuffer(groupB.m_firstIndex, groupB.m_lastIndex, this.m_count);\n        this.RotateBuffer(groupA.m_firstIndex, groupA.m_lastIndex, groupB.m_firstIndex);\n        var filter = new b2ParticleSystem_JoinParticleGroupsFilter(groupB.m_firstIndex);\n        this.UpdateContacts(true);\n        this.UpdatePairsAndTriads(groupA.m_firstIndex, groupB.m_lastIndex, filter);\n        for (var i = groupB.m_firstIndex; i < groupB.m_lastIndex; i++) {\n            this.m_groupBuffer[i] = groupA;\n        }\n        var groupFlags = groupA.m_groupFlags | groupB.m_groupFlags;\n        this.SetGroupFlags(groupA, groupFlags);\n        groupA.m_lastIndex = groupB.m_lastIndex;\n        groupB.m_firstIndex = groupB.m_lastIndex;\n        this.DestroyParticleGroup(groupB);\n    };\n    b2ParticleSystem.prototype.SplitParticleGroup = function (group) {\n        this.UpdateContacts(true);\n        var particleCount = group.GetParticleCount();\n        var nodeBuffer = b2_settings_1.b2MakeArray(particleCount, function (index) { return new b2ParticleSystem_ParticleListNode(); });\n        b2ParticleSystem.InitializeParticleLists(group, nodeBuffer);\n        this.MergeParticleListsInContact(group, nodeBuffer);\n        var survivingList = b2ParticleSystem.FindLongestParticleList(group, nodeBuffer);\n        this.MergeZombieParticleListNodes(group, nodeBuffer, survivingList);\n        this.CreateParticleGroupsFromParticleList(group, nodeBuffer, survivingList);\n        this.UpdatePairsAndTriadsWithParticleList(group, nodeBuffer);\n    };\n    b2ParticleSystem.prototype.GetParticleGroupList = function () {\n        return this.m_groupList;\n    };\n    b2ParticleSystem.prototype.GetParticleGroupCount = function () {\n        return this.m_groupCount;\n    };\n    b2ParticleSystem.prototype.GetParticleCount = function () {\n        return this.m_count;\n    };\n    b2ParticleSystem.prototype.GetMaxParticleCount = function () {\n        return this.m_def.maxCount;\n    };\n    b2ParticleSystem.prototype.SetMaxParticleCount = function (count) {\n        this.m_def.maxCount = count;\n    };\n    b2ParticleSystem.prototype.GetAllParticleFlags = function () {\n        return this.m_allParticleFlags;\n    };\n    b2ParticleSystem.prototype.GetAllGroupFlags = function () {\n        return this.m_allGroupFlags;\n    };\n    b2ParticleSystem.prototype.SetPaused = function (paused) {\n        this.m_paused = paused;\n    };\n    b2ParticleSystem.prototype.GetPaused = function () {\n        return this.m_paused;\n    };\n    b2ParticleSystem.prototype.SetDensity = function (density) {\n        this.m_def.density = density;\n        this.m_inverseDensity = 1 / this.m_def.density;\n    };\n    b2ParticleSystem.prototype.GetDensity = function () {\n        return this.m_def.density;\n    };\n    b2ParticleSystem.prototype.SetGravityScale = function (gravityScale) {\n        this.m_def.gravityScale = gravityScale;\n    };\n    b2ParticleSystem.prototype.GetGravityScale = function () {\n        return this.m_def.gravityScale;\n    };\n    b2ParticleSystem.prototype.SetDamping = function (damping) {\n        this.m_def.dampingStrength = damping;\n    };\n    b2ParticleSystem.prototype.GetDamping = function () {\n        return this.m_def.dampingStrength;\n    };\n    b2ParticleSystem.prototype.SetStaticPressureIterations = function (iterations) {\n        this.m_def.staticPressureIterations = iterations;\n    };\n    b2ParticleSystem.prototype.GetStaticPressureIterations = function () {\n        return this.m_def.staticPressureIterations;\n    };\n    b2ParticleSystem.prototype.SetRadius = function (radius) {\n        this.m_particleDiameter = 2 * radius;\n        this.m_squaredDiameter = this.m_particleDiameter * this.m_particleDiameter;\n        this.m_inverseDiameter = 1 / this.m_particleDiameter;\n    };\n    b2ParticleSystem.prototype.GetRadius = function () {\n        return this.m_particleDiameter / 2;\n    };\n    b2ParticleSystem.prototype.GetPositionBuffer = function () {\n        return this.m_positionBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetVelocityBuffer = function () {\n        return this.m_velocityBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetColorBuffer = function () {\n        this.m_colorBuffer.data = this.RequestBuffer(this.m_colorBuffer.data);\n        return this.m_colorBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetGroupBuffer = function () {\n        return this.m_groupBuffer;\n    };\n    b2ParticleSystem.prototype.GetWeightBuffer = function () {\n        return this.m_weightBuffer;\n    };\n    b2ParticleSystem.prototype.GetUserDataBuffer = function () {\n        this.m_userDataBuffer.data = this.RequestBuffer(this.m_userDataBuffer.data);\n        return this.m_userDataBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetFlagsBuffer = function () {\n        return this.m_flagsBuffer.data;\n    };\n    b2ParticleSystem.prototype.SetParticleFlags = function (index, newFlags) {\n        var oldFlags = this.m_flagsBuffer.data[index];\n        if (oldFlags & ~newFlags) {\n            this.m_needsUpdateAllParticleFlags = true;\n        }\n        if (~this.m_allParticleFlags & newFlags) {\n            if (newFlags & b2_particle_1.b2ParticleFlag.b2_tensileParticle) {\n                this.m_accumulation2Buffer = this.RequestBuffer(this.m_accumulation2Buffer);\n            }\n            if (newFlags & b2_particle_1.b2ParticleFlag.b2_colorMixingParticle) {\n                this.m_colorBuffer.data = this.RequestBuffer(this.m_colorBuffer.data);\n            }\n            this.m_allParticleFlags |= newFlags;\n        }\n        this.m_flagsBuffer.data[index] = newFlags;\n    };\n    b2ParticleSystem.prototype.GetParticleFlags = function (index) {\n        return this.m_flagsBuffer.data[index];\n    };\n    b2ParticleSystem.prototype.SetFlagsBuffer = function (buffer) {\n        this.SetUserOverridableBuffer(this.m_flagsBuffer, buffer);\n    };\n    b2ParticleSystem.prototype.SetPositionBuffer = function (buffer) {\n        if (buffer instanceof Float32Array) {\n            if (buffer.length % 2 !== 0) {\n                throw new Error();\n            }\n            var count = buffer.length / 2;\n            var array = new Array(count);\n            for (var i = 0; i < count; ++i) {\n                array[i] = new b2_math_1.b2TypedVec2(buffer.subarray(i * 2, i * 2 + 2));\n            }\n            buffer = array;\n        }\n        this.SetUserOverridableBuffer(this.m_positionBuffer, buffer);\n    };\n    b2ParticleSystem.prototype.SetVelocityBuffer = function (buffer) {\n        if (buffer instanceof Float32Array) {\n            if (buffer.length % 2 !== 0) {\n                throw new Error();\n            }\n            var count = buffer.length / 2;\n            var array = new Array(count);\n            for (var i = 0; i < count; ++i) {\n                array[i] = new b2_math_1.b2TypedVec2(buffer.subarray(i * 2, i * 2 + 2));\n            }\n            buffer = array;\n        }\n        this.SetUserOverridableBuffer(this.m_velocityBuffer, buffer);\n    };\n    b2ParticleSystem.prototype.SetColorBuffer = function (buffer) {\n        if (buffer instanceof Float32Array) {\n            if (buffer.length % 4 !== 0) {\n                throw new Error();\n            }\n            var count = buffer.length / 4;\n            var array = new Array(count);\n            for (var i = 0; i < count; ++i) {\n                array[i] = new b2_draw_1.b2TypedColor(buffer.subarray(i * 4, i * 4 + 4));\n            }\n            buffer = array;\n        }\n        this.SetUserOverridableBuffer(this.m_colorBuffer, buffer);\n    };\n    b2ParticleSystem.prototype.SetUserDataBuffer = function (buffer) {\n        this.SetUserOverridableBuffer(this.m_userDataBuffer, buffer);\n    };\n    b2ParticleSystem.prototype.GetContacts = function () {\n        return this.m_contactBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetContactCount = function () {\n        return this.m_contactBuffer.count;\n    };\n    b2ParticleSystem.prototype.GetBodyContacts = function () {\n        return this.m_bodyContactBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetBodyContactCount = function () {\n        return this.m_bodyContactBuffer.count;\n    };\n    b2ParticleSystem.prototype.GetPairs = function () {\n        return this.m_pairBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetPairCount = function () {\n        return this.m_pairBuffer.count;\n    };\n    b2ParticleSystem.prototype.GetTriads = function () {\n        return this.m_triadBuffer.data;\n    };\n    b2ParticleSystem.prototype.GetTriadCount = function () {\n        return this.m_triadBuffer.count;\n    };\n    b2ParticleSystem.prototype.SetStuckThreshold = function (steps) {\n        this.m_stuckThreshold = steps;\n        if (steps > 0) {\n            this.m_lastBodyContactStepBuffer.data = this.RequestBuffer(this.m_lastBodyContactStepBuffer.data);\n            this.m_bodyContactCountBuffer.data = this.RequestBuffer(this.m_bodyContactCountBuffer.data);\n            this.m_consecutiveContactStepsBuffer.data = this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data);\n        }\n    };\n    b2ParticleSystem.prototype.GetStuckCandidates = function () {\n        return this.m_stuckParticleBuffer.Data();\n    };\n    b2ParticleSystem.prototype.GetStuckCandidateCount = function () {\n        return this.m_stuckParticleBuffer.GetCount();\n    };\n    b2ParticleSystem.prototype.ComputeCollisionEnergy = function () {\n        var s_v = b2ParticleSystem.ComputeCollisionEnergy_s_v;\n        var vel_data = this.m_velocityBuffer.data;\n        var sum_v2 = 0;\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var n = contact.normal;\n            var v = b2_math_1.b2Vec2.SubVV(vel_data[b], vel_data[a], s_v);\n            var vn = b2_math_1.b2Vec2.DotVV(v, n);\n            if (vn < 0) {\n                sum_v2 += vn * vn;\n            }\n        }\n        return 0.5 * this.GetParticleMass() * sum_v2;\n    };\n    b2ParticleSystem.prototype.SetStrictContactCheck = function (enabled) {\n        this.m_def.strictContactCheck = enabled;\n    };\n    b2ParticleSystem.prototype.GetStrictContactCheck = function () {\n        return this.m_def.strictContactCheck;\n    };\n    b2ParticleSystem.prototype.SetParticleLifetime = function (index, lifetime) {\n        var initializeExpirationTimes = this.m_indexByExpirationTimeBuffer.data === null;\n        this.m_expirationTimeBuffer.data = this.RequestBuffer(this.m_expirationTimeBuffer.data);\n        this.m_indexByExpirationTimeBuffer.data = this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data);\n        if (initializeExpirationTimes) {\n            var particleCount = this.GetParticleCount();\n            for (var i = 0; i < particleCount; ++i) {\n                this.m_indexByExpirationTimeBuffer.data[i] = i;\n            }\n        }\n        var quantizedLifetime = lifetime / this.m_def.lifetimeGranularity;\n        var newExpirationTime = quantizedLifetime > 0.0 ? this.GetQuantizedTimeElapsed() + quantizedLifetime : quantizedLifetime;\n        if (newExpirationTime !== this.m_expirationTimeBuffer.data[index]) {\n            this.m_expirationTimeBuffer.data[index] = newExpirationTime;\n            this.m_expirationTimeBufferRequiresSorting = true;\n        }\n    };\n    b2ParticleSystem.prototype.GetParticleLifetime = function (index) {\n        return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[index]);\n    };\n    b2ParticleSystem.prototype.SetDestructionByAge = function (enable) {\n        if (enable) {\n            this.GetExpirationTimeBuffer();\n        }\n        this.m_def.destroyByAge = enable;\n    };\n    b2ParticleSystem.prototype.GetDestructionByAge = function () {\n        return this.m_def.destroyByAge;\n    };\n    b2ParticleSystem.prototype.GetExpirationTimeBuffer = function () {\n        this.m_expirationTimeBuffer.data = this.RequestBuffer(this.m_expirationTimeBuffer.data);\n        return this.m_expirationTimeBuffer.data;\n    };\n    b2ParticleSystem.prototype.ExpirationTimeToLifetime = function (expirationTime) {\n        return (expirationTime > 0 ?\n            expirationTime - this.GetQuantizedTimeElapsed() :\n            expirationTime) * this.m_def.lifetimeGranularity;\n    };\n    b2ParticleSystem.prototype.GetIndexByExpirationTimeBuffer = function () {\n        if (this.GetParticleCount()) {\n            this.SetParticleLifetime(0, this.GetParticleLifetime(0));\n        }\n        else {\n            this.m_indexByExpirationTimeBuffer.data = this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data);\n        }\n        return this.m_indexByExpirationTimeBuffer.data;\n    };\n    b2ParticleSystem.prototype.ParticleApplyLinearImpulse = function (index, impulse) {\n        this.ApplyLinearImpulse(index, index + 1, impulse);\n    };\n    b2ParticleSystem.prototype.ApplyLinearImpulse = function (firstIndex, lastIndex, impulse) {\n        var vel_data = this.m_velocityBuffer.data;\n        var numParticles = (lastIndex - firstIndex);\n        var totalMass = numParticles * this.GetParticleMass();\n        var velocityDelta = new b2_math_1.b2Vec2().Copy(impulse).SelfMul(1 / totalMass);\n        for (var i = firstIndex; i < lastIndex; i++) {\n            vel_data[i].SelfAdd(velocityDelta);\n        }\n    };\n    b2ParticleSystem.IsSignificantForce = function (force) {\n        return force.x !== 0 || force.y !== 0;\n    };\n    b2ParticleSystem.prototype.ParticleApplyForce = function (index, force) {\n        if (b2ParticleSystem.IsSignificantForce(force) &&\n            this.ForceCanBeApplied(this.m_flagsBuffer.data[index])) {\n            this.PrepareForceBuffer();\n            this.m_forceBuffer[index].SelfAdd(force);\n        }\n    };\n    b2ParticleSystem.prototype.ApplyForce = function (firstIndex, lastIndex, force) {\n        var distributedForce = new b2_math_1.b2Vec2().Copy(force).SelfMul(1 / (lastIndex - firstIndex));\n        if (b2ParticleSystem.IsSignificantForce(distributedForce)) {\n            this.PrepareForceBuffer();\n            for (var i = firstIndex; i < lastIndex; i++) {\n                this.m_forceBuffer[i].SelfAdd(distributedForce);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.GetNext = function () {\n        return this.m_next;\n    };\n    b2ParticleSystem.prototype.QueryAABB = function (callback, aabb) {\n        if (this.m_proxyBuffer.count === 0) {\n            return;\n        }\n        var beginProxy = 0;\n        var endProxy = this.m_proxyBuffer.count;\n        var firstProxy = std_lower_bound(this.m_proxyBuffer.data, beginProxy, endProxy, b2ParticleSystem.computeTag(this.m_inverseDiameter * aabb.lowerBound.x, this.m_inverseDiameter * aabb.lowerBound.y), b2ParticleSystem_Proxy.CompareProxyTag);\n        var lastProxy = std_upper_bound(this.m_proxyBuffer.data, firstProxy, endProxy, b2ParticleSystem.computeTag(this.m_inverseDiameter * aabb.upperBound.x, this.m_inverseDiameter * aabb.upperBound.y), b2ParticleSystem_Proxy.CompareTagProxy);\n        var pos_data = this.m_positionBuffer.data;\n        for (var k = firstProxy; k < lastProxy; ++k) {\n            var proxy = this.m_proxyBuffer.data[k];\n            var i = proxy.index;\n            var p = pos_data[i];\n            if (aabb.lowerBound.x < p.x && p.x < aabb.upperBound.x &&\n                aabb.lowerBound.y < p.y && p.y < aabb.upperBound.y) {\n                if (!callback.ReportParticle(this, i)) {\n                    break;\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.QueryShapeAABB = function (callback, shape, xf, childIndex) {\n        if (childIndex === void 0) { childIndex = 0; }\n        var s_aabb = b2ParticleSystem.QueryShapeAABB_s_aabb;\n        var aabb = s_aabb;\n        shape.ComputeAABB(aabb, xf, childIndex);\n        this.QueryAABB(callback, aabb);\n    };\n    b2ParticleSystem.prototype.QueryPointAABB = function (callback, point, slop) {\n        if (slop === void 0) { slop = b2_settings_1.b2_linearSlop; }\n        var s_aabb = b2ParticleSystem.QueryPointAABB_s_aabb;\n        var aabb = s_aabb;\n        aabb.lowerBound.Set(point.x - slop, point.y - slop);\n        aabb.upperBound.Set(point.x + slop, point.y + slop);\n        this.QueryAABB(callback, aabb);\n    };\n    b2ParticleSystem.prototype.RayCast = function (callback, point1, point2) {\n        var s_aabb = b2ParticleSystem.RayCast_s_aabb;\n        var s_p = b2ParticleSystem.RayCast_s_p;\n        var s_v = b2ParticleSystem.RayCast_s_v;\n        var s_n = b2ParticleSystem.RayCast_s_n;\n        var s_point = b2ParticleSystem.RayCast_s_point;\n        if (this.m_proxyBuffer.count === 0) {\n            return;\n        }\n        var pos_data = this.m_positionBuffer.data;\n        var aabb = s_aabb;\n        b2_math_1.b2Vec2.MinV(point1, point2, aabb.lowerBound);\n        b2_math_1.b2Vec2.MaxV(point1, point2, aabb.upperBound);\n        var fraction = 1;\n        var v = b2_math_1.b2Vec2.SubVV(point2, point1, s_v);\n        var v2 = b2_math_1.b2Vec2.DotVV(v, v);\n        var enumerator = this.GetInsideBoundsEnumerator(aabb);\n        var i;\n        while ((i = enumerator.GetNext()) >= 0) {\n            var p = b2_math_1.b2Vec2.SubVV(point1, pos_data[i], s_p);\n            var pv = b2_math_1.b2Vec2.DotVV(p, v);\n            var p2 = b2_math_1.b2Vec2.DotVV(p, p);\n            var determinant = pv * pv - v2 * (p2 - this.m_squaredDiameter);\n            if (determinant >= 0) {\n                var sqrtDeterminant = b2_math_1.b2Sqrt(determinant);\n                var t = (-pv - sqrtDeterminant) / v2;\n                if (t > fraction) {\n                    continue;\n                }\n                if (t < 0) {\n                    t = (-pv + sqrtDeterminant) / v2;\n                    if (t < 0 || t > fraction) {\n                        continue;\n                    }\n                }\n                var n = b2_math_1.b2Vec2.AddVMulSV(p, t, v, s_n);\n                n.Normalize();\n                var f = callback.ReportParticle(this, i, b2_math_1.b2Vec2.AddVMulSV(point1, t, v, s_point), n, t);\n                fraction = b2_math_1.b2Min(fraction, f);\n                if (fraction <= 0) {\n                    break;\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.ComputeAABB = function (aabb) {\n        var particleCount = this.GetParticleCount();\n        aabb.lowerBound.x = +b2_settings_1.b2_maxFloat;\n        aabb.lowerBound.y = +b2_settings_1.b2_maxFloat;\n        aabb.upperBound.x = -b2_settings_1.b2_maxFloat;\n        aabb.upperBound.y = -b2_settings_1.b2_maxFloat;\n        var pos_data = this.m_positionBuffer.data;\n        for (var i = 0; i < particleCount; i++) {\n            var p = pos_data[i];\n            b2_math_1.b2Vec2.MinV(aabb.lowerBound, p, aabb.lowerBound);\n            b2_math_1.b2Vec2.MaxV(aabb.upperBound, p, aabb.upperBound);\n        }\n        aabb.lowerBound.x -= this.m_particleDiameter;\n        aabb.lowerBound.y -= this.m_particleDiameter;\n        aabb.upperBound.x += this.m_particleDiameter;\n        aabb.upperBound.y += this.m_particleDiameter;\n    };\n    b2ParticleSystem.prototype.FreeBuffer = function (b, capacity) {\n        if (b === null) {\n            return;\n        }\n        b.length = 0;\n    };\n    b2ParticleSystem.prototype.FreeUserOverridableBuffer = function (b) {\n        if (b.userSuppliedCapacity === 0) {\n            this.FreeBuffer(b.data, this.m_internalAllocatedCapacity);\n        }\n    };\n    b2ParticleSystem.prototype.ReallocateBuffer3 = function (oldBuffer, oldCapacity, newCapacity) {\n        if (newCapacity <= oldCapacity) {\n            throw new Error();\n        }\n        var newBuffer = (oldBuffer) ? oldBuffer.slice() : [];\n        newBuffer.length = newCapacity;\n        return newBuffer;\n    };\n    b2ParticleSystem.prototype.ReallocateBuffer5 = function (buffer, userSuppliedCapacity, oldCapacity, newCapacity, deferred) {\n        if (newCapacity <= oldCapacity) {\n            throw new Error();\n        }\n        if (!(!userSuppliedCapacity || newCapacity <= userSuppliedCapacity)) {\n            throw new Error();\n        }\n        if ((!deferred || buffer) && !userSuppliedCapacity) {\n            buffer = this.ReallocateBuffer3(buffer, oldCapacity, newCapacity);\n        }\n        return buffer;\n    };\n    b2ParticleSystem.prototype.ReallocateBuffer4 = function (buffer, oldCapacity, newCapacity, deferred) {\n        return this.ReallocateBuffer5(buffer.data, buffer.userSuppliedCapacity, oldCapacity, newCapacity, deferred);\n    };\n    b2ParticleSystem.prototype.RequestBuffer = function (buffer) {\n        if (!buffer) {\n            if (this.m_internalAllocatedCapacity === 0) {\n                this.ReallocateInternalAllocatedBuffers(b2_settings_1.b2_minParticleSystemBufferCapacity);\n            }\n            buffer = [];\n            buffer.length = this.m_internalAllocatedCapacity;\n        }\n        return buffer;\n    };\n    b2ParticleSystem.prototype.ReallocateHandleBuffers = function (newCapacity) {\n        this.m_handleIndexBuffer.data = this.ReallocateBuffer4(this.m_handleIndexBuffer, this.m_internalAllocatedCapacity, newCapacity, true);\n    };\n    b2ParticleSystem.prototype.ReallocateInternalAllocatedBuffers = function (capacity) {\n        function LimitCapacity(capacity, maxCount) {\n            return maxCount && capacity > maxCount ? maxCount : capacity;\n        }\n        capacity = LimitCapacity(capacity, this.m_def.maxCount);\n        capacity = LimitCapacity(capacity, this.m_flagsBuffer.userSuppliedCapacity);\n        capacity = LimitCapacity(capacity, this.m_positionBuffer.userSuppliedCapacity);\n        capacity = LimitCapacity(capacity, this.m_velocityBuffer.userSuppliedCapacity);\n        capacity = LimitCapacity(capacity, this.m_colorBuffer.userSuppliedCapacity);\n        capacity = LimitCapacity(capacity, this.m_userDataBuffer.userSuppliedCapacity);\n        if (this.m_internalAllocatedCapacity < capacity) {\n            this.ReallocateHandleBuffers(capacity);\n            this.m_flagsBuffer.data = this.ReallocateBuffer4(this.m_flagsBuffer, this.m_internalAllocatedCapacity, capacity, false);\n            var stuck = this.m_stuckThreshold > 0;\n            this.m_lastBodyContactStepBuffer.data = this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer, this.m_internalAllocatedCapacity, capacity, stuck);\n            this.m_bodyContactCountBuffer.data = this.ReallocateBuffer4(this.m_bodyContactCountBuffer, this.m_internalAllocatedCapacity, capacity, stuck);\n            this.m_consecutiveContactStepsBuffer.data = this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer, this.m_internalAllocatedCapacity, capacity, stuck);\n            this.m_positionBuffer.data = this.ReallocateBuffer4(this.m_positionBuffer, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_velocityBuffer.data = this.ReallocateBuffer4(this.m_velocityBuffer, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_forceBuffer = this.ReallocateBuffer5(this.m_forceBuffer, 0, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_weightBuffer = this.ReallocateBuffer5(this.m_weightBuffer, 0, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_staticPressureBuffer = this.ReallocateBuffer5(this.m_staticPressureBuffer, 0, this.m_internalAllocatedCapacity, capacity, true);\n            this.m_accumulationBuffer = this.ReallocateBuffer5(this.m_accumulationBuffer, 0, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_accumulation2Buffer = this.ReallocateBuffer5(this.m_accumulation2Buffer, 0, this.m_internalAllocatedCapacity, capacity, true);\n            this.m_depthBuffer = this.ReallocateBuffer5(this.m_depthBuffer, 0, this.m_internalAllocatedCapacity, capacity, true);\n            this.m_colorBuffer.data = this.ReallocateBuffer4(this.m_colorBuffer, this.m_internalAllocatedCapacity, capacity, true);\n            this.m_groupBuffer = this.ReallocateBuffer5(this.m_groupBuffer, 0, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_userDataBuffer.data = this.ReallocateBuffer4(this.m_userDataBuffer, this.m_internalAllocatedCapacity, capacity, true);\n            this.m_expirationTimeBuffer.data = this.ReallocateBuffer4(this.m_expirationTimeBuffer, this.m_internalAllocatedCapacity, capacity, true);\n            this.m_indexByExpirationTimeBuffer.data = this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer, this.m_internalAllocatedCapacity, capacity, false);\n            this.m_internalAllocatedCapacity = capacity;\n        }\n    };\n    b2ParticleSystem.prototype.CreateParticleForGroup = function (groupDef, xf, p) {\n        var particleDef = new b2_particle_1.b2ParticleDef();\n        particleDef.flags = b2_settings_1.b2Maybe(groupDef.flags, 0);\n        b2_math_1.b2Transform.MulXV(xf, p, particleDef.position);\n        b2_math_1.b2Vec2.AddVV(b2_settings_1.b2Maybe(groupDef.linearVelocity, b2_math_1.b2Vec2.ZERO), b2_math_1.b2Vec2.CrossSV(b2_settings_1.b2Maybe(groupDef.angularVelocity, 0), b2_math_1.b2Vec2.SubVV(particleDef.position, b2_settings_1.b2Maybe(groupDef.position, b2_math_1.b2Vec2.ZERO), b2_math_1.b2Vec2.s_t0), b2_math_1.b2Vec2.s_t0), particleDef.velocity);\n        particleDef.color.Copy(b2_settings_1.b2Maybe(groupDef.color, b2_draw_1.b2Color.ZERO));\n        particleDef.lifetime = b2_settings_1.b2Maybe(groupDef.lifetime, 0);\n        particleDef.userData = groupDef.userData;\n        this.CreateParticle(particleDef);\n    };\n    b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup = function (shape, groupDef, xf) {\n        var s_edge = b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_edge;\n        var s_d = b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_d;\n        var s_p = b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_p;\n        var stride = b2_settings_1.b2Maybe(groupDef.stride, 0);\n        if (stride === 0) {\n            stride = this.GetParticleStride();\n        }\n        var positionOnEdge = 0;\n        var childCount = shape.GetChildCount();\n        for (var childIndex = 0; childIndex < childCount; childIndex++) {\n            var edge = null;\n            if (shape.GetType() === b2_shape_1.b2ShapeType.e_edgeShape) {\n                edge = shape;\n            }\n            else {\n                edge = s_edge;\n                shape.GetChildEdge(edge, childIndex);\n            }\n            var d = b2_math_1.b2Vec2.SubVV(edge.m_vertex2, edge.m_vertex1, s_d);\n            var edgeLength = d.Length();\n            while (positionOnEdge < edgeLength) {\n                var p = b2_math_1.b2Vec2.AddVMulSV(edge.m_vertex1, positionOnEdge / edgeLength, d, s_p);\n                this.CreateParticleForGroup(groupDef, xf, p);\n                positionOnEdge += stride;\n            }\n            positionOnEdge -= edgeLength;\n        }\n    };\n    b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup = function (shape, groupDef, xf) {\n        var s_aabb = b2ParticleSystem.CreateParticlesFillShapeForGroup_s_aabb;\n        var s_p = b2ParticleSystem.CreateParticlesFillShapeForGroup_s_p;\n        var stride = b2_settings_1.b2Maybe(groupDef.stride, 0);\n        if (stride === 0) {\n            stride = this.GetParticleStride();\n        }\n        var identity = b2_math_1.b2Transform.IDENTITY;\n        var aabb = s_aabb;\n        shape.ComputeAABB(aabb, identity, 0);\n        for (var y = Math.floor(aabb.lowerBound.y / stride) * stride; y < aabb.upperBound.y; y += stride) {\n            for (var x = Math.floor(aabb.lowerBound.x / stride) * stride; x < aabb.upperBound.x; x += stride) {\n                var p = s_p.Set(x, y);\n                if (shape.TestPoint(identity, p)) {\n                    this.CreateParticleForGroup(groupDef, xf, p);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.CreateParticlesWithShapeForGroup = function (shape, groupDef, xf) {\n        switch (shape.GetType()) {\n            case b2_shape_1.b2ShapeType.e_edgeShape:\n            case b2_shape_1.b2ShapeType.e_chainShape:\n                this.CreateParticlesStrokeShapeForGroup(shape, groupDef, xf);\n                break;\n            case b2_shape_1.b2ShapeType.e_polygonShape:\n            case b2_shape_1.b2ShapeType.e_circleShape:\n                this.CreateParticlesFillShapeForGroup(shape, groupDef, xf);\n                break;\n            default:\n                break;\n        }\n    };\n    b2ParticleSystem.prototype.CreateParticlesWithShapesForGroup = function (shapes, shapeCount, groupDef, xf) {\n        var compositeShape = new b2ParticleSystem_CompositeShape(shapes, shapeCount);\n        this.CreateParticlesFillShapeForGroup(compositeShape, groupDef, xf);\n    };\n    b2ParticleSystem.prototype.CloneParticle = function (oldIndex, group) {\n        var def = new b2_particle_1.b2ParticleDef();\n        def.flags = this.m_flagsBuffer.data[oldIndex];\n        def.position.Copy(this.m_positionBuffer.data[oldIndex]);\n        def.velocity.Copy(this.m_velocityBuffer.data[oldIndex]);\n        if (this.m_colorBuffer.data) {\n            def.color.Copy(this.m_colorBuffer.data[oldIndex]);\n        }\n        if (this.m_userDataBuffer.data) {\n            def.userData = this.m_userDataBuffer.data[oldIndex];\n        }\n        def.group = group;\n        var newIndex = this.CreateParticle(def);\n        if (this.m_handleIndexBuffer.data) {\n            var handle = this.m_handleIndexBuffer.data[oldIndex];\n            if (handle) {\n                handle.SetIndex(newIndex);\n            }\n            this.m_handleIndexBuffer.data[newIndex] = handle;\n            this.m_handleIndexBuffer.data[oldIndex] = null;\n        }\n        if (this.m_lastBodyContactStepBuffer.data) {\n            this.m_lastBodyContactStepBuffer.data[newIndex] =\n                this.m_lastBodyContactStepBuffer.data[oldIndex];\n        }\n        if (this.m_bodyContactCountBuffer.data) {\n            this.m_bodyContactCountBuffer.data[newIndex] =\n                this.m_bodyContactCountBuffer.data[oldIndex];\n        }\n        if (this.m_consecutiveContactStepsBuffer.data) {\n            this.m_consecutiveContactStepsBuffer.data[newIndex] =\n                this.m_consecutiveContactStepsBuffer.data[oldIndex];\n        }\n        if (this.m_hasForce) {\n            this.m_forceBuffer[newIndex].Copy(this.m_forceBuffer[oldIndex]);\n        }\n        if (this.m_staticPressureBuffer) {\n            this.m_staticPressureBuffer[newIndex] = this.m_staticPressureBuffer[oldIndex];\n        }\n        if (this.m_depthBuffer) {\n            this.m_depthBuffer[newIndex] = this.m_depthBuffer[oldIndex];\n        }\n        if (this.m_expirationTimeBuffer.data) {\n            this.m_expirationTimeBuffer.data[newIndex] =\n                this.m_expirationTimeBuffer.data[oldIndex];\n        }\n        return newIndex;\n    };\n    b2ParticleSystem.prototype.DestroyParticlesInGroup = function (group, callDestructionListener) {\n        if (callDestructionListener === void 0) { callDestructionListener = false; }\n        for (var i = group.m_firstIndex; i < group.m_lastIndex; i++) {\n            this.DestroyParticle(i, callDestructionListener);\n        }\n    };\n    b2ParticleSystem.prototype.DestroyParticleGroup = function (group) {\n        if (this.m_world.m_destructionListener) {\n            this.m_world.m_destructionListener.SayGoodbyeParticleGroup(group);\n        }\n        this.SetGroupFlags(group, 0);\n        for (var i = group.m_firstIndex; i < group.m_lastIndex; i++) {\n            this.m_groupBuffer[i] = null;\n        }\n        if (group.m_prev) {\n            group.m_prev.m_next = group.m_next;\n        }\n        if (group.m_next) {\n            group.m_next.m_prev = group.m_prev;\n        }\n        if (group === this.m_groupList) {\n            this.m_groupList = group.m_next;\n        }\n        --this.m_groupCount;\n    };\n    b2ParticleSystem.ParticleCanBeConnected = function (flags, group) {\n        return ((flags & (b2_particle_1.b2ParticleFlag.b2_wallParticle | b2_particle_1.b2ParticleFlag.b2_springParticle | b2_particle_1.b2ParticleFlag.b2_elasticParticle)) !== 0) ||\n            ((group !== null) && ((group.GetGroupFlags() & b2_particle_group_1.b2ParticleGroupFlag.b2_rigidParticleGroup) !== 0));\n    };\n    b2ParticleSystem.prototype.UpdatePairsAndTriads = function (firstIndex, lastIndex, filter) {\n        var s_dab = b2ParticleSystem.UpdatePairsAndTriads_s_dab;\n        var s_dbc = b2ParticleSystem.UpdatePairsAndTriads_s_dbc;\n        var s_dca = b2ParticleSystem.UpdatePairsAndTriads_s_dca;\n        var pos_data = this.m_positionBuffer.data;\n        var particleFlags = 0;\n        for (var i = firstIndex; i < lastIndex; i++) {\n            particleFlags |= this.m_flagsBuffer.data[i];\n        }\n        if (particleFlags & b2ParticleSystem.k_pairFlags) {\n            for (var k = 0; k < this.m_contactBuffer.count; k++) {\n                var contact = this.m_contactBuffer.data[k];\n                var a = contact.indexA;\n                var b = contact.indexB;\n                var af = this.m_flagsBuffer.data[a];\n                var bf = this.m_flagsBuffer.data[b];\n                var groupA = this.m_groupBuffer[a];\n                var groupB = this.m_groupBuffer[b];\n                if (a >= firstIndex && a < lastIndex &&\n                    b >= firstIndex && b < lastIndex &&\n                    !((af | bf) & b2_particle_1.b2ParticleFlag.b2_zombieParticle) &&\n                    ((af | bf) & b2ParticleSystem.k_pairFlags) &&\n                    (filter.IsNecessary(a) || filter.IsNecessary(b)) &&\n                    b2ParticleSystem.ParticleCanBeConnected(af, groupA) &&\n                    b2ParticleSystem.ParticleCanBeConnected(bf, groupB) &&\n                    filter.ShouldCreatePair(a, b)) {\n                    var pair = this.m_pairBuffer.data[this.m_pairBuffer.Append()];\n                    pair.indexA = a;\n                    pair.indexB = b;\n                    pair.flags = contact.flags;\n                    pair.strength = b2_math_1.b2Min(groupA ? groupA.m_strength : 1, groupB ? groupB.m_strength : 1);\n                    pair.distance = b2_math_1.b2Vec2.DistanceVV(pos_data[a], pos_data[b]);\n                }\n                std_stable_sort(this.m_pairBuffer.data, 0, this.m_pairBuffer.count, b2ParticleSystem.ComparePairIndices);\n                this.m_pairBuffer.Unique(b2ParticleSystem.MatchPairIndices);\n            }\n        }\n        if (particleFlags & b2ParticleSystem.k_triadFlags) {\n            var diagram = new b2_voronoi_diagram_1.b2VoronoiDiagram(lastIndex - firstIndex);\n            for (var i = firstIndex; i < lastIndex; i++) {\n                var flags = this.m_flagsBuffer.data[i];\n                var group = this.m_groupBuffer[i];\n                if (!(flags & b2_particle_1.b2ParticleFlag.b2_zombieParticle) &&\n                    b2ParticleSystem.ParticleCanBeConnected(flags, group)) {\n                    diagram.AddGenerator(pos_data[i], i, filter.IsNecessary(i));\n                }\n            }\n            var stride = this.GetParticleStride();\n            diagram.Generate(stride / 2, stride * 2);\n            var system_1 = this;\n            var callback = function (a, b, c) {\n                var af = system_1.m_flagsBuffer.data[a];\n                var bf = system_1.m_flagsBuffer.data[b];\n                var cf = system_1.m_flagsBuffer.data[c];\n                if (((af | bf | cf) & b2ParticleSystem.k_triadFlags) &&\n                    filter.ShouldCreateTriad(a, b, c)) {\n                    var pa = pos_data[a];\n                    var pb = pos_data[b];\n                    var pc = pos_data[c];\n                    var dab = b2_math_1.b2Vec2.SubVV(pa, pb, s_dab);\n                    var dbc = b2_math_1.b2Vec2.SubVV(pb, pc, s_dbc);\n                    var dca = b2_math_1.b2Vec2.SubVV(pc, pa, s_dca);\n                    var maxDistanceSquared = b2_settings_1.b2_maxTriadDistanceSquared * system_1.m_squaredDiameter;\n                    if (b2_math_1.b2Vec2.DotVV(dab, dab) > maxDistanceSquared ||\n                        b2_math_1.b2Vec2.DotVV(dbc, dbc) > maxDistanceSquared ||\n                        b2_math_1.b2Vec2.DotVV(dca, dca) > maxDistanceSquared) {\n                        return;\n                    }\n                    var groupA = system_1.m_groupBuffer[a];\n                    var groupB = system_1.m_groupBuffer[b];\n                    var groupC = system_1.m_groupBuffer[c];\n                    var triad = system_1.m_triadBuffer.data[system_1.m_triadBuffer.Append()];\n                    triad.indexA = a;\n                    triad.indexB = b;\n                    triad.indexC = c;\n                    triad.flags = af | bf | cf;\n                    triad.strength = b2_math_1.b2Min(b2_math_1.b2Min(groupA ? groupA.m_strength : 1, groupB ? groupB.m_strength : 1), groupC ? groupC.m_strength : 1);\n                    var midPoint_x = (pa.x + pb.x + pc.x) / 3.0;\n                    var midPoint_y = (pa.y + pb.y + pc.y) / 3.0;\n                    triad.pa.x = pa.x - midPoint_x;\n                    triad.pa.y = pa.y - midPoint_y;\n                    triad.pb.x = pb.x - midPoint_x;\n                    triad.pb.y = pb.y - midPoint_y;\n                    triad.pc.x = pc.x - midPoint_x;\n                    triad.pc.y = pc.y - midPoint_y;\n                    triad.ka = -b2_math_1.b2Vec2.DotVV(dca, dab);\n                    triad.kb = -b2_math_1.b2Vec2.DotVV(dab, dbc);\n                    triad.kc = -b2_math_1.b2Vec2.DotVV(dbc, dca);\n                    triad.s = b2_math_1.b2Vec2.CrossVV(pa, pb) + b2_math_1.b2Vec2.CrossVV(pb, pc) + b2_math_1.b2Vec2.CrossVV(pc, pa);\n                }\n            };\n            diagram.GetNodes(callback);\n            std_stable_sort(this.m_triadBuffer.data, 0, this.m_triadBuffer.count, b2ParticleSystem.CompareTriadIndices);\n            this.m_triadBuffer.Unique(b2ParticleSystem.MatchTriadIndices);\n        }\n    };\n    b2ParticleSystem.prototype.UpdatePairsAndTriadsWithReactiveParticles = function () {\n        var filter = new b2ParticleSystem_ReactiveFilter(this.m_flagsBuffer);\n        this.UpdatePairsAndTriads(0, this.m_count, filter);\n        for (var i = 0; i < this.m_count; i++) {\n            this.m_flagsBuffer.data[i] &= ~b2_particle_1.b2ParticleFlag.b2_reactiveParticle;\n        }\n        this.m_allParticleFlags &= ~b2_particle_1.b2ParticleFlag.b2_reactiveParticle;\n    };\n    b2ParticleSystem.ComparePairIndices = function (a, b) {\n        var diffA = a.indexA - b.indexA;\n        if (diffA !== 0) {\n            return diffA < 0;\n        }\n        return a.indexB < b.indexB;\n    };\n    b2ParticleSystem.MatchPairIndices = function (a, b) {\n        return a.indexA === b.indexA && a.indexB === b.indexB;\n    };\n    b2ParticleSystem.CompareTriadIndices = function (a, b) {\n        var diffA = a.indexA - b.indexA;\n        if (diffA !== 0) {\n            return diffA < 0;\n        }\n        var diffB = a.indexB - b.indexB;\n        if (diffB !== 0) {\n            return diffB < 0;\n        }\n        return a.indexC < b.indexC;\n    };\n    b2ParticleSystem.MatchTriadIndices = function (a, b) {\n        return a.indexA === b.indexA && a.indexB === b.indexB && a.indexC === b.indexC;\n    };\n    b2ParticleSystem.InitializeParticleLists = function (group, nodeBuffer) {\n        var bufferIndex = group.GetBufferIndex();\n        var particleCount = group.GetParticleCount();\n        for (var i = 0; i < particleCount; i++) {\n            var node = nodeBuffer[i];\n            node.list = node;\n            node.next = null;\n            node.count = 1;\n            node.index = i + bufferIndex;\n        }\n    };\n    b2ParticleSystem.prototype.MergeParticleListsInContact = function (group, nodeBuffer) {\n        var bufferIndex = group.GetBufferIndex();\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            if (!group.ContainsParticle(a) || !group.ContainsParticle(b)) {\n                continue;\n            }\n            var listA = nodeBuffer[a - bufferIndex].list;\n            var listB = nodeBuffer[b - bufferIndex].list;\n            if (listA === listB) {\n                continue;\n            }\n            if (listA.count < listB.count) {\n                var _tmp = listA;\n                listA = listB;\n                listB = _tmp;\n            }\n            b2ParticleSystem.MergeParticleLists(listA, listB);\n        }\n    };\n    b2ParticleSystem.MergeParticleLists = function (listA, listB) {\n        for (var b = listB;;) {\n            b.list = listA;\n            var nextB = b.next;\n            if (nextB) {\n                b = nextB;\n            }\n            else {\n                b.next = listA.next;\n                break;\n            }\n        }\n        listA.next = listB;\n        listA.count += listB.count;\n        listB.count = 0;\n    };\n    b2ParticleSystem.FindLongestParticleList = function (group, nodeBuffer) {\n        var particleCount = group.GetParticleCount();\n        var result = nodeBuffer[0];\n        for (var i = 0; i < particleCount; i++) {\n            var node = nodeBuffer[i];\n            if (result.count < node.count) {\n                result = node;\n            }\n        }\n        return result;\n    };\n    b2ParticleSystem.prototype.MergeZombieParticleListNodes = function (group, nodeBuffer, survivingList) {\n        var particleCount = group.GetParticleCount();\n        for (var i = 0; i < particleCount; i++) {\n            var node = nodeBuffer[i];\n            if (node !== survivingList &&\n                (this.m_flagsBuffer.data[node.index] & b2_particle_1.b2ParticleFlag.b2_zombieParticle)) {\n                b2ParticleSystem.MergeParticleListAndNode(survivingList, node);\n            }\n        }\n    };\n    b2ParticleSystem.MergeParticleListAndNode = function (list, node) {\n        node.list = list;\n        node.next = list.next;\n        list.next = node;\n        list.count++;\n        node.count = 0;\n    };\n    b2ParticleSystem.prototype.CreateParticleGroupsFromParticleList = function (group, nodeBuffer, survivingList) {\n        var particleCount = group.GetParticleCount();\n        var def = new b2_particle_group_1.b2ParticleGroupDef();\n        def.groupFlags = group.GetGroupFlags();\n        def.userData = group.GetUserData();\n        for (var i = 0; i < particleCount; i++) {\n            var list = nodeBuffer[i];\n            if (!list.count || list === survivingList) {\n                continue;\n            }\n            var newGroup = this.CreateParticleGroup(def);\n            for (var node = list; node; node = node.next) {\n                var oldIndex = node.index;\n                var newIndex = this.CloneParticle(oldIndex, newGroup);\n                this.m_flagsBuffer.data[oldIndex] |= b2_particle_1.b2ParticleFlag.b2_zombieParticle;\n                node.index = newIndex;\n            }\n        }\n    };\n    b2ParticleSystem.prototype.UpdatePairsAndTriadsWithParticleList = function (group, nodeBuffer) {\n        var bufferIndex = group.GetBufferIndex();\n        for (var k = 0; k < this.m_pairBuffer.count; k++) {\n            var pair = this.m_pairBuffer.data[k];\n            var a = pair.indexA;\n            var b = pair.indexB;\n            if (group.ContainsParticle(a)) {\n                pair.indexA = nodeBuffer[a - bufferIndex].index;\n            }\n            if (group.ContainsParticle(b)) {\n                pair.indexB = nodeBuffer[b - bufferIndex].index;\n            }\n        }\n        for (var k = 0; k < this.m_triadBuffer.count; k++) {\n            var triad = this.m_triadBuffer.data[k];\n            var a = triad.indexA;\n            var b = triad.indexB;\n            var c = triad.indexC;\n            if (group.ContainsParticle(a)) {\n                triad.indexA = nodeBuffer[a - bufferIndex].index;\n            }\n            if (group.ContainsParticle(b)) {\n                triad.indexB = nodeBuffer[b - bufferIndex].index;\n            }\n            if (group.ContainsParticle(c)) {\n                triad.indexC = nodeBuffer[c - bufferIndex].index;\n            }\n        }\n    };\n    b2ParticleSystem.prototype.ComputeDepth = function () {\n        var contactGroups = [];\n        var contactGroupsCount = 0;\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var groupA = this.m_groupBuffer[a];\n            var groupB = this.m_groupBuffer[b];\n            if (groupA && groupA === groupB &&\n                (groupA.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)) {\n                contactGroups[contactGroupsCount++] = contact;\n            }\n        }\n        var groupsToUpdate = [];\n        var groupsToUpdateCount = 0;\n        for (var group = this.m_groupList; group; group = group.GetNext()) {\n            if (group.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth) {\n                groupsToUpdate[groupsToUpdateCount++] = group;\n                this.SetGroupFlags(group, group.m_groupFlags &\n                    ~b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);\n                for (var i = group.m_firstIndex; i < group.m_lastIndex; i++) {\n                    this.m_accumulationBuffer[i] = 0;\n                }\n            }\n        }\n        for (var k = 0; k < contactGroupsCount; k++) {\n            var contact = contactGroups[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var w = contact.weight;\n            this.m_accumulationBuffer[a] += w;\n            this.m_accumulationBuffer[b] += w;\n        }\n        for (var i = 0; i < groupsToUpdateCount; i++) {\n            var group = groupsToUpdate[i];\n            for (var i_1 = group.m_firstIndex; i_1 < group.m_lastIndex; i_1++) {\n                var w = this.m_accumulationBuffer[i_1];\n                this.m_depthBuffer[i_1] = w < 0.8 ? 0 : b2_settings_1.b2_maxFloat;\n            }\n        }\n        var iterationCount = b2_math_1.b2Sqrt(this.m_count) >> 0;\n        for (var t = 0; t < iterationCount; t++) {\n            var updated = false;\n            for (var k = 0; k < contactGroupsCount; k++) {\n                var contact = contactGroups[k];\n                var a = contact.indexA;\n                var b = contact.indexB;\n                var r = 1 - contact.weight;\n                var ap0 = this.m_depthBuffer[a];\n                var bp0 = this.m_depthBuffer[b];\n                var ap1 = bp0 + r;\n                var bp1 = ap0 + r;\n                if (ap0 > ap1) {\n                    this.m_depthBuffer[a] = ap1;\n                    updated = true;\n                }\n                if (bp0 > bp1) {\n                    this.m_depthBuffer[b] = bp1;\n                    updated = true;\n                }\n            }\n            if (!updated) {\n                break;\n            }\n        }\n        for (var i = 0; i < groupsToUpdateCount; i++) {\n            var group = groupsToUpdate[i];\n            for (var i_2 = group.m_firstIndex; i_2 < group.m_lastIndex; i_2++) {\n                if (this.m_depthBuffer[i_2] < b2_settings_1.b2_maxFloat) {\n                    this.m_depthBuffer[i_2] *= this.m_particleDiameter;\n                }\n                else {\n                    this.m_depthBuffer[i_2] = 0;\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.GetInsideBoundsEnumerator = function (aabb) {\n        var lowerTag = b2ParticleSystem.computeTag(this.m_inverseDiameter * aabb.lowerBound.x - 1, this.m_inverseDiameter * aabb.lowerBound.y - 1);\n        var upperTag = b2ParticleSystem.computeTag(this.m_inverseDiameter * aabb.upperBound.x + 1, this.m_inverseDiameter * aabb.upperBound.y + 1);\n        var beginProxy = 0;\n        var endProxy = this.m_proxyBuffer.count;\n        var firstProxy = std_lower_bound(this.m_proxyBuffer.data, beginProxy, endProxy, lowerTag, b2ParticleSystem_Proxy.CompareProxyTag);\n        var lastProxy = std_upper_bound(this.m_proxyBuffer.data, beginProxy, endProxy, upperTag, b2ParticleSystem_Proxy.CompareTagProxy);\n        return new b2ParticleSystem_InsideBoundsEnumerator(this, lowerTag, upperTag, firstProxy, lastProxy);\n    };\n    b2ParticleSystem.prototype.UpdateAllParticleFlags = function () {\n        this.m_allParticleFlags = 0;\n        for (var i = 0; i < this.m_count; i++) {\n            this.m_allParticleFlags |= this.m_flagsBuffer.data[i];\n        }\n        this.m_needsUpdateAllParticleFlags = false;\n    };\n    b2ParticleSystem.prototype.UpdateAllGroupFlags = function () {\n        this.m_allGroupFlags = 0;\n        for (var group = this.m_groupList; group; group = group.GetNext()) {\n            this.m_allGroupFlags |= group.m_groupFlags;\n        }\n        this.m_needsUpdateAllGroupFlags = false;\n    };\n    b2ParticleSystem.prototype.AddContact = function (a, b, contacts) {\n        var flags_data = this.m_flagsBuffer.data;\n        var pos_data = this.m_positionBuffer.data;\n        var d = b2_math_1.b2Vec2.SubVV(pos_data[b], pos_data[a], b2ParticleSystem.AddContact_s_d);\n        var distBtParticlesSq = b2_math_1.b2Vec2.DotVV(d, d);\n        if (0 < distBtParticlesSq && distBtParticlesSq < this.m_squaredDiameter) {\n            var invD = b2_math_1.b2InvSqrt(distBtParticlesSq);\n            var contact = this.m_contactBuffer.data[this.m_contactBuffer.Append()];\n            contact.indexA = a;\n            contact.indexB = b;\n            contact.flags = flags_data[a] | flags_data[b];\n            contact.weight = 1 - distBtParticlesSq * invD * this.m_inverseDiameter;\n            contact.normal.x = invD * d.x;\n            contact.normal.y = invD * d.y;\n        }\n    };\n    b2ParticleSystem.prototype.FindContacts_Reference = function (contacts) {\n        var beginProxy = 0;\n        var endProxy = this.m_proxyBuffer.count;\n        this.m_contactBuffer.count = 0;\n        for (var a = beginProxy, c = beginProxy; a < endProxy; a++) {\n            var rightTag = b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[a].tag, 1, 0);\n            for (var b = a + 1; b < endProxy; b++) {\n                if (rightTag < this.m_proxyBuffer.data[b].tag) {\n                    break;\n                }\n                this.AddContact(this.m_proxyBuffer.data[a].index, this.m_proxyBuffer.data[b].index, this.m_contactBuffer);\n            }\n            var bottomLeftTag = b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[a].tag, -1, 1);\n            for (; c < endProxy; c++) {\n                if (bottomLeftTag <= this.m_proxyBuffer.data[c].tag) {\n                    break;\n                }\n            }\n            var bottomRightTag = b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[a].tag, 1, 1);\n            for (var b = c; b < endProxy; b++) {\n                if (bottomRightTag < this.m_proxyBuffer.data[b].tag) {\n                    break;\n                }\n                this.AddContact(this.m_proxyBuffer.data[a].index, this.m_proxyBuffer.data[b].index, this.m_contactBuffer);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.FindContacts = function (contacts) {\n        this.FindContacts_Reference(contacts);\n    };\n    b2ParticleSystem.prototype.UpdateProxies_Reference = function (proxies) {\n        var pos_data = this.m_positionBuffer.data;\n        var inv_diam = this.m_inverseDiameter;\n        for (var k = 0; k < this.m_proxyBuffer.count; ++k) {\n            var proxy = this.m_proxyBuffer.data[k];\n            var i = proxy.index;\n            var p = pos_data[i];\n            proxy.tag = b2ParticleSystem.computeTag(inv_diam * p.x, inv_diam * p.y);\n        }\n    };\n    b2ParticleSystem.prototype.UpdateProxies = function (proxies) {\n        this.UpdateProxies_Reference(proxies);\n    };\n    b2ParticleSystem.prototype.SortProxies = function (proxies) {\n        std_sort(this.m_proxyBuffer.data, 0, this.m_proxyBuffer.count, b2ParticleSystem_Proxy.CompareProxyProxy);\n    };\n    b2ParticleSystem.prototype.FilterContacts = function (contacts) {\n        var contactFilter = this.GetParticleContactFilter();\n        if (contactFilter === null) {\n            return;\n        }\n        var system = this;\n        var predicate = function (contact) {\n            return ((contact.flags & b2_particle_1.b2ParticleFlag.b2_particleContactFilterParticle) !== 0) && !contactFilter.ShouldCollideParticleParticle(system, contact.indexA, contact.indexB);\n        };\n        this.m_contactBuffer.RemoveIf(predicate);\n    };\n    b2ParticleSystem.prototype.NotifyContactListenerPreContact = function (particlePairs) {\n        var contactListener = this.GetParticleContactListener();\n        if (contactListener === null) {\n            return;\n        }\n        particlePairs.Initialize(this.m_contactBuffer, this.m_flagsBuffer);\n        throw new Error();\n    };\n    b2ParticleSystem.prototype.NotifyContactListenerPostContact = function (particlePairs) {\n        var contactListener = this.GetParticleContactListener();\n        if (contactListener === null) {\n            return;\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; ++k) {\n            var contact = this.m_contactBuffer.data[k];\n            var itemIndex = -1;\n            if (itemIndex >= 0) {\n                particlePairs.Invalidate(itemIndex);\n            }\n            else {\n                contactListener.BeginContactParticleParticle(this, contact);\n            }\n        }\n        throw new Error();\n    };\n    b2ParticleSystem.b2ParticleContactIsZombie = function (contact) {\n        return (contact.flags & b2_particle_1.b2ParticleFlag.b2_zombieParticle) === b2_particle_1.b2ParticleFlag.b2_zombieParticle;\n    };\n    b2ParticleSystem.prototype.UpdateContacts = function (exceptZombie) {\n        this.UpdateProxies(this.m_proxyBuffer);\n        this.SortProxies(this.m_proxyBuffer);\n        var particlePairs = new b2ParticlePairSet();\n        this.NotifyContactListenerPreContact(particlePairs);\n        this.FindContacts(this.m_contactBuffer);\n        this.FilterContacts(this.m_contactBuffer);\n        this.NotifyContactListenerPostContact(particlePairs);\n        if (exceptZombie) {\n            this.m_contactBuffer.RemoveIf(b2ParticleSystem.b2ParticleContactIsZombie);\n        }\n    };\n    b2ParticleSystem.prototype.NotifyBodyContactListenerPreContact = function (fixtureSet) {\n        var contactListener = this.GetFixtureContactListener();\n        if (contactListener === null) {\n            return;\n        }\n        fixtureSet.Initialize(this.m_bodyContactBuffer, this.m_flagsBuffer);\n        throw new Error();\n    };\n    b2ParticleSystem.prototype.NotifyBodyContactListenerPostContact = function (fixtureSet) {\n        var contactListener = this.GetFixtureContactListener();\n        if (contactListener === null) {\n            return;\n        }\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var index = -1;\n            if (index >= 0) {\n                fixtureSet.Invalidate(index);\n            }\n            else {\n                contactListener.BeginContactFixtureParticle(this, contact);\n            }\n        }\n        throw new Error();\n    };\n    b2ParticleSystem.prototype.UpdateBodyContacts = function () {\n        var s_aabb = b2ParticleSystem.UpdateBodyContacts_s_aabb;\n        var fixtureSet = new b2ParticleSystem_FixtureParticleSet();\n        this.NotifyBodyContactListenerPreContact(fixtureSet);\n        if (this.m_stuckThreshold > 0) {\n            var particleCount = this.GetParticleCount();\n            for (var i = 0; i < particleCount; i++) {\n                this.m_bodyContactCountBuffer.data[i] = 0;\n                if (this.m_timestamp > (this.m_lastBodyContactStepBuffer.data[i] + 1)) {\n                    this.m_consecutiveContactStepsBuffer.data[i] = 0;\n                }\n            }\n        }\n        this.m_bodyContactBuffer.SetCount(0);\n        this.m_stuckParticleBuffer.SetCount(0);\n        var aabb = s_aabb;\n        this.ComputeAABB(aabb);\n        if (this.UpdateBodyContacts_callback === null) {\n            this.UpdateBodyContacts_callback = new b2ParticleSystem_UpdateBodyContactsCallback(this);\n        }\n        var callback = this.UpdateBodyContacts_callback;\n        callback.m_contactFilter = this.GetFixtureContactFilter();\n        this.m_world.QueryAABB(callback, aabb);\n        if (this.m_def.strictContactCheck) {\n            this.RemoveSpuriousBodyContacts();\n        }\n        this.NotifyBodyContactListenerPostContact(fixtureSet);\n    };\n    b2ParticleSystem.prototype.Solve = function (step) {\n        var s_subStep = b2ParticleSystem.Solve_s_subStep;\n        if (this.m_count === 0) {\n            return;\n        }\n        if (this.m_expirationTimeBuffer.data) {\n            this.SolveLifetimes(step);\n        }\n        if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_zombieParticle) {\n            this.SolveZombie();\n        }\n        if (this.m_needsUpdateAllParticleFlags) {\n            this.UpdateAllParticleFlags();\n        }\n        if (this.m_needsUpdateAllGroupFlags) {\n            this.UpdateAllGroupFlags();\n        }\n        if (this.m_paused) {\n            return;\n        }\n        for (this.m_iterationIndex = 0; this.m_iterationIndex < step.particleIterations; this.m_iterationIndex++) {\n            ++this.m_timestamp;\n            var subStep = s_subStep.Copy(step);\n            subStep.dt /= step.particleIterations;\n            subStep.inv_dt *= step.particleIterations;\n            this.UpdateContacts(false);\n            this.UpdateBodyContacts();\n            this.ComputeWeight();\n            if (this.m_allGroupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth) {\n                this.ComputeDepth();\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_reactiveParticle) {\n                this.UpdatePairsAndTriadsWithReactiveParticles();\n            }\n            if (this.m_hasForce) {\n                this.SolveForce(subStep);\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_viscousParticle) {\n                this.SolveViscous();\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_repulsiveParticle) {\n                this.SolveRepulsive(subStep);\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_powderParticle) {\n                this.SolvePowder(subStep);\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_tensileParticle) {\n                this.SolveTensile(subStep);\n            }\n            if (this.m_allGroupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_solidParticleGroup) {\n                this.SolveSolid(subStep);\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_colorMixingParticle) {\n                this.SolveColorMixing();\n            }\n            this.SolveGravity(subStep);\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_staticPressureParticle) {\n                this.SolveStaticPressure(subStep);\n            }\n            this.SolvePressure(subStep);\n            this.SolveDamping(subStep);\n            if (this.m_allParticleFlags & b2ParticleSystem.k_extraDampingFlags) {\n                this.SolveExtraDamping();\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_elasticParticle) {\n                this.SolveElastic(subStep);\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_springParticle) {\n                this.SolveSpring(subStep);\n            }\n            this.LimitVelocity(subStep);\n            if (this.m_allGroupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_rigidParticleGroup) {\n                this.SolveRigidDamping();\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_barrierParticle) {\n                this.SolveBarrier(subStep);\n            }\n            this.SolveCollision(subStep);\n            if (this.m_allGroupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_rigidParticleGroup) {\n                this.SolveRigid(subStep);\n            }\n            if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_wallParticle) {\n                this.SolveWall();\n            }\n            for (var i = 0; i < this.m_count; i++) {\n                this.m_positionBuffer.data[i].SelfMulAdd(subStep.dt, this.m_velocityBuffer.data[i]);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveCollision = function (step) {\n        var s_aabb = b2ParticleSystem.SolveCollision_s_aabb;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var aabb = s_aabb;\n        aabb.lowerBound.x = +b2_settings_1.b2_maxFloat;\n        aabb.lowerBound.y = +b2_settings_1.b2_maxFloat;\n        aabb.upperBound.x = -b2_settings_1.b2_maxFloat;\n        aabb.upperBound.y = -b2_settings_1.b2_maxFloat;\n        for (var i = 0; i < this.m_count; i++) {\n            var v = vel_data[i];\n            var p1 = pos_data[i];\n            var p2_x = p1.x + step.dt * v.x;\n            var p2_y = p1.y + step.dt * v.y;\n            aabb.lowerBound.x = b2_math_1.b2Min(aabb.lowerBound.x, b2_math_1.b2Min(p1.x, p2_x));\n            aabb.lowerBound.y = b2_math_1.b2Min(aabb.lowerBound.y, b2_math_1.b2Min(p1.y, p2_y));\n            aabb.upperBound.x = b2_math_1.b2Max(aabb.upperBound.x, b2_math_1.b2Max(p1.x, p2_x));\n            aabb.upperBound.y = b2_math_1.b2Max(aabb.upperBound.y, b2_math_1.b2Max(p1.y, p2_y));\n        }\n        if (this.SolveCollision_callback === null) {\n            this.SolveCollision_callback = new b2ParticleSystem_SolveCollisionCallback(this, step);\n        }\n        var callback = this.SolveCollision_callback;\n        callback.m_step = step;\n        this.m_world.QueryAABB(callback, aabb);\n    };\n    b2ParticleSystem.prototype.LimitVelocity = function (step) {\n        var vel_data = this.m_velocityBuffer.data;\n        var criticalVelocitySquared = this.GetCriticalVelocitySquared(step);\n        for (var i = 0; i < this.m_count; i++) {\n            var v = vel_data[i];\n            var v2 = b2_math_1.b2Vec2.DotVV(v, v);\n            if (v2 > criticalVelocitySquared) {\n                v.SelfMul(b2_math_1.b2Sqrt(criticalVelocitySquared / v2));\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveGravity = function (step) {\n        var s_gravity = b2ParticleSystem.SolveGravity_s_gravity;\n        var vel_data = this.m_velocityBuffer.data;\n        var gravity = b2_math_1.b2Vec2.MulSV(step.dt * this.m_def.gravityScale, this.m_world.GetGravity(), s_gravity);\n        for (var i = 0; i < this.m_count; i++) {\n            vel_data[i].SelfAdd(gravity);\n        }\n    };\n    b2ParticleSystem.prototype.SolveBarrier = function (step) {\n        var s_aabb = b2ParticleSystem.SolveBarrier_s_aabb;\n        var s_va = b2ParticleSystem.SolveBarrier_s_va;\n        var s_vb = b2ParticleSystem.SolveBarrier_s_vb;\n        var s_pba = b2ParticleSystem.SolveBarrier_s_pba;\n        var s_vba = b2ParticleSystem.SolveBarrier_s_vba;\n        var s_vc = b2ParticleSystem.SolveBarrier_s_vc;\n        var s_pca = b2ParticleSystem.SolveBarrier_s_pca;\n        var s_vca = b2ParticleSystem.SolveBarrier_s_vca;\n        var s_qba = b2ParticleSystem.SolveBarrier_s_qba;\n        var s_qca = b2ParticleSystem.SolveBarrier_s_qca;\n        var s_dv = b2ParticleSystem.SolveBarrier_s_dv;\n        var s_f = b2ParticleSystem.SolveBarrier_s_f;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        for (var i = 0; i < this.m_count; i++) {\n            var flags = this.m_flagsBuffer.data[i];\n            if ((flags & b2ParticleSystem.k_barrierWallFlags) !== 0) {\n                vel_data[i].SetZero();\n            }\n        }\n        var tmax = b2_settings_1.b2_barrierCollisionTime * step.dt;\n        var mass = this.GetParticleMass();\n        for (var k = 0; k < this.m_pairBuffer.count; k++) {\n            var pair = this.m_pairBuffer.data[k];\n            if (pair.flags & b2_particle_1.b2ParticleFlag.b2_barrierParticle) {\n                var a = pair.indexA;\n                var b = pair.indexB;\n                var pa = pos_data[a];\n                var pb = pos_data[b];\n                var aabb = s_aabb;\n                b2_math_1.b2Vec2.MinV(pa, pb, aabb.lowerBound);\n                b2_math_1.b2Vec2.MaxV(pa, pb, aabb.upperBound);\n                var aGroup = this.m_groupBuffer[a];\n                var bGroup = this.m_groupBuffer[b];\n                var va = this.GetLinearVelocity(aGroup, a, pa, s_va);\n                var vb = this.GetLinearVelocity(bGroup, b, pb, s_vb);\n                var pba = b2_math_1.b2Vec2.SubVV(pb, pa, s_pba);\n                var vba = b2_math_1.b2Vec2.SubVV(vb, va, s_vba);\n                var enumerator = this.GetInsideBoundsEnumerator(aabb);\n                var c = void 0;\n                while ((c = enumerator.GetNext()) >= 0) {\n                    var pc = pos_data[c];\n                    var cGroup = this.m_groupBuffer[c];\n                    if (aGroup !== cGroup && bGroup !== cGroup) {\n                        var vc = this.GetLinearVelocity(cGroup, c, pc, s_vc);\n                        var pca = b2_math_1.b2Vec2.SubVV(pc, pa, s_pca);\n                        var vca = b2_math_1.b2Vec2.SubVV(vc, va, s_vca);\n                        var e2 = b2_math_1.b2Vec2.CrossVV(vba, vca);\n                        var e1 = b2_math_1.b2Vec2.CrossVV(pba, vca) - b2_math_1.b2Vec2.CrossVV(pca, vba);\n                        var e0 = b2_math_1.b2Vec2.CrossVV(pba, pca);\n                        var s = void 0, t = void 0;\n                        var qba = s_qba, qca = s_qca;\n                        if (e2 === 0) {\n                            if (e1 === 0) {\n                                continue;\n                            }\n                            t = -e0 / e1;\n                            if (!(t >= 0 && t < tmax)) {\n                                continue;\n                            }\n                            b2_math_1.b2Vec2.AddVMulSV(pba, t, vba, qba);\n                            b2_math_1.b2Vec2.AddVMulSV(pca, t, vca, qca);\n                            s = b2_math_1.b2Vec2.DotVV(qba, qca) / b2_math_1.b2Vec2.DotVV(qba, qba);\n                            if (!(s >= 0 && s <= 1)) {\n                                continue;\n                            }\n                        }\n                        else {\n                            var det = e1 * e1 - 4 * e0 * e2;\n                            if (det < 0) {\n                                continue;\n                            }\n                            var sqrtDet = b2_math_1.b2Sqrt(det);\n                            var t1 = (-e1 - sqrtDet) / (2 * e2);\n                            var t2 = (-e1 + sqrtDet) / (2 * e2);\n                            if (t1 > t2) {\n                                var tmp = t1;\n                                t1 = t2;\n                                t2 = tmp;\n                            }\n                            t = t1;\n                            b2_math_1.b2Vec2.AddVMulSV(pba, t, vba, qba);\n                            b2_math_1.b2Vec2.AddVMulSV(pca, t, vca, qca);\n                            s = b2_math_1.b2Vec2.DotVV(qba, qca) / b2_math_1.b2Vec2.DotVV(qba, qba);\n                            if (!(t >= 0 && t < tmax && s >= 0 && s <= 1)) {\n                                t = t2;\n                                if (!(t >= 0 && t < tmax)) {\n                                    continue;\n                                }\n                                b2_math_1.b2Vec2.AddVMulSV(pba, t, vba, qba);\n                                b2_math_1.b2Vec2.AddVMulSV(pca, t, vca, qca);\n                                s = b2_math_1.b2Vec2.DotVV(qba, qca) / b2_math_1.b2Vec2.DotVV(qba, qba);\n                                if (!(s >= 0 && s <= 1)) {\n                                    continue;\n                                }\n                            }\n                        }\n                        var dv = s_dv;\n                        dv.x = va.x + s * vba.x - vc.x;\n                        dv.y = va.y + s * vba.y - vc.y;\n                        var f = b2_math_1.b2Vec2.MulSV(mass, dv, s_f);\n                        if (cGroup && this.IsRigidGroup(cGroup)) {\n                            var mass_1 = cGroup.GetMass();\n                            var inertia = cGroup.GetInertia();\n                            if (mass_1 > 0) {\n                                cGroup.m_linearVelocity.SelfMulAdd(1 / mass_1, f);\n                            }\n                            if (inertia > 0) {\n                                cGroup.m_angularVelocity += b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.SubVV(pc, cGroup.GetCenter(), b2_math_1.b2Vec2.s_t0), f) / inertia;\n                            }\n                        }\n                        else {\n                            vel_data[c].SelfAdd(dv);\n                        }\n                        this.ParticleApplyForce(c, f.SelfMul(-step.inv_dt));\n                    }\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveStaticPressure = function (step) {\n        this.m_staticPressureBuffer = this.RequestBuffer(this.m_staticPressureBuffer);\n        var criticalPressure = this.GetCriticalPressure(step);\n        var pressurePerWeight = this.m_def.staticPressureStrength * criticalPressure;\n        var maxPressure = b2_settings_2.b2_maxParticlePressure * criticalPressure;\n        var relaxation = this.m_def.staticPressureRelaxation;\n        for (var t = 0; t < this.m_def.staticPressureIterations; t++) {\n            for (var i = 0; i < this.m_count; i++) {\n                this.m_accumulationBuffer[i] = 0;\n            }\n            for (var k = 0; k < this.m_contactBuffer.count; k++) {\n                var contact = this.m_contactBuffer.data[k];\n                if (contact.flags & b2_particle_1.b2ParticleFlag.b2_staticPressureParticle) {\n                    var a = contact.indexA;\n                    var b = contact.indexB;\n                    var w = contact.weight;\n                    this.m_accumulationBuffer[a] += w * this.m_staticPressureBuffer[b];\n                    this.m_accumulationBuffer[b] += w * this.m_staticPressureBuffer[a];\n                }\n            }\n            for (var i = 0; i < this.m_count; i++) {\n                var w = this.m_weightBuffer[i];\n                if (this.m_flagsBuffer.data[i] & b2_particle_1.b2ParticleFlag.b2_staticPressureParticle) {\n                    var wh = this.m_accumulationBuffer[i];\n                    var h = (wh + pressurePerWeight * (w - b2_settings_2.b2_minParticleWeight)) /\n                        (w + relaxation);\n                    this.m_staticPressureBuffer[i] = b2_math_1.b2Clamp(h, 0.0, maxPressure);\n                }\n                else {\n                    this.m_staticPressureBuffer[i] = 0;\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.ComputeWeight = function () {\n        for (var k = 0; k < this.m_count; k++) {\n            this.m_weightBuffer[k] = 0;\n        }\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            var w = contact.weight;\n            this.m_weightBuffer[a] += w;\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var w = contact.weight;\n            this.m_weightBuffer[a] += w;\n            this.m_weightBuffer[b] += w;\n        }\n    };\n    b2ParticleSystem.prototype.SolvePressure = function (step) {\n        var s_f = b2ParticleSystem.SolvePressure_s_f;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var criticalPressure = this.GetCriticalPressure(step);\n        var pressurePerWeight = this.m_def.pressureStrength * criticalPressure;\n        var maxPressure = b2_settings_2.b2_maxParticlePressure * criticalPressure;\n        for (var i = 0; i < this.m_count; i++) {\n            var w = this.m_weightBuffer[i];\n            var h = pressurePerWeight * b2_math_1.b2Max(0.0, w - b2_settings_2.b2_minParticleWeight);\n            this.m_accumulationBuffer[i] = b2_math_1.b2Min(h, maxPressure);\n        }\n        if (this.m_allParticleFlags & b2ParticleSystem.k_noPressureFlags) {\n            for (var i = 0; i < this.m_count; i++) {\n                if (this.m_flagsBuffer.data[i] & b2ParticleSystem.k_noPressureFlags) {\n                    this.m_accumulationBuffer[i] = 0;\n                }\n            }\n        }\n        if (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_staticPressureParticle) {\n            for (var i = 0; i < this.m_count; i++) {\n                if (this.m_flagsBuffer.data[i] & b2_particle_1.b2ParticleFlag.b2_staticPressureParticle) {\n                    this.m_accumulationBuffer[i] += this.m_staticPressureBuffer[i];\n                }\n            }\n        }\n        var velocityPerPressure = step.dt / (this.m_def.density * this.m_particleDiameter);\n        var inv_mass = this.GetParticleInvMass();\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            var b = contact.body;\n            var w = contact.weight;\n            var m = contact.mass;\n            var n = contact.normal;\n            var p = pos_data[a];\n            var h = this.m_accumulationBuffer[a] + pressurePerWeight * w;\n            var f = b2_math_1.b2Vec2.MulSV(velocityPerPressure * w * m * h, n, s_f);\n            vel_data[a].SelfMulSub(inv_mass, f);\n            b.ApplyLinearImpulse(f, p, true);\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var w = contact.weight;\n            var n = contact.normal;\n            var h = this.m_accumulationBuffer[a] + this.m_accumulationBuffer[b];\n            var f = b2_math_1.b2Vec2.MulSV(velocityPerPressure * w * h, n, s_f);\n            vel_data[a].SelfSub(f);\n            vel_data[b].SelfAdd(f);\n        }\n    };\n    b2ParticleSystem.prototype.SolveDamping = function (step) {\n        var s_v = b2ParticleSystem.SolveDamping_s_v;\n        var s_f = b2ParticleSystem.SolveDamping_s_f;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var linearDamping = this.m_def.dampingStrength;\n        var quadraticDamping = 1 / this.GetCriticalVelocity(step);\n        var inv_mass = this.GetParticleInvMass();\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            var b = contact.body;\n            var w = contact.weight;\n            var m = contact.mass;\n            var n = contact.normal;\n            var p = pos_data[a];\n            var v = b2_math_1.b2Vec2.SubVV(b.GetLinearVelocityFromWorldPoint(p, b2_math_1.b2Vec2.s_t0), vel_data[a], s_v);\n            var vn = b2_math_1.b2Vec2.DotVV(v, n);\n            if (vn < 0) {\n                var damping = b2_math_1.b2Max(linearDamping * w, b2_math_1.b2Min(-quadraticDamping * vn, 0.5));\n                var f = b2_math_1.b2Vec2.MulSV(damping * m * vn, n, s_f);\n                vel_data[a].SelfMulAdd(inv_mass, f);\n                b.ApplyLinearImpulse(f.SelfNeg(), p, true);\n            }\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var w = contact.weight;\n            var n = contact.normal;\n            var v = b2_math_1.b2Vec2.SubVV(vel_data[b], vel_data[a], s_v);\n            var vn = b2_math_1.b2Vec2.DotVV(v, n);\n            if (vn < 0) {\n                var damping = b2_math_1.b2Max(linearDamping * w, b2_math_1.b2Min(-quadraticDamping * vn, 0.5));\n                var f = b2_math_1.b2Vec2.MulSV(damping * vn, n, s_f);\n                vel_data[a].SelfAdd(f);\n                vel_data[b].SelfSub(f);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveRigidDamping = function () {\n        var s_t0 = b2ParticleSystem.SolveRigidDamping_s_t0;\n        var s_t1 = b2ParticleSystem.SolveRigidDamping_s_t1;\n        var s_p = b2ParticleSystem.SolveRigidDamping_s_p;\n        var s_v = b2ParticleSystem.SolveRigidDamping_s_v;\n        var invMassA = [0.0], invInertiaA = [0.0], tangentDistanceA = [0.0];\n        var invMassB = [0.0], invInertiaB = [0.0], tangentDistanceB = [0.0];\n        var pos_data = this.m_positionBuffer.data;\n        var damping = this.m_def.dampingStrength;\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            var aGroup = this.m_groupBuffer[a];\n            if (aGroup && this.IsRigidGroup(aGroup)) {\n                var b = contact.body;\n                var n = contact.normal;\n                var w = contact.weight;\n                var p = pos_data[a];\n                var v = b2_math_1.b2Vec2.SubVV(b.GetLinearVelocityFromWorldPoint(p, s_t0), aGroup.GetLinearVelocityFromWorldPoint(p, s_t1), s_v);\n                var vn = b2_math_1.b2Vec2.DotVV(v, n);\n                if (vn < 0) {\n                    this.InitDampingParameterWithRigidGroupOrParticle(invMassA, invInertiaA, tangentDistanceA, true, aGroup, a, p, n);\n                    this.InitDampingParameter(invMassB, invInertiaB, tangentDistanceB, b.GetMass(), b.GetInertia() - b.GetMass() * b.GetLocalCenter().LengthSquared(), b.GetWorldCenter(), p, n);\n                    var f = damping * b2_math_1.b2Min(w, 1.0) * this.ComputeDampingImpulse(invMassA[0], invInertiaA[0], tangentDistanceA[0], invMassB[0], invInertiaB[0], tangentDistanceB[0], vn);\n                    this.ApplyDamping(invMassA[0], invInertiaA[0], tangentDistanceA[0], true, aGroup, a, f, n);\n                    b.ApplyLinearImpulse(b2_math_1.b2Vec2.MulSV(-f, n, b2_math_1.b2Vec2.s_t0), p, true);\n                }\n            }\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            var n = contact.normal;\n            var w = contact.weight;\n            var aGroup = this.m_groupBuffer[a];\n            var bGroup = this.m_groupBuffer[b];\n            var aRigid = this.IsRigidGroup(aGroup);\n            var bRigid = this.IsRigidGroup(bGroup);\n            if (aGroup !== bGroup && (aRigid || bRigid)) {\n                var p = b2_math_1.b2Vec2.MidVV(pos_data[a], pos_data[b], s_p);\n                var v = b2_math_1.b2Vec2.SubVV(this.GetLinearVelocity(bGroup, b, p, s_t0), this.GetLinearVelocity(aGroup, a, p, s_t1), s_v);\n                var vn = b2_math_1.b2Vec2.DotVV(v, n);\n                if (vn < 0) {\n                    this.InitDampingParameterWithRigidGroupOrParticle(invMassA, invInertiaA, tangentDistanceA, aRigid, aGroup, a, p, n);\n                    this.InitDampingParameterWithRigidGroupOrParticle(invMassB, invInertiaB, tangentDistanceB, bRigid, bGroup, b, p, n);\n                    var f = damping * w * this.ComputeDampingImpulse(invMassA[0], invInertiaA[0], tangentDistanceA[0], invMassB[0], invInertiaB[0], tangentDistanceB[0], vn);\n                    this.ApplyDamping(invMassA[0], invInertiaA[0], tangentDistanceA[0], aRigid, aGroup, a, f, n);\n                    this.ApplyDamping(invMassB[0], invInertiaB[0], tangentDistanceB[0], bRigid, bGroup, b, -f, n);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveExtraDamping = function () {\n        var s_v = b2ParticleSystem.SolveExtraDamping_s_v;\n        var s_f = b2ParticleSystem.SolveExtraDamping_s_f;\n        var vel_data = this.m_velocityBuffer.data;\n        var pos_data = this.m_positionBuffer.data;\n        var inv_mass = this.GetParticleInvMass();\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            if (this.m_flagsBuffer.data[a] & b2ParticleSystem.k_extraDampingFlags) {\n                var b = contact.body;\n                var m = contact.mass;\n                var n = contact.normal;\n                var p = pos_data[a];\n                var v = b2_math_1.b2Vec2.SubVV(b.GetLinearVelocityFromWorldPoint(p, b2_math_1.b2Vec2.s_t0), vel_data[a], s_v);\n                var vn = b2_math_1.b2Vec2.DotVV(v, n);\n                if (vn < 0) {\n                    var f = b2_math_1.b2Vec2.MulSV(0.5 * m * vn, n, s_f);\n                    vel_data[a].SelfMulAdd(inv_mass, f);\n                    b.ApplyLinearImpulse(f.SelfNeg(), p, true);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveWall = function () {\n        var vel_data = this.m_velocityBuffer.data;\n        for (var i = 0; i < this.m_count; i++) {\n            if (this.m_flagsBuffer.data[i] & b2_particle_1.b2ParticleFlag.b2_wallParticle) {\n                vel_data[i].SetZero();\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveRigid = function (step) {\n        var s_position = b2ParticleSystem.SolveRigid_s_position;\n        var s_rotation = b2ParticleSystem.SolveRigid_s_rotation;\n        var s_transform = b2ParticleSystem.SolveRigid_s_transform;\n        var s_velocityTransform = b2ParticleSystem.SolveRigid_s_velocityTransform;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        for (var group = this.m_groupList; group; group = group.GetNext()) {\n            if (group.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_rigidParticleGroup) {\n                group.UpdateStatistics();\n                var rotation = s_rotation;\n                rotation.SetAngle(step.dt * group.m_angularVelocity);\n                var position = b2_math_1.b2Vec2.AddVV(group.m_center, b2_math_1.b2Vec2.SubVV(b2_math_1.b2Vec2.MulSV(step.dt, group.m_linearVelocity, b2_math_1.b2Vec2.s_t0), b2_math_1.b2Rot.MulRV(rotation, group.m_center, b2_math_1.b2Vec2.s_t1), b2_math_1.b2Vec2.s_t0), s_position);\n                var transform = s_transform;\n                transform.SetPositionRotation(position, rotation);\n                b2_math_1.b2Transform.MulXX(transform, group.m_transform, group.m_transform);\n                var velocityTransform = s_velocityTransform;\n                velocityTransform.p.x = step.inv_dt * transform.p.x;\n                velocityTransform.p.y = step.inv_dt * transform.p.y;\n                velocityTransform.q.s = step.inv_dt * transform.q.s;\n                velocityTransform.q.c = step.inv_dt * (transform.q.c - 1);\n                for (var i = group.m_firstIndex; i < group.m_lastIndex; i++) {\n                    b2_math_1.b2Transform.MulXV(velocityTransform, pos_data[i], vel_data[i]);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveElastic = function (step) {\n        var s_pa = b2ParticleSystem.SolveElastic_s_pa;\n        var s_pb = b2ParticleSystem.SolveElastic_s_pb;\n        var s_pc = b2ParticleSystem.SolveElastic_s_pc;\n        var s_r = b2ParticleSystem.SolveElastic_s_r;\n        var s_t0 = b2ParticleSystem.SolveElastic_s_t0;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var elasticStrength = step.inv_dt * this.m_def.elasticStrength;\n        for (var k = 0; k < this.m_triadBuffer.count; k++) {\n            var triad = this.m_triadBuffer.data[k];\n            if (triad.flags & b2_particle_1.b2ParticleFlag.b2_elasticParticle) {\n                var a = triad.indexA;\n                var b = triad.indexB;\n                var c = triad.indexC;\n                var oa = triad.pa;\n                var ob = triad.pb;\n                var oc = triad.pc;\n                var pa = s_pa.Copy(pos_data[a]);\n                var pb = s_pb.Copy(pos_data[b]);\n                var pc = s_pc.Copy(pos_data[c]);\n                var va = vel_data[a];\n                var vb = vel_data[b];\n                var vc = vel_data[c];\n                pa.SelfMulAdd(step.dt, va);\n                pb.SelfMulAdd(step.dt, vb);\n                pc.SelfMulAdd(step.dt, vc);\n                var midPoint_x = (pa.x + pb.x + pc.x) / 3.0;\n                var midPoint_y = (pa.y + pb.y + pc.y) / 3.0;\n                pa.x -= midPoint_x;\n                pa.y -= midPoint_y;\n                pb.x -= midPoint_x;\n                pb.y -= midPoint_y;\n                pc.x -= midPoint_x;\n                pc.y -= midPoint_y;\n                var r = s_r;\n                r.s = b2_math_1.b2Vec2.CrossVV(oa, pa) + b2_math_1.b2Vec2.CrossVV(ob, pb) + b2_math_1.b2Vec2.CrossVV(oc, pc);\n                r.c = b2_math_1.b2Vec2.DotVV(oa, pa) + b2_math_1.b2Vec2.DotVV(ob, pb) + b2_math_1.b2Vec2.DotVV(oc, pc);\n                var r2 = r.s * r.s + r.c * r.c;\n                var invR = b2_math_1.b2InvSqrt(r2);\n                if (!isFinite(invR)) {\n                    invR = 1.98177537e+019;\n                }\n                r.s *= invR;\n                r.c *= invR;\n                var strength = elasticStrength * triad.strength;\n                b2_math_1.b2Rot.MulRV(r, oa, s_t0);\n                b2_math_1.b2Vec2.SubVV(s_t0, pa, s_t0);\n                b2_math_1.b2Vec2.MulSV(strength, s_t0, s_t0);\n                va.SelfAdd(s_t0);\n                b2_math_1.b2Rot.MulRV(r, ob, s_t0);\n                b2_math_1.b2Vec2.SubVV(s_t0, pb, s_t0);\n                b2_math_1.b2Vec2.MulSV(strength, s_t0, s_t0);\n                vb.SelfAdd(s_t0);\n                b2_math_1.b2Rot.MulRV(r, oc, s_t0);\n                b2_math_1.b2Vec2.SubVV(s_t0, pc, s_t0);\n                b2_math_1.b2Vec2.MulSV(strength, s_t0, s_t0);\n                vc.SelfAdd(s_t0);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveSpring = function (step) {\n        var s_pa = b2ParticleSystem.SolveSpring_s_pa;\n        var s_pb = b2ParticleSystem.SolveSpring_s_pb;\n        var s_d = b2ParticleSystem.SolveSpring_s_d;\n        var s_f = b2ParticleSystem.SolveSpring_s_f;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var springStrength = step.inv_dt * this.m_def.springStrength;\n        for (var k = 0; k < this.m_pairBuffer.count; k++) {\n            var pair = this.m_pairBuffer.data[k];\n            if (pair.flags & b2_particle_1.b2ParticleFlag.b2_springParticle) {\n                var a = pair.indexA;\n                var b = pair.indexB;\n                var pa = s_pa.Copy(pos_data[a]);\n                var pb = s_pb.Copy(pos_data[b]);\n                var va = vel_data[a];\n                var vb = vel_data[b];\n                pa.SelfMulAdd(step.dt, va);\n                pb.SelfMulAdd(step.dt, vb);\n                var d = b2_math_1.b2Vec2.SubVV(pb, pa, s_d);\n                var r0 = pair.distance;\n                var r1 = d.Length();\n                var strength = springStrength * pair.strength;\n                var f = b2_math_1.b2Vec2.MulSV(strength * (r0 - r1) / r1, d, s_f);\n                va.SelfSub(f);\n                vb.SelfAdd(f);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveTensile = function (step) {\n        var s_weightedNormal = b2ParticleSystem.SolveTensile_s_weightedNormal;\n        var s_s = b2ParticleSystem.SolveTensile_s_s;\n        var s_f = b2ParticleSystem.SolveTensile_s_f;\n        var vel_data = this.m_velocityBuffer.data;\n        for (var i = 0; i < this.m_count; i++) {\n            this.m_accumulation2Buffer[i] = new b2_math_1.b2Vec2();\n            this.m_accumulation2Buffer[i].SetZero();\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            if (contact.flags & b2_particle_1.b2ParticleFlag.b2_tensileParticle) {\n                var a = contact.indexA;\n                var b = contact.indexB;\n                var w = contact.weight;\n                var n = contact.normal;\n                var weightedNormal = b2_math_1.b2Vec2.MulSV((1 - w) * w, n, s_weightedNormal);\n                this.m_accumulation2Buffer[a].SelfSub(weightedNormal);\n                this.m_accumulation2Buffer[b].SelfAdd(weightedNormal);\n            }\n        }\n        var criticalVelocity = this.GetCriticalVelocity(step);\n        var pressureStrength = this.m_def.surfaceTensionPressureStrength * criticalVelocity;\n        var normalStrength = this.m_def.surfaceTensionNormalStrength * criticalVelocity;\n        var maxVelocityVariation = b2_settings_2.b2_maxParticleForce * criticalVelocity;\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            if (contact.flags & b2_particle_1.b2ParticleFlag.b2_tensileParticle) {\n                var a = contact.indexA;\n                var b = contact.indexB;\n                var w = contact.weight;\n                var n = contact.normal;\n                var h = this.m_weightBuffer[a] + this.m_weightBuffer[b];\n                var s = b2_math_1.b2Vec2.SubVV(this.m_accumulation2Buffer[b], this.m_accumulation2Buffer[a], s_s);\n                var fn = b2_math_1.b2Min(pressureStrength * (h - 2) + normalStrength * b2_math_1.b2Vec2.DotVV(s, n), maxVelocityVariation) * w;\n                var f = b2_math_1.b2Vec2.MulSV(fn, n, s_f);\n                vel_data[a].SelfSub(f);\n                vel_data[b].SelfAdd(f);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveViscous = function () {\n        var s_v = b2ParticleSystem.SolveViscous_s_v;\n        var s_f = b2ParticleSystem.SolveViscous_s_f;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var viscousStrength = this.m_def.viscousStrength;\n        var inv_mass = this.GetParticleInvMass();\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            if (this.m_flagsBuffer.data[a] & b2_particle_1.b2ParticleFlag.b2_viscousParticle) {\n                var b = contact.body;\n                var w = contact.weight;\n                var m = contact.mass;\n                var p = pos_data[a];\n                var v = b2_math_1.b2Vec2.SubVV(b.GetLinearVelocityFromWorldPoint(p, b2_math_1.b2Vec2.s_t0), vel_data[a], s_v);\n                var f = b2_math_1.b2Vec2.MulSV(viscousStrength * m * w, v, s_f);\n                vel_data[a].SelfMulAdd(inv_mass, f);\n                b.ApplyLinearImpulse(f.SelfNeg(), p, true);\n            }\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            if (contact.flags & b2_particle_1.b2ParticleFlag.b2_viscousParticle) {\n                var a = contact.indexA;\n                var b = contact.indexB;\n                var w = contact.weight;\n                var v = b2_math_1.b2Vec2.SubVV(vel_data[b], vel_data[a], s_v);\n                var f = b2_math_1.b2Vec2.MulSV(viscousStrength * w, v, s_f);\n                vel_data[a].SelfAdd(f);\n                vel_data[b].SelfSub(f);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveRepulsive = function (step) {\n        var s_f = b2ParticleSystem.SolveRepulsive_s_f;\n        var vel_data = this.m_velocityBuffer.data;\n        var repulsiveStrength = this.m_def.repulsiveStrength * this.GetCriticalVelocity(step);\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            if (contact.flags & b2_particle_1.b2ParticleFlag.b2_repulsiveParticle) {\n                var a = contact.indexA;\n                var b = contact.indexB;\n                if (this.m_groupBuffer[a] !== this.m_groupBuffer[b]) {\n                    var w = contact.weight;\n                    var n = contact.normal;\n                    var f = b2_math_1.b2Vec2.MulSV(repulsiveStrength * w, n, s_f);\n                    vel_data[a].SelfSub(f);\n                    vel_data[b].SelfAdd(f);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolvePowder = function (step) {\n        var s_f = b2ParticleSystem.SolvePowder_s_f;\n        var pos_data = this.m_positionBuffer.data;\n        var vel_data = this.m_velocityBuffer.data;\n        var powderStrength = this.m_def.powderStrength * this.GetCriticalVelocity(step);\n        var minWeight = 1.0 - b2_settings_2.b2_particleStride;\n        var inv_mass = this.GetParticleInvMass();\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            var a = contact.index;\n            if (this.m_flagsBuffer.data[a] & b2_particle_1.b2ParticleFlag.b2_powderParticle) {\n                var w = contact.weight;\n                if (w > minWeight) {\n                    var b = contact.body;\n                    var m = contact.mass;\n                    var p = pos_data[a];\n                    var n = contact.normal;\n                    var f = b2_math_1.b2Vec2.MulSV(powderStrength * m * (w - minWeight), n, s_f);\n                    vel_data[a].SelfMulSub(inv_mass, f);\n                    b.ApplyLinearImpulse(f, p, true);\n                }\n            }\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            if (contact.flags & b2_particle_1.b2ParticleFlag.b2_powderParticle) {\n                var w = contact.weight;\n                if (w > minWeight) {\n                    var a = contact.indexA;\n                    var b = contact.indexB;\n                    var n = contact.normal;\n                    var f = b2_math_1.b2Vec2.MulSV(powderStrength * (w - minWeight), n, s_f);\n                    vel_data[a].SelfSub(f);\n                    vel_data[b].SelfAdd(f);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveSolid = function (step) {\n        var s_f = b2ParticleSystem.SolveSolid_s_f;\n        var vel_data = this.m_velocityBuffer.data;\n        this.m_depthBuffer = this.RequestBuffer(this.m_depthBuffer);\n        var ejectionStrength = step.inv_dt * this.m_def.ejectionStrength;\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            var a = contact.indexA;\n            var b = contact.indexB;\n            if (this.m_groupBuffer[a] !== this.m_groupBuffer[b]) {\n                var w = contact.weight;\n                var n = contact.normal;\n                var h = this.m_depthBuffer[a] + this.m_depthBuffer[b];\n                var f = b2_math_1.b2Vec2.MulSV(ejectionStrength * h * w, n, s_f);\n                vel_data[a].SelfSub(f);\n                vel_data[b].SelfAdd(f);\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveForce = function (step) {\n        var vel_data = this.m_velocityBuffer.data;\n        var velocityPerForce = step.dt * this.GetParticleInvMass();\n        for (var i = 0; i < this.m_count; i++) {\n            vel_data[i].SelfMulAdd(velocityPerForce, this.m_forceBuffer[i]);\n        }\n        this.m_hasForce = false;\n    };\n    b2ParticleSystem.prototype.SolveColorMixing = function () {\n        var colorMixing = 0.5 * this.m_def.colorMixingStrength;\n        if (colorMixing) {\n            for (var k = 0; k < this.m_contactBuffer.count; k++) {\n                var contact = this.m_contactBuffer.data[k];\n                var a = contact.indexA;\n                var b = contact.indexB;\n                if (this.m_flagsBuffer.data[a] & this.m_flagsBuffer.data[b] &\n                    b2_particle_1.b2ParticleFlag.b2_colorMixingParticle) {\n                    var colorA = this.m_colorBuffer.data[a];\n                    var colorB = this.m_colorBuffer.data[b];\n                    b2_draw_1.b2Color.MixColors(colorA, colorB, colorMixing);\n                }\n            }\n        }\n    };\n    b2ParticleSystem.prototype.SolveZombie = function () {\n        var newCount = 0;\n        var newIndices = [];\n        for (var i = 0; i < this.m_count; i++) {\n            newIndices[i] = b2_settings_1.b2_invalidParticleIndex;\n        }\n        var allParticleFlags = 0;\n        for (var i = 0; i < this.m_count; i++) {\n            var flags = this.m_flagsBuffer.data[i];\n            if (flags & b2_particle_1.b2ParticleFlag.b2_zombieParticle) {\n                var destructionListener = this.m_world.m_destructionListener;\n                if ((flags & b2_particle_1.b2ParticleFlag.b2_destructionListenerParticle) && destructionListener) {\n                    destructionListener.SayGoodbyeParticle(this, i);\n                }\n                if (this.m_handleIndexBuffer.data) {\n                    var handle = this.m_handleIndexBuffer.data[i];\n                    if (handle) {\n                        handle.SetIndex(b2_settings_1.b2_invalidParticleIndex);\n                        this.m_handleIndexBuffer.data[i] = null;\n                    }\n                }\n                newIndices[i] = b2_settings_1.b2_invalidParticleIndex;\n            }\n            else {\n                newIndices[i] = newCount;\n                if (i !== newCount) {\n                    if (this.m_handleIndexBuffer.data) {\n                        var handle = this.m_handleIndexBuffer.data[i];\n                        if (handle) {\n                            handle.SetIndex(newCount);\n                        }\n                        this.m_handleIndexBuffer.data[newCount] = handle;\n                    }\n                    this.m_flagsBuffer.data[newCount] = this.m_flagsBuffer.data[i];\n                    if (this.m_lastBodyContactStepBuffer.data) {\n                        this.m_lastBodyContactStepBuffer.data[newCount] = this.m_lastBodyContactStepBuffer.data[i];\n                    }\n                    if (this.m_bodyContactCountBuffer.data) {\n                        this.m_bodyContactCountBuffer.data[newCount] = this.m_bodyContactCountBuffer.data[i];\n                    }\n                    if (this.m_consecutiveContactStepsBuffer.data) {\n                        this.m_consecutiveContactStepsBuffer.data[newCount] = this.m_consecutiveContactStepsBuffer.data[i];\n                    }\n                    this.m_positionBuffer.data[newCount].Copy(this.m_positionBuffer.data[i]);\n                    this.m_velocityBuffer.data[newCount].Copy(this.m_velocityBuffer.data[i]);\n                    this.m_groupBuffer[newCount] = this.m_groupBuffer[i];\n                    if (this.m_hasForce) {\n                        this.m_forceBuffer[newCount].Copy(this.m_forceBuffer[i]);\n                    }\n                    if (this.m_staticPressureBuffer) {\n                        this.m_staticPressureBuffer[newCount] = this.m_staticPressureBuffer[i];\n                    }\n                    if (this.m_depthBuffer) {\n                        this.m_depthBuffer[newCount] = this.m_depthBuffer[i];\n                    }\n                    if (this.m_colorBuffer.data) {\n                        this.m_colorBuffer.data[newCount].Copy(this.m_colorBuffer.data[i]);\n                    }\n                    if (this.m_userDataBuffer.data) {\n                        this.m_userDataBuffer.data[newCount] = this.m_userDataBuffer.data[i];\n                    }\n                    if (this.m_expirationTimeBuffer.data) {\n                        this.m_expirationTimeBuffer.data[newCount] = this.m_expirationTimeBuffer.data[i];\n                    }\n                }\n                newCount++;\n                allParticleFlags |= flags;\n            }\n        }\n        var Test = {\n            IsProxyInvalid: function (proxy) {\n                return proxy.index < 0;\n            },\n            IsContactInvalid: function (contact) {\n                return contact.indexA < 0 || contact.indexB < 0;\n            },\n            IsBodyContactInvalid: function (contact) {\n                return contact.index < 0;\n            },\n            IsPairInvalid: function (pair) {\n                return pair.indexA < 0 || pair.indexB < 0;\n            },\n            IsTriadInvalid: function (triad) {\n                return triad.indexA < 0 || triad.indexB < 0 || triad.indexC < 0;\n            },\n        };\n        for (var k = 0; k < this.m_proxyBuffer.count; k++) {\n            var proxy = this.m_proxyBuffer.data[k];\n            proxy.index = newIndices[proxy.index];\n        }\n        this.m_proxyBuffer.RemoveIf(Test.IsProxyInvalid);\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            contact.indexA = newIndices[contact.indexA];\n            contact.indexB = newIndices[contact.indexB];\n        }\n        this.m_contactBuffer.RemoveIf(Test.IsContactInvalid);\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            contact.index = newIndices[contact.index];\n        }\n        this.m_bodyContactBuffer.RemoveIf(Test.IsBodyContactInvalid);\n        for (var k = 0; k < this.m_pairBuffer.count; k++) {\n            var pair = this.m_pairBuffer.data[k];\n            pair.indexA = newIndices[pair.indexA];\n            pair.indexB = newIndices[pair.indexB];\n        }\n        this.m_pairBuffer.RemoveIf(Test.IsPairInvalid);\n        for (var k = 0; k < this.m_triadBuffer.count; k++) {\n            var triad = this.m_triadBuffer.data[k];\n            triad.indexA = newIndices[triad.indexA];\n            triad.indexB = newIndices[triad.indexB];\n            triad.indexC = newIndices[triad.indexC];\n        }\n        this.m_triadBuffer.RemoveIf(Test.IsTriadInvalid);\n        if (this.m_indexByExpirationTimeBuffer.data) {\n            var writeOffset = 0;\n            for (var readOffset = 0; readOffset < this.m_count; readOffset++) {\n                var newIndex = newIndices[this.m_indexByExpirationTimeBuffer.data[readOffset]];\n                if (newIndex !== b2_settings_1.b2_invalidParticleIndex) {\n                    this.m_indexByExpirationTimeBuffer.data[writeOffset++] = newIndex;\n                }\n            }\n        }\n        for (var group = this.m_groupList; group; group = group.GetNext()) {\n            var firstIndex = newCount;\n            var lastIndex = 0;\n            var modified = false;\n            for (var i = group.m_firstIndex; i < group.m_lastIndex; i++) {\n                var j = newIndices[i];\n                if (j >= 0) {\n                    firstIndex = b2_math_1.b2Min(firstIndex, j);\n                    lastIndex = b2_math_1.b2Max(lastIndex, j + 1);\n                }\n                else {\n                    modified = true;\n                }\n            }\n            if (firstIndex < lastIndex) {\n                group.m_firstIndex = firstIndex;\n                group.m_lastIndex = lastIndex;\n                if (modified) {\n                    if (group.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_solidParticleGroup) {\n                        this.SetGroupFlags(group, group.m_groupFlags | b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);\n                    }\n                }\n            }\n            else {\n                group.m_firstIndex = 0;\n                group.m_lastIndex = 0;\n                if (!(group.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty)) {\n                    this.SetGroupFlags(group, group.m_groupFlags | b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed);\n                }\n            }\n        }\n        this.m_count = newCount;\n        this.m_allParticleFlags = allParticleFlags;\n        this.m_needsUpdateAllParticleFlags = false;\n        for (var group = this.m_groupList; group;) {\n            var next = group.GetNext();\n            if (group.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed) {\n                this.DestroyParticleGroup(group);\n            }\n            group = next;\n        }\n    };\n    b2ParticleSystem.prototype.SolveLifetimes = function (step) {\n        this.m_timeElapsed = this.LifetimeToExpirationTime(step.dt);\n        var quantizedTimeElapsed = this.GetQuantizedTimeElapsed();\n        var expirationTimes = this.m_expirationTimeBuffer.data;\n        var expirationTimeIndices = this.m_indexByExpirationTimeBuffer.data;\n        var particleCount = this.GetParticleCount();\n        if (this.m_expirationTimeBufferRequiresSorting) {\n            var ExpirationTimeComparator = function (particleIndexA, particleIndexB) {\n                var expirationTimeA = expirationTimes[particleIndexA];\n                var expirationTimeB = expirationTimes[particleIndexB];\n                var infiniteExpirationTimeA = expirationTimeA <= 0.0;\n                var infiniteExpirationTimeB = expirationTimeB <= 0.0;\n                return infiniteExpirationTimeA === infiniteExpirationTimeB ?\n                    expirationTimeA > expirationTimeB : infiniteExpirationTimeA;\n            };\n            std_sort(expirationTimeIndices, 0, particleCount, ExpirationTimeComparator);\n            this.m_expirationTimeBufferRequiresSorting = false;\n        }\n        for (var i = particleCount - 1; i >= 0; --i) {\n            var particleIndex = expirationTimeIndices[i];\n            var expirationTime = expirationTimes[particleIndex];\n            if (quantizedTimeElapsed < expirationTime || expirationTime <= 0) {\n                break;\n            }\n            this.DestroyParticle(particleIndex);\n        }\n    };\n    b2ParticleSystem.prototype.RotateBuffer = function (start, mid, end) {\n        if (start === mid || mid === end) {\n            return;\n        }\n        function newIndices(i) {\n            if (i < start) {\n                return i;\n            }\n            else if (i < mid) {\n                return i + end - mid;\n            }\n            else if (i < end) {\n                return i + start - mid;\n            }\n            else {\n                return i;\n            }\n        }\n        std_rotate(this.m_flagsBuffer.data, start, mid, end);\n        if (this.m_lastBodyContactStepBuffer.data) {\n            std_rotate(this.m_lastBodyContactStepBuffer.data, start, mid, end);\n        }\n        if (this.m_bodyContactCountBuffer.data) {\n            std_rotate(this.m_bodyContactCountBuffer.data, start, mid, end);\n        }\n        if (this.m_consecutiveContactStepsBuffer.data) {\n            std_rotate(this.m_consecutiveContactStepsBuffer.data, start, mid, end);\n        }\n        std_rotate(this.m_positionBuffer.data, start, mid, end);\n        std_rotate(this.m_velocityBuffer.data, start, mid, end);\n        std_rotate(this.m_groupBuffer, start, mid, end);\n        if (this.m_hasForce) {\n            std_rotate(this.m_forceBuffer, start, mid, end);\n        }\n        if (this.m_staticPressureBuffer) {\n            std_rotate(this.m_staticPressureBuffer, start, mid, end);\n        }\n        if (this.m_depthBuffer) {\n            std_rotate(this.m_depthBuffer, start, mid, end);\n        }\n        if (this.m_colorBuffer.data) {\n            std_rotate(this.m_colorBuffer.data, start, mid, end);\n        }\n        if (this.m_userDataBuffer.data) {\n            std_rotate(this.m_userDataBuffer.data, start, mid, end);\n        }\n        if (this.m_handleIndexBuffer.data) {\n            std_rotate(this.m_handleIndexBuffer.data, start, mid, end);\n            for (var i = start; i < end; ++i) {\n                var handle = this.m_handleIndexBuffer.data[i];\n                if (handle) {\n                    handle.SetIndex(newIndices(handle.GetIndex()));\n                }\n            }\n        }\n        if (this.m_expirationTimeBuffer.data) {\n            std_rotate(this.m_expirationTimeBuffer.data, start, mid, end);\n            var particleCount = this.GetParticleCount();\n            var indexByExpirationTime = this.m_indexByExpirationTimeBuffer.data;\n            for (var i = 0; i < particleCount; ++i) {\n                indexByExpirationTime[i] = newIndices(indexByExpirationTime[i]);\n            }\n        }\n        for (var k = 0; k < this.m_proxyBuffer.count; k++) {\n            var proxy = this.m_proxyBuffer.data[k];\n            proxy.index = newIndices(proxy.index);\n        }\n        for (var k = 0; k < this.m_contactBuffer.count; k++) {\n            var contact = this.m_contactBuffer.data[k];\n            contact.indexA = newIndices(contact.indexA);\n            contact.indexB = newIndices(contact.indexB);\n        }\n        for (var k = 0; k < this.m_bodyContactBuffer.count; k++) {\n            var contact = this.m_bodyContactBuffer.data[k];\n            contact.index = newIndices(contact.index);\n        }\n        for (var k = 0; k < this.m_pairBuffer.count; k++) {\n            var pair = this.m_pairBuffer.data[k];\n            pair.indexA = newIndices(pair.indexA);\n            pair.indexB = newIndices(pair.indexB);\n        }\n        for (var k = 0; k < this.m_triadBuffer.count; k++) {\n            var triad = this.m_triadBuffer.data[k];\n            triad.indexA = newIndices(triad.indexA);\n            triad.indexB = newIndices(triad.indexB);\n            triad.indexC = newIndices(triad.indexC);\n        }\n        for (var group = this.m_groupList; group; group = group.GetNext()) {\n            group.m_firstIndex = newIndices(group.m_firstIndex);\n            group.m_lastIndex = newIndices(group.m_lastIndex - 1) + 1;\n        }\n    };\n    b2ParticleSystem.prototype.GetCriticalVelocity = function (step) {\n        return this.m_particleDiameter * step.inv_dt;\n    };\n    b2ParticleSystem.prototype.GetCriticalVelocitySquared = function (step) {\n        var velocity = this.GetCriticalVelocity(step);\n        return velocity * velocity;\n    };\n    b2ParticleSystem.prototype.GetCriticalPressure = function (step) {\n        return this.m_def.density * this.GetCriticalVelocitySquared(step);\n    };\n    b2ParticleSystem.prototype.GetParticleStride = function () {\n        return b2_settings_2.b2_particleStride * this.m_particleDiameter;\n    };\n    b2ParticleSystem.prototype.GetParticleMass = function () {\n        var stride = this.GetParticleStride();\n        return this.m_def.density * stride * stride;\n    };\n    b2ParticleSystem.prototype.GetParticleInvMass = function () {\n        var inverseStride = this.m_inverseDiameter * (1.0 / b2_settings_2.b2_particleStride);\n        return this.m_inverseDensity * inverseStride * inverseStride;\n    };\n    b2ParticleSystem.prototype.GetFixtureContactFilter = function () {\n        return (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_fixtureContactFilterParticle) ?\n            this.m_world.m_contactManager.m_contactFilter : null;\n    };\n    b2ParticleSystem.prototype.GetParticleContactFilter = function () {\n        return (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_particleContactFilterParticle) ?\n            this.m_world.m_contactManager.m_contactFilter : null;\n    };\n    b2ParticleSystem.prototype.GetFixtureContactListener = function () {\n        return (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_fixtureContactListenerParticle) ?\n            this.m_world.m_contactManager.m_contactListener : null;\n    };\n    b2ParticleSystem.prototype.GetParticleContactListener = function () {\n        return (this.m_allParticleFlags & b2_particle_1.b2ParticleFlag.b2_particleContactListenerParticle) ?\n            this.m_world.m_contactManager.m_contactListener : null;\n    };\n    b2ParticleSystem.prototype.SetUserOverridableBuffer = function (buffer, data) {\n        buffer.data = data;\n        buffer.userSuppliedCapacity = data.length;\n    };\n    b2ParticleSystem.prototype.SetGroupFlags = function (group, newFlags) {\n        var oldFlags = group.m_groupFlags;\n        if ((oldFlags ^ newFlags) & b2_particle_group_1.b2ParticleGroupFlag.b2_solidParticleGroup) {\n            newFlags |= b2_particle_group_1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth;\n        }\n        if (oldFlags & ~newFlags) {\n            this.m_needsUpdateAllGroupFlags = true;\n        }\n        if (~this.m_allGroupFlags & newFlags) {\n            if (newFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_solidParticleGroup) {\n                this.m_depthBuffer = this.RequestBuffer(this.m_depthBuffer);\n            }\n            this.m_allGroupFlags |= newFlags;\n        }\n        group.m_groupFlags = newFlags;\n    };\n    b2ParticleSystem.BodyContactCompare = function (lhs, rhs) {\n        if (lhs.index === rhs.index) {\n            return lhs.weight > rhs.weight;\n        }\n        return lhs.index < rhs.index;\n    };\n    b2ParticleSystem.prototype.RemoveSpuriousBodyContacts = function () {\n        std_sort(this.m_bodyContactBuffer.data, 0, this.m_bodyContactBuffer.count, b2ParticleSystem.BodyContactCompare);\n        var s_n = b2ParticleSystem.RemoveSpuriousBodyContacts_s_n;\n        var s_pos = b2ParticleSystem.RemoveSpuriousBodyContacts_s_pos;\n        var s_normal = b2ParticleSystem.RemoveSpuriousBodyContacts_s_normal;\n        var k_maxContactsPerPoint = 3;\n        var system = this;\n        var lastIndex = -1;\n        var currentContacts = 0;\n        var b2ParticleBodyContactRemovePredicate = function (contact) {\n            if (contact.index !== lastIndex) {\n                currentContacts = 0;\n                lastIndex = contact.index;\n            }\n            if (currentContacts++ > k_maxContactsPerPoint) {\n                return true;\n            }\n            var n = s_n.Copy(contact.normal);\n            n.SelfMul(system.m_particleDiameter * (1 - contact.weight));\n            var pos = b2_math_1.b2Vec2.AddVV(system.m_positionBuffer.data[contact.index], n, s_pos);\n            if (!contact.fixture.TestPoint(pos)) {\n                var childCount = contact.fixture.GetShape().GetChildCount();\n                for (var childIndex = 0; childIndex < childCount; childIndex++) {\n                    var normal = s_normal;\n                    var distance = contact.fixture.ComputeDistance(pos, normal, childIndex);\n                    if (distance < b2_settings_1.b2_linearSlop) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            return false;\n        };\n        this.m_bodyContactBuffer.count = std_remove_if(this.m_bodyContactBuffer.data, b2ParticleBodyContactRemovePredicate, this.m_bodyContactBuffer.count);\n    };\n    b2ParticleSystem.prototype.DetectStuckParticle = function (particle) {\n        if (this.m_stuckThreshold <= 0) {\n            return;\n        }\n        ++this.m_bodyContactCountBuffer.data[particle];\n        if (this.m_bodyContactCountBuffer.data[particle] === 2) {\n            ++this.m_consecutiveContactStepsBuffer.data[particle];\n            if (this.m_consecutiveContactStepsBuffer.data[particle] > this.m_stuckThreshold) {\n                this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()] = particle;\n            }\n        }\n        this.m_lastBodyContactStepBuffer.data[particle] = this.m_timestamp;\n    };\n    b2ParticleSystem.prototype.ValidateParticleIndex = function (index) {\n        return index >= 0 && index < this.GetParticleCount() &&\n            index !== b2_settings_1.b2_invalidParticleIndex;\n    };\n    b2ParticleSystem.prototype.GetQuantizedTimeElapsed = function () {\n        return Math.floor(this.m_timeElapsed / 0x100000000);\n    };\n    b2ParticleSystem.prototype.LifetimeToExpirationTime = function (lifetime) {\n        return this.m_timeElapsed + Math.floor(((lifetime / this.m_def.lifetimeGranularity) * 0x100000000));\n    };\n    b2ParticleSystem.prototype.ForceCanBeApplied = function (flags) {\n        return !(flags & b2_particle_1.b2ParticleFlag.b2_wallParticle);\n    };\n    b2ParticleSystem.prototype.PrepareForceBuffer = function () {\n        if (!this.m_hasForce) {\n            for (var i = 0; i < this.m_count; i++) {\n                this.m_forceBuffer[i].SetZero();\n            }\n            this.m_hasForce = true;\n        }\n    };\n    b2ParticleSystem.prototype.IsRigidGroup = function (group) {\n        return (group !== null) && ((group.m_groupFlags & b2_particle_group_1.b2ParticleGroupFlag.b2_rigidParticleGroup) !== 0);\n    };\n    b2ParticleSystem.prototype.GetLinearVelocity = function (group, particleIndex, point, out) {\n        if (group && this.IsRigidGroup(group)) {\n            return group.GetLinearVelocityFromWorldPoint(point, out);\n        }\n        else {\n            return out.Copy(this.m_velocityBuffer.data[particleIndex]);\n        }\n    };\n    b2ParticleSystem.prototype.InitDampingParameter = function (invMass, invInertia, tangentDistance, mass, inertia, center, point, normal) {\n        invMass[0] = mass > 0 ? 1 / mass : 0;\n        invInertia[0] = inertia > 0 ? 1 / inertia : 0;\n        tangentDistance[0] = b2_math_1.b2Vec2.CrossVV(b2_math_1.b2Vec2.SubVV(point, center, b2_math_1.b2Vec2.s_t0), normal);\n    };\n    b2ParticleSystem.prototype.InitDampingParameterWithRigidGroupOrParticle = function (invMass, invInertia, tangentDistance, isRigidGroup, group, particleIndex, point, normal) {\n        if (group && isRigidGroup) {\n            this.InitDampingParameter(invMass, invInertia, tangentDistance, group.GetMass(), group.GetInertia(), group.GetCenter(), point, normal);\n        }\n        else {\n            var flags = this.m_flagsBuffer.data[particleIndex];\n            this.InitDampingParameter(invMass, invInertia, tangentDistance, flags & b2_particle_1.b2ParticleFlag.b2_wallParticle ? 0 : this.GetParticleMass(), 0, point, point, normal);\n        }\n    };\n    b2ParticleSystem.prototype.ComputeDampingImpulse = function (invMassA, invInertiaA, tangentDistanceA, invMassB, invInertiaB, tangentDistanceB, normalVelocity) {\n        var invMass = invMassA + invInertiaA * tangentDistanceA * tangentDistanceA +\n            invMassB + invInertiaB * tangentDistanceB * tangentDistanceB;\n        return invMass > 0 ? normalVelocity / invMass : 0;\n    };\n    b2ParticleSystem.prototype.ApplyDamping = function (invMass, invInertia, tangentDistance, isRigidGroup, group, particleIndex, impulse, normal) {\n        if (group && isRigidGroup) {\n            group.m_linearVelocity.SelfMulAdd(impulse * invMass, normal);\n            group.m_angularVelocity += impulse * tangentDistance * invInertia;\n        }\n        else {\n            this.m_velocityBuffer.data[particleIndex].SelfMulAdd(impulse * invMass, normal);\n        }\n    };\n    b2ParticleSystem.xTruncBits = 12;\n    b2ParticleSystem.yTruncBits = 12;\n    b2ParticleSystem.tagBits = 8 * 4;\n    b2ParticleSystem.yOffset = 1 << (b2ParticleSystem.yTruncBits - 1);\n    b2ParticleSystem.yShift = b2ParticleSystem.tagBits - b2ParticleSystem.yTruncBits;\n    b2ParticleSystem.xShift = b2ParticleSystem.tagBits - b2ParticleSystem.yTruncBits - b2ParticleSystem.xTruncBits;\n    b2ParticleSystem.xScale = 1 << b2ParticleSystem.xShift;\n    b2ParticleSystem.xOffset = b2ParticleSystem.xScale * (1 << (b2ParticleSystem.xTruncBits - 1));\n    b2ParticleSystem.yMask = ((1 << b2ParticleSystem.yTruncBits) - 1) << b2ParticleSystem.yShift;\n    b2ParticleSystem.xMask = ~b2ParticleSystem.yMask;\n    b2ParticleSystem.DestroyParticlesInShape_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.CreateParticleGroup_s_transform = new b2_math_1.b2Transform();\n    b2ParticleSystem.ComputeCollisionEnergy_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem.QueryShapeAABB_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.QueryPointAABB_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.RayCast_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.RayCast_s_p = new b2_math_1.b2Vec2();\n    b2ParticleSystem.RayCast_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem.RayCast_s_n = new b2_math_1.b2Vec2();\n    b2ParticleSystem.RayCast_s_point = new b2_math_1.b2Vec2();\n    b2ParticleSystem.k_pairFlags = b2_particle_1.b2ParticleFlag.b2_springParticle;\n    b2ParticleSystem.k_triadFlags = b2_particle_1.b2ParticleFlag.b2_elasticParticle;\n    b2ParticleSystem.k_noPressureFlags = b2_particle_1.b2ParticleFlag.b2_powderParticle | b2_particle_1.b2ParticleFlag.b2_tensileParticle;\n    b2ParticleSystem.k_extraDampingFlags = b2_particle_1.b2ParticleFlag.b2_staticPressureParticle;\n    b2ParticleSystem.k_barrierWallFlags = b2_particle_1.b2ParticleFlag.b2_barrierParticle | b2_particle_1.b2ParticleFlag.b2_wallParticle;\n    b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_edge = new b2_edge_shape_1.b2EdgeShape();\n    b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_d = new b2_math_1.b2Vec2();\n    b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_p = new b2_math_1.b2Vec2();\n    b2ParticleSystem.CreateParticlesFillShapeForGroup_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.CreateParticlesFillShapeForGroup_s_p = new b2_math_1.b2Vec2();\n    b2ParticleSystem.UpdatePairsAndTriads_s_dab = new b2_math_1.b2Vec2();\n    b2ParticleSystem.UpdatePairsAndTriads_s_dbc = new b2_math_1.b2Vec2();\n    b2ParticleSystem.UpdatePairsAndTriads_s_dca = new b2_math_1.b2Vec2();\n    b2ParticleSystem.AddContact_s_d = new b2_math_1.b2Vec2();\n    b2ParticleSystem.UpdateBodyContacts_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.Solve_s_subStep = new b2_time_step_1.b2TimeStep();\n    b2ParticleSystem.SolveCollision_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.SolveGravity_s_gravity = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_aabb = new b2_collision_1.b2AABB();\n    b2ParticleSystem.SolveBarrier_s_va = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_vb = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_pba = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_vba = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_vc = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_pca = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_vca = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_qba = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_qca = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_dv = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveBarrier_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolvePressure_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveDamping_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveDamping_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRigidDamping_s_t0 = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRigidDamping_s_t1 = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRigidDamping_s_p = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRigidDamping_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveExtraDamping_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveExtraDamping_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRigid_s_position = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRigid_s_rotation = new b2_math_1.b2Rot();\n    b2ParticleSystem.SolveRigid_s_transform = new b2_math_1.b2Transform();\n    b2ParticleSystem.SolveRigid_s_velocityTransform = new b2_math_1.b2Transform();\n    b2ParticleSystem.SolveElastic_s_pa = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveElastic_s_pb = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveElastic_s_pc = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveElastic_s_r = new b2_math_1.b2Rot();\n    b2ParticleSystem.SolveElastic_s_t0 = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveSpring_s_pa = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveSpring_s_pb = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveSpring_s_d = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveSpring_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveTensile_s_weightedNormal = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveTensile_s_s = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveTensile_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveViscous_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveViscous_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveRepulsive_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolvePowder_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.SolveSolid_s_f = new b2_math_1.b2Vec2();\n    b2ParticleSystem.RemoveSpuriousBodyContacts_s_n = new b2_math_1.b2Vec2();\n    b2ParticleSystem.RemoveSpuriousBodyContacts_s_pos = new b2_math_1.b2Vec2();\n    b2ParticleSystem.RemoveSpuriousBodyContacts_s_normal = new b2_math_1.b2Vec2();\n    return b2ParticleSystem;\n}());\nexports.b2ParticleSystem = b2ParticleSystem;\nvar b2ParticleSystem_UserOverridableBuffer = (function () {\n    function b2ParticleSystem_UserOverridableBuffer() {\n        this._data = null;\n        this.userSuppliedCapacity = 0;\n    }\n    Object.defineProperty(b2ParticleSystem_UserOverridableBuffer.prototype, \"data\", {\n        get: function () { return this._data; },\n        set: function (value) { this._data = value; },\n        enumerable: false,\n        configurable: true\n    });\n    return b2ParticleSystem_UserOverridableBuffer;\n}());\nexports.b2ParticleSystem_UserOverridableBuffer = b2ParticleSystem_UserOverridableBuffer;\nvar b2ParticleSystem_Proxy = (function () {\n    function b2ParticleSystem_Proxy() {\n        this.index = b2_settings_1.b2_invalidParticleIndex;\n        this.tag = 0;\n    }\n    b2ParticleSystem_Proxy.CompareProxyProxy = function (a, b) {\n        return a.tag < b.tag;\n    };\n    b2ParticleSystem_Proxy.CompareTagProxy = function (a, b) {\n        return a < b.tag;\n    };\n    b2ParticleSystem_Proxy.CompareProxyTag = function (a, b) {\n        return a.tag < b;\n    };\n    return b2ParticleSystem_Proxy;\n}());\nexports.b2ParticleSystem_Proxy = b2ParticleSystem_Proxy;\nvar b2ParticleSystem_InsideBoundsEnumerator = (function () {\n    function b2ParticleSystem_InsideBoundsEnumerator(system, lower, upper, first, last) {\n        this.m_system = system;\n        this.m_xLower = (lower & b2ParticleSystem.xMask) >>> 0;\n        this.m_xUpper = (upper & b2ParticleSystem.xMask) >>> 0;\n        this.m_yLower = (lower & b2ParticleSystem.yMask) >>> 0;\n        this.m_yUpper = (upper & b2ParticleSystem.yMask) >>> 0;\n        this.m_first = first;\n        this.m_last = last;\n    }\n    b2ParticleSystem_InsideBoundsEnumerator.prototype.GetNext = function () {\n        while (this.m_first < this.m_last) {\n            var xTag = (this.m_system.m_proxyBuffer.data[this.m_first].tag & b2ParticleSystem.xMask) >>> 0;\n            if (xTag >= this.m_xLower && xTag <= this.m_xUpper) {\n                return (this.m_system.m_proxyBuffer.data[this.m_first++]).index;\n            }\n            this.m_first++;\n        }\n        return b2_settings_1.b2_invalidParticleIndex;\n    };\n    return b2ParticleSystem_InsideBoundsEnumerator;\n}());\nexports.b2ParticleSystem_InsideBoundsEnumerator = b2ParticleSystem_InsideBoundsEnumerator;\nvar b2ParticleSystem_ParticleListNode = (function () {\n    function b2ParticleSystem_ParticleListNode() {\n        this.next = null;\n        this.count = 0;\n        this.index = 0;\n    }\n    return b2ParticleSystem_ParticleListNode;\n}());\nexports.b2ParticleSystem_ParticleListNode = b2ParticleSystem_ParticleListNode;\nvar b2ParticleSystem_FixedSetAllocator = (function () {\n    function b2ParticleSystem_FixedSetAllocator() {\n    }\n    b2ParticleSystem_FixedSetAllocator.prototype.Allocate = function (itemSize, count) {\n        return count;\n    };\n    b2ParticleSystem_FixedSetAllocator.prototype.Clear = function () {\n    };\n    b2ParticleSystem_FixedSetAllocator.prototype.GetCount = function () {\n        return 0;\n    };\n    b2ParticleSystem_FixedSetAllocator.prototype.Invalidate = function (itemIndex) {\n    };\n    b2ParticleSystem_FixedSetAllocator.prototype.GetValidBuffer = function () {\n        return [];\n    };\n    b2ParticleSystem_FixedSetAllocator.prototype.GetBuffer = function () {\n        return [];\n    };\n    b2ParticleSystem_FixedSetAllocator.prototype.SetCount = function (count) {\n    };\n    return b2ParticleSystem_FixedSetAllocator;\n}());\nexports.b2ParticleSystem_FixedSetAllocator = b2ParticleSystem_FixedSetAllocator;\nvar b2ParticleSystem_FixtureParticle = (function () {\n    function b2ParticleSystem_FixtureParticle(fixture, particle) {\n        this.second = b2_settings_1.b2_invalidParticleIndex;\n        this.first = fixture;\n        this.second = particle;\n    }\n    return b2ParticleSystem_FixtureParticle;\n}());\nexports.b2ParticleSystem_FixtureParticle = b2ParticleSystem_FixtureParticle;\nvar b2ParticleSystem_FixtureParticleSet = (function (_super) {\n    __extends(b2ParticleSystem_FixtureParticleSet, _super);\n    function b2ParticleSystem_FixtureParticleSet() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2ParticleSystem_FixtureParticleSet.prototype.Initialize = function (bodyContactBuffer, flagsBuffer) {\n    };\n    b2ParticleSystem_FixtureParticleSet.prototype.Find = function (pair) {\n        return b2_settings_1.b2_invalidParticleIndex;\n    };\n    return b2ParticleSystem_FixtureParticleSet;\n}(b2ParticleSystem_FixedSetAllocator));\nexports.b2ParticleSystem_FixtureParticleSet = b2ParticleSystem_FixtureParticleSet;\nvar b2ParticleSystem_ParticlePair = (function () {\n    function b2ParticleSystem_ParticlePair(particleA, particleB) {\n        this.first = b2_settings_1.b2_invalidParticleIndex;\n        this.second = b2_settings_1.b2_invalidParticleIndex;\n        this.first = particleA;\n        this.second = particleB;\n    }\n    return b2ParticleSystem_ParticlePair;\n}());\nexports.b2ParticleSystem_ParticlePair = b2ParticleSystem_ParticlePair;\nvar b2ParticlePairSet = (function (_super) {\n    __extends(b2ParticlePairSet, _super);\n    function b2ParticlePairSet() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    b2ParticlePairSet.prototype.Initialize = function (contactBuffer, flagsBuffer) {\n    };\n    b2ParticlePairSet.prototype.Find = function (pair) {\n        return b2_settings_1.b2_invalidParticleIndex;\n    };\n    return b2ParticlePairSet;\n}(b2ParticleSystem_FixedSetAllocator));\nexports.b2ParticlePairSet = b2ParticlePairSet;\nvar b2ParticleSystem_ConnectionFilter = (function () {\n    function b2ParticleSystem_ConnectionFilter() {\n    }\n    b2ParticleSystem_ConnectionFilter.prototype.IsNecessary = function (index) {\n        return true;\n    };\n    b2ParticleSystem_ConnectionFilter.prototype.ShouldCreatePair = function (a, b) {\n        return true;\n    };\n    b2ParticleSystem_ConnectionFilter.prototype.ShouldCreateTriad = function (a, b, c) {\n        return true;\n    };\n    return b2ParticleSystem_ConnectionFilter;\n}());\nexports.b2ParticleSystem_ConnectionFilter = b2ParticleSystem_ConnectionFilter;\nvar b2ParticleSystem_DestroyParticlesInShapeCallback = (function (_super) {\n    __extends(b2ParticleSystem_DestroyParticlesInShapeCallback, _super);\n    function b2ParticleSystem_DestroyParticlesInShapeCallback(system, shape, xf, callDestructionListener) {\n        var _this = _super.call(this) || this;\n        _this.m_callDestructionListener = false;\n        _this.m_destroyed = 0;\n        _this.m_system = system;\n        _this.m_shape = shape;\n        _this.m_xf = xf;\n        _this.m_callDestructionListener = callDestructionListener;\n        _this.m_destroyed = 0;\n        return _this;\n    }\n    b2ParticleSystem_DestroyParticlesInShapeCallback.prototype.ReportFixture = function (fixture) {\n        return false;\n    };\n    b2ParticleSystem_DestroyParticlesInShapeCallback.prototype.ReportParticle = function (particleSystem, index) {\n        if (particleSystem !== this.m_system) {\n            return false;\n        }\n        if (this.m_shape.TestPoint(this.m_xf, this.m_system.m_positionBuffer.data[index])) {\n            this.m_system.DestroyParticle(index, this.m_callDestructionListener);\n            this.m_destroyed++;\n        }\n        return true;\n    };\n    b2ParticleSystem_DestroyParticlesInShapeCallback.prototype.Destroyed = function () {\n        return this.m_destroyed;\n    };\n    return b2ParticleSystem_DestroyParticlesInShapeCallback;\n}(b2_world_callbacks_1.b2QueryCallback));\nexports.b2ParticleSystem_DestroyParticlesInShapeCallback = b2ParticleSystem_DestroyParticlesInShapeCallback;\nvar b2ParticleSystem_JoinParticleGroupsFilter = (function (_super) {\n    __extends(b2ParticleSystem_JoinParticleGroupsFilter, _super);\n    function b2ParticleSystem_JoinParticleGroupsFilter(threshold) {\n        var _this = _super.call(this) || this;\n        _this.m_threshold = 0;\n        _this.m_threshold = threshold;\n        return _this;\n    }\n    b2ParticleSystem_JoinParticleGroupsFilter.prototype.ShouldCreatePair = function (a, b) {\n        return (a < this.m_threshold && this.m_threshold <= b) ||\n            (b < this.m_threshold && this.m_threshold <= a);\n    };\n    b2ParticleSystem_JoinParticleGroupsFilter.prototype.ShouldCreateTriad = function (a, b, c) {\n        return (a < this.m_threshold || b < this.m_threshold || c < this.m_threshold) &&\n            (this.m_threshold <= a || this.m_threshold <= b || this.m_threshold <= c);\n    };\n    return b2ParticleSystem_JoinParticleGroupsFilter;\n}(b2ParticleSystem_ConnectionFilter));\nexports.b2ParticleSystem_JoinParticleGroupsFilter = b2ParticleSystem_JoinParticleGroupsFilter;\nvar b2ParticleSystem_CompositeShape = (function (_super) {\n    __extends(b2ParticleSystem_CompositeShape, _super);\n    function b2ParticleSystem_CompositeShape(shapes, shapeCount) {\n        if (shapeCount === void 0) { shapeCount = shapes.length; }\n        var _this = _super.call(this, b2_shape_1.b2ShapeType.e_unknown, 0) || this;\n        _this.m_shapeCount = 0;\n        _this.m_shapes = shapes;\n        _this.m_shapeCount = shapeCount;\n        return _this;\n    }\n    b2ParticleSystem_CompositeShape.prototype.Clone = function () {\n        throw new Error();\n    };\n    b2ParticleSystem_CompositeShape.prototype.GetChildCount = function () {\n        return 1;\n    };\n    b2ParticleSystem_CompositeShape.prototype.TestPoint = function (xf, p) {\n        for (var i = 0; i < this.m_shapeCount; i++) {\n            if (this.m_shapes[i].TestPoint(xf, p)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    b2ParticleSystem_CompositeShape.prototype.ComputeDistance = function (xf, p, normal, childIndex) {\n        return 0;\n    };\n    b2ParticleSystem_CompositeShape.prototype.RayCast = function (output, input, xf, childIndex) {\n        return false;\n    };\n    b2ParticleSystem_CompositeShape.prototype.ComputeAABB = function (aabb, xf, childIndex) {\n        var s_subaabb = new b2_collision_1.b2AABB();\n        aabb.lowerBound.x = +b2_settings_1.b2_maxFloat;\n        aabb.lowerBound.y = +b2_settings_1.b2_maxFloat;\n        aabb.upperBound.x = -b2_settings_1.b2_maxFloat;\n        aabb.upperBound.y = -b2_settings_1.b2_maxFloat;\n        for (var i = 0; i < this.m_shapeCount; i++) {\n            var childCount = this.m_shapes[i].GetChildCount();\n            for (var j = 0; j < childCount; j++) {\n                var subaabb = s_subaabb;\n                this.m_shapes[i].ComputeAABB(subaabb, xf, j);\n                aabb.Combine1(subaabb);\n            }\n        }\n    };\n    b2ParticleSystem_CompositeShape.prototype.ComputeMass = function (massData, density) {\n    };\n    b2ParticleSystem_CompositeShape.prototype.SetupDistanceProxy = function (proxy, index) {\n    };\n    b2ParticleSystem_CompositeShape.prototype.ComputeSubmergedArea = function (normal, offset, xf, c) {\n        return 0;\n    };\n    b2ParticleSystem_CompositeShape.prototype.Dump = function (log) {\n    };\n    return b2ParticleSystem_CompositeShape;\n}(b2_shape_1.b2Shape));\nexports.b2ParticleSystem_CompositeShape = b2ParticleSystem_CompositeShape;\nvar b2ParticleSystem_ReactiveFilter = (function (_super) {\n    __extends(b2ParticleSystem_ReactiveFilter, _super);\n    function b2ParticleSystem_ReactiveFilter(flagsBuffer) {\n        var _this = _super.call(this) || this;\n        _this.m_flagsBuffer = flagsBuffer;\n        return _this;\n    }\n    b2ParticleSystem_ReactiveFilter.prototype.IsNecessary = function (index) {\n        return (this.m_flagsBuffer.data[index] & b2_particle_1.b2ParticleFlag.b2_reactiveParticle) !== 0;\n    };\n    return b2ParticleSystem_ReactiveFilter;\n}(b2ParticleSystem_ConnectionFilter));\nexports.b2ParticleSystem_ReactiveFilter = b2ParticleSystem_ReactiveFilter;\nvar b2ParticleSystem_UpdateBodyContactsCallback = (function (_super) {\n    __extends(b2ParticleSystem_UpdateBodyContactsCallback, _super);\n    function b2ParticleSystem_UpdateBodyContactsCallback(system, contactFilter) {\n        if (contactFilter === void 0) { contactFilter = null; }\n        var _this = _super.call(this, system) || this;\n        _this.m_contactFilter = null;\n        _this.m_contactFilter = contactFilter;\n        return _this;\n    }\n    b2ParticleSystem_UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle = function (fixture, particleSystem, particleIndex) {\n        if (this.m_contactFilter) {\n            var flags = this.m_system.GetFlagsBuffer();\n            if (flags[particleIndex] & b2_particle_1.b2ParticleFlag.b2_fixtureContactFilterParticle) {\n                return this.m_contactFilter.ShouldCollideFixtureParticle(fixture, this.m_system, particleIndex);\n            }\n        }\n        return true;\n    };\n    b2ParticleSystem_UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle = function (fixture, childIndex, a) {\n        var s_n = b2ParticleSystem_UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n;\n        var s_rp = b2ParticleSystem_UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp;\n        var ap = this.m_system.m_positionBuffer.data[a];\n        var n = s_n;\n        var d = fixture.ComputeDistance(ap, n, childIndex);\n        if (d < this.m_system.m_particleDiameter && this.ShouldCollideFixtureParticle(fixture, this.m_system, a)) {\n            var b = fixture.GetBody();\n            var bp = b.GetWorldCenter();\n            var bm = b.GetMass();\n            var bI = b.GetInertia() - bm * b.GetLocalCenter().LengthSquared();\n            var invBm = bm > 0 ? 1 / bm : 0;\n            var invBI = bI > 0 ? 1 / bI : 0;\n            var invAm = this.m_system.m_flagsBuffer.data[a] &\n                b2_particle_1.b2ParticleFlag.b2_wallParticle ? 0 : this.m_system.GetParticleInvMass();\n            var rp = b2_math_1.b2Vec2.SubVV(ap, bp, s_rp);\n            var rpn = b2_math_1.b2Vec2.CrossVV(rp, n);\n            var invM = invAm + invBm + invBI * rpn * rpn;\n            var contact = this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];\n            contact.index = a;\n            contact.body = b;\n            contact.fixture = fixture;\n            contact.weight = 1 - d * this.m_system.m_inverseDiameter;\n            contact.normal.Copy(n.SelfNeg());\n            contact.mass = invM > 0 ? 1 / invM : 0;\n            this.m_system.DetectStuckParticle(a);\n        }\n    };\n    b2ParticleSystem_UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n = new b2_math_1.b2Vec2();\n    b2ParticleSystem_UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp = new b2_math_1.b2Vec2();\n    return b2ParticleSystem_UpdateBodyContactsCallback;\n}(b2FixtureParticleQueryCallback));\nexports.b2ParticleSystem_UpdateBodyContactsCallback = b2ParticleSystem_UpdateBodyContactsCallback;\nvar b2ParticleSystem_SolveCollisionCallback = (function (_super) {\n    __extends(b2ParticleSystem_SolveCollisionCallback, _super);\n    function b2ParticleSystem_SolveCollisionCallback(system, step) {\n        var _this = _super.call(this, system) || this;\n        _this.m_step = step;\n        return _this;\n    }\n    b2ParticleSystem_SolveCollisionCallback.prototype.ReportFixtureAndParticle = function (fixture, childIndex, a) {\n        var s_p1 = b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_p1;\n        var s_output = b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_output;\n        var s_input = b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_input;\n        var s_p = b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_p;\n        var s_v = b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_v;\n        var s_f = b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_f;\n        var body = fixture.GetBody();\n        var ap = this.m_system.m_positionBuffer.data[a];\n        var av = this.m_system.m_velocityBuffer.data[a];\n        var output = s_output;\n        var input = s_input;\n        if (this.m_system.m_iterationIndex === 0) {\n            var p1 = b2_math_1.b2Transform.MulTXV(body.m_xf0, ap, s_p1);\n            if (fixture.GetShape().GetType() === b2_shape_1.b2ShapeType.e_circleShape) {\n                p1.SelfSub(body.GetLocalCenter());\n                b2_math_1.b2Rot.MulRV(body.m_xf0.q, p1, p1);\n                b2_math_1.b2Rot.MulTRV(body.m_xf.q, p1, p1);\n                p1.SelfAdd(body.GetLocalCenter());\n            }\n            b2_math_1.b2Transform.MulXV(body.m_xf, p1, input.p1);\n        }\n        else {\n            input.p1.Copy(ap);\n        }\n        b2_math_1.b2Vec2.AddVMulSV(ap, this.m_step.dt, av, input.p2);\n        input.maxFraction = 1;\n        if (fixture.RayCast(output, input, childIndex)) {\n            var n = output.normal;\n            var p = s_p;\n            p.x = (1 - output.fraction) * input.p1.x + output.fraction * input.p2.x + b2_settings_1.b2_linearSlop * n.x;\n            p.y = (1 - output.fraction) * input.p1.y + output.fraction * input.p2.y + b2_settings_1.b2_linearSlop * n.y;\n            var v = s_v;\n            v.x = this.m_step.inv_dt * (p.x - ap.x);\n            v.y = this.m_step.inv_dt * (p.y - ap.y);\n            this.m_system.m_velocityBuffer.data[a].Copy(v);\n            var f = s_f;\n            f.x = this.m_step.inv_dt * this.m_system.GetParticleMass() * (av.x - v.x);\n            f.y = this.m_step.inv_dt * this.m_system.GetParticleMass() * (av.y - v.y);\n            this.m_system.ParticleApplyForce(a, f);\n        }\n    };\n    b2ParticleSystem_SolveCollisionCallback.prototype.ReportParticle = function (system, index) {\n        return false;\n    };\n    b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_p1 = new b2_math_1.b2Vec2();\n    b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_output = new b2_collision_1.b2RayCastOutput();\n    b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_input = new b2_collision_1.b2RayCastInput();\n    b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_p = new b2_math_1.b2Vec2();\n    b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_v = new b2_math_1.b2Vec2();\n    b2ParticleSystem_SolveCollisionCallback.ReportFixtureAndParticle_s_f = new b2_math_1.b2Vec2();\n    return b2ParticleSystem_SolveCollisionCallback;\n}(b2FixtureParticleQueryCallback));\nexports.b2ParticleSystem_SolveCollisionCallback = b2ParticleSystem_SolveCollisionCallback;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvcGFydGljbGUvYjJfcGFydGljbGVfc3lzdGVtLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL3BhcnRpY2xlL2IyX3BhcnRpY2xlX3N5c3RlbS50cz84ZTAwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMgR29vZ2xlLCBJbmMuXG4gKlxuICogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiAqIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiAqIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4gKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiAqIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiAqIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiAqIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4gKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuICogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4gKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuICogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiAqIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiAqIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4gKi9cblxuLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQsIGIyX21heFBhcnRpY2xlSW5kZXggfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9saW5lYXJTbG9wLCBiMl9tYXhGbG9hdCwgYjJfaW52YWxpZFBhcnRpY2xlSW5kZXgsIGIyX21pblBhcnRpY2xlU3lzdGVtQnVmZmVyQ2FwYWNpdHksIGIyX21heFRyaWFkRGlzdGFuY2VTcXVhcmVkLCBiMl9iYXJyaWVyQ29sbGlzaW9uVGltZSwgYjJNYWtlQXJyYXksIGIyTWF5YmUgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9tYXhQYXJ0aWNsZVByZXNzdXJlLCBiMl9taW5QYXJ0aWNsZVdlaWdodCwgYjJfbWF4UGFydGljbGVGb3JjZSwgYjJfcGFydGljbGVTdHJpZGUgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMk1pbiwgYjJNYXgsIGIyQWJzLCBiMkNsYW1wLCBiMlNxcnQsIGIySW52U3FydCwgYjJWZWMyLCBiMlR5cGVkVmVjMiwgYjJSb3QsIGIyVHJhbnNmb3JtLCBYWSB9IGZyb20gXCIuLi9jb21tb24vYjJfbWF0aFwiO1xuaW1wb3J0IHsgYjJDb2xvciwgYjJUeXBlZENvbG9yIH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9kcmF3XCI7XG5pbXBvcnQgeyBiMkFBQkIsIGIyUmF5Q2FzdElucHV0LCBiMlJheUNhc3RPdXRwdXQgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgYjJTaGFwZVR5cGUsIGIyU2hhcGUsIGIyTWFzc0RhdGEgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX3NoYXBlXCI7XG5pbXBvcnQgeyBiMkVkZ2VTaGFwZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vYjJfZWRnZV9zaGFwZVwiO1xuaW1wb3J0IHsgYjJDaGFpblNoYXBlIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9iMl9jaGFpbl9zaGFwZVwiO1xuaW1wb3J0IHsgYjJUaW1lU3RlcCB9IGZyb20gXCIuLi9keW5hbWljcy9iMl90aW1lX3N0ZXBcIjtcbmltcG9ydCB7IGIyRml4dHVyZSB9IGZyb20gXCIuLi9keW5hbWljcy9iMl9maXh0dXJlXCI7XG5pbXBvcnQgeyBiMkJvZHkgfSBmcm9tIFwiLi4vZHluYW1pY3MvYjJfYm9keVwiO1xuaW1wb3J0IHsgYjJXb3JsZCB9IGZyb20gXCIuLi9keW5hbWljcy9iMl93b3JsZFwiO1xuaW1wb3J0IHsgYjJDb250YWN0RmlsdGVyLCBiMkNvbnRhY3RMaXN0ZW5lciwgYjJRdWVyeUNhbGxiYWNrLCBiMlJheUNhc3RDYWxsYmFjayB9IGZyb20gXCIuLi9keW5hbWljcy9iMl93b3JsZF9jYWxsYmFja3NcIjtcbmltcG9ydCB7IGIyUGFydGljbGVGbGFnLCBiMlBhcnRpY2xlRGVmLCBiMlBhcnRpY2xlSGFuZGxlLCBiMklQYXJ0aWNsZURlZiB9IGZyb20gXCIuL2IyX3BhcnRpY2xlXCI7XG5pbXBvcnQgeyBiMlBhcnRpY2xlR3JvdXBGbGFnLCBiMlBhcnRpY2xlR3JvdXBEZWYsIGIyUGFydGljbGVHcm91cCwgYjJJUGFydGljbGVHcm91cERlZiB9IGZyb20gXCIuL2IyX3BhcnRpY2xlX2dyb3VwXCI7XG5pbXBvcnQgeyBiMlZvcm9ub2lEaWFncmFtIH0gZnJvbSBcIi4vYjJfdm9yb25vaV9kaWFncmFtXCI7XG5pbXBvcnQgeyBiMkRpc3RhbmNlUHJveHkgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2IyX2Rpc3RhbmNlXCI7XG5cbmZ1bmN0aW9uIHN0ZF9pdGVyX3N3YXA8VD4oYXJyYXk6IFRbXSwgYTogbnVtYmVyLCBiOiBudW1iZXIpOiB2b2lkIHtcbiAgY29uc3QgdG1wOiBUID0gYXJyYXlbYV07XG4gIGFycmF5W2FdID0gYXJyYXlbYl07XG4gIGFycmF5W2JdID0gdG1wO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0X2NvbXBhcmU8VD4oYTogVCwgYjogVCk6IGJvb2xlYW4geyByZXR1cm4gYSA8IGI7IH1cblxuZnVuY3Rpb24gc3RkX3NvcnQ8VD4oYXJyYXk6IFRbXSwgZmlyc3Q6IG51bWJlciA9IDAsIGxlbjogbnVtYmVyID0gYXJyYXkubGVuZ3RoIC0gZmlyc3QsIGNtcDogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4gPSBkZWZhdWx0X2NvbXBhcmUpOiBUW10ge1xuICBsZXQgbGVmdCA9IGZpcnN0O1xuICBjb25zdCBzdGFjazogbnVtYmVyW10gPSBbXTtcbiAgbGV0IHBvcyA9IDA7XG5cbiAgZm9yICg7IDsgKSB7IC8qIG91dGVyIGxvb3AgKi9cbiAgICBmb3IgKDsgbGVmdCArIDEgPCBsZW47IGxlbisrKSB7IC8qIHNvcnQgbGVmdCB0byBsZW4tMSAqL1xuICAgICAgY29uc3QgcGl2b3QgPSBhcnJheVtsZWZ0ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGxlbiAtIGxlZnQpKV07IC8qIHBpY2sgcmFuZG9tIHBpdm90ICovXG4gICAgICBzdGFja1twb3MrK10gPSBsZW47IC8qIHNvcnQgcmlnaHQgcGFydCBsYXRlciAqL1xuICAgICAgZm9yIChsZXQgcmlnaHQgPSBsZWZ0IC0gMTsgOyApIHsgLyogaW5uZXIgbG9vcDogcGFydGl0aW9uaW5nICovXG4gICAgICAgIHdoaWxlIChjbXAoYXJyYXlbKytyaWdodF0sIHBpdm90KSkge30gLyogbG9vayBmb3IgZ3JlYXRlciBlbGVtZW50ICovXG4gICAgICAgIHdoaWxlIChjbXAocGl2b3QsIGFycmF5Wy0tbGVuXSkpIHt9IC8qIGxvb2sgZm9yIHNtYWxsZXIgZWxlbWVudCAqL1xuICAgICAgICBpZiAocmlnaHQgPj0gbGVuKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gLyogcGFydGl0aW9uIHBvaW50IGZvdW5kPyAqL1xuICAgICAgICBzdGRfaXRlcl9zd2FwKGFycmF5LCByaWdodCwgbGVuKTsgLyogdGhlIG9ubHkgc3dhcCAqL1xuICAgICAgfSAvKiBwYXJ0aXRpb25lZCwgY29udGludWUgbGVmdCBwYXJ0ICovXG4gICAgfVxuICAgIGlmIChwb3MgPT09IDApIHtcbiAgICAgIGJyZWFrO1xuICAgIH0gLyogc3RhY2sgZW1wdHk/ICovXG4gICAgbGVmdCA9IGxlbjsgLyogbGVmdCB0byByaWdodCBpcyBzb3J0ZWQgKi9cbiAgICBsZW4gPSBzdGFja1stLXBvc107IC8qIGdldCBuZXh0IHJhbmdlIHRvIHNvcnQgKi9cbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gc3RkX3N0YWJsZV9zb3J0PFQ+KGFycmF5OiBUW10sIGZpcnN0OiBudW1iZXIgPSAwLCBsZW46IG51bWJlciA9IGFycmF5Lmxlbmd0aCAtIGZpcnN0LCBjbXA6IChhOiBULCBiOiBUKSA9PiBib29sZWFuID0gZGVmYXVsdF9jb21wYXJlKTogVFtdIHtcbiAgcmV0dXJuIHN0ZF9zb3J0KGFycmF5LCBmaXJzdCwgbGVuLCBjbXApO1xufVxuXG5mdW5jdGlvbiBzdGRfcmVtb3ZlX2lmPFQ+KGFycmF5OiBUW10sIHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuLCBsZW5ndGg6IG51bWJlciA9IGFycmF5Lmxlbmd0aCkge1xuICBsZXQgbCA9IDA7XG5cbiAgZm9yIChsZXQgYyA9IDA7IGMgPCBsZW5ndGg7ICsrYykge1xuICAgIC8vIGlmIHdlIGNhbiBiZSBjb2xsYXBzZWQsIGtlZXAgbCB3aGVyZSBpdCBpcy5cbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2NdKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdGhpcyBub2RlIGNhbid0IGJlIGNvbGxhcHNlZDsgcHVzaCBpdCBiYWNrIGFzIGZhciBhcyB3ZSBjYW4uXG4gICAgaWYgKGMgPT09IGwpIHtcbiAgICAgICsrbDtcbiAgICAgIGNvbnRpbnVlOyAvLyBxdWljayBleGl0IGlmIHdlJ3JlIGFscmVhZHkgaW4gdGhlIHJpZ2h0IHNwb3RcbiAgICB9XG5cbiAgICAvLyBhcnJheVtsKytdID0gYXJyYXlbY107XG4gICAgc3RkX2l0ZXJfc3dhcChhcnJheSwgbCsrLCBjKTtcbiAgfVxuXG4gIHJldHVybiBsO1xufVxuXG5mdW5jdGlvbiBzdGRfbG93ZXJfYm91bmQ8QSwgQj4oYXJyYXk6IEFbXSwgZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyLCB2YWw6IEIsIGNtcDogKGE6IEEsIGI6IEIpID0+IGJvb2xlYW4pOiBudW1iZXIge1xuICBsZXQgY291bnQgPSBsYXN0IC0gZmlyc3Q7XG4gIHdoaWxlIChjb3VudCA+IDApIHtcbiAgICBjb25zdCBzdGVwID0gTWF0aC5mbG9vcihjb3VudCAvIDIpO1xuICAgIGxldCBpdCA9IGZpcnN0ICsgc3RlcDtcblxuICAgIGlmIChjbXAoYXJyYXlbaXRdLCB2YWwpKSB7XG4gICAgICBmaXJzdCA9ICsraXQ7XG4gICAgICBjb3VudCAtPSBzdGVwICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY291bnQgPSBzdGVwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmlyc3Q7XG59XG5cbmZ1bmN0aW9uIHN0ZF91cHBlcl9ib3VuZDxBLCBCPihhcnJheTogQltdLCBmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXIsIHZhbDogQSwgY21wOiAoYTogQSwgYjogQikgPT4gYm9vbGVhbik6IG51bWJlciB7XG4gIGxldCBjb3VudCA9IGxhc3QgLSBmaXJzdDtcbiAgd2hpbGUgKGNvdW50ID4gMCkge1xuICAgIGNvbnN0IHN0ZXAgPSBNYXRoLmZsb29yKGNvdW50IC8gMik7XG4gICAgbGV0IGl0ID0gZmlyc3QgKyBzdGVwO1xuXG4gICAgaWYgKCFjbXAodmFsLCBhcnJheVtpdF0pKSB7XG4gICAgICBmaXJzdCA9ICsraXQ7XG4gICAgICBjb3VudCAtPSBzdGVwICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY291bnQgPSBzdGVwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmlyc3Q7XG59XG5cbmZ1bmN0aW9uIHN0ZF9yb3RhdGU8VD4oYXJyYXk6IFRbXSwgZmlyc3Q6IG51bWJlciwgbl9maXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXIpOiB2b2lkIHtcbiAgbGV0IG5leHQgPSBuX2ZpcnN0O1xuICB3aGlsZSAoZmlyc3QgIT09IG5leHQpIHtcbiAgICBzdGRfaXRlcl9zd2FwKGFycmF5LCBmaXJzdCsrLCBuZXh0KyspO1xuICAgIGlmIChuZXh0ID09PSBsYXN0KSB7XG4gICAgICBuZXh0ID0gbl9maXJzdDtcbiAgICB9IGVsc2UgaWYgKGZpcnN0ID09PSBuX2ZpcnN0KSB7XG4gICAgICBuX2ZpcnN0ID0gbmV4dDtcbiAgICAgICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdGRfdW5pcXVlPFQ+KGFycmF5OiBUW10sIGZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlciwgY21wOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbik6IG51bWJlciB7XG4gIGlmIChmaXJzdCA9PT0gbGFzdCkge1xuICAgIHJldHVybiBsYXN0O1xuICB9XG4gIGxldCByZXN1bHQgPSBmaXJzdDtcbiAgd2hpbGUgKCsrZmlyc3QgIT09IGxhc3QpIHtcbiAgICBpZiAoIWNtcChhcnJheVtyZXN1bHRdLCBhcnJheVtmaXJzdF0pKSB7XG4gICAgICAvLy9hcnJheVsrK3Jlc3VsdF0gPSBhcnJheVtmaXJzdF07XG4gICAgICBzdGRfaXRlcl9zd2FwKGFycmF5LCArK3Jlc3VsdCwgZmlyc3QpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gKytyZXN1bHQ7XG59XG5cbmV4cG9ydCBjbGFzcyBiMkdyb3dhYmxlQnVmZmVyPFQ+IHtcbiAgcHVibGljIGRhdGE6IFRbXSA9IFtdO1xuICBwdWJsaWMgY291bnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBjYXBhY2l0eTogbnVtYmVyID0gMDtcbiAgcHVibGljIGFsbG9jYXRvcjogKCkgPT4gVDtcblxuICBjb25zdHJ1Y3RvcihhbGxvY2F0b3I6ICgpID0+IFQpIHtcbiAgICB0aGlzLmFsbG9jYXRvciA9IGFsbG9jYXRvcjtcbiAgfVxuXG4gIHB1YmxpYyBBcHBlbmQoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5jb3VudCA+PSB0aGlzLmNhcGFjaXR5KSB7XG4gICAgICB0aGlzLkdyb3coKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY291bnQrKztcbiAgfVxuXG4gIHB1YmxpYyBSZXNlcnZlKG5ld0NhcGFjaXR5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jYXBhY2l0eSA+PSBuZXdDYXBhY2l0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLmNhcGFjaXR5ID09PSB0aGlzLmRhdGEubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5jYXBhY2l0eTsgaSA8IG5ld0NhcGFjaXR5OyArK2kpIHtcbiAgICAgIHRoaXMuZGF0YVtpXSA9IHRoaXMuYWxsb2NhdG9yKCk7XG4gICAgfVxuICAgIHRoaXMuY2FwYWNpdHkgPSBuZXdDYXBhY2l0eTtcbiAgfVxuXG4gIHB1YmxpYyBHcm93KCk6IHZvaWQge1xuICAgIC8vIERvdWJsZSB0aGUgY2FwYWNpdHkuXG4gICAgY29uc3QgbmV3Q2FwYWNpdHkgPSB0aGlzLmNhcGFjaXR5ID8gMiAqIHRoaXMuY2FwYWNpdHkgOiBiMl9taW5QYXJ0aWNsZVN5c3RlbUJ1ZmZlckNhcGFjaXR5O1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChuZXdDYXBhY2l0eSA+IHRoaXMuY2FwYWNpdHkpO1xuICAgIHRoaXMuUmVzZXJ2ZShuZXdDYXBhY2l0eSk7XG4gIH1cblxuICBwdWJsaWMgRnJlZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRoaXMuY2FwYWNpdHkgPSAwO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICB9XG5cbiAgcHVibGljIFNob3J0ZW4obmV3RW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICB9XG5cbiAgcHVibGljIERhdGEoKTogVFtdIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG5cbiAgcHVibGljIEdldENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY291bnQ7XG4gIH1cblxuICBwdWJsaWMgU2V0Q291bnQobmV3Q291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCgwIDw9IG5ld0NvdW50ICYmIG5ld0NvdW50IDw9IHRoaXMuY2FwYWNpdHkpO1xuICAgIHRoaXMuY291bnQgPSBuZXdDb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRDYXBhY2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhcGFjaXR5O1xuICB9XG5cbiAgcHVibGljIFJlbW92ZUlmKHByZWQ6ICh0OiBUKSA9PiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGxldCBjb3VudCA9IDA7XG4gICAgLy8gREVCVUc6IGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb3VudDsgKytpKSB7XG4gICAgLy8gREVCVUc6ICAgaWYgKCFwcmVkKHRoaXMuZGF0YVtpXSkpIHtcbiAgICAvLyBERUJVRzogICAgIGNvdW50Kys7XG4gICAgLy8gREVCVUc6ICAgfVxuICAgIC8vIERFQlVHOiB9XG5cbiAgICB0aGlzLmNvdW50ID0gc3RkX3JlbW92ZV9pZih0aGlzLmRhdGEsIHByZWQsIHRoaXMuY291bnQpO1xuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGNvdW50ID09PSB0aGlzLmNvdW50KTtcbiAgfVxuXG4gIHB1YmxpYyBVbmlxdWUocHJlZDogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmNvdW50ID0gc3RkX3VuaXF1ZSh0aGlzLmRhdGEsIDAsIHRoaXMuY291bnQsIHByZWQpO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIGIyUGFydGljbGVJbmRleCA9IG51bWJlcjtcblxuZXhwb3J0IGNsYXNzIGIyRml4dHVyZVBhcnRpY2xlUXVlcnlDYWxsYmFjayBleHRlbmRzIGIyUXVlcnlDYWxsYmFjayB7XG4gIHB1YmxpYyBtX3N5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbTtcbiAgY29uc3RydWN0b3Ioc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1fc3lzdGVtID0gc3lzdGVtO1xuICB9XG4gIHB1YmxpYyBTaG91bGRRdWVyeVBhcnRpY2xlU3lzdGVtKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSk6IGJvb2xlYW4ge1xuICAgIC8vIFNraXAgcmVwb3J0aW5nIHBhcnRpY2xlcy5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcHVibGljIFJlcG9ydEZpeHR1cmUoZml4dHVyZTogYjJGaXh0dXJlKTogYm9vbGVhbiB7XG4gICAgaWYgKGZpeHR1cmUuSXNTZW5zb3IoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNoYXBlID0gZml4dHVyZS5HZXRTaGFwZSgpO1xuICAgIGNvbnN0IGNoaWxkQ291bnQgPSBzaGFwZS5HZXRDaGlsZENvdW50KCk7XG4gICAgZm9yIChsZXQgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCBjaGlsZENvdW50OyBjaGlsZEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGFhYmIgPSBmaXh0dXJlLkdldEFBQkIoY2hpbGRJbmRleCk7XG4gICAgICBjb25zdCBlbnVtZXJhdG9yID0gdGhpcy5tX3N5c3RlbS5HZXRJbnNpZGVCb3VuZHNFbnVtZXJhdG9yKGFhYmIpO1xuICAgICAgbGV0IGluZGV4OiBudW1iZXI7XG4gICAgICB3aGlsZSAoKGluZGV4ID0gZW51bWVyYXRvci5HZXROZXh0KCkpID49IDApIHtcbiAgICAgICAgdGhpcy5SZXBvcnRGaXh0dXJlQW5kUGFydGljbGUoZml4dHVyZSwgY2hpbGRJbmRleCwgaW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBwdWJsaWMgUmVwb3J0UGFydGljbGUoc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHB1YmxpYyBSZXBvcnRGaXh0dXJlQW5kUGFydGljbGUoZml4dHVyZTogYjJGaXh0dXJlLCBjaGlsZEluZGV4OiBudW1iZXIsIGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpOyAvLyBwdXJlIHZpcnR1YWxcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZUNvbnRhY3Qge1xuICBwdWJsaWMgaW5kZXhBOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgaW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgd2VpZ2h0OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbm9ybWFsOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBmbGFnczogYjJQYXJ0aWNsZUZsYWcgPSAwO1xuXG4gIHB1YmxpYyBTZXRJbmRpY2VzKGE6IG51bWJlciwgYjogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGEgPD0gYjJfbWF4UGFydGljbGVJbmRleCAmJiBiIDw9IGIyX21heFBhcnRpY2xlSW5kZXgpO1xuICAgIHRoaXMuaW5kZXhBID0gYTtcbiAgICB0aGlzLmluZGV4QiA9IGI7XG4gIH1cblxuICBwdWJsaWMgU2V0V2VpZ2h0KHc6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMud2VpZ2h0ID0gdztcbiAgfVxuXG4gIHB1YmxpYyBTZXROb3JtYWwobjogYjJWZWMyKTogdm9pZCB7XG4gICAgdGhpcy5ub3JtYWwuQ29weShuKTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRGbGFncyhmOiBiMlBhcnRpY2xlRmxhZyk6IHZvaWQge1xuICAgIHRoaXMuZmxhZ3MgPSBmO1xuICB9XG5cbiAgcHVibGljIEdldEluZGV4QSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmluZGV4QTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRJbmRleEIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbmRleEI7XG4gIH1cblxuICBwdWJsaWMgR2V0V2VpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMud2VpZ2h0O1xuICB9XG5cbiAgcHVibGljIEdldE5vcm1hbCgpOiBiMlZlYzIge1xuICAgIHJldHVybiB0aGlzLm5vcm1hbDtcbiAgfVxuXG4gIHB1YmxpYyBHZXRGbGFncygpOiBiMlBhcnRpY2xlRmxhZyB7XG4gICAgcmV0dXJuIHRoaXMuZmxhZ3M7XG4gIH1cblxuICBwdWJsaWMgSXNFcXVhbChyaHM6IGIyUGFydGljbGVDb250YWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhBID09PSByaHMuaW5kZXhBICYmIHRoaXMuaW5kZXhCID09PSByaHMuaW5kZXhCICYmIHRoaXMuZmxhZ3MgPT09IHJocy5mbGFncyAmJiB0aGlzLndlaWdodCA9PT0gcmhzLndlaWdodCAmJiB0aGlzLm5vcm1hbC54ID09PSByaHMubm9ybWFsLnggJiYgdGhpcy5ub3JtYWwueSA9PT0gcmhzLm5vcm1hbC55O1xuICB9XG5cbiAgcHVibGljIElzTm90RXF1YWwocmhzOiBiMlBhcnRpY2xlQ29udGFjdCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5Jc0VxdWFsKHJocyk7XG4gIH1cblxuICBwdWJsaWMgQXBwcm94aW1hdGVseUVxdWFsKHJoczogYjJQYXJ0aWNsZUNvbnRhY3QpOiBib29sZWFuIHtcbiAgICBjb25zdCBNQVhfV0VJR0hUX0RJRkYgPSAwLjAxOyAvLyBXZWlnaHQgMCB+IDEsIHNvIGFib3V0IDElXG4gICAgY29uc3QgTUFYX05PUk1BTF9ESUZGX1NRID0gMC4wMSAqIDAuMDE7IC8vIE5vcm1hbCBsZW5ndGggPSAxLCBzbyAxJVxuICAgIHJldHVybiB0aGlzLmluZGV4QSA9PT0gcmhzLmluZGV4QSAmJiB0aGlzLmluZGV4QiA9PT0gcmhzLmluZGV4QiAmJiB0aGlzLmZsYWdzID09PSByaHMuZmxhZ3MgJiYgYjJBYnModGhpcy53ZWlnaHQgLSByaHMud2VpZ2h0KSA8IE1BWF9XRUlHSFRfRElGRiAmJiBiMlZlYzIuRGlzdGFuY2VTcXVhcmVkVlYodGhpcy5ub3JtYWwsIHJocy5ub3JtYWwpIDwgTUFYX05PUk1BTF9ESUZGX1NRO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlQm9keUNvbnRhY3Qge1xuICBwdWJsaWMgaW5kZXg6IG51bWJlciA9IDA7IC8vIEluZGV4IG9mIHRoZSBwYXJ0aWNsZSBtYWtpbmcgY29udGFjdC5cbiAgcHVibGljIGJvZHkhOiBiMkJvZHk7IC8vIFRoZSBib2R5IG1ha2luZyBjb250YWN0LlxuICBwdWJsaWMgZml4dHVyZSE6IGIyRml4dHVyZTsgLy8gVGhlIHNwZWNpZmljIGZpeHR1cmUgbWFraW5nIGNvbnRhY3RcbiAgcHVibGljIHdlaWdodDogbnVtYmVyID0gMC4wOyAvLyBXZWlnaHQgb2YgdGhlIGNvbnRhY3QuIEEgdmFsdWUgYmV0d2VlbiAwLjBmIGFuZCAxLjBmLlxuICBwdWJsaWMgbm9ybWFsOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7IC8vIFRoZSBub3JtYWxpemVkIGRpcmVjdGlvbiBmcm9tIHRoZSBwYXJ0aWNsZSB0byB0aGUgYm9keS5cbiAgcHVibGljIG1hc3M6IG51bWJlciA9IDAuMDsgLy8gVGhlIGVmZmVjdGl2ZSBtYXNzIHVzZWQgaW4gY2FsY3VsYXRpbmcgZm9yY2UuXG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlUGFpciB7XG4gIHB1YmxpYyBpbmRleEE6IG51bWJlciA9IDA7IC8vIEluZGljZXMgb2YgdGhlIHJlc3BlY3RpdmUgcGFydGljbGVzIG1ha2luZyBwYWlyLlxuICBwdWJsaWMgaW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZmxhZ3M6IGIyUGFydGljbGVGbGFnID0gMDsgLy8gVGhlIGxvZ2ljYWwgc3VtIG9mIHRoZSBwYXJ0aWNsZSBmbGFncy4gU2VlIHRoZSBiMlBhcnRpY2xlRmxhZyBlbnVtLlxuICBwdWJsaWMgc3RyZW5ndGg6IG51bWJlciA9IDAuMDsgLy8gVGhlIHN0cmVuZ3RoIG9mIGNvaGVzaW9uIGFtb25nIHRoZSBwYXJ0aWNsZXMuXG4gIHB1YmxpYyBkaXN0YW5jZTogbnVtYmVyID0gMC4wOyAvLyBUaGUgaW5pdGlhbCBkaXN0YW5jZSBvZiB0aGUgcGFydGljbGVzLlxufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZVRyaWFkIHtcbiAgcHVibGljIGluZGV4QTogbnVtYmVyID0gMDsgLy8gSW5kaWNlcyBvZiB0aGUgcmVzcGVjdGl2ZSBwYXJ0aWNsZXMgbWFraW5nIHRyaWFkLlxuICBwdWJsaWMgaW5kZXhCOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgaW5kZXhDOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZmxhZ3M6IGIyUGFydGljbGVGbGFnID0gMDsgLy8gVGhlIGxvZ2ljYWwgc3VtIG9mIHRoZSBwYXJ0aWNsZSBmbGFncy4gU2VlIHRoZSBiMlBhcnRpY2xlRmxhZyBlbnVtLlxuICBwdWJsaWMgc3RyZW5ndGg6IG51bWJlciA9IDAuMDsgLy8gVGhlIHN0cmVuZ3RoIG9mIGNvaGVzaW9uIGFtb25nIHRoZSBwYXJ0aWNsZXMuXG4gIHB1YmxpYyBwYTogYjJWZWMyID0gbmV3IGIyVmVjMigwLjAsIDAuMCk7IC8vIFZhbHVlcyB1c2VkIGZvciBjYWxjdWxhdGlvbi5cbiAgcHVibGljIHBiOiBiMlZlYzIgPSBuZXcgYjJWZWMyKDAuMCwgMC4wKTtcbiAgcHVibGljIHBjOiBiMlZlYzIgPSBuZXcgYjJWZWMyKDAuMCwgMC4wKTtcbiAgcHVibGljIGthOiBudW1iZXIgPSAwLjA7XG4gIHB1YmxpYyBrYjogbnVtYmVyID0gMC4wO1xuICBwdWJsaWMga2M6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIHM6IG51bWJlciA9IDAuMDtcbn1cblxuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVTeXN0ZW1EZWYge1xuICAvLyBJbml0aWFsaXplIHBoeXNpY2FsIGNvZWZmaWNpZW50cyB0byB0aGUgbWF4aW11bSB2YWx1ZXMgdGhhdFxuICAvLyBtYWludGFpbiBudW1lcmljYWwgc3RhYmlsaXR5LlxuXG4gIC8qKlxuICAgKiBFbmFibGUgc3RyaWN0IFBhcnRpY2xlL0JvZHkgY29udGFjdCBjaGVjay5cbiAgICogU2VlIFNldFN0cmljdENvbnRhY3RDaGVjayBmb3IgZGV0YWlscy5cbiAgICovXG4gIHB1YmxpYyBzdHJpY3RDb250YWN0Q2hlY2s6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogU2V0IHRoZSBwYXJ0aWNsZSBkZW5zaXR5LlxuICAgKiBTZWUgU2V0RGVuc2l0eSBmb3IgZGV0YWlscy5cbiAgICovXG4gIHB1YmxpYyBkZW5zaXR5OiBudW1iZXIgPSAxLjA7XG5cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgcGFydGljbGUgZ3Jhdml0eSBzY2FsZS4gQWRqdXN0cyB0aGUgZWZmZWN0IG9mIHRoZVxuICAgKiBnbG9iYWwgZ3Jhdml0eSB2ZWN0b3Igb24gcGFydGljbGVzLiBEZWZhdWx0IHZhbHVlIGlzIDEuMGYuXG4gICAqL1xuICBwdWJsaWMgZ3Jhdml0eVNjYWxlOiBudW1iZXIgPSAxLjA7XG5cbiAgLyoqXG4gICAqIFBhcnRpY2xlcyBiZWhhdmUgYXMgY2lyY2xlcyB3aXRoIHRoaXMgcmFkaXVzLiBJbiBCb3gyRCB1bml0cy5cbiAgICovXG4gIHB1YmxpYyByYWRpdXM6IG51bWJlciA9IDEuMDtcblxuICAvKipcbiAgICogU2V0IHRoZSBtYXhpbXVtIG51bWJlciBvZiBwYXJ0aWNsZXMuXG4gICAqIEJ5IGRlZmF1bHQsIHRoZXJlIGlzIG5vIG1heGltdW0uIFRoZSBwYXJ0aWNsZSBidWZmZXJzIGNhblxuICAgKiBjb250aW51ZSB0byBncm93IHdoaWxlIGIyV29ybGQncyBibG9jayBhbGxvY2F0b3Igc3RpbGwgaGFzXG4gICAqIG1lbW9yeS5cbiAgICogU2VlIFNldE1heFBhcnRpY2xlQ291bnQgZm9yIGRldGFpbHMuXG4gICAqL1xuICBwdWJsaWMgbWF4Q291bnQ6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIEluY3JlYXNlcyBwcmVzc3VyZSBpbiByZXNwb25zZSB0byBjb21wcmVzc2lvblxuICAgKiBTbWFsbGVyIHZhbHVlcyBhbGxvdyBtb3JlIGNvbXByZXNzaW9uXG4gICAqL1xuICBwdWJsaWMgcHJlc3N1cmVTdHJlbmd0aDogbnVtYmVyID0gMC4wMDU7XG5cbiAgLyoqXG4gICAqIFJlZHVjZXMgdmVsb2NpdHkgYWxvbmcgdGhlIGNvbGxpc2lvbiBub3JtYWxcbiAgICogU21hbGxlciB2YWx1ZSByZWR1Y2VzIGxlc3NcbiAgICovXG4gIHB1YmxpYyBkYW1waW5nU3RyZW5ndGg6IG51bWJlciA9IDEuMDtcblxuICAvKipcbiAgICogUmVzdG9yZXMgc2hhcGUgb2YgZWxhc3RpYyBwYXJ0aWNsZSBncm91cHNcbiAgICogTGFyZ2VyIHZhbHVlcyBpbmNyZWFzZSBlbGFzdGljIHBhcnRpY2xlIHZlbG9jaXR5XG4gICAqL1xuICBwdWJsaWMgZWxhc3RpY1N0cmVuZ3RoOiBudW1iZXIgPSAwLjI1O1xuXG4gIC8qKlxuICAgKiBSZXN0b3JlcyBsZW5ndGggb2Ygc3ByaW5nIHBhcnRpY2xlIGdyb3Vwc1xuICAgKiBMYXJnZXIgdmFsdWVzIGluY3JlYXNlIHNwcmluZyBwYXJ0aWNsZSB2ZWxvY2l0eVxuICAgKi9cbiAgcHVibGljIHNwcmluZ1N0cmVuZ3RoOiBudW1iZXIgPSAwLjI1O1xuXG4gIC8qKlxuICAgKiBSZWR1Y2VzIHJlbGF0aXZlIHZlbG9jaXR5IG9mIHZpc2NvdXMgcGFydGljbGVzXG4gICAqIExhcmdlciB2YWx1ZXMgc2xvdyBkb3duIHZpc2NvdXMgcGFydGljbGVzIG1vcmVcbiAgICovXG4gIHB1YmxpYyB2aXNjb3VzU3RyZW5ndGg6IG51bWJlciA9IDAuMjU7XG5cbiAgLyoqXG4gICAqIFByb2R1Y2VzIHByZXNzdXJlIG9uIHRlbnNpbGUgcGFydGljbGVzXG4gICAqIDB+MC4yLiBMYXJnZXIgdmFsdWVzIGluY3JlYXNlIHRoZSBhbW91bnQgb2Ygc3VyZmFjZSB0ZW5zaW9uLlxuICAgKi9cbiAgcHVibGljIHN1cmZhY2VUZW5zaW9uUHJlc3N1cmVTdHJlbmd0aDogbnVtYmVyID0gMC4yO1xuXG4gIC8qKlxuICAgKiBTbW9vdGhlcyBvdXRsaW5lIG9mIHRlbnNpbGUgcGFydGljbGVzXG4gICAqIDB+MC4yLiBMYXJnZXIgdmFsdWVzIHJlc3VsdCBpbiByb3VuZGVyLCBzbW9vdGhlcixcbiAgICogd2F0ZXItZHJvcC1saWtlIGNsdXN0ZXJzIG9mIHBhcnRpY2xlcy5cbiAgICovXG4gIHB1YmxpYyBzdXJmYWNlVGVuc2lvbk5vcm1hbFN0cmVuZ3RoOiBudW1iZXIgPSAwLjI7XG5cbiAgLyoqXG4gICAqIFByb2R1Y2VzIGFkZGl0aW9uYWwgcHJlc3N1cmUgb24gcmVwdWxzaXZlIHBhcnRpY2xlc1xuICAgKiBMYXJnZXIgdmFsdWVzIHJlcHVsc2UgbW9yZVxuICAgKiBOZWdhdGl2ZSB2YWx1ZXMgbWVhbiBhdHRyYWN0aW9uLiBUaGUgcmFuZ2Ugd2hlcmUgcGFydGljbGVzXG4gICAqIGJlaGF2ZSBzdGFibHkgaXMgYWJvdXQgLTAuMiB0byAyLjAuXG4gICAqL1xuICBwdWJsaWMgcmVwdWxzaXZlU3RyZW5ndGg6IG51bWJlciA9IDEuMDtcblxuICAvKipcbiAgICogUHJvZHVjZXMgcmVwdWxzaW9uIGJldHdlZW4gcG93ZGVyIHBhcnRpY2xlc1xuICAgKiBMYXJnZXIgdmFsdWVzIHJlcHVsc2UgbW9yZVxuICAgKi9cbiAgcHVibGljIHBvd2RlclN0cmVuZ3RoOiBudW1iZXIgPSAwLjU7XG5cbiAgLyoqXG4gICAqIFB1c2hlcyBwYXJ0aWNsZXMgb3V0IG9mIHNvbGlkIHBhcnRpY2xlIGdyb3VwXG4gICAqIExhcmdlciB2YWx1ZXMgcmVwdWxzZSBtb3JlXG4gICAqL1xuICBwdWJsaWMgZWplY3Rpb25TdHJlbmd0aDogbnVtYmVyID0gMC41O1xuXG4gIC8qKlxuICAgKiBQcm9kdWNlcyBzdGF0aWMgcHJlc3N1cmVcbiAgICogTGFyZ2VyIHZhbHVlcyBpbmNyZWFzZSB0aGUgcHJlc3N1cmUgb24gbmVpZ2hib3JpbmcgcGFydGlsY2VzXG4gICAqIEZvciBhIGRlc2NyaXB0aW9uIG9mIHN0YXRpYyBwcmVzc3VyZSwgc2VlXG4gICAqIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RhdGljX3ByZXNzdXJlI1N0YXRpY19wcmVzc3VyZV9pbl9mbHVpZF9keW5hbWljc1xuICAgKi9cbiAgcHVibGljIHN0YXRpY1ByZXNzdXJlU3RyZW5ndGg6IG51bWJlciA9IDAuMjtcblxuICAvKipcbiAgICogUmVkdWNlcyBpbnN0YWJpbGl0eSBpbiBzdGF0aWMgcHJlc3N1cmUgY2FsY3VsYXRpb25cbiAgICogTGFyZ2VyIHZhbHVlcyBtYWtlIHN0YWJpbGl6ZSBzdGF0aWMgcHJlc3N1cmUgd2l0aCBmZXdlclxuICAgKiBpdGVyYXRpb25zXG4gICAqL1xuICBwdWJsaWMgc3RhdGljUHJlc3N1cmVSZWxheGF0aW9uOiBudW1iZXIgPSAwLjI7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHN0YXRpYyBwcmVzc3VyZSBtb3JlIHByZWNpc2VseVxuICAgKiBTZWUgU2V0U3RhdGljUHJlc3N1cmVJdGVyYXRpb25zIGZvciBkZXRhaWxzXG4gICAqL1xuICBwdWJsaWMgc3RhdGljUHJlc3N1cmVJdGVyYXRpb25zOiBudW1iZXIgPSA4O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGhvdyBmYXN0IGNvbG9ycyBhcmUgbWl4ZWRcbiAgICogMS4wZiA9PT4gbWl4ZWQgaW1tZWRpYXRlbHlcbiAgICogMC41ZiA9PT4gbWl4ZWQgaGFsZiB3YXkgZWFjaCBzaW11bGF0aW9uIHN0ZXAgKHNlZVxuICAgKiBiMldvcmxkOjpTdGVwKCkpXG4gICAqL1xuICBwdWJsaWMgY29sb3JNaXhpbmdTdHJlbmd0aDogbnVtYmVyID0gMC41O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRlc3Ryb3kgcGFydGljbGVzIGJ5IGFnZSB3aGVuIG5vIG1vcmUgcGFydGljbGVzXG4gICAqIGNhbiBiZSBjcmVhdGVkLiAgU2VlICNiMlBhcnRpY2xlU3lzdGVtOjpTZXREZXN0cnVjdGlvbkJ5QWdlKClcbiAgICogZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqL1xuICBwdWJsaWMgZGVzdHJveUJ5QWdlOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogR3JhbnVsYXJpdHkgb2YgcGFydGljbGUgbGlmZXRpbWVzIGluIHNlY29uZHMuICBCeSBkZWZhdWx0XG4gICAqIHRoaXMgaXMgc2V0IHRvICgxLjBmIC8gNjAuMGYpIHNlY29uZHMuICBiMlBhcnRpY2xlU3lzdGVtIHVzZXNcbiAgICogYSAzMi1iaXQgc2lnbmVkIHZhbHVlIHRvIHRyYWNrIHBhcnRpY2xlIGxpZmV0aW1lcyBzbyB0aGVcbiAgICogbWF4aW11bSBsaWZldGltZSBvZiBhIHBhcnRpY2xlIGlzICgyXjMyIC0gMSkgLyAoMS4wZiAvXG4gICAqIGxpZmV0aW1lR3JhbnVsYXJpdHkpIHNlY29uZHMuIFdpdGggdGhlIHZhbHVlIHNldCB0byAxLzYwIHRoZVxuICAgKiBtYXhpbXVtIGxpZmV0aW1lIG9yIGFnZSBvZiBhIHBhcnRpY2xlIGlzIDIuMjcgeWVhcnMuXG4gICAqL1xuICBwdWJsaWMgbGlmZXRpbWVHcmFudWxhcml0eTogbnVtYmVyID0gMS4wIC8gNjAuMDtcblxuICBwdWJsaWMgQ29weShkZWY6IGIyUGFydGljbGVTeXN0ZW1EZWYpOiBiMlBhcnRpY2xlU3lzdGVtRGVmIHtcbiAgICB0aGlzLnN0cmljdENvbnRhY3RDaGVjayA9IGRlZi5zdHJpY3RDb250YWN0Q2hlY2s7XG4gICAgdGhpcy5kZW5zaXR5ID0gZGVmLmRlbnNpdHk7XG4gICAgdGhpcy5ncmF2aXR5U2NhbGUgPSBkZWYuZ3Jhdml0eVNjYWxlO1xuICAgIHRoaXMucmFkaXVzID0gZGVmLnJhZGl1cztcbiAgICB0aGlzLm1heENvdW50ID0gZGVmLm1heENvdW50O1xuICAgIHRoaXMucHJlc3N1cmVTdHJlbmd0aCA9IGRlZi5wcmVzc3VyZVN0cmVuZ3RoO1xuICAgIHRoaXMuZGFtcGluZ1N0cmVuZ3RoID0gZGVmLmRhbXBpbmdTdHJlbmd0aDtcbiAgICB0aGlzLmVsYXN0aWNTdHJlbmd0aCA9IGRlZi5lbGFzdGljU3RyZW5ndGg7XG4gICAgdGhpcy5zcHJpbmdTdHJlbmd0aCA9IGRlZi5zcHJpbmdTdHJlbmd0aDtcbiAgICB0aGlzLnZpc2NvdXNTdHJlbmd0aCA9IGRlZi52aXNjb3VzU3RyZW5ndGg7XG4gICAgdGhpcy5zdXJmYWNlVGVuc2lvblByZXNzdXJlU3RyZW5ndGggPSBkZWYuc3VyZmFjZVRlbnNpb25QcmVzc3VyZVN0cmVuZ3RoO1xuICAgIHRoaXMuc3VyZmFjZVRlbnNpb25Ob3JtYWxTdHJlbmd0aCA9IGRlZi5zdXJmYWNlVGVuc2lvbk5vcm1hbFN0cmVuZ3RoO1xuICAgIHRoaXMucmVwdWxzaXZlU3RyZW5ndGggPSBkZWYucmVwdWxzaXZlU3RyZW5ndGg7XG4gICAgdGhpcy5wb3dkZXJTdHJlbmd0aCA9IGRlZi5wb3dkZXJTdHJlbmd0aDtcbiAgICB0aGlzLmVqZWN0aW9uU3RyZW5ndGggPSBkZWYuZWplY3Rpb25TdHJlbmd0aDtcbiAgICB0aGlzLnN0YXRpY1ByZXNzdXJlU3RyZW5ndGggPSBkZWYuc3RhdGljUHJlc3N1cmVTdHJlbmd0aDtcbiAgICB0aGlzLnN0YXRpY1ByZXNzdXJlUmVsYXhhdGlvbiA9IGRlZi5zdGF0aWNQcmVzc3VyZVJlbGF4YXRpb247XG4gICAgdGhpcy5zdGF0aWNQcmVzc3VyZUl0ZXJhdGlvbnMgPSBkZWYuc3RhdGljUHJlc3N1cmVJdGVyYXRpb25zO1xuICAgIHRoaXMuY29sb3JNaXhpbmdTdHJlbmd0aCA9IGRlZi5jb2xvck1peGluZ1N0cmVuZ3RoO1xuICAgIHRoaXMuZGVzdHJveUJ5QWdlID0gZGVmLmRlc3Ryb3lCeUFnZTtcbiAgICB0aGlzLmxpZmV0aW1lR3JhbnVsYXJpdHkgPSBkZWYubGlmZXRpbWVHcmFudWxhcml0eTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBDbG9uZSgpOiBiMlBhcnRpY2xlU3lzdGVtRGVmIHtcbiAgICByZXR1cm4gbmV3IGIyUGFydGljbGVTeXN0ZW1EZWYoKS5Db3B5KHRoaXMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtIHtcbiAgcHVibGljIG1fcGF1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtX3RpbWVzdGFtcDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1fYWxsUGFydGljbGVGbGFnczogYjJQYXJ0aWNsZUZsYWcgPSAwO1xuICBwdWJsaWMgbV9uZWVkc1VwZGF0ZUFsbFBhcnRpY2xlRmxhZ3M6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fYWxsR3JvdXBGbGFnczogYjJQYXJ0aWNsZUdyb3VwRmxhZyA9IDA7XG4gIHB1YmxpYyBtX25lZWRzVXBkYXRlQWxsR3JvdXBGbGFnczogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbV9oYXNGb3JjZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbV9pdGVyYXRpb25JbmRleDogbnVtYmVyID0gMDtcbiAgcHVibGljIG1faW52ZXJzZURlbnNpdHk6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIG1fcGFydGljbGVEaWFtZXRlcjogbnVtYmVyID0gMC4wO1xuICBwdWJsaWMgbV9pbnZlcnNlRGlhbWV0ZXI6IG51bWJlciA9IDAuMDtcbiAgcHVibGljIG1fc3F1YXJlZERpYW1ldGVyOiBudW1iZXIgPSAwLjA7XG4gIHB1YmxpYyBtX2NvdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5OiBudW1iZXIgPSAwO1xuICAvKipcbiAgICogQWxsb2NhdG9yIGZvciBiMlBhcnRpY2xlSGFuZGxlIGluc3RhbmNlcy5cbiAgICovXG4gIC8vL21faGFuZGxlQWxsb2NhdG9yOiBhbnkgPSBudWxsO1xuICAvKipcbiAgICogTWFwcyBwYXJ0aWNsZSBpbmRpY2llcyB0byBoYW5kbGVzLlxuICAgKi9cbiAgcHVibGljIG1faGFuZGxlSW5kZXhCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPGIyUGFydGljbGVIYW5kbGUgfCBudWxsPiA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMlBhcnRpY2xlSGFuZGxlIHwgbnVsbD4oKTtcbiAgcHVibGljIG1fZmxhZ3NCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPGIyUGFydGljbGVGbGFnPiA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMlBhcnRpY2xlRmxhZz4oKTtcbiAgcHVibGljIG1fcG9zaXRpb25CdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPGIyVmVjMj4gPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9Vc2VyT3ZlcnJpZGFibGVCdWZmZXI8YjJWZWMyPigpO1xuICBwdWJsaWMgbV92ZWxvY2l0eUJ1ZmZlcjogYjJQYXJ0aWNsZVN5c3RlbV9Vc2VyT3ZlcnJpZGFibGVCdWZmZXI8YjJWZWMyPiA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMlZlYzI+KCk7XG4gIHB1YmxpYyBtX2ZvcmNlQnVmZmVyOiBiMlZlYzJbXSA9IFtdO1xuICAvKipcbiAgICogdGhpcy5tX3dlaWdodEJ1ZmZlciBpcyBwb3B1bGF0ZWQgaW4gQ29tcHV0ZVdlaWdodCBhbmQgdXNlZCBpblxuICAgKiBDb21wdXRlRGVwdGgoKSwgU29sdmVTdGF0aWNQcmVzc3VyZSgpIGFuZCBTb2x2ZVByZXNzdXJlKCkuXG4gICAqL1xuICBwdWJsaWMgbV93ZWlnaHRCdWZmZXI6IG51bWJlcltdID0gW107XG4gIC8qKlxuICAgKiBXaGVuIGFueSBwYXJ0aWNsZXMgaGF2ZSB0aGUgZmxhZyBiMl9zdGF0aWNQcmVzc3VyZVBhcnRpY2xlLFxuICAgKiB0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXIgaXMgZmlyc3QgYWxsb2NhdGVkIGFuZCB1c2VkIGluXG4gICAqIFNvbHZlU3RhdGljUHJlc3N1cmUoKSBhbmQgU29sdmVQcmVzc3VyZSgpLiAgSXQgd2lsbCBiZVxuICAgKiByZWFsbG9jYXRlZCBvbiBzdWJzZXF1ZW50IENyZWF0ZVBhcnRpY2xlKCkgY2FsbHMuXG4gICAqL1xuICBwdWJsaWMgbV9zdGF0aWNQcmVzc3VyZUJ1ZmZlcjogbnVtYmVyW10gPSBbXTtcbiAgLyoqXG4gICAqIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXIgaXMgdXNlZCBpbiBtYW55IGZ1bmN0aW9ucyBhcyBhIHRlbXBvcmFyeVxuICAgKiBidWZmZXIgZm9yIHNjYWxhciB2YWx1ZXMuXG4gICAqL1xuICBwdWJsaWMgbV9hY2N1bXVsYXRpb25CdWZmZXI6IG51bWJlcltdID0gW107XG4gIC8qKlxuICAgKiBXaGVuIGFueSBwYXJ0aWNsZXMgaGF2ZSB0aGUgZmxhZyBiMl90ZW5zaWxlUGFydGljbGUsXG4gICAqIHRoaXMubV9hY2N1bXVsYXRpb24yQnVmZmVyIGlzIGZpcnN0IGFsbG9jYXRlZCBhbmQgdXNlZCBpblxuICAgKiBTb2x2ZVRlbnNpbGUoKSBhcyBhIHRlbXBvcmFyeSBidWZmZXIgZm9yIHZlY3RvciB2YWx1ZXMuICBJdFxuICAgKiB3aWxsIGJlIHJlYWxsb2NhdGVkIG9uIHN1YnNlcXVlbnQgQ3JlYXRlUGFydGljbGUoKSBjYWxscy5cbiAgICovXG4gIHB1YmxpYyBtX2FjY3VtdWxhdGlvbjJCdWZmZXI6IGIyVmVjMltdID0gW107XG4gIC8qKlxuICAgKiBXaGVuIGFueSBwYXJ0aWNsZSBncm91cHMgaGF2ZSB0aGUgZmxhZyBiMl9zb2xpZFBhcnRpY2xlR3JvdXAsXG4gICAqIHRoaXMubV9kZXB0aEJ1ZmZlciBpcyBmaXJzdCBhbGxvY2F0ZWQgYW5kIHBvcHVsYXRlZCBpblxuICAgKiBDb21wdXRlRGVwdGgoKSBhbmQgdXNlZCBpbiBTb2x2ZVNvbGlkKCkuIEl0IHdpbGwgYmVcbiAgICogcmVhbGxvY2F0ZWQgb24gc3Vic2VxdWVudCBDcmVhdGVQYXJ0aWNsZSgpIGNhbGxzLlxuICAgKi9cbiAgcHVibGljIG1fZGVwdGhCdWZmZXI6IG51bWJlcltdID0gW107XG4gIHB1YmxpYyBtX2NvbG9yQnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMkNvbG9yPiA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMkNvbG9yPigpO1xuICBwdWJsaWMgbV9ncm91cEJ1ZmZlcjogQXJyYXk8YjJQYXJ0aWNsZUdyb3VwIHwgbnVsbD4gPSBbXTtcbiAgcHVibGljIG1fdXNlckRhdGFCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPGFueT4gPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9Vc2VyT3ZlcnJpZGFibGVCdWZmZXIoKTtcbiAgLyoqXG4gICAqIFN0dWNrIHBhcnRpY2xlIGRldGVjdGlvbiBwYXJhbWV0ZXJzIGFuZCByZWNvcmQga2VlcGluZ1xuICAgKi9cbiAgcHVibGljIG1fc3R1Y2tUaHJlc2hvbGQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPG51bWJlcj4gPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9Vc2VyT3ZlcnJpZGFibGVCdWZmZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgbV9ib2R5Q29udGFjdENvdW50QnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxudW1iZXI+ID0gbmV3IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPG51bWJlcj4oKTtcbiAgcHVibGljIG1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPG51bWJlcj4gPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9Vc2VyT3ZlcnJpZGFibGVCdWZmZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgbV9zdHVja1BhcnRpY2xlQnVmZmVyOiBiMkdyb3dhYmxlQnVmZmVyPG51bWJlcj4gPSBuZXcgYjJHcm93YWJsZUJ1ZmZlcjxudW1iZXI+KCgpID0+IDApO1xuICBwdWJsaWMgbV9wcm94eUJ1ZmZlcjogYjJHcm93YWJsZUJ1ZmZlcjxiMlBhcnRpY2xlU3lzdGVtX1Byb3h5PiA9IG5ldyBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVTeXN0ZW1fUHJveHk+KCgpID0+IG5ldyBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5KCkpO1xuICBwdWJsaWMgbV9jb250YWN0QnVmZmVyOiBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVDb250YWN0PiA9IG5ldyBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVDb250YWN0PigoKSA9PiBuZXcgYjJQYXJ0aWNsZUNvbnRhY3QoKSk7XG4gIHB1YmxpYyBtX2JvZHlDb250YWN0QnVmZmVyOiBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVCb2R5Q29udGFjdD4gPSBuZXcgYjJHcm93YWJsZUJ1ZmZlcjxiMlBhcnRpY2xlQm9keUNvbnRhY3Q+KCgpID0+IG5ldyBiMlBhcnRpY2xlQm9keUNvbnRhY3QoKSk7XG4gIHB1YmxpYyBtX3BhaXJCdWZmZXI6IGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZVBhaXI+ID0gbmV3IGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZVBhaXI+KCgpID0+IG5ldyBiMlBhcnRpY2xlUGFpcigpKTtcbiAgcHVibGljIG1fdHJpYWRCdWZmZXI6IGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZVRyaWFkPiA9IG5ldyBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVUcmlhZD4oKCkgPT4gbmV3IGIyUGFydGljbGVUcmlhZCgpKTtcbiAgLyoqXG4gICAqIFRpbWUgZWFjaCBwYXJ0aWNsZSBzaG91bGQgYmUgZGVzdHJveWVkIHJlbGF0aXZlIHRvIHRoZSBsYXN0XG4gICAqIHRpbWUgdGhpcy5tX3RpbWVFbGFwc2VkIHdhcyBpbml0aWFsaXplZC4gIEVhY2ggdW5pdCBvZiB0aW1lXG4gICAqIGNvcnJlc3BvbmRzIHRvIGIyUGFydGljbGVTeXN0ZW1EZWY6OmxpZmV0aW1lR3JhbnVsYXJpdHlcbiAgICogc2Vjb25kcy5cbiAgICovXG4gIHB1YmxpYyBtX2V4cGlyYXRpb25UaW1lQnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxudW1iZXI+ID0gbmV3IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPG51bWJlcj4oKTtcbiAgLyoqXG4gICAqIExpc3Qgb2YgcGFydGljbGUgaW5kaWNlcyBzb3J0ZWQgYnkgZXhwaXJhdGlvbiB0aW1lLlxuICAgKi9cbiAgcHVibGljIG1faW5kZXhCeUV4cGlyYXRpb25UaW1lQnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxudW1iZXI+ID0gbmV3IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPG51bWJlcj4oKTtcbiAgLyoqXG4gICAqIFRpbWUgZWxhcHNlZCBpbiAzMjozMiBmaXhlZCBwb2ludC4gIEVhY2ggbm9uLWZyYWN0aW9uYWwgdW5pdFxuICAgKiBvZiB0aW1lIGNvcnJlc3BvbmRzIHRvXG4gICAqIGIyUGFydGljbGVTeXN0ZW1EZWY6OmxpZmV0aW1lR3JhbnVsYXJpdHkgc2Vjb25kcy5cbiAgICovXG4gIHB1YmxpYyBtX3RpbWVFbGFwc2VkOiBudW1iZXIgPSAwO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZXhwaXJhdGlvbiB0aW1lIGJ1ZmZlciBoYXMgYmVlbiBtb2RpZmllZCBhbmRcbiAgICogbmVlZHMgdG8gYmUgcmVzb3J0ZWQuXG4gICAqL1xuICBwdWJsaWMgbV9leHBpcmF0aW9uVGltZUJ1ZmZlclJlcXVpcmVzU29ydGluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbV9ncm91cENvdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbV9ncm91cExpc3Q6IGIyUGFydGljbGVHcm91cCB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgbV9kZWY6IGIyUGFydGljbGVTeXN0ZW1EZWYgPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbURlZigpO1xuICBwdWJsaWMgbV93b3JsZDogYjJXb3JsZDtcbiAgcHVibGljIG1fcHJldjogYjJQYXJ0aWNsZVN5c3RlbSB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgbV9uZXh0OiBiMlBhcnRpY2xlU3lzdGVtIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB4VHJ1bmNCaXRzOiBudW1iZXIgPSAxMjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB5VHJ1bmNCaXRzOiBudW1iZXIgPSAxMjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB0YWdCaXRzOiBudW1iZXIgPSA4ICogNDsgLy8gOHUgKiBzaXplb2YodWludDMyKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB5T2Zmc2V0OiBudW1iZXIgPSAxIDw8IChiMlBhcnRpY2xlU3lzdGVtLnlUcnVuY0JpdHMgLSAxKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB5U2hpZnQ6IG51bWJlciA9IGIyUGFydGljbGVTeXN0ZW0udGFnQml0cyAtIGIyUGFydGljbGVTeXN0ZW0ueVRydW5jQml0cztcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB4U2hpZnQ6IG51bWJlciA9IGIyUGFydGljbGVTeXN0ZW0udGFnQml0cyAtIGIyUGFydGljbGVTeXN0ZW0ueVRydW5jQml0cyAtIGIyUGFydGljbGVTeXN0ZW0ueFRydW5jQml0cztcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSB4U2NhbGU6IG51bWJlciA9IDEgPDwgYjJQYXJ0aWNsZVN5c3RlbS54U2hpZnQ7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgeE9mZnNldDogbnVtYmVyID0gYjJQYXJ0aWNsZVN5c3RlbS54U2NhbGUgKiAoMSA8PCAoYjJQYXJ0aWNsZVN5c3RlbS54VHJ1bmNCaXRzIC0gMSkpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHlNYXNrOiBudW1iZXIgPSAoKDEgPDwgYjJQYXJ0aWNsZVN5c3RlbS55VHJ1bmNCaXRzKSAtIDEpIDw8IGIyUGFydGljbGVTeXN0ZW0ueVNoaWZ0O1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHhNYXNrOiBudW1iZXIgPSB+YjJQYXJ0aWNsZVN5c3RlbS55TWFzaztcblxuICBwdWJsaWMgc3RhdGljIGNvbXB1dGVUYWcoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vL3JldHVybiAoKHVpbnQzMikoeSArIHlPZmZzZXQpIDw8IHlTaGlmdCkgKyAodWludDMyKSh4U2NhbGUgKiB4ICsgeE9mZnNldCk7XG4gICAgcmV0dXJuICgoKCh5ICsgYjJQYXJ0aWNsZVN5c3RlbS55T2Zmc2V0KSA+Pj4gMCkgPDwgYjJQYXJ0aWNsZVN5c3RlbS55U2hpZnQpICsgKChiMlBhcnRpY2xlU3lzdGVtLnhTY2FsZSAqIHggKyBiMlBhcnRpY2xlU3lzdGVtLnhPZmZzZXQpID4+PiAwKSkgPj4+IDA7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGNvbXB1dGVSZWxhdGl2ZVRhZyh0YWc6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vL3JldHVybiB0YWcgKyAoeSA8PCB5U2hpZnQpICsgKHggPDwgeFNoaWZ0KTtcbiAgICByZXR1cm4gKHRhZyArICh5IDw8IGIyUGFydGljbGVTeXN0ZW0ueVNoaWZ0KSArICh4IDw8IGIyUGFydGljbGVTeXN0ZW0ueFNoaWZ0KSkgPj4+IDA7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihkZWY6IGIyUGFydGljbGVTeXN0ZW1EZWYsIHdvcmxkOiBiMldvcmxkKSB7XG4gICAgdGhpcy5TZXRTdHJpY3RDb250YWN0Q2hlY2soZGVmLnN0cmljdENvbnRhY3RDaGVjayk7XG4gICAgdGhpcy5TZXREZW5zaXR5KGRlZi5kZW5zaXR5KTtcbiAgICB0aGlzLlNldEdyYXZpdHlTY2FsZShkZWYuZ3Jhdml0eVNjYWxlKTtcbiAgICB0aGlzLlNldFJhZGl1cyhkZWYucmFkaXVzKTtcbiAgICB0aGlzLlNldE1heFBhcnRpY2xlQ291bnQoZGVmLm1heENvdW50KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZGVmLmxpZmV0aW1lR3JhbnVsYXJpdHkgPiAwLjApO1xuICAgIHRoaXMubV9kZWYgPSBkZWYuQ2xvbmUoKTtcbiAgICB0aGlzLm1fd29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLlNldERlc3RydWN0aW9uQnlBZ2UodGhpcy5tX2RlZi5kZXN0cm95QnlBZ2UpO1xuICB9XG5cbiAgcHVibGljIERyb3AoKTogdm9pZCB7XG4gICAgd2hpbGUgKHRoaXMubV9ncm91cExpc3QpIHtcbiAgICAgIHRoaXMuRGVzdHJveVBhcnRpY2xlR3JvdXAodGhpcy5tX2dyb3VwTGlzdCk7XG4gICAgfVxuXG4gICAgdGhpcy5GcmVlVXNlck92ZXJyaWRhYmxlQnVmZmVyKHRoaXMubV9oYW5kbGVJbmRleEJ1ZmZlcik7XG4gICAgdGhpcy5GcmVlVXNlck92ZXJyaWRhYmxlQnVmZmVyKHRoaXMubV9mbGFnc0J1ZmZlcik7XG4gICAgdGhpcy5GcmVlVXNlck92ZXJyaWRhYmxlQnVmZmVyKHRoaXMubV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyKTtcbiAgICB0aGlzLkZyZWVVc2VyT3ZlcnJpZGFibGVCdWZmZXIodGhpcy5tX2JvZHlDb250YWN0Q291bnRCdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1fcG9zaXRpb25CdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1fdmVsb2NpdHlCdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1fY29sb3JCdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1fdXNlckRhdGFCdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIpO1xuICAgIHRoaXMuRnJlZVVzZXJPdmVycmlkYWJsZUJ1ZmZlcih0aGlzLm1faW5kZXhCeUV4cGlyYXRpb25UaW1lQnVmZmVyKTtcbiAgICB0aGlzLkZyZWVCdWZmZXIodGhpcy5tX2ZvcmNlQnVmZmVyLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSk7XG4gICAgdGhpcy5GcmVlQnVmZmVyKHRoaXMubV93ZWlnaHRCdWZmZXIsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5KTtcbiAgICB0aGlzLkZyZWVCdWZmZXIodGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSk7XG4gICAgdGhpcy5GcmVlQnVmZmVyKHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXIsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5KTtcbiAgICB0aGlzLkZyZWVCdWZmZXIodGhpcy5tX2FjY3VtdWxhdGlvbjJCdWZmZXIsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5KTtcbiAgICB0aGlzLkZyZWVCdWZmZXIodGhpcy5tX2RlcHRoQnVmZmVyLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSk7XG4gICAgdGhpcy5GcmVlQnVmZmVyKHRoaXMubV9ncm91cEJ1ZmZlciwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHBhcnRpY2xlIHdob3NlIHByb3BlcnRpZXMgaGF2ZSBiZWVuIGRlZmluZWQuXG4gICAqXG4gICAqIE5vIHJlZmVyZW5jZSB0byB0aGUgZGVmaW5pdGlvbiBpcyByZXRhaW5lZC5cbiAgICpcbiAgICogQSBzaW11bGF0aW9uIHN0ZXAgbXVzdCBvY2N1ciBiZWZvcmUgaXQncyBwb3NzaWJsZSB0byBpbnRlcmFjdFxuICAgKiB3aXRoIGEgbmV3bHkgY3JlYXRlZCBwYXJ0aWNsZS4gIEZvciBleGFtcGxlLFxuICAgKiBEZXN0cm95UGFydGljbGVJblNoYXBlKCkgd2lsbCBub3QgZGVzdHJveSBhIHBhcnRpY2xlIHVudGlsXG4gICAqIGIyV29ybGQ6OlN0ZXAoKSBoYXMgYmVlbiBjYWxsZWQuXG4gICAqXG4gICAqIHdhcm5pbmc6IFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gICAqL1xuICBwdWJsaWMgQ3JlYXRlUGFydGljbGUoZGVmOiBiMklQYXJ0aWNsZURlZik6IG51bWJlciB7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBpZiAodGhpcy5tX2NvdW50ID49IHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5KSB7XG4gICAgICAvLyBEb3VibGUgdGhlIHBhcnRpY2xlIGNhcGFjaXR5LlxuICAgICAgY29uc3QgY2FwYWNpdHkgPSB0aGlzLm1fY291bnQgPyAyICogdGhpcy5tX2NvdW50IDogYjJfbWluUGFydGljbGVTeXN0ZW1CdWZmZXJDYXBhY2l0eTtcbiAgICAgIHRoaXMuUmVhbGxvY2F0ZUludGVybmFsQWxsb2NhdGVkQnVmZmVycyhjYXBhY2l0eSk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY291bnQgPj0gdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHkpIHtcbiAgICAgIC8vIElmIHRoZSBvbGRlc3QgcGFydGljbGUgc2hvdWxkIGJlIGRlc3Ryb3llZC4uLlxuICAgICAgaWYgKHRoaXMubV9kZWYuZGVzdHJveUJ5QWdlKSB7XG4gICAgICAgIHRoaXMuRGVzdHJveU9sZGVzdFBhcnRpY2xlKDAsIGZhbHNlKTtcbiAgICAgICAgLy8gTmVlZCB0byBkZXN0cm95IHRoaXMgcGFydGljbGUgKm5vdyogc28gdGhhdCBpdCdzIHBvc3NpYmxlIHRvXG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBwYXJ0aWNsZS5cbiAgICAgICAgdGhpcy5Tb2x2ZVpvbWJpZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHRoaXMubV9jb3VudCsrO1xuICAgIHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2luZGV4XSA9IDA7XG4gICAgaWYgKHRoaXMubV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyLmRhdGEpIHtcbiAgICAgIHRoaXMubV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyLmRhdGFbaW5kZXhdID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGEpIHtcbiAgICAgIHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGFbaW5kZXhdID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9jb25zZWN1dGl2ZUNvbnRhY3RTdGVwc0J1ZmZlci5kYXRhKSB7XG4gICAgICB0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YVtpbmRleF0gPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fcG9zaXRpb25CdWZmZXIuZGF0YVtpbmRleF0gPSAodGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbaW5kZXhdIHx8IG5ldyBiMlZlYzIoKSkuQ29weShiMk1heWJlKGRlZi5wb3NpdGlvbiwgYjJWZWMyLlpFUk8pKTtcbiAgICB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtpbmRleF0gPSAodGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbaW5kZXhdIHx8IG5ldyBiMlZlYzIoKSkuQ29weShiMk1heWJlKGRlZi52ZWxvY2l0eSwgYjJWZWMyLlpFUk8pKTtcbiAgICB0aGlzLm1fd2VpZ2h0QnVmZmVyW2luZGV4XSA9IDA7XG4gICAgdGhpcy5tX2ZvcmNlQnVmZmVyW2luZGV4XSA9ICh0aGlzLm1fZm9yY2VCdWZmZXJbaW5kZXhdIHx8IG5ldyBiMlZlYzIoKSkuU2V0WmVybygpO1xuICAgIGlmICh0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXIpIHtcbiAgICAgIHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlcltpbmRleF0gPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2RlcHRoQnVmZmVyKSB7XG4gICAgICB0aGlzLm1fZGVwdGhCdWZmZXJbaW5kZXhdID0gMDtcbiAgICB9XG4gICAgY29uc3QgY29sb3I6IGIyQ29sb3IgPSBuZXcgYjJDb2xvcigpLkNvcHkoYjJNYXliZShkZWYuY29sb3IsIGIyQ29sb3IuWkVSTykpO1xuICAgIGlmICh0aGlzLm1fY29sb3JCdWZmZXIuZGF0YSB8fCAhY29sb3IuSXNaZXJvKCkpIHtcbiAgICAgIHRoaXMubV9jb2xvckJ1ZmZlci5kYXRhID0gdGhpcy5SZXF1ZXN0QnVmZmVyKHRoaXMubV9jb2xvckJ1ZmZlci5kYXRhKTtcbiAgICAgIHRoaXMubV9jb2xvckJ1ZmZlci5kYXRhW2luZGV4XSA9ICh0aGlzLm1fY29sb3JCdWZmZXIuZGF0YVtpbmRleF0gfHwgbmV3IGIyQ29sb3IoKSkuQ29weShjb2xvcik7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fdXNlckRhdGFCdWZmZXIuZGF0YSB8fCBkZWYudXNlckRhdGEpIHtcbiAgICAgIHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhID0gdGhpcy5SZXF1ZXN0QnVmZmVyKHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhKTtcbiAgICAgIHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhW2luZGV4XSA9IGRlZi51c2VyRGF0YTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9oYW5kbGVJbmRleEJ1ZmZlci5kYXRhKSB7XG4gICAgICB0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YVtpbmRleF0gPSBudWxsO1xuICAgIH1cbiAgICAvLy9Qcm94eSYgcHJveHkgPSBtX3Byb3h5QnVmZmVyLkFwcGVuZCgpO1xuICAgIGNvbnN0IHByb3h5ID0gdGhpcy5tX3Byb3h5QnVmZmVyLmRhdGFbdGhpcy5tX3Byb3h5QnVmZmVyLkFwcGVuZCgpXTtcblxuICAgIC8vIElmIHBhcnRpY2xlIGxpZmV0aW1lcyBhcmUgZW5hYmxlZCBvciB0aGUgbGlmZXRpbWUgaXMgc2V0IGluIHRoZSBwYXJ0aWNsZVxuICAgIC8vIGRlZmluaXRpb24sIGluaXRpYWxpemUgdGhlIGxpZmV0aW1lLlxuICAgIGNvbnN0IGxpZmV0aW1lID0gYjJNYXliZShkZWYubGlmZXRpbWUsIDAuMCk7XG4gICAgY29uc3QgZmluaXRlTGlmZXRpbWUgPSBsaWZldGltZSA+IDAuMDtcbiAgICBpZiAodGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEgfHwgZmluaXRlTGlmZXRpbWUpIHtcbiAgICAgIHRoaXMuU2V0UGFydGljbGVMaWZldGltZShpbmRleCwgZmluaXRlTGlmZXRpbWUgPyBsaWZldGltZSA6XG4gICAgICAgIHRoaXMuRXhwaXJhdGlvblRpbWVUb0xpZmV0aW1lKC10aGlzLkdldFF1YW50aXplZFRpbWVFbGFwc2VkKCkpKTtcbiAgICAgIC8vIEFkZCBhIHJlZmVyZW5jZSB0byB0aGUgbmV3bHkgYWRkZWQgcGFydGljbGUgdG8gdGhlIGVuZCBvZiB0aGVcbiAgICAgIC8vIHF1ZXVlLlxuICAgICAgdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhW2luZGV4XSA9IGluZGV4O1xuICAgIH1cblxuICAgIHByb3h5LmluZGV4ID0gaW5kZXg7XG4gICAgY29uc3QgZ3JvdXAgPSBiMk1heWJlKGRlZi5ncm91cCwgbnVsbCk7XG4gICAgdGhpcy5tX2dyb3VwQnVmZmVyW2luZGV4XSA9IGdyb3VwO1xuICAgIGlmIChncm91cCkge1xuICAgICAgaWYgKGdyb3VwLm1fZmlyc3RJbmRleCA8IGdyb3VwLm1fbGFzdEluZGV4KSB7XG4gICAgICAgIC8vIE1vdmUgcGFydGljbGVzIGluIHRoZSBncm91cCBqdXN0IGJlZm9yZSB0aGUgbmV3IHBhcnRpY2xlLlxuICAgICAgICB0aGlzLlJvdGF0ZUJ1ZmZlcihncm91cC5tX2ZpcnN0SW5kZXgsIGdyb3VwLm1fbGFzdEluZGV4LCBpbmRleCk7XG4gICAgICAgIC8vIERFQlVHOiBiMkFzc2VydChncm91cC5tX2xhc3RJbmRleCA9PT0gaW5kZXgpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGluZGV4IHJhbmdlIG9mIHRoZSBncm91cCB0byBjb250YWluIHRoZSBuZXcgcGFydGljbGUuXG4gICAgICAgIGdyb3VwLm1fbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhlIGdyb3VwIGlzIGVtcHR5LCByZXNldCB0aGUgaW5kZXggcmFuZ2UgdG8gY29udGFpbiBvbmx5IHRoZVxuICAgICAgICAvLyBuZXcgcGFydGljbGUuXG4gICAgICAgIGdyb3VwLm1fZmlyc3RJbmRleCA9IGluZGV4O1xuICAgICAgICBncm91cC5tX2xhc3RJbmRleCA9IGluZGV4ICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5TZXRQYXJ0aWNsZUZsYWdzKGluZGV4LCBiMk1heWJlKGRlZi5mbGFncywgMCkpO1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIGhhbmRsZSB0byB0aGUgcGFydGljbGUgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICpcbiAgICogUGxlYXNlIHNlZSAjYjJQYXJ0aWNsZUhhbmRsZSBmb3Igd2h5IHlvdSBtaWdodCB3YW50IGEgaGFuZGxlLlxuICAgKi9cbiAgcHVibGljIEdldFBhcnRpY2xlSGFuZGxlRnJvbUluZGV4KGluZGV4OiBudW1iZXIpOiBiMlBhcnRpY2xlSGFuZGxlIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuR2V0UGFydGljbGVDb3VudCgpICYmIGluZGV4ICE9PSBiMl9pbnZhbGlkUGFydGljbGVJbmRleCk7XG4gICAgdGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGEgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGEpO1xuICAgIGxldCBoYW5kbGUgPSB0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YVtpbmRleF07XG4gICAgaWYgKGhhbmRsZSkge1xuICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICB9XG4gICAgLy8gQ3JlYXRlIGEgaGFuZGxlLlxuICAgIC8vL2hhbmRsZSA9IG1faGFuZGxlQWxsb2NhdG9yLkFsbG9jYXRlKCk7XG4gICAgaGFuZGxlID0gbmV3IGIyUGFydGljbGVIYW5kbGUoKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoaGFuZGxlICE9PSBudWxsKTtcbiAgICBoYW5kbGUuU2V0SW5kZXgoaW5kZXgpO1xuICAgIHRoaXMubV9oYW5kbGVJbmRleEJ1ZmZlci5kYXRhW2luZGV4XSA9IGhhbmRsZTtcbiAgICByZXR1cm4gaGFuZGxlO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgYSBwYXJ0aWNsZS5cbiAgICpcbiAgICogVGhlIHBhcnRpY2xlIGlzIHJlbW92ZWQgYWZ0ZXIgdGhlIG5leHQgc2ltdWxhdGlvbiBzdGVwIChzZWVcbiAgICogYjJXb3JsZDo6U3RlcCgpKS5cbiAgICpcbiAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBwYXJ0aWNsZSB0byBkZXN0cm95LlxuICAgKiBAcGFyYW0gY2FsbERlc3RydWN0aW9uTGlzdGVuZXIgV2hldGhlciB0byBjYWxsIHRoZVxuICAgKiAgICAgIGRlc3RydWN0aW9uIGxpc3RlbmVyIGp1c3QgYmVmb3JlIHRoZSBwYXJ0aWNsZSBpc1xuICAgKiAgICAgIGRlc3Ryb3llZC5cbiAgICovXG4gIHB1YmxpYyBEZXN0cm95UGFydGljbGUoaW5kZXg6IG51bWJlciwgY2FsbERlc3RydWN0aW9uTGlzdGVuZXI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGxldCBmbGFncyA9IGIyUGFydGljbGVGbGFnLmIyX3pvbWJpZVBhcnRpY2xlO1xuICAgIGlmIChjYWxsRGVzdHJ1Y3Rpb25MaXN0ZW5lcikge1xuICAgICAgZmxhZ3MgfD0gYjJQYXJ0aWNsZUZsYWcuYjJfZGVzdHJ1Y3Rpb25MaXN0ZW5lclBhcnRpY2xlO1xuICAgIH1cbiAgICB0aGlzLlNldFBhcnRpY2xlRmxhZ3MoaW5kZXgsIHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2luZGV4XSB8IGZsYWdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBOdGggb2xkZXN0IHBhcnRpY2xlIGluIHRoZSBzeXN0ZW0uXG4gICAqXG4gICAqIFRoZSBwYXJ0aWNsZSBpcyByZW1vdmVkIGFmdGVyIHRoZSBuZXh0IGIyV29ybGQ6OlN0ZXAoKS5cbiAgICpcbiAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBOdGggb2xkZXN0IHBhcnRpY2xlIHRvXG4gICAqICAgICAgZGVzdHJveSwgMCB3aWxsIGRlc3Ryb3kgdGhlIG9sZGVzdCBwYXJ0aWNsZSBpbiB0aGVcbiAgICogICAgICBzeXN0ZW0sIDEgd2lsbCBkZXN0cm95IHRoZSBuZXh0IG9sZGVzdCBwYXJ0aWNsZSBldGMuXG4gICAqIEBwYXJhbSBjYWxsRGVzdHJ1Y3Rpb25MaXN0ZW5lciBXaGV0aGVyIHRvIGNhbGwgdGhlXG4gICAqICAgICAgZGVzdHJ1Y3Rpb24gbGlzdGVuZXIganVzdCBiZWZvcmUgdGhlIHBhcnRpY2xlIGlzXG4gICAqICAgICAgZGVzdHJveWVkLlxuICAgKi9cbiAgcHVibGljIERlc3Ryb3lPbGRlc3RQYXJ0aWNsZShpbmRleDogbnVtYmVyLCBjYWxsRGVzdHJ1Y3Rpb25MaXN0ZW5lcjogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgcGFydGljbGVDb3VudCA9IHRoaXMuR2V0UGFydGljbGVDb3VudCgpO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChpbmRleCA+PSAwICYmIGluZGV4IDwgcGFydGljbGVDb3VudCk7XG4gICAgLy8gTWFrZSBzdXJlIHBhcnRpY2xlIGxpZmV0aW1lIHRyYWNraW5nIGlzIGVuYWJsZWQuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9pbmRleEJ5RXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSAhPT0gbnVsbCk7XG4gICAgLy8gRGVzdHJveSB0aGUgb2xkZXN0IHBhcnRpY2xlIChwcmVmZXJyaW5nIHRvIGRlc3Ryb3kgZmluaXRlXG4gICAgLy8gbGlmZXRpbWUgcGFydGljbGVzIGZpcnN0KSB0byBmcmVlIGEgc2xvdCBpbiB0aGUgYnVmZmVyLlxuICAgIGNvbnN0IG9sZGVzdEZpbml0ZUxpZmV0aW1lUGFydGljbGUgPVxuICAgICAgdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhW3BhcnRpY2xlQ291bnQgLSAoaW5kZXggKyAxKV07XG4gICAgY29uc3Qgb2xkZXN0SW5maW5pdGVMaWZldGltZVBhcnRpY2xlID1cbiAgICAgIHRoaXMubV9pbmRleEJ5RXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YVtpbmRleF07XG4gICAgdGhpcy5EZXN0cm95UGFydGljbGUoXG4gICAgICB0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YVtvbGRlc3RGaW5pdGVMaWZldGltZVBhcnRpY2xlXSA+IDAuMCA/XG4gICAgICBvbGRlc3RGaW5pdGVMaWZldGltZVBhcnRpY2xlIDogb2xkZXN0SW5maW5pdGVMaWZldGltZVBhcnRpY2xlLFxuICAgICAgY2FsbERlc3RydWN0aW9uTGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgcGFydGljbGVzIGluc2lkZSBhIHNoYXBlLlxuICAgKlxuICAgKiB3YXJuaW5nOiBUaGlzIGZ1bmN0aW9uIGlzIGxvY2tlZCBkdXJpbmcgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBJbiBhZGRpdGlvbiwgdGhpcyBmdW5jdGlvbiBpbW1lZGlhdGVseSBkZXN0cm95cyBwYXJ0aWNsZXMgaW5cbiAgICogdGhlIHNoYXBlIGluIGNvbnN0cmFzdCB0byBEZXN0cm95UGFydGljbGUoKSB3aGljaCBkZWZlcnMgdGhlXG4gICAqIGRlc3RydWN0aW9uIHVudGlsIHRoZSBuZXh0IHNpbXVsYXRpb24gc3RlcC5cbiAgICpcbiAgICogQHJldHVybiBOdW1iZXIgb2YgcGFydGljbGVzIGRlc3Ryb3llZC5cbiAgICogQHBhcmFtIHNoYXBlIFNoYXBlIHdoaWNoIGVuY2xvc2VzIHBhcnRpY2xlc1xuICAgKiAgICAgIHRoYXQgc2hvdWxkIGJlIGRlc3Ryb3llZC5cbiAgICogQHBhcmFtIHhmIFRyYW5zZm9ybSBhcHBsaWVkIHRvIHRoZSBzaGFwZS5cbiAgICogQHBhcmFtIGNhbGxEZXN0cnVjdGlvbkxpc3RlbmVyIFdoZXRoZXIgdG8gY2FsbCB0aGVcbiAgICogICAgICB3b3JsZCBiMkRlc3RydWN0aW9uTGlzdGVuZXIgZm9yIGVhY2ggcGFydGljbGVcbiAgICogICAgICBkZXN0cm95ZWQuXG4gICAqL1xuICBwdWJsaWMgRGVzdHJveVBhcnRpY2xlc0luU2hhcGUoc2hhcGU6IGIyU2hhcGUsIHhmOiBiMlRyYW5zZm9ybSwgY2FsbERlc3RydWN0aW9uTGlzdGVuZXI6IGJvb2xlYW4gPSBmYWxzZSk6IG51bWJlciB7XG4gICAgY29uc3Qgc19hYWJiID0gYjJQYXJ0aWNsZVN5c3RlbS5EZXN0cm95UGFydGljbGVzSW5TaGFwZV9zX2FhYmI7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICBjb25zdCBjYWxsYmFjayA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX0Rlc3Ryb3lQYXJ0aWNsZXNJblNoYXBlQ2FsbGJhY2sodGhpcywgc2hhcGUsIHhmLCBjYWxsRGVzdHJ1Y3Rpb25MaXN0ZW5lcik7XG5cbiAgICBjb25zdCBhYWJiID0gc19hYWJiO1xuICAgIHNoYXBlLkNvbXB1dGVBQUJCKGFhYmIsIHhmLCAwKTtcbiAgICB0aGlzLm1fd29ybGQuUXVlcnlBQUJCKGNhbGxiYWNrLCBhYWJiKTtcbiAgICByZXR1cm4gY2FsbGJhY2suRGVzdHJveWVkKCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXN0cm95UGFydGljbGVzSW5TaGFwZV9zX2FhYmIgPSBuZXcgYjJBQUJCKCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHBhcnRpY2xlIGdyb3VwIHdob3NlIHByb3BlcnRpZXMgaGF2ZSBiZWVuIGRlZmluZWQuXG4gICAqXG4gICAqIE5vIHJlZmVyZW5jZSB0byB0aGUgZGVmaW5pdGlvbiBpcyByZXRhaW5lZC5cbiAgICpcbiAgICogd2FybmluZzogVGhpcyBmdW5jdGlvbiBpcyBsb2NrZWQgZHVyaW5nIGNhbGxiYWNrcy5cbiAgICovXG4gIHB1YmxpYyBDcmVhdGVQYXJ0aWNsZUdyb3VwKGdyb3VwRGVmOiBiMklQYXJ0aWNsZUdyb3VwRGVmKTogYjJQYXJ0aWNsZUdyb3VwIHtcbiAgICBjb25zdCBzX3RyYW5zZm9ybSA9IGIyUGFydGljbGVTeXN0ZW0uQ3JlYXRlUGFydGljbGVHcm91cF9zX3RyYW5zZm9ybTtcblxuICAgIGlmICh0aGlzLm1fd29ybGQuSXNMb2NrZWQoKSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuXG4gICAgY29uc3QgdHJhbnNmb3JtID0gc190cmFuc2Zvcm07XG4gICAgdHJhbnNmb3JtLlNldFBvc2l0aW9uQW5nbGUoYjJNYXliZShncm91cERlZi5wb3NpdGlvbiwgYjJWZWMyLlpFUk8pLCBiMk1heWJlKGdyb3VwRGVmLmFuZ2xlLCAwKSk7XG4gICAgY29uc3QgZmlyc3RJbmRleCA9IHRoaXMubV9jb3VudDtcbiAgICBpZiAoZ3JvdXBEZWYuc2hhcGUpIHtcbiAgICAgIHRoaXMuQ3JlYXRlUGFydGljbGVzV2l0aFNoYXBlRm9yR3JvdXAoZ3JvdXBEZWYuc2hhcGUsIGdyb3VwRGVmLCB0cmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpZiAoZ3JvdXBEZWYuc2hhcGVzKSB7XG4gICAgICB0aGlzLkNyZWF0ZVBhcnRpY2xlc1dpdGhTaGFwZXNGb3JHcm91cChncm91cERlZi5zaGFwZXMsIGIyTWF5YmUoZ3JvdXBEZWYuc2hhcGVDb3VudCwgZ3JvdXBEZWYuc2hhcGVzLmxlbmd0aCksIGdyb3VwRGVmLCB0cmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpZiAoZ3JvdXBEZWYucG9zaXRpb25EYXRhKSB7XG4gICAgICBjb25zdCBjb3VudCA9IGIyTWF5YmUoZ3JvdXBEZWYucGFydGljbGVDb3VudCwgZ3JvdXBEZWYucG9zaXRpb25EYXRhLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgY29uc3QgcCA9IGdyb3VwRGVmLnBvc2l0aW9uRGF0YVtpXTtcbiAgICAgICAgdGhpcy5DcmVhdGVQYXJ0aWNsZUZvckdyb3VwKGdyb3VwRGVmLCB0cmFuc2Zvcm0sIHApO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsYXN0SW5kZXggPSB0aGlzLm1fY291bnQ7XG5cbiAgICBsZXQgZ3JvdXAgPSBuZXcgYjJQYXJ0aWNsZUdyb3VwKHRoaXMpO1xuICAgIGdyb3VwLm1fZmlyc3RJbmRleCA9IGZpcnN0SW5kZXg7XG4gICAgZ3JvdXAubV9sYXN0SW5kZXggPSBsYXN0SW5kZXg7XG4gICAgZ3JvdXAubV9zdHJlbmd0aCA9IGIyTWF5YmUoZ3JvdXBEZWYuc3RyZW5ndGgsIDEpO1xuICAgIGdyb3VwLm1fdXNlckRhdGEgPSBncm91cERlZi51c2VyRGF0YTtcbiAgICBncm91cC5tX3RyYW5zZm9ybS5Db3B5KHRyYW5zZm9ybSk7XG4gICAgZ3JvdXAubV9wcmV2ID0gbnVsbDtcbiAgICBncm91cC5tX25leHQgPSB0aGlzLm1fZ3JvdXBMaXN0O1xuICAgIGlmICh0aGlzLm1fZ3JvdXBMaXN0KSB7XG4gICAgICB0aGlzLm1fZ3JvdXBMaXN0Lm1fcHJldiA9IGdyb3VwO1xuICAgIH1cbiAgICB0aGlzLm1fZ3JvdXBMaXN0ID0gZ3JvdXA7XG4gICAgKyt0aGlzLm1fZ3JvdXBDb3VudDtcbiAgICBmb3IgKGxldCBpID0gZmlyc3RJbmRleDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICB0aGlzLm1fZ3JvdXBCdWZmZXJbaV0gPSBncm91cDtcbiAgICB9XG4gICAgdGhpcy5TZXRHcm91cEZsYWdzKGdyb3VwLCBiMk1heWJlKGdyb3VwRGVmLmdyb3VwRmxhZ3MsIDApKTtcblxuICAgIC8vIENyZWF0ZSBwYWlycyBhbmQgdHJpYWRzIGJldHdlZW4gcGFydGljbGVzIGluIHRoZSBncm91cC5cbiAgICBjb25zdCBmaWx0ZXIgPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9Db25uZWN0aW9uRmlsdGVyKCk7XG4gICAgdGhpcy5VcGRhdGVDb250YWN0cyh0cnVlKTtcbiAgICB0aGlzLlVwZGF0ZVBhaXJzQW5kVHJpYWRzKGZpcnN0SW5kZXgsIGxhc3RJbmRleCwgZmlsdGVyKTtcblxuICAgIGlmIChncm91cERlZi5ncm91cCkge1xuICAgICAgdGhpcy5Kb2luUGFydGljbGVHcm91cHMoZ3JvdXBEZWYuZ3JvdXAsIGdyb3VwKTtcbiAgICAgIGdyb3VwID0gZ3JvdXBEZWYuZ3JvdXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyb3VwO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ3JlYXRlUGFydGljbGVHcm91cF9zX3RyYW5zZm9ybSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuXG4gIC8qKlxuICAgKiBKb2luIHR3byBwYXJ0aWNsZSBncm91cHMuXG4gICAqXG4gICAqIHdhcm5pbmc6IFRoaXMgZnVuY3Rpb24gaXMgbG9ja2VkIGR1cmluZyBjYWxsYmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSBncm91cEEgdGhlIGZpcnN0IGdyb3VwLiBFeHBhbmRzIHRvIGVuY29tcGFzcyB0aGUgc2Vjb25kIGdyb3VwLlxuICAgKiBAcGFyYW0gZ3JvdXBCIHRoZSBzZWNvbmQgZ3JvdXAuIEl0IGlzIGRlc3Ryb3llZC5cbiAgICovXG4gIHB1YmxpYyBKb2luUGFydGljbGVHcm91cHMoZ3JvdXBBOiBiMlBhcnRpY2xlR3JvdXAsIGdyb3VwQjogYjJQYXJ0aWNsZUdyb3VwKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZ3JvdXBBICE9PSBncm91cEIpO1xuICAgIHRoaXMuUm90YXRlQnVmZmVyKGdyb3VwQi5tX2ZpcnN0SW5kZXgsIGdyb3VwQi5tX2xhc3RJbmRleCwgdGhpcy5tX2NvdW50KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZ3JvdXBCLm1fbGFzdEluZGV4ID09PSB0aGlzLm1fY291bnQpO1xuICAgIHRoaXMuUm90YXRlQnVmZmVyKGdyb3VwQS5tX2ZpcnN0SW5kZXgsIGdyb3VwQS5tX2xhc3RJbmRleCwgZ3JvdXBCLm1fZmlyc3RJbmRleCk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGdyb3VwQS5tX2xhc3RJbmRleCA9PT0gZ3JvdXBCLm1fZmlyc3RJbmRleCk7XG5cbiAgICAvLyBDcmVhdGUgcGFpcnMgYW5kIHRyaWFkcyBjb25uZWN0aW5nIGdyb3VwQSBhbmQgZ3JvdXBCLlxuICAgIGNvbnN0IGZpbHRlciA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX0pvaW5QYXJ0aWNsZUdyb3Vwc0ZpbHRlcihncm91cEIubV9maXJzdEluZGV4KTtcbiAgICB0aGlzLlVwZGF0ZUNvbnRhY3RzKHRydWUpO1xuICAgIHRoaXMuVXBkYXRlUGFpcnNBbmRUcmlhZHMoZ3JvdXBBLm1fZmlyc3RJbmRleCwgZ3JvdXBCLm1fbGFzdEluZGV4LCBmaWx0ZXIpO1xuXG4gICAgZm9yIChsZXQgaSA9IGdyb3VwQi5tX2ZpcnN0SW5kZXg7IGkgPCBncm91cEIubV9sYXN0SW5kZXg7IGkrKykge1xuICAgICAgdGhpcy5tX2dyb3VwQnVmZmVyW2ldID0gZ3JvdXBBO1xuICAgIH1cbiAgICBjb25zdCBncm91cEZsYWdzID0gZ3JvdXBBLm1fZ3JvdXBGbGFncyB8IGdyb3VwQi5tX2dyb3VwRmxhZ3M7XG4gICAgdGhpcy5TZXRHcm91cEZsYWdzKGdyb3VwQSwgZ3JvdXBGbGFncyk7XG4gICAgZ3JvdXBBLm1fbGFzdEluZGV4ID0gZ3JvdXBCLm1fbGFzdEluZGV4O1xuICAgIGdyb3VwQi5tX2ZpcnN0SW5kZXggPSBncm91cEIubV9sYXN0SW5kZXg7XG4gICAgdGhpcy5EZXN0cm95UGFydGljbGVHcm91cChncm91cEIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IHBhcnRpY2xlIGdyb3VwIGludG8gbXVsdGlwbGUgZGlzY29ubmVjdGVkIGdyb3Vwcy5cbiAgICpcbiAgICogd2FybmluZzogVGhpcyBmdW5jdGlvbiBpcyBsb2NrZWQgZHVyaW5nIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIGdyb3VwIHRoZSBncm91cCB0byBiZSBzcGxpdC5cbiAgICovXG4gIHB1YmxpYyBTcGxpdFBhcnRpY2xlR3JvdXAoZ3JvdXA6IGIyUGFydGljbGVHcm91cCk6IHZvaWQge1xuICAgIHRoaXMuVXBkYXRlQ29udGFjdHModHJ1ZSk7XG4gICAgY29uc3QgcGFydGljbGVDb3VudCA9IGdyb3VwLkdldFBhcnRpY2xlQ291bnQoKTtcbiAgICAvLyBXZSBjcmVhdGUgc2V2ZXJhbCBsaW5rZWQgbGlzdHMuIEVhY2ggbGlzdCByZXByZXNlbnRzIGEgc2V0IG9mIGNvbm5lY3RlZCBwYXJ0aWNsZXMuXG4gICAgY29uc3Qgbm9kZUJ1ZmZlcjogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlW10gPSBiMk1ha2VBcnJheShwYXJ0aWNsZUNvdW50LCAoaW5kZXg6IG51bWJlcikgPT4gbmV3IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSgpKTtcbiAgICBiMlBhcnRpY2xlU3lzdGVtLkluaXRpYWxpemVQYXJ0aWNsZUxpc3RzKGdyb3VwLCBub2RlQnVmZmVyKTtcbiAgICB0aGlzLk1lcmdlUGFydGljbGVMaXN0c0luQ29udGFjdChncm91cCwgbm9kZUJ1ZmZlcik7XG4gICAgY29uc3Qgc3Vydml2aW5nTGlzdCA9IGIyUGFydGljbGVTeXN0ZW0uRmluZExvbmdlc3RQYXJ0aWNsZUxpc3QoZ3JvdXAsIG5vZGVCdWZmZXIpO1xuICAgIHRoaXMuTWVyZ2Vab21iaWVQYXJ0aWNsZUxpc3ROb2Rlcyhncm91cCwgbm9kZUJ1ZmZlciwgc3Vydml2aW5nTGlzdCk7XG4gICAgdGhpcy5DcmVhdGVQYXJ0aWNsZUdyb3Vwc0Zyb21QYXJ0aWNsZUxpc3QoZ3JvdXAsIG5vZGVCdWZmZXIsIHN1cnZpdmluZ0xpc3QpO1xuICAgIHRoaXMuVXBkYXRlUGFpcnNBbmRUcmlhZHNXaXRoUGFydGljbGVMaXN0KGdyb3VwLCBub2RlQnVmZmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIHBhcnRpY2xlIGdyb3VwIGxpc3QuIFdpdGggdGhlIHJldHVybmVkIGdyb3VwLFxuICAgKiB1c2UgYjJQYXJ0aWNsZUdyb3VwOjpHZXROZXh0IHRvIGdldCB0aGUgbmV4dCBncm91cCBpbiB0aGVcbiAgICogd29ybGQgbGlzdC5cbiAgICpcbiAgICogQSBudWxsIGdyb3VwIGluZGljYXRlcyB0aGUgZW5kIG9mIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBoZWFkIG9mIHRoZSB3b3JsZCBwYXJ0aWNsZSBncm91cCBsaXN0LlxuICAgKi9cbiAgcHVibGljIEdldFBhcnRpY2xlR3JvdXBMaXN0KCk6IGIyUGFydGljbGVHcm91cCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1fZ3JvdXBMaXN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbnVtYmVyIG9mIHBhcnRpY2xlIGdyb3Vwcy5cbiAgICovXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZUdyb3VwQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2dyb3VwQ291bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBudW1iZXIgb2YgcGFydGljbGVzLlxuICAgKi9cbiAgcHVibGljIEdldFBhcnRpY2xlQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGFydGljbGVzLlxuICAgKi9cbiAgcHVibGljIEdldE1heFBhcnRpY2xlQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2RlZi5tYXhDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpY2xlcy5cbiAgICpcbiAgICogQSB2YWx1ZSBvZiAwIG1lYW5zIHRoZXJlIGlzIG5vIG1heGltdW0uIFRoZSBwYXJ0aWNsZSBidWZmZXJzXG4gICAqIGNhbiBjb250aW51ZSB0byBncm93IHdoaWxlIGIyV29ybGQncyBibG9jayBhbGxvY2F0b3Igc3RpbGxcbiAgICogaGFzIG1lbW9yeS5cbiAgICpcbiAgICogTm90ZTogSWYgeW91IHRyeSB0byBDcmVhdGVQYXJ0aWNsZSgpIHdpdGggbW9yZSB0aGFuIHRoaXNcbiAgICogY291bnQsIGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4IGlzIHJldHVybmVkIHVubGVzc1xuICAgKiBTZXREZXN0cnVjdGlvbkJ5QWdlKCkgaXMgdXNlZCB0byBlbmFibGUgdGhlIGRlc3RydWN0aW9uIG9mXG4gICAqIHRoZSBvbGRlc3QgcGFydGljbGVzIGluIHRoZSBzeXN0ZW0uXG4gICAqL1xuICBwdWJsaWMgU2V0TWF4UGFydGljbGVDb3VudChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9jb3VudCA8PSBjb3VudCk7XG4gICAgdGhpcy5tX2RlZi5tYXhDb3VudCA9IGNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZXhpc3RpbmcgcGFydGljbGUgZmxhZ3MuXG4gICAqL1xuICBwdWJsaWMgR2V0QWxsUGFydGljbGVGbGFncygpOiBiMlBhcnRpY2xlRmxhZyB7XG4gICAgcmV0dXJuIHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZXhpc3RpbmcgcGFydGljbGUgZ3JvdXAgZmxhZ3MuXG4gICAqL1xuICBwdWJsaWMgR2V0QWxsR3JvdXBGbGFncygpOiBiMlBhcnRpY2xlR3JvdXBGbGFnIHtcbiAgICByZXR1cm4gdGhpcy5tX2FsbEdyb3VwRmxhZ3M7XG4gIH1cblxuICAvKipcbiAgICogUGF1c2Ugb3IgdW5wYXVzZSB0aGUgcGFydGljbGUgc3lzdGVtLiBXaGVuIHBhdXNlZCxcbiAgICogYjJXb3JsZDo6U3RlcCgpIHNraXBzIG92ZXIgdGhpcyBwYXJ0aWNsZSBzeXN0ZW0uIEFsbFxuICAgKiBiMlBhcnRpY2xlU3lzdGVtIGZ1bmN0aW9uIGNhbGxzIHN0aWxsIHdvcmsuXG4gICAqXG4gICAqIEBwYXJhbSBwYXVzZWQgcGF1c2VkIGlzIHRydWUgdG8gcGF1c2UsIGZhbHNlIHRvIHVuLXBhdXNlLlxuICAgKi9cbiAgcHVibGljIFNldFBhdXNlZChwYXVzZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1fcGF1c2VkID0gcGF1c2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxseSwgdHJ1ZSwgdGhlbiwgdGhlIGxhc3QgdmFsdWUgcGFzc2VkIGludG9cbiAgICogU2V0UGF1c2VkKCkuXG4gICAqXG4gICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgcGFydGljbGUgc3lzdGVtIGlzIGJlaW5nIHVwZGF0ZWQgaW4gYjJXb3JsZDo6U3RlcCgpLlxuICAgKi9cbiAgcHVibGljIEdldFBhdXNlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tX3BhdXNlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2UgdGhlIHBhcnRpY2xlIGRlbnNpdHkuXG4gICAqXG4gICAqIFBhcnRpY2xlIGRlbnNpdHkgYWZmZWN0cyB0aGUgbWFzcyBvZiB0aGUgcGFydGljbGVzLCB3aGljaCBpblxuICAgKiB0dXJuIGFmZmVjdHMgaG93IHRoZSBwYXJ0aWNsZXMgaW50ZXJhY3Qgd2l0aCBiMkJvZGllcy4gTm90ZVxuICAgKiB0aGF0IHRoZSBkZW5zaXR5IGRvZXMgbm90IGFmZmVjdCBob3cgdGhlIHBhcnRpY2xlcyBpbnRlcmFjdFxuICAgKiB3aXRoIGVhY2ggb3RoZXIuXG4gICAqL1xuICBwdWJsaWMgU2V0RGVuc2l0eShkZW5zaXR5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1fZGVmLmRlbnNpdHkgPSBkZW5zaXR5O1xuICAgIHRoaXMubV9pbnZlcnNlRGVuc2l0eSA9IDEgLyB0aGlzLm1fZGVmLmRlbnNpdHk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBwYXJ0aWNsZSBkZW5zaXR5LlxuICAgKi9cbiAgcHVibGljIEdldERlbnNpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2RlZi5kZW5zaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgcGFydGljbGUgZ3Jhdml0eSBzY2FsZS4gQWRqdXN0cyB0aGUgZWZmZWN0IG9mIHRoZVxuICAgKiBnbG9iYWwgZ3Jhdml0eSB2ZWN0b3Igb24gcGFydGljbGVzLlxuICAgKi9cbiAgcHVibGljIFNldEdyYXZpdHlTY2FsZShncmF2aXR5U2NhbGU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9kZWYuZ3Jhdml0eVNjYWxlID0gZ3Jhdml0eVNjYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGFydGljbGUgZ3Jhdml0eSBzY2FsZS5cbiAgICovXG4gIHB1YmxpYyBHZXRHcmF2aXR5U2NhbGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2RlZi5ncmF2aXR5U2NhbGU7XG4gIH1cblxuICAvKipcbiAgICogRGFtcGluZyBpcyB1c2VkIHRvIHJlZHVjZSB0aGUgdmVsb2NpdHkgb2YgcGFydGljbGVzLiBUaGVcbiAgICogZGFtcGluZyBwYXJhbWV0ZXIgY2FuIGJlIGxhcmdlciB0aGFuIDEuMGYgYnV0IHRoZSBkYW1waW5nXG4gICAqIGVmZmVjdCBiZWNvbWVzIHNlbnNpdGl2ZSB0byB0aGUgdGltZSBzdGVwIHdoZW4gdGhlIGRhbXBpbmdcbiAgICogcGFyYW1ldGVyIGlzIGxhcmdlLlxuICAgKi9cbiAgcHVibGljIFNldERhbXBpbmcoZGFtcGluZzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX2RlZi5kYW1waW5nU3RyZW5ndGggPSBkYW1waW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkYW1waW5nIGZvciBwYXJ0aWNsZXNcbiAgICovXG4gIHB1YmxpYyBHZXREYW1waW5nKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9kZWYuZGFtcGluZ1N0cmVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgd2hlbiBjYWxjdWxhdGluZyB0aGUgc3RhdGljXG4gICAqIHByZXNzdXJlIG9mIHBhcnRpY2xlcy4gQnkgZGVmYXVsdCwgOCBpdGVyYXRpb25zLiBZb3UgY2FuXG4gICAqIHJlZHVjZSB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgZG93biB0byAxIGluIHNvbWUgc2l0dWF0aW9ucyxcbiAgICogYnV0IHRoaXMgbWF5IGNhdXNlIGluc3RhYmlsaXRpZXMgd2hlbiBtYW55IHBhcnRpY2xlcyBjb21lXG4gICAqIHRvZ2V0aGVyLiBJZiB5b3Ugc2VlIHBhcnRpY2xlcyBwb3BwaW5nIGF3YXkgZnJvbSBlYWNoIG90aGVyXG4gICAqIGxpa2UgcG9wY29ybiwgeW91IG1heSBoYXZlIHRvIGluY3JlYXNlIHRoZSBudW1iZXIgb2ZcbiAgICogaXRlcmF0aW9ucy5cbiAgICpcbiAgICogRm9yIGEgZGVzY3JpcHRpb24gb2Ygc3RhdGljIHByZXNzdXJlLCBzZWVcbiAgICogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGF0aWNfcHJlc3N1cmUjU3RhdGljX3ByZXNzdXJlX2luX2ZsdWlkX2R5bmFtaWNzXG4gICAqL1xuICBwdWJsaWMgU2V0U3RhdGljUHJlc3N1cmVJdGVyYXRpb25zKGl0ZXJhdGlvbnM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9kZWYuc3RhdGljUHJlc3N1cmVJdGVyYXRpb25zID0gaXRlcmF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGZvciBzdGF0aWMgcHJlc3N1cmUgb2ZcbiAgICogcGFydGljbGVzLlxuICAgKi9cbiAgcHVibGljIEdldFN0YXRpY1ByZXNzdXJlSXRlcmF0aW9ucygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fZGVmLnN0YXRpY1ByZXNzdXJlSXRlcmF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2UgdGhlIHBhcnRpY2xlIHJhZGl1cy5cbiAgICpcbiAgICogWW91IHNob3VsZCBzZXQgdGhpcyBvbmx5IG9uY2UsIG9uIHdvcmxkIHN0YXJ0LlxuICAgKiBJZiB5b3UgY2hhbmdlIHRoZSByYWRpdXMgZHVyaW5nIGV4ZWN1dGlvbiwgZXhpc3RpbmcgcGFydGljbGVzXG4gICAqIG1heSBleHBsb2RlLCBzaHJpbmssIG9yIGJlaGF2ZSB1bmV4cGVjdGVkbHkuXG4gICAqL1xuICBwdWJsaWMgU2V0UmFkaXVzKHJhZGl1czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5tX3BhcnRpY2xlRGlhbWV0ZXIgPSAyICogcmFkaXVzO1xuICAgIHRoaXMubV9zcXVhcmVkRGlhbWV0ZXIgPSB0aGlzLm1fcGFydGljbGVEaWFtZXRlciAqIHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyO1xuICAgIHRoaXMubV9pbnZlcnNlRGlhbWV0ZXIgPSAxIC8gdGhpcy5tX3BhcnRpY2xlRGlhbWV0ZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBwYXJ0aWNsZSByYWRpdXMuXG4gICAqL1xuICBwdWJsaWMgR2V0UmFkaXVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyIC8gMjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBvc2l0aW9uIG9mIGVhY2ggcGFydGljbGVcbiAgICpcbiAgICogQXJyYXkgaXMgbGVuZ3RoIEdldFBhcnRpY2xlQ291bnQoKVxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBwb2ludGVyIHRvIHRoZSBoZWFkIG9mIHRoZSBwYXJ0aWNsZSBwb3NpdGlvbnMgYXJyYXkuXG4gICAqL1xuICBwdWJsaWMgR2V0UG9zaXRpb25CdWZmZXIoKTogYjJWZWMyW10ge1xuICAgIHJldHVybiB0aGlzLm1fcG9zaXRpb25CdWZmZXIuZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZlbG9jaXR5IG9mIGVhY2ggcGFydGljbGVcbiAgICpcbiAgICogQXJyYXkgaXMgbGVuZ3RoIEdldFBhcnRpY2xlQ291bnQoKVxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBwb2ludGVyIHRvIHRoZSBoZWFkIG9mIHRoZSBwYXJ0aWNsZSB2ZWxvY2l0aWVzIGFycmF5LlxuICAgKi9cbiAgcHVibGljIEdldFZlbG9jaXR5QnVmZmVyKCk6IGIyVmVjMltdIHtcbiAgICByZXR1cm4gdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb2xvciBvZiBlYWNoIHBhcnRpY2xlXG4gICAqXG4gICAqIEFycmF5IGlzIGxlbmd0aCBHZXRQYXJ0aWNsZUNvdW50KClcbiAgICpcbiAgICogQHJldHVybiB0aGUgcG9pbnRlciB0byB0aGUgaGVhZCBvZiB0aGUgcGFydGljbGUgY29sb3JzIGFycmF5LlxuICAgKi9cbiAgcHVibGljIEdldENvbG9yQnVmZmVyKCk6IGIyQ29sb3JbXSB7XG4gICAgdGhpcy5tX2NvbG9yQnVmZmVyLmRhdGEgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX2NvbG9yQnVmZmVyLmRhdGEpO1xuICAgIHJldHVybiB0aGlzLm1fY29sb3JCdWZmZXIuZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhcnRpY2xlLWdyb3VwIG9mIGVhY2ggcGFydGljbGUuXG4gICAqXG4gICAqIEFycmF5IGlzIGxlbmd0aCBHZXRQYXJ0aWNsZUNvdW50KClcbiAgICpcbiAgICogQHJldHVybiB0aGUgcG9pbnRlciB0byB0aGUgaGVhZCBvZiB0aGUgcGFydGljbGUgZ3JvdXAgYXJyYXkuXG4gICAqL1xuICBwdWJsaWMgR2V0R3JvdXBCdWZmZXIoKTogQXJyYXk8YjJQYXJ0aWNsZUdyb3VwIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLm1fZ3JvdXBCdWZmZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWlnaHQgb2YgZWFjaCBwYXJ0aWNsZVxuICAgKlxuICAgKiBBcnJheSBpcyBsZW5ndGggR2V0UGFydGljbGVDb3VudCgpXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHBvaW50ZXIgdG8gdGhlIGhlYWQgb2YgdGhlIHBhcnRpY2xlIHBvc2l0aW9ucyBhcnJheS5cbiAgICovXG4gIHB1YmxpYyBHZXRXZWlnaHRCdWZmZXIoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLm1fd2VpZ2h0QnVmZmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdXNlci1zcGVjaWZpZWQgZGF0YSBvZiBlYWNoIHBhcnRpY2xlLlxuICAgKlxuICAgKiBBcnJheSBpcyBsZW5ndGggR2V0UGFydGljbGVDb3VudCgpXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHBvaW50ZXIgdG8gdGhlIGhlYWQgb2YgdGhlIHBhcnRpY2xlIHVzZXItZGF0YSBhcnJheS5cbiAgICovXG4gIHB1YmxpYyBHZXRVc2VyRGF0YUJ1ZmZlcjxUPigpOiBUW10ge1xuICAgIHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhID0gdGhpcy5SZXF1ZXN0QnVmZmVyKHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhKTtcbiAgICByZXR1cm4gdGhpcy5tX3VzZXJEYXRhQnVmZmVyLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBmbGFncyBmb3IgZWFjaCBwYXJ0aWNsZS4gU2VlIHRoZSBiMlBhcnRpY2xlRmxhZyBlbnVtLlxuICAgKlxuICAgKiBBcnJheSBpcyBsZW5ndGggR2V0UGFydGljbGVDb3VudCgpXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHBvaW50ZXIgdG8gdGhlIGhlYWQgb2YgdGhlIHBhcnRpY2xlLWZsYWdzIGFycmF5LlxuICAgKi9cbiAgcHVibGljIEdldEZsYWdzQnVmZmVyKCk6IGIyUGFydGljbGVGbGFnW10ge1xuICAgIHJldHVybiB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZmxhZ3MgZm9yIGEgcGFydGljbGUuIFNlZSB0aGUgYjJQYXJ0aWNsZUZsYWcgZW51bS5cbiAgICovXG4gIHB1YmxpYyBTZXRQYXJ0aWNsZUZsYWdzKGluZGV4OiBudW1iZXIsIG5ld0ZsYWdzOiBiMlBhcnRpY2xlRmxhZyk6IHZvaWQge1xuICAgIGNvbnN0IG9sZEZsYWdzID0gdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbaW5kZXhdO1xuICAgIGlmIChvbGRGbGFncyAmIH5uZXdGbGFncykge1xuICAgICAgLy8gSWYgYW55IGZsYWdzIG1pZ2h0IGJlIHJlbW92ZWRcbiAgICAgIHRoaXMubV9uZWVkc1VwZGF0ZUFsbFBhcnRpY2xlRmxhZ3MgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAofnRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgbmV3RmxhZ3MpIHtcbiAgICAgIC8vIElmIGFueSBmbGFncyB3ZXJlIGFkZGVkXG4gICAgICBpZiAobmV3RmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl90ZW5zaWxlUGFydGljbGUpIHtcbiAgICAgICAgdGhpcy5tX2FjY3VtdWxhdGlvbjJCdWZmZXIgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX2FjY3VtdWxhdGlvbjJCdWZmZXIpO1xuICAgICAgfVxuICAgICAgaWYgKG5ld0ZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfY29sb3JNaXhpbmdQYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLm1fY29sb3JCdWZmZXIuZGF0YSA9IHRoaXMuUmVxdWVzdEJ1ZmZlcih0aGlzLm1fY29sb3JCdWZmZXIuZGF0YSk7XG4gICAgICB9XG4gICAgICB0aGlzLm1fYWxsUGFydGljbGVGbGFncyB8PSBuZXdGbGFncztcbiAgICB9XG4gICAgdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbaW5kZXhdID0gbmV3RmxhZ3M7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZsYWdzIGZvciBhIHBhcnRpY2xlLiBTZWUgdGhlIGIyUGFydGljbGVGbGFnIGVudW0uXG4gICAqL1xuICBwdWJsaWMgR2V0UGFydGljbGVGbGFncyhpbmRleDogbnVtYmVyKTogYjJQYXJ0aWNsZUZsYWcge1xuICAgIHJldHVybiB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpbmRleF07XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFuIGV4dGVybmFsIGJ1ZmZlciBmb3IgcGFydGljbGUgZGF0YS5cbiAgICpcbiAgICogTm9ybWFsbHksIHRoZSBiMldvcmxkJ3MgYmxvY2sgYWxsb2NhdG9yIGlzIHVzZWQgZm9yIHBhcnRpY2xlXG4gICAqIGRhdGEuIEhvd2V2ZXIsIHNvbWV0aW1lcyB5b3UgbWF5IGhhdmUgYW4gT3BlbkdMIG9yIEphdmFcbiAgICogYnVmZmVyIGZvciBwYXJ0aWNsZSBkYXRhLiBUbyBhdm9pZCBkYXRhIGR1cGxpY2F0aW9uLCB5b3UgbWF5XG4gICAqIHN1cHBseSB0aGlzIGV4dGVybmFsIGJ1ZmZlci5cbiAgICpcbiAgICogTm90ZSB0aGF0LCB3aGVuIGIyV29ybGQncyBibG9jayBhbGxvY2F0b3IgaXMgdXNlZCwgdGhlXG4gICAqIHBhcnRpY2xlIGRhdGEgYnVmZmVycyBjYW4gZ3JvdyBhcyByZXF1aXJlZC4gSG93ZXZlciwgd2hlblxuICAgKiBleHRlcm5hbCBidWZmZXJzIGFyZSB1c2VkLCB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGFydGljbGVzIGlzXG4gICAqIGNsYW1wZWQgdG8gdGhlIHNpemUgb2YgdGhlIHNtYWxsZXN0IGV4dGVybmFsIGJ1ZmZlci5cbiAgICpcbiAgICogQHBhcmFtIGJ1ZmZlciBhIHBvaW50ZXIgdG8gYSBibG9jayBvZiBtZW1vcnkuXG4gICAqIEBwYXJhbSBjYXBhY2l0eSB0aGUgbnVtYmVyIG9mIHZhbHVlcyBpbiB0aGUgYmxvY2suXG4gICAqL1xuICBwdWJsaWMgU2V0RmxhZ3NCdWZmZXIoYnVmZmVyOiBiMlBhcnRpY2xlRmxhZ1tdKTogdm9pZCB7XG4gICAgdGhpcy5TZXRVc2VyT3ZlcnJpZGFibGVCdWZmZXIodGhpcy5tX2ZsYWdzQnVmZmVyLCBidWZmZXIpO1xuICB9XG5cbiAgcHVibGljIFNldFBvc2l0aW9uQnVmZmVyKGJ1ZmZlcjogYjJWZWMyW10gfCBGbG9hdDMyQXJyYXkpOiB2b2lkIHtcbiAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7XG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCAlIDIgIT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgIGNvbnN0IGNvdW50OiBudW1iZXIgPSBidWZmZXIubGVuZ3RoIC8gMjtcbiAgICAgIGNvbnN0IGFycmF5OiBiMlR5cGVkVmVjMltdID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICBhcnJheVtpXSA9IG5ldyBiMlR5cGVkVmVjMihidWZmZXIuc3ViYXJyYXkoaSAqIDIsIGkgKiAyICsgMikpO1xuICAgICAgfVxuICAgICAgYnVmZmVyID0gYXJyYXk7XG4gICAgfVxuICAgIHRoaXMuU2V0VXNlck92ZXJyaWRhYmxlQnVmZmVyKHRoaXMubV9wb3NpdGlvbkJ1ZmZlciwgYnVmZmVyKTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRWZWxvY2l0eUJ1ZmZlcihidWZmZXI6IGIyVHlwZWRWZWMyW10gfCBGbG9hdDMyQXJyYXkpOiB2b2lkIHtcbiAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7XG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCAlIDIgIT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgIGNvbnN0IGNvdW50OiBudW1iZXIgPSBidWZmZXIubGVuZ3RoIC8gMjtcbiAgICAgIGNvbnN0IGFycmF5OiBiMlR5cGVkVmVjMltdID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICBhcnJheVtpXSA9IG5ldyBiMlR5cGVkVmVjMihidWZmZXIuc3ViYXJyYXkoaSAqIDIsIGkgKiAyICsgMikpO1xuICAgICAgfVxuICAgICAgYnVmZmVyID0gYXJyYXk7XG4gICAgfVxuICAgIHRoaXMuU2V0VXNlck92ZXJyaWRhYmxlQnVmZmVyKHRoaXMubV92ZWxvY2l0eUJ1ZmZlciwgYnVmZmVyKTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRDb2xvckJ1ZmZlcihidWZmZXI6IGIyQ29sb3JbXSB8IEZsb2F0MzJBcnJheSk6IHZvaWQge1xuICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoICUgNCAhPT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgICAgY29uc3QgY291bnQ6IG51bWJlciA9IGJ1ZmZlci5sZW5ndGggLyA0O1xuICAgICAgY29uc3QgYXJyYXk6IGIyQ29sb3JbXSA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgYXJyYXlbaV0gPSBuZXcgYjJUeXBlZENvbG9yKGJ1ZmZlci5zdWJhcnJheShpICogNCwgaSAqIDQgKyA0KSk7XG4gICAgICB9XG4gICAgICBidWZmZXIgPSBhcnJheTtcbiAgICB9XG4gICAgdGhpcy5TZXRVc2VyT3ZlcnJpZGFibGVCdWZmZXIodGhpcy5tX2NvbG9yQnVmZmVyLCBidWZmZXIpO1xuICB9XG5cbiAgcHVibGljIFNldFVzZXJEYXRhQnVmZmVyPFQ+KGJ1ZmZlcjogVFtdKTogdm9pZCB7XG4gICAgdGhpcy5TZXRVc2VyT3ZlcnJpZGFibGVCdWZmZXIodGhpcy5tX3VzZXJEYXRhQnVmZmVyLCBidWZmZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb250YWN0cyBiZXR3ZWVuIHBhcnRpY2xlc1xuICAgKiBDb250YWN0IGRhdGEgY2FuIGJlIHVzZWQgZm9yIG1hbnkgcmVhc29ucywgZm9yIGV4YW1wbGUgdG9cbiAgICogdHJpZ2dlciByZW5kZXJpbmcgb3IgYXVkaW8gZWZmZWN0cy5cbiAgICovXG4gIHB1YmxpYyBHZXRDb250YWN0cygpOiBiMlBhcnRpY2xlQ29udGFjdFtdIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRDb250YWN0Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbnRhY3RzIGJldHdlZW4gcGFydGljbGVzIGFuZCBib2RpZXNcbiAgICpcbiAgICogQ29udGFjdCBkYXRhIGNhbiBiZSB1c2VkIGZvciBtYW55IHJlYXNvbnMsIGZvciBleGFtcGxlIHRvXG4gICAqIHRyaWdnZXIgcmVuZGVyaW5nIG9yIGF1ZGlvIGVmZmVjdHMuXG4gICAqL1xuICBwdWJsaWMgR2V0Qm9keUNvbnRhY3RzKCk6IGIyUGFydGljbGVCb2R5Q29udGFjdFtdIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmRhdGE7XG4gIH1cblxuICBwdWJsaWMgR2V0Qm9keUNvbnRhY3RDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuY291bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFycmF5IG9mIHBhcnRpY2xlIHBhaXJzLiBUaGUgcGFydGljbGVzIGluIGEgcGFpcjpcbiAgICogICAoMSkgYXJlIGNvbnRhY3RpbmcsXG4gICAqICAgKDIpIGFyZSBpbiB0aGUgc2FtZSBwYXJ0aWNsZSBncm91cCxcbiAgICogICAoMykgYXJlIHBhcnQgb2YgYSByaWdpZCBwYXJ0aWNsZSBncm91cCwgb3IgYXJlIHNwcmluZywgZWxhc3RpYyxcbiAgICogICAgICAgb3Igd2FsbCBwYXJ0aWNsZXMuXG4gICAqICAgKDQpIGhhdmUgYXQgbGVhc3Qgb25lIHBhcnRpY2xlIHRoYXQgaXMgYSBzcHJpbmcgb3IgYmFycmllclxuICAgKiAgICAgICBwYXJ0aWNsZSAoaS5lLiBvbmUgb2YgdGhlIHR5cGVzIGluIGtfcGFpckZsYWdzKSxcbiAgICogICAoNSkgaGF2ZSBhdCBsZWFzdCBvbmUgcGFydGljbGUgdGhhdCByZXR1cm5zIHRydWUgZm9yXG4gICAqICAgICAgIENvbm5lY3Rpb25GaWx0ZXI6OklzTmVjZXNzYXJ5LFxuICAgKiAgICg2KSBhcmUgbm90IHpvbWJpZSBwYXJ0aWNsZXMuXG4gICAqXG4gICAqIEVzc2VudGlhbGx5LCB0aGlzIGlzIGFuIGFycmF5IG9mIHNwcmluZyBvciBiYXJyaWVyIHBhcnRpY2xlc1xuICAgKiB0aGF0IGFyZSBpbnRlcmFjdGluZy4gVGhlIGFycmF5IGlzIHNvcnRlZCBieSBiMlBhcnRpY2xlUGFpcidzXG4gICAqIGluZGV4QSwgYW5kIHRoZW4gaW5kZXhCLiBUaGVyZSBhcmUgbm8gZHVwbGljYXRlIGVudHJpZXMuXG4gICAqL1xuICBwdWJsaWMgR2V0UGFpcnMoKTogYjJQYXJ0aWNsZVBhaXJbXSB7XG4gICAgcmV0dXJuIHRoaXMubV9wYWlyQnVmZmVyLmRhdGE7XG4gIH1cblxuICBwdWJsaWMgR2V0UGFpckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9wYWlyQnVmZmVyLmNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhcnJheSBvZiBwYXJ0aWNsZSB0cmlhZHMuIFRoZSBwYXJ0aWNsZXMgaW4gYSB0cmlhZDpcbiAgICogICAoMSkgYXJlIGluIHRoZSBzYW1lIHBhcnRpY2xlIGdyb3VwLFxuICAgKiAgICgyKSBhcmUgaW4gYSBWb3Jvbm9pIHRyaWFuZ2xlIHRvZ2V0aGVyLFxuICAgKiAgICgzKSBhcmUgd2l0aGluIGIyX21heFRyaWFkRGlzdGFuY2UgcGFydGljbGUgZGlhbWV0ZXJzIG9mIGVhY2hcbiAgICogICAgICAgb3RoZXIsXG4gICAqICAgKDQpIHJldHVybiB0cnVlIGZvciBDb25uZWN0aW9uRmlsdGVyOjpTaG91bGRDcmVhdGVUcmlhZFxuICAgKiAgICg1KSBoYXZlIGF0IGxlYXN0IG9uZSBwYXJ0aWNsZSBvZiB0eXBlIGVsYXN0aWMgKGkuZS4gb25lIG9mIHRoZVxuICAgKiAgICAgICB0eXBlcyBpbiBrX3RyaWFkRmxhZ3MpLFxuICAgKiAgICg2KSBhcmUgcGFydCBvZiBhIHJpZ2lkIHBhcnRpY2xlIGdyb3VwLCBvciBhcmUgc3ByaW5nLCBlbGFzdGljLFxuICAgKiAgICAgICBvciB3YWxsIHBhcnRpY2xlcy5cbiAgICogICAoNykgYXJlIG5vdCB6b21iaWUgcGFydGljbGVzLlxuICAgKlxuICAgKiBFc3NlbnRpYWxseSwgdGhpcyBpcyBhbiBhcnJheSBvZiBlbGFzdGljIHBhcnRpY2xlcyB0aGF0IGFyZVxuICAgKiBpbnRlcmFjdGluZy4gVGhlIGFycmF5IGlzIHNvcnRlZCBieSBiMlBhcnRpY2xlVHJpYWQncyBpbmRleEEsXG4gICAqIHRoZW4gaW5kZXhCLCB0aGVuIGluZGV4Qy4gVGhlcmUgYXJlIG5vIGR1cGxpY2F0ZSBlbnRyaWVzLlxuICAgKi9cbiAgcHVibGljIEdldFRyaWFkcygpOiBiMlBhcnRpY2xlVHJpYWRbXSB7XG4gICAgcmV0dXJuIHRoaXMubV90cmlhZEJ1ZmZlci5kYXRhO1xuICB9XG5cbiAgcHVibGljIEdldFRyaWFkQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tX3RyaWFkQnVmZmVyLmNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhbiBvcHRpb25hbCB0aHJlc2hvbGQgZm9yIHRoZSBtYXhpbXVtIG51bWJlciBvZlxuICAgKiBjb25zZWN1dGl2ZSBwYXJ0aWNsZSBpdGVyYXRpb25zIHRoYXQgYSBwYXJ0aWNsZSBtYXkgY29udGFjdFxuICAgKiBtdWx0aXBsZSBib2RpZXMgYmVmb3JlIGl0IGlzIGNvbnNpZGVyZWQgYSBjYW5kaWRhdGUgZm9yIGJlaW5nXG4gICAqIFwic3R1Y2tcIi4gU2V0dGluZyB0byB6ZXJvIG9yIGxlc3MgZGlzYWJsZXMuXG4gICAqL1xuICBwdWJsaWMgU2V0U3R1Y2tUaHJlc2hvbGQoc3RlcHM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubV9zdHVja1RocmVzaG9sZCA9IHN0ZXBzO1xuXG4gICAgaWYgKHN0ZXBzID4gMCkge1xuICAgICAgdGhpcy5tX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YSA9IHRoaXMuUmVxdWVzdEJ1ZmZlcih0aGlzLm1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlci5kYXRhKTtcbiAgICAgIHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGEgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX2JvZHlDb250YWN0Q291bnRCdWZmZXIuZGF0YSk7XG4gICAgICB0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSA9IHRoaXMuUmVxdWVzdEJ1ZmZlcih0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwb3RlbnRpYWxseSBzdHVjayBwYXJ0aWNsZXMgZnJvbSB0aGUgbGFzdCBzdGVwOyB0aGUgdXNlclxuICAgKiBtdXN0IGRlY2lkZSBpZiB0aGV5IGFyZSBzdHVjayBvciBub3QsIGFuZCBpZiBzbywgZGVsZXRlIG9yXG4gICAqIG1vdmUgdGhlbVxuICAgKi9cbiAgcHVibGljIEdldFN0dWNrQ2FuZGlkYXRlcygpOiBudW1iZXJbXSB7XG4gICAgLy8vcmV0dXJuIG1fc3R1Y2tQYXJ0aWNsZUJ1ZmZlci5EYXRhKCk7XG4gICAgcmV0dXJuIHRoaXMubV9zdHVja1BhcnRpY2xlQnVmZmVyLkRhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG51bWJlciBvZiBzdHVjayBwYXJ0aWNsZSBjYW5kaWRhdGVzIGZyb20gdGhlIGxhc3RcbiAgICogc3RlcC5cbiAgICovXG4gIHB1YmxpYyBHZXRTdHVja0NhbmRpZGF0ZUNvdW50KCk6IG51bWJlciB7XG4gICAgLy8vcmV0dXJuIG1fc3R1Y2tQYXJ0aWNsZUJ1ZmZlci5HZXRDb3VudCgpO1xuICAgIHJldHVybiB0aGlzLm1fc3R1Y2tQYXJ0aWNsZUJ1ZmZlci5HZXRDb3VudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIGtpbmV0aWMgZW5lcmd5IHRoYXQgY2FuIGJlIGxvc3QgYnkgZGFtcGluZyBmb3JjZVxuICAgKi9cbiAgcHVibGljIENvbXB1dGVDb2xsaXNpb25FbmVyZ3koKTogbnVtYmVyIHtcbiAgICBjb25zdCBzX3YgPSBiMlBhcnRpY2xlU3lzdGVtLkNvbXB1dGVDb2xsaXNpb25FbmVyZ3lfc192O1xuICAgIGNvbnN0IHZlbF9kYXRhID0gdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGE7XG4gICAgbGV0IHN1bV92MiA9IDA7XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4QTtcbiAgICAgIGNvbnN0IGIgPSBjb250YWN0LmluZGV4QjtcbiAgICAgIGNvbnN0IG4gPSBjb250YWN0Lm5vcm1hbDtcbiAgICAgIC8vL2IyVmVjMiB2ID0gbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2JdIC0gbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2FdO1xuICAgICAgY29uc3QgdiA9IGIyVmVjMi5TdWJWVih2ZWxfZGF0YVtiXSwgdmVsX2RhdGFbYV0sIHNfdik7XG4gICAgICBjb25zdCB2biA9IGIyVmVjMi5Eb3RWVih2LCBuKTtcbiAgICAgIGlmICh2biA8IDApIHtcbiAgICAgICAgc3VtX3YyICs9IHZuICogdm47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwLjUgKiB0aGlzLkdldFBhcnRpY2xlTWFzcygpICogc3VtX3YyO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ29tcHV0ZUNvbGxpc2lvbkVuZXJneV9zX3YgPSBuZXcgYjJWZWMyKCk7XG5cbiAgLyoqXG4gICAqIFNldCBzdHJpY3QgUGFydGljbGUvQm9keSBjb250YWN0IGNoZWNrLlxuICAgKlxuICAgKiBUaGlzIGlzIGFuIG9wdGlvbiB0aGF0IHdpbGwgaGVscCBlbnN1cmUgY29ycmVjdCBiZWhhdmlvciBpZlxuICAgKiB0aGVyZSBhcmUgY29ybmVycyBpbiB0aGUgd29ybGQgbW9kZWwgd2hlcmUgUGFydGljbGUvQm9keVxuICAgKiBjb250YWN0IGlzIGFtYmlndW91cy4gVGhpcyBvcHRpb24gc2NhbGVzIGF0IG4qbG9nKG4pIG9mIHRoZVxuICAgKiBudW1iZXIgb2YgUGFydGljbGUvQm9keSBjb250YWN0cywgc28gaXQgaXMgYmVzdCB0byBvbmx5XG4gICAqIGVuYWJsZSBpZiBpdCBpcyBuZWNlc3NhcnkgZm9yIHlvdXIgZ2VvbWV0cnkuIEVuYWJsZSBpZiB5b3VcbiAgICogc2VlIHN0cmFuZ2UgcGFydGljbGUgYmVoYXZpb3IgYXJvdW5kIGIyQm9keSBpbnRlcnNlY3Rpb25zLlxuICAgKi9cbiAgcHVibGljIFNldFN0cmljdENvbnRhY3RDaGVjayhlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5tX2RlZi5zdHJpY3RDb250YWN0Q2hlY2sgPSBlbmFibGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhdHVzIG9mIHRoZSBzdHJpY3QgY29udGFjdCBjaGVjay5cbiAgICovXG4gIHB1YmxpYyBHZXRTdHJpY3RDb250YWN0Q2hlY2soKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9kZWYuc3RyaWN0Q29udGFjdENoZWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbGlmZXRpbWUgKGluIHNlY29uZHMpIG9mIGEgcGFydGljbGUgcmVsYXRpdmUgdG8gdGhlXG4gICAqIGN1cnJlbnQgdGltZS4gIEEgbGlmZXRpbWUgb2YgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDAuMGZcbiAgICogcmVzdWx0cyBpbiB0aGUgcGFydGljbGUgbGl2aW5nIGZvcmV2ZXIgdW50aWwgaXQncyBtYW51YWxseVxuICAgKiBkZXN0cm95ZWQgYnkgdGhlIGFwcGxpY2F0aW9uLlxuICAgKi9cbiAgcHVibGljIFNldFBhcnRpY2xlTGlmZXRpbWUoaW5kZXg6IG51bWJlciwgbGlmZXRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLlZhbGlkYXRlUGFydGljbGVJbmRleChpbmRleCkpO1xuICAgIGNvbnN0IGluaXRpYWxpemVFeHBpcmF0aW9uVGltZXMgPSB0aGlzLm1faW5kZXhCeUV4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEgPT09IG51bGw7XG4gICAgdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEpO1xuICAgIHRoaXMubV9pbmRleEJ5RXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSA9IHRoaXMuUmVxdWVzdEJ1ZmZlcih0aGlzLm1faW5kZXhCeUV4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgaW52ZXJzZSBtYXBwaW5nIGJ1ZmZlci5cbiAgICBpZiAoaW5pdGlhbGl6ZUV4cGlyYXRpb25UaW1lcykge1xuICAgICAgY29uc3QgcGFydGljbGVDb3VudCA9IHRoaXMuR2V0UGFydGljbGVDb3VudCgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyArK2kpIHtcbiAgICAgICAgdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhW2ldID0gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8vY29uc3QgaW50MzIgcXVhbnRpemVkTGlmZXRpbWUgPSAoaW50MzIpKGxpZmV0aW1lIC8gbV9kZWYubGlmZXRpbWVHcmFudWxhcml0eSk7XG4gICAgY29uc3QgcXVhbnRpemVkTGlmZXRpbWUgPSBsaWZldGltZSAvIHRoaXMubV9kZWYubGlmZXRpbWVHcmFudWxhcml0eTtcbiAgICAvLyBVc2UgYSBuZWdhdGl2ZSBsaWZldGltZSBzbyB0aGF0IGl0J3MgcG9zc2libGUgdG8gdHJhY2sgd2hpY2hcbiAgICAvLyBvZiB0aGUgaW5maW5pdGUgbGlmZXRpbWUgcGFydGljbGVzIGFyZSBvbGRlci5cbiAgICBjb25zdCBuZXdFeHBpcmF0aW9uVGltZSA9IHF1YW50aXplZExpZmV0aW1lID4gMC4wID8gdGhpcy5HZXRRdWFudGl6ZWRUaW1lRWxhcHNlZCgpICsgcXVhbnRpemVkTGlmZXRpbWUgOiBxdWFudGl6ZWRMaWZldGltZTtcbiAgICBpZiAobmV3RXhwaXJhdGlvblRpbWUgIT09IHRoaXMubV9leHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhW2luZGV4XSkge1xuICAgICAgdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGFbaW5kZXhdID0gbmV3RXhwaXJhdGlvblRpbWU7XG4gICAgICB0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXJSZXF1aXJlc1NvcnRpbmcgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpZmV0aW1lIChpbiBzZWNvbmRzKSBvZiBhIHBhcnRpY2xlIHJlbGF0aXZlIHRvIHRoZVxuICAgKiBjdXJyZW50IHRpbWUuICBBIHZhbHVlID4gMC4wZiBpcyByZXR1cm5lZCBpZiB0aGUgcGFydGljbGUgaXNcbiAgICogc2NoZWR1bGVkIHRvIGJlIGRlc3Ryb3llZCBpbiB0aGUgZnV0dXJlLCB2YWx1ZXMgPD0gMC4wZlxuICAgKiBpbmRpY2F0ZSB0aGUgcGFydGljbGUgaGFzIGFuIGluZmluaXRlIGxpZmV0aW1lLlxuICAgKi9cbiAgcHVibGljIEdldFBhcnRpY2xlTGlmZXRpbWUoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMuVmFsaWRhdGVQYXJ0aWNsZUluZGV4KGluZGV4KSk7XG4gICAgcmV0dXJuIHRoaXMuRXhwaXJhdGlvblRpbWVUb0xpZmV0aW1lKHRoaXMuR2V0RXhwaXJhdGlvblRpbWVCdWZmZXIoKVtpbmRleF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSAvIGRpc2FibGUgZGVzdHJ1Y3Rpb24gb2YgcGFydGljbGVzIGluIENyZWF0ZVBhcnRpY2xlKClcbiAgICogd2hlbiBubyBtb3JlIHBhcnRpY2xlcyBjYW4gYmUgY3JlYXRlZCBkdWUgdG8gYSBwcmlvciBjYWxsIHRvXG4gICAqIFNldE1heFBhcnRpY2xlQ291bnQoKS4gIFdoZW4gdGhpcyBpcyBlbmFibGVkLCB0aGUgb2xkZXN0XG4gICAqIHBhcnRpY2xlIGlzIGRlc3Ryb3llZCBpbiBDcmVhdGVQYXJ0aWNsZSgpIGZhdm9yaW5nIHRoZVxuICAgKiBkZXN0cnVjdGlvbiBvZiBwYXJ0aWNsZXMgd2l0aCBhIGZpbml0ZSBsaWZldGltZSBvdmVyXG4gICAqIHBhcnRpY2xlcyB3aXRoIGluZmluaXRlIGxpZmV0aW1lcy4gVGhpcyBmZWF0dXJlIGlzIGVuYWJsZWQgYnlcbiAgICogZGVmYXVsdCB3aGVuIHBhcnRpY2xlIGxpZmV0aW1lcyBhcmUgdHJhY2tlZC4gIEV4cGxpY2l0bHlcbiAgICogZW5hYmxpbmcgdGhpcyBmZWF0dXJlIHVzaW5nIHRoaXMgZnVuY3Rpb24gZW5hYmxlcyBwYXJ0aWNsZVxuICAgKiBsaWZldGltZSB0cmFja2luZy5cbiAgICovXG4gIHB1YmxpYyBTZXREZXN0cnVjdGlvbkJ5QWdlKGVuYWJsZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChlbmFibGUpIHtcbiAgICAgIHRoaXMuR2V0RXhwaXJhdGlvblRpbWVCdWZmZXIoKTtcbiAgICB9XG4gICAgdGhpcy5tX2RlZi5kZXN0cm95QnlBZ2UgPSBlbmFibGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhlIG9sZGVzdCBwYXJ0aWNsZSB3aWxsIGJlIGRlc3Ryb3llZCBpblxuICAgKiBDcmVhdGVQYXJ0aWNsZSgpIHdoZW4gdGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpY2xlcyBhcmVcbiAgICogcHJlc2VudCBpbiB0aGUgc3lzdGVtLlxuICAgKi9cbiAgcHVibGljIEdldERlc3RydWN0aW9uQnlBZ2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubV9kZWYuZGVzdHJveUJ5QWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYXJyYXkgb2YgcGFydGljbGUgZXhwaXJhdGlvbiB0aW1lcyBpbmRleGVkIGJ5XG4gICAqIHBhcnRpY2xlIGluZGV4LlxuICAgKlxuICAgKiBHZXRQYXJ0aWNsZUNvdW50KCkgaXRlbXMgYXJlIGluIHRoZSByZXR1cm5lZCBhcnJheS5cbiAgICovXG4gIHB1YmxpYyBHZXRFeHBpcmF0aW9uVGltZUJ1ZmZlcigpOiBudW1iZXJbXSB7XG4gICAgdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEpO1xuICAgIHJldHVybiB0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgZXhwaXJhdGlvbiB0aW1lIHZhbHVlIGluIHJldHVybmVkIGJ5XG4gICAqIEdldEV4cGlyYXRpb25UaW1lQnVmZmVyKCkgdG8gYSB0aW1lIGluIHNlY29uZHMgcmVsYXRpdmUgdG9cbiAgICogdGhlIGN1cnJlbnQgc2ltdWxhdGlvbiB0aW1lLlxuICAgKi9cbiAgcHVibGljIEV4cGlyYXRpb25UaW1lVG9MaWZldGltZShleHBpcmF0aW9uVGltZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKGV4cGlyYXRpb25UaW1lID4gMCA/XG4gICAgICBleHBpcmF0aW9uVGltZSAtIHRoaXMuR2V0UXVhbnRpemVkVGltZUVsYXBzZWQoKSA6XG4gICAgICBleHBpcmF0aW9uVGltZSkgKiB0aGlzLm1fZGVmLmxpZmV0aW1lR3JhbnVsYXJpdHk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBhcnJheSBvZiBwYXJ0aWNsZSBpbmRpY2VzIG9yZGVyZWQgYnkgcmV2ZXJzZVxuICAgKiBsaWZldGltZS4gVGhlIG9sZGVzdCBwYXJ0aWNsZSBpbmRleGVzIGFyZSBhdCB0aGUgZW5kIG9mIHRoZVxuICAgKiBhcnJheSB3aXRoIHRoZSBuZXdlc3QgYXQgdGhlIHN0YXJ0LiAgUGFydGljbGVzIHdpdGggaW5maW5pdGVcbiAgICogbGlmZXRpbWVzIChpLmUgZXhwaXJhdGlvbiB0aW1lcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMCkgYXJlXG4gICAqIHBsYWNlZCBhdCB0aGUgc3RhcnQgb2YgdGhlIGFycmF5LlxuICAgKiBFeHBpcmF0aW9uVGltZVRvTGlmZXRpbWUoR2V0RXhwaXJhdGlvblRpbWVCdWZmZXIoKVtpbmRleF0pIGlzXG4gICAqIGVxdWl2YWxlbnQgdG8gR2V0UGFydGljbGVMaWZldGltZShpbmRleCkuXG4gICAqXG4gICAqIEdldFBhcnRpY2xlQ291bnQoKSBpdGVtcyBhcmUgaW4gdGhlIHJldHVybmVkIGFycmF5LlxuICAgKi9cbiAgcHVibGljIEdldEluZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlcigpOiBudW1iZXJbXSB7XG4gICAgLy8gSWYgcGFydGljbGVzIGFyZSBwcmVzZW50LCBpbml0aWFsaXplIC8gcmVpbml0aWFsaXplIHRoZSBsaWZldGltZSBidWZmZXIuXG4gICAgaWYgKHRoaXMuR2V0UGFydGljbGVDb3VudCgpKSB7XG4gICAgICB0aGlzLlNldFBhcnRpY2xlTGlmZXRpbWUoMCwgdGhpcy5HZXRQYXJ0aWNsZUxpZmV0aW1lKDApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhID0gdGhpcy5SZXF1ZXN0QnVmZmVyKHRoaXMubV9pbmRleEJ5RXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1faW5kZXhCeUV4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYW4gaW1wdWxzZSB0byBvbmUgcGFydGljbGUuIFRoaXMgaW1tZWRpYXRlbHkgbW9kaWZpZXNcbiAgICogdGhlIHZlbG9jaXR5LiBTaW1pbGFyIHRvIGIyQm9keTo6QXBwbHlMaW5lYXJJbXB1bHNlLlxuICAgKlxuICAgKiBAcGFyYW0gaW5kZXggdGhlIHBhcnRpY2xlIHRoYXQgd2lsbCBiZSBtb2RpZmllZC5cbiAgICogQHBhcmFtIGltcHVsc2UgaW1wdWxzZSB0aGUgd29ybGQgaW1wdWxzZSB2ZWN0b3IsIHVzdWFsbHkgaW4gTi1zZWNvbmRzIG9yIGtnLW0vcy5cbiAgICovXG4gIHB1YmxpYyBQYXJ0aWNsZUFwcGx5TGluZWFySW1wdWxzZShpbmRleDogbnVtYmVyLCBpbXB1bHNlOiBYWSk6IHZvaWQge1xuICAgIHRoaXMuQXBwbHlMaW5lYXJJbXB1bHNlKGluZGV4LCBpbmRleCArIDEsIGltcHVsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGFuIGltcHVsc2UgdG8gYWxsIHBhcnRpY2xlcyBiZXR3ZWVuICdmaXJzdEluZGV4JyBhbmRcbiAgICogJ2xhc3RJbmRleCcuIFRoaXMgaW1tZWRpYXRlbHkgbW9kaWZpZXMgdGhlIHZlbG9jaXR5LiBOb3RlXG4gICAqIHRoYXQgdGhlIGltcHVsc2UgaXMgYXBwbGllZCB0byB0aGUgdG90YWwgbWFzcyBvZiBhbGxcbiAgICogcGFydGljbGVzLiBTbywgY2FsbGluZyBQYXJ0aWNsZUFwcGx5TGluZWFySW1wdWxzZSgwLCBpbXB1bHNlKVxuICAgKiBhbmQgUGFydGljbGVBcHBseUxpbmVhckltcHVsc2UoMSwgaW1wdWxzZSkgd2lsbCBpbXBhcnQgdHdpY2VcbiAgICogYXMgbXVjaCB2ZWxvY2l0eSBhcyBjYWxsaW5nIGp1c3QgQXBwbHlMaW5lYXJJbXB1bHNlKDAsIDEsXG4gICAqIGltcHVsc2UpLlxuICAgKlxuICAgKiBAcGFyYW0gZmlyc3RJbmRleCB0aGUgZmlyc3QgcGFydGljbGUgdG8gYmUgbW9kaWZpZWQuXG4gICAqIEBwYXJhbSBsYXN0SW5kZXggdGhlIGxhc3QgcGFydGljbGUgdG8gYmUgbW9kaWZpZWQuXG4gICAqIEBwYXJhbSBpbXB1bHNlIHRoZSB3b3JsZCBpbXB1bHNlIHZlY3RvciwgdXN1YWxseSBpbiBOLXNlY29uZHMgb3Iga2ctbS9zLlxuICAgKi9cbiAgcHVibGljIEFwcGx5TGluZWFySW1wdWxzZShmaXJzdEluZGV4OiBudW1iZXIsIGxhc3RJbmRleDogbnVtYmVyLCBpbXB1bHNlOiBYWSk6IHZvaWQge1xuICAgIGNvbnN0IHZlbF9kYXRhID0gdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGE7XG4gICAgY29uc3QgbnVtUGFydGljbGVzID0gKGxhc3RJbmRleCAtIGZpcnN0SW5kZXgpO1xuICAgIGNvbnN0IHRvdGFsTWFzcyA9IG51bVBhcnRpY2xlcyAqIHRoaXMuR2V0UGFydGljbGVNYXNzKCk7XG4gICAgLy8vY29uc3QgYjJWZWMyIHZlbG9jaXR5RGVsdGEgPSBpbXB1bHNlIC8gdG90YWxNYXNzO1xuICAgIGNvbnN0IHZlbG9jaXR5RGVsdGEgPSBuZXcgYjJWZWMyKCkuQ29weShpbXB1bHNlKS5TZWxmTXVsKDEgLyB0b3RhbE1hc3MpO1xuICAgIGZvciAobGV0IGkgPSBmaXJzdEluZGV4OyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVtpXSArPSB2ZWxvY2l0eURlbHRhO1xuICAgICAgdmVsX2RhdGFbaV0uU2VsZkFkZCh2ZWxvY2l0eURlbHRhKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIElzU2lnbmlmaWNhbnRGb3JjZShmb3JjZTogWFkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZm9yY2UueCAhPT0gMCB8fCBmb3JjZS55ICE9PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGEgZm9yY2UgdG8gdGhlIGNlbnRlciBvZiBhIHBhcnRpY2xlLlxuICAgKlxuICAgKiBAcGFyYW0gaW5kZXggdGhlIHBhcnRpY2xlIHRoYXQgd2lsbCBiZSBtb2RpZmllZC5cbiAgICogQHBhcmFtIGZvcmNlIHRoZSB3b3JsZCBmb3JjZSB2ZWN0b3IsIHVzdWFsbHkgaW4gTmV3dG9ucyAoTikuXG4gICAqL1xuICBwdWJsaWMgUGFydGljbGVBcHBseUZvcmNlKGluZGV4OiBudW1iZXIsIGZvcmNlOiBYWSk6IHZvaWQge1xuICAgIGlmIChiMlBhcnRpY2xlU3lzdGVtLklzU2lnbmlmaWNhbnRGb3JjZShmb3JjZSkgJiZcbiAgICAgIHRoaXMuRm9yY2VDYW5CZUFwcGxpZWQodGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbaW5kZXhdKSkge1xuICAgICAgdGhpcy5QcmVwYXJlRm9yY2VCdWZmZXIoKTtcbiAgICAgIC8vL21fZm9yY2VCdWZmZXJbaW5kZXhdICs9IGZvcmNlO1xuICAgICAgdGhpcy5tX2ZvcmNlQnVmZmVyW2luZGV4XS5TZWxmQWRkKGZvcmNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzdHJpYnV0ZSBhIGZvcmNlIGFjcm9zcyBzZXZlcmFsIHBhcnRpY2xlcy4gVGhlIHBhcnRpY2xlc1xuICAgKiBtdXN0IG5vdCBiZSB3YWxsIHBhcnRpY2xlcy4gTm90ZSB0aGF0IHRoZSBmb3JjZSBpc1xuICAgKiBkaXN0cmlidXRlZCBhY3Jvc3MgYWxsIHRoZSBwYXJ0aWNsZXMsIHNvIGNhbGxpbmcgdGhpc1xuICAgKiBmdW5jdGlvbiBmb3IgaW5kaWNlcyAwLi5OIGlzIG5vdCB0aGUgc2FtZSBhcyBjYWxsaW5nXG4gICAqIFBhcnRpY2xlQXBwbHlGb3JjZShpLCBmb3JjZSkgZm9yIGkgaW4gMC4uTi5cbiAgICpcbiAgICogQHBhcmFtIGZpcnN0SW5kZXggdGhlIGZpcnN0IHBhcnRpY2xlIHRvIGJlIG1vZGlmaWVkLlxuICAgKiBAcGFyYW0gbGFzdEluZGV4IHRoZSBsYXN0IHBhcnRpY2xlIHRvIGJlIG1vZGlmaWVkLlxuICAgKiBAcGFyYW0gZm9yY2UgdGhlIHdvcmxkIGZvcmNlIHZlY3RvciwgdXN1YWxseSBpbiBOZXd0b25zIChOKS5cbiAgICovXG4gIHB1YmxpYyBBcHBseUZvcmNlKGZpcnN0SW5kZXg6IG51bWJlciwgbGFzdEluZGV4OiBudW1iZXIsIGZvcmNlOiBYWSk6IHZvaWQge1xuICAgIC8vIEVuc3VyZSB3ZSdyZSBub3QgdHJ5aW5nIHRvIGFwcGx5IGZvcmNlIHRvIHBhcnRpY2xlcyB0aGF0IGNhbid0IG1vdmUsXG4gICAgLy8gc3VjaCBhcyB3YWxsIHBhcnRpY2xlcy5cbiAgICAvLyBERUJVRzogbGV0IGZsYWdzID0gMDtcbiAgICAvLyBERUJVRzogZm9yIChsZXQgaSA9IGZpcnN0SW5kZXg7IGkgPCBsYXN0SW5kZXg7IGkrKykge1xuICAgIC8vIERFQlVHOiAgIGZsYWdzIHw9IHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2ldO1xuICAgIC8vIERFQlVHOiB9XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMuRm9yY2VDYW5CZUFwcGxpZWQoZmxhZ3MpKTtcblxuICAgIC8vIEVhcmx5IG91dCBpZiBmb3JjZSBkb2VzIG5vdGhpbmcgKG9wdGltaXphdGlvbikuXG4gICAgLy8vY29uc3QgYjJWZWMyIGRpc3RyaWJ1dGVkRm9yY2UgPSBmb3JjZSAvIChmbG9hdDMyKShsYXN0SW5kZXggLSBmaXJzdEluZGV4KTtcbiAgICBjb25zdCBkaXN0cmlidXRlZEZvcmNlID0gIG5ldyBiMlZlYzIoKS5Db3B5KGZvcmNlKS5TZWxmTXVsKDEgLyAobGFzdEluZGV4IC0gZmlyc3RJbmRleCkpO1xuICAgIGlmIChiMlBhcnRpY2xlU3lzdGVtLklzU2lnbmlmaWNhbnRGb3JjZShkaXN0cmlidXRlZEZvcmNlKSkge1xuICAgICAgdGhpcy5QcmVwYXJlRm9yY2VCdWZmZXIoKTtcblxuICAgICAgLy8gRGlzdHJpYnV0ZSB0aGUgZm9yY2Ugb3ZlciBhbGwgdGhlIHBhcnRpY2xlcy5cbiAgICAgIGZvciAobGV0IGkgPSBmaXJzdEluZGV4OyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgLy8vbV9mb3JjZUJ1ZmZlcltpXSArPSBkaXN0cmlidXRlZEZvcmNlO1xuICAgICAgICB0aGlzLm1fZm9yY2VCdWZmZXJbaV0uU2VsZkFkZChkaXN0cmlidXRlZEZvcmNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBuZXh0IHBhcnRpY2xlLXN5c3RlbSBpbiB0aGUgd29ybGQncyBwYXJ0aWNsZS1zeXN0ZW1cbiAgICogbGlzdC5cbiAgICovXG4gIHB1YmxpYyBHZXROZXh0KCk6IGIyUGFydGljbGVTeXN0ZW0gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5tX25leHQ7XG4gIH1cblxuICAvKipcbiAgICogUXVlcnkgdGhlIHBhcnRpY2xlIHN5c3RlbSBmb3IgYWxsIHBhcnRpY2xlcyB0aGF0IHBvdGVudGlhbGx5XG4gICAqIG92ZXJsYXAgdGhlIHByb3ZpZGVkIEFBQkIuXG4gICAqIGIyUXVlcnlDYWxsYmFjazo6U2hvdWxkUXVlcnlQYXJ0aWNsZVN5c3RlbSBpcyBpZ25vcmVkLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgYSB1c2VyIGltcGxlbWVudGVkIGNhbGxiYWNrIGNsYXNzLlxuICAgKiBAcGFyYW0gYWFiYiB0aGUgcXVlcnkgYm94LlxuICAgKi9cbiAgcHVibGljIFF1ZXJ5QUFCQihjYWxsYmFjazogYjJRdWVyeUNhbGxiYWNrLCBhYWJiOiBiMkFBQkIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tX3Byb3h5QnVmZmVyLmNvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGJlZ2luUHJveHkgPSAwO1xuICAgIGNvbnN0IGVuZFByb3h5ID0gdGhpcy5tX3Byb3h5QnVmZmVyLmNvdW50O1xuICAgIGNvbnN0IGZpcnN0UHJveHkgPSBzdGRfbG93ZXJfYm91bmQodGhpcy5tX3Byb3h5QnVmZmVyLmRhdGEsIGJlZ2luUHJveHksIGVuZFByb3h5LFxuICAgICAgYjJQYXJ0aWNsZVN5c3RlbS5jb21wdXRlVGFnKFxuICAgICAgICB0aGlzLm1faW52ZXJzZURpYW1ldGVyICogYWFiYi5sb3dlckJvdW5kLngsXG4gICAgICAgIHRoaXMubV9pbnZlcnNlRGlhbWV0ZXIgKiBhYWJiLmxvd2VyQm91bmQueSksXG4gICAgICBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5LkNvbXBhcmVQcm94eVRhZyk7XG4gICAgY29uc3QgbGFzdFByb3h5ID0gc3RkX3VwcGVyX2JvdW5kKHRoaXMubV9wcm94eUJ1ZmZlci5kYXRhLCBmaXJzdFByb3h5LCBlbmRQcm94eSxcbiAgICAgIGIyUGFydGljbGVTeXN0ZW0uY29tcHV0ZVRhZyhcbiAgICAgICAgdGhpcy5tX2ludmVyc2VEaWFtZXRlciAqIGFhYmIudXBwZXJCb3VuZC54LFxuICAgICAgICB0aGlzLm1faW52ZXJzZURpYW1ldGVyICogYWFiYi51cHBlckJvdW5kLnkpLFxuICAgICAgYjJQYXJ0aWNsZVN5c3RlbV9Qcm94eS5Db21wYXJlVGFnUHJveHkpO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgZm9yIChsZXQgayA9IGZpcnN0UHJveHk7IGsgPCBsYXN0UHJveHk7ICsraykge1xuICAgICAgY29uc3QgcHJveHkgPSB0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGkgPSBwcm94eS5pbmRleDtcbiAgICAgIGNvbnN0IHAgPSBwb3NfZGF0YVtpXTtcbiAgICAgIGlmIChhYWJiLmxvd2VyQm91bmQueCA8IHAueCAmJiBwLnggPCBhYWJiLnVwcGVyQm91bmQueCAmJlxuICAgICAgICBhYWJiLmxvd2VyQm91bmQueSA8IHAueSAmJiBwLnkgPCBhYWJiLnVwcGVyQm91bmQueSkge1xuICAgICAgICBpZiAoIWNhbGxiYWNrLlJlcG9ydFBhcnRpY2xlKHRoaXMsIGkpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUXVlcnkgdGhlIHBhcnRpY2xlIHN5c3RlbSBmb3IgYWxsIHBhcnRpY2xlcyB0aGF0IHBvdGVudGlhbGx5XG4gICAqIG92ZXJsYXAgdGhlIHByb3ZpZGVkIHNoYXBlJ3MgQUFCQi4gQ2FsbHMgUXVlcnlBQUJCXG4gICAqIGludGVybmFsbHkuIGIyUXVlcnlDYWxsYmFjazo6U2hvdWxkUXVlcnlQYXJ0aWNsZVN5c3RlbSBpc1xuICAgKiBpZ25vcmVkLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgYSB1c2VyIGltcGxlbWVudGVkIGNhbGxiYWNrIGNsYXNzLlxuICAgKiBAcGFyYW0gc2hhcGUgdGhlIHF1ZXJ5IHNoYXBlXG4gICAqIEBwYXJhbSB4ZiB0aGUgdHJhbnNmb3JtIG9mIHRoZSBBQUJCXG4gICAqIEBwYXJhbSBjaGlsZEluZGV4XG4gICAqL1xuICBwdWJsaWMgUXVlcnlTaGFwZUFBQkIoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjaywgc2hhcGU6IGIyU2hhcGUsIHhmOiBiMlRyYW5zZm9ybSwgY2hpbGRJbmRleDogbnVtYmVyID0gMCk6IHZvaWQge1xuICAgIGNvbnN0IHNfYWFiYiA9IGIyUGFydGljbGVTeXN0ZW0uUXVlcnlTaGFwZUFBQkJfc19hYWJiO1xuICAgIGNvbnN0IGFhYmIgPSBzX2FhYmI7XG4gICAgc2hhcGUuQ29tcHV0ZUFBQkIoYWFiYiwgeGYsIGNoaWxkSW5kZXgpO1xuICAgIHRoaXMuUXVlcnlBQUJCKGNhbGxiYWNrLCBhYWJiKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFF1ZXJ5U2hhcGVBQUJCX3NfYWFiYiA9IG5ldyBiMkFBQkIoKTtcblxuICBwdWJsaWMgUXVlcnlQb2ludEFBQkIoY2FsbGJhY2s6IGIyUXVlcnlDYWxsYmFjaywgcG9pbnQ6IFhZLCBzbG9wOiBudW1iZXIgPSBiMl9saW5lYXJTbG9wKTogdm9pZCB7XG4gICAgY29uc3Qgc19hYWJiID0gYjJQYXJ0aWNsZVN5c3RlbS5RdWVyeVBvaW50QUFCQl9zX2FhYmI7XG4gICAgY29uc3QgYWFiYiA9IHNfYWFiYjtcbiAgICBhYWJiLmxvd2VyQm91bmQuU2V0KHBvaW50LnggLSBzbG9wLCBwb2ludC55IC0gc2xvcCk7XG4gICAgYWFiYi51cHBlckJvdW5kLlNldChwb2ludC54ICsgc2xvcCwgcG9pbnQueSArIHNsb3ApO1xuICAgIHRoaXMuUXVlcnlBQUJCKGNhbGxiYWNrLCBhYWJiKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFF1ZXJ5UG9pbnRBQUJCX3NfYWFiYiA9IG5ldyBiMkFBQkIoKTtcblxuICAvKipcbiAgICogUmF5LWNhc3QgdGhlIHBhcnRpY2xlIHN5c3RlbSBmb3IgYWxsIHBhcnRpY2xlcyBpbiB0aGUgcGF0aCBvZlxuICAgKiB0aGUgcmF5LiBZb3VyIGNhbGxiYWNrIGNvbnRyb2xzIHdoZXRoZXIgeW91IGdldCB0aGUgY2xvc2VzdFxuICAgKiBwb2ludCwgYW55IHBvaW50LCBvciBuLXBvaW50cy4gVGhlIHJheS1jYXN0IGlnbm9yZXMgcGFydGljbGVzXG4gICAqIHRoYXQgY29udGFpbiB0aGUgc3RhcnRpbmcgcG9pbnQuXG4gICAqIGIyUmF5Q2FzdENhbGxiYWNrOjpTaG91bGRRdWVyeVBhcnRpY2xlU3lzdGVtIGlzIGlnbm9yZWQuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBhIHVzZXIgaW1wbGVtZW50ZWQgY2FsbGJhY2sgY2xhc3MuXG4gICAqIEBwYXJhbSBwb2ludDEgdGhlIHJheSBzdGFydGluZyBwb2ludFxuICAgKiBAcGFyYW0gcG9pbnQyIHRoZSByYXkgZW5kaW5nIHBvaW50XG4gICAqL1xuICBwdWJsaWMgUmF5Q2FzdChjYWxsYmFjazogYjJSYXlDYXN0Q2FsbGJhY2ssIHBvaW50MTogWFksIHBvaW50MjogWFkpOiB2b2lkIHtcbiAgICBjb25zdCBzX2FhYmIgPSBiMlBhcnRpY2xlU3lzdGVtLlJheUNhc3Rfc19hYWJiO1xuICAgIGNvbnN0IHNfcCA9IGIyUGFydGljbGVTeXN0ZW0uUmF5Q2FzdF9zX3A7XG4gICAgY29uc3Qgc192ID0gYjJQYXJ0aWNsZVN5c3RlbS5SYXlDYXN0X3NfdjtcbiAgICBjb25zdCBzX24gPSBiMlBhcnRpY2xlU3lzdGVtLlJheUNhc3Rfc19uO1xuICAgIGNvbnN0IHNfcG9pbnQgPSBiMlBhcnRpY2xlU3lzdGVtLlJheUNhc3Rfc19wb2ludDtcbiAgICBpZiAodGhpcy5tX3Byb3h5QnVmZmVyLmNvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgYWFiYiA9IHNfYWFiYjtcbiAgICBiMlZlYzIuTWluVihwb2ludDEsIHBvaW50MiwgYWFiYi5sb3dlckJvdW5kKTtcbiAgICBiMlZlYzIuTWF4Vihwb2ludDEsIHBvaW50MiwgYWFiYi51cHBlckJvdW5kKTtcbiAgICBsZXQgZnJhY3Rpb24gPSAxO1xuICAgIC8vIHNvbHZpbmcgdGhlIGZvbGxvd2luZyBlcXVhdGlvbjpcbiAgICAvLyAoKDEtdCkqcG9pbnQxK3QqcG9pbnQyLXBvc2l0aW9uKV4yPWRpYW1ldGVyXjJcbiAgICAvLyB3aGVyZSB0IGlzIGEgcG90ZW50aWFsIGZyYWN0aW9uXG4gICAgLy8vYjJWZWMyIHYgPSBwb2ludDIgLSBwb2ludDE7XG4gICAgY29uc3QgdiA9IGIyVmVjMi5TdWJWVihwb2ludDIsIHBvaW50MSwgc192KTtcbiAgICBjb25zdCB2MiA9IGIyVmVjMi5Eb3RWVih2LCB2KTtcbiAgICBjb25zdCBlbnVtZXJhdG9yID0gdGhpcy5HZXRJbnNpZGVCb3VuZHNFbnVtZXJhdG9yKGFhYmIpO1xuXG4gICAgbGV0IGk6IG51bWJlcjtcbiAgICB3aGlsZSAoKGkgPSBlbnVtZXJhdG9yLkdldE5leHQoKSkgPj0gMCkge1xuICAgICAgLy8vYjJWZWMyIHAgPSBwb2ludDEgLSBtX3Bvc2l0aW9uQnVmZmVyLmRhdGFbaV07XG4gICAgICBjb25zdCBwID0gYjJWZWMyLlN1YlZWKHBvaW50MSwgcG9zX2RhdGFbaV0sIHNfcCk7XG4gICAgICBjb25zdCBwdiA9IGIyVmVjMi5Eb3RWVihwLCB2KTtcbiAgICAgIGNvbnN0IHAyID0gYjJWZWMyLkRvdFZWKHAsIHApO1xuICAgICAgY29uc3QgZGV0ZXJtaW5hbnQgPSBwdiAqIHB2IC0gdjIgKiAocDIgLSB0aGlzLm1fc3F1YXJlZERpYW1ldGVyKTtcbiAgICAgIGlmIChkZXRlcm1pbmFudCA+PSAwKSB7XG4gICAgICAgIGNvbnN0IHNxcnREZXRlcm1pbmFudCA9IGIyU3FydChkZXRlcm1pbmFudCk7XG4gICAgICAgIC8vIGZpbmQgYSBzb2x1dGlvbiBiZXR3ZWVuIDAgYW5kIGZyYWN0aW9uXG4gICAgICAgIGxldCB0ID0gKC1wdiAtIHNxcnREZXRlcm1pbmFudCkgLyB2MjtcbiAgICAgICAgaWYgKHQgPiBmcmFjdGlvbikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IDwgMCkge1xuICAgICAgICAgIHQgPSAoLXB2ICsgc3FydERldGVybWluYW50KSAvIHYyO1xuICAgICAgICAgIGlmICh0IDwgMCB8fCB0ID4gZnJhY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLy9iMlZlYzIgbiA9IHAgKyB0ICogdjtcbiAgICAgICAgY29uc3QgbiA9IGIyVmVjMi5BZGRWTXVsU1YocCwgdCwgdiwgc19uKTtcbiAgICAgICAgbi5Ob3JtYWxpemUoKTtcbiAgICAgICAgLy8vZmxvYXQzMiBmID0gY2FsbGJhY2suUmVwb3J0UGFydGljbGUodGhpcywgaSwgcG9pbnQxICsgdCAqIHYsIG4sIHQpO1xuICAgICAgICBjb25zdCBmID0gY2FsbGJhY2suUmVwb3J0UGFydGljbGUodGhpcywgaSwgYjJWZWMyLkFkZFZNdWxTVihwb2ludDEsIHQsIHYsIHNfcG9pbnQpLCBuLCB0KTtcbiAgICAgICAgZnJhY3Rpb24gPSBiMk1pbihmcmFjdGlvbiwgZik7XG4gICAgICAgIGlmIChmcmFjdGlvbiA8PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSYXlDYXN0X3NfYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSYXlDYXN0X3NfcCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSYXlDYXN0X3NfdiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSYXlDYXN0X3NfbiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSYXlDYXN0X3NfcG9pbnQgPSBuZXcgYjJWZWMyKCk7XG5cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIGF4aXMtYWxpZ25lZCBib3VuZGluZyBib3ggZm9yIGFsbCBwYXJ0aWNsZXNcbiAgICogY29udGFpbmVkIHdpdGhpbiB0aGlzIHBhcnRpY2xlIHN5c3RlbS5cbiAgICogQHBhcmFtIGFhYmIgUmV0dXJucyB0aGUgYXhpcy1hbGlnbmVkIGJvdW5kaW5nIGJveCBvZiB0aGUgc3lzdGVtLlxuICAgKi9cbiAgcHVibGljIENvbXB1dGVBQUJCKGFhYmI6IGIyQUFCQik6IHZvaWQge1xuICAgIGNvbnN0IHBhcnRpY2xlQ291bnQgPSB0aGlzLkdldFBhcnRpY2xlQ291bnQoKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoYWFiYiAhPT0gbnVsbCk7XG4gICAgYWFiYi5sb3dlckJvdW5kLnggPSArYjJfbWF4RmxvYXQ7XG4gICAgYWFiYi5sb3dlckJvdW5kLnkgPSArYjJfbWF4RmxvYXQ7XG4gICAgYWFiYi51cHBlckJvdW5kLnggPSAtYjJfbWF4RmxvYXQ7XG4gICAgYWFiYi51cHBlckJvdW5kLnkgPSAtYjJfbWF4RmxvYXQ7XG5cbiAgICBjb25zdCBwb3NfZGF0YSA9IHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwID0gcG9zX2RhdGFbaV07XG4gICAgICBiMlZlYzIuTWluVihhYWJiLmxvd2VyQm91bmQsIHAsIGFhYmIubG93ZXJCb3VuZCk7XG4gICAgICBiMlZlYzIuTWF4VihhYWJiLnVwcGVyQm91bmQsIHAsIGFhYmIudXBwZXJCb3VuZCk7XG4gICAgfVxuICAgIGFhYmIubG93ZXJCb3VuZC54IC09IHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyO1xuICAgIGFhYmIubG93ZXJCb3VuZC55IC09IHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyO1xuICAgIGFhYmIudXBwZXJCb3VuZC54ICs9IHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyO1xuICAgIGFhYmIudXBwZXJCb3VuZC55ICs9IHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbCBwYXJ0aWNsZSB0eXBlcyB0aGF0IHJlcXVpcmUgY3JlYXRpbmcgcGFpcnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkga19wYWlyRmxhZ3M6IG51bWJlciA9IGIyUGFydGljbGVGbGFnLmIyX3NwcmluZ1BhcnRpY2xlO1xuXG4gIC8qKlxuICAgKiBBbGwgcGFydGljbGUgdHlwZXMgdGhhdCByZXF1aXJlIGNyZWF0aW5nIHRyaWFkc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBrX3RyaWFkRmxhZ3MgPSBiMlBhcnRpY2xlRmxhZy5iMl9lbGFzdGljUGFydGljbGU7XG5cbiAgLyoqXG4gICAqIEFsbCBwYXJ0aWNsZSB0eXBlcyB0aGF0IGRvIG5vdCBwcm9kdWNlIGR5bmFtaWMgcHJlc3N1cmVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkga19ub1ByZXNzdXJlRmxhZ3MgPSBiMlBhcnRpY2xlRmxhZy5iMl9wb3dkZXJQYXJ0aWNsZSB8IGIyUGFydGljbGVGbGFnLmIyX3RlbnNpbGVQYXJ0aWNsZTtcblxuICAvKipcbiAgICogQWxsIHBhcnRpY2xlIHR5cGVzIHRoYXQgYXBwbHkgZXh0cmEgZGFtcGluZyBmb3JjZSB3aXRoIGJvZGllc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBrX2V4dHJhRGFtcGluZ0ZsYWdzID0gYjJQYXJ0aWNsZUZsYWcuYjJfc3RhdGljUHJlc3N1cmVQYXJ0aWNsZTtcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGtfYmFycmllcldhbGxGbGFncyA9IGIyUGFydGljbGVGbGFnLmIyX2JhcnJpZXJQYXJ0aWNsZSB8IGIyUGFydGljbGVGbGFnLmIyX3dhbGxQYXJ0aWNsZTtcblxuICBwdWJsaWMgRnJlZUJ1ZmZlcjxUPihiOiBUW10gfCBudWxsLCBjYXBhY2l0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYi5sZW5ndGggPSAwO1xuICB9XG5cbiAgcHVibGljIEZyZWVVc2VyT3ZlcnJpZGFibGVCdWZmZXI8VD4oYjogYjJQYXJ0aWNsZVN5c3RlbV9Vc2VyT3ZlcnJpZGFibGVCdWZmZXI8VD4pOiB2b2lkIHtcbiAgICBpZiAoYi51c2VyU3VwcGxpZWRDYXBhY2l0eSA9PT0gMCkge1xuICAgICAgdGhpcy5GcmVlQnVmZmVyKGIuZGF0YSwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFsbG9jYXRlIGEgYnVmZmVyXG4gICAqL1xuICBwdWJsaWMgUmVhbGxvY2F0ZUJ1ZmZlcjM8VD4ob2xkQnVmZmVyOiBUW10gfCBudWxsLCBvbGRDYXBhY2l0eTogbnVtYmVyLCBuZXdDYXBhY2l0eTogbnVtYmVyKTogVFtdIHtcbiAgICAvLyBiMkFzc2VydChuZXdDYXBhY2l0eSA+IG9sZENhcGFjaXR5KTtcbiAgICBpZiAobmV3Q2FwYWNpdHkgPD0gb2xkQ2FwYWNpdHkpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICBjb25zdCBuZXdCdWZmZXIgPSAob2xkQnVmZmVyKSA/IG9sZEJ1ZmZlci5zbGljZSgpIDogW107XG4gICAgbmV3QnVmZmVyLmxlbmd0aCA9IG5ld0NhcGFjaXR5O1xuICAgIHJldHVybiBuZXdCdWZmZXI7XG4gIH1cblxuICAvKipcbiAgICogUmVhbGxvY2F0ZSBhIGJ1ZmZlclxuICAgKi9cbiAgcHVibGljIFJlYWxsb2NhdGVCdWZmZXI1PFQ+KGJ1ZmZlcjogVFtdIHwgbnVsbCwgdXNlclN1cHBsaWVkQ2FwYWNpdHk6IG51bWJlciwgb2xkQ2FwYWNpdHk6IG51bWJlciwgbmV3Q2FwYWNpdHk6IG51bWJlciwgZGVmZXJyZWQ6IGJvb2xlYW4pOiBUW10ge1xuICAgIC8vIGIyQXNzZXJ0KG5ld0NhcGFjaXR5ID4gb2xkQ2FwYWNpdHkpO1xuICAgIGlmIChuZXdDYXBhY2l0eSA8PSBvbGRDYXBhY2l0eSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIC8vIEEgJ2RlZmVycmVkJyBidWZmZXIgaXMgcmVhbGxvY2F0ZWQgb25seSBpZiBpdCBpcyBub3QgTlVMTC5cbiAgICAvLyBJZiAndXNlclN1cHBsaWVkQ2FwYWNpdHknIGlzIG5vdCB6ZXJvLCBidWZmZXIgaXMgdXNlciBzdXBwbGllZCBhbmQgbXVzdFxuICAgIC8vIGJlIGtlcHQuXG4gICAgLy8gYjJBc3NlcnQoIXVzZXJTdXBwbGllZENhcGFjaXR5IHx8IG5ld0NhcGFjaXR5IDw9IHVzZXJTdXBwbGllZENhcGFjaXR5KTtcbiAgICBpZiAoISghdXNlclN1cHBsaWVkQ2FwYWNpdHkgfHwgbmV3Q2FwYWNpdHkgPD0gdXNlclN1cHBsaWVkQ2FwYWNpdHkpKSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgaWYgKCghZGVmZXJyZWQgfHwgYnVmZmVyKSAmJiAhdXNlclN1cHBsaWVkQ2FwYWNpdHkpIHtcbiAgICAgIGJ1ZmZlciA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjMoYnVmZmVyLCBvbGRDYXBhY2l0eSwgbmV3Q2FwYWNpdHkpO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyIGFzIGFueTsgLy8gVE9ETzogZml4IHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFsbG9jYXRlIGEgYnVmZmVyXG4gICAqL1xuICBwdWJsaWMgUmVhbGxvY2F0ZUJ1ZmZlcjQ8VD4oYnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxhbnk+LCBvbGRDYXBhY2l0eTogbnVtYmVyLCBuZXdDYXBhY2l0eTogbnVtYmVyLCBkZWZlcnJlZDogYm9vbGVhbik6IFRbXSB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KG5ld0NhcGFjaXR5ID4gb2xkQ2FwYWNpdHkpO1xuICAgIHJldHVybiB0aGlzLlJlYWxsb2NhdGVCdWZmZXI1KGJ1ZmZlci5kYXRhLCBidWZmZXIudXNlclN1cHBsaWVkQ2FwYWNpdHksIG9sZENhcGFjaXR5LCBuZXdDYXBhY2l0eSwgZGVmZXJyZWQpO1xuICB9XG5cbiAgcHVibGljIFJlcXVlc3RCdWZmZXI8VD4oYnVmZmVyOiBUW10gfCBudWxsKTogVFtdIHtcbiAgICBpZiAoIWJ1ZmZlcikge1xuICAgICAgaWYgKHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5ID09PSAwKSB7XG4gICAgICAgIHRoaXMuUmVhbGxvY2F0ZUludGVybmFsQWxsb2NhdGVkQnVmZmVycyhiMl9taW5QYXJ0aWNsZVN5c3RlbUJ1ZmZlckNhcGFjaXR5KTtcbiAgICAgIH1cblxuICAgICAgYnVmZmVyID0gW107XG4gICAgICBidWZmZXIubGVuZ3RoID0gdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHk7XG4gICAgfVxuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvKipcbiAgICogUmVhbGxvY2F0ZSB0aGUgaGFuZGxlIC8gaW5kZXggbWFwIGFuZCBzY2hlZHVsZSB0aGUgYWxsb2NhdGlvblxuICAgKiBvZiBhIG5ldyBwb29sIGZvciBoYW5kbGUgYWxsb2NhdGlvbi5cbiAgICovXG4gIHB1YmxpYyBSZWFsbG9jYXRlSGFuZGxlQnVmZmVycyhuZXdDYXBhY2l0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KG5ld0NhcGFjaXR5ID4gdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHkpO1xuICAgIC8vIFJlYWxsb2NhdGUgYSBuZXcgaGFuZGxlIC8gaW5kZXggbWFwIGJ1ZmZlciwgY29weWluZyBvbGQgaGFuZGxlIHBvaW50ZXJzXG4gICAgLy8gaXMgZmluZSBzaW5jZSB0aGV5J3JlIGtlcHQgYXJvdW5kLlxuICAgIHRoaXMubV9oYW5kbGVJbmRleEJ1ZmZlci5kYXRhID0gdGhpcy5SZWFsbG9jYXRlQnVmZmVyNCh0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5LCBuZXdDYXBhY2l0eSwgdHJ1ZSk7XG4gICAgLy8gU2V0IHRoZSBzaXplIG9mIHRoZSBuZXh0IGhhbmRsZSBhbGxvY2F0aW9uLlxuICAgIC8vL3RoaXMubV9oYW5kbGVBbGxvY2F0b3IuU2V0SXRlbXNQZXJTbGFiKG5ld0NhcGFjaXR5IC0gdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHkpO1xuICB9XG5cbiAgcHVibGljIFJlYWxsb2NhdGVJbnRlcm5hbEFsbG9jYXRlZEJ1ZmZlcnMoY2FwYWNpdHk6IG51bWJlcik6IHZvaWQge1xuICAgIGZ1bmN0aW9uIExpbWl0Q2FwYWNpdHkoY2FwYWNpdHk6IG51bWJlciwgbWF4Q291bnQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICByZXR1cm4gbWF4Q291bnQgJiYgY2FwYWNpdHkgPiBtYXhDb3VudCA/IG1heENvdW50IDogY2FwYWNpdHk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgaW5jcmVhc2UgY2FwYWNpdHkgYmV5b25kIHRoZSBzbWFsbGVzdCB1c2VyLXN1cHBsaWVkIGJ1ZmZlciBzaXplLlxuICAgIGNhcGFjaXR5ID0gTGltaXRDYXBhY2l0eShjYXBhY2l0eSwgdGhpcy5tX2RlZi5tYXhDb3VudCk7XG4gICAgY2FwYWNpdHkgPSBMaW1pdENhcGFjaXR5KGNhcGFjaXR5LCB0aGlzLm1fZmxhZ3NCdWZmZXIudXNlclN1cHBsaWVkQ2FwYWNpdHkpO1xuICAgIGNhcGFjaXR5ID0gTGltaXRDYXBhY2l0eShjYXBhY2l0eSwgdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLnVzZXJTdXBwbGllZENhcGFjaXR5KTtcbiAgICBjYXBhY2l0eSA9IExpbWl0Q2FwYWNpdHkoY2FwYWNpdHksIHRoaXMubV92ZWxvY2l0eUJ1ZmZlci51c2VyU3VwcGxpZWRDYXBhY2l0eSk7XG4gICAgY2FwYWNpdHkgPSBMaW1pdENhcGFjaXR5KGNhcGFjaXR5LCB0aGlzLm1fY29sb3JCdWZmZXIudXNlclN1cHBsaWVkQ2FwYWNpdHkpO1xuICAgIGNhcGFjaXR5ID0gTGltaXRDYXBhY2l0eShjYXBhY2l0eSwgdGhpcy5tX3VzZXJEYXRhQnVmZmVyLnVzZXJTdXBwbGllZENhcGFjaXR5KTtcbiAgICBpZiAodGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHkgPCBjYXBhY2l0eSkge1xuICAgICAgdGhpcy5SZWFsbG9jYXRlSGFuZGxlQnVmZmVycyhjYXBhY2l0eSk7XG4gICAgICB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YSA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjQodGhpcy5tX2ZsYWdzQnVmZmVyLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSwgY2FwYWNpdHksIGZhbHNlKTtcblxuICAgICAgLy8gQ29uZGl0aW9uYWxseSBkZWZlciB0aGVzZSBhcyB0aGV5IGFyZSBvcHRpb25hbCBpZiB0aGUgZmVhdHVyZSBpc1xuICAgICAgLy8gbm90IGVuYWJsZWQuXG4gICAgICBjb25zdCBzdHVjayA9IHRoaXMubV9zdHVja1RocmVzaG9sZCA+IDA7XG4gICAgICB0aGlzLm1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlci5kYXRhID0gdGhpcy5SZWFsbG9jYXRlQnVmZmVyNCh0aGlzLm1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlciwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBzdHVjayk7XG4gICAgICB0aGlzLm1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlci5kYXRhID0gdGhpcy5SZWFsbG9jYXRlQnVmZmVyNCh0aGlzLm1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlciwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBzdHVjayk7XG4gICAgICB0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjQodGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSwgY2FwYWNpdHksIHN0dWNrKTtcbiAgICAgIHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhID0gdGhpcy5SZWFsbG9jYXRlQnVmZmVyNCh0aGlzLm1fcG9zaXRpb25CdWZmZXIsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5LCBjYXBhY2l0eSwgZmFsc2UpO1xuICAgICAgdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGEgPSB0aGlzLlJlYWxsb2NhdGVCdWZmZXI0KHRoaXMubV92ZWxvY2l0eUJ1ZmZlciwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBmYWxzZSk7XG4gICAgICB0aGlzLm1fZm9yY2VCdWZmZXIgPSB0aGlzLlJlYWxsb2NhdGVCdWZmZXI1KHRoaXMubV9mb3JjZUJ1ZmZlciwgMCwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBmYWxzZSk7XG4gICAgICB0aGlzLm1fd2VpZ2h0QnVmZmVyID0gdGhpcy5SZWFsbG9jYXRlQnVmZmVyNSh0aGlzLm1fd2VpZ2h0QnVmZmVyLCAwLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSwgY2FwYWNpdHksIGZhbHNlKTtcbiAgICAgIHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlciA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjUodGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyLCAwLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSwgY2FwYWNpdHksIHRydWUpO1xuICAgICAgdGhpcy5tX2FjY3VtdWxhdGlvbkJ1ZmZlciA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjUodGhpcy5tX2FjY3VtdWxhdGlvbkJ1ZmZlciwgMCwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBmYWxzZSk7XG4gICAgICB0aGlzLm1fYWNjdW11bGF0aW9uMkJ1ZmZlciA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjUodGhpcy5tX2FjY3VtdWxhdGlvbjJCdWZmZXIsIDAsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5LCBjYXBhY2l0eSwgdHJ1ZSk7XG4gICAgICB0aGlzLm1fZGVwdGhCdWZmZXIgPSB0aGlzLlJlYWxsb2NhdGVCdWZmZXI1KHRoaXMubV9kZXB0aEJ1ZmZlciwgMCwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCB0cnVlKTtcbiAgICAgIHRoaXMubV9jb2xvckJ1ZmZlci5kYXRhID0gdGhpcy5SZWFsbG9jYXRlQnVmZmVyNCh0aGlzLm1fY29sb3JCdWZmZXIsIHRoaXMubV9pbnRlcm5hbEFsbG9jYXRlZENhcGFjaXR5LCBjYXBhY2l0eSwgdHJ1ZSk7XG4gICAgICB0aGlzLm1fZ3JvdXBCdWZmZXIgPSB0aGlzLlJlYWxsb2NhdGVCdWZmZXI1KHRoaXMubV9ncm91cEJ1ZmZlciwgMCwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBmYWxzZSk7XG4gICAgICB0aGlzLm1fdXNlckRhdGFCdWZmZXIuZGF0YSA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjQodGhpcy5tX3VzZXJEYXRhQnVmZmVyLCB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSwgY2FwYWNpdHksIHRydWUpO1xuICAgICAgdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEgPSB0aGlzLlJlYWxsb2NhdGVCdWZmZXI0KHRoaXMubV9leHBpcmF0aW9uVGltZUJ1ZmZlciwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCB0cnVlKTtcbiAgICAgIHRoaXMubV9pbmRleEJ5RXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSA9IHRoaXMuUmVhbGxvY2F0ZUJ1ZmZlcjQodGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlciwgdGhpcy5tX2ludGVybmFsQWxsb2NhdGVkQ2FwYWNpdHksIGNhcGFjaXR5LCBmYWxzZSk7XG4gICAgICB0aGlzLm1faW50ZXJuYWxBbGxvY2F0ZWRDYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBDcmVhdGVQYXJ0aWNsZUZvckdyb3VwKGdyb3VwRGVmOiBiMklQYXJ0aWNsZUdyb3VwRGVmLCB4ZjogYjJUcmFuc2Zvcm0sIHA6IFhZKTogdm9pZCB7XG4gICAgY29uc3QgcGFydGljbGVEZWYgPSBuZXcgYjJQYXJ0aWNsZURlZigpO1xuICAgIHBhcnRpY2xlRGVmLmZsYWdzID0gYjJNYXliZShncm91cERlZi5mbGFncywgMCk7XG4gICAgLy8vcGFydGljbGVEZWYucG9zaXRpb24gPSBiMk11bCh4ZiwgcCk7XG4gICAgYjJUcmFuc2Zvcm0uTXVsWFYoeGYsIHAsIHBhcnRpY2xlRGVmLnBvc2l0aW9uKTtcbiAgICAvLy9wYXJ0aWNsZURlZi52ZWxvY2l0eSA9XG4gICAgLy8vICBncm91cERlZi5saW5lYXJWZWxvY2l0eSArXG4gICAgLy8vICBiMkNyb3NzKGdyb3VwRGVmLmFuZ3VsYXJWZWxvY2l0eSxcbiAgICAvLy8gICAgICBwYXJ0aWNsZURlZi5wb3NpdGlvbiAtIGdyb3VwRGVmLnBvc2l0aW9uKTtcbiAgICBiMlZlYzIuQWRkVlYoXG4gICAgICBiMk1heWJlKGdyb3VwRGVmLmxpbmVhclZlbG9jaXR5LCBiMlZlYzIuWkVSTyksXG4gICAgICBiMlZlYzIuQ3Jvc3NTVihcbiAgICAgICAgYjJNYXliZShncm91cERlZi5hbmd1bGFyVmVsb2NpdHksIDApLFxuICAgICAgICBiMlZlYzIuU3ViVlYoXG4gICAgICAgICAgcGFydGljbGVEZWYucG9zaXRpb24sXG4gICAgICAgICAgYjJNYXliZShncm91cERlZi5wb3NpdGlvbiwgYjJWZWMyLlpFUk8pLFxuICAgICAgICAgIGIyVmVjMi5zX3QwLFxuICAgICAgICApLFxuICAgICAgICBiMlZlYzIuc190MCxcbiAgICAgICksXG4gICAgICBwYXJ0aWNsZURlZi52ZWxvY2l0eSxcbiAgICApO1xuICAgIHBhcnRpY2xlRGVmLmNvbG9yLkNvcHkoYjJNYXliZShncm91cERlZi5jb2xvciwgYjJDb2xvci5aRVJPKSk7XG4gICAgcGFydGljbGVEZWYubGlmZXRpbWUgPSBiMk1heWJlKGdyb3VwRGVmLmxpZmV0aW1lLCAwKTtcbiAgICBwYXJ0aWNsZURlZi51c2VyRGF0YSA9IGdyb3VwRGVmLnVzZXJEYXRhO1xuICAgIHRoaXMuQ3JlYXRlUGFydGljbGUocGFydGljbGVEZWYpO1xuICB9XG5cbiAgcHVibGljIENyZWF0ZVBhcnRpY2xlc1N0cm9rZVNoYXBlRm9yR3JvdXAoc2hhcGU6IGIyU2hhcGUsIGdyb3VwRGVmOiBiMklQYXJ0aWNsZUdyb3VwRGVmLCB4ZjogYjJUcmFuc2Zvcm0pOiB2b2lkIHtcbiAgICBjb25zdCBzX2VkZ2UgPSBiMlBhcnRpY2xlU3lzdGVtLkNyZWF0ZVBhcnRpY2xlc1N0cm9rZVNoYXBlRm9yR3JvdXBfc19lZGdlO1xuICAgIGNvbnN0IHNfZCA9IGIyUGFydGljbGVTeXN0ZW0uQ3JlYXRlUGFydGljbGVzU3Ryb2tlU2hhcGVGb3JHcm91cF9zX2Q7XG4gICAgY29uc3Qgc19wID0gYjJQYXJ0aWNsZVN5c3RlbS5DcmVhdGVQYXJ0aWNsZXNTdHJva2VTaGFwZUZvckdyb3VwX3NfcDtcbiAgICBsZXQgc3RyaWRlID0gYjJNYXliZShncm91cERlZi5zdHJpZGUsIDApO1xuICAgIGlmIChzdHJpZGUgPT09IDApIHtcbiAgICAgIHN0cmlkZSA9IHRoaXMuR2V0UGFydGljbGVTdHJpZGUoKTtcbiAgICB9XG4gICAgbGV0IHBvc2l0aW9uT25FZGdlID0gMDtcbiAgICBjb25zdCBjaGlsZENvdW50ID0gc2hhcGUuR2V0Q2hpbGRDb3VudCgpO1xuICAgIGZvciAobGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgY2hpbGRDb3VudDsgY2hpbGRJbmRleCsrKSB7XG4gICAgICBsZXQgZWRnZTogYjJFZGdlU2hhcGUgfCBudWxsID0gbnVsbDtcbiAgICAgIGlmIChzaGFwZS5HZXRUeXBlKCkgPT09IGIyU2hhcGVUeXBlLmVfZWRnZVNoYXBlKSB7XG4gICAgICAgIGVkZ2UgPSBzaGFwZSBhcyBiMkVkZ2VTaGFwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERFQlVHOiBiMkFzc2VydChzaGFwZS5HZXRUeXBlKCkgPT09IGIyU2hhcGVUeXBlLmVfY2hhaW5TaGFwZSk7XG4gICAgICAgIGVkZ2UgPSBzX2VkZ2U7XG4gICAgICAgIChzaGFwZSBhcyBiMkNoYWluU2hhcGUpLkdldENoaWxkRWRnZShlZGdlLCBjaGlsZEluZGV4KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGQgPSBiMlZlYzIuU3ViVlYoZWRnZS5tX3ZlcnRleDIsIGVkZ2UubV92ZXJ0ZXgxLCBzX2QpO1xuICAgICAgY29uc3QgZWRnZUxlbmd0aCA9IGQuTGVuZ3RoKCk7XG5cbiAgICAgIHdoaWxlIChwb3NpdGlvbk9uRWRnZSA8IGVkZ2VMZW5ndGgpIHtcbiAgICAgICAgLy8vYjJWZWMyIHAgPSBlZGdlLm1fdmVydGV4MSArIHBvc2l0aW9uT25FZGdlIC8gZWRnZUxlbmd0aCAqIGQ7XG4gICAgICAgIGNvbnN0IHAgPSBiMlZlYzIuQWRkVk11bFNWKGVkZ2UubV92ZXJ0ZXgxLCBwb3NpdGlvbk9uRWRnZSAvIGVkZ2VMZW5ndGgsIGQsIHNfcCk7XG4gICAgICAgIHRoaXMuQ3JlYXRlUGFydGljbGVGb3JHcm91cChncm91cERlZiwgeGYsIHApO1xuICAgICAgICBwb3NpdGlvbk9uRWRnZSArPSBzdHJpZGU7XG4gICAgICB9XG4gICAgICBwb3NpdGlvbk9uRWRnZSAtPSBlZGdlTGVuZ3RoO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENyZWF0ZVBhcnRpY2xlc1N0cm9rZVNoYXBlRm9yR3JvdXBfc19lZGdlID0gbmV3IGIyRWRnZVNoYXBlKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ3JlYXRlUGFydGljbGVzU3Ryb2tlU2hhcGVGb3JHcm91cF9zX2QgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ3JlYXRlUGFydGljbGVzU3Ryb2tlU2hhcGVGb3JHcm91cF9zX3AgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIENyZWF0ZVBhcnRpY2xlc0ZpbGxTaGFwZUZvckdyb3VwKHNoYXBlOiBiMlNoYXBlLCBncm91cERlZjogYjJJUGFydGljbGVHcm91cERlZiwgeGY6IGIyVHJhbnNmb3JtKTogdm9pZCB7XG4gICAgY29uc3Qgc19hYWJiID0gYjJQYXJ0aWNsZVN5c3RlbS5DcmVhdGVQYXJ0aWNsZXNGaWxsU2hhcGVGb3JHcm91cF9zX2FhYmI7XG4gICAgY29uc3Qgc19wID0gYjJQYXJ0aWNsZVN5c3RlbS5DcmVhdGVQYXJ0aWNsZXNGaWxsU2hhcGVGb3JHcm91cF9zX3A7XG4gICAgbGV0IHN0cmlkZSA9IGIyTWF5YmUoZ3JvdXBEZWYuc3RyaWRlLCAwKTtcbiAgICBpZiAoc3RyaWRlID09PSAwKSB7XG4gICAgICBzdHJpZGUgPSB0aGlzLkdldFBhcnRpY2xlU3RyaWRlKCk7XG4gICAgfVxuICAgIC8vL2IyVHJhbnNmb3JtIGlkZW50aXR5O1xuICAgIC8vLyBpZGVudGl0eS5TZXRJZGVudGl0eSgpO1xuICAgIGNvbnN0IGlkZW50aXR5ID0gYjJUcmFuc2Zvcm0uSURFTlRJVFk7XG4gICAgY29uc3QgYWFiYiA9IHNfYWFiYjtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoc2hhcGUuR2V0Q2hpbGRDb3VudCgpID09PSAxKTtcbiAgICBzaGFwZS5Db21wdXRlQUFCQihhYWJiLCBpZGVudGl0eSwgMCk7XG4gICAgZm9yIChsZXQgeSA9IE1hdGguZmxvb3IoYWFiYi5sb3dlckJvdW5kLnkgLyBzdHJpZGUpICogc3RyaWRlOyB5IDwgYWFiYi51cHBlckJvdW5kLnk7IHkgKz0gc3RyaWRlKSB7XG4gICAgICBmb3IgKGxldCB4ID0gTWF0aC5mbG9vcihhYWJiLmxvd2VyQm91bmQueCAvIHN0cmlkZSkgKiBzdHJpZGU7IHggPCBhYWJiLnVwcGVyQm91bmQueDsgeCArPSBzdHJpZGUpIHtcbiAgICAgICAgY29uc3QgcCA9IHNfcC5TZXQoeCwgeSk7XG4gICAgICAgIGlmIChzaGFwZS5UZXN0UG9pbnQoaWRlbnRpdHksIHApKSB7XG4gICAgICAgICAgdGhpcy5DcmVhdGVQYXJ0aWNsZUZvckdyb3VwKGdyb3VwRGVmLCB4ZiwgcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDcmVhdGVQYXJ0aWNsZXNGaWxsU2hhcGVGb3JHcm91cF9zX2FhYmIgPSBuZXcgYjJBQUJCKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ3JlYXRlUGFydGljbGVzRmlsbFNoYXBlRm9yR3JvdXBfc19wID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBDcmVhdGVQYXJ0aWNsZXNXaXRoU2hhcGVGb3JHcm91cChzaGFwZTogYjJTaGFwZSwgZ3JvdXBEZWY6IGIySVBhcnRpY2xlR3JvdXBEZWYsIHhmOiBiMlRyYW5zZm9ybSk6IHZvaWQge1xuICAgIHN3aXRjaCAoc2hhcGUuR2V0VHlwZSgpKSB7XG4gICAgICBjYXNlIGIyU2hhcGVUeXBlLmVfZWRnZVNoYXBlOlxuICAgICAgY2FzZSBiMlNoYXBlVHlwZS5lX2NoYWluU2hhcGU6XG4gICAgICAgIHRoaXMuQ3JlYXRlUGFydGljbGVzU3Ryb2tlU2hhcGVGb3JHcm91cChzaGFwZSwgZ3JvdXBEZWYsIHhmKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIyU2hhcGVUeXBlLmVfcG9seWdvblNoYXBlOlxuICAgICAgY2FzZSBiMlNoYXBlVHlwZS5lX2NpcmNsZVNoYXBlOlxuICAgICAgICB0aGlzLkNyZWF0ZVBhcnRpY2xlc0ZpbGxTaGFwZUZvckdyb3VwKHNoYXBlLCBncm91cERlZiwgeGYpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIERFQlVHOiBiMkFzc2VydChmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBDcmVhdGVQYXJ0aWNsZXNXaXRoU2hhcGVzRm9yR3JvdXAoc2hhcGVzOiBiMlNoYXBlW10sIHNoYXBlQ291bnQ6IG51bWJlciwgZ3JvdXBEZWY6IGIySVBhcnRpY2xlR3JvdXBEZWYsIHhmOiBiMlRyYW5zZm9ybSk6IHZvaWQge1xuICAgIGNvbnN0IGNvbXBvc2l0ZVNoYXBlID0gbmV3IGIyUGFydGljbGVTeXN0ZW1fQ29tcG9zaXRlU2hhcGUoc2hhcGVzLCBzaGFwZUNvdW50KTtcbiAgICB0aGlzLkNyZWF0ZVBhcnRpY2xlc0ZpbGxTaGFwZUZvckdyb3VwKGNvbXBvc2l0ZVNoYXBlLCBncm91cERlZiwgeGYpO1xuICB9XG5cbiAgcHVibGljIENsb25lUGFydGljbGUob2xkSW5kZXg6IG51bWJlciwgZ3JvdXA6IGIyUGFydGljbGVHcm91cCk6IG51bWJlciB7XG4gICAgY29uc3QgZGVmID0gbmV3IGIyUGFydGljbGVEZWYoKTtcbiAgICBkZWYuZmxhZ3MgPSB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtvbGRJbmRleF07XG4gICAgZGVmLnBvc2l0aW9uLkNvcHkodGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbb2xkSW5kZXhdKTtcbiAgICBkZWYudmVsb2NpdHkuQ29weSh0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtvbGRJbmRleF0pO1xuICAgIGlmICh0aGlzLm1fY29sb3JCdWZmZXIuZGF0YSkge1xuICAgICAgZGVmLmNvbG9yLkNvcHkodGhpcy5tX2NvbG9yQnVmZmVyLmRhdGFbb2xkSW5kZXhdKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhKSB7XG4gICAgICBkZWYudXNlckRhdGEgPSB0aGlzLm1fdXNlckRhdGFCdWZmZXIuZGF0YVtvbGRJbmRleF07XG4gICAgfVxuICAgIGRlZi5ncm91cCA9IGdyb3VwO1xuICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5DcmVhdGVQYXJ0aWNsZShkZWYpO1xuICAgIGlmICh0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YSkge1xuICAgICAgY29uc3QgaGFuZGxlID0gdGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGFbb2xkSW5kZXhdO1xuICAgICAgaWYgKGhhbmRsZSkgeyBoYW5kbGUuU2V0SW5kZXgobmV3SW5kZXgpOyB9XG4gICAgICB0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YVtuZXdJbmRleF0gPSBoYW5kbGU7XG4gICAgICB0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YVtvbGRJbmRleF0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YSkge1xuICAgICAgdGhpcy5tX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YVtuZXdJbmRleF0gPVxuICAgICAgICB0aGlzLm1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlci5kYXRhW29sZEluZGV4XTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGEpIHtcbiAgICAgIHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGFbbmV3SW5kZXhdID1cbiAgICAgICAgdGhpcy5tX2JvZHlDb250YWN0Q291bnRCdWZmZXIuZGF0YVtvbGRJbmRleF07XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSkge1xuICAgICAgdGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGFbbmV3SW5kZXhdID1cbiAgICAgICAgdGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGFbb2xkSW5kZXhdO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2hhc0ZvcmNlKSB7XG4gICAgICB0aGlzLm1fZm9yY2VCdWZmZXJbbmV3SW5kZXhdLkNvcHkodGhpcy5tX2ZvcmNlQnVmZmVyW29sZEluZGV4XSk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXIpIHtcbiAgICAgIHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlcltuZXdJbmRleF0gPSB0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXJbb2xkSW5kZXhdO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2RlcHRoQnVmZmVyKSB7XG4gICAgICB0aGlzLm1fZGVwdGhCdWZmZXJbbmV3SW5kZXhdID0gdGhpcy5tX2RlcHRoQnVmZmVyW29sZEluZGV4XTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9leHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhKSB7XG4gICAgICB0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YVtuZXdJbmRleF0gPVxuICAgICAgICB0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YVtvbGRJbmRleF07XG4gICAgfVxuICAgIHJldHVybiBuZXdJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBEZXN0cm95UGFydGljbGVzSW5Hcm91cChncm91cDogYjJQYXJ0aWNsZUdyb3VwLCBjYWxsRGVzdHJ1Y3Rpb25MaXN0ZW5lcjogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IGdyb3VwLm1fZmlyc3RJbmRleDsgaSA8IGdyb3VwLm1fbGFzdEluZGV4OyBpKyspIHtcbiAgICAgIHRoaXMuRGVzdHJveVBhcnRpY2xlKGksIGNhbGxEZXN0cnVjdGlvbkxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgRGVzdHJveVBhcnRpY2xlR3JvdXAoZ3JvdXA6IGIyUGFydGljbGVHcm91cCk6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fZ3JvdXBDb3VudCA+IDApO1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChncm91cCAhPT0gbnVsbCk7XG5cbiAgICBpZiAodGhpcy5tX3dvcmxkLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lcikge1xuICAgICAgdGhpcy5tX3dvcmxkLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lci5TYXlHb29kYnllUGFydGljbGVHcm91cChncm91cCk7XG4gICAgfVxuXG4gICAgdGhpcy5TZXRHcm91cEZsYWdzKGdyb3VwLCAwKTtcbiAgICBmb3IgKGxldCBpID0gZ3JvdXAubV9maXJzdEluZGV4OyBpIDwgZ3JvdXAubV9sYXN0SW5kZXg7IGkrKykge1xuICAgICAgdGhpcy5tX2dyb3VwQnVmZmVyW2ldID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoZ3JvdXAubV9wcmV2KSB7XG4gICAgICBncm91cC5tX3ByZXYubV9uZXh0ID0gZ3JvdXAubV9uZXh0O1xuICAgIH1cbiAgICBpZiAoZ3JvdXAubV9uZXh0KSB7XG4gICAgICBncm91cC5tX25leHQubV9wcmV2ID0gZ3JvdXAubV9wcmV2O1xuICAgIH1cbiAgICBpZiAoZ3JvdXAgPT09IHRoaXMubV9ncm91cExpc3QpIHtcbiAgICAgIHRoaXMubV9ncm91cExpc3QgPSBncm91cC5tX25leHQ7XG4gICAgfVxuXG4gICAgLS10aGlzLm1fZ3JvdXBDb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgUGFydGljbGVDYW5CZUNvbm5lY3RlZChmbGFnczogYjJQYXJ0aWNsZUZsYWcsIGdyb3VwOiBiMlBhcnRpY2xlR3JvdXAgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICgoZmxhZ3MgJiAoYjJQYXJ0aWNsZUZsYWcuYjJfd2FsbFBhcnRpY2xlIHwgYjJQYXJ0aWNsZUZsYWcuYjJfc3ByaW5nUGFydGljbGUgfCBiMlBhcnRpY2xlRmxhZy5iMl9lbGFzdGljUGFydGljbGUpKSAhPT0gMCkgfHxcbiAgICAgICgoZ3JvdXAgIT09IG51bGwpICYmICgoZ3JvdXAuR2V0R3JvdXBGbGFncygpICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9yaWdpZFBhcnRpY2xlR3JvdXApICE9PSAwKSk7XG4gIH1cblxuICBwdWJsaWMgVXBkYXRlUGFpcnNBbmRUcmlhZHMoZmlyc3RJbmRleDogbnVtYmVyLCBsYXN0SW5kZXg6IG51bWJlciwgZmlsdGVyOiBiMlBhcnRpY2xlU3lzdGVtX0Nvbm5lY3Rpb25GaWx0ZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzX2RhYiA9IGIyUGFydGljbGVTeXN0ZW0uVXBkYXRlUGFpcnNBbmRUcmlhZHNfc19kYWI7XG4gICAgY29uc3Qgc19kYmMgPSBiMlBhcnRpY2xlU3lzdGVtLlVwZGF0ZVBhaXJzQW5kVHJpYWRzX3NfZGJjO1xuICAgIGNvbnN0IHNfZGNhID0gYjJQYXJ0aWNsZVN5c3RlbS5VcGRhdGVQYWlyc0FuZFRyaWFkc19zX2RjYTtcbiAgICBjb25zdCBwb3NfZGF0YSA9IHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhO1xuICAgIC8vIENyZWF0ZSBwYWlycyBvciB0cmlhZHMuXG4gICAgLy8gQWxsIHBhcnRpY2xlcyBpbiBlYWNoIHBhaXIvdHJpYWQgc2hvdWxkIHNhdGlzZnkgdGhlIGZvbGxvd2luZzpcbiAgICAvLyAqIGZpcnN0SW5kZXggPD0gaW5kZXggPCBsYXN0SW5kZXhcbiAgICAvLyAqIGRvbid0IGhhdmUgYjJfem9tYmllUGFydGljbGVcbiAgICAvLyAqIFBhcnRpY2xlQ2FuQmVDb25uZWN0ZWQgcmV0dXJucyB0cnVlXG4gICAgLy8gKiBTaG91bGRDcmVhdGVQYWlyL1Nob3VsZENyZWF0ZVRyaWFkIHJldHVybnMgdHJ1ZVxuICAgIC8vIEFueSBwYXJ0aWNsZXMgaW4gZWFjaCBwYWlyL3RyaWFkIHNob3VsZCBzYXRpc2Z5IHRoZSBmb2xsb3dpbmc6XG4gICAgLy8gKiBmaWx0ZXIuSXNOZWVkZWQgcmV0dXJucyB0cnVlXG4gICAgLy8gKiBoYXZlIG9uZSBvZiBrX3BhaXJGbGFncy9rX3RyaWFkc0ZsYWdzXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZpcnN0SW5kZXggPD0gbGFzdEluZGV4KTtcbiAgICBsZXQgcGFydGljbGVGbGFncyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IGZpcnN0SW5kZXg7IGkgPCBsYXN0SW5kZXg7IGkrKykge1xuICAgICAgcGFydGljbGVGbGFncyB8PSB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpXTtcbiAgICB9XG4gICAgaWYgKHBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlU3lzdGVtLmtfcGFpckZsYWdzKSB7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9jb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4QTtcbiAgICAgICAgY29uc3QgYiA9IGNvbnRhY3QuaW5kZXhCO1xuICAgICAgICBjb25zdCBhZiA9IHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2FdO1xuICAgICAgICBjb25zdCBiZiA9IHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2JdO1xuICAgICAgICBjb25zdCBncm91cEEgPSB0aGlzLm1fZ3JvdXBCdWZmZXJbYV07XG4gICAgICAgIGNvbnN0IGdyb3VwQiA9IHRoaXMubV9ncm91cEJ1ZmZlcltiXTtcbiAgICAgICAgaWYgKGEgPj0gZmlyc3RJbmRleCAmJiBhIDwgbGFzdEluZGV4ICYmXG4gICAgICAgICAgYiA+PSBmaXJzdEluZGV4ICYmIGIgPCBsYXN0SW5kZXggJiZcbiAgICAgICAgICAhKChhZiB8IGJmKSAmIGIyUGFydGljbGVGbGFnLmIyX3pvbWJpZVBhcnRpY2xlKSAmJlxuICAgICAgICAgICgoYWYgfCBiZikgJiBiMlBhcnRpY2xlU3lzdGVtLmtfcGFpckZsYWdzKSAmJlxuICAgICAgICAgIChmaWx0ZXIuSXNOZWNlc3NhcnkoYSkgfHwgZmlsdGVyLklzTmVjZXNzYXJ5KGIpKSAmJlxuICAgICAgICAgIGIyUGFydGljbGVTeXN0ZW0uUGFydGljbGVDYW5CZUNvbm5lY3RlZChhZiwgZ3JvdXBBKSAmJlxuICAgICAgICAgIGIyUGFydGljbGVTeXN0ZW0uUGFydGljbGVDYW5CZUNvbm5lY3RlZChiZiwgZ3JvdXBCKSAmJlxuICAgICAgICAgIGZpbHRlci5TaG91bGRDcmVhdGVQYWlyKGEsIGIpKSB7XG4gICAgICAgICAgLy8vYjJQYXJ0aWNsZVBhaXImIHBhaXIgPSBtX3BhaXJCdWZmZXIuQXBwZW5kKCk7XG4gICAgICAgICAgY29uc3QgcGFpciA9IHRoaXMubV9wYWlyQnVmZmVyLmRhdGFbdGhpcy5tX3BhaXJCdWZmZXIuQXBwZW5kKCldO1xuICAgICAgICAgIHBhaXIuaW5kZXhBID0gYTtcbiAgICAgICAgICBwYWlyLmluZGV4QiA9IGI7XG4gICAgICAgICAgcGFpci5mbGFncyA9IGNvbnRhY3QuZmxhZ3M7XG4gICAgICAgICAgcGFpci5zdHJlbmd0aCA9IGIyTWluKFxuICAgICAgICAgICAgZ3JvdXBBID8gZ3JvdXBBLm1fc3RyZW5ndGggOiAxLFxuICAgICAgICAgICAgZ3JvdXBCID8gZ3JvdXBCLm1fc3RyZW5ndGggOiAxKTtcbiAgICAgICAgICAvLy9wYWlyLmRpc3RhbmNlID0gYjJEaXN0YW5jZShwb3NfZGF0YVthXSwgcG9zX2RhdGFbYl0pOyAvLyBUT0RPOiB0aGlzIHdhcyB3cm9uZyFcbiAgICAgICAgICBwYWlyLmRpc3RhbmNlID0gYjJWZWMyLkRpc3RhbmNlVlYocG9zX2RhdGFbYV0sIHBvc19kYXRhW2JdKTtcbiAgICAgICAgfVxuICAgICAgICAvLy9zdGQ6OnN0YWJsZV9zb3J0KG1fcGFpckJ1ZmZlci5CZWdpbigpLCBtX3BhaXJCdWZmZXIuRW5kKCksIENvbXBhcmVQYWlySW5kaWNlcyk7XG4gICAgICAgIHN0ZF9zdGFibGVfc29ydCh0aGlzLm1fcGFpckJ1ZmZlci5kYXRhLCAwLCB0aGlzLm1fcGFpckJ1ZmZlci5jb3VudCwgYjJQYXJ0aWNsZVN5c3RlbS5Db21wYXJlUGFpckluZGljZXMpO1xuICAgICAgICAvLy9tX3BhaXJCdWZmZXIuVW5pcXVlKE1hdGNoUGFpckluZGljZXMpO1xuICAgICAgICB0aGlzLm1fcGFpckJ1ZmZlci5VbmlxdWUoYjJQYXJ0aWNsZVN5c3RlbS5NYXRjaFBhaXJJbmRpY2VzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlU3lzdGVtLmtfdHJpYWRGbGFncykge1xuICAgICAgY29uc3QgZGlhZ3JhbSA9IG5ldyBiMlZvcm9ub2lEaWFncmFtKGxhc3RJbmRleCAtIGZpcnN0SW5kZXgpO1xuICAgICAgLy8vbGV0IG5lY2Vzc2FyeV9jb3VudCA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gZmlyc3RJbmRleDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZsYWdzID0gdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbaV07XG4gICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5tX2dyb3VwQnVmZmVyW2ldO1xuICAgICAgICBpZiAoIShmbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3pvbWJpZVBhcnRpY2xlKSAmJlxuICAgICAgICAgIGIyUGFydGljbGVTeXN0ZW0uUGFydGljbGVDYW5CZUNvbm5lY3RlZChmbGFncywgZ3JvdXApKSB7XG4gICAgICAgICAgLy8vaWYgKGZpbHRlci5Jc05lY2Vzc2FyeShpKSkge1xuICAgICAgICAgIC8vLysrbmVjZXNzYXJ5X2NvdW50O1xuICAgICAgICAgIC8vL31cbiAgICAgICAgICBkaWFncmFtLkFkZEdlbmVyYXRvcihwb3NfZGF0YVtpXSwgaSwgZmlsdGVyLklzTmVjZXNzYXJ5KGkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8vaWYgKG5lY2Vzc2FyeV9jb3VudCA9PT0gMCkge1xuICAgICAgLy8vLy9kZWJ1Z2dlcjtcbiAgICAgIC8vL2ZvciAobGV0IGkgPSBmaXJzdEluZGV4OyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgIC8vLyAgZmlsdGVyLklzTmVjZXNzYXJ5KGkpO1xuICAgICAgLy8vfVxuICAgICAgLy8vfVxuICAgICAgY29uc3Qgc3RyaWRlID0gdGhpcy5HZXRQYXJ0aWNsZVN0cmlkZSgpO1xuICAgICAgZGlhZ3JhbS5HZW5lcmF0ZShzdHJpZGUgLyAyLCBzdHJpZGUgKiAyKTtcbiAgICAgIGNvbnN0IHN5c3RlbSA9IHRoaXM7XG4gICAgICBjb25zdCBjYWxsYmFjayA9IC8qVXBkYXRlVHJpYWRzQ2FsbGJhY2sqLyhhOiBudW1iZXIsIGI6IG51bWJlciwgYzogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGFmID0gc3lzdGVtLm1fZmxhZ3NCdWZmZXIuZGF0YVthXTtcbiAgICAgICAgY29uc3QgYmYgPSBzeXN0ZW0ubV9mbGFnc0J1ZmZlci5kYXRhW2JdO1xuICAgICAgICBjb25zdCBjZiA9IHN5c3RlbS5tX2ZsYWdzQnVmZmVyLmRhdGFbY107XG4gICAgICAgIGlmICgoKGFmIHwgYmYgfCBjZikgJiBiMlBhcnRpY2xlU3lzdGVtLmtfdHJpYWRGbGFncykgJiZcbiAgICAgICAgICBmaWx0ZXIuU2hvdWxkQ3JlYXRlVHJpYWQoYSwgYiwgYykpIHtcbiAgICAgICAgICBjb25zdCBwYSA9IHBvc19kYXRhW2FdO1xuICAgICAgICAgIGNvbnN0IHBiID0gcG9zX2RhdGFbYl07XG4gICAgICAgICAgY29uc3QgcGMgPSBwb3NfZGF0YVtjXTtcbiAgICAgICAgICBjb25zdCBkYWIgPSBiMlZlYzIuU3ViVlYocGEsIHBiLCBzX2RhYik7XG4gICAgICAgICAgY29uc3QgZGJjID0gYjJWZWMyLlN1YlZWKHBiLCBwYywgc19kYmMpO1xuICAgICAgICAgIGNvbnN0IGRjYSA9IGIyVmVjMi5TdWJWVihwYywgcGEsIHNfZGNhKTtcbiAgICAgICAgICBjb25zdCBtYXhEaXN0YW5jZVNxdWFyZWQgPSBiMl9tYXhUcmlhZERpc3RhbmNlU3F1YXJlZCAqIHN5c3RlbS5tX3NxdWFyZWREaWFtZXRlcjtcbiAgICAgICAgICBpZiAoYjJWZWMyLkRvdFZWKGRhYiwgZGFiKSA+IG1heERpc3RhbmNlU3F1YXJlZCB8fFxuICAgICAgICAgICAgYjJWZWMyLkRvdFZWKGRiYywgZGJjKSA+IG1heERpc3RhbmNlU3F1YXJlZCB8fFxuICAgICAgICAgICAgYjJWZWMyLkRvdFZWKGRjYSwgZGNhKSA+IG1heERpc3RhbmNlU3F1YXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBncm91cEEgPSBzeXN0ZW0ubV9ncm91cEJ1ZmZlclthXTtcbiAgICAgICAgICBjb25zdCBncm91cEIgPSBzeXN0ZW0ubV9ncm91cEJ1ZmZlcltiXTtcbiAgICAgICAgICBjb25zdCBncm91cEMgPSBzeXN0ZW0ubV9ncm91cEJ1ZmZlcltjXTtcbiAgICAgICAgICAvLy9iMlBhcnRpY2xlVHJpYWQmIHRyaWFkID0gbV9zeXN0ZW0ubV90cmlhZEJ1ZmZlci5BcHBlbmQoKTtcbiAgICAgICAgICBjb25zdCB0cmlhZCA9IHN5c3RlbS5tX3RyaWFkQnVmZmVyLmRhdGFbc3lzdGVtLm1fdHJpYWRCdWZmZXIuQXBwZW5kKCldO1xuICAgICAgICAgIHRyaWFkLmluZGV4QSA9IGE7XG4gICAgICAgICAgdHJpYWQuaW5kZXhCID0gYjtcbiAgICAgICAgICB0cmlhZC5pbmRleEMgPSBjO1xuICAgICAgICAgIHRyaWFkLmZsYWdzID0gYWYgfCBiZiB8IGNmO1xuICAgICAgICAgIHRyaWFkLnN0cmVuZ3RoID0gYjJNaW4oYjJNaW4oXG4gICAgICAgICAgICAgIGdyb3VwQSA/IGdyb3VwQS5tX3N0cmVuZ3RoIDogMSxcbiAgICAgICAgICAgICAgZ3JvdXBCID8gZ3JvdXBCLm1fc3RyZW5ndGggOiAxKSxcbiAgICAgICAgICAgIGdyb3VwQyA/IGdyb3VwQy5tX3N0cmVuZ3RoIDogMSk7XG4gICAgICAgICAgLy8vbGV0IG1pZFBvaW50ID0gYjJWZWMyLk11bFNWKDEuMCAvIDMuMCwgYjJWZWMyLkFkZFZWKHBhLCBiMlZlYzIuQWRkVlYocGIsIHBjLCBuZXcgYjJWZWMyKCkpLCBuZXcgYjJWZWMyKCkpLCBuZXcgYjJWZWMyKCkpO1xuICAgICAgICAgIGNvbnN0IG1pZFBvaW50X3ggPSAocGEueCArIHBiLnggKyBwYy54KSAvIDMuMDtcbiAgICAgICAgICBjb25zdCBtaWRQb2ludF95ID0gKHBhLnkgKyBwYi55ICsgcGMueSkgLyAzLjA7XG4gICAgICAgICAgLy8vdHJpYWQucGEgPSBiMlZlYzIuU3ViVlYocGEsIG1pZFBvaW50LCBuZXcgYjJWZWMyKCkpO1xuICAgICAgICAgIHRyaWFkLnBhLnggPSBwYS54IC0gbWlkUG9pbnRfeDtcbiAgICAgICAgICB0cmlhZC5wYS55ID0gcGEueSAtIG1pZFBvaW50X3k7XG4gICAgICAgICAgLy8vdHJpYWQucGIgPSBiMlZlYzIuU3ViVlYocGIsIG1pZFBvaW50LCBuZXcgYjJWZWMyKCkpO1xuICAgICAgICAgIHRyaWFkLnBiLnggPSBwYi54IC0gbWlkUG9pbnRfeDtcbiAgICAgICAgICB0cmlhZC5wYi55ID0gcGIueSAtIG1pZFBvaW50X3k7XG4gICAgICAgICAgLy8vdHJpYWQucGMgPSBiMlZlYzIuU3ViVlYocGMsIG1pZFBvaW50LCBuZXcgYjJWZWMyKCkpO1xuICAgICAgICAgIHRyaWFkLnBjLnggPSBwYy54IC0gbWlkUG9pbnRfeDtcbiAgICAgICAgICB0cmlhZC5wYy55ID0gcGMueSAtIG1pZFBvaW50X3k7XG4gICAgICAgICAgdHJpYWQua2EgPSAtYjJWZWMyLkRvdFZWKGRjYSwgZGFiKTtcbiAgICAgICAgICB0cmlhZC5rYiA9IC1iMlZlYzIuRG90VlYoZGFiLCBkYmMpO1xuICAgICAgICAgIHRyaWFkLmtjID0gLWIyVmVjMi5Eb3RWVihkYmMsIGRjYSk7XG4gICAgICAgICAgdHJpYWQucyA9IGIyVmVjMi5Dcm9zc1ZWKHBhLCBwYikgKyBiMlZlYzIuQ3Jvc3NWVihwYiwgcGMpICsgYjJWZWMyLkNyb3NzVlYocGMsIHBhKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGRpYWdyYW0uR2V0Tm9kZXMoY2FsbGJhY2spO1xuICAgICAgLy8vc3RkOjpzdGFibGVfc29ydChtX3RyaWFkQnVmZmVyLkJlZ2luKCksIG1fdHJpYWRCdWZmZXIuRW5kKCksIENvbXBhcmVUcmlhZEluZGljZXMpO1xuICAgICAgc3RkX3N0YWJsZV9zb3J0KHRoaXMubV90cmlhZEJ1ZmZlci5kYXRhLCAwLCB0aGlzLm1fdHJpYWRCdWZmZXIuY291bnQsIGIyUGFydGljbGVTeXN0ZW0uQ29tcGFyZVRyaWFkSW5kaWNlcyk7XG4gICAgICAvLy9tX3RyaWFkQnVmZmVyLlVuaXF1ZShNYXRjaFRyaWFkSW5kaWNlcyk7XG4gICAgICB0aGlzLm1fdHJpYWRCdWZmZXIuVW5pcXVlKGIyUGFydGljbGVTeXN0ZW0uTWF0Y2hUcmlhZEluZGljZXMpO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIHN0YXRpYyBVcGRhdGVQYWlyc0FuZFRyaWFkc19zX2RhYiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgVXBkYXRlUGFpcnNBbmRUcmlhZHNfc19kYmMgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFVwZGF0ZVBhaXJzQW5kVHJpYWRzX3NfZGNhID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBVcGRhdGVQYWlyc0FuZFRyaWFkc1dpdGhSZWFjdGl2ZVBhcnRpY2xlcygpOiB2b2lkIHtcbiAgICBjb25zdCBmaWx0ZXIgPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9SZWFjdGl2ZUZpbHRlcih0aGlzLm1fZmxhZ3NCdWZmZXIpO1xuICAgIHRoaXMuVXBkYXRlUGFpcnNBbmRUcmlhZHMoMCwgdGhpcy5tX2NvdW50LCBmaWx0ZXIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7IGkrKykge1xuICAgICAgdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbaV0gJj0gfmIyUGFydGljbGVGbGFnLmIyX3JlYWN0aXZlUGFydGljbGU7XG4gICAgfVxuICAgIHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICY9IH5iMlBhcnRpY2xlRmxhZy5iMl9yZWFjdGl2ZVBhcnRpY2xlO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBDb21wYXJlUGFpckluZGljZXMoYTogYjJQYXJ0aWNsZVBhaXIsIGI6IGIyUGFydGljbGVQYWlyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGlmZkEgPSBhLmluZGV4QSAtIGIuaW5kZXhBO1xuICAgIGlmIChkaWZmQSAhPT0gMCkgeyByZXR1cm4gZGlmZkEgPCAwOyB9XG4gICAgcmV0dXJuIGEuaW5kZXhCIDwgYi5pbmRleEI7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIE1hdGNoUGFpckluZGljZXMoYTogYjJQYXJ0aWNsZVBhaXIsIGI6IGIyUGFydGljbGVQYWlyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGEuaW5kZXhBID09PSBiLmluZGV4QSAmJiBhLmluZGV4QiA9PT0gYi5pbmRleEI7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIENvbXBhcmVUcmlhZEluZGljZXMoYTogYjJQYXJ0aWNsZVRyaWFkLCBiOiBiMlBhcnRpY2xlVHJpYWQpOiBib29sZWFuIHtcbiAgICBjb25zdCBkaWZmQSA9IGEuaW5kZXhBIC0gYi5pbmRleEE7XG4gICAgaWYgKGRpZmZBICE9PSAwKSB7IHJldHVybiBkaWZmQSA8IDA7IH1cbiAgICBjb25zdCBkaWZmQiA9IGEuaW5kZXhCIC0gYi5pbmRleEI7XG4gICAgaWYgKGRpZmZCICE9PSAwKSB7IHJldHVybiBkaWZmQiA8IDA7IH1cbiAgICByZXR1cm4gYS5pbmRleEMgPCBiLmluZGV4QztcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgTWF0Y2hUcmlhZEluZGljZXMoYTogYjJQYXJ0aWNsZVRyaWFkLCBiOiBiMlBhcnRpY2xlVHJpYWQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gYS5pbmRleEEgPT09IGIuaW5kZXhBICYmIGEuaW5kZXhCID09PSBiLmluZGV4QiAmJiBhLmluZGV4QyA9PT0gYi5pbmRleEM7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEluaXRpYWxpemVQYXJ0aWNsZUxpc3RzKGdyb3VwOiBiMlBhcnRpY2xlR3JvdXAsIG5vZGVCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZVtdKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVySW5kZXggPSBncm91cC5HZXRCdWZmZXJJbmRleCgpO1xuICAgIGNvbnN0IHBhcnRpY2xlQ291bnQgPSBncm91cC5HZXRQYXJ0aWNsZUNvdW50KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGU6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSA9IG5vZGVCdWZmZXJbaV07XG4gICAgICBub2RlLmxpc3QgPSBub2RlO1xuICAgICAgbm9kZS5uZXh0ID0gbnVsbDtcbiAgICAgIG5vZGUuY291bnQgPSAxO1xuICAgICAgbm9kZS5pbmRleCA9IGkgKyBidWZmZXJJbmRleDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgTWVyZ2VQYXJ0aWNsZUxpc3RzSW5Db250YWN0KGdyb3VwOiBiMlBhcnRpY2xlR3JvdXAsIG5vZGVCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZVtdKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVySW5kZXggPSBncm91cC5HZXRCdWZmZXJJbmRleCgpO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgLypjb25zdCBiMlBhcnRpY2xlQ29udGFjdCYqL1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICBpZiAoIWdyb3VwLkNvbnRhaW5zUGFydGljbGUoYSkgfHwgIWdyb3VwLkNvbnRhaW5zUGFydGljbGUoYikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsZXQgbGlzdEE6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSA9IG5vZGVCdWZmZXJbYSAtIGJ1ZmZlckluZGV4XS5saXN0O1xuICAgICAgbGV0IGxpc3RCOiBiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlTGlzdE5vZGUgPSBub2RlQnVmZmVyW2IgLSBidWZmZXJJbmRleF0ubGlzdDtcbiAgICAgIGlmIChsaXN0QSA9PT0gbGlzdEIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBUbyBtaW5pbWl6ZSB0aGUgY29zdCBvZiBpbnNlcnRpb24sIG1ha2Ugc3VyZSBsaXN0QSBpcyBsb25nZXIgdGhhblxuICAgICAgLy8gbGlzdEIuXG4gICAgICBpZiAobGlzdEEuY291bnQgPCBsaXN0Qi5jb3VudCkge1xuICAgICAgICBjb25zdCBfdG1wID0gbGlzdEE7XG4gICAgICAgIGxpc3RBID0gbGlzdEI7XG4gICAgICAgIGxpc3RCID0gX3RtcDsgLy8vYjJTd2FwKGxpc3RBLCBsaXN0Qik7XG4gICAgICB9XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQobGlzdEEuY291bnQgPj0gbGlzdEIuY291bnQpO1xuICAgICAgYjJQYXJ0aWNsZVN5c3RlbS5NZXJnZVBhcnRpY2xlTGlzdHMobGlzdEEsIGxpc3RCKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIE1lcmdlUGFydGljbGVMaXN0cyhsaXN0QTogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlLCBsaXN0QjogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlKTogdm9pZCB7XG4gICAgLy8gSW5zZXJ0IGxpc3RCIGJldHdlZW4gaW5kZXggMCBhbmQgMSBvZiBsaXN0QVxuICAgIC8vIEV4YW1wbGU6XG4gICAgLy8gICAgIGxpc3RBID0+IGExID0+IGEyID0+IGEzID0+IG51bGxcbiAgICAvLyAgICAgbGlzdEIgPT4gYjEgPT4gYjIgPT4gbnVsbFxuICAgIC8vIHRvXG4gICAgLy8gICAgIGxpc3RBID0+IGxpc3RCID0+IGIxID0+IGIyID0+IGExID0+IGEyID0+IGEzID0+IG51bGxcbiAgICAvLyBERUJVRzogYjJBc3NlcnQobGlzdEEgIT09IGxpc3RCKTtcbiAgICBmb3IgKGxldCBiOiBiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlTGlzdE5vZGUgPSBsaXN0QjsgOyApIHtcbiAgICAgIGIubGlzdCA9IGxpc3RBO1xuICAgICAgY29uc3QgbmV4dEI6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSB8IG51bGwgPSBiLm5leHQ7XG4gICAgICBpZiAobmV4dEIpIHtcbiAgICAgICAgYiA9IG5leHRCO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYi5uZXh0ID0gbGlzdEEubmV4dDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGxpc3RBLm5leHQgPSBsaXN0QjtcbiAgICBsaXN0QS5jb3VudCArPSBsaXN0Qi5jb3VudDtcbiAgICBsaXN0Qi5jb3VudCA9IDA7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEZpbmRMb25nZXN0UGFydGljbGVMaXN0KGdyb3VwOiBiMlBhcnRpY2xlR3JvdXAsIG5vZGVCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZVtdKTogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlIHtcbiAgICBjb25zdCBwYXJ0aWNsZUNvdW50ID0gZ3JvdXAuR2V0UGFydGljbGVDb3VudCgpO1xuICAgIGxldCByZXN1bHQ6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSA9IG5vZGVCdWZmZXJbMF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGU6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSA9IG5vZGVCdWZmZXJbaV07XG4gICAgICBpZiAocmVzdWx0LmNvdW50IDwgbm9kZS5jb3VudCkge1xuICAgICAgICByZXN1bHQgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIE1lcmdlWm9tYmllUGFydGljbGVMaXN0Tm9kZXMoZ3JvdXA6IGIyUGFydGljbGVHcm91cCwgbm9kZUJ1ZmZlcjogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlW10sIHN1cnZpdmluZ0xpc3Q6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSk6IHZvaWQge1xuICAgIGNvbnN0IHBhcnRpY2xlQ291bnQgPSBncm91cC5HZXRQYXJ0aWNsZUNvdW50KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGU6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSA9IG5vZGVCdWZmZXJbaV07XG4gICAgICBpZiAobm9kZSAhPT0gc3Vydml2aW5nTGlzdCAmJlxuICAgICAgICAodGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbbm9kZS5pbmRleF0gJiBiMlBhcnRpY2xlRmxhZy5iMl96b21iaWVQYXJ0aWNsZSkpIHtcbiAgICAgICAgYjJQYXJ0aWNsZVN5c3RlbS5NZXJnZVBhcnRpY2xlTGlzdEFuZE5vZGUoc3Vydml2aW5nTGlzdCwgbm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBNZXJnZVBhcnRpY2xlTGlzdEFuZE5vZGUobGlzdDogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlLCBub2RlOiBiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlTGlzdE5vZGUpOiB2b2lkIHtcbiAgICAvLyBJbnNlcnQgbm9kZSBiZXR3ZWVuIGluZGV4IDAgYW5kIDEgb2YgbGlzdFxuICAgIC8vIEV4YW1wbGU6XG4gICAgLy8gICAgIGxpc3QgPT4gYTEgPT4gYTIgPT4gYTMgPT4gbnVsbFxuICAgIC8vICAgICBub2RlID0+IG51bGxcbiAgICAvLyB0b1xuICAgIC8vICAgICBsaXN0ID0+IG5vZGUgPT4gYTEgPT4gYTIgPT4gYTMgPT4gbnVsbFxuICAgIC8vIERFQlVHOiBiMkFzc2VydChub2RlICE9PSBsaXN0KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQobm9kZS5saXN0ID09PSBub2RlKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQobm9kZS5jb3VudCA9PT0gMSk7XG4gICAgbm9kZS5saXN0ID0gbGlzdDtcbiAgICBub2RlLm5leHQgPSBsaXN0Lm5leHQ7XG4gICAgbGlzdC5uZXh0ID0gbm9kZTtcbiAgICBsaXN0LmNvdW50Kys7XG4gICAgbm9kZS5jb3VudCA9IDA7XG4gIH1cblxuICBwdWJsaWMgQ3JlYXRlUGFydGljbGVHcm91cHNGcm9tUGFydGljbGVMaXN0KGdyb3VwOiBiMlBhcnRpY2xlR3JvdXAsIG5vZGVCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZVtdLCBzdXJ2aXZpbmdMaXN0OiBiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlTGlzdE5vZGUpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJ0aWNsZUNvdW50ID0gZ3JvdXAuR2V0UGFydGljbGVDb3VudCgpO1xuICAgIGNvbnN0IGRlZiA9IG5ldyBiMlBhcnRpY2xlR3JvdXBEZWYoKTtcbiAgICBkZWYuZ3JvdXBGbGFncyA9IGdyb3VwLkdldEdyb3VwRmxhZ3MoKTtcbiAgICBkZWYudXNlckRhdGEgPSBncm91cC5HZXRVc2VyRGF0YSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBsaXN0OiBiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlTGlzdE5vZGUgPSBub2RlQnVmZmVyW2ldO1xuICAgICAgaWYgKCFsaXN0LmNvdW50IHx8IGxpc3QgPT09IHN1cnZpdmluZ0xpc3QpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQobGlzdC5saXN0ID09PSBsaXN0KTtcbiAgICAgIGNvbnN0IG5ld0dyb3VwOiBiMlBhcnRpY2xlR3JvdXAgPSB0aGlzLkNyZWF0ZVBhcnRpY2xlR3JvdXAoZGVmKTtcbiAgICAgIGZvciAobGV0IG5vZGU6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZSB8IG51bGwgPSBsaXN0OyBub2RlOyBub2RlID0gbm9kZS5uZXh0KSB7XG4gICAgICAgIGNvbnN0IG9sZEluZGV4ID0gbm9kZS5pbmRleDtcbiAgICAgICAgLy8gREVCVUc6IGNvbnN0IGZsYWdzID0gdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbb2xkSW5kZXhdO1xuICAgICAgICAvLyBERUJVRzogYjJBc3NlcnQoIShmbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3pvbWJpZVBhcnRpY2xlKSk7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5DbG9uZVBhcnRpY2xlKG9sZEluZGV4LCBuZXdHcm91cCk7XG4gICAgICAgIHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW29sZEluZGV4XSB8PSBiMlBhcnRpY2xlRmxhZy5iMl96b21iaWVQYXJ0aWNsZTtcbiAgICAgICAgbm9kZS5pbmRleCA9IG5ld0luZGV4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBVcGRhdGVQYWlyc0FuZFRyaWFkc1dpdGhQYXJ0aWNsZUxpc3QoZ3JvdXA6IGIyUGFydGljbGVHcm91cCwgbm9kZUJ1ZmZlcjogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlW10pOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXJJbmRleCA9IGdyb3VwLkdldEJ1ZmZlckluZGV4KCk7XG4gICAgLy8gVXBkYXRlIGluZGljZXMgaW4gcGFpcnMgYW5kIHRyaWFkcy4gSWYgYW4gaW5kZXggYmVsb25ncyB0byB0aGUgZ3JvdXAsXG4gICAgLy8gcmVwbGFjZSBpdCB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGluIG5vZGVCdWZmZXIuXG4gICAgLy8gTm90ZSB0aGF0IG5vZGVCdWZmZXIgaXMgYWxsb2NhdGVkIG9ubHkgZm9yIHRoZSBncm91cCBhbmQgdGhlIGluZGV4IHNob3VsZFxuICAgIC8vIGJlIHNoaWZ0ZWQgYnkgYnVmZmVySW5kZXguXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fcGFpckJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBwYWlyID0gdGhpcy5tX3BhaXJCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBwYWlyLmluZGV4QTtcbiAgICAgIGNvbnN0IGIgPSBwYWlyLmluZGV4QjtcbiAgICAgIGlmIChncm91cC5Db250YWluc1BhcnRpY2xlKGEpKSB7XG4gICAgICAgIHBhaXIuaW5kZXhBID0gbm9kZUJ1ZmZlclthIC0gYnVmZmVySW5kZXhdLmluZGV4O1xuICAgICAgfVxuICAgICAgaWYgKGdyb3VwLkNvbnRhaW5zUGFydGljbGUoYikpIHtcbiAgICAgICAgcGFpci5pbmRleEIgPSBub2RlQnVmZmVyW2IgLSBidWZmZXJJbmRleF0uaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX3RyaWFkQnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IHRyaWFkID0gdGhpcy5tX3RyaWFkQnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gdHJpYWQuaW5kZXhBO1xuICAgICAgY29uc3QgYiA9IHRyaWFkLmluZGV4QjtcbiAgICAgIGNvbnN0IGMgPSB0cmlhZC5pbmRleEM7XG4gICAgICBpZiAoZ3JvdXAuQ29udGFpbnNQYXJ0aWNsZShhKSkge1xuICAgICAgICB0cmlhZC5pbmRleEEgPSBub2RlQnVmZmVyW2EgLSBidWZmZXJJbmRleF0uaW5kZXg7XG4gICAgICB9XG4gICAgICBpZiAoZ3JvdXAuQ29udGFpbnNQYXJ0aWNsZShiKSkge1xuICAgICAgICB0cmlhZC5pbmRleEIgPSBub2RlQnVmZmVyW2IgLSBidWZmZXJJbmRleF0uaW5kZXg7XG4gICAgICB9XG4gICAgICBpZiAoZ3JvdXAuQ29udGFpbnNQYXJ0aWNsZShjKSkge1xuICAgICAgICB0cmlhZC5pbmRleEMgPSBub2RlQnVmZmVyW2MgLSBidWZmZXJJbmRleF0uaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIENvbXB1dGVEZXB0aCgpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWN0R3JvdXBzOiBiMlBhcnRpY2xlQ29udGFjdFtdID0gW107IC8vIFRPRE86IHN0YXRpY1xuICAgIGxldCBjb250YWN0R3JvdXBzQ291bnQgPSAwO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICBjb25zdCBncm91cEEgPSB0aGlzLm1fZ3JvdXBCdWZmZXJbYV07XG4gICAgICBjb25zdCBncm91cEIgPSB0aGlzLm1fZ3JvdXBCdWZmZXJbYl07XG4gICAgICBpZiAoZ3JvdXBBICYmIGdyb3VwQSA9PT0gZ3JvdXBCICYmXG4gICAgICAgIChncm91cEEubV9ncm91cEZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9wYXJ0aWNsZUdyb3VwTmVlZHNVcGRhdGVEZXB0aCkpIHtcbiAgICAgICAgY29udGFjdEdyb3Vwc1tjb250YWN0R3JvdXBzQ291bnQrK10gPSBjb250YWN0O1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBncm91cHNUb1VwZGF0ZTogYjJQYXJ0aWNsZUdyb3VwW10gPSBbXTsgLy8gVE9ETzogc3RhdGljXG4gICAgbGV0IGdyb3Vwc1RvVXBkYXRlQ291bnQgPSAwO1xuICAgIGZvciAobGV0IGdyb3VwID0gdGhpcy5tX2dyb3VwTGlzdDsgZ3JvdXA7IGdyb3VwID0gZ3JvdXAuR2V0TmV4dCgpKSB7XG4gICAgICBpZiAoZ3JvdXAubV9ncm91cEZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9wYXJ0aWNsZUdyb3VwTmVlZHNVcGRhdGVEZXB0aCkge1xuICAgICAgICBncm91cHNUb1VwZGF0ZVtncm91cHNUb1VwZGF0ZUNvdW50KytdID0gZ3JvdXA7XG4gICAgICAgIHRoaXMuU2V0R3JvdXBGbGFncyhncm91cCxcbiAgICAgICAgICBncm91cC5tX2dyb3VwRmxhZ3MgJlxuICAgICAgICAgIH5iMlBhcnRpY2xlR3JvdXBGbGFnLmIyX3BhcnRpY2xlR3JvdXBOZWVkc1VwZGF0ZURlcHRoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGdyb3VwLm1fZmlyc3RJbmRleDsgaSA8IGdyb3VwLm1fbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgICB0aGlzLm1fYWNjdW11bGF0aW9uQnVmZmVyW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBDb21wdXRlIHN1bSBvZiB3ZWlnaHQgb2YgY29udGFjdHMgZXhjZXB0IGJldHdlZW4gZGlmZmVyZW50IGdyb3Vwcy5cbiAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbnRhY3RHcm91cHNDb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gY29udGFjdEdyb3Vwc1trXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4QTtcbiAgICAgIGNvbnN0IGIgPSBjb250YWN0LmluZGV4QjtcbiAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbYV0gKz0gdztcbiAgICAgIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbYl0gKz0gdztcbiAgICB9XG5cbiAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX2RlcHRoQnVmZmVyICE9PSBudWxsKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwc1RvVXBkYXRlQ291bnQ7IGkrKykge1xuICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNUb1VwZGF0ZVtpXTtcbiAgICAgIGZvciAobGV0IGkgPSBncm91cC5tX2ZpcnN0SW5kZXg7IGkgPCBncm91cC5tX2xhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLm1fYWNjdW11bGF0aW9uQnVmZmVyW2ldO1xuICAgICAgICB0aGlzLm1fZGVwdGhCdWZmZXJbaV0gPSB3IDwgMC44ID8gMCA6IGIyX21heEZsb2F0O1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBUaGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgaXMgZXF1YWwgdG8gcGFydGljbGUgbnVtYmVyIGZyb20gdGhlIGRlZXBlc3RcbiAgICAvLyBwYXJ0aWNsZSB0byB0aGUgbmVhcmVzdCBzdXJmYWNlIHBhcnRpY2xlLCBhbmQgaW4gZ2VuZXJhbCBpdCBpcyBzbWFsbGVyXG4gICAgLy8gdGhhbiBzcXJ0IG9mIHRvdGFsIHBhcnRpY2xlIG51bWJlci5cbiAgICAvLy9pbnQzMiBpdGVyYXRpb25Db3VudCA9IChpbnQzMiliMlNxcnQoKGZsb2F0KW1fY291bnQpO1xuICAgIGNvbnN0IGl0ZXJhdGlvbkNvdW50ID0gYjJTcXJ0KHRoaXMubV9jb3VudCkgPj4gMDtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGl0ZXJhdGlvbkNvdW50OyB0KyspIHtcbiAgICAgIGxldCB1cGRhdGVkID0gZmFsc2U7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbnRhY3RHcm91cHNDb3VudDsgaysrKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhY3QgPSBjb250YWN0R3JvdXBzW2tdO1xuICAgICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICAgIGNvbnN0IGIgPSBjb250YWN0LmluZGV4QjtcbiAgICAgICAgY29uc3QgciA9IDEgLSBjb250YWN0LndlaWdodDtcbiAgICAgICAgLy8vZmxvYXQzMiYgYXAwID0gbV9kZXB0aEJ1ZmZlclthXTtcbiAgICAgICAgY29uc3QgYXAwID0gdGhpcy5tX2RlcHRoQnVmZmVyW2FdO1xuICAgICAgICAvLy9mbG9hdDMyJiBicDAgPSBtX2RlcHRoQnVmZmVyW2JdO1xuICAgICAgICBjb25zdCBicDAgPSB0aGlzLm1fZGVwdGhCdWZmZXJbYl07XG4gICAgICAgIGNvbnN0IGFwMSA9IGJwMCArIHI7XG4gICAgICAgIGNvbnN0IGJwMSA9IGFwMCArIHI7XG4gICAgICAgIGlmIChhcDAgPiBhcDEpIHtcbiAgICAgICAgICAvLy9hcDAgPSBhcDE7XG4gICAgICAgICAgdGhpcy5tX2RlcHRoQnVmZmVyW2FdID0gYXAxO1xuICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChicDAgPiBicDEpIHtcbiAgICAgICAgICAvLy9icDAgPSBicDE7XG4gICAgICAgICAgdGhpcy5tX2RlcHRoQnVmZmVyW2JdID0gYnAxO1xuICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXVwZGF0ZWQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzVG9VcGRhdGVDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBncm91cCA9IGdyb3Vwc1RvVXBkYXRlW2ldO1xuICAgICAgZm9yIChsZXQgaSA9IGdyb3VwLm1fZmlyc3RJbmRleDsgaSA8IGdyb3VwLm1fbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMubV9kZXB0aEJ1ZmZlcltpXSA8IGIyX21heEZsb2F0KSB7XG4gICAgICAgICAgdGhpcy5tX2RlcHRoQnVmZmVyW2ldICo9IHRoaXMubV9wYXJ0aWNsZURpYW1ldGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9kZXB0aEJ1ZmZlcltpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgR2V0SW5zaWRlQm91bmRzRW51bWVyYXRvcihhYWJiOiBSZWFkb25seTxiMkFBQkI+KTogYjJQYXJ0aWNsZVN5c3RlbV9JbnNpZGVCb3VuZHNFbnVtZXJhdG9yIHtcbiAgICBjb25zdCBsb3dlclRhZyA9IGIyUGFydGljbGVTeXN0ZW0uY29tcHV0ZVRhZyh0aGlzLm1faW52ZXJzZURpYW1ldGVyICogYWFiYi5sb3dlckJvdW5kLnggLSAxLFxuICAgICAgdGhpcy5tX2ludmVyc2VEaWFtZXRlciAqIGFhYmIubG93ZXJCb3VuZC55IC0gMSk7XG4gICAgY29uc3QgdXBwZXJUYWcgPSBiMlBhcnRpY2xlU3lzdGVtLmNvbXB1dGVUYWcodGhpcy5tX2ludmVyc2VEaWFtZXRlciAqIGFhYmIudXBwZXJCb3VuZC54ICsgMSxcbiAgICAgIHRoaXMubV9pbnZlcnNlRGlhbWV0ZXIgKiBhYWJiLnVwcGVyQm91bmQueSArIDEpO1xuICAgIC8vL2NvbnN0IFByb3h5KiBiZWdpblByb3h5ID0gbV9wcm94eUJ1ZmZlci5CZWdpbigpO1xuICAgIGNvbnN0IGJlZ2luUHJveHkgPSAwO1xuICAgIC8vL2NvbnN0IFByb3h5KiBlbmRQcm94eSA9IG1fcHJveHlCdWZmZXIuRW5kKCk7XG4gICAgY29uc3QgZW5kUHJveHkgPSB0aGlzLm1fcHJveHlCdWZmZXIuY291bnQ7XG4gICAgLy8vY29uc3QgUHJveHkqIGZpcnN0UHJveHkgPSBzdGQ6Omxvd2VyX2JvdW5kKGJlZ2luUHJveHksIGVuZFByb3h5LCBsb3dlclRhZyk7XG4gICAgY29uc3QgZmlyc3RQcm94eSA9IHN0ZF9sb3dlcl9ib3VuZCh0aGlzLm1fcHJveHlCdWZmZXIuZGF0YSwgYmVnaW5Qcm94eSwgZW5kUHJveHksIGxvd2VyVGFnLCBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5LkNvbXBhcmVQcm94eVRhZyk7XG4gICAgLy8vY29uc3QgUHJveHkqIGxhc3RQcm94eSA9IHN0ZDo6dXBwZXJfYm91bmQoZmlyc3RQcm94eSwgZW5kUHJveHksIHVwcGVyVGFnKTtcbiAgICBjb25zdCBsYXN0UHJveHkgPSBzdGRfdXBwZXJfYm91bmQodGhpcy5tX3Byb3h5QnVmZmVyLmRhdGEsIGJlZ2luUHJveHksIGVuZFByb3h5LCB1cHBlclRhZywgYjJQYXJ0aWNsZVN5c3RlbV9Qcm94eS5Db21wYXJlVGFnUHJveHkpO1xuXG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGJlZ2luUHJveHkgPD0gZmlyc3RQcm94eSk7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZpcnN0UHJveHkgPD0gbGFzdFByb3h5KTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQobGFzdFByb3h5IDw9IGVuZFByb3h5KTtcblxuICAgIHJldHVybiBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9JbnNpZGVCb3VuZHNFbnVtZXJhdG9yKHRoaXMsIGxvd2VyVGFnLCB1cHBlclRhZywgZmlyc3RQcm94eSwgbGFzdFByb3h5KTtcbiAgfVxuXG4gIHB1YmxpYyBVcGRhdGVBbGxQYXJ0aWNsZUZsYWdzKCk6IHZvaWQge1xuICAgIHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICB0aGlzLm1fYWxsUGFydGljbGVGbGFncyB8PSB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpXTtcbiAgICB9XG4gICAgdGhpcy5tX25lZWRzVXBkYXRlQWxsUGFydGljbGVGbGFncyA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIFVwZGF0ZUFsbEdyb3VwRmxhZ3MoKTogdm9pZCB7XG4gICAgdGhpcy5tX2FsbEdyb3VwRmxhZ3MgPSAwO1xuICAgIGZvciAobGV0IGdyb3VwID0gdGhpcy5tX2dyb3VwTGlzdDsgZ3JvdXA7IGdyb3VwID0gZ3JvdXAuR2V0TmV4dCgpKSB7XG4gICAgICB0aGlzLm1fYWxsR3JvdXBGbGFncyB8PSBncm91cC5tX2dyb3VwRmxhZ3M7XG4gICAgfVxuICAgIHRoaXMubV9uZWVkc1VwZGF0ZUFsbEdyb3VwRmxhZ3MgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBBZGRDb250YWN0KGE6IG51bWJlciwgYjogbnVtYmVyLCBjb250YWN0czogYjJHcm93YWJsZUJ1ZmZlcjxiMlBhcnRpY2xlQ29udGFjdD4pOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoY29udGFjdHMgPT09IHRoaXMubV9jb250YWN0QnVmZmVyKTtcbiAgICBjb25zdCBmbGFnc19kYXRhID0gdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgcG9zX2RhdGEgPSB0aGlzLm1fcG9zaXRpb25CdWZmZXIuZGF0YTtcbiAgICAvLy9iMlZlYzIgZCA9IG1fcG9zaXRpb25CdWZmZXIuZGF0YVtiXSAtIG1fcG9zaXRpb25CdWZmZXIuZGF0YVthXTtcbiAgICBjb25zdCBkID0gYjJWZWMyLlN1YlZWKHBvc19kYXRhW2JdLCBwb3NfZGF0YVthXSwgYjJQYXJ0aWNsZVN5c3RlbS5BZGRDb250YWN0X3NfZCk7XG4gICAgY29uc3QgZGlzdEJ0UGFydGljbGVzU3EgPSBiMlZlYzIuRG90VlYoZCwgZCk7XG4gICAgaWYgKDAgPCBkaXN0QnRQYXJ0aWNsZXNTcSAmJiBkaXN0QnRQYXJ0aWNsZXNTcSA8IHRoaXMubV9zcXVhcmVkRGlhbWV0ZXIpIHtcbiAgICAgIGNvbnN0IGludkQgPSBiMkludlNxcnQoZGlzdEJ0UGFydGljbGVzU3EpO1xuICAgICAgLy8vYjJQYXJ0aWNsZUNvbnRhY3QmIGNvbnRhY3QgPSBjb250YWN0cy5BcHBlbmQoKTtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fY29udGFjdEJ1ZmZlci5kYXRhW3RoaXMubV9jb250YWN0QnVmZmVyLkFwcGVuZCgpXTtcbiAgICAgIGNvbnRhY3QuaW5kZXhBID0gYTtcbiAgICAgIGNvbnRhY3QuaW5kZXhCID0gYjtcbiAgICAgIGNvbnRhY3QuZmxhZ3MgPSBmbGFnc19kYXRhW2FdIHwgZmxhZ3NfZGF0YVtiXTtcbiAgICAgIGNvbnRhY3Qud2VpZ2h0ID0gMSAtIGRpc3RCdFBhcnRpY2xlc1NxICogaW52RCAqIHRoaXMubV9pbnZlcnNlRGlhbWV0ZXI7XG4gICAgICBjb250YWN0Lm5vcm1hbC54ID0gaW52RCAqIGQueDtcbiAgICAgIGNvbnRhY3Qubm9ybWFsLnkgPSBpbnZEICogZC55O1xuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFkZENvbnRhY3Rfc19kID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBGaW5kQ29udGFjdHNfUmVmZXJlbmNlKGNvbnRhY3RzOiBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVDb250YWN0Pik6IHZvaWQge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydChjb250YWN0cyA9PT0gdGhpcy5tX2NvbnRhY3RCdWZmZXIpO1xuICAgIGNvbnN0IGJlZ2luUHJveHkgPSAwO1xuICAgIGNvbnN0IGVuZFByb3h5ID0gdGhpcy5tX3Byb3h5QnVmZmVyLmNvdW50O1xuXG4gICAgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQgPSAwO1xuICAgIGZvciAobGV0IGEgPSBiZWdpblByb3h5LCBjID0gYmVnaW5Qcm94eTsgYSA8IGVuZFByb3h5OyBhKyspIHtcbiAgICAgIGNvbnN0IHJpZ2h0VGFnID0gYjJQYXJ0aWNsZVN5c3RlbS5jb21wdXRlUmVsYXRpdmVUYWcodGhpcy5tX3Byb3h5QnVmZmVyLmRhdGFbYV0udGFnLCAxLCAwKTtcbiAgICAgIGZvciAobGV0IGIgPSBhICsgMTsgYiA8IGVuZFByb3h5OyBiKyspIHtcbiAgICAgICAgaWYgKHJpZ2h0VGFnIDwgdGhpcy5tX3Byb3h5QnVmZmVyLmRhdGFbYl0udGFnKSB7IGJyZWFrOyB9XG4gICAgICAgIHRoaXMuQWRkQ29udGFjdCh0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVthXS5pbmRleCwgdGhpcy5tX3Byb3h5QnVmZmVyLmRhdGFbYl0uaW5kZXgsIHRoaXMubV9jb250YWN0QnVmZmVyKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvdHRvbUxlZnRUYWcgPSBiMlBhcnRpY2xlU3lzdGVtLmNvbXB1dGVSZWxhdGl2ZVRhZyh0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVthXS50YWcsIC0xLCAxKTtcbiAgICAgIGZvciAoOyBjIDwgZW5kUHJveHk7IGMrKykge1xuICAgICAgICBpZiAoYm90dG9tTGVmdFRhZyA8PSB0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVtjXS50YWcpIHsgYnJlYWs7IH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvdHRvbVJpZ2h0VGFnID0gYjJQYXJ0aWNsZVN5c3RlbS5jb21wdXRlUmVsYXRpdmVUYWcodGhpcy5tX3Byb3h5QnVmZmVyLmRhdGFbYV0udGFnLCAxLCAxKTtcbiAgICAgIGZvciAobGV0IGIgPSBjOyBiIDwgZW5kUHJveHk7IGIrKykge1xuICAgICAgICBpZiAoYm90dG9tUmlnaHRUYWcgPCB0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVtiXS50YWcpIHsgYnJlYWs7IH1cbiAgICAgICAgdGhpcy5BZGRDb250YWN0KHRoaXMubV9wcm94eUJ1ZmZlci5kYXRhW2FdLmluZGV4LCB0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVtiXS5pbmRleCwgdGhpcy5tX2NvbnRhY3RCdWZmZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vL3ZvaWQgUmVvcmRlckZvckZpbmRDb250YWN0KEZpbmRDb250YWN0SW5wdXQqIHJlb3JkZXJlZCwgaW50IGFsaWduZWRDb3VudCkgY29uc3Q7XG4gIC8vL3ZvaWQgR2F0aGVyQ2hlY2tzT25lUGFydGljbGUoY29uc3QgdWludDMyIGJvdW5kLCBjb25zdCBpbnQgc3RhcnRJbmRleCwgY29uc3QgaW50IHBhcnRpY2xlSW5kZXgsIGludCogbmV4dFVuY2hlY2tlZEluZGV4LCBiMkdyb3dhYmxlQnVmZmVyPEZpbmRDb250YWN0Q2hlY2s+JiBjaGVja3MpIGNvbnN0O1xuICAvLy92b2lkIEdhdGhlckNoZWNrcyhiMkdyb3dhYmxlQnVmZmVyPEZpbmRDb250YWN0Q2hlY2s+JiBjaGVja3MpIGNvbnN0O1xuICAvLy92b2lkIEZpbmRDb250YWN0c19TaW1kKGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZUNvbnRhY3Q+JiBjb250YWN0cykgY29uc3Q7XG5cbiAgcHVibGljIEZpbmRDb250YWN0cyhjb250YWN0czogYjJHcm93YWJsZUJ1ZmZlcjxiMlBhcnRpY2xlQ29udGFjdD4pOiB2b2lkIHtcbiAgICB0aGlzLkZpbmRDb250YWN0c19SZWZlcmVuY2UoY29udGFjdHMpO1xuICB9XG5cbiAgLy8vc3RhdGljIHZvaWQgVXBkYXRlUHJveHlUYWdzKGNvbnN0IHVpbnQzMiogY29uc3QgdGFncywgYjJHcm93YWJsZUJ1ZmZlcjxQcm94eT4mIHByb3hpZXMpO1xuICAvLy9zdGF0aWMgYm9vbCBQcm94eUJ1ZmZlckhhc0luZGV4KGludDMyIGluZGV4LCBjb25zdCBQcm94eSogY29uc3QgYSwgaW50IGNvdW50KTtcbiAgLy8vc3RhdGljIGludCBOdW1Qcm94aWVzV2l0aFNhbWVUYWcoY29uc3QgUHJveHkqIGNvbnN0IGEsIGNvbnN0IFByb3h5KiBjb25zdCBiLCBpbnQgY291bnQpO1xuICAvLy9zdGF0aWMgYm9vbCBBcmVQcm94eUJ1ZmZlcnNUaGVTYW1lKGNvbnN0IGIyR3Jvd2FibGVCdWZmZXI8UHJveHk+JiBhLCBjb25zdCBiMkdyb3dhYmxlQnVmZmVyPFByb3h5PiYgYik7XG5cbiAgcHVibGljIFVwZGF0ZVByb3hpZXNfUmVmZXJlbmNlKHByb3hpZXM6IGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZVN5c3RlbV9Qcm94eT4pOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQocHJveGllcyA9PT0gdGhpcy5tX3Byb3h5QnVmZmVyKTtcbiAgICBjb25zdCBwb3NfZGF0YSA9IHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhO1xuICAgIGNvbnN0IGludl9kaWFtID0gdGhpcy5tX2ludmVyc2VEaWFtZXRlcjtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9wcm94eUJ1ZmZlci5jb3VudDsgKytrKSB7XG4gICAgICBjb25zdCBwcm94eSA9IHRoaXMubV9wcm94eUJ1ZmZlci5kYXRhW2tdO1xuICAgICAgY29uc3QgaSA9IHByb3h5LmluZGV4O1xuICAgICAgY29uc3QgcCA9IHBvc19kYXRhW2ldO1xuICAgICAgcHJveHkudGFnID0gYjJQYXJ0aWNsZVN5c3RlbS5jb21wdXRlVGFnKGludl9kaWFtICogcC54LCBpbnZfZGlhbSAqIHAueSk7XG4gICAgfVxuICB9XG5cbiAgLy8vdm9pZCBVcGRhdGVQcm94aWVzX1NpbWQoYjJHcm93YWJsZUJ1ZmZlcjxQcm94eT4mIHByb3hpZXMpIGNvbnN0O1xuXG4gIHB1YmxpYyBVcGRhdGVQcm94aWVzKHByb3hpZXM6IGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZVN5c3RlbV9Qcm94eT4pOiB2b2lkIHtcbiAgICB0aGlzLlVwZGF0ZVByb3hpZXNfUmVmZXJlbmNlKHByb3hpZXMpO1xuICB9XG5cbiAgcHVibGljIFNvcnRQcm94aWVzKHByb3hpZXM6IGIyR3Jvd2FibGVCdWZmZXI8YjJQYXJ0aWNsZVN5c3RlbV9Qcm94eT4pOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQocHJveGllcyA9PT0gdGhpcy5tX3Byb3h5QnVmZmVyKTtcblxuICAgIC8vL3N0ZDo6c29ydChwcm94aWVzLkJlZ2luKCksIHByb3hpZXMuRW5kKCkpO1xuICAgIHN0ZF9zb3J0KHRoaXMubV9wcm94eUJ1ZmZlci5kYXRhLCAwLCB0aGlzLm1fcHJveHlCdWZmZXIuY291bnQsIGIyUGFydGljbGVTeXN0ZW1fUHJveHkuQ29tcGFyZVByb3h5UHJveHkpO1xuICB9XG5cbiAgcHVibGljIEZpbHRlckNvbnRhY3RzKGNvbnRhY3RzOiBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVDb250YWN0Pik6IHZvaWQge1xuICAgIC8vIE9wdGlvbmFsbHkgZmlsdGVyIHRoZSBjb250YWN0LlxuICAgIGNvbnN0IGNvbnRhY3RGaWx0ZXIgPSB0aGlzLkdldFBhcnRpY2xlQ29udGFjdEZpbHRlcigpO1xuICAgIGlmIChjb250YWN0RmlsdGVyID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8vIGNvbnRhY3RzLlJlbW92ZUlmKGIyUGFydGljbGVDb250YWN0UmVtb3ZlUHJlZGljYXRlKHRoaXMsIGNvbnRhY3RGaWx0ZXIpKTtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoY29udGFjdHMgPT09IHRoaXMubV9jb250YWN0QnVmZmVyKTtcbiAgICBjb25zdCBzeXN0ZW0gPSB0aGlzO1xuICAgIGNvbnN0IHByZWRpY2F0ZSA9IChjb250YWN0OiBiMlBhcnRpY2xlQ29udGFjdCk6IGJvb2xlYW4gPT4ge1xuICAgICAgcmV0dXJuICgoY29udGFjdC5mbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3BhcnRpY2xlQ29udGFjdEZpbHRlclBhcnRpY2xlKSAhPT0gMCkgJiYgIWNvbnRhY3RGaWx0ZXIuU2hvdWxkQ29sbGlkZVBhcnRpY2xlUGFydGljbGUoc3lzdGVtLCBjb250YWN0LmluZGV4QSwgY29udGFjdC5pbmRleEIpO1xuICAgIH07XG4gICAgdGhpcy5tX2NvbnRhY3RCdWZmZXIuUmVtb3ZlSWYocHJlZGljYXRlKTtcbiAgfVxuXG4gIHB1YmxpYyBOb3RpZnlDb250YWN0TGlzdGVuZXJQcmVDb250YWN0KHBhcnRpY2xlUGFpcnM6IGIyUGFydGljbGVQYWlyU2V0KTogdm9pZCB7XG4gICAgY29uc3QgY29udGFjdExpc3RlbmVyID0gdGhpcy5HZXRQYXJ0aWNsZUNvbnRhY3RMaXN0ZW5lcigpO1xuICAgIGlmIChjb250YWN0TGlzdGVuZXIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLy9wYXJ0aWNsZVBhaXJzLkluaXRpYWxpemUobV9jb250YWN0QnVmZmVyLkJlZ2luKCksIG1fY29udGFjdEJ1ZmZlci5HZXRDb3VudCgpLCBHZXRGbGFnc0J1ZmZlcigpKTtcbiAgICBwYXJ0aWNsZVBhaXJzLkluaXRpYWxpemUodGhpcy5tX2NvbnRhY3RCdWZmZXIsIHRoaXMubV9mbGFnc0J1ZmZlcik7XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoKTsgLy8gVE9ETzogbm90aWZ5XG4gIH1cblxuICBwdWJsaWMgTm90aWZ5Q29udGFjdExpc3RlbmVyUG9zdENvbnRhY3QocGFydGljbGVQYWlyczogYjJQYXJ0aWNsZVBhaXJTZXQpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWN0TGlzdGVuZXIgPSB0aGlzLkdldFBhcnRpY2xlQ29udGFjdExpc3RlbmVyKCk7XG4gICAgaWYgKGNvbnRhY3RMaXN0ZW5lciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgbmV3IGNvbnRhY3RzLCByZXBvcnRpbmcgYW55IG5ldyBvbmVzLCBhbmRcbiAgICAvLyBcImludmFsaWRhdGluZ1wiIHRoZSBvbmVzIHRoYXQgc3RpbGwgZXhpc3QuXG4gICAgLy8vY29uc3QgYjJQYXJ0aWNsZUNvbnRhY3QqIGNvbnN0IGVuZENvbnRhY3QgPSBtX2NvbnRhY3RCdWZmZXIuRW5kKCk7XG4gICAgLy8vZm9yIChiMlBhcnRpY2xlQ29udGFjdCogY29udGFjdCA9IG1fY29udGFjdEJ1ZmZlci5CZWdpbigpOyBjb250YWN0IDwgZW5kQ29udGFjdDsgKytjb250YWN0KVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7ICsraykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICAvLy9QYXJ0aWNsZVBhaXIgcGFpcjtcbiAgICAgIC8vL3BhaXIuZmlyc3QgPSBjb250YWN0LkdldEluZGV4QSgpO1xuICAgICAgLy8vcGFpci5zZWNvbmQgPSBjb250YWN0LkdldEluZGV4QigpO1xuICAgICAgLy8vY29uc3QgaW50MzIgaXRlbUluZGV4ID0gcGFydGljbGVQYWlycy5GaW5kKHBhaXIpO1xuICAgICAgY29uc3QgaXRlbUluZGV4ID0gLTE7IC8vIFRPRE9cbiAgICAgIGlmIChpdGVtSW5kZXggPj0gMCkge1xuICAgICAgICAvLyBBbHJlYWR5IHRvdWNoaW5nLCBpZ25vcmUgdGhpcyBjb250YWN0LlxuICAgICAgICBwYXJ0aWNsZVBhaXJzLkludmFsaWRhdGUoaXRlbUluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEp1c3Qgc3RhcnRlZCB0b3VjaGluZywgaW5mb3JtIHRoZSBsaXN0ZW5lci5cbiAgICAgICAgY29udGFjdExpc3RlbmVyLkJlZ2luQ29udGFjdFBhcnRpY2xlUGFydGljbGUodGhpcywgY29udGFjdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVwb3J0IHBhcnRpY2xlcyB0aGF0IGFyZSBubyBsb25nZXIgdG91Y2hpbmcuXG4gICAgLy8gVGhhdCBpcywgYW55IHBhaXJzIHRoYXQgd2VyZSBub3QgaW52YWxpZGF0ZWQgYWJvdmUuXG4gICAgLy8vY29uc3QgaW50MzIgcGFpckNvdW50ID0gcGFydGljbGVQYWlycy5HZXRDb3VudCgpO1xuICAgIC8vL2NvbnN0IFBhcnRpY2xlUGFpciogY29uc3QgcGFpcnMgPSBwYXJ0aWNsZVBhaXJzLkdldEJ1ZmZlcigpO1xuICAgIC8vL2NvbnN0IGludDgqIGNvbnN0IHZhbGlkID0gcGFydGljbGVQYWlycy5HZXRWYWxpZEJ1ZmZlcigpO1xuICAgIC8vL2ZvciAoaW50MzIgaSA9IDA7IGkgPCBwYWlyQ291bnQ7ICsraSlcbiAgICAvLy97XG4gICAgLy8vICBpZiAodmFsaWRbaV0pXG4gICAgLy8vICB7XG4gICAgLy8vICAgIGNvbnRhY3RMaXN0ZW5lci5FbmRDb250YWN0UGFydGljbGVQYXJ0aWNsZSh0aGlzLCBwYWlyc1tpXS5maXJzdCwgcGFpcnNbaV0uc2Vjb25kKTtcbiAgICAvLy8gIH1cbiAgICAvLy99XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoKTsgLy8gVE9ETzogbm90aWZ5XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGIyUGFydGljbGVDb250YWN0SXNab21iaWUoY29udGFjdDogYjJQYXJ0aWNsZUNvbnRhY3QpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKGNvbnRhY3QuZmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl96b21iaWVQYXJ0aWNsZSkgPT09IGIyUGFydGljbGVGbGFnLmIyX3pvbWJpZVBhcnRpY2xlO1xuICB9XG5cbiAgcHVibGljIFVwZGF0ZUNvbnRhY3RzKGV4Y2VwdFpvbWJpZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuVXBkYXRlUHJveGllcyh0aGlzLm1fcHJveHlCdWZmZXIpO1xuICAgIHRoaXMuU29ydFByb3hpZXModGhpcy5tX3Byb3h5QnVmZmVyKTtcblxuICAgIGNvbnN0IHBhcnRpY2xlUGFpcnMgPSBuZXcgYjJQYXJ0aWNsZVBhaXJTZXQoKTsgLy8gVE9ETzogc3RhdGljXG4gICAgdGhpcy5Ob3RpZnlDb250YWN0TGlzdGVuZXJQcmVDb250YWN0KHBhcnRpY2xlUGFpcnMpO1xuXG4gICAgdGhpcy5GaW5kQ29udGFjdHModGhpcy5tX2NvbnRhY3RCdWZmZXIpO1xuICAgIHRoaXMuRmlsdGVyQ29udGFjdHModGhpcy5tX2NvbnRhY3RCdWZmZXIpO1xuXG4gICAgdGhpcy5Ob3RpZnlDb250YWN0TGlzdGVuZXJQb3N0Q29udGFjdChwYXJ0aWNsZVBhaXJzKTtcblxuICAgIGlmIChleGNlcHRab21iaWUpIHtcbiAgICAgIHRoaXMubV9jb250YWN0QnVmZmVyLlJlbW92ZUlmKGIyUGFydGljbGVTeXN0ZW0uYjJQYXJ0aWNsZUNvbnRhY3RJc1pvbWJpZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIE5vdGlmeUJvZHlDb250YWN0TGlzdGVuZXJQcmVDb250YWN0KGZpeHR1cmVTZXQ6IGIyUGFydGljbGVTeXN0ZW1fRml4dHVyZVBhcnRpY2xlU2V0KTogdm9pZCB7XG4gICAgY29uc3QgY29udGFjdExpc3RlbmVyID0gdGhpcy5HZXRGaXh0dXJlQ29udGFjdExpc3RlbmVyKCk7XG4gICAgaWYgKGNvbnRhY3RMaXN0ZW5lciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vL2ZpeHR1cmVTZXQuSW5pdGlhbGl6ZShtX2JvZHlDb250YWN0QnVmZmVyLkJlZ2luKCksIG1fYm9keUNvbnRhY3RCdWZmZXIuR2V0Q291bnQoKSwgR2V0RmxhZ3NCdWZmZXIoKSk7XG4gICAgZml4dHVyZVNldC5Jbml0aWFsaXplKHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlciwgdGhpcy5tX2ZsYWdzQnVmZmVyKTtcblxuICAgIHRocm93IG5ldyBFcnJvcigpOyAvLyBUT0RPOiBub3RpZnlcbiAgfVxuXG4gIHB1YmxpYyBOb3RpZnlCb2R5Q29udGFjdExpc3RlbmVyUG9zdENvbnRhY3QoZml4dHVyZVNldDogYjJQYXJ0aWNsZVN5c3RlbV9GaXh0dXJlUGFydGljbGVTZXQpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWN0TGlzdGVuZXIgPSB0aGlzLkdldEZpeHR1cmVDb250YWN0TGlzdGVuZXIoKTtcbiAgICBpZiAoY29udGFjdExpc3RlbmVyID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBuZXcgY29udGFjdHMsIHJlcG9ydGluZyBhbnkgbmV3IG9uZXMsIGFuZFxuICAgIC8vIFwiaW52YWxpZGF0aW5nXCIgdGhlIG9uZXMgdGhhdCBzdGlsbCBleGlzdC5cbiAgICAvLy9mb3IgKGIyUGFydGljbGVCb2R5Q29udGFjdCogY29udGFjdCA9IG1fYm9keUNvbnRhY3RCdWZmZXIuQmVnaW4oKTsgY29udGFjdCAhPT0gbV9ib2R5Q29udGFjdEJ1ZmZlci5FbmQoKTsgKytjb250YWN0KVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydChjb250YWN0ICE9PSBudWxsKTtcbiAgICAgIC8vL0ZpeHR1cmVQYXJ0aWNsZSBmaXh0dXJlUGFydGljbGVUb0ZpbmQ7XG4gICAgICAvLy9maXh0dXJlUGFydGljbGVUb0ZpbmQuZmlyc3QgPSBjb250YWN0LmZpeHR1cmU7XG4gICAgICAvLy9maXh0dXJlUGFydGljbGVUb0ZpbmQuc2Vjb25kID0gY29udGFjdC5pbmRleDtcbiAgICAgIC8vL2NvbnN0IGludDMyIGluZGV4ID0gZml4dHVyZVNldC5GaW5kKGZpeHR1cmVQYXJ0aWNsZVRvRmluZCk7XG4gICAgICBjb25zdCBpbmRleCA9IC0xOyAvLyBUT0RPXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAvLyBBbHJlYWR5IHRvdWNoaW5nIHJlbW92ZSB0aGlzIGZyb20gdGhlIHNldC5cbiAgICAgICAgZml4dHVyZVNldC5JbnZhbGlkYXRlKGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEp1c3Qgc3RhcnRlZCB0b3VjaGluZywgcmVwb3J0IGl0IVxuICAgICAgICBjb250YWN0TGlzdGVuZXIuQmVnaW5Db250YWN0Rml4dHVyZVBhcnRpY2xlKHRoaXMsIGNvbnRhY3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBjb250YWN0IGxpc3RlbmVyIGlzIGVuYWJsZWQsIHJlcG9ydCBhbGwgZml4dHVyZXMgdGhhdCBhcmUgbm9cbiAgICAvLyBsb25nZXIgaW4gY29udGFjdCB3aXRoIHBhcnRpY2xlcy5cbiAgICAvLy9jb25zdCBGaXh0dXJlUGFydGljbGUqIGNvbnN0IGZpeHR1cmVQYXJ0aWNsZXMgPSBmaXh0dXJlU2V0LkdldEJ1ZmZlcigpO1xuICAgIC8vL2NvbnN0IGludDgqIGNvbnN0IGZpeHR1cmVQYXJ0aWNsZXNWYWxpZCA9IGZpeHR1cmVTZXQuR2V0VmFsaWRCdWZmZXIoKTtcbiAgICAvLy9jb25zdCBpbnQzMiBmaXh0dXJlUGFydGljbGVDb3VudCA9IGZpeHR1cmVTZXQuR2V0Q291bnQoKTtcbiAgICAvLy9mb3IgKGludDMyIGkgPSAwOyBpIDwgZml4dHVyZVBhcnRpY2xlQ291bnQ7ICsraSlcbiAgICAvLy97XG4gICAgLy8vICBpZiAoZml4dHVyZVBhcnRpY2xlc1ZhbGlkW2ldKVxuICAgIC8vLyAge1xuICAgIC8vLyAgICBjb25zdCBGaXh0dXJlUGFydGljbGUqIGNvbnN0IGZpeHR1cmVQYXJ0aWNsZSA9ICZmaXh0dXJlUGFydGljbGVzW2ldO1xuICAgIC8vLyAgICBjb250YWN0TGlzdGVuZXIuRW5kQ29udGFjdEZpeHR1cmVQYXJ0aWNsZShmaXh0dXJlUGFydGljbGUuZmlyc3QsIHRoaXMsIGZpeHR1cmVQYXJ0aWNsZS5zZWNvbmQpO1xuICAgIC8vLyAgfVxuICAgIC8vL31cblxuICAgIHRocm93IG5ldyBFcnJvcigpOyAvLyBUT0RPOiBub3RpZnlcbiAgfVxuXG4gIHB1YmxpYyBVcGRhdGVCb2R5Q29udGFjdHMoKTogdm9pZCB7XG4gICAgY29uc3Qgc19hYWJiID0gYjJQYXJ0aWNsZVN5c3RlbS5VcGRhdGVCb2R5Q29udGFjdHNfc19hYWJiO1xuXG4gICAgLy8gSWYgdGhlIHBhcnRpY2xlIGNvbnRhY3QgbGlzdGVuZXIgaXMgZW5hYmxlZCwgZ2VuZXJhdGUgYSBzZXQgb2ZcbiAgICAvLyBmaXh0dXJlIC8gcGFydGljbGUgY29udGFjdHMuXG4gICAgY29uc3QgZml4dHVyZVNldCA9IG5ldyBiMlBhcnRpY2xlU3lzdGVtX0ZpeHR1cmVQYXJ0aWNsZVNldCgpOyAvLyBUT0RPOiBzdGF0aWNcbiAgICB0aGlzLk5vdGlmeUJvZHlDb250YWN0TGlzdGVuZXJQcmVDb250YWN0KGZpeHR1cmVTZXQpO1xuXG4gICAgaWYgKHRoaXMubV9zdHVja1RocmVzaG9sZCA+IDApIHtcbiAgICAgIGNvbnN0IHBhcnRpY2xlQ291bnQgPSB0aGlzLkdldFBhcnRpY2xlQ291bnQoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7XG4gICAgICAgIC8vIERldGVjdCBzdHVjayBwYXJ0aWNsZXMsIHNlZSBjb21tZW50IGluXG4gICAgICAgIC8vIGIyUGFydGljbGVTeXN0ZW06OkRldGVjdFN0dWNrUGFydGljbGUoKVxuICAgICAgICB0aGlzLm1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlci5kYXRhW2ldID0gMDtcbiAgICAgICAgaWYgKHRoaXMubV90aW1lc3RhbXAgPiAodGhpcy5tX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YVtpXSArIDEpKSB7XG4gICAgICAgICAgdGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGFbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5TZXRDb3VudCgwKTtcbiAgICB0aGlzLm1fc3R1Y2tQYXJ0aWNsZUJ1ZmZlci5TZXRDb3VudCgwKTtcblxuICAgIGNvbnN0IGFhYmIgPSBzX2FhYmI7XG4gICAgdGhpcy5Db21wdXRlQUFCQihhYWJiKTtcblxuICAgIGlmICh0aGlzLlVwZGF0ZUJvZHlDb250YWN0c19jYWxsYmFjayA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5VcGRhdGVCb2R5Q29udGFjdHNfY2FsbGJhY2sgPSBuZXcgYjJQYXJ0aWNsZVN5c3RlbV9VcGRhdGVCb2R5Q29udGFjdHNDYWxsYmFjayh0aGlzKTtcbiAgICB9XG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLlVwZGF0ZUJvZHlDb250YWN0c19jYWxsYmFjaztcbiAgICBjYWxsYmFjay5tX2NvbnRhY3RGaWx0ZXIgPSB0aGlzLkdldEZpeHR1cmVDb250YWN0RmlsdGVyKCk7XG4gICAgdGhpcy5tX3dvcmxkLlF1ZXJ5QUFCQihjYWxsYmFjaywgYWFiYik7XG5cbiAgICBpZiAodGhpcy5tX2RlZi5zdHJpY3RDb250YWN0Q2hlY2spIHtcbiAgICAgIHRoaXMuUmVtb3ZlU3B1cmlvdXNCb2R5Q29udGFjdHMoKTtcbiAgICB9XG5cbiAgICB0aGlzLk5vdGlmeUJvZHlDb250YWN0TGlzdGVuZXJQb3N0Q29udGFjdChmaXh0dXJlU2V0KTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFVwZGF0ZUJvZHlDb250YWN0c19zX2FhYmIgPSBuZXcgYjJBQUJCKCk7XG4gIHB1YmxpYyBVcGRhdGVCb2R5Q29udGFjdHNfY2FsbGJhY2s6IGIyUGFydGljbGVTeXN0ZW1fVXBkYXRlQm9keUNvbnRhY3RzQ2FsbGJhY2sgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgU29sdmUoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHNfc3ViU3RlcCA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVfc19zdWJTdGVwO1xuICAgIGlmICh0aGlzLm1fY291bnQgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgcGFydGljbGUgbGlmZXRpbWVzIGFyZSBlbmFibGVkLCBkZXN0cm95IHBhcnRpY2xlcyB0aGF0IGFyZSB0b28gb2xkLlxuICAgIGlmICh0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSkge1xuICAgICAgdGhpcy5Tb2x2ZUxpZmV0aW1lcyhzdGVwKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfem9tYmllUGFydGljbGUpIHtcbiAgICAgIHRoaXMuU29sdmVab21iaWUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9uZWVkc1VwZGF0ZUFsbFBhcnRpY2xlRmxhZ3MpIHtcbiAgICAgIHRoaXMuVXBkYXRlQWxsUGFydGljbGVGbGFncygpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX25lZWRzVXBkYXRlQWxsR3JvdXBGbGFncykge1xuICAgICAgdGhpcy5VcGRhdGVBbGxHcm91cEZsYWdzKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fcGF1c2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodGhpcy5tX2l0ZXJhdGlvbkluZGV4ID0gMDsgdGhpcy5tX2l0ZXJhdGlvbkluZGV4IDwgc3RlcC5wYXJ0aWNsZUl0ZXJhdGlvbnM7IHRoaXMubV9pdGVyYXRpb25JbmRleCsrKSB7XG4gICAgICArK3RoaXMubV90aW1lc3RhbXA7XG4gICAgICBjb25zdCBzdWJTdGVwID0gc19zdWJTdGVwLkNvcHkoc3RlcCk7XG4gICAgICBzdWJTdGVwLmR0IC89IHN0ZXAucGFydGljbGVJdGVyYXRpb25zO1xuICAgICAgc3ViU3RlcC5pbnZfZHQgKj0gc3RlcC5wYXJ0aWNsZUl0ZXJhdGlvbnM7XG4gICAgICB0aGlzLlVwZGF0ZUNvbnRhY3RzKGZhbHNlKTtcbiAgICAgIHRoaXMuVXBkYXRlQm9keUNvbnRhY3RzKCk7XG4gICAgICB0aGlzLkNvbXB1dGVXZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLm1fYWxsR3JvdXBGbGFncyAmIGIyUGFydGljbGVHcm91cEZsYWcuYjJfcGFydGljbGVHcm91cE5lZWRzVXBkYXRlRGVwdGgpIHtcbiAgICAgICAgdGhpcy5Db21wdXRlRGVwdGgoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3JlYWN0aXZlUGFydGljbGUpIHtcbiAgICAgICAgdGhpcy5VcGRhdGVQYWlyc0FuZFRyaWFkc1dpdGhSZWFjdGl2ZVBhcnRpY2xlcygpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubV9oYXNGb3JjZSkge1xuICAgICAgICB0aGlzLlNvbHZlRm9yY2Uoc3ViU3RlcCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tX2FsbFBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl92aXNjb3VzUGFydGljbGUpIHtcbiAgICAgICAgdGhpcy5Tb2x2ZVZpc2NvdXMoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3JlcHVsc2l2ZVBhcnRpY2xlKSB7XG4gICAgICAgIHRoaXMuU29sdmVSZXB1bHNpdmUoc3ViU3RlcCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tX2FsbFBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9wb3dkZXJQYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLlNvbHZlUG93ZGVyKHN1YlN0ZXApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfdGVuc2lsZVBhcnRpY2xlKSB7XG4gICAgICAgIHRoaXMuU29sdmVUZW5zaWxlKHN1YlN0ZXApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubV9hbGxHcm91cEZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9zb2xpZFBhcnRpY2xlR3JvdXApIHtcbiAgICAgICAgdGhpcy5Tb2x2ZVNvbGlkKHN1YlN0ZXApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfY29sb3JNaXhpbmdQYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLlNvbHZlQ29sb3JNaXhpbmcoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuU29sdmVHcmF2aXR5KHN1YlN0ZXApO1xuICAgICAgaWYgKHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfc3RhdGljUHJlc3N1cmVQYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLlNvbHZlU3RhdGljUHJlc3N1cmUoc3ViU3RlcCk7XG4gICAgICB9XG4gICAgICB0aGlzLlNvbHZlUHJlc3N1cmUoc3ViU3RlcCk7XG4gICAgICB0aGlzLlNvbHZlRGFtcGluZyhzdWJTdGVwKTtcbiAgICAgIGlmICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVTeXN0ZW0ua19leHRyYURhbXBpbmdGbGFncykge1xuICAgICAgICB0aGlzLlNvbHZlRXh0cmFEYW1waW5nKCk7XG4gICAgICB9XG4gICAgICAvLyBTb2x2ZUVsYXN0aWMgYW5kIFNvbHZlU3ByaW5nIHJlZmVyIHRoZSBjdXJyZW50IHZlbG9jaXRpZXMgZm9yXG4gICAgICAvLyBudW1lcmljYWwgc3RhYmlsaXR5LCB0aGV5IHNob3VsZCBiZSBjYWxsZWQgYXMgbGF0ZSBhcyBwb3NzaWJsZS5cbiAgICAgIGlmICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX2VsYXN0aWNQYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLlNvbHZlRWxhc3RpYyhzdWJTdGVwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3NwcmluZ1BhcnRpY2xlKSB7XG4gICAgICAgIHRoaXMuU29sdmVTcHJpbmcoc3ViU3RlcCk7XG4gICAgICB9XG4gICAgICB0aGlzLkxpbWl0VmVsb2NpdHkoc3ViU3RlcCk7XG4gICAgICBpZiAodGhpcy5tX2FsbEdyb3VwRmxhZ3MgJiBiMlBhcnRpY2xlR3JvdXBGbGFnLmIyX3JpZ2lkUGFydGljbGVHcm91cCkge1xuICAgICAgICB0aGlzLlNvbHZlUmlnaWREYW1waW5nKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tX2FsbFBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9iYXJyaWVyUGFydGljbGUpIHtcbiAgICAgICAgdGhpcy5Tb2x2ZUJhcnJpZXIoc3ViU3RlcCk7XG4gICAgICB9XG4gICAgICAvLyBTb2x2ZUNvbGxpc2lvbiwgU29sdmVSaWdpZCBhbmQgU29sdmVXYWxsIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXJcbiAgICAgIC8vIG90aGVyIGZvcmNlIGZ1bmN0aW9ucyBiZWNhdXNlIHRoZXkgbWF5IHJlcXVpcmUgcGFydGljbGVzIHRvIGhhdmVcbiAgICAgIC8vIHNwZWNpZmljIHZlbG9jaXRpZXMuXG4gICAgICB0aGlzLlNvbHZlQ29sbGlzaW9uKHN1YlN0ZXApO1xuICAgICAgaWYgKHRoaXMubV9hbGxHcm91cEZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9yaWdpZFBhcnRpY2xlR3JvdXApIHtcbiAgICAgICAgdGhpcy5Tb2x2ZVJpZ2lkKHN1YlN0ZXApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfd2FsbFBhcnRpY2xlKSB7XG4gICAgICAgIHRoaXMuU29sdmVXYWxsKCk7XG4gICAgICB9XG4gICAgICAvLyBUaGUgcGFydGljbGUgcG9zaXRpb25zIGNhbiBiZSB1cGRhdGVkIG9ubHkgYXQgdGhlIGVuZCBvZiBzdWJzdGVwLlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7IGkrKykge1xuICAgICAgICAvLy9tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbaV0gKz0gc3ViU3RlcC5kdCAqIG1fdmVsb2NpdHlCdWZmZXIuZGF0YVtpXTtcbiAgICAgICAgdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbaV0uU2VsZk11bEFkZChzdWJTdGVwLmR0LCB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVfc19zdWJTdGVwID0gbmV3IGIyVGltZVN0ZXAoKTtcblxuICBwdWJsaWMgU29sdmVDb2xsaXNpb24oc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHNfYWFiYiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVDb2xsaXNpb25fc19hYWJiO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcblxuICAgIC8vIFRoaXMgZnVuY3Rpb24gZGV0ZWN0cyBwYXJ0aWNsZXMgd2hpY2ggYXJlIGNyb3NzaW5nIGJvdW5kYXJ5IG9mIGJvZGllc1xuICAgIC8vIGFuZCBtb2RpZmllcyB2ZWxvY2l0aWVzIG9mIHRoZW0gc28gdGhhdCB0aGV5IHdpbGwgbW92ZSBqdXN0IGluIGZyb250IG9mXG4gICAgLy8gYm91bmRhcnkuIFRoaXMgZnVuY3Rpb24gZnVuY3Rpb24gYWxzbyBhcHBsaWVzIHRoZSByZWFjdGlvbiBmb3JjZSB0b1xuICAgIC8vIGJvZGllcyBhcyBwcmVjaXNlbHkgYXMgdGhlIG51bWVyaWNhbCBzdGFiaWxpdHkgaXMga2VwdC5cbiAgICBjb25zdCBhYWJiID0gc19hYWJiO1xuICAgIGFhYmIubG93ZXJCb3VuZC54ID0gK2IyX21heEZsb2F0O1xuICAgIGFhYmIubG93ZXJCb3VuZC55ID0gK2IyX21heEZsb2F0O1xuICAgIGFhYmIudXBwZXJCb3VuZC54ID0gLWIyX21heEZsb2F0O1xuICAgIGFhYmIudXBwZXJCb3VuZC55ID0gLWIyX21heEZsb2F0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IHYgPSB2ZWxfZGF0YVtpXTtcbiAgICAgIGNvbnN0IHAxID0gcG9zX2RhdGFbaV07XG4gICAgICAvLy9sZXQgcDIgPSBwMSArIHN0ZXAuZHQgKiB2O1xuICAgICAgY29uc3QgcDJfeCA9IHAxLnggKyBzdGVwLmR0ICogdi54O1xuICAgICAgY29uc3QgcDJfeSA9IHAxLnkgKyBzdGVwLmR0ICogdi55O1xuICAgICAgLy8vYWFiYi5sb3dlckJvdW5kID0gYjJNaW4oYWFiYi5sb3dlckJvdW5kLCBiMk1pbihwMSwgcDIpKTtcbiAgICAgIGFhYmIubG93ZXJCb3VuZC54ID0gYjJNaW4oYWFiYi5sb3dlckJvdW5kLngsIGIyTWluKHAxLngsIHAyX3gpKTtcbiAgICAgIGFhYmIubG93ZXJCb3VuZC55ID0gYjJNaW4oYWFiYi5sb3dlckJvdW5kLnksIGIyTWluKHAxLnksIHAyX3kpKTtcbiAgICAgIC8vL2FhYmIudXBwZXJCb3VuZCA9IGIyTWF4KGFhYmIudXBwZXJCb3VuZCwgYjJNYXgocDEsIHAyKSk7XG4gICAgICBhYWJiLnVwcGVyQm91bmQueCA9IGIyTWF4KGFhYmIudXBwZXJCb3VuZC54LCBiMk1heChwMS54LCBwMl94KSk7XG4gICAgICBhYWJiLnVwcGVyQm91bmQueSA9IGIyTWF4KGFhYmIudXBwZXJCb3VuZC55LCBiMk1heChwMS55LCBwMl95KSk7XG4gICAgfVxuICAgIGlmICh0aGlzLlNvbHZlQ29sbGlzaW9uX2NhbGxiYWNrID09PSBudWxsKSB7XG4gICAgICB0aGlzLlNvbHZlQ29sbGlzaW9uX2NhbGxiYWNrID0gbmV3IGIyUGFydGljbGVTeXN0ZW1fU29sdmVDb2xsaXNpb25DYWxsYmFjayh0aGlzLCBzdGVwKTtcbiAgICB9XG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLlNvbHZlQ29sbGlzaW9uX2NhbGxiYWNrO1xuICAgIGNhbGxiYWNrLm1fc3RlcCA9IHN0ZXA7XG4gICAgdGhpcy5tX3dvcmxkLlF1ZXJ5QUFCQihjYWxsYmFjaywgYWFiYik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUNvbGxpc2lvbl9zX2FhYmIgPSBuZXcgYjJBQUJCKCk7XG4gIHB1YmxpYyBTb2x2ZUNvbGxpc2lvbl9jYWxsYmFjazogYjJQYXJ0aWNsZVN5c3RlbV9Tb2x2ZUNvbGxpc2lvbkNhbGxiYWNrIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIExpbWl0VmVsb2NpdHkoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHZlbF9kYXRhID0gdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGE7XG4gICAgY29uc3QgY3JpdGljYWxWZWxvY2l0eVNxdWFyZWQgPSB0aGlzLkdldENyaXRpY2FsVmVsb2NpdHlTcXVhcmVkKHN0ZXApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IHYgPSB2ZWxfZGF0YVtpXTtcbiAgICAgIGNvbnN0IHYyID0gYjJWZWMyLkRvdFZWKHYsIHYpO1xuICAgICAgaWYgKHYyID4gY3JpdGljYWxWZWxvY2l0eVNxdWFyZWQpIHtcbiAgICAgICAgLy8vdiAqPSBiMlNxcnQoY3JpdGljYWxWZWxvY2l0eVNxdWFyZWQgLyB2Mik7XG4gICAgICAgIHYuU2VsZk11bChiMlNxcnQoY3JpdGljYWxWZWxvY2l0eVNxdWFyZWQgLyB2MikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBTb2x2ZUdyYXZpdHkoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHNfZ3Jhdml0eSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVHcmF2aXR5X3NfZ3Jhdml0eTtcbiAgICBjb25zdCB2ZWxfZGF0YSA9IHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhO1xuICAgIC8vL2IyVmVjMiBncmF2aXR5ID0gc3RlcC5kdCAqIG1fZGVmLmdyYXZpdHlTY2FsZSAqIG1fd29ybGQuR2V0R3Jhdml0eSgpO1xuICAgIGNvbnN0IGdyYXZpdHkgPSBiMlZlYzIuTXVsU1Yoc3RlcC5kdCAqIHRoaXMubV9kZWYuZ3Jhdml0eVNjYWxlLCB0aGlzLm1fd29ybGQuR2V0R3Jhdml0eSgpLCBzX2dyYXZpdHkpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgIHZlbF9kYXRhW2ldLlNlbGZBZGQoZ3Jhdml0eSk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVHcmF2aXR5X3NfZ3Jhdml0eSA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgU29sdmVCYXJyaWVyKHN0ZXA6IGIyVGltZVN0ZXApOiB2b2lkIHtcbiAgICBjb25zdCBzX2FhYmIgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlQmFycmllcl9zX2FhYmI7XG4gICAgY29uc3Qgc192YSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVCYXJyaWVyX3NfdmE7XG4gICAgY29uc3Qgc192YiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVCYXJyaWVyX3NfdmI7XG4gICAgY29uc3Qgc19wYmEgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlQmFycmllcl9zX3BiYTtcbiAgICBjb25zdCBzX3ZiYSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVCYXJyaWVyX3NfdmJhO1xuICAgIGNvbnN0IHNfdmMgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlQmFycmllcl9zX3ZjO1xuICAgIGNvbnN0IHNfcGNhID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZUJhcnJpZXJfc19wY2E7XG4gICAgY29uc3Qgc192Y2EgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlQmFycmllcl9zX3ZjYTtcbiAgICBjb25zdCBzX3FiYSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVCYXJyaWVyX3NfcWJhO1xuICAgIGNvbnN0IHNfcWNhID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZUJhcnJpZXJfc19xY2E7XG4gICAgY29uc3Qgc19kdiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVCYXJyaWVyX3NfZHY7XG4gICAgY29uc3Qgc19mID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZUJhcnJpZXJfc19mO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICAvLyBJZiBhIHBhcnRpY2xlIGlzIHBhc3NpbmcgYmV0d2VlbiBwYWlyZWQgYmFycmllciBwYXJ0aWNsZXMsXG4gICAgLy8gaXRzIHZlbG9jaXR5IHdpbGwgYmUgZGVjZWxlcmF0ZWQgdG8gYXZvaWQgcGFzc2luZy5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBmbGFncyA9IHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2ldO1xuICAgICAgLy8vaWYgKChmbGFncyAmIGIyUGFydGljbGVTeXN0ZW0ua19iYXJyaWVyV2FsbEZsYWdzKSA9PT0gYjJQYXJ0aWNsZVN5c3RlbS5rX2JhcnJpZXJXYWxsRmxhZ3MpXG4gICAgICBpZiAoKGZsYWdzICYgYjJQYXJ0aWNsZVN5c3RlbS5rX2JhcnJpZXJXYWxsRmxhZ3MpICE9PSAwKSB7XG4gICAgICAgIHZlbF9kYXRhW2ldLlNldFplcm8oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdG1heCA9IGIyX2JhcnJpZXJDb2xsaXNpb25UaW1lICogc3RlcC5kdDtcbiAgICBjb25zdCBtYXNzID0gdGhpcy5HZXRQYXJ0aWNsZU1hc3MoKTtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9wYWlyQnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IHBhaXIgPSB0aGlzLm1fcGFpckJ1ZmZlci5kYXRhW2tdO1xuICAgICAgaWYgKHBhaXIuZmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9iYXJyaWVyUGFydGljbGUpIHtcbiAgICAgICAgY29uc3QgYSA9IHBhaXIuaW5kZXhBO1xuICAgICAgICBjb25zdCBiID0gcGFpci5pbmRleEI7XG4gICAgICAgIGNvbnN0IHBhID0gcG9zX2RhdGFbYV07XG4gICAgICAgIGNvbnN0IHBiID0gcG9zX2RhdGFbYl07XG4gICAgICAgIC8vLyBiMkFBQkIgYWFiYjtcbiAgICAgICAgY29uc3QgYWFiYiA9IHNfYWFiYjtcbiAgICAgICAgLy8vYWFiYi5sb3dlckJvdW5kID0gYjJNaW4ocGEsIHBiKTtcbiAgICAgICAgYjJWZWMyLk1pblYocGEsIHBiLCBhYWJiLmxvd2VyQm91bmQpO1xuICAgICAgICAvLy9hYWJiLnVwcGVyQm91bmQgPSBiMk1heChwYSwgcGIpO1xuICAgICAgICBiMlZlYzIuTWF4VihwYSwgcGIsIGFhYmIudXBwZXJCb3VuZCk7XG4gICAgICAgIGNvbnN0IGFHcm91cCA9IHRoaXMubV9ncm91cEJ1ZmZlclthXTtcbiAgICAgICAgY29uc3QgYkdyb3VwID0gdGhpcy5tX2dyb3VwQnVmZmVyW2JdO1xuICAgICAgICAvLy9iMlZlYzIgdmEgPSBHZXRMaW5lYXJWZWxvY2l0eShhR3JvdXAsIGEsIHBhKTtcbiAgICAgICAgY29uc3QgdmEgPSB0aGlzLkdldExpbmVhclZlbG9jaXR5KGFHcm91cCwgYSwgcGEsIHNfdmEpO1xuICAgICAgICAvLy9iMlZlYzIgdmIgPSBHZXRMaW5lYXJWZWxvY2l0eShiR3JvdXAsIGIsIHBiKTtcbiAgICAgICAgY29uc3QgdmIgPSB0aGlzLkdldExpbmVhclZlbG9jaXR5KGJHcm91cCwgYiwgcGIsIHNfdmIpO1xuICAgICAgICAvLy9iMlZlYzIgcGJhID0gcGIgLSBwYTtcbiAgICAgICAgY29uc3QgcGJhID0gYjJWZWMyLlN1YlZWKHBiLCBwYSwgc19wYmEpO1xuICAgICAgICAvLy9iMlZlYzIgdmJhID0gdmIgLSB2YTtcbiAgICAgICAgY29uc3QgdmJhID0gYjJWZWMyLlN1YlZWKHZiLCB2YSwgc192YmEpO1xuICAgICAgICAvLy9JbnNpZGVCb3VuZHNFbnVtZXJhdG9yIGVudW1lcmF0b3IgPSBHZXRJbnNpZGVCb3VuZHNFbnVtZXJhdG9yKGFhYmIpO1xuICAgICAgICBjb25zdCBlbnVtZXJhdG9yID0gdGhpcy5HZXRJbnNpZGVCb3VuZHNFbnVtZXJhdG9yKGFhYmIpO1xuICAgICAgICBsZXQgYzogbnVtYmVyO1xuICAgICAgICB3aGlsZSAoKGMgPSBlbnVtZXJhdG9yLkdldE5leHQoKSkgPj0gMCkge1xuICAgICAgICAgIGNvbnN0IHBjID0gcG9zX2RhdGFbY107XG4gICAgICAgICAgY29uc3QgY0dyb3VwID0gdGhpcy5tX2dyb3VwQnVmZmVyW2NdO1xuICAgICAgICAgIGlmIChhR3JvdXAgIT09IGNHcm91cCAmJiBiR3JvdXAgIT09IGNHcm91cCkge1xuICAgICAgICAgICAgLy8vYjJWZWMyIHZjID0gR2V0TGluZWFyVmVsb2NpdHkoY0dyb3VwLCBjLCBwYyk7XG4gICAgICAgICAgICBjb25zdCB2YyA9IHRoaXMuR2V0TGluZWFyVmVsb2NpdHkoY0dyb3VwLCBjLCBwYywgc192Yyk7XG4gICAgICAgICAgICAvLyBTb2x2ZSB0aGUgZXF1YXRpb24gYmVsb3c6XG4gICAgICAgICAgICAvLyAgICgxLXMpKihwYSt0KnZhKStzKihwYit0KnZiKSA9IHBjK3QqdmNcbiAgICAgICAgICAgIC8vIHdoaWNoIGV4cHJlc3NlcyB0aGF0IHRoZSBwYXJ0aWNsZSBjIHdpbGwgcGFzcyBhIGxpbmVcbiAgICAgICAgICAgIC8vIGNvbm5lY3RpbmcgdGhlIHBhcnRpY2xlcyBhIGFuZCBiIGF0IHRoZSB0aW1lIG9mIHQuXG4gICAgICAgICAgICAvLyBpZiBzIGlzIGJldHdlZW4gMCBhbmQgMSwgYyB3aWxsIHBhc3MgYmV0d2VlbiBhIGFuZCBiLlxuICAgICAgICAgICAgLy8vYjJWZWMyIHBjYSA9IHBjIC0gcGE7XG4gICAgICAgICAgICBjb25zdCBwY2EgPSBiMlZlYzIuU3ViVlYocGMsIHBhLCBzX3BjYSk7XG4gICAgICAgICAgICAvLy9iMlZlYzIgdmNhID0gdmMgLSB2YTtcbiAgICAgICAgICAgIGNvbnN0IHZjYSA9IGIyVmVjMi5TdWJWVih2YywgdmEsIHNfdmNhKTtcbiAgICAgICAgICAgIGNvbnN0IGUyID0gYjJWZWMyLkNyb3NzVlYodmJhLCB2Y2EpO1xuICAgICAgICAgICAgY29uc3QgZTEgPSBiMlZlYzIuQ3Jvc3NWVihwYmEsIHZjYSkgLSBiMlZlYzIuQ3Jvc3NWVihwY2EsIHZiYSk7XG4gICAgICAgICAgICBjb25zdCBlMCA9IGIyVmVjMi5Dcm9zc1ZWKHBiYSwgcGNhKTtcbiAgICAgICAgICAgIGxldCBzOiBudW1iZXIsIHQ6IG51bWJlcjtcbiAgICAgICAgICAgIC8vL2IyVmVjMiBxYmEsIHFjYTtcbiAgICAgICAgICAgIGNvbnN0IHFiYSA9IHNfcWJhLFxuICAgICAgICAgICAgICBxY2EgPSBzX3FjYTtcbiAgICAgICAgICAgIGlmIChlMiA9PT0gMCkge1xuICAgICAgICAgICAgICBpZiAoZTEgPT09IDApIHsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgdCA9IC1lMCAvIGUxO1xuICAgICAgICAgICAgICBpZiAoISh0ID49IDAgJiYgdCA8IHRtYXgpKSB7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgIC8vL3FiYSA9IHBiYSArIHQgKiB2YmE7XG4gICAgICAgICAgICAgIGIyVmVjMi5BZGRWTXVsU1YocGJhLCB0LCB2YmEsIHFiYSk7XG4gICAgICAgICAgICAgIC8vL3FjYSA9IHBjYSArIHQgKiB2Y2E7XG4gICAgICAgICAgICAgIGIyVmVjMi5BZGRWTXVsU1YocGNhLCB0LCB2Y2EsIHFjYSk7XG4gICAgICAgICAgICAgIHMgPSBiMlZlYzIuRG90VlYocWJhLCBxY2EpIC8gYjJWZWMyLkRvdFZWKHFiYSwgcWJhKTtcbiAgICAgICAgICAgICAgaWYgKCEocyA+PSAwICYmIHMgPD0gMSkpIHsgY29udGludWU7IH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRldCA9IGUxICogZTEgLSA0ICogZTAgKiBlMjtcbiAgICAgICAgICAgICAgaWYgKGRldCA8IDApIHsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgY29uc3Qgc3FydERldCA9IGIyU3FydChkZXQpO1xuICAgICAgICAgICAgICBsZXQgdDEgPSAoLWUxIC0gc3FydERldCkgLyAoMiAqIGUyKTtcbiAgICAgICAgICAgICAgbGV0IHQyID0gKC1lMSArIHNxcnREZXQpIC8gKDIgKiBlMik7XG4gICAgICAgICAgICAgIC8vL2lmICh0MSA+IHQyKSBiMlN3YXAodDEsIHQyKTtcbiAgICAgICAgICAgICAgaWYgKHQxID4gdDIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0bXAgPSB0MTtcbiAgICAgICAgICAgICAgICB0MSA9IHQyO1xuICAgICAgICAgICAgICAgIHQyID0gdG1wO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHQgPSB0MTtcbiAgICAgICAgICAgICAgLy8vcWJhID0gcGJhICsgdCAqIHZiYTtcbiAgICAgICAgICAgICAgYjJWZWMyLkFkZFZNdWxTVihwYmEsIHQsIHZiYSwgcWJhKTtcbiAgICAgICAgICAgICAgLy8vcWNhID0gcGNhICsgdCAqIHZjYTtcbiAgICAgICAgICAgICAgYjJWZWMyLkFkZFZNdWxTVihwY2EsIHQsIHZjYSwgcWNhKTtcbiAgICAgICAgICAgICAgLy8vcyA9IGIyRG90KHFiYSwgcWNhKSAvIGIyRG90KHFiYSwgcWJhKTtcbiAgICAgICAgICAgICAgcyA9IGIyVmVjMi5Eb3RWVihxYmEsIHFjYSkgLyBiMlZlYzIuRG90VlYocWJhLCBxYmEpO1xuICAgICAgICAgICAgICBpZiAoISh0ID49IDAgJiYgdCA8IHRtYXggJiYgcyA+PSAwICYmIHMgPD0gMSkpIHtcbiAgICAgICAgICAgICAgICB0ID0gdDI7XG4gICAgICAgICAgICAgICAgaWYgKCEodCA+PSAwICYmIHQgPCB0bWF4KSkgeyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgIC8vL3FiYSA9IHBiYSArIHQgKiB2YmE7XG4gICAgICAgICAgICAgICAgYjJWZWMyLkFkZFZNdWxTVihwYmEsIHQsIHZiYSwgcWJhKTtcbiAgICAgICAgICAgICAgICAvLy9xY2EgPSBwY2EgKyB0ICogdmNhO1xuICAgICAgICAgICAgICAgIGIyVmVjMi5BZGRWTXVsU1YocGNhLCB0LCB2Y2EsIHFjYSk7XG4gICAgICAgICAgICAgICAgLy8vcyA9IGIyRG90KHFiYSwgcWNhKSAvIGIyRG90KHFiYSwgcWJhKTtcbiAgICAgICAgICAgICAgICBzID0gYjJWZWMyLkRvdFZWKHFiYSwgcWNhKSAvIGIyVmVjMi5Eb3RWVihxYmEsIHFiYSk7XG4gICAgICAgICAgICAgICAgaWYgKCEocyA+PSAwICYmIHMgPD0gMSkpIHsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQXBwbHkgYSBmb3JjZSB0byBwYXJ0aWNsZSBjIHNvIHRoYXQgaXQgd2lsbCBoYXZlIHRoZVxuICAgICAgICAgICAgLy8gaW50ZXJwb2xhdGVkIHZlbG9jaXR5IGF0IHRoZSBjb2xsaXNpb24gcG9pbnQgb24gbGluZSBhYi5cbiAgICAgICAgICAgIC8vL2IyVmVjMiBkdiA9IHZhICsgcyAqIHZiYSAtIHZjO1xuICAgICAgICAgICAgY29uc3QgZHYgPSBzX2R2O1xuICAgICAgICAgICAgZHYueCA9IHZhLnggKyBzICogdmJhLnggLSB2Yy54O1xuICAgICAgICAgICAgZHYueSA9IHZhLnkgKyBzICogdmJhLnkgLSB2Yy55O1xuICAgICAgICAgICAgLy8vYjJWZWMyIGYgPSBHZXRQYXJ0aWNsZU1hc3MoKSAqIGR2O1xuICAgICAgICAgICAgY29uc3QgZiA9IGIyVmVjMi5NdWxTVihtYXNzLCBkdiwgc19mKTtcbiAgICAgICAgICAgIGlmIChjR3JvdXAgJiYgdGhpcy5Jc1JpZ2lkR3JvdXAoY0dyb3VwKSkge1xuICAgICAgICAgICAgICAvLyBJZiBjIGJlbG9uZ3MgdG8gYSByaWdpZCBncm91cCwgdGhlIGZvcmNlIHdpbGwgYmVcbiAgICAgICAgICAgICAgLy8gZGlzdHJpYnV0ZWQgaW4gdGhlIGdyb3VwLlxuICAgICAgICAgICAgICBjb25zdCBtYXNzID0gY0dyb3VwLkdldE1hc3MoKTtcbiAgICAgICAgICAgICAgY29uc3QgaW5lcnRpYSA9IGNHcm91cC5HZXRJbmVydGlhKCk7XG4gICAgICAgICAgICAgIGlmIChtYXNzID4gMCkge1xuICAgICAgICAgICAgICAgIC8vL2NHcm91cC5tX2xpbmVhclZlbG9jaXR5ICs9IDEgLyBtYXNzICogZjtcbiAgICAgICAgICAgICAgICBjR3JvdXAubV9saW5lYXJWZWxvY2l0eS5TZWxmTXVsQWRkKDEgLyBtYXNzLCBmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaW5lcnRpYSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLy9jR3JvdXAubV9hbmd1bGFyVmVsb2NpdHkgKz0gYjJDcm9zcyhwYyAtIGNHcm91cC5HZXRDZW50ZXIoKSwgZikgLyBpbmVydGlhO1xuICAgICAgICAgICAgICAgIGNHcm91cC5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiMlZlYzIuQ3Jvc3NWVihcbiAgICAgICAgICAgICAgICAgIGIyVmVjMi5TdWJWVihwYywgY0dyb3VwLkdldENlbnRlcigpLCBiMlZlYzIuc190MCksXG4gICAgICAgICAgICAgICAgICBmKSAvIGluZXJ0aWE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVtjXSArPSBkdjtcbiAgICAgICAgICAgICAgdmVsX2RhdGFbY10uU2VsZkFkZChkdik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBcHBseSBhIHJldmVyc2VkIGZvcmNlIHRvIHBhcnRpY2xlIGMgYWZ0ZXIgcGFydGljbGVcbiAgICAgICAgICAgIC8vIG1vdmVtZW50IHNvIHRoYXQgbW9tZW50dW0gd2lsbCBiZSBwcmVzZXJ2ZWQuXG4gICAgICAgICAgICAvLy9QYXJ0aWNsZUFwcGx5Rm9yY2UoYywgLXN0ZXAuaW52X2R0ICogZik7XG4gICAgICAgICAgICB0aGlzLlBhcnRpY2xlQXBwbHlGb3JjZShjLCBmLlNlbGZNdWwoLXN0ZXAuaW52X2R0KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVCYXJyaWVyX3NfYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUJhcnJpZXJfc192YSA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUJhcnJpZXJfc192YiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUJhcnJpZXJfc19wYmEgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVCYXJyaWVyX3NfdmJhID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlQmFycmllcl9zX3ZjID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlQmFycmllcl9zX3BjYSA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUJhcnJpZXJfc192Y2EgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVCYXJyaWVyX3NfcWJhID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlQmFycmllcl9zX3FjYSA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUJhcnJpZXJfc19kdiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUJhcnJpZXJfc19mID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBTb2x2ZVN0YXRpY1ByZXNzdXJlKHN0ZXA6IGIyVGltZVN0ZXApOiB2b2lkIHtcbiAgICB0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXIgPSB0aGlzLlJlcXVlc3RCdWZmZXIodGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyKTtcbiAgICBjb25zdCBjcml0aWNhbFByZXNzdXJlID0gdGhpcy5HZXRDcml0aWNhbFByZXNzdXJlKHN0ZXApO1xuICAgIGNvbnN0IHByZXNzdXJlUGVyV2VpZ2h0ID0gdGhpcy5tX2RlZi5zdGF0aWNQcmVzc3VyZVN0cmVuZ3RoICogY3JpdGljYWxQcmVzc3VyZTtcbiAgICBjb25zdCBtYXhQcmVzc3VyZSA9IGIyX21heFBhcnRpY2xlUHJlc3N1cmUgKiBjcml0aWNhbFByZXNzdXJlO1xuICAgIGNvbnN0IHJlbGF4YXRpb24gPSB0aGlzLm1fZGVmLnN0YXRpY1ByZXNzdXJlUmVsYXhhdGlvbjtcbiAgICAvLy8gQ29tcHV0ZSBwcmVzc3VyZSBzYXRpc2Z5aW5nIHRoZSBtb2RpZmllZCBQb2lzc29uIGVxdWF0aW9uOlxuICAgIC8vLyAgIFN1bV9mb3JfaigocF9pIC0gcF9qKSAqIHdfaWopICsgcmVsYXhhdGlvbiAqIHBfaSA9XG4gICAgLy8vICAgcHJlc3N1cmVQZXJXZWlnaHQgKiAod19pIC0gYjJfbWluUGFydGljbGVXZWlnaHQpXG4gICAgLy8vIGJ5IGl0ZXJhdGluZyB0aGUgY2FsY3VsYXRpb246XG4gICAgLy8vICAgcF9pID0gKFN1bV9mb3JfaihwX2ogKiB3X2lqKSArIHByZXNzdXJlUGVyV2VpZ2h0ICpcbiAgICAvLy8gICAgICAgICAod19pIC0gYjJfbWluUGFydGljbGVXZWlnaHQpKSAvICh3X2kgKyByZWxheGF0aW9uKVxuICAgIC8vLyB3aGVyZVxuICAgIC8vLyAgIHBfaSBhbmQgcF9qIGFyZSBzdGF0aWMgcHJlc3N1cmUgb2YgcGFydGljbGUgaSBhbmQgalxuICAgIC8vLyAgIHdfaWogaXMgY29udGFjdCB3ZWlnaHQgYmV0d2VlbiBwYXJ0aWNsZSBpIGFuZCBqXG4gICAgLy8vICAgd19pIGlzIHN1bSBvZiBjb250YWN0IHdlaWdodCBvZiBwYXJ0aWNsZSBpXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLm1fZGVmLnN0YXRpY1ByZXNzdXJlSXRlcmF0aW9uczsgdCsrKSB7XG4gICAgICAvLy9tZW1zZXQobV9hY2N1bXVsYXRpb25CdWZmZXIsIDAsIHNpemVvZigqbV9hY2N1bXVsYXRpb25CdWZmZXIpICogbV9jb3VudCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICAgIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbaV0gPSAwO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fY29udGFjdEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgICBpZiAoY29udGFjdC5mbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3N0YXRpY1ByZXNzdXJlUGFydGljbGUpIHtcbiAgICAgICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICAgICAgY29uc3QgYiA9IGNvbnRhY3QuaW5kZXhCO1xuICAgICAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgICAgICB0aGlzLm1fYWNjdW11bGF0aW9uQnVmZmVyW2FdICs9IHcgKiB0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXJbYl07IC8vIGEgPC0gYlxuICAgICAgICAgIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbYl0gKz0gdyAqIHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlclthXTsgLy8gYiA8LSBhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgICAgY29uc3QgdyA9IHRoaXMubV93ZWlnaHRCdWZmZXJbaV07XG4gICAgICAgIGlmICh0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpXSAmIGIyUGFydGljbGVGbGFnLmIyX3N0YXRpY1ByZXNzdXJlUGFydGljbGUpIHtcbiAgICAgICAgICBjb25zdCB3aCA9IHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbaV07XG4gICAgICAgICAgY29uc3QgaCA9XG4gICAgICAgICAgICAod2ggKyBwcmVzc3VyZVBlcldlaWdodCAqICh3IC0gYjJfbWluUGFydGljbGVXZWlnaHQpKSAvXG4gICAgICAgICAgICAodyArIHJlbGF4YXRpb24pO1xuICAgICAgICAgIHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlcltpXSA9IGIyQ2xhbXAoaCwgMC4wLCBtYXhQcmVzc3VyZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBDb21wdXRlV2VpZ2h0KCk6IHZvaWQge1xuICAgIC8vIGNhbGN1bGF0ZXMgdGhlIHN1bSBvZiBjb250YWN0LXdlaWdodHMgZm9yIGVhY2ggcGFydGljbGVcbiAgICAvLyB0aGF0IG1lYW5zIGRpbWVuc2lvbmxlc3MgZGVuc2l0eVxuICAgIC8vL21lbXNldChtX3dlaWdodEJ1ZmZlciwgMCwgc2l6ZW9mKCptX3dlaWdodEJ1ZmZlcikgKiBtX2NvdW50KTtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9jb3VudDsgaysrKSB7XG4gICAgICB0aGlzLm1fd2VpZ2h0QnVmZmVyW2tdID0gMDtcbiAgICB9XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgY29uc3QgYSA9IGNvbnRhY3QuaW5kZXg7XG4gICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICB0aGlzLm1fd2VpZ2h0QnVmZmVyW2FdICs9IHc7XG4gICAgfVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICB0aGlzLm1fd2VpZ2h0QnVmZmVyW2FdICs9IHc7XG4gICAgICB0aGlzLm1fd2VpZ2h0QnVmZmVyW2JdICs9IHc7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNvbHZlUHJlc3N1cmUoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHNfZiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVQcmVzc3VyZV9zX2Y7XG4gICAgY29uc3QgcG9zX2RhdGEgPSB0aGlzLm1fcG9zaXRpb25CdWZmZXIuZGF0YTtcbiAgICBjb25zdCB2ZWxfZGF0YSA9IHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhO1xuICAgIC8vIGNhbGN1bGF0ZXMgcHJlc3N1cmUgYXMgYSBsaW5lYXIgZnVuY3Rpb24gb2YgZGVuc2l0eVxuICAgIGNvbnN0IGNyaXRpY2FsUHJlc3N1cmUgPSB0aGlzLkdldENyaXRpY2FsUHJlc3N1cmUoc3RlcCk7XG4gICAgY29uc3QgcHJlc3N1cmVQZXJXZWlnaHQgPSB0aGlzLm1fZGVmLnByZXNzdXJlU3RyZW5ndGggKiBjcml0aWNhbFByZXNzdXJlO1xuICAgIGNvbnN0IG1heFByZXNzdXJlID0gYjJfbWF4UGFydGljbGVQcmVzc3VyZSAqIGNyaXRpY2FsUHJlc3N1cmU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgdyA9IHRoaXMubV93ZWlnaHRCdWZmZXJbaV07XG4gICAgICBjb25zdCBoID0gcHJlc3N1cmVQZXJXZWlnaHQgKiBiMk1heCgwLjAsIHcgLSBiMl9taW5QYXJ0aWNsZVdlaWdodCk7XG4gICAgICB0aGlzLm1fYWNjdW11bGF0aW9uQnVmZmVyW2ldID0gYjJNaW4oaCwgbWF4UHJlc3N1cmUpO1xuICAgIH1cbiAgICAvLyBpZ25vcmVzIHBhcnRpY2xlcyB3aGljaCBoYXZlIHRoZWlyIG93biByZXB1bHNpdmUgZm9yY2VcbiAgICBpZiAodGhpcy5tX2FsbFBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlU3lzdGVtLmtfbm9QcmVzc3VyZUZsYWdzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpXSAmIGIyUGFydGljbGVTeXN0ZW0ua19ub1ByZXNzdXJlRmxhZ3MpIHtcbiAgICAgICAgICB0aGlzLm1fYWNjdW11bGF0aW9uQnVmZmVyW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBzdGF0aWMgcHJlc3N1cmVcbiAgICBpZiAodGhpcy5tX2FsbFBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9zdGF0aWNQcmVzc3VyZVBhcnRpY2xlKSB7XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyICE9PSBudWxsKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2ldICYgYjJQYXJ0aWNsZUZsYWcuYjJfc3RhdGljUHJlc3N1cmVQYXJ0aWNsZSkge1xuICAgICAgICAgIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbaV0gKz0gdGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGFwcGxpZXMgcHJlc3N1cmUgYmV0d2VlbiBlYWNoIHBhcnRpY2xlcyBpbiBjb250YWN0XG4gICAgY29uc3QgdmVsb2NpdHlQZXJQcmVzc3VyZSA9IHN0ZXAuZHQgLyAodGhpcy5tX2RlZi5kZW5zaXR5ICogdGhpcy5tX3BhcnRpY2xlRGlhbWV0ZXIpO1xuICAgIGNvbnN0IGludl9tYXNzID0gdGhpcy5HZXRQYXJ0aWNsZUludk1hc3MoKTtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleDtcbiAgICAgIGNvbnN0IGIgPSBjb250YWN0LmJvZHk7XG4gICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICBjb25zdCBtID0gY29udGFjdC5tYXNzO1xuICAgICAgY29uc3QgbiA9IGNvbnRhY3Qubm9ybWFsO1xuICAgICAgY29uc3QgcCA9IHBvc19kYXRhW2FdO1xuICAgICAgY29uc3QgaCA9IHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbYV0gKyBwcmVzc3VyZVBlcldlaWdodCAqIHc7XG4gICAgICAvLy9iMlZlYzIgZiA9IHZlbG9jaXR5UGVyUHJlc3N1cmUgKiB3ICogbSAqIGggKiBuO1xuICAgICAgY29uc3QgZiA9IGIyVmVjMi5NdWxTVih2ZWxvY2l0eVBlclByZXNzdXJlICogdyAqIG0gKiBoLCBuLCBzX2YpO1xuICAgICAgLy8vbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2FdIC09IEdldFBhcnRpY2xlSW52TWFzcygpICogZjtcbiAgICAgIHZlbF9kYXRhW2FdLlNlbGZNdWxTdWIoaW52X21hc3MsIGYpO1xuICAgICAgYi5BcHBseUxpbmVhckltcHVsc2UoZiwgcCwgdHJ1ZSk7XG4gICAgfVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICBjb25zdCBuID0gY29udGFjdC5ub3JtYWw7XG4gICAgICBjb25zdCBoID0gdGhpcy5tX2FjY3VtdWxhdGlvbkJ1ZmZlclthXSArIHRoaXMubV9hY2N1bXVsYXRpb25CdWZmZXJbYl07XG4gICAgICAvLy9iMlZlYzIgZiA9IHZlbG9jaXR5UGVyUHJlc3N1cmUgKiB3ICogaCAqIG47XG4gICAgICBjb25zdCBmID0gYjJWZWMyLk11bFNWKHZlbG9jaXR5UGVyUHJlc3N1cmUgKiB3ICogaCwgbiwgc19mKTtcbiAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVthXSAtPSBmO1xuICAgICAgdmVsX2RhdGFbYV0uU2VsZlN1YihmKTtcbiAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVtiXSArPSBmO1xuICAgICAgdmVsX2RhdGFbYl0uU2VsZkFkZChmKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVByZXNzdXJlX3NfZiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgU29sdmVEYW1waW5nKHN0ZXA6IGIyVGltZVN0ZXApOiB2b2lkIHtcbiAgICBjb25zdCBzX3YgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlRGFtcGluZ19zX3Y7XG4gICAgY29uc3Qgc19mID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZURhbXBpbmdfc19mO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICAvLyByZWR1Y2VzIG5vcm1hbCB2ZWxvY2l0eSBvZiBlYWNoIGNvbnRhY3RcbiAgICBjb25zdCBsaW5lYXJEYW1waW5nID0gdGhpcy5tX2RlZi5kYW1waW5nU3RyZW5ndGg7XG4gICAgY29uc3QgcXVhZHJhdGljRGFtcGluZyA9IDEgLyB0aGlzLkdldENyaXRpY2FsVmVsb2NpdHkoc3RlcCk7XG4gICAgY29uc3QgaW52X21hc3MgPSB0aGlzLkdldFBhcnRpY2xlSW52TWFzcygpO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4O1xuICAgICAgY29uc3QgYiA9IGNvbnRhY3QuYm9keTtcbiAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgIGNvbnN0IG0gPSBjb250YWN0Lm1hc3M7XG4gICAgICBjb25zdCBuID0gY29udGFjdC5ub3JtYWw7XG4gICAgICBjb25zdCBwID0gcG9zX2RhdGFbYV07XG4gICAgICAvLy9iMlZlYzIgdiA9IGIuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludChwKSAtIG1fdmVsb2NpdHlCdWZmZXIuZGF0YVthXTtcbiAgICAgIGNvbnN0IHYgPSBiMlZlYzIuU3ViVlYoYi5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50KHAsIGIyVmVjMi5zX3QwKSwgdmVsX2RhdGFbYV0sIHNfdik7XG4gICAgICBjb25zdCB2biA9IGIyVmVjMi5Eb3RWVih2LCBuKTtcbiAgICAgIGlmICh2biA8IDApIHtcbiAgICAgICAgY29uc3QgZGFtcGluZyA9IGIyTWF4KGxpbmVhckRhbXBpbmcgKiB3LCBiMk1pbigtcXVhZHJhdGljRGFtcGluZyAqIHZuLCAwLjUpKTtcbiAgICAgICAgLy8vYjJWZWMyIGYgPSBkYW1waW5nICogbSAqIHZuICogbjtcbiAgICAgICAgY29uc3QgZiA9IGIyVmVjMi5NdWxTVihkYW1waW5nICogbSAqIHZuLCBuLCBzX2YpO1xuICAgICAgICAvLy9tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbYV0gKz0gR2V0UGFydGljbGVJbnZNYXNzKCkgKiBmO1xuICAgICAgICB2ZWxfZGF0YVthXS5TZWxmTXVsQWRkKGludl9tYXNzLCBmKTtcbiAgICAgICAgLy8vYi5BcHBseUxpbmVhckltcHVsc2UoLWYsIHAsIHRydWUpO1xuICAgICAgICBiLkFwcGx5TGluZWFySW1wdWxzZShmLlNlbGZOZWcoKSwgcCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICBjb25zdCBuID0gY29udGFjdC5ub3JtYWw7XG4gICAgICAvLy9iMlZlYzIgdiA9IG1fdmVsb2NpdHlCdWZmZXIuZGF0YVtiXSAtIG1fdmVsb2NpdHlCdWZmZXIuZGF0YVthXTtcbiAgICAgIGNvbnN0IHYgPSBiMlZlYzIuU3ViVlYodmVsX2RhdGFbYl0sIHZlbF9kYXRhW2FdLCBzX3YpO1xuICAgICAgY29uc3Qgdm4gPSBiMlZlYzIuRG90VlYodiwgbik7XG4gICAgICBpZiAodm4gPCAwKSB7XG4gICAgICAgIC8vL2Zsb2F0MzIgZGFtcGluZyA9IGIyTWF4KGxpbmVhckRhbXBpbmcgKiB3LCBiMk1pbigtIHF1YWRyYXRpY0RhbXBpbmcgKiB2biwgMC41ZikpO1xuICAgICAgICBjb25zdCBkYW1waW5nID0gYjJNYXgobGluZWFyRGFtcGluZyAqIHcsIGIyTWluKC1xdWFkcmF0aWNEYW1waW5nICogdm4sIDAuNSkpO1xuICAgICAgICAvLy9iMlZlYzIgZiA9IGRhbXBpbmcgKiB2biAqIG47XG4gICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1YoZGFtcGluZyAqIHZuLCBuLCBzX2YpO1xuICAgICAgICAvLy90aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVthXSArPSBmO1xuICAgICAgICB2ZWxfZGF0YVthXS5TZWxmQWRkKGYpO1xuICAgICAgICAvLy90aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtiXSAtPSBmO1xuICAgICAgICB2ZWxfZGF0YVtiXS5TZWxmU3ViKGYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlRGFtcGluZ19zX3YgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVEYW1waW5nX3NfZiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgU29sdmVSaWdpZERhbXBpbmcoKTogdm9pZCB7XG4gICAgY29uc3Qgc190MCA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVSaWdpZERhbXBpbmdfc190MDtcbiAgICBjb25zdCBzX3QxID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVJpZ2lkRGFtcGluZ19zX3QxO1xuICAgIGNvbnN0IHNfcCA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVSaWdpZERhbXBpbmdfc19wO1xuICAgIGNvbnN0IHNfdiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVSaWdpZERhbXBpbmdfc192O1xuICAgIGNvbnN0IGludk1hc3NBID0gWzAuMF0sXG4gICAgICBpbnZJbmVydGlhQSA9IFswLjBdLFxuICAgICAgdGFuZ2VudERpc3RhbmNlQSA9IFswLjBdOyAvLyBUT0RPOiBzdGF0aWNcbiAgICBjb25zdCBpbnZNYXNzQiA9IFswLjBdLFxuICAgICAgaW52SW5lcnRpYUIgPSBbMC4wXSxcbiAgICAgIHRhbmdlbnREaXN0YW5jZUIgPSBbMC4wXTsgLy8gVE9ETzogc3RhdGljXG4gICAgLy8gQXBwbHkgaW1wdWxzZSB0byByaWdpZCBwYXJ0aWNsZSBncm91cHMgY29sbGlkaW5nIHdpdGggb3RoZXIgb2JqZWN0c1xuICAgIC8vIHRvIHJlZHVjZSByZWxhdGl2ZSB2ZWxvY2l0eSBhdCB0aGUgY29sbGlkaW5nIHBvaW50LlxuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgZGFtcGluZyA9IHRoaXMubV9kZWYuZGFtcGluZ1N0cmVuZ3RoO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4O1xuICAgICAgY29uc3QgYUdyb3VwID0gdGhpcy5tX2dyb3VwQnVmZmVyW2FdO1xuICAgICAgaWYgKGFHcm91cCAmJiB0aGlzLklzUmlnaWRHcm91cChhR3JvdXApKSB7XG4gICAgICAgIGNvbnN0IGIgPSBjb250YWN0LmJvZHk7XG4gICAgICAgIGNvbnN0IG4gPSBjb250YWN0Lm5vcm1hbDtcbiAgICAgICAgY29uc3QgdyA9IGNvbnRhY3Qud2VpZ2h0O1xuICAgICAgICBjb25zdCBwID0gcG9zX2RhdGFbYV07XG4gICAgICAgIC8vL2IyVmVjMiB2ID0gYi5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50KHApIC0gYUdyb3VwLkdldExpbmVhclZlbG9jaXR5RnJvbVdvcmxkUG9pbnQocCk7XG4gICAgICAgIGNvbnN0IHYgPSBiMlZlYzIuU3ViVlYoYi5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50KHAsIHNfdDApLCBhR3JvdXAuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludChwLCBzX3QxKSwgc192KTtcbiAgICAgICAgY29uc3Qgdm4gPSBiMlZlYzIuRG90VlYodiwgbik7XG4gICAgICAgIGlmICh2biA8IDApIHtcbiAgICAgICAgICAvLyBUaGUgZ3JvdXAncyBhdmVyYWdlIHZlbG9jaXR5IGF0IHBhcnRpY2xlIHBvc2l0aW9uICdwJyBpcyBwdXNoaW5nXG4gICAgICAgICAgLy8gdGhlIHBhcnRpY2xlIGludG8gdGhlIGJvZHkuXG4gICAgICAgICAgLy8vdGhpcy5Jbml0RGFtcGluZ1BhcmFtZXRlcldpdGhSaWdpZEdyb3VwT3JQYXJ0aWNsZSgmaW52TWFzc0EsICZpbnZJbmVydGlhQSwgJnRhbmdlbnREaXN0YW5jZUEsIHRydWUsIGFHcm91cCwgYSwgcCwgbik7XG4gICAgICAgICAgdGhpcy5Jbml0RGFtcGluZ1BhcmFtZXRlcldpdGhSaWdpZEdyb3VwT3JQYXJ0aWNsZShpbnZNYXNzQSwgaW52SW5lcnRpYUEsIHRhbmdlbnREaXN0YW5jZUEsIHRydWUsIGFHcm91cCwgYSwgcCwgbik7XG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIGIubV9JIGZyb20gcHVibGljIGZ1bmN0aW9ucyBvZiBiMkJvZHkuXG4gICAgICAgICAgLy8vdGhpcy5Jbml0RGFtcGluZ1BhcmFtZXRlcigmaW52TWFzc0IsICZpbnZJbmVydGlhQiwgJnRhbmdlbnREaXN0YW5jZUIsIGIuR2V0TWFzcygpLCBiLkdldEluZXJ0aWEoKSAtIGIuR2V0TWFzcygpICogYi5HZXRMb2NhbENlbnRlcigpLkxlbmd0aFNxdWFyZWQoKSwgYi5HZXRXb3JsZENlbnRlcigpLCBwLCBuKTtcbiAgICAgICAgICB0aGlzLkluaXREYW1waW5nUGFyYW1ldGVyKGludk1hc3NCLCBpbnZJbmVydGlhQiwgdGFuZ2VudERpc3RhbmNlQiwgYi5HZXRNYXNzKCksIGIuR2V0SW5lcnRpYSgpIC0gYi5HZXRNYXNzKCkgKiBiLkdldExvY2FsQ2VudGVyKCkuTGVuZ3RoU3F1YXJlZCgpLCBiLkdldFdvcmxkQ2VudGVyKCksIHAsIG4pO1xuICAgICAgICAgIC8vL2Zsb2F0MzIgZiA9IGRhbXBpbmcgKiBiMk1pbih3LCAxLjApICogdGhpcy5Db21wdXRlRGFtcGluZ0ltcHVsc2UoaW52TWFzc0EsIGludkluZXJ0aWFBLCB0YW5nZW50RGlzdGFuY2VBLCBpbnZNYXNzQiwgaW52SW5lcnRpYUIsIHRhbmdlbnREaXN0YW5jZUIsIHZuKTtcbiAgICAgICAgICBjb25zdCBmID0gZGFtcGluZyAqIGIyTWluKHcsIDEuMCkgKiB0aGlzLkNvbXB1dGVEYW1waW5nSW1wdWxzZShpbnZNYXNzQVswXSwgaW52SW5lcnRpYUFbMF0sIHRhbmdlbnREaXN0YW5jZUFbMF0sIGludk1hc3NCWzBdLCBpbnZJbmVydGlhQlswXSwgdGFuZ2VudERpc3RhbmNlQlswXSwgdm4pO1xuICAgICAgICAgIC8vL3RoaXMuQXBwbHlEYW1waW5nKGludk1hc3NBLCBpbnZJbmVydGlhQSwgdGFuZ2VudERpc3RhbmNlQSwgdHJ1ZSwgYUdyb3VwLCBhLCBmLCBuKTtcbiAgICAgICAgICB0aGlzLkFwcGx5RGFtcGluZyhpbnZNYXNzQVswXSwgaW52SW5lcnRpYUFbMF0sIHRhbmdlbnREaXN0YW5jZUFbMF0sIHRydWUsIGFHcm91cCwgYSwgZiwgbik7XG4gICAgICAgICAgLy8vYi5BcHBseUxpbmVhckltcHVsc2UoLWYgKiBuLCBwLCB0cnVlKTtcbiAgICAgICAgICBiLkFwcGx5TGluZWFySW1wdWxzZShiMlZlYzIuTXVsU1YoLWYsIG4sIGIyVmVjMi5zX3QwKSwgcCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4QTtcbiAgICAgIGNvbnN0IGIgPSBjb250YWN0LmluZGV4QjtcbiAgICAgIGNvbnN0IG4gPSBjb250YWN0Lm5vcm1hbDtcbiAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgIGNvbnN0IGFHcm91cCA9IHRoaXMubV9ncm91cEJ1ZmZlclthXTtcbiAgICAgIGNvbnN0IGJHcm91cCA9IHRoaXMubV9ncm91cEJ1ZmZlcltiXTtcbiAgICAgIGNvbnN0IGFSaWdpZCA9IHRoaXMuSXNSaWdpZEdyb3VwKGFHcm91cCk7XG4gICAgICBjb25zdCBiUmlnaWQgPSB0aGlzLklzUmlnaWRHcm91cChiR3JvdXApO1xuICAgICAgaWYgKGFHcm91cCAhPT0gYkdyb3VwICYmIChhUmlnaWQgfHwgYlJpZ2lkKSkge1xuICAgICAgICAvLy9iMlZlYzIgcCA9IDAuNWYgKiAodGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbYV0gKyB0aGlzLm1fcG9zaXRpb25CdWZmZXIuZGF0YVtiXSk7XG4gICAgICAgIGNvbnN0IHAgPSBiMlZlYzIuTWlkVlYocG9zX2RhdGFbYV0sIHBvc19kYXRhW2JdLCBzX3ApO1xuICAgICAgICAvLy9iMlZlYzIgdiA9IEdldExpbmVhclZlbG9jaXR5KGJHcm91cCwgYiwgcCkgLSBHZXRMaW5lYXJWZWxvY2l0eShhR3JvdXAsIGEsIHApO1xuICAgICAgICBjb25zdCB2ID0gYjJWZWMyLlN1YlZWKHRoaXMuR2V0TGluZWFyVmVsb2NpdHkoYkdyb3VwLCBiLCBwLCBzX3QwKSwgdGhpcy5HZXRMaW5lYXJWZWxvY2l0eShhR3JvdXAsIGEsIHAsIHNfdDEpLCBzX3YpO1xuICAgICAgICBjb25zdCB2biA9IGIyVmVjMi5Eb3RWVih2LCBuKTtcbiAgICAgICAgaWYgKHZuIDwgMCkge1xuICAgICAgICAgIC8vL3RoaXMuSW5pdERhbXBpbmdQYXJhbWV0ZXJXaXRoUmlnaWRHcm91cE9yUGFydGljbGUoJmludk1hc3NBLCAmaW52SW5lcnRpYUEsICZ0YW5nZW50RGlzdGFuY2VBLCBhUmlnaWQsIGFHcm91cCwgYSwgcCwgbik7XG4gICAgICAgICAgdGhpcy5Jbml0RGFtcGluZ1BhcmFtZXRlcldpdGhSaWdpZEdyb3VwT3JQYXJ0aWNsZShpbnZNYXNzQSwgaW52SW5lcnRpYUEsIHRhbmdlbnREaXN0YW5jZUEsIGFSaWdpZCwgYUdyb3VwLCBhLCBwLCBuKTtcbiAgICAgICAgICAvLy90aGlzLkluaXREYW1waW5nUGFyYW1ldGVyV2l0aFJpZ2lkR3JvdXBPclBhcnRpY2xlKCZpbnZNYXNzQiwgJmludkluZXJ0aWFCLCAmdGFuZ2VudERpc3RhbmNlQiwgYlJpZ2lkLCBiR3JvdXAsIGIsIHAsIG4pO1xuICAgICAgICAgIHRoaXMuSW5pdERhbXBpbmdQYXJhbWV0ZXJXaXRoUmlnaWRHcm91cE9yUGFydGljbGUoaW52TWFzc0IsIGludkluZXJ0aWFCLCB0YW5nZW50RGlzdGFuY2VCLCBiUmlnaWQsIGJHcm91cCwgYiwgcCwgbik7XG4gICAgICAgICAgLy8vZmxvYXQzMiBmID0gZGFtcGluZyAqIHcgKiB0aGlzLkNvbXB1dGVEYW1waW5nSW1wdWxzZShpbnZNYXNzQSwgaW52SW5lcnRpYUEsIHRhbmdlbnREaXN0YW5jZUEsIGludk1hc3NCLCBpbnZJbmVydGlhQiwgdGFuZ2VudERpc3RhbmNlQiwgdm4pO1xuICAgICAgICAgIGNvbnN0IGYgPSBkYW1waW5nICogdyAqIHRoaXMuQ29tcHV0ZURhbXBpbmdJbXB1bHNlKGludk1hc3NBWzBdLCBpbnZJbmVydGlhQVswXSwgdGFuZ2VudERpc3RhbmNlQVswXSwgaW52TWFzc0JbMF0sIGludkluZXJ0aWFCWzBdLCB0YW5nZW50RGlzdGFuY2VCWzBdLCB2bik7XG4gICAgICAgICAgLy8vdGhpcy5BcHBseURhbXBpbmcoaW52TWFzc0EsIGludkluZXJ0aWFBLCB0YW5nZW50RGlzdGFuY2VBLCBhUmlnaWQsIGFHcm91cCwgYSwgZiwgbik7XG4gICAgICAgICAgdGhpcy5BcHBseURhbXBpbmcoaW52TWFzc0FbMF0sIGludkluZXJ0aWFBWzBdLCB0YW5nZW50RGlzdGFuY2VBWzBdLCBhUmlnaWQsIGFHcm91cCwgYSwgZiwgbik7XG4gICAgICAgICAgLy8vdGhpcy5BcHBseURhbXBpbmcoaW52TWFzc0IsIGludkluZXJ0aWFCLCB0YW5nZW50RGlzdGFuY2VCLCBiUmlnaWQsIGJHcm91cCwgYiwgLWYsIG4pO1xuICAgICAgICAgIHRoaXMuQXBwbHlEYW1waW5nKGludk1hc3NCWzBdLCBpbnZJbmVydGlhQlswXSwgdGFuZ2VudERpc3RhbmNlQlswXSwgYlJpZ2lkLCBiR3JvdXAsIGIsIC1mLCBuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlUmlnaWREYW1waW5nX3NfdDAgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVSaWdpZERhbXBpbmdfc190MSA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVJpZ2lkRGFtcGluZ19zX3AgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVSaWdpZERhbXBpbmdfc192ID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBTb2x2ZUV4dHJhRGFtcGluZygpOiB2b2lkIHtcbiAgICBjb25zdCBzX3YgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlRXh0cmFEYW1waW5nX3NfdjtcbiAgICBjb25zdCBzX2YgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlRXh0cmFEYW1waW5nX3NfZjtcbiAgICBjb25zdCB2ZWxfZGF0YSA9IHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhO1xuICAgIC8vIEFwcGxpZXMgYWRkaXRpb25hbCBkYW1waW5nIGZvcmNlIGJldHdlZW4gYm9kaWVzIGFuZCBwYXJ0aWNsZXMgd2hpY2ggY2FuXG4gICAgLy8gcHJvZHVjZSBzdHJvbmcgcmVwdWxzaXZlIGZvcmNlLiBBcHBseWluZyBkYW1waW5nIGZvcmNlIG11bHRpcGxlIHRpbWVzXG4gICAgLy8gaXMgZWZmZWN0aXZlIGluIHN1cHByZXNzaW5nIHZpYnJhdGlvbi5cbiAgICBjb25zdCBwb3NfZGF0YSA9IHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhO1xuICAgIGNvbnN0IGludl9tYXNzID0gdGhpcy5HZXRQYXJ0aWNsZUludk1hc3MoKTtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleDtcbiAgICAgIGlmICh0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVthXSAmIGIyUGFydGljbGVTeXN0ZW0ua19leHRyYURhbXBpbmdGbGFncykge1xuICAgICAgICBjb25zdCBiID0gY29udGFjdC5ib2R5O1xuICAgICAgICBjb25zdCBtID0gY29udGFjdC5tYXNzO1xuICAgICAgICBjb25zdCBuID0gY29udGFjdC5ub3JtYWw7XG4gICAgICAgIGNvbnN0IHAgPSBwb3NfZGF0YVthXTtcbiAgICAgICAgLy8vYjJWZWMyIHYgPSBiLkdldExpbmVhclZlbG9jaXR5RnJvbVdvcmxkUG9pbnQocCkgLSBtX3ZlbG9jaXR5QnVmZmVyLmRhdGFbYV07XG4gICAgICAgIGNvbnN0IHYgPSBiMlZlYzIuU3ViVlYoYi5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50KHAsIGIyVmVjMi5zX3QwKSwgdmVsX2RhdGFbYV0sIHNfdik7XG4gICAgICAgIC8vL2Zsb2F0MzIgdm4gPSBiMkRvdCh2LCBuKTtcbiAgICAgICAgY29uc3Qgdm4gPSBiMlZlYzIuRG90VlYodiwgbik7XG4gICAgICAgIGlmICh2biA8IDApIHtcbiAgICAgICAgICAvLy9iMlZlYzIgZiA9IDAuNWYgKiBtICogdm4gKiBuO1xuICAgICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1YoMC41ICogbSAqIHZuLCBuLCBzX2YpO1xuICAgICAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVthXSArPSBHZXRQYXJ0aWNsZUludk1hc3MoKSAqIGY7XG4gICAgICAgICAgdmVsX2RhdGFbYV0uU2VsZk11bEFkZChpbnZfbWFzcywgZik7XG4gICAgICAgICAgLy8vYi5BcHBseUxpbmVhckltcHVsc2UoLWYsIHAsIHRydWUpO1xuICAgICAgICAgIGIuQXBwbHlMaW5lYXJJbXB1bHNlKGYuU2VsZk5lZygpLCBwLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlRXh0cmFEYW1waW5nX3NfdiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZUV4dHJhRGFtcGluZ19zX2YgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIFNvbHZlV2FsbCgpOiB2b2lkIHtcbiAgICBjb25zdCB2ZWxfZGF0YSA9IHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgIGlmICh0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpXSAmIGIyUGFydGljbGVGbGFnLmIyX3dhbGxQYXJ0aWNsZSkge1xuICAgICAgICB2ZWxfZGF0YVtpXS5TZXRaZXJvKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNvbHZlUmlnaWQoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHNfcG9zaXRpb24gPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlUmlnaWRfc19wb3NpdGlvbjtcbiAgICBjb25zdCBzX3JvdGF0aW9uID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVJpZ2lkX3Nfcm90YXRpb247XG4gICAgY29uc3Qgc190cmFuc2Zvcm0gPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlUmlnaWRfc190cmFuc2Zvcm07XG4gICAgY29uc3Qgc192ZWxvY2l0eVRyYW5zZm9ybSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVSaWdpZF9zX3ZlbG9jaXR5VHJhbnNmb3JtO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICBmb3IgKGxldCBncm91cCA9IHRoaXMubV9ncm91cExpc3Q7IGdyb3VwOyBncm91cCA9IGdyb3VwLkdldE5leHQoKSkge1xuICAgICAgaWYgKGdyb3VwLm1fZ3JvdXBGbGFncyAmIGIyUGFydGljbGVHcm91cEZsYWcuYjJfcmlnaWRQYXJ0aWNsZUdyb3VwKSB7XG4gICAgICAgIGdyb3VwLlVwZGF0ZVN0YXRpc3RpY3MoKTtcbiAgICAgICAgLy8vYjJSb3Qgcm90YXRpb24oc3RlcC5kdCAqIGdyb3VwLm1fYW5ndWxhclZlbG9jaXR5KTtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBzX3JvdGF0aW9uO1xuICAgICAgICByb3RhdGlvbi5TZXRBbmdsZShzdGVwLmR0ICogZ3JvdXAubV9hbmd1bGFyVmVsb2NpdHkpO1xuICAgICAgICAvLy9iMlRyYW5zZm9ybSB0cmFuc2Zvcm0oZ3JvdXAubV9jZW50ZXIgKyBzdGVwLmR0ICogZ3JvdXAubV9saW5lYXJWZWxvY2l0eSAtIGIyTXVsKHJvdGF0aW9uLCBncm91cC5tX2NlbnRlciksIHJvdGF0aW9uKTtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBiMlZlYzIuQWRkVlYoXG4gICAgICAgICAgZ3JvdXAubV9jZW50ZXIsXG4gICAgICAgICAgYjJWZWMyLlN1YlZWKFxuICAgICAgICAgICAgYjJWZWMyLk11bFNWKHN0ZXAuZHQsIGdyb3VwLm1fbGluZWFyVmVsb2NpdHksIGIyVmVjMi5zX3QwKSxcbiAgICAgICAgICAgIGIyUm90Lk11bFJWKHJvdGF0aW9uLCBncm91cC5tX2NlbnRlciwgYjJWZWMyLnNfdDEpLFxuICAgICAgICAgICAgYjJWZWMyLnNfdDApLFxuICAgICAgICAgIHNfcG9zaXRpb24pO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzX3RyYW5zZm9ybTtcbiAgICAgICAgdHJhbnNmb3JtLlNldFBvc2l0aW9uUm90YXRpb24ocG9zaXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgLy8vZ3JvdXAubV90cmFuc2Zvcm0gPSBiMk11bCh0cmFuc2Zvcm0sIGdyb3VwLm1fdHJhbnNmb3JtKTtcbiAgICAgICAgYjJUcmFuc2Zvcm0uTXVsWFgodHJhbnNmb3JtLCBncm91cC5tX3RyYW5zZm9ybSwgZ3JvdXAubV90cmFuc2Zvcm0pO1xuICAgICAgICBjb25zdCB2ZWxvY2l0eVRyYW5zZm9ybSA9IHNfdmVsb2NpdHlUcmFuc2Zvcm07XG4gICAgICAgIHZlbG9jaXR5VHJhbnNmb3JtLnAueCA9IHN0ZXAuaW52X2R0ICogdHJhbnNmb3JtLnAueDtcbiAgICAgICAgdmVsb2NpdHlUcmFuc2Zvcm0ucC55ID0gc3RlcC5pbnZfZHQgKiB0cmFuc2Zvcm0ucC55O1xuICAgICAgICB2ZWxvY2l0eVRyYW5zZm9ybS5xLnMgPSBzdGVwLmludl9kdCAqIHRyYW5zZm9ybS5xLnM7XG4gICAgICAgIHZlbG9jaXR5VHJhbnNmb3JtLnEuYyA9IHN0ZXAuaW52X2R0ICogKHRyYW5zZm9ybS5xLmMgLSAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGdyb3VwLm1fZmlyc3RJbmRleDsgaSA8IGdyb3VwLm1fbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgICAvLy9tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbaV0gPSBiMk11bCh2ZWxvY2l0eVRyYW5zZm9ybSwgbV9wb3NpdGlvbkJ1ZmZlci5kYXRhW2ldKTtcbiAgICAgICAgICBiMlRyYW5zZm9ybS5NdWxYVih2ZWxvY2l0eVRyYW5zZm9ybSwgcG9zX2RhdGFbaV0sIHZlbF9kYXRhW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlUmlnaWRfc19wb3NpdGlvbiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVJpZ2lkX3Nfcm90YXRpb24gPSBuZXcgYjJSb3QoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVJpZ2lkX3NfdHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVSaWdpZF9zX3ZlbG9jaXR5VHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5cbiAgcHVibGljIFNvbHZlRWxhc3RpYyhzdGVwOiBiMlRpbWVTdGVwKTogdm9pZCB7XG4gICAgY29uc3Qgc19wYSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVFbGFzdGljX3NfcGE7XG4gICAgY29uc3Qgc19wYiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVFbGFzdGljX3NfcGI7XG4gICAgY29uc3Qgc19wYyA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVFbGFzdGljX3NfcGM7XG4gICAgY29uc3Qgc19yID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZUVsYXN0aWNfc19yO1xuICAgIGNvbnN0IHNfdDAgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlRWxhc3RpY19zX3QwO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICBjb25zdCBlbGFzdGljU3RyZW5ndGggPSBzdGVwLmludl9kdCAqIHRoaXMubV9kZWYuZWxhc3RpY1N0cmVuZ3RoO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX3RyaWFkQnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IHRyaWFkID0gdGhpcy5tX3RyaWFkQnVmZmVyLmRhdGFba107XG4gICAgICBpZiAodHJpYWQuZmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9lbGFzdGljUGFydGljbGUpIHtcbiAgICAgICAgY29uc3QgYSA9IHRyaWFkLmluZGV4QTtcbiAgICAgICAgY29uc3QgYiA9IHRyaWFkLmluZGV4QjtcbiAgICAgICAgY29uc3QgYyA9IHRyaWFkLmluZGV4QztcbiAgICAgICAgY29uc3Qgb2EgPSB0cmlhZC5wYTtcbiAgICAgICAgY29uc3Qgb2IgPSB0cmlhZC5wYjtcbiAgICAgICAgY29uc3Qgb2MgPSB0cmlhZC5wYztcbiAgICAgICAgLy8vYjJWZWMyIHBhID0gbV9wb3NpdGlvbkJ1ZmZlci5kYXRhW2FdO1xuICAgICAgICBjb25zdCBwYSA9IHNfcGEuQ29weShwb3NfZGF0YVthXSk7XG4gICAgICAgIC8vL2IyVmVjMiBwYiA9IG1fcG9zaXRpb25CdWZmZXIuZGF0YVtiXTtcbiAgICAgICAgY29uc3QgcGIgPSBzX3BiLkNvcHkocG9zX2RhdGFbYl0pO1xuICAgICAgICAvLy9iMlZlYzIgcGMgPSBtX3Bvc2l0aW9uQnVmZmVyLmRhdGFbY107XG4gICAgICAgIGNvbnN0IHBjID0gc19wYy5Db3B5KHBvc19kYXRhW2NdKTtcbiAgICAgICAgY29uc3QgdmEgPSB2ZWxfZGF0YVthXTtcbiAgICAgICAgY29uc3QgdmIgPSB2ZWxfZGF0YVtiXTtcbiAgICAgICAgY29uc3QgdmMgPSB2ZWxfZGF0YVtjXTtcbiAgICAgICAgLy8vcGEgKz0gc3RlcC5kdCAqIHZhO1xuICAgICAgICBwYS5TZWxmTXVsQWRkKHN0ZXAuZHQsIHZhKTtcbiAgICAgICAgLy8vcGIgKz0gc3RlcC5kdCAqIHZiO1xuICAgICAgICBwYi5TZWxmTXVsQWRkKHN0ZXAuZHQsIHZiKTtcbiAgICAgICAgLy8vcGMgKz0gc3RlcC5kdCAqIHZjO1xuICAgICAgICBwYy5TZWxmTXVsQWRkKHN0ZXAuZHQsIHZjKTtcbiAgICAgICAgLy8vYjJWZWMyIG1pZFBvaW50ID0gKGZsb2F0MzIpIDEgLyAzICogKHBhICsgcGIgKyBwYyk7XG4gICAgICAgIGNvbnN0IG1pZFBvaW50X3ggPSAocGEueCArIHBiLnggKyBwYy54KSAvIDMuMDtcbiAgICAgICAgY29uc3QgbWlkUG9pbnRfeSA9IChwYS55ICsgcGIueSArIHBjLnkpIC8gMy4wO1xuICAgICAgICAvLy9wYSAtPSBtaWRQb2ludDtcbiAgICAgICAgcGEueCAtPSBtaWRQb2ludF94O1xuICAgICAgICBwYS55IC09IG1pZFBvaW50X3k7XG4gICAgICAgIC8vL3BiIC09IG1pZFBvaW50O1xuICAgICAgICBwYi54IC09IG1pZFBvaW50X3g7XG4gICAgICAgIHBiLnkgLT0gbWlkUG9pbnRfeTtcbiAgICAgICAgLy8vcGMgLT0gbWlkUG9pbnQ7XG4gICAgICAgIHBjLnggLT0gbWlkUG9pbnRfeDtcbiAgICAgICAgcGMueSAtPSBtaWRQb2ludF95O1xuICAgICAgICAvLy9iMlJvdCByO1xuICAgICAgICBjb25zdCByID0gc19yO1xuICAgICAgICByLnMgPSBiMlZlYzIuQ3Jvc3NWVihvYSwgcGEpICsgYjJWZWMyLkNyb3NzVlYob2IsIHBiKSArIGIyVmVjMi5Dcm9zc1ZWKG9jLCBwYyk7XG4gICAgICAgIHIuYyA9IGIyVmVjMi5Eb3RWVihvYSwgcGEpICsgYjJWZWMyLkRvdFZWKG9iLCBwYikgKyBiMlZlYzIuRG90VlYob2MsIHBjKTtcbiAgICAgICAgY29uc3QgcjIgPSByLnMgKiByLnMgKyByLmMgKiByLmM7XG4gICAgICAgIGxldCBpbnZSID0gYjJJbnZTcXJ0KHIyKTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShpbnZSKSkge1xuICAgICAgICAgIGludlIgPSAxLjk4MTc3NTM3ZSswMTk7XG4gICAgICAgIH1cbiAgICAgICAgci5zICo9IGludlI7XG4gICAgICAgIHIuYyAqPSBpbnZSO1xuICAgICAgICAvLy9yLmFuZ2xlID0gTWF0aC5hdGFuMihyLnMsIHIuYyk7IC8vIFRPRE86IG9wdGltaXplXG4gICAgICAgIGNvbnN0IHN0cmVuZ3RoID0gZWxhc3RpY1N0cmVuZ3RoICogdHJpYWQuc3RyZW5ndGg7XG4gICAgICAgIC8vL3ZhICs9IHN0cmVuZ3RoICogKGIyTXVsKHIsIG9hKSAtIHBhKTtcbiAgICAgICAgYjJSb3QuTXVsUlYociwgb2EsIHNfdDApO1xuICAgICAgICBiMlZlYzIuU3ViVlYoc190MCwgcGEsIHNfdDApO1xuICAgICAgICBiMlZlYzIuTXVsU1Yoc3RyZW5ndGgsIHNfdDAsIHNfdDApO1xuICAgICAgICB2YS5TZWxmQWRkKHNfdDApO1xuICAgICAgICAvLy92YiArPSBzdHJlbmd0aCAqIChiMk11bChyLCBvYikgLSBwYik7XG4gICAgICAgIGIyUm90Lk11bFJWKHIsIG9iLCBzX3QwKTtcbiAgICAgICAgYjJWZWMyLlN1YlZWKHNfdDAsIHBiLCBzX3QwKTtcbiAgICAgICAgYjJWZWMyLk11bFNWKHN0cmVuZ3RoLCBzX3QwLCBzX3QwKTtcbiAgICAgICAgdmIuU2VsZkFkZChzX3QwKTtcbiAgICAgICAgLy8vdmMgKz0gc3RyZW5ndGggKiAoYjJNdWwociwgb2MpIC0gcGMpO1xuICAgICAgICBiMlJvdC5NdWxSVihyLCBvYywgc190MCk7XG4gICAgICAgIGIyVmVjMi5TdWJWVihzX3QwLCBwYywgc190MCk7XG4gICAgICAgIGIyVmVjMi5NdWxTVihzdHJlbmd0aCwgc190MCwgc190MCk7XG4gICAgICAgIHZjLlNlbGZBZGQoc190MCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVFbGFzdGljX3NfcGEgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVFbGFzdGljX3NfcGIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVFbGFzdGljX3NfcGMgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVFbGFzdGljX3NfciA9IG5ldyBiMlJvdCgpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlRWxhc3RpY19zX3QwID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBTb2x2ZVNwcmluZyhzdGVwOiBiMlRpbWVTdGVwKTogdm9pZCB7XG4gICAgY29uc3Qgc19wYSA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVTcHJpbmdfc19wYTtcbiAgICBjb25zdCBzX3BiID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVNwcmluZ19zX3BiO1xuICAgIGNvbnN0IHNfZCA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVTcHJpbmdfc19kO1xuICAgIGNvbnN0IHNfZiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVTcHJpbmdfc19mO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICBjb25zdCBzcHJpbmdTdHJlbmd0aCA9IHN0ZXAuaW52X2R0ICogdGhpcy5tX2RlZi5zcHJpbmdTdHJlbmd0aDtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9wYWlyQnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IHBhaXIgPSB0aGlzLm1fcGFpckJ1ZmZlci5kYXRhW2tdO1xuICAgICAgaWYgKHBhaXIuZmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9zcHJpbmdQYXJ0aWNsZSkge1xuICAgICAgICAvLy9pbnQzMiBhID0gcGFpci5pbmRleEE7XG4gICAgICAgIGNvbnN0IGEgPSBwYWlyLmluZGV4QTtcbiAgICAgICAgLy8vaW50MzIgYiA9IHBhaXIuaW5kZXhCO1xuICAgICAgICBjb25zdCBiID0gcGFpci5pbmRleEI7XG4gICAgICAgIC8vL2IyVmVjMiBwYSA9IG1fcG9zaXRpb25CdWZmZXIuZGF0YVthXTtcbiAgICAgICAgY29uc3QgcGEgPSBzX3BhLkNvcHkocG9zX2RhdGFbYV0pO1xuICAgICAgICAvLy9iMlZlYzIgcGIgPSBtX3Bvc2l0aW9uQnVmZmVyLmRhdGFbYl07XG4gICAgICAgIGNvbnN0IHBiID0gc19wYi5Db3B5KHBvc19kYXRhW2JdKTtcbiAgICAgICAgLy8vYjJWZWMyJiB2YSA9IG1fdmVsb2NpdHlCdWZmZXIuZGF0YVthXTtcbiAgICAgICAgY29uc3QgdmEgPSB2ZWxfZGF0YVthXTtcbiAgICAgICAgLy8vYjJWZWMyJiB2YiA9IG1fdmVsb2NpdHlCdWZmZXIuZGF0YVtiXTtcbiAgICAgICAgY29uc3QgdmIgPSB2ZWxfZGF0YVtiXTtcbiAgICAgICAgLy8vcGEgKz0gc3RlcC5kdCAqIHZhO1xuICAgICAgICBwYS5TZWxmTXVsQWRkKHN0ZXAuZHQsIHZhKTtcbiAgICAgICAgLy8vcGIgKz0gc3RlcC5kdCAqIHZiO1xuICAgICAgICBwYi5TZWxmTXVsQWRkKHN0ZXAuZHQsIHZiKTtcbiAgICAgICAgLy8vYjJWZWMyIGQgPSBwYiAtIHBhO1xuICAgICAgICBjb25zdCBkID0gYjJWZWMyLlN1YlZWKHBiLCBwYSwgc19kKTtcbiAgICAgICAgLy8vZmxvYXQzMiByMCA9IHBhaXIuZGlzdGFuY2U7XG4gICAgICAgIGNvbnN0IHIwID0gcGFpci5kaXN0YW5jZTtcbiAgICAgICAgLy8vZmxvYXQzMiByMSA9IGQuTGVuZ3RoKCk7XG4gICAgICAgIGNvbnN0IHIxID0gZC5MZW5ndGgoKTtcbiAgICAgICAgLy8vZmxvYXQzMiBzdHJlbmd0aCA9IHNwcmluZ1N0cmVuZ3RoICogcGFpci5zdHJlbmd0aDtcbiAgICAgICAgY29uc3Qgc3RyZW5ndGggPSBzcHJpbmdTdHJlbmd0aCAqIHBhaXIuc3RyZW5ndGg7XG4gICAgICAgIC8vL2IyVmVjMiBmID0gc3RyZW5ndGggKiAocjAgLSByMSkgLyByMSAqIGQ7XG4gICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1Yoc3RyZW5ndGggKiAocjAgLSByMSkgLyByMSwgZCwgc19mKTtcbiAgICAgICAgLy8vdmEgLT0gZjtcbiAgICAgICAgdmEuU2VsZlN1YihmKTtcbiAgICAgICAgLy8vdmIgKz0gZjtcbiAgICAgICAgdmIuU2VsZkFkZChmKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVNwcmluZ19zX3BhID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlU3ByaW5nX3NfcGIgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVTcHJpbmdfc19kID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlU3ByaW5nX3NfZiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgU29sdmVUZW5zaWxlKHN0ZXA6IGIyVGltZVN0ZXApOiB2b2lkIHtcbiAgICBjb25zdCBzX3dlaWdodGVkTm9ybWFsID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVRlbnNpbGVfc193ZWlnaHRlZE5vcm1hbDtcbiAgICBjb25zdCBzX3MgPSBiMlBhcnRpY2xlU3lzdGVtLlNvbHZlVGVuc2lsZV9zX3M7XG4gICAgY29uc3Qgc19mID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVRlbnNpbGVfc19mO1xuICAgIGNvbnN0IHZlbF9kYXRhID0gdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGE7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9hY2N1bXVsYXRpb24yQnVmZmVyICE9PSBudWxsKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICB0aGlzLm1fYWNjdW11bGF0aW9uMkJ1ZmZlcltpXSA9IG5ldyBiMlZlYzIoKTtcbiAgICAgIHRoaXMubV9hY2N1bXVsYXRpb24yQnVmZmVyW2ldLlNldFplcm8oKTtcbiAgICB9XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGlmIChjb250YWN0LmZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfdGVuc2lsZVBhcnRpY2xlKSB7XG4gICAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4QTtcbiAgICAgICAgY29uc3QgYiA9IGNvbnRhY3QuaW5kZXhCO1xuICAgICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICAgIGNvbnN0IG4gPSBjb250YWN0Lm5vcm1hbDtcbiAgICAgICAgLy8vYjJWZWMyIHdlaWdodGVkTm9ybWFsID0gKDEgLSB3KSAqIHcgKiBuO1xuICAgICAgICBjb25zdCB3ZWlnaHRlZE5vcm1hbCA9IGIyVmVjMi5NdWxTVigoMSAtIHcpICogdywgbiwgc193ZWlnaHRlZE5vcm1hbCk7XG4gICAgICAgIC8vL21fYWNjdW11bGF0aW9uMkJ1ZmZlclthXSAtPSB3ZWlnaHRlZE5vcm1hbDtcbiAgICAgICAgdGhpcy5tX2FjY3VtdWxhdGlvbjJCdWZmZXJbYV0uU2VsZlN1Yih3ZWlnaHRlZE5vcm1hbCk7XG4gICAgICAgIC8vL21fYWNjdW11bGF0aW9uMkJ1ZmZlcltiXSArPSB3ZWlnaHRlZE5vcm1hbDtcbiAgICAgICAgdGhpcy5tX2FjY3VtdWxhdGlvbjJCdWZmZXJbYl0uU2VsZkFkZCh3ZWlnaHRlZE5vcm1hbCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNyaXRpY2FsVmVsb2NpdHkgPSB0aGlzLkdldENyaXRpY2FsVmVsb2NpdHkoc3RlcCk7XG4gICAgY29uc3QgcHJlc3N1cmVTdHJlbmd0aCA9IHRoaXMubV9kZWYuc3VyZmFjZVRlbnNpb25QcmVzc3VyZVN0cmVuZ3RoICogY3JpdGljYWxWZWxvY2l0eTtcbiAgICBjb25zdCBub3JtYWxTdHJlbmd0aCA9IHRoaXMubV9kZWYuc3VyZmFjZVRlbnNpb25Ob3JtYWxTdHJlbmd0aCAqIGNyaXRpY2FsVmVsb2NpdHk7XG4gICAgY29uc3QgbWF4VmVsb2NpdHlWYXJpYXRpb24gPSBiMl9tYXhQYXJ0aWNsZUZvcmNlICogY3JpdGljYWxWZWxvY2l0eTtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9jb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fY29udGFjdEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgaWYgKGNvbnRhY3QuZmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl90ZW5zaWxlUGFydGljbGUpIHtcbiAgICAgICAgY29uc3QgYSA9IGNvbnRhY3QuaW5kZXhBO1xuICAgICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgICAgY29uc3QgbiA9IGNvbnRhY3Qubm9ybWFsO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5tX3dlaWdodEJ1ZmZlclthXSArIHRoaXMubV93ZWlnaHRCdWZmZXJbYl07XG4gICAgICAgIC8vL2IyVmVjMiBzID0gbV9hY2N1bXVsYXRpb24yQnVmZmVyW2JdIC0gbV9hY2N1bXVsYXRpb24yQnVmZmVyW2FdO1xuICAgICAgICBjb25zdCBzID0gYjJWZWMyLlN1YlZWKHRoaXMubV9hY2N1bXVsYXRpb24yQnVmZmVyW2JdLCB0aGlzLm1fYWNjdW11bGF0aW9uMkJ1ZmZlclthXSwgc19zKTtcbiAgICAgICAgY29uc3QgZm4gPSBiMk1pbihcbiAgICAgICAgICBwcmVzc3VyZVN0cmVuZ3RoICogKGggLSAyKSArIG5vcm1hbFN0cmVuZ3RoICogYjJWZWMyLkRvdFZWKHMsIG4pLFxuICAgICAgICAgIG1heFZlbG9jaXR5VmFyaWF0aW9uKSAqIHc7XG4gICAgICAgIC8vL2IyVmVjMiBmID0gZm4gKiBuO1xuICAgICAgICBjb25zdCBmID0gYjJWZWMyLk11bFNWKGZuLCBuLCBzX2YpO1xuICAgICAgICAvLy9tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbYV0gLT0gZjtcbiAgICAgICAgdmVsX2RhdGFbYV0uU2VsZlN1YihmKTtcbiAgICAgICAgLy8vbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2JdICs9IGY7XG4gICAgICAgIHZlbF9kYXRhW2JdLlNlbGZBZGQoZik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVUZW5zaWxlX3Nfd2VpZ2h0ZWROb3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVUZW5zaWxlX3NfcyA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVRlbnNpbGVfc19mID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBTb2x2ZVZpc2NvdXMoKTogdm9pZCB7XG4gICAgY29uc3Qgc192ID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVZpc2NvdXNfc192O1xuICAgIGNvbnN0IHNfZiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVWaXNjb3VzX3NfZjtcbiAgICBjb25zdCBwb3NfZGF0YSA9IHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhO1xuICAgIGNvbnN0IHZlbF9kYXRhID0gdGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmlzY291c1N0cmVuZ3RoID0gdGhpcy5tX2RlZi52aXNjb3VzU3RyZW5ndGg7XG4gICAgY29uc3QgaW52X21hc3MgPSB0aGlzLkdldFBhcnRpY2xlSW52TWFzcygpO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4O1xuICAgICAgaWYgKHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2FdICYgYjJQYXJ0aWNsZUZsYWcuYjJfdmlzY291c1BhcnRpY2xlKSB7XG4gICAgICAgIGNvbnN0IGIgPSBjb250YWN0LmJvZHk7XG4gICAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgICAgY29uc3QgbSA9IGNvbnRhY3QubWFzcztcbiAgICAgICAgY29uc3QgcCA9IHBvc19kYXRhW2FdO1xuICAgICAgICAvLy9iMlZlYzIgdiA9IGIuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludChwKSAtIG1fdmVsb2NpdHlCdWZmZXIuZGF0YVthXTtcbiAgICAgICAgY29uc3QgdiA9IGIyVmVjMi5TdWJWVihiLkdldExpbmVhclZlbG9jaXR5RnJvbVdvcmxkUG9pbnQocCwgYjJWZWMyLnNfdDApLCB2ZWxfZGF0YVthXSwgc192KTtcbiAgICAgICAgLy8vYjJWZWMyIGYgPSB2aXNjb3VzU3RyZW5ndGggKiBtICogdyAqIHY7XG4gICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1YodmlzY291c1N0cmVuZ3RoICogbSAqIHcsIHYsIHNfZik7XG4gICAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVthXSArPSBHZXRQYXJ0aWNsZUludk1hc3MoKSAqIGY7XG4gICAgICAgIHZlbF9kYXRhW2FdLlNlbGZNdWxBZGQoaW52X21hc3MsIGYpO1xuICAgICAgICAvLy9iLkFwcGx5TGluZWFySW1wdWxzZSgtZiwgcCwgdHJ1ZSk7XG4gICAgICAgIGIuQXBwbHlMaW5lYXJJbXB1bHNlKGYuU2VsZk5lZygpLCBwLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGlmIChjb250YWN0LmZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfdmlzY291c1BhcnRpY2xlKSB7XG4gICAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4QTtcbiAgICAgICAgY29uc3QgYiA9IGNvbnRhY3QuaW5kZXhCO1xuICAgICAgICBjb25zdCB3ID0gY29udGFjdC53ZWlnaHQ7XG4gICAgICAgIC8vL2IyVmVjMiB2ID0gbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2JdIC0gbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2FdO1xuICAgICAgICBjb25zdCB2ID0gYjJWZWMyLlN1YlZWKHZlbF9kYXRhW2JdLCB2ZWxfZGF0YVthXSwgc192KTtcbiAgICAgICAgLy8vYjJWZWMyIGYgPSB2aXNjb3VzU3RyZW5ndGggKiB3ICogdjtcbiAgICAgICAgY29uc3QgZiA9IGIyVmVjMi5NdWxTVih2aXNjb3VzU3RyZW5ndGggKiB3LCB2LCBzX2YpO1xuICAgICAgICAvLy9tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbYV0gKz0gZjtcbiAgICAgICAgdmVsX2RhdGFbYV0uU2VsZkFkZChmKTtcbiAgICAgICAgLy8vbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2JdIC09IGY7XG4gICAgICAgIHZlbF9kYXRhW2JdLlNlbGZTdWIoZik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU29sdmVWaXNjb3VzX3NfdiA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTb2x2ZVZpc2NvdXNfc19mID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBTb2x2ZVJlcHVsc2l2ZShzdGVwOiBiMlRpbWVTdGVwKTogdm9pZCB7XG4gICAgY29uc3Qgc19mID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVJlcHVsc2l2ZV9zX2Y7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICBjb25zdCByZXB1bHNpdmVTdHJlbmd0aCA9IHRoaXMubV9kZWYucmVwdWxzaXZlU3RyZW5ndGggKiB0aGlzLkdldENyaXRpY2FsVmVsb2NpdHkoc3RlcCk7XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGlmIChjb250YWN0LmZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfcmVwdWxzaXZlUGFydGljbGUpIHtcbiAgICAgICAgY29uc3QgYSA9IGNvbnRhY3QuaW5kZXhBO1xuICAgICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICAgIGlmICh0aGlzLm1fZ3JvdXBCdWZmZXJbYV0gIT09IHRoaXMubV9ncm91cEJ1ZmZlcltiXSkge1xuICAgICAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgICAgICBjb25zdCBuID0gY29udGFjdC5ub3JtYWw7XG4gICAgICAgICAgLy8vYjJWZWMyIGYgPSByZXB1bHNpdmVTdHJlbmd0aCAqIHcgKiBuO1xuICAgICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1YocmVwdWxzaXZlU3RyZW5ndGggKiB3LCBuLCBzX2YpO1xuICAgICAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVthXSAtPSBmO1xuICAgICAgICAgIHZlbF9kYXRhW2FdLlNlbGZTdWIoZik7XG4gICAgICAgICAgLy8vbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2JdICs9IGY7XG4gICAgICAgICAgdmVsX2RhdGFbYl0uU2VsZkFkZChmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlUmVwdWxzaXZlX3NfZiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgU29sdmVQb3dkZXIoc3RlcDogYjJUaW1lU3RlcCk6IHZvaWQge1xuICAgIGNvbnN0IHNfZiA9IGIyUGFydGljbGVTeXN0ZW0uU29sdmVQb3dkZXJfc19mO1xuICAgIGNvbnN0IHBvc19kYXRhID0gdGhpcy5tX3Bvc2l0aW9uQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgdmVsX2RhdGEgPSB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YTtcbiAgICBjb25zdCBwb3dkZXJTdHJlbmd0aCA9IHRoaXMubV9kZWYucG93ZGVyU3RyZW5ndGggKiB0aGlzLkdldENyaXRpY2FsVmVsb2NpdHkoc3RlcCk7XG4gICAgY29uc3QgbWluV2VpZ2h0ID0gMS4wIC0gYjJfcGFydGljbGVTdHJpZGU7XG4gICAgY29uc3QgaW52X21hc3MgPSB0aGlzLkdldFBhcnRpY2xlSW52TWFzcygpO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnN0IGEgPSBjb250YWN0LmluZGV4O1xuICAgICAgaWYgKHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2FdICYgYjJQYXJ0aWNsZUZsYWcuYjJfcG93ZGVyUGFydGljbGUpIHtcbiAgICAgICAgY29uc3QgdyA9IGNvbnRhY3Qud2VpZ2h0O1xuICAgICAgICBpZiAodyA+IG1pbldlaWdodCkge1xuICAgICAgICAgIGNvbnN0IGIgPSBjb250YWN0LmJvZHk7XG4gICAgICAgICAgY29uc3QgbSA9IGNvbnRhY3QubWFzcztcbiAgICAgICAgICBjb25zdCBwID0gcG9zX2RhdGFbYV07XG4gICAgICAgICAgY29uc3QgbiA9IGNvbnRhY3Qubm9ybWFsO1xuICAgICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1YocG93ZGVyU3RyZW5ndGggKiBtICogKHcgLSBtaW5XZWlnaHQpLCBuLCBzX2YpO1xuICAgICAgICAgIHZlbF9kYXRhW2FdLlNlbGZNdWxTdWIoaW52X21hc3MsIGYpO1xuICAgICAgICAgIGIuQXBwbHlMaW5lYXJJbXB1bHNlKGYsIHAsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBpZiAoY29udGFjdC5mbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3Bvd2RlclBhcnRpY2xlKSB7XG4gICAgICAgIGNvbnN0IHcgPSBjb250YWN0LndlaWdodDtcbiAgICAgICAgaWYgKHcgPiBtaW5XZWlnaHQpIHtcbiAgICAgICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICAgICAgY29uc3QgYiA9IGNvbnRhY3QuaW5kZXhCO1xuICAgICAgICAgIGNvbnN0IG4gPSBjb250YWN0Lm5vcm1hbDtcbiAgICAgICAgICBjb25zdCBmID0gYjJWZWMyLk11bFNWKHBvd2RlclN0cmVuZ3RoICogKHcgLSBtaW5XZWlnaHQpLCBuLCBzX2YpO1xuICAgICAgICAgIHZlbF9kYXRhW2FdLlNlbGZTdWIoZik7XG4gICAgICAgICAgdmVsX2RhdGFbYl0uU2VsZkFkZChmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlUG93ZGVyX3NfZiA9IG5ldyBiMlZlYzIoKTtcblxuICBwdWJsaWMgU29sdmVTb2xpZChzdGVwOiBiMlRpbWVTdGVwKTogdm9pZCB7XG4gICAgY29uc3Qgc19mID0gYjJQYXJ0aWNsZVN5c3RlbS5Tb2x2ZVNvbGlkX3NfZjtcbiAgICBjb25zdCB2ZWxfZGF0YSA9IHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhO1xuICAgIC8vIGFwcGxpZXMgZXh0cmEgcmVwdWxzaXZlIGZvcmNlIGZyb20gc29saWQgcGFydGljbGUgZ3JvdXBzXG4gICAgdGhpcy5tX2RlcHRoQnVmZmVyID0gdGhpcy5SZXF1ZXN0QnVmZmVyKHRoaXMubV9kZXB0aEJ1ZmZlcik7XG4gICAgY29uc3QgZWplY3Rpb25TdHJlbmd0aCA9IHN0ZXAuaW52X2R0ICogdGhpcy5tX2RlZi5lamVjdGlvblN0cmVuZ3RoO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICBjb25zdCBiID0gY29udGFjdC5pbmRleEI7XG4gICAgICBpZiAodGhpcy5tX2dyb3VwQnVmZmVyW2FdICE9PSB0aGlzLm1fZ3JvdXBCdWZmZXJbYl0pIHtcbiAgICAgICAgY29uc3QgdyA9IGNvbnRhY3Qud2VpZ2h0O1xuICAgICAgICBjb25zdCBuID0gY29udGFjdC5ub3JtYWw7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLm1fZGVwdGhCdWZmZXJbYV0gKyB0aGlzLm1fZGVwdGhCdWZmZXJbYl07XG4gICAgICAgIGNvbnN0IGYgPSBiMlZlYzIuTXVsU1YoZWplY3Rpb25TdHJlbmd0aCAqIGggKiB3LCBuLCBzX2YpO1xuICAgICAgICB2ZWxfZGF0YVthXS5TZWxmU3ViKGYpO1xuICAgICAgICB2ZWxfZGF0YVtiXS5TZWxmQWRkKGYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNvbHZlU29saWRfc19mID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBTb2x2ZUZvcmNlKHN0ZXA6IGIyVGltZVN0ZXApOiB2b2lkIHtcbiAgICBjb25zdCB2ZWxfZGF0YSA9IHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhO1xuICAgIGNvbnN0IHZlbG9jaXR5UGVyRm9yY2UgPSBzdGVwLmR0ICogdGhpcy5HZXRQYXJ0aWNsZUludk1hc3MoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICAvLy9tX3ZlbG9jaXR5QnVmZmVyLmRhdGFbaV0gKz0gdmVsb2NpdHlQZXJGb3JjZSAqIG1fZm9yY2VCdWZmZXJbaV07XG4gICAgICB2ZWxfZGF0YVtpXS5TZWxmTXVsQWRkKHZlbG9jaXR5UGVyRm9yY2UsIHRoaXMubV9mb3JjZUJ1ZmZlcltpXSk7XG4gICAgfVxuICAgIHRoaXMubV9oYXNGb3JjZSA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIFNvbHZlQ29sb3JNaXhpbmcoKTogdm9pZCB7XG4gICAgLy8gbWl4ZXMgY29sb3IgYmV0d2VlbiBjb250YWN0aW5nIHBhcnRpY2xlc1xuICAgIGNvbnN0IGNvbG9yTWl4aW5nID0gMC41ICogdGhpcy5tX2RlZi5jb2xvck1peGluZ1N0cmVuZ3RoO1xuICAgIGlmIChjb2xvck1peGluZykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLm1fY29udGFjdEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgICBjb25zdCBhID0gY29udGFjdC5pbmRleEE7XG4gICAgICAgIGNvbnN0IGIgPSBjb250YWN0LmluZGV4QjtcbiAgICAgICAgaWYgKHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2FdICYgdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbYl0gJlxuICAgICAgICAgIGIyUGFydGljbGVGbGFnLmIyX2NvbG9yTWl4aW5nUGFydGljbGUpIHtcbiAgICAgICAgICBjb25zdCBjb2xvckEgPSB0aGlzLm1fY29sb3JCdWZmZXIuZGF0YVthXTtcbiAgICAgICAgICBjb25zdCBjb2xvckIgPSB0aGlzLm1fY29sb3JCdWZmZXIuZGF0YVtiXTtcbiAgICAgICAgICAvLyBVc2UgdGhlIHN0YXRpYyBtZXRob2QgdG8gZW5zdXJlIGNlcnRhaW4gY29tcGlsZXJzIGlubGluZVxuICAgICAgICAgIC8vIHRoaXMgY29ycmVjdGx5LlxuICAgICAgICAgIGIyQ29sb3IuTWl4Q29sb3JzKGNvbG9yQSwgY29sb3JCLCBjb2xvck1peGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgU29sdmVab21iaWUoKTogdm9pZCB7XG4gICAgLy8gcmVtb3ZlcyBwYXJ0aWNsZXMgd2l0aCB6b21iaWUgZmxhZ1xuICAgIGxldCBuZXdDb3VudCA9IDA7XG4gICAgY29uc3QgbmV3SW5kaWNlczogbnVtYmVyW10gPSBbXTsgLy8gVE9ETzogc3RhdGljXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7IGkrKykge1xuICAgICAgbmV3SW5kaWNlc1tpXSA9IGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4O1xuICAgIH1cbiAgICAvLyBERUJVRzogYjJBc3NlcnQobmV3SW5kaWNlcy5sZW5ndGggPT09IHRoaXMubV9jb3VudCk7XG4gICAgbGV0IGFsbFBhcnRpY2xlRmxhZ3MgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IGZsYWdzID0gdGhpcy5tX2ZsYWdzQnVmZmVyLmRhdGFbaV07XG4gICAgICBpZiAoZmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl96b21iaWVQYXJ0aWNsZSkge1xuICAgICAgICBjb25zdCBkZXN0cnVjdGlvbkxpc3RlbmVyID0gdGhpcy5tX3dvcmxkLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lcjtcbiAgICAgICAgaWYgKChmbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX2Rlc3RydWN0aW9uTGlzdGVuZXJQYXJ0aWNsZSkgJiYgZGVzdHJ1Y3Rpb25MaXN0ZW5lcikge1xuICAgICAgICAgIGRlc3RydWN0aW9uTGlzdGVuZXIuU2F5R29vZGJ5ZVBhcnRpY2xlKHRoaXMsIGkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlc3Ryb3kgcGFydGljbGUgaGFuZGxlLlxuICAgICAgICBpZiAodGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGEpIHtcbiAgICAgICAgICBjb25zdCBoYW5kbGUgPSB0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YVtpXTtcbiAgICAgICAgICBpZiAoaGFuZGxlKSB7XG4gICAgICAgICAgICBoYW5kbGUuU2V0SW5kZXgoYjJfaW52YWxpZFBhcnRpY2xlSW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGFbaV0gPSBudWxsO1xuICAgICAgICAgICAgLy8vbV9oYW5kbGVBbGxvY2F0b3IuRnJlZShoYW5kbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBuZXdJbmRpY2VzW2ldID0gYjJfaW52YWxpZFBhcnRpY2xlSW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdJbmRpY2VzW2ldID0gbmV3Q291bnQ7XG4gICAgICAgIGlmIChpICE9PSBuZXdDb3VudCkge1xuICAgICAgICAgIC8vIFVwZGF0ZSBoYW5kbGUgdG8gcmVmZXJlbmNlIG5ldyBwYXJ0aWNsZSBpbmRleC5cbiAgICAgICAgICBpZiAodGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHRoaXMubV9oYW5kbGVJbmRleEJ1ZmZlci5kYXRhW2ldO1xuICAgICAgICAgICAgaWYgKGhhbmRsZSkgeyBoYW5kbGUuU2V0SW5kZXgobmV3Q291bnQpOyB9XG4gICAgICAgICAgICB0aGlzLm1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YVtuZXdDb3VudF0gPSBoYW5kbGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW25ld0NvdW50XSA9IHRoaXMubV9mbGFnc0J1ZmZlci5kYXRhW2ldO1xuICAgICAgICAgIGlmICh0aGlzLm1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlci5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLm1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlci5kYXRhW25ld0NvdW50XSA9IHRoaXMubV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyLmRhdGFbaV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLm1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlci5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLm1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlci5kYXRhW25ld0NvdW50XSA9IHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGFbaV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGFbbmV3Q291bnRdID0gdGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGFbaV07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhW25ld0NvdW50XS5Db3B5KHRoaXMubV9wb3NpdGlvbkJ1ZmZlci5kYXRhW2ldKTtcbiAgICAgICAgICB0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtuZXdDb3VudF0uQ29weSh0aGlzLm1fdmVsb2NpdHlCdWZmZXIuZGF0YVtpXSk7XG4gICAgICAgICAgdGhpcy5tX2dyb3VwQnVmZmVyW25ld0NvdW50XSA9IHRoaXMubV9ncm91cEJ1ZmZlcltpXTtcbiAgICAgICAgICBpZiAodGhpcy5tX2hhc0ZvcmNlKSB7XG4gICAgICAgICAgICB0aGlzLm1fZm9yY2VCdWZmZXJbbmV3Q291bnRdLkNvcHkodGhpcy5tX2ZvcmNlQnVmZmVyW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5tX3N0YXRpY1ByZXNzdXJlQnVmZmVyW25ld0NvdW50XSA9IHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlcltpXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMubV9kZXB0aEJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5tX2RlcHRoQnVmZmVyW25ld0NvdW50XSA9IHRoaXMubV9kZXB0aEJ1ZmZlcltpXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMubV9jb2xvckJ1ZmZlci5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLm1fY29sb3JCdWZmZXIuZGF0YVtuZXdDb3VudF0uQ29weSh0aGlzLm1fY29sb3JCdWZmZXIuZGF0YVtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLm1fdXNlckRhdGFCdWZmZXIuZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5tX3VzZXJEYXRhQnVmZmVyLmRhdGFbbmV3Q291bnRdID0gdGhpcy5tX3VzZXJEYXRhQnVmZmVyLmRhdGFbaV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGFbbmV3Q291bnRdID0gdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGFbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG5ld0NvdW50Kys7XG4gICAgICAgIGFsbFBhcnRpY2xlRmxhZ3MgfD0gZmxhZ3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcHJlZGljYXRlIGZ1bmN0aW9uc1xuICAgIGNvbnN0IFRlc3QgPSB7XG4gICAgICAvLy9zdGF0aWMgYm9vbCBJc1Byb3h5SW52YWxpZChjb25zdCBQcm94eSYgcHJveHkpXG4gICAgICBJc1Byb3h5SW52YWxpZDogKHByb3h5OiBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm94eS5pbmRleCA8IDA7XG4gICAgICB9LFxuICAgICAgLy8vc3RhdGljIGJvb2wgSXNDb250YWN0SW52YWxpZChjb25zdCBiMlBhcnRpY2xlQ29udGFjdCYgY29udGFjdClcbiAgICAgIElzQ29udGFjdEludmFsaWQ6IChjb250YWN0OiBiMlBhcnRpY2xlQ29udGFjdCkgPT4ge1xuICAgICAgICByZXR1cm4gY29udGFjdC5pbmRleEEgPCAwIHx8IGNvbnRhY3QuaW5kZXhCIDwgMDtcbiAgICAgIH0sXG4gICAgICAvLy9zdGF0aWMgYm9vbCBJc0JvZHlDb250YWN0SW52YWxpZChjb25zdCBiMlBhcnRpY2xlQm9keUNvbnRhY3QmIGNvbnRhY3QpXG4gICAgICBJc0JvZHlDb250YWN0SW52YWxpZDogKGNvbnRhY3Q6IGIyUGFydGljbGVCb2R5Q29udGFjdCkgPT4ge1xuICAgICAgICByZXR1cm4gY29udGFjdC5pbmRleCA8IDA7XG4gICAgICB9LFxuICAgICAgLy8vc3RhdGljIGJvb2wgSXNQYWlySW52YWxpZChjb25zdCBiMlBhcnRpY2xlUGFpciYgcGFpcilcbiAgICAgIElzUGFpckludmFsaWQ6IChwYWlyOiBiMlBhcnRpY2xlUGFpcikgPT4ge1xuICAgICAgICByZXR1cm4gcGFpci5pbmRleEEgPCAwIHx8IHBhaXIuaW5kZXhCIDwgMDtcbiAgICAgIH0sXG4gICAgICAvLy9zdGF0aWMgYm9vbCBJc1RyaWFkSW52YWxpZChjb25zdCBiMlBhcnRpY2xlVHJpYWQmIHRyaWFkKVxuICAgICAgSXNUcmlhZEludmFsaWQ6ICh0cmlhZDogYjJQYXJ0aWNsZVRyaWFkKSA9PiB7XG4gICAgICAgIHJldHVybiB0cmlhZC5pbmRleEEgPCAwIHx8IHRyaWFkLmluZGV4QiA8IDAgfHwgdHJpYWQuaW5kZXhDIDwgMDtcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIC8vIHVwZGF0ZSBwcm94aWVzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fcHJveHlCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgcHJveHkgPSB0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVtrXTtcbiAgICAgIHByb3h5LmluZGV4ID0gbmV3SW5kaWNlc1twcm94eS5pbmRleF07XG4gICAgfVxuICAgIHRoaXMubV9wcm94eUJ1ZmZlci5SZW1vdmVJZihUZXN0LklzUHJveHlJbnZhbGlkKTtcblxuICAgIC8vIHVwZGF0ZSBjb250YWN0c1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2NvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9jb250YWN0QnVmZmVyLmRhdGFba107XG4gICAgICBjb250YWN0LmluZGV4QSA9IG5ld0luZGljZXNbY29udGFjdC5pbmRleEFdO1xuICAgICAgY29udGFjdC5pbmRleEIgPSBuZXdJbmRpY2VzW2NvbnRhY3QuaW5kZXhCXTtcbiAgICB9XG4gICAgdGhpcy5tX2NvbnRhY3RCdWZmZXIuUmVtb3ZlSWYoVGVzdC5Jc0NvbnRhY3RJbnZhbGlkKTtcblxuICAgIC8vIHVwZGF0ZSBwYXJ0aWNsZS1ib2R5IGNvbnRhY3RzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgY29udGFjdC5pbmRleCA9IG5ld0luZGljZXNbY29udGFjdC5pbmRleF07XG4gICAgfVxuICAgIHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5SZW1vdmVJZihUZXN0LklzQm9keUNvbnRhY3RJbnZhbGlkKTtcblxuICAgIC8vIHVwZGF0ZSBwYWlyc1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX3BhaXJCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgcGFpciA9IHRoaXMubV9wYWlyQnVmZmVyLmRhdGFba107XG4gICAgICBwYWlyLmluZGV4QSA9IG5ld0luZGljZXNbcGFpci5pbmRleEFdO1xuICAgICAgcGFpci5pbmRleEIgPSBuZXdJbmRpY2VzW3BhaXIuaW5kZXhCXTtcbiAgICB9XG4gICAgdGhpcy5tX3BhaXJCdWZmZXIuUmVtb3ZlSWYoVGVzdC5Jc1BhaXJJbnZhbGlkKTtcblxuICAgIC8vIHVwZGF0ZSB0cmlhZHNcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV90cmlhZEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCB0cmlhZCA9IHRoaXMubV90cmlhZEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgdHJpYWQuaW5kZXhBID0gbmV3SW5kaWNlc1t0cmlhZC5pbmRleEFdO1xuICAgICAgdHJpYWQuaW5kZXhCID0gbmV3SW5kaWNlc1t0cmlhZC5pbmRleEJdO1xuICAgICAgdHJpYWQuaW5kZXhDID0gbmV3SW5kaWNlc1t0cmlhZC5pbmRleENdO1xuICAgIH1cbiAgICB0aGlzLm1fdHJpYWRCdWZmZXIuUmVtb3ZlSWYoVGVzdC5Jc1RyaWFkSW52YWxpZCk7XG5cbiAgICAvLyBVcGRhdGUgbGlmZXRpbWUgaW5kaWNlcy5cbiAgICBpZiAodGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhKSB7XG4gICAgICBsZXQgd3JpdGVPZmZzZXQgPSAwO1xuICAgICAgZm9yIChsZXQgcmVhZE9mZnNldCA9IDA7IHJlYWRPZmZzZXQgPCB0aGlzLm1fY291bnQ7IHJlYWRPZmZzZXQrKykge1xuICAgICAgICBjb25zdCBuZXdJbmRleCA9IG5ld0luZGljZXNbdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhW3JlYWRPZmZzZXRdXTtcbiAgICAgICAgaWYgKG5ld0luZGV4ICE9PSBiMl9pbnZhbGlkUGFydGljbGVJbmRleCkge1xuICAgICAgICAgIHRoaXMubV9pbmRleEJ5RXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YVt3cml0ZU9mZnNldCsrXSA9IG5ld0luZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGdyb3Vwc1xuICAgIGZvciAobGV0IGdyb3VwID0gdGhpcy5tX2dyb3VwTGlzdDsgZ3JvdXA7IGdyb3VwID0gZ3JvdXAuR2V0TmV4dCgpKSB7XG4gICAgICBsZXQgZmlyc3RJbmRleCA9IG5ld0NvdW50O1xuICAgICAgbGV0IGxhc3RJbmRleCA9IDA7XG4gICAgICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcbiAgICAgIGZvciAobGV0IGkgPSBncm91cC5tX2ZpcnN0SW5kZXg7IGkgPCBncm91cC5tX2xhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGogPSBuZXdJbmRpY2VzW2ldO1xuICAgICAgICBpZiAoaiA+PSAwKSB7XG4gICAgICAgICAgZmlyc3RJbmRleCA9IGIyTWluKGZpcnN0SW5kZXgsIGopO1xuICAgICAgICAgIGxhc3RJbmRleCA9IGIyTWF4KGxhc3RJbmRleCwgaiArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZpcnN0SW5kZXggPCBsYXN0SW5kZXgpIHtcbiAgICAgICAgZ3JvdXAubV9maXJzdEluZGV4ID0gZmlyc3RJbmRleDtcbiAgICAgICAgZ3JvdXAubV9sYXN0SW5kZXggPSBsYXN0SW5kZXg7XG4gICAgICAgIGlmIChtb2RpZmllZCkge1xuICAgICAgICAgIGlmIChncm91cC5tX2dyb3VwRmxhZ3MgJiBiMlBhcnRpY2xlR3JvdXBGbGFnLmIyX3NvbGlkUGFydGljbGVHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5TZXRHcm91cEZsYWdzKGdyb3VwLCBncm91cC5tX2dyb3VwRmxhZ3MgfCBiMlBhcnRpY2xlR3JvdXBGbGFnLmIyX3BhcnRpY2xlR3JvdXBOZWVkc1VwZGF0ZURlcHRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyb3VwLm1fZmlyc3RJbmRleCA9IDA7XG4gICAgICAgIGdyb3VwLm1fbGFzdEluZGV4ID0gMDtcbiAgICAgICAgaWYgKCEoZ3JvdXAubV9ncm91cEZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9wYXJ0aWNsZUdyb3VwQ2FuQmVFbXB0eSkpIHtcbiAgICAgICAgICB0aGlzLlNldEdyb3VwRmxhZ3MoZ3JvdXAsIGdyb3VwLm1fZ3JvdXBGbGFncyB8IGIyUGFydGljbGVHcm91cEZsYWcuYjJfcGFydGljbGVHcm91cFdpbGxCZURlc3Ryb3llZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgcGFydGljbGUgY291bnRcbiAgICB0aGlzLm1fY291bnQgPSBuZXdDb3VudDtcbiAgICB0aGlzLm1fYWxsUGFydGljbGVGbGFncyA9IGFsbFBhcnRpY2xlRmxhZ3M7XG4gICAgdGhpcy5tX25lZWRzVXBkYXRlQWxsUGFydGljbGVGbGFncyA9IGZhbHNlO1xuXG4gICAgLy8gZGVzdHJveSBib2RpZXMgd2l0aCBubyBwYXJ0aWNsZXNcbiAgICBmb3IgKGxldCBncm91cCA9IHRoaXMubV9ncm91cExpc3Q7IGdyb3VwOyApIHtcbiAgICAgIGNvbnN0IG5leHQgPSBncm91cC5HZXROZXh0KCk7XG4gICAgICBpZiAoZ3JvdXAubV9ncm91cEZsYWdzICYgYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9wYXJ0aWNsZUdyb3VwV2lsbEJlRGVzdHJveWVkKSB7XG4gICAgICAgIHRoaXMuRGVzdHJveVBhcnRpY2xlR3JvdXAoZ3JvdXApO1xuICAgICAgfVxuICAgICAgZ3JvdXAgPSBuZXh0O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IGFsbCBwYXJ0aWNsZXMgd2hpY2ggaGF2ZSBvdXRsaXZlZCB0aGVpciBsaWZldGltZXMgc2V0XG4gICAqIGJ5IFNldFBhcnRpY2xlTGlmZXRpbWUoKS5cbiAgICovXG4gIHB1YmxpYyBTb2x2ZUxpZmV0aW1lcyhzdGVwOiBiMlRpbWVTdGVwKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHRoZSB0aW1lIGVsYXBzZWQuXG4gICAgdGhpcy5tX3RpbWVFbGFwc2VkID0gdGhpcy5MaWZldGltZVRvRXhwaXJhdGlvblRpbWUoc3RlcC5kdCk7XG4gICAgLy8gR2V0IHRoZSBmbG9vciAobm9uLWZyYWN0aW9uYWwgY29tcG9uZW50KSBvZiB0aGUgZWxhcHNlZCB0aW1lLlxuICAgIGNvbnN0IHF1YW50aXplZFRpbWVFbGFwc2VkID0gdGhpcy5HZXRRdWFudGl6ZWRUaW1lRWxhcHNlZCgpO1xuXG4gICAgY29uc3QgZXhwaXJhdGlvblRpbWVzID0gdGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGE7XG4gICAgY29uc3QgZXhwaXJhdGlvblRpbWVJbmRpY2VzID0gdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhO1xuICAgIGNvbnN0IHBhcnRpY2xlQ291bnQgPSB0aGlzLkdldFBhcnRpY2xlQ291bnQoKTtcbiAgICAvLyBTb3J0IHRoZSBsaWZldGltZSBidWZmZXIgaWYgaXQncyByZXF1aXJlZC5cbiAgICBpZiAodGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyUmVxdWlyZXNTb3J0aW5nKSB7XG4gICAgICAvLy9jb25zdCBFeHBpcmF0aW9uVGltZUNvbXBhcmF0b3IgZXhwaXJhdGlvblRpbWVDb21wYXJhdG9yKGV4cGlyYXRpb25UaW1lcyk7XG4gICAgICAvLy9zdGQ6OnNvcnQoZXhwaXJhdGlvblRpbWVJbmRpY2VzLCBleHBpcmF0aW9uVGltZUluZGljZXMgKyBwYXJ0aWNsZUNvdW50LCBleHBpcmF0aW9uVGltZUNvbXBhcmF0b3IpO1xuXG4gICAgICAvKipcbiAgICAgICAqIENvbXBhcmUgdGhlIGxpZmV0aW1lIG9mIHBhcnRpY2xlSW5kZXhBIGFuZCBwYXJ0aWNsZUluZGV4QlxuICAgICAgICogcmV0dXJuaW5nIHRydWUgaWYgdGhlIGxpZmV0aW1lIG9mIEEgaXMgZ3JlYXRlciB0aGFuIEIgZm9yXG4gICAgICAgKiBwYXJ0aWNsZXMgdGhhdCB3aWxsIGV4cGlyZS4gIElmIGVpdGhlciBwYXJ0aWNsZSdzIGxpZmV0aW1lIGlzXG4gICAgICAgKiBpbmZpbml0ZSAoPD0gMC4wZikgdGhpcyBmdW5jdGlvbiByZXR1cm4gdHJ1ZSBpZiB0aGUgbGlmZXRpbWVcbiAgICAgICAqIG9mIEEgaXMgbGVzc2VyIHRoYW4gQi4gV2hlbiB1c2VkIHdpdGggc3RkOjpzb3J0KCkgdGhpc1xuICAgICAgICogcmVzdWx0cyBpbiBhbiBhcnJheSBvZiBwYXJ0aWNsZSBpbmRpY2llcyBzb3J0ZWQgaW4gcmV2ZXJzZVxuICAgICAgICogb3JkZXIgYnkgcGFydGljbGUgbGlmZXRpbWUuXG4gICAgICAgKlxuICAgICAgICogRm9yIGV4YW1wbGUsIHRoZSBzZXQgb2YgbGlmZXRpbWVzXG4gICAgICAgKiAoMS4wLCAwLjcsIDAuMywgMC4wLCAtMS4wLCAyLjApXG4gICAgICAgKiB3b3VsZCBiZSBzb3J0ZWQgYXNcbiAgICAgICAqICgwLjAsIDEuMCwgLTIuMCwgMS4wLCAwLjcsIDAuMylcbiAgICAgICAqL1xuICAgICAgY29uc3QgRXhwaXJhdGlvblRpbWVDb21wYXJhdG9yID0gKHBhcnRpY2xlSW5kZXhBOiBudW1iZXIsIHBhcnRpY2xlSW5kZXhCOiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgICAgICAgY29uc3QgZXhwaXJhdGlvblRpbWVBID0gZXhwaXJhdGlvblRpbWVzW3BhcnRpY2xlSW5kZXhBXTtcbiAgICAgICAgY29uc3QgZXhwaXJhdGlvblRpbWVCID0gZXhwaXJhdGlvblRpbWVzW3BhcnRpY2xlSW5kZXhCXTtcbiAgICAgICAgY29uc3QgaW5maW5pdGVFeHBpcmF0aW9uVGltZUEgPSBleHBpcmF0aW9uVGltZUEgPD0gMC4wO1xuICAgICAgICBjb25zdCBpbmZpbml0ZUV4cGlyYXRpb25UaW1lQiA9IGV4cGlyYXRpb25UaW1lQiA8PSAwLjA7XG4gICAgICAgIHJldHVybiBpbmZpbml0ZUV4cGlyYXRpb25UaW1lQSA9PT0gaW5maW5pdGVFeHBpcmF0aW9uVGltZUIgP1xuICAgICAgICAgIGV4cGlyYXRpb25UaW1lQSA+IGV4cGlyYXRpb25UaW1lQiA6IGluZmluaXRlRXhwaXJhdGlvblRpbWVBO1xuICAgICAgfTtcblxuICAgICAgc3RkX3NvcnQoZXhwaXJhdGlvblRpbWVJbmRpY2VzLCAwLCBwYXJ0aWNsZUNvdW50LCBFeHBpcmF0aW9uVGltZUNvbXBhcmF0b3IpO1xuXG4gICAgICB0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXJSZXF1aXJlc1NvcnRpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBEZXN0cm95IHBhcnRpY2xlcyB3aGljaCBoYXZlIGV4cGlyZWQuXG4gICAgZm9yIChsZXQgaSA9IHBhcnRpY2xlQ291bnQgLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgY29uc3QgcGFydGljbGVJbmRleCA9IGV4cGlyYXRpb25UaW1lSW5kaWNlc1tpXTtcbiAgICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWVzW3BhcnRpY2xlSW5kZXhdO1xuICAgICAgLy8gSWYgbm8gcGFydGljbGVzIG5lZWQgdG8gYmUgZGVzdHJveWVkLCBza2lwIHRoaXMuXG4gICAgICBpZiAocXVhbnRpemVkVGltZUVsYXBzZWQgPCBleHBpcmF0aW9uVGltZSB8fCBleHBpcmF0aW9uVGltZSA8PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gRGVzdHJveSB0aGlzIHBhcnRpY2xlLlxuICAgICAgdGhpcy5EZXN0cm95UGFydGljbGUocGFydGljbGVJbmRleCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFJvdGF0ZUJ1ZmZlcihzdGFydDogbnVtYmVyLCBtaWQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBtb3ZlIHRoZSBwYXJ0aWNsZXMgYXNzaWduZWQgdG8gdGhlIGdpdmVuIGdyb3VwIHRvd2FyZCB0aGUgZW5kIG9mIGFycmF5XG4gICAgaWYgKHN0YXJ0ID09PSBtaWQgfHwgbWlkID09PSBlbmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KG1pZCA+PSBzdGFydCAmJiBtaWQgPD0gZW5kKTtcblxuICAgIGZ1bmN0aW9uIG5ld0luZGljZXMoaTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgIGlmIChpIDwgc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9IGVsc2UgaWYgKGkgPCBtaWQpIHtcbiAgICAgICAgcmV0dXJuIGkgKyBlbmQgLSBtaWQ7XG4gICAgICB9IGVsc2UgaWYgKGkgPCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIGkgKyBzdGFydCAtIG1pZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vL3N0ZDo6cm90YXRlKG1fZmxhZ3NCdWZmZXIuZGF0YSArIHN0YXJ0LCBtX2ZsYWdzQnVmZmVyLmRhdGEgKyBtaWQsIG1fZmxhZ3NCdWZmZXIuZGF0YSArIGVuZCk7XG4gICAgc3RkX3JvdGF0ZSh0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YSwgc3RhcnQsIG1pZCwgZW5kKTtcbiAgICBpZiAodGhpcy5tX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YSkge1xuICAgICAgLy8vc3RkOjpyb3RhdGUobV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyLmRhdGEgKyBzdGFydCwgbV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyLmRhdGEgKyBtaWQsIG1fbGFzdEJvZHlDb250YWN0U3RlcEJ1ZmZlci5kYXRhICsgZW5kKTtcbiAgICAgIHN0ZF9yb3RhdGUodGhpcy5tX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YSwgc3RhcnQsIG1pZCwgZW5kKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGEpIHtcbiAgICAgIC8vL3N0ZDo6cm90YXRlKG1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlci5kYXRhICsgc3RhcnQsIG1fYm9keUNvbnRhY3RDb3VudEJ1ZmZlci5kYXRhICsgbWlkLCBtX2JvZHlDb250YWN0Q291bnRCdWZmZXIuZGF0YSArIGVuZCk7XG4gICAgICBzdGRfcm90YXRlKHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGEsIHN0YXJ0LCBtaWQsIGVuZCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSkge1xuICAgICAgLy8vc3RkOjpyb3RhdGUobV9jb25zZWN1dGl2ZUNvbnRhY3RTdGVwc0J1ZmZlci5kYXRhICsgc3RhcnQsIG1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YSArIG1pZCwgbV9jb25zZWN1dGl2ZUNvbnRhY3RTdGVwc0J1ZmZlci5kYXRhICsgZW5kKTtcbiAgICAgIHN0ZF9yb3RhdGUodGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGEsIHN0YXJ0LCBtaWQsIGVuZCk7XG4gICAgfVxuICAgIC8vL3N0ZDo6cm90YXRlKG1fcG9zaXRpb25CdWZmZXIuZGF0YSArIHN0YXJ0LCBtX3Bvc2l0aW9uQnVmZmVyLmRhdGEgKyBtaWQsIG1fcG9zaXRpb25CdWZmZXIuZGF0YSArIGVuZCk7XG4gICAgc3RkX3JvdGF0ZSh0aGlzLm1fcG9zaXRpb25CdWZmZXIuZGF0YSwgc3RhcnQsIG1pZCwgZW5kKTtcbiAgICAvLy9zdGQ6OnJvdGF0ZShtX3ZlbG9jaXR5QnVmZmVyLmRhdGEgKyBzdGFydCwgbV92ZWxvY2l0eUJ1ZmZlci5kYXRhICsgbWlkLCBtX3ZlbG9jaXR5QnVmZmVyLmRhdGEgKyBlbmQpO1xuICAgIHN0ZF9yb3RhdGUodGhpcy5tX3ZlbG9jaXR5QnVmZmVyLmRhdGEsIHN0YXJ0LCBtaWQsIGVuZCk7XG4gICAgLy8vc3RkOjpyb3RhdGUobV9ncm91cEJ1ZmZlciArIHN0YXJ0LCBtX2dyb3VwQnVmZmVyICsgbWlkLCBtX2dyb3VwQnVmZmVyICsgZW5kKTtcbiAgICBzdGRfcm90YXRlKHRoaXMubV9ncm91cEJ1ZmZlciwgc3RhcnQsIG1pZCwgZW5kKTtcbiAgICBpZiAodGhpcy5tX2hhc0ZvcmNlKSB7XG4gICAgICAvLy9zdGQ6OnJvdGF0ZShtX2ZvcmNlQnVmZmVyICsgc3RhcnQsIG1fZm9yY2VCdWZmZXIgKyBtaWQsIG1fZm9yY2VCdWZmZXIgKyBlbmQpO1xuICAgICAgc3RkX3JvdGF0ZSh0aGlzLm1fZm9yY2VCdWZmZXIsIHN0YXJ0LCBtaWQsIGVuZCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fc3RhdGljUHJlc3N1cmVCdWZmZXIpIHtcbiAgICAgIC8vL3N0ZDo6cm90YXRlKG1fc3RhdGljUHJlc3N1cmVCdWZmZXIgKyBzdGFydCwgbV9zdGF0aWNQcmVzc3VyZUJ1ZmZlciArIG1pZCwgbV9zdGF0aWNQcmVzc3VyZUJ1ZmZlciArIGVuZCk7XG4gICAgICBzdGRfcm90YXRlKHRoaXMubV9zdGF0aWNQcmVzc3VyZUJ1ZmZlciwgc3RhcnQsIG1pZCwgZW5kKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9kZXB0aEJ1ZmZlcikge1xuICAgICAgLy8vc3RkOjpyb3RhdGUobV9kZXB0aEJ1ZmZlciArIHN0YXJ0LCBtX2RlcHRoQnVmZmVyICsgbWlkLCBtX2RlcHRoQnVmZmVyICsgZW5kKTtcbiAgICAgIHN0ZF9yb3RhdGUodGhpcy5tX2RlcHRoQnVmZmVyLCBzdGFydCwgbWlkLCBlbmQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2NvbG9yQnVmZmVyLmRhdGEpIHtcbiAgICAgIC8vL3N0ZDo6cm90YXRlKG1fY29sb3JCdWZmZXIuZGF0YSArIHN0YXJ0LCBtX2NvbG9yQnVmZmVyLmRhdGEgKyBtaWQsIG1fY29sb3JCdWZmZXIuZGF0YSArIGVuZCk7XG4gICAgICBzdGRfcm90YXRlKHRoaXMubV9jb2xvckJ1ZmZlci5kYXRhLCBzdGFydCwgbWlkLCBlbmQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX3VzZXJEYXRhQnVmZmVyLmRhdGEpIHtcbiAgICAgIC8vL3N0ZDo6cm90YXRlKG1fdXNlckRhdGFCdWZmZXIuZGF0YSArIHN0YXJ0LCBtX3VzZXJEYXRhQnVmZmVyLmRhdGEgKyBtaWQsIG1fdXNlckRhdGFCdWZmZXIuZGF0YSArIGVuZCk7XG4gICAgICBzdGRfcm90YXRlKHRoaXMubV91c2VyRGF0YUJ1ZmZlci5kYXRhLCBzdGFydCwgbWlkLCBlbmQpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBoYW5kbGUgaW5kaWNlcy5cbiAgICBpZiAodGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGEpIHtcbiAgICAgIC8vL3N0ZDo6cm90YXRlKG1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YSArIHN0YXJ0LCBtX2hhbmRsZUluZGV4QnVmZmVyLmRhdGEgKyBtaWQsIG1faGFuZGxlSW5kZXhCdWZmZXIuZGF0YSArIGVuZCk7XG4gICAgICBzdGRfcm90YXRlKHRoaXMubV9oYW5kbGVJbmRleEJ1ZmZlci5kYXRhLCBzdGFydCwgbWlkLCBlbmQpO1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlID0gdGhpcy5tX2hhbmRsZUluZGV4QnVmZmVyLmRhdGFbaV07XG4gICAgICAgIGlmIChoYW5kbGUpIHsgaGFuZGxlLlNldEluZGV4KG5ld0luZGljZXMoaGFuZGxlLkdldEluZGV4KCkpKTsgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSkge1xuICAgICAgLy8vc3RkOjpyb3RhdGUobV9leHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhICsgc3RhcnQsIG1fZXhwaXJhdGlvblRpbWVCdWZmZXIuZGF0YSArIG1pZCwgbV9leHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhICsgZW5kKTtcbiAgICAgIHN0ZF9yb3RhdGUodGhpcy5tX2V4cGlyYXRpb25UaW1lQnVmZmVyLmRhdGEsIHN0YXJ0LCBtaWQsIGVuZCk7XG4gICAgICAvLyBVcGRhdGUgZXhwaXJhdGlvbiB0aW1lIGJ1ZmZlciBpbmRpY2VzLlxuICAgICAgY29uc3QgcGFydGljbGVDb3VudCA9IHRoaXMuR2V0UGFydGljbGVDb3VudCgpO1xuICAgICAgY29uc3QgaW5kZXhCeUV4cGlyYXRpb25UaW1lID0gdGhpcy5tX2luZGV4QnlFeHBpcmF0aW9uVGltZUJ1ZmZlci5kYXRhO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyArK2kpIHtcbiAgICAgICAgaW5kZXhCeUV4cGlyYXRpb25UaW1lW2ldID0gbmV3SW5kaWNlcyhpbmRleEJ5RXhwaXJhdGlvblRpbWVbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBwcm94aWVzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fcHJveHlCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgcHJveHkgPSB0aGlzLm1fcHJveHlCdWZmZXIuZGF0YVtrXTtcbiAgICAgIHByb3h5LmluZGV4ID0gbmV3SW5kaWNlcyhwcm94eS5pbmRleCk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGNvbnRhY3RzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fY29udGFjdEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RCdWZmZXIuZGF0YVtrXTtcbiAgICAgIGNvbnRhY3QuaW5kZXhBID0gbmV3SW5kaWNlcyhjb250YWN0LmluZGV4QSk7XG4gICAgICBjb250YWN0LmluZGV4QiA9IG5ld0luZGljZXMoY29udGFjdC5pbmRleEIpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBwYXJ0aWNsZS1ib2R5IGNvbnRhY3RzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuY291bnQ7IGsrKykge1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgY29udGFjdC5pbmRleCA9IG5ld0luZGljZXMoY29udGFjdC5pbmRleCk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIHBhaXJzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm1fcGFpckJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBwYWlyID0gdGhpcy5tX3BhaXJCdWZmZXIuZGF0YVtrXTtcbiAgICAgIHBhaXIuaW5kZXhBID0gbmV3SW5kaWNlcyhwYWlyLmluZGV4QSk7XG4gICAgICBwYWlyLmluZGV4QiA9IG5ld0luZGljZXMocGFpci5pbmRleEIpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSB0cmlhZHNcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV90cmlhZEJ1ZmZlci5jb3VudDsgaysrKSB7XG4gICAgICBjb25zdCB0cmlhZCA9IHRoaXMubV90cmlhZEJ1ZmZlci5kYXRhW2tdO1xuICAgICAgdHJpYWQuaW5kZXhBID0gbmV3SW5kaWNlcyh0cmlhZC5pbmRleEEpO1xuICAgICAgdHJpYWQuaW5kZXhCID0gbmV3SW5kaWNlcyh0cmlhZC5pbmRleEIpO1xuICAgICAgdHJpYWQuaW5kZXhDID0gbmV3SW5kaWNlcyh0cmlhZC5pbmRleEMpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBncm91cHNcbiAgICBmb3IgKGxldCBncm91cCA9IHRoaXMubV9ncm91cExpc3Q7IGdyb3VwOyBncm91cCA9IGdyb3VwLkdldE5leHQoKSkge1xuICAgICAgZ3JvdXAubV9maXJzdEluZGV4ID0gbmV3SW5kaWNlcyhncm91cC5tX2ZpcnN0SW5kZXgpO1xuICAgICAgZ3JvdXAubV9sYXN0SW5kZXggPSBuZXdJbmRpY2VzKGdyb3VwLm1fbGFzdEluZGV4IC0gMSkgKyAxO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBHZXRDcml0aWNhbFZlbG9jaXR5KHN0ZXA6IGIyVGltZVN0ZXApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fcGFydGljbGVEaWFtZXRlciAqIHN0ZXAuaW52X2R0O1xuICB9XG5cbiAgcHVibGljIEdldENyaXRpY2FsVmVsb2NpdHlTcXVhcmVkKHN0ZXA6IGIyVGltZVN0ZXApOiBudW1iZXIge1xuICAgIGNvbnN0IHZlbG9jaXR5ID0gdGhpcy5HZXRDcml0aWNhbFZlbG9jaXR5KHN0ZXApO1xuICAgIHJldHVybiB2ZWxvY2l0eSAqIHZlbG9jaXR5O1xuICB9XG5cbiAgcHVibGljIEdldENyaXRpY2FsUHJlc3N1cmUoc3RlcDogYjJUaW1lU3RlcCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubV9kZWYuZGVuc2l0eSAqIHRoaXMuR2V0Q3JpdGljYWxWZWxvY2l0eVNxdWFyZWQoc3RlcCk7XG4gIH1cblxuICBwdWJsaWMgR2V0UGFydGljbGVTdHJpZGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gYjJfcGFydGljbGVTdHJpZGUgKiB0aGlzLm1fcGFydGljbGVEaWFtZXRlcjtcbiAgfVxuXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZU1hc3MoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzdHJpZGUgPSB0aGlzLkdldFBhcnRpY2xlU3RyaWRlKCk7XG4gICAgcmV0dXJuIHRoaXMubV9kZWYuZGVuc2l0eSAqIHN0cmlkZSAqIHN0cmlkZTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZUludk1hc3MoKTogbnVtYmVyIHtcbiAgICAvLy9yZXR1cm4gMS43Nzc3NzcgKiB0aGlzLm1faW52ZXJzZURlbnNpdHkgKiB0aGlzLm1faW52ZXJzZURpYW1ldGVyICogdGhpcy5tX2ludmVyc2VEaWFtZXRlcjtcbiAgICAvLyBtYXNzID0gZGVuc2l0eSAqIHN0cmlkZV4yLCBzbyB3ZSB0YWtlIHRoZSBpbnZlcnNlIG9mIHRoaXMuXG4gICAgY29uc3QgaW52ZXJzZVN0cmlkZSA9IHRoaXMubV9pbnZlcnNlRGlhbWV0ZXIgKiAoMS4wIC8gYjJfcGFydGljbGVTdHJpZGUpO1xuICAgIHJldHVybiB0aGlzLm1faW52ZXJzZURlbnNpdHkgKiBpbnZlcnNlU3RyaWRlICogaW52ZXJzZVN0cmlkZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkJ3MgY29udGFjdCBmaWx0ZXIgaWYgYW55IHBhcnRpY2xlcyB3aXRoIHRoZVxuICAgKiBiMl9jb250YWN0RmlsdGVyUGFydGljbGUgZmxhZyBhcmUgcHJlc2VudCBpbiB0aGUgc3lzdGVtLlxuICAgKi9cbiAgcHVibGljIEdldEZpeHR1cmVDb250YWN0RmlsdGVyKCk6IGIyQ29udGFjdEZpbHRlciB8IG51bGwge1xuICAgIHJldHVybiAodGhpcy5tX2FsbFBhcnRpY2xlRmxhZ3MgJiBiMlBhcnRpY2xlRmxhZy5iMl9maXh0dXJlQ29udGFjdEZpbHRlclBhcnRpY2xlKSA/XG4gICAgICB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RGaWx0ZXIgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd29ybGQncyBjb250YWN0IGZpbHRlciBpZiBhbnkgcGFydGljbGVzIHdpdGggdGhlXG4gICAqIGIyX3BhcnRpY2xlQ29udGFjdEZpbHRlclBhcnRpY2xlIGZsYWcgYXJlIHByZXNlbnQgaW4gdGhlXG4gICAqIHN5c3RlbS5cbiAgICovXG4gIHB1YmxpYyBHZXRQYXJ0aWNsZUNvbnRhY3RGaWx0ZXIoKTogYjJDb250YWN0RmlsdGVyIHwgbnVsbCB7XG4gICAgcmV0dXJuICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3BhcnRpY2xlQ29udGFjdEZpbHRlclBhcnRpY2xlKSA/XG4gICAgICB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RGaWx0ZXIgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd29ybGQncyBjb250YWN0IGxpc3RlbmVyIGlmIGFueSBwYXJ0aWNsZXMgd2l0aCB0aGVcbiAgICogYjJfZml4dHVyZUNvbnRhY3RMaXN0ZW5lclBhcnRpY2xlIGZsYWcgYXJlIHByZXNlbnQgaW4gdGhlXG4gICAqIHN5c3RlbS5cbiAgICovXG4gIHB1YmxpYyBHZXRGaXh0dXJlQ29udGFjdExpc3RlbmVyKCk6IGIyQ29udGFjdExpc3RlbmVyIHwgbnVsbCB7XG4gICAgcmV0dXJuICh0aGlzLm1fYWxsUGFydGljbGVGbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX2ZpeHR1cmVDb250YWN0TGlzdGVuZXJQYXJ0aWNsZSkgP1xuICAgICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd29ybGQncyBjb250YWN0IGxpc3RlbmVyIGlmIGFueSBwYXJ0aWNsZXMgd2l0aCB0aGVcbiAgICogYjJfcGFydGljbGVDb250YWN0TGlzdGVuZXJQYXJ0aWNsZSBmbGFnIGFyZSBwcmVzZW50IGluIHRoZVxuICAgKiBzeXN0ZW0uXG4gICAqL1xuICBwdWJsaWMgR2V0UGFydGljbGVDb250YWN0TGlzdGVuZXIoKTogYjJDb250YWN0TGlzdGVuZXIgfCBudWxsIHtcbiAgICByZXR1cm4gKHRoaXMubV9hbGxQYXJ0aWNsZUZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfcGFydGljbGVDb250YWN0TGlzdGVuZXJQYXJ0aWNsZSkgP1xuICAgICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIgOiBudWxsO1xuICB9XG5cbiAgcHVibGljIFNldFVzZXJPdmVycmlkYWJsZUJ1ZmZlcjxUPihidWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPFQ+LCBkYXRhOiBUW10pOiB2b2lkIHtcbiAgICBidWZmZXIuZGF0YSA9IGRhdGE7XG4gICAgYnVmZmVyLnVzZXJTdXBwbGllZENhcGFjaXR5ID0gZGF0YS5sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgU2V0R3JvdXBGbGFncyhncm91cDogYjJQYXJ0aWNsZUdyb3VwLCBuZXdGbGFnczogYjJQYXJ0aWNsZUdyb3VwRmxhZyk6IHZvaWQge1xuICAgIGNvbnN0IG9sZEZsYWdzID0gZ3JvdXAubV9ncm91cEZsYWdzO1xuICAgIGlmICgob2xkRmxhZ3MgXiBuZXdGbGFncykgJiBiMlBhcnRpY2xlR3JvdXBGbGFnLmIyX3NvbGlkUGFydGljbGVHcm91cCkge1xuICAgICAgLy8gSWYgdGhlIGIyX3NvbGlkUGFydGljbGVHcm91cCBmbGFnIGNoYW5nZWQgc2NoZWR1bGUgZGVwdGggdXBkYXRlLlxuICAgICAgbmV3RmxhZ3MgfD0gYjJQYXJ0aWNsZUdyb3VwRmxhZy5iMl9wYXJ0aWNsZUdyb3VwTmVlZHNVcGRhdGVEZXB0aDtcbiAgICB9XG4gICAgaWYgKG9sZEZsYWdzICYgfm5ld0ZsYWdzKSB7XG4gICAgICAvLyBJZiBhbnkgZmxhZ3MgbWlnaHQgYmUgcmVtb3ZlZFxuICAgICAgdGhpcy5tX25lZWRzVXBkYXRlQWxsR3JvdXBGbGFncyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh+dGhpcy5tX2FsbEdyb3VwRmxhZ3MgJiBuZXdGbGFncykge1xuICAgICAgLy8gSWYgYW55IGZsYWdzIHdlcmUgYWRkZWRcbiAgICAgIGlmIChuZXdGbGFncyAmIGIyUGFydGljbGVHcm91cEZsYWcuYjJfc29saWRQYXJ0aWNsZUdyb3VwKSB7XG4gICAgICAgIHRoaXMubV9kZXB0aEJ1ZmZlciA9IHRoaXMuUmVxdWVzdEJ1ZmZlcih0aGlzLm1fZGVwdGhCdWZmZXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5tX2FsbEdyb3VwRmxhZ3MgfD0gbmV3RmxhZ3M7XG4gICAgfVxuICAgIGdyb3VwLm1fZ3JvdXBGbGFncyA9IG5ld0ZsYWdzO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBCb2R5Q29udGFjdENvbXBhcmUobGhzOiBiMlBhcnRpY2xlQm9keUNvbnRhY3QsIHJoczogYjJQYXJ0aWNsZUJvZHlDb250YWN0KTogYm9vbGVhbiB7XG4gICAgaWYgKGxocy5pbmRleCA9PT0gcmhzLmluZGV4KSB7XG4gICAgICAvLyBTdWJzb3J0IGJ5IHdlaWdodCwgZGVjcmVhc2luZy5cbiAgICAgIHJldHVybiBsaHMud2VpZ2h0ID4gcmhzLndlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIGxocy5pbmRleCA8IHJocy5pbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBSZW1vdmVTcHVyaW91c0JvZHlDb250YWN0cygpOiB2b2lkIHtcbiAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYSBsaXN0IG9mIGNvbnRhY3QgY2FuZGlkYXRlcyBiYXNlZCBvbiBBQUJCXG4gICAgLy8gb3ZlcmxhcC5UaGUgQUFCQiBxdWVyeSB0aGF0ICBnZW5lcmF0ZWQgdGhpcyByZXR1cm5zIGFsbCBjb2xsaWRhYmxlXG4gICAgLy8gZml4dHVyZXMgb3ZlcmxhcHBpbmcgcGFydGljbGUgYm91bmRpbmcgYm94ZXMuICBUaGlzIGJyZWFrcyBkb3duIGFyb3VuZFxuICAgIC8vIHZlcnRpY2VzIHdoZXJlIHR3byBzaGFwZXMgaW50ZXJzZWN0LCBzdWNoIGFzIGEgXCJncm91bmRcIiBzdXJmYWNlIG1hZGVcbiAgICAvLyBvZiBtdWx0aXBsZSBiMlBvbHlnb25TaGFwZXM7IGl0IHBvdGVudGlhbGx5IGFwcGxpZXMgYSBsb3Qgb2Ygc3B1cmlvdXNcbiAgICAvLyBpbXB1bHNlcyBmcm9tIG5vcm1hbHMgdGhhdCBzaG91bGQgbm90IGFjdHVhbGx5IGNvbnRyaWJ1dGUuICBTZWUgdGhlXG4gICAgLy8gUmFtcCBleGFtcGxlIGluIFRlc3RiZWQuXG4gICAgLy9cbiAgICAvLyBUbyBjb3JyZWN0IGZvciB0aGlzLCB3ZSBhcHBseSB0aGlzIGFsZ29yaXRobTpcbiAgICAvLyAgICogc29ydCBjb250YWN0cyBieSBwYXJ0aWNsZSBhbmQgc3Vic29ydCBieSB3ZWlnaHQgKG5lYXJlc3QgdG8gZmFydGhlc3QpXG4gICAgLy8gICAqIGZvciBlYWNoIGNvbnRhY3QgcGVyIHBhcnRpY2xlOlxuICAgIC8vICAgICAgLSBwcm9qZWN0IGEgcG9pbnQgYXQgdGhlIGNvbnRhY3QgZGlzdGFuY2UgYWxvbmcgdGhlIGludmVyc2Ugb2YgdGhlXG4gICAgLy8gICAgICAgIGNvbnRhY3Qgbm9ybWFsXG4gICAgLy8gICAgICAtIGlmIHRoaXMgaW50ZXJzZWN0cyB0aGUgZml4dHVyZSB0aGF0IGdlbmVyYXRlZCB0aGUgY29udGFjdCwgYXBwbHlcbiAgICAvLyAgICAgICAgIGl0LCBvdGhlcndpc2UgZGlzY2FyZCBhcyBpbXBvc3NpYmxlXG4gICAgLy8gICAgICAtIHJlcGVhdCBmb3IgdXAgdG8gbiBuZWFyZXN0IGNvbnRhY3RzLCBjdXJyZW50bHkgd2UgZ2V0IGdvb2QgcmVzdWx0c1xuICAgIC8vICAgICAgICBmcm9tIG49My5cbiAgICAvLy9zdGQ6OnNvcnQobV9ib2R5Q29udGFjdEJ1ZmZlci5CZWdpbigpLCBtX2JvZHlDb250YWN0QnVmZmVyLkVuZCgpLCBiMlBhcnRpY2xlU3lzdGVtOjpCb2R5Q29udGFjdENvbXBhcmUpO1xuICAgIHN0ZF9zb3J0KHRoaXMubV9ib2R5Q29udGFjdEJ1ZmZlci5kYXRhLCAwLCB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuY291bnQsIGIyUGFydGljbGVTeXN0ZW0uQm9keUNvbnRhY3RDb21wYXJlKTtcblxuICAgIC8vL2ludDMyIGRpc2NhcmRlZCA9IDA7XG4gICAgLy8vc3RkOjpyZW1vdmVfaWYobV9ib2R5Q29udGFjdEJ1ZmZlci5CZWdpbigpLCBtX2JvZHlDb250YWN0QnVmZmVyLkVuZCgpLCBiMlBhcnRpY2xlQm9keUNvbnRhY3RSZW1vdmVQcmVkaWNhdGUodGhpcywgJmRpc2NhcmRlZCkpO1xuICAgIC8vL1xuICAgIC8vL21fYm9keUNvbnRhY3RCdWZmZXIuU2V0Q291bnQobV9ib2R5Q29udGFjdEJ1ZmZlci5HZXRDb3VudCgpIC0gZGlzY2FyZGVkKTtcblxuICAgIGNvbnN0IHNfbiA9IGIyUGFydGljbGVTeXN0ZW0uUmVtb3ZlU3B1cmlvdXNCb2R5Q29udGFjdHNfc19uO1xuICAgIGNvbnN0IHNfcG9zID0gYjJQYXJ0aWNsZVN5c3RlbS5SZW1vdmVTcHVyaW91c0JvZHlDb250YWN0c19zX3BvcztcbiAgICBjb25zdCBzX25vcm1hbCA9IGIyUGFydGljbGVTeXN0ZW0uUmVtb3ZlU3B1cmlvdXNCb2R5Q29udGFjdHNfc19ub3JtYWw7XG5cbiAgICAvLyBNYXggbnVtYmVyIG9mIGNvbnRhY3RzIHByb2Nlc3NlZCBwZXIgcGFydGljbGUsIGZyb20gbmVhcmVzdCB0byBmYXJ0aGVzdC5cbiAgICAvLyBUaGlzIG11c3QgYmUgYXQgbGVhc3QgMiBmb3IgY29ycmVjdG5lc3Mgd2l0aCBjb25jYXZlIHNoYXBlczsgMyB3YXNcbiAgICAvLyBleHBlcmltZW50YWxseSBhcnJpdmVkIGF0IGFzIGxvb2tpbmcgcmVhc29uYWJsZS5cbiAgICBjb25zdCBrX21heENvbnRhY3RzUGVyUG9pbnQgPSAzO1xuICAgIGNvbnN0IHN5c3RlbSA9IHRoaXM7XG4gICAgLy8gSW5kZXggb2YgbGFzdCBwYXJ0aWNsZSBwcm9jZXNzZWQuXG4gICAgbGV0IGxhc3RJbmRleCA9IC0xO1xuICAgIC8vIE51bWJlciBvZiBjb250YWN0cyBwcm9jZXNzZWQgZm9yIHRoZSBjdXJyZW50IHBhcnRpY2xlLlxuICAgIGxldCBjdXJyZW50Q29udGFjdHMgPSAwO1xuICAgIC8vIE91dHB1dCB0aGUgbnVtYmVyIG9mIGRpc2NhcmRlZCBjb250YWN0cy5cbiAgICAvLyBsZXQgZGlzY2FyZGVkID0gMDtcbiAgICBjb25zdCBiMlBhcnRpY2xlQm9keUNvbnRhY3RSZW1vdmVQcmVkaWNhdGUgPSAoY29udGFjdDogYjJQYXJ0aWNsZUJvZHlDb250YWN0KTogYm9vbGVhbiA9PiB7XG4gICAgICAvLyBUaGlzIGltcGxlbWVudHMgdGhlIHNlbGVjdGlvbiBjcml0ZXJpYSBkZXNjcmliZWQgaW5cbiAgICAgIC8vIFJlbW92ZVNwdXJpb3VzQm9keUNvbnRhY3RzKCkuXG4gICAgICAvLyBUaGlzIGZ1bmN0b3IgaXMgaXRlcmF0aW5nIHRocm91Z2ggYSBsaXN0IG9mIEJvZHkgY29udGFjdHMgcGVyXG4gICAgICAvLyBQYXJ0aWNsZSwgb3JkZXJlZCBmcm9tIG5lYXIgdG8gZmFyLiAgRm9yIHVwIHRvIHRoZSBtYXhpbXVtIG51bWJlciBvZlxuICAgICAgLy8gY29udGFjdHMgd2UgYWxsb3cgcGVyIHBvaW50IHBlciBzdGVwLCB3ZSB2ZXJpZnkgdGhhdCB0aGUgY29udGFjdFxuICAgICAgLy8gbm9ybWFsIG9mIHRoZSBCb2R5IHRoYXQgZ2VuZW5lcmF0ZWQgdGhlIGNvbnRhY3QgbWFrZXMgcGh5c2ljYWwgc2Vuc2VcbiAgICAgIC8vIGJ5IHByb2plY3RpbmcgYSBwb2ludCBiYWNrIGFsb25nIHRoYXQgbm9ybWFsIGFuZCBzZWVpbmcgaWYgaXRcbiAgICAgIC8vIGludGVyc2VjdHMgdGhlIGZpeHR1cmUgZ2VuZXJhdGluZyB0aGUgY29udGFjdC5cblxuICAgICAgaWYgKGNvbnRhY3QuaW5kZXggIT09IGxhc3RJbmRleCkge1xuICAgICAgICBjdXJyZW50Q29udGFjdHMgPSAwO1xuICAgICAgICBsYXN0SW5kZXggPSBjb250YWN0LmluZGV4O1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudENvbnRhY3RzKysgPiBrX21heENvbnRhY3RzUGVyUG9pbnQpIHtcbiAgICAgICAgLy8gKytkaXNjYXJkZWQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQcm9qZWN0IGFsb25nIGludmVyc2Ugbm9ybWFsIChhcyByZXR1cm5lZCBpbiB0aGUgY29udGFjdCkgdG8gZ2V0IHRoZVxuICAgICAgLy8gcG9pbnQgdG8gY2hlY2suXG4gICAgICAvLy9iMlZlYzIgbiA9IGNvbnRhY3Qubm9ybWFsO1xuICAgICAgY29uc3QgbiA9IHNfbi5Db3B5KGNvbnRhY3Qubm9ybWFsKTtcbiAgICAgIC8vIHdlaWdodCBpcyAxLShpbnYoZGlhbWV0ZXIpICogZGlzdGFuY2UpXG4gICAgICAvLy9uICo9IHN5c3RlbS5tX3BhcnRpY2xlRGlhbWV0ZXIgKiAoMSAtIGNvbnRhY3Qud2VpZ2h0KTtcbiAgICAgIG4uU2VsZk11bChzeXN0ZW0ubV9wYXJ0aWNsZURpYW1ldGVyICogKDEgLSBjb250YWN0LndlaWdodCkpO1xuICAgICAgLy8vYjJWZWMyIHBvcyA9IHN5c3RlbS5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbY29udGFjdC5pbmRleF0gKyBuO1xuICAgICAgY29uc3QgcG9zID0gYjJWZWMyLkFkZFZWKHN5c3RlbS5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbY29udGFjdC5pbmRleF0sIG4sIHNfcG9zKTtcblxuICAgICAgLy8gcG9zIGlzIG5vdyBhIHBvaW50IHByb2plY3RlZCBiYWNrIGFsb25nIHRoZSBjb250YWN0IG5vcm1hbCB0byB0aGVcbiAgICAgIC8vIGNvbnRhY3QgZGlzdGFuY2UuIElmIHRoZSBzdXJmYWNlIG1ha2VzIHNlbnNlIGZvciBhIGNvbnRhY3QsIHBvcyB3aWxsXG4gICAgICAvLyBub3cgbGllIG9uIG9yIGluIHRoZSBmaXh0dXJlIGdlbmVyYXRpbmdcbiAgICAgIGlmICghY29udGFjdC5maXh0dXJlLlRlc3RQb2ludChwb3MpKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkQ291bnQgPSBjb250YWN0LmZpeHR1cmUuR2V0U2hhcGUoKS5HZXRDaGlsZENvdW50KCk7XG4gICAgICAgIGZvciAobGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgY2hpbGRDb3VudDsgY2hpbGRJbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgbm9ybWFsID0gc19ub3JtYWw7XG4gICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBjb250YWN0LmZpeHR1cmUuQ29tcHV0ZURpc3RhbmNlKHBvcywgbm9ybWFsLCBjaGlsZEluZGV4KTtcbiAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBiMl9saW5lYXJTbG9wKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vICsrZGlzY2FyZGVkO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgdGhpcy5tX2JvZHlDb250YWN0QnVmZmVyLmNvdW50ID0gc3RkX3JlbW92ZV9pZih0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuZGF0YSwgYjJQYXJ0aWNsZUJvZHlDb250YWN0UmVtb3ZlUHJlZGljYXRlLCB0aGlzLm1fYm9keUNvbnRhY3RCdWZmZXIuY291bnQpO1xuICB9XG4gIHByaXZhdGUgc3RhdGljIFJlbW92ZVNwdXJpb3VzQm9keUNvbnRhY3RzX3NfbiA9IG5ldyBiMlZlYzIoKTtcbiAgcHJpdmF0ZSBzdGF0aWMgUmVtb3ZlU3B1cmlvdXNCb2R5Q29udGFjdHNfc19wb3MgPSBuZXcgYjJWZWMyKCk7XG4gIHByaXZhdGUgc3RhdGljIFJlbW92ZVNwdXJpb3VzQm9keUNvbnRhY3RzX3Nfbm9ybWFsID0gbmV3IGIyVmVjMigpO1xuXG4gIHB1YmxpYyBEZXRlY3RTdHVja1BhcnRpY2xlKHBhcnRpY2xlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBEZXRlY3Qgc3R1Y2sgcGFydGljbGVzXG4gICAgLy9cbiAgICAvLyBUaGUgYmFzaWMgYWxnb3JpdGhtIGlzIHRvIGFsbG93IHRoZSB1c2VyIHRvIHNwZWNpZnkgYW4gb3B0aW9uYWxcbiAgICAvLyB0aHJlc2hvbGQgd2hlcmUgd2UgZGV0ZWN0IHdoZW5ldmVyIGEgcGFydGljbGUgaXMgY29udGFjdGluZ1xuICAgIC8vIG1vcmUgdGhhbiBvbmUgZml4dHVyZSBmb3IgbW9yZSB0aGFuIHRocmVzaG9sZCBjb25zZWN1dGl2ZVxuICAgIC8vIHN0ZXBzLiBUaGlzIGlzIGNvbnNpZGVyZWQgdG8gYmUgXCJzdHVja1wiLCBhbmQgdGhlc2UgYXJlIHB1dFxuICAgIC8vIGluIGEgbGlzdCB0aGUgdXNlciBjYW4gcXVlcnkgcGVyIHN0ZXAsIGlmIGVuYWJsZWQsIHRvIGRlYWwgd2l0aFxuICAgIC8vIHN1Y2ggcGFydGljbGVzLlxuXG4gICAgaWYgKHRoaXMubV9zdHVja1RocmVzaG9sZCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBzdGF0ZSB2YXJpYWJsZXMgZm9yIHRoaXMgcGFydGljbGUuXG4gICAgLy8vaW50MzIgKiBjb25zdCBjb25zZWN1dGl2ZUNvdW50ID0gJm1fY29uc2VjdXRpdmVDb250YWN0U3RlcHNCdWZmZXIuZGF0YVtwYXJ0aWNsZV07XG4gICAgLy8vaW50MzIgKiBjb25zdCBsYXN0U3RlcCA9ICZtX2xhc3RCb2R5Q29udGFjdFN0ZXBCdWZmZXIuZGF0YVtwYXJ0aWNsZV07XG4gICAgLy8vaW50MzIgKiBjb25zdCBib2R5Q291bnQgPSAmbV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGFbcGFydGljbGVdO1xuXG4gICAgLy8gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZXJlIGlzIGEgYm9keSBjb250YWN0IGZvciB0aGlzIHBhcnRpY2xlLlxuICAgIC8vLysrKCpib2R5Q291bnQpO1xuICAgICsrdGhpcy5tX2JvZHlDb250YWN0Q291bnRCdWZmZXIuZGF0YVtwYXJ0aWNsZV07XG5cbiAgICAvLyBXZSB3YW50IHRvIG9ubHkgdHJpZ2dlciBkZXRlY3Rpb24gb25jZSBwZXIgc3RlcCwgdGhlIGZpcnN0IHRpbWUgd2VcbiAgICAvLyBjb250YWN0IG1vcmUgdGhhbiBvbmUgZml4dHVyZSBpbiBhIHN0ZXAgZm9yIGEgZ2l2ZW4gcGFydGljbGUuXG4gICAgLy8vaWYgKCpib2R5Q291bnQgPT09IDIpXG4gICAgaWYgKHRoaXMubV9ib2R5Q29udGFjdENvdW50QnVmZmVyLmRhdGFbcGFydGljbGVdID09PSAyKSB7XG4gICAgICAvLy8rKygqY29uc2VjdXRpdmVDb3VudCk7XG4gICAgICArK3RoaXMubV9jb25zZWN1dGl2ZUNvbnRhY3RTdGVwc0J1ZmZlci5kYXRhW3BhcnRpY2xlXTtcbiAgICAgIC8vL2lmICgqY29uc2VjdXRpdmVDb3VudCA+IG1fc3R1Y2tUaHJlc2hvbGQpXG4gICAgICBpZiAodGhpcy5tX2NvbnNlY3V0aXZlQ29udGFjdFN0ZXBzQnVmZmVyLmRhdGFbcGFydGljbGVdID4gdGhpcy5tX3N0dWNrVGhyZXNob2xkKSB7XG4gICAgICAgIC8vL2ludDMyJiBuZXdTdHVja1BhcnRpY2xlID0gbV9zdHVja1BhcnRpY2xlQnVmZmVyLkFwcGVuZCgpO1xuICAgICAgICAvLy9uZXdTdHVja1BhcnRpY2xlID0gcGFydGljbGU7XG4gICAgICAgIHRoaXMubV9zdHVja1BhcnRpY2xlQnVmZmVyLmRhdGFbdGhpcy5tX3N0dWNrUGFydGljbGVCdWZmZXIuQXBwZW5kKCldID0gcGFydGljbGU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vLypsYXN0U3RlcCA9IG1fdGltZXN0YW1wO1xuICAgIHRoaXMubV9sYXN0Qm9keUNvbnRhY3RTdGVwQnVmZmVyLmRhdGFbcGFydGljbGVdID0gdGhpcy5tX3RpbWVzdGFtcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgd2hldGhlciBhIHBhcnRpY2xlIGluZGV4IGlzIHZhbGlkLlxuICAgKi9cbiAgcHVibGljIFZhbGlkYXRlUGFydGljbGVJbmRleChpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLkdldFBhcnRpY2xlQ291bnQoKSAmJlxuICAgICAgaW5kZXggIT09IGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGltZSBlbGFwc2VkIGluXG4gICAqIGIyUGFydGljbGVTeXN0ZW1EZWY6OmxpZmV0aW1lR3JhbnVsYXJpdHkuXG4gICAqL1xuICBwdWJsaWMgR2V0UXVhbnRpemVkVGltZUVsYXBzZWQoKTogbnVtYmVyIHtcbiAgICAvLy9yZXR1cm4gKGludDMyKShtX3RpbWVFbGFwc2VkID4+IDMyKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLm1fdGltZUVsYXBzZWQgLyAweDEwMDAwMDAwMCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIGxpZmV0aW1lIGluIHNlY29uZHMgdG8gYW4gZXhwaXJhdGlvbiB0aW1lLlxuICAgKi9cbiAgcHVibGljIExpZmV0aW1lVG9FeHBpcmF0aW9uVGltZShsaWZldGltZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLy9yZXR1cm4gbV90aW1lRWxhcHNlZCArIChpbnQ2NCkoKGxpZmV0aW1lIC8gbV9kZWYubGlmZXRpbWVHcmFudWxhcml0eSkgKiAoZmxvYXQzMikoMUxMIDw8IDMyKSk7XG4gICAgcmV0dXJuIHRoaXMubV90aW1lRWxhcHNlZCArIE1hdGguZmxvb3IoKChsaWZldGltZSAvIHRoaXMubV9kZWYubGlmZXRpbWVHcmFudWxhcml0eSkgKiAweDEwMDAwMDAwMCkpO1xuICB9XG5cbiAgcHVibGljIEZvcmNlQ2FuQmVBcHBsaWVkKGZsYWdzOiBiMlBhcnRpY2xlRmxhZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhKGZsYWdzICYgYjJQYXJ0aWNsZUZsYWcuYjJfd2FsbFBhcnRpY2xlKTtcbiAgfVxuXG4gIHB1YmxpYyBQcmVwYXJlRm9yY2VCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm1faGFzRm9yY2UpIHtcbiAgICAgIC8vL21lbXNldChtX2ZvcmNlQnVmZmVyLCAwLCBzaXplb2YoKm1fZm9yY2VCdWZmZXIpICogbV9jb3VudCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7XG4gICAgICAgIHRoaXMubV9mb3JjZUJ1ZmZlcltpXS5TZXRaZXJvKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm1faGFzRm9yY2UgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBJc1JpZ2lkR3JvdXAoZ3JvdXA6IGIyUGFydGljbGVHcm91cCB8IG51bGwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKGdyb3VwICE9PSBudWxsKSAmJiAoKGdyb3VwLm1fZ3JvdXBGbGFncyAmIGIyUGFydGljbGVHcm91cEZsYWcuYjJfcmlnaWRQYXJ0aWNsZUdyb3VwKSAhPT0gMCk7XG4gIH1cblxuICBwdWJsaWMgR2V0TGluZWFyVmVsb2NpdHkoZ3JvdXA6IGIyUGFydGljbGVHcm91cCB8IG51bGwsIHBhcnRpY2xlSW5kZXg6IG51bWJlciwgcG9pbnQ6IGIyVmVjMiwgb3V0OiBiMlZlYzIpOiBiMlZlYzIge1xuICAgIGlmIChncm91cCAmJiB0aGlzLklzUmlnaWRHcm91cChncm91cCkpIHtcbiAgICAgIHJldHVybiBncm91cC5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50KHBvaW50LCBvdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLy9yZXR1cm4gbV92ZWxvY2l0eUJ1ZmZlci5kYXRhW3BhcnRpY2xlSW5kZXhdO1xuICAgICAgcmV0dXJuIG91dC5Db3B5KHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhW3BhcnRpY2xlSW5kZXhdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgSW5pdERhbXBpbmdQYXJhbWV0ZXIoaW52TWFzczogbnVtYmVyW10sIGludkluZXJ0aWE6IG51bWJlcltdLCB0YW5nZW50RGlzdGFuY2U6IG51bWJlcltdLCBtYXNzOiBudW1iZXIsIGluZXJ0aWE6IG51bWJlciwgY2VudGVyOiBiMlZlYzIsIHBvaW50OiBiMlZlYzIsIG5vcm1hbDogYjJWZWMyKTogdm9pZCB7XG4gICAgLy8vKmludk1hc3MgPSBtYXNzID4gMCA/IDEgLyBtYXNzIDogMDtcbiAgICBpbnZNYXNzWzBdID0gbWFzcyA+IDAgPyAxIC8gbWFzcyA6IDA7XG4gICAgLy8vKmludkluZXJ0aWEgPSBpbmVydGlhID4gMCA/IDEgLyBpbmVydGlhIDogMDtcbiAgICBpbnZJbmVydGlhWzBdID0gaW5lcnRpYSA+IDAgPyAxIC8gaW5lcnRpYSA6IDA7XG4gICAgLy8vKnRhbmdlbnREaXN0YW5jZSA9IGIyQ3Jvc3MocG9pbnQgLSBjZW50ZXIsIG5vcm1hbCk7XG4gICAgdGFuZ2VudERpc3RhbmNlWzBdID0gYjJWZWMyLkNyb3NzVlYoYjJWZWMyLlN1YlZWKHBvaW50LCBjZW50ZXIsIGIyVmVjMi5zX3QwKSwgbm9ybWFsKTtcbiAgfVxuXG4gIHB1YmxpYyBJbml0RGFtcGluZ1BhcmFtZXRlcldpdGhSaWdpZEdyb3VwT3JQYXJ0aWNsZShpbnZNYXNzOiBudW1iZXJbXSwgaW52SW5lcnRpYTogbnVtYmVyW10sIHRhbmdlbnREaXN0YW5jZTogbnVtYmVyW10sIGlzUmlnaWRHcm91cDogYm9vbGVhbiwgZ3JvdXA6IGIyUGFydGljbGVHcm91cCB8IG51bGwsIHBhcnRpY2xlSW5kZXg6IG51bWJlciwgcG9pbnQ6IGIyVmVjMiwgbm9ybWFsOiBiMlZlYzIpOiB2b2lkIHtcbiAgICBpZiAoZ3JvdXAgJiYgaXNSaWdpZEdyb3VwKSB7XG4gICAgICB0aGlzLkluaXREYW1waW5nUGFyYW1ldGVyKGludk1hc3MsIGludkluZXJ0aWEsIHRhbmdlbnREaXN0YW5jZSwgZ3JvdXAuR2V0TWFzcygpLCBncm91cC5HZXRJbmVydGlhKCksIGdyb3VwLkdldENlbnRlcigpLCBwb2ludCwgbm9ybWFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtwYXJ0aWNsZUluZGV4XTtcbiAgICAgIHRoaXMuSW5pdERhbXBpbmdQYXJhbWV0ZXIoaW52TWFzcywgaW52SW5lcnRpYSwgdGFuZ2VudERpc3RhbmNlLCBmbGFncyAmIGIyUGFydGljbGVGbGFnLmIyX3dhbGxQYXJ0aWNsZSA/IDAgOiB0aGlzLkdldFBhcnRpY2xlTWFzcygpLCAwLCBwb2ludCwgcG9pbnQsIG5vcm1hbCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIENvbXB1dGVEYW1waW5nSW1wdWxzZShpbnZNYXNzQTogbnVtYmVyLCBpbnZJbmVydGlhQTogbnVtYmVyLCB0YW5nZW50RGlzdGFuY2VBOiBudW1iZXIsIGludk1hc3NCOiBudW1iZXIsIGludkluZXJ0aWFCOiBudW1iZXIsIHRhbmdlbnREaXN0YW5jZUI6IG51bWJlciwgbm9ybWFsVmVsb2NpdHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgaW52TWFzcyA9XG4gICAgICBpbnZNYXNzQSArIGludkluZXJ0aWFBICogdGFuZ2VudERpc3RhbmNlQSAqIHRhbmdlbnREaXN0YW5jZUEgK1xuICAgICAgaW52TWFzc0IgKyBpbnZJbmVydGlhQiAqIHRhbmdlbnREaXN0YW5jZUIgKiB0YW5nZW50RGlzdGFuY2VCO1xuICAgIHJldHVybiBpbnZNYXNzID4gMCA/IG5vcm1hbFZlbG9jaXR5IC8gaW52TWFzcyA6IDA7XG4gIH1cblxuICBwdWJsaWMgQXBwbHlEYW1waW5nKGludk1hc3M6IG51bWJlciwgaW52SW5lcnRpYTogbnVtYmVyLCB0YW5nZW50RGlzdGFuY2U6IG51bWJlciwgaXNSaWdpZEdyb3VwOiBib29sZWFuLCBncm91cDogYjJQYXJ0aWNsZUdyb3VwIHwgbnVsbCwgcGFydGljbGVJbmRleDogbnVtYmVyLCBpbXB1bHNlOiBudW1iZXIsIG5vcm1hbDogYjJWZWMyKTogdm9pZCB7XG4gICAgaWYgKGdyb3VwICYmIGlzUmlnaWRHcm91cCkge1xuICAgICAgLy8vZ3JvdXAubV9saW5lYXJWZWxvY2l0eSArPSBpbXB1bHNlICogaW52TWFzcyAqIG5vcm1hbDtcbiAgICAgIGdyb3VwLm1fbGluZWFyVmVsb2NpdHkuU2VsZk11bEFkZChpbXB1bHNlICogaW52TWFzcywgbm9ybWFsKTtcbiAgICAgIC8vL2dyb3VwLm1fYW5ndWxhclZlbG9jaXR5ICs9IGltcHVsc2UgKiB0YW5nZW50RGlzdGFuY2UgKiBpbnZJbmVydGlhO1xuICAgICAgZ3JvdXAubV9hbmd1bGFyVmVsb2NpdHkgKz0gaW1wdWxzZSAqIHRhbmdlbnREaXN0YW5jZSAqIGludkluZXJ0aWE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vL21fdmVsb2NpdHlCdWZmZXIuZGF0YVtwYXJ0aWNsZUluZGV4XSArPSBpbXB1bHNlICogaW52TWFzcyAqIG5vcm1hbDtcbiAgICAgIHRoaXMubV92ZWxvY2l0eUJ1ZmZlci5kYXRhW3BhcnRpY2xlSW5kZXhdLlNlbGZNdWxBZGQoaW1wdWxzZSAqIGludk1hc3MsIG5vcm1hbCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxUPiB7XG4gIHB1YmxpYyBfZGF0YTogVFtdIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBnZXQgZGF0YSgpOiBUW10geyByZXR1cm4gdGhpcy5fZGF0YSBhcyBUW107IH0gLy8gSEFDSzogbWF5IHJldHVybiBudWxsXG4gIHB1YmxpYyBzZXQgZGF0YSh2YWx1ZTogVFtdKSB7IHRoaXMuX2RhdGEgPSB2YWx1ZTsgfVxuICBwdWJsaWMgdXNlclN1cHBsaWVkQ2FwYWNpdHk6IG51bWJlciA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5IHtcbiAgcHVibGljIGluZGV4OiBudW1iZXIgPSBiMl9pbnZhbGlkUGFydGljbGVJbmRleDtcbiAgcHVibGljIHRhZzogbnVtYmVyID0gMDtcbiAgcHVibGljIHN0YXRpYyBDb21wYXJlUHJveHlQcm94eShhOiBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5LCBiOiBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGEudGFnIDwgYi50YWc7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBDb21wYXJlVGFnUHJveHkoYTogbnVtYmVyLCBiOiBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGEgPCBiLnRhZztcbiAgfVxuICBwdWJsaWMgc3RhdGljIENvbXBhcmVQcm94eVRhZyhhOiBiMlBhcnRpY2xlU3lzdGVtX1Byb3h5LCBiOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gYS50YWcgPCBiO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX0luc2lkZUJvdW5kc0VudW1lcmF0b3Ige1xuICBwdWJsaWMgbV9zeXN0ZW06IGIyUGFydGljbGVTeXN0ZW07XG4gIHB1YmxpYyBtX3hMb3dlcjogbnVtYmVyO1xuICBwdWJsaWMgbV94VXBwZXI6IG51bWJlcjtcbiAgcHVibGljIG1feUxvd2VyOiBudW1iZXI7XG4gIHB1YmxpYyBtX3lVcHBlcjogbnVtYmVyO1xuICBwdWJsaWMgbV9maXJzdDogbnVtYmVyO1xuICBwdWJsaWMgbV9sYXN0OiBudW1iZXI7XG4gIC8qKlxuICAgKiBJbnNpZGVCb3VuZHNFbnVtZXJhdG9yIGVudW1lcmF0ZXMgYWxsIHBhcnRpY2xlcyBpbnNpZGUgdGhlXG4gICAqIGdpdmVuIGJvdW5kcy5cbiAgICpcbiAgICogQ29uc3RydWN0IGFuIGVudW1lcmF0b3Igd2l0aCBib3VuZHMgb2YgdGFncyBhbmQgYSByYW5nZSBvZlxuICAgKiBwcm94aWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtLCBsb3dlcjogbnVtYmVyLCB1cHBlcjogbnVtYmVyLCBmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXIpIHtcbiAgICB0aGlzLm1fc3lzdGVtID0gc3lzdGVtO1xuICAgIHRoaXMubV94TG93ZXIgPSAobG93ZXIgJiBiMlBhcnRpY2xlU3lzdGVtLnhNYXNrKSA+Pj4gMDtcbiAgICB0aGlzLm1feFVwcGVyID0gKHVwcGVyICYgYjJQYXJ0aWNsZVN5c3RlbS54TWFzaykgPj4+IDA7XG4gICAgdGhpcy5tX3lMb3dlciA9IChsb3dlciAmIGIyUGFydGljbGVTeXN0ZW0ueU1hc2spID4+PiAwO1xuICAgIHRoaXMubV95VXBwZXIgPSAodXBwZXIgJiBiMlBhcnRpY2xlU3lzdGVtLnlNYXNrKSA+Pj4gMDtcbiAgICB0aGlzLm1fZmlyc3QgPSBmaXJzdDtcbiAgICB0aGlzLm1fbGFzdCA9IGxhc3Q7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9maXJzdCA8PSB0aGlzLm1fbGFzdCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGluZGV4IG9mIHRoZSBuZXh0IHBhcnRpY2xlLiBSZXR1cm5zXG4gICAqIGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4IGlmIHRoZXJlIGFyZSBubyBtb3JlIHBhcnRpY2xlcy5cbiAgICovXG4gIHB1YmxpYyBHZXROZXh0KCk6IG51bWJlciB7XG4gICAgd2hpbGUgKHRoaXMubV9maXJzdCA8IHRoaXMubV9sYXN0KSB7XG4gICAgICBjb25zdCB4VGFnID0gKHRoaXMubV9zeXN0ZW0ubV9wcm94eUJ1ZmZlci5kYXRhW3RoaXMubV9maXJzdF0udGFnICYgYjJQYXJ0aWNsZVN5c3RlbS54TWFzaykgPj4+IDA7XG4gICAgICAvLyAjaWYgQjJfQVNTRVJUX0VOQUJMRURcbiAgICAgIC8vIERFQlVHOiBjb25zdCB5VGFnID0gKHRoaXMubV9zeXN0ZW0ubV9wcm94eUJ1ZmZlci5kYXRhW3RoaXMubV9maXJzdF0udGFnICYgYjJQYXJ0aWNsZVN5c3RlbV95TWFzaykgPj4+IDA7XG4gICAgICAvLyBERUJVRzogYjJBc3NlcnQoeVRhZyA+PSB0aGlzLm1feUxvd2VyKTtcbiAgICAgIC8vIERFQlVHOiBiMkFzc2VydCh5VGFnIDw9IHRoaXMubV95VXBwZXIpO1xuICAgICAgLy8gI2VuZGlmXG4gICAgICBpZiAoeFRhZyA+PSB0aGlzLm1feExvd2VyICYmIHhUYWcgPD0gdGhpcy5tX3hVcHBlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMubV9zeXN0ZW0ubV9wcm94eUJ1ZmZlci5kYXRhW3RoaXMubV9maXJzdCsrXSkuaW5kZXg7XG4gICAgICB9XG4gICAgICB0aGlzLm1fZmlyc3QrKztcbiAgICB9XG4gICAgcmV0dXJuIGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlTGlzdE5vZGUge1xuICAvKipcbiAgICogVGhlIGhlYWQgb2YgdGhlIGxpc3QuXG4gICAqL1xuICBwdWJsaWMgbGlzdCE6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVMaXN0Tm9kZTtcbiAgLyoqXG4gICAqIFRoZSBuZXh0IG5vZGUgaW4gdGhlIGxpc3QuXG4gICAqL1xuICBwdWJsaWMgbmV4dDogYjJQYXJ0aWNsZVN5c3RlbV9QYXJ0aWNsZUxpc3ROb2RlIHwgbnVsbCA9IG51bGw7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdC4gVmFsaWQgb25seSBmb3IgdGhlIG5vZGUgYXQgdGhlXG4gICAqIGhlYWQgb2YgdGhlIGxpc3QuXG4gICAqL1xuICBwdWJsaWMgY291bnQ6IG51bWJlciA9IDA7XG4gIC8qKlxuICAgKiBQYXJ0aWNsZSBpbmRleC5cbiAgICovXG4gIHB1YmxpYyBpbmRleDogbnVtYmVyID0gMDtcbn1cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVTeXN0ZW1fRml4ZWRTZXRBbGxvY2F0b3I8VD4ge1xuICBwdWJsaWMgQWxsb2NhdGUoaXRlbVNpemU6IG51bWJlciwgY291bnQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gVE9ET1xuICAgIHJldHVybiBjb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBDbGVhcigpOiB2b2lkIHtcbiAgICAvLyBUT0RPXG4gIH1cblxuICBwdWJsaWMgR2V0Q291bnQoKTogbnVtYmVyIHtcbiAgICAvLyBUT0RPXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgSW52YWxpZGF0ZShpdGVtSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFRPRE9cbiAgfVxuXG4gIHB1YmxpYyBHZXRWYWxpZEJ1ZmZlcigpOiBib29sZWFuW10ge1xuICAgIC8vIFRPRE9cbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwdWJsaWMgR2V0QnVmZmVyKCk6IFRbXSB7XG4gICAgLy8gVE9ET1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRDb3VudChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVE9ET1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX0ZpeHR1cmVQYXJ0aWNsZSB7XG4gIHB1YmxpYyBmaXJzdDogYjJGaXh0dXJlO1xuICBwdWJsaWMgc2Vjb25kOiBudW1iZXIgPSBiMl9pbnZhbGlkUGFydGljbGVJbmRleDtcbiAgY29uc3RydWN0b3IoZml4dHVyZTogYjJGaXh0dXJlLCBwYXJ0aWNsZTogbnVtYmVyKSB7XG4gICAgdGhpcy5maXJzdCA9IGZpeHR1cmU7XG4gICAgdGhpcy5zZWNvbmQgPSBwYXJ0aWNsZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZVN5c3RlbV9GaXh0dXJlUGFydGljbGVTZXQgZXh0ZW5kcyBiMlBhcnRpY2xlU3lzdGVtX0ZpeGVkU2V0QWxsb2NhdG9yPGIyUGFydGljbGVTeXN0ZW1fRml4dHVyZVBhcnRpY2xlPiB7XG4gIHB1YmxpYyBJbml0aWFsaXplKGJvZHlDb250YWN0QnVmZmVyOiBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVCb2R5Q29udGFjdD4sIGZsYWdzQnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMlBhcnRpY2xlRmxhZz4pOiB2b2lkIHtcbiAgICAvLyBUT0RPXG4gIH1cbiAgcHVibGljIEZpbmQocGFpcjogYjJQYXJ0aWNsZVN5c3RlbV9GaXh0dXJlUGFydGljbGUpOiBudW1iZXIge1xuICAgIC8vIFRPRE9cbiAgICByZXR1cm4gYjJfaW52YWxpZFBhcnRpY2xlSW5kZXg7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVQYWlyIHtcbiAgcHVibGljIGZpcnN0OiBudW1iZXIgPSBiMl9pbnZhbGlkUGFydGljbGVJbmRleDtcbiAgcHVibGljIHNlY29uZDogbnVtYmVyID0gYjJfaW52YWxpZFBhcnRpY2xlSW5kZXg7XG4gIGNvbnN0cnVjdG9yKHBhcnRpY2xlQTogbnVtYmVyLCBwYXJ0aWNsZUI6IG51bWJlcikge1xuICAgIHRoaXMuZmlyc3QgPSBwYXJ0aWNsZUE7XG4gICAgdGhpcy5zZWNvbmQgPSBwYXJ0aWNsZUI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVQYWlyU2V0IGV4dGVuZHMgYjJQYXJ0aWNsZVN5c3RlbV9GaXhlZFNldEFsbG9jYXRvcjxiMlBhcnRpY2xlU3lzdGVtX1BhcnRpY2xlUGFpcj4ge1xuICBwdWJsaWMgSW5pdGlhbGl6ZShjb250YWN0QnVmZmVyOiBiMkdyb3dhYmxlQnVmZmVyPGIyUGFydGljbGVDb250YWN0PiwgZmxhZ3NCdWZmZXI6IGIyUGFydGljbGVTeXN0ZW1fVXNlck92ZXJyaWRhYmxlQnVmZmVyPGIyUGFydGljbGVGbGFnPik6IHZvaWQge1xuICAgIC8vIFRPRE9cbiAgfVxuXG4gIHB1YmxpYyBGaW5kKHBhaXI6IGIyUGFydGljbGVTeXN0ZW1fUGFydGljbGVQYWlyKTogbnVtYmVyIHtcbiAgICAvLyBUT0RPXG4gICAgcmV0dXJuIGIyX2ludmFsaWRQYXJ0aWNsZUluZGV4O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX0Nvbm5lY3Rpb25GaWx0ZXIge1xuICAvKipcbiAgICogSXMgdGhlIHBhcnRpY2xlIG5lY2Vzc2FyeSBmb3IgY29ubmVjdGlvbj9cbiAgICogQSBwYWlyIG9yIGEgdHJpYWQgc2hvdWxkIGNvbnRhaW4gYXQgbGVhc3Qgb25lICduZWNlc3NhcnknXG4gICAqIHBhcnRpY2xlLlxuICAgKi9cbiAgcHVibGljIElzTmVjZXNzYXJ5KGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBhZGRpdGlvbmFsIGNvbmRpdGlvbiBmb3IgY3JlYXRpbmcgYSBwYWlyLlxuICAgKi9cbiAgcHVibGljIFNob3VsZENyZWF0ZVBhaXIoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBhZGRpdGlvbmFsIGNvbmRpdGlvbiBmb3IgY3JlYXRpbmcgYSB0cmlhZC5cbiAgICovXG4gIHB1YmxpYyBTaG91bGRDcmVhdGVUcmlhZChhOiBudW1iZXIsIGI6IG51bWJlciwgYzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGIyUGFydGljbGVTeXN0ZW1fRGVzdHJveVBhcnRpY2xlc0luU2hhcGVDYWxsYmFjayBleHRlbmRzIGIyUXVlcnlDYWxsYmFjayB7XG4gIHB1YmxpYyBtX3N5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbTtcbiAgcHVibGljIG1fc2hhcGU6IGIyU2hhcGU7XG4gIHB1YmxpYyBtX3hmOiBiMlRyYW5zZm9ybTtcbiAgcHVibGljIG1fY2FsbERlc3RydWN0aW9uTGlzdGVuZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1fZGVzdHJveWVkOiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSwgc2hhcGU6IGIyU2hhcGUsIHhmOiBiMlRyYW5zZm9ybSwgY2FsbERlc3RydWN0aW9uTGlzdGVuZXI6IGJvb2xlYW4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubV9zeXN0ZW0gPSBzeXN0ZW07XG4gICAgdGhpcy5tX3NoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5tX3hmID0geGY7XG4gICAgdGhpcy5tX2NhbGxEZXN0cnVjdGlvbkxpc3RlbmVyID0gY2FsbERlc3RydWN0aW9uTGlzdGVuZXI7XG4gICAgdGhpcy5tX2Rlc3Ryb3llZCA9IDA7XG4gIH1cblxuICBwdWJsaWMgUmVwb3J0Rml4dHVyZShmaXh0dXJlOiBiMkZpeHR1cmUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgUmVwb3J0UGFydGljbGUocGFydGljbGVTeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0sIGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAocGFydGljbGVTeXN0ZW0gIT09IHRoaXMubV9zeXN0ZW0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLm1fc3lzdGVtLm1fY291bnQpO1xuICAgIGlmICh0aGlzLm1fc2hhcGUuVGVzdFBvaW50KHRoaXMubV94ZiwgdGhpcy5tX3N5c3RlbS5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbaW5kZXhdKSkge1xuICAgICAgdGhpcy5tX3N5c3RlbS5EZXN0cm95UGFydGljbGUoaW5kZXgsIHRoaXMubV9jYWxsRGVzdHJ1Y3Rpb25MaXN0ZW5lcik7XG4gICAgICB0aGlzLm1fZGVzdHJveWVkKys7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIERlc3Ryb3llZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1fZGVzdHJveWVkO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBiMlBhcnRpY2xlU3lzdGVtX0pvaW5QYXJ0aWNsZUdyb3Vwc0ZpbHRlciBleHRlbmRzIGIyUGFydGljbGVTeXN0ZW1fQ29ubmVjdGlvbkZpbHRlciB7XG4gIHB1YmxpYyBtX3RocmVzaG9sZDogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3Rvcih0aHJlc2hvbGQ6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5tX3RocmVzaG9sZCA9IHRocmVzaG9sZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBhZGRpdGlvbmFsIGNvbmRpdGlvbiBmb3IgY3JlYXRpbmcgYSBwYWlyLlxuICAgKi9cbiAgcHVibGljIFNob3VsZENyZWF0ZVBhaXIoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKGEgPCB0aGlzLm1fdGhyZXNob2xkICYmIHRoaXMubV90aHJlc2hvbGQgPD0gYikgfHxcbiAgICAgIChiIDwgdGhpcy5tX3RocmVzaG9sZCAmJiB0aGlzLm1fdGhyZXNob2xkIDw9IGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGFkZGl0aW9uYWwgY29uZGl0aW9uIGZvciBjcmVhdGluZyBhIHRyaWFkLlxuICAgKi9cbiAgcHVibGljIFNob3VsZENyZWF0ZVRyaWFkKGE6IG51bWJlciwgYjogbnVtYmVyLCBjOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKGEgPCB0aGlzLm1fdGhyZXNob2xkIHx8IGIgPCB0aGlzLm1fdGhyZXNob2xkIHx8IGMgPCB0aGlzLm1fdGhyZXNob2xkKSAmJlxuICAgICAgKHRoaXMubV90aHJlc2hvbGQgPD0gYSB8fCB0aGlzLm1fdGhyZXNob2xkIDw9IGIgfHwgdGhpcy5tX3RocmVzaG9sZCA8PSBjKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZVN5c3RlbV9Db21wb3NpdGVTaGFwZSBleHRlbmRzIGIyU2hhcGUge1xuICBjb25zdHJ1Y3RvcihzaGFwZXM6IGIyU2hhcGVbXSwgc2hhcGVDb3VudDogbnVtYmVyID0gc2hhcGVzLmxlbmd0aCkge1xuICAgIHN1cGVyKGIyU2hhcGVUeXBlLmVfdW5rbm93biwgMCk7XG4gICAgdGhpcy5tX3NoYXBlcyA9IHNoYXBlcztcbiAgICB0aGlzLm1fc2hhcGVDb3VudCA9IHNoYXBlQ291bnQ7XG4gIH1cblxuICBwdWJsaWMgbV9zaGFwZXM6IGIyU2hhcGVbXTtcbiAgcHVibGljIG1fc2hhcGVDb3VudDogbnVtYmVyID0gMDtcblxuICBwdWJsaWMgQ2xvbmUoKTogYjJTaGFwZSB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgfVxuXG4gIHB1YmxpYyBHZXRDaGlsZENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvKipcbiAgICogQHNlZSBiMlNoYXBlOjpUZXN0UG9pbnRcbiAgICovXG4gIHB1YmxpYyBUZXN0UG9pbnQoeGY6IGIyVHJhbnNmb3JtLCBwOiBYWSk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tX3NoYXBlQ291bnQ7IGkrKykge1xuICAgICAgaWYgKHRoaXMubV9zaGFwZXNbaV0uVGVzdFBvaW50KHhmLCBwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBzZWUgYjJTaGFwZTo6Q29tcHV0ZURpc3RhbmNlXG4gICAqL1xuICBwdWJsaWMgQ29tcHV0ZURpc3RhbmNlKHhmOiBiMlRyYW5zZm9ybSwgcDogYjJWZWMyLCBub3JtYWw6IGIyVmVjMiwgY2hpbGRJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCBiMlNoYXBlLlxuICAgKi9cbiAgcHVibGljIFJheUNhc3Qob3V0cHV0OiBiMlJheUNhc3RPdXRwdXQsIGlucHV0OiBiMlJheUNhc3RJbnB1dCwgeGY6IGIyVHJhbnNmb3JtLCBjaGlsZEluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAc2VlIGIyU2hhcGU6OkNvbXB1dGVBQUJCXG4gICAqL1xuICBwdWJsaWMgQ29tcHV0ZUFBQkIoYWFiYjogYjJBQUJCLCB4ZjogYjJUcmFuc2Zvcm0sIGNoaWxkSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHNfc3ViYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgICBhYWJiLmxvd2VyQm91bmQueCA9ICtiMl9tYXhGbG9hdDtcbiAgICBhYWJiLmxvd2VyQm91bmQueSA9ICtiMl9tYXhGbG9hdDtcbiAgICBhYWJiLnVwcGVyQm91bmQueCA9IC1iMl9tYXhGbG9hdDtcbiAgICBhYWJiLnVwcGVyQm91bmQueSA9IC1iMl9tYXhGbG9hdDtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoY2hpbGRJbmRleCA9PT0gMCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1fc2hhcGVDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZENvdW50ID0gdGhpcy5tX3NoYXBlc1tpXS5HZXRDaGlsZENvdW50KCk7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNoaWxkQ291bnQ7IGorKykge1xuICAgICAgICBjb25zdCBzdWJhYWJiID0gc19zdWJhYWJiO1xuICAgICAgICB0aGlzLm1fc2hhcGVzW2ldLkNvbXB1dGVBQUJCKHN1YmFhYmIsIHhmLCBqKTtcbiAgICAgICAgYWFiYi5Db21iaW5lMShzdWJhYWJiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHNlZSBiMlNoYXBlOjpDb21wdXRlTWFzc1xuICAgKi9cbiAgcHVibGljIENvbXB1dGVNYXNzKG1hc3NEYXRhOiBiMk1hc3NEYXRhLCBkZW5zaXR5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICB9XG5cbiAgcHVibGljIFNldHVwRGlzdGFuY2VQcm94eShwcm94eTogYjJEaXN0YW5jZVByb3h5LCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgfVxuXG4gIHB1YmxpYyBDb21wdXRlU3VibWVyZ2VkQXJlYShub3JtYWw6IGIyVmVjMiwgb2Zmc2V0OiBudW1iZXIsIHhmOiBiMlRyYW5zZm9ybSwgYzogYjJWZWMyKTogbnVtYmVyIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQoZmFsc2UpO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIER1bXAobG9nOiAoZm9ybWF0OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KGZhbHNlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZVN5c3RlbV9SZWFjdGl2ZUZpbHRlciBleHRlbmRzIGIyUGFydGljbGVTeXN0ZW1fQ29ubmVjdGlvbkZpbHRlciB7XG4gIHB1YmxpYyBtX2ZsYWdzQnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMlBhcnRpY2xlRmxhZz47XG4gIGNvbnN0cnVjdG9yKGZsYWdzQnVmZmVyOiBiMlBhcnRpY2xlU3lzdGVtX1VzZXJPdmVycmlkYWJsZUJ1ZmZlcjxiMlBhcnRpY2xlRmxhZz4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubV9mbGFnc0J1ZmZlciA9IGZsYWdzQnVmZmVyO1xuICB9XG4gIHB1YmxpYyBJc05lY2Vzc2FyeShpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3NCdWZmZXIuZGF0YVtpbmRleF0gJiBiMlBhcnRpY2xlRmxhZy5iMl9yZWFjdGl2ZVBhcnRpY2xlKSAhPT0gMDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZVN5c3RlbV9VcGRhdGVCb2R5Q29udGFjdHNDYWxsYmFjayBleHRlbmRzIGIyRml4dHVyZVBhcnRpY2xlUXVlcnlDYWxsYmFjayB7XG4gIHB1YmxpYyBtX2NvbnRhY3RGaWx0ZXI6IGIyQ29udGFjdEZpbHRlciB8IG51bGwgPSBudWxsO1xuICBjb25zdHJ1Y3RvcihzeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0sIGNvbnRhY3RGaWx0ZXI6IGIyQ29udGFjdEZpbHRlciB8IG51bGwgPSBudWxsKSB7XG4gICAgc3VwZXIoc3lzdGVtKTsgLy8gYmFzZSBjbGFzcyBjb25zdHJ1Y3RvclxuICAgIHRoaXMubV9jb250YWN0RmlsdGVyID0gY29udGFjdEZpbHRlcjtcbiAgfVxuXG4gIHB1YmxpYyBTaG91bGRDb2xsaWRlRml4dHVyZVBhcnRpY2xlKGZpeHR1cmU6IGIyRml4dHVyZSwgcGFydGljbGVTeXN0ZW06IGIyUGFydGljbGVTeXN0ZW0sIHBhcnRpY2xlSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIENhbGwgdGhlIGNvbnRhY3QgZmlsdGVyIGlmIGl0J3Mgc2V0LCB0byBkZXRlcm1pbmUgd2hldGhlciB0b1xuICAgIC8vIGZpbHRlciB0aGlzIGNvbnRhY3QuICBSZXR1cm5zIHRydWUgaWYgY29udGFjdCBjYWxjdWxhdGlvbnMgc2hvdWxkXG4gICAgLy8gYmUgcGVyZm9ybWVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgaWYgKHRoaXMubV9jb250YWN0RmlsdGVyKSB7XG4gICAgICBjb25zdCBmbGFncyA9IHRoaXMubV9zeXN0ZW0uR2V0RmxhZ3NCdWZmZXIoKTtcbiAgICAgIGlmIChmbGFnc1twYXJ0aWNsZUluZGV4XSAmIGIyUGFydGljbGVGbGFnLmIyX2ZpeHR1cmVDb250YWN0RmlsdGVyUGFydGljbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9jb250YWN0RmlsdGVyLlNob3VsZENvbGxpZGVGaXh0dXJlUGFydGljbGUoZml4dHVyZSwgdGhpcy5tX3N5c3RlbSwgcGFydGljbGVJbmRleCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIFJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZShmaXh0dXJlOiBiMkZpeHR1cmUsIGNoaWxkSW5kZXg6IG51bWJlciwgYTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgc19uID0gYjJQYXJ0aWNsZVN5c3RlbV9VcGRhdGVCb2R5Q29udGFjdHNDYWxsYmFjay5SZXBvcnRGaXh0dXJlQW5kUGFydGljbGVfc19uO1xuICAgIGNvbnN0IHNfcnAgPSBiMlBhcnRpY2xlU3lzdGVtX1VwZGF0ZUJvZHlDb250YWN0c0NhbGxiYWNrLlJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX3JwO1xuICAgIGNvbnN0IGFwID0gdGhpcy5tX3N5c3RlbS5tX3Bvc2l0aW9uQnVmZmVyLmRhdGFbYV07XG4gICAgY29uc3QgbiA9IHNfbjtcbiAgICBjb25zdCBkID0gZml4dHVyZS5Db21wdXRlRGlzdGFuY2UoYXAsIG4sIGNoaWxkSW5kZXgpO1xuICAgIGlmIChkIDwgdGhpcy5tX3N5c3RlbS5tX3BhcnRpY2xlRGlhbWV0ZXIgJiYgdGhpcy5TaG91bGRDb2xsaWRlRml4dHVyZVBhcnRpY2xlKGZpeHR1cmUsIHRoaXMubV9zeXN0ZW0sIGEpKSB7XG4gICAgICBjb25zdCBiID0gZml4dHVyZS5HZXRCb2R5KCk7XG4gICAgICBjb25zdCBicCA9IGIuR2V0V29ybGRDZW50ZXIoKTtcbiAgICAgIGNvbnN0IGJtID0gYi5HZXRNYXNzKCk7XG4gICAgICBjb25zdCBiSSA9IGIuR2V0SW5lcnRpYSgpIC0gYm0gKiBiLkdldExvY2FsQ2VudGVyKCkuTGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgY29uc3QgaW52Qm0gPSBibSA+IDAgPyAxIC8gYm0gOiAwO1xuICAgICAgY29uc3QgaW52QkkgPSBiSSA+IDAgPyAxIC8gYkkgOiAwO1xuICAgICAgY29uc3QgaW52QW0gPVxuICAgICAgICB0aGlzLm1fc3lzdGVtLm1fZmxhZ3NCdWZmZXIuZGF0YVthXSAmXG4gICAgICAgIGIyUGFydGljbGVGbGFnLmIyX3dhbGxQYXJ0aWNsZSA/IDAgOiB0aGlzLm1fc3lzdGVtLkdldFBhcnRpY2xlSW52TWFzcygpO1xuICAgICAgLy8vYjJWZWMyIHJwID0gYXAgLSBicDtcbiAgICAgIGNvbnN0IHJwID0gYjJWZWMyLlN1YlZWKGFwLCBicCwgc19ycCk7XG4gICAgICBjb25zdCBycG4gPSBiMlZlYzIuQ3Jvc3NWVihycCwgbik7XG4gICAgICBjb25zdCBpbnZNID0gaW52QW0gKyBpbnZCbSArIGludkJJICogcnBuICogcnBuO1xuXG4gICAgICAvLy9iMlBhcnRpY2xlQm9keUNvbnRhY3QmIGNvbnRhY3QgPSBtX3N5c3RlbS5tX2JvZHlDb250YWN0QnVmZmVyLkFwcGVuZCgpO1xuICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMubV9zeXN0ZW0ubV9ib2R5Q29udGFjdEJ1ZmZlci5kYXRhW3RoaXMubV9zeXN0ZW0ubV9ib2R5Q29udGFjdEJ1ZmZlci5BcHBlbmQoKV07XG4gICAgICBjb250YWN0LmluZGV4ID0gYTtcbiAgICAgIGNvbnRhY3QuYm9keSA9IGI7XG4gICAgICBjb250YWN0LmZpeHR1cmUgPSBmaXh0dXJlO1xuICAgICAgY29udGFjdC53ZWlnaHQgPSAxIC0gZCAqIHRoaXMubV9zeXN0ZW0ubV9pbnZlcnNlRGlhbWV0ZXI7XG4gICAgICAvLy9jb250YWN0Lm5vcm1hbCA9IC1uO1xuICAgICAgY29udGFjdC5ub3JtYWwuQ29weShuLlNlbGZOZWcoKSk7XG4gICAgICBjb250YWN0Lm1hc3MgPSBpbnZNID4gMCA/IDEgLyBpbnZNIDogMDtcbiAgICAgIHRoaXMubV9zeXN0ZW0uRGV0ZWN0U3R1Y2tQYXJ0aWNsZShhKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSZXBvcnRGaXh0dXJlQW5kUGFydGljbGVfc19uID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX3JwID0gbmV3IGIyVmVjMigpO1xufVxuXG5leHBvcnQgY2xhc3MgYjJQYXJ0aWNsZVN5c3RlbV9Tb2x2ZUNvbGxpc2lvbkNhbGxiYWNrIGV4dGVuZHMgYjJGaXh0dXJlUGFydGljbGVRdWVyeUNhbGxiYWNrIHtcbiAgcHVibGljIG1fc3RlcDogYjJUaW1lU3RlcDtcbiAgY29uc3RydWN0b3Ioc3lzdGVtOiBiMlBhcnRpY2xlU3lzdGVtLCBzdGVwOiBiMlRpbWVTdGVwKSB7XG4gICAgc3VwZXIoc3lzdGVtKTsgLy8gYmFzZSBjbGFzcyBjb25zdHJ1Y3RvclxuICAgIHRoaXMubV9zdGVwID0gc3RlcDtcbiAgfVxuXG4gIHB1YmxpYyBSZXBvcnRGaXh0dXJlQW5kUGFydGljbGUoZml4dHVyZTogYjJGaXh0dXJlLCBjaGlsZEluZGV4OiBudW1iZXIsIGE6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHNfcDEgPSBiMlBhcnRpY2xlU3lzdGVtX1NvbHZlQ29sbGlzaW9uQ2FsbGJhY2suUmVwb3J0Rml4dHVyZUFuZFBhcnRpY2xlX3NfcDE7XG4gICAgY29uc3Qgc19vdXRwdXQgPSBiMlBhcnRpY2xlU3lzdGVtX1NvbHZlQ29sbGlzaW9uQ2FsbGJhY2suUmVwb3J0Rml4dHVyZUFuZFBhcnRpY2xlX3Nfb3V0cHV0O1xuICAgIGNvbnN0IHNfaW5wdXQgPSBiMlBhcnRpY2xlU3lzdGVtX1NvbHZlQ29sbGlzaW9uQ2FsbGJhY2suUmVwb3J0Rml4dHVyZUFuZFBhcnRpY2xlX3NfaW5wdXQ7XG4gICAgY29uc3Qgc19wID0gYjJQYXJ0aWNsZVN5c3RlbV9Tb2x2ZUNvbGxpc2lvbkNhbGxiYWNrLlJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX3A7XG4gICAgY29uc3Qgc192ID0gYjJQYXJ0aWNsZVN5c3RlbV9Tb2x2ZUNvbGxpc2lvbkNhbGxiYWNrLlJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX3Y7XG4gICAgY29uc3Qgc19mID0gYjJQYXJ0aWNsZVN5c3RlbV9Tb2x2ZUNvbGxpc2lvbkNhbGxiYWNrLlJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX2Y7XG5cbiAgICBjb25zdCBib2R5ID0gZml4dHVyZS5HZXRCb2R5KCk7XG4gICAgY29uc3QgYXAgPSB0aGlzLm1fc3lzdGVtLm1fcG9zaXRpb25CdWZmZXIuZGF0YVthXTtcbiAgICBjb25zdCBhdiA9IHRoaXMubV9zeXN0ZW0ubV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2FdO1xuICAgIGNvbnN0IG91dHB1dCA9IHNfb3V0cHV0O1xuICAgIGNvbnN0IGlucHV0ID0gc19pbnB1dDtcbiAgICBpZiAodGhpcy5tX3N5c3RlbS5tX2l0ZXJhdGlvbkluZGV4ID09PSAwKSB7XG4gICAgICAvLyBQdXQgJ2FwJyBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YgdGhlIHByZXZpb3VzIGZyYW1lXG4gICAgICAvLy9iMlZlYzIgcDEgPSBiMk11bFQoYm9keS5tX3hmMCwgYXApO1xuICAgICAgY29uc3QgcDEgPSBiMlRyYW5zZm9ybS5NdWxUWFYoYm9keS5tX3hmMCwgYXAsIHNfcDEpO1xuICAgICAgaWYgKGZpeHR1cmUuR2V0U2hhcGUoKS5HZXRUeXBlKCkgPT09IGIyU2hhcGVUeXBlLmVfY2lyY2xlU2hhcGUpIHtcbiAgICAgICAgLy8gTWFrZSByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAgICAgICAgLy8vcDEgLT0gYm9keS5HZXRMb2NhbENlbnRlcigpO1xuICAgICAgICBwMS5TZWxmU3ViKGJvZHkuR2V0TG9jYWxDZW50ZXIoKSk7XG4gICAgICAgIC8vIFJlLWFwcGx5IHJvdGF0aW9uIGFib3V0IHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZVxuICAgICAgICAvLy9wMSA9IGIyTXVsKGJvZHkubV94ZjAucSwgcDEpO1xuICAgICAgICBiMlJvdC5NdWxSVihib2R5Lm1feGYwLnEsIHAxLCBwMSk7XG4gICAgICAgIC8vIFN1YnRyYWN0IHJvdGF0aW9uIG9mIHRoZSBjdXJyZW50IGZyYW1lXG4gICAgICAgIC8vL3AxID0gYjJNdWxUKGJvZHkubV94Zi5xLCBwMSk7XG4gICAgICAgIGIyUm90Lk11bFRSVihib2R5Lm1feGYucSwgcDEsIHAxKTtcbiAgICAgICAgLy8gUmV0dXJuIHRvIGxvY2FsIHNwYWNlXG4gICAgICAgIC8vL3AxICs9IGJvZHkuR2V0TG9jYWxDZW50ZXIoKTtcbiAgICAgICAgcDEuU2VsZkFkZChib2R5LkdldExvY2FsQ2VudGVyKCkpO1xuICAgICAgfVxuICAgICAgLy8gUmV0dXJuIHRvIGdsb2JhbCBzcGFjZSBhbmQgYXBwbHkgcm90YXRpb24gb2YgY3VycmVudCBmcmFtZVxuICAgICAgLy8vaW5wdXQucDEgPSBiMk11bChib2R5Lm1feGYsIHAxKTtcbiAgICAgIGIyVHJhbnNmb3JtLk11bFhWKGJvZHkubV94ZiwgcDEsIGlucHV0LnAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8vaW5wdXQucDEgPSBhcDtcbiAgICAgIGlucHV0LnAxLkNvcHkoYXApO1xuICAgIH1cbiAgICAvLy9pbnB1dC5wMiA9IGFwICsgbV9zdGVwLmR0ICogYXY7XG4gICAgYjJWZWMyLkFkZFZNdWxTVihhcCwgdGhpcy5tX3N0ZXAuZHQsIGF2LCBpbnB1dC5wMik7XG4gICAgaW5wdXQubWF4RnJhY3Rpb24gPSAxO1xuICAgIGlmIChmaXh0dXJlLlJheUNhc3Qob3V0cHV0LCBpbnB1dCwgY2hpbGRJbmRleCkpIHtcbiAgICAgIGNvbnN0IG4gPSBvdXRwdXQubm9ybWFsO1xuICAgICAgLy8vYjJWZWMyIHAgPSAoMSAtIG91dHB1dC5mcmFjdGlvbikgKiBpbnB1dC5wMSArIG91dHB1dC5mcmFjdGlvbiAqIGlucHV0LnAyICsgYjJfbGluZWFyU2xvcCAqIG47XG4gICAgICBjb25zdCBwID0gc19wO1xuICAgICAgcC54ID0gKDEgLSBvdXRwdXQuZnJhY3Rpb24pICogaW5wdXQucDEueCArIG91dHB1dC5mcmFjdGlvbiAqIGlucHV0LnAyLnggKyBiMl9saW5lYXJTbG9wICogbi54O1xuICAgICAgcC55ID0gKDEgLSBvdXRwdXQuZnJhY3Rpb24pICogaW5wdXQucDEueSArIG91dHB1dC5mcmFjdGlvbiAqIGlucHV0LnAyLnkgKyBiMl9saW5lYXJTbG9wICogbi55O1xuICAgICAgLy8vYjJWZWMyIHYgPSBtX3N0ZXAuaW52X2R0ICogKHAgLSBhcCk7XG4gICAgICBjb25zdCB2ID0gc192O1xuICAgICAgdi54ID0gdGhpcy5tX3N0ZXAuaW52X2R0ICogKHAueCAtIGFwLngpO1xuICAgICAgdi55ID0gdGhpcy5tX3N0ZXAuaW52X2R0ICogKHAueSAtIGFwLnkpO1xuICAgICAgLy8vbV9zeXN0ZW0ubV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2FdID0gdjtcbiAgICAgIHRoaXMubV9zeXN0ZW0ubV92ZWxvY2l0eUJ1ZmZlci5kYXRhW2FdLkNvcHkodik7XG4gICAgICAvLy9iMlZlYzIgZiA9IG1fc3RlcC5pbnZfZHQgKiBtX3N5c3RlbS5HZXRQYXJ0aWNsZU1hc3MoKSAqIChhdiAtIHYpO1xuICAgICAgY29uc3QgZiA9IHNfZjtcbiAgICAgIGYueCA9IHRoaXMubV9zdGVwLmludl9kdCAqIHRoaXMubV9zeXN0ZW0uR2V0UGFydGljbGVNYXNzKCkgKiAoYXYueCAtIHYueCk7XG4gICAgICBmLnkgPSB0aGlzLm1fc3RlcC5pbnZfZHQgKiB0aGlzLm1fc3lzdGVtLkdldFBhcnRpY2xlTWFzcygpICogKGF2LnkgLSB2LnkpO1xuICAgICAgdGhpcy5tX3N5c3RlbS5QYXJ0aWNsZUFwcGx5Rm9yY2UoYSwgZik7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUmVwb3J0Rml4dHVyZUFuZFBhcnRpY2xlX3NfcDEgPSBuZXcgYjJWZWMyKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUmVwb3J0Rml4dHVyZUFuZFBhcnRpY2xlX3Nfb3V0cHV0ID0gbmV3IGIyUmF5Q2FzdE91dHB1dCgpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX2lucHV0ID0gbmV3IGIyUmF5Q2FzdElucHV0KCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUmVwb3J0Rml4dHVyZUFuZFBhcnRpY2xlX3NfcCA9IG5ldyBiMlZlYzIoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSZXBvcnRGaXh0dXJlQW5kUGFydGljbGVfc192ID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJlcG9ydEZpeHR1cmVBbmRQYXJ0aWNsZV9zX2YgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcHVibGljIFJlcG9ydFBhcnRpY2xlKHN5c3RlbTogYjJQYXJ0aWNsZVN5c3RlbSwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyAjZW5kaWZcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFMQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFuRkE7QUF1RkE7QUFBQTtBQUVBO0FBQUE7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFoQ0E7QUFrQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxREE7QUFuREE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTFEQTtBQTREQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFQQTtBQVNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTkE7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBYkE7QUFlQTtBQUFBO0FBUUE7QUFNQTtBQU1BO0FBS0E7QUFTQTtBQU1BO0FBTUE7QUFNQTtBQU1BO0FBTUE7QUFNQTtBQU9BO0FBUUE7QUFNQTtBQU1BO0FBUUE7QUFPQTtBQU1BO0FBUUE7QUFPQTtBQVVBO0FBOEJBO0FBNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUE3S0E7QUErS0E7QUE0SEE7QUEzSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQU9BO0FBS0E7QUFPQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUlBO0FBTUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUE4dkVBO0FBd0lBO0FBOTJFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQUE7QUFDQTtBQU1BO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFtQkE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBV0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQWNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBbUJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBYUE7QUFXQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFJQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBZUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFnQkE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQW1CQTtBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUtBO0FBR0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVUE7QUFDQTtBQUNBO0FBU0E7QUFLQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBdjdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNQQTtBQThEQTtBQTJoQkE7QUE4UkE7QUFTQTtBQW1FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOEJBO0FBS0E7QUFLQTtBQUtBO0FBRUE7QUE4S0E7QUFDQTtBQUNBO0FBd0JBO0FBQ0E7QUErT0E7QUFDQTtBQUNBO0FBbVZBO0FBeVBBO0FBb0dBO0FBb0NBO0FBeUJBO0FBeUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNJQTtBQXFEQTtBQUNBO0FBNkVBO0FBQ0E7QUFDQTtBQUNBO0FBa0NBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUE4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTtBQXFEQTtBQUNBO0FBQ0E7QUE0Q0E7QUFDQTtBQXdCQTtBQXdDQTtBQXNCQTtBQXFsQkE7QUFDQTtBQUNBO0FBa0lBO0FBQUE7QUEvaElBO0FBaWlJQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBSEE7QUFBQTtBQUNBOzs7QUFEQTtBQUdBO0FBQUE7QUFMQTtBQU9BO0FBQUE7QUFDQTtBQUNBO0FBVUE7QUFUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBWkE7QUFjQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTdDQTtBQStDQTtBQUFBO0FBUUE7QUFLQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBbEJBO0FBdUJBO0FBQUE7QUFnQ0E7QUEvQkE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQWhDQTtBQWtDQTtBQUdBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBUEE7QUFTQTtBQUFBO0FBQUE7O0FBUUE7QUFQQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQVJBO0FBVUE7QUFHQTtBQUZBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBUEE7QUFTQTtBQUFBO0FBQUE7O0FBU0E7QUFSQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQVRBO0FBV0E7QUFBQTtBQXVCQTtBQWpCQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBdkJBO0FBeUJBO0FBQUE7QUFPQTtBQUFBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFuQ0E7QUFxQ0E7QUFBQTtBQUdBO0FBQUE7QUFGQTtBQUlBOztBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF2QkE7QUF5QkE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQU9BO0FBTEE7QUFDQTs7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBdEZBO0FBd0ZBO0FBQUE7QUFFQTtBQUFBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBVEE7QUFXQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBREE7QUFHQTs7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF2REE7QUF5REE7QUFBQTtBQUVBO0FBQUE7QUFFQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUE3RUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/box2d/particle/b2_particle_system.ts\n");

/***/ }),

/***/ "./src/box2d/particle/b2_stack_queue.ts":
/*!**********************************************!*\
  !*** ./src/box2d/particle/b2_stack_queue.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2StackQueue = void 0;\nvar b2StackQueue = (function () {\n    function b2StackQueue(capacity) {\n        this.m_buffer = [];\n        this.m_front = 0;\n        this.m_back = 0;\n        this.m_buffer.fill(null, 0, capacity);\n    }\n    Object.defineProperty(b2StackQueue.prototype, \"m_capacity\", {\n        get: function () { return this.m_buffer.length; },\n        enumerable: false,\n        configurable: true\n    });\n    b2StackQueue.prototype.Push = function (item) {\n        if (this.m_back >= this.m_capacity) {\n            for (var i = this.m_front; i < this.m_back; i++) {\n                this.m_buffer[i - this.m_front] = this.m_buffer[i];\n            }\n            this.m_back -= this.m_front;\n            this.m_front = 0;\n        }\n        this.m_buffer[this.m_back] = item;\n        this.m_back++;\n    };\n    b2StackQueue.prototype.Pop = function () {\n        this.m_buffer[this.m_front] = null;\n        this.m_front++;\n    };\n    b2StackQueue.prototype.Empty = function () {\n        return this.m_front === this.m_back;\n    };\n    b2StackQueue.prototype.Front = function () {\n        var item = this.m_buffer[this.m_front];\n        if (!item) {\n            throw new Error();\n        }\n        return item;\n    };\n    return b2StackQueue;\n}());\nexports.b2StackQueue = b2StackQueue;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvcGFydGljbGUvYjJfc3RhY2tfcXVldWUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm94MmQvcGFydGljbGUvYjJfc3RhY2tfcXVldWUudHM/NTE2MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDEzIEdvb2dsZSwgSW5jLlxuICpcbiAqIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4gKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4gKiBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuICogUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4gKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4gKiBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4gKiAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuICogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbiAqIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuICogYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbiAqIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4gKiBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4gKiAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuICovXG5cbi8vICNpZiBCMl9FTkFCTEVfUEFSVElDTEVcblxuLy8gREVCVUc6IGltcG9ydCB7IGIyQXNzZXJ0IH0gZnJvbSBcIi4uL2NvbW1vbi9iMl9zZXR0aW5nc1wiO1xuXG5leHBvcnQgY2xhc3MgYjJTdGFja1F1ZXVlPFQ+IHtcbiAgcHVibGljIHJlYWRvbmx5IG1fYnVmZmVyOiBBcnJheTxUIHwgbnVsbD4gPSBbXTtcbiAgcHVibGljIG1fZnJvbnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBtX2JhY2s6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBnZXQgbV9jYXBhY2l0eSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5tX2J1ZmZlci5sZW5ndGg7IH1cbiAgY29uc3RydWN0b3IoY2FwYWNpdHk6IG51bWJlcikge1xuICAgIHRoaXMubV9idWZmZXIuZmlsbChudWxsLCAwLCBjYXBhY2l0eSk7XG4gIH1cbiAgcHVibGljIFB1c2goaXRlbTogVCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1fYmFjayA+PSB0aGlzLm1fY2FwYWNpdHkpIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLm1fZnJvbnQ7IGkgPCB0aGlzLm1fYmFjazsgaSsrKSB7XG4gICAgICAgIHRoaXMubV9idWZmZXJbaSAtIHRoaXMubV9mcm9udF0gPSB0aGlzLm1fYnVmZmVyW2ldO1xuICAgICAgfVxuICAgICAgdGhpcy5tX2JhY2sgLT0gdGhpcy5tX2Zyb250O1xuICAgICAgdGhpcy5tX2Zyb250ID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2J1ZmZlclt0aGlzLm1fYmFja10gPSBpdGVtO1xuICAgIHRoaXMubV9iYWNrKys7XG4gIH1cbiAgcHVibGljIFBvcCgpOiB2b2lkIHtcbiAgICAvLyBERUJVRzogYjJBc3NlcnQodGhpcy5tX2Zyb250IDwgdGhpcy5tX2JhY2spO1xuICAgIHRoaXMubV9idWZmZXJbdGhpcy5tX2Zyb250XSA9IG51bGw7XG4gICAgdGhpcy5tX2Zyb250Kys7XG4gIH1cbiAgcHVibGljIEVtcHR5KCk6IGJvb2xlYW4ge1xuICAgIC8vIERFQlVHOiBiMkFzc2VydCh0aGlzLm1fZnJvbnQgPD0gdGhpcy5tX2JhY2spO1xuICAgIHJldHVybiB0aGlzLm1fZnJvbnQgPT09IHRoaXMubV9iYWNrO1xuICB9XG4gIHB1YmxpYyBGcm9udCgpOiBUIHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5tX2J1ZmZlclt0aGlzLm1fZnJvbnRdO1xuICAgIGlmICghaXRlbSkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIHJldHVybiBpdGVtO1xuICB9XG59XG5cbi8vICNlbmRpZlxuIl0sIm1hcHBpbmdzIjoiOzs7QUFzQkE7QUFLQTtBQUpBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFIQTtBQUFBOzs7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWpDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/box2d/particle/b2_stack_queue.ts\n");

/***/ }),

/***/ "./src/box2d/particle/b2_voronoi_diagram.ts":
/*!**************************************************!*\
  !*** ./src/box2d/particle/b2_voronoi_diagram.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.b2VoronoiDiagram_Task = exports.b2VoronoiDiagram_Generator = exports.b2VoronoiDiagram = void 0;\nvar b2_settings_1 = __webpack_require__(/*! ../common/b2_settings */ \"./src/box2d/common/b2_settings.ts\");\nvar b2_math_1 = __webpack_require__(/*! ../common/b2_math */ \"./src/box2d/common/b2_math.ts\");\nvar b2_stack_queue_1 = __webpack_require__(/*! ./b2_stack_queue */ \"./src/box2d/particle/b2_stack_queue.ts\");\nvar b2VoronoiDiagram = (function () {\n    function b2VoronoiDiagram(generatorCapacity) {\n        this.m_generatorCapacity = 0;\n        this.m_generatorCount = 0;\n        this.m_countX = 0;\n        this.m_countY = 0;\n        this.m_diagram = [];\n        this.m_generatorBuffer = b2_settings_1.b2MakeArray(generatorCapacity, function (index) { return new b2VoronoiDiagram_Generator(); });\n        this.m_generatorCapacity = generatorCapacity;\n    }\n    b2VoronoiDiagram.prototype.AddGenerator = function (center, tag, necessary) {\n        var g = this.m_generatorBuffer[this.m_generatorCount++];\n        g.center.Copy(center);\n        g.tag = tag;\n        g.necessary = necessary;\n    };\n    b2VoronoiDiagram.prototype.Generate = function (radius, margin) {\n        var inverseRadius = 1 / radius;\n        var lower = new b2_math_1.b2Vec2(+b2_settings_1.b2_maxFloat, +b2_settings_1.b2_maxFloat);\n        var upper = new b2_math_1.b2Vec2(-b2_settings_1.b2_maxFloat, -b2_settings_1.b2_maxFloat);\n        var necessary_count = 0;\n        for (var k = 0; k < this.m_generatorCount; k++) {\n            var g = this.m_generatorBuffer[k];\n            if (g.necessary) {\n                b2_math_1.b2Vec2.MinV(lower, g.center, lower);\n                b2_math_1.b2Vec2.MaxV(upper, g.center, upper);\n                ++necessary_count;\n            }\n        }\n        if (necessary_count === 0) {\n            this.m_countX = 0;\n            this.m_countY = 0;\n            return;\n        }\n        lower.x -= margin;\n        lower.y -= margin;\n        upper.x += margin;\n        upper.y += margin;\n        this.m_countX = 1 + Math.floor(inverseRadius * (upper.x - lower.x));\n        this.m_countY = 1 + Math.floor(inverseRadius * (upper.y - lower.y));\n        this.m_diagram = [];\n        var queue = new b2_stack_queue_1.b2StackQueue(4 * this.m_countX * this.m_countY);\n        for (var k = 0; k < this.m_generatorCount; k++) {\n            var g = this.m_generatorBuffer[k];\n            g.center.SelfSub(lower).SelfMul(inverseRadius);\n            var x = Math.floor(g.center.x);\n            var y = Math.floor(g.center.y);\n            if (x >= 0 && y >= 0 && x < this.m_countX && y < this.m_countY) {\n                queue.Push(new b2VoronoiDiagram_Task(x, y, x + y * this.m_countX, g));\n            }\n        }\n        while (!queue.Empty()) {\n            var task = queue.Front();\n            var x = task.m_x;\n            var y = task.m_y;\n            var i = task.m_i;\n            var g = task.m_generator;\n            queue.Pop();\n            if (!this.m_diagram[i]) {\n                this.m_diagram[i] = g;\n                if (x > 0) {\n                    queue.Push(new b2VoronoiDiagram_Task(x - 1, y, i - 1, g));\n                }\n                if (y > 0) {\n                    queue.Push(new b2VoronoiDiagram_Task(x, y - 1, i - this.m_countX, g));\n                }\n                if (x < this.m_countX - 1) {\n                    queue.Push(new b2VoronoiDiagram_Task(x + 1, y, i + 1, g));\n                }\n                if (y < this.m_countY - 1) {\n                    queue.Push(new b2VoronoiDiagram_Task(x, y + 1, i + this.m_countX, g));\n                }\n            }\n        }\n        for (var y = 0; y < this.m_countY; y++) {\n            for (var x = 0; x < this.m_countX - 1; x++) {\n                var i = x + y * this.m_countX;\n                var a = this.m_diagram[i];\n                var b = this.m_diagram[i + 1];\n                if (a !== b) {\n                    queue.Push(new b2VoronoiDiagram_Task(x, y, i, b));\n                    queue.Push(new b2VoronoiDiagram_Task(x + 1, y, i + 1, a));\n                }\n            }\n        }\n        for (var y = 0; y < this.m_countY - 1; y++) {\n            for (var x = 0; x < this.m_countX; x++) {\n                var i = x + y * this.m_countX;\n                var a = this.m_diagram[i];\n                var b = this.m_diagram[i + this.m_countX];\n                if (a !== b) {\n                    queue.Push(new b2VoronoiDiagram_Task(x, y, i, b));\n                    queue.Push(new b2VoronoiDiagram_Task(x, y + 1, i + this.m_countX, a));\n                }\n            }\n        }\n        while (!queue.Empty()) {\n            var task = queue.Front();\n            var x = task.m_x;\n            var y = task.m_y;\n            var i = task.m_i;\n            var k = task.m_generator;\n            queue.Pop();\n            var a = this.m_diagram[i];\n            var b = k;\n            if (a !== b) {\n                var ax = a.center.x - x;\n                var ay = a.center.y - y;\n                var bx = b.center.x - x;\n                var by = b.center.y - y;\n                var a2 = ax * ax + ay * ay;\n                var b2 = bx * bx + by * by;\n                if (a2 > b2) {\n                    this.m_diagram[i] = b;\n                    if (x > 0) {\n                        queue.Push(new b2VoronoiDiagram_Task(x - 1, y, i - 1, b));\n                    }\n                    if (y > 0) {\n                        queue.Push(new b2VoronoiDiagram_Task(x, y - 1, i - this.m_countX, b));\n                    }\n                    if (x < this.m_countX - 1) {\n                        queue.Push(new b2VoronoiDiagram_Task(x + 1, y, i + 1, b));\n                    }\n                    if (y < this.m_countY - 1) {\n                        queue.Push(new b2VoronoiDiagram_Task(x, y + 1, i + this.m_countX, b));\n                    }\n                }\n            }\n        }\n    };\n    b2VoronoiDiagram.prototype.GetNodes = function (callback) {\n        for (var y = 0; y < this.m_countY - 1; y++) {\n            for (var x = 0; x < this.m_countX - 1; x++) {\n                var i = x + y * this.m_countX;\n                var a = this.m_diagram[i];\n                var b = this.m_diagram[i + 1];\n                var c = this.m_diagram[i + this.m_countX];\n                var d = this.m_diagram[i + 1 + this.m_countX];\n                if (b !== c) {\n                    if (a !== b && a !== c &&\n                        (a.necessary || b.necessary || c.necessary)) {\n                        callback(a.tag, b.tag, c.tag);\n                    }\n                    if (d !== b && d !== c &&\n                        (a.necessary || b.necessary || c.necessary)) {\n                        callback(b.tag, d.tag, c.tag);\n                    }\n                }\n            }\n        }\n    };\n    return b2VoronoiDiagram;\n}());\nexports.b2VoronoiDiagram = b2VoronoiDiagram;\nvar b2VoronoiDiagram_Generator = (function () {\n    function b2VoronoiDiagram_Generator() {\n        this.center = new b2_math_1.b2Vec2();\n        this.tag = 0;\n        this.necessary = false;\n    }\n    return b2VoronoiDiagram_Generator;\n}());\nexports.b2VoronoiDiagram_Generator = b2VoronoiDiagram_Generator;\nvar b2VoronoiDiagram_Task = (function () {\n    function b2VoronoiDiagram_Task(x, y, i, g) {\n        this.m_x = x;\n        this.m_y = y;\n        this.m_i = i;\n        this.m_generator = g;\n    }\n    return b2VoronoiDiagram_Task;\n}());\nexports.b2VoronoiDiagram_Task = b2VoronoiDiagram_Task;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYm94MmQvcGFydGljbGUvYjJfdm9yb25vaV9kaWFncmFtLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JveDJkL3BhcnRpY2xlL2IyX3Zvcm9ub2lfZGlhZ3JhbS50cz8xODRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMgR29vZ2xlLCBJbmMuXG4gKlxuICogVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbiAqIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbiAqIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4gKiBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbiAqIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbiAqIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbiAqIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4gKiBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuICogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4gKiBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuICogMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbiAqIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbiAqIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4gKi9cblxuLy8gI2lmIEIyX0VOQUJMRV9QQVJUSUNMRVxuXG4vLyBERUJVRzogaW1wb3J0IHsgYjJBc3NlcnQgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMl9tYXhGbG9hdCwgYjJNYWtlQXJyYXkgfSBmcm9tIFwiLi4vY29tbW9uL2IyX3NldHRpbmdzXCI7XG5pbXBvcnQgeyBiMlZlYzIgfSBmcm9tIFwiLi4vY29tbW9uL2IyX21hdGhcIjtcbmltcG9ydCB7IGIyU3RhY2tRdWV1ZSB9IGZyb20gXCIuL2IyX3N0YWNrX3F1ZXVlXCI7XG5cbi8qKlxuICogQSBmaWVsZCByZXByZXNlbnRpbmcgdGhlIG5lYXJlc3QgZ2VuZXJhdG9yIGZyb20gZWFjaCBwb2ludC5cbiAqL1xuZXhwb3J0IGNsYXNzIGIyVm9yb25vaURpYWdyYW0ge1xuICBwdWJsaWMgbV9nZW5lcmF0b3JCdWZmZXI6IGIyVm9yb25vaURpYWdyYW1fR2VuZXJhdG9yW107XG4gIHB1YmxpYyBtX2dlbmVyYXRvckNhcGFjaXR5ID0gMDtcbiAgcHVibGljIG1fZ2VuZXJhdG9yQ291bnQgPSAwO1xuICBwdWJsaWMgbV9jb3VudFggPSAwO1xuICBwdWJsaWMgbV9jb3VudFkgPSAwO1xuICBwdWJsaWMgbV9kaWFncmFtOiBiMlZvcm9ub2lEaWFncmFtX0dlbmVyYXRvcltdID0gW107XG5cbiAgY29uc3RydWN0b3IoZ2VuZXJhdG9yQ2FwYWNpdHk6IG51bWJlcikge1xuICAgIHRoaXMubV9nZW5lcmF0b3JCdWZmZXIgPSBiMk1ha2VBcnJheShnZW5lcmF0b3JDYXBhY2l0eSwgKGluZGV4KSA9PiBuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9HZW5lcmF0b3IoKSk7XG4gICAgdGhpcy5tX2dlbmVyYXRvckNhcGFjaXR5ID0gZ2VuZXJhdG9yQ2FwYWNpdHk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgZ2VuZXJhdG9yLlxuICAgKlxuICAgKiBAcGFyYW0gY2VudGVyIHRoZSBwb3NpdGlvbiBvZiB0aGUgZ2VuZXJhdG9yLlxuICAgKiBAcGFyYW0gdGFnIGEgdGFnIHVzZWQgdG8gaWRlbnRpZnkgdGhlIGdlbmVyYXRvciBpbiBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAqIEBwYXJhbSBuZWNlc3Nhcnkgd2hldGhlciB0byBjYWxsYmFjayBmb3Igbm9kZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnZW5lcmF0b3IuXG4gICAqL1xuICBwdWJsaWMgQWRkR2VuZXJhdG9yKGNlbnRlcjogYjJWZWMyLCB0YWc6IG51bWJlciwgbmVjZXNzYXJ5OiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gREVCVUc6IGIyQXNzZXJ0KHRoaXMubV9nZW5lcmF0b3JDb3VudCA8IHRoaXMubV9nZW5lcmF0b3JDYXBhY2l0eSk7XG4gICAgY29uc3QgZyA9IHRoaXMubV9nZW5lcmF0b3JCdWZmZXJbdGhpcy5tX2dlbmVyYXRvckNvdW50KytdO1xuICAgIGcuY2VudGVyLkNvcHkoY2VudGVyKTtcbiAgICBnLnRhZyA9IHRhZztcbiAgICBnLm5lY2Vzc2FyeSA9IG5lY2Vzc2FyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB0aGUgVm9yb25vaSBkaWFncmFtLiBJdCBpcyByYXN0ZXJpemVkIHdpdGggYSBnaXZlblxuICAgKiBpbnRlcnZhbCBpbiB0aGUgc2FtZSByYW5nZSBhcyB0aGUgbmVjZXNzYXJ5IGdlbmVyYXRvcnMgZXhpc3QuXG4gICAqXG4gICAqIEBwYXJhbSByYWRpdXMgdGhlIGludGVydmFsIG9mIHRoZSBkaWFncmFtLlxuICAgKiBAcGFyYW0gbWFyZ2luIG1hcmdpbiBmb3Igd2hpY2ggdGhlIHJhbmdlIG9mIHRoZSBkaWFncmFtIGlzIGV4dGVuZGVkLlxuICAgKi9cbiAgcHVibGljIEdlbmVyYXRlKHJhZGl1czogbnVtYmVyLCBtYXJnaW46IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGludmVyc2VSYWRpdXMgPSAxIC8gcmFkaXVzO1xuICAgIGNvbnN0IGxvd2VyID0gbmV3IGIyVmVjMigrYjJfbWF4RmxvYXQsICtiMl9tYXhGbG9hdCk7XG4gICAgY29uc3QgdXBwZXIgPSBuZXcgYjJWZWMyKC1iMl9tYXhGbG9hdCwgLWIyX21heEZsb2F0KTtcbiAgICBsZXQgbmVjZXNzYXJ5X2NvdW50ID0gMDtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubV9nZW5lcmF0b3JDb3VudDsgaysrKSB7XG4gICAgICBjb25zdCBnID0gdGhpcy5tX2dlbmVyYXRvckJ1ZmZlcltrXTtcbiAgICAgIGlmIChnLm5lY2Vzc2FyeSkge1xuICAgICAgICBiMlZlYzIuTWluVihsb3dlciwgZy5jZW50ZXIsIGxvd2VyKTtcbiAgICAgICAgYjJWZWMyLk1heFYodXBwZXIsIGcuY2VudGVyLCB1cHBlcik7XG4gICAgICAgICsrbmVjZXNzYXJ5X2NvdW50O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmVjZXNzYXJ5X2NvdW50ID09PSAwKSB7XG4gICAgICAvLy9kZWJ1Z2dlcjtcbiAgICAgIHRoaXMubV9jb3VudFggPSAwO1xuICAgICAgdGhpcy5tX2NvdW50WSA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxvd2VyLnggLT0gbWFyZ2luO1xuICAgIGxvd2VyLnkgLT0gbWFyZ2luO1xuICAgIHVwcGVyLnggKz0gbWFyZ2luO1xuICAgIHVwcGVyLnkgKz0gbWFyZ2luO1xuICAgIHRoaXMubV9jb3VudFggPSAxICsgTWF0aC5mbG9vcihpbnZlcnNlUmFkaXVzICogKHVwcGVyLnggLSBsb3dlci54KSk7XG4gICAgdGhpcy5tX2NvdW50WSA9IDEgKyBNYXRoLmZsb29yKGludmVyc2VSYWRpdXMgKiAodXBwZXIueSAtIGxvd2VyLnkpKTtcbiAgICB0aGlzLm1fZGlhZ3JhbSA9IFtdOyAvLyBiMk1ha2VBcnJheSh0aGlzLm1fY291bnRYICogdGhpcy5tX2NvdW50WSwgKGluZGV4KSA9PiBudWxsKTtcblxuICAgIC8vICg0ICogbV9jb3VudFggKiBtX2NvdW50WSkgaXMgdGhlIHF1ZXVlIGNhcGFjaXR5IHRoYXQgaXMgZXhwZXJpbWVudGFsbHlcbiAgICAvLyBrbm93biB0byBiZSBuZWNlc3NhcnkgYW5kIHN1ZmZpY2llbnQgZm9yIGdlbmVyYWwgcGFydGljbGUgZGlzdHJpYnV0aW9ucy5cbiAgICBjb25zdCBxdWV1ZSA9IG5ldyBiMlN0YWNrUXVldWU8YjJWb3Jvbm9pRGlhZ3JhbV9UYXNrPig0ICogdGhpcy5tX2NvdW50WCAqIHRoaXMubV9jb3VudFkpO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5tX2dlbmVyYXRvckNvdW50OyBrKyspIHtcbiAgICAgIGNvbnN0IGcgPSB0aGlzLm1fZ2VuZXJhdG9yQnVmZmVyW2tdO1xuICAgICAgLy8vICBnLmNlbnRlciA9IGludmVyc2VSYWRpdXMgKiAoZy5jZW50ZXIgLSBsb3dlcik7XG4gICAgICBnLmNlbnRlci5TZWxmU3ViKGxvd2VyKS5TZWxmTXVsKGludmVyc2VSYWRpdXMpO1xuICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoZy5jZW50ZXIueCk7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihnLmNlbnRlci55KTtcbiAgICAgIGlmICh4ID49IDAgJiYgeSA+PSAwICYmIHggPCB0aGlzLm1fY291bnRYICYmIHkgPCB0aGlzLm1fY291bnRZKSB7XG4gICAgICAgIHF1ZXVlLlB1c2gobmV3IGIyVm9yb25vaURpYWdyYW1fVGFzayh4LCB5LCB4ICsgeSAqIHRoaXMubV9jb3VudFgsIGcpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKCFxdWV1ZS5FbXB0eSgpKSB7XG4gICAgICBjb25zdCB0YXNrID0gcXVldWUuRnJvbnQoKTtcbiAgICAgIGNvbnN0IHggPSB0YXNrLm1feDtcbiAgICAgIGNvbnN0IHkgPSB0YXNrLm1feTtcbiAgICAgIGNvbnN0IGkgPSB0YXNrLm1faTtcbiAgICAgIGNvbnN0IGcgPSB0YXNrLm1fZ2VuZXJhdG9yO1xuICAgICAgcXVldWUuUG9wKCk7XG4gICAgICBpZiAoIXRoaXMubV9kaWFncmFtW2ldKSB7XG4gICAgICAgIHRoaXMubV9kaWFncmFtW2ldID0gZztcbiAgICAgICAgaWYgKHggPiAwKSB7XG4gICAgICAgICAgcXVldWUuUHVzaChuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9UYXNrKHggLSAxLCB5LCBpIC0gMSwgZykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5ID4gMCkge1xuICAgICAgICAgIHF1ZXVlLlB1c2gobmV3IGIyVm9yb25vaURpYWdyYW1fVGFzayh4LCB5IC0gMSwgaSAtIHRoaXMubV9jb3VudFgsIGcpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeCA8IHRoaXMubV9jb3VudFggLSAxKSB7XG4gICAgICAgICAgcXVldWUuUHVzaChuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9UYXNrKHggKyAxLCB5LCBpICsgMSwgZykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5IDwgdGhpcy5tX2NvdW50WSAtIDEpIHtcbiAgICAgICAgICBxdWV1ZS5QdXNoKG5ldyBiMlZvcm9ub2lEaWFncmFtX1Rhc2soeCwgeSArIDEsIGkgKyB0aGlzLm1fY291bnRYLCBnKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLm1fY291bnRZOyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5tX2NvdW50WCAtIDE7IHgrKykge1xuICAgICAgICBjb25zdCBpID0geCArIHkgKiB0aGlzLm1fY291bnRYO1xuICAgICAgICBjb25zdCBhID0gdGhpcy5tX2RpYWdyYW1baV07XG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLm1fZGlhZ3JhbVtpICsgMV07XG4gICAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgICAgcXVldWUuUHVzaChuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9UYXNrKHgsIHksIGksIGIpKTtcbiAgICAgICAgICBxdWV1ZS5QdXNoKG5ldyBiMlZvcm9ub2lEaWFncmFtX1Rhc2soeCArIDEsIHksIGkgKyAxLCBhKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLm1fY291bnRZIC0gMTsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMubV9jb3VudFg7IHgrKykge1xuICAgICAgICBjb25zdCBpID0geCArIHkgKiB0aGlzLm1fY291bnRYO1xuICAgICAgICBjb25zdCBhID0gdGhpcy5tX2RpYWdyYW1baV07XG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLm1fZGlhZ3JhbVtpICsgdGhpcy5tX2NvdW50WF07XG4gICAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgICAgcXVldWUuUHVzaChuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9UYXNrKHgsIHksIGksIGIpKTtcbiAgICAgICAgICBxdWV1ZS5QdXNoKG5ldyBiMlZvcm9ub2lEaWFncmFtX1Rhc2soeCwgeSArIDEsIGkgKyB0aGlzLm1fY291bnRYLCBhKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKCFxdWV1ZS5FbXB0eSgpKSB7XG4gICAgICBjb25zdCB0YXNrID0gcXVldWUuRnJvbnQoKTtcbiAgICAgIGNvbnN0IHggPSB0YXNrLm1feDtcbiAgICAgIGNvbnN0IHkgPSB0YXNrLm1feTtcbiAgICAgIGNvbnN0IGkgPSB0YXNrLm1faTtcbiAgICAgIGNvbnN0IGsgPSB0YXNrLm1fZ2VuZXJhdG9yO1xuICAgICAgcXVldWUuUG9wKCk7XG4gICAgICBjb25zdCBhID0gdGhpcy5tX2RpYWdyYW1baV07XG4gICAgICBjb25zdCBiID0gaztcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGNvbnN0IGF4ID0gYS5jZW50ZXIueCAtIHg7XG4gICAgICAgIGNvbnN0IGF5ID0gYS5jZW50ZXIueSAtIHk7XG4gICAgICAgIGNvbnN0IGJ4ID0gYi5jZW50ZXIueCAtIHg7XG4gICAgICAgIGNvbnN0IGJ5ID0gYi5jZW50ZXIueSAtIHk7XG4gICAgICAgIGNvbnN0IGEyID0gYXggKiBheCArIGF5ICogYXk7XG4gICAgICAgIGNvbnN0IGIyID0gYnggKiBieCArIGJ5ICogYnk7XG4gICAgICAgIGlmIChhMiA+IGIyKSB7XG4gICAgICAgICAgdGhpcy5tX2RpYWdyYW1baV0gPSBiO1xuICAgICAgICAgIGlmICh4ID4gMCkge1xuICAgICAgICAgICAgcXVldWUuUHVzaChuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9UYXNrKHggLSAxLCB5LCBpIC0gMSwgYikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoeSA+IDApIHtcbiAgICAgICAgICAgIHF1ZXVlLlB1c2gobmV3IGIyVm9yb25vaURpYWdyYW1fVGFzayh4LCB5IC0gMSwgaSAtIHRoaXMubV9jb3VudFgsIGIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHggPCB0aGlzLm1fY291bnRYIC0gMSkge1xuICAgICAgICAgICAgcXVldWUuUHVzaChuZXcgYjJWb3Jvbm9pRGlhZ3JhbV9UYXNrKHggKyAxLCB5LCBpICsgMSwgYikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoeSA8IHRoaXMubV9jb3VudFkgLSAxKSB7XG4gICAgICAgICAgICBxdWV1ZS5QdXNoKG5ldyBiMlZvcm9ub2lEaWFncmFtX1Rhc2soeCwgeSArIDEsIGkgKyB0aGlzLm1fY291bnRYLCBiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVudW1lcmF0ZSBhbGwgbm9kZXMgdGhhdCBjb250YWluIGF0IGxlYXN0IG9uZSBuZWNlc3NhcnlcbiAgICogZ2VuZXJhdG9yLlxuICAgKi9cbiAgcHVibGljIEdldE5vZGVzKGNhbGxiYWNrOiBiMlZvcm9ub2lEaWFncmFtX05vZGVDYWxsYmFjayk6IHZvaWQge1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5tX2NvdW50WSAtIDE7IHkrKykge1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLm1fY291bnRYIC0gMTsgeCsrKSB7XG4gICAgICAgIGNvbnN0IGkgPSB4ICsgeSAqIHRoaXMubV9jb3VudFg7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLm1fZGlhZ3JhbVtpXTtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMubV9kaWFncmFtW2kgKyAxXTtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMubV9kaWFncmFtW2kgKyB0aGlzLm1fY291bnRYXTtcbiAgICAgICAgY29uc3QgZCA9IHRoaXMubV9kaWFncmFtW2kgKyAxICsgdGhpcy5tX2NvdW50WF07XG4gICAgICAgIGlmIChiICE9PSBjKSB7XG4gICAgICAgICAgaWYgKGEgIT09IGIgJiYgYSAhPT0gYyAmJlxuICAgICAgICAgICAgKGEubmVjZXNzYXJ5IHx8IGIubmVjZXNzYXJ5IHx8IGMubmVjZXNzYXJ5KSkge1xuICAgICAgICAgICAgY2FsbGJhY2soYS50YWcsIGIudGFnLCBjLnRhZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkICE9PSBiICYmIGQgIT09IGMgJiZcbiAgICAgICAgICAgIChhLm5lY2Vzc2FyeSB8fCBiLm5lY2Vzc2FyeSB8fCBjLm5lY2Vzc2FyeSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGIudGFnLCBkLnRhZywgYy50YWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENhbGxiYWNrIHVzZWQgYnkgR2V0Tm9kZXMoKS5cbiAqXG4gKiBSZWNlaXZlIHRhZ3MgZm9yIGdlbmVyYXRvcnMgYXNzb2NpYXRlZCB3aXRoIGEgbm9kZS5cbiAqL1xuZXhwb3J0IHR5cGUgYjJWb3Jvbm9pRGlhZ3JhbV9Ob2RlQ2FsbGJhY2sgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIsIGM6IG51bWJlcikgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIGIyVm9yb25vaURpYWdyYW1fR2VuZXJhdG9yIHtcbiAgcHVibGljIGNlbnRlcjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xuICBwdWJsaWMgdGFnOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgbmVjZXNzYXJ5OiBib29sZWFuID0gZmFsc2U7XG59XG5cbmV4cG9ydCBjbGFzcyBiMlZvcm9ub2lEaWFncmFtX1Rhc2sge1xuICBwdWJsaWMgbV94OiBudW1iZXI7XG4gIHB1YmxpYyBtX3k6IG51bWJlcjtcbiAgcHVibGljIG1faTogbnVtYmVyO1xuICBwdWJsaWMgbV9nZW5lcmF0b3I6IGIyVm9yb25vaURpYWdyYW1fR2VuZXJhdG9yO1xuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgaTogbnVtYmVyLCBnOiBiMlZvcm9ub2lEaWFncmFtX0dlbmVyYXRvcikge1xuICAgIHRoaXMubV94ID0geDtcbiAgICB0aGlzLm1feSA9IHk7XG4gICAgdGhpcy5tX2kgPSBpO1xuICAgIHRoaXMubV9nZW5lcmF0b3IgPSBnO1xuICB9XG59XG5cbi8vICNlbmRpZlxuIl0sIm1hcHBpbmdzIjoiOzs7QUFxQkE7QUFDQTtBQUNBO0FBS0E7QUFRQTtBQU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFTQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBcExBO0FBNkxBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFKQTtBQU1BO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVhBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/box2d/particle/b2_voronoi_diagram.ts\n");

/***/ }),

/***/ "./src/lappdefine.ts":
/*!***************************!*\
  !*** ./src/lappdefine.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RenderTargetHeight = exports.RenderTargetWidth = exports.CubismLoggingLevel = exports.DebugModelLogEnable = exports.DebugTouchLogEnable = exports.DebugLogEnable = exports.PriorityForce = exports.PriorityNormal = exports.PriorityIdle = exports.PriorityNone = exports.HitAreaNameBody = exports.HitAreaNameHead = exports.MotionGroupTapBody = exports.MotionGroupIdle = exports.ModelDirSize = exports.ModelDir = exports.PowerImageName = exports.GearImageName = exports.BackImageName = exports.ResourcesPath = exports.ViewLogicalMaxTop = exports.ViewLogicalMaxBottom = exports.ViewLogicalMaxRight = exports.ViewLogicalMaxLeft = exports.ViewLogicalRight = exports.ViewLogicalLeft = exports.ViewMinScale = exports.ViewMaxScale = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! @framework/live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nexports.ViewMaxScale = 2.0;\nexports.ViewMinScale = 0.1;\nexports.ViewLogicalLeft = -1.0;\nexports.ViewLogicalRight = 1.0;\nexports.ViewLogicalMaxLeft = -2.0;\nexports.ViewLogicalMaxRight = 2.0;\nexports.ViewLogicalMaxBottom = -2.0;\nexports.ViewLogicalMaxTop = 2.0;\nexports.ResourcesPath = '../../res/models/';\nexports.BackImageName = 'back_class_normal.png';\nexports.GearImageName = 'icon_gear.png';\nexports.PowerImageName = 'CloseNormal.png';\nexports.ModelDir = ['++gongkaimo', 'cat_model_miao_pro', 'Senko', 'jinsechangzhifa', 'Rice', 'Hiyori', 'Haru', 'Mark', 'Natori'];\nexports.ModelDirSize = exports.ModelDir.length;\nexports.MotionGroupIdle = 'Idle';\nexports.MotionGroupTapBody = 'TapBody';\nexports.HitAreaNameHead = 'Head';\nexports.HitAreaNameBody = 'Body';\nexports.PriorityNone = 0;\nexports.PriorityIdle = 1;\nexports.PriorityNormal = 2;\nexports.PriorityForce = 3;\nexports.DebugLogEnable = true;\nexports.DebugTouchLogEnable = true;\nexports.DebugModelLogEnable = true;\nexports.CubismLoggingLevel = live2dcubismframework_1.LogLevel.LogLevel_Verbose;\nexports.RenderTargetWidth = window.innerWidth;\nexports.RenderTargetHeight = window.innerHeight;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcGRlZmluZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9sYXBwZGVmaW5lLnRzPzFjM2IiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgTG9nTGV2ZWwgfSBmcm9tICdAZnJhbWV3b3JrL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5cbi8qKlxuICogU2FtcGxlIEFwcOOBp+S9v+eUqOOBmeOCi+WumuaVsFxuICovXG4vLyDnlLvpnaJcbmV4cG9ydCBjb25zdCBWaWV3TWF4U2NhbGUgPSAyLjA7XG5leHBvcnQgY29uc3QgVmlld01pblNjYWxlID0gMC4xO1xuXG5leHBvcnQgY29uc3QgVmlld0xvZ2ljYWxMZWZ0ID0gLTEuMDtcbmV4cG9ydCBjb25zdCBWaWV3TG9naWNhbFJpZ2h0ID0gMS4wO1xuXG5leHBvcnQgY29uc3QgVmlld0xvZ2ljYWxNYXhMZWZ0ID0gLTIuMDtcbmV4cG9ydCBjb25zdCBWaWV3TG9naWNhbE1heFJpZ2h0ID0gMi4wO1xuZXhwb3J0IGNvbnN0IFZpZXdMb2dpY2FsTWF4Qm90dG9tID0gLTIuMDtcbmV4cG9ydCBjb25zdCBWaWV3TG9naWNhbE1heFRvcCA9IDIuMDtcblxuLy8g55u45a++44OR44K5XG5leHBvcnQgY29uc3QgUmVzb3VyY2VzUGF0aCA9ICcuLi8uLi9yZXMvbW9kZWxzLyc7XG5cbi8vIOODouODh+ODq+OBruW+jOOCjeOBq+OBguOCi+iDjOaZr+OBrueUu+WDj+ODleOCoeOCpOODq1xuZXhwb3J0IGNvbnN0IEJhY2tJbWFnZU5hbWUgPSAnYmFja19jbGFzc19ub3JtYWwucG5nJztcblxuLy8g5q2v6LuKXG5leHBvcnQgY29uc3QgR2VhckltYWdlTmFtZSA9ICdpY29uX2dlYXIucG5nJztcblxuLy8g57WC5LqG44Oc44K/44OzXG5leHBvcnQgY29uc3QgUG93ZXJJbWFnZU5hbWUgPSAnQ2xvc2VOb3JtYWwucG5nJztcblxuLy8g44Oi44OH44Or5a6a576pLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDjg6Ljg4fjg6vjgpLphY3nva7jgZfjgZ/jg4fjgqPjg6zjgq/jg4jjg6rlkI3jga7phY3liJdcbi8vIOS/neaMgeebruW9leWQjeWSjG1vZGVsIDMuanNvbueahOWQjeWtl+S4gOiHtFxuZXhwb3J0IGxldCBNb2RlbERpcjogc3RyaW5nW10gPSBbJysrZ29uZ2thaW1vJywnY2F0X21vZGVsX21pYW9fcHJvJywnU2Vua28nLCdqaW5zZWNoYW5nemhpZmEnLCdSaWNlJywnSGl5b3JpJywnSGFydScsICAnTWFyaycsICdOYXRvcmknXTtcbmV4cG9ydCBjb25zdCBNb2RlbERpclNpemU6IG51bWJlciA9IE1vZGVsRGlyLmxlbmd0aDtcblxuLy8g5aSW6YOo5a6a576p44OV44Kh44Kk44Or77yIanNvbu+8ieOBqOWQiOOCj+OBm+OCi1xuZXhwb3J0IGNvbnN0IE1vdGlvbkdyb3VwSWRsZSA9ICdJZGxlJzsgLy8g44Ki44Kk44OJ44Oq44Oz44KwXG5leHBvcnQgY29uc3QgTW90aW9uR3JvdXBUYXBCb2R5ID0gJ1RhcEJvZHknOyAvLyDkvZPjgpLjgr/jg4Pjg5fjgZfjgZ/jgajjgY1cblxuLy8g5aSW6YOo5a6a576p44OV44Kh44Kk44Or77yIanNvbu+8ieOBqOWQiOOCj+OBm+OCi1xuZXhwb3J0IGNvbnN0IEhpdEFyZWFOYW1lSGVhZCA9ICdIZWFkJztcbmV4cG9ydCBjb25zdCBIaXRBcmVhTmFtZUJvZHkgPSAnQm9keSc7XG5cbi8vIOODouODvOOCt+ODp+ODs+OBruWEquWFiOW6puWumuaVsFxuZXhwb3J0IGNvbnN0IFByaW9yaXR5Tm9uZSA9IDA7XG5leHBvcnQgY29uc3QgUHJpb3JpdHlJZGxlID0gMTtcbmV4cG9ydCBjb25zdCBQcmlvcml0eU5vcm1hbCA9IDI7XG5leHBvcnQgY29uc3QgUHJpb3JpdHlGb3JjZSA9IDM7XG5cbi8vIOODh+ODkOODg+OCsOeUqOODreOCsOOBruihqOekuuOCquODl+OCt+ODp+ODs1xuZXhwb3J0IGNvbnN0IERlYnVnTG9nRW5hYmxlID0gdHJ1ZTtcbmV4cG9ydCBjb25zdCBEZWJ1Z1RvdWNoTG9nRW5hYmxlID0gdHJ1ZTtcbmV4cG9ydCBjb25zdCBEZWJ1Z01vZGVsTG9nRW5hYmxlID0gdHJ1ZTtcblxuLy8gRnJhbWV3b3Jr44GL44KJ5Ye65Yqb44GZ44KL44Ot44Kw44Gu44Os44OZ44Or6Kit5a6aXG5leHBvcnQgY29uc3QgQ3ViaXNtTG9nZ2luZ0xldmVsOiBMb2dMZXZlbCA9IExvZ0xldmVsLkxvZ0xldmVsX1ZlcmJvc2U7XG5cbi8vIOODh+ODleOCqeODq+ODiOOBruODrOODs+ODgOODvOOCv+ODvOOCsuODg+ODiOOCteOCpOOCulxuZXhwb3J0IGNvbnN0IFJlbmRlclRhcmdldFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5leHBvcnQgY29uc3QgUmVuZGVyVGFyZ2V0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4iXSwibWFwcGluZ3MiOiI7OztBQU9BO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lappdefine.ts\n");

/***/ }),

/***/ "./src/lappdelegate.ts":
/*!*****************************!*\
  !*** ./src/lappdelegate.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hitModel = exports.LAppDelegate = exports.lAppDelegateEvent = exports.scale = exports.frameBuffer = exports.gl = exports.s_instance = exports.canvas = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! @framework/live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar Csm_CubismFramework = live2dcubismframework_1.Live2DCubismFramework.CubismFramework;\nvar lappview_1 = __webpack_require__(/*! ./lappview */ \"./src/lappview.ts\");\nvar lapppal_1 = __webpack_require__(/*! ./lapppal */ \"./src/lapppal.ts\");\nvar lapptexturemanager_1 = __webpack_require__(/*! ./lapptexturemanager */ \"./src/lapptexturemanager.ts\");\nvar lapplive2dmanager_1 = __webpack_require__(/*! ./lapplive2dmanager */ \"./src/lapplive2dmanager.ts\");\nvar LAppDefine = __importStar(__webpack_require__(/*! ./lappdefine */ \"./src/lappdefine.ts\"));\nvar lappdefine_1 = __webpack_require__(/*! ./lappdefine */ \"./src/lappdefine.ts\");\nvar lstore_1 = __webpack_require__(/*! ./lstore */ \"./src/lstore.ts\");\nexports.canvas = null;\nexports.s_instance = null;\nexports.gl = null;\nexports.frameBuffer = null;\nexports.scale = window.devicePixelRatio;\nexports.lAppDelegateEvent = null;\nvar LAppDelegate = (function () {\n    function LAppDelegate() {\n        this._captured = false;\n        this._mouseX = 0.0;\n        this._mouseY = 0.0;\n        this._isEnd = false;\n        this._cubismOption = new live2dcubismframework_1.Option();\n        this._view = new lappview_1.LAppView();\n        this._textureManager = new lapptexturemanager_1.LAppTextureManager();\n    }\n    LAppDelegate.getInstance = function () {\n        if (exports.s_instance == null) {\n            exports.s_instance = new LAppDelegate();\n        }\n        return exports.s_instance;\n    };\n    LAppDelegate.releaseInstance = function () {\n        if (exports.s_instance != null) {\n            exports.s_instance.release();\n        }\n        exports.s_instance = null;\n    };\n    LAppDelegate.prototype.initDefine = function () {\n        lstore_1.LStore.set('ModelDir', LAppDefine.ModelDir);\n        lstore_1.LStore.set(\"ResourcesPath\", LAppDefine.ResourcesPath);\n    };\n    LAppDelegate.prototype.initialize = function () {\n        this.initDefine();\n        exports.canvas = document.createElement('canvas');\n        this._canvas = exports.canvas;\n        exports.canvas.id = 'live2d';\n        exports.canvas.width = LAppDefine.RenderTargetWidth;\n        exports.canvas.height = LAppDefine.RenderTargetHeight;\n        exports.canvas.style.width = exports.canvas.width + 'px';\n        exports.canvas.style.height = exports.canvas.height + 'px';\n        exports.canvas.width = exports.canvas.width * exports.scale;\n        exports.canvas.height = exports.canvas.height * exports.scale;\n        exports.gl = exports.canvas.getContext('webgl') || exports.canvas.getContext('experimental-webgl');\n        if (!exports.gl) {\n            alert('Cannot initialize WebGL. This browser does not support.');\n            exports.gl = null;\n            document.body.innerHTML =\n                'This browser does not support the <code>&lt;canvas&gt;</code> element.';\n            return false;\n        }\n        document.body.appendChild(exports.canvas);\n        if (!exports.frameBuffer) {\n            exports.frameBuffer = exports.gl.getParameter(exports.gl.FRAMEBUFFER_BINDING);\n        }\n        exports.gl.enable(exports.gl.BLEND);\n        exports.gl.blendFunc(exports.gl.SRC_ALPHA, exports.gl.ONE_MINUS_SRC_ALPHA);\n        var supportTouch = 'ontouchend' in exports.canvas;\n        if (supportTouch) {\n            exports.canvas.ontouchstart = onTouchBegan;\n            exports.canvas.ontouchmove = onTouchMoved;\n            exports.canvas.ontouchend = onTouchEnded;\n            exports.canvas.ontouchcancel = onTouchCancel;\n        }\n        else {\n            exports.canvas.onmousedown = onClickBegan;\n            exports.canvas.onmousemove = onMouseMoved;\n            exports.canvas.onmouseup = onClickEnded;\n            exports.canvas.onmouseenter = onMouseEnter;\n            exports.canvas.onmouseleave = onMouseLeave;\n        }\n        this._view.initialize();\n        this.initializeCubism();\n        return true;\n    };\n    LAppDelegate.prototype.release = function () {\n        this._textureManager.release();\n        this._textureManager = null;\n        this._view.release();\n        this._view = null;\n        lapplive2dmanager_1.LAppLive2DManager.releaseInstance();\n        Csm_CubismFramework.dispose();\n    };\n    LAppDelegate.prototype.run = function () {\n        var _this = this;\n        if (lappdefine_1.DebugLogEnable) {\n            var stats = new Stats();\n            stats.showPanel(0);\n            document.body.appendChild(stats.dom);\n        }\n        var loop = function () {\n            if (lappdefine_1.DebugLogEnable) {\n                stats.begin();\n            }\n            if (exports.s_instance == null) {\n                return;\n            }\n            lapppal_1.LAppPal.updateTime();\n            exports.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n            exports.gl.enable(exports.gl.DEPTH_TEST);\n            exports.gl.depthFunc(exports.gl.LEQUAL);\n            exports.gl.clear(exports.gl.COLOR_BUFFER_BIT | exports.gl.DEPTH_BUFFER_BIT);\n            exports.gl.clearDepth(1.0);\n            exports.gl.enable(exports.gl.BLEND);\n            exports.gl.blendFunc(exports.gl.SRC_ALPHA, exports.gl.ONE_MINUS_SRC_ALPHA);\n            _this._view.render();\n            if (lappdefine_1.DebugLogEnable) {\n                stats.end();\n            }\n            requestAnimationFrame(loop);\n        };\n        loop();\n    };\n    LAppDelegate.prototype.createShader = function () {\n        var vertexShaderId = exports.gl.createShader(exports.gl.VERTEX_SHADER);\n        if (vertexShaderId == null) {\n            lapppal_1.LAppPal.printMessage('failed to create vertexShader');\n            return null;\n        }\n        var vertexShader = 'precision mediump float;' +\n            'attribute vec3 position;' +\n            'attribute vec2 uv;' +\n            'varying vec2 vuv;' +\n            'void main(void)' +\n            '{' +\n            '   gl_Position = vec4(position, 1.0);' +\n            '   vuv = uv;' +\n            '}';\n        exports.gl.shaderSource(vertexShaderId, vertexShader);\n        exports.gl.compileShader(vertexShaderId);\n        var fragmentShaderId = exports.gl.createShader(exports.gl.FRAGMENT_SHADER);\n        if (fragmentShaderId == null) {\n            lapppal_1.LAppPal.printMessage('failed to create fragmentShader');\n            return null;\n        }\n        var fragmentShader = 'precision mediump float;' +\n            'varying vec2 vuv;' +\n            'uniform sampler2D texture;' +\n            'void main(void)' +\n            '{' +\n            '   gl_FragColor = texture2D(texture, vuv);' +\n            '}';\n        exports.gl.shaderSource(fragmentShaderId, fragmentShader);\n        exports.gl.compileShader(fragmentShaderId);\n        var programId = exports.gl.createProgram();\n        exports.gl.attachShader(programId, vertexShaderId);\n        exports.gl.attachShader(programId, fragmentShaderId);\n        exports.gl.deleteShader(vertexShaderId);\n        exports.gl.deleteShader(fragmentShaderId);\n        exports.gl.linkProgram(programId);\n        exports.gl.useProgram(programId);\n        return programId;\n    };\n    LAppDelegate.prototype.getView = function () {\n        return this._view;\n    };\n    LAppDelegate.prototype.setLappModelEvent = function (call) {\n        exports.lAppDelegateEvent = call;\n    };\n    LAppDelegate.prototype.getTextureManager = function () {\n        return this._textureManager;\n    };\n    LAppDelegate.prototype.initializeCubism = function () {\n        this._cubismOption.logFunction = lapppal_1.LAppPal.printMessage;\n        this._cubismOption.loggingLevel = LAppDefine.CubismLoggingLevel;\n        Csm_CubismFramework.startUp(this._cubismOption);\n        Csm_CubismFramework.initialize();\n        lapplive2dmanager_1.LAppLive2DManager.getInstance();\n        lapppal_1.LAppPal.updateTime();\n        this._view.initializeSprite();\n    };\n    return LAppDelegate;\n}());\nexports.LAppDelegate = LAppDelegate;\nfunction onMouseLeave() {\n    lapppal_1.LAppPal.log(\"划出去\");\n    var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n    live2DManager.onDrag(0.0, 0.0);\n}\nfunction onMouseEnter(e) {\n    e.preventDefault();\n    lapppal_1.LAppPal.log(\"划进来\");\n}\nfunction onClickBegan(e) {\n    lapppal_1.LAppPal.log('click_began');\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    LAppDelegate.getInstance()._captured = true;\n    var posX = e.pageX;\n    var posY = e.pageY;\n    posX *= exports.scale;\n    posY *= exports.scale;\n    LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\n}\nfunction hitModel(posX, posY) {\n    var view = LAppDelegate.getInstance().getView();\n    var viewX = view.transformViewX(posX);\n    var viewY = view.transformViewY(posY);\n    return lapplive2dmanager_1.LAppLive2DManager.getInstance().hitModel(viewX, viewY);\n}\nexports.hitModel = hitModel;\nfunction onMouseMoved(e) {\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    var rect = e.target.getBoundingClientRect();\n    var posX = e.clientX - rect.left;\n    var posY = e.clientY - rect.top;\n    posX *= exports.scale;\n    posY *= exports.scale;\n    var hit = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n    var hitstr = hit.isHit(posX, posY);\n    if (hit.move_hit) {\n        hit.move_hit(hitstr);\n    }\n    LAppDelegate.getInstance()._view.onTouchesMoved(posX, posY);\n}\nfunction onClickEnded(e) {\n    LAppDelegate.getInstance()._captured = false;\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    var rect = e.target.getBoundingClientRect();\n    var posX = e.clientX - rect.left;\n    var posY = e.clientY - rect.top;\n    posX *= exports.scale;\n    posY *= exports.scale;\n    lapppal_1.LAppPal.log('点击');\n    var hit = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n    var hitstr = hit.isHit(posX, posY);\n    if (hitstr != \"\" && hit.click_hit) {\n        hit.click_hit(hitstr);\n    }\n    LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n}\nfunction onTouchBegan(e) {\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    LAppDelegate.getInstance()._captured = true;\n    var posX = e.changedTouches[0].pageX;\n    var posY = e.changedTouches[0].pageY;\n    posX *= exports.scale;\n    posY *= exports.scale;\n    LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\n}\nfunction onTouchMoved(e) {\n    if (!LAppDelegate.getInstance()._captured) {\n        return;\n    }\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    var rect = e.target.getBoundingClientRect();\n    var posX = e.changedTouches[0].clientX - rect.left;\n    var posY = e.changedTouches[0].clientY - rect.top;\n    posX *= exports.scale;\n    posY *= exports.scale;\n    LAppDelegate.getInstance()._view.onTouchesMoved(posX, posY);\n}\nfunction onTouchEnded(e) {\n    LAppDelegate.getInstance()._captured = false;\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    var rect = e.target.getBoundingClientRect();\n    var posX = e.changedTouches[0].clientX - rect.left;\n    var posY = e.changedTouches[0].clientY - rect.top;\n    posX *= exports.scale;\n    posY *= exports.scale;\n    LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n}\nfunction onTouchCancel(e) {\n    LAppDelegate.getInstance()._captured = false;\n    if (!LAppDelegate.getInstance()._view) {\n        lapppal_1.LAppPal.printMessage('view notfound');\n        return;\n    }\n    var rect = e.target.getBoundingClientRect();\n    var posX = e.changedTouches[0].clientX - rect.left;\n    var posY = e.changedTouches[0].clientY - rect.top;\n    LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcGRlbGVnYXRlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2xhcHBkZWxlZ2F0ZS50cz82OTcxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7XG4gICAgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGxpdmUyZGN1YmlzbWZyYW1ld29yayxcbiAgICBPcHRpb24gYXMgQ3NtX09wdGlvblxufSBmcm9tICdAZnJhbWV3b3JrL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgQ3NtX0N1YmlzbUZyYW1ld29yayA9IGxpdmUyZGN1YmlzbWZyYW1ld29yay5DdWJpc21GcmFtZXdvcms7XG5pbXBvcnQge0xBcHBWaWV3fSBmcm9tICcuL2xhcHB2aWV3JztcbmltcG9ydCB7TEFwcFBhbH0gZnJvbSAnLi9sYXBwcGFsJztcbmltcG9ydCB7TEFwcFRleHR1cmVNYW5hZ2VyfSBmcm9tICcuL2xhcHB0ZXh0dXJlbWFuYWdlcic7XG5pbXBvcnQge0xBcHBMaXZlMkRNYW5hZ2VyfSBmcm9tICcuL2xhcHBsaXZlMmRtYW5hZ2VyJztcbmltcG9ydCAqIGFzIExBcHBEZWZpbmUgZnJvbSAnLi9sYXBwZGVmaW5lJztcbmltcG9ydCB7TEFwcE1vZGVsfSBmcm9tIFwiLi9sYXBwbW9kZWxcIjtcbmltcG9ydCB7IERlYnVnTG9nRW5hYmxlIH0gZnJvbSAnLi9sYXBwZGVmaW5lJztcbmltcG9ydCB7TFN0b3JlfSBmcm9tIFwiLi9sc3RvcmVcIjtcblxuZXhwb3J0IGxldCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gbnVsbDtcbmV4cG9ydCBsZXQgc19pbnN0YW5jZTogTEFwcERlbGVnYXRlID0gbnVsbDtcbmV4cG9ydCBsZXQgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCA9IG51bGw7XG5leHBvcnQgbGV0IGZyYW1lQnVmZmVyOiBXZWJHTEZyYW1lYnVmZmVyID0gbnVsbDtcbmV4cG9ydCBsZXQgc2NhbGU6IG51bWJlciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuZXhwb3J0IGxldCBsQXBwRGVsZWdhdGVFdmVudDpMQXBwRGVsZWdhdGVFdmVudCA9IG51bGw7XG5cblxuaW50ZXJmYWNlIExBcHBEZWxlZ2F0ZUV2ZW50IHtcbiAgICBtb2RlbENvbXBsZXRlU2V0dXAoKTtcbn1cblxuXG4vKipcbiAqIOOCouODl+ODquOCseODvOOCt+ODp+ODs+OCr+ODqeOCueOAglxuICogQ3ViaXNtIFNES+OBrueuoeeQhuOCkuihjOOBhuOAglxuICovXG5leHBvcnQgY2xhc3MgTEFwcERlbGVnYXRlIHtcbiAgICAvKipcbiAgICAgKiBsaXZlMmTmuLLmn5PnlKjop4blm77nsbtcbiAgICAgKi9cbiAgICBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiDjgq/jg6njgrnjga7jgqTjg7Pjgrnjgr/jg7PjgrnvvIjjgrfjg7PjgrDjg6vjg4jjg7PvvInjgpLov5TjgZnjgIJcbiAgICAgKiDjgqTjg7Pjgrnjgr/jg7PjgrnjgYznlJ/miJDjgZXjgozjgabjgYTjgarjgYTloLTlkIjjga/lhoXpg6jjgafjgqTjg7Pjgrnjgr/jg7PjgrnjgpLnlJ/miJDjgZnjgovjgIJcbiAgICAgKlxuICAgICAqIEByZXR1cm4g44Kv44Op44K544Gu44Kk44Oz44K544K/44Oz44K5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBMQXBwRGVsZWdhdGUge1xuICAgICAgICBpZiAoc19pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBzX2luc3RhbmNlID0gbmV3IExBcHBEZWxlZ2F0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNfaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44Kv44Op44K544Gu44Kk44Oz44K544K/44Oz44K577yI44K344Oz44Kw44Or44OI44Oz77yJ44KS6Kej5pS+44GZ44KL44CCXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWxlYXNlSW5zdGFuY2UoKTogdm9pZCB7XG4gICAgICAgIGlmIChzX2luc3RhbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNfaW5zdGFuY2UucmVsZWFzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc19pbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Yid5aeL5YyW6YWN572uXG4gICAgICovXG4gICAgcHVibGljIGluaXREZWZpbmUoKXtcbiAgICAgICAgTFN0b3JlLnNldCgnTW9kZWxEaXInLExBcHBEZWZpbmUuTW9kZWxEaXIpXG4gICAgICAgIExTdG9yZS5zZXQoXCJSZXNvdXJjZXNQYXRoXCIsTEFwcERlZmluZS5SZXNvdXJjZXNQYXRoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQUOOBq+W/heimgeOBqueJqeOCkuWIneacn+WMluOBmeOCi+OAglxuICAgICAqL1xuICAgIHB1YmxpYyBpbml0aWFsaXplKCk6IGJvb2xlYW4ge1xuICAgICAgICB0aGlzLmluaXREZWZpbmUoKTtcbiAgICAgICAgLy8g55S75biD55qE5Yi25L2cXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB0aGlzLl9jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIGNhbnZhcy5pZCA9ICdsaXZlMmQnO1xuICAgICAgICBjYW52YXMud2lkdGggPSBMQXBwRGVmaW5lLlJlbmRlclRhcmdldFdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gTEFwcERlZmluZS5SZW5kZXJUYXJnZXRIZWlnaHQ7XG5cbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gY2FudmFzLndpZHRoICsgJ3B4JztcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKyAncHgnO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aCAqIHNjYWxlO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmhlaWdodCAqIHNjYWxlO1xuXG4gICAgICAgIC8vIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywnd2lkdGg6JytMQXBwRGVmaW5lLlJlbmRlclRhcmdldFdpZHRoKydweDtoZWlnaHQ6JytMQXBwRGVmaW5lLlJlbmRlclRhcmdldEhlaWdodCsncHgnKTtcblxuICAgICAgICAvLyBnbOOCs+ODs+ODhuOCreOCueODiOOCkuWIneacn+WMllxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpO1xuXG5cbiAgICAgICAgaWYgKCFnbCkge1xuICAgICAgICAgICAgYWxlcnQoJ0Nhbm5vdCBpbml0aWFsaXplIFdlYkdMLiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydC4nKTtcbiAgICAgICAgICAgIGdsID0gbnVsbDtcblxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPVxuICAgICAgICAgICAgICAgICdUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgPGNvZGU+Jmx0O2NhbnZhcyZndDs8L2NvZGU+IGVsZW1lbnQuJztcblxuICAgICAgICAgICAgLy8gZ2zliJ3mnJ/ljJblpLHmlZdcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOOCreODo+ODs+ODkOOCueOCkiBET00g44Gr6L+95YqgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuICAgICAgICBpZiAoIWZyYW1lQnVmZmVyKSB7XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlciA9IGdsLmdldFBhcmFtZXRlcihnbC5GUkFNRUJVRkZFUl9CSU5ESU5HKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOmAj+mBjuioreWumlxuICAgICAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgICAgICBnbC5ibGVuZEZ1bmMoZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcblxuICAgICAgICBjb25zdCBzdXBwb3J0VG91Y2g6IGJvb2xlYW4gPSAnb250b3VjaGVuZCcgaW4gY2FudmFzO1xuXG4gICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdib2R5JylbMF0ub25cbiAgICAgICAgaWYgKHN1cHBvcnRUb3VjaCkge1xuICAgICAgICAgICAgLy8g44K/44OD44OB6Zai6YCj44Kz44O844Or44OQ44OD44Kv6Zai5pWw55m76YyyXG4gICAgICAgICAgICBjYW52YXMub250b3VjaHN0YXJ0ID0gb25Ub3VjaEJlZ2FuO1xuICAgICAgICAgICAgY2FudmFzLm9udG91Y2htb3ZlID0gb25Ub3VjaE1vdmVkO1xuICAgICAgICAgICAgY2FudmFzLm9udG91Y2hlbmQgPSBvblRvdWNoRW5kZWQ7XG4gICAgICAgICAgICBjYW52YXMub250b3VjaGNhbmNlbCA9IG9uVG91Y2hDYW5jZWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDjg57jgqbjgrnplqLpgKPjgrPjg7zjg6vjg5Djg4Pjgq/plqLmlbDnmbvpjLJcbiAgICAgICAgICAgIGNhbnZhcy5vbm1vdXNlZG93biA9IG9uQ2xpY2tCZWdhbjtcbiAgICAgICAgICAgIGNhbnZhcy5vbm1vdXNlbW92ZSA9IG9uTW91c2VNb3ZlZDtcbiAgICAgICAgICAgIGNhbnZhcy5vbm1vdXNldXAgPSBvbkNsaWNrRW5kZWQ7XG4gICAgICAgICAgICBjYW52YXMub25tb3VzZWVudGVyID0gb25Nb3VzZUVudGVyO1xuICAgICAgICAgICAgY2FudmFzLm9ubW91c2VsZWF2ZSA9IG9uTW91c2VMZWF2ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcFZpZXfjga7liJ3mnJ/ljJZcbiAgICAgICAgdGhpcy5fdmlldy5pbml0aWFsaXplKCk7XG5cbiAgICAgICAgLy8gQ3ViaXNtIFNES+OBruWIneacn+WMllxuICAgICAgICB0aGlzLmluaXRpYWxpemVDdWJpc20oKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDop6PmlL7jgZnjgovjgIJcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZU1hbmFnZXIucmVsZWFzZSgpO1xuICAgICAgICB0aGlzLl90ZXh0dXJlTWFuYWdlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fdmlldy5yZWxlYXNlKCk7XG4gICAgICAgIHRoaXMuX3ZpZXcgPSBudWxsO1xuXG4gICAgICAgIC8vIOODquOCveODvOOCueOCkuino+aUvlxuICAgICAgICBMQXBwTGl2ZTJETWFuYWdlci5yZWxlYXNlSW5zdGFuY2UoKTtcblxuICAgICAgICAvLyBDdWJpc20gU0RL44Gu6Kej5pS+XG4gICAgICAgIENzbV9DdWJpc21GcmFtZXdvcmsuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWun+ihjOWHpueQhuOAglxuICAgICAqL1xuICAgIHB1YmxpYyBydW4oKTogdm9pZCB7XG4gICAgICAgIGlmIChEZWJ1Z0xvZ0VuYWJsZSl7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB2YXIgc3RhdHMgPSBuZXcgU3RhdHMoKTtcbiAgICAgICAgICAgIHN0YXRzLnNob3dQYW5lbCggMCApOyAvLyAwOiBmcHMsIDE6IG1zLCAyOiBtYiwgMys6IGN1c3RvbVxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc3RhdHMuZG9tICk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIOODoeOCpOODs+ODq+ODvOODl1xuICAgICAgICBjb25zdCBsb29wID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgaWYgKERlYnVnTG9nRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgc3RhdHMuYmVnaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOOCpOODs+OCueOCv+ODs+OCueOBruacieeEoeOBrueiuuiqjVxuICAgICAgICAgICAgaWYgKHNfaW5zdGFuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pmC6ZaT5pu05pawXG4gICAgICAgICAgICBMQXBwUGFsLnVwZGF0ZVRpbWUoKTtcblxuICAgICAgICAgICAgLy8g55S76Z2i44Gu5Yid5pyf5YyWXG4gICAgICAgICAgICBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDAuMCk7XG5cbiAgICAgICAgICAgIC8vIOa3seW6puODhuOCueODiOOCkuacieWKueWMllxuICAgICAgICAgICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xuXG4gICAgICAgICAgICAvLyDov5HjgY/jgavjgYLjgovniankvZPjga/jgIHpgaDjgY/jgavjgYLjgovniankvZPjgpLopobjgYTpmqDjgZlcbiAgICAgICAgICAgIGdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO1xuXG4gICAgICAgICAgICAvLyDjgqvjg6njg7zjg5Djg4Pjg5XjgqHjgoTmt7Hluqbjg5Djg4Pjg5XjgqHjgpLjgq/jg6rjgqLjgZnjgotcbiAgICAgICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKTtcblxuICAgICAgICAgICAgZ2wuY2xlYXJEZXB0aCgxLjApO1xuXG4gICAgICAgICAgICAvLyDpgI/pgY7oqK3lrppcbiAgICAgICAgICAgIGdsLmVuYWJsZShnbC5CTEVORCk7XG4gICAgICAgICAgICBnbC5ibGVuZEZ1bmMoZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcblxuICAgICAgICAgICAgLy8g5o+P55S75pu05pawXG4gICAgICAgICAgICB0aGlzLl92aWV3LnJlbmRlcigpO1xuXG4gICAgICAgICAgICAvLyDlu7rnq4vlg4/ntKDpm4blkIgg6L+Z56eN5pa55byP5oCn6IO9Y2FudmFz57yT5Yay5Yy66LaK5aSn6LaK5beuXG4gICAgICAgICAgICAvLyBwaXhlbHMgID0gbmV3IFVpbnQ4QXJyYXkoIGNhbnZhcy53aWR0aCpjYW52YXMuaGVpZ2h0KjQpO1xuICAgICAgICAgICAgLy8gLy/ku47nvJPlhrLljLror7vlj5blg4/ntKDmlbDmja7vvIznhLblkI7lsIblhbboo4XliLDkuovlhYjlu7rnq4vlpb3nmoTlg4/ntKDpm4blkIjph4xcbiAgICAgICAgICAgIC8vIGdsLnJlYWRQaXhlbHMoMCwgMCxnbC5kcmF3aW5nQnVmZmVyV2lkdGgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHBpeGVscyk7XG4gICAgICAgICAgICBpZiAoRGVidWdMb2dFbmFibGUpIHtcbiAgICAgICAgICAgICAgICBzdGF0cy5lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOODq+ODvOODl+OBruOBn+OCgeOBq+WGjeW4sOWRvOOBs+WHuuOBl1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICB9O1xuICAgICAgICBsb29wKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44K344Kn44O844OA44O844KS55m76Yyy44GZ44KL44CCXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVNoYWRlcigpOiBXZWJHTFByb2dyYW0ge1xuICAgICAgICAvLyB2ZXJ0ZXjnnYDoibLlmajnmoTnvJbor5FcbiAgICAgICAgY29uc3QgdmVydGV4U2hhZGVySWQgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XG5cbiAgICAgICAgaWYgKHZlcnRleFNoYWRlcklkID09IG51bGwpIHtcbiAgICAgICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKCdmYWlsZWQgdG8gY3JlYXRlIHZlcnRleFNoYWRlcicpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2ZXJ0ZXhTaGFkZXI6IHN0cmluZyA9XG4gICAgICAgICAgICAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JyArXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzMgcG9zaXRpb247JyArXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzIgdXY7JyArXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMyIHZ1djsnICtcbiAgICAgICAgICAgICd2b2lkIG1haW4odm9pZCknICtcbiAgICAgICAgICAgICd7JyArXG4gICAgICAgICAgICAnICAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAxLjApOycgK1xuICAgICAgICAgICAgJyAgIHZ1diA9IHV2OycgK1xuICAgICAgICAgICAgJ30nO1xuXG4gICAgICAgIGdsLnNoYWRlclNvdXJjZSh2ZXJ0ZXhTaGFkZXJJZCwgdmVydGV4U2hhZGVyKTtcbiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcih2ZXJ0ZXhTaGFkZXJJZCk7XG5cbiAgICAgICAgLy8g57yW6K+R54mH5q6155qE552A6Imy5ZmoXG4gICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVySWQgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcblxuICAgICAgICBpZiAoZnJhZ21lbnRTaGFkZXJJZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBMQXBwUGFsLnByaW50TWVzc2FnZSgnZmFpbGVkIHRvIGNyZWF0ZSBmcmFnbWVudFNoYWRlcicpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmcmFnbWVudFNoYWRlcjogc3RyaW5nID1cbiAgICAgICAgICAgICdwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsnICtcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzIgdnV2OycgK1xuICAgICAgICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7JyArXG4gICAgICAgICAgICAndm9pZCBtYWluKHZvaWQpJyArXG4gICAgICAgICAgICAneycgK1xuICAgICAgICAgICAgJyAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCB2dXYpOycgK1xuICAgICAgICAgICAgJ30nO1xuXG4gICAgICAgIGdsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlcklkLCBmcmFnbWVudFNoYWRlcik7XG4gICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXJJZCk7XG5cbiAgICAgICAgLy8g56iL5bqP5a+56LGh55qE5Yib5bu6XG4gICAgICAgIGNvbnN0IHByb2dyYW1JZCA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW1JZCwgdmVydGV4U2hhZGVySWQpO1xuICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbUlkLCBmcmFnbWVudFNoYWRlcklkKTtcbiAgICAgICAgLy8gZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW1JZCwgcm90YXRpb25TaGFkZXJJZCk7XG5cbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcklkKTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVySWQpO1xuXG4gICAgICAgIC8vIOODquODs+OCr1xuICAgICAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtSWQpO1xuXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbUlkKTtcblxuICAgICAgICByZXR1cm4gcHJvZ3JhbUlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZpZXfmg4XloLHjgpLlj5blvpfjgZnjgovjgIJcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VmlldygpOiBMQXBwVmlldyB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWV3O1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRMYXBwTW9kZWxFdmVudChjYWxsOkxBcHBEZWxlZ2F0ZUV2ZW50KXtcbiAgICAgICAgbEFwcERlbGVnYXRlRXZlbnQgPSBjYWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUZXh0dXJlTWFuYWdlcigpOiBMQXBwVGV4dHVyZU1hbmFnZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZU1hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2NhcHR1cmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21vdXNlWCA9IDAuMDtcbiAgICAgICAgdGhpcy5fbW91c2VZID0gMC4wO1xuICAgICAgICB0aGlzLl9pc0VuZCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2N1YmlzbU9wdGlvbiA9IG5ldyBDc21fT3B0aW9uKCk7XG4gICAgICAgIHRoaXMuX3ZpZXcgPSBuZXcgTEFwcFZpZXcoKTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZU1hbmFnZXIgPSBuZXcgTEFwcFRleHR1cmVNYW5hZ2VyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3ViaXNtIFNES+OBruWIneacn+WMllxuICAgICAqL1xuICAgIHB1YmxpYyBpbml0aWFsaXplQ3ViaXNtKCk6IHZvaWQge1xuICAgICAgICAvLyBzZXR1cCBjdWJpc21cbiAgICAgICAgdGhpcy5fY3ViaXNtT3B0aW9uLmxvZ0Z1bmN0aW9uID0gTEFwcFBhbC5wcmludE1lc3NhZ2U7XG4gICAgICAgIHRoaXMuX2N1YmlzbU9wdGlvbi5sb2dnaW5nTGV2ZWwgPSBMQXBwRGVmaW5lLkN1YmlzbUxvZ2dpbmdMZXZlbDtcbiAgICAgICAgQ3NtX0N1YmlzbUZyYW1ld29yay5zdGFydFVwKHRoaXMuX2N1YmlzbU9wdGlvbik7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBjdWJpc21cbiAgICAgICAgQ3NtX0N1YmlzbUZyYW1ld29yay5pbml0aWFsaXplKCk7XG5cbiAgICAgICAgLy8gbG9hZCBtb2RlbFxuICAgICAgICBMQXBwTGl2ZTJETWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4gICAgICAgIExBcHBQYWwudXBkYXRlVGltZSgpO1xuXG4gICAgICAgIHRoaXMuX3ZpZXcuaW5pdGlhbGl6ZVNwcml0ZSgpO1xuICAgIH1cblxuICAgIF9jdWJpc21PcHRpb246IENzbV9PcHRpb247IC8vIEN1YmlzbSBTREsgT3B0aW9uXG4gICAgX3ZpZXc6IExBcHBWaWV3OyAvLyBWaWV35oOF5aCxXG4gICAgX2NhcHR1cmVkOiBib29sZWFuOyAvLyDngrnlh7vkuoblkJc/XG4gICAgX21vdXNlWDogbnVtYmVyOyAvLyBY5Z2Q5qCHXG4gICAgX21vdXNlWTogbnVtYmVyOyAvLyDpvKDmoIdZ5Z2Q5qCHXG4gICAgX2lzRW5kOiBib29sZWFuOyAvLyBBUFDntYLkuobjgZfjgabjgYTjgovjgYtcbiAgICBfdGV4dHVyZU1hbmFnZXI6IExBcHBUZXh0dXJlTWFuYWdlcjsgLy8g44OG44Kv44K544OB44Oj44Oe44ON44O844K444Oj44O8XG59XG5cbmZ1bmN0aW9uIG9uTW91c2VMZWF2ZSgpIHtcbiAgICBMQXBwUGFsLmxvZyhcIuWIkuWHuuWOu1wiKVxuXG4gICAgY29uc3QgbGl2ZTJETWFuYWdlcjogTEFwcExpdmUyRE1hbmFnZXIgPSBMQXBwTGl2ZTJETWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIGxpdmUyRE1hbmFnZXIub25EcmFnKDAuMCwgMC4wKTtcblxufVxuXG5mdW5jdGlvbiBvbk1vdXNlRW50ZXIoZTogTW91c2VFdmVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIExBcHBQYWwubG9nKFwi5YiS6L+b5p2lXCIpXG5cbn1cblxuLyoqXG4gKiDjgq/jg6rjg4Pjgq/jgZfjgZ/jgajjgY3jgavlkbzjgbDjgozjgovjgIJcbiAqL1xuZnVuY3Rpb24gb25DbGlja0JlZ2FuKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBMQXBwUGFsLmxvZygnY2xpY2tfYmVnYW4nKVxuICAgIGlmICghTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcpIHtcbiAgICAgICAgTEFwcFBhbC5wcmludE1lc3NhZ2UoJ3ZpZXcgbm90Zm91bmQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fY2FwdHVyZWQgPSB0cnVlO1xuXG4gICAgbGV0IHBvc1g6IG51bWJlciA9IGUucGFnZVg7XG4gICAgbGV0IHBvc1k6IG51bWJlciA9IGUucGFnZVk7XG4gICAgcG9zWCAqPSBzY2FsZTtcbiAgICBwb3NZICo9IHNjYWxlO1xuXG4gICAgTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcub25Ub3VjaGVzQmVnYW4ocG9zWCwgcG9zWSk7XG5cbn1cbmV4cG9ydCBmdW5jdGlvbiBoaXRNb2RlbChwb3NYLHBvc1kpIHtcbiAgICBsZXQgdmlldyA9IExBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpLmdldFZpZXcoKVxuICAgIGNvbnN0IHZpZXdYOiBudW1iZXIgPSB2aWV3LnRyYW5zZm9ybVZpZXdYKHBvc1gpO1xuICAgIGNvbnN0IHZpZXdZOiBudW1iZXIgPSB2aWV3LnRyYW5zZm9ybVZpZXdZKHBvc1kpO1xuICAgIHJldHVybiBMQXBwTGl2ZTJETWFuYWdlci5nZXRJbnN0YW5jZSgpLmhpdE1vZGVsKHZpZXdYLHZpZXdZKVxuICAgIC8vIGNvbnNvbGUubG9nKHBpeGVscykg6YWN5ZCIbG9vcOmHjOeahHJlYWRQaXhlbHMg6Jm954S25oCn6IO96L6D5beu77yM5L2G5Y+v5Lul5o6n5Yi255qE54K55b6I5aSa77yM5q+U5aaC5YOP57Sg6aKc6ImyXG4gICAgLy8gcmV0dXJuIHBpeGVsc1soKHBvc1kgKiAoY2FudmFzLndpZHRoICogNCkpICsgKHBvc1ggKiA0KSkgKyAzXSA+IDA7XG59XG5cbi8qKlxuICog44Oe44Km44K544Od44Kk44Oz44K/44GM5YuV44GE44Gf44KJ5ZG844Gw44KM44KL44CCXG4gKi9cbmZ1bmN0aW9uIG9uTW91c2VNb3ZlZChlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gaWYgKCFMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fY2FwdHVyZWQpIHtcbiAgICAvLyAgICAgcmV0dXJuO1xuICAgIC8vIH1cblxuICAgIGlmICghTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcpIHtcbiAgICAgICAgTEFwcFBhbC5wcmludE1lc3NhZ2UoJ3ZpZXcgbm90Zm91bmQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlY3QgPSAoZS50YXJnZXQgYXMgRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHBvc1g6IG51bWJlciA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICBsZXQgcG9zWTogbnVtYmVyID0gZS5jbGllbnRZIC0gcmVjdC50b3A7XG4gICAgcG9zWCAqPSBzY2FsZTtcbiAgICBwb3NZICo9IHNjYWxlO1xuICAgIGxldCBoaXQgID0gTEFwcExpdmUyRE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICBsZXQgaGl0c3RyID0gaGl0LmlzSGl0KHBvc1gscG9zWSk7XG4gICAgLy8g6K6+5a6a5LqG55uR5ZCs5bCx6LWw5LiN566h5pyJ5rKh5pyJaGl0XG4gICAgaWYgKGhpdC5tb3ZlX2hpdCl7XG4gICAgICAgIGhpdC5tb3ZlX2hpdChoaXRzdHIpXG4gICAgfVxuXG4gICAgTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcub25Ub3VjaGVzTW92ZWQocG9zWCwgcG9zWSk7XG5cbn1cblxuLyoqXG4gKiDjgq/jg6rjg4Pjgq/jgYzntYLkuobjgZfjgZ/jgonlkbzjgbDjgozjgovjgIJcbiAqL1xuZnVuY3Rpb24gb25DbGlja0VuZGVkKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fY2FwdHVyZWQgPSBmYWxzZTtcbiAgICBpZiAoIUxBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpLl92aWV3KSB7XG4gICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKCd2aWV3IG5vdGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZWN0ID0gKGUudGFyZ2V0IGFzIEVsZW1lbnQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBwb3NYOiBudW1iZXIgPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgbGV0IHBvc1k6IG51bWJlciA9IGUuY2xpZW50WSAtIHJlY3QudG9wO1xuICAgIC8vIOino+WGs+aooeeziumXrumimFxuICAgIHBvc1ggKj0gc2NhbGU7XG4gICAgcG9zWSAqPSBzY2FsZTtcbiAgICBMQXBwUGFsLmxvZygn54K55Ye7JylcbiAgICBsZXQgaGl0ICA9IExBcHBMaXZlMkRNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgbGV0IGhpdHN0ciA9IGhpdC5pc0hpdChwb3NYLHBvc1kpO1xuICAgIGlmIChoaXRzdHIgIT0gXCJcIiYmaGl0LmNsaWNrX2hpdCl7XG4gICAgICAgIGhpdC5jbGlja19oaXQoaGl0c3RyKVxuICAgIH1cbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fdmlldy5vblRvdWNoZXNFbmRlZChwb3NYLCBwb3NZKTtcbn1cblxuLyoqXG4gKiDjgr/jg4Pjg4HjgZfjgZ/jgajjgY3jgavlkbzjgbDjgozjgovjgIJcbiAqL1xuZnVuY3Rpb24gb25Ub3VjaEJlZ2FuKGU6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIUxBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpLl92aWV3KSB7XG4gICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKCd2aWV3IG5vdGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fY2FwdHVyZWQgPSB0cnVlO1xuXG4gICAgbGV0IHBvc1ggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgIGxldCBwb3NZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcbiAgICBwb3NYICo9IHNjYWxlO1xuICAgIHBvc1kgKj0gc2NhbGU7XG4gICAgTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcub25Ub3VjaGVzQmVnYW4ocG9zWCwgcG9zWSk7XG59XG5cbi8qKlxuICog44K544Ov44Kk44OX44GZ44KL44Go5ZG844Gw44KM44KL44CCXG4gKi9cbmZ1bmN0aW9uIG9uVG91Y2hNb3ZlZChlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCFMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fY2FwdHVyZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcpIHtcbiAgICAgICAgTEFwcFBhbC5wcmludE1lc3NhZ2UoJ3ZpZXcgbm90Zm91bmQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlY3QgPSAoZS50YXJnZXQgYXMgRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBsZXQgcG9zWCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICBsZXQgcG9zWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIHJlY3QudG9wO1xuICAgIHBvc1ggKj0gc2NhbGU7XG4gICAgcG9zWSAqPSBzY2FsZTtcbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fdmlldy5vblRvdWNoZXNNb3ZlZChwb3NYLCBwb3NZKTtcbn1cblxuLyoqXG4gKiDjgr/jg4Pjg4HjgYzntYLkuobjgZfjgZ/jgonlkbzjgbDjgozjgovjgIJcbiAqL1xuZnVuY3Rpb24gb25Ub3VjaEVuZGVkKGU6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fY2FwdHVyZWQgPSBmYWxzZTtcblxuICAgIGlmICghTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX3ZpZXcpIHtcbiAgICAgICAgTEFwcFBhbC5wcmludE1lc3NhZ2UoJ3ZpZXcgbm90Zm91bmQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlY3QgPSAoZS50YXJnZXQgYXMgRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBsZXQgcG9zWCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICBsZXQgcG9zWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIHJlY3QudG9wO1xuICAgIHBvc1ggKj0gc2NhbGU7XG4gICAgcG9zWSAqPSBzY2FsZTtcbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fdmlldy5vblRvdWNoZXNFbmRlZChwb3NYLCBwb3NZKTtcbn1cblxuLyoqXG4gKiDjgr/jg4Pjg4HjgYzjgq3jg6Pjg7Pjgrvjg6vjgZXjgozjgovjgajlkbzjgbDjgozjgovjgIJcbiAqL1xuZnVuY3Rpb24gb25Ub3VjaENhbmNlbChlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuX2NhcHR1cmVkID0gZmFsc2U7XG5cbiAgICBpZiAoIUxBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpLl92aWV3KSB7XG4gICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKCd2aWV3IG5vdGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZWN0ID0gKGUudGFyZ2V0IGFzIEVsZW1lbnQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgY29uc3QgcG9zWCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICBjb25zdCBwb3NZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIC0gcmVjdC50b3A7XG5cbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5fdmlldy5vblRvdWNoZXNFbmRlZChwb3NYLCBwb3NZKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBNlFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTNRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBbUJBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQVNBO0FBQUE7QUFuVEE7QUFxVEE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFQQTtBQVlBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/lappdelegate.ts\n");

/***/ }),

/***/ "./src/lapplive2dmanager.ts":
/*!**********************************!*\
  !*** ./src/lapplive2dmanager.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LAppLive2DManager = exports.s_instance = void 0;\nvar cubismmatrix44_1 = __webpack_require__(/*! @framework/math/cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\");\nvar csmvector_1 = __webpack_require__(/*! @framework/type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar live2dcubismframework_1 = __webpack_require__(/*! @framework/live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar CubismFramework = live2dcubismframework_1.Live2DCubismFramework.CubismFramework;\nvar Csm_csmVector = csmvector_1.Live2DCubismFramework.csmVector;\nvar Csm_CubismMatrix44 = cubismmatrix44_1.Live2DCubismFramework.CubismMatrix44;\nvar lappmodel_1 = __webpack_require__(/*! ./lappmodel */ \"./src/lappmodel.ts\");\nvar lapppal_1 = __webpack_require__(/*! ./lapppal */ \"./src/lapppal.ts\");\nvar lappdelegate_1 = __webpack_require__(/*! ./lappdelegate */ \"./src/lappdelegate.ts\");\nvar LAppDefine = __importStar(__webpack_require__(/*! ./lappdefine */ \"./src/lappdefine.ts\"));\nvar lstore_1 = __webpack_require__(/*! ./lstore */ \"./src/lstore.ts\");\nexports.s_instance = null;\nvar LAppLive2DManager = (function () {\n    function LAppLive2DManager() {\n        this.click_hit = null;\n        this.move_hit = null;\n        this._finishedMotion = function (self) {\n            lapppal_1.LAppPal.printMessage('Motion Finished:');\n            console.log(self);\n        };\n        this._viewMatrix = new Csm_CubismMatrix44();\n        this._models = new Csm_csmVector();\n        this._sceneIndex = 0;\n        this.changeScene(this._sceneIndex);\n    }\n    LAppLive2DManager.prototype.getIdManager = function (id) {\n        return CubismFramework.getIdManager();\n    };\n    LAppLive2DManager.prototype.getLAppDelegate = function () {\n        return lappdelegate_1.LAppDelegate.getInstance();\n    };\n    LAppLive2DManager.getInstance = function () {\n        if (exports.s_instance == null) {\n            exports.s_instance = new LAppLive2DManager();\n        }\n        return exports.s_instance;\n    };\n    LAppLive2DManager.releaseInstance = function () {\n        if (exports.s_instance != null) {\n            exports.s_instance = void 0;\n        }\n        exports.s_instance = null;\n    };\n    LAppLive2DManager.prototype.getModel = function (no) {\n        if (no < this._models.getSize()) {\n            return this._models.at(no);\n        }\n        return null;\n    };\n    LAppLive2DManager.prototype.releaseAllModel = function () {\n        for (var i = 0; i < this._models.getSize(); i++) {\n            this._models.at(i).release();\n            this._models.set(i, null);\n        }\n        this._models.clear();\n    };\n    LAppLive2DManager.prototype.onDrag = function (x, y) {\n        for (var i = 0; i < this._models.getSize(); i++) {\n            var model = this.getModel(i);\n            if (model) {\n                model.setDragging(x, y);\n            }\n        }\n    };\n    LAppLive2DManager.prototype.onTap = function (x, y) {\n        if (LAppDefine.DebugLogEnable) {\n            lapppal_1.LAppPal.printMessage(\"[APP]tap point: {x: \" + x.toFixed(2) + \" y: \" + y.toFixed(2) + \"}\");\n        }\n        for (var i = 0; i < this._models.getSize(); i++) {\n            if (this._models.at(i).hitTest(LAppDefine.HitAreaNameHead, x, y)) {\n                if (LAppDefine.DebugLogEnable) {\n                    lapppal_1.LAppPal.printMessage(\"[APP]hit area: [\" + LAppDefine.HitAreaNameHead + \"]\");\n                }\n                this._models.at(i).setRandomExpression();\n            }\n            else if (this._models.at(i).hitTest(LAppDefine.HitAreaNameBody, x, y)) {\n                if (LAppDefine.DebugLogEnable) {\n                    lapppal_1.LAppPal.printMessage(\"[APP]hit area: [\" + LAppDefine.HitAreaNameBody + \"]\");\n                }\n                this._models\n                    .at(i)\n                    .startRandomMotion(LAppDefine.MotionGroupTapBody, LAppDefine.PriorityNormal, this._finishedMotion);\n            }\n        }\n    };\n    LAppLive2DManager.prototype.hitModel = function (x, y) {\n        for (var i = 0; i < this._models.getSize(); i++) {\n            if (this._models.at(i).hitTest(LAppDefine.HitAreaNameHead, x, y)) {\n                return true;\n            }\n            else if (this._models\n                .at(i)\n                .hitTest(LAppDefine.HitAreaNameBody, x, y)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    LAppLive2DManager.prototype.isHit = function (posX, posY) {\n        var view = lappdelegate_1.LAppDelegate.getInstance().getView();\n        var viewX = view.transformViewX(posX);\n        var viewY = view.transformViewY(posY);\n        var model = this._models.at(0).getModel();\n        for (var i = 0; i < model.getDrawableCount(); i++) {\n            if (this._models.at(0).isHit(model.getDrawableId(i), viewX, viewY)) {\n                return model.getDrawableId(i).getString().s;\n            }\n        }\n        return '';\n    };\n    LAppLive2DManager.prototype.onUpdate = function () {\n        var projection = new Csm_CubismMatrix44();\n        var width = lappdelegate_1.canvas.width, height = lappdelegate_1.canvas.height;\n        projection.scale(1.0, width / height);\n        if (this._viewMatrix != null) {\n            projection.multiplyByMatrix(this._viewMatrix);\n        }\n        var saveProjection = projection.clone();\n        var modelCount = this._models.getSize();\n        for (var i = 0; i < modelCount; ++i) {\n            var model = this.getModel(i);\n            projection = saveProjection.clone();\n            model.update();\n            model.draw(projection);\n        }\n    };\n    LAppLive2DManager.prototype.nextScene = function () {\n        var _a;\n        var ModelDir = (_a = lstore_1.LStore.get('ModelDir')) !== null && _a !== void 0 ? _a : LAppDefine.ModelDir;\n        if (ModelDir == []) {\n            return;\n        }\n        var no = (this._sceneIndex + 1) % ModelDir.length;\n        this.changeScene(no);\n    };\n    LAppLive2DManager.prototype.changeScene = function (index) {\n        var _a, _b;\n        this._sceneIndex = index;\n        if (LAppDefine.DebugLogEnable) {\n            lapppal_1.LAppPal.printMessage(\"[APP]model index: \" + this._sceneIndex);\n        }\n        var ModelDir = (_a = lstore_1.LStore.get('ModelDir')) !== null && _a !== void 0 ? _a : LAppDefine.ModelDir;\n        var ResourcesPath = (_b = lstore_1.LStore.get('ResourcesPath')) !== null && _b !== void 0 ? _b : LAppDefine.ResourcesPath;\n        var model = ModelDir[index];\n        var modelPath = ResourcesPath + model + '/';\n        var modelJsonName = ModelDir[index];\n        modelJsonName += '.model3.json';\n        this.releaseAllModel();\n        this._models.pushBack(new lappmodel_1.LAppModel());\n        this._models.at(0).loadAssets(modelPath, modelJsonName);\n    };\n    return LAppLive2DManager;\n}());\nexports.LAppLive2DManager = LAppLive2DManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcGxpdmUyZG1hbmFnZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbGFwcGxpdmUyZG1hbmFnZXIudHM/N2YyZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQge0xpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjdWJpc21tYXRyaXg0NH0gZnJvbSAnQGZyYW1ld29yay9tYXRoL2N1YmlzbW1hdHJpeDQ0JztcbmltcG9ydCB7TGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGNzbXZlY3Rvcn0gZnJvbSAnQGZyYW1ld29yay90eXBlL2NzbXZlY3Rvcic7XG5pbXBvcnQge0xpdmUyREN1YmlzbUZyYW1ld29yayBhcyBhY3ViaXNtbW90aW9ufSBmcm9tICdAZnJhbWV3b3JrL21vdGlvbi9hY3ViaXNtbW90aW9uJztcbmltcG9ydCB7TGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGN1YmlzbWlkfSBmcm9tIFwiQGZyYW1ld29yay9pZC9jdWJpc21pZFwiO1xuaW1wb3J0IHsgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGxpdmUyZGN1YmlzbWZyYW1ld29yayB9IGZyb20gJ0BmcmFtZXdvcmsvbGl2ZTJkY3ViaXNtZnJhbWV3b3JrJztcbmltcG9ydCBDdWJpc21GcmFtZXdvcmsgPSBsaXZlMmRjdWJpc21mcmFtZXdvcmsuQ3ViaXNtRnJhbWV3b3JrO1xuXG5pbXBvcnQgQ3NtX2NzbVZlY3RvciA9IGNzbXZlY3Rvci5jc21WZWN0b3I7XG5pbXBvcnQgQ3NtX0N1YmlzbU1hdHJpeDQ0ID0gY3ViaXNtbWF0cml4NDQuQ3ViaXNtTWF0cml4NDQ7XG5pbXBvcnQgQUN1YmlzbU1vdGlvbiA9IGFjdWJpc21tb3Rpb24uQUN1YmlzbU1vdGlvbjtcbmltcG9ydCBDdWJpc21JZEhhbmRsZSA9IGN1YmlzbWlkLkN1YmlzbUlkSGFuZGxlO1xuXG5pbXBvcnQge0xBcHBNb2RlbH0gZnJvbSAnLi9sYXBwbW9kZWwnO1xuaW1wb3J0IHtMQXBwUGFsfSBmcm9tICcuL2xhcHBwYWwnO1xuaW1wb3J0IHtjYW52YXMsIExBcHBEZWxlZ2F0ZSwgbEFwcERlbGVnYXRlRXZlbnR9IGZyb20gJy4vbGFwcGRlbGVnYXRlJztcbmltcG9ydCAqIGFzIExBcHBEZWZpbmUgZnJvbSAnLi9sYXBwZGVmaW5lJztcbmltcG9ydCB7TFN0b3JlfSBmcm9tIFwiLi9sc3RvcmVcIjtcblxuZXhwb3J0IGxldCBzX2luc3RhbmNlOiBMQXBwTGl2ZTJETWFuYWdlciA9IG51bGw7XG5cbi8qKlxuICog44K144Oz44OX44Or44Ki44OX44Oq44Kx44O844K344On44Oz44Gr44GK44GE44GmQ3ViaXNtTW9kZWzjgpLnrqHnkIbjgZnjgovjgq/jg6njgrlcbiAqIOODouODh+ODq+eUn+aIkOOBqOegtOajhOOAgeOCv+ODg+ODl+OCpOODmeODs+ODiOOBruWHpueQhuOAgeODouODh+ODq+WIh+OCiuabv+OBiOOCkuihjOOBhuOAglxuICovXG5leHBvcnQgY2xhc3MgTEFwcExpdmUyRE1hbmFnZXIge1xuICAgIHB1YmxpYyBjbGlja19oaXQ6RnVuY3Rpb24gPSBudWxsO1xuICAgIHB1YmxpYyBtb3ZlX2hpdDpGdW5jdGlvbiA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZpZOeuoeeQhuWvueixoVxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJZE1hbmFnZXIoaWQpe1xuICAgICAgICByZXR1cm4gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPluS7o+eQhlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRMQXBwRGVsZWdhdGUoKXtcbiAgICAgICAgcmV0dXJuIExBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDjgq/jg6njgrnjga7jgqTjg7Pjgrnjgr/jg7PjgrnvvIjjgrfjg7PjgrDjg6vjg4jjg7PvvInjgpLov5TjgZnjgIJcbiAgICAgKiDjgqTjg7Pjgrnjgr/jg7PjgrnjgYznlJ/miJDjgZXjgozjgabjgYTjgarjgYTloLTlkIjjga/lhoXpg6jjgafjgqTjg7Pjgrnjgr/jg7PjgrnjgpLnlJ/miJDjgZnjgovjgIJcbiAgICAgKlxuICAgICAqIEByZXR1cm4g44Kv44Op44K544Gu44Kk44Oz44K544K/44Oz44K5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBMQXBwTGl2ZTJETWFuYWdlciB7XG4gICAgICAgIGlmIChzX2luc3RhbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHNfaW5zdGFuY2UgPSBuZXcgTEFwcExpdmUyRE1hbmFnZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzX2luc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOCr+ODqeOCueOBruOCpOODs+OCueOCv+ODs+OCue+8iOOCt+ODs+OCsOODq+ODiOODs++8ieOCkuino+aUvuOBmeOCi+OAglxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVsZWFzZUluc3RhbmNlKCk6IHZvaWQge1xuICAgICAgICBpZiAoc19pbnN0YW5jZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzX2luc3RhbmNlID0gdm9pZCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgc19pbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog54++5Zyo44Gu44K344O844Oz44Gn5L+d5oyB44GX44Gm44GE44KL44Oi44OH44Or44KS6L+U44GZ44CCXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm8g44Oi44OH44Or44Oq44K544OI44Gu44Kk44Oz44OH44OD44Kv44K55YCkXG4gICAgICogQHJldHVybiDjg6Ljg4fjg6vjga7jgqTjg7Pjgrnjgr/jg7PjgrnjgpLov5TjgZnjgILjgqTjg7Pjg4fjg4Pjgq/jgrnlgKTjgYznr4Tlm7LlpJbjga7loLTlkIjjga9OVUxM44KS6L+U44GZ44CCXG4gICAgICovXG4gICAgcHVibGljIGdldE1vZGVsKG5vOiBudW1iZXIpOiBMQXBwTW9kZWwge1xuICAgICAgICBpZiAobm8gPCB0aGlzLl9tb2RlbHMuZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbW9kZWxzLmF0KG5vKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOePvuWcqOOBruOCt+ODvOODs+OBp+S/neaMgeOBl+OBpuOBhOOCi+OBmeOBueOBpuOBruODouODh+ODq+OCkuino+aUvuOBmeOCi1xuICAgICAqL1xuICAgIHB1YmxpYyByZWxlYXNlQWxsTW9kZWwoKTogdm9pZCB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbW9kZWxzLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9tb2RlbHMuYXQoaSkucmVsZWFzZSgpO1xuICAgICAgICAgICAgdGhpcy5fbW9kZWxzLnNldChpLCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21vZGVscy5jbGVhcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOeUu+mdouOCkuODieODqeODg+OCsOOBl+OBn+aZguOBruWHpueQhlxuICAgICAqXG4gICAgICogQHBhcmFtIHgg55S76Z2i44GuWOW6p+aomVxuICAgICAqIEBwYXJhbSB5IOeUu+mdouOBrlnluqfmqJlcbiAgICAgKi9cbiAgICBwdWJsaWMgb25EcmFnKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbW9kZWxzLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBtb2RlbDogTEFwcE1vZGVsID0gdGhpcy5nZXRNb2RlbChpKTtcblxuICAgICAgICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgbW9kZWwuc2V0RHJhZ2dpbmcoeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnlLvpnaLjgpLjgr/jg4Pjg5fjgZfjgZ/mmYLjga7lh6bnkIZcbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IOeUu+mdouOBrljluqfmqJlcbiAgICAgKiBAcGFyYW0geSDnlLvpnaLjga5Z5bqn5qiZXG4gICAgICovXG4gICAgcHVibGljIG9uVGFwKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmIChMQXBwRGVmaW5lLkRlYnVnTG9nRW5hYmxlKSB7XG4gICAgICAgICAgICBMQXBwUGFsLnByaW50TWVzc2FnZShcbiAgICAgICAgICAgICAgICBgW0FQUF10YXAgcG9pbnQ6IHt4OiAke3gudG9GaXhlZCgyKX0geTogJHt5LnRvRml4ZWQoMil9fWBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21vZGVscy5nZXRTaXplKCk7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX21vZGVscy5hdChpKS5oaXRUZXN0KExBcHBEZWZpbmUuSGl0QXJlYU5hbWVIZWFkLCB4LCB5KSkge1xuICAgICAgICAgICAgICAgIGlmIChMQXBwRGVmaW5lLkRlYnVnTG9nRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgYFtBUFBdaGl0IGFyZWE6IFske0xBcHBEZWZpbmUuSGl0QXJlYU5hbWVIZWFkfV1gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX21vZGVscy5hdChpKS5zZXRSYW5kb21FeHByZXNzaW9uKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21vZGVscy5hdChpKS5oaXRUZXN0KExBcHBEZWZpbmUuSGl0QXJlYU5hbWVCb2R5LCB4LCB5KSkge1xuICAgICAgICAgICAgICAgIGlmIChMQXBwRGVmaW5lLkRlYnVnTG9nRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgYFtBUFBdaGl0IGFyZWE6IFske0xBcHBEZWZpbmUuSGl0QXJlYU5hbWVCb2R5fV1gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAuYXQoaSlcbiAgICAgICAgICAgICAgICAgICAgLnN0YXJ0UmFuZG9tTW90aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgTEFwcERlZmluZS5Nb3Rpb25Hcm91cFRhcEJvZHksXG4gICAgICAgICAgICAgICAgICAgICAgICBMQXBwRGVmaW5lLlByaW9yaXR5Tm9ybWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluaXNoZWRNb3Rpb25cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBoaXRNb2RlbCh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21vZGVscy5nZXRTaXplKCk7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX21vZGVscy5hdChpKS5oaXRUZXN0KExBcHBEZWZpbmUuSGl0QXJlYU5hbWVIZWFkLCB4LCB5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tb2RlbHNcbiAgICAgICAgICAgICAgICAuYXQoaSlcbiAgICAgICAgICAgICAgICAuaGl0VGVzdChMQXBwRGVmaW5lLkhpdEFyZWFOYW1lQm9keSwgeCwgeSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNIaXQoIHBvc1g6IG51bWJlciwgcG9zWTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHZpZXcgPSBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5nZXRWaWV3KClcbiAgICAgICAgY29uc3Qgdmlld1g6IG51bWJlciA9IHZpZXcudHJhbnNmb3JtVmlld1gocG9zWCk7XG4gICAgICAgIGNvbnN0IHZpZXdZOiBudW1iZXIgPSB2aWV3LnRyYW5zZm9ybVZpZXdZKHBvc1kpO1xuXG4gICAgICAgIGxldCBtb2RlbCA9IHRoaXMuX21vZGVscy5hdCgwKS5nZXRNb2RlbCgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kZWwuZ2V0RHJhd2FibGVDb3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9tb2RlbHMuYXQoMCkuaXNIaXQobW9kZWwuZ2V0RHJhd2FibGVJZChpKSx2aWV3WCx2aWV3WSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuZ2V0RHJhd2FibGVJZChpKS5nZXRTdHJpbmcoKS5zO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgLyoqXG4gICAgICog55S76Z2i44KS5pu05paw44GZ44KL44Go44GN44Gu5Yem55CGXG4gICAgICog44Oi44OH44Or44Gu5pu05paw5Yem55CG5Y+K44Gz5o+P55S75Yem55CG44KS6KGM44GGXG4gICAgICovXG4gICAgcHVibGljIG9uVXBkYXRlKCk6IHZvaWQge1xuICAgICAgICBsZXQgcHJvamVjdGlvbjogQ3NtX0N1YmlzbU1hdHJpeDQ0ID0gbmV3IENzbV9DdWJpc21NYXRyaXg0NCgpO1xuXG4gICAgICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IGNhbnZhcztcbiAgICAgICAgcHJvamVjdGlvbi5zY2FsZSgxLjAsIHdpZHRoIC8gaGVpZ2h0KTtcblxuICAgICAgICBpZiAodGhpcy5fdmlld01hdHJpeCAhPSBudWxsKSB7XG4gICAgICAgICAgICBwcm9qZWN0aW9uLm11bHRpcGx5QnlNYXRyaXgodGhpcy5fdmlld01hdHJpeCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzYXZlUHJvamVjdGlvbjogQ3NtX0N1YmlzbU1hdHJpeDQ0ID0gcHJvamVjdGlvbi5jbG9uZSgpO1xuICAgICAgICBjb25zdCBtb2RlbENvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbHMuZ2V0U2l6ZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kZWxDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBtb2RlbDogTEFwcE1vZGVsID0gdGhpcy5nZXRNb2RlbChpKTtcbiAgICAgICAgICAgIHByb2plY3Rpb24gPSBzYXZlUHJvamVjdGlvbi5jbG9uZSgpO1xuXG4gICAgICAgICAgICBtb2RlbC51cGRhdGUoKTtcbiAgICAgICAgICAgIG1vZGVsLmRyYXcocHJvamVjdGlvbik7IC8vIOWPgueFp+a4oeOBl+OBquOBruOBp3Byb2plY3Rpb27jga/lpInos6rjgZnjgovjgIJcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOasoeOBruOCt+ODvOODs+OBq+WIh+OCiuOBi+OBiOOCi1xuICAgICAqIOOCteODs+ODl+ODq+OCouODl+ODquOCseODvOOCt+ODp+ODs+OBp+OBr+ODouODh+ODq+OCu+ODg+ODiOOBruWIh+OCiuabv+OBiOOCkuihjOOBhuOAglxuICAgICAqL1xuICAgIHB1YmxpYyBuZXh0U2NlbmUoKTogdm9pZCB7XG4gICAgICAgIGxldCBNb2RlbERpcjpbXSA9IExTdG9yZS5nZXQoJ01vZGVsRGlyJyk/P0xBcHBEZWZpbmUuTW9kZWxEaXI7XG4gICAgICAgIGlmIChNb2RlbERpciA9PSBbXSl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm86IG51bWJlciA9ICh0aGlzLl9zY2VuZUluZGV4ICsgMSkgJSBNb2RlbERpci5sZW5ndGg7XG4gICAgICAgIHRoaXMuY2hhbmdlU2NlbmUobm8pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOCt+ODvOODs+OCkuWIh+OCiuabv+OBiOOCi1xuICAgICAqIOOCteODs+ODl+ODq+OCouODl+ODquOCseODvOOCt+ODp+ODs+OBp+OBr+ODouODh+ODq+OCu+ODg+ODiOOBruWIh+OCiuabv+OBiOOCkuihjOOBhuOAglxuICAgICAqL1xuICAgIHB1YmxpYyBjaGFuZ2VTY2VuZShpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3NjZW5lSW5kZXggPSBpbmRleDtcbiAgICAgICAgaWYgKExBcHBEZWZpbmUuRGVidWdMb2dFbmFibGUpIHtcbiAgICAgICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKGBbQVBQXW1vZGVsIGluZGV4OiAke3RoaXMuX3NjZW5lSW5kZXh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IE1vZGVsRGlyOltdID0gTFN0b3JlLmdldCgnTW9kZWxEaXInKT8/TEFwcERlZmluZS5Nb2RlbERpcjtcbiAgICAgICAgbGV0IFJlc291cmNlc1BhdGg6W10gPSBMU3RvcmUuZ2V0KCdSZXNvdXJjZXNQYXRoJyk/P0xBcHBEZWZpbmUuUmVzb3VyY2VzUGF0aDtcblxuICAgICAgICAvLyBNb2RlbERpcltd44Gr5L+d5oyB44GX44Gf44OH44Kj44Os44Kv44OI44Oq5ZCN44GL44KJXG4gICAgICAgIC8vIG1vZGVsMy5qc29u44Gu44OR44K544KS5rG65a6a44GZ44KL44CCXG4gICAgICAgIC8vIOODh+OCo+ODrOOCr+ODiOODquWQjeOBqG1vZGVsMy5qc29u44Gu5ZCN5YmN44KS5LiA6Ie044GV44Gb44Gm44GK44GP44GT44Go44CCXG4gICAgICAgIGNvbnN0IG1vZGVsOiBzdHJpbmcgPSBNb2RlbERpcltpbmRleF07XG4gICAgICAgIGNvbnN0IG1vZGVsUGF0aDogc3RyaW5nID0gUmVzb3VyY2VzUGF0aCArIG1vZGVsICsgJy8nO1xuICAgICAgICBsZXQgbW9kZWxKc29uTmFtZTogc3RyaW5nID0gTW9kZWxEaXJbaW5kZXhdO1xuICAgICAgICBtb2RlbEpzb25OYW1lICs9ICcubW9kZWwzLmpzb24nO1xuXG4gICAgICAgIHRoaXMucmVsZWFzZUFsbE1vZGVsKCk7XG4gICAgICAgIHRoaXMuX21vZGVscy5wdXNoQmFjayhuZXcgTEFwcE1vZGVsKCkpO1xuICAgICAgICB0aGlzLl9tb2RlbHMuYXQoMCkubG9hZEFzc2V0cyhtb2RlbFBhdGgsIG1vZGVsSnNvbk5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl92aWV3TWF0cml4ID0gbmV3IENzbV9DdWJpc21NYXRyaXg0NCgpO1xuICAgICAgICB0aGlzLl9tb2RlbHMgPSBuZXcgQ3NtX2NzbVZlY3RvcjxMQXBwTW9kZWw+KCk7XG4gICAgICAgIHRoaXMuX3NjZW5lSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmNoYW5nZVNjZW5lKHRoaXMuX3NjZW5lSW5kZXgpO1xuICAgIH1cblxuICAgIF92aWV3TWF0cml4OiBDc21fQ3ViaXNtTWF0cml4NDQ7IC8vIOODouODh+ODq+aPj+eUu+OBq+eUqOOBhOOCi3ZpZXfooYzliJdcbiAgICBfbW9kZWxzOiBDc21fY3NtVmVjdG9yPExBcHBNb2RlbD47IC8vIOODouODh+ODq+OCpOODs+OCueOCv+ODs+OCueOBruOCs+ODs+ODhuODilxuICAgIF9zY2VuZUluZGV4OiBudW1iZXI7IC8vIOihqOekuuOBmeOCi+OCt+ODvOODs+OBruOCpOODs+ODh+ODg+OCr+OCueWApFxuICAgIC8vIOODouODvOOCt+ODp+ODs+WGjeeUn+e1guS6huOBruOCs+ODvOODq+ODkOODg+OCr+mWouaVsFxuICAgIF9maW5pc2hlZE1vdGlvbiA9IChzZWxmOiBBQ3ViaXNtTW90aW9uKTogdm9pZCA9PiB7XG4gICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKCdNb3Rpb24gRmluaXNoZWQ6Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGYpO1xuICAgIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQTBOQTtBQXpOQTtBQUNBO0FBbU9BO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZOQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBb0JBO0FBQUE7QUF6T0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lapplive2dmanager.ts\n");

/***/ }),

/***/ "./src/lappmodel.ts":
/*!**************************!*\
  !*** ./src/lappmodel.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LAppModel = exports.LoadStep = void 0;\nvar live2dcubismframework_1 = __webpack_require__(/*! @framework/live2dcubismframework */ \"./Framework/src/live2dcubismframework.ts\");\nvar cubismusermodel_1 = __webpack_require__(/*! @framework/model/cubismusermodel */ \"./Framework/src/model/cubismusermodel.ts\");\nvar cubismmodelsettingjson_1 = __webpack_require__(/*! @framework/cubismmodelsettingjson */ \"./Framework/src/cubismmodelsettingjson.ts\");\nvar cubismdefaultparameterid_1 = __webpack_require__(/*! @framework/cubismdefaultparameterid */ \"./Framework/src/cubismdefaultparameterid.ts\");\nvar acubismmotion_1 = __webpack_require__(/*! @framework/motion/acubismmotion */ \"./Framework/src/motion/acubismmotion.ts\");\nvar cubismeyeblink_1 = __webpack_require__(/*! @framework/effect/cubismeyeblink */ \"./Framework/src/effect/cubismeyeblink.ts\");\nvar cubismbreath_1 = __webpack_require__(/*! @framework/effect/cubismbreath */ \"./Framework/src/effect/cubismbreath.ts\");\nvar csmvector_1 = __webpack_require__(/*! @framework/type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar csmmap_1 = __webpack_require__(/*! @framework/type/csmmap */ \"./Framework/src/type/csmmap.ts\");\nvar cubismmotionqueuemanager_1 = __webpack_require__(/*! @framework/motion/cubismmotionqueuemanager */ \"./Framework/src/motion/cubismmotionqueuemanager.ts\");\nvar cubismdebug_1 = __webpack_require__(/*! @framework/utils/cubismdebug */ \"./Framework/src/utils/cubismdebug.ts\");\nvar InvalidMotionQueueEntryHandleValue = cubismmotionqueuemanager_1.Live2DCubismFramework.InvalidMotionQueueEntryHandleValue;\nvar csmMap = csmmap_1.Live2DCubismFramework.csmMap;\nvar csmVector = csmvector_1.Live2DCubismFramework.csmVector;\nvar CubismBreath = cubismbreath_1.Live2DCubismFramework.CubismBreath;\nvar BreathParameterData = cubismbreath_1.Live2DCubismFramework.BreathParameterData;\nvar CubismEyeBlink = cubismeyeblink_1.Live2DCubismFramework.CubismEyeBlink;\nvar ACubismMotion = acubismmotion_1.Live2DCubismFramework.ACubismMotion;\nvar CubismFramework = live2dcubismframework_1.Live2DCubismFramework.CubismFramework;\nvar CubismUserModel = cubismusermodel_1.Live2DCubismFramework.CubismUserModel;\nvar CubismModelSettingJson = cubismmodelsettingjson_1.Live2DCubismFramework.CubismModelSettingJson;\nvar CubismDefaultParameterId = cubismdefaultparameterid_1.Live2DCubismFramework;\nvar lapppal_1 = __webpack_require__(/*! ./lapppal */ \"./src/lapppal.ts\");\nvar lappdelegate_1 = __webpack_require__(/*! ./lappdelegate */ \"./src/lappdelegate.ts\");\nvar LAppDefine = __importStar(__webpack_require__(/*! ./lappdefine */ \"./src/lappdefine.ts\"));\n__webpack_require__(/*! whatwg-fetch */ \"./node_modules/whatwg-fetch/fetch.js\");\nvar lappdefine_1 = __webpack_require__(/*! ./lappdefine */ \"./src/lappdefine.ts\");\nvar LoadStep;\n(function (LoadStep) {\n    LoadStep[LoadStep[\"LoadAssets\"] = 0] = \"LoadAssets\";\n    LoadStep[LoadStep[\"LoadModel\"] = 1] = \"LoadModel\";\n    LoadStep[LoadStep[\"WaitLoadModel\"] = 2] = \"WaitLoadModel\";\n    LoadStep[LoadStep[\"LoadExpression\"] = 3] = \"LoadExpression\";\n    LoadStep[LoadStep[\"WaitLoadExpression\"] = 4] = \"WaitLoadExpression\";\n    LoadStep[LoadStep[\"LoadPhysics\"] = 5] = \"LoadPhysics\";\n    LoadStep[LoadStep[\"WaitLoadPhysics\"] = 6] = \"WaitLoadPhysics\";\n    LoadStep[LoadStep[\"LoadPose\"] = 7] = \"LoadPose\";\n    LoadStep[LoadStep[\"WaitLoadPose\"] = 8] = \"WaitLoadPose\";\n    LoadStep[LoadStep[\"SetupEyeBlink\"] = 9] = \"SetupEyeBlink\";\n    LoadStep[LoadStep[\"SetupBreath\"] = 10] = \"SetupBreath\";\n    LoadStep[LoadStep[\"LoadUserData\"] = 11] = \"LoadUserData\";\n    LoadStep[LoadStep[\"WaitLoadUserData\"] = 12] = \"WaitLoadUserData\";\n    LoadStep[LoadStep[\"SetupEyeBlinkIds\"] = 13] = \"SetupEyeBlinkIds\";\n    LoadStep[LoadStep[\"SetupLipSyncIds\"] = 14] = \"SetupLipSyncIds\";\n    LoadStep[LoadStep[\"SetupLayout\"] = 15] = \"SetupLayout\";\n    LoadStep[LoadStep[\"LoadMotion\"] = 16] = \"LoadMotion\";\n    LoadStep[LoadStep[\"WaitLoadMotion\"] = 17] = \"WaitLoadMotion\";\n    LoadStep[LoadStep[\"CompleteInitialize\"] = 18] = \"CompleteInitialize\";\n    LoadStep[LoadStep[\"CompleteSetupModel\"] = 19] = \"CompleteSetupModel\";\n    LoadStep[LoadStep[\"LoadTexture\"] = 20] = \"LoadTexture\";\n    LoadStep[LoadStep[\"WaitLoadTexture\"] = 21] = \"WaitLoadTexture\";\n    LoadStep[LoadStep[\"CompleteSetup\"] = 22] = \"CompleteSetup\";\n})(LoadStep = exports.LoadStep || (exports.LoadStep = {}));\nvar LAppModel = (function (_super) {\n    __extends(LAppModel, _super);\n    function LAppModel() {\n        var _this = _super.call(this) || this;\n        _this._debugMode = lappdefine_1.DebugModelLogEnable;\n        _this._modelSetting = null;\n        _this._modelHomeDir = null;\n        _this._userTimeSeconds = 0.0;\n        _this._eyeBlinkIds = new csmVector();\n        _this._lipSyncIds = new csmVector();\n        _this._motions = new csmMap();\n        _this._expressions = new csmMap();\n        _this._hitArea = new csmVector();\n        _this._userArea = new csmVector();\n        _this._idParamAngleX = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamAngleX);\n        _this._idParamAngleY = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamAngleY);\n        _this._idParamAngleZ = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamAngleZ);\n        _this._idParamEyeBallX = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamEyeBallX);\n        _this._idParamEyeBallY = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamEyeBallY);\n        _this._idParamBodyAngleX = CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamBodyAngleX);\n        _this._state = LoadStep.LoadAssets;\n        _this._expressionCount = 0;\n        _this._textureCount = 0;\n        _this._motionCount = 0;\n        _this._allMotionCount = 0;\n        return _this;\n    }\n    LAppModel.prototype.loadAssets = function (dir, fileName) {\n        var _this = this;\n        this._modelHomeDir = dir;\n        fetch(this._modelHomeDir + \"/\" + fileName)\n            .then(function (response) { return response.arrayBuffer(); })\n            .then(function (arrayBuffer) {\n            var setting = new CubismModelSettingJson(arrayBuffer, arrayBuffer.byteLength);\n            _this._state = LoadStep.LoadModel;\n            _this.setupModel(setting);\n        });\n    };\n    LAppModel.prototype.setupModel = function (setting) {\n        var _this = this;\n        this._updating = true;\n        this._initialized = false;\n        this._modelSetting = setting;\n        if (this._modelSetting.getModelFileName() != '') {\n            var modelFileName = this._modelSetting.getModelFileName();\n            fetch(this._modelHomeDir + \"/\" + modelFileName)\n                .then(function (response) { return response.arrayBuffer(); })\n                .then(function (arrayBuffer) {\n                _this.loadModel(arrayBuffer);\n                _this._state = LoadStep.LoadExpression;\n                loadCubismExpression();\n            });\n            this._state = LoadStep.WaitLoadModel;\n        }\n        else {\n            lapppal_1.LAppPal.printMessage('Model data does not exist.');\n        }\n        var loadCubismExpression = function () {\n            if (_this._modelSetting.getExpressionCount() > 0) {\n                var count_1 = _this._modelSetting.getExpressionCount();\n                var _loop_1 = function (i) {\n                    var expressionName = _this._modelSetting.getExpressionName(i);\n                    var expressionFileName = _this._modelSetting.getExpressionFileName(i);\n                    fetch(_this._modelHomeDir + \"/\" + expressionFileName)\n                        .then(function (response) { return response.arrayBuffer(); })\n                        .then(function (arrayBuffer) {\n                        var motion = _this.loadExpression(arrayBuffer, arrayBuffer.byteLength, expressionName);\n                        if (_this._expressions.getValue(expressionName) != null) {\n                            ACubismMotion.delete(_this._expressions.getValue(expressionName));\n                            _this._expressions.setValue(expressionName, null);\n                        }\n                        _this._expressions.setValue(expressionName, motion);\n                        _this._expressionCount++;\n                        if (_this._expressionCount >= count_1) {\n                            _this._state = LoadStep.LoadPhysics;\n                            loadCubismPhysics();\n                        }\n                    });\n                };\n                for (var i = 0; i < count_1; i++) {\n                    _loop_1(i);\n                }\n                _this._state = LoadStep.WaitLoadExpression;\n            }\n            else {\n                _this._state = LoadStep.LoadPhysics;\n                loadCubismPhysics();\n            }\n        };\n        var loadCubismPhysics = function () {\n            if (_this._modelSetting.getPhysicsFileName() != '') {\n                var physicsFileName = _this._modelSetting.getPhysicsFileName();\n                fetch(_this._modelHomeDir + \"/\" + physicsFileName)\n                    .then(function (response) { return response.arrayBuffer(); })\n                    .then(function (arrayBuffer) {\n                    _this.loadPhysics(arrayBuffer, arrayBuffer.byteLength);\n                    _this._state = LoadStep.LoadPose;\n                    loadCubismPose();\n                });\n                _this._state = LoadStep.WaitLoadPhysics;\n            }\n            else {\n                _this._state = LoadStep.LoadPose;\n                loadCubismPose();\n            }\n        };\n        var loadCubismPose = function () {\n            if (_this._modelSetting.getPoseFileName() != '') {\n                var poseFileName = _this._modelSetting.getPoseFileName();\n                fetch(_this._modelHomeDir + \"/\" + poseFileName)\n                    .then(function (response) { return response.arrayBuffer(); })\n                    .then(function (arrayBuffer) {\n                    _this.loadPose(arrayBuffer, arrayBuffer.byteLength);\n                    _this._state = LoadStep.SetupEyeBlink;\n                    setupEyeBlink();\n                });\n                _this._state = LoadStep.WaitLoadPose;\n            }\n            else {\n                _this._state = LoadStep.SetupEyeBlink;\n                setupEyeBlink();\n            }\n        };\n        var setupEyeBlink = function () {\n            if (_this._modelSetting.getEyeBlinkParameterCount() > 0) {\n                _this._eyeBlink = CubismEyeBlink.create(_this._modelSetting);\n                _this._state = LoadStep.SetupBreath;\n            }\n            setupBreath();\n        };\n        var setupBreath = function () {\n            _this._breath = CubismBreath.create();\n            var breathParameters = new csmVector();\n            breathParameters.pushBack(new BreathParameterData(_this._idParamAngleX, 0.0, 15.0, 6.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(_this._idParamAngleY, 0.0, 8.0, 3.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(_this._idParamAngleZ, 0.0, 10.0, 5.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(_this._idParamBodyAngleX, 0.0, 4.0, 15.5345, 0.5));\n            breathParameters.pushBack(new BreathParameterData(CubismFramework.getIdManager().getId(CubismDefaultParameterId.ParamBreath), 0.0, 0.5, 3.2345, 0.5));\n            _this._breath.setParameters(breathParameters);\n            _this._state = LoadStep.LoadUserData;\n            loadUserData();\n        };\n        var loadUserData = function () {\n            if (_this._modelSetting.getUserDataFile() != '') {\n                var userDataFile = _this._modelSetting.getUserDataFile();\n                fetch(_this._modelHomeDir + \"/\" + userDataFile)\n                    .then(function (response) { return response.arrayBuffer(); })\n                    .then(function (arrayBuffer) {\n                    _this.loadUserData(arrayBuffer, arrayBuffer.byteLength);\n                    _this._state = LoadStep.SetupEyeBlinkIds;\n                    setupEyeBlinkIds();\n                });\n                _this._state = LoadStep.WaitLoadUserData;\n            }\n            else {\n                _this._state = LoadStep.SetupEyeBlinkIds;\n                setupEyeBlinkIds();\n            }\n        };\n        var setupEyeBlinkIds = function () {\n            var eyeBlinkIdCount = _this._modelSetting.getEyeBlinkParameterCount();\n            for (var i = 0; i < eyeBlinkIdCount; ++i) {\n                _this._eyeBlinkIds.pushBack(_this._modelSetting.getEyeBlinkParameterId(i));\n            }\n            _this._state = LoadStep.SetupLipSyncIds;\n            setupLipSyncIds();\n        };\n        var setupLipSyncIds = function () {\n            var lipSyncIdCount = _this._modelSetting.getLipSyncParameterCount();\n            for (var i = 0; i < lipSyncIdCount; ++i) {\n                _this._lipSyncIds.pushBack(_this._modelSetting.getLipSyncParameterId(i));\n            }\n            _this._state = LoadStep.SetupLayout;\n            setupLayout();\n        };\n        var setupLayout = function () {\n            var layout = new csmMap();\n            _this._modelSetting.getLayoutMap(layout);\n            _this._modelMatrix.setupFromLayout(layout);\n            _this._state = LoadStep.LoadMotion;\n            loadCubismMotion();\n        };\n        var loadCubismMotion = function () {\n            _this._state = LoadStep.WaitLoadMotion;\n            _this._model.saveParameters();\n            _this._allMotionCount = 0;\n            _this._motionCount = 0;\n            var group = [];\n            var motionGroupCount = _this._modelSetting.getMotionGroupCount();\n            for (var i = 0; i < motionGroupCount; i++) {\n                group[i] = _this._modelSetting.getMotionGroupName(i);\n                _this._allMotionCount += _this._modelSetting.getMotionCount(group[i]);\n            }\n            for (var i = 0; i < motionGroupCount; i++) {\n                _this.preLoadMotionGroup(group[i]);\n            }\n            if (motionGroupCount == 0) {\n                _this._state = LoadStep.LoadTexture;\n                _this._motionManager.stopAllMotions();\n                _this._updating = false;\n                _this._initialized = true;\n                _this.createRenderer();\n                _this.setupTextures();\n                _this.getRenderer().startUp(lappdelegate_1.gl);\n            }\n        };\n    };\n    LAppModel.prototype.setupTextures = function () {\n        var _this = this;\n        var usePremultiply = true;\n        if (this._state == LoadStep.LoadTexture) {\n            var textureCount_1 = this._modelSetting.getTextureCount();\n            var _loop_2 = function (modelTextureNumber) {\n                if (this_1._modelSetting.getTextureFileName(modelTextureNumber) == '') {\n                    console.log('getTextureFileName null');\n                    return \"continue\";\n                }\n                var texturePath = this_1._modelSetting.getTextureFileName(modelTextureNumber);\n                texturePath = this_1._modelHomeDir + texturePath;\n                var onLoad = function (textureInfo) {\n                    _this.getRenderer().bindTexture(modelTextureNumber, textureInfo.id);\n                    _this._textureCount++;\n                    if (_this._textureCount >= textureCount_1) {\n                        _this._state = LoadStep.CompleteSetup;\n                        lappdelegate_1.lAppDelegateEvent.modelCompleteSetup();\n                    }\n                };\n                lappdelegate_1.LAppDelegate.getInstance()\n                    .getTextureManager()\n                    .createTextureFromPngFile(texturePath, usePremultiply, onLoad);\n                this_1.getRenderer().setIsPremultipliedAlpha(usePremultiply);\n            };\n            var this_1 = this;\n            for (var modelTextureNumber = 0; modelTextureNumber < textureCount_1; modelTextureNumber++) {\n                _loop_2(modelTextureNumber);\n            }\n            this._state = LoadStep.WaitLoadTexture;\n        }\n    };\n    LAppModel.prototype.reloadRenderer = function () {\n        this.deleteRenderer();\n        this.createRenderer();\n        this.setupTextures();\n    };\n    LAppModel.prototype.update = function () {\n        if (this._state != LoadStep.CompleteSetup)\n            return;\n        var deltaTimeSeconds = lapppal_1.LAppPal.getDeltaTime();\n        this._userTimeSeconds += deltaTimeSeconds;\n        this._dragManager.update(deltaTimeSeconds);\n        this._dragX = this._dragManager.getX();\n        this._dragY = this._dragManager.getY();\n        var motionUpdated = false;\n        this._model.loadParameters();\n        if (this._motionManager.isFinished()) {\n            this.startRandomMotion(LAppDefine.MotionGroupIdle, LAppDefine.PriorityIdle);\n        }\n        else {\n            motionUpdated = this._motionManager.updateMotion(this._model, deltaTimeSeconds);\n        }\n        this._model.saveParameters();\n        if (!motionUpdated) {\n            if (this._eyeBlink != null) {\n                this._eyeBlink.updateParameters(this._model, deltaTimeSeconds);\n            }\n        }\n        if (this._expressionManager != null) {\n            this._expressionManager.updateMotion(this._model, deltaTimeSeconds);\n        }\n        this._model.addParameterValueById(this._idParamAngleX, this._dragX * 30);\n        this._model.addParameterValueById(this._idParamAngleY, this._dragY * 30);\n        this._model.addParameterValueById(this._idParamAngleZ, this._dragX * this._dragY * -30);\n        this._model.addParameterValueById(this._idParamBodyAngleX, this._dragX * 10);\n        this._model.addParameterValueById(this._idParamEyeBallX, this._dragX);\n        this._model.addParameterValueById(this._idParamEyeBallY, this._dragY);\n        if (this._breath != null) {\n            this._breath.updateParameters(this._model, deltaTimeSeconds);\n        }\n        if (this._physics != null) {\n            this._physics.evaluate(this._model, deltaTimeSeconds);\n        }\n        if (this._lipsync) {\n            var value = 0;\n            for (var i = 0; i < this._lipSyncIds.getSize(); ++i) {\n                this._model.addParameterValueById(this._lipSyncIds.at(i), value, 0.8);\n            }\n        }\n        if (this._pose != null) {\n            this._pose.updateParameters(this._model, deltaTimeSeconds);\n        }\n        this._model.update();\n    };\n    LAppModel.prototype.startMotion = function (group, no, priority, onFinishedMotionHandler) {\n        var _this = this;\n        if (priority == LAppDefine.PriorityForce) {\n            this._motionManager.setReservePriority(priority);\n        }\n        else if (!this._motionManager.reserveMotion(priority)) {\n            if (this._debugMode) {\n                lapppal_1.LAppPal.printMessage(\"[APP]can't start motion.\");\n            }\n            return InvalidMotionQueueEntryHandleValue;\n        }\n        var motionFileName = this._modelSetting.getMotionFileName(group, no);\n        var name = group + \"_\" + no;\n        var motion = this._motions.getValue(name);\n        var autoDelete = false;\n        if (motion == null) {\n            fetch(this._modelHomeDir + \"/\" + motionFileName)\n                .then(function (response) { return response.arrayBuffer(); })\n                .then(function (arrayBuffer) {\n                motion = _this.loadMotion(arrayBuffer, arrayBuffer.byteLength, null, onFinishedMotionHandler);\n                var fadeTime = _this._modelSetting.getMotionFadeInTimeValue(group, no);\n                if (fadeTime >= 0.0) {\n                    motion.setFadeInTime(fadeTime);\n                }\n                fadeTime = _this._modelSetting.getMotionFadeOutTimeValue(group, no);\n                if (fadeTime >= 0.0) {\n                    motion.setFadeOutTime(fadeTime);\n                }\n                motion.setEffectIds(_this._eyeBlinkIds, _this._lipSyncIds);\n                autoDelete = true;\n            });\n        }\n        else {\n            motion.setFinishedMotionHandler(onFinishedMotionHandler);\n        }\n        if (this._debugMode) {\n            lapppal_1.LAppPal.printMessage(\"[APP]start motion: [\" + group + \"_\" + no);\n        }\n        return this._motionManager.startMotionPriority(motion, autoDelete, priority);\n    };\n    LAppModel.prototype.startRandomMotion = function (group, priority, onFinishedMotionHandler) {\n        if (this._modelSetting.getMotionCount(group) == 0) {\n            return InvalidMotionQueueEntryHandleValue;\n        }\n        var no = Math.floor(Math.random() * this._modelSetting.getMotionCount(group));\n        return this.startMotion(group, no, priority, onFinishedMotionHandler);\n    };\n    LAppModel.prototype.setExpression = function (expressionId) {\n        var motion = this._expressions.getValue(expressionId);\n        if (this._debugMode) {\n            lapppal_1.LAppPal.printMessage(\"[APP]expression: [\" + expressionId + \"]\");\n        }\n        if (motion != null) {\n            this._expressionManager.startMotionPriority(motion, false, LAppDefine.PriorityForce);\n        }\n        else {\n            if (this._debugMode) {\n                lapppal_1.LAppPal.printMessage(\"[APP]expression[\" + expressionId + \"] is null\");\n            }\n        }\n    };\n    LAppModel.prototype.setRandomExpression = function () {\n        if (this._expressions.getSize() == 0) {\n            return;\n        }\n        var no = Math.floor(Math.random() * this._expressions.getSize());\n        for (var i = 0; i < this._expressions.getSize(); i++) {\n            if (i == no) {\n                var name_1 = this._expressions._keyValues[i].first;\n                this.setExpression(name_1);\n                return;\n            }\n        }\n    };\n    LAppModel.prototype.motionEventFired = function (eventValue) {\n        cubismdebug_1.CubismLogInfo('{0} is fired on LAppModel!!', eventValue.s);\n    };\n    LAppModel.prototype.hitTest = function (hitArenaName, x, y) {\n        if (this._opacity < 1) {\n            return false;\n        }\n        var count = this._modelSetting.getHitAreasCount();\n        for (var i = 0; i < count; i++) {\n            if (this._modelSetting.getHitAreaName(i) == hitArenaName) {\n                var drawId = this._modelSetting.getHitAreaId(i);\n                return this.isHit(drawId, x, y);\n            }\n        }\n        return false;\n    };\n    LAppModel.prototype.preLoadMotionGroup = function (group) {\n        var _this = this;\n        var _loop_3 = function (i) {\n            var motionFileName = this_2._modelSetting.getMotionFileName(group, i);\n            var name_2 = group + \"_\" + i;\n            if (this_2._debugMode) {\n                lapppal_1.LAppPal.printMessage(\"[APP]load motion: \" + motionFileName + \" => [\" + name_2 + \"]\");\n            }\n            fetch(this_2._modelHomeDir + \"/\" + motionFileName)\n                .then(function (response) { return response.arrayBuffer(); })\n                .then(function (arrayBuffer) {\n                var tmpMotion = _this.loadMotion(arrayBuffer, arrayBuffer.byteLength, name_2);\n                var fadeTime = _this._modelSetting.getMotionFadeInTimeValue(group, i);\n                if (fadeTime >= 0.0) {\n                    tmpMotion.setFadeInTime(fadeTime);\n                }\n                fadeTime = _this._modelSetting.getMotionFadeOutTimeValue(group, i);\n                if (fadeTime >= 0.0) {\n                    tmpMotion.setFadeOutTime(fadeTime);\n                }\n                tmpMotion.setEffectIds(_this._eyeBlinkIds, _this._lipSyncIds);\n                if (_this._motions.getValue(name_2) != null) {\n                    ACubismMotion.delete(_this._motions.getValue(name_2));\n                }\n                _this._motions.setValue(name_2, tmpMotion);\n                _this._motionCount++;\n                if (_this._motionCount >= _this._allMotionCount) {\n                    _this._state = LoadStep.LoadTexture;\n                    _this._motionManager.stopAllMotions();\n                    _this._updating = false;\n                    _this._initialized = true;\n                    _this.createRenderer();\n                    _this.setupTextures();\n                    _this.getRenderer().startUp(lappdelegate_1.gl);\n                }\n            });\n        };\n        var this_2 = this;\n        for (var i = 0; i < this._modelSetting.getMotionCount(group); i++) {\n            _loop_3(i);\n        }\n    };\n    LAppModel.prototype.releaseMotions = function () {\n        this._motions.clear();\n    };\n    LAppModel.prototype.releaseExpressions = function () {\n        this._expressions.clear();\n    };\n    LAppModel.prototype.doDraw = function () {\n        if (this._model == null)\n            return;\n        var viewport = [0, 0, lappdelegate_1.canvas.width, lappdelegate_1.canvas.height];\n        this.getRenderer().setRenderState(lappdelegate_1.frameBuffer, viewport);\n        this.getRenderer().drawModel();\n    };\n    LAppModel.prototype.draw = function (matrix) {\n        if (this._model == null) {\n            return;\n        }\n        if (this._state == LoadStep.CompleteSetup) {\n            matrix.multiplyByMatrix(this._modelMatrix);\n            this.getRenderer().setMvpMatrix(matrix);\n            this.doDraw();\n        }\n    };\n    return LAppModel;\n}(CubismUserModel));\nexports.LAppModel = LAppModel;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcG1vZGVsLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2xhcHBtb2RlbC50cz8xOGNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IExpdmUyREN1YmlzbUZyYW1ld29yayBhcyBsaXZlMmRjdWJpc21mcmFtZXdvcmsgfSBmcm9tICdAZnJhbWV3b3JrL2xpdmUyZGN1YmlzbWZyYW1ld29yayc7XG5pbXBvcnQgeyBMaXZlMkRDdWJpc21GcmFtZXdvcmsgYXMgY3ViaXNtaWQgfSBmcm9tICdAZnJhbWV3b3JrL2lkL2N1YmlzbWlkJztcbmltcG9ydCB7IExpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjdWJpc211c2VybW9kZWwgfSBmcm9tICdAZnJhbWV3b3JrL21vZGVsL2N1YmlzbXVzZXJtb2RlbCc7XG5pbXBvcnQgeyBMaXZlMkRDdWJpc21GcmFtZXdvcmsgYXMgaWN1YmlzbW1vZGVsc2V0dGluZyB9IGZyb20gJ0BmcmFtZXdvcmsvaWN1YmlzbW1vZGVsc2V0dGluZyc7XG5pbXBvcnQgeyBMaXZlMkRDdWJpc21GcmFtZXdvcmsgYXMgY3ViaXNtbW9kZWxzZXR0aW5nanNvbiB9IGZyb20gJ0BmcmFtZXdvcmsvY3ViaXNtbW9kZWxzZXR0aW5nanNvbic7XG5pbXBvcnQgeyBMaXZlMkRDdWJpc21GcmFtZXdvcmsgYXMgY3ViaXNtZGVmYXVsdHBhcmFtZXRlcmlkIH0gZnJvbSAnQGZyYW1ld29yay9jdWJpc21kZWZhdWx0cGFyYW1ldGVyaWQnO1xuaW1wb3J0IHsgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGFjdWJpc21tb3Rpb24gfSBmcm9tICdAZnJhbWV3b3JrL21vdGlvbi9hY3ViaXNtbW90aW9uJztcbmltcG9ydCB7IExpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjdWJpc21leWVibGluayB9IGZyb20gJ0BmcmFtZXdvcmsvZWZmZWN0L2N1YmlzbWV5ZWJsaW5rJztcbmltcG9ydCB7IExpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjdWJpc21icmVhdGggfSBmcm9tICdAZnJhbWV3b3JrL2VmZmVjdC9jdWJpc21icmVhdGgnO1xuaW1wb3J0IHsgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGNzbXZlY3RvciB9IGZyb20gJ0BmcmFtZXdvcmsvdHlwZS9jc212ZWN0b3InO1xuaW1wb3J0IHsgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGNzbW1hcCB9IGZyb20gJ0BmcmFtZXdvcmsvdHlwZS9jc21tYXAnO1xuaW1wb3J0IHsgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGN1YmlzbW1hdHJpeDQ0IH0gZnJvbSAnQGZyYW1ld29yay9tYXRoL2N1YmlzbW1hdHJpeDQ0JztcbmltcG9ydCB7IExpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjdWJpc21tb3Rpb24gfSBmcm9tICdAZnJhbWV3b3JrL21vdGlvbi9jdWJpc21tb3Rpb24nO1xuaW1wb3J0IHsgTGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGN1YmlzbW1vdGlvbnF1ZXVlbWFuYWdlciB9IGZyb20gJ0BmcmFtZXdvcmsvbW90aW9uL2N1YmlzbW1vdGlvbnF1ZXVlbWFuYWdlcic7XG5pbXBvcnQgeyBMaXZlMkRDdWJpc21GcmFtZXdvcmsgYXMgY3Ntc3RyaW5nIH0gZnJvbSAnQGZyYW1ld29yay90eXBlL2NzbXN0cmluZyc7XG5pbXBvcnQgeyBMaXZlMkRDdWJpc21GcmFtZXdvcmsgYXMgY3NtcmVjdCB9IGZyb20gJ0BmcmFtZXdvcmsvdHlwZS9jc21yZWN0Zic7XG5pbXBvcnQgeyBDdWJpc21Mb2dJbmZvIH0gZnJvbSAnQGZyYW1ld29yay91dGlscy9jdWJpc21kZWJ1Zyc7XG5pbXBvcnQgY3NtUmVjdCA9IGNzbXJlY3QuY3NtUmVjdDtcbmltcG9ydCBjc21TdHJpbmcgPSBjc21zdHJpbmcuY3NtU3RyaW5nO1xuaW1wb3J0IEludmFsaWRNb3Rpb25RdWV1ZUVudHJ5SGFuZGxlVmFsdWUgPSBjdWJpc21tb3Rpb25xdWV1ZW1hbmFnZXIuSW52YWxpZE1vdGlvblF1ZXVlRW50cnlIYW5kbGVWYWx1ZTtcbmltcG9ydCBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5SGFuZGxlID0gY3ViaXNtbW90aW9ucXVldWVtYW5hZ2VyLkN1YmlzbU1vdGlvblF1ZXVlRW50cnlIYW5kbGU7XG5pbXBvcnQgQ3ViaXNtTW90aW9uID0gY3ViaXNtbW90aW9uLkN1YmlzbU1vdGlvbjtcbmltcG9ydCBDdWJpc21NYXRyaXg0NCA9IGN1YmlzbW1hdHJpeDQ0LkN1YmlzbU1hdHJpeDQ0O1xuaW1wb3J0IGNzbU1hcCA9IGNzbW1hcC5jc21NYXA7XG5pbXBvcnQgY3NtVmVjdG9yID0gY3NtdmVjdG9yLmNzbVZlY3RvcjtcbmltcG9ydCBDdWJpc21CcmVhdGggPSBjdWJpc21icmVhdGguQ3ViaXNtQnJlYXRoO1xuaW1wb3J0IEJyZWF0aFBhcmFtZXRlckRhdGEgPSBjdWJpc21icmVhdGguQnJlYXRoUGFyYW1ldGVyRGF0YTtcbmltcG9ydCBDdWJpc21FeWVCbGluayA9IGN1YmlzbWV5ZWJsaW5rLkN1YmlzbUV5ZUJsaW5rO1xuaW1wb3J0IEFDdWJpc21Nb3Rpb24gPSBhY3ViaXNtbW90aW9uLkFDdWJpc21Nb3Rpb247XG5pbXBvcnQgRmluaXNoZWRNb3Rpb25DYWxsYmFjayA9IGFjdWJpc21tb3Rpb24uRmluaXNoZWRNb3Rpb25DYWxsYmFjaztcbmltcG9ydCBDdWJpc21GcmFtZXdvcmsgPSBsaXZlMmRjdWJpc21mcmFtZXdvcmsuQ3ViaXNtRnJhbWV3b3JrO1xuaW1wb3J0IEN1YmlzbUlkSGFuZGxlID0gY3ViaXNtaWQuQ3ViaXNtSWRIYW5kbGU7XG5pbXBvcnQgQ3ViaXNtVXNlck1vZGVsID0gY3ViaXNtdXNlcm1vZGVsLkN1YmlzbVVzZXJNb2RlbDtcbmltcG9ydCBJQ3ViaXNtTW9kZWxTZXR0aW5nID0gaWN1YmlzbW1vZGVsc2V0dGluZy5JQ3ViaXNtTW9kZWxTZXR0aW5nO1xuaW1wb3J0IEN1YmlzbU1vZGVsU2V0dGluZ0pzb24gPSBjdWJpc21tb2RlbHNldHRpbmdqc29uLkN1YmlzbU1vZGVsU2V0dGluZ0pzb247XG5pbXBvcnQgQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkID0gY3ViaXNtZGVmYXVsdHBhcmFtZXRlcmlkO1xuXG5pbXBvcnQgeyBMQXBwUGFsIH0gZnJvbSAnLi9sYXBwcGFsJztcbmltcG9ydCB7Z2wsIGNhbnZhcywgZnJhbWVCdWZmZXIsIExBcHBEZWxlZ2F0ZSwgbEFwcERlbGVnYXRlRXZlbnR9IGZyb20gJy4vbGFwcGRlbGVnYXRlJztcbmltcG9ydCB7IFRleHR1cmVJbmZvIH0gZnJvbSAnLi9sYXBwdGV4dHVyZW1hbmFnZXInO1xuaW1wb3J0ICogYXMgTEFwcERlZmluZSBmcm9tICcuL2xhcHBkZWZpbmUnO1xuaW1wb3J0ICd3aGF0d2ctZmV0Y2gnO1xuaW1wb3J0IHtEZWJ1Z01vZGVsTG9nRW5hYmxlfSBmcm9tIFwiLi9sYXBwZGVmaW5lXCI7XG5cbmV4cG9ydCBlbnVtIExvYWRTdGVwIHtcbiAgTG9hZEFzc2V0cyxcbiAgTG9hZE1vZGVsLFxuICBXYWl0TG9hZE1vZGVsLFxuICBMb2FkRXhwcmVzc2lvbixcbiAgV2FpdExvYWRFeHByZXNzaW9uLFxuICBMb2FkUGh5c2ljcyxcbiAgV2FpdExvYWRQaHlzaWNzLFxuICBMb2FkUG9zZSxcbiAgV2FpdExvYWRQb3NlLFxuICBTZXR1cEV5ZUJsaW5rLFxuICBTZXR1cEJyZWF0aCxcbiAgTG9hZFVzZXJEYXRhLFxuICBXYWl0TG9hZFVzZXJEYXRhLFxuICBTZXR1cEV5ZUJsaW5rSWRzLFxuICBTZXR1cExpcFN5bmNJZHMsXG4gIFNldHVwTGF5b3V0LFxuICBMb2FkTW90aW9uLFxuICBXYWl0TG9hZE1vdGlvbixcbiAgQ29tcGxldGVJbml0aWFsaXplLFxuICBDb21wbGV0ZVNldHVwTW9kZWwsXG4gIExvYWRUZXh0dXJlLFxuICBXYWl0TG9hZFRleHR1cmUsXG4gIENvbXBsZXRlU2V0dXBcbn1cblxuLyoqXG4gKiDjg6bjg7zjgrbjg7zjgYzlrp/pmpvjgavkvb/nlKjjgZnjgovjg6Ljg4fjg6vjga7lrp/oo4Xjgq/jg6njgrk8YnI+XG4gKiDjg6Ljg4fjg6vnlJ/miJDjgIHmqZ/og73jgrPjg7Pjg53jg7zjg43jg7Pjg4jnlJ/miJDjgIHmm7TmlrDlh6bnkIbjgajjg6zjg7Pjg4Djg6rjg7PjgrDjga7lkbzjgbPlh7rjgZfjgpLooYzjgYbjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIExBcHBNb2RlbCBleHRlbmRzIEN1YmlzbVVzZXJNb2RlbCB7XG4gIC8qKlxuICAgKiBtb2RlbDMuanNvbuOBjOe9ruOBi+OCjOOBn+ODh+OCo+ODrOOCr+ODiOODquOBqOODleOCoeOCpOODq+ODkeOCueOBi+OCieODouODh+ODq+OCkueUn+aIkOOBmeOCi1xuICAgKiBAcGFyYW0gZGlyXG4gICAqIEBwYXJhbSBmaWxlTmFtZVxuICAgKi9cbiAgcHVibGljIGxvYWRBc3NldHMoZGlyOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbEhvbWVEaXIgPSBkaXI7XG4gICAgZmV0Y2goYCR7dGhpcy5fbW9kZWxIb21lRGlyfS8ke2ZpbGVOYW1lfWApXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5hcnJheUJ1ZmZlcigpKVxuICAgICAgLnRoZW4oYXJyYXlCdWZmZXIgPT4ge1xuICAgICAgICBjb25zdCBzZXR0aW5nOiBJQ3ViaXNtTW9kZWxTZXR0aW5nID0gbmV3IEN1YmlzbU1vZGVsU2V0dGluZ0pzb24oXG4gICAgICAgICAgYXJyYXlCdWZmZXIsXG4gICAgICAgICAgYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIOOCueODhuODvOODiOOCkuabtOaWsFxuICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRNb2RlbDtcblxuICAgICAgICAvLyDntZDmnpzjgpLkv53lrZhcbiAgICAgICAgdGhpcy5zZXR1cE1vZGVsKHNldHRpbmcpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogbW9kZWwzLmpzb27jgYvjgonjg6Ljg4fjg6vjgpLnlJ/miJDjgZnjgovjgIJcbiAgICogbW9kZWwzLmpzb27jga7oqJjov7DjgavlvpPjgaPjgabjg6Ljg4fjg6vnlJ/miJDjgIHjg6Ljg7zjgrfjg6fjg7PjgIHniannkIbmvJTnrpfjgarjganjga7jgrPjg7Pjg53jg7zjg43jg7Pjg4jnlJ/miJDjgpLooYzjgYbjgIJcbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmcgSUN1YmlzbU1vZGVsU2V0dGluZ+OBruOCpOODs+OCueOCv+ODs+OCuVxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cE1vZGVsKHNldHRpbmc6IElDdWJpc21Nb2RlbFNldHRpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGluZyA9IHRydWU7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX21vZGVsU2V0dGluZyA9IHNldHRpbmc7XG5cbiAgICAvLyBDdWJpc21Nb2RlbFxuICAgIGlmICh0aGlzLl9tb2RlbFNldHRpbmcuZ2V0TW9kZWxGaWxlTmFtZSgpICE9ICcnKSB7XG4gICAgICBjb25zdCBtb2RlbEZpbGVOYW1lID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldE1vZGVsRmlsZU5hbWUoKTtcblxuICAgICAgZmV0Y2goYCR7dGhpcy5fbW9kZWxIb21lRGlyfS8ke21vZGVsRmlsZU5hbWV9YClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgLnRoZW4oYXJyYXlCdWZmZXIgPT4ge1xuICAgICAgICAgIHRoaXMubG9hZE1vZGVsKGFycmF5QnVmZmVyKTtcbiAgICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRFeHByZXNzaW9uO1xuXG4gICAgICAgICAgLy8gY2FsbGJhY2tcbiAgICAgICAgICBsb2FkQ3ViaXNtRXhwcmVzc2lvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5XYWl0TG9hZE1vZGVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBMQXBwUGFsLnByaW50TWVzc2FnZSgnTW9kZWwgZGF0YSBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICB9XG5cbiAgICAvLyBFeHByZXNzaW9uXG4gICAgY29uc3QgbG9hZEN1YmlzbUV4cHJlc3Npb24gPSAoKTogdm9pZCA9PiB7XG4gICAgICBpZiAodGhpcy5fbW9kZWxTZXR0aW5nLmdldEV4cHJlc3Npb25Db3VudCgpID4gMCkge1xuICAgICAgICBjb25zdCBjb3VudDogbnVtYmVyID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldEV4cHJlc3Npb25Db3VudCgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb25OYW1lID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldEV4cHJlc3Npb25OYW1lKGkpO1xuICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb25GaWxlTmFtZSA9IHRoaXMuX21vZGVsU2V0dGluZy5nZXRFeHByZXNzaW9uRmlsZU5hbWUoXG4gICAgICAgICAgICBpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGZldGNoKGAke3RoaXMuX21vZGVsSG9tZURpcn0vJHtleHByZXNzaW9uRmlsZU5hbWV9YClcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpXG4gICAgICAgICAgICAudGhlbihhcnJheUJ1ZmZlciA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG1vdGlvbjogQUN1YmlzbU1vdGlvbiA9IHRoaXMubG9hZEV4cHJlc3Npb24oXG4gICAgICAgICAgICAgICAgYXJyYXlCdWZmZXIsXG4gICAgICAgICAgICAgICAgYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uTmFtZVxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzLl9leHByZXNzaW9ucy5nZXRWYWx1ZShleHByZXNzaW9uTmFtZSkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEFDdWJpc21Nb3Rpb24uZGVsZXRlKFxuICAgICAgICAgICAgICAgICAgdGhpcy5fZXhwcmVzc2lvbnMuZ2V0VmFsdWUoZXhwcmVzc2lvbk5hbWUpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9leHByZXNzaW9ucy5zZXRWYWx1ZShleHByZXNzaW9uTmFtZSwgbnVsbCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLl9leHByZXNzaW9ucy5zZXRWYWx1ZShleHByZXNzaW9uTmFtZSwgbW90aW9uKTtcblxuICAgICAgICAgICAgICB0aGlzLl9leHByZXNzaW9uQ291bnQrKztcblxuICAgICAgICAgICAgICBpZiAodGhpcy5fZXhwcmVzc2lvbkNvdW50ID49IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5Mb2FkUGh5c2ljcztcblxuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgbG9hZEN1YmlzbVBoeXNpY3MoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5XYWl0TG9hZEV4cHJlc3Npb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRQaHlzaWNzO1xuXG4gICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgIGxvYWRDdWJpc21QaHlzaWNzKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFBoeXNpY3NcbiAgICBjb25zdCBsb2FkQ3ViaXNtUGh5c2ljcyA9ICgpOiB2b2lkID0+IHtcbiAgICAgIGlmICh0aGlzLl9tb2RlbFNldHRpbmcuZ2V0UGh5c2ljc0ZpbGVOYW1lKCkgIT0gJycpIHtcbiAgICAgICAgY29uc3QgcGh5c2ljc0ZpbGVOYW1lID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldFBoeXNpY3NGaWxlTmFtZSgpO1xuXG4gICAgICAgIGZldGNoKGAke3RoaXMuX21vZGVsSG9tZURpcn0vJHtwaHlzaWNzRmlsZU5hbWV9YClcbiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5hcnJheUJ1ZmZlcigpKVxuICAgICAgICAgIC50aGVuKGFycmF5QnVmZmVyID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZFBoeXNpY3MoYXJyYXlCdWZmZXIsIGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpO1xuXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRQb3NlO1xuXG4gICAgICAgICAgICAvLyBjYWxsYmFja1xuICAgICAgICAgICAgbG9hZEN1YmlzbVBvc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5XYWl0TG9hZFBoeXNpY3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRQb3NlO1xuXG4gICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgIGxvYWRDdWJpc21Qb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFBvc2VcbiAgICBjb25zdCBsb2FkQ3ViaXNtUG9zZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgIGlmICh0aGlzLl9tb2RlbFNldHRpbmcuZ2V0UG9zZUZpbGVOYW1lKCkgIT0gJycpIHtcbiAgICAgICAgY29uc3QgcG9zZUZpbGVOYW1lID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldFBvc2VGaWxlTmFtZSgpO1xuXG4gICAgICAgIGZldGNoKGAke3RoaXMuX21vZGVsSG9tZURpcn0vJHtwb3NlRmlsZU5hbWV9YClcbiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5hcnJheUJ1ZmZlcigpKVxuICAgICAgICAgIC50aGVuKGFycmF5QnVmZmVyID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZFBvc2UoYXJyYXlCdWZmZXIsIGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpO1xuXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLlNldHVwRXllQmxpbms7XG5cbiAgICAgICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgICAgICBzZXR1cEV5ZUJsaW5rKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gTG9hZFN0ZXAuV2FpdExvYWRQb3NlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5TZXR1cEV5ZUJsaW5rO1xuXG4gICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgIHNldHVwRXllQmxpbmsoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXllQmxpbmtcbiAgICBjb25zdCBzZXR1cEV5ZUJsaW5rID0gKCk6IHZvaWQgPT4ge1xuICAgICAgaWYgKHRoaXMuX21vZGVsU2V0dGluZy5nZXRFeWVCbGlua1BhcmFtZXRlckNvdW50KCkgPiAwKSB7XG4gICAgICAgIHRoaXMuX2V5ZUJsaW5rID0gQ3ViaXNtRXllQmxpbmsuY3JlYXRlKHRoaXMuX21vZGVsU2V0dGluZyk7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gTG9hZFN0ZXAuU2V0dXBCcmVhdGg7XG4gICAgICB9XG5cbiAgICAgIC8vIGNhbGxiYWNrXG4gICAgICBzZXR1cEJyZWF0aCgpO1xuICAgIH07XG5cbiAgICAvLyBCcmVhdGhcbiAgICBjb25zdCBzZXR1cEJyZWF0aCA9ICgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuX2JyZWF0aCA9IEN1YmlzbUJyZWF0aC5jcmVhdGUoKTtcblxuICAgICAgY29uc3QgYnJlYXRoUGFyYW1ldGVyczogY3NtVmVjdG9yPEJyZWF0aFBhcmFtZXRlckRhdGE+ID0gbmV3IGNzbVZlY3RvcigpO1xuICAgICAgYnJlYXRoUGFyYW1ldGVycy5wdXNoQmFjayhcbiAgICAgICAgbmV3IEJyZWF0aFBhcmFtZXRlckRhdGEodGhpcy5faWRQYXJhbUFuZ2xlWCwgMC4wLCAxNS4wLCA2LjUzNDUsIDAuNSlcbiAgICAgICk7XG4gICAgICBicmVhdGhQYXJhbWV0ZXJzLnB1c2hCYWNrKFxuICAgICAgICBuZXcgQnJlYXRoUGFyYW1ldGVyRGF0YSh0aGlzLl9pZFBhcmFtQW5nbGVZLCAwLjAsIDguMCwgMy41MzQ1LCAwLjUpXG4gICAgICApO1xuICAgICAgYnJlYXRoUGFyYW1ldGVycy5wdXNoQmFjayhcbiAgICAgICAgbmV3IEJyZWF0aFBhcmFtZXRlckRhdGEodGhpcy5faWRQYXJhbUFuZ2xlWiwgMC4wLCAxMC4wLCA1LjUzNDUsIDAuNSlcbiAgICAgICk7XG4gICAgICBicmVhdGhQYXJhbWV0ZXJzLnB1c2hCYWNrKFxuICAgICAgICBuZXcgQnJlYXRoUGFyYW1ldGVyRGF0YSh0aGlzLl9pZFBhcmFtQm9keUFuZ2xlWCwgMC4wLCA0LjAsIDE1LjUzNDUsIDAuNSlcbiAgICAgICk7XG4gICAgICBicmVhdGhQYXJhbWV0ZXJzLnB1c2hCYWNrKFxuICAgICAgICBuZXcgQnJlYXRoUGFyYW1ldGVyRGF0YShcbiAgICAgICAgICBDdWJpc21GcmFtZXdvcmsuZ2V0SWRNYW5hZ2VyKCkuZ2V0SWQoXG4gICAgICAgICAgICBDdWJpc21EZWZhdWx0UGFyYW1ldGVySWQuUGFyYW1CcmVhdGhcbiAgICAgICAgICApLFxuICAgICAgICAgIDAuMCxcbiAgICAgICAgICAwLjUsXG4gICAgICAgICAgMy4yMzQ1LFxuICAgICAgICAgIDAuNVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICB0aGlzLl9icmVhdGguc2V0UGFyYW1ldGVycyhicmVhdGhQYXJhbWV0ZXJzKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gTG9hZFN0ZXAuTG9hZFVzZXJEYXRhO1xuXG4gICAgICAvLyBjYWxsYmFja1xuICAgICAgbG9hZFVzZXJEYXRhKCk7XG4gICAgfTtcblxuICAgIC8vIFVzZXJEYXRhXG4gICAgY29uc3QgbG9hZFVzZXJEYXRhID0gKCk6IHZvaWQgPT4ge1xuICAgICAgaWYgKHRoaXMuX21vZGVsU2V0dGluZy5nZXRVc2VyRGF0YUZpbGUoKSAhPSAnJykge1xuICAgICAgICBjb25zdCB1c2VyRGF0YUZpbGUgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0VXNlckRhdGFGaWxlKCk7XG5cbiAgICAgICAgZmV0Y2goYCR7dGhpcy5fbW9kZWxIb21lRGlyfS8ke3VzZXJEYXRhRmlsZX1gKVxuICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpXG4gICAgICAgICAgLnRoZW4oYXJyYXlCdWZmZXIgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkVXNlckRhdGEoYXJyYXlCdWZmZXIsIGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpO1xuXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLlNldHVwRXllQmxpbmtJZHM7XG5cbiAgICAgICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgICAgICBzZXR1cEV5ZUJsaW5rSWRzKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5XYWl0TG9hZFVzZXJEYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5TZXR1cEV5ZUJsaW5rSWRzO1xuXG4gICAgICAgIC8vIGNhbGxiYWNrXG4gICAgICAgIHNldHVwRXllQmxpbmtJZHMoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXllQmxpbmtJZHNcbiAgICBjb25zdCBzZXR1cEV5ZUJsaW5rSWRzID0gKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgZXllQmxpbmtJZENvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0RXllQmxpbmtQYXJhbWV0ZXJDb3VudCgpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV5ZUJsaW5rSWRDb3VudDsgKytpKSB7XG4gICAgICAgIHRoaXMuX2V5ZUJsaW5rSWRzLnB1c2hCYWNrKFxuICAgICAgICAgIHRoaXMuX21vZGVsU2V0dGluZy5nZXRFeWVCbGlua1BhcmFtZXRlcklkKGkpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0YXRlID0gTG9hZFN0ZXAuU2V0dXBMaXBTeW5jSWRzO1xuXG4gICAgICAvLyBjYWxsYmFja1xuICAgICAgc2V0dXBMaXBTeW5jSWRzKCk7XG4gICAgfTtcblxuICAgIC8vIExpcFN5bmNJZHNcbiAgICBjb25zdCBzZXR1cExpcFN5bmNJZHMgPSAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBsaXBTeW5jSWRDb3VudCA9IHRoaXMuX21vZGVsU2V0dGluZy5nZXRMaXBTeW5jUGFyYW1ldGVyQ291bnQoKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXBTeW5jSWRDb3VudDsgKytpKSB7XG4gICAgICAgIHRoaXMuX2xpcFN5bmNJZHMucHVzaEJhY2sodGhpcy5fbW9kZWxTZXR0aW5nLmdldExpcFN5bmNQYXJhbWV0ZXJJZChpKSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLlNldHVwTGF5b3V0O1xuXG4gICAgICAvLyBjYWxsYmFja1xuICAgICAgc2V0dXBMYXlvdXQoKTtcbiAgICB9O1xuXG4gICAgLy8gTGF5b3V0XG4gICAgY29uc3Qgc2V0dXBMYXlvdXQgPSAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBsYXlvdXQ6IGNzbU1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgY3NtTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgICAgdGhpcy5fbW9kZWxTZXR0aW5nLmdldExheW91dE1hcChsYXlvdXQpO1xuICAgICAgdGhpcy5fbW9kZWxNYXRyaXguc2V0dXBGcm9tTGF5b3V0KGxheW91dCk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRNb3Rpb247XG5cbiAgICAgIC8vIGNhbGxiYWNrXG4gICAgICBsb2FkQ3ViaXNtTW90aW9uKCk7XG4gICAgfTtcblxuICAgIC8vIE1vdGlvblxuICAgIGNvbnN0IGxvYWRDdWJpc21Nb3Rpb24gPSAoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLldhaXRMb2FkTW90aW9uO1xuICAgICAgdGhpcy5fbW9kZWwuc2F2ZVBhcmFtZXRlcnMoKTtcbiAgICAgIHRoaXMuX2FsbE1vdGlvbkNvdW50ID0gMDtcbiAgICAgIHRoaXMuX21vdGlvbkNvdW50ID0gMDtcbiAgICAgIGNvbnN0IGdyb3VwOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBjb25zdCBtb3Rpb25Hcm91cENvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0TW90aW9uR3JvdXBDb3VudCgpO1xuXG4gICAgICAvLyDjg6Ljg7zjgrfjg6fjg7Pjga7nt4/mlbDjgpLmsYLjgoHjgotcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW90aW9uR3JvdXBDb3VudDsgaSsrKSB7XG4gICAgICAgIGdyb3VwW2ldID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldE1vdGlvbkdyb3VwTmFtZShpKTtcbiAgICAgICAgdGhpcy5fYWxsTW90aW9uQ291bnQgKz0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldE1vdGlvbkNvdW50KGdyb3VwW2ldKTtcbiAgICAgIH1cblxuICAgICAgLy8g44Oi44O844K344On44Oz44Gu6Kqt44G/6L6844G/XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vdGlvbkdyb3VwQ291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLnByZUxvYWRNb3Rpb25Hcm91cChncm91cFtpXSk7XG4gICAgICB9XG5cbiAgICAgIC8vIOODouODvOOCt+ODp+ODs+OBjOOBquOBhOWgtOWQiFxuICAgICAgaWYgKG1vdGlvbkdyb3VwQ291bnQgPT0gMCkge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLkxvYWRUZXh0dXJlO1xuXG4gICAgICAgIC8vIOWFqOOBpuOBruODouODvOOCt+ODp+ODs+OCkuWBnOatouOBmeOCi1xuICAgICAgICB0aGlzLl9tb3Rpb25NYW5hZ2VyLnN0b3BBbGxNb3Rpb25zKCk7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5zZXR1cFRleHR1cmVzKCk7XG4gICAgICAgIHRoaXMuZ2V0UmVuZGVyZXIoKS5zdGFydFVwKGdsKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOODhuOCr+OCueODgeODo+ODpuODi+ODg+ODiOOBq+ODhuOCr+OCueODgeODo+OCkuODreODvOODieOBmeOCi1xuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cFRleHR1cmVzKCk6IHZvaWQge1xuICAgIC8vIGlQaG9uZeOBp+OBruOCouODq+ODleOCoeWTgeizquWQkeS4iuOBruOBn+OCgVR5cGVzY3JpcHTjgafjga9wcmVtdWx0aXBsaWVkQWxwaGHjgpLmjqHnlKhcbiAgICBjb25zdCB1c2VQcmVtdWx0aXBseSA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgPT0gTG9hZFN0ZXAuTG9hZFRleHR1cmUpIHtcbiAgICAgIC8vIOODhuOCr+OCueODgeODo+iqreOBv+i+vOOBv+eUqFxuICAgICAgY29uc3QgdGV4dHVyZUNvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0VGV4dHVyZUNvdW50KCk7XG5cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBtb2RlbFRleHR1cmVOdW1iZXIgPSAwO1xuICAgICAgICBtb2RlbFRleHR1cmVOdW1iZXIgPCB0ZXh0dXJlQ291bnQ7XG4gICAgICAgIG1vZGVsVGV4dHVyZU51bWJlcisrXG4gICAgICApIHtcbiAgICAgICAgLy8g44OG44Kv44K544OB44Oj5ZCN44GM56m65paH5a2X44Gg44Gj44Gf5aC05ZCI44Gv44Ot44O844OJ44O744OQ44Kk44Oz44OJ5Yem55CG44KS44K544Kt44OD44OXXG4gICAgICAgIGlmICh0aGlzLl9tb2RlbFNldHRpbmcuZ2V0VGV4dHVyZUZpbGVOYW1lKG1vZGVsVGV4dHVyZU51bWJlcikgPT0gJycpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0VGV4dHVyZUZpbGVOYW1lIG51bGwnKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlYkdM44Gu44OG44Kv44K544OB44Oj44Om44OL44OD44OI44Gr44OG44Kv44K544OB44Oj44KS44Ot44O844OJ44GZ44KLXG4gICAgICAgIGxldCB0ZXh0dXJlUGF0aCA9IHRoaXMuX21vZGVsU2V0dGluZy5nZXRUZXh0dXJlRmlsZU5hbWUoXG4gICAgICAgICAgbW9kZWxUZXh0dXJlTnVtYmVyXG4gICAgICAgICk7XG4gICAgICAgIHRleHR1cmVQYXRoID0gdGhpcy5fbW9kZWxIb21lRGlyICsgdGV4dHVyZVBhdGg7XG5cbiAgICAgICAgLy8g6LSf6L295a6M5oiQ5pe26LCD55So55qE5Zue5Y+r5Ye95pWwXG4gICAgICAgIGNvbnN0IG9uTG9hZCA9ICh0ZXh0dXJlSW5mbzogVGV4dHVyZUluZm8pOiB2b2lkID0+IHtcbiAgICAgICAgICB0aGlzLmdldFJlbmRlcmVyKCkuYmluZFRleHR1cmUobW9kZWxUZXh0dXJlTnVtYmVyLCB0ZXh0dXJlSW5mby5pZCk7XG5cbiAgICAgICAgICB0aGlzLl90ZXh0dXJlQ291bnQrKztcblxuICAgICAgICAgIGlmICh0aGlzLl90ZXh0dXJlQ291bnQgPj0gdGV4dHVyZUNvdW50KSB7XG4gICAgICAgICAgICAvLyDjg63jg7zjg4nlrozkuoZcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gTG9hZFN0ZXAuQ29tcGxldGVTZXR1cDtcbiAgICAgICAgICAgIGxBcHBEZWxlZ2F0ZUV2ZW50Lm1vZGVsQ29tcGxldGVTZXR1cCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyDoqq3jgb/ovrzjgb9cbiAgICAgICAgTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKClcbiAgICAgICAgICAuZ2V0VGV4dHVyZU1hbmFnZXIoKVxuICAgICAgICAgIC5jcmVhdGVUZXh0dXJlRnJvbVBuZ0ZpbGUodGV4dHVyZVBhdGgsIHVzZVByZW11bHRpcGx5LCBvbkxvYWQpO1xuICAgICAgICB0aGlzLmdldFJlbmRlcmVyKCkuc2V0SXNQcmVtdWx0aXBsaWVkQWxwaGEodXNlUHJlbXVsdGlwbHkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zdGF0ZSA9IExvYWRTdGVwLldhaXRMb2FkVGV4dHVyZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Os44Oz44OA44Op44KS5YaN5qeL56+J44GZ44KLXG4gICAqL1xuICBwdWJsaWMgcmVsb2FkUmVuZGVyZXIoKTogdm9pZCB7XG4gICAgdGhpcy5kZWxldGVSZW5kZXJlcigpO1xuICAgIHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB0aGlzLnNldHVwVGV4dHVyZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrBcbiAgICovXG4gIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9IExvYWRTdGVwLkNvbXBsZXRlU2V0dXApIHJldHVybjtcblxuICAgIGNvbnN0IGRlbHRhVGltZVNlY29uZHM6IG51bWJlciA9IExBcHBQYWwuZ2V0RGVsdGFUaW1lKCk7XG4gICAgdGhpcy5fdXNlclRpbWVTZWNvbmRzICs9IGRlbHRhVGltZVNlY29uZHM7XG5cbiAgICB0aGlzLl9kcmFnTWFuYWdlci51cGRhdGUoZGVsdGFUaW1lU2Vjb25kcyk7XG4gICAgdGhpcy5fZHJhZ1ggPSB0aGlzLl9kcmFnTWFuYWdlci5nZXRYKCk7XG4gICAgdGhpcy5fZHJhZ1kgPSB0aGlzLl9kcmFnTWFuYWdlci5nZXRZKCk7XG5cbiAgICAvLyDov5Dliqjlj4LmlbDmmK/lkKbmm7TmlrBcbiAgICBsZXQgbW90aW9uVXBkYXRlZCA9IGZhbHNlO1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHRoaXMuX21vZGVsLmxvYWRQYXJhbWV0ZXJzKCk7IC8vIOWKoOi9veS4iuasoeiiq+S/neWtmOeahOeKtuaAgVxuICAgIGlmICh0aGlzLl9tb3Rpb25NYW5hZ2VyLmlzRmluaXNoZWQoKSkge1xuICAgICAgLy8g5aaC5p6c5rKh5pyJ5Yqo5L2c5Zue5pS+77yM5YiZ5LuO562J5b6F5Yqo5L2c5Lit6ZqP5py65Zue5pS+XG4gICAgICB0aGlzLnN0YXJ0UmFuZG9tTW90aW9uKFxuICAgICAgICBMQXBwRGVmaW5lLk1vdGlvbkdyb3VwSWRsZSxcbiAgICAgICAgTEFwcERlZmluZS5Qcmlvcml0eUlkbGVcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vdGlvblVwZGF0ZWQgPSB0aGlzLl9tb3Rpb25NYW5hZ2VyLnVwZGF0ZU1vdGlvbihcbiAgICAgICAgdGhpcy5fbW9kZWwsXG4gICAgICAgIGRlbHRhVGltZVNlY29uZHNcbiAgICAgICk7IC8vIOabtOaWsOWKqOS9nFxuICAgIH1cbiAgICAvLyDliqjmgIHkv67mlLnlj4LmlbBcbiAgICB0aGlzLl9tb2RlbC5zYXZlUGFyYW1ldGVycygpOyAvLyDkv53lrZjnirbmgIFcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyDjgb7jgbDjgZ/jgY1cbiAgICBpZiAoIW1vdGlvblVwZGF0ZWQpIHtcbiAgICAgIGlmICh0aGlzLl9leWVCbGluayAhPSBudWxsKSB7XG4gICAgICAgIC8vIOS4u+WKqOS9nOayoeacieabtOaWsOeahOaXtuWAmVxuICAgICAgICB0aGlzLl9leWVCbGluay51cGRhdGVQYXJhbWV0ZXJzKHRoaXMuX21vZGVsLCBkZWx0YVRpbWVTZWNvbmRzKTsgLy8g55yo55y8552bXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V4cHJlc3Npb25NYW5hZ2VyICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2V4cHJlc3Npb25NYW5hZ2VyLnVwZGF0ZU1vdGlvbih0aGlzLl9tb2RlbCwgZGVsdGFUaW1lU2Vjb25kcyk7IC8vIOmAmui/h+ihqOaDheabtOaWsOWPguaVsCjnm7jlr7nlj5jljJYpXG4gICAgfVxuXG4gICAgLy8gbW9kZWzluKbmnaXnmoTlj5jljJZcbiAgICAvLyDpgJrov4dtb2RlbOiwg+aVtOiEuOmDqOeahOaWueWQkVxuICAgIHRoaXMuX21vZGVsLmFkZFBhcmFtZXRlclZhbHVlQnlJZCh0aGlzLl9pZFBhcmFtQW5nbGVYLCB0aGlzLl9kcmFnWCAqIDMwKTsgLy/ku44tMzDliqDkuIozMOeahOWAvFxuICAgIHRoaXMuX21vZGVsLmFkZFBhcmFtZXRlclZhbHVlQnlJZCh0aGlzLl9pZFBhcmFtQW5nbGVZLCB0aGlzLl9kcmFnWSAqIDMwKTtcbiAgICB0aGlzLl9tb2RlbC5hZGRQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gICAgICB0aGlzLl9pZFBhcmFtQW5nbGVaLFxuICAgICAgdGhpcy5fZHJhZ1ggKiB0aGlzLl9kcmFnWSAqIC0zMFxuICAgICk7XG5cbiAgICAvLyDpgJrov4fmr5Llk4HosIPmlbTouqvkvZPnmoTmlrnlkJFcbiAgICB0aGlzLl9tb2RlbC5hZGRQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gICAgICB0aGlzLl9pZFBhcmFtQm9keUFuZ2xlWCxcbiAgICAgIHRoaXMuX2RyYWdYICogMTBcbiAgICApOyAvLyAtMTDjgYvjgokxMOOBruWApOOCkuWKoOOBiOOCi1xuXG4gICAgLy8g6YCa6L+H6I2v5Li46LCD5pW055y8552b55qE5pa55ZCRXG4gICAgdGhpcy5fbW9kZWwuYWRkUGFyYW1ldGVyVmFsdWVCeUlkKHRoaXMuX2lkUGFyYW1FeWVCYWxsWCwgdGhpcy5fZHJhZ1gpOyAvLyDku44tMeWKoOS4ijHnmoTlgLxcbiAgICB0aGlzLl9tb2RlbC5hZGRQYXJhbWV0ZXJWYWx1ZUJ5SWQodGhpcy5faWRQYXJhbUV5ZUJhbGxZLCB0aGlzLl9kcmFnWSk7XG5cbiAgICAvLyDlkbzlkLjjgarjgalcbiAgICBpZiAodGhpcy5fYnJlYXRoICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2JyZWF0aC51cGRhdGVQYXJhbWV0ZXJzKHRoaXMuX21vZGVsLCBkZWx0YVRpbWVTZWNvbmRzKTtcbiAgICB9XG5cbiAgICAvLyDniannkIbmvJTnrpfjga7oqK3lrppcbiAgICBpZiAodGhpcy5fcGh5c2ljcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9waHlzaWNzLmV2YWx1YXRlKHRoaXMuX21vZGVsLCBkZWx0YVRpbWVTZWNvbmRzKTtcbiAgICB9XG5cbiAgICAvLyDjg6rjg4Pjg5fjgrfjg7Pjgq/jga7oqK3lrppcbiAgICBpZiAodGhpcy5fbGlwc3luYykge1xuICAgICAgY29uc3QgdmFsdWUgPSAwOyAvLyDjg6rjgqLjg6vjgr/jgqTjg6Djgafjg6rjg4Pjg5fjgrfjg7Pjgq/jgpLooYzjgYbloLTlkIjjgIHjgrfjgrnjg4bjg6DjgYvjgonpn7Pph4/jgpLlj5blvpfjgZfjgabjgIEwfjHjga7nr4Tlm7LjgaflgKTjgpLlhaXlipvjgZfjgb7jgZnjgIJcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saXBTeW5jSWRzLmdldFNpemUoKTsgKytpKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLmFkZFBhcmFtZXRlclZhbHVlQnlJZCh0aGlzLl9saXBTeW5jSWRzLmF0KGkpLCB2YWx1ZSwgMC44KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg53jg7zjgrrjga7oqK3lrppcbiAgICBpZiAodGhpcy5fcG9zZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9wb3NlLnVwZGF0ZVBhcmFtZXRlcnModGhpcy5fbW9kZWwsIGRlbHRhVGltZVNlY29uZHMpO1xuICAgIH1cblxuICAgIHRoaXMuX21vZGVsLnVwZGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leaVsOOBp+aMh+WumuOBl+OBn+ODouODvOOCt+ODp+ODs+OBruWGjeeUn+OCkumWi+Wni+OBmeOCi1xuICAgKiBAcGFyYW0gZ3JvdXAg44Oi44O844K344On44Oz44Kw44Or44O844OX5ZCNXG4gICAqIEBwYXJhbSBubyDjgrDjg6vjg7zjg5flhoXjga7nlarlj7dcbiAgICogQHBhcmFtIHByaW9yaXR5IOWEquWFiOW6plxuICAgKiBAcGFyYW0gb25GaW5pc2hlZE1vdGlvbkhhbmRsZXIg44Oi44O844K344On44Oz5YaN55Sf57WC5LqG5pmC44Gr5ZG844Gz5Ye644GV44KM44KL44Kz44O844Or44OQ44OD44Kv6Zai5pWwXG4gICAqIEByZXR1cm4g6ZaL5aeL44GX44Gf44Oi44O844K344On44Oz44Gu6K2Y5Yil55Wq5Y+344KS6L+U44GZ44CC5YCL5Yil44Gu44Oi44O844K344On44Oz44GM57WC5LqG44GX44Gf44GL5ZCm44GL44KS5Yik5a6a44GZ44KLaXNGaW5pc2hlZCgp44Gu5byV5pWw44Gn5L2/55So44GZ44KL44CC6ZaL5aeL44Gn44GN44Gq44GE5pmC44GvWy0xXVxuICAgKi9cbiAgcHVibGljIHN0YXJ0TW90aW9uKFxuICAgIGdyb3VwOiBzdHJpbmcsXG4gICAgbm86IG51bWJlcixcbiAgICBwcmlvcml0eTogbnVtYmVyLFxuICAgIG9uRmluaXNoZWRNb3Rpb25IYW5kbGVyPzogRmluaXNoZWRNb3Rpb25DYWxsYmFja1xuICApOiBDdWJpc21Nb3Rpb25RdWV1ZUVudHJ5SGFuZGxlIHtcbiAgICBpZiAocHJpb3JpdHkgPT0gTEFwcERlZmluZS5Qcmlvcml0eUZvcmNlKSB7XG4gICAgICB0aGlzLl9tb3Rpb25NYW5hZ2VyLnNldFJlc2VydmVQcmlvcml0eShwcmlvcml0eSk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5fbW90aW9uTWFuYWdlci5yZXNlcnZlTW90aW9uKHByaW9yaXR5KSkge1xuICAgICAgaWYgKHRoaXMuX2RlYnVnTW9kZSkge1xuICAgICAgICBMQXBwUGFsLnByaW50TWVzc2FnZShcIltBUFBdY2FuJ3Qgc3RhcnQgbW90aW9uLlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBJbnZhbGlkTW90aW9uUXVldWVFbnRyeUhhbmRsZVZhbHVlO1xuICAgIH1cblxuICAgIGNvbnN0IG1vdGlvbkZpbGVOYW1lID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldE1vdGlvbkZpbGVOYW1lKGdyb3VwLCBubyk7XG5cbiAgICAvLyBleCkgaWRsZV8wXG4gICAgY29uc3QgbmFtZSA9IGAke2dyb3VwfV8ke25vfWA7XG4gICAgbGV0IG1vdGlvbjogQ3ViaXNtTW90aW9uID0gdGhpcy5fbW90aW9ucy5nZXRWYWx1ZShuYW1lKSBhcyBDdWJpc21Nb3Rpb247XG4gICAgbGV0IGF1dG9EZWxldGUgPSBmYWxzZTtcblxuICAgIGlmIChtb3Rpb24gPT0gbnVsbCkge1xuICAgICAgZmV0Y2goYCR7dGhpcy5fbW9kZWxIb21lRGlyfS8ke21vdGlvbkZpbGVOYW1lfWApXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpXG4gICAgICAgIC50aGVuKGFycmF5QnVmZmVyID0+IHtcbiAgICAgICAgICBtb3Rpb24gPSB0aGlzLmxvYWRNb3Rpb24oXG4gICAgICAgICAgICBhcnJheUJ1ZmZlcixcbiAgICAgICAgICAgIGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgb25GaW5pc2hlZE1vdGlvbkhhbmRsZXJcbiAgICAgICAgICApO1xuICAgICAgICAgIGxldCBmYWRlVGltZTogbnVtYmVyID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldE1vdGlvbkZhZGVJblRpbWVWYWx1ZShcbiAgICAgICAgICAgIGdyb3VwLFxuICAgICAgICAgICAgbm9cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKGZhZGVUaW1lID49IDAuMCkge1xuICAgICAgICAgICAgbW90aW9uLnNldEZhZGVJblRpbWUoZmFkZVRpbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZhZGVUaW1lID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldE1vdGlvbkZhZGVPdXRUaW1lVmFsdWUoZ3JvdXAsIG5vKTtcbiAgICAgICAgICBpZiAoZmFkZVRpbWUgPj0gMC4wKSB7XG4gICAgICAgICAgICBtb3Rpb24uc2V0RmFkZU91dFRpbWUoZmFkZVRpbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vdGlvbi5zZXRFZmZlY3RJZHModGhpcy5fZXllQmxpbmtJZHMsIHRoaXMuX2xpcFN5bmNJZHMpO1xuICAgICAgICAgIGF1dG9EZWxldGUgPSB0cnVlOyAvLyDntYLkuobmmYLjgavjg6Hjg6Ljg6rjgYvjgonliYrpmaRcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vdGlvbi5zZXRGaW5pc2hlZE1vdGlvbkhhbmRsZXIob25GaW5pc2hlZE1vdGlvbkhhbmRsZXIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kZWJ1Z01vZGUpIHtcbiAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKGBbQVBQXXN0YXJ0IG1vdGlvbjogWyR7Z3JvdXB9XyR7bm99YCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9tb3Rpb25NYW5hZ2VyLnN0YXJ0TW90aW9uUHJpb3JpdHkoXG4gICAgICBtb3Rpb24sXG4gICAgICBhdXRvRGVsZXRlLFxuICAgICAgcHJpb3JpdHlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOODqeODs+ODgOODoOOBq+mBuOOBsOOCjOOBn+ODouODvOOCt+ODp+ODs+OBruWGjeeUn+OCkumWi+Wni+OBmeOCi+OAglxuICAgKiBAcGFyYW0gZ3JvdXAg44Oi44O844K344On44Oz44Kw44Or44O844OX5ZCNXG4gICAqIEBwYXJhbSBwcmlvcml0eSDlhKrlhYjluqZcbiAgICogQHBhcmFtIG9uRmluaXNoZWRNb3Rpb25IYW5kbGVyIOODouODvOOCt+ODp+ODs+WGjeeUn+e1guS6huaZguOBq+WRvOOBs+WHuuOBleOCjOOCi+OCs+ODvOODq+ODkOODg+OCr+mWouaVsFxuICAgKiBAcmV0dXJuIOmWi+Wni+OBl+OBn+ODouODvOOCt+ODp+ODs+OBruitmOWIpeeVquWPt+OCkui/lOOBmeOAguWAi+WIpeOBruODouODvOOCt+ODp+ODs+OBjOe1guS6huOBl+OBn+OBi+WQpuOBi+OCkuWIpOWumuOBmeOCi2lzRmluaXNoZWQoKeOBruW8leaVsOOBp+S9v+eUqOOBmeOCi+OAgumWi+Wni+OBp+OBjeOBquOBhOaZguOBr1stMV1cbiAgICovXG4gIHB1YmxpYyBzdGFydFJhbmRvbU1vdGlvbihcbiAgICBncm91cDogc3RyaW5nLFxuICAgIHByaW9yaXR5OiBudW1iZXIsXG4gICAgb25GaW5pc2hlZE1vdGlvbkhhbmRsZXI/OiBGaW5pc2hlZE1vdGlvbkNhbGxiYWNrXG4gICk6IEN1YmlzbU1vdGlvblF1ZXVlRW50cnlIYW5kbGUge1xuICAgIGlmICh0aGlzLl9tb2RlbFNldHRpbmcuZ2V0TW90aW9uQ291bnQoZ3JvdXApID09IDApIHtcbiAgICAgIHJldHVybiBJbnZhbGlkTW90aW9uUXVldWVFbnRyeUhhbmRsZVZhbHVlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vOiBudW1iZXIgPSBNYXRoLmZsb29yKFxuICAgICAgTWF0aC5yYW5kb20oKSAqIHRoaXMuX21vZGVsU2V0dGluZy5nZXRNb3Rpb25Db3VudChncm91cClcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuc3RhcnRNb3Rpb24oZ3JvdXAsIG5vLCBwcmlvcml0eSwgb25GaW5pc2hlZE1vdGlvbkhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leaVsOOBp+aMh+WumuOBl+OBn+ihqOaDheODouODvOOCt+ODp+ODs+OCkuOCu+ODg+ODiOOBmeOCi1xuICAgKlxuICAgKiBAcGFyYW0gZXhwcmVzc2lvbklkIOihqOaDheODouODvOOCt+ODp+ODs+OBrklEXG4gICAqL1xuICBwdWJsaWMgc2V0RXhwcmVzc2lvbihleHByZXNzaW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG1vdGlvbjogQUN1YmlzbU1vdGlvbiA9IHRoaXMuX2V4cHJlc3Npb25zLmdldFZhbHVlKGV4cHJlc3Npb25JZCk7XG5cbiAgICBpZiAodGhpcy5fZGVidWdNb2RlKSB7XG4gICAgICBMQXBwUGFsLnByaW50TWVzc2FnZShgW0FQUF1leHByZXNzaW9uOiBbJHtleHByZXNzaW9uSWR9XWApO1xuICAgIH1cblxuICAgIGlmIChtb3Rpb24gIT0gbnVsbCkge1xuICAgICAgdGhpcy5fZXhwcmVzc2lvbk1hbmFnZXIuc3RhcnRNb3Rpb25Qcmlvcml0eShcbiAgICAgICAgbW90aW9uLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgTEFwcERlZmluZS5Qcmlvcml0eUZvcmNlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fZGVidWdNb2RlKSB7XG4gICAgICAgIExBcHBQYWwucHJpbnRNZXNzYWdlKGBbQVBQXWV4cHJlc3Npb25bJHtleHByZXNzaW9uSWR9XSBpcyBudWxsYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODqeODs+ODgOODoOOBq+mBuOOBsOOCjOOBn+ihqOaDheODouODvOOCt+ODp+ODs+OCkuOCu+ODg+ODiOOBmeOCi1xuICAgKi9cbiAgcHVibGljIHNldFJhbmRvbUV4cHJlc3Npb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2V4cHJlc3Npb25zLmdldFNpemUoKSA9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm86IG51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuX2V4cHJlc3Npb25zLmdldFNpemUoKSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2V4cHJlc3Npb25zLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICBpZiAoaSA9PSBubykge1xuICAgICAgICBjb25zdCBuYW1lOiBzdHJpbmcgPSB0aGlzLl9leHByZXNzaW9ucy5fa2V5VmFsdWVzW2ldLmZpcnN0O1xuICAgICAgICB0aGlzLnNldEV4cHJlc3Npb24obmFtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44Kk44OZ44Oz44OI44Gu55m654Gr44KS5Y+X44GR5Y+W44KLXG4gICAqL1xuICBwdWJsaWMgbW90aW9uRXZlbnRGaXJlZChldmVudFZhbHVlOiBjc21TdHJpbmcpOiB2b2lkIHtcbiAgICBDdWJpc21Mb2dJbmZvKCd7MH0gaXMgZmlyZWQgb24gTEFwcE1vZGVsISEnLCBldmVudFZhbHVlLnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIpOWumua1i+ivlVxuICAgKiDku47mjIflrppJROeahOmhtueCueWIl+ihqOiuoeeul+efqeW9ou+8jOehruWumuWdkOagh+aYr+WQpuWcqOefqeW9ouiMg+WbtOWGheOAglxuICAgKlxuICAgKiBAcGFyYW0gaGl0QXJlbmFOYW1lICDlvZPjgZ/jgorliKTlrprjgpLjg4bjgrnjg4jjgZnjgovlr77osaHjga5JRFxuICAgKiBAcGFyYW0geCAgICAgICAgICAgICDliKTlrprjgpLooYzjgYZY5bqn5qiZXG4gICAqIEBwYXJhbSB5ICAgICAgICAgICAgIOWIpOWumuOCkuihjOOBhlnluqfmqJlcbiAgICovXG4gIHB1YmxpYyBoaXRUZXN0KGhpdEFyZW5hTmFtZTogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIOmAj+aYjuaZguOBr+W9k+OBn+OCiuWIpOWumueEoeOBl+OAglxuICAgIGlmICh0aGlzLl9vcGFjaXR5IDwgMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvdW50OiBudW1iZXIgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0SGl0QXJlYXNDb3VudCgpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fbW9kZWxTZXR0aW5nLmdldEhpdEFyZWFOYW1lKGkpID09IGhpdEFyZW5hTmFtZSkge1xuICAgICAgICBjb25zdCBkcmF3SWQ6IEN1YmlzbUlkSGFuZGxlID0gdGhpcy5fbW9kZWxTZXR0aW5nLmdldEhpdEFyZWFJZChpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNIaXQoZHJhd0lkLCB4LCB5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICog44Oi44O844K344On44Oz44OH44O844K/44KS44Kw44Or44O844OX5ZCN44GL44KJ5LiA5ous44Gn44Ot44O844OJ44GZ44KL44CCXG4gICAqIOODouODvOOCt+ODp+ODs+ODh+ODvOOCv+OBruWQjeWJjeOBr+WGhemDqOOBp01vZGVsU2V0dGluZ+OBi+OCieWPluW+l+OBmeOCi+OAglxuICAgKlxuICAgKiBAcGFyYW0gZ3JvdXAg44Oi44O844K344On44Oz44OH44O844K/44Gu44Kw44Or44O844OX5ZCNXG4gICAqL1xuICBwdWJsaWMgcHJlTG9hZE1vdGlvbkdyb3VwKGdyb3VwOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21vZGVsU2V0dGluZy5nZXRNb3Rpb25Db3VudChncm91cCk7IGkrKykge1xuICAgICAgY29uc3QgbW90aW9uRmlsZU5hbWUgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmlsZU5hbWUoZ3JvdXAsIGkpO1xuXG4gICAgICAvLyBleCkgaWRsZV8wXG4gICAgICBjb25zdCBuYW1lID0gYCR7Z3JvdXB9XyR7aX1gO1xuICAgICAgaWYgKHRoaXMuX2RlYnVnTW9kZSkge1xuICAgICAgICBMQXBwUGFsLnByaW50TWVzc2FnZShcbiAgICAgICAgICBgW0FQUF1sb2FkIG1vdGlvbjogJHttb3Rpb25GaWxlTmFtZX0gPT4gWyR7bmFtZX1dYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBmZXRjaChgJHt0aGlzLl9tb2RlbEhvbWVEaXJ9LyR7bW90aW9uRmlsZU5hbWV9YClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgLnRoZW4oYXJyYXlCdWZmZXIgPT4ge1xuICAgICAgICAgIGNvbnN0IHRtcE1vdGlvbjogQ3ViaXNtTW90aW9uID0gdGhpcy5sb2FkTW90aW9uKFxuICAgICAgICAgICAgYXJyYXlCdWZmZXIsXG4gICAgICAgICAgICBhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBsZXQgZmFkZVRpbWUgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmFkZUluVGltZVZhbHVlKGdyb3VwLCBpKTtcbiAgICAgICAgICBpZiAoZmFkZVRpbWUgPj0gMC4wKSB7XG4gICAgICAgICAgICB0bXBNb3Rpb24uc2V0RmFkZUluVGltZShmYWRlVGltZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZmFkZVRpbWUgPSB0aGlzLl9tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmFkZU91dFRpbWVWYWx1ZShncm91cCwgaSk7XG4gICAgICAgICAgaWYgKGZhZGVUaW1lID49IDAuMCkge1xuICAgICAgICAgICAgdG1wTW90aW9uLnNldEZhZGVPdXRUaW1lKGZhZGVUaW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG1wTW90aW9uLnNldEVmZmVjdElkcyh0aGlzLl9leWVCbGlua0lkcywgdGhpcy5fbGlwU3luY0lkcyk7XG5cbiAgICAgICAgICBpZiAodGhpcy5fbW90aW9ucy5nZXRWYWx1ZShuYW1lKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBBQ3ViaXNtTW90aW9uLmRlbGV0ZSh0aGlzLl9tb3Rpb25zLmdldFZhbHVlKG5hbWUpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl9tb3Rpb25zLnNldFZhbHVlKG5hbWUsIHRtcE1vdGlvbik7XG5cbiAgICAgICAgICB0aGlzLl9tb3Rpb25Db3VudCsrO1xuICAgICAgICAgIGlmICh0aGlzLl9tb3Rpb25Db3VudCA+PSB0aGlzLl9hbGxNb3Rpb25Db3VudCkge1xuICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5Mb2FkVGV4dHVyZTtcblxuICAgICAgICAgICAgLy8g5YWo44Gm44Gu44Oi44O844K344On44Oz44KS5YGc5q2i44GZ44KLXG4gICAgICAgICAgICB0aGlzLl9tb3Rpb25NYW5hZ2VyLnN0b3BBbGxNb3Rpb25zKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBUZXh0dXJlcygpO1xuICAgICAgICAgICAgdGhpcy5nZXRSZW5kZXJlcigpLnN0YXJ0VXAoZ2wpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOBmeOBueOBpuOBruODouODvOOCt+ODp+ODs+ODh+ODvOOCv+OCkuino+aUvuOBmeOCi+OAglxuICAgKi9cbiAgcHVibGljIHJlbGVhc2VNb3Rpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuX21vdGlvbnMuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhajjgabjga7ooajmg4Xjg4fjg7zjgr/jgpLop6PmlL7jgZnjgovjgIJcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlRXhwcmVzc2lvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5fZXhwcmVzc2lvbnMuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Ljg4fjg6vjgpLmj4/nlLvjgZnjgovlh6bnkIbjgILjg6Ljg4fjg6vjgpLmj4/nlLvjgZnjgovnqbrplpPjga5WaWV3LVByb2plY3Rpb27ooYzliJfjgpLmuKHjgZnjgIJcbiAgICovXG4gIHB1YmxpYyBkb0RyYXcoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX21vZGVsID09IG51bGwpIHJldHVybjtcblxuICAgIC8vIOOCreODo+ODs+ODkOOCueOCteOCpOOCuuOCkua4oeOBmVxuICAgIGNvbnN0IHZpZXdwb3J0OiBudW1iZXJbXSA9IFswLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdO1xuXG4gICAgdGhpcy5nZXRSZW5kZXJlcigpLnNldFJlbmRlclN0YXRlKGZyYW1lQnVmZmVyLCB2aWV3cG9ydCk7XG4gICAgdGhpcy5nZXRSZW5kZXJlcigpLmRyYXdNb2RlbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOODouODh+ODq+OCkuaPj+eUu+OBmeOCi+WHpueQhuOAguODouODh+ODq+OCkuaPj+eUu+OBmeOCi+epuumWk+OBrlZpZXctUHJvamVjdGlvbuihjOWIl+OCkua4oeOBmeOAglxuICAgKi9cbiAgcHVibGljIGRyYXcobWF0cml4OiBDdWJpc21NYXRyaXg0NCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9tb2RlbCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5ZCE6Kqt44G/6L6844G/57WC5LqG5b6MXG4gICAgaWYgKHRoaXMuX3N0YXRlID09IExvYWRTdGVwLkNvbXBsZXRlU2V0dXApIHtcbiAgICAgIG1hdHJpeC5tdWx0aXBseUJ5TWF0cml4KHRoaXMuX21vZGVsTWF0cml4KTtcblxuICAgICAgdGhpcy5nZXRSZW5kZXJlcigpLnNldE12cE1hdHJpeChtYXRyaXgpO1xuXG4gICAgICB0aGlzLmRvRHJhdygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2RlYnVnTW9kZSA9IERlYnVnTW9kZWxMb2dFbmFibGU7XG5cbiAgICB0aGlzLl9tb2RlbFNldHRpbmcgPSBudWxsO1xuICAgIHRoaXMuX21vZGVsSG9tZURpciA9IG51bGw7XG4gICAgdGhpcy5fdXNlclRpbWVTZWNvbmRzID0gMC4wO1xuXG4gICAgdGhpcy5fZXllQmxpbmtJZHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPigpO1xuICAgIHRoaXMuX2xpcFN5bmNJZHMgPSBuZXcgY3NtVmVjdG9yPEN1YmlzbUlkSGFuZGxlPigpO1xuXG4gICAgdGhpcy5fbW90aW9ucyA9IG5ldyBjc21NYXA8c3RyaW5nLCBBQ3ViaXNtTW90aW9uPigpO1xuICAgIHRoaXMuX2V4cHJlc3Npb25zID0gbmV3IGNzbU1hcDxzdHJpbmcsIEFDdWJpc21Nb3Rpb24+KCk7XG5cbiAgICB0aGlzLl9oaXRBcmVhID0gbmV3IGNzbVZlY3Rvcjxjc21SZWN0PigpO1xuICAgIHRoaXMuX3VzZXJBcmVhID0gbmV3IGNzbVZlY3Rvcjxjc21SZWN0PigpO1xuXG4gICAgdGhpcy5faWRQYXJhbUFuZ2xlWCA9IEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgIEN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUFuZ2xlWFxuICAgICk7XG4gICAgdGhpcy5faWRQYXJhbUFuZ2xlWSA9IEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgIEN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUFuZ2xlWVxuICAgICk7XG4gICAgdGhpcy5faWRQYXJhbUFuZ2xlWiA9IEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgIEN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUFuZ2xlWlxuICAgICk7XG4gICAgdGhpcy5faWRQYXJhbUV5ZUJhbGxYID0gQ3ViaXNtRnJhbWV3b3JrLmdldElkTWFuYWdlcigpLmdldElkKFxuICAgICAgQ3ViaXNtRGVmYXVsdFBhcmFtZXRlcklkLlBhcmFtRXllQmFsbFhcbiAgICApO1xuICAgIHRoaXMuX2lkUGFyYW1FeWVCYWxsWSA9IEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgIEN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUV5ZUJhbGxZXG4gICAgKTtcbiAgICB0aGlzLl9pZFBhcmFtQm9keUFuZ2xlWCA9IEN1YmlzbUZyYW1ld29yay5nZXRJZE1hbmFnZXIoKS5nZXRJZChcbiAgICAgIEN1YmlzbURlZmF1bHRQYXJhbWV0ZXJJZC5QYXJhbUJvZHlBbmdsZVhcbiAgICApO1xuXG4gICAgdGhpcy5fc3RhdGUgPSBMb2FkU3RlcC5Mb2FkQXNzZXRzO1xuICAgIHRoaXMuX2V4cHJlc3Npb25Db3VudCA9IDA7XG4gICAgdGhpcy5fdGV4dHVyZUNvdW50ID0gMDtcbiAgICB0aGlzLl9tb3Rpb25Db3VudCA9IDA7XG4gICAgdGhpcy5fYWxsTW90aW9uQ291bnQgPSAwO1xuICB9XG5cbiAgX21vZGVsU2V0dGluZzogSUN1YmlzbU1vZGVsU2V0dGluZzsgLy8g44Oi44OH44Or44K744OD44OG44Kj44Oz44Kw5oOF5aCxXG4gIF9tb2RlbEhvbWVEaXI6IHN0cmluZzsgLy8g44Oi44OH44Or44K744OD44OG44Kj44Oz44Kw44GM572u44GL44KM44Gf44OH44Kj44Os44Kv44OI44OqXG4gIF91c2VyVGltZVNlY29uZHM6IG51bWJlcjsgLy8g44OH44Or44K/5pmC6ZaT44Gu56mN566X5YCkW+enkl1cblxuICBfZXllQmxpbmtJZHM6IGNzbVZlY3RvcjxDdWJpc21JZEhhbmRsZT47IC8vIOODouODh+ODq+OBq+ioreWumuOBleOCjOOBn+eerOOBjeapn+iDveeUqOODkeODqeODoeODvOOCv0lEXG4gIF9saXBTeW5jSWRzOiBjc21WZWN0b3I8Q3ViaXNtSWRIYW5kbGU+OyAvLyDjg6Ljg4fjg6vjgavoqK3lrprjgZXjgozjgZ/jg6rjg4Pjg5fjgrfjg7Pjgq/mqZ/og73nlKjjg5Hjg6njg6Hjg7zjgr9JRFxuXG4gIF9tb3Rpb25zOiBjc21NYXA8c3RyaW5nLCBBQ3ViaXNtTW90aW9uPjsgLy8g6Kqt44G/6L6844G+44KM44Gm44GE44KL44Oi44O844K344On44Oz44Gu44Oq44K544OIXG4gIF9leHByZXNzaW9uczogY3NtTWFwPHN0cmluZywgQUN1YmlzbU1vdGlvbj47IC8vIOiqreOBv+i+vOOBvuOCjOOBpuOBhOOCi+ihqOaDheOBruODquOCueODiFxuXG4gIF9oaXRBcmVhOiBjc21WZWN0b3I8Y3NtUmVjdD47XG4gIF91c2VyQXJlYTogY3NtVmVjdG9yPGNzbVJlY3Q+O1xuXG4gIF9pZFBhcmFtQW5nbGVYOiBDdWJpc21JZEhhbmRsZTsgLy8g44OR44Op44Oh44O844K/SUQ6IFBhcmFtQW5nbGVYXG4gIF9pZFBhcmFtQW5nbGVZOiBDdWJpc21JZEhhbmRsZTsgLy8g44OR44Op44Oh44O844K/SUQ6IFBhcmFtQW5nbGVZXG4gIF9pZFBhcmFtQW5nbGVaOiBDdWJpc21JZEhhbmRsZTsgLy8g44OR44Op44Oh44O844K/SUQ6IFBhcmFtQW5nbGVaXG4gIF9pZFBhcmFtRXllQmFsbFg6IEN1YmlzbUlkSGFuZGxlOyAvLyDjg5Hjg6njg6Hjg7zjgr9JRDogUGFyYW1FeWVCYWxsWFxuICBfaWRQYXJhbUV5ZUJhbGxZOiBDdWJpc21JZEhhbmRsZTsgLy8g44OR44Op44Oh44O844K/SUQ6IFBhcmFtRXllQkFsbFlcbiAgX2lkUGFyYW1Cb2R5QW5nbGVYOiBDdWJpc21JZEhhbmRsZTsgLy8g44OR44Op44Oh44O844K/SUQ6IFBhcmFtQm9keUFuZ2xlWFxuXG4gIF9zdGF0ZTogbnVtYmVyOyAvLyDnj77lnKjjga7jgrnjg4bjg7zjgr/jgrnnrqHnkIbnlKhcbiAgX2V4cHJlc3Npb25Db3VudDogbnVtYmVyOyAvLyDooajmg4Xjg4fjg7zjgr/jgqvjgqbjg7Pjg4hcbiAgX3RleHR1cmVDb3VudDogbnVtYmVyOyAvLyDjg4bjgq/jgrnjg4Hjg6Pjgqvjgqbjg7Pjg4hcbiAgX21vdGlvbkNvdW50OiBudW1iZXI7IC8vIOODouODvOOCt+ODp+ODs+ODh+ODvOOCv+OCq+OCpuODs+ODiFxuICBfYWxsTW90aW9uQ291bnQ6IG51bWJlcjsgLy8g44Oi44O844K344On44Oz57eP5pWwXG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUErdEJBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFsd0JBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFHQTtBQUNBO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7QUFoQ0E7QUFBQTtBQWlDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFZQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFLQTtBQUNBOztBQUVBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBbENBO0FBQ0E7QUFrQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBSUE7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFNQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBVUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFTQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFuREE7QUFBQTtBQW9EQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQXlFQTtBQUFBO0FBbnlCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/lappmodel.ts\n");

/***/ }),

/***/ "./src/lapppal.ts":
/*!************************!*\
  !*** ./src/lapppal.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LAppPal = void 0;\nvar LAppPal = (function () {\n    function LAppPal() {\n    }\n    LAppPal.loadFileAsBytes = function (filePath, callback) {\n        fetch(filePath)\n            .then(function (response) { return response.arrayBuffer(); })\n            .then(function (arrayBuffer) { return callback(arrayBuffer, arrayBuffer.byteLength); });\n    };\n    LAppPal.getDeltaTime = function () {\n        return this.s_deltaTime;\n    };\n    LAppPal.updateTime = function () {\n        this.s_currentFrame = Date.now();\n        this.s_deltaTime = (this.s_currentFrame - this.s_lastFrame) / 1000;\n        this.s_lastFrame = this.s_currentFrame;\n    };\n    LAppPal.printMessage = function (message) {\n        console.log(message);\n    };\n    LAppPal.log = function (any, tag) {\n        if (tag === void 0) { tag = \"info\"; }\n        console.log(any, tag);\n    };\n    LAppPal.getName = function (fun) {\n        return typeof fun === 'function' ?\n            undefined :\n            fun.name || /function (.+)\\(/.exec(fun + '')[1];\n    };\n    LAppPal.lastUpdate = Date.now();\n    LAppPal.s_currentFrame = 0.0;\n    LAppPal.s_lastFrame = 0.0;\n    LAppPal.s_deltaTime = 0.0;\n    return LAppPal;\n}());\nexports.LAppPal = LAppPal;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcHBhbC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9sYXBwcGFsLnRzP2QzNzAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuLyoqXG4gKiDjg5fjg6njg4Pjg4jjg5Xjgqnjg7zjg6Dkvp3lrZjmqZ/og73jgpLmir3osaHljJbjgZnjgosgQ3ViaXNtIFBsYXRmb3JtIEFic3RyYWN0aW9uIExheWVyLlxuICpcbiAqIOODleOCoeOCpOODq+iqreOBv+i+vOOBv+OChOaZguWIu+WPluW+l+etieOBruODl+ODqeODg+ODiOODleOCqeODvOODoOOBq+S+neWtmOOBmeOCi+mWouaVsOOCkuOBvuOBqOOCgeOCi+OAglxuICovXG4vLyDlo7DmmI7kuIDkuKrlhajlsYDnmoRsb2fmlrnms5XvvIznlKjmnaXmiZNsb2dcblxuZXhwb3J0IGNsYXNzIExBcHBQYWwge1xuICAvKipcbiAgICog44OV44Kh44Kk44Or44KS44OQ44Kk44OI44OH44O844K/44Go44GX44Gm6Kqt44G/44GT44KAXG4gICAqXG4gICAqIEBwYXJhbSBmaWxlUGF0aCDoqq3jgb/ovrzjgb/lr77osaHjg5XjgqHjgqTjg6vjga7jg5HjgrlcbiAgICogQHJldHVyblxuICAgKiB7XG4gICAqICAgICAgYnVmZmVyLCAgIOiqreOBv+i+vOOCk+OBoOODkOOCpOODiOODh+ODvOOCv1xuICAgKiAgICAgIHNpemUgICAgICAgIOODleOCoeOCpOODq+OCteOCpOOCulxuICAgKiB9XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGxvYWRGaWxlQXNCeXRlcyhcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIGNhbGxiYWNrOiAoYXJyYXlCdWZmZXI6IEFycmF5QnVmZmVyLCBzaXplOiBudW1iZXIpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgZmV0Y2goZmlsZVBhdGgpXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5hcnJheUJ1ZmZlcigpKVxuICAgICAgLnRoZW4oYXJyYXlCdWZmZXIgPT4gY2FsbGJhY2soYXJyYXlCdWZmZXIsIGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjg6vjgr/mmYLplpPvvIjliY3lm57jg5Xjg6zjg7zjg6Djgajjga7lt67liIbvvInjgpLlj5blvpfjgZnjgotcbiAgICogQHJldHVybiDjg4fjg6vjgr/mmYLplpNbbXNdXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGdldERlbHRhVGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnNfZGVsdGFUaW1lO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyB1cGRhdGVUaW1lKCk6IHZvaWQge1xuICAgIHRoaXMuc19jdXJyZW50RnJhbWUgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMuc19kZWx0YVRpbWUgPSAodGhpcy5zX2N1cnJlbnRGcmFtZSAtIHRoaXMuc19sYXN0RnJhbWUpIC8gMTAwMDtcbiAgICB0aGlzLnNfbGFzdEZyYW1lID0gdGhpcy5zX2N1cnJlbnRGcmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6Hjg4Pjgrvjg7zjgrjjgpLlh7rlipvjgZnjgotcbiAgICogQHBhcmFtIG1lc3NhZ2Ug5paH5a2X5YiXXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByaW50TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgbG9nKGFueTphbnksdGFnOnN0cmluZyA9IFwiaW5mb1wiKTp2b2lke1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zb2xlLmxvZyhhbnksdGFnKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIGdldE5hbWUoZnVuKXtcbiAgICByZXR1cm4gdHlwZW9mIGZ1bj09PSdmdW5jdGlvbic/XG4gICAgICAgIHVuZGVmaW5lZDpcbiAgICAgICAgZnVuLm5hbWV8fC9mdW5jdGlvbiAoLispXFwoLy5leGVjKGZ1biArICcnKVsxXTtcbiAgfVxuXG5cbiAgc3RhdGljIGxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xuXG4gIHN0YXRpYyBzX2N1cnJlbnRGcmFtZSA9IDAuMDtcbiAgc3RhdGljIHNfbGFzdEZyYW1lID0gMC4wO1xuICBzdGF0aWMgc19kZWx0YVRpbWUgPSAwLjA7XG59XG4iXSwibWFwcGluZ3MiOiI7OztBQWNBO0FBQUE7QUEwREE7QUEvQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUExREE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lapppal.ts\n");

/***/ }),

/***/ "./src/lappsprite.ts":
/*!***************************!*\
  !*** ./src/lappsprite.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Rect = exports.LAppSprite = void 0;\nvar lappdelegate_1 = __webpack_require__(/*! ./lappdelegate */ \"./src/lappdelegate.ts\");\nvar deg = 0.5;\nvar LAppSprite = (function () {\n    function LAppSprite(x, y, width, height, textureId) {\n        this._width = width;\n        this._height = height;\n        this._rect = new Rect();\n        this._rect.left = x - width * 0.5;\n        this._rect.right = x + width * 0.5;\n        this._rect.up = y + height * 0.5;\n        this._rect.down = y - height * 0.5;\n        this._texture = textureId;\n        this._vertexBuffer = null;\n        this._uvBuffer = null;\n        this._indexBuffer = null;\n        this._positionLocation = null;\n        this._uvLocation = null;\n        this._textureLocation = null;\n        this._positionArray = null;\n        this._uvArray = null;\n        this._indexArray = null;\n        this._firstDraw = true;\n    }\n    LAppSprite.prototype.setX = function (x) {\n        this._x = x;\n        this._rect.left = x - this._width * 0.5;\n        this._rect.right = x + this._width * 0.5;\n    };\n    LAppSprite.prototype.setY = function (y) {\n        this._y = y;\n        this._rect.up = y + this._height * 0.5;\n        this._rect.down = y - this._height * 0.5;\n    };\n    LAppSprite.prototype.release = function () {\n        this._rect = null;\n        lappdelegate_1.gl.deleteTexture(this._texture);\n        this._texture = null;\n        lappdelegate_1.gl.deleteBuffer(this._uvBuffer);\n        this._uvBuffer = null;\n        lappdelegate_1.gl.deleteBuffer(this._vertexBuffer);\n        this._vertexBuffer = null;\n        lappdelegate_1.gl.deleteBuffer(this._indexBuffer);\n        this._indexBuffer = null;\n    };\n    LAppSprite.prototype.getTexture = function () {\n        return this._texture;\n    };\n    LAppSprite.prototype.render = function (programId) {\n        if (this._texture == null) {\n            return;\n        }\n        if (this._firstDraw) {\n            this._positionLocation = lappdelegate_1.gl.getAttribLocation(programId, 'position');\n            lappdelegate_1.gl.enableVertexAttribArray(this._positionLocation);\n            this._uvLocation = lappdelegate_1.gl.getAttribLocation(programId, 'uv');\n            lappdelegate_1.gl.enableVertexAttribArray(this._uvLocation);\n            this._textureLocation = lappdelegate_1.gl.getUniformLocation(programId, 'texture');\n            lappdelegate_1.gl.uniform1i(this._textureLocation, 0);\n            {\n                this._uvArray = new Float32Array([\n                    1.0,\n                    0.0,\n                    0.0,\n                    0.0,\n                    0.0,\n                    1.0,\n                    1.0,\n                    1.0\n                ]);\n                this._uvBuffer = lappdelegate_1.gl.createBuffer();\n            }\n            {\n                var maxWidth_1 = lappdelegate_1.canvas.width;\n                var maxHeight_1 = lappdelegate_1.canvas.height;\n                this._positionArray = new Float32Array([\n                    (this._rect.right - maxWidth_1 * 0.5) / (maxWidth_1 * 0.5),\n                    (this._rect.up - maxHeight_1 * 0.5) / (maxHeight_1 * 0.5),\n                    (this._rect.left - maxWidth_1 * 0.5) / (maxWidth_1 * 0.5),\n                    (this._rect.up - maxHeight_1 * 0.5) / (maxHeight_1 * 0.5),\n                    (this._rect.left - maxWidth_1 * 0.5) / (maxWidth_1 * 0.5),\n                    (this._rect.down - maxHeight_1 * 0.5) / (maxHeight_1 * 0.5),\n                    (this._rect.right - maxWidth_1 * 0.5) / (maxWidth_1 * 0.5),\n                    (this._rect.down - maxHeight_1 * 0.5) / (maxHeight_1 * 0.5)\n                ]);\n                this._vertexBuffer = lappdelegate_1.gl.createBuffer();\n            }\n            {\n                this._indexArray = new Uint16Array([0, 1, 2, 3, 2, 0]);\n                this._indexBuffer = lappdelegate_1.gl.createBuffer();\n            }\n            this._firstDraw = false;\n        }\n        var maxWidth = lappdelegate_1.canvas.width;\n        var maxHeight = lappdelegate_1.canvas.height;\n        this._positionArray = new Float32Array([\n            (this._rect.right - maxWidth * 0.5) / (maxWidth * 0.5),\n            (this._rect.up - maxHeight * 0.5) / (maxHeight * 0.5),\n            (this._rect.left - maxWidth * 0.5) / (maxWidth * 0.5),\n            (this._rect.up - maxHeight * 0.5) / (maxHeight * 0.5),\n            (this._rect.left - maxWidth * 0.5) / (maxWidth * 0.5),\n            (this._rect.down - maxHeight * 0.5) / (maxHeight * 0.5),\n            (this._rect.right - maxWidth * 0.5) / (maxWidth * 0.5),\n            (this._rect.down - maxHeight * 0.5) / (maxHeight * 0.5)\n        ]);\n        lappdelegate_1.gl.bindBuffer(lappdelegate_1.gl.ARRAY_BUFFER, this._uvBuffer);\n        lappdelegate_1.gl.bufferData(lappdelegate_1.gl.ARRAY_BUFFER, this._uvArray, lappdelegate_1.gl.STATIC_DRAW);\n        lappdelegate_1.gl.vertexAttribPointer(this._uvLocation, 2, lappdelegate_1.gl.FLOAT, false, 0, 0);\n        lappdelegate_1.gl.bindBuffer(lappdelegate_1.gl.ARRAY_BUFFER, this._vertexBuffer);\n        lappdelegate_1.gl.bufferData(lappdelegate_1.gl.ARRAY_BUFFER, this._positionArray, lappdelegate_1.gl.STATIC_DRAW);\n        lappdelegate_1.gl.vertexAttribPointer(this._positionLocation, 2, lappdelegate_1.gl.FLOAT, false, 0, 0);\n        lappdelegate_1.gl.bindBuffer(lappdelegate_1.gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n        lappdelegate_1.gl.bufferData(lappdelegate_1.gl.ELEMENT_ARRAY_BUFFER, this._indexArray, lappdelegate_1.gl.DYNAMIC_DRAW);\n        lappdelegate_1.gl.bindTexture(lappdelegate_1.gl.TEXTURE_2D, this._texture);\n        lappdelegate_1.gl.drawElements(lappdelegate_1.gl.TRIANGLES, this._indexArray.length, lappdelegate_1.gl.UNSIGNED_SHORT, 0);\n    };\n    LAppSprite.prototype.isHit = function (pointX, pointY) {\n        var height = lappdelegate_1.canvas.height;\n        var y = height - pointY;\n        return (pointX >= this._rect.left &&\n            pointX <= this._rect.right &&\n            y <= this._rect.up &&\n            y >= this._rect.down);\n    };\n    return LAppSprite;\n}());\nexports.LAppSprite = LAppSprite;\nvar Rect = (function () {\n    function Rect() {\n    }\n    return Rect;\n}());\nexports.Rect = Rect;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcHNwcml0ZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9sYXBwc3ByaXRlLnRzPzE5Y2UiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHsgZ2wsIGNhbnZhcyB9IGZyb20gJy4vbGFwcGRlbGVnYXRlJztcbmltcG9ydCB7TEFwcFBhbH0gZnJvbSBcIi4vbGFwcHBhbFwiO1xubGV0IGRlZyA9IDAuNTsgICAgLy8g5a6a5LmJ5Yid5aeL5peL6L2s6KeS5bqmXG5cbi8qKlxuICog44K544OX44Op44Kk44OI44KS5a6f6KOF44GZ44KL44Kv44Op44K5XG4gKlxuICog44OG44Kv44K544OB44Oj77yp77yk44CBUmVjdOOBrueuoeeQhlxuICovXG5leHBvcnQgY2xhc3MgTEFwcFNwcml0ZSB7XG4gIC8qKlxuICAgKiDnsr7ngbXlrr3luqZcbiAgICovXG4gIF93aWR0aDogbnVtYmVyO1xuICAvKipcbiAgICog57K+54G16auY5bqmXG4gICAqL1xuICBfaGVpZ2h0OiBudW1iZXI7XG5cbiAgX3g6IGFueTtcbiAgX3k6IGFueTtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKiBAcGFyYW0geCAgICAgICAgICAgIHjluqfmqJlcbiAgICogQHBhcmFtIHkgICAgICAgICAgICB55bqn5qiZXG4gICAqIEBwYXJhbSB3aWR0aCAgICAgICAg5qiq5bmFXG4gICAqIEBwYXJhbSBoZWlnaHQgICAgICAg6auY44GVXG4gICAqIEBwYXJhbSB0ZXh0dXJlSWQgICAg44OG44Kv44K544OB44OjXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgdGV4dHVyZUlkOiBXZWJHTFRleHR1cmVcbiAgKSB7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fcmVjdCA9IG5ldyBSZWN0KCk7XG4gICAgdGhpcy5fcmVjdC5sZWZ0ID0geCAtIHdpZHRoICogMC41O1xuICAgIHRoaXMuX3JlY3QucmlnaHQgPSB4ICsgd2lkdGggKiAwLjU7XG4gICAgdGhpcy5fcmVjdC51cCA9IHkgKyBoZWlnaHQgKiAwLjU7XG4gICAgdGhpcy5fcmVjdC5kb3duID0geSAtIGhlaWdodCAqIDAuNTtcbiAgICB0aGlzLl90ZXh0dXJlID0gdGV4dHVyZUlkO1xuICAgIHRoaXMuX3ZlcnRleEJ1ZmZlciA9IG51bGw7XG4gICAgdGhpcy5fdXZCdWZmZXIgPSBudWxsO1xuICAgIHRoaXMuX2luZGV4QnVmZmVyID0gbnVsbDtcblxuICAgIHRoaXMuX3Bvc2l0aW9uTG9jYXRpb24gPSBudWxsO1xuICAgIHRoaXMuX3V2TG9jYXRpb24gPSBudWxsO1xuICAgIHRoaXMuX3RleHR1cmVMb2NhdGlvbiA9IG51bGw7XG5cbiAgICB0aGlzLl9wb3NpdGlvbkFycmF5ID0gbnVsbDtcbiAgICB0aGlzLl91dkFycmF5ID0gbnVsbDtcbiAgICB0aGlzLl9pbmRleEFycmF5ID0gbnVsbDtcblxuICAgIHRoaXMuX2ZpcnN0RHJhdyA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICog6K6+572ueOi9tOS9jee9rlxuICAgKiBAcGFyYW0geFxuICAgKi9cbiAgcHVibGljIHNldFgoeCl7XG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5fcmVjdC5sZWZ0ID0geCAtIHRoaXMuX3dpZHRoICogMC41O1xuICAgIHRoaXMuX3JlY3QucmlnaHQgPSB4ICsgdGhpcy5fd2lkdGggKiAwLjU7XG4gIH1cblxuICAvKipcbiAgICog6K6+572ueei9tOS9jee9rlxuICAgKiBAcGFyYW0geVxuICAgKi9cbiAgcHVibGljIHNldFkoeSl7XG4gICAgdGhpcy5feSA9IHk7XG4gICAgdGhpcy5fcmVjdC51cCA9IHkgKyB0aGlzLl9oZWlnaHQgKiAwLjU7XG4gICAgdGhpcy5fcmVjdC5kb3duID0geSAtIHRoaXMuX2hlaWdodCAqIDAuNTtcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmlL7jgZnjgovjgIJcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlY3QgPSBudWxsO1xuXG4gICAgZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLl90ZXh0dXJlKTtcbiAgICB0aGlzLl90ZXh0dXJlID0gbnVsbDtcblxuICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLl91dkJ1ZmZlcik7XG4gICAgdGhpcy5fdXZCdWZmZXIgPSBudWxsO1xuXG4gICAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMuX3ZlcnRleEJ1ZmZlcik7XG4gICAgdGhpcy5fdmVydGV4QnVmZmVyID0gbnVsbDtcblxuICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLl9pbmRleEJ1ZmZlcik7XG4gICAgdGhpcy5faW5kZXhCdWZmZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOODhuOCr+OCueODgeODo+OCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldFRleHR1cmUoKTogV2ViR0xUZXh0dXJlIHtcbiAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmj4/nlLvjgZnjgovjgIJcbiAgICogQHBhcmFtIHByb2dyYW1JZCDjgrfjgqfjg7zjg4Djg7zjg5fjg63jgrDjg6njg6BcbiAgICogQHBhcmFtIGNhbnZhcyDmj4/nlLvjgZnjgovjgq3jg6Pjg7Pjg5Hjgrnmg4XloLFcbiAgICovXG4gIHB1YmxpYyByZW5kZXIocHJvZ3JhbUlkOiBXZWJHTFByb2dyYW0pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fdGV4dHVyZSA9PSBudWxsKSB7XG4gICAgICAvLyDjg63jg7zjg4njgYzlrozkuobjgZfjgabjgYTjgarjgYRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDliJ3lm57mj4/nlLvmmYJcbiAgICBpZiAodGhpcy5fZmlyc3REcmF3KSB7XG4gICAgICAvLyDlj5blvpfnrKzlh6DkuKphdHRyaWJ1dGXlj5jph49cbiAgICAgIHRoaXMuX3Bvc2l0aW9uTG9jYXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtSWQsICdwb3NpdGlvbicpO1xuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5fcG9zaXRpb25Mb2NhdGlvbik7XG5cbiAgICAgIHRoaXMuX3V2TG9jYXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtSWQsICd1dicpO1xuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5fdXZMb2NhdGlvbik7XG5cbiAgICAgIC8vIOiOt+WPluesrOWHoOS4qnVuaWZvcm3lj5jph49cbiAgICAgIHRoaXMuX3RleHR1cmVMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtSWQsICd0ZXh0dXJlJyk7XG5cbiAgICAgIC8vIHVuaWZvcm3lsZ7mgKfjga7nmbvpjLJcbiAgICAgIGdsLnVuaWZvcm0xaSh0aGlzLl90ZXh0dXJlTG9jYXRpb24sIDApO1xuXG4gICAgICAvL3V257yT5Yay5Zmo44CB5Z2Q5qCH5Yid5aeL5YyWXG4gICAgICB7XG4gICAgICAgIHRoaXMuX3V2QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICAgICAxLjAsXG4gICAgICAgICAgMC4wLFxuICAgICAgICAgIDAuMCxcbiAgICAgICAgICAwLjAsXG4gICAgICAgICAgMC4wLFxuICAgICAgICAgIDEuMCxcbiAgICAgICAgICAxLjAsXG4gICAgICAgICAgMS4wXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIHV244OQ44OD44OV44Kh44KS5L2c5oiQXG4gICAgICAgIHRoaXMuX3V2QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIOmhtueCuee8k+WGsuWZqO+8jOWdkOagh+WIneWni+WMllxuICAgICAge1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcblxuICAgICAgICAvLyDpoILngrnjg4fjg7zjgr9cbiAgICAgICAgdGhpcy5fcG9zaXRpb25BcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgICAgICh0aGlzLl9yZWN0LnJpZ2h0IC0gbWF4V2lkdGggKiAwLjUpIC8gKG1heFdpZHRoICogMC41KSxcbiAgICAgICAgICAodGhpcy5fcmVjdC51cCAtIG1heEhlaWdodCAqIDAuNSkgLyAobWF4SGVpZ2h0ICogMC41KSxcbiAgICAgICAgICAodGhpcy5fcmVjdC5sZWZ0IC0gbWF4V2lkdGggKiAwLjUpIC8gKG1heFdpZHRoICogMC41KSxcbiAgICAgICAgICAodGhpcy5fcmVjdC51cCAtIG1heEhlaWdodCAqIDAuNSkgLyAobWF4SGVpZ2h0ICogMC41KSxcbiAgICAgICAgICAodGhpcy5fcmVjdC5sZWZ0IC0gbWF4V2lkdGggKiAwLjUpIC8gKG1heFdpZHRoICogMC41KSxcbiAgICAgICAgICAodGhpcy5fcmVjdC5kb3duIC0gbWF4SGVpZ2h0ICogMC41KSAvIChtYXhIZWlnaHQgKiAwLjUpLFxuICAgICAgICAgICh0aGlzLl9yZWN0LnJpZ2h0IC0gbWF4V2lkdGggKiAwLjUpIC8gKG1heFdpZHRoICogMC41KSxcbiAgICAgICAgICAodGhpcy5fcmVjdC5kb3duIC0gbWF4SGVpZ2h0ICogMC41KSAvIChtYXhIZWlnaHQgKiAwLjUpXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIOmggueCueODkOODg+ODleOCoeOCkuS9nOaIkFxuICAgICAgICB0aGlzLl92ZXJ0ZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8g6aCC54K544Kk44Oz44OH44OD44Kv44K544OQ44OD44OV44Kh44CB5Yid5pyf5YyWXG4gICAgICB7XG4gICAgICAgIC8vIOOCpOODs+ODh+ODg+OCr+OCueODh+ODvOOCv1xuICAgICAgICB0aGlzLl9pbmRleEFycmF5ID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAzLCAyLCAwXSk7XG5cbiAgICAgICAgLy8g44Kk44Oz44OH44OD44Kv44K544OQ44OD44OV44Kh44KS5L2c5oiQXG4gICAgICAgIHRoaXMuX2luZGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2ZpcnN0RHJhdyA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyDpoILngrnjg4fjg7zjgr9cbiAgICBjb25zdCBtYXhXaWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgdGhpcy5fcG9zaXRpb25BcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgKHRoaXMuX3JlY3QucmlnaHQgLSBtYXhXaWR0aCAqIDAuNSkgLyAobWF4V2lkdGggKiAwLjUpLFxuICAgICAgKHRoaXMuX3JlY3QudXAgLSBtYXhIZWlnaHQgKiAwLjUpIC8gKG1heEhlaWdodCAqIDAuNSksXG4gICAgICAodGhpcy5fcmVjdC5sZWZ0IC0gbWF4V2lkdGggKiAwLjUpIC8gKG1heFdpZHRoICogMC41KSxcbiAgICAgICh0aGlzLl9yZWN0LnVwIC0gbWF4SGVpZ2h0ICogMC41KSAvIChtYXhIZWlnaHQgKiAwLjUpLFxuICAgICAgKHRoaXMuX3JlY3QubGVmdCAtIG1heFdpZHRoICogMC41KSAvIChtYXhXaWR0aCAqIDAuNSksXG4gICAgICAodGhpcy5fcmVjdC5kb3duIC0gbWF4SGVpZ2h0ICogMC41KSAvIChtYXhIZWlnaHQgKiAwLjUpLFxuICAgICAgKHRoaXMuX3JlY3QucmlnaHQgLSBtYXhXaWR0aCAqIDAuNSkgLyAobWF4V2lkdGggKiAwLjUpLFxuICAgICAgKHRoaXMuX3JlY3QuZG93biAtIG1heEhlaWdodCAqIDAuNSkgLyAobWF4SGVpZ2h0ICogMC41KVxuICAgIF0pO1xuXG4gICAgLy8gVVbluqfmqJnnmbvpjLJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fdXZCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl91dkFycmF5LCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAvLyBhdHRyaWJ1dGXlsZ7mgKfjgpLnmbvpjLJcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuX3V2TG9jYXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICAvLyDpoILngrnluqfmqJnjgpLnmbvpjLJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fdmVydGV4QnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fcG9zaXRpb25BcnJheSwgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgLy8gYXR0cmlidXRl5bGe5oCn44KS55m76YyyXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLl9wb3NpdGlvbkxvY2F0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gICAgLy8g6aCC54K544Kk44Oz44OH44OD44Kv44K544KS5L2c5oiQXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5faW5kZXhCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRoaXMuX2luZGV4QXJyYXksIGdsLkRZTkFNSUNfRFJBVyk7XG5cbiAgICAvLyDmqKHlnovnmoTnu5jliLZcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcbiAgICBnbC5kcmF3RWxlbWVudHMoXG4gICAgICBnbC5UUklBTkdMRVMsXG4gICAgICB0aGlzLl9pbmRleEFycmF5Lmxlbmd0aCxcbiAgICAgIGdsLlVOU0lHTkVEX1NIT1JULFxuICAgICAgMFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5b2T44Gf44KK5Yik5a6aXG4gICAqIEBwYXJhbSBwb2ludFggeOW6p+aomVxuICAgKiBAcGFyYW0gcG9pbnRZIHnluqfmqJlcbiAgICovXG4gIHB1YmxpYyBpc0hpdChwb2ludFg6IG51bWJlciwgcG9pbnRZOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyDnlLvpnaLjgrXjgqTjgrrjgpLlj5blvpfjgZnjgovjgIJcbiAgICBjb25zdCB7IGhlaWdodCB9ID0gY2FudmFzO1xuXG4gICAgLy8gWeW6p+aomeOBr+WkieaPm+OBmeOCi+W/heimgeOBguOCilxuICAgIGNvbnN0IHkgPSBoZWlnaHQgLSBwb2ludFk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgcG9pbnRYID49IHRoaXMuX3JlY3QubGVmdCAmJlxuICAgICAgcG9pbnRYIDw9IHRoaXMuX3JlY3QucmlnaHQgJiZcbiAgICAgIHkgPD0gdGhpcy5fcmVjdC51cCAmJlxuICAgICAgeSA+PSB0aGlzLl9yZWN0LmRvd25cbiAgICApO1xuICB9XG5cbiAgX3RleHR1cmU6IFdlYkdMVGV4dHVyZTsgLy8g44OG44Kv44K544OB44OjXG4gIF92ZXJ0ZXhCdWZmZXI6IFdlYkdMQnVmZmVyOyAvLyDpoILngrnjg5Djg4Pjg5XjgqFcbiAgX3V2QnVmZmVyOiBXZWJHTEJ1ZmZlcjsgLy8gdXbpoILngrnjg5Djg4Pjg5XjgqFcbiAgX2luZGV4QnVmZmVyOiBXZWJHTEJ1ZmZlcjsgLy8g6aCC54K544Kk44Oz44OH44OD44Kv44K544OQ44OD44OV44KhXG4gIF9yZWN0OiBSZWN0OyAvLyDnn6nlvaJcblxuICBfcG9zaXRpb25Mb2NhdGlvbjogbnVtYmVyO1xuICBfdXZMb2NhdGlvbjogbnVtYmVyO1xuICBfdGV4dHVyZUxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcblxuICBfcG9zaXRpb25BcnJheTogRmxvYXQzMkFycmF5O1xuICBfdXZBcnJheTogRmxvYXQzMkFycmF5O1xuICBfaW5kZXhBcnJheTogVWludDE2QXJyYXk7XG5cbiAgX2ZpcnN0RHJhdzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFJlY3Qge1xuICBwdWJsaWMgbGVmdDogbnVtYmVyOyAvLyDlt6bovrpcbiAgcHVibGljIHJpZ2h0OiBudW1iZXI7IC8vIOWPs+i+ulxuICBwdWJsaWMgdXA6IG51bWJlcjsgLy8g5LiK6L66XG4gIHB1YmxpYyBkb3duOiBudW1iZXI7IC8vIOS4i+i+ulxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFPQTtBQUVBO0FBT0E7QUFvQkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBTUE7QUFPQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBaUJBO0FBQUE7QUF6UEE7QUEyUEE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUxBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lappsprite.ts\n");

/***/ }),

/***/ "./src/lapptexturemanager.ts":
/*!***********************************!*\
  !*** ./src/lapptexturemanager.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextureInfo = exports.LAppTextureManager = void 0;\nvar csmvector_1 = __webpack_require__(/*! @framework/type/csmvector */ \"./Framework/src/type/csmvector.ts\");\nvar Csm_csmVector = csmvector_1.Live2DCubismFramework.csmVector;\nvar lappdelegate_1 = __webpack_require__(/*! ./lappdelegate */ \"./src/lappdelegate.ts\");\nvar LAppTextureManager = (function () {\n    function LAppTextureManager() {\n        this._textures = new Csm_csmVector();\n    }\n    LAppTextureManager.prototype.release = function () {\n        for (var ite = this._textures.begin(); ite.notEqual(this._textures.end()); ite.preIncrement()) {\n            lappdelegate_1.gl.deleteTexture(ite.ptr().id);\n        }\n        this._textures = null;\n    };\n    LAppTextureManager.prototype.createTextureFromPngFile = function (fileName, usePremultiply, callback) {\n        var _this = this;\n        var _loop_1 = function (ite) {\n            if (ite.ptr().fileName == fileName &&\n                ite.ptr().usePremultply == usePremultiply) {\n                ite.ptr().img = new Image();\n                ite.ptr().img.onload = function () { return callback(ite.ptr()); };\n                ite.ptr().img.src = fileName;\n                return { value: void 0 };\n            }\n        };\n        for (var ite = this._textures.begin(); ite.notEqual(this._textures.end()); ite.preIncrement()) {\n            var state_1 = _loop_1(ite);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        var img = new Image();\n        img.onload = function () {\n            var tex = lappdelegate_1.gl.createTexture();\n            lappdelegate_1.gl.bindTexture(lappdelegate_1.gl.TEXTURE_2D, tex);\n            lappdelegate_1.gl.texParameteri(lappdelegate_1.gl.TEXTURE_2D, lappdelegate_1.gl.TEXTURE_MIN_FILTER, lappdelegate_1.gl.LINEAR_MIPMAP_LINEAR);\n            lappdelegate_1.gl.texParameteri(lappdelegate_1.gl.TEXTURE_2D, lappdelegate_1.gl.TEXTURE_MAG_FILTER, lappdelegate_1.gl.LINEAR);\n            if (usePremultiply) {\n                lappdelegate_1.gl.pixelStorei(lappdelegate_1.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n            }\n            lappdelegate_1.gl.texImage2D(lappdelegate_1.gl.TEXTURE_2D, 0, lappdelegate_1.gl.RGBA, lappdelegate_1.gl.RGBA, lappdelegate_1.gl.UNSIGNED_BYTE, img);\n            lappdelegate_1.gl.generateMipmap(lappdelegate_1.gl.TEXTURE_2D);\n            lappdelegate_1.gl.bindTexture(lappdelegate_1.gl.TEXTURE_2D, null);\n            var textureInfo = new TextureInfo();\n            if (textureInfo != null) {\n                textureInfo.fileName = fileName;\n                textureInfo.width = img.width;\n                textureInfo.height = img.height;\n                textureInfo.id = tex;\n                textureInfo.img = img;\n                textureInfo.usePremultply = usePremultiply;\n                _this._textures.pushBack(textureInfo);\n            }\n            callback(textureInfo);\n        };\n        img.src = fileName;\n    };\n    LAppTextureManager.prototype.releaseTextures = function () {\n        for (var i = 0; i < this._textures.getSize(); i++) {\n            this._textures.set(i, null);\n        }\n        this._textures.clear();\n    };\n    LAppTextureManager.prototype.releaseTextureByTexture = function (texture) {\n        for (var i = 0; i < this._textures.getSize(); i++) {\n            if (this._textures.at(i).id != texture) {\n                continue;\n            }\n            this._textures.set(i, null);\n            this._textures.remove(i);\n            break;\n        }\n    };\n    LAppTextureManager.prototype.releaseTextureByFilePath = function (fileName) {\n        for (var i = 0; i < this._textures.getSize(); i++) {\n            if (this._textures.at(i).fileName == fileName) {\n                this._textures.set(i, null);\n                this._textures.remove(i);\n                break;\n            }\n        }\n    };\n    return LAppTextureManager;\n}());\nexports.LAppTextureManager = LAppTextureManager;\nvar TextureInfo = (function () {\n    function TextureInfo() {\n        this.id = null;\n        this.width = 0;\n        this.height = 0;\n    }\n    return TextureInfo;\n}());\nexports.TextureInfo = TextureInfo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcHRleHR1cmVtYW5hZ2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2xhcHB0ZXh0dXJlbWFuYWdlci50cz8yYzBhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmltcG9ydCB7IExpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjc212ZWN0b3IgfSBmcm9tICdAZnJhbWV3b3JrL3R5cGUvY3NtdmVjdG9yJztcbmltcG9ydCBDc21fY3NtVmVjdG9yID0gY3NtdmVjdG9yLmNzbVZlY3RvcjtcbmltcG9ydCBjc21WZWN0b3JfaXRlcmF0b3IgPSBjc212ZWN0b3IuaXRlcmF0b3I7XG5pbXBvcnQgeyBnbCB9IGZyb20gJy4vbGFwcGRlbGVnYXRlJztcblxuLyoqXG4gKiDjg4bjgq/jgrnjg4Hjg6PnrqHnkIbjgq/jg6njgrlcbiAqIOeUu+WDj+iqreOBv+i+vOOBv+OAgeeuoeeQhuOCkuihjOOBhuOCr+ODqeOCueOAglxuICovXG5leHBvcnQgY2xhc3MgTEFwcFRleHR1cmVNYW5hZ2VyIHtcbiAgLyoqXG4gICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fdGV4dHVyZXMgPSBuZXcgQ3NtX2NzbVZlY3RvcjxUZXh0dXJlSW5mbz4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmlL7jgZnjgovjgIJcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIGZvciAoXG4gICAgICBsZXQgaXRlOiBjc21WZWN0b3JfaXRlcmF0b3I8VGV4dHVyZUluZm8+ID0gdGhpcy5fdGV4dHVyZXMuYmVnaW4oKTtcbiAgICAgIGl0ZS5ub3RFcXVhbCh0aGlzLl90ZXh0dXJlcy5lbmQoKSk7XG4gICAgICBpdGUucHJlSW5jcmVtZW50KClcbiAgICApIHtcbiAgICAgIGdsLmRlbGV0ZVRleHR1cmUoaXRlLnB0cigpLmlkKTtcbiAgICB9XG4gICAgdGhpcy5fdGV4dHVyZXMgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUu+WDj+iqreOBv+i+vOOBv1xuICAgKlxuICAgKiBAcGFyYW0gZmlsZU5hbWUg6Kqt44G/6L6844KA55S75YOP44OV44Kh44Kk44Or44OR44K55ZCNXG4gICAqIEBwYXJhbSB1c2VQcmVtdWx0aXBseSBQcmVtdWx05Yem55CG44KS5pyJ5Yq544Gr44GZ44KL44GLXG4gICAqIEByZXR1cm4g55S75YOP5oOF5aCx44CB6Kqt44G/6L6844G/5aSx5pWX5pmC44GvbnVsbOOCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGNyZWF0ZVRleHR1cmVGcm9tUG5nRmlsZShcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxuICAgIHVzZVByZW11bHRpcGx5OiBib29sZWFuLFxuICAgIGNhbGxiYWNrOiAodGV4dHVyZUluZm86IFRleHR1cmVJbmZvKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIC8vIHNlYXJjaCBsb2FkZWQgdGV4dHVyZSBhbHJlYWR5XG4gICAgZm9yIChcbiAgICAgIGxldCBpdGU6IGNzbVZlY3Rvcl9pdGVyYXRvcjxUZXh0dXJlSW5mbz4gPSB0aGlzLl90ZXh0dXJlcy5iZWdpbigpO1xuICAgICAgaXRlLm5vdEVxdWFsKHRoaXMuX3RleHR1cmVzLmVuZCgpKTtcbiAgICAgIGl0ZS5wcmVJbmNyZW1lbnQoKVxuICAgICkge1xuICAgICAgaWYgKFxuICAgICAgICBpdGUucHRyKCkuZmlsZU5hbWUgPT0gZmlsZU5hbWUgJiZcbiAgICAgICAgaXRlLnB0cigpLnVzZVByZW11bHRwbHkgPT0gdXNlUHJlbXVsdGlwbHlcbiAgICAgICkge1xuICAgICAgICAvLyAy5Zue55uu5Lul6ZmN44Gv44Kt44Oj44OD44K344Ol44GM5L2/55So44GV44KM44KLKOW+heOBoeaZgumWk+OBquOBlylcbiAgICAgICAgLy8gV2ViS2l044Gn44Gv5ZCM44GYSW1hZ2Xjga5vbmxvYWTjgpLlho3luqblkbzjgbbjgavjga/lho3jgqTjg7Pjgrnjgr/jg7PjgrnjgYzlv4XopoFcbiAgICAgICAgLy8g6Kmz57Sw77yaaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUwMjQxODFcbiAgICAgICAgaXRlLnB0cigpLmltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpdGUucHRyKCkuaW1nLm9ubG9hZCA9ICgpOiB2b2lkID0+IGNhbGxiYWNrKGl0ZS5wdHIoKSk7XG4gICAgICAgIGl0ZS5wdHIoKS5pbWcuc3JjID0gZmlsZU5hbWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg4fjg7zjgr/jga7jgqrjg7Pjg63jg7zjg4njgpLjg4jjg6rjgqzjg7zjgavjgZnjgotcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWcub25sb2FkID0gKCk6IHZvaWQgPT4ge1xuICAgICAgLy8g44OG44Kv44K544OB44Oj44Kq44OW44K444Kn44Kv44OI44Gu5L2c5oiQXG4gICAgICBjb25zdCB0ZXg6IFdlYkdMVGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcblxuICAgICAgLy8g44OG44Kv44K544OB44Oj44KS6YG45oqeXG4gICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXgpO1xuXG4gICAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjgavjg5Tjgq/jgrvjg6vjgpLmm7jjgY3ovrzjgoBcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoXG4gICAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICAgIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUixcbiAgICAgICAgZ2wuTElORUFSX01JUE1BUF9MSU5FQVJcbiAgICAgICk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcblxuICAgICAgLy8gUHJlbXVsdOWHpueQhuOCkuihjOOCj+OBm+OCi1xuICAgICAgaWYgKHVzZVByZW11bHRpcGx5KSB7XG4gICAgICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIOODhuOCr+OCueODgeODo+OBq+ODlOOCr+OCu+ODq+OCkuabuOOBjei+vOOCgFxuICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBpbWcpO1xuXG4gICAgICAvLyDjg5/jg4Pjg5fjg57jg4Pjg5fjgpLnlJ/miJBcbiAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfMkQpO1xuXG4gICAgICAvLyDjg4bjgq/jgrnjg4Hjg6PjgpLjg5DjgqTjg7Pjg4lcbiAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xuXG4gICAgICBjb25zdCB0ZXh0dXJlSW5mbzogVGV4dHVyZUluZm8gPSBuZXcgVGV4dHVyZUluZm8oKTtcbiAgICAgIGlmICh0ZXh0dXJlSW5mbyAhPSBudWxsKSB7XG4gICAgICAgIHRleHR1cmVJbmZvLmZpbGVOYW1lID0gZmlsZU5hbWU7XG4gICAgICAgIHRleHR1cmVJbmZvLndpZHRoID0gaW1nLndpZHRoO1xuICAgICAgICB0ZXh0dXJlSW5mby5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICB0ZXh0dXJlSW5mby5pZCA9IHRleDtcbiAgICAgICAgdGV4dHVyZUluZm8uaW1nID0gaW1nO1xuICAgICAgICB0ZXh0dXJlSW5mby51c2VQcmVtdWx0cGx5ID0gdXNlUHJlbXVsdGlwbHk7XG4gICAgICAgIHRoaXMuX3RleHR1cmVzLnB1c2hCYWNrKHRleHR1cmVJbmZvKTtcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2sodGV4dHVyZUluZm8pO1xuICAgIH07XG4gICAgaW1nLnNyYyA9IGZpbGVOYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUu+WDj+OBruino+aUvlxuICAgKlxuICAgKiDphY3liJfjgavlrZjlnKjjgZnjgovnlLvlg4/lhajjgabjgpLop6PmlL7jgZnjgovjgIJcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlVGV4dHVyZXMoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90ZXh0dXJlcy5nZXRTaXplKCk7IGkrKykge1xuICAgICAgdGhpcy5fdGV4dHVyZXMuc2V0KGksIG51bGwpO1xuICAgIH1cblxuICAgIHRoaXMuX3RleHR1cmVzLmNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICog55S75YOP44Gu6Kej5pS+XG4gICAqXG4gICAqIOaMh+WumuOBl+OBn+ODhuOCr+OCueODgeODo+OBrueUu+WDj+OCkuino+aUvuOBmeOCi+OAglxuICAgKiBAcGFyYW0gdGV4dHVyZSDop6PmlL7jgZnjgovjg4bjgq/jgrnjg4Hjg6NcbiAgICovXG4gIHB1YmxpYyByZWxlYXNlVGV4dHVyZUJ5VGV4dHVyZSh0ZXh0dXJlOiBXZWJHTFRleHR1cmUpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3RleHR1cmVzLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fdGV4dHVyZXMuYXQoaSkuaWQgIT0gdGV4dHVyZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdGV4dHVyZXMuc2V0KGksIG51bGwpO1xuICAgICAgdGhpcy5fdGV4dHVyZXMucmVtb3ZlKGkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOeUu+WDj+OBruino+aUvlxuICAgKlxuICAgKiDmjIflrprjgZfjgZ/lkI3liY3jga7nlLvlg4/jgpLop6PmlL7jgZnjgovjgIJcbiAgICogQHBhcmFtIGZpbGVOYW1lIOino+aUvuOBmeOCi+eUu+WDj+ODleOCoeOCpOODq+ODkeOCueWQjVxuICAgKi9cbiAgcHVibGljIHJlbGVhc2VUZXh0dXJlQnlGaWxlUGF0aChmaWxlTmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90ZXh0dXJlcy5nZXRTaXplKCk7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX3RleHR1cmVzLmF0KGkpLmZpbGVOYW1lID09IGZpbGVOYW1lKSB7XG4gICAgICAgIHRoaXMuX3RleHR1cmVzLnNldChpLCBudWxsKTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZXMucmVtb3ZlKGkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfdGV4dHVyZXM6IENzbV9jc21WZWN0b3I8VGV4dHVyZUluZm8+O1xufVxuXG4vKipcbiAqIOeUu+WDj+aDheWgseani+mAoOS9k1xuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZUluZm8ge1xuICBpbWc6IEhUTUxJbWFnZUVsZW1lbnQ7IC8vIOeUu+WDj1xuICBpZDogV2ViR0xUZXh0dXJlID0gbnVsbDsgLy8g44OG44Kv44K544OB44OjXG4gIHdpZHRoID0gMDsgLy8g5qiq5bmFXG4gIGhlaWdodCA9IDA7IC8vIOmrmOOBlVxuICB1c2VQcmVtdWx0cGx5OiBib29sZWFuOyAvLyBQcmVtdWx05Yem55CG44KS5pyJ5Yq544Gr44GZ44KL44GLXG4gIGZpbGVOYW1lOiBzdHJpbmc7IC8vIOODleOCoeOCpOODq+WQjVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFPQTtBQUNBO0FBRUE7QUFNQTtBQUlBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQUE7QUFPQTtBQUlBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7O0FBRUE7O0FBaEJBO0FBQ0E7OztBQWdCQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFySkE7QUEwSkE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQVBBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lapptexturemanager.ts\n");

/***/ }),

/***/ "./src/lappview.ts":
/*!*************************!*\
  !*** ./src/lappview.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LAppView = void 0;\nvar cubismmatrix44_1 = __webpack_require__(/*! @framework/math/cubismmatrix44 */ \"./Framework/src/math/cubismmatrix44.ts\");\nvar cubismviewmatrix_1 = __webpack_require__(/*! @framework/math/cubismviewmatrix */ \"./Framework/src/math/cubismviewmatrix.ts\");\nvar Csm_CubismViewMatrix = cubismviewmatrix_1.Live2DCubismFramework.CubismViewMatrix;\nvar Csm_CubismMatrix44 = cubismmatrix44_1.Live2DCubismFramework.CubismMatrix44;\nvar touchmanager_1 = __webpack_require__(/*! ./touchmanager */ \"./src/touchmanager.ts\");\nvar lapplive2dmanager_1 = __webpack_require__(/*! ./lapplive2dmanager */ \"./src/lapplive2dmanager.ts\");\nvar lappdelegate_1 = __webpack_require__(/*! ./lappdelegate */ \"./src/lappdelegate.ts\");\nvar lappsprite_1 = __webpack_require__(/*! ./lappsprite */ \"./src/lappsprite.ts\");\nvar lapppal_1 = __webpack_require__(/*! ./lapppal */ \"./src/lapppal.ts\");\nvar LAppDefine = __importStar(__webpack_require__(/*! ./lappdefine */ \"./src/lappdefine.ts\"));\nvar b2_world_1 = __webpack_require__(/*! ./box2d/dynamics/b2_world */ \"./src/box2d/dynamics/b2_world.ts\");\nvar b2_body_1 = __webpack_require__(/*! ./box2d/dynamics/b2_body */ \"./src/box2d/dynamics/b2_body.ts\");\nvar b2_polygon_shape_1 = __webpack_require__(/*! ./box2d/collision/b2_polygon_shape */ \"./src/box2d/collision/b2_polygon_shape.ts\");\nvar b2_fixture_1 = __webpack_require__(/*! ./box2d/dynamics/b2_fixture */ \"./src/box2d/dynamics/b2_fixture.ts\");\nvar LAppView = (function () {\n    function LAppView() {\n        this._num = 0.8;\n        this._programId = null;\n        this._back = null;\n        this._gear = null;\n        this._next_random_motion = null;\n        this._touchManager = new touchmanager_1.TouchManager();\n        this._deviceToScreen = new Csm_CubismMatrix44();\n        this._viewMatrix = new Csm_CubismViewMatrix();\n    }\n    LAppView.prototype.initialize = function () {\n        var width = lappdelegate_1.canvas.width, height = lappdelegate_1.canvas.height;\n        var ratio = height / width;\n        var left = LAppDefine.ViewLogicalLeft;\n        var right = LAppDefine.ViewLogicalRight;\n        var bottom = -ratio;\n        var top = ratio;\n        this._viewMatrix.setScreenRect(left, right, bottom, top);\n        var screenW = Math.abs(left - right);\n        this._deviceToScreen.scaleRelative(screenW / width, -screenW / width);\n        this._deviceToScreen.translateRelative(-width * 0.5, -height * 0.5);\n        this._viewMatrix.setMaxScale(LAppDefine.ViewMaxScale);\n        this._viewMatrix.setMinScale(LAppDefine.ViewMinScale);\n        this._viewMatrix.setMaxScreenRect(LAppDefine.ViewLogicalMaxLeft, LAppDefine.ViewLogicalMaxRight, LAppDefine.ViewLogicalMaxBottom, LAppDefine.ViewLogicalMaxTop);\n    };\n    LAppView.prototype.release = function () {\n        this._viewMatrix = null;\n        this._touchManager = null;\n        this._deviceToScreen = null;\n        this._gear.release();\n        this._gear = null;\n        this._back.release();\n        this._back = null;\n        lappdelegate_1.gl.deleteProgram(this._programId);\n        this._programId = null;\n    };\n    LAppView.prototype.render = function () {\n        lappdelegate_1.gl.useProgram(this._programId);\n        if (this._back) {\n            this._back.render(this._programId);\n        }\n        if (this._gear) {\n            this._gear.render(this._programId);\n        }\n        if (this._next_random_motion) {\n            this._next_random_motion.render(this._programId);\n        }\n        lappdelegate_1.gl.flush();\n        var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n        live2DManager.onUpdate();\n        lappdelegate_1.gl.useProgram(this._programId);\n        if (this._ground) {\n            this._ground.render(this._programId);\n            this._apple.render(this._programId);\n        }\n        if (this._world) {\n            this._world.Step(1 / 60, 6, 2);\n            for (var bodyIndex = this._world.GetBodyList(); bodyIndex; bodyIndex = bodyIndex.GetNext()) {\n                var x = bodyIndex.GetPosition().x * 30;\n                var y = bodyIndex.GetPosition().y * 30;\n                var r = bodyIndex.GetAngle() * 180 / Math.PI;\n                if (bodyIndex.m_userData.type == 'apple' && this._apple) {\n                    this._apple.setX(x);\n                    this._apple.setY(y);\n                    this._apple.render(this._programId);\n                }\n            }\n        }\n        lappdelegate_1.gl.flush();\n    };\n    LAppView.prototype.initializeSprite = function () {\n        var _this = this;\n        var width = lappdelegate_1.canvas.width;\n        var height = lappdelegate_1.canvas.height;\n        var textureManager = lappdelegate_1.LAppDelegate.getInstance().getTextureManager();\n        var resourcesPath = LAppDefine.ResourcesPath;\n        var imageName = '';\n        imageName = LAppDefine.BackImageName;\n        var initBackGroundTexture = function (textureInfo) {\n            var x = width * 0.5;\n            var y = height * 0.5;\n            var fwidth = width;\n            var fheight = height;\n            _this._back = new lappsprite_1.LAppSprite(x, y, fwidth, fheight, textureInfo.id);\n        };\n        textureManager.createTextureFromPngFile(resourcesPath + imageName, false, initBackGroundTexture);\n        this._world = new b2_world_1.b2World({ x: 0, y: -10 });\n        var groundBodyDef = new b2_body_1.b2BodyDef();\n        groundBodyDef.userData = { type: \"ground\" };\n        groundBodyDef.position.Set(0, 200 / 30);\n        groundBodyDef.type = b2_body_1.b2BodyType.b2_staticBody;\n        var groundBox = new b2_polygon_shape_1.b2PolygonShape();\n        groundBox.SetAsBox(500 / 2 / 30, 30 / 2 / 30);\n        this._world.CreateBody(groundBodyDef).CreateFixture(groundBox);\n        var appleDef = new b2_body_1.b2BodyDef();\n        appleDef.userData = { type: 'apple' };\n        appleDef.type = b2_body_1.b2BodyType.b2_dynamicBody;\n        appleDef.position.Set(30 / 30, 0 / 30);\n        var appleShape = new b2_polygon_shape_1.b2PolygonShape();\n        appleShape.SetAsBox(50 / 2 / 30, 50 / 2 / 30);\n        var fixDef = new b2_fixture_1.b2FixtureDef();\n        fixDef.shape = appleShape;\n        fixDef.density = 1.0;\n        fixDef.friction = 0.3;\n        fixDef.restitution = 0.2;\n        this._world.CreateBody(appleDef).CreateFixture(fixDef);\n        imageName = LAppDefine.GearImageName;\n        var initGearTexture = function (textureInfo) {\n            var x = width - textureInfo.width * 0.5;\n            var y = height - textureInfo.height * 0.5;\n            var fwidth = textureInfo.width;\n            var fheight = textureInfo.height;\n            _this._gear = new lappsprite_1.LAppSprite(x, y, fwidth, fheight, textureInfo.id);\n        };\n        textureManager.createTextureFromPngFile(resourcesPath + imageName, false, initGearTexture);\n        if (this._programId == null) {\n            this._programId = lappdelegate_1.LAppDelegate.getInstance().createShader();\n        }\n    };\n    LAppView.prototype.onTouchesBegan = function (pointX, pointY) {\n        this._touchManager.touchesBegan(pointX, pointY);\n    };\n    LAppView.prototype.onTouchesMoved = function (pointX, pointY) {\n        var viewX = this.transformViewX(this._touchManager.getX());\n        var viewY = this.transformViewY(this._touchManager.getY());\n        this._touchManager.touchesMoved(pointX, pointY);\n        var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n        live2DManager.onDrag(viewX, viewY);\n    };\n    LAppView.prototype.onTouchesEnded = function (pointX, pointY) {\n        var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n        live2DManager.onDrag(0.0, 0.0);\n        {\n            var x = this._deviceToScreen.transformX(this._touchManager.getX());\n            var y = this._deviceToScreen.transformY(this._touchManager.getY());\n            if (LAppDefine.DebugTouchLogEnable) {\n                lapppal_1.LAppPal.printMessage(\"[APP]touchesEnded x: \" + x + \" y: \" + y + \" pointX:\" + pointX + \" pointY:\" + pointY);\n            }\n            live2DManager.onTap(x, y);\n        }\n    };\n    LAppView.prototype.transformViewX = function (deviceX) {\n        var screenX = this._deviceToScreen.transformX(deviceX);\n        return this._viewMatrix.invertTransformX(screenX);\n    };\n    LAppView.prototype.transformViewY = function (deviceY) {\n        var screenY = this._deviceToScreen.transformY(deviceY);\n        return this._viewMatrix.invertTransformY(screenY);\n    };\n    LAppView.prototype.transformScreenX = function (deviceX) {\n        return this._deviceToScreen.transformX(deviceX);\n    };\n    LAppView.prototype.transformScreenY = function (deviceY) {\n        return this._deviceToScreen.transformY(deviceY);\n    };\n    return LAppView;\n}());\nexports.LAppView = LAppView;\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGFwcHZpZXcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbGFwcHZpZXcudHM/YzA2MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodChjKSBMaXZlMkQgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBMaXZlMkQgT3BlbiBTb2Z0d2FyZSBsaWNlbnNlXG4gKiB0aGF0IGNhbiBiZSBmb3VuZCBhdCBodHRwczovL3d3dy5saXZlMmQuY29tL2V1bGEvbGl2ZTJkLW9wZW4tc29mdHdhcmUtbGljZW5zZS1hZ3JlZW1lbnRfZW4uaHRtbC5cbiAqL1xuXG5pbXBvcnQge0xpdmUyREN1YmlzbUZyYW1ld29yayBhcyBjdWJpc21NYXRyaXg0NH0gZnJvbSAnQGZyYW1ld29yay9tYXRoL2N1YmlzbW1hdHJpeDQ0JztcbmltcG9ydCB7TGl2ZTJEQ3ViaXNtRnJhbWV3b3JrIGFzIGN1YmlzbXZpZXdtYXRyaXh9IGZyb20gJ0BmcmFtZXdvcmsvbWF0aC9jdWJpc212aWV3bWF0cml4JztcbmltcG9ydCBDc21fQ3ViaXNtVmlld01hdHJpeCA9IGN1YmlzbXZpZXdtYXRyaXguQ3ViaXNtVmlld01hdHJpeDtcbmltcG9ydCBDc21fQ3ViaXNtTWF0cml4NDQgPSBjdWJpc21NYXRyaXg0NC5DdWJpc21NYXRyaXg0NDtcbmltcG9ydCB7VG91Y2hNYW5hZ2VyfSBmcm9tICcuL3RvdWNobWFuYWdlcic7XG5pbXBvcnQge0xBcHBMaXZlMkRNYW5hZ2VyfSBmcm9tICcuL2xhcHBsaXZlMmRtYW5hZ2VyJztcbmltcG9ydCB7TEFwcERlbGVnYXRlLCBjYW52YXMsIGdsfSBmcm9tICcuL2xhcHBkZWxlZ2F0ZSc7XG5pbXBvcnQge0xBcHBTcHJpdGUsIFJlY3R9IGZyb20gJy4vbGFwcHNwcml0ZSc7XG5pbXBvcnQge1RleHR1cmVJbmZvfSBmcm9tICcuL2xhcHB0ZXh0dXJlbWFuYWdlcic7XG5pbXBvcnQge0xBcHBQYWx9IGZyb20gJy4vbGFwcHBhbCc7XG5pbXBvcnQgKiBhcyBMQXBwRGVmaW5lIGZyb20gJy4vbGFwcGRlZmluZSc7XG5pbXBvcnQge2IyV29ybGR9IGZyb20gXCIuL2JveDJkL2R5bmFtaWNzL2IyX3dvcmxkXCI7XG5pbXBvcnQge2IyQm9keSwgYjJCb2R5RGVmLCBiMkJvZHlUeXBlfSBmcm9tIFwiLi9ib3gyZC9keW5hbWljcy9iMl9ib2R5XCI7XG5pbXBvcnQge2IyUG9seWdvblNoYXBlfSBmcm9tIFwiLi9ib3gyZC9jb2xsaXNpb24vYjJfcG9seWdvbl9zaGFwZVwiO1xuaW1wb3J0IHtiMkZpeHR1cmVEZWZ9IGZyb20gXCIuL2JveDJkL2R5bmFtaWNzL2IyX2ZpeHR1cmVcIjtcblxuLyoqXG4gKiDmj4/nlLvjgq/jg6njgrnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIExBcHBWaWV3IHtcbiAgICBfdG91Y2hNYW5hZ2VyOiBUb3VjaE1hbmFnZXI7IC8vIOOCv+ODg+ODgeODnuODjeODvOOCuOODo+ODvFxuICAgIF9kZXZpY2VUb1NjcmVlbjogQ3NtX0N1YmlzbU1hdHJpeDQ0OyAvLyDjg4fjg5DjgqTjgrnjgYvjgonjgrnjgq/jg6rjg7zjg7Pjgbjjga7ooYzliJdcbiAgICBfdmlld01hdHJpeDogQ3NtX0N1YmlzbVZpZXdNYXRyaXg7IC8vIHZpZXdNYXRyaXhcbiAgICBfcHJvZ3JhbUlkOiBXZWJHTFByb2dyYW07IC8vIOedgOiJsuWZqElEXG4gICAgX2JhY2s6IExBcHBTcHJpdGU7IC8vIOiDjOaZr+eUu+WDj1xuICAgIF9nZWFyOiBMQXBwU3ByaXRlOyAvLyDjgq7jgqLnlLvlg49cbiAgICBfY2hhbmdlTW9kZWw6IGJvb2xlYW47IC8vIOODouODh+ODq+WIh+OCiuabv+OBiOODleODqeOCsFxuICAgIF9pc0NsaWNrOiBib29sZWFuOyAvLyDjgq/jg6rjg4Pjgq/kuK1cbiAgICBfbmV4dF9yYW5kb21fbW90aW9uOiBMQXBwU3ByaXRlOyAvLyDpmo/mnLrkuIDkuKrliqjkvZxcbiAgICBfbnVtID0gMC44O1xuICAgIF93b3JsZDogYjJXb3JsZDtcbiAgICBfZ3JvdW5kOiBMQXBwU3ByaXRlO1xuICAgIF9hcHBsZTogTEFwcFNwcml0ZTtcblxuICAgIC8qKlxuICAgICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9wcm9ncmFtSWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9iYWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZ2VhciA9IG51bGw7XG4gICAgICAgIHRoaXMuX25leHRfcmFuZG9tX21vdGlvbiA9IG51bGw7XG5cbiAgICAgICAgLy8g44K/44OD44OB6Zai5L+C44Gu44Kk44OZ44Oz44OI566h55CGXG4gICAgICAgIHRoaXMuX3RvdWNoTWFuYWdlciA9IG5ldyBUb3VjaE1hbmFnZXIoKTtcblxuICAgICAgICAvLyDjg4fjg5DjgqTjgrnluqfmqJnjgYvjgonjgrnjgq/jg6rjg7zjg7PluqfmqJnjgavlpInmj5vjgZnjgovjgZ/jgoHjga5cbiAgICAgICAgdGhpcy5fZGV2aWNlVG9TY3JlZW4gPSBuZXcgQ3NtX0N1YmlzbU1hdHJpeDQ0KCk7XG5cbiAgICAgICAgLy8g55S76Z2i44Gu6KGo56S644Gu5ouh5aSn57iu5bCP44KE56e75YuV44Gu5aSJ5o+b44KS6KGM44GG6KGM5YiXXG4gICAgICAgIHRoaXMuX3ZpZXdNYXRyaXggPSBuZXcgQ3NtX0N1YmlzbVZpZXdNYXRyaXgoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDliJ3mnJ/ljJbjgZnjgovjgIJcbiAgICAgKi9cbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gY2FudmFzO1xuXG4gICAgICAgIGNvbnN0IHJhdGlvOiBudW1iZXIgPSBoZWlnaHQgLyB3aWR0aDtcbiAgICAgICAgY29uc3QgbGVmdDogbnVtYmVyID0gTEFwcERlZmluZS5WaWV3TG9naWNhbExlZnQ7XG4gICAgICAgIGNvbnN0IHJpZ2h0OiBudW1iZXIgPSBMQXBwRGVmaW5lLlZpZXdMb2dpY2FsUmlnaHQ7XG4gICAgICAgIGNvbnN0IGJvdHRvbTogbnVtYmVyID0gLXJhdGlvO1xuICAgICAgICBjb25zdCB0b3A6IG51bWJlciA9IHJhdGlvO1xuXG4gICAgICAgIHRoaXMuX3ZpZXdNYXRyaXguc2V0U2NyZWVuUmVjdChsZWZ0LCByaWdodCwgYm90dG9tLCB0b3ApOyAvLyDlr7nlupTkuo7orr7lpIfnmoTnlLvpnaLojIPlm7TjgIJY55qE5bem56uv44CBWOeahOWPs+err+OAgVnnmoTkuIvnq6/jgIFZ55qE5LiK56uvXG5cbiAgICAgICAgY29uc3Qgc2NyZWVuVzogbnVtYmVyID0gTWF0aC5hYnMobGVmdCAtIHJpZ2h0KTtcbiAgICAgICAgdGhpcy5fZGV2aWNlVG9TY3JlZW4uc2NhbGVSZWxhdGl2ZShzY3JlZW5XIC8gd2lkdGgsIC1zY3JlZW5XIC8gd2lkdGgpO1xuICAgICAgICB0aGlzLl9kZXZpY2VUb1NjcmVlbi50cmFuc2xhdGVSZWxhdGl2ZSgtd2lkdGggKiAwLjUsIC1oZWlnaHQgKiAwLjUpO1xuXG4gICAgICAgIC8vIOaYvuekuuiMg+WbtOeahOiuvuWumlxuICAgICAgICB0aGlzLl92aWV3TWF0cml4LnNldE1heFNjYWxlKExBcHBEZWZpbmUuVmlld01heFNjYWxlKTsgLy8g5p6B6ZmQ5omp5bGV546HXG4gICAgICAgIHRoaXMuX3ZpZXdNYXRyaXguc2V0TWluU2NhbGUoTEFwcERlZmluZS5WaWV3TWluU2NhbGUpOyAvLyDmnoHpmZDnvKnlsI/njodcblxuICAgICAgICAvLyDog73mmL7npLrnmoTmnIDlpKfojIPlm7RcbiAgICAgICAgdGhpcy5fdmlld01hdHJpeC5zZXRNYXhTY3JlZW5SZWN0KFxuICAgICAgICAgICAgTEFwcERlZmluZS5WaWV3TG9naWNhbE1heExlZnQsXG4gICAgICAgICAgICBMQXBwRGVmaW5lLlZpZXdMb2dpY2FsTWF4UmlnaHQsXG4gICAgICAgICAgICBMQXBwRGVmaW5lLlZpZXdMb2dpY2FsTWF4Qm90dG9tLFxuICAgICAgICAgICAgTEFwcERlZmluZS5WaWV3TG9naWNhbE1heFRvcFxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6Kej5pS+44GZ44KLXG4gICAgICovXG4gICAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3ZpZXdNYXRyaXggPSBudWxsO1xuICAgICAgICB0aGlzLl90b3VjaE1hbmFnZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9kZXZpY2VUb1NjcmVlbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fZ2Vhci5yZWxlYXNlKCk7XG4gICAgICAgIHRoaXMuX2dlYXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2JhY2sucmVsZWFzZSgpO1xuICAgICAgICB0aGlzLl9iYWNrID0gbnVsbDtcblxuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHRoaXMuX3Byb2dyYW1JZCk7XG4gICAgICAgIHRoaXMuX3Byb2dyYW1JZCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5o+P55S744GZ44KL44CCXG4gICAgICovXG4gICAgcHVibGljIHJlbmRlcigpOiB2b2lkIHtcbiAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtSWQpO1xuXG4gICAgICAgIGlmICh0aGlzLl9iYWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9iYWNrLnJlbmRlcih0aGlzLl9wcm9ncmFtSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9nZWFyKSB7XG4gICAgICAgICAgICB0aGlzLl9nZWFyLnJlbmRlcih0aGlzLl9wcm9ncmFtSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9uZXh0X3JhbmRvbV9tb3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX25leHRfcmFuZG9tX21vdGlvbi5yZW5kZXIodGhpcy5fcHJvZ3JhbUlkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZ2wuZmx1c2goKTtcblxuICAgICAgICBjb25zdCBsaXZlMkRNYW5hZ2VyOiBMQXBwTGl2ZTJETWFuYWdlciA9IExBcHBMaXZlMkRNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cbiAgICAgICAgbGl2ZTJETWFuYWdlci5vblVwZGF0ZSgpO1xuXG4gICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbUlkKTtcbiAgICAgICAgaWYgKHRoaXMuX2dyb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5fZ3JvdW5kLnJlbmRlcih0aGlzLl9wcm9ncmFtSWQpXG4gICAgICAgICAgICB0aGlzLl9hcHBsZS5yZW5kZXIodGhpcy5fcHJvZ3JhbUlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOeJqeeQhuS4lueVjOaYr+WQpuWkhOeQhuWujOaIkFxuICAgICAgICBpZiAodGhpcy5fd29ybGQpIHtcbiAgICAgICAgICAgIHRoaXMuX3dvcmxkLlN0ZXAoMSAvIDYwLCA2LCAyKTtcbiAgICAgICAgICAgIGZvciAobGV0IGJvZHlJbmRleDogYjJCb2R5ID0gdGhpcy5fd29ybGQuR2V0Qm9keUxpc3QoKTsgYm9keUluZGV4OyBib2R5SW5kZXggPSBib2R5SW5kZXguR2V0TmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHggPSBib2R5SW5kZXguR2V0UG9zaXRpb24oKS54ICogMzA7XG4gICAgICAgICAgICAgICAgbGV0IHkgPSBib2R5SW5kZXguR2V0UG9zaXRpb24oKS55ICogMzA7XG4gICAgICAgICAgICAgICAgbGV0IHIgPSBib2R5SW5kZXguR2V0QW5nbGUoKSAqIDE4MCAvIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgaWYgKGJvZHlJbmRleC5tX3VzZXJEYXRhLnR5cGUgPT0gJ2FwcGxlJyAmJiB0aGlzLl9hcHBsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBsZS5zZXRYKHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBsZS5zZXRZKHkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBsZS5yZW5kZXIodGhpcy5fcHJvZ3JhbUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2wuZmx1c2goKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOeUu+WDj+OBruWIneacn+WMluOCkuihjOOBhuOAglxuICAgICAqL1xuICAgIHB1YmxpYyBpbml0aWFsaXplU3ByaXRlKCk6IHZvaWQge1xuXG4gICAgICAgIGNvbnN0IHdpZHRoOiBudW1iZXIgPSBjYW52YXMud2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodDogbnVtYmVyID0gY2FudmFzLmhlaWdodDtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlTWFuYWdlciA9IExBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpLmdldFRleHR1cmVNYW5hZ2VyKCk7XG4gICAgICAgIGNvbnN0IHJlc291cmNlc1BhdGggPSBMQXBwRGVmaW5lLlJlc291cmNlc1BhdGg7XG5cbiAgICAgICAgbGV0IGltYWdlTmFtZSA9ICcnO1xuXG4gICAgICAgIC8vIOiDjOaZr+eUu+WDj+WIneacn+WMllxuICAgICAgICBpbWFnZU5hbWUgPSBMQXBwRGVmaW5lLkJhY2tJbWFnZU5hbWU7XG5cbiAgICAgICAgLy8g6Z2e5ZCM5pyf44Gq44Gu44Gn44Kz44O844Or44OQ44OD44Kv6Zai5pWw44KS5L2c5oiQXG4gICAgICAgIGNvbnN0IGluaXRCYWNrR3JvdW5kVGV4dHVyZSA9ICh0ZXh0dXJlSW5mbzogVGV4dHVyZUluZm8pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHg6IG51bWJlciA9IHdpZHRoICogMC41O1xuICAgICAgICAgICAgY29uc3QgeTogbnVtYmVyID0gaGVpZ2h0ICogMC41O1xuXG4gICAgICAgICAgICBjb25zdCBmd2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGZoZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLl9iYWNrID0gbmV3IExBcHBTcHJpdGUoeCwgeSwgZndpZHRoLCBmaGVpZ2h0LCB0ZXh0dXJlSW5mby5pZCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIOiDjOaZr1xuICAgICAgICB0ZXh0dXJlTWFuYWdlci5jcmVhdGVUZXh0dXJlRnJvbVBuZ0ZpbGUoXG4gICAgICAgICAgICByZXNvdXJjZXNQYXRoICsgaW1hZ2VOYW1lLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBpbml0QmFja0dyb3VuZFRleHR1cmVcbiAgICAgICAgKTtcblxuICAgICAgICAvLyDliJ3lp4vljJZib3gyZCDpgLvovpFcbiAgICAgICAgdGhpcy5fd29ybGQgPSBuZXcgYjJXb3JsZCh7eDogMCwgeTogLTEwfSk7XG4gICAgICAgIGxldCBncm91bmRCb2R5RGVmID0gbmV3IGIyQm9keURlZigpO1xuICAgICAgICBncm91bmRCb2R5RGVmLnVzZXJEYXRhID0ge3R5cGU6IFwiZ3JvdW5kXCJ9XG4gICAgICAgIGdyb3VuZEJvZHlEZWYucG9zaXRpb24uU2V0KDAsIDIwMCAvIDMwKTsvL+atpOWkhOWwseaYr+aKijMwMOWDj+e0oOi9rOaNouaIkDEw57GzXG4gICAgICAgIGdyb3VuZEJvZHlEZWYudHlwZSA9IGIyQm9keVR5cGUuYjJfc3RhdGljQm9keTsvL+WcsOmdouaYr+S4jeS8muWKqOeahO+8jOaJgOS7peiuvue9ruS4uumdmeaAgVxuICAgICAgICAvLyDlnLDpnaJcbiAgICAgICAgbGV0IGdyb3VuZEJveCA9IG5ldyBiMlBvbHlnb25TaGFwZSgpOy8v6L+Z5piv5Liq55+p5b2iXG4gICAgICAgIGdyb3VuZEJveC5TZXRBc0JveCg1MDAgLyAyIC8gMzAsIDMwIC8gMiAvIDMwKTtcbiAgICAgICAgdGhpcy5fd29ybGQuQ3JlYXRlQm9keShncm91bmRCb2R5RGVmKS5DcmVhdGVGaXh0dXJlKGdyb3VuZEJveCk7XG5cbiAgICAgICAgLy8g56S854mpXG4gICAgICAgIGxldCBhcHBsZURlZiA9IG5ldyBiMkJvZHlEZWYoKTtcbiAgICAgICAgYXBwbGVEZWYudXNlckRhdGEgPSB7dHlwZTogJ2FwcGxlJ31cbiAgICAgICAgYXBwbGVEZWYudHlwZSA9IGIyQm9keVR5cGUuYjJfZHluYW1pY0JvZHk7Ly/liqjmgIHnmoRcbiAgICAgICAgYXBwbGVEZWYucG9zaXRpb24uU2V0KDMwIC8gMzAsIDAgLyAzMCk7XG4gICAgICAgIC8vIOWImuS9k1xuICAgICAgICBsZXQgYXBwbGVTaGFwZSA9IG5ldyBiMlBvbHlnb25TaGFwZSgpO1xuICAgICAgICBhcHBsZVNoYXBlLlNldEFzQm94KDUwIC8gMiAvIDMwLCA1MCAvIDIgLyAzMCk7XG4gICAgICAgIC8vIOadkOi0qFxuICAgICAgICBsZXQgZml4RGVmID0gbmV3IGIyRml4dHVyZURlZigpOy8v6L+Z5Liq5bCx5piv5p2Q6LSoXG5cbiAgICAgICAgZml4RGVmLnNoYXBlID0gYXBwbGVTaGFwZTtcbiAgICAgICAgZml4RGVmLmRlbnNpdHkgPSAxLjA7Ly/ov5nkuKrlsLHmmK/kuYvliY3mj5DliLDov4fnmoTlr4bluqZcbiAgICAgICAgZml4RGVmLmZyaWN0aW9uID0gMC4zOy8v6L+Z5Liq5piv5pGp5pOmXG4gICAgICAgIGZpeERlZi5yZXN0aXR1dGlvbiA9IDAuMjsvL+aOieWcqOWcsOS4iuW8uei1t+adpeeahOaViOaenFxuICAgICAgICB0aGlzLl93b3JsZC5DcmVhdGVCb2R5KGFwcGxlRGVmKS5DcmVhdGVGaXh0dXJlKGZpeERlZik7Ly/mt7vliqDliLDkuJbnlYzkuK1cblxuICAgICAgICAvL+atr+i7iueUu+WDj+WIneacn+WMllxuICAgICAgICBpbWFnZU5hbWUgPSBMQXBwRGVmaW5lLkdlYXJJbWFnZU5hbWU7XG4gICAgICAgIGNvbnN0IGluaXRHZWFyVGV4dHVyZSA9ICh0ZXh0dXJlSW5mbzogVGV4dHVyZUluZm8pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHggPSB3aWR0aCAtIHRleHR1cmVJbmZvLndpZHRoICogMC41O1xuICAgICAgICAgICAgY29uc3QgeSA9IGhlaWdodCAtIHRleHR1cmVJbmZvLmhlaWdodCAqIDAuNTtcbiAgICAgICAgICAgIGNvbnN0IGZ3aWR0aCA9IHRleHR1cmVJbmZvLndpZHRoO1xuICAgICAgICAgICAgY29uc3QgZmhlaWdodCA9IHRleHR1cmVJbmZvLmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuX2dlYXIgPSBuZXcgTEFwcFNwcml0ZSh4LCB5LCBmd2lkdGgsIGZoZWlnaHQsIHRleHR1cmVJbmZvLmlkKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0ZXh0dXJlTWFuYWdlci5jcmVhdGVUZXh0dXJlRnJvbVBuZ0ZpbGUoXG4gICAgICAgICAgICByZXNvdXJjZXNQYXRoICsgaW1hZ2VOYW1lLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBpbml0R2VhclRleHR1cmVcbiAgICAgICAgKTtcbiAgICAgICAgLy8g5Yib5bu6552A6Imy5ZmoXG4gICAgICAgIGlmICh0aGlzLl9wcm9ncmFtSWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbUlkID0gTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuY3JlYXRlU2hhZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDooqvop6bmkbjnmoTml7blgJnooqvlj6vjgIJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwb2ludFgg5bGP5bmVWOWdkOagh1xuICAgICAqIEBwYXJhbSBwb2ludFkg5bGP5bmVWeWdkOagh1xuICAgICAqL1xuICAgIHB1YmxpYyBvblRvdWNoZXNCZWdhbihwb2ludFg6IG51bWJlciwgcG9pbnRZOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fdG91Y2hNYW5hZ2VyLnRvdWNoZXNCZWdhbihwb2ludFgsIHBvaW50WSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6Kem5pG455qE5pe25YCZ5aaC5p6c5oyH6ZKI56e75Yqo55qE6K+d5bCx5Lya6KKr5Y+r44CCXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcG9pbnRYIOOCueOCr+ODquODvOODs1jluqfmqJlcbiAgICAgKiBAcGFyYW0gcG9pbnRZIOOCueOCr+ODquODvOODs1nluqfmqJlcbiAgICAgKi9cbiAgICBwdWJsaWMgb25Ub3VjaGVzTW92ZWQocG9pbnRYOiBudW1iZXIsIHBvaW50WTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHZpZXdYOiBudW1iZXIgPSB0aGlzLnRyYW5zZm9ybVZpZXdYKHRoaXMuX3RvdWNoTWFuYWdlci5nZXRYKCkpO1xuICAgICAgICBjb25zdCB2aWV3WTogbnVtYmVyID0gdGhpcy50cmFuc2Zvcm1WaWV3WSh0aGlzLl90b3VjaE1hbmFnZXIuZ2V0WSgpKTtcblxuICAgICAgICB0aGlzLl90b3VjaE1hbmFnZXIudG91Y2hlc01vdmVkKHBvaW50WCwgcG9pbnRZKTtcbiAgICAgICAgY29uc3QgbGl2ZTJETWFuYWdlcjogTEFwcExpdmUyRE1hbmFnZXIgPSBMQXBwTGl2ZTJETWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBsaXZlMkRNYW5hZ2VyLm9uRHJhZyh2aWV3WCwgdmlld1kpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOCv+ODg+ODgeOBjOe1guS6huOBl+OBn+OCieWRvOOBsOOCjOOCi+OAglxuICAgICAqXG4gICAgICogQHBhcmFtIHBvaW50WCDjgrnjgq/jg6rjg7zjg7NY5bqn5qiZXG4gICAgICogQHBhcmFtIHBvaW50WSDjgrnjgq/jg6rjg7zjg7NZ5bqn5qiZXG4gICAgICovXG4gICAgcHVibGljIG9uVG91Y2hlc0VuZGVkKHBvaW50WDogbnVtYmVyLCBwb2ludFk6IG51bWJlcik6IHZvaWQge1xuXG4gICAgICAgIC8vIOinpuaRuOe7k+adn1xuICAgICAgICBjb25zdCBsaXZlMkRNYW5hZ2VyOiBMQXBwTGl2ZTJETWFuYWdlciA9IExBcHBMaXZlMkRNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICAgIGxpdmUyRE1hbmFnZXIub25EcmFnKDAuMCwgMC4wKTtcblxuICAgICAgICB7XG4gICAgICAgICAgICAvLyDjgrfjg7PjgrDjg6vjgr/jg4Pjg5dcbiAgICAgICAgICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMuX2RldmljZVRvU2NyZWVuLnRyYW5zZm9ybVgoXG4gICAgICAgICAgICAgICAgdGhpcy5fdG91Y2hNYW5hZ2VyLmdldFgoKVxuICAgICAgICAgICAgKTsgLy8g6KuW55CG5bqn5qiZ5aSJ5o+b44GX44Gf5bqn5qiZ44KS5Y+W5b6X44CCXG4gICAgICAgICAgICBjb25zdCB5OiBudW1iZXIgPSB0aGlzLl9kZXZpY2VUb1NjcmVlbi50cmFuc2Zvcm1ZKFxuICAgICAgICAgICAgICAgIHRoaXMuX3RvdWNoTWFuYWdlci5nZXRZKClcbiAgICAgICAgICAgICk7IC8vIOirlueQhuW6p+aomeWkieWMluOBl+OBn+W6p+aomeOCkuWPluW+l+OAglxuXG4gICAgICAgICAgICBpZiAoTEFwcERlZmluZS5EZWJ1Z1RvdWNoTG9nRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgTEFwcFBhbC5wcmludE1lc3NhZ2UoYFtBUFBddG91Y2hlc0VuZGVkIHg6ICR7eH0geTogJHt5fSBwb2ludFg6JHtwb2ludFh9IHBvaW50WToke3BvaW50WX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpdmUyRE1hbmFnZXIub25UYXAoeCwgeSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIZY5Z2Q5qCH6L2s5o2i5Li6Vmlld+WdkOagh+OAglxuICAgICAqXG4gICAgICogQHBhcmFtIGRldmljZVgg44OH44OQ44Kk44K5WOW6p+aomVxuICAgICAqL1xuICAgIHB1YmxpYyB0cmFuc2Zvcm1WaWV3WChkZXZpY2VYOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBzY3JlZW5YOiBudW1iZXIgPSB0aGlzLl9kZXZpY2VUb1NjcmVlbi50cmFuc2Zvcm1YKGRldmljZVgpOyAvLyDoq5bnkIbluqfmqJnlpInmj5vjgZfjgZ/luqfmqJnjgpLlj5blvpfjgIJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdNYXRyaXguaW52ZXJ0VHJhbnNmb3JtWChzY3JlZW5YKTsgLy8g5ouh5aSn44CB57iu5bCP44CB56e75YuV5b6M44Gu5YCk44CCXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogWeW6p+aomeOCklZpZXfluqfmqJnjgavlpInmj5vjgZnjgovjgIJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZXZpY2VZIOODh+ODkOOCpOOCuVnluqfmqJlcbiAgICAgKi9cbiAgICBwdWJsaWMgdHJhbnNmb3JtVmlld1koZGV2aWNlWTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuWTogbnVtYmVyID0gdGhpcy5fZGV2aWNlVG9TY3JlZW4udHJhbnNmb3JtWShkZXZpY2VZKTsgLy8g6KuW55CG5bqn5qiZ5aSJ5o+b44GX44Gf5bqn5qiZ44KS5Y+W5b6X44CCXG4gICAgICAgIHJldHVybiB0aGlzLl92aWV3TWF0cml4LmludmVydFRyYW5zZm9ybVkoc2NyZWVuWSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5bCGWOWdkOagh+WPmOaNouS4ulNjcmVlbuWdkOagh+OAglxuICAgICAqIEBwYXJhbSBkZXZpY2VYIOODh+ODkOOCpOOCuVjluqfmqJlcbiAgICAgKi9cbiAgICBwdWJsaWMgdHJhbnNmb3JtU2NyZWVuWChkZXZpY2VYOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGV2aWNlVG9TY3JlZW4udHJhbnNmb3JtWChkZXZpY2VYKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBZ5bqn5qiZ44KSU2NyZWVu5bqn5qiZ44Gr5aSJ5o+b44GZ44KL44CCXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGV2aWNlWSDjg4fjg5DjgqTjgrlZ5bqn5qiZXG4gICAgICovXG4gICAgcHVibGljIHRyYW5zZm9ybVNjcmVlblkoZGV2aWNlWTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RldmljZVRvU2NyZWVuLnRyYW5zZm9ybVkoZGV2aWNlWSk7XG4gICAgfVxuXG5cbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBa0JBO0FBUkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQU9BO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBL1NBO0FBK1NBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lappview.ts\n");

/***/ }),

/***/ "./src/lstore.ts":
/*!***********************!*\
  !*** ./src/lstore.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LStore = void 0;\nvar LStore = (function () {\n    function LStore() {\n    }\n    LStore.get = function (key, def) {\n        if (def === void 0) { def = undefined; }\n        if (!window['store']) {\n            console.error('store未初始化 ');\n            return undefined;\n        }\n        return window['store'].get('live2d.' + key, def);\n    };\n    LStore.set = function (key, val) {\n        if (!window['store']) {\n            console.error('store未初始化');\n            return undefined;\n        }\n        return window['store'].set('live2d.' + key, val);\n    };\n    return LStore;\n}());\nexports.LStore = LStore;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbHN0b3JlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2xzdG9yZS50cz9kYmE4Il0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGNsYXNzIExTdG9yZSB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIGRlZlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KGtleTpzdHJpbmcsIGRlZiA9IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIXdpbmRvd1snc3RvcmUnXSl7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzdG9yZeacquWIneWni+WMliAnKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2luZG93WydzdG9yZSddLmdldCgnbGl2ZTJkLicra2V5LCBkZWYpXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzZXQoa2V5OnN0cmluZyx2YWwpe1xuICAgICAgICBpZiAoIXdpbmRvd1snc3RvcmUnXSl7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzdG9yZeacquWIneWni+WMlicpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aW5kb3dbJ3N0b3JlJ10uc2V0KCdsaXZlMmQuJytrZXksIHZhbClcbiAgICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUFBO0FBcUJBO0FBZkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXJCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/lstore.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lappdelegate_1 = __webpack_require__(/*! ./lappdelegate */ \"./src/lappdelegate.ts\");\nvar lapplive2dmanager_1 = __webpack_require__(/*! ./lapplive2dmanager */ \"./src/lapplive2dmanager.ts\");\nconsole.log('live2d_onload 加载准备');\nwindow[\"live2d_onload\"] = function (config) {\n    lappdelegate_1.LAppDelegate.getInstance().setLappModelEvent({\n        modelCompleteSetup: function () {\n            window[\"live2d\"] = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n            config.loadModelComplete();\n        }\n    });\n    if (lappdelegate_1.LAppDelegate.getInstance().initialize() == false) {\n        return;\n    }\n    lappdelegate_1.LAppDelegate.getInstance().run();\n};\nwindow.onbeforeunload = function () { return lappdelegate_1.LAppDelegate.releaseInstance(); };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluLnRzP2NkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQoYykgTGl2ZTJEIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTGl2ZTJEIE9wZW4gU29mdHdhcmUgbGljZW5zZVxuICogdGhhdCBjYW4gYmUgZm91bmQgYXQgaHR0cHM6Ly93d3cubGl2ZTJkLmNvbS9ldWxhL2xpdmUyZC1vcGVuLXNvZnR3YXJlLWxpY2Vuc2UtYWdyZWVtZW50X2VuLmh0bWwuXG4gKi9cblxuaW1wb3J0IHtMQXBwRGVsZWdhdGUsIGxBcHBEZWxlZ2F0ZUV2ZW50fSBmcm9tICcuL2xhcHBkZWxlZ2F0ZSc7XG5pbXBvcnQge0xBcHBMaXZlMkRNYW5hZ2VyfSBmcm9tIFwiLi9sYXBwbGl2ZTJkbWFuYWdlclwiO1xuaW1wb3J0IHtMQXBwTW9kZWwsIExvYWRTdGVwfSBmcm9tIFwiLi9sYXBwbW9kZWxcIjtcbmltcG9ydCB7TEFwcFBhbH0gZnJvbSBcIi4vbGFwcHBhbFwiO1xuaW50ZXJmYWNlIGNvbmZpZ3tcbiAgICBsb2FkTW9kZWxDb21wbGV0ZSgpOnZvaWQ7XG4gICAgbGl2ZTJkX2NvbmZpZzp7fTtcbn1cbmNvbnNvbGUubG9nKCdsaXZlMmRfb25sb2FkIOWKoOi9veWHhuWkhycpO1xud2luZG93W1wibGl2ZTJkX29ubG9hZFwiXSAgPSAoY29uZmlnOmNvbmZpZyk6IHZvaWQgPT4ge1xuICAgIExBcHBEZWxlZ2F0ZS5nZXRJbnN0YW5jZSgpLnNldExhcHBNb2RlbEV2ZW50KHtcbiAgICAgICAgbW9kZWxDb21wbGV0ZVNldHVwKCl7XG4gICAgICAgICAgICB3aW5kb3dbXCJsaXZlMmRcIl0gPSBMQXBwTGl2ZTJETWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgY29uZmlnLmxvYWRNb2RlbENvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC8vIGNyZWF0ZSB0aGUgYXBwbGljYXRpb24gaW5zdGFuY2VcbiAgICBpZiAoTEFwcERlbGVnYXRlLmdldEluc3RhbmNlKCkuaW5pdGlhbGl6ZSgpID09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBMQXBwRGVsZWdhdGUuZ2V0SW5zdGFuY2UoKS5ydW4oKTtcbn07XG5cbi8qKlxuICog57WC5LqG5pmC44Gu5Yem55CGXG4gKi9cbndpbmRvdy5vbmJlZm9yZXVubG9hZCA9ICgpOiB2b2lkID0+IExBcHBEZWxlZ2F0ZS5yZWxlYXNlSW5zdGFuY2UoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFPQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/touchmanager.ts":
/*!*****************************!*\
  !*** ./src/touchmanager.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TouchManager = void 0;\nvar TouchManager = (function () {\n    function TouchManager() {\n        this._startX = 0.0;\n        this._startY = 0.0;\n        this._lastX = 0.0;\n        this._lastY = 0.0;\n        this._lastX1 = 0.0;\n        this._lastY1 = 0.0;\n        this._lastX2 = 0.0;\n        this._lastY2 = 0.0;\n        this._lastTouchDistance = 0.0;\n        this._deltaX = 0.0;\n        this._deltaY = 0.0;\n        this._scale = 0.5;\n        this._touchSingle = false;\n        this._flipAvailable = false;\n    }\n    TouchManager.prototype.getCenterX = function () {\n        return this._lastX;\n    };\n    TouchManager.prototype.getCenterY = function () {\n        return this._lastY;\n    };\n    TouchManager.prototype.getDeltaX = function () {\n        return this._deltaX;\n    };\n    TouchManager.prototype.getDeltaY = function () {\n        return this._deltaY;\n    };\n    TouchManager.prototype.getStartX = function () {\n        return this._startX;\n    };\n    TouchManager.prototype.getStartY = function () {\n        return this._startY;\n    };\n    TouchManager.prototype.getScale = function () {\n        return this._scale;\n    };\n    TouchManager.prototype.getX = function () {\n        return this._lastX;\n    };\n    TouchManager.prototype.getY = function () {\n        return this._lastY;\n    };\n    TouchManager.prototype.getX1 = function () {\n        return this._lastX1;\n    };\n    TouchManager.prototype.getY1 = function () {\n        return this._lastY1;\n    };\n    TouchManager.prototype.getX2 = function () {\n        return this._lastX2;\n    };\n    TouchManager.prototype.getY2 = function () {\n        return this._lastY2;\n    };\n    TouchManager.prototype.isSingleTouch = function () {\n        return this._touchSingle;\n    };\n    TouchManager.prototype.isFlickAvailable = function () {\n        return this._flipAvailable;\n    };\n    TouchManager.prototype.disableFlick = function () {\n        this._flipAvailable = false;\n    };\n    TouchManager.prototype.touchesBegan = function (deviceX, deviceY) {\n        this._lastX = deviceX;\n        this._lastY = deviceY;\n        this._startX = deviceX;\n        this._startY = deviceY;\n        this._lastTouchDistance = -1.0;\n        this._flipAvailable = true;\n        this._touchSingle = true;\n    };\n    TouchManager.prototype.touchesMoved = function (deviceX, deviceY) {\n        this._lastX = deviceX;\n        this._lastY = deviceY;\n        this._lastTouchDistance = -1.0;\n        this._touchSingle = true;\n    };\n    TouchManager.prototype.getFlickDistance = function () {\n        return this.calculateDistance(this._startX, this._startY, this._lastX, this._lastY);\n    };\n    TouchManager.prototype.calculateDistance = function (x1, y1, x2, y2) {\n        return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n    };\n    TouchManager.prototype.calculateMovingAmount = function (v1, v2) {\n        if (v1 > 0.0 != v2 > 0.0) {\n            return 0.0;\n        }\n        var sign = v1 > 0.0 ? 1.0 : -1.0;\n        var absoluteValue1 = Math.abs(v1);\n        var absoluteValue2 = Math.abs(v2);\n        return (sign * (absoluteValue1 < absoluteValue2 ? absoluteValue1 : absoluteValue2));\n    };\n    return TouchManager;\n}());\nexports.TouchManager = TouchManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdG91Y2htYW5hZ2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3RvdWNobWFuYWdlci50cz9hMmVhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0KGMpIExpdmUyRCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgdGhlIExpdmUyRCBPcGVuIFNvZnR3YXJlIGxpY2Vuc2VcbiAqIHRoYXQgY2FuIGJlIGZvdW5kIGF0IGh0dHBzOi8vd3d3LmxpdmUyZC5jb20vZXVsYS9saXZlMmQtb3Blbi1zb2Z0d2FyZS1saWNlbnNlLWFncmVlbWVudF9lbi5odG1sLlxuICovXG5cbmV4cG9ydCBjbGFzcyBUb3VjaE1hbmFnZXIge1xuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdGFydFggPSAwLjA7XG4gICAgdGhpcy5fc3RhcnRZID0gMC4wO1xuICAgIHRoaXMuX2xhc3RYID0gMC4wO1xuICAgIHRoaXMuX2xhc3RZID0gMC4wO1xuICAgIHRoaXMuX2xhc3RYMSA9IDAuMDtcbiAgICB0aGlzLl9sYXN0WTEgPSAwLjA7XG4gICAgdGhpcy5fbGFzdFgyID0gMC4wO1xuICAgIHRoaXMuX2xhc3RZMiA9IDAuMDtcbiAgICB0aGlzLl9sYXN0VG91Y2hEaXN0YW5jZSA9IDAuMDtcbiAgICB0aGlzLl9kZWx0YVggPSAwLjA7XG4gICAgdGhpcy5fZGVsdGFZID0gMC4wO1xuICAgIHRoaXMuX3NjYWxlID0gMC41O1xuICAgIHRoaXMuX3RvdWNoU2luZ2xlID0gZmFsc2U7XG4gICAgdGhpcy5fZmxpcEF2YWlsYWJsZSA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGdldENlbnRlclgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbGFzdFg7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2VudGVyWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sYXN0WTtcbiAgfVxuXG4gIHB1YmxpYyBnZXREZWx0YVgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGVsdGFYO1xuICB9XG5cbiAgcHVibGljIGdldERlbHRhWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kZWx0YVk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RhcnRYKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXJ0WDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGFydFkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhcnRZO1xuICB9XG5cbiAgcHVibGljIGdldFNjYWxlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3NjYWxlO1xuICB9XG5cbiAgcHVibGljIGdldFgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbGFzdFg7XG4gIH1cblxuICBwdWJsaWMgZ2V0WSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sYXN0WTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRYMSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sYXN0WDE7XG4gIH1cblxuICBwdWJsaWMgZ2V0WTEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbGFzdFkxO1xuICB9XG5cbiAgcHVibGljIGdldFgyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2xhc3RYMjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRZMigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sYXN0WTI7XG4gIH1cblxuICBwdWJsaWMgaXNTaW5nbGVUb3VjaCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fdG91Y2hTaW5nbGU7XG4gIH1cblxuICBwdWJsaWMgaXNGbGlja0F2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZmxpcEF2YWlsYWJsZTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNhYmxlRmxpY2soKTogdm9pZCB7XG4gICAgdGhpcy5fZmxpcEF2YWlsYWJsZSA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCv+ODg+ODgemWi+Wni+aZguOCpOODmeODs+ODiFxuICAgKiBAcGFyYW0gZGV2aWNlWCDjgr/jg4Pjg4HjgZfjgZ/nlLvpnaLjga5444Gu5YCkXG4gICAqIEBwYXJhbSBkZXZpY2VZIOOCv+ODg+ODgeOBl+OBn+eUu+mdouOBrnnjga7lgKRcbiAgICovXG4gIHB1YmxpYyB0b3VjaGVzQmVnYW4oZGV2aWNlWDogbnVtYmVyLCBkZXZpY2VZOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9sYXN0WCA9IGRldmljZVg7XG4gICAgdGhpcy5fbGFzdFkgPSBkZXZpY2VZO1xuICAgIHRoaXMuX3N0YXJ0WCA9IGRldmljZVg7XG4gICAgdGhpcy5fc3RhcnRZID0gZGV2aWNlWTtcbiAgICB0aGlzLl9sYXN0VG91Y2hEaXN0YW5jZSA9IC0xLjA7XG4gICAgdGhpcy5fZmxpcEF2YWlsYWJsZSA9IHRydWU7XG4gICAgdGhpcy5fdG91Y2hTaW5nbGUgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOODieODqeODg+OCsOaZguOBruOCpOODmeODs+ODiFxuICAgKiBAcGFyYW0gZGV2aWNlWCDjgr/jg4Pjg4HjgZfjgZ/nlLvpnaLjga5444Gu5YCkXG4gICAqIEBwYXJhbSBkZXZpY2VZIOOCv+ODg+ODgeOBl+OBn+eUu+mdouOBrnnjga7lgKRcbiAgICovXG4gIHB1YmxpYyB0b3VjaGVzTW92ZWQoZGV2aWNlWDogbnVtYmVyLCBkZXZpY2VZOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9sYXN0WCA9IGRldmljZVg7XG4gICAgdGhpcy5fbGFzdFkgPSBkZXZpY2VZO1xuICAgIHRoaXMuX2xhc3RUb3VjaERpc3RhbmNlID0gLTEuMDtcbiAgICB0aGlzLl90b3VjaFNpbmdsZSA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICog44OV44Oq44OD44Kv44Gu6Led6Zui5ris5a6aXG4gICAqIEByZXR1cm4g44OV44Oq44OD44Kv6Led6ZuiXG4gICAqL1xuICBwdWJsaWMgZ2V0RmxpY2tEaXN0YW5jZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKFxuICAgICAgdGhpcy5fc3RhcnRYLFxuICAgICAgdGhpcy5fc3RhcnRZLFxuICAgICAgdGhpcy5fbGFzdFgsXG4gICAgICB0aGlzLl9sYXN0WVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog54K577yR44GL44KJ54K577yS44G444Gu6Led6Zui44KS5rGC44KB44KLXG4gICAqXG4gICAqIEBwYXJhbSB4MSDvvJHjgaTnm67jga7jgr/jg4Pjg4HjgZfjgZ/nlLvpnaLjga5444Gu5YCkXG4gICAqIEBwYXJhbSB5MSDvvJHjgaTnm67jga7jgr/jg4Pjg4HjgZfjgZ/nlLvpnaLjga5544Gu5YCkXG4gICAqIEBwYXJhbSB4MiDvvJLjgaTnm67jga7jgr/jg4Pjg4HjgZfjgZ/nlLvpnaLjga5444Gu5YCkXG4gICAqIEBwYXJhbSB5MiDvvJLjgaTnm67jga7jgr/jg4Pjg4HjgZfjgZ/nlLvpnaLjga5544Gu5YCkXG4gICAqL1xuICBwdWJsaWMgY2FsY3VsYXRlRGlzdGFuY2UoXG4gICAgeDE6IG51bWJlcixcbiAgICB5MTogbnVtYmVyLFxuICAgIHgyOiBudW1iZXIsXG4gICAgeTI6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoKHgxIC0geDIpICogKHgxIC0geDIpICsgKHkxIC0geTIpICogKHkxIC0geTIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDvvJLjgaTnm67jga7lgKTjgYvjgonjgIHnp7vli5Xph4/jgpLmsYLjgoHjgovjgIJcbiAgICog6YGV44GG5pa55ZCR44Gu5aC05ZCI44Gv56e75YuV6YeP77yQ44CC5ZCM44GY5pa55ZCR44Gu5aC05ZCI44Gv44CB57W25a++5YCk44GM5bCP44GV44GE5pa544Gu5YCk44KS5Y+C54Wn44GZ44KL44CCXG4gICAqXG4gICAqIEBwYXJhbSB2MSDvvJHjgaTnm67jga7np7vli5Xph49cbiAgICogQHBhcmFtIHYyIO+8kuOBpOebruOBruenu+WLlemHj1xuICAgKlxuICAgKiBAcmV0dXJuIOWwj+OBleOBhOaWueOBruenu+WLlemHj1xuICAgKi9cbiAgcHVibGljIGNhbGN1bGF0ZU1vdmluZ0Ftb3VudCh2MTogbnVtYmVyLCB2MjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAodjEgPiAwLjAgIT0gdjIgPiAwLjApIHtcbiAgICAgIHJldHVybiAwLjA7XG4gICAgfVxuXG4gICAgY29uc3Qgc2lnbjogbnVtYmVyID0gdjEgPiAwLjAgPyAxLjAgOiAtMS4wO1xuICAgIGNvbnN0IGFic29sdXRlVmFsdWUxID0gTWF0aC5hYnModjEpO1xuICAgIGNvbnN0IGFic29sdXRlVmFsdWUyID0gTWF0aC5hYnModjIpO1xuICAgIHJldHVybiAoXG4gICAgICBzaWduICogKGFic29sdXRlVmFsdWUxIDwgYWJzb2x1dGVWYWx1ZTIgPyBhYnNvbHV0ZVZhbHVlMSA6IGFic29sdXRlVmFsdWUyKVxuICAgICk7XG4gIH1cblxuICBfc3RhcnRZOiBudW1iZXI7IC8vIOOCv+ODg+ODgeOCkumWi+Wni+OBl+OBn+aZguOBrnjjga7lgKRcbiAgX3N0YXJ0WDogbnVtYmVyOyAvLyDjgr/jg4Pjg4HjgpLplovlp4vjgZfjgZ/mmYLjga5544Gu5YCkXG4gIF9sYXN0WDogbnVtYmVyOyAvLyDjgrfjg7PjgrDjg6vjgr/jg4Pjg4HmmYLjga5444Gu5YCkXG4gIF9sYXN0WTogbnVtYmVyOyAvLyDjgrfjg7PjgrDjg6vjgr/jg4Pjg4HmmYLjga5544Gu5YCkXG4gIF9sYXN0WDE6IG51bWJlcjsgLy8g44OA44OW44Or44K/44OD44OB5pmC44Gu5LiA44Gk55uu44GueOOBruWApFxuICBfbGFzdFkxOiBudW1iZXI7IC8vIOODgOODluODq+OCv+ODg+ODgeaZguOBruS4gOOBpOebruOBrnnjga7lgKRcbiAgX2xhc3RYMjogbnVtYmVyOyAvLyDjg4Djg5bjg6vjgr/jg4Pjg4HmmYLjga7kuozjgaTnm67jga5444Gu5YCkXG4gIF9sYXN0WTI6IG51bWJlcjsgLy8g44OA44OW44Or44K/44OD44OB5pmC44Gu5LqM44Gk55uu44GueeOBruWApFxuICBfbGFzdFRvdWNoRGlzdGFuY2U6IG51bWJlcjsgLy8gMuacrOS7peS4iuOBp+OCv+ODg+ODgeOBl+OBn+OBqOOBjeOBruaMh+OBrui3nembolxuICBfZGVsdGFYOiBudW1iZXI7IC8vIOWJjeWbnuOBruWApOOBi+OCieS7iuWbnuOBruWApOOBuOOBrnjjga7np7vli5Xot53pm6LjgIJcbiAgX2RlbHRhWTogbnVtYmVyOyAvLyDliY3lm57jga7lgKTjgYvjgonku4rlm57jga7lgKTjgbjjga5544Gu56e75YuV6Led6Zui44CCXG4gIF9zY2FsZTogbnVtYmVyOyAvLyDlnKjov5nkuKrmoYbmnrbkuIrnm7jkuZjnmoTmlL7lpKfnjofjgILmianlpKfmk43kvZzkuK3ku6XlpJYx44CCXG4gIF90b3VjaFNpbmdsZTogYm9vbGVhbjsgLy8g44K344Oz44Kw44Or44K/44OD44OB5pmC44GvdHJ1ZVxuICBfZmxpcEF2YWlsYWJsZTogYm9vbGVhbjsgLy8g44OV44Oq44OD44OX44GM5pyJ5Yq544GL44Gp44GG44GLXG59XG4iXSwibWFwcGluZ3MiOiI7OztBQU9BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBTUE7QUFVQTtBQU1BO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFnQkE7QUFBQTtBQWxMQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/touchmanager.ts\n");

/***/ })

/******/ });